var jC=Object.defineProperty;var zC=(e,t,n)=>t in e?jC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>zC(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Cm(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const vi={},Vf=[],hu=()=>{},UC=()=>!1,Sp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),B1=e=>e.startsWith("onUpdate:"),eo=Object.assign,O1=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},$C=Object.prototype.hasOwnProperty,Oi=(e,t)=>$C.call(e,t),Jn=Array.isArray,Hf=e=>ld(e)==="[object Map]",of=e=>ld(e)==="[object Set]",B2=e=>ld(e)==="[object Date]",VC=e=>ld(e)==="[object RegExp]",br=e=>typeof e=="function",uo=e=>typeof e=="string",zu=e=>typeof e=="symbol",Gi=e=>e!==null&&typeof e=="object",N1=e=>(Gi(e)||br(e))&&br(e.then)&&br(e.catch),n4=Object.prototype.toString,ld=e=>n4.call(e),HC=e=>ld(e).slice(8,-1),Pm=e=>ld(e)==="[object Object]",D1=e=>uo(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Gf=Cm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Am=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},GC=/-(\w)/g,da=Am(e=>e.replace(GC,(t,n)=>n?n.toUpperCase():"")),qC=/\B([A-Z])/g,Ll=Am(e=>e.replace(qC,"-$1").toLowerCase()),Ep=Am(e=>e.charAt(0).toUpperCase()+e.slice(1)),Gd=Am(e=>e?`on${Ep(e)}`:""),Qa=(e,t)=>!Object.is(e,t),qf=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},r4=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Z0=e=>{const t=parseFloat(e);return isNaN(t)?e:t},K0=e=>{const t=uo(e)?Number(e):NaN;return isNaN(t)?e:t};let O2;const Mm=()=>O2||(O2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),WC="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",ZC=Cm(WC);function el(e){if(Jn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=uo(r)?JC(r):el(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(uo(e)||Gi(e))return e}const KC=/;(?![^(]*\))/g,YC=/:([^]+)/,XC=/\/\*[^]*?\*\//g;function JC(e){const t={};return e.replace(XC,"").split(KC).forEach(n=>{if(n){const r=n.split(YC);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ni(e){let t="";if(uo(e))t=e;else if(Jn(e))for(let n=0;n<e.length;n++){const r=Ni(e[n]);r&&(t+=r+" ")}else if(Gi(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function QC(e){if(!e)return null;let{class:t,style:n}=e;return t&&!uo(t)&&(e.class=Ni(t)),n&&(e.style=el(n)),e}const eP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tP=Cm(eP);function i4(e){return!!e||e===""}function nP(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=yh(e[r],t[r]);return n}function yh(e,t){if(e===t)return!0;let n=B2(e),r=B2(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=zu(e),r=zu(t),n||r)return e===t;if(n=Jn(e),r=Jn(t),n||r)return n&&r?nP(e,t):!1;if(n=Gi(e),r=Gi(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),h=t.hasOwnProperty(o);if(u&&!h||!u&&h||!yh(e[o],t[o]))return!1}}return String(e)===String(t)}function km(e,t){return e.findIndex(n=>yh(n,t))}const o4=e=>!!(e&&e.__v_isRef===!0),Ht=e=>uo(e)?e:e==null?"":Jn(e)||Gi(e)&&(e.toString===n4||!br(e.toString))?o4(e)?Ht(e.value):JSON.stringify(e,s4,2):String(e),s4=(e,t)=>o4(t)?s4(e,t.value):Hf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[Dg(r,s)+" =>"]=i,n),{})}:of(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Dg(n))}:zu(t)?Dg(t):Gi(t)&&!Jn(t)&&!Pm(t)?String(t):t,Dg=(e,t="")=>{var n;return zu(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ja;class I1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ja,!t&&Ja&&(this.index=(Ja.scopes||(Ja.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ja;try{return Ja=this,t()}finally{Ja=n}}}on(){Ja=this}off(){Ja=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function R1(e){return new I1(e)}function F1(){return Ja}function a4(e,t=!1){Ja&&Ja.cleanups.push(e)}let lo;const Ig=new WeakSet;class up{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ja&&Ja.active&&Ja.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ig.has(this)&&(Ig.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||u4(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,N2(this),c4(this);const t=lo,n=ju;lo=this,ju=!0;try{return this.fn()}finally{h4(this),lo=t,ju=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)U1(t);this.deps=this.depsTail=void 0,N2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ig.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ev(this)&&this.run()}get dirty(){return Ev(this)}}let l4=0,qd,Wd;function u4(e,t=!1){if(e.flags|=8,t){e.next=Wd,Wd=e;return}e.next=qd,qd=e}function j1(){l4++}function z1(){if(--l4>0)return;if(Wd){let t=Wd;for(Wd=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;qd;){let t=qd;for(qd=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function c4(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function h4(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),U1(r),rP(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Ev(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(f4(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function f4(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cp))return;e.globalVersion=cp;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ev(e)){e.flags&=-3;return}const n=lo,r=ju;lo=e,ju=!0;try{c4(e);const i=e.fn(e._value);(t.version===0||Qa(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{lo=n,ju=r,h4(e),e.flags&=-3}}function U1(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)U1(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function rP(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function iP(e,t){e.effect instanceof up&&(e=e.effect.fn);const n=new up(e);t&&eo(n,t);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function oP(e){e.effect.stop()}let ju=!0;const d4=[];function Lh(){d4.push(ju),ju=!1}function Sh(){const e=d4.pop();ju=e===void 0?!0:e}function N2(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=lo;lo=void 0;try{t()}finally{lo=n}}}let cp=0;class sP{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tm{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!lo||!ju||lo===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==lo)n=this.activeLink=new sP(lo,this),lo.deps?(n.prevDep=lo.depsTail,lo.depsTail.nextDep=n,lo.depsTail=n):lo.deps=lo.depsTail=n,p4(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=lo.depsTail,n.nextDep=void 0,lo.depsTail.nextDep=n,lo.depsTail=n,lo.deps===n&&(lo.deps=r)}return n}trigger(t){this.version++,cp++,this.notify(t)}notify(t){j1();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{z1()}}}function p4(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)p4(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Y0=new WeakMap,Zh=Symbol(""),Cv=Symbol(""),hp=Symbol("");function Oa(e,t,n){if(ju&&lo){let r=Y0.get(e);r||Y0.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Tm),i.map=r,i.key=n),i.track()}}function Nc(e,t,n,r,i,s){const o=Y0.get(e);if(!o){cp++;return}const u=h=>{h&&h.trigger()};if(j1(),t==="clear")o.forEach(u);else{const h=Jn(e),d=h&&D1(n);if(h&&n==="length"){const g=Number(r);o.forEach((y,w)=>{(w==="length"||w===hp||!zu(w)&&w>=g)&&u(y)})}else switch((n!==void 0||o.has(void 0))&&u(o.get(n)),d&&u(o.get(hp)),t){case"add":h?d&&u(o.get("length")):(u(o.get(Zh)),Hf(e)&&u(o.get(Cv)));break;case"delete":h||(u(o.get(Zh)),Hf(e)&&u(o.get(Cv)));break;case"set":Hf(e)&&u(o.get(Zh));break}}z1()}function aP(e,t){const n=Y0.get(e);return n&&n.get(t)}function Sf(e){const t=gi(e);return t===e?t:(Oa(t,"iterate",hp),Hl(e)?t:t.map(Na))}function Bm(e){return Oa(e=gi(e),"iterate",hp),e}const lP={__proto__:null,[Symbol.iterator](){return Rg(this,Symbol.iterator,Na)},concat(...e){return Sf(this).concat(...e.map(t=>Jn(t)?Sf(t):t))},entries(){return Rg(this,"entries",e=>(e[1]=Na(e[1]),e))},every(e,t){return Mc(this,"every",e,t,void 0,arguments)},filter(e,t){return Mc(this,"filter",e,t,n=>n.map(Na),arguments)},find(e,t){return Mc(this,"find",e,t,Na,arguments)},findIndex(e,t){return Mc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Mc(this,"findLast",e,t,Na,arguments)},findLastIndex(e,t){return Mc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Mc(this,"forEach",e,t,void 0,arguments)},includes(...e){return Fg(this,"includes",e)},indexOf(...e){return Fg(this,"indexOf",e)},join(e){return Sf(this).join(e)},lastIndexOf(...e){return Fg(this,"lastIndexOf",e)},map(e,t){return Mc(this,"map",e,t,void 0,arguments)},pop(){return xd(this,"pop")},push(...e){return xd(this,"push",e)},reduce(e,...t){return D2(this,"reduce",e,t)},reduceRight(e,...t){return D2(this,"reduceRight",e,t)},shift(){return xd(this,"shift")},some(e,t){return Mc(this,"some",e,t,void 0,arguments)},splice(...e){return xd(this,"splice",e)},toReversed(){return Sf(this).toReversed()},toSorted(e){return Sf(this).toSorted(e)},toSpliced(...e){return Sf(this).toSpliced(...e)},unshift(...e){return xd(this,"unshift",e)},values(){return Rg(this,"values",Na)}};function Rg(e,t,n){const r=Bm(e),i=r[t]();return r!==e&&!Hl(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const uP=Array.prototype;function Mc(e,t,n,r,i,s){const o=Bm(e),u=o!==e&&!Hl(e),h=o[t];if(h!==uP[t]){const y=h.apply(e,s);return u?Na(y):y}let d=n;o!==e&&(u?d=function(y,w){return n.call(this,Na(y),w,e)}:n.length>2&&(d=function(y,w){return n.call(this,y,w,e)}));const g=h.call(o,d,r);return u&&i?i(g):g}function D2(e,t,n,r){const i=Bm(e);let s=n;return i!==e&&(Hl(e)?n.length>3&&(s=function(o,u,h){return n.call(this,o,u,h,e)}):s=function(o,u,h){return n.call(this,o,Na(u),h,e)}),i[t](s,...r)}function Fg(e,t,n){const r=gi(e);Oa(r,"iterate",hp);const i=r[t](...n);return(i===-1||i===!1)&&Dm(n[0])?(n[0]=gi(n[0]),r[t](...n)):i}function xd(e,t,n=[]){Lh(),j1();const r=gi(e)[t].apply(e,n);return z1(),Sh(),r}const cP=Cm("__proto__,__v_isRef,__isVue"),m4=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(zu));function hP(e){zu(e)||(e=String(e));const t=gi(this);return Oa(t,"has",e),t.hasOwnProperty(e)}class g4{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?x4:w4:s?b4:_4).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Jn(t);if(!i){let h;if(o&&(h=lP[n]))return h;if(n==="hasOwnProperty")return hP}const u=Reflect.get(t,n,zo(t)?t:r);return(zu(n)?m4.has(n):cP(n))||(i||Oa(t,"get",n),s)?u:zo(u)?o&&D1(n)?u:u.value:Gi(u)?i?Nu(u):mu(u):u}}class v4 extends g4{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const h=_h(s);if(!Hl(r)&&!_h(r)&&(s=gi(s),r=gi(r)),!Jn(t)&&zo(s)&&!zo(r))return h?!1:(s.value=r,!0)}const o=Jn(t)&&D1(n)?Number(n)<t.length:Oi(t,n),u=Reflect.set(t,n,r,zo(t)?t:i);return t===gi(i)&&(o?Qa(r,s)&&Nc(t,"set",n,r):Nc(t,"add",n,r)),u}deleteProperty(t,n){const r=Oi(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Nc(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!zu(n)||!m4.has(n))&&Oa(t,"has",n),r}ownKeys(t){return Oa(t,"iterate",Jn(t)?"length":Zh),Reflect.ownKeys(t)}}class y4 extends g4{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const fP=new v4,dP=new y4,pP=new v4(!0),mP=new y4(!0),Pv=e=>e,r0=e=>Reflect.getPrototypeOf(e);function gP(e,t,n){return function(...r){const i=this.__v_raw,s=gi(i),o=Hf(s),u=e==="entries"||e===Symbol.iterator&&o,h=e==="keys"&&o,d=i[e](...r),g=n?Pv:t?Av:Na;return!t&&Oa(s,"iterate",h?Cv:Zh),{next(){const{value:y,done:w}=d.next();return w?{value:y,done:w}:{value:u?[g(y[0]),g(y[1])]:g(y),done:w}},[Symbol.iterator](){return this}}}}function i0(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vP(e,t){const n={get(i){const s=this.__v_raw,o=gi(s),u=gi(i);e||(Qa(i,u)&&Oa(o,"get",i),Oa(o,"get",u));const{has:h}=r0(o),d=t?Pv:e?Av:Na;if(h.call(o,i))return d(s.get(i));if(h.call(o,u))return d(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Oa(gi(i),"iterate",Zh),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=gi(s),u=gi(i);return e||(Qa(i,u)&&Oa(o,"has",i),Oa(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,h=gi(u),d=t?Pv:e?Av:Na;return!e&&Oa(h,"iterate",Zh),u.forEach((g,y)=>i.call(s,d(g),d(y),o))}};return eo(n,e?{add:i0("add"),set:i0("set"),delete:i0("delete"),clear:i0("clear")}:{add(i){!t&&!Hl(i)&&!_h(i)&&(i=gi(i));const s=gi(this);return r0(s).has.call(s,i)||(s.add(i),Nc(s,"add",i,i)),this},set(i,s){!t&&!Hl(s)&&!_h(s)&&(s=gi(s));const o=gi(this),{has:u,get:h}=r0(o);let d=u.call(o,i);d||(i=gi(i),d=u.call(o,i));const g=h.call(o,i);return o.set(i,s),d?Qa(s,g)&&Nc(o,"set",i,s):Nc(o,"add",i,s),this},delete(i){const s=gi(this),{has:o,get:u}=r0(s);let h=o.call(s,i);h||(i=gi(i),h=o.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return h&&Nc(s,"delete",i,void 0),d},clear(){const i=gi(this),s=i.size!==0,o=i.clear();return s&&Nc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=gP(i,e,t)}),n}function Om(e,t){const n=vP(e,t);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Oi(n,i)&&i in r?n:r,i,s)}const yP={get:Om(!1,!1)},_P={get:Om(!1,!0)},bP={get:Om(!0,!1)},wP={get:Om(!0,!0)},_4=new WeakMap,b4=new WeakMap,w4=new WeakMap,x4=new WeakMap;function xP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LP(e){return e.__v_skip||!Object.isExtensible(e)?0:xP(HC(e))}function mu(e){return _h(e)?e:Nm(e,!1,fP,yP,_4)}function $1(e){return Nm(e,!1,pP,_P,b4)}function Nu(e){return Nm(e,!0,dP,bP,w4)}function SP(e){return Nm(e,!0,mP,wP,x4)}function Nm(e,t,n,r,i){if(!Gi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=LP(e);if(o===0)return e;const u=new Proxy(e,o===2?r:n);return i.set(e,u),u}function cc(e){return _h(e)?cc(e.__v_raw):!!(e&&e.__v_isReactive)}function _h(e){return!!(e&&e.__v_isReadonly)}function Hl(e){return!!(e&&e.__v_isShallow)}function Dm(e){return e?!!e.__v_raw:!1}function gi(e){const t=e&&e.__v_raw;return t?gi(t):e}function Im(e){return!Oi(e,"__v_skip")&&Object.isExtensible(e)&&r4(e,"__v_skip",!0),e}const Na=e=>Gi(e)?mu(e):e,Av=e=>Gi(e)?Nu(e):e;function zo(e){return e?e.__v_isRef===!0:!1}function It(e){return L4(e,!1)}function V1(e){return L4(e,!0)}function L4(e,t){return zo(e)?e:new EP(e,t)}class EP{constructor(t,n){this.dep=new Tm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gi(t),this._value=n?t:Na(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Hl(t)||_h(t);t=r?t:gi(t),Qa(t,n)&&(this._rawValue=t,this._value=r?t:Na(t),this.dep.trigger())}}function CP(e){e.dep&&e.dep.trigger()}function qn(e){return zo(e)?e.value:e}function PP(e){return br(e)?e():qn(e)}const AP={get:(e,t,n)=>t==="__v_raw"?e:qn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return zo(i)&&!zo(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function H1(e){return cc(e)?e:new Proxy(e,AP)}class MP{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Tm,{get:r,set:i}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function S4(e){return new MP(e)}function E4(e){const t=Jn(e)?new Array(e.length):{};for(const n in e)t[n]=C4(e,n);return t}class kP{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return aP(gi(this._object),this._key)}}class TP{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function BP(e,t,n){return zo(e)?e:br(e)?new TP(e):Gi(e)&&arguments.length>1?C4(e,t,n):It(e)}function C4(e,t,n){const r=e[t];return zo(r)?r:new kP(e,t,n)}class OP{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Tm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&lo!==this)return u4(this,!0),!0}get value(){const t=this.dep.track();return f4(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function NP(e,t,n=!1){let r,i;return br(e)?r=e:(r=e.get,i=e.set),new OP(r,i,n)}const DP={GET:"get",HAS:"has",ITERATE:"iterate"},IP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},o0={},X0=new WeakMap;let oh;function RP(){return oh}function P4(e,t=!1,n=oh){if(n){let r=X0.get(n);r||X0.set(n,r=[]),r.push(e)}}function FP(e,t,n=vi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:u,call:h}=n,d=X=>i?X:Hl(X)||i===!1||i===0?Dc(X,1):Dc(X);let g,y,w,_,P=!1,T=!1;if(zo(e)?(y=()=>e.value,P=Hl(e)):cc(e)?(y=()=>d(e),P=!0):Jn(e)?(T=!0,P=e.some(X=>cc(X)||Hl(X)),y=()=>e.map(X=>{if(zo(X))return X.value;if(cc(X))return d(X);if(br(X))return h?h(X,2):X()})):br(e)?t?y=h?()=>h(e,2):e:y=()=>{if(w){Lh();try{w()}finally{Sh()}}const X=oh;oh=g;try{return h?h(e,3,[_]):e(_)}finally{oh=X}}:y=hu,t&&i){const X=y,se=i===!0?1/0:i;y=()=>Dc(X(),se)}const j=F1(),D=()=>{g.stop(),j&&j.active&&O1(j.effects,g)};if(s&&t){const X=t;t=(...se)=>{X(...se),D()}}let U=T?new Array(e.length).fill(o0):o0;const K=X=>{if(!(!(g.flags&1)||!g.dirty&&!X))if(t){const se=g.run();if(i||P||(T?se.some((me,Le)=>Qa(me,U[Le])):Qa(se,U))){w&&w();const me=oh;oh=g;try{const Le=[se,U===o0?void 0:T&&U[0]===o0?[]:U,_];h?h(t,3,Le):t(...Le),U=se}finally{oh=me}}}else g.run()};return u&&u(K),g=new up(y),g.scheduler=o?()=>o(K,!1):K,_=X=>P4(X,!1,g),w=g.onStop=()=>{const X=X0.get(g);if(X){if(h)h(X,4);else for(const se of X)se();X0.delete(g)}},t?r?K(!0):U=g.run():o?o(K.bind(null,!0),!0):g.run(),D.pause=g.pause.bind(g),D.resume=g.resume.bind(g),D.stop=D,D}function Dc(e,t=1/0,n){if(t<=0||!Gi(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,zo(e))Dc(e.value,t,n);else if(Jn(e))for(let r=0;r<e.length;r++)Dc(e[r],t,n);else if(of(e)||Hf(e))e.forEach(r=>{Dc(r,t,n)});else if(Pm(e)){for(const r in e)Dc(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Dc(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const A4=[];function jP(e){A4.push(e)}function zP(){A4.pop()}function UP(e,t){}const $P={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},VP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ud(e,t,n,r){try{return r?e(...r):e()}catch(i){sf(i,t,n)}}function du(e,t,n,r){if(br(e)){const i=ud(e,t,n,r);return i&&N1(i)&&i.catch(s=>{sf(s,t,n)}),i}if(Jn(e)){const i=[];for(let s=0;s<e.length;s++)i.push(du(e[s],t,n,r));return i}}function sf(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||vi;if(t){let u=t.parent;const h=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const g=u.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](e,h,d)===!1)return}u=u.parent}if(s){Lh(),ud(s,null,10,[e,h,d]),Sh();return}}HP(e,n,i,r,o)}function HP(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const tl=[];let oc=-1;const Wf=[];let sh=null,Of=0;const M4=Promise.resolve();let J0=null;function Ws(e){const t=J0||M4;return e?t.then(this?e.bind(this):e):t}function GP(e){let t=oc+1,n=tl.length;for(;t<n;){const r=t+n>>>1,i=tl[r],s=dp(i);s<e||s===e&&i.flags&2?t=r+1:n=r}return t}function G1(e){if(!(e.flags&1)){const t=dp(e),n=tl[tl.length-1];!n||!(e.flags&2)&&t>=dp(n)?tl.push(e):tl.splice(GP(t),0,e),e.flags|=1,k4()}}function k4(){J0||(J0=M4.then(T4))}function fp(e){Jn(e)?Wf.push(...e):sh&&e.id===-1?sh.splice(Of+1,0,e):e.flags&1||(Wf.push(e),e.flags|=1),k4()}function I2(e,t,n=oc+1){for(;n<tl.length;n++){const r=tl[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;tl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Q0(e){if(Wf.length){const t=[...new Set(Wf)].sort((n,r)=>dp(n)-dp(r));if(Wf.length=0,sh){sh.push(...t);return}for(sh=t,Of=0;Of<sh.length;Of++){const n=sh[Of];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}sh=null,Of=0}}const dp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function T4(e){try{for(oc=0;oc<tl.length;oc++){const t=tl[oc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ud(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oc<tl.length;oc++){const t=tl[oc];t&&(t.flags&=-2)}oc=-1,tl.length=0,Q0(),J0=null,(tl.length||Wf.length)&&T4()}}let Nf,s0=[];function B4(e,t){var n,r;Nf=e,Nf?(Nf.enabled=!0,s0.forEach(({event:i,args:s})=>Nf.emit(i,...s)),s0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{B4(s,t)}),setTimeout(()=>{Nf||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,s0=[])},3e3)):s0=[]}let Ds=null,Rm=null;function pp(e){const t=Ds;return Ds=e,Rm=e&&e.type.__scopeId||null,t}function qP(e){Rm=e}function WP(){Rm=null}const ZP=e=>$l;function $l(e,t=Ds,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Iv(-1);const s=pp(t);let o;try{o=e(...i)}finally{pp(s),r._d&&Iv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Hn(e,t){if(Ds===null)return e;const n=Ap(Ds),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,u,h=vi]=t[i];s&&(br(s)&&(s={mounted:s,updated:s}),s.deep&&Dc(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:u,modifiers:h}))}return e}function sc(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let h=u.dir[r];h&&(Lh(),du(h,n,8,[e.el,u,e,t]),Sh())}}const O4=Symbol("_vte"),N4=e=>e.__isTeleport,Zd=e=>e&&(e.disabled||e.disabled===""),R2=e=>e&&(e.defer||e.defer===""),F2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,j2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Mv=(e,t)=>{const n=e&&e.to;return uo(n)?t?t(n):null:n},D4={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,s,o,u,h,d){const{mc:g,pc:y,pbc:w,o:{insert:_,querySelector:P,createText:T,createComment:j}}=d,D=Zd(t.props);let{shapeFlag:U,children:K,dynamicChildren:X}=t;if(e==null){const se=t.el=T(""),me=t.anchor=T("");_(se,n,r),_(me,n,r);const Le=(R,Z)=>{U&16&&(i&&i.isCE&&(i.ce._teleportTarget=R),g(K,R,Z,i,s,o,u,h))},H=()=>{const R=t.target=Mv(t.props,P),Z=I4(R,t,T,_);R&&(o!=="svg"&&F2(R)?o="svg":o!=="mathml"&&j2(R)&&(o="mathml"),D||(Le(R,Z),A0(t,!1)))};D&&(Le(n,me),A0(t,!0)),R2(t.props)?Os(()=>{H(),t.el.__isMounted=!0},s):H()}else{if(R2(t.props)&&!e.el.__isMounted){Os(()=>{D4.process(e,t,n,r,i,s,o,u,h,d),delete e.el.__isMounted},s);return}t.el=e.el,t.targetStart=e.targetStart;const se=t.anchor=e.anchor,me=t.target=e.target,Le=t.targetAnchor=e.targetAnchor,H=Zd(e.props),R=H?n:me,Z=H?se:Le;if(o==="svg"||F2(me)?o="svg":(o==="mathml"||j2(me))&&(o="mathml"),X?(w(e.dynamicChildren,X,R,i,s,o,u),ty(e,t,!0)):h||y(e,t,R,Z,i,s,o,u,!1),D)H?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):a0(t,n,se,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const z=t.target=Mv(t.props,P);z&&a0(t,z,null,d,0)}else H&&a0(t,me,Le,d,1);A0(t,D)}},remove(e,t,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:u,anchor:h,targetStart:d,targetAnchor:g,target:y,props:w}=e;if(y&&(i(d),i(g)),s&&i(h),o&16){const _=s||!Zd(w);for(let P=0;P<u.length;P++){const T=u[P];r(T,t,n,_,!!T.dynamicChildren)}}},move:a0,hydrate:KP};function a0(e,t,n,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,t,n);const{el:o,anchor:u,shapeFlag:h,children:d,props:g}=e,y=s===2;if(y&&r(o,t,n),(!y||Zd(g))&&h&16)for(let w=0;w<d.length;w++)i(d[w],t,n,2);y&&r(u,t,n)}function KP(e,t,n,r,i,s,{o:{nextSibling:o,parentNode:u,querySelector:h,insert:d,createText:g}},y){const w=t.target=Mv(t.props,h);if(w){const _=Zd(t.props),P=w._lpa||w.firstChild;if(t.shapeFlag&16)if(_)t.anchor=y(o(e),t,u(e),n,r,i,s),t.targetStart=P,t.targetAnchor=P&&o(P);else{t.anchor=o(e);let T=P;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")t.targetStart=T;else if(T.data==="teleport anchor"){t.targetAnchor=T,w._lpa=t.targetAnchor&&o(t.targetAnchor);break}}T=o(T)}t.targetAnchor||I4(w,t,g,d),y(P&&o(P),t,w,n,r,i,s)}A0(t,_)}return t.anchor&&o(t.anchor)}const P0=D4;function A0(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function I4(e,t,n,r){const i=t.targetStart=n(""),s=t.targetAnchor=n("");return i[O4]=s,e&&(r(i,e),r(s,e)),s}const ah=Symbol("_leaveCb"),l0=Symbol("_enterCb");function q1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ma(()=>{e.isMounted=!0}),cd(()=>{e.isUnmounting=!0}),e}const iu=[Function,Array],W1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:iu,onEnter:iu,onAfterEnter:iu,onEnterCancelled:iu,onBeforeLeave:iu,onLeave:iu,onAfterLeave:iu,onLeaveCancelled:iu,onBeforeAppear:iu,onAppear:iu,onAfterAppear:iu,onAppearCancelled:iu},R4=e=>{const t=e.subTree;return t.component?R4(t.component):t},YP={name:"BaseTransition",props:W1,setup(e,{slots:t}){const n=gu(),r=q1();return()=>{const i=t.default&&Fm(t.default(),!0);if(!i||!i.length)return;const s=F4(i),o=gi(e),{mode:u}=o;if(r.isLeaving)return jg(s);const h=z2(s);if(!h)return jg(s);let d=ed(h,o,r,n,y=>d=y);h.type!==Ss&&Fc(h,d);let g=n.subTree&&z2(n.subTree);if(g&&g.type!==Ss&&!Ru(h,g)&&R4(n).type!==Ss){let y=ed(g,o,r,n);if(Fc(g,y),u==="out-in"&&h.type!==Ss)return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete y.afterLeave,g=void 0},jg(s);u==="in-out"&&h.type!==Ss?y.delayLeave=(w,_,P)=>{const T=z4(r,g);T[String(g.key)]=g,w[ah]=()=>{_(),w[ah]=void 0,delete d.delayedLeave,g=void 0},d.delayedLeave=()=>{P(),delete d.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return s}}};function F4(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Ss){t=n;break}}return t}const j4=YP;function z4(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ed(e,t,n,r,i){const{appear:s,mode:o,persisted:u=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:g,onEnterCancelled:y,onBeforeLeave:w,onLeave:_,onAfterLeave:P,onLeaveCancelled:T,onBeforeAppear:j,onAppear:D,onAfterAppear:U,onAppearCancelled:K}=t,X=String(e.key),se=z4(n,e),me=(R,Z)=>{R&&du(R,r,9,Z)},Le=(R,Z)=>{const z=Z[1];me(R,Z),Jn(R)?R.every(O=>O.length<=1)&&z():R.length<=1&&z()},H={mode:o,persisted:u,beforeEnter(R){let Z=h;if(!n.isMounted)if(s)Z=j||h;else return;R[ah]&&R[ah](!0);const z=se[X];z&&Ru(e,z)&&z.el[ah]&&z.el[ah](),me(Z,[R])},enter(R){let Z=d,z=g,O=y;if(!n.isMounted)if(s)Z=D||d,z=U||g,O=K||y;else return;let k=!1;const I=R[l0]=W=>{k||(k=!0,W?me(O,[R]):me(z,[R]),H.delayedLeave&&H.delayedLeave(),R[l0]=void 0)};Z?Le(Z,[R,I]):I()},leave(R,Z){const z=String(e.key);if(R[l0]&&R[l0](!0),n.isUnmounting)return Z();me(w,[R]);let O=!1;const k=R[ah]=I=>{O||(O=!0,Z(),I?me(T,[R]):me(P,[R]),R[ah]=void 0,se[z]===e&&delete se[z])};se[z]=e,_?Le(_,[R,k]):k()},clone(R){const Z=ed(R,t,n,r,i);return i&&i(Z),Z}};return H}function jg(e){if(Cp(e))return e=pc(e),e.children=null,e}function z2(e){if(!Cp(e))return N4(e.type)&&e.children?F4(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&br(n.default))return n.default()}}function Fc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Fc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Fm(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const u=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===In?(o.patchFlag&128&&i++,r=r.concat(Fm(o.children,t,u))):(t||o.type!==Ss)&&r.push(u!=null?pc(o,{key:u}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Jo(e,t){return br(e)?eo({name:e.name},t,{setup:e}):e}function XP(){const e=gu();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Z1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function JP(e){const t=gu(),n=V1(null);if(t){const i=t.refs===vi?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function mp(e,t,n,r,i=!1){if(Jn(e)){e.forEach((P,T)=>mp(P,t&&(Jn(t)?t[T]:t),n,r,i));return}if(mh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&mp(e,t,n,r.component.subTree);return}const s=r.shapeFlag&4?Ap(r.component):r.el,o=i?null:s,{i:u,r:h}=e,d=t&&t.r,g=u.refs===vi?u.refs={}:u.refs,y=u.setupState,w=gi(y),_=y===vi?()=>!1:P=>Oi(w,P);if(d!=null&&d!==h&&(uo(d)?(g[d]=null,_(d)&&(y[d]=null)):zo(d)&&(d.value=null)),br(h))ud(h,u,12,[o,g]);else{const P=uo(h),T=zo(h);if(P||T){const j=()=>{if(e.f){const D=P?_(h)?y[h]:g[h]:h.value;i?Jn(D)&&O1(D,s):Jn(D)?D.includes(s)||D.push(s):P?(g[h]=[s],_(h)&&(y[h]=g[h])):(h.value=[s],e.k&&(g[e.k]=h.value))}else P?(g[h]=o,_(h)&&(y[h]=o)):T&&(h.value=o,e.k&&(g[e.k]=o))};o?(j.id=-1,Os(j,n)):j()}}}let U2=!1;const Ef=()=>{U2||(console.error("Hydration completed but contains mismatches."),U2=!0)},QP=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",eA=e=>e.namespaceURI.includes("MathML"),u0=e=>{if(e.nodeType===1){if(QP(e))return"svg";if(eA(e))return"mathml"}},zf=e=>e.nodeType===8;function tA(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:u,insert:h,createComment:d}}=e,g=(K,X)=>{if(!X.hasChildNodes()){n(null,K,X),Q0(),X._vnode=K;return}y(X.firstChild,K,null,null,null),Q0(),X._vnode=K},y=(K,X,se,me,Le,H=!1)=>{H=H||!!X.dynamicChildren;const R=zf(K)&&K.data==="[",Z=()=>T(K,X,se,me,Le,R),{type:z,ref:O,shapeFlag:k,patchFlag:I}=X;let W=K.nodeType;X.el=K,I===-2&&(H=!1,X.dynamicChildren=null);let V=null;switch(z){case gh:W!==3?X.children===""?(h(X.el=i(""),o(K),K),V=K):V=Z():(K.data!==X.children&&(Ef(),K.data=X.children),V=s(K));break;case Ss:U(K)?(V=s(K),D(X.el=K.content.firstChild,K,se)):W!==8||R?V=Z():V=s(K);break;case Yh:if(R&&(K=s(K),W=K.nodeType),W===1||W===3){V=K;const G=!X.children.length;for(let ne=0;ne<X.staticCount;ne++)G&&(X.children+=V.nodeType===1?V.outerHTML:V.data),ne===X.staticCount-1&&(X.anchor=V),V=s(V);return R?s(V):V}else Z();break;case In:R?V=P(K,X,se,me,Le,H):V=Z();break;default:if(k&1)(W!==1||X.type.toLowerCase()!==K.tagName.toLowerCase())&&!U(K)?V=Z():V=w(K,X,se,me,Le,H);else if(k&6){X.slotScopeIds=Le;const G=o(K);if(R?V=j(K):zf(K)&&K.data==="teleport start"?V=j(K,K.data,"teleport end"):V=s(K),t(X,G,null,se,me,u0(G),H),mh(X)&&!X.type.__asyncResolved){let ne;R?(ne=Kr(In),ne.anchor=V?V.previousSibling:G.lastChild):ne=K.nodeType===3?ui(""):Kr("div"),ne.el=K,X.component.subTree=ne}}else k&64?W!==8?V=Z():V=X.type.hydrate(K,X,se,me,Le,H,e,_):k&128&&(V=X.type.hydrate(K,X,se,me,u0(o(K)),Le,H,e,y))}return O!=null&&mp(O,null,me,X),V},w=(K,X,se,me,Le,H)=>{H=H||!!X.dynamicChildren;const{type:R,props:Z,patchFlag:z,shapeFlag:O,dirs:k,transition:I}=X,W=R==="input"||R==="option";if(W||z!==-1){k&&sc(X,null,se,"created");let V=!1;if(U(K)){V=pw(null,I)&&se&&se.vnode.props&&se.vnode.props.appear;const ne=K.content.firstChild;V&&I.beforeEnter(ne),D(ne,K,se),X.el=K=ne}if(O&16&&!(Z&&(Z.innerHTML||Z.textContent))){let ne=_(K.firstChild,X,K,se,me,Le,H);for(;ne;){c0(K,1)||Ef();const _e=ne;ne=ne.nextSibling,u(_e)}}else if(O&8){let ne=X.children;ne[0]===`
`&&(K.tagName==="PRE"||K.tagName==="TEXTAREA")&&(ne=ne.slice(1)),K.textContent!==ne&&(c0(K,0)||Ef(),K.textContent=X.children)}if(Z){if(W||!H||z&48){const ne=K.tagName.includes("-");for(const _e in Z)(W&&(_e.endsWith("value")||_e==="indeterminate")||Sp(_e)&&!Gf(_e)||_e[0]==="."||ne)&&r(K,_e,null,Z[_e],void 0,se)}else if(Z.onClick)r(K,"onClick",null,Z.onClick,void 0,se);else if(z&4&&cc(Z.style))for(const ne in Z.style)Z.style[ne]}let G;(G=Z&&Z.onVnodeBeforeMount)&&bl(G,se,X),k&&sc(X,null,se,"beforeMount"),((G=Z&&Z.onVnodeMounted)||k||V)&&Lw(()=>{G&&bl(G,se,X),V&&I.enter(K),k&&sc(X,null,se,"mounted")},me)}return K.nextSibling},_=(K,X,se,me,Le,H,R)=>{R=R||!!X.dynamicChildren;const Z=X.children,z=Z.length;for(let O=0;O<z;O++){const k=R?Z[O]:Z[O]=xl(Z[O]),I=k.type===gh;K?(I&&!R&&O+1<z&&xl(Z[O+1]).type===gh&&(h(i(K.data.slice(k.children.length)),se,s(K)),K.data=k.children),K=y(K,k,me,Le,H,R)):I&&!k.children?h(k.el=i(""),se):(c0(se,1)||Ef(),n(null,k,se,null,me,Le,u0(se),H))}return K},P=(K,X,se,me,Le,H)=>{const{slotScopeIds:R}=X;R&&(Le=Le?Le.concat(R):R);const Z=o(K),z=_(s(K),X,Z,se,me,Le,H);return z&&zf(z)&&z.data==="]"?s(X.anchor=z):(Ef(),h(X.anchor=d("]"),Z,z),z)},T=(K,X,se,me,Le,H)=>{if(c0(K.parentElement,1)||Ef(),X.el=null,H){const z=j(K);for(;;){const O=s(K);if(O&&O!==z)u(O);else break}}const R=s(K),Z=o(K);return u(K),n(null,X,Z,R,se,me,u0(Z),Le),se&&(se.vnode.el=X.el,$m(se,X.el)),R},j=(K,X="[",se="]")=>{let me=0;for(;K;)if(K=s(K),K&&zf(K)&&(K.data===X&&me++,K.data===se)){if(me===0)return s(K);me--}return K},D=(K,X,se)=>{const me=X.parentNode;me&&me.replaceChild(K,X);let Le=se;for(;Le;)Le.vnode.el===X&&(Le.vnode.el=Le.subTree.el=K),Le=Le.parent},U=K=>K.nodeType===1&&K.tagName==="TEMPLATE";return[g,y]}const $2="data-allow-mismatch",nA={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function c0(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute($2);)e=e.parentElement;const n=e&&e.getAttribute($2);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return t===0&&r.includes("children")?!0:n.split(",").includes(nA[t])}}const rA=Mm().requestIdleCallback||(e=>setTimeout(e,1)),iA=Mm().cancelIdleCallback||(e=>clearTimeout(e)),oA=(e=1e4)=>t=>{const n=rA(t,{timeout:e});return()=>iA(n)};function sA(e){const{top:t,left:n,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(t>0&&t<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const aA=e=>(t,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),t();break}},e);return n(i=>{if(i instanceof Element){if(sA(i))return t(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},lA=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},uA=(e=[])=>(t,n)=>{uo(e)&&(e=[e]);let r=!1;const i=o=>{r||(r=!0,s(),t(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const u of e)o.removeEventListener(u,i)})};return n(o=>{for(const u of e)o.addEventListener(u,i,{once:!0})}),s};function cA(e,t){if(zf(e)&&e.data==="["){let n=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(zf(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else t(e)}const mh=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function hA(e){br(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:u=!0,onError:h}=e;let d=null,g,y=0;const w=()=>(y++,d=null,_()),_=()=>{let P;return d||(P=d=t().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),h)return new Promise((j,D)=>{h(T,()=>j(w()),()=>D(T),y+1)});throw T}).then(T=>P!==d&&d?d:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),g=T,T)))};return Jo({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(P,T,j){const D=s?()=>{const U=s(j,K=>cA(P,K));U&&(T.bum||(T.bum=[])).push(U)}:j;g?D():_().then(()=>!T.isUnmounted&&D())},get __asyncResolved(){return g},setup(){const P=Ns;if(Z1(P),g)return()=>zg(g,P);const T=K=>{d=null,sf(K,P,13,!r)};if(u&&P.suspense||td)return _().then(K=>()=>zg(K,P)).catch(K=>(T(K),()=>r?Kr(r,{error:K}):null));const j=It(!1),D=It(),U=It(!!i);return i&&setTimeout(()=>{U.value=!1},i),o!=null&&setTimeout(()=>{if(!j.value&&!D.value){const K=new Error(`Async component timed out after ${o}ms.`);T(K),D.value=K}},o),_().then(()=>{j.value=!0,P.parent&&Cp(P.parent.vnode)&&P.parent.update()}).catch(K=>{T(K),D.value=K}),()=>{if(j.value&&g)return zg(g,P);if(D.value&&r)return Kr(r,{error:D.value});if(n&&!U.value)return Kr(n)}}})}function zg(e,t){const{ref:n,props:r,children:i,ce:s}=t.vnode,o=Kr(e,r,i);return o.ref=n,o.ce=s,delete t.vnode.ce,o}const Cp=e=>e.type.__isKeepAlive,fA={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=gu(),r=n.ctx;if(!r.renderer)return()=>{const U=t.default&&t.default();return U&&U.length===1?U[0]:U};const i=new Map,s=new Set;let o=null;const u=n.suspense,{renderer:{p:h,m:d,um:g,o:{createElement:y}}}=r,w=y("div");r.activate=(U,K,X,se,me)=>{const Le=U.component;d(U,K,X,0,u),h(Le.vnode,U,K,X,Le,u,se,U.slotScopeIds,me),Os(()=>{Le.isDeactivated=!1,Le.a&&qf(Le.a);const H=U.props&&U.props.onVnodeMounted;H&&bl(H,Le.parent,U)},u)},r.deactivate=U=>{const K=U.component;tm(K.m),tm(K.a),d(U,w,null,1,u),Os(()=>{K.da&&qf(K.da);const X=U.props&&U.props.onVnodeUnmounted;X&&bl(X,K.parent,U),K.isDeactivated=!0},u)};function _(U){Ug(U),g(U,n,u,!0)}function P(U){i.forEach((K,X)=>{const se=Uv(K.type);se&&!U(se)&&T(X)})}function T(U){const K=i.get(U);K&&(!o||!Ru(K,o))?_(K):o&&Ug(o),i.delete(U),s.delete(U)}ds(()=>[e.include,e.exclude],([U,K])=>{U&&P(X=>Dd(U,X)),K&&P(X=>!Dd(K,X))},{flush:"post",deep:!0});let j=null;const D=()=>{j!=null&&(nm(n.subTree.type)?Os(()=>{i.set(j,h0(n.subTree))},n.subTree.suspense):i.set(j,h0(n.subTree)))};return ma(D),zm(D),cd(()=>{i.forEach(U=>{const{subTree:K,suspense:X}=n,se=h0(K);if(U.type===se.type&&U.key===se.key){Ug(se);const me=se.component.da;me&&Os(me,X);return}_(U)})}),()=>{if(j=null,!t.default)return o=null;const U=t.default(),K=U[0];if(U.length>1)return o=null,U;if(!jc(K)||!(K.shapeFlag&4)&&!(K.shapeFlag&128))return o=null,K;let X=h0(K);if(X.type===Ss)return o=null,X;const se=X.type,me=Uv(mh(X)?X.type.__asyncResolved||{}:se),{include:Le,exclude:H,max:R}=e;if(Le&&(!me||!Dd(Le,me))||H&&me&&Dd(H,me))return X.shapeFlag&=-257,o=X,K;const Z=X.key==null?se:X.key,z=i.get(Z);return X.el&&(X=pc(X),K.shapeFlag&128&&(K.ssContent=X)),j=Z,z?(X.el=z.el,X.component=z.component,X.transition&&Fc(X,X.transition),X.shapeFlag|=512,s.delete(Z),s.add(Z)):(s.add(Z),R&&s.size>parseInt(R,10)&&T(s.values().next().value)),X.shapeFlag|=256,o=X,nm(K.type)?K:X}}},dA=fA;function Dd(e,t){return Jn(e)?e.some(n=>Dd(n,t)):uo(e)?e.split(",").includes(t):VC(e)?(e.lastIndex=0,e.test(t)):!1}function U4(e,t){V4(e,"a",t)}function $4(e,t){V4(e,"da",t)}function V4(e,t,n=Ns){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(jm(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Cp(i.parent.vnode)&&pA(r,t,n,i),i=i.parent}}function pA(e,t,n,r){const i=jm(t,e,r,!0);Vc(()=>{O1(r[t],i)},n)}function Ug(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function h0(e){return e.shapeFlag&128?e.ssContent:e}function jm(e,t,n=Ns,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Lh();const u=tf(n),h=du(t,n,e,o);return u(),Sh(),h});return r?i.unshift(s):i.push(s),s}}const $c=e=>(t,n=Ns)=>{(!td||e==="sp")&&jm(e,(...r)=>t(...r),n)},H4=$c("bm"),ma=$c("m"),K1=$c("bu"),zm=$c("u"),cd=$c("bum"),Vc=$c("um"),G4=$c("sp"),q4=$c("rtg"),W4=$c("rtc");function Z4(e,t=Ns){jm("ec",e,t)}const Y1="components",mA="directives";function K4(e,t){return X1(Y1,e,!0,t)||e}const Y4=Symbol.for("v-ndc");function gA(e){return uo(e)?X1(Y1,e,!1)||e:e||Y4}function vA(e){return X1(mA,e)}function X1(e,t,n=!0,r=!1){const i=Ds||Ns;if(i){const s=i.type;if(e===Y1){const u=Uv(s,!1);if(u&&(u===t||u===da(t)||u===Ep(da(t))))return s}const o=V2(i[e]||s[e],t)||V2(i.appContext[e],t);return!o&&r?s:o}}function V2(e,t){return e&&(e[t]||e[da(t)]||e[Ep(da(t))])}function Sr(e,t,n,r){let i;const s=n&&n[r],o=Jn(e);if(o||uo(e)){const u=o&&cc(e);let h=!1;u&&(h=!Hl(e),e=Bm(e)),i=new Array(e.length);for(let d=0,g=e.length;d<g;d++)i[d]=t(h?Na(e[d]):e[d],d,void 0,s&&s[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,s&&s[u])}else if(Gi(e))if(e[Symbol.iterator])i=Array.from(e,(u,h)=>t(u,h,void 0,s&&s[h]));else{const u=Object.keys(e);i=new Array(u.length);for(let h=0,d=u.length;h<d;h++){const g=u[h];i[h]=t(e[g],g,h,s&&s[h])}}else i=[];return n&&(n[r]=i),i}function X4(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Jn(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function yA(e,t,n={},r,i){if(Ds.ce||Ds.parent&&mh(Ds.parent)&&Ds.parent.ce)return t!=="default"&&(n.name=t),$e(),ja(In,null,[Kr("slot",n,r&&r())],64);let s=e[t];s&&s._c&&(s._d=!1),$e();const o=s&&J1(s(n)),u=n.key||o&&o.key,h=ja(In,{key:(u&&!zu(u)?u:`_${t}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!i&&h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function J1(e){return e.some(t=>jc(t)?!(t.type===Ss||t.type===In&&!J1(t.children)):!0)?e:null}function _A(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:Gd(r)]=e[r];return n}const kv=e=>e?kw(e)?Ap(e):kv(e.parent):null,Kd=eo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>kv(e.parent),$root:e=>kv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Q1(e),$forceUpdate:e=>e.f||(e.f=()=>{G1(e.update)}),$nextTick:e=>e.n||(e.n=Ws.bind(e.proxy)),$watch:e=>KA.bind(e)}),$g=(e,t)=>e!==vi&&!e.__isScriptSetup&&Oi(e,t),Tv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:u,appContext:h}=e;let d;if(t[0]!=="$"){const _=o[t];if(_!==void 0)switch(_){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if($g(r,t))return o[t]=1,r[t];if(i!==vi&&Oi(i,t))return o[t]=2,i[t];if((d=e.propsOptions[0])&&Oi(d,t))return o[t]=3,s[t];if(n!==vi&&Oi(n,t))return o[t]=4,n[t];Bv&&(o[t]=0)}}const g=Kd[t];let y,w;if(g)return t==="$attrs"&&Oa(e.attrs,"get",""),g(e);if((y=u.__cssModules)&&(y=y[t]))return y;if(n!==vi&&Oi(n,t))return o[t]=4,n[t];if(w=h.config.globalProperties,Oi(w,t))return w[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return $g(i,t)?(i[t]=n,!0):r!==vi&&Oi(r,t)?(r[t]=n,!0):Oi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let u;return!!n[o]||e!==vi&&Oi(e,o)||$g(t,o)||(u=s[0])&&Oi(u,o)||Oi(r,o)||Oi(Kd,o)||Oi(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Oi(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},bA=eo({},Tv,{get(e,t){if(t!==Symbol.unscopables)return Tv.get(e,t,e)},has(e,t){return t[0]!=="_"&&!ZC(t)}});function wA(){return null}function xA(){return null}function LA(e){}function SA(e){}function EA(){return null}function CA(){}function PA(e,t){return null}function AA(){return J4().slots}function MA(){return J4().attrs}function J4(){const e=gu();return e.setupContext||(e.setupContext=Ow(e))}function gp(e){return Jn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function kA(e,t){const n=gp(e);for(const r in t){if(r.startsWith("__skip"))continue;let i=n[r];i?Jn(i)||br(i)?i=n[r]={type:i,default:t[r]}:i.default=t[r]:i===null&&(i=n[r]={default:t[r]}),i&&t[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function TA(e,t){return!e||!t?e||t:Jn(e)&&Jn(t)?e.concat(t):eo({},gp(e),gp(t))}function BA(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function OA(e){const t=gu();let n=e();return Fv(),N1(n)&&(n=n.catch(r=>{throw tf(t),r})),[n,()=>tf(t)]}let Bv=!0;function NA(e){const t=Q1(e),n=e.proxy,r=e.ctx;Bv=!1,t.beforeCreate&&H2(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:h,inject:d,created:g,beforeMount:y,mounted:w,beforeUpdate:_,updated:P,activated:T,deactivated:j,beforeDestroy:D,beforeUnmount:U,destroyed:K,unmounted:X,render:se,renderTracked:me,renderTriggered:Le,errorCaptured:H,serverPrefetch:R,expose:Z,inheritAttrs:z,components:O,directives:k,filters:I}=t;if(d&&DA(d,r,null),o)for(const G in o){const ne=o[G];br(ne)&&(r[G]=ne.bind(n))}if(i){const G=i.call(n,n);Gi(G)&&(e.data=mu(G))}if(Bv=!0,s)for(const G in s){const ne=s[G],_e=br(ne)?ne.bind(n,n):br(ne.get)?ne.get.bind(n,n):hu,ge=!br(ne)&&br(ne.set)?ne.set.bind(n):hu,Ve=hr({get:_e,set:ge});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:B=>Ve.value=B})}if(u)for(const G in u)Q4(u[G],r,n,G);if(h){const G=br(h)?h.call(n):h;Reflect.ownKeys(G).forEach(ne=>{Yd(ne,G[ne])})}g&&H2(g,e,"c");function V(G,ne){Jn(ne)?ne.forEach(_e=>G(_e.bind(n))):ne&&G(ne.bind(n))}if(V(H4,y),V(ma,w),V(K1,_),V(zm,P),V(U4,T),V($4,j),V(Z4,H),V(W4,me),V(q4,Le),V(cd,U),V(Vc,X),V(G4,R),Jn(Z))if(Z.length){const G=e.exposed||(e.exposed={});Z.forEach(ne=>{Object.defineProperty(G,ne,{get:()=>n[ne],set:_e=>n[ne]=_e})})}else e.exposed||(e.exposed={});se&&e.render===hu&&(e.render=se),z!=null&&(e.inheritAttrs=z),O&&(e.components=O),k&&(e.directives=k),R&&Z1(e)}function DA(e,t,n=hu){Jn(e)&&(e=Ov(e));for(const r in e){const i=e[r];let s;Gi(i)?"default"in i?s=Gl(i.from||r,i.default,!0):s=Gl(i.from||r):s=Gl(i),zo(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function H2(e,t,n){du(Jn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Q4(e,t,n,r){let i=r.includes(".")?_w(n,r):()=>n[r];if(uo(e)){const s=t[e];br(s)&&ds(i,s)}else if(br(e))ds(i,e.bind(n));else if(Gi(e))if(Jn(e))e.forEach(s=>Q4(s,t,n,r));else{const s=br(e.handler)?e.handler.bind(n):t[e.handler];br(s)&&ds(i,s,e)}}function Q1(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(t);let h;return u?h=u:!i.length&&!n&&!r?h=t:(h={},i.length&&i.forEach(d=>em(h,d,o,!0)),em(h,t,o)),Gi(t)&&s.set(t,h),h}function em(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&em(e,s,n,!0),i&&i.forEach(o=>em(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const u=IA[o]||n&&n[o];e[o]=u?u(e[o],t[o]):t[o]}return e}const IA={data:G2,props:q2,emits:q2,methods:Id,computed:Id,beforeCreate:Za,created:Za,beforeMount:Za,mounted:Za,beforeUpdate:Za,updated:Za,beforeDestroy:Za,beforeUnmount:Za,destroyed:Za,unmounted:Za,activated:Za,deactivated:Za,errorCaptured:Za,serverPrefetch:Za,components:Id,directives:Id,watch:FA,provide:G2,inject:RA};function G2(e,t){return t?e?function(){return eo(br(e)?e.call(this,this):e,br(t)?t.call(this,this):t)}:t:e}function RA(e,t){return Id(Ov(e),Ov(t))}function Ov(e){if(Jn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Za(e,t){return e?[...new Set([].concat(e,t))]:t}function Id(e,t){return e?eo(Object.create(null),e,t):t}function q2(e,t){return e?Jn(e)&&Jn(t)?[...new Set([...e,...t])]:eo(Object.create(null),gp(e),gp(t??{})):t}function FA(e,t){if(!e)return t;if(!t)return e;const n=eo(Object.create(null),e);for(const r in t)n[r]=Za(e[r],t[r]);return n}function ew(){return{app:null,config:{isNativeTag:UC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jA=0;function zA(e,t){return function(r,i=null){br(r)||(r=eo({},r)),i!=null&&!Gi(i)&&(i=null);const s=ew(),o=new WeakSet,u=[];let h=!1;const d=s.app={_uid:jA++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Dw,get config(){return s.config},set config(g){},use(g,...y){return o.has(g)||(g&&br(g.install)?(o.add(g),g.install(d,...y)):br(g)&&(o.add(g),g(d,...y))),d},mixin(g){return s.mixins.includes(g)||s.mixins.push(g),d},component(g,y){return y?(s.components[g]=y,d):s.components[g]},directive(g,y){return y?(s.directives[g]=y,d):s.directives[g]},mount(g,y,w){if(!h){const _=d._ceVNode||Kr(r,i);return _.appContext=s,w===!0?w="svg":w===!1&&(w=void 0),y&&t?t(_,g):e(_,g,w),h=!0,d._container=g,g.__vue_app__=d,Ap(_.component)}},onUnmount(g){u.push(g)},unmount(){h&&(du(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(g,y){return s.provides[g]=y,d},runWithContext(g){const y=Kh;Kh=d;try{return g()}finally{Kh=y}}};return d}}let Kh=null;function Yd(e,t){if(Ns){let n=Ns.provides;const r=Ns.parent&&Ns.parent.provides;r===n&&(n=Ns.provides=Object.create(r)),n[e]=t}}function Gl(e,t,n=!1){const r=Ns||Ds;if(r||Kh){const i=Kh?Kh._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&br(t)?t.call(r&&r.proxy):t}}function tw(){return!!(Ns||Ds||Kh)}const nw={},rw=()=>Object.create(nw),iw=e=>Object.getPrototypeOf(e)===nw;function UA(e,t,n,r=!1){const i={},s=rw();e.propsDefaults=Object.create(null),ow(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:$1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function $A(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=gi(i),[h]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let y=0;y<g.length;y++){let w=g[y];if(Um(e.emitsOptions,w))continue;const _=t[w];if(h)if(Oi(s,w))_!==s[w]&&(s[w]=_,d=!0);else{const P=da(w);i[P]=Nv(h,u,P,_,e,!1)}else _!==s[w]&&(s[w]=_,d=!0)}}}else{ow(e,t,i,s)&&(d=!0);let g;for(const y in u)(!t||!Oi(t,y)&&((g=Ll(y))===y||!Oi(t,g)))&&(h?n&&(n[y]!==void 0||n[g]!==void 0)&&(i[y]=Nv(h,u,y,void 0,e,!0)):delete i[y]);if(s!==u)for(const y in s)(!t||!Oi(t,y))&&(delete s[y],d=!0)}d&&Nc(e.attrs,"set","")}function ow(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,u;if(t)for(let h in t){if(Gf(h))continue;const d=t[h];let g;i&&Oi(i,g=da(h))?!s||!s.includes(g)?n[g]=d:(u||(u={}))[g]=d:Um(e.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,o=!0)}if(s){const h=gi(n),d=u||vi;for(let g=0;g<s.length;g++){const y=s[g];n[y]=Nv(i,h,y,d[y],e,!Oi(d,y))}}return o}function Nv(e,t,n,r,i,s){const o=e[n];if(o!=null){const u=Oi(o,"default");if(u&&r===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&br(h)){const{propsDefaults:d}=i;if(n in d)r=d[n];else{const g=tf(i);r=d[n]=h.call(null,t),g()}}else r=h;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!u?r=!1:o[1]&&(r===""||r===Ll(n))&&(r=!0))}return r}const VA=new WeakMap;function sw(e,t,n=!1){const r=n?VA:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},u=[];let h=!1;if(!br(e)){const g=y=>{h=!0;const[w,_]=sw(y,t,!0);eo(o,w),_&&u.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!s&&!h)return Gi(e)&&r.set(e,Vf),Vf;if(Jn(s))for(let g=0;g<s.length;g++){const y=da(s[g]);W2(y)&&(o[y]=vi)}else if(s)for(const g in s){const y=da(g);if(W2(y)){const w=s[g],_=o[y]=Jn(w)||br(w)?{type:w}:eo({},w),P=_.type;let T=!1,j=!0;if(Jn(P))for(let D=0;D<P.length;++D){const U=P[D],K=br(U)&&U.name;if(K==="Boolean"){T=!0;break}else K==="String"&&(j=!1)}else T=br(P)&&P.name==="Boolean";_[0]=T,_[1]=j,(T||Oi(_,"default"))&&u.push(y)}}const d=[o,u];return Gi(e)&&r.set(e,d),d}function W2(e){return e[0]!=="$"&&!Gf(e)}const aw=e=>e[0]==="_"||e==="$stable",ey=e=>Jn(e)?e.map(xl):[xl(e)],HA=(e,t,n)=>{if(t._n)return t;const r=$l((...i)=>ey(t(...i)),n);return r._c=!1,r},lw=(e,t,n)=>{const r=e._ctx;for(const i in e){if(aw(i))continue;const s=e[i];if(br(s))t[i]=HA(i,s,r);else if(s!=null){const o=ey(s);t[i]=()=>o}}},uw=(e,t)=>{const n=ey(t);e.slots.default=()=>n},cw=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},GA=(e,t,n)=>{const r=e.slots=rw();if(e.vnode.shapeFlag&32){const i=t._;i?(cw(r,t,n),n&&r4(r,"_",i,!0)):lw(t,r)}else t&&uw(e,t)},qA=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=vi;if(r.shapeFlag&32){const u=t._;u?n&&u===1?s=!1:cw(i,t,n):(s=!t.$stable,lw(t,i)),o=t}else t&&(uw(e,t),o={default:1});if(s)for(const u in i)!aw(u)&&o[u]==null&&delete i[u]},Os=Lw;function hw(e){return dw(e)}function fw(e){return dw(e,tA)}function dw(e,t){const n=Mm();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:u,createComment:h,setText:d,setElementText:g,parentNode:y,nextSibling:w,setScopeId:_=hu,insertStaticContent:P}=e,T=(oe,fe,be,de=null,Ue=null,Xe=null,ze=void 0,Je=null,Qe=!!fe.dynamicChildren)=>{if(oe===fe)return;oe&&!Ru(oe,fe)&&(de=he(oe),B(oe,Ue,Xe,!0),oe=null),fe.patchFlag===-2&&(Qe=!1,fe.dynamicChildren=null);const{type:it,ref:Mt,shapeFlag:xt}=fe;switch(it){case gh:j(oe,fe,be,de);break;case Ss:D(oe,fe,be,de);break;case Yh:oe==null&&U(fe,be,de,ze);break;case In:O(oe,fe,be,de,Ue,Xe,ze,Je,Qe);break;default:xt&1?se(oe,fe,be,de,Ue,Xe,ze,Je,Qe):xt&6?k(oe,fe,be,de,Ue,Xe,ze,Je,Qe):(xt&64||xt&128)&&it.process(oe,fe,be,de,Ue,Xe,ze,Je,Qe,Fe)}Mt!=null&&Ue&&mp(Mt,oe&&oe.ref,Xe,fe||oe,!fe)},j=(oe,fe,be,de)=>{if(oe==null)r(fe.el=u(fe.children),be,de);else{const Ue=fe.el=oe.el;fe.children!==oe.children&&d(Ue,fe.children)}},D=(oe,fe,be,de)=>{oe==null?r(fe.el=h(fe.children||""),be,de):fe.el=oe.el},U=(oe,fe,be,de)=>{[oe.el,oe.anchor]=P(oe.children,fe,be,de,oe.el,oe.anchor)},K=({el:oe,anchor:fe},be,de)=>{let Ue;for(;oe&&oe!==fe;)Ue=w(oe),r(oe,be,de),oe=Ue;r(fe,be,de)},X=({el:oe,anchor:fe})=>{let be;for(;oe&&oe!==fe;)be=w(oe),i(oe),oe=be;i(fe)},se=(oe,fe,be,de,Ue,Xe,ze,Je,Qe)=>{fe.type==="svg"?ze="svg":fe.type==="math"&&(ze="mathml"),oe==null?me(fe,be,de,Ue,Xe,ze,Je,Qe):R(oe,fe,Ue,Xe,ze,Je,Qe)},me=(oe,fe,be,de,Ue,Xe,ze,Je)=>{let Qe,it;const{props:Mt,shapeFlag:xt,transition:Nt,dirs:Kt}=oe;if(Qe=oe.el=o(oe.type,Xe,Mt&&Mt.is,Mt),xt&8?g(Qe,oe.children):xt&16&&H(oe.children,Qe,null,de,Ue,Vg(oe,Xe),ze,Je),Kt&&sc(oe,null,de,"created"),Le(Qe,oe,oe.scopeId,ze,de),Mt){for(const mn in Mt)mn!=="value"&&!Gf(mn)&&s(Qe,mn,null,Mt[mn],Xe,de);"value"in Mt&&s(Qe,"value",null,Mt.value,Xe),(it=Mt.onVnodeBeforeMount)&&bl(it,de,oe)}Kt&&sc(oe,null,de,"beforeMount");const hn=pw(Ue,Nt);hn&&Nt.beforeEnter(Qe),r(Qe,fe,be),((it=Mt&&Mt.onVnodeMounted)||hn||Kt)&&Os(()=>{it&&bl(it,de,oe),hn&&Nt.enter(Qe),Kt&&sc(oe,null,de,"mounted")},Ue)},Le=(oe,fe,be,de,Ue)=>{if(be&&_(oe,be),de)for(let Xe=0;Xe<de.length;Xe++)_(oe,de[Xe]);if(Ue){let Xe=Ue.subTree;if(fe===Xe||nm(Xe.type)&&(Xe.ssContent===fe||Xe.ssFallback===fe)){const ze=Ue.vnode;Le(oe,ze,ze.scopeId,ze.slotScopeIds,Ue.parent)}}},H=(oe,fe,be,de,Ue,Xe,ze,Je,Qe=0)=>{for(let it=Qe;it<oe.length;it++){const Mt=oe[it]=Je?lh(oe[it]):xl(oe[it]);T(null,Mt,fe,be,de,Ue,Xe,ze,Je)}},R=(oe,fe,be,de,Ue,Xe,ze)=>{const Je=fe.el=oe.el;let{patchFlag:Qe,dynamicChildren:it,dirs:Mt}=fe;Qe|=oe.patchFlag&16;const xt=oe.props||vi,Nt=fe.props||vi;let Kt;if(be&&Dh(be,!1),(Kt=Nt.onVnodeBeforeUpdate)&&bl(Kt,be,fe,oe),Mt&&sc(fe,oe,be,"beforeUpdate"),be&&Dh(be,!0),(xt.innerHTML&&Nt.innerHTML==null||xt.textContent&&Nt.textContent==null)&&g(Je,""),it?Z(oe.dynamicChildren,it,Je,be,de,Vg(fe,Ue),Xe):ze||ne(oe,fe,Je,null,be,de,Vg(fe,Ue),Xe,!1),Qe>0){if(Qe&16)z(Je,xt,Nt,be,Ue);else if(Qe&2&&xt.class!==Nt.class&&s(Je,"class",null,Nt.class,Ue),Qe&4&&s(Je,"style",xt.style,Nt.style,Ue),Qe&8){const hn=fe.dynamicProps;for(let mn=0;mn<hn.length;mn++){const et=hn[mn],ot=xt[et],nt=Nt[et];(nt!==ot||et==="value")&&s(Je,et,ot,nt,Ue,be)}}Qe&1&&oe.children!==fe.children&&g(Je,fe.children)}else!ze&&it==null&&z(Je,xt,Nt,be,Ue);((Kt=Nt.onVnodeUpdated)||Mt)&&Os(()=>{Kt&&bl(Kt,be,fe,oe),Mt&&sc(fe,oe,be,"updated")},de)},Z=(oe,fe,be,de,Ue,Xe,ze)=>{for(let Je=0;Je<fe.length;Je++){const Qe=oe[Je],it=fe[Je],Mt=Qe.el&&(Qe.type===In||!Ru(Qe,it)||Qe.shapeFlag&70)?y(Qe.el):be;T(Qe,it,Mt,null,de,Ue,Xe,ze,!0)}},z=(oe,fe,be,de,Ue)=>{if(fe!==be){if(fe!==vi)for(const Xe in fe)!Gf(Xe)&&!(Xe in be)&&s(oe,Xe,fe[Xe],null,Ue,de);for(const Xe in be){if(Gf(Xe))continue;const ze=be[Xe],Je=fe[Xe];ze!==Je&&Xe!=="value"&&s(oe,Xe,Je,ze,Ue,de)}"value"in be&&s(oe,"value",fe.value,be.value,Ue)}},O=(oe,fe,be,de,Ue,Xe,ze,Je,Qe)=>{const it=fe.el=oe?oe.el:u(""),Mt=fe.anchor=oe?oe.anchor:u("");let{patchFlag:xt,dynamicChildren:Nt,slotScopeIds:Kt}=fe;Kt&&(Je=Je?Je.concat(Kt):Kt),oe==null?(r(it,be,de),r(Mt,be,de),H(fe.children||[],be,Mt,Ue,Xe,ze,Je,Qe)):xt>0&&xt&64&&Nt&&oe.dynamicChildren?(Z(oe.dynamicChildren,Nt,be,Ue,Xe,ze,Je),(fe.key!=null||Ue&&fe===Ue.subTree)&&ty(oe,fe,!0)):ne(oe,fe,be,Mt,Ue,Xe,ze,Je,Qe)},k=(oe,fe,be,de,Ue,Xe,ze,Je,Qe)=>{fe.slotScopeIds=Je,oe==null?fe.shapeFlag&512?Ue.ctx.activate(fe,be,de,ze,Qe):I(fe,be,de,Ue,Xe,ze,Qe):W(oe,fe,Qe)},I=(oe,fe,be,de,Ue,Xe,ze)=>{const Je=oe.component=Mw(oe,de,Ue);if(Cp(oe)&&(Je.ctx.renderer=Fe),Tw(Je,!1,ze),Je.asyncDep){if(Ue&&Ue.registerDep(Je,V,ze),!oe.el){const Qe=Je.subTree=Kr(Ss);D(null,Qe,fe,be)}}else V(Je,oe,fe,be,Ue,Xe,ze)},W=(oe,fe,be)=>{const de=fe.component=oe.component;if(t6(oe,fe,be))if(de.asyncDep&&!de.asyncResolved){G(de,fe,be);return}else de.next=fe,de.update();else fe.el=oe.el,de.vnode=fe},V=(oe,fe,be,de,Ue,Xe,ze)=>{const Je=()=>{if(oe.isMounted){let{next:xt,bu:Nt,u:Kt,parent:hn,vnode:mn}=oe;{const en=mw(oe);if(en){xt&&(xt.el=mn.el,G(oe,xt,ze)),en.asyncDep.then(()=>{oe.isUnmounted||Je()});return}}let et=xt,ot;Dh(oe,!1),xt?(xt.el=mn.el,G(oe,xt,ze)):xt=mn,Nt&&qf(Nt),(ot=xt.props&&xt.props.onVnodeBeforeUpdate)&&bl(ot,hn,xt,mn),Dh(oe,!0);const nt=M0(oe),$t=oe.subTree;oe.subTree=nt,T($t,nt,y($t.el),he($t),oe,Ue,Xe),xt.el=nt.el,et===null&&$m(oe,nt.el),Kt&&Os(Kt,Ue),(ot=xt.props&&xt.props.onVnodeUpdated)&&Os(()=>bl(ot,hn,xt,mn),Ue)}else{let xt;const{el:Nt,props:Kt}=fe,{bm:hn,m:mn,parent:et,root:ot,type:nt}=oe,$t=mh(fe);if(Dh(oe,!1),hn&&qf(hn),!$t&&(xt=Kt&&Kt.onVnodeBeforeMount)&&bl(xt,et,fe),Dh(oe,!0),Nt&&Ye){const en=()=>{oe.subTree=M0(oe),Ye(Nt,oe.subTree,oe,Ue,null)};$t&&nt.__asyncHydrate?nt.__asyncHydrate(Nt,oe,en):en()}else{ot.ce&&ot.ce._injectChildStyle(nt);const en=oe.subTree=M0(oe);T(null,en,be,de,oe,Ue,Xe),fe.el=en.el}if(mn&&Os(mn,Ue),!$t&&(xt=Kt&&Kt.onVnodeMounted)){const en=fe;Os(()=>bl(xt,et,en),Ue)}(fe.shapeFlag&256||et&&mh(et.vnode)&&et.vnode.shapeFlag&256)&&oe.a&&Os(oe.a,Ue),oe.isMounted=!0,fe=be=de=null}};oe.scope.on();const Qe=oe.effect=new up(Je);oe.scope.off();const it=oe.update=Qe.run.bind(Qe),Mt=oe.job=Qe.runIfDirty.bind(Qe);Mt.i=oe,Mt.id=oe.uid,Qe.scheduler=()=>G1(Mt),Dh(oe,!0),it()},G=(oe,fe,be)=>{fe.component=oe;const de=oe.vnode.props;oe.vnode=fe,oe.next=null,$A(oe,fe.props,de,be),qA(oe,fe.children,be),Lh(),I2(oe),Sh()},ne=(oe,fe,be,de,Ue,Xe,ze,Je,Qe=!1)=>{const it=oe&&oe.children,Mt=oe?oe.shapeFlag:0,xt=fe.children,{patchFlag:Nt,shapeFlag:Kt}=fe;if(Nt>0){if(Nt&128){ge(it,xt,be,de,Ue,Xe,ze,Je,Qe);return}else if(Nt&256){_e(it,xt,be,de,Ue,Xe,ze,Je,Qe);return}}Kt&8?(Mt&16&&xe(it,Ue,Xe),xt!==it&&g(be,xt)):Mt&16?Kt&16?ge(it,xt,be,de,Ue,Xe,ze,Je,Qe):xe(it,Ue,Xe,!0):(Mt&8&&g(be,""),Kt&16&&H(xt,be,de,Ue,Xe,ze,Je,Qe))},_e=(oe,fe,be,de,Ue,Xe,ze,Je,Qe)=>{oe=oe||Vf,fe=fe||Vf;const it=oe.length,Mt=fe.length,xt=Math.min(it,Mt);let Nt;for(Nt=0;Nt<xt;Nt++){const Kt=fe[Nt]=Qe?lh(fe[Nt]):xl(fe[Nt]);T(oe[Nt],Kt,be,null,Ue,Xe,ze,Je,Qe)}it>Mt?xe(oe,Ue,Xe,!0,!1,xt):H(fe,be,de,Ue,Xe,ze,Je,Qe,xt)},ge=(oe,fe,be,de,Ue,Xe,ze,Je,Qe)=>{let it=0;const Mt=fe.length;let xt=oe.length-1,Nt=Mt-1;for(;it<=xt&&it<=Nt;){const Kt=oe[it],hn=fe[it]=Qe?lh(fe[it]):xl(fe[it]);if(Ru(Kt,hn))T(Kt,hn,be,null,Ue,Xe,ze,Je,Qe);else break;it++}for(;it<=xt&&it<=Nt;){const Kt=oe[xt],hn=fe[Nt]=Qe?lh(fe[Nt]):xl(fe[Nt]);if(Ru(Kt,hn))T(Kt,hn,be,null,Ue,Xe,ze,Je,Qe);else break;xt--,Nt--}if(it>xt){if(it<=Nt){const Kt=Nt+1,hn=Kt<Mt?fe[Kt].el:de;for(;it<=Nt;)T(null,fe[it]=Qe?lh(fe[it]):xl(fe[it]),be,hn,Ue,Xe,ze,Je,Qe),it++}}else if(it>Nt)for(;it<=xt;)B(oe[it],Ue,Xe,!0),it++;else{const Kt=it,hn=it,mn=new Map;for(it=hn;it<=Nt;it++){const Tn=fe[it]=Qe?lh(fe[it]):xl(fe[it]);Tn.key!=null&&mn.set(Tn.key,it)}let et,ot=0;const nt=Nt-hn+1;let $t=!1,en=0;const kn=new Array(nt);for(it=0;it<nt;it++)kn[it]=0;for(it=Kt;it<=xt;it++){const Tn=oe[it];if(ot>=nt){B(Tn,Ue,Xe,!0);continue}let or;if(Tn.key!=null)or=mn.get(Tn.key);else for(et=hn;et<=Nt;et++)if(kn[et-hn]===0&&Ru(Tn,fe[et])){or=et;break}or===void 0?B(Tn,Ue,Xe,!0):(kn[or-hn]=it+1,or>=en?en=or:$t=!0,T(Tn,fe[or],be,null,Ue,Xe,ze,Je,Qe),ot++)}const Ln=$t?WA(kn):Vf;for(et=Ln.length-1,it=nt-1;it>=0;it--){const Tn=hn+it,or=fe[Tn],wn=Tn+1<Mt?fe[Tn+1].el:de;kn[it]===0?T(null,or,be,wn,Ue,Xe,ze,Je,Qe):$t&&(et<0||it!==Ln[et]?Ve(or,be,wn,2):et--)}}},Ve=(oe,fe,be,de,Ue=null)=>{const{el:Xe,type:ze,transition:Je,children:Qe,shapeFlag:it}=oe;if(it&6){Ve(oe.component.subTree,fe,be,de);return}if(it&128){oe.suspense.move(fe,be,de);return}if(it&64){ze.move(oe,fe,be,Fe);return}if(ze===In){r(Xe,fe,be);for(let xt=0;xt<Qe.length;xt++)Ve(Qe[xt],fe,be,de);r(oe.anchor,fe,be);return}if(ze===Yh){K(oe,fe,be);return}if(de!==2&&it&1&&Je)if(de===0)Je.beforeEnter(Xe),r(Xe,fe,be),Os(()=>Je.enter(Xe),Ue);else{const{leave:xt,delayLeave:Nt,afterLeave:Kt}=Je,hn=()=>r(Xe,fe,be),mn=()=>{xt(Xe,()=>{hn(),Kt&&Kt()})};Nt?Nt(Xe,hn,mn):mn()}else r(Xe,fe,be)},B=(oe,fe,be,de=!1,Ue=!1)=>{const{type:Xe,props:ze,ref:Je,children:Qe,dynamicChildren:it,shapeFlag:Mt,patchFlag:xt,dirs:Nt,cacheIndex:Kt}=oe;if(xt===-2&&(Ue=!1),Je!=null&&mp(Je,null,be,oe,!0),Kt!=null&&(fe.renderCache[Kt]=void 0),Mt&256){fe.ctx.deactivate(oe);return}const hn=Mt&1&&Nt,mn=!mh(oe);let et;if(mn&&(et=ze&&ze.onVnodeBeforeUnmount)&&bl(et,fe,oe),Mt&6)le(oe.component,be,de);else{if(Mt&128){oe.suspense.unmount(be,de);return}hn&&sc(oe,null,fe,"beforeUnmount"),Mt&64?oe.type.remove(oe,fe,be,Fe,de):it&&!it.hasOnce&&(Xe!==In||xt>0&&xt&64)?xe(it,fe,be,!1,!0):(Xe===In&&xt&384||!Ue&&Mt&16)&&xe(Qe,fe,be),de&&te(oe)}(mn&&(et=ze&&ze.onVnodeUnmounted)||hn)&&Os(()=>{et&&bl(et,fe,oe),hn&&sc(oe,null,fe,"unmounted")},be)},te=oe=>{const{type:fe,el:be,anchor:de,transition:Ue}=oe;if(fe===In){ce(be,de);return}if(fe===Yh){X(oe);return}const Xe=()=>{i(be),Ue&&!Ue.persisted&&Ue.afterLeave&&Ue.afterLeave()};if(oe.shapeFlag&1&&Ue&&!Ue.persisted){const{leave:ze,delayLeave:Je}=Ue,Qe=()=>ze(be,Xe);Je?Je(oe.el,Xe,Qe):Qe()}else Xe()},ce=(oe,fe)=>{let be;for(;oe!==fe;)be=w(oe),i(oe),oe=be;i(fe)},le=(oe,fe,be)=>{const{bum:de,scope:Ue,job:Xe,subTree:ze,um:Je,m:Qe,a:it}=oe;tm(Qe),tm(it),de&&qf(de),Ue.stop(),Xe&&(Xe.flags|=8,B(ze,oe,fe,be)),Je&&Os(Je,fe),Os(()=>{oe.isUnmounted=!0},fe),fe&&fe.pendingBranch&&!fe.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===fe.pendingId&&(fe.deps--,fe.deps===0&&fe.resolve())},xe=(oe,fe,be,de=!1,Ue=!1,Xe=0)=>{for(let ze=Xe;ze<oe.length;ze++)B(oe[ze],fe,be,de,Ue)},he=oe=>{if(oe.shapeFlag&6)return he(oe.component.subTree);if(oe.shapeFlag&128)return oe.suspense.next();const fe=w(oe.anchor||oe.el),be=fe&&fe[O4];return be?w(be):fe};let J=!1;const ae=(oe,fe,be)=>{oe==null?fe._vnode&&B(fe._vnode,null,null,!0):T(fe._vnode||null,oe,fe,null,null,null,be),fe._vnode=oe,J||(J=!0,I2(),Q0(),J=!1)},Fe={p:T,um:B,m:Ve,r:te,mt:I,mc:H,pc:ne,pbc:Z,n:he,o:e};let Me,Ye;return t&&([Me,Ye]=t(Fe)),{render:ae,hydrate:Me,createApp:zA(ae,Me)}}function Vg({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Dh({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pw(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ty(e,t,n=!1){const r=e.children,i=t.children;if(Jn(r)&&Jn(i))for(let s=0;s<r.length;s++){const o=r[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=lh(i[s]),u.el=o.el),!n&&u.patchFlag!==-2&&ty(o,u)),u.type===gh&&(u.el=o.el)}}function WA(e){const t=e.slice(),n=[0];let r,i,s,o,u;const h=e.length;for(r=0;r<h;r++){const d=e[r];if(d!==0){if(i=n[n.length-1],e[i]<d){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)u=s+o>>1,e[n[u]]<d?s=u+1:o=u;d<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function mw(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:mw(t)}function tm(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gw=Symbol.for("v-scx"),vw=()=>Gl(gw);function vp(e,t){return Pp(e,null,t)}function ZA(e,t){return Pp(e,null,{flush:"post"})}function yw(e,t){return Pp(e,null,{flush:"sync"})}function ds(e,t,n){return Pp(e,t,n)}function Pp(e,t,n=vi){const{immediate:r,deep:i,flush:s,once:o}=n,u=eo({},n),h=t&&r||!t&&s!=="post";let d;if(td){if(s==="sync"){const _=vw();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!h){const _=()=>{};return _.stop=hu,_.resume=hu,_.pause=hu,_}}const g=Ns;u.call=(_,P,T)=>du(_,g,P,T);let y=!1;s==="post"?u.scheduler=_=>{Os(_,g&&g.suspense)}:s!=="sync"&&(y=!0,u.scheduler=(_,P)=>{P?_():G1(_)}),u.augmentJob=_=>{t&&(_.flags|=4),y&&(_.flags|=2,g&&(_.id=g.uid,_.i=g))};const w=FP(e,t,u);return td&&(d?d.push(w):h&&w()),w}function KA(e,t,n){const r=this.proxy,i=uo(e)?e.includes(".")?_w(r,e):()=>r[e]:e.bind(r,r);let s;br(t)?s=t:(s=t.handler,n=t);const o=tf(this),u=Pp(i,s.bind(r),n);return o(),u}function _w(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function YA(e,t,n=vi){const r=gu(),i=da(t),s=Ll(t),o=bw(e,i),u=S4((h,d)=>{let g,y=vi,w;return yw(()=>{const _=e[i];Qa(g,_)&&(g=_,d())}),{get(){return h(),n.get?n.get(g):g},set(_){const P=n.set?n.set(_):_;if(!Qa(P,g)&&!(y!==vi&&Qa(_,y)))return;const T=r.vnode.props;T&&(t in T||i in T||s in T)&&(`onUpdate:${t}`in T||`onUpdate:${i}`in T||`onUpdate:${s}`in T)||(g=_,d()),r.emit(`update:${t}`,P),Qa(_,P)&&Qa(_,y)&&!Qa(P,w)&&d(),y=_,w=P}}});return u[Symbol.iterator]=()=>{let h=0;return{next(){return h<2?{value:h++?o||vi:u,done:!1}:{done:!0}}}},u}const bw=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${da(t)}Modifiers`]||e[`${Ll(t)}Modifiers`];function XA(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||vi;let i=n;const s=t.startsWith("update:"),o=s&&bw(r,t.slice(7));o&&(o.trim&&(i=n.map(g=>uo(g)?g.trim():g)),o.number&&(i=n.map(Z0)));let u,h=r[u=Gd(t)]||r[u=Gd(da(t))];!h&&s&&(h=r[u=Gd(Ll(t))]),h&&du(h,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,du(d,e,6,i)}}function ww(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!br(e)){const h=d=>{const g=ww(d,t,!0);g&&(u=!0,eo(o,g))};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!s&&!u?(Gi(e)&&r.set(e,null),null):(Jn(s)?s.forEach(h=>o[h]=null):eo(o,s),Gi(e)&&r.set(e,o),o)}function Um(e,t){return!e||!Sp(t)?!1:(t=t.slice(2).replace(/Once$/,""),Oi(e,t[0].toLowerCase()+t.slice(1))||Oi(e,Ll(t))||Oi(e,t))}function M0(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:h,render:d,renderCache:g,props:y,data:w,setupState:_,ctx:P,inheritAttrs:T}=e,j=pp(e);let D,U;try{if(n.shapeFlag&4){const X=i||r,se=X;D=xl(d.call(se,X,g,y,_,w,P)),U=u}else{const X=t;D=xl(X.length>1?X(y,{attrs:u,slots:o,emit:h}):X(y,null)),U=t.props?u:QA(u)}}catch(X){Xd.length=0,sf(X,e,1),D=Kr(Ss)}let K=D;if(U&&T!==!1){const X=Object.keys(U),{shapeFlag:se}=K;X.length&&se&7&&(s&&X.some(B1)&&(U=e6(U,s)),K=pc(K,U,!1,!0))}return n.dirs&&(K=pc(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(n.dirs):n.dirs),n.transition&&Fc(K,n.transition),D=K,pp(j),D}function JA(e,t=!0){let n;for(let r=0;r<e.length;r++){const i=e[r];if(jc(i)){if(i.type!==Ss||i.children==="v-if"){if(n)return;n=i}}else return}return n}const QA=e=>{let t;for(const n in e)(n==="class"||n==="style"||Sp(n))&&((t||(t={}))[n]=e[n]);return t},e6=(e,t)=>{const n={};for(const r in e)(!B1(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function t6(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:u,patchFlag:h}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Z2(r,o,d):!!o;if(h&8){const g=t.dynamicProps;for(let y=0;y<g.length;y++){const w=g[y];if(o[w]!==r[w]&&!Um(d,w))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===o?!1:r?o?Z2(r,o,d):!0:!!o;return!1}function Z2(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Um(n,s))return!0}return!1}function $m({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const nm=e=>e.__isSuspense;let Dv=0;const n6={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,s,o,u,h,d){if(e==null)i6(t,n,r,i,s,o,u,h,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}o6(e,t,n,r,i,o,u,h,d)}},hydrate:s6,normalize:a6},r6=n6;function yp(e,t){const n=e.props&&e.props[t];br(n)&&n()}function i6(e,t,n,r,i,s,o,u,h){const{p:d,o:{createElement:g}}=h,y=g("div"),w=e.suspense=xw(e,i,r,t,y,n,s,o,u,h);d(null,w.pendingBranch=e.ssContent,y,null,r,w,s,o),w.deps>0?(yp(e,"onPending"),yp(e,"onFallback"),d(null,e.ssFallback,t,n,r,null,s,o),Zf(w,e.ssFallback)):w.resolve(!1,!0)}function o6(e,t,n,r,i,s,o,u,{p:h,um:d,o:{createElement:g}}){const y=t.suspense=e.suspense;y.vnode=t,t.el=e.el;const w=t.ssContent,_=t.ssFallback,{activeBranch:P,pendingBranch:T,isInFallback:j,isHydrating:D}=y;if(T)y.pendingBranch=w,Ru(w,T)?(h(T,w,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():j&&(D||(h(P,_,n,r,i,null,s,o,u),Zf(y,_)))):(y.pendingId=Dv++,D?(y.isHydrating=!1,y.activeBranch=T):d(T,i,y),y.deps=0,y.effects.length=0,y.hiddenContainer=g("div"),j?(h(null,w,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():(h(P,_,n,r,i,null,s,o,u),Zf(y,_))):P&&Ru(w,P)?(h(P,w,n,r,i,y,s,o,u),y.resolve(!0)):(h(null,w,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0&&y.resolve()));else if(P&&Ru(w,P))h(P,w,n,r,i,y,s,o,u),Zf(y,w);else if(yp(t,"onPending"),y.pendingBranch=w,w.shapeFlag&512?y.pendingId=w.component.suspenseId:y.pendingId=Dv++,h(null,w,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0)y.resolve();else{const{timeout:U,pendingId:K}=y;U>0?setTimeout(()=>{y.pendingId===K&&y.fallback(_)},U):U===0&&y.fallback(_)}}function xw(e,t,n,r,i,s,o,u,h,d,g=!1){const{p:y,m:w,um:_,n:P,o:{parentNode:T,remove:j}}=d;let D;const U=l6(e);U&&t&&t.pendingBranch&&(D=t.pendingId,t.deps++);const K=e.props?K0(e.props.timeout):void 0,X=s,se={vnode:e,parent:t,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Dv++,timeout:typeof K=="number"?K:-1,activeBranch:null,pendingBranch:null,isInFallback:!g,isHydrating:g,isUnmounted:!1,effects:[],resolve(me=!1,Le=!1){const{vnode:H,activeBranch:R,pendingBranch:Z,pendingId:z,effects:O,parentComponent:k,container:I}=se;let W=!1;se.isHydrating?se.isHydrating=!1:me||(W=R&&Z.transition&&Z.transition.mode==="out-in",W&&(R.transition.afterLeave=()=>{z===se.pendingId&&(w(Z,I,s===X?P(R):s,0),fp(O))}),R&&(T(R.el)===I&&(s=P(R)),_(R,k,se,!0)),W||w(Z,I,s,0)),Zf(se,Z),se.pendingBranch=null,se.isInFallback=!1;let V=se.parent,G=!1;for(;V;){if(V.pendingBranch){V.effects.push(...O),G=!0;break}V=V.parent}!G&&!W&&fp(O),se.effects=[],U&&t&&t.pendingBranch&&D===t.pendingId&&(t.deps--,t.deps===0&&!Le&&t.resolve()),yp(H,"onResolve")},fallback(me){if(!se.pendingBranch)return;const{vnode:Le,activeBranch:H,parentComponent:R,container:Z,namespace:z}=se;yp(Le,"onFallback");const O=P(H),k=()=>{se.isInFallback&&(y(null,me,Z,O,R,null,z,u,h),Zf(se,me))},I=me.transition&&me.transition.mode==="out-in";I&&(H.transition.afterLeave=k),se.isInFallback=!0,_(H,R,null,!0),I||k()},move(me,Le,H){se.activeBranch&&w(se.activeBranch,me,Le,H),se.container=me},next(){return se.activeBranch&&P(se.activeBranch)},registerDep(me,Le,H){const R=!!se.pendingBranch;R&&se.deps++;const Z=me.vnode.el;me.asyncDep.catch(z=>{sf(z,me,0)}).then(z=>{if(me.isUnmounted||se.isUnmounted||se.pendingId!==me.suspenseId)return;me.asyncResolved=!0;const{vnode:O}=me;jv(me,z,!1),Z&&(O.el=Z);const k=!Z&&me.subTree.el;Le(me,O,T(Z||me.subTree.el),Z?null:P(me.subTree),se,o,H),k&&j(k),$m(me,O.el),R&&--se.deps===0&&se.resolve()})},unmount(me,Le){se.isUnmounted=!0,se.activeBranch&&_(se.activeBranch,n,me,Le),se.pendingBranch&&_(se.pendingBranch,n,me,Le)}};return se}function s6(e,t,n,r,i,s,o,u,h){const d=t.suspense=xw(t,r,n,e.parentNode,document.createElement("div"),null,i,s,o,u,!0),g=h(e,d.pendingBranch=t.ssContent,n,d,s,o);return d.deps===0&&d.resolve(!1,!0),g}function a6(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=K2(r?n.default:n),e.ssFallback=r?K2(n.fallback):Kr(Ss)}function K2(e){let t;if(br(e)){const n=ef&&e._c;n&&(e._d=!1,$e()),e=e(),n&&(e._d=!0,t=Fa,Sw())}return Jn(e)&&(e=JA(e)),e=xl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function Lw(e,t){t&&t.pendingBranch?Jn(e)?t.effects.push(...e):t.effects.push(e):fp(e)}function Zf(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,$m(r,i))}function l6(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const In=Symbol.for("v-fgt"),gh=Symbol.for("v-txt"),Ss=Symbol.for("v-cmt"),Yh=Symbol.for("v-stc"),Xd=[];let Fa=null;function $e(e=!1){Xd.push(Fa=e?null:[])}function Sw(){Xd.pop(),Fa=Xd[Xd.length-1]||null}let ef=1;function Iv(e,t=!1){ef+=e,e<0&&Fa&&t&&(Fa.hasOnce=!0)}function Ew(e){return e.dynamicChildren=ef>0?Fa||Vf:null,Sw(),ef>0&&Fa&&Fa.push(e),e}function Ge(e,t,n,r,i,s){return Ew(M(e,t,n,r,i,s,!0))}function ja(e,t,n,r,i){return Ew(Kr(e,t,n,r,i,!0))}function jc(e){return e?e.__v_isVNode===!0:!1}function Ru(e,t){return e.type===t.type&&e.key===t.key}function u6(e){}const Cw=({key:e})=>e??null,k0=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?uo(e)||zo(e)||br(e)?{i:Ds,r:e,k:t,f:!!n}:e:null);function M(e,t=null,n=null,r=0,i=null,s=e===In?0:1,o=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cw(t),ref:t&&k0(t),scopeId:Rm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ds};return u?(ny(h,n),s&128&&e.normalize(h)):n&&(h.shapeFlag|=uo(n)?8:16),ef>0&&!o&&Fa&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&Fa.push(h),h}const Kr=c6;function c6(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Y4)&&(e=Ss),jc(e)){const u=pc(e,t,!0);return n&&ny(u,n),ef>0&&!s&&Fa&&(u.shapeFlag&6?Fa[Fa.indexOf(e)]=u:Fa.push(u)),u.patchFlag=-2,u}if(v6(e)&&(e=e.__vccOpts),t){t=Pw(t);let{class:u,style:h}=t;u&&!uo(u)&&(t.class=Ni(u)),Gi(h)&&(Dm(h)&&!Jn(h)&&(h=eo({},h)),t.style=el(h))}const o=uo(e)?1:nm(e)?128:N4(e)?64:Gi(e)?4:br(e)?2:0;return M(e,t,n,r,i,o,s,!0)}function Pw(e){return e?Dm(e)||iw(e)?eo({},e):e:null}function pc(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:h}=e,d=t?Aw(i||{},t):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Cw(d),ref:t&&t.ref?n&&s?Jn(s)?s.concat(k0(t)):[s,k0(t)]:k0(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==In?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pc(e.ssContent),ssFallback:e.ssFallback&&pc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&r&&Fc(g,h.clone(g)),g}function ui(e=" ",t=0){return Kr(gh,null,e,t)}function fh(e,t){const n=Kr(Yh,null,e);return n.staticCount=t,n}function pn(e="",t=!1){return t?($e(),ja(Ss,null,e)):Kr(Ss,null,e)}function xl(e){return e==null||typeof e=="boolean"?Kr(Ss):Jn(e)?Kr(In,null,e.slice()):jc(e)?lh(e):Kr(gh,null,String(e))}function lh(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:pc(e)}function ny(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Jn(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),ny(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!iw(t)?t._ctx=Ds:i===3&&Ds&&(Ds.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else br(t)?(t={default:t,_ctx:Ds},n=32):(t=String(t),r&64?(n=16,t=[ui(t)]):n=8);e.children=t,e.shapeFlag|=n}function Aw(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Ni([t.class,r.class]));else if(i==="style")t.style=el([t.style,r.style]);else if(Sp(i)){const s=t[i],o=r[i];o&&s!==o&&!(Jn(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function bl(e,t,n,r=null){du(e,t,7,[n,r])}const h6=ew();let f6=0;function Mw(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||h6,s={uid:f6++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new I1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sw(r,i),emitsOptions:ww(r,i),emit:null,emitted:null,propsDefaults:vi,inheritAttrs:r.inheritAttrs,ctx:vi,data:vi,props:vi,attrs:vi,slots:vi,refs:vi,setupState:vi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=XA.bind(null,s),e.ce&&e.ce(s),s}let Ns=null;const gu=()=>Ns||Ds;let rm,Rv;{const e=Mm(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};rm=t("__VUE_INSTANCE_SETTERS__",n=>Ns=n),Rv=t("__VUE_SSR_SETTERS__",n=>td=n)}const tf=e=>{const t=Ns;return rm(e),e.scope.on(),()=>{e.scope.off(),rm(t)}},Fv=()=>{Ns&&Ns.scope.off(),rm(null)};function kw(e){return e.vnode.shapeFlag&4}let td=!1;function Tw(e,t=!1,n=!1){t&&Rv(t);const{props:r,children:i}=e.vnode,s=kw(e);UA(e,r,s,t),GA(e,i,n);const o=s?d6(e,t):void 0;return t&&Rv(!1),o}function d6(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Tv);const{setup:r}=n;if(r){Lh();const i=e.setupContext=r.length>1?Ow(e):null,s=tf(e),o=ud(r,e,0,[e.props,i]),u=N1(o);if(Sh(),s(),(u||e.sp)&&!mh(e)&&Z1(e),u){if(o.then(Fv,Fv),t)return o.then(h=>{jv(e,h,t)}).catch(h=>{sf(h,e,0)});e.asyncDep=o}else jv(e,o,t)}else Bw(e,t)}function jv(e,t,n){br(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Gi(t)&&(e.setupState=H1(t)),Bw(e,n)}let im,zv;function p6(e){im=e,zv=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,bA))}}const m6=()=>!im;function Bw(e,t,n){const r=e.type;if(!e.render){if(!t&&im&&!r.render){const i=r.template||Q1(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:h}=r,d=eo(eo({isCustomElement:s,delimiters:u},o),h);r.render=im(i,d)}}e.render=r.render||hu,zv&&zv(e)}{const i=tf(e);Lh();try{NA(e)}finally{Sh(),i()}}}const g6={get(e,t){return Oa(e,"get",""),e[t]}};function Ow(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,g6),slots:e.slots,emit:e.emit,expose:t}}function Ap(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(H1(Im(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Kd)return Kd[n](e)},has(t,n){return n in t||n in Kd}})):e.proxy}function Uv(e,t=!0){return br(e)?e.displayName||e.name:e.name||t&&e.__name}function v6(e){return br(e)&&"__vccOpts"in e}const hr=(e,t)=>NP(e,t,td);function Vm(e,t,n){const r=arguments.length;return r===2?Gi(t)&&!Jn(t)?jc(t)?Kr(e,null,[t]):Kr(e,t):Kr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&jc(n)&&(n=[n]),Kr(e,t,n))}function y6(){}function _6(e,t,n,r){const i=n[r];if(i&&Nw(i,e))return i;const s=t();return s.memo=e.slice(),s.cacheIndex=r,n[r]=s}function Nw(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(Qa(n[r],t[r]))return!1;return ef>0&&Fa&&Fa.push(e),!0}const Dw="3.5.13",b6=hu,w6=VP,x6=Nf,L6=B4,S6={createComponentInstance:Mw,setupComponent:Tw,renderComponentRoot:M0,setCurrentRenderingInstance:pp,isVNode:jc,normalizeVNode:xl,getComponentPublicInstance:Ap,ensureValidVNode:J1,pushWarningContext:jP,popWarningContext:zP},E6=S6,C6=null,P6=null,A6=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $v;const Y2=typeof window<"u"&&window.trustedTypes;if(Y2)try{$v=Y2.createPolicy("vue",{createHTML:e=>e})}catch{}const Iw=$v?e=>$v.createHTML(e):e=>e,M6="http://www.w3.org/2000/svg",k6="http://www.w3.org/1998/Math/MathML",Oc=typeof document<"u"?document:null,X2=Oc&&Oc.createElement("template"),T6={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Oc.createElementNS(M6,e):t==="mathml"?Oc.createElementNS(k6,e):n?Oc.createElement(e,{is:n}):Oc.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Oc.createTextNode(e),createComment:e=>Oc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Oc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{X2.innerHTML=Iw(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=X2.content;if(r==="svg"||r==="mathml"){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}t.insertBefore(u,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Jc="transition",Ld="animation",nd=Symbol("_vtc"),Rw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Fw=eo({},W1,Rw),B6=e=>(e.displayName="Transition",e.props=Fw,e),Vv=B6((e,{slots:t})=>Vm(j4,jw(e),t)),Ih=(e,t=[])=>{Jn(e)?e.forEach(n=>n(...t)):e&&e(...t)},J2=e=>e?Jn(e)?e.some(t=>t.length>1):e.length>1:!1;function jw(e){const t={};for(const O in e)O in Rw||(t[O]=e[O]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:h=s,appearActiveClass:d=o,appearToClass:g=u,leaveFromClass:y=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=e,P=O6(i),T=P&&P[0],j=P&&P[1],{onBeforeEnter:D,onEnter:U,onEnterCancelled:K,onLeave:X,onLeaveCancelled:se,onBeforeAppear:me=D,onAppear:Le=U,onAppearCancelled:H=K}=t,R=(O,k,I,W)=>{O._enterCancelled=W,rh(O,k?g:u),rh(O,k?d:o),I&&I()},Z=(O,k)=>{O._isLeaving=!1,rh(O,y),rh(O,_),rh(O,w),k&&k()},z=O=>(k,I)=>{const W=O?Le:U,V=()=>R(k,O,I);Ih(W,[k,V]),Q2(()=>{rh(k,O?h:s),rc(k,O?g:u),J2(W)||e_(k,r,T,V)})};return eo(t,{onBeforeEnter(O){Ih(D,[O]),rc(O,s),rc(O,o)},onBeforeAppear(O){Ih(me,[O]),rc(O,h),rc(O,d)},onEnter:z(!1),onAppear:z(!0),onLeave(O,k){O._isLeaving=!0;const I=()=>Z(O,k);rc(O,y),O._enterCancelled?(rc(O,w),Hv()):(Hv(),rc(O,w)),Q2(()=>{O._isLeaving&&(rh(O,y),rc(O,_),J2(X)||e_(O,r,j,I))}),Ih(X,[O,I])},onEnterCancelled(O){R(O,!1,void 0,!0),Ih(K,[O])},onAppearCancelled(O){R(O,!0,void 0,!0),Ih(H,[O])},onLeaveCancelled(O){Z(O),Ih(se,[O])}})}function O6(e){if(e==null)return null;if(Gi(e))return[Hg(e.enter),Hg(e.leave)];{const t=Hg(e);return[t,t]}}function Hg(e){return K0(e)}function rc(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[nd]||(e[nd]=new Set)).add(t)}function rh(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[nd];n&&(n.delete(t),n.size||(e[nd]=void 0))}function Q2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let N6=0;function e_(e,t,n,r){const i=e._endId=++N6,s=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:u,propCount:h}=zw(e,t);if(!o)return r();const d=o+"end";let g=0;const y=()=>{e.removeEventListener(d,w),s()},w=_=>{_.target===e&&++g>=h&&y()};setTimeout(()=>{g<h&&y()},u+1),e.addEventListener(d,w)}function zw(e,t){const n=window.getComputedStyle(e),r=P=>(n[P]||"").split(", "),i=r(`${Jc}Delay`),s=r(`${Jc}Duration`),o=t_(i,s),u=r(`${Ld}Delay`),h=r(`${Ld}Duration`),d=t_(u,h);let g=null,y=0,w=0;t===Jc?o>0&&(g=Jc,y=o,w=s.length):t===Ld?d>0&&(g=Ld,y=d,w=h.length):(y=Math.max(o,d),g=y>0?o>d?Jc:Ld:null,w=g?g===Jc?s.length:h.length:0);const _=g===Jc&&/\b(transform|all)(,|$)/.test(r(`${Jc}Property`).toString());return{type:g,timeout:y,propCount:w,hasTransform:_}}function t_(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>n_(n)+n_(e[r])))}function n_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Hv(){return document.body.offsetHeight}function D6(e,t,n){const r=e[nd];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const om=Symbol("_vod"),Uw=Symbol("_vsh"),Kf={beforeMount(e,{value:t},{transition:n}){e[om]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Sd(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Sd(e,!0),r.enter(e)):r.leave(e,()=>{Sd(e,!1)}):Sd(e,t))},beforeUnmount(e,{value:t}){Sd(e,t)}};function Sd(e,t){e.style.display=t?e[om]:"none",e[Uw]=!t}function I6(){Kf.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const $w=Symbol("");function R6(e){const t=gu();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>sm(s,i))},r=()=>{const i=e(t.proxy);t.ce?sm(t.ce,i):Gv(t.subTree,i),n(i)};K1(()=>{fp(r)}),ma(()=>{ds(r,hu,{flush:"post"});const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),Vc(()=>i.disconnect())})}function Gv(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Gv(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)sm(e.el,t);else if(e.type===In)e.children.forEach(n=>Gv(n,t));else if(e.type===Yh){let{el:n,anchor:r}=e;for(;n&&(sm(n,t),n!==r);)n=n.nextSibling}}function sm(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const i in t)n.setProperty(`--${i}`,t[i]),r+=`--${i}: ${t[i]};`;n[$w]=r}}const F6=/(^|;)\s*display\s*:/;function j6(e,t,n){const r=e.style,i=uo(n);let s=!1;if(n&&!i){if(t)if(uo(t))for(const o of t.split(";")){const u=o.slice(0,o.indexOf(":")).trim();n[u]==null&&T0(r,u,"")}else for(const o in t)n[o]==null&&T0(r,o,"");for(const o in n)o==="display"&&(s=!0),T0(r,o,n[o])}else if(i){if(t!==n){const o=r[$w];o&&(n+=";"+o),r.cssText=n,s=F6.test(n)}}else t&&e.removeAttribute("style");om in e&&(e[om]=s?r.display:"",e[Uw]&&(r.display="none"))}const r_=/\s*!important$/;function T0(e,t,n){if(Jn(n))n.forEach(r=>T0(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=z6(e,t);r_.test(n)?e.setProperty(Ll(r),n.replace(r_,""),"important"):e[r]=n}}const i_=["Webkit","Moz","ms"],Gg={};function z6(e,t){const n=Gg[t];if(n)return n;let r=da(t);if(r!=="filter"&&r in e)return Gg[t]=r;r=Ep(r);for(let i=0;i<i_.length;i++){const s=i_[i]+r;if(s in e)return Gg[t]=s}return t}const o_="http://www.w3.org/1999/xlink";function s_(e,t,n,r,i,s=tP(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(o_,t.slice(6,t.length)):e.setAttributeNS(o_,t,n):n==null||s&&!i4(n)?e.removeAttribute(t):e.setAttribute(t,s?"":zu(n)?String(n):n)}function a_(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Iw(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,h=n==null?e.type==="checkbox"?"on":"":String(n);(u!==h||!("_value"in e))&&(e.value=h),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=i4(n):n==null&&u==="string"?(n="",o=!0):u==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Ic(e,t,n,r){e.addEventListener(t,n,r)}function U6(e,t,n,r){e.removeEventListener(t,n,r)}const l_=Symbol("_vei");function $6(e,t,n,r,i=null){const s=e[l_]||(e[l_]={}),o=s[t];if(r&&o)o.value=r;else{const[u,h]=V6(t);if(r){const d=s[t]=q6(r,i);Ic(e,u,d,h)}else o&&(U6(e,u,o,h),s[t]=void 0)}}const u_=/(?:Once|Passive|Capture)$/;function V6(e){let t;if(u_.test(e)){t={};let r;for(;r=e.match(u_);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ll(e.slice(2)),t]}let qg=0;const H6=Promise.resolve(),G6=()=>qg||(H6.then(()=>qg=0),qg=Date.now());function q6(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;du(W6(r,n.value),t,5,[r])};return n.value=e,n.attached=G6(),n}function W6(e,t){if(Jn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const c_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Z6=(e,t,n,r,i,s)=>{const o=i==="svg";t==="class"?D6(e,r,o):t==="style"?j6(e,n,r):Sp(t)?B1(t)||$6(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):K6(e,t,r,o))?(a_(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&s_(e,t,r,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!uo(r))?a_(e,da(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),s_(e,t,r,o))};function K6(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&c_(t)&&br(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return c_(t)&&uo(n)?!1:t in e}const h_={};/*! #__NO_SIDE_EFFECTS__ */function Vw(e,t,n){const r=Jo(e,t);Pm(r)&&eo(r,t);class i extends Hm{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const Y6=(e,t)=>Vw(e,t,Qw),X6=typeof HTMLElement<"u"?HTMLElement:class{};class Hm extends X6{constructor(t,n={},r=lm){super(),this._def=t,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==lm?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof Hm){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,Ws(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let u;if(s&&!Jn(s))for(const h in s){const d=s[h];(d===Number||d&&d.type===Number)&&(h in this._props&&(this._props[h]=K0(this._props[h])),(u||(u=Object.create(null)))[da(h)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>t(this._def=r,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Oi(this,r)||Object.defineProperty(this,r,{get:()=>qn(n[r])})}_resolveProps(t){const{props:n}=t,r=Jn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(da))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let r=n?this.getAttribute(t):h_;const i=da(t);n&&this._numberProps&&this._numberProps[i]&&(r=K0(r)),this._setProp(i,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,i=!1){if(n!==this._props[t]&&(n===h_?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Ll(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ll(t),n+""):n||this.removeAttribute(Ll(t)),s&&s.observe(this,{attributes:!0})}}_update(){Jw(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=Kr(this._def,eo(t,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,Pm(o[0])?eo({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Ll(s)!==s&&i(Ll(s),o)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=t.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=t[i],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const i=t[r],s=i.getAttribute("name")||"default",o=this._slots[s],u=i.parentNode;if(o)for(const h of o){if(n&&h.nodeType===1){const d=n+"-s",g=document.createTreeWalker(h,1);h.setAttribute(d,"");let y;for(;y=g.nextNode();)y.setAttribute(d,"")}u.insertBefore(h,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function Hw(e){const t=gu(),n=t&&t.ce;return n||null}function J6(){const e=Hw();return e&&e.shadowRoot}function Q6(e="$style"){{const t=gu();if(!t)return vi;const n=t.type.__cssModules;if(!n)return vi;const r=n[e];return r||vi}}const Gw=new WeakMap,qw=new WeakMap,am=Symbol("_moveCb"),f_=Symbol("_enterCb"),eM=e=>(delete e.props.mode,e),tM=eM({name:"TransitionGroup",props:eo({},Fw,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=gu(),r=q1();let i,s;return zm(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!sM(i[0].el,n.vnode.el,o))return;i.forEach(rM),i.forEach(iM);const u=i.filter(oM);Hv(),u.forEach(h=>{const d=h.el,g=d.style;rc(d,o),g.transform=g.webkitTransform=g.transitionDuration="";const y=d[am]=w=>{w&&w.target!==d||(!w||/transform$/.test(w.propertyName))&&(d.removeEventListener("transitionend",y),d[am]=null,rh(d,o))};d.addEventListener("transitionend",y)})}),()=>{const o=gi(e),u=jw(o);let h=o.tag||In;if(i=[],s)for(let d=0;d<s.length;d++){const g=s[d];g.el&&g.el instanceof Element&&(i.push(g),Fc(g,ed(g,u,r,n)),Gw.set(g,g.el.getBoundingClientRect()))}s=t.default?Fm(t.default()):[];for(let d=0;d<s.length;d++){const g=s[d];g.key!=null&&Fc(g,ed(g,u,r,n))}return Kr(h,null,s)}}}),nM=tM;function rM(e){const t=e.el;t[am]&&t[am](),t[f_]&&t[f_]()}function iM(e){qw.set(e,e.el.getBoundingClientRect())}function oM(e){const t=Gw.get(e),n=qw.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function sM(e,t,n){const r=e.cloneNode(),i=e[nd];i&&i.forEach(u=>{u.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),n.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:o}=zw(r);return s.removeChild(r),o}const bh=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Jn(t)?n=>qf(t,n):t};function aM(e){e.target.composing=!0}function d_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fu=Symbol("_assign"),Ur={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[fu]=bh(i);const s=r||i.props&&i.props.type==="number";Ic(e,t?"change":"input",o=>{if(o.target.composing)return;let u=e.value;n&&(u=u.trim()),s&&(u=Z0(u)),e[fu](u)}),n&&Ic(e,"change",()=>{e.value=e.value.trim()}),t||(Ic(e,"compositionstart",aM),Ic(e,"compositionend",d_),Ic(e,"change",d_))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(e[fu]=bh(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?Z0(e.value):e.value,h=t??"";u!==h&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===h)||(e.value=h))}},Gm={deep:!0,created(e,t,n){e[fu]=bh(n),Ic(e,"change",()=>{const r=e._modelValue,i=rd(e),s=e.checked,o=e[fu];if(Jn(r)){const u=km(r,i),h=u!==-1;if(s&&!h)o(r.concat(i));else if(!s&&h){const d=[...r];d.splice(u,1),o(d)}}else if(of(r)){const u=new Set(r);s?u.add(i):u.delete(i),o(u)}else o(Ww(e,s))})},mounted:p_,beforeUpdate(e,t,n){e[fu]=bh(n),p_(e,t,n)}};function p_(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(Jn(t))i=km(t,r.props.value)>-1;else if(of(t))i=t.has(r.props.value);else{if(t===n)return;i=yh(t,Ww(e,!0))}e.checked!==i&&(e.checked=i)}const ry={created(e,{value:t},n){e.checked=yh(t,n.props.value),e[fu]=bh(n),Ic(e,"change",()=>{e[fu](rd(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[fu]=bh(r),t!==n&&(e.checked=yh(t,r.props.value))}},Eo={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=of(t);Ic(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Z0(rd(o)):rd(o));e[fu](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Ws(()=>{e._assigning=!1})}),e[fu]=bh(r)},mounted(e,{value:t}){m_(e,t)},beforeUpdate(e,t,n){e[fu]=bh(n)},updated(e,{value:t}){e._assigning||m_(e,t)}};function m_(e,t){const n=e.multiple,r=Jn(t);if(!(n&&!r&&!of(t))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],u=rd(o);if(n)if(r){const h=typeof u;h==="string"||h==="number"?o.selected=t.some(d=>String(d)===String(u)):o.selected=km(t,u)>-1}else o.selected=t.has(u);else if(yh(rd(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function rd(e){return"_value"in e?e._value:e.value}function Ww(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const iy={created(e,t,n){f0(e,t,n,null,"created")},mounted(e,t,n){f0(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){f0(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){f0(e,t,n,r,"updated")}};function Zw(e,t){switch(e){case"SELECT":return Eo;case"TEXTAREA":return Ur;default:switch(t){case"checkbox":return Gm;case"radio":return ry;default:return Ur}}}function f0(e,t,n,r,i){const o=Zw(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,r)}function lM(){Ur.getSSRProps=({value:e})=>({value:e}),ry.getSSRProps=({value:e},t)=>{if(t.props&&yh(t.props.value,e))return{checked:!0}},Gm.getSSRProps=({value:e},t)=>{if(Jn(e)){if(t.props&&km(e,t.props.value)>-1)return{checked:!0}}else if(of(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},iy.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=Zw(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const uM=["ctrl","shift","alt","meta"],cM={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>uM.some(n=>e[`${n}Key`]&&!t.includes(n))},zc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<t.length;o++){const u=cM[t[o]];if(u&&u(i,t))return}return e(i,...s)})},hM={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fM=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Ll(i.key);if(t.some(o=>o===s||hM[o]===s))return e(i)})},Kw=eo({patchProp:Z6},T6);let Jd,g_=!1;function Yw(){return Jd||(Jd=hw(Kw))}function Xw(){return Jd=g_?Jd:fw(Kw),g_=!0,Jd}const Jw=(...e)=>{Yw().render(...e)},dM=(...e)=>{Xw().hydrate(...e)},lm=(...e)=>{const t=Yw().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=t5(r);if(!i)return;const s=t._component;!br(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,e5(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t},Qw=(...e)=>{const t=Xw().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=t5(r);if(i)return n(i,!0,e5(i))},t};function e5(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function t5(e){return uo(e)?document.querySelector(e):e}let v_=!1;const pM=()=>{v_||(v_=!0,lM(),I6())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const mM=()=>{},gM=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:j4,BaseTransitionPropsValidators:W1,Comment:Ss,DeprecationTypes:A6,EffectScope:I1,ErrorCodes:$P,ErrorTypeStrings:w6,Fragment:In,KeepAlive:dA,ReactiveEffect:up,Static:Yh,Suspense:r6,Teleport:P0,Text:gh,TrackOpTypes:DP,Transition:Vv,TransitionGroup:nM,TriggerOpTypes:IP,VueElement:Hm,assertNumber:UP,callWithAsyncErrorHandling:du,callWithErrorHandling:ud,camelize:da,capitalize:Ep,cloneVNode:pc,compatUtils:P6,compile:mM,computed:hr,createApp:lm,createBlock:ja,createCommentVNode:pn,createElementBlock:Ge,createElementVNode:M,createHydrationRenderer:fw,createPropsRestProxy:BA,createRenderer:hw,createSSRApp:Qw,createSlots:X4,createStaticVNode:fh,createTextVNode:ui,createVNode:Kr,customRef:S4,defineAsyncComponent:hA,defineComponent:Jo,defineCustomElement:Vw,defineEmits:xA,defineExpose:LA,defineModel:CA,defineOptions:SA,defineProps:wA,defineSSRCustomElement:Y6,defineSlots:EA,devtools:x6,effect:iP,effectScope:R1,getCurrentInstance:gu,getCurrentScope:F1,getCurrentWatcher:RP,getTransitionRawChildren:Fm,guardReactiveProps:Pw,h:Vm,handleError:sf,hasInjectionContext:tw,hydrate:dM,hydrateOnIdle:oA,hydrateOnInteraction:uA,hydrateOnMediaQuery:lA,hydrateOnVisible:aA,initCustomFormatter:y6,initDirectivesForSSR:pM,inject:Gl,isMemoSame:Nw,isProxy:Dm,isReactive:cc,isReadonly:_h,isRef:zo,isRuntimeOnly:m6,isShallow:Hl,isVNode:jc,markRaw:Im,mergeDefaults:kA,mergeModels:TA,mergeProps:Aw,nextTick:Ws,normalizeClass:Ni,normalizeProps:QC,normalizeStyle:el,onActivated:U4,onBeforeMount:H4,onBeforeUnmount:cd,onBeforeUpdate:K1,onDeactivated:$4,onErrorCaptured:Z4,onMounted:ma,onRenderTracked:W4,onRenderTriggered:q4,onScopeDispose:a4,onServerPrefetch:G4,onUnmounted:Vc,onUpdated:zm,onWatcherCleanup:P4,openBlock:$e,popScopeId:WP,provide:Yd,proxyRefs:H1,pushScopeId:qP,queuePostFlushCb:fp,reactive:mu,readonly:Nu,ref:It,registerRuntimeCompiler:p6,render:Jw,renderList:Sr,renderSlot:yA,resolveComponent:K4,resolveDirective:vA,resolveDynamicComponent:gA,resolveFilter:C6,resolveTransitionHooks:ed,setBlockTracking:Iv,setDevtoolsHook:L6,setTransitionHooks:Fc,shallowReactive:$1,shallowReadonly:SP,shallowRef:V1,ssrContextKey:gw,ssrUtils:E6,stop:oP,toDisplayString:Ht,toHandlerKey:Gd,toHandlers:_A,toRaw:gi,toRef:BP,toRefs:E4,toValue:PP,transformVNodeArgs:u6,triggerRef:CP,unref:qn,useAttrs:MA,useCssModule:Q6,useCssVars:R6,useHost:Hw,useId:XP,useModel:YA,useSSRContext:vw,useShadowRoot:J6,useSlots:AA,useTemplateRef:JP,useTransitionState:q1,vModelCheckbox:Gm,vModelDynamic:iy,vModelRadio:ry,vModelSelect:Eo,vModelText:Ur,vShow:Kf,version:Dw,warn:b6,watch:ds,watchEffect:vp,watchPostEffect:ZA,watchSyncEffect:yw,withAsyncContext:OA,withCtx:$l,withDefaults:PA,withDirectives:Hn,withKeys:fM,withMemo:_6,withModifiers:zc,withScopeId:ZP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let n5;const qm=e=>n5=e,r5=Symbol();function qv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Qd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Qd||(Qd={}));function vM(){const e=R1(!0),t=e.run(()=>It({}));let n=[],r=[];const i=Im({install(s){qm(i),i._a=s,s.provide(r5,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const i5=()=>{};function y_(e,t,n,r=i5){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&F1()&&a4(i),i}function Cf(e,...t){e.slice().forEach(n=>{n(...t)})}const yM=e=>e(),__=Symbol(),Wg=Symbol();function Wv(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];qv(i)&&qv(r)&&e.hasOwnProperty(n)&&!zo(r)&&!cc(r)?e[n]=Wv(i,r):e[n]=r}return e}const _M=Symbol();function bM(e){return!qv(e)||!e.hasOwnProperty(_M)}const{assign:ih}=Object;function wM(e){return!!(zo(e)&&e.effect)}function xM(e,t,n,r){const{state:i,actions:s,getters:o}=t,u=n.state.value[e];let h;function d(){u||(n.state.value[e]=i?i():{});const g=E4(n.state.value[e]);return ih(g,s,Object.keys(o||{}).reduce((y,w)=>(y[w]=Im(hr(()=>{qm(n);const _=n._s.get(e);return o[w].call(_,_)})),y),{}))}return h=o5(e,d,t,n,r,!0),h}function o5(e,t,n={},r,i,s){let o;const u=ih({actions:{}},n),h={deep:!0};let d,g,y=[],w=[],_;const P=r.state.value[e];!s&&!P&&(r.state.value[e]={}),It({});let T;function j(H){let R;d=g=!1,typeof H=="function"?(H(r.state.value[e]),R={type:Qd.patchFunction,storeId:e,events:_}):(Wv(r.state.value[e],H),R={type:Qd.patchObject,payload:H,storeId:e,events:_});const Z=T=Symbol();Ws().then(()=>{T===Z&&(d=!0)}),g=!0,Cf(y,R,r.state.value[e])}const D=s?function(){const{state:R}=n,Z=R?R():{};this.$patch(z=>{ih(z,Z)})}:i5;function U(){o.stop(),y=[],w=[],r._s.delete(e)}const K=(H,R="")=>{if(__ in H)return H[Wg]=R,H;const Z=function(){qm(r);const z=Array.from(arguments),O=[],k=[];function I(G){O.push(G)}function W(G){k.push(G)}Cf(w,{args:z,name:Z[Wg],store:se,after:I,onError:W});let V;try{V=H.apply(this&&this.$id===e?this:se,z)}catch(G){throw Cf(k,G),G}return V instanceof Promise?V.then(G=>(Cf(O,G),G)).catch(G=>(Cf(k,G),Promise.reject(G))):(Cf(O,V),V)};return Z[__]=!0,Z[Wg]=R,Z},X={_p:r,$id:e,$onAction:y_.bind(null,w),$patch:j,$reset:D,$subscribe(H,R={}){const Z=y_(y,H,R.detached,()=>z()),z=o.run(()=>ds(()=>r.state.value[e],O=>{(R.flush==="sync"?g:d)&&H({storeId:e,type:Qd.direct,events:_},O)},ih({},h,R)));return Z},$dispose:U},se=mu(X);r._s.set(e,se);const Le=(r._a&&r._a.runWithContext||yM)(()=>r._e.run(()=>(o=R1()).run(()=>t({action:K}))));for(const H in Le){const R=Le[H];if(zo(R)&&!wM(R)||cc(R))s||(P&&bM(R)&&(zo(R)?R.value=P[H]:Wv(R,P[H])),r.state.value[e][H]=R);else if(typeof R=="function"){const Z=K(R,H);Le[H]=Z,u.actions[H]=R}}return ih(se,Le),ih(gi(se),Le),Object.defineProperty(se,"$state",{get:()=>r.state.value[e],set:H=>{j(R=>{ih(R,H)})}}),r._p.forEach(H=>{ih(se,o.run(()=>H({store:se,app:r._a,pinia:r,options:u})))}),P&&s&&n.hydrate&&n.hydrate(se.$state,P),d=!0,g=!0,se}/*! #__NO_SIDE_EFFECTS__ */function Mp(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function o(u,h){const d=tw();return u=u||(d?Gl(r5,null):null),u&&qm(u),u=n5,u._s.has(r)||(s?o5(r,t,i,u):xM(r,i,u)),u._s.get(r)}return o.$id=r,o}function s5(e,t){return function(){return e.apply(t,arguments)}}const{toString:LM}=Object.prototype,{getPrototypeOf:oy}=Object,Wm=(e=>t=>{const n=LM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vu=e=>(e=e.toLowerCase(),t=>Wm(t)===e),Zm=e=>t=>typeof t===e,{isArray:hd}=Array,_p=Zm("undefined");function SM(e){return e!==null&&!_p(e)&&e.constructor!==null&&!_p(e.constructor)&&ql(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const a5=Vu("ArrayBuffer");function EM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&a5(e.buffer),t}const CM=Zm("string"),ql=Zm("function"),l5=Zm("number"),Km=e=>e!==null&&typeof e=="object",PM=e=>e===!0||e===!1,B0=e=>{if(Wm(e)!=="object")return!1;const t=oy(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},AM=Vu("Date"),MM=Vu("File"),kM=Vu("Blob"),TM=Vu("FileList"),BM=e=>Km(e)&&ql(e.pipe),OM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ql(e.append)&&((t=Wm(e))==="formdata"||t==="object"&&ql(e.toString)&&e.toString()==="[object FormData]"))},NM=Vu("URLSearchParams"),[DM,IM,RM,FM]=["ReadableStream","Request","Response","Headers"].map(Vu),jM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),hd(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],t.call(null,e[u],u,e)}}function u5(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,c5=e=>!_p(e)&&e!==Hh;function Zv(){const{caseless:e}=c5(this)&&this||{},t={},n=(r,i)=>{const s=e&&u5(t,i)||i;B0(t[s])&&B0(r)?t[s]=Zv(t[s],r):B0(r)?t[s]=Zv({},r):hd(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&kp(arguments[r],n);return t}const zM=(e,t,n,{allOwnKeys:r}={})=>(kp(t,(i,s)=>{n&&ql(i)?e[s]=s5(i,n):e[s]=i},{allOwnKeys:r}),e),UM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$M=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},VM=(e,t,n,r)=>{let i,s,o;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!u[o]&&(t[o]=e[o],u[o]=!0);e=n!==!1&&oy(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},HM=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},GM=e=>{if(!e)return null;if(hd(e))return e;let t=e.length;if(!l5(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},qM=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&oy(Uint8Array)),WM=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},ZM=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},KM=Vu("HTMLFormElement"),YM=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),b_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),XM=Vu("RegExp"),h5=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};kp(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},JM=e=>{h5(e,(t,n)=>{if(ql(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ql(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},QM=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return hd(e)?r(e):r(String(e).split(t)),n},ek=()=>{},tk=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function nk(e){return!!(e&&ql(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rk=e=>{const t=new Array(10),n=(r,i)=>{if(Km(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=hd(r)?[]:{};return kp(r,(o,u)=>{const h=n(o,i+1);!_p(h)&&(s[u]=h)}),t[i]=void 0,s}}return r};return n(e,0)},ik=Vu("AsyncFunction"),ok=e=>e&&(Km(e)||ql(e))&&ql(e.then)&&ql(e.catch),f5=((e,t)=>e?setImmediate:t?((n,r)=>(Hh.addEventListener("message",({source:i,data:s})=>{i===Hh&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Hh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ql(Hh.postMessage)),sk=typeof queueMicrotask<"u"?queueMicrotask.bind(Hh):typeof process<"u"&&process.nextTick||f5,Zt={isArray:hd,isArrayBuffer:a5,isBuffer:SM,isFormData:OM,isArrayBufferView:EM,isString:CM,isNumber:l5,isBoolean:PM,isObject:Km,isPlainObject:B0,isReadableStream:DM,isRequest:IM,isResponse:RM,isHeaders:FM,isUndefined:_p,isDate:AM,isFile:MM,isBlob:kM,isRegExp:XM,isFunction:ql,isStream:BM,isURLSearchParams:NM,isTypedArray:qM,isFileList:TM,forEach:kp,merge:Zv,extend:zM,trim:jM,stripBOM:UM,inherits:$M,toFlatObject:VM,kindOf:Wm,kindOfTest:Vu,endsWith:HM,toArray:GM,forEachEntry:WM,matchAll:ZM,isHTMLForm:KM,hasOwnProperty:b_,hasOwnProp:b_,reduceDescriptors:h5,freezeMethods:JM,toObjectSet:QM,toCamelCase:YM,noop:ek,toFiniteNumber:tk,findKey:u5,global:Hh,isContextDefined:c5,isSpecCompliantForm:nk,toJSONObject:rk,isAsyncFn:ik,isThenable:ok,setImmediate:f5,asap:sk};function Vr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Zt.inherits(Vr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Zt.toJSONObject(this.config),code:this.code,status:this.status}}});const d5=Vr.prototype,p5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p5[e]={value:e}});Object.defineProperties(Vr,p5);Object.defineProperty(d5,"isAxiosError",{value:!0});Vr.from=(e,t,n,r,i,s)=>{const o=Object.create(d5);return Zt.toFlatObject(e,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Vr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const ak=null;function Kv(e){return Zt.isPlainObject(e)||Zt.isArray(e)}function m5(e){return Zt.endsWith(e,"[]")?e.slice(0,-2):e}function w_(e,t,n){return e?e.concat(t).map(function(i,s){return i=m5(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function lk(e){return Zt.isArray(e)&&!e.some(Kv)}const uk=Zt.toFlatObject(Zt,{},null,function(t){return/^is[A-Z]/.test(t)});function Ym(e,t,n){if(!Zt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Zt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,j){return!Zt.isUndefined(j[T])});const r=n.metaTokens,i=n.visitor||g,s=n.dots,o=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&Zt.isSpecCompliantForm(t);if(!Zt.isFunction(i))throw new TypeError("visitor must be a function");function d(P){if(P===null)return"";if(Zt.isDate(P))return P.toISOString();if(!h&&Zt.isBlob(P))throw new Vr("Blob is not supported. Use a Buffer instead.");return Zt.isArrayBuffer(P)||Zt.isTypedArray(P)?h&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function g(P,T,j){let D=P;if(P&&!j&&typeof P=="object"){if(Zt.endsWith(T,"{}"))T=r?T:T.slice(0,-2),P=JSON.stringify(P);else if(Zt.isArray(P)&&lk(P)||(Zt.isFileList(P)||Zt.endsWith(T,"[]"))&&(D=Zt.toArray(P)))return T=m5(T),D.forEach(function(K,X){!(Zt.isUndefined(K)||K===null)&&t.append(o===!0?w_([T],X,s):o===null?T:T+"[]",d(K))}),!1}return Kv(P)?!0:(t.append(w_(j,T,s),d(P)),!1)}const y=[],w=Object.assign(uk,{defaultVisitor:g,convertValue:d,isVisitable:Kv});function _(P,T){if(!Zt.isUndefined(P)){if(y.indexOf(P)!==-1)throw Error("Circular reference detected in "+T.join("."));y.push(P),Zt.forEach(P,function(D,U){(!(Zt.isUndefined(D)||D===null)&&i.call(t,D,Zt.isString(U)?U.trim():U,T,w))===!0&&_(D,T?T.concat(U):[U])}),y.pop()}}if(!Zt.isObject(e))throw new TypeError("data must be an object");return _(e),t}function x_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function sy(e,t){this._pairs=[],e&&Ym(e,this,t)}const g5=sy.prototype;g5.append=function(t,n){this._pairs.push([t,n])};g5.toString=function(t){const n=t?function(r){return t.call(this,r,x_)}:x_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ck(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v5(e,t,n){if(!t)return e;const r=n&&n.encode||ck;Zt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=Zt.isURLSearchParams(t)?t.toString():new sy(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class L_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Zt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const y5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hk=typeof URLSearchParams<"u"?URLSearchParams:sy,fk=typeof FormData<"u"?FormData:null,dk=typeof Blob<"u"?Blob:null,pk={isBrowser:!0,classes:{URLSearchParams:hk,FormData:fk,Blob:dk},protocols:["http","https","file","blob","url","data"]},ay=typeof window<"u"&&typeof document<"u",Yv=typeof navigator=="object"&&navigator||void 0,mk=ay&&(!Yv||["ReactNative","NativeScript","NS"].indexOf(Yv.product)<0),gk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vk=ay&&window.location.href||"http://localhost",yk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ay,hasStandardBrowserEnv:mk,hasStandardBrowserWebWorkerEnv:gk,navigator:Yv,origin:vk},Symbol.toStringTag,{value:"Module"})),Da={...yk,...pk};function _k(e,t){return Ym(e,new Da.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Da.isNode&&Zt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function bk(e){return Zt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wk(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function _5(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),h=s>=n.length;return o=!o&&Zt.isArray(i)?i.length:o,h?(Zt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Zt.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&Zt.isArray(i[o])&&(i[o]=wk(i[o])),!u)}if(Zt.isFormData(e)&&Zt.isFunction(e.entries)){const n={};return Zt.forEachEntry(e,(r,i)=>{t(bk(r),i,n,0)}),n}return null}function xk(e,t,n){if(Zt.isString(e))try{return(t||JSON.parse)(e),Zt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tp={transitional:y5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Zt.isObject(t);if(s&&Zt.isHTMLForm(t)&&(t=new FormData(t)),Zt.isFormData(t))return i?JSON.stringify(_5(t)):t;if(Zt.isArrayBuffer(t)||Zt.isBuffer(t)||Zt.isStream(t)||Zt.isFile(t)||Zt.isBlob(t)||Zt.isReadableStream(t))return t;if(Zt.isArrayBufferView(t))return t.buffer;if(Zt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _k(t,this.formSerializer).toString();if((u=Zt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Ym(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),xk(t)):t}],transformResponse:[function(t){const n=this.transitional||Tp.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Zt.isResponse(t)||Zt.isReadableStream(t))return t;if(t&&Zt.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(o)throw u.name==="SyntaxError"?Vr.from(u,Vr.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Da.classes.FormData,Blob:Da.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Zt.forEach(["delete","get","head","post","put","patch"],e=>{Tp.headers[e]={}});const Lk=Zt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sk=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&Lk[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},S_=Symbol("internals");function Ed(e){return e&&String(e).trim().toLowerCase()}function O0(e){return e===!1||e==null?e:Zt.isArray(e)?e.map(O0):String(e)}function Ek(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Ck=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zg(e,t,n,r,i){if(Zt.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Zt.isString(t)){if(Zt.isString(r))return t.indexOf(r)!==-1;if(Zt.isRegExp(r))return r.test(t)}}function Pk(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Ak(e,t){const n=Zt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let Sl=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(u,h,d){const g=Ed(h);if(!g)throw new Error("header name must be a non-empty string");const y=Zt.findKey(i,g);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||h]=O0(u))}const o=(u,h)=>Zt.forEach(u,(d,g)=>s(d,g,h));if(Zt.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Zt.isString(t)&&(t=t.trim())&&!Ck(t))o(Sk(t),n);else if(Zt.isHeaders(t))for(const[u,h]of t.entries())s(h,u,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=Ed(t),t){const r=Zt.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return Ek(i);if(Zt.isFunction(n))return n.call(this,i,r);if(Zt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ed(t),t){const r=Zt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Zg(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=Ed(o),o){const u=Zt.findKey(r,o);u&&(!n||Zg(r,r[u],u,n))&&(delete r[u],i=!0)}}return Zt.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Zg(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return Zt.forEach(this,(i,s)=>{const o=Zt.findKey(r,s);if(o){n[o]=O0(i),delete n[s];return}const u=t?Pk(s):String(s).trim();u!==s&&delete n[s],n[u]=O0(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Zt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Zt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[S_]=this[S_]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Ed(o);r[u]||(Ak(i,o),r[u]=!0)}return Zt.isArray(t)?t.forEach(s):s(t),this}};Sl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Zt.reduceDescriptors(Sl.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Zt.freezeMethods(Sl);function Kg(e,t){const n=this||Tp,r=t||n,i=Sl.from(r.headers);let s=r.data;return Zt.forEach(e,function(u){s=u.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function b5(e){return!!(e&&e.__CANCEL__)}function fd(e,t,n){Vr.call(this,e??"canceled",Vr.ERR_CANCELED,t,n),this.name="CanceledError"}Zt.inherits(fd,Vr,{__CANCEL__:!0});function w5(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Vr("Request failed with status code "+n.status,[Vr.ERR_BAD_REQUEST,Vr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Mk(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function kk(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(h){const d=Date.now(),g=r[s];o||(o=d),n[i]=h,r[i]=d;let y=s,w=0;for(;y!==i;)w+=n[y++],y=y%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),d-o<t)return;const _=g&&d-g;return _?Math.round(w*1e3/_):void 0}}function Tk(e,t){let n=0,r=1e3/t,i,s;const o=(d,g=Date.now())=>{n=g,i=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const g=Date.now(),y=g-n;y>=r?o(d,g):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-y)))},()=>i&&o(i)]}const um=(e,t,n=3)=>{let r=0;const i=kk(50,250);return Tk(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,h=o-r,d=i(h),g=o<=u;r=o;const y={loaded:o,total:u,progress:u?o/u:void 0,bytes:h,rate:d||void 0,estimated:d&&u&&g?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(y)},n)},E_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},C_=e=>(...t)=>Zt.asap(()=>e(...t)),Bk=Da.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Da.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Da.origin),Da.navigator&&/(msie|trident)/i.test(Da.navigator.userAgent)):()=>!0,Ok=Da.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];Zt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Zt.isString(r)&&o.push("path="+r),Zt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nk(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Dk(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function x5(e,t,n){let r=!Nk(t);return e&&(r||n==!1)?Dk(e,t):t}const P_=e=>e instanceof Sl?{...e}:e;function nf(e,t){t=t||{};const n={};function r(d,g,y,w){return Zt.isPlainObject(d)&&Zt.isPlainObject(g)?Zt.merge.call({caseless:w},d,g):Zt.isPlainObject(g)?Zt.merge({},g):Zt.isArray(g)?g.slice():g}function i(d,g,y,w){if(Zt.isUndefined(g)){if(!Zt.isUndefined(d))return r(void 0,d,y,w)}else return r(d,g,y,w)}function s(d,g){if(!Zt.isUndefined(g))return r(void 0,g)}function o(d,g){if(Zt.isUndefined(g)){if(!Zt.isUndefined(d))return r(void 0,d)}else return r(void 0,g)}function u(d,g,y){if(y in t)return r(d,g);if(y in e)return r(void 0,d)}const h={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,g,y)=>i(P_(d),P_(g),y,!0)};return Zt.forEach(Object.keys(Object.assign({},e,t)),function(g){const y=h[g]||i,w=y(e[g],t[g],g);Zt.isUndefined(w)&&y!==u||(n[g]=w)}),n}const L5=e=>{const t=nf({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=t;t.headers=o=Sl.from(o),t.url=v5(x5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Zt.isFormData(n)){if(Da.hasStandardBrowserEnv||Da.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((h=o.getContentType())!==!1){const[d,...g]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...g].join("; "))}}if(Da.hasStandardBrowserEnv&&(r&&Zt.isFunction(r)&&(r=r(t)),r||r!==!1&&Bk(t.url))){const d=i&&s&&Ok.read(s);d&&o.set(i,d)}return t},Ik=typeof XMLHttpRequest<"u",Rk=Ik&&function(e){return new Promise(function(n,r){const i=L5(e);let s=i.data;const o=Sl.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:d}=i,g,y,w,_,P;function T(){_&&_(),P&&P(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let j=new XMLHttpRequest;j.open(i.method.toUpperCase(),i.url,!0),j.timeout=i.timeout;function D(){if(!j)return;const K=Sl.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),se={data:!u||u==="text"||u==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:K,config:e,request:j};w5(function(Le){n(Le),T()},function(Le){r(Le),T()},se),j=null}"onloadend"in j?j.onloadend=D:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(D)},j.onabort=function(){j&&(r(new Vr("Request aborted",Vr.ECONNABORTED,e,j)),j=null)},j.onerror=function(){r(new Vr("Network Error",Vr.ERR_NETWORK,e,j)),j=null},j.ontimeout=function(){let X=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const se=i.transitional||y5;i.timeoutErrorMessage&&(X=i.timeoutErrorMessage),r(new Vr(X,se.clarifyTimeoutError?Vr.ETIMEDOUT:Vr.ECONNABORTED,e,j)),j=null},s===void 0&&o.setContentType(null),"setRequestHeader"in j&&Zt.forEach(o.toJSON(),function(X,se){j.setRequestHeader(se,X)}),Zt.isUndefined(i.withCredentials)||(j.withCredentials=!!i.withCredentials),u&&u!=="json"&&(j.responseType=i.responseType),d&&([w,P]=um(d,!0),j.addEventListener("progress",w)),h&&j.upload&&([y,_]=um(h),j.upload.addEventListener("progress",y),j.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(g=K=>{j&&(r(!K||K.type?new fd(null,e,j):K),j.abort(),j=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const U=Mk(i.url);if(U&&Da.protocols.indexOf(U)===-1){r(new Vr("Unsupported protocol "+U+":",Vr.ERR_BAD_REQUEST,e));return}j.send(s||null)})},Fk=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,u();const g=d instanceof Error?d:this.reason;r.abort(g instanceof Vr?g:new fd(g instanceof Error?g.message:g))}};let o=t&&setTimeout(()=>{o=null,s(new Vr(`timeout ${t} of ms exceeded`,Vr.ETIMEDOUT))},t);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:h}=r;return h.unsubscribe=()=>Zt.asap(u),h}},jk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},zk=async function*(e,t){for await(const n of Uk(e))yield*jk(n,t)},Uk=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},A_=(e,t,n,r)=>{const i=zk(e,t);let s=0,o,u=h=>{o||(o=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:d,value:g}=await i.next();if(d){u(),h.close();return}let y=g.byteLength;if(n){let w=s+=y;n(w)}h.enqueue(new Uint8Array(g))}catch(d){throw u(d),d}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},Xm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",S5=Xm&&typeof ReadableStream=="function",$k=Xm&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),E5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Vk=S5&&E5(()=>{let e=!1;const t=new Request(Da.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),M_=64*1024,Xv=S5&&E5(()=>Zt.isReadableStream(new Response("").body)),cm={stream:Xv&&(e=>e.body)};Xm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!cm[t]&&(cm[t]=Zt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Vr(`Response type '${t}' is not supported`,Vr.ERR_NOT_SUPPORT,r)})})})(new Response);const Hk=async e=>{if(e==null)return 0;if(Zt.isBlob(e))return e.size;if(Zt.isSpecCompliantForm(e))return(await new Request(Da.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Zt.isArrayBufferView(e)||Zt.isArrayBuffer(e))return e.byteLength;if(Zt.isURLSearchParams(e)&&(e=e+""),Zt.isString(e))return(await $k(e)).byteLength},Gk=async(e,t)=>{const n=Zt.toFiniteNumber(e.getContentLength());return n??Hk(t)},qk=Xm&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:h,responseType:d,headers:g,withCredentials:y="same-origin",fetchOptions:w}=L5(e);d=d?(d+"").toLowerCase():"text";let _=Fk([i,s&&s.toAbortSignal()],o),P;const T=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let j;try{if(h&&Vk&&n!=="get"&&n!=="head"&&(j=await Gk(g,r))!==0){let se=new Request(t,{method:"POST",body:r,duplex:"half"}),me;if(Zt.isFormData(r)&&(me=se.headers.get("content-type"))&&g.setContentType(me),se.body){const[Le,H]=E_(j,um(C_(h)));r=A_(se.body,M_,Le,H)}}Zt.isString(y)||(y=y?"include":"omit");const D="credentials"in Request.prototype;P=new Request(t,{...w,signal:_,method:n.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:D?y:void 0});let U=await fetch(P);const K=Xv&&(d==="stream"||d==="response");if(Xv&&(u||K&&T)){const se={};["status","statusText","headers"].forEach(R=>{se[R]=U[R]});const me=Zt.toFiniteNumber(U.headers.get("content-length")),[Le,H]=u&&E_(me,um(C_(u),!0))||[];U=new Response(A_(U.body,M_,Le,()=>{H&&H(),T&&T()}),se)}d=d||"text";let X=await cm[Zt.findKey(cm,d)||"text"](U,e);return!K&&T&&T(),await new Promise((se,me)=>{w5(se,me,{data:X,headers:Sl.from(U.headers),status:U.status,statusText:U.statusText,config:e,request:P})})}catch(D){throw T&&T(),D&&D.name==="TypeError"&&/fetch/i.test(D.message)?Object.assign(new Vr("Network Error",Vr.ERR_NETWORK,e,P),{cause:D.cause||D}):Vr.from(D,D&&D.code,e,P)}}),Jv={http:ak,xhr:Rk,fetch:qk};Zt.forEach(Jv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const k_=e=>`- ${e}`,Wk=e=>Zt.isFunction(e)||e===null||e===!1,C5={getAdapter:e=>{e=Zt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!Wk(n)&&(r=Jv[(o=String(n)).toLowerCase()],r===void 0))throw new Vr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(k_).join(`
`):" "+k_(s[0]):"as no adapter specified";throw new Vr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Jv};function Yg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fd(null,e)}function T_(e){return Yg(e),e.headers=Sl.from(e.headers),e.data=Kg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),C5.getAdapter(e.adapter||Tp.adapter)(e).then(function(r){return Yg(e),r.data=Kg.call(e,e.transformResponse,r),r.headers=Sl.from(r.headers),r},function(r){return b5(r)||(Yg(e),r&&r.response&&(r.response.data=Kg.call(e,e.transformResponse,r.response),r.response.headers=Sl.from(r.response.headers))),Promise.reject(r)})}const P5="1.8.4",Jm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Jm[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const B_={};Jm.transitional=function(t,n,r){function i(s,o){return"[Axios v"+P5+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(t===!1)throw new Vr(i(o," has been removed"+(n?" in "+n:"")),Vr.ERR_DEPRECATED);return n&&!B_[o]&&(B_[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,u):!0}};Jm.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Zk(e,t,n){if(typeof e!="object")throw new Vr("options must be an object",Vr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const u=e[s],h=u===void 0||o(u,s,e);if(h!==!0)throw new Vr("option "+s+" must be "+h,Vr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Vr("Unknown option "+s,Vr.ERR_BAD_OPTION)}}const N0={assertOptions:Zk,validators:Jm},tc=N0.validators;let Xh=class{constructor(t){this.defaults=t,this.interceptors={request:new L_,response:new L_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=nf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&N0.assertOptions(r,{silentJSONParsing:tc.transitional(tc.boolean),forcedJSONParsing:tc.transitional(tc.boolean),clarifyTimeoutError:tc.transitional(tc.boolean)},!1),i!=null&&(Zt.isFunction(i)?n.paramsSerializer={serialize:i}:N0.assertOptions(i,{encode:tc.function,serialize:tc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),N0.assertOptions(n,{baseUrl:tc.spelling("baseURL"),withXsrfToken:tc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Zt.merge(s.common,s[n.method]);s&&Zt.forEach(["delete","get","head","post","put","patch","common"],P=>{delete s[P]}),n.headers=Sl.concat(o,s);const u=[];let h=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(h=h&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let g,y=0,w;if(!h){const P=[T_.bind(this),void 0];for(P.unshift.apply(P,u),P.push.apply(P,d),w=P.length,g=Promise.resolve(n);y<w;)g=g.then(P[y++],P[y++]);return g}w=u.length;let _=n;for(y=0;y<w;){const P=u[y++],T=u[y++];try{_=P(_)}catch(j){T.call(this,j);break}}try{g=T_.call(this,_)}catch(P){return Promise.reject(P)}for(y=0,w=d.length;y<w;)g=g.then(d[y++],d[y++]);return g}getUri(t){t=nf(this.defaults,t);const n=x5(t.baseURL,t.url,t.allowAbsoluteUrls);return v5(n,t.params,t.paramsSerializer)}};Zt.forEach(["delete","get","head","options"],function(t){Xh.prototype[t]=function(n,r){return this.request(nf(r||{},{method:t,url:n,data:(r||{}).data}))}});Zt.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,u){return this.request(nf(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Xh.prototype[t]=n(),Xh.prototype[t+"Form"]=n(!0)});let Kk=class A5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,u){r.reason||(r.reason=new fd(s,o,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new A5(function(i){t=i}),cancel:t}}};function Yk(e){return function(n){return e.apply(null,n)}}function Xk(e){return Zt.isObject(e)&&e.isAxiosError===!0}const Qv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qv).forEach(([e,t])=>{Qv[t]=e});function M5(e){const t=new Xh(e),n=s5(Xh.prototype.request,t);return Zt.extend(n,Xh.prototype,t,{allOwnKeys:!0}),Zt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return M5(nf(e,i))},n}const ps=M5(Tp);ps.Axios=Xh;ps.CanceledError=fd;ps.CancelToken=Kk;ps.isCancel=b5;ps.VERSION=P5;ps.toFormData=Ym;ps.AxiosError=Vr;ps.Cancel=ps.CanceledError;ps.all=function(t){return Promise.all(t)};ps.spread=Yk;ps.isAxiosError=Xk;ps.mergeConfig=nf;ps.AxiosHeaders=Sl;ps.formToJSON=e=>_5(Zt.isHTMLForm(e)?new FormData(e):e);ps.getAdapter=C5.getAdapter;ps.HttpStatusCode=Qv;ps.default=ps;const{Axios:kV,AxiosError:TV,CanceledError:BV,isCancel:OV,CancelToken:NV,VERSION:DV,all:IV,Cancel:RV,isAxiosError:FV,spread:jV,toFormData:zV,AxiosHeaders:UV,HttpStatusCode:$V,formToJSON:VV,getAdapter:HV,mergeConfig:GV}=ps,dn=mu({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let vh=null,Gh=null;const Jk=1e3;function Qm(){if(dn.isEnabled){dn.isRecording=!0,dn.startTime=performance.now(),dn.frameCount=0,dn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(vh=new PerformanceObserver(e=>{e.getEntries().forEach(n=>{dn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Uu()})})}),vh.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tâches non supporté",e)}Qk(),ly()}}function hm(){dn.isRecording=!1,vh&&(vh.disconnect(),vh=null),O5()}function e1(){vh&&(vh.disconnect(),vh=null),O5(),dn.measures=[],dn.longTasks=[],dn.memorySnapshots=[],dn.operationHistory=[],dn.frameCount=0,dn.framesPerSecond=0,dn.lastFpsUpdate=0,dn.isEnabled&&Qm()}function k5(e,t,n){if(!dn.isEnabled||!dn.isRecording)return()=>{};const r=performance.now(),i=dn.currentOperation;return dn.currentOperation=e,dn.operationStack.push(e),()=>{const s=performance.now()-r;dn.operationStack.pop(),dn.currentOperation=dn.operationStack[dn.operationStack.length-1]||null,dn.measures.push({name:e,startTime:r,duration:s,component:t||Uu(),info:n,parentOperation:i||void 0}),s>10&&dn.operationHistory.push({operation:e,component:t||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}async function T5(e,t,n,r){if(!dn.isEnabled||!dn.isRecording)return t();const i=performance.now(),s=dn.currentOperation;dn.currentOperation=e,dn.operationStack.push(e);try{return await t()}finally{const o=performance.now()-i;dn.operationStack.pop(),dn.currentOperation=dn.operationStack[dn.operationStack.length-1]||null,dn.measures.push({name:e,startTime:i,duration:o,component:n||Uu(),info:r,parentOperation:s||void 0}),o>10&&dn.operationHistory.push({operation:e,component:n||Uu()||"unknown",durationMs:o,timestamp:Date.now()})}}function B5(e,t,n,r){if(!dn.isEnabled||!dn.isRecording)return t();const i=performance.now(),s=dn.currentOperation;dn.currentOperation=e,dn.operationStack.push(e);try{return t()}finally{const o=performance.now()-i;dn.operationStack.pop(),dn.currentOperation=dn.operationStack[dn.operationStack.length-1]||null,dn.measures.push({name:e,startTime:i,duration:o,component:n||Uu(),info:r,parentOperation:s||void 0}),o>10&&dn.operationHistory.push({operation:e,component:n||Uu()||"unknown",durationMs:o,timestamp:Date.now()})}}function ly(){!dn.isEnabled||!dn.isRecording||(performance.memory?dn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):dn.memorySnapshots.push({timestamp:performance.now()}))}function Qk(){Gh!==null&&cancelAnimationFrame(Gh),dn.frameCount=0,dn.lastFpsUpdate=performance.now();function e(){dn.frameCount++;const t=performance.now();t-dn.lastFpsUpdate>=Jk&&(dn.framesPerSecond=Math.round(dn.frameCount*1e3/(t-dn.lastFpsUpdate)),dn.frameCount=0,dn.lastFpsUpdate=t),dn.isRecording&&(Gh=requestAnimationFrame(e))}Gh=requestAnimationFrame(e)}function O5(){Gh!==null&&(cancelAnimationFrame(Gh),Gh=null)}function Uu(){return""}function t1(e){dn.isEnabled=e,e&&!dn.isRecording?Qm():!e&&dn.isRecording&&hm()}function N5(e,t,n){return(...r)=>{if(!dn.isEnabled||!dn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const s=performance.now()-i;dn.measures.push({name:t,startTime:i,duration:s,component:n||Uu(),info:{args:r}}),s>10&&dn.operationHistory.push({operation:t,component:n||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function D5(e,t,n){return async(...r)=>{if(!dn.isEnabled||!dn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const s=performance.now()-i;dn.measures.push({name:t,startTime:i,duration:s,component:n||Uu(),info:{args:r}}),s>10&&dn.operationHistory.push({operation:t,component:n||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function eT(e,t){const n=dn.measures.filter(o=>o.startTime>=e&&o.startTime+o.duration<=t),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const u=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:u.sort((h,d)=>d.duration-h.duration).map(h=>s(h))}}return i.sort((o,u)=>u.duration-o.duration).map(o=>s(o))}function n1(e,t){const n=e||dn.startTime,r=t||performance.now(),i=eT(n,r),s=r-n,o=new Map;function u(d){const g=o.get(d.operation)||{duration:0,component:d.component};g.duration+=d.duration,o.set(d.operation,g),d.children.forEach(y=>u(y))}i.forEach(d=>u(d));const h=Array.from(o.entries()).map(([d,{duration:g,component:y}])=>({operation:d,duration:g,component:y,impact:g/s*100})).sort((d,g)=>g.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:h}}function dd(){const e=It(!1);ma(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,t1(r),e1()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),e.value=!1,t1(!1)}}),Vc(()=>{dn.isRecording&&hm()});const t=(n,r)=>{if(!dn.isEnabled||!dn.isRecording)return null;const i=dn.measures.find(d=>d.name===n&&d.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=dn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=s&&d!==i),u=dn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=s),h=dn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:h.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:h.length>1?(h[h.length-1].usedJSHeapSize||0)-(h[0].usedJSHeapSize||0):0}}};return{isEnabled:Nu(It(dn.isEnabled)),isQueryParamEnabled:Nu(e),isRecording:Nu(It(dn.isRecording)),measures:Nu(It(dn.measures)),longTasks:Nu(It(dn.longTasks)),memorySnapshots:Nu(It(dn.memorySnapshots)),framesPerSecond:Nu(It(dn.framesPerSecond)),operationHistory:Nu(It(dn.operationHistory)),startRecording:Qm,stopRecording:hm,clearRecording:e1,startMeasure:k5,measure:B5,measureAsync:T5,captureMemorySnapshot:ly,createPerformanceTracker:N5,createAsyncPerformanceTracker:D5,getOperationDetails:t,getSlowOperations:()=>!dn.isEnabled||!dn.isRecording?[]:[...dn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!dn.isEnabled||!dn.isRecording?[]:[...dn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!dn.isEnabled||!dn.isRecording)return null;const n=n1();return{totalMeasures:dn.measures.length,totalLongTasks:dn.longTasks.length,slowestOperations:[...dn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:dn.framesPerSecond,memoryUsage:dn.memorySnapshots.length>0?dn.memorySnapshots[dn.memorySnapshots.length-1]:null,operationsByComponent:tT(dn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:dn.isRecording?performance.now()-dn.startTime:null}},analyzeCriticalPaths:n1}}function tT(e){if(!dn.isEnabled||!dn.isRecording)return{};const t={};return e.forEach(n=>{const r=n.component||"unknown";t[r]||(t[r]={totalTime:0,callCount:0,operations:{}}),t[r].totalTime+=n.duration,t[r].callCount++,t[r].operations[n.name]||(t[r].operations[n.name]={totalTime:0,callCount:0}),t[r].operations[n.name].totalTime+=n.duration,t[r].operations[n.name].callCount++}),t}const ln={startRecording:Qm,stopRecording:hm,clearRecording:e1,startMeasure:k5,measure:B5,measureAsync:T5,captureMemorySnapshot:ly,createPerformanceTracker:N5,createAsyncPerformanceTracker:D5,setEnabled:t1,analyzeCriticalPaths:n1},ur=ps.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Ls=dd();function I5(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}ur.interceptors.request.use(async e=>{const t=Ls.startMeasure("api_request_interceptor","ApiService");try{const n=I5("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{t()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));ur.interceptors.response.use(e=>e,async e=>{var r,i;const t=Ls.startMeasure("api_response_interceptor","ApiService"),n=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=pa();try{await Ls.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=I5("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,ur(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(e)}finally{t()}});function nT(e){var n;const t=[];if((n=e.response)!=null&&n.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{t.push({field:i,message:o})}):typeof s=="string"&&t.push({field:i,message:s})}):typeof r=="string"?t.push({field:"non_field_error",message:r}):r.detail&&t.push({field:"non_field_error",message:r.detail})}else e.message&&t.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return t.length===0&&t.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),t}async function D0(e){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",e);const t={role:e.role};e.entrepriseId&&(t.entreprise=e.entrepriseId),e.salarieId&&(t.salarie=e.salarieId),e.includeDetails&&(t.include_plans=!0),e.search&&(t.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",t);try{const n=await wl.getUsers(t);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const wl={async getUsers(e={}){const t=Ls.startMeasure("get_users","UserService");try{return await Ls.measureAsync("get_users_request",()=>ur.get("/users/",{params:e}),"UserService")}finally{t()}},async getUser(e){return await ur.get(`/users/${e}/`)},async createUser(e){return await ur.post("/users/",e)},async updateUser(e,t){return await ur.patch(`/users/${e}/`,t)},async deleteUser(e){return await ur.delete(`/users/${e}/`)},async getEntreprises(){return await ur.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const t={role:"SALARIE"};return e&&(t.entreprise=e),await ur.get("/users/",{params:t})},async getSalarieVisiteurs(e){return await ur.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await ur.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const t=Ls.startMeasure("get_users_hierarchy","UserService");try{const n=Ls.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await Ls.measureAsync("get_users_hierarchy_request",()=>ur.get("/users/",{params:n}),"UserService")}finally{t()}},async getEntrepriseSalaries(e){return await ur.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,t){const n={role:"VISITEUR"};return e&&(n.salarie=e),t&&(n.entreprise=t),await ur.get("/users/",{params:n})},async assignEntrepriseToSalarie(e,t){return await ur.patch(`/users/${e}/`,{entreprise:t})},async assignSalarieToVisiteur(e,t){return await ur.patch(`/users/${e}/`,{salarie:t})},formatLogoFileName(e){return Ls.measure("format_logo_filename",()=>{var i;const t=new Date().getTime(),n=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${t}.${n}`},"UserService")},async uploadLogo(e){const t=Ls.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return n.append("logo",i),await Ls.measureAsync("upload_logo_request",()=>ur.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{t()}}},d0={async getPlans(){const e=Ls.startMeasure("get_plans","IrrigationService");try{return await Ls.measureAsync("get_plans_request",()=>ur.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const t=Ls.startMeasure("create_plan","IrrigationService");try{const n=Ls.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await Ls.measureAsync("create_plan_request",()=>ur.post("/plans/",n),"IrrigationService")}finally{t()}},async updatePlan(e,t){const n=Ls.startMeasure("update_plan","IrrigationService");try{return await Ls.measureAsync("update_plan_request",()=>ur.put(`/plans/${e}/`,t),"IrrigationService")}finally{n()}},async deletePlan(e){const t=Ls.startMeasure("delete_plan","IrrigationService");try{return await Ls.measureAsync("delete_plan_request",()=>ur.delete(`/plans/${e}/`),"IrrigationService")}finally{t()}},async getVisiteurPlans(e){return await ur.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await ur.post("/plans/",e)},async getEntreprisePlans(e){return await ur.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await ur.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,t){const n={...e,salarie:t};return await ur.post("/plans/",n)},async createPlanForEntreprise(e,t){const n={...e,entreprise:t};return await ur.post("/plans/",n)}};ur.defaults.baseURL="/api";ur.defaults.headers.common["Content-Type"]="application/json";ur.defaults.withCredentials=!0;function bp(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}ur.interceptors.request.use(e=>{const t=bp("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));ur.interceptors.response.use(e=>e,async e=>{var r,i;const t=pa(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!bp("access_token"))throw new Error("No token available");await t.refreshToken();const o=bp("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,ur(n)}catch(s){console.error("Token refresh failed:",s),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function rT(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${i};path=/;secure;samesite=Strict`}function Ul(e){if(!e)return"-";const t=e.first_name||"",n=e.last_name?e.last_name.toUpperCase():"",r=`${t} ${n}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function iT(e="",t=""){return`${(e==null?void 0:e.charAt(0))||""}${(t==null?void 0:t.charAt(0))||""}`.toUpperCase()}const oT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function sT(e){return oT[e]||e}function aT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function lT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function uT({role:e,entrepriseId:t,salarieId:n,includeDetails:r=!1}){const i={role:e};return t&&(i.entreprise=t),n&&(i.salarie=n),r&&(i.include_plans=!0),(await wl.getUsers(i)).data}const pa=Mp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isEntreprise:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="entreprise"},isSalarie:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="salarie"},isVisiteur:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var t;return!!((t=e.user)!=null&&t.enterprise_id)},hasEmployee:e=>{var t;return!!((t=e.user)!=null&&t.employee_id)}},actions:{async initialize(e){if(!e){const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){try{if(!bp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const t=await ur.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,i;try{const s=await ur.post("/token/",{username:e,password:t});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await ur.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{const n=await ur.post("/users/change_password/",{old_password:e,password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t;try{if(!bp("refresh_token"))throw new Error("No refresh token available");const r=await ur.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return rT("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(e=n.response)==null?void 0:e.status,data:(t=n.response)==null?void 0:t.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(e={}){this.loading=!0;try{return(await wl.getUsers(e)).data}catch(t){throw this.error="Erreur lors de la récupération des utilisateurs",t}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await wl.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la récupération des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const t=await wl.getUsers({role:"SALARIE",entreprise:e});return this.employees=t.data,this.employees}catch(t){throw this.error="Erreur lors de la récupération des salaries",t}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const t=await wl.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=t.data,this.visitors}catch(t){throw this.error="Erreur lors de la récupération des visiteurs",t}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await wl.createUser(e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUser(e,t){this.loading=!0;try{return(await wl.updateUser(e,t)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await wl.deleteUser(e),!0}catch(t){throw this.error="Erreur lors de la suppression de l'utilisateur",t}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await ur.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la récupération des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,t){this.loading=!0;try{await ur.patch(`/users/${e}/`,{enterprise:t}),this.user&&this.user.id===e&&(this.user.enterprise_id=t)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await ur.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await ur.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const t=await wl.uploadLogo(e);return this.user&&t.data.logo&&(this.user.logo=t.data.logo),t.data}catch(t){throw this.error="Erreur lors du téléversement du logo",t}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await uT(e)}catch(t){throw console.error(`Error fetching ${e.role}:`,t),t}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await wl.getUsers({role:"SALARIE",entreprise:e})).data}catch(t){throw this.error="Erreur lors de la récupération des salaries",t}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await wl.getUsers({role:"VISITEUR",salarie:e})).data}catch(t){throw this.error="Erreur lors de la récupération des visiteurs",t}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Df=typeof document<"u";function R5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function cT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&R5(e.default)}const Ri=Object.assign;function Xg(e,t){const n={};for(const r in t){const i=t[r];n[r]=$u(i)?i.map(e):e(i)}return n}const ep=()=>{},$u=Array.isArray,F5=/#/g,hT=/&/g,fT=/\//g,dT=/=/g,pT=/\?/g,j5=/\+/g,mT=/%5B/g,gT=/%5D/g,z5=/%5E/g,vT=/%60/g,U5=/%7B/g,yT=/%7C/g,$5=/%7D/g,_T=/%20/g;function uy(e){return encodeURI(""+e).replace(yT,"|").replace(mT,"[").replace(gT,"]")}function bT(e){return uy(e).replace(U5,"{").replace($5,"}").replace(z5,"^")}function r1(e){return uy(e).replace(j5,"%2B").replace(_T,"+").replace(F5,"%23").replace(hT,"%26").replace(vT,"`").replace(U5,"{").replace($5,"}").replace(z5,"^")}function wT(e){return r1(e).replace(dT,"%3D")}function xT(e){return uy(e).replace(F5,"%23").replace(pT,"%3F")}function LT(e){return e==null?"":xT(e).replace(fT,"%2F")}function wp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ST=/\/$/,ET=e=>e.replace(ST,"");function Jg(e,t,n="/"){let r,i={},s="",o="";const u=t.indexOf("#");let h=t.indexOf("?");return u<h&&u>=0&&(h=-1),h>-1&&(r=t.slice(0,h),s=t.slice(h+1,u>-1?u:t.length),i=e(s)),u>-1&&(r=r||t.slice(0,u),o=t.slice(u,t.length)),r=MT(r??t,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:wp(o)}}function CT(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function O_(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function PT(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&id(t.matched[r],n.matched[i])&&V5(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function id(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function V5(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!AT(e[n],t[n]))return!1;return!0}function AT(e,t){return $u(e)?N_(e,t):$u(t)?N_(t,e):e===t}function N_(e,t){return $u(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function MT(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,u;for(o=0;o<r.length;o++)if(u=r[o],u!==".")if(u==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Qc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xp;(function(e){e.pop="pop",e.push="push"})(xp||(xp={}));var tp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(tp||(tp={}));function kT(e){if(!e)if(Df){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ET(e)}const TT=/^[^#]+#/;function BT(e,t){return e.replace(TT,"#")+t}function OT(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const eg=()=>({left:window.scrollX,top:window.scrollY});function NT(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=OT(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function D_(e,t){return(history.state?history.state.position-t:-1)+e}const i1=new Map;function DT(e,t){i1.set(e,t)}function IT(e){const t=i1.get(e);return i1.delete(e),t}let RT=()=>location.protocol+"//"+location.host;function H5(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,h=i.slice(u);return h[0]!=="/"&&(h="/"+h),O_(h,"")}return O_(n,e)+r+i}function FT(e,t,n,r){let i=[],s=[],o=null;const u=({state:w})=>{const _=H5(e,location),P=n.value,T=t.value;let j=0;if(w){if(n.value=_,t.value=w,o&&o===P){o=null;return}j=T?w.position-T.position:0}else r(_);i.forEach(D=>{D(n.value,P,{delta:j,type:xp.pop,direction:j?j>0?tp.forward:tp.back:tp.unknown})})};function h(){o=n.value}function d(w){i.push(w);const _=()=>{const P=i.indexOf(w);P>-1&&i.splice(P,1)};return s.push(_),_}function g(){const{history:w}=window;w.state&&w.replaceState(Ri({},w.state,{scroll:eg()}),"")}function y(){for(const w of s)w();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:h,listen:d,destroy:y}}function I_(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?eg():null}}function jT(e){const{history:t,location:n}=window,r={value:H5(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(h,d,g){const y=e.indexOf("#"),w=y>-1?(n.host&&document.querySelector("base")?e:e.slice(y))+h:RT()+e+h;try{t[g?"replaceState":"pushState"](d,"",w),i.value=d}catch(_){console.error(_),n[g?"replace":"assign"](w)}}function o(h,d){const g=Ri({},t.state,I_(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});s(h,g,!0),r.value=h}function u(h,d){const g=Ri({},i.value,t.state,{forward:h,scroll:eg()});s(g.current,g,!0);const y=Ri({},I_(r.value,h,null),{position:g.position+1},d);s(h,y,!1),r.value=h}return{location:r,state:i,push:u,replace:o}}function zT(e){e=kT(e);const t=jT(e),n=FT(e,t.state,t.location,t.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ri({location:"",base:e,go:r,createHref:BT.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function UT(e){return typeof e=="string"||e&&typeof e=="object"}function G5(e){return typeof e=="string"||typeof e=="symbol"}const q5=Symbol("");var R_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(R_||(R_={}));function od(e,t){return Ri(new Error,{type:e,[q5]:!0},t)}function kc(e,t){return e instanceof Error&&q5 in e&&(t==null||!!(e.type&t))}const F_="[^/]+?",$T={sensitive:!1,strict:!1,start:!0,end:!0},VT=/[.+*?^${}()[\]/\\]/g;function HT(e,t){const n=Ri({},$T,t),r=[];let i=n.start?"^":"";const s=[];for(const d of e){const g=d.length?[]:[90];n.strict&&!d.length&&(i+="/");for(let y=0;y<d.length;y++){const w=d[y];let _=40+(n.sensitive?.25:0);if(w.type===0)y||(i+="/"),i+=w.value.replace(VT,"\\$&"),_+=40;else if(w.type===1){const{value:P,repeatable:T,optional:j,regexp:D}=w;s.push({name:P,repeatable:T,optional:j});const U=D||F_;if(U!==F_){_+=10;try{new RegExp(`(${U})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${P}" (${U}): `+X.message)}}let K=T?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;y||(K=j&&d.length<2?`(?:/${K})`:"/"+K),j&&(K+="?"),i+=K,_+=20,j&&(_+=-8),T&&(_+=-20),U===".*"&&(_+=-50)}g.push(_)}r.push(g)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function u(d){const g=d.match(o),y={};if(!g)return null;for(let w=1;w<g.length;w++){const _=g[w]||"",P=s[w-1];y[P.name]=_&&P.repeatable?_.split("/"):_}return y}function h(d){let g="",y=!1;for(const w of e){(!y||!g.endsWith("/"))&&(g+="/"),y=!1;for(const _ of w)if(_.type===0)g+=_.value;else if(_.type===1){const{value:P,repeatable:T,optional:j}=_,D=P in d?d[P]:"";if($u(D)&&!T)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const U=$u(D)?D.join("/"):D;if(!U)if(j)w.length<2&&(g.endsWith("/")?g=g.slice(0,-1):y=!0);else throw new Error(`Missing required param "${P}"`);g+=U}}return g||"/"}return{re:o,score:r,keys:s,parse:u,stringify:h}}function GT(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function W5(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=GT(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(j_(r))return 1;if(j_(i))return-1}return i.length-r.length}function j_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const qT={type:0,value:""},WT=/[a-zA-Z0-9_]/;function ZT(e){if(!e)return[[]];if(e==="/")return[[qT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${d}": ${_}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let u=0,h,d="",g="";function y(){d&&(n===0?s.push({type:0,value:d}):n===1||n===2||n===3?(s.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:g,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),d="")}function w(){d+=h}for(;u<e.length;){if(h=e[u++],h==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:h==="/"?(d&&y(),o()):h===":"?(y(),n=1):w();break;case 4:w(),n=r;break;case 1:h==="("?n=2:WT.test(h)?w():(y(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&u--);break;case 2:h===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+h:n=3:g+=h;break;case 3:y(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&u--,g="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),y(),o(),i}function KT(e,t,n){const r=HT(ZT(e.path),n),i=Ri(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function YT(e,t){const n=[],r=new Map;t=V_({strict:!1,end:!0,sensitive:!1},t);function i(y){return r.get(y)}function s(y,w,_){const P=!_,T=U_(y);T.aliasOf=_&&_.record;const j=V_(t,y),D=[T];if("alias"in y){const X=typeof y.alias=="string"?[y.alias]:y.alias;for(const se of X)D.push(U_(Ri({},T,{components:_?_.record.components:T.components,path:se,aliasOf:_?_.record:T})))}let U,K;for(const X of D){const{path:se}=X;if(w&&se[0]!=="/"){const me=w.record.path,Le=me[me.length-1]==="/"?"":"/";X.path=w.record.path+(se&&Le+se)}if(U=KT(X,w,j),_?_.alias.push(U):(K=K||U,K!==U&&K.alias.push(U),P&&y.name&&!$_(U)&&o(y.name)),Z5(U)&&h(U),T.children){const me=T.children;for(let Le=0;Le<me.length;Le++)s(me[Le],U,_&&_.children[Le])}_=_||U}return K?()=>{o(K)}:ep}function o(y){if(G5(y)){const w=r.get(y);w&&(r.delete(y),n.splice(n.indexOf(w),1),w.children.forEach(o),w.alias.forEach(o))}else{const w=n.indexOf(y);w>-1&&(n.splice(w,1),y.record.name&&r.delete(y.record.name),y.children.forEach(o),y.alias.forEach(o))}}function u(){return n}function h(y){const w=QT(y,n);n.splice(w,0,y),y.record.name&&!$_(y)&&r.set(y.record.name,y)}function d(y,w){let _,P={},T,j;if("name"in y&&y.name){if(_=r.get(y.name),!_)throw od(1,{location:y});j=_.record.name,P=Ri(z_(w.params,_.keys.filter(K=>!K.optional).concat(_.parent?_.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),y.params&&z_(y.params,_.keys.map(K=>K.name))),T=_.stringify(P)}else if(y.path!=null)T=y.path,_=n.find(K=>K.re.test(T)),_&&(P=_.parse(T),j=_.record.name);else{if(_=w.name?r.get(w.name):n.find(K=>K.re.test(w.path)),!_)throw od(1,{location:y,currentLocation:w});j=_.record.name,P=Ri({},w.params,y.params),T=_.stringify(P)}const D=[];let U=_;for(;U;)D.unshift(U.record),U=U.parent;return{name:j,path:T,params:P,matched:D,meta:JT(D)}}e.forEach(y=>s(y));function g(){n.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:o,clearRoutes:g,getRoutes:u,getRecordMatcher:i}}function z_(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function U_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:XT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function XT(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function $_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function JT(e){return e.reduce((t,n)=>Ri(t,n.meta),{})}function V_(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function QT(e,t){let n=0,r=t.length;for(;n!==r;){const s=n+r>>1;W5(e,t[s])<0?r=s:n=s+1}const i=e8(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function e8(e){let t=e;for(;t=t.parent;)if(Z5(t)&&W5(e,t)===0)return t}function Z5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function t8(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(j5," "),o=s.indexOf("="),u=wp(o<0?s:s.slice(0,o)),h=o<0?null:wp(s.slice(o+1));if(u in t){let d=t[u];$u(d)||(d=t[u]=[d]),d.push(h)}else t[u]=h}return t}function H_(e){let t="";for(let n in e){const r=e[n];if(n=wT(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}($u(r)?r.map(s=>s&&r1(s)):[r&&r1(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function n8(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=$u(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const r8=Symbol(""),G_=Symbol(""),tg=Symbol(""),cy=Symbol(""),o1=Symbol("");function Cd(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function uh(e,t,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,h)=>{const d=w=>{w===!1?h(od(4,{from:n,to:t})):w instanceof Error?h(w):UT(w)?h(od(2,{from:t,to:w})):(o&&r.enterCallbacks[i]===o&&typeof w=="function"&&o.push(w),u())},g=s(()=>e.call(r&&r.instances[i],t,n,d));let y=Promise.resolve(g);e.length<3&&(y=y.then(d)),y.catch(w=>h(w))})}function Qg(e,t,n,r,i=s=>s()){const s=[];for(const o of e)for(const u in o.components){let h=o.components[u];if(!(t!=="beforeRouteEnter"&&!o.instances[u]))if(R5(h)){const g=(h.__vccOpts||h)[t];g&&s.push(uh(g,n,r,o,u,i))}else{let d=h();s.push(()=>d.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${u}" at "${o.path}"`);const y=cT(g)?g.default:g;o.mods[u]=g,o.components[u]=y;const _=(y.__vccOpts||y)[t];return _&&uh(_,n,r,o,u,i)()}))}}return s}function q_(e){const t=Gl(tg),n=Gl(cy),r=hr(()=>{const h=qn(e.to);return t.resolve(h)}),i=hr(()=>{const{matched:h}=r.value,{length:d}=h,g=h[d-1],y=n.matched;if(!g||!y.length)return-1;const w=y.findIndex(id.bind(null,g));if(w>-1)return w;const _=W_(h[d-2]);return d>1&&W_(g)===_&&y[y.length-1].path!==_?y.findIndex(id.bind(null,h[d-2])):w}),s=hr(()=>i.value>-1&&a8(n.params,r.value.params)),o=hr(()=>i.value>-1&&i.value===n.matched.length-1&&V5(n.params,r.value.params));function u(h={}){if(s8(h)){const d=t[qn(e.replace)?"replace":"push"](qn(e.to)).catch(ep);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:hr(()=>r.value.href),isActive:s,isExactActive:o,navigate:u}}function i8(e){return e.length===1?e[0]:e}const o8=Jo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:q_,setup(e,{slots:t}){const n=mu(q_(e)),{options:r}=Gl(tg),i=hr(()=>({[Z_(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Z_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&i8(t.default(n));return e.custom?s:Vm("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Rd=o8;function s8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function a8(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!$u(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function W_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Z_=(e,t,n)=>e??t??n,l8=Jo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Gl(o1),i=hr(()=>e.route||r.value),s=Gl(G_,0),o=hr(()=>{let d=qn(s);const{matched:g}=i.value;let y;for(;(y=g[d])&&!y.components;)d++;return d}),u=hr(()=>i.value.matched[o.value]);Yd(G_,hr(()=>o.value+1)),Yd(r8,u),Yd(o1,i);const h=It();return ds(()=>[h.value,u.value,e.name],([d,g,y],[w,_,P])=>{g&&(g.instances[y]=d,_&&_!==g&&d&&d===w&&(g.leaveGuards.size||(g.leaveGuards=_.leaveGuards),g.updateGuards.size||(g.updateGuards=_.updateGuards))),d&&g&&(!_||!id(g,_)||!w)&&(g.enterCallbacks[y]||[]).forEach(T=>T(d))},{flush:"post"}),()=>{const d=i.value,g=e.name,y=u.value,w=y&&y.components[g];if(!w)return K_(n.default,{Component:w,route:d});const _=y.props[g],P=_?_===!0?d.params:typeof _=="function"?_(d):_:null,j=Vm(w,Ri({},P,t,{onVnodeUnmounted:D=>{D.component.isUnmounted&&(y.instances[g]=null)},ref:h}));return K_(n.default,{Component:j,route:d})||j}}});function K_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const K5=l8;function u8(e){const t=YT(e.routes,e),n=e.parseQuery||t8,r=e.stringifyQuery||H_,i=e.history,s=Cd(),o=Cd(),u=Cd(),h=V1(Qc);let d=Qc;Df&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=Xg.bind(null,he=>""+he),y=Xg.bind(null,LT),w=Xg.bind(null,wp);function _(he,J){let ae,Fe;return G5(he)?(ae=t.getRecordMatcher(he),Fe=J):Fe=he,t.addRoute(Fe,ae)}function P(he){const J=t.getRecordMatcher(he);J&&t.removeRoute(J)}function T(){return t.getRoutes().map(he=>he.record)}function j(he){return!!t.getRecordMatcher(he)}function D(he,J){if(J=Ri({},J||h.value),typeof he=="string"){const fe=Jg(n,he,J.path),be=t.resolve({path:fe.path},J),de=i.createHref(fe.fullPath);return Ri(fe,be,{params:w(be.params),hash:wp(fe.hash),redirectedFrom:void 0,href:de})}let ae;if(he.path!=null)ae=Ri({},he,{path:Jg(n,he.path,J.path).path});else{const fe=Ri({},he.params);for(const be in fe)fe[be]==null&&delete fe[be];ae=Ri({},he,{params:y(fe)}),J.params=y(J.params)}const Fe=t.resolve(ae,J),Me=he.hash||"";Fe.params=g(w(Fe.params));const Ye=CT(r,Ri({},he,{hash:bT(Me),path:Fe.path})),oe=i.createHref(Ye);return Ri({fullPath:Ye,hash:Me,query:r===H_?n8(he.query):he.query||{}},Fe,{redirectedFrom:void 0,href:oe})}function U(he){return typeof he=="string"?Jg(n,he,h.value.path):Ri({},he)}function K(he,J){if(d!==he)return od(8,{from:J,to:he})}function X(he){return Le(he)}function se(he){return X(Ri(U(he),{replace:!0}))}function me(he){const J=he.matched[he.matched.length-1];if(J&&J.redirect){const{redirect:ae}=J;let Fe=typeof ae=="function"?ae(he):ae;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=U(Fe):{path:Fe},Fe.params={}),Ri({query:he.query,hash:he.hash,params:Fe.path!=null?{}:he.params},Fe)}}function Le(he,J){const ae=d=D(he),Fe=h.value,Me=he.state,Ye=he.force,oe=he.replace===!0,fe=me(ae);if(fe)return Le(Ri(U(fe),{state:typeof fe=="object"?Ri({},Me,fe.state):Me,force:Ye,replace:oe}),J||ae);const be=ae;be.redirectedFrom=J;let de;return!Ye&&PT(r,Fe,ae)&&(de=od(16,{to:be,from:Fe}),Ve(Fe,Fe,!0,!1)),(de?Promise.resolve(de):Z(be,Fe)).catch(Ue=>kc(Ue)?kc(Ue,2)?Ue:ge(Ue):ne(Ue,be,Fe)).then(Ue=>{if(Ue){if(kc(Ue,2))return Le(Ri({replace:oe},U(Ue.to),{state:typeof Ue.to=="object"?Ri({},Me,Ue.to.state):Me,force:Ye}),J||be)}else Ue=O(be,Fe,!0,oe,Me);return z(be,Fe,Ue),Ue})}function H(he,J){const ae=K(he,J);return ae?Promise.reject(ae):Promise.resolve()}function R(he){const J=ce.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(he):he()}function Z(he,J){let ae;const[Fe,Me,Ye]=c8(he,J);ae=Qg(Fe.reverse(),"beforeRouteLeave",he,J);for(const fe of Fe)fe.leaveGuards.forEach(be=>{ae.push(uh(be,he,J))});const oe=H.bind(null,he,J);return ae.push(oe),xe(ae).then(()=>{ae=[];for(const fe of s.list())ae.push(uh(fe,he,J));return ae.push(oe),xe(ae)}).then(()=>{ae=Qg(Me,"beforeRouteUpdate",he,J);for(const fe of Me)fe.updateGuards.forEach(be=>{ae.push(uh(be,he,J))});return ae.push(oe),xe(ae)}).then(()=>{ae=[];for(const fe of Ye)if(fe.beforeEnter)if($u(fe.beforeEnter))for(const be of fe.beforeEnter)ae.push(uh(be,he,J));else ae.push(uh(fe.beforeEnter,he,J));return ae.push(oe),xe(ae)}).then(()=>(he.matched.forEach(fe=>fe.enterCallbacks={}),ae=Qg(Ye,"beforeRouteEnter",he,J,R),ae.push(oe),xe(ae))).then(()=>{ae=[];for(const fe of o.list())ae.push(uh(fe,he,J));return ae.push(oe),xe(ae)}).catch(fe=>kc(fe,8)?fe:Promise.reject(fe))}function z(he,J,ae){u.list().forEach(Fe=>R(()=>Fe(he,J,ae)))}function O(he,J,ae,Fe,Me){const Ye=K(he,J);if(Ye)return Ye;const oe=J===Qc,fe=Df?history.state:{};ae&&(Fe||oe?i.replace(he.fullPath,Ri({scroll:oe&&fe&&fe.scroll},Me)):i.push(he.fullPath,Me)),h.value=he,Ve(he,J,ae,oe),ge()}let k;function I(){k||(k=i.listen((he,J,ae)=>{if(!le.listening)return;const Fe=D(he),Me=me(Fe);if(Me){Le(Ri(Me,{replace:!0,force:!0}),Fe).catch(ep);return}d=Fe;const Ye=h.value;Df&&DT(D_(Ye.fullPath,ae.delta),eg()),Z(Fe,Ye).catch(oe=>kc(oe,12)?oe:kc(oe,2)?(Le(Ri(U(oe.to),{force:!0}),Fe).then(fe=>{kc(fe,20)&&!ae.delta&&ae.type===xp.pop&&i.go(-1,!1)}).catch(ep),Promise.reject()):(ae.delta&&i.go(-ae.delta,!1),ne(oe,Fe,Ye))).then(oe=>{oe=oe||O(Fe,Ye,!1),oe&&(ae.delta&&!kc(oe,8)?i.go(-ae.delta,!1):ae.type===xp.pop&&kc(oe,20)&&i.go(-1,!1)),z(Fe,Ye,oe)}).catch(ep)}))}let W=Cd(),V=Cd(),G;function ne(he,J,ae){ge(he);const Fe=V.list();return Fe.length?Fe.forEach(Me=>Me(he,J,ae)):console.error(he),Promise.reject(he)}function _e(){return G&&h.value!==Qc?Promise.resolve():new Promise((he,J)=>{W.add([he,J])})}function ge(he){return G||(G=!he,I(),W.list().forEach(([J,ae])=>he?ae(he):J()),W.reset()),he}function Ve(he,J,ae,Fe){const{scrollBehavior:Me}=e;if(!Df||!Me)return Promise.resolve();const Ye=!ae&&IT(D_(he.fullPath,0))||(Fe||!ae)&&history.state&&history.state.scroll||null;return Ws().then(()=>Me(he,J,Ye)).then(oe=>oe&&NT(oe)).catch(oe=>ne(oe,he,J))}const B=he=>i.go(he);let te;const ce=new Set,le={currentRoute:h,listening:!0,addRoute:_,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:j,getRoutes:T,resolve:D,options:e,push:X,replace:se,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:V.add,isReady:_e,install(he){const J=this;he.component("RouterLink",Rd),he.component("RouterView",K5),he.config.globalProperties.$router=J,Object.defineProperty(he.config.globalProperties,"$route",{enumerable:!0,get:()=>qn(h)}),Df&&!te&&h.value===Qc&&(te=!0,X(i.location).catch(Me=>{}));const ae={};for(const Me in Qc)Object.defineProperty(ae,Me,{get:()=>h.value[Me],enumerable:!0});he.provide(tg,J),he.provide(cy,$1(ae)),he.provide(o1,h);const Fe=he.unmount;ce.add(he),he.unmount=function(){ce.delete(he),ce.size<1&&(d=Qc,k&&k(),k=null,h.value=Qc,te=!1,G=!1),Fe()}}};function xe(he){return he.reduce((J,ae)=>J.then(()=>R(ae)),Promise.resolve())}return le}function c8(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=t.matched[o];u&&(e.matched.find(d=>id(d,u))?r.push(u):n.push(u));const h=e.matched[o];h&&(t.matched.find(d=>id(d,h))||i.push(h))}return[n,r,i]}function Bp(){return Gl(tg)}function qV(e){return Gl(cy)}const hc=Mp("notification",()=>{const e=It([]),t=It(0),n=It(null),r=hr(()=>[...e.value].sort((y,w)=>w.timestamp-y.timestamp));function i({type:y,message:w,duration:_=5e3}){const P=++t.value,T=Date.now(),j={id:P,type:y,message:w,duration:_,timestamp:T};return e.value.push(j),n.value=P,_>0&&setTimeout(()=>{d(P)},_),P}const s=(y,w=5e3)=>i({type:"success",message:y,duration:w}),o=(y,w=5e3)=>i({type:"error",message:y,duration:w}),u=(y,w=5e3)=>i({type:"info",message:y,duration:w}),h=(y,w=5e3)=>i({type:"warning",message:y,duration:w});function d(y){const w=e.value.findIndex(_=>_.id===y);w!==-1&&e.value.splice(w,1),n.value===y&&(n.value=null)}function g(){e.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:d,clearAll:g,success:s,error:o,info:u,warning:h}});var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Y5(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}function h8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var X5=h8,f8=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,d8=f8,p8=d8,m8=typeof self=="object"&&self&&self.Object===Object&&self,g8=p8||m8||Function("return this")(),J5=g8,v8=J5,y8=function(){return v8.Date.now()},_8=y8,b8=/\s/;function w8(e){for(var t=e.length;t--&&b8.test(e.charAt(t)););return t}var x8=w8,L8=x8,S8=/^\s+/;function E8(e){return e&&e.slice(0,L8(e)+1).replace(S8,"")}var C8=E8,P8=J5,A8=P8.Symbol,Q5=A8,Y_=Q5,ex=Object.prototype,M8=ex.hasOwnProperty,k8=ex.toString,Pd=Y_?Y_.toStringTag:void 0;function T8(e){var t=M8.call(e,Pd),n=e[Pd];try{e[Pd]=void 0;var r=!0}catch{}var i=k8.call(e);return r&&(t?e[Pd]=n:delete e[Pd]),i}var B8=T8,O8=Object.prototype,N8=O8.toString;function D8(e){return N8.call(e)}var I8=D8,X_=Q5,R8=B8,F8=I8,j8="[object Null]",z8="[object Undefined]",J_=X_?X_.toStringTag:void 0;function U8(e){return e==null?e===void 0?z8:j8:J_&&J_ in Object(e)?R8(e):F8(e)}var $8=U8;function V8(e){return e!=null&&typeof e=="object"}var H8=V8,G8=$8,q8=H8,W8="[object Symbol]";function Z8(e){return typeof e=="symbol"||q8(e)&&G8(e)==W8}var K8=Z8,Y8=C8,Q_=X5,X8=K8,eb=NaN,J8=/^[-+]0x[0-9a-f]+$/i,Q8=/^0b[01]+$/i,e7=/^0o[0-7]+$/i,t7=parseInt;function n7(e){if(typeof e=="number")return e;if(X8(e))return eb;if(Q_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Q_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Y8(e);var n=Q8.test(e);return n||e7.test(e)?t7(e.slice(2),n?2:8):J8.test(e)?eb:+e}var r7=n7,i7=X5,ev=_8,tb=r7,o7="Expected a function",s7=Math.max,a7=Math.min;function l7(e,t,n){var r,i,s,o,u,h,d=0,g=!1,y=!1,w=!0;if(typeof e!="function")throw new TypeError(o7);t=tb(t)||0,i7(n)&&(g=!!n.leading,y="maxWait"in n,s=y?s7(tb(n.maxWait)||0,t):s,w="trailing"in n?!!n.trailing:w);function _(me){var Le=r,H=i;return r=i=void 0,d=me,o=e.apply(H,Le),o}function P(me){return d=me,u=setTimeout(D,t),g?_(me):o}function T(me){var Le=me-h,H=me-d,R=t-Le;return y?a7(R,s-H):R}function j(me){var Le=me-h,H=me-d;return h===void 0||Le>=t||Le<0||y&&H>=s}function D(){var me=ev();if(j(me))return U(me);u=setTimeout(D,T(me))}function U(me){return u=void 0,w&&r?_(me):(r=i=void 0,o)}function K(){u!==void 0&&clearTimeout(u),d=0,r=h=i=u=void 0}function X(){return u===void 0?o:U(ev())}function se(){var me=ev(),Le=j(me);if(r=arguments,i=this,h=me,Le){if(u===void 0)return P(h);if(y)return clearTimeout(u),u=setTimeout(D,t),_(h)}return u===void 0&&(u=setTimeout(D,t)),o}return se.cancel=K,se.flush=X,se}var u7=l7;const c7=hy(u7),h7={class:"relative w-full"},f7={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},d7=["onClick"],nb=Jo({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=It(""),r=It([]),i=t,s=c7(async h=>{if(h.length<3){r.value=[];return}try{const g=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}`)).json();r.value=g}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function o(){s(n.value)}function u(h){n.value=h.display_name,r.value=[],i("select-location",{lat:parseFloat(h.lat),lng:parseFloat(h.lon)})}return(h,d)=>($e(),Ge("div",h7,[Hn(M("input",{"onUpdate:modelValue":d[0]||(d[0]=g=>n.value=g),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ur,n.value]]),r.value.length>0?($e(),Ge("div",f7,[($e(!0),Ge(In,null,Sr(r.value,g=>($e(),Ge("div",{key:g.place_id,onClick:y=>u(g),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ht(g.display_name),9,d7))),128))])):pn("",!0)]))}}),p7={class:"perf-title"},m7={class:"perf-basic-stats"},g7={class:"perf-stat"},v7={class:"perf-stat"},y7={class:"perf-expand-btn"},_7={key:0,class:"perf-content"},b7={class:"perf-section"},w7={class:"perf-metrics"},x7={class:"perf-metric"},L7={class:"perf-metric-value"},S7={class:"perf-metric"},E7={class:"perf-metric-value"},C7={class:"perf-metric"},P7={class:"perf-metric-value"},A7={class:"perf-metric"},M7={class:"perf-metric-value"},k7={class:"perf-section"},T7={class:"perf-metrics"},B7={key:0,class:"perf-metric"},O7={class:"perf-metric-value"},N7={key:1,class:"perf-metric"},D7={class:"perf-metric-value"},I7={key:2,class:"perf-metric"},R7={class:"perf-metric-value"},F7={class:"perf-section"},j7={class:"perf-table"},z7={class:"perf-table-cell"},U7={class:"perf-table-cell"},$7={class:"perf-table-cell"},V7={class:"perf-table-cell"},H7=["onClick"],G7={key:0,class:"perf-empty"},q7=Jo({__name:"PerformancePanel",props:{position:{}},setup(e){const n=e.position||"bottom-left",r=It(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:u,memorySnapshots:h,framesPerSecond:d,operationHistory:g,startRecording:y,stopRecording:w,clearRecording:_,captureMemorySnapshot:P,getSlowOperations:T,getPerformanceReport:j,getOperationDetails:D}=dd(),U=hr(()=>{const O=j()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:O.totalMeasures,totalLongTasks:O.totalLongTasks,averageDuration:O.slowestOperations.length>0?O.slowestOperations.reduce((k,I)=>k+I.duration,0)/O.slowestOperations.length:0,fps:O.averageFps,slowestOperations:O.slowestOperations,memoryUsage:O.memoryUsage}}),K=hr(()=>(j()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(k=>({operation:k.name,component:k.component||"unknown",durationMs:k.duration,timestamp:k.startTime}))),X=It(null);ma(()=>{i.value&&(X.value=window.setInterval(()=>{P()},1e3))}),Vc(()=>{X.value!==null&&clearInterval(X.value)});function se(O){return O===void 0?"N/A":O<1024?O+" B":O<1024*1024?(O/1024).toFixed(2)+" KB":O<1024*1024*1024?(O/(1024*1024)).toFixed(2)+" MB":(O/(1024*1024*1024)).toFixed(2)+" GB"}function me(O){return O.toFixed(2)}const Le=()=>{P()};function H(){const O=j(),k="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(O,null,2)),I=document.createElement("a");I.setAttribute("href",k),I.setAttribute("download","performance_report.json"),document.body.appendChild(I),I.click(),I.remove()}function R(){_(),Le()}function Z(){const O=j();navigator.clipboard.writeText(JSON.stringify(O,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(k=>{console.error("Erreur lors de la copie des données",k),alert("Erreur lors de la copie des données")})}async function z(O){const k=D(O.operation,O.timestamp);if(!k){alert("Impossible de trouver les détails de cette opération");return}const I={operation:{...k.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(k.operation.startTime).toISOString()},context:{...k.context,relatedOperations:k.context.relatedOperations.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),longTasks:k.context.longTasks.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),memorySnapshots:k.context.memorySnapshots.map(W=>({...W,timestamp:`+${W.timestamp.toFixed(2)}ms`,usedJSHeapSize:W.usedJSHeapSize?se(W.usedJSHeapSize):"N/A",totalJSHeapSize:W.totalJSHeapSize?se(W.totalJSHeapSize):"N/A"}))},summary:{...k.summary,memoryDelta:se(k.summary.memoryDelta),maxLongTaskDuration:`${k.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(I,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(W){console.error("Erreur lors de la copie des détails",W),alert("Erreur lors de la copie des détails")}}return(O,k)=>{var I,W,V,G,ne,_e;return qn(i)?($e(),Ge("div",{key:0,class:Ni(["performance-panel",`position-${qn(n)}`,{expanded:r.value}])},[M("div",{class:"perf-header",onClick:k[0]||(k[0]=ge=>r.value=!r.value)},[M("div",p7,[M("div",{class:Ni(["perf-indicator",{active:qn(s)}])},null,2),k[1]||(k[1]=M("span",null,"Performance",-1))]),M("div",m7,[M("span",g7,Ht(U.value.fps)+" FPS",1),M("span",v7,Ht(me(U.value.averageDuration))+"ms",1)]),M("button",y7,Ht(r.value?"▼":"▲"),1)]),r.value?($e(),Ge("div",_7,[M("div",b7,[k[6]||(k[6]=M("h3",null,"Métriques générales",-1)),M("div",w7,[M("div",x7,[k[2]||(k[2]=M("span",{class:"perf-metric-label"},"Mesures",-1)),M("span",L7,Ht(U.value.totalMeasures),1)]),M("div",S7,[k[3]||(k[3]=M("span",{class:"perf-metric-label"},"Tâches longues",-1)),M("span",E7,Ht(U.value.totalLongTasks),1)]),M("div",C7,[k[4]||(k[4]=M("span",{class:"perf-metric-label"},"Durée moyenne",-1)),M("span",P7,Ht(me(U.value.averageDuration))+"ms",1)]),M("div",A7,[k[5]||(k[5]=M("span",{class:"perf-metric-label"},"FPS",-1)),M("span",M7,Ht(U.value.fps),1)])])]),M("div",k7,[k[10]||(k[10]=M("h3",null,"Mémoire",-1)),M("div",T7,[((I=U.value.memoryUsage)==null?void 0:I.usedJSHeapSize)!==void 0?($e(),Ge("div",B7,[k[7]||(k[7]=M("span",{class:"perf-metric-label"},"Utilisée",-1)),M("span",O7,Ht(se((W=U.value.memoryUsage)==null?void 0:W.usedJSHeapSize)),1)])):pn("",!0),((V=U.value.memoryUsage)==null?void 0:V.totalJSHeapSize)!==void 0?($e(),Ge("div",N7,[k[8]||(k[8]=M("span",{class:"perf-metric-label"},"Totale",-1)),M("span",D7,Ht(se((G=U.value.memoryUsage)==null?void 0:G.totalJSHeapSize)),1)])):pn("",!0),((ne=U.value.memoryUsage)==null?void 0:ne.jsHeapSizeLimit)!==void 0?($e(),Ge("div",I7,[k[9]||(k[9]=M("span",{class:"perf-metric-label"},"Limite",-1)),M("span",R7,Ht(se((_e=U.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):pn("",!0)])]),M("div",F7,[k[13]||(k[13]=M("h3",null,"Opérations les plus lentes",-1)),M("div",j7,[k[12]||(k[12]=fh('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),($e(!0),Ge(In,null,Sr(K.value,ge=>($e(),Ge("div",{class:"perf-table-row",key:ge.timestamp},[M("div",z7,Ht(ge.operation),1),M("div",U7,Ht(ge.component),1),M("div",$7,Ht(me(ge.durationMs))+"ms",1),M("div",V7,[M("button",{onClick:Ve=>z(ge),class:"perf-action-button",title:"Copier les détails"},k[11]||(k[11]=[M("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,H7)])]))),128)),K.value.length===0?($e(),Ge("div",G7," Aucune opération enregistrée ")):pn("",!0)])]),M("div",{class:"perf-actions"},[M("button",{onClick:R,class:"perf-button"}," Réinitialiser "),M("button",{onClick:H,class:"perf-button"}," Télécharger "),M("button",{onClick:Z,class:"perf-button"}," Copier ")])])):pn("",!0)],2)):pn("",!0)}}}),ng=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},W7=ng(q7,[["__scopeId","data-v-fefe39b0"]]),Z7={class:"h-screen flex flex-col"},K7={key:0,class:"bg-white shadow-sm z-[2000] flex-shrink-0"},Y7={class:"mx-auto px-4 sm:px-6 lg:px-8"},X7={class:"flex h-16 items-center justify-between"},J7={class:"flex items-center"},Q7={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},eB={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},tB={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},nB={class:"hidden md:flex md:ml-6 space-x-8"},rB={key:0,class:"hidden md:block flex-1 mx-8"},iB={key:1,class:"flex-1"},oB={class:"flex items-center space-x-2 md:space-x-4"},sB={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance activée"},aB={class:"relative"},lB={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},uB={class:"flex items-center justify-between w-full"},cB={class:"flex items-center space-x-3"},hB={class:"max-h-72 overflow-y-auto"},fB={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},dB={class:"flex items-start"},pB={class:"flex-shrink-0 mr-3"},mB={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},gB={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},vB={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},yB={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},_B={class:"flex-1"},bB={class:"text-sm md:text-sm text-gray-800"},wB=["onClick"],xB={class:"relative"},LB={class:"hidden md:flex flex-col items-end"},SB={class:"text-sm font-medium text-gray-700"},EB={key:0,class:"text-xs text-gray-500"},CB=["src","alt"],PB={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},AB={class:"text-sm font-semibold text-gray-700"},MB={class:"text-xs text-gray-500"},kB={key:0,class:"md:hidden bg-white border-t border-gray-200"},TB={class:"space-y-1 px-2 pb-3 pt-2"},BB={key:0,class:"px-4 py-3 border-t border-gray-200"},OB=Jo({__name:"App",setup(e){const t=Bp(),n=pa(),r=hc(),{isQueryParamEnabled:i}=dd(),s=It(!1),o=It(!1),u=It(!1),h=It(!1),d=It(null),g=It(!1),y=It(!1),w=It(null),_=It("13px"),P=It("65px");function T(){y.value=window.innerWidth<768}ma(()=>{T(),window.addEventListener("resize",T),window.addEventListener("resize",j)}),cd(()=>{window.removeEventListener("resize",T),window.removeEventListener("resize",j)});function j(){if(!w.value)return;const k=w.value.getBoundingClientRect();_.value=`${k.top+window.scrollY+5}px`;const I=k.left+k.width/2;P.value=`${window.innerWidth-I-22}px`}const D=hr(()=>{const k=n.user;if(!k)return"";const I=`${k.first_name} ${k.last_name.toUpperCase()}`;return k.company_name?`${I} (${k.company_name})`:I}),U=hr(()=>{var I;switch((I=n.user)==null?void 0:I.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),K=hr(()=>{var k;return((k=n.user)==null?void 0:k.user_type)==="admin"}),X=hr(()=>n.isAuthenticated),se=[{name:"Carte",to:"/"},{name:"Notes",to:"/notes"}],me=hr(()=>{var I;if(!X.value)return[];const k=[...se];return(K.value||((I=n.user)==null?void 0:I.user_type)==="entreprise")&&k.push({name:"Utilisateurs",to:"/users"}),k}),Le=hr(()=>X.value?[{name:"Mon profil",to:"/profile"}]:[]);async function H(){try{await n.logout(),t.push("/login")}catch(k){console.error("Erreur lors de la déconnexion:",k)}}function R(k){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:k.lat,lng:k.lng,zoom:16}}))}ma(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const I=localStorage.getItem("lastPlanId");I&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:I}}))}else console.log("No token found")}catch(k){console.error("Auth check error:",k),t.push("/login")}});const Z=hr(()=>{const k="TagMap";if(!X.value)return`${k} - Connexion`;const I=t.currentRoute.value,V={home:"Carte",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[I.name]||"";return V?`${k} - ${V}`:k});ds(Z,k=>{document.title=k},{immediate:!0});const z=hr(()=>r.notifications.length);function O(){r.clearAll(),u.value=!1}return vp(()=>{if(r.lastAddedId!==null){const k=r.notifications.find(I=>I.id===r.lastAddedId);k&&Ws(()=>{j(),h.value=!0,d.value={id:k.id,message:k.message,type:k.type},requestAnimationFrame(()=>{setTimeout(()=>{g.value=!0,setTimeout(()=>{g.value=!1,setTimeout(()=>{var I;((I=d.value)==null?void 0:I.id)===k.id&&(d.value=null,h.value=!1)},300)},4e3)},50)})})}}),(k,I)=>{var W;return $e(),Ge("div",Z7,[X.value?($e(),Ge("header",K7,[M("nav",Y7,[M("div",X7,[M("div",J7,[M("button",{onClick:I[0]||(I[0]=V=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[I[7]||(I[7]=M("span",{class:"sr-only"},"Ouvrir le menu",-1)),($e(),Ge("svg",Q7,[o.value?($e(),Ge("path",tB)):($e(),Ge("path",eB))]))]),Kr(qn(Rd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:$l(()=>I[8]||(I[8]=[M("span",{class:"md:inline hidden"},"TagMap",-1),M("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),M("div",nB,[($e(!0),Ge(In,null,Sr(me.value,V=>($e(),ja(qn(Rd),{key:V.name,to:V.to,class:Ni(["text-sm font-medium transition-colors duration-200",[k.$route.path===V.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:$l(()=>[ui(Ht(V.name),1)]),_:2},1032,["to","class"]))),128))])]),k.$route.path==="/"?($e(),Ge("div",rB,[Kr(nb,{onSelectLocation:R})])):($e(),Ge("div",iB)),M("div",oB,[qn(i)?($e(),Ge("button",sB,I[9]||(I[9]=[M("span",{class:"sr-only"},"Performance",-1),M("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):pn("",!0),M("div",aB,[M("button",{ref_key:"bellButtonRef",ref:w,onClick:I[1]||(I[1]=V=>u.value=!u.value),class:Ni(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":h.value}])},I[10]||(I[10]=[M("span",{class:"sr-only"},"Voir les notifications",-1),M("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?($e(),Ge("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:el(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[M("div",lB,[M("div",uB,[I[12]||(I[12]=M("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),M("div",cB,[z.value>0?($e(),Ge("button",{key:0,onClick:O,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):pn("",!0),M("button",{onClick:I[2]||(I[2]=V=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},I[11]||(I[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),M("div",hB,[z.value===0?($e(),Ge("div",fB," Aucune notification ")):pn("",!0),($e(!0),Ge(In,null,Sr(qn(r).notifications,V=>($e(),Ge("div",{key:V.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[M("div",dB,[M("div",pB,[V.type==="success"?($e(),Ge("svg",mB,I[13]||(I[13]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):V.type==="error"?($e(),Ge("svg",gB,I[14]||(I[14]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):V.type==="warning"?($e(),Ge("svg",vB,I[15]||(I[15]=[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):($e(),Ge("svg",yB,I[16]||(I[16]=[M("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),M("div",_B,[M("p",bB,Ht(V.message),1),M("button",{onClick:G=>qn(r).removeNotification(V.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,wB)])])]))),128))])],4)):pn("",!0)]),M("div",xB,[M("button",{onClick:I[3]||(I[3]=V=>s.value=!s.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[M("div",LB,[M("span",SB,Ht(D.value),1),U.value?($e(),Ge("span",EB,Ht(U.value),1)):pn("",!0)]),M("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((W=qn(n).user)==null?void 0:W.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(D.value),alt:D.value},null,8,CB)]),s.value?($e(),Ge("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:el(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[M("div",PB,[M("div",null,[M("div",AB,Ht(D.value),1),M("div",MB,Ht(U.value),1)]),M("button",{onClick:I[4]||(I[4]=V=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},I[17]||(I[17]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),($e(!0),Ge(In,null,Sr(Le.value,V=>($e(),ja(qn(Rd),{key:V.name,to:V.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:I[5]||(I[5]=G=>s.value=!1)},{default:$l(()=>[ui(Ht(V.name),1)]),_:2},1032,["to"]))),128)),M("button",{onClick:H,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):pn("",!0)])])]),o.value?($e(),Ge("div",kB,[M("div",TB,[($e(!0),Ge(In,null,Sr(me.value,V=>($e(),ja(qn(Rd),{key:V.name,to:V.to,class:Ni(["block px-3 py-2 rounded-md text-base font-medium",[k.$route.path===V.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:I[6]||(I[6]=G=>o.value=!1)},{default:$l(()=>[ui(Ht(V.name),1)]),_:2},1032,["to","class"]))),128))]),k.$route.path==="/"?($e(),Ge("div",BB,[Kr(nb,{onSelectLocation:R})])):pn("",!0)])):pn("",!0)])])):pn("",!0),M("main",{class:Ni([k.$route.path==="/"&&!y.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[Kr(qn(K5))],2),Kr(W7,{position:"bottom-left"})])}}}),NB="modulepreload",DB=function(e){return"/static/frontend/"+e},rb={},qh=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=DB(h),h in rb)return;rb[h]=!0;const d=h.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":NB,d||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((w,_)=>{y.addEventListener("load",w),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})},IB={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},RB={class:"max-w-md w-full space-y-8"},FB={class:"space-y-4"},jB={class:"mt-1"},zB={class:"mt-1"},UB={class:"mt-1"},$B={key:0,class:"rounded-md bg-red-50 p-4"},VB={class:"flex"},HB={class:"ml-3"},GB={class:"text-sm font-medium text-red-800"},qB={key:1,class:"rounded-md bg-yellow-50 p-4"},WB={class:"flex"},ZB={class:"ml-3"},KB={class:"mt-2 text-sm text-yellow-700"},YB={class:"list-disc pl-5 space-y-1"},XB=["disabled"],JB={class:"absolute left-0 inset-y-0 flex items-center pl-3"},QB={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},eO={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tO=Jo({__name:"ChangePasswordForm",setup(e){const t=Bp(),n=pa(),r=mu({oldPassword:"",newPassword:"",confirmPassword:""}),i=It(!1),s=It("");ma(()=>{var d,g;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(d=n.user)==null?void 0:d.id,mustChangePassword:(g=n.user)==null?void 0:g.must_change_password})});const o=hr(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=hr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function h(){var d,g,y,w,_,P,T,j;if(!u.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=n.user)!=null&&d.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(D){console.error("Password change failed:",D),(y=(g=D.response)==null?void 0:g.data)!=null&&y.detail?s.value=D.response.data.detail:(_=(w=D.response)==null?void 0:w.data)!=null&&_.old_password?s.value=D.response.data.old_password[0]:(T=(P=D.response)==null?void 0:P.data)!=null&&T.password?s.value=D.response.data.password[0]:((j=D.response)==null?void 0:j.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),t.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,g)=>($e(),Ge("div",IB,[M("div",RB,[g[12]||(g[12]=M("div",null,[M("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),M("form",{class:"mt-8 space-y-6",onSubmit:zc(h,["prevent"])},[M("div",FB,[M("div",null,[g[3]||(g[3]=M("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),M("div",jB,[Hn(M("input",{id:"old-password","onUpdate:modelValue":g[0]||(g[0]=y=>r.oldPassword=y),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Ur,r.oldPassword]])])]),M("div",null,[g[4]||(g[4]=M("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),M("div",zB,[Hn(M("input",{id:"new-password","onUpdate:modelValue":g[1]||(g[1]=y=>r.newPassword=y),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Ur,r.newPassword]])]),g[5]||(g[5]=M("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),M("div",null,[g[6]||(g[6]=M("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),M("div",UB,[Hn(M("input",{id:"confirm-password","onUpdate:modelValue":g[2]||(g[2]=y=>r.confirmPassword=y),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Ur,r.confirmPassword]])])])]),s.value?($e(),Ge("div",$B,[M("div",VB,[g[7]||(g[7]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",HB,[M("h3",GB,Ht(s.value),1)])])])):pn("",!0),o.value.length>0?($e(),Ge("div",qB,[M("div",WB,[g[9]||(g[9]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),M("div",ZB,[g[8]||(g[8]=M("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),M("div",KB,[M("ul",YB,[($e(!0),Ge(In,null,Sr(o.value,(y,w)=>($e(),Ge("li",{key:w},Ht(y),1))),128))])])])])])):pn("",!0),M("div",null,[M("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[M("span",JB,[i.value?($e(),Ge("svg",eO,g[11]||(g[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):($e(),Ge("svg",QB,g[10]||(g[10]=[M("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ui(" "+Ht(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,XB)])],32)])]))}}),s1="/static/frontend/assets/logo.svg",nO={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},rO={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},iO={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},oO={key:0,class:"rounded-md bg-red-50 p-4"},sO={class:"flex"},aO={class:"ml-3"},lO={class:"text-sm font-medium text-red-800"},uO={class:"mt-1"},cO={class:"mt-1 relative"},hO=["type"],fO={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},dO={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pO={class:"flex items-center justify-between"},mO={class:"flex items-center"},gO={class:"text-sm"},vO=["disabled"],yO={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_O=Jo({__name:"LoginView",setup(e){const t=Bp(),n=pa(),r=It(!1),i=It(null),s=It(!1),o=mu({username:"",password:"",rememberMe:!1});ma(async()=>{var h;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((h=window.INITIAL_STATE)!=null&&h.isAuthenticated){console.log("User is authenticated, redirecting to home"),t.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),t.push("/"))}catch(d){console.error("Error during initialization:",d),i.value=null}});async function u(){var h,d,g,y,w,_,P,T,j;r.value=!0,i.value=null;try{if(!o.username||!o.password){i.value="Veuillez remplir tous les champs";return}await n.login(o.username,o.password),(h=n.user)!=null&&h.must_change_password?t.push("/change-password"):t.push("/")}catch(D){console.error("Login error:",D),((d=D==null?void 0:D.response)==null?void 0:d.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((g=D==null?void 0:D.response)==null?void 0:g.status)===401||((y=D==null?void 0:D.response)==null?void 0:y.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(_=(w=D==null?void 0:D.response)==null?void 0:w.data)!=null&&_.detail?i.value=D.response.data.detail:(j=(T=(P=D==null?void 0:D.response)==null?void 0:P.data)==null?void 0:T.non_field_errors)!=null&&j[0]?i.value=D.response.data.non_field_errors[0]:(D==null?void 0:D.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(h,d)=>{const g=K4("router-link");return $e(),Ge("div",nO,[d[12]||(d[12]=M("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[M("img",{src:s1,alt:"TagMap Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),M("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," TagMap "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),M("div",rO,[M("div",iO,[M("form",{class:"space-y-6",onSubmit:zc(u,["prevent"])},[i.value?($e(),Ge("div",oO,[M("div",sO,[d[4]||(d[4]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",aO,[M("h3",lO,Ht(i.value),1)])])])):pn("",!0),M("div",null,[d[5]||(d[5]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),M("div",uO,[Hn(M("input",{id:"username","onUpdate:modelValue":d[0]||(d[0]=y=>o.username=y),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Ur,o.username]])])]),M("div",null,[d[8]||(d[8]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),M("div",cO,[Hn(M("input",{id:"password","onUpdate:modelValue":d[1]||(d[1]=y=>o.password=y),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,hO),[[iy,o.password]]),M("button",{type:"button",onClick:d[2]||(d[2]=y=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?($e(),Ge("svg",fO,d[6]||(d[6]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):($e(),Ge("svg",dO,d[7]||(d[7]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),M("div",pO,[M("div",mO,[Hn(M("input",{id:"remember-me","onUpdate:modelValue":d[3]||(d[3]=y=>o.rememberMe=y),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Gm,o.rememberMe]]),d[9]||(d[9]=M("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),M("div",gO,[Kr(g,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:$l(()=>d[10]||(d[10]=[ui(" Mot de passe oublié ? ")])),_:1})])]),M("div",null,[M("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?($e(),Ge("svg",yO,d[11]||(d[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):pn("",!0),ui(" "+Ht(r.value?"Connexion en cours...":"Se connecter"),1)],8,vO)])],32)])])])}}});var a1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Ks,function(n){var r="1.9.4";function i(a){var p,S,$,re;for(S=1,$=arguments.length;S<$;S++){re=arguments[S];for(p in re)a[p]=re[p]}return a}var s=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function o(a,p){var S=Array.prototype.slice;if(a.bind)return a.bind.apply(a,S.call(arguments,1));var $=S.call(arguments,2);return function(){return a.apply(p,$.length?$.concat(S.call(arguments)):arguments)}}var u=0;function h(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,S){var $,re,Ee,st;return st=function(){$=!1,re&&(Ee.apply(S,re),re=!1)},Ee=function(){$?re=arguments:(a.apply(S,arguments),setTimeout(st,p),$=!0)},Ee}function g(a,p,S){var $=p[1],re=p[0],Ee=$-re;return a===$&&S?a:((a-re)%Ee+Ee)%Ee+re}function y(){return!1}function w(a,p){if(p===!1)return a;var S=Math.pow(10,p===void 0?6:p);return Math.round(a*S)/S}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function P(a){return _(a).split(/\s+/)}function T(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var S in p)a.options[S]=p[S];return a.options}function j(a,p,S){var $=[];for(var re in a)$.push(encodeURIComponent(S?re.toUpperCase():re)+"="+encodeURIComponent(a[re]));return(!p||p.indexOf("?")===-1?"?":"&")+$.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function U(a,p){return a.replace(D,function(S,$){var re=p[$];if(re===void 0)throw new Error("No value provided for variable "+S);return typeof re=="function"&&(re=re(p)),re})}var K=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function X(a,p){for(var S=0;S<a.length;S++)if(a[S]===p)return S;return-1}var se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function me(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Le=0;function H(a){var p=+new Date,S=Math.max(0,16-(p-Le));return Le=p+S,window.setTimeout(a,S)}var R=window.requestAnimationFrame||me("RequestAnimationFrame")||H,Z=window.cancelAnimationFrame||me("CancelAnimationFrame")||me("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function z(a,p,S){if(S&&R===H)a.call(p);else return R.call(window,o(a,p))}function O(a){a&&Z.call(window,a)}var k={__proto__:null,extend:i,create:s,bind:o,get lastId(){return u},stamp:h,throttle:d,wrapNum:g,falseFn:y,formatNum:w,trim:_,splitWords:P,setOptions:T,getParamString:j,template:U,isArray:K,indexOf:X,emptyImageUrl:se,requestFn:R,cancelFn:Z,requestAnimFrame:z,cancelAnimFrame:O};function I(){}I.extend=function(a){var p=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,$=s(S);$.constructor=p,p.prototype=$;for(var re in this)Object.prototype.hasOwnProperty.call(this,re)&&re!=="prototype"&&re!=="__super__"&&(p[re]=this[re]);return a.statics&&i(p,a.statics),a.includes&&(W(a.includes),i.apply(null,[$].concat(a.includes))),i($,a),delete $.statics,delete $.includes,$.options&&($.options=S.options?s(S.options):{},i($.options,a.options)),$._initHooks=[],$.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ee=0,st=$._initHooks.length;Ee<st;Ee++)$._initHooks[Ee].call(this)}},p},I.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},I.mergeOptions=function(a){return i(this.prototype.options,a),this},I.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),S=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function W(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=K(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(a,p,S){if(typeof a=="object")for(var $ in a)this._on($,a[$],p);else{a=P(a);for(var re=0,Ee=a.length;re<Ee;re++)this._on(a[re],p,S)}return this},off:function(a,p,S){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var $ in a)this._off($,a[$],p);else{a=P(a);for(var re=arguments.length===1,Ee=0,st=a.length;Ee<st;Ee++)re?this._off(a[Ee]):this._off(a[Ee],p,S)}return this},_on:function(a,p,S,$){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,S)===!1){S===this&&(S=void 0);var re={fn:p,ctx:S};$&&(re.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(re)}},_off:function(a,p,S){var $,re,Ee;if(this._events&&($=this._events[a],!!$)){if(arguments.length===1){if(this._firingCount)for(re=0,Ee=$.length;re<Ee;re++)$[re].fn=y;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var st=this._listens(a,p,S);if(st!==!1){var Ct=$[st];this._firingCount&&(Ct.fn=y,this._events[a]=$=$.slice()),$.splice(st,1)}}},fire:function(a,p,S){if(!this.listens(a,S))return this;var $=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var re=this._events[a];if(re){this._firingCount=this._firingCount+1||1;for(var Ee=0,st=re.length;Ee<st;Ee++){var Ct=re[Ee],Ft=Ct.fn;Ct.once&&this.off(a,Ft,Ct.ctx),Ft.call(Ct.ctx||this,$)}this._firingCount--}}return S&&this._propagateEvent($),this},listens:function(a,p,S,$){typeof a!="string"&&console.warn('"string" type argument expected');var re=p;typeof p!="function"&&($=!!p,re=void 0,S=void 0);var Ee=this._events&&this._events[a];if(Ee&&Ee.length&&this._listens(a,re,S)!==!1)return!0;if($){for(var st in this._eventParents)if(this._eventParents[st].listens(a,p,S,$))return!0}return!1},_listens:function(a,p,S){if(!this._events)return!1;var $=this._events[a]||[];if(!p)return!!$.length;S===this&&(S=void 0);for(var re=0,Ee=$.length;re<Ee;re++)if($[re].fn===p&&$[re].ctx===S)return re;return!1},once:function(a,p,S){if(typeof a=="object")for(var $ in a)this._on($,a[$],p,!0);else{a=P(a);for(var re=0,Ee=a.length;re<Ee;re++)this._on(a[re],p,S,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[h(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[h(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var G=I.extend(V);function ne(a,p,S){this.x=S?Math.round(a):a,this.y=S?Math.round(p):p}var _e=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(a){return this.clone()._add(ge(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ge(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ne(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ne(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(a){a=ge(a);var p=a.x-this.x,S=a.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(a){return a=ge(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ge(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function ge(a,p,S){return a instanceof ne?a:K(a)?new ne(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new ne(a.x,a.y):new ne(a,p,S)}function Ve(a,p){if(a)for(var S=p?[a,p]:a,$=0,re=S.length;$<re;$++)this.extend(S[$])}Ve.prototype={extend:function(a){var p,S;if(!a)return this;if(a instanceof ne||typeof a[0]=="number"||"x"in a)p=S=ge(a);else if(a=B(a),p=a.min,S=a.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(a){return ge((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ge(this.min.x,this.max.y)},getTopRight:function(){return ge(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,S;return typeof a[0]=="number"||a instanceof ne?a=ge(a):a=B(a),a instanceof Ve?(p=a.min,S=a.max):p=S=a,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(a){a=B(a);var p=this.min,S=this.max,$=a.min,re=a.max,Ee=re.x>=p.x&&$.x<=S.x,st=re.y>=p.y&&$.y<=S.y;return Ee&&st},overlaps:function(a){a=B(a);var p=this.min,S=this.max,$=a.min,re=a.max,Ee=re.x>p.x&&$.x<S.x,st=re.y>p.y&&$.y<S.y;return Ee&&st},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,S=this.max,$=Math.abs(p.x-S.x)*a,re=Math.abs(p.y-S.y)*a;return B(ge(p.x-$,p.y-re),ge(S.x+$,S.y+re))},equals:function(a){return a?(a=B(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function B(a,p){return!a||a instanceof Ve?a:new Ve(a,p)}function te(a,p){if(a)for(var S=p?[a,p]:a,$=0,re=S.length;$<re;$++)this.extend(S[$])}te.prototype={extend:function(a){var p=this._southWest,S=this._northEast,$,re;if(a instanceof le)$=a,re=a;else if(a instanceof te){if($=a._southWest,re=a._northEast,!$||!re)return this}else return a?this.extend(xe(a)||ce(a)):this;return!p&&!S?(this._southWest=new le($.lat,$.lng),this._northEast=new le(re.lat,re.lng)):(p.lat=Math.min($.lat,p.lat),p.lng=Math.min($.lng,p.lng),S.lat=Math.max(re.lat,S.lat),S.lng=Math.max(re.lng,S.lng)),this},pad:function(a){var p=this._southWest,S=this._northEast,$=Math.abs(p.lat-S.lat)*a,re=Math.abs(p.lng-S.lng)*a;return new te(new le(p.lat-$,p.lng-re),new le(S.lat+$,S.lng+re))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof le||"lat"in a?a=xe(a):a=ce(a);var p=this._southWest,S=this._northEast,$,re;return a instanceof te?($=a.getSouthWest(),re=a.getNorthEast()):$=re=a,$.lat>=p.lat&&re.lat<=S.lat&&$.lng>=p.lng&&re.lng<=S.lng},intersects:function(a){a=ce(a);var p=this._southWest,S=this._northEast,$=a.getSouthWest(),re=a.getNorthEast(),Ee=re.lat>=p.lat&&$.lat<=S.lat,st=re.lng>=p.lng&&$.lng<=S.lng;return Ee&&st},overlaps:function(a){a=ce(a);var p=this._southWest,S=this._northEast,$=a.getSouthWest(),re=a.getNorthEast(),Ee=re.lat>p.lat&&$.lat<S.lat,st=re.lng>p.lng&&$.lng<S.lng;return Ee&&st},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=ce(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(a,p){return a instanceof te?a:new te(a,p)}function le(a,p,S){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,S!==void 0&&(this.alt=+S)}le.prototype={equals:function(a,p){if(!a)return!1;a=xe(a);var S=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return S<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return J.distance(this,xe(a))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,S=p/Math.cos(Math.PI/180*this.lat);return ce([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function xe(a,p,S){return a instanceof le?a:K(a)&&typeof a[0]!="object"?a.length===3?new le(a[0],a[1],a[2]):a.length===2?new le(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new le(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new le(a,p,S)}var he={latLngToPoint:function(a,p){var S=this.projection.project(a),$=this.scale(p);return this.transformation._transform(S,$)},pointToLatLng:function(a,p){var S=this.scale(p),$=this.transformation.untransform(a,S);return this.projection.unproject($)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(a),$=this.transformation.transform(p.min,S),re=this.transformation.transform(p.max,S);return new Ve($,re)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?g(a.lng,this.wrapLng,!0):a.lng,S=this.wrapLat?g(a.lat,this.wrapLat,!0):a.lat,$=a.alt;return new le(S,p,$)},wrapLatLngBounds:function(a){var p=a.getCenter(),S=this.wrapLatLng(p),$=p.lat-S.lat,re=p.lng-S.lng;if($===0&&re===0)return a;var Ee=a.getSouthWest(),st=a.getNorthEast(),Ct=new le(Ee.lat-$,Ee.lng-re),Ft=new le(st.lat-$,st.lng-re);return new te(Ct,Ft)}},J=i({},he,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var S=Math.PI/180,$=a.lat*S,re=p.lat*S,Ee=Math.sin((p.lat-a.lat)*S/2),st=Math.sin((p.lng-a.lng)*S/2),Ct=Ee*Ee+Math.cos($)*Math.cos(re)*st*st,Ft=2*Math.atan2(Math.sqrt(Ct),Math.sqrt(1-Ct));return this.R*Ft}}),ae=6378137,Fe={R:ae,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,S=this.MAX_LATITUDE,$=Math.max(Math.min(S,a.lat),-S),re=Math.sin($*p);return new ne(this.R*a.lng*p,this.R*Math.log((1+re)/(1-re))/2)},unproject:function(a){var p=180/Math.PI;return new le((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=ae*Math.PI;return new Ve([-a,-a],[a,a])}()};function Me(a,p,S,$){if(K(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=S,this._d=$}Me.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new ne((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function Ye(a,p,S,$){return new Me(a,p,S,$)}var oe=i({},J,{code:"EPSG:3857",projection:Fe,transformation:function(){var a=.5/(Math.PI*Fe.R);return Ye(a,.5,-a,.5)}()}),fe=i({},oe,{code:"EPSG:900913"});function be(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function de(a,p){var S="",$,re,Ee,st,Ct,Ft;for($=0,Ee=a.length;$<Ee;$++){for(Ct=a[$],re=0,st=Ct.length;re<st;re++)Ft=Ct[re],S+=(re?"L":"M")+Ft.x+" "+Ft.y;S+=p?bn.svg?"z":"x":""}return S||"M0 0"}var Ue=document.documentElement.style,Xe="ActiveXObject"in window,ze=Xe&&!document.addEventListener,Je="msLaunchUri"in navigator&&!("documentMode"in document),Qe=lr("webkit"),it=lr("android"),Mt=lr("android 2")||lr("android 3"),xt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Nt=it&&lr("Google")&&xt<537&&!("AudioNode"in window),Kt=!!window.opera,hn=!Je&&lr("chrome"),mn=lr("gecko")&&!Qe&&!Kt&&!Xe,et=!hn&&lr("safari"),ot=lr("phantom"),nt="OTransition"in Ue,$t=navigator.platform.indexOf("Win")===0,en=Xe&&"transition"in Ue,kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mt,Ln="MozPerspective"in Ue,Tn=!window.L_DISABLE_3D&&(en||kn||Ln)&&!nt&&!ot,or=typeof orientation<"u"||lr("mobile"),wn=or&&Qe,Rn=or&&kn,lt=!window.PointerEvent&&window.MSPointerEvent,We=!!(window.PointerEvent||lt),qt="ontouchstart"in window||!!window.TouchEvent,_n=!window.L_NO_TOUCH&&(qt||We),Dn=or&&Kt,Cn=or&&mn,Xt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gn=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,p),window.removeEventListener("testPassiveEventSupport",y,p)}catch{}return a}(),Ut=function(){return!!document.createElement("canvas").getContext}(),Jt=!!(document.createElementNS&&be("svg").createSVGRect),vn=!!Jt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ci=!Jt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Sn=navigator.platform.indexOf("Mac")===0,dr=navigator.platform.indexOf("Linux")===0;function lr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var bn={ie:Xe,ielt9:ze,edge:Je,webkit:Qe,android:it,android23:Mt,androidStock:Nt,opera:Kt,chrome:hn,gecko:mn,safari:et,phantom:ot,opera12:nt,win:$t,ie3d:en,webkit3d:kn,gecko3d:Ln,any3d:Tn,mobile:or,mobileWebkit:wn,mobileWebkit3d:Rn,msPointer:lt,pointer:We,touch:_n,touchNative:qt,mobileOpera:Dn,mobileGecko:Cn,retina:Xt,passiveEvents:Gn,canvas:Ut,svg:Jt,vml:ci,inlineSvg:vn,mac:Sn,linux:dr},yi=bn.msPointer?"MSPointerDown":"pointerdown",Es=bn.msPointer?"MSPointerMove":"pointermove",Co=bn.msPointer?"MSPointerUp":"pointerup",Fi=bn.msPointer?"MSPointerCancel":"pointercancel",Er={touchstart:yi,touchmove:Es,touchend:Co,touchcancel:Fi},_i={touchstart:Cs,touchmove:Cr,touchend:Cr,touchcancel:Cr},sr={},rn=!1;function Uo(a,p,S){return p==="touchstart"&&Qo(),_i[p]?(S=_i[p].bind(this,S),a.addEventListener(Er[p],S,!1),S):(console.warn("wrong event specified:",p),y)}function to(a,p,S){if(!Er[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(Er[p],S,!1)}function fo(a){sr[a.pointerId]=a}function qi(a){sr[a.pointerId]&&(sr[a.pointerId]=a)}function ms(a){delete sr[a.pointerId]}function Qo(){rn||(document.addEventListener(yi,fo,!0),document.addEventListener(Es,qi,!0),document.addEventListener(Co,ms,!0),document.addEventListener(Fi,ms,!0),rn=!0)}function Cr(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in sr)p.touches.push(sr[S]);p.changedTouches=[p],a(p)}}function Cs(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&mr(p),Cr(a,p)}function qu(a){var p={},S,$;for($ in a)S=a[$],p[$]=S&&S.bind?S.bind(a):S;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Is=200;function ei(a,p){a.addEventListener("dblclick",p);var S=0,$;function re(Ee){if(Ee.detail!==1){$=Ee.detail;return}if(!(Ee.pointerType==="mouse"||Ee.sourceCapabilities&&!Ee.sourceCapabilities.firesTouchEvents)){var st=Ua(Ee);if(!(st.some(function(Ft){return Ft instanceof HTMLLabelElement&&Ft.attributes.for})&&!st.some(function(Ft){return Ft instanceof HTMLInputElement||Ft instanceof HTMLSelectElement}))){var Ct=Date.now();Ct-S<=Is?($++,$===2&&p(qu(Ee))):$=1,S=Ct}}}return a.addEventListener("click",re),{dblclick:p,simDblclick:re}}function Un(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var Hi=Xs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hi=Xs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ji=hi==="webkitTransition"||hi==="OTransition"?hi+"End":"transitionend";function no(a){return typeof a=="string"?document.getElementById(a):a}function zi(a,p){var S=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var $=document.defaultView.getComputedStyle(a,null);S=$?$[p]:null}return S==="auto"?null:S}function wr(a,p,S){var $=document.createElement(a);return $.className=p||"",S&&S.appendChild($),$}function Pn(a){var p=a.parentNode;p&&p.removeChild(a)}function gs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function bi(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function Di(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function Hr(a,p){if(a.classList!==void 0)return a.classList.contains(p);var S=fi(a);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function Qt(a,p){if(a.classList!==void 0)for(var S=P(p),$=0,re=S.length;$<re;$++)a.classList.add(S[$]);else if(!Hr(a,p)){var Ee=fi(a);Ar(a,(Ee?Ee+" ":"")+p)}}function Gt(a,p){a.classList!==void 0?a.classList.remove(p):Ar(a,_((" "+fi(a)+" ").replace(" "+p+" "," ")))}function Ar(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function fi(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Si(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&Ys(a,p)}function Ys(a,p){var S=!1,$="DXImageTransform.Microsoft.Alpha";try{S=a.filters.item($)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):a.style.filter+=" progid:"+$+"(opacity="+p+")"}function Xs(a){for(var p=document.documentElement.style,S=0;S<a.length;S++)if(a[S]in p)return a[S];return!1}function Po(a,p,S){var $=p||new ne(0,0);a.style[Hi]=(bn.ie3d?"translate("+$.x+"px,"+$.y+"px)":"translate3d("+$.x+"px,"+$.y+"px,0)")+(S?" scale("+S+")":"")}function Ei(a,p){a._leaflet_pos=p,bn.any3d?Po(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function Mr(a){return a._leaflet_pos||new ne(0,0)}var Ps,Ci,es;if("onselectstart"in document)Ps=function(){Qn(window,"selectstart",mr)},Ci=function(){Gr(window,"selectstart",mr)};else{var po=Xs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ps=function(){if(po){var a=document.documentElement.style;es=a[po],a[po]="none"}},Ci=function(){po&&(document.documentElement.style[po]=es,es=void 0)}}function nl(){Qn(window,"dragstart",mr)}function ts(){Gr(window,"dragstart",mr)}var Rs,As;function Js(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Ui(),Rs=a,As=a.style.outlineStyle,a.style.outlineStyle="none",Qn(window,"keydown",Ui))}function Ui(){Rs&&(Rs.style.outlineStyle=As,Rs=void 0,As=void 0,Gr(window,"keydown",Ui))}function Wl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ti(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var nr={__proto__:null,TRANSFORM:Hi,TRANSITION:hi,TRANSITION_END:ji,get:no,getStyle:zi,create:wr,remove:Pn,empty:gs,toFront:bi,toBack:Di,hasClass:Hr,addClass:Qt,removeClass:Gt,setClass:Ar,getClass:fi,setOpacity:Si,testProp:Xs,setTransform:Po,setPosition:Ei,getPosition:Mr,get disableTextSelection(){return Ps},get enableTextSelection(){return Ci},disableImageDrag:nl,enableImageDrag:ts,preventOutline:Js,restoreOutline:Ui,getSizedParentNode:Wl,getScale:ti};function Qn(a,p,S,$){if(p&&typeof p=="object")for(var re in p)il(a,re,p[re],S);else{p=P(p);for(var Ee=0,st=p.length;Ee<st;Ee++)il(a,p[Ee],S,$)}return this}var Fs="_leaflet_events";function Gr(a,p,S,$){if(arguments.length===1)vu(a),delete a[Fs];else if(p&&typeof p=="object")for(var re in p)js(a,re,p[re],S);else if(p=P(p),arguments.length===2)vu(a,function(Ct){return X(p,Ct)!==-1});else for(var Ee=0,st=p.length;Ee<st;Ee++)js(a,p[Ee],S,$);return this}function vu(a,p){for(var S in a[Fs]){var $=S.split(/\d/)[0];(!p||p($))&&js(a,$,null,null,S)}}var rl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function il(a,p,S,$){var re=p+h(S)+($?"_"+h($):"");if(a[Fs]&&a[Fs][re])return this;var Ee=function(Ct){return S.call($||a,Ct||window.event)},st=Ee;!bn.touchNative&&bn.pointer&&p.indexOf("touch")===0?Ee=Uo(a,p,Ee):bn.touch&&p==="dblclick"?Ee=ei(a,Ee):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(rl[p]||p,Ee,bn.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Ee=function(Ct){Ct=Ct||window.event,ol(a,Ct)&&st(Ct)},a.addEventListener(rl[p],Ee,!1)):a.addEventListener(p,st,!1):a.attachEvent("on"+p,Ee),a[Fs]=a[Fs]||{},a[Fs][re]=Ee}function js(a,p,S,$,re){re=re||p+h(S)+($?"_"+h($):"");var Ee=a[Fs]&&a[Fs][re];if(!Ee)return this;!bn.touchNative&&bn.pointer&&p.indexOf("touch")===0?to(a,p,Ee):bn.touch&&p==="dblclick"?Un(a,Ee):"removeEventListener"in a?a.removeEventListener(rl[p]||p,Ee,!1):a.detachEvent("on"+p,Ee),a[Fs][re]=null}function za(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function yu(a){return il(a,"wheel",za),this}function Cl(a){return Qn(a,"mousedown touchstart dblclick contextmenu",za),a._leaflet_disable_click=!0,this}function mr(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Or(a){return mr(a),za(a),this}function Ua(a){if(a.composedPath)return a.composedPath();for(var p=[],S=a.target;S;)p.push(S),S=S.parentNode;return p}function Wu(a,p){if(!p)return new ne(a.clientX,a.clientY);var S=ti(p),$=S.boundingClientRect;return new ne((a.clientX-$.left)/S.x-p.clientLeft,(a.clientY-$.top)/S.y-p.clientTop)}var Pl=bn.linux&&bn.chrome?window.devicePixelRatio:bn.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zl(a){return bn.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Pl:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function ol(a,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==a;)S=S.parentNode}catch{return!1}return S!==a}var Al={__proto__:null,on:Qn,off:Gr,stopPropagation:za,disableScrollPropagation:yu,disableClickPropagation:Cl,preventDefault:mr,stop:Or,getPropagationPath:Ua,getMousePosition:Wu,getWheelDelta:Zl,isExternalTarget:ol,addListener:Qn,removeListener:Gr},Kl=G.extend({run:function(a,p,S,$){this.stop(),this._el=a,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max($||.5,.2),this._startPos=Mr(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var S=this._startPos.add(this._offset.multiplyBy(a));p&&S._round(),Ei(this._el,S),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Ir=G.extend({options:{crs:oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=T(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(xe(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hi&&bn.any3d&&!bn.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Qn(this._proxy,ji,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(xe(a),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var $=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,S.zoom):this._tryAnimatedPan(a,S.pan);if($)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(bn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(bn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,S){var $=this.getZoomScale(p),re=this.getSize().divideBy(2),Ee=a instanceof ne?a:this.latLngToContainerPoint(a),st=Ee.subtract(re).multiplyBy(1-1/$),Ct=this.containerPointToLatLng(re.add(st));return this.setView(Ct,p,{zoom:S})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():ce(a);var S=ge(p.paddingTopLeft||p.padding||[0,0]),$=ge(p.paddingBottomRight||p.padding||[0,0]),re=this.getBoundsZoom(a,!1,S.add($));if(re=typeof p.maxZoom=="number"?Math.min(p.maxZoom,re):re,re===1/0)return{center:a.getCenter(),zoom:re};var Ee=$.subtract(S).divideBy(2),st=this.project(a.getSouthWest(),re),Ct=this.project(a.getNorthEast(),re),Ft=this.unproject(st.add(Ct).divideBy(2).add(Ee),re);return{center:Ft,zoom:re}},fitBounds:function(a,p){if(a=ce(a),!a.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(a,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=ge(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Kl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Qt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,S){if(S=S||{},S.animate===!1||!bn.any3d)return this.setView(a,p,S);this._stop();var $=this.project(this.getCenter()),re=this.project(a),Ee=this.getSize(),st=this._zoom;a=xe(a),p=p===void 0?st:p;var Ct=Math.max(Ee.x,Ee.y),Ft=Ct*this.getZoomScale(st,p),sn=re.distanceTo($)||1,On=1.42,Kn=On*On;function Pr(Xr){var Do=Xr?-1:1,Te=Xr?Ft:Ct,ss=Ft*Ft-Ct*Ct+Do*Kn*Kn*sn*sn,wu=2*Te*Kn*sn,wo=ss/wu,Br=Math.sqrt(wo*wo+1)-wo,Gc=Br<1e-9?-18:Math.log(Br);return Gc}function so(Xr){return(Math.exp(Xr)-Math.exp(-Xr))/2}function $i(Xr){return(Math.exp(Xr)+Math.exp(-Xr))/2}function bo(Xr){return so(Xr)/$i(Xr)}var Ti=Pr(0);function os(Xr){return Ct*($i(Ti)/$i(Ti+On*Xr))}function yc(Xr){return Ct*($i(Ti)*bo(Ti+On*Xr)-so(Ti))/Kn}function la(Xr){return 1-Math.pow(1-Xr,1.5)}var Gs=Date.now(),Ts=(Pr(1)-Ti)/On,Eh=S.duration?1e3*S.duration:1e3*Ts*.8;function Jl(){var Xr=(Date.now()-Gs)/Eh,Do=la(Xr)*Ts;Xr<=1?(this._flyToFrame=z(Jl,this),this._move(this.unproject($.add(re.subtract($).multiplyBy(yc(Do)/sn)),st),this.getScaleZoom(Ct/os(Do),st),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),Jl.call(this),this},flyToBounds:function(a,p){var S=this._getBoundsCenterZoom(a,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(a){return a=ce(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var S=this.getCenter(),$=this._limitCenter(S,this._zoom,ce(a));return S.equals($)||this.panTo($,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var S=ge(p.paddingTopLeft||p.padding||[0,0]),$=ge(p.paddingBottomRight||p.padding||[0,0]),re=this.project(this.getCenter()),Ee=this.project(a),st=this.getPixelBounds(),Ct=B([st.min.add(S),st.max.subtract($)]),Ft=Ct.getSize();if(!Ct.contains(Ee)){this._enforcingBounds=!0;var sn=Ee.subtract(Ct.getCenter()),On=Ct.extend(Ee).getSize().subtract(Ft);re.x+=sn.x<0?-On.x:On.x,re.y+=sn.y<0?-On.y:On.y,this.panTo(this.unproject(re),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),$=p.divideBy(2).round(),re=S.divideBy(2).round(),Ee=$.subtract(re);return!Ee.x&&!Ee.y?this:(a.animate&&a.pan?this.panBy(Ee):(a.pan&&this._rawPanBy(Ee),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,a):navigator.geolocation.getCurrentPosition(p,S,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,S=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,S=a.coords.longitude,$=new le(p,S),re=$.toBounds(a.coords.accuracy*2),Ee=this._locateOptions;if(Ee.setView){var st=this.getBoundsZoom(re);this.setView($,Ee.maxZoom?Math.min(st,Ee.maxZoom):st)}var Ct={latlng:$,bounds:re,timestamp:a.timestamp};for(var Ft in a.coords)typeof a.coords[Ft]=="number"&&(Ct[Ft]=a.coords[Ft]);this.fire("locationfound",Ct)}},addHandler:function(a,p){if(!p)return this;var S=this[a]=new p(this);return this._handlers.push(S),this.options[a]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Pn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var S="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),$=wr("div",S,p||this._mapPane);return a&&(this._panes[a]=$),$},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),S=this.unproject(a.getTopRight());return new te(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,S){a=ce(a),S=ge(S||[0,0]);var $=this.getZoom()||0,re=this.getMinZoom(),Ee=this.getMaxZoom(),st=a.getNorthWest(),Ct=a.getSouthEast(),Ft=this.getSize().subtract(S),sn=B(this.project(Ct,$),this.project(st,$)).getSize(),On=bn.any3d?this.options.zoomSnap:1,Kn=Ft.x/sn.x,Pr=Ft.y/sn.y,so=p?Math.max(Kn,Pr):Math.min(Kn,Pr);return $=this.getScaleZoom(so,$),On&&($=Math.round($/(On/100))*(On/100),$=p?Math.ceil($/On)*On:Math.floor($/On)*On),Math.max(re,Math.min(Ee,$))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var S=this._getTopLeftPoint(a,p);return new Ve(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(a)/S.scale(p)},getScaleZoom:function(a,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var $=S.zoom(a*S.scale(p));return isNaN($)?1/0:$},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(xe(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(ge(a),p)},layerPointToLatLng:function(a){var p=ge(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(xe(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(xe(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ce(a))},distance:function(a,p){return this.options.crs.distance(xe(a),xe(p))},containerPointToLayerPoint:function(a){return ge(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ge(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(ge(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(a)))},mouseEventToContainerPoint:function(a){return Wu(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=no(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Qn(p,"scroll",this._onScroll,this),this._containerId=h(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&bn.any3d,Qt(a,"leaflet-container"+(bn.touch?" leaflet-touch":"")+(bn.retina?" leaflet-retina":"")+(bn.ielt9?" leaflet-oldie":"")+(bn.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=zi(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ei(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qt(a.markerPane,"leaflet-zoom-hide"),Qt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,S){Ei(this._mapPane,new ne(0,0));var $=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var re=this._zoom!==p;this._moveStart(re,S)._move(a,p)._moveEnd(re),this.fire("viewreset"),$&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,S,$){p===void 0&&(p=this._zoom);var re=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),$?S&&S.pinch&&this.fire("zoom",S):((re||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ei(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[h(this._container)]=this;var p=a?Gr:Qn;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),bn.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var S=[],$,re=p==="mouseout"||p==="mouseover",Ee=a.target||a.srcElement,st=!1;Ee;){if($=this._targets[h(Ee)],$&&(p==="click"||p==="preclick")&&this._draggableMoved($)){st=!0;break}if($&&$.listens(p,!0)&&(re&&!ol(Ee,a)||(S.push($),re))||Ee===this._container)break;Ee=Ee.parentNode}return!S.length&&!st&&!re&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var S=a.type;S==="mousedown"&&Js(p),this._fireDOMEvent(a,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,S){if(a.type==="click"){var $=i({},a);$.type="preclick",this._fireDOMEvent($,$.type,S)}var re=this._findEventTargets(a,p);if(S){for(var Ee=[],st=0;st<S.length;st++)S[st].listens(p,!0)&&Ee.push(S[st]);re=Ee.concat(re)}if(re.length){p==="contextmenu"&&mr(a);var Ct=re[0],Ft={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var sn=Ct.getLatLng&&(!Ct._radius||Ct._radius<=10);Ft.containerPoint=sn?this.latLngToContainerPoint(Ct.getLatLng()):this.mouseEventToContainerPoint(a),Ft.layerPoint=this.containerPointToLayerPoint(Ft.containerPoint),Ft.latlng=sn?Ct.getLatLng():this.layerPointToLatLng(Ft.layerPoint)}for(st=0;st<re.length;st++)if(re[st].fire(p,Ft,!0),Ft.originalEvent._stopped||re[st].options.bubblingMouseEvents===!1&&X(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return Mr(this._mapPane)||new ne(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var S=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var S=this.getSize()._divideBy(2);return this.project(a,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,S){var $=this._getNewPixelOrigin(S,p);return this.project(a,p)._subtract($)},_latLngBoundsToNewLayerBounds:function(a,p,S){var $=this._getNewPixelOrigin(S,p);return B([this.project(a.getSouthWest(),p)._subtract($),this.project(a.getNorthWest(),p)._subtract($),this.project(a.getSouthEast(),p)._subtract($),this.project(a.getNorthEast(),p)._subtract($)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,S){if(!S)return a;var $=this.project(a,p),re=this.getSize().divideBy(2),Ee=new Ve($.subtract(re),$.add(re)),st=this._getBoundsOffset(Ee,S,p);return Math.abs(st.x)<=1&&Math.abs(st.y)<=1?a:this.unproject($.add(st),p)},_limitOffset:function(a,p){if(!p)return a;var S=this.getPixelBounds(),$=new Ve(S.min.add(a),S.max.add(a));return a.add(this._getBoundsOffset($,p))},_getBoundsOffset:function(a,p,S){var $=B(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),re=$.min.subtract(a.min),Ee=$.max.subtract(a.max),st=this._rebound(re.x,-Ee.x),Ct=this._rebound(re.y,-Ee.y);return new ne(st,Ct)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),S=this.getMaxZoom(),$=bn.any3d?this.options.zoomSnap:1;return $&&(a=Math.round(a/$)*$),Math.max(p,Math.min(S,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var S=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var a=this._proxy=wr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var S=Hi,$=this._proxy.style[S];Po(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),$===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();Po(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var $=this.getZoomScale(p),re=this._getCenterOffset(a)._divideBy(1-1/$);return S.animate!==!0&&!this.getSize().contains(re)?!1:(z(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,S,$){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,Qt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:$}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wi(a,p){return new Ir(a,p)}var rr=I.extend({options:{position:"topright"},initialize:function(a){T(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),S=this.getPosition(),$=a._controlCorners[S];return Qt(p,"leaflet-control"),S.indexOf("bottom")!==-1?$.insertBefore(p,$.firstChild):$.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Zi=function(a){return new rr(a)};Ir.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",S=this._controlContainer=wr("div",p+"control-container",this._container);function $(re,Ee){var st=p+re+" "+p+Ee;a[re+Ee]=wr("div",st,S)}$("top","left"),$("top","right"),$("bottom","left"),$("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Pn(this._controlCorners[a]);Pn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sl=rr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,S,$){return S<$?-1:$<S?1:0}},initialize:function(a,p,S){T(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var $ in a)this._addLayer(a[$],$);for($ in p)this._addLayer(p[$],$,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return rr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(h(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Qt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Qt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=wr("div",a),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Cl(p),yu(p);var $=this._section=wr("section",a+"-list");S&&(this._map.on("click",this.collapse,this),Qn(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var re=this._layersLink=wr("a",a+"-toggle",p);re.href="#",re.title="Layers",re.setAttribute("role","button"),Qn(re,{keydown:function(Ee){Ee.keyCode===13&&this._expandSafely()},click:function(Ee){mr(Ee),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=wr("div",a+"-base",$),this._separator=wr("div",a+"-separator",$),this._overlaysList=wr("div",a+"-overlays",$),p.appendChild($)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&h(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,S){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function($,re){return this.options.sortFunction($.layer,re.layer,$.name,re.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gs(this._baseLayersList),gs(this._overlaysList),this._layerControlInputs=[];var a,p,S,$,re=0;for(S=0;S<this._layers.length;S++)$=this._layers[S],this._addItem($),p=p||$.overlay,a=a||!$.overlay,re+=$.overlay?0:1;return this.options.hideSingleBase&&(a=a&&re>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(h(a.target)),S=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(a,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",$=document.createElement("div");return $.innerHTML=S,$.firstChild},_addItem:function(a){var p=document.createElement("label"),S=this._map.hasLayer(a.layer),$;a.overlay?($=document.createElement("input"),$.type="checkbox",$.className="leaflet-control-layers-selector",$.defaultChecked=S):$=this._createRadioElement("leaflet-base-layers_"+h(this),S),this._layerControlInputs.push($),$.layerId=h(a.layer),Qn($,"click",this._onInputClick,this);var re=document.createElement("span");re.innerHTML=" "+a.name;var Ee=document.createElement("span");p.appendChild(Ee),Ee.appendChild($),Ee.appendChild(re);var st=a.overlay?this._overlaysList:this._baseLayersList;return st.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,S,$=[],re=[];this._handlingClick=!0;for(var Ee=a.length-1;Ee>=0;Ee--)p=a[Ee],S=this._getLayer(p.layerId).layer,p.checked?$.push(S):p.checked||re.push(S);for(Ee=0;Ee<re.length;Ee++)this._map.hasLayer(re[Ee])&&this._map.removeLayer(re[Ee]);for(Ee=0;Ee<$.length;Ee++)this._map.hasLayer($[Ee])||this._map.addLayer($[Ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,S,$=this._map.getZoom(),re=a.length-1;re>=0;re--)p=a[re],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&$<S.options.minZoom||S.options.maxZoom!==void 0&&$>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Qn(a,"click",mr),this.expand();var p=this;setTimeout(function(){Gr(a,"click",mr),p._preventClick=!1})}}),ga=function(a,p,S){return new sl(a,p,S)},Ai=rr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",S=wr("div",p+" leaflet-bar"),$=this.options;return this._zoomInButton=this._createButton($.zoomInText,$.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton($.zoomOutText,$.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,S,$,re){var Ee=wr("a",S,$);return Ee.innerHTML=a,Ee.href="#",Ee.title=p,Ee.setAttribute("role","button"),Ee.setAttribute("aria-label",p),Cl(Ee),Qn(Ee,"click",Or),Qn(Ee,"click",re,this),Qn(Ee,"click",this._refocusOnMap,this),Ee},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";Gt(this._zoomInButton,p),Gt(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Qt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Qt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ir.mergeOptions({zoomControl:!0}),Ir.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ai,this.addControl(this.zoomControl))});var Yl=function(a){return new Ai(a)},Qs=rr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",S=wr("div",p),$=this.options;return this._addScales($,p+"-line",S),a.on($.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),S},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,S){a.metric&&(this._mScale=wr("div",p,S)),a.imperial&&(this._iScale=wr("div",p,S))},_update:function(){var a=this._map,p=a.getSize().y/2,S=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/a)},_updateImperial:function(a){var p=a*3.2808399,S,$,re;p>5280?(S=p/5280,$=this._getRoundNum(S),this._updateScale(this._iScale,$+" mi",$/S)):(re=this._getRoundNum(p),this._updateScale(this._iScale,re+" ft",re/p))},_updateScale:function(a,p,S){a.style.width=Math.round(this.options.maxWidth*S)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),S=a/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),Ml=function(a){return new Qs(a)},kl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ms=rr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bn.inlineSvg?kl+" ":"")+"Leaflet</a>"},initialize:function(a){T(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=wr("div","leaflet-control-attribution"),Cl(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),a.length&&S.push(a.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Ir.mergeOptions({attributionControl:!0}),Ir.addInitHook(function(){this.options.attributionControl&&new Ms().addTo(this)});var Tl=function(a){return new Ms(a)};rr.Layers=sl,rr.Zoom=Ai,rr.Scale=Qs,rr.Attribution=Ms,Zi.layers=ga,Zi.zoom=Yl,Zi.scale=Ml,Zi.attribution=Tl;var ni=I.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ni.addTo=function(a,p){return a.addHandler(p,this),this};var Zu={Events:V},mo=bn.touch?"touchstart mousedown":"mousedown",zs=G.extend({options:{clickTolerance:3},initialize:function(a,p,S,$){T(this,$),this._element=a,this._dragStartTarget=p||a,this._preventOutline=S},enable:function(){this._enabled||(Qn(this._dragStartTarget,mo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(zs._dragging===this&&this.finishDrag(!0),Gr(this._dragStartTarget,mo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Hr(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){zs._dragging===this&&this.finishDrag();return}if(!(zs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(zs._dragging=this,this._preventOutline&&Js(this._element),nl(),Ps(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,S=Wl(this._element);this._startPoint=new ne(p.clientX,p.clientY),this._startPos=Mr(this._element),this._parentScale=ti(S);var $=a.type==="mousedown";Qn(document,$?"mousemove":"touchmove",this._onMove,this),Qn(document,$?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,S=new ne(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,mr(a),this._moved||(this.fire("dragstart"),this._moved=!0,Qt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ei(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Gt(document.body,"leaflet-dragging"),this._lastTarget&&(Gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Gr(document,"mousemove touchmove",this._onMove,this),Gr(document,"mouseup touchend touchcancel",this._onUp,this),ts(),Ci();var p=this._moved&&this._moving;this._moving=!1,zs._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Bl(a,p,S){var $,re=[1,4,2,8],Ee,st,Ct,Ft,sn,On,Kn,Pr;for(Ee=0,On=a.length;Ee<On;Ee++)a[Ee]._code=Rt(a[Ee],p);for(Ct=0;Ct<4;Ct++){for(Kn=re[Ct],$=[],Ee=0,On=a.length,st=On-1;Ee<On;st=Ee++)Ft=a[Ee],sn=a[st],Ft._code&Kn?sn._code&Kn||(Pr=wt(sn,Ft,Kn,p,S),Pr._code=Rt(Pr,p),$.push(Pr)):(sn._code&Kn&&(Pr=wt(sn,Ft,Kn,p,S),Pr._code=Rt(Pr,p),$.push(Pr)),$.push(Ft));a=$}return a}function Us(a,p){var S,$,re,Ee,st,Ct,Ft,sn,On;if(!a||a.length===0)throw new Error("latlngs not passed");Fn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Kn=xe([0,0]),Pr=ce(a),so=Pr.getNorthWest().distanceTo(Pr.getSouthWest())*Pr.getNorthEast().distanceTo(Pr.getNorthWest());so<1700&&(Kn=al(a));var $i=a.length,bo=[];for(S=0;S<$i;S++){var Ti=xe(a[S]);bo.push(p.project(xe([Ti.lat-Kn.lat,Ti.lng-Kn.lng])))}for(Ct=Ft=sn=0,S=0,$=$i-1;S<$i;$=S++)re=bo[S],Ee=bo[$],st=re.y*Ee.x-Ee.y*re.x,Ft+=(re.x+Ee.x)*st,sn+=(re.y+Ee.y)*st,Ct+=st*3;Ct===0?On=bo[0]:On=[Ft/Ct,sn/Ct];var os=p.unproject(ge(On));return xe([os.lat+Kn.lat,os.lng+Kn.lng])}function al(a){for(var p=0,S=0,$=0,re=0;re<a.length;re++){var Ee=xe(a[re]);p+=Ee.lat,S+=Ee.lng,$++}return xe([p/$,S/$])}var ll={__proto__:null,clipPolygon:Bl,polygonCenter:Us,centroid:al};function ri(a,p){if(!p||!a.length)return a.slice();var S=p*p;return a=ve(a,S),a=Ki(a,S),a}function vs(a,p,S){return Math.sqrt(Bn(a,p,S,!0))}function va(a,p,S){return Bn(a,p,S)}function Ki(a,p){var S=a.length,$=typeof Uint8Array<"u"?Uint8Array:Array,re=new $(S);re[0]=re[S-1]=1,N(a,re,p,0,S-1);var Ee,st=[];for(Ee=0;Ee<S;Ee++)re[Ee]&&st.push(a[Ee]);return st}function N(a,p,S,$,re){var Ee=0,st,Ct,Ft;for(Ct=$+1;Ct<=re-1;Ct++)Ft=Bn(a[Ct],a[$],a[re],!0),Ft>Ee&&(st=Ct,Ee=Ft);Ee>S&&(p[st]=1,N(a,p,S,$,st),N(a,p,S,st,re))}function ve(a,p){for(var S=[a[0]],$=1,re=0,Ee=a.length;$<Ee;$++)cn(a[$],a[re])>p&&(S.push(a[$]),re=$);return re<Ee-1&&S.push(a[Ee-1]),S}var qe;function ct(a,p,S,$,re){var Ee=$?qe:Rt(a,S),st=Rt(p,S),Ct,Ft,sn;for(qe=st;;){if(!(Ee|st))return[a,p];if(Ee&st)return!1;Ct=Ee||st,Ft=wt(a,p,Ct,S,re),sn=Rt(Ft,S),Ct===Ee?(a=Ft,Ee=sn):(p=Ft,st=sn)}}function wt(a,p,S,$,re){var Ee=p.x-a.x,st=p.y-a.y,Ct=$.min,Ft=$.max,sn,On;return S&8?(sn=a.x+Ee*(Ft.y-a.y)/st,On=Ft.y):S&4?(sn=a.x+Ee*(Ct.y-a.y)/st,On=Ct.y):S&2?(sn=Ft.x,On=a.y+st*(Ft.x-a.x)/Ee):S&1&&(sn=Ct.x,On=a.y+st*(Ct.x-a.x)/Ee),new ne(sn,On,re)}function Rt(a,p){var S=0;return a.x<p.min.x?S|=1:a.x>p.max.x&&(S|=2),a.y<p.min.y?S|=4:a.y>p.max.y&&(S|=8),S}function cn(a,p){var S=p.x-a.x,$=p.y-a.y;return S*S+$*$}function Bn(a,p,S,$){var re=p.x,Ee=p.y,st=S.x-re,Ct=S.y-Ee,Ft=st*st+Ct*Ct,sn;return Ft>0&&(sn=((a.x-re)*st+(a.y-Ee)*Ct)/Ft,sn>1?(re=S.x,Ee=S.y):sn>0&&(re+=st*sn,Ee+=Ct*sn)),st=a.x-re,Ct=a.y-Ee,$?st*st+Ct*Ct:new ne(re,Ee)}function Fn(a){return!K(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function er(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fn(a)}function fr(a,p){var S,$,re,Ee,st,Ct,Ft,sn;if(!a||a.length===0)throw new Error("latlngs not passed");Fn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var On=xe([0,0]),Kn=ce(a),Pr=Kn.getNorthWest().distanceTo(Kn.getSouthWest())*Kn.getNorthEast().distanceTo(Kn.getNorthWest());Pr<1700&&(On=al(a));var so=a.length,$i=[];for(S=0;S<so;S++){var bo=xe(a[S]);$i.push(p.project(xe([bo.lat-On.lat,bo.lng-On.lng])))}for(S=0,$=0;S<so-1;S++)$+=$i[S].distanceTo($i[S+1])/2;if($===0)sn=$i[0];else for(S=0,Ee=0;S<so-1;S++)if(st=$i[S],Ct=$i[S+1],re=st.distanceTo(Ct),Ee+=re,Ee>$){Ft=(Ee-$)/re,sn=[Ct.x-Ft*(Ct.x-st.x),Ct.y-Ft*(Ct.y-st.y)];break}var Ti=p.unproject(ge(sn));return xe([Ti.lat+On.lat,Ti.lng+On.lng])}var kr={__proto__:null,simplify:ri,pointToSegmentDistance:vs,closestPointOnSegment:va,clipSegment:ct,_getEdgeIntersection:wt,_getBitCode:Rt,_sqClosestPointOnSegment:Bn,isFlat:Fn,_flat:er,polylineCenter:fr},Pi={project:function(a){return new ne(a.lng,a.lat)},unproject:function(a){return new le(a.y,a.x)},bounds:new Ve([-180,-90],[180,90])},Yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,S=this.R,$=a.lat*p,re=this.R_MINOR/S,Ee=Math.sqrt(1-re*re),st=Ee*Math.sin($),Ct=Math.tan(Math.PI/4-$/2)/Math.pow((1-st)/(1+st),Ee/2);return $=-S*Math.log(Math.max(Ct,1e-10)),new ne(a.lng*p*S,$)},unproject:function(a){for(var p=180/Math.PI,S=this.R,$=this.R_MINOR/S,re=Math.sqrt(1-$*$),Ee=Math.exp(-a.y/S),st=Math.PI/2-2*Math.atan(Ee),Ct=0,Ft=.1,sn;Ct<15&&Math.abs(Ft)>1e-7;Ct++)sn=re*Math.sin(st),sn=Math.pow((1-sn)/(1+sn),re/2),Ft=Math.PI/2-2*Math.atan(Ee*sn)-st,st+=Ft;return new le(st*p,a.x*p/S)}},ii={__proto__:null,LonLat:Pi,Mercator:Yr,SphericalMercator:Fe},Yi=i({},J,{code:"EPSG:3395",projection:Yr,transformation:function(){var a=.5/(Math.PI*Yr.R);return Ye(a,.5,-a,.5)}()}),ro=i({},J,{code:"EPSG:4326",projection:Pi,transformation:Ye(1/180,1,-1/180,.5)}),ys=i({},he,{projection:Pi,transformation:Ye(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var S=p.lng-a.lng,$=p.lat-a.lat;return Math.sqrt(S*S+$*$)},infinite:!0});he.Earth=J,he.EPSG3395=Yi,he.EPSG3857=oe,he.EPSG900913=fe,he.EPSG4326=ro,he.Simple=ys;var Tr=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[h(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[h(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Ir.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=h(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=h(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return h(a)in this._layers},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},_addLayers:function(a){a=a?K(a)?a:[a]:[];for(var p=0,S=a.length;p<S;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[h(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=h(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,S=this._getZoomSpan();for(var $ in this._zoomBoundLayers){var re=this._zoomBoundLayers[$].options;a=re.minZoom===void 0?a:Math.min(a,re.minZoom),p=re.maxZoom===void 0?p:Math.max(p,re.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ao=Tr.extend({initialize:function(a,p){T(this,p),this._layers={};var S,$;if(a)for(S=0,$=a.length;S<$;S++)this.addLayer(a[S])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),S,$;for(S in this._layers)$=this._layers[S],$[a]&&$[a].apply($,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return h(a)}}),ul=function(a,p){return new Ao(a,p)},$o=Ao.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Ao.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Ao.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new te;for(var p in this._layers){var S=this._layers[p];a.extend(S.getBounds?S.getBounds():S.getLatLng())}return a}}),Xl=function(a,p){return new $o(a,p)},ea=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){T(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var S=this._getIconUrl(a);if(!S){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var $=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles($,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&($.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),$},_setIconStyles:function(a,p){var S=this.options,$=S[p+"Size"];typeof $=="number"&&($=[$,$]);var re=ge($),Ee=ge(p==="shadow"&&S.shadowAnchor||S.iconAnchor||re&&re.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(S.className||""),Ee&&(a.style.marginLeft=-Ee.x+"px",a.style.marginTop=-Ee.y+"px"),re&&(a.style.width=re.x+"px",a.style.height=re.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return bn.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function _u(a){return new ea(a)}var $a=ea.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof $a.imagePath!="string"&&($a.imagePath=this._detectIconPath()),(this.options.imagePath||$a.imagePath)+ea.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(S,$,re){var Ee=$.exec(S);return Ee&&Ee[re]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=wr("div","leaflet-default-icon-path",document.body),p=zi(a,"background-image")||zi(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Va=ni.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new zs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,S=p._map,$=this._marker.options.autoPanSpeed,re=this._marker.options.autoPanPadding,Ee=Mr(p._icon),st=S.getPixelBounds(),Ct=S.getPixelOrigin(),Ft=B(st.min._subtract(Ct).add(re),st.max._subtract(Ct).subtract(re));if(!Ft.contains(Ee)){var sn=ge((Math.max(Ft.max.x,Ee.x)-Ft.max.x)/(st.max.x-Ft.max.x)-(Math.min(Ft.min.x,Ee.x)-Ft.min.x)/(st.min.x-Ft.min.x),(Math.max(Ft.max.y,Ee.y)-Ft.max.y)/(st.max.y-Ft.max.y)-(Math.min(Ft.min.y,Ee.y)-Ft.min.y)/(st.min.y-Ft.min.y)).multiplyBy($);S.panBy(sn,{animate:!1}),this._draggable._newPos._add(sn),this._draggable._startPos._add(sn),Ei(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=z(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,S=p._shadow,$=Mr(p._icon),re=p._map.layerPointToLatLng($);S&&Ei(S,$),p._latlng=re,a.latlng=re,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),io=Tr.extend({options:{icon:new $a,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){T(this,p),this._latlng=xe(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=xe(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=a.icon.createIcon(this._icon),$=!1;S!==this._icon&&(this._icon&&this._removeIcon(),$=!0,a.title&&(S.title=a.title),S.tagName==="IMG"&&(S.alt=a.alt||"")),Qt(S,p),a.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qn(S,"focus",this._panOnFocus,this);var re=a.icon.createShadow(this._shadow),Ee=!1;re!==this._shadow&&(this._removeShadow(),Ee=!0),re&&(Qt(re,p),re.alt=""),this._shadow=re,a.opacity<1&&this._updateOpacity(),$&&this.getPane().appendChild(this._icon),this._initInteraction(),re&&Ee&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Gr(this._icon,"focus",this._panOnFocus,this),Pn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ei(this._icon,a),this._shadow&&Ei(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Qt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Va)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Va(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Si(this._icon,a),this._shadow&&Si(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,S=p.iconSize?ge(p.iconSize):ge(0,0),$=p.iconAnchor?ge(p.iconAnchor):ge(0,0);a.panInside(this._latlng,{paddingTopLeft:$,paddingBottomRight:S.subtract($)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ta(a,p){return new io(a,p)}var _s=Tr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return T(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ns=_s.extend({options:{fill:!0,radius:10},initialize:function(a,p){T(this,p),this._latlng=xe(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=xe(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return _s.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,S=this._clickTolerance(),$=[a+S,p+S];this._pxBounds=new Ve(this._point.subtract($),this._point.add($))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function cl(a,p){return new ns(a,p)}var Mo=ns.extend({initialize:function(a,p,S){if(typeof p=="number"&&(p=i({},S,{radius:p})),T(this,p),this._latlng=xe(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:_s.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,S=this._map,$=S.options.crs;if($.distance===J.distance){var re=Math.PI/180,Ee=this._mRadius/J.R/re,st=S.project([p+Ee,a]),Ct=S.project([p-Ee,a]),Ft=st.add(Ct).divideBy(2),sn=S.unproject(Ft).lat,On=Math.acos((Math.cos(Ee*re)-Math.sin(p*re)*Math.sin(sn*re))/(Math.cos(p*re)*Math.cos(sn*re)))/re;(isNaN(On)||On===0)&&(On=Ee/Math.cos(Math.PI/180*p)),this._point=Ft.subtract(S.getPixelOrigin()),this._radius=isNaN(On)?0:Ft.x-S.project([sn,a-On]).x,this._radiusY=Ft.y-st.y}else{var Kn=$.unproject($.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Kn).x}this._updateBounds()}});function Vo(a,p,S){return new Mo(a,p,S)}var Ho=_s.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){T(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,S=null,$=Bn,re,Ee,st=0,Ct=this._parts.length;st<Ct;st++)for(var Ft=this._parts[st],sn=1,On=Ft.length;sn<On;sn++){re=Ft[sn-1],Ee=Ft[sn];var Kn=$(a,re,Ee,!0);Kn<p&&(p=Kn,S=$(a,re,Ee))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=xe(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new te,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],S=Fn(a),$=0,re=a.length;$<re;$++)S?(p[$]=xe(a[$]),this._bounds.extend(p[$])):p[$]=this._convertLatLngs(a[$]);return p},_project:function(){var a=new Ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new ne(a,a);this._rawPxBounds&&(this._pxBounds=new Ve([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,S){var $=a[0]instanceof le,re=a.length,Ee,st;if($){for(st=[],Ee=0;Ee<re;Ee++)st[Ee]=this._map.latLngToLayerPoint(a[Ee]),S.extend(st[Ee]);p.push(st)}else for(Ee=0;Ee<re;Ee++)this._projectLatlngs(a[Ee],p,S)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,$,re,Ee,st,Ct,Ft;for(S=0,re=0,Ee=this._rings.length;S<Ee;S++)for(Ft=this._rings[S],$=0,st=Ft.length;$<st-1;$++)Ct=ct(Ft[$],Ft[$+1],a,$,!0),Ct&&(p[re]=p[re]||[],p[re].push(Ct[0]),(Ct[1]!==Ft[$+1]||$===st-2)&&(p[re].push(Ct[1]),re++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,S=0,$=a.length;S<$;S++)a[S]=ri(a[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var S,$,re,Ee,st,Ct,Ft=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,Ee=this._parts.length;S<Ee;S++)for(Ct=this._parts[S],$=0,st=Ct.length,re=st-1;$<st;re=$++)if(!(!p&&$===0)&&vs(a,Ct[re],Ct[$])<=Ft)return!0;return!1}});function Ku(a,p){return new Ho(a,p)}Ho._flat=er;var co=Ho.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Us(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=Ho.prototype._convertLatLngs.call(this,a),S=p.length;return S>=2&&p[0]instanceof le&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(a){Ho.prototype._setLatLngs.call(this,a),Fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,S=new ne(p,p);if(a=new Ve(a.min.subtract(S),a.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var $=0,re=this._rings.length,Ee;$<re;$++)Ee=Bl(this._rings[$],a,!0),Ee.length&&this._parts.push(Ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,S,$,re,Ee,st,Ct,Ft,sn;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Ee=0,Ft=this._parts.length;Ee<Ft;Ee++)for(S=this._parts[Ee],st=0,sn=S.length,Ct=sn-1;st<sn;Ct=st++)$=S[st],re=S[Ct],$.y>a.y!=re.y>a.y&&a.x<(re.x-$.x)*(a.y-$.y)/(re.y-$.y)+$.x&&(p=!p);return p||Ho.prototype._containsPoint.call(this,a,!0)}});function ya(a,p){return new co(a,p)}var ko=$o.extend({initialize:function(a,p){T(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=K(a)?a:a.features,S,$,re;if(p){for(S=0,$=p.length;S<$;S++)re=p[S],(re.geometries||re.geometry||re.features||re.coordinates)&&this.addData(re);return this}var Ee=this.options;if(Ee.filter&&!Ee.filter(a))return this;var st=To(a,Ee);return st?(st.feature=Oo(a),st.defaultOptions=st.options,this.resetStyle(st),Ee.onEachFeature&&Ee.onEachFeature(a,st),this.addLayer(st)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function To(a,p){var S=a.type==="Feature"?a.geometry:a,$=S?S.coordinates:null,re=[],Ee=p&&p.pointToLayer,st=p&&p.coordsToLatLng||ba,Ct,Ft,sn,On;if(!$&&!S)return null;switch(S.type){case"Point":return Ct=st($),_a(Ee,a,Ct,p);case"MultiPoint":for(sn=0,On=$.length;sn<On;sn++)Ct=st($[sn]),re.push(_a(Ee,a,Ct,p));return new $o(re);case"LineString":case"MultiLineString":return Ft=Bo($,S.type==="LineString"?0:1,st),new Ho(Ft,p);case"Polygon":case"MultiPolygon":return Ft=Bo($,S.type==="Polygon"?1:2,st),new co(Ft,p);case"GeometryCollection":for(sn=0,On=S.geometries.length;sn<On;sn++){var Kn=To({geometry:S.geometries[sn],type:"Feature",properties:a.properties},p);Kn&&re.push(Kn)}return new $o(re);case"FeatureCollection":for(sn=0,On=S.features.length;sn<On;sn++){var Pr=To(S.features[sn],p);Pr&&re.push(Pr)}return new $o(re);default:throw new Error("Invalid GeoJSON object.")}}function _a(a,p,S,$){return a?a(p,S):new io(S,$&&$.markersInheritOptions&&$)}function ba(a){return new le(a[1],a[0],a[2])}function Bo(a,p,S){for(var $=[],re=0,Ee=a.length,st;re<Ee;re++)st=p?Bo(a[re],p-1,S):(S||ba)(a[re]),$.push(st);return $}function go(a,p){return a=xe(a),a.alt!==void 0?[w(a.lng,p),w(a.lat,p),w(a.alt,p)]:[w(a.lng,p),w(a.lat,p)]}function na(a,p,S,$){for(var re=[],Ee=0,st=a.length;Ee<st;Ee++)re.push(p?na(a[Ee],Fn(a[Ee])?0:p-1,S,$):go(a[Ee],$));return!p&&S&&re.length>0&&re.push(re[0].slice()),re}function bs(a,p){return a.feature?i({},a.feature,{geometry:p}):Oo(p)}function Oo(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var yt={toGeoJSON:function(a){return bs(this,{type:"Point",coordinates:go(this.getLatLng(),a)})}};io.include(yt),Mo.include(yt),ns.include(yt),Ho.include({toGeoJSON:function(a){var p=!Fn(this._latlngs),S=na(this._latlngs,p?1:0,!1,a);return bs(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),co.include({toGeoJSON:function(a){var p=!Fn(this._latlngs),S=p&&!Fn(this._latlngs[0]),$=na(this._latlngs,S?2:p?1:0,!0,a);return p||($=[$]),bs(this,{type:(S?"Multi":"")+"Polygon",coordinates:$})}}),Ao.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(a).geometry.coordinates)}),bs(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var S=p==="GeometryCollection",$=[];return this.eachLayer(function(re){if(re.toGeoJSON){var Ee=re.toGeoJSON(a);if(S)$.push(Ee.geometry);else{var st=Oo(Ee);st.type==="FeatureCollection"?$.push.apply($,st.features):$.push(st)}}}),S?bs(this,{geometries:$,type:"GeometryCollection"}):{type:"FeatureCollection",features:$}}});function Vt(a,p){return new ko(a,p)}var Pt=Vt,An=Tr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,S){this._url=a,this._bounds=ce(p),T(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&bi(this._image),this},bringToBack:function(){return this._map&&Di(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ce(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:wr("img");if(Qt(p,"leaflet-image-layer"),this._zoomAnimated&&Qt(p,"leaflet-zoom-animated"),this.options.className&&Qt(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Po(this._image,S,p)},_reset:function(){var a=this._image,p=new Ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();Ei(a,p.min),a.style.width=S.x+"px",a.style.height=S.y+"px"},_updateOpacity:function(){Si(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Wn=function(a,p,S){return new An(a,p,S)},pr=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:wr("video");if(Qt(p,"leaflet-image-layer"),this._zoomAnimated&&Qt(p,"leaflet-zoom-animated"),this.options.className&&Qt(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onloadeddata=o(this.fire,this,"load"),a){for(var S=p.getElementsByTagName("source"),$=[],re=0;re<S.length;re++)$.push(S[re].src);this._url=S.length>0?$:[p.src];return}K(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Ee=0;Ee<this._url.length;Ee++){var st=wr("source");st.src=this._url[Ee],p.appendChild(st)}}});function Mi(a,p,S){return new pr(a,p,S)}var oi=An.extend({_initImage:function(){var a=this._image=this._url;Qt(a,"leaflet-image-layer"),this._zoomAnimated&&Qt(a,"leaflet-zoom-animated"),this.options.className&&Qt(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Ol(a,p,S){return new oi(a,p,S)}var Go=Tr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof le||K(a))?(this._latlng=xe(a),T(this,p)):(T(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Si(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Si(this._container,1),this.bringToFront(),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Si(this._container,0),this._removeTimeout=setTimeout(o(Pn,void 0,this._container),200)):Pn(this._container),this.options.interactive&&(Gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=xe(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bi(this._container),this},bringToBack:function(){return this._map&&Di(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof $o){p=null;var S=this._source._layers;for(var $ in S)if(S[$]._map){p=S[$];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=ge(this.options.offset),S=this._getAnchor();this._zoomAnimated?Ei(this._container,a.add(S)):p=p.add(a).add(S);var $=this._containerBottom=-p.y,re=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=$+"px",this._container.style.left=re+"px"}},_getAnchor:function(){return[0,0]}});Ir.include({_initOverlay:function(a,p,S,$){var re=p;return re instanceof a||(re=new a($).setContent(p)),S&&re.setLatLng(S),re}}),Tr.include({_initOverlay:function(a,p,S,$){var re=S;return re instanceof a?(T(re,$),re._source=this):(re=p&&!$?p:new a($,this),re.setContent(S)),re}});var ki=Go.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Go.prototype.openOn.call(this,a)},onAdd:function(a){Go.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _s||this._source.on("preclick",za))},onRemove:function(a){Go.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _s||this._source.off("preclick",za))},getEvents:function(){var a=Go.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=wr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=wr("div",a+"-content-wrapper",p);if(this._contentNode=wr("div",a+"-content",S),Cl(p),yu(this._contentNode),Qn(p,"contextmenu",za),this._tipContainer=wr("div",a+"-tip-container",p),this._tip=wr("div",a+"-tip",this._tipContainer),this.options.closeButton){var $=this._closeButton=wr("a",a+"-close-button",p);$.setAttribute("role","button"),$.setAttribute("aria-label","Close popup"),$.href="#close",$.innerHTML='<span aria-hidden="true">&#215;</span>',Qn($,"click",function(re){mr(re),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var S=a.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var $=a.offsetHeight,re=this.options.maxHeight,Ee="leaflet-popup-scrolled";re&&$>re?(p.height=re+"px",Qt(a,Ee)):Gt(a,Ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),S=this._getAnchor();Ei(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(zi(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,$=this._containerWidth,re=new ne(this._containerLeft,-S-this._containerBottom);re._add(Mr(this._container));var Ee=a.layerPointToContainerPoint(re),st=ge(this.options.autoPanPadding),Ct=ge(this.options.autoPanPaddingTopLeft||st),Ft=ge(this.options.autoPanPaddingBottomRight||st),sn=a.getSize(),On=0,Kn=0;Ee.x+$+Ft.x>sn.x&&(On=Ee.x+$-sn.x+Ft.x),Ee.x-On-Ct.x<0&&(On=Ee.x-Ct.x),Ee.y+S+Ft.y>sn.y&&(Kn=Ee.y+S-sn.y+Ft.y),Ee.y-Kn-Ct.y<0&&(Kn=Ee.y-Ct.y),(On||Kn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([On,Kn]))}},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ra=function(a,p){return new ki(a,p)};Ir.mergeOptions({closePopupOnClick:!0}),Ir.include({openPopup:function(a,p,S){return this._initOverlay(ki,a,p,S).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Tr.include({bindPopup:function(a,p){return this._popup=this._initOverlay(ki,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof $o||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Or(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof _s)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var wa=Go.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Go.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Go.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Go.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wr("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,S,$=this._map,re=this._container,Ee=$.latLngToContainerPoint($.getCenter()),st=$.layerPointToContainerPoint(a),Ct=this.options.direction,Ft=re.offsetWidth,sn=re.offsetHeight,On=ge(this.options.offset),Kn=this._getAnchor();Ct==="top"?(p=Ft/2,S=sn):Ct==="bottom"?(p=Ft/2,S=0):Ct==="center"?(p=Ft/2,S=sn/2):Ct==="right"?(p=0,S=sn/2):Ct==="left"?(p=Ft,S=sn/2):st.x<Ee.x?(Ct="right",p=0,S=sn/2):(Ct="left",p=Ft+(On.x+Kn.x)*2,S=sn/2),a=a.subtract(ge(p,S,!0)).add(On).add(Kn),Gt(re,"leaflet-tooltip-right"),Gt(re,"leaflet-tooltip-left"),Gt(re,"leaflet-tooltip-top"),Gt(re,"leaflet-tooltip-bottom"),Qt(re,"leaflet-tooltip-"+Ct),Ei(re,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Si(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ia=function(a,p){return new wa(a,p)};Ir.include({openTooltip:function(a,p,S){return this._initOverlay(wa,a,p,S).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Tr.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wa,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof $o||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(Qn(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Qn(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,S,$;this._tooltip.options.sticky&&a.originalEvent&&(S=this._map.mouseEventToContainerPoint(a.originalEvent),$=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng($)),this._tooltip.setLatLng(p)}});var oa=ea.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),S=this.options;if(S.html instanceof Element?(gs(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var $=ge(S.bgPos);p.style.backgroundPosition=-$.x+"px "+-$.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function sa(a){return new oa(a)}ea.Default=$a;var Rr=Tr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bn.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){T(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Pn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ne?a:new ne(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,S=-a(-1/0,1/0),$=0,re=p.length,Ee;$<re;$++)Ee=p[$].style.zIndex,p[$]!==this._container&&Ee&&(S=a(S,+Ee));isFinite(S)&&(this.options.zIndex=S+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!bn.ielt9){Si(this._container,this.options.opacity);var a=+new Date,p=!1,S=!1;for(var $ in this._tiles){var re=this._tiles[$];if(!(!re.current||!re.loaded)){var Ee=Math.min(1,(a-re.loaded)/200);Si(re.el,Ee),Ee<1?p=!0:(re.active?S=!0:this._onOpaqueTile(re),re.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(O(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=wr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===a?(this._levels[S].el.style.zIndex=p-Math.abs(a-S),this._onUpdateLevel(S)):(Pn(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var $=this._levels[a],re=this._map;return $||($=this._levels[a]={},$.el=wr("div","leaflet-tile-container leaflet-zoom-animated",this._container),$.el.style.zIndex=p,$.origin=re.project(re.unproject(re.getPixelOrigin()),a).round(),$.zoom=a,this._setZoomTransform($,re.getCenter(),re.getZoom()),y($.el.offsetWidth),this._onCreateLevel($)),this._level=$,$}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var $=p.coords;this._retainParent($.x,$.y,$.z,$.z-5)||this._retainChildren($.x,$.y,$.z,$.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Pn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,S,$){var re=Math.floor(a/2),Ee=Math.floor(p/2),st=S-1,Ct=new ne(+re,+Ee);Ct.z=+st;var Ft=this._tileCoordsToKey(Ct),sn=this._tiles[Ft];return sn&&sn.active?(sn.retain=!0,!0):(sn&&sn.loaded&&(sn.retain=!0),st>$?this._retainParent(re,Ee,st,$):!1)},_retainChildren:function(a,p,S,$){for(var re=2*a;re<2*a+2;re++)for(var Ee=2*p;Ee<2*p+2;Ee++){var st=new ne(re,Ee);st.z=S+1;var Ct=this._tileCoordsToKey(st),Ft=this._tiles[Ct];if(Ft&&Ft.active){Ft.retain=!0;continue}else Ft&&Ft.loaded&&(Ft.retain=!0);S+1<$&&this._retainChildren(re,Ee,S+1,$)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,S,$){var re=Math.round(p);this.options.maxZoom!==void 0&&re>this.options.maxZoom||this.options.minZoom!==void 0&&re<this.options.minZoom?re=void 0:re=this._clampZoom(re);var Ee=this.options.updateWhenZooming&&re!==this._tileZoom;(!$||Ee)&&(this._tileZoom=re,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),re!==void 0&&this._update(a),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],a,p)},_setZoomTransform:function(a,p,S){var $=this._map.getZoomScale(S,a.zoom),re=a.origin.multiplyBy($).subtract(this._map._getNewPixelOrigin(p,S)).round();bn.any3d?Po(a.el,re,$):Ei(a.el,re)},_resetGrid:function(){var a=this._map,p=a.options.crs,S=this._tileSize=this.getTileSize(),$=this._tileZoom,re=this._map.getPixelWorldBounds(this._tileZoom);re&&(this._globalTileRange=this._pxBoundsToTileRange(re)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],$).x/S.x),Math.ceil(a.project([0,p.wrapLng[1]],$).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],$).y/S.x),Math.ceil(a.project([p.wrapLat[1],0],$).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),$=p.getZoomScale(S,this._tileZoom),re=p.project(a,this._tileZoom).floor(),Ee=p.getSize().divideBy($*2);return new Ve(re.subtract(Ee),re.add(Ee))},_update:function(a){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var $=this._getTiledPixelBounds(a),re=this._pxBoundsToTileRange($),Ee=re.getCenter(),st=[],Ct=this.options.keepBuffer,Ft=new Ve(re.getBottomLeft().subtract([Ct,-Ct]),re.getTopRight().add([Ct,-Ct]));if(!(isFinite(re.min.x)&&isFinite(re.min.y)&&isFinite(re.max.x)&&isFinite(re.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var sn in this._tiles){var On=this._tiles[sn].coords;(On.z!==this._tileZoom||!Ft.contains(new ne(On.x,On.y)))&&(this._tiles[sn].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(a,S);return}for(var Kn=re.min.y;Kn<=re.max.y;Kn++)for(var Pr=re.min.x;Pr<=re.max.x;Pr++){var so=new ne(Pr,Kn);if(so.z=this._tileZoom,!!this._isValidTile(so)){var $i=this._tiles[this._tileCoordsToKey(so)];$i?$i.current=!0:st.push(so)}}if(st.sort(function(Ti,os){return Ti.distanceTo(Ee)-os.distanceTo(Ee)}),st.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var bo=document.createDocumentFragment();for(Pr=0;Pr<st.length;Pr++)this._addTile(st[Pr],bo);this._level.el.appendChild(bo)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(a.x<S.min.x||a.x>S.max.x)||!p.wrapLat&&(a.y<S.min.y||a.y>S.max.y))return!1}if(!this.options.bounds)return!0;var $=this._tileCoordsToBounds(a);return ce(this.options.bounds).overlaps($)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,S=this.getTileSize(),$=a.scaleBy(S),re=$.add(S),Ee=p.unproject($,a.z),st=p.unproject(re,a.z);return[Ee,st]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),S=new te(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),S=new ne(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(a){var p=this._tiles[a];p&&(Pn(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Qt(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=y,a.onmousemove=y,bn.ielt9&&this.options.opacity<1&&Si(a,this.options.opacity)},_addTile:function(a,p){var S=this._getTilePos(a),$=this._tileCoordsToKey(a),re=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(re),this.createTile.length<2&&z(o(this._tileReady,this,a,null,re)),Ei(re,S),this._tiles[$]={el:re,coords:a,current:!0},p.appendChild(re),this.fire("tileloadstart",{tile:re,coords:a})},_tileReady:function(a,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:a});var $=this._tileCoordsToKey(a);S=this._tiles[$],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Si(S.el,0),O(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(Qt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bn.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new ne(this._wrapX?g(a.x,this._wrapX):a.x,this._wrapY?g(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new Ve(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function $s(a){return new Rr(a)}var vo=Rr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=T(this,p),p.detectRetina&&bn.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var S=document.createElement("img");return Qn(S,"load",o(this._tileOnLoad,this,p,S)),Qn(S,"error",o(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(a),S},getTileUrl:function(a){var p={r:bn.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=S),p["-y"]=S}return U(this._url,i(p,this.options))},_tileOnLoad:function(a,p){bn.ielt9?setTimeout(o(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,S){var $=this.options.errorTileUrl;$&&p.getAttribute("src")!==$&&(p.src=$),a(S,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,$=this.options.zoomOffset;return S&&(a=p-a),a+$},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=y,p.onerror=y,!p.complete)){p.src=se;var S=this._tiles[a].coords;Pn(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",se),Rr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,S){if(!(!this._map||S&&S.getAttribute("src")===se))return Rr.prototype._tileReady.call(this,a,p,S)}});function si(a,p){return new vo(a,p)}var di=vo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var S=i({},this.defaultWmsParams);for(var $ in p)$ in this.options||(S[$]=p[$]);p=T(this,p);var re=p.detectRetina&&bn.retina?2:1,Ee=this.getTileSize();S.width=Ee.x*re,S.height=Ee.y*re,this.wmsParams=S},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,vo.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),S=this._crs,$=B(S.project(p[0]),S.project(p[1])),re=$.min,Ee=$.max,st=(this._wmsVersion>=1.3&&this._crs===ro?[re.y,re.x,Ee.y,Ee.x]:[re.x,re.y,Ee.x,Ee.y]).join(","),Ct=vo.prototype.getTileUrl.call(this,a);return Ct+j(this.wmsParams,Ct,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+st},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function Xi(a,p){return new di(a,p)}vo.WMS=di,si.wms=Xi;var xi=Tr.extend({options:{padding:.1},initialize:function(a){T(this,a),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var S=this._map.getZoomScale(p,this._zoom),$=this._map.getSize().multiplyBy(.5+this.options.padding),re=this._map.project(this._center,p),Ee=$.multiplyBy(-S).add(re).subtract(this._map._getNewPixelOrigin(a,p));bn.any3d?Po(this._container,Ee,S):Ei(this._container,Ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new Ve(S,S.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ws=xi.extend({options:{tolerance:0},getEvents:function(){var a=xi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Qn(a,"mousemove",this._onMouseMove,this),Qn(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Qn(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,Pn(this._container),Gr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var a=this._bounds,p=this._container,S=a.getSize(),$=bn.retina?2:1;Ei(p,a.min),p.width=$*S.x,p.height=$*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",bn.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){xi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[h(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,S=p.next,$=p.prev;S?S.prev=$:this._drawLast=$,$?$.next=S:this._drawFirst=S,delete a._order,delete this._layers[h(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),S=[],$,re;for(re=0;re<p.length;re++){if($=Number(p[re]),isNaN($))return;S.push($)}a.options._dashArray=S}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ve,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var $=this._drawFirst;$;$=$.next)a=$.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var S,$,re,Ee,st=a._parts,Ct=st.length,Ft=this._ctx;if(Ct){for(Ft.beginPath(),S=0;S<Ct;S++){for($=0,re=st[S].length;$<re;$++)Ee=st[S][$],Ft[$?"lineTo":"moveTo"](Ee.x,Ee.y);p&&Ft.closePath()}this._fillStroke(Ft,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,S=this._ctx,$=Math.max(Math.round(a._radius),1),re=(Math.max(Math.round(a._radiusY),1)||$)/$;re!==1&&(S.save(),S.scale(1,re)),S.beginPath(),S.arc(p.x,p.y/re,$,0,Math.PI*2,!1),re!==1&&S.restore(),this._fillStroke(S,a)}},_fillStroke:function(a,p){var S=p.options;S.fill&&(a.globalAlpha=S.fillOpacity,a.fillStyle=S.fillColor||S.color,a.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=S.opacity,a.lineWidth=S.weight,a.strokeStyle=S.color,a.lineCap=S.lineCap,a.lineJoin=S.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),S,$,re=this._drawFirst;re;re=re.next)S=re.layer,S.options.interactive&&S._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(S))&&($=S);this._fireEvent($?[$]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(Gt(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var S,$,re=this._drawFirst;re;re=re.next)S=re.layer,S.options.interactive&&S._containsPoint(p)&&($=S);$!==this._hoveredLayer&&(this._handleMouseOut(a),$&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([$],a,"mouseover"),this._hoveredLayer=$)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,S){this._map._fireDOMEvent(p,S||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var S=p.next,$=p.prev;if(S)S.prev=$;else return;$?$.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var S=p.next,$=p.prev;if($)$.next=S;else return;S?S.prev=$:$&&(this._drawLast=$),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function rs(a){return bn.canvas?new ws(a):null}var ks=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bu={_initContainer:function(){this._container=wr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=ks("shape");Qt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=ks("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;Pn(p),a.removeInteractiveTarget(p),delete this._layers[h(a)]},_updateStyle:function(a){var p=a._stroke,S=a._fill,$=a.options,re=a._container;re.stroked=!!$.stroke,re.filled=!!$.fill,$.stroke?(p||(p=a._stroke=ks("stroke")),re.appendChild(p),p.weight=$.weight+"px",p.color=$.color,p.opacity=$.opacity,$.dashArray?p.dashStyle=K($.dashArray)?$.dashArray.join(" "):$.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=$.lineCap.replace("butt","flat"),p.joinstyle=$.lineJoin):p&&(re.removeChild(p),a._stroke=null),$.fill?(S||(S=a._fill=ks("fill")),re.appendChild(S),S.color=$.fillColor||$.color,S.opacity=$.fillOpacity):S&&(re.removeChild(S),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),S=Math.round(a._radius),$=Math.round(a._radiusY||S);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+$+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){bi(a._container)},_bringToBack:function(a){Di(a._container)}},aa=bn.vml?ks:be,oo=xi.extend({_initContainer:function(){this._container=aa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=aa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pn(this._container),Gr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var a=this._bounds,p=a.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),Ei(S,a.min),S.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=aa("path");a.options.className&&Qt(p,a.options.className),a.options.interactive&&Qt(p,"leaflet-interactive"),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Pn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[h(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,S=a.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,de(a._parts,p))},_updateCircle:function(a){var p=a._point,S=Math.max(Math.round(a._radius),1),$=Math.max(Math.round(a._radiusY),1)||S,re="a"+S+","+$+" 0 1,0 ",Ee=a._empty()?"M0 0":"M"+(p.x-S)+","+p.y+re+S*2+",0 "+re+-S*2+",0 ";this._setPath(a,Ee)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){bi(a._path)},_bringToBack:function(a){Di(a._path)}});bn.vml&&oo.include(bu);function wi(a){return bn.svg||bn.vml?new oo(a):null}Ir.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&rs(a)||wi(a)}});var No=co.extend({initialize:function(a,p){co.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ce(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function is(a,p){return new No(a,p)}oo.create=aa,oo.pointsToPath=de,ko.geometryToLayer=To,ko.coordsToLatLng=ba,ko.coordsToLatLngs=Bo,ko.latLngToCoords=go,ko.latLngsToCoords=na,ko.getFeature=bs,ko.asFeature=Oo,Ir.mergeOptions({boxZoom:!0});var cr=ni.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Qn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Gr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ps(),nl(),this._startPoint=this._map.mouseEventToContainerPoint(a),Qn(document,{contextmenu:Or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=wr("div","leaflet-zoom-box",this._container),Qt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new Ve(this._point,this._startPoint),S=p.getSize();Ei(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(Pn(this._box),Gt(this._container,"leaflet-crosshair")),Ci(),ts(),Gr(document,{contextmenu:Or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ir.addInitHook("addHandler","boxZoom",cr),Ir.mergeOptions({doubleClickZoom:!0});var xa=ni.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,S=p.getZoom(),$=p.options.zoomDelta,re=a.originalEvent.shiftKey?S-$:S+$;p.options.doubleClickZoom==="center"?p.setZoom(re):p.setZoomAround(a.containerPoint,re)}});Ir.addInitHook("addHandler","doubleClickZoom",xa),Ir.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var La=ni.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new zs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Qt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Gt(this._map._container,"leaflet-grab"),Gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=ce(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),S=this._initialWorldOffset,$=this._draggable._newPos.x,re=($-p+S)%a+p-S,Ee=($+p+S)%a-p-S,st=Math.abs(re+S)<Math.abs(Ee+S)?re:Ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=st},_onDragEnd:function(a){var p=this._map,S=p.options,$=!S.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),$)p.fire("moveend");else{this._prunePositions(+new Date);var re=this._lastPos.subtract(this._positions[0]),Ee=(this._lastTime-this._times[0])/1e3,st=S.easeLinearity,Ct=re.multiplyBy(st/Ee),Ft=Ct.distanceTo([0,0]),sn=Math.min(S.inertiaMaxSpeed,Ft),On=Ct.multiplyBy(sn/Ft),Kn=sn/(S.inertiaDeceleration*st),Pr=On.multiplyBy(-Kn/2).round();!Pr.x&&!Pr.y?p.fire("moveend"):(Pr=p._limitOffset(Pr,p.options.maxBounds),z(function(){p.panBy(Pr,{duration:Kn,easeLinearity:st,noMoveStart:!0,animate:!0})}))}}});Ir.addInitHook("addHandler","dragging",La),Ir.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vs=ni.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Qn(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Gr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,S=a.scrollTop||p.scrollTop,$=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo($,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},S=this.keyCodes,$,re;for($=0,re=S.left.length;$<re;$++)p[S.left[$]]=[-1*a,0];for($=0,re=S.right.length;$<re;$++)p[S.right[$]]=[a,0];for($=0,re=S.down.length;$<re;$++)p[S.down[$]]=[0,a];for($=0,re=S.up.length;$<re;$++)p[S.up[$]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},S=this.keyCodes,$,re;for($=0,re=S.zoomIn.length;$<re;$++)p[S.zoomIn[$]]=a;for($=0,re=S.zoomOut.length;$<re;$++)p[S.zoomOut[$]]=-a},_addHooks:function(){Qn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Gr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,S=this._map,$;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if($=this._panKeys[p],a.shiftKey&&($=ge($).multiplyBy(3)),S.options.maxBounds&&($=S._limitOffset(ge($),S.options.maxBounds)),S.options.worldCopyJump){var re=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add($)));S.panTo(re)}else S.panBy($)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Or(a)}}});Ir.addInitHook("addHandler","keyboard",Vs),Ir.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qo=ni.extend({addHooks:function(){Qn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Gr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Zl(a),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var $=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),$),Or(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),S=this._map.options.zoomSnap||0;a._stop();var $=this._delta/(this._map.options.wheelPxPerZoomLevel*4),re=4*Math.log(2/(1+Math.exp(-Math.abs($))))/Math.LN2,Ee=S?Math.ceil(re/S)*S:re,st=a._limitZoom(p+(this._delta>0?Ee:-Ee))-p;this._delta=0,this._startTime=null,st&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+st):a.setZoomAround(this._lastMousePos,p+st))}});Ir.addInitHook("addHandler","scrollWheelZoom",qo);var vc=600;Ir.mergeOptions({tapHold:bn.touchNative&&bn.safari&&bn.mobile,tapTolerance:15});var yo=ni.extend({addHooks:function(){Qn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Gr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new ne(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Qn(document,"touchend",mr),Qn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),vc),Qn(document,"touchend touchcancel contextmenu",this._cancel,this),Qn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Gr(document,"touchend",mr),Gr(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Gr(document,"touchend touchcancel contextmenu",this._cancel,this),Gr(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new ne(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var S=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});Ir.addInitHook("addHandler","tapHold",yo),Ir.mergeOptions({touchZoom:bn.touch,bounceAtZoomLimits:!0});var _o=ni.extend({addHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),Qn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Gt(this._map._container,"leaflet-touch-zoom"),Gr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(a.touches[0]),$=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add($)._divideBy(2))),this._startDist=S.distanceTo($),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),Qn(document,"touchmove",this._onTouchMove,this),Qn(document,"touchend touchcancel",this._onTouchEnd,this),mr(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(a.touches[0]),$=p.mouseEventToContainerPoint(a.touches[1]),re=S.distanceTo($)/this._startDist;if(this._zoom=p.getScaleZoom(re,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&re<1||this._zoom>p.getMaxZoom()&&re>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,re===1)return}else{var Ee=S._add($)._divideBy(2)._subtract(this._centerPoint);if(re===1&&Ee.x===0&&Ee.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Ee),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var st=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(st,this,!0),mr(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),Gr(document,"touchmove",this._onTouchMove,this),Gr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ir.addInitHook("addHandler","touchZoom",_o),Ir.BoxZoom=cr,Ir.DoubleClickZoom=xa,Ir.Drag=La,Ir.Keyboard=Vs,Ir.ScrollWheelZoom=qo,Ir.TapHold=yo,Ir.TouchZoom=_o,n.Bounds=Ve,n.Browser=bn,n.CRS=he,n.Canvas=ws,n.Circle=Mo,n.CircleMarker=ns,n.Class=I,n.Control=rr,n.DivIcon=oa,n.DivOverlay=Go,n.DomEvent=Al,n.DomUtil=nr,n.Draggable=zs,n.Evented=G,n.FeatureGroup=$o,n.GeoJSON=ko,n.GridLayer=Rr,n.Handler=ni,n.Icon=ea,n.ImageOverlay=An,n.LatLng=le,n.LatLngBounds=te,n.Layer=Tr,n.LayerGroup=Ao,n.LineUtil=kr,n.Map=Ir,n.Marker=io,n.Mixin=Zu,n.Path=_s,n.Point=ne,n.PolyUtil=ll,n.Polygon=co,n.Polyline=Ho,n.Popup=ki,n.PosAnimation=Kl,n.Projection=ii,n.Rectangle=No,n.Renderer=xi,n.SVG=oo,n.SVGOverlay=oi,n.TileLayer=vo,n.Tooltip=wa,n.Transformation=Me,n.Util=k,n.VideoOverlay=pr,n.bind=o,n.bounds=B,n.canvas=rs,n.circle=Vo,n.circleMarker=cl,n.control=Zi,n.divIcon=sa,n.extend=i,n.featureGroup=Xl,n.geoJSON=Vt,n.geoJson=Pt,n.gridLayer=$s,n.icon=_u,n.imageOverlay=Wn,n.latLng=xe,n.latLngBounds=ce,n.layerGroup=ul,n.map=Wi,n.marker=ta,n.point=ge,n.polygon=ya,n.polyline=Ku,n.popup=ra,n.rectangle=is,n.setOptions=T,n.stamp=h,n.svg=wi,n.svgOverlay=Ol,n.tileLayer=si,n.tooltip=ia,n.transformation=Ye,n.version=r,n.videoOverlay=Mi;var Hs=window.L;n.noConflict=function(){return window.L=Hs,this},window.L=n})})(a1,a1.exports);var Dt=a1.exports;const $n=hy(Dt);var ib={exports:{}};(function(e,t){(function(n,r){r(t)})(Ks,function(n){var r=typeof window<"u"?window:typeof Ks<"u"?Ks:typeof self<"u"?self:{};function i(d,g){return d(g={exports:{}},g.exports),g.exports}var s=i(function(d,g){(function(y){const w={escape:function(W){return W.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:_,mimeType:function(W){return W=_(W).toLowerCase(),function(){var V="application/font-woff",G="image/jpeg";return{woff:V,woff2:V,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:G,jpeg:G,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[W]||""},dataAsUrl:function(W,V){return`data:${V};base64,`+W},isDataUrl:function(W){return W.search(/^(data:)/)!==-1},canvasToBlob:function(W){return W.toBlob?new Promise(function(G){W.toBlob(G)}):(V=W,new Promise(function(G){const ne=Le(V.toDataURL().split(",")[1]);var _e=ne.length;const ge=new Uint8Array(_e);for(let Ve=0;Ve<_e;Ve++)ge[Ve]=ne.charCodeAt(Ve);G(new Blob([ge],{type:"image/png"}))}));var V},resolveUrl:function(W,V){const G=document.implementation.createHTMLDocument(),ne=G.createElement("base"),_e=(G.head.appendChild(ne),G.createElement("a"));return G.body.appendChild(_e),ne.href=V,_e.href=W,_e.href},getAndEncode:function(W){let V=se.impl.urlCache.find(function(G){return G.url===W});return V||(V={url:W,promise:null},se.impl.urlCache.push(V)),V.promise===null&&(se.impl.options.cacheBust&&(W+=(/\?/.test(W)?"&":"?")+new Date().getTime()),V.promise=new Promise(function(G){const ne=se.impl.options.httpTimeout,_e=new XMLHttpRequest;let ge;var Ve;function B(te){console.error(te),G("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)ge?G(ge):B(`cannot fetch resource: ${W}, status: `+_e.status);else{const te=new FileReader;te.onloadend=function(){var ce=te.result.split(/,/)[1];G(ce)},te.readAsDataURL(_e.response)}},_e.ontimeout=function(){ge?G(ge):B(`timeout of ${ne}ms occured while fetching resource: `+W)},_e.responseType="blob",_e.timeout=ne,se.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",W,!0),_e.send(),se.impl.options.imagePlaceholder&&(Ve=se.impl.options.imagePlaceholder.split(/,/))&&Ve[1]&&(ge=Ve[1])})),V.promise},uid:function(){let W=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+W++}}(),delay:function(W){return function(V){return new Promise(function(G){setTimeout(function(){G(V)},W)})}},asArray:function(W){const V=[],G=W.length;for(let ne=0;ne<G;ne++)V.push(W[ne]);return V},escapeXhtml:function(W){return W.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(W){return W!=="data:,"?new Promise(function(V,G){const ne=new Image;se.impl.options.useCredentials&&(ne.crossOrigin="use-credentials"),ne.onload=function(){V(ne)},ne.onerror=G,ne.src=W}):Promise.resolve()},width:function(W){var V=P(W,"border-left-width"),G=P(W,"border-right-width");return W.scrollWidth+V+G},height:function(W){var V=P(W,"border-top-width"),G=P(W,"border-bottom-width");return W.scrollHeight+V+G}};function _(W){return(W=/\.([^\.\/]*?)(\?|$)/g.exec(W))?W[1]:""}function P(W,V){const G=me(W).getPropertyValue(V);return parseFloat(G.replace("px",""))}const T=function(){const W=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,ge,Ve){return V(_e)?Promise.resolve(_e).then(G).then(function(B){let te=Promise.resolve(_e);return B.forEach(function(ce){te=te.then(function(le){return ne(le,ce,ge,Ve)})}),te}):Promise.resolve(_e)},shouldProcess:V,impl:{readUrls:G,inline:ne}};function V(_e){return _e.search(W)!==-1}function G(_e){const ge=[];for(var Ve;(Ve=W.exec(_e))!==null;)ge.push(Ve[1]);return ge.filter(function(B){return!w.isDataUrl(B)})}function ne(_e,ge,Ve,B){return Promise.resolve(ge).then(function(te){return Ve?w.resolveUrl(te,Ve):te}).then(B||w.getAndEncode).then(function(te){return w.dataAsUrl(te,w.mimeType(ge))}).then(function(te){return _e.replace((ce=ge,new RegExp(`(url\\(['"]?)(${w.escape(ce)})(['"]?\\))`,"g")),`$1${te}$3`);var ce})}}(),j={resolveAll:function(){return D().then(function(W){return Promise.all(W.map(function(V){return V.resolve()}))}).then(function(W){return W.join(`
`)})},impl:{readAll:D}};function D(){return Promise.resolve(w.asArray(document.styleSheets)).then(function(V){const G=[];return V.forEach(function(ne){if(Object.getPrototypeOf(ne).hasOwnProperty("cssRules"))try{w.asArray(ne.cssRules||[]).forEach(G.push.bind(G))}catch(_e){console.log("Error while reading CSS rules from "+ne.href,_e.toString())}}),G}).then(function(V){return V.filter(function(G){return G.type===CSSRule.FONT_FACE_RULE}).filter(function(G){return T.shouldProcess(G.style.getPropertyValue("src"))})}).then(function(V){return V.map(W)});function W(V){return{resolve:function(){var G=(V.parentStyleSheet||{}).href;return T.inlineAll(V.cssText,G)},src:function(){return V.style.getPropertyValue("src")}}}}const U={inlineAll:function W(V){return V instanceof Element?function(G){const ne=G.style.getPropertyValue("background");return ne?T.inlineAll(ne).then(function(_e){G.style.setProperty("background",_e,ne)}).then(function(){return G}):Promise.resolve(G)}(V).then(function(){return V instanceof HTMLImageElement?K(V).inline():Promise.all(w.asArray(V.childNodes).map(function(G){return W(G)}))}):Promise.resolve(V)},impl:{newImage:K}};function K(W){return{inline:function(V){return w.isDataUrl(W.src)?Promise.resolve():Promise.resolve(W.src).then(V||w.getAndEncode).then(function(G){return w.dataAsUrl(G,w.mimeType(W.src))}).then(function(G){return new Promise(function(ne){W.onload=ne,W.onerror=ne,W.src=G})})}}}const X={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},se={toSvg:H,toPng:function(W,V){return(V=V||{}).raster=!0,R(W,V).then(function(G){return G.toDataURL()})},toJpeg:function(W,V){return(V=V||{}).raster=!0,R(W,V).then(function(G){return G.toDataURL("image/jpeg",V.quality||1)})},toBlob:function(W,V){return(V=V||{}).raster=!0,R(W,V).then(w.canvasToBlob)},toPixelData:function(W,V){return(V=V||{}).raster=!0,R(W,V).then(function(G){return G.getContext("2d").getImageData(0,0,w.width(W),w.height(W)).data})},toCanvas:function(W,V){return(V=V||{}).raster=!0,R(W,V||{})},impl:{fontFaces:j,images:U,util:w,inliner:T,urlCache:[],options:{}}},me=(d.exports=se,y.getComputedStyle||window.getComputedStyle),Le=y.atob||window.atob;function H(W,V){var G=V=V||{};return G.imagePlaceholder===void 0?se.impl.options.imagePlaceholder=X.imagePlaceholder:se.impl.options.imagePlaceholder=G.imagePlaceholder,G.cacheBust===void 0?se.impl.options.cacheBust=X.cacheBust:se.impl.options.cacheBust=G.cacheBust,G.useCredentials===void 0?se.impl.options.useCredentials=X.useCredentials:se.impl.options.useCredentials=G.useCredentials,Promise.resolve(W).then(function(ne){return function _e(ge,Ve,B,te,ce=null){return B||!Ve||Ve(ge)?Promise.resolve(ge).then(function(le){return le instanceof HTMLCanvasElement?w.makeImage(le.toDataURL()):le.nodeName==="IFRAME"?html2canvas(le.contentDocument.body).then(xe=>xe.toDataURL()).then(w.makeImage):le.cloneNode(!1)}).then(function(le){return function(xe,he){const J=xe.childNodes;return J.length===0?Promise.resolve(he):function(ae,Fe){const Me=me(xe);let Ye=Promise.resolve();return Fe.forEach(function(oe){Ye=Ye.then(function(){return _e(oe,Ve,!1,te,Me)}).then(function(fe){fe&&ae.appendChild(fe)})}),Ye}(he,w.asArray(J)).then(function(){return he})}(ge,le)}).then(function(le){return function(xe,he,J){return he instanceof Element?Promise.resolve().then(function(){(function(ae,Fe){const Me=me(ae);Me.cssText?(Fe.style.cssText=Me.cssText,function(Ye,oe){oe.font=Ye.font,oe.fontFamily=Ye.fontFamily,oe.fontFeatureSettings=Ye.fontFeatureSettings,oe.fontKerning=Ye.fontKerning,oe.fontSize=Ye.fontSize,oe.fontStretch=Ye.fontStretch,oe.fontStyle=Ye.fontStyle,oe.fontVariant=Ye.fontVariant,oe.fontVariantCaps=Ye.fontVariantCaps,oe.fontVariantEastAsian=Ye.fontVariantEastAsian,oe.fontVariantLigatures=Ye.fontVariantLigatures,oe.fontVariantNumeric=Ye.fontVariantNumeric,oe.fontVariationSettings=Ye.fontVariationSettings,oe.fontWeight=Ye.fontWeight}(Me,Fe.style)):(J?function(Ye,oe,fe,be){const de=fe.style,Ue=Ye.style;for(var Xe of oe){var ze=oe.getPropertyValue(Xe),Je=Ue.getPropertyValue(Xe),Qe=(Ue.setProperty(Xe,be?"initial":"unset"),oe.getPropertyValue(Xe));Qe!==ze?de.setProperty(Xe,ze):de.removeProperty(Xe),Ue.setProperty(Xe,Je)}}(ae,Me,Fe,B):function(Ye,oe,fe){const be=function(Ue){if(I[Ue])return I[Ue];k||((k=document.createElement("iframe")).style.visibility="hidden",k.style.position="fixed",document.body.appendChild(k),k.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Xe=document.createElement(Ue),ze=(k.contentWindow.document.body.appendChild(Xe),Xe.textContent=".",k.contentWindow.getComputedStyle(Xe)),Je={};return w.asArray(ze).forEach(function(Qe){Je[Qe]=Qe==="width"||Qe==="height"?"auto":ze.getPropertyValue(Qe)}),k.contentWindow.document.body.removeChild(Xe),I[Ue]=Je}(fe.tagName),de=fe.style;w.asArray(Ye).forEach(function(Ue){var Xe=Ye.getPropertyValue(Ue);(Xe!==be[Ue]||oe&&Xe!==oe.getPropertyValue(Ue))&&de.setProperty(Ue,Xe,Ye.getPropertyPriority(Ue))})}(Me,ce,Fe),B&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ye=>Fe.style.removeProperty(Ye)),["left","right","top","bottom"].forEach(Ye=>{Fe.style.getPropertyValue(Ye)&&Fe.style.setProperty(Ye,"0px")})))})(xe,he)}).then(function(){[":before",":after"].forEach(function(ae){(function(Fe){const Me=me(xe,Fe),Ye=Me.getPropertyValue("content");if(Ye!==""&&Ye!=="none"){const oe=w.uid(),fe=he.getAttribute("class"),be=(fe&&he.setAttribute("class",fe+" "+oe),document.createElement("style"));be.appendChild(function(){const de=`.${oe}:`+Fe,Ue=(Me.cssText?function(){return`${Me.cssText} content: ${Me.getPropertyValue("content")};`}:function(){return w.asArray(Me).map(function(Xe){return Xe+": "+Me.getPropertyValue(Xe)+(Me.getPropertyPriority(Xe)?" !important":"")}).join("; ")+";"})();return document.createTextNode(de+`{${Ue}}`)}()),he.appendChild(be)}})(ae)})}).then(function(){xe instanceof HTMLTextAreaElement&&(he.innerHTML=xe.value),xe instanceof HTMLInputElement&&he.setAttribute("value",xe.value)}).then(function(){he instanceof SVGElement&&(he.setAttribute("xmlns","http://www.w3.org/2000/svg"),he instanceof SVGRectElement&&["width","height"].forEach(function(ae){const Fe=he.getAttribute(ae);Fe&&he.style.setProperty(ae,Fe)}))}).then(function(){return he}):he}(ge,le,te)}):Promise.resolve()}(ne,V.filter,!0,!V.raster)}).then(Z).then(z).then(function(ne){V.bgcolor&&(ne.style.backgroundColor=V.bgcolor),V.width&&(ne.style.width=V.width+"px"),V.height&&(ne.style.height=V.height+"px"),V.style&&Object.keys(V.style).forEach(function(ge){ne.style[ge]=V.style[ge]});let _e=null;return typeof V.onclone=="function"&&(_e=V.onclone(ne)),Promise.resolve(_e).then(function(){return ne})}).then(function(ne){return ne=ne,_e=V.width||w.width(W),ge=V.height||w.height(W),Promise.resolve(ne).then(function(Ve){return Ve.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ve)}).then(w.escapeXhtml).then(function(Ve){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ve}</foreignObject>`}).then(function(Ve){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${ge}">${Ve}</svg>`}).then(function(Ve){return"data:image/svg+xml;charset=utf-8,"+Ve});var _e,ge}).then(function(ne){return se.impl.urlCache=[],ne})}function R(W,V){return H(W,V).then(w.makeImage).then(w.delay(0)).then(function(G){var ne=typeof V.scale!="number"?1:V.scale;const _e=function(Ve,B){const te=document.createElement("canvas");if(te.width=(V.width||w.width(Ve))*B,te.height=(V.height||w.height(Ve))*B,V.bgcolor){const ce=te.getContext("2d");ce.fillStyle=V.bgcolor,ce.fillRect(0,0,te.width,te.height)}return te}(W,ne),ge=_e.getContext("2d");return ge.mozImageSmoothingEnabled=!1,ge.msImageSmoothingEnabled=!1,ge.imageSmoothingEnabled=!1,G&&(ge.scale(ne,ne),ge.drawImage(G,0,0)),k&&(document.body.removeChild(k),k=null,O&&clearTimeout(O),O=setTimeout(()=>{O=null,I={}},2e4)),_e})}function Z(W){return j.resolveAll().then(function(V){const G=document.createElement("style");return W.appendChild(G),G.appendChild(document.createTextNode(V)),W})}function z(W){return U.inlineAll(W).then(function(){return W})}let O=null,k=null,I={}})(r)}),o=i(function(d,g){(function(){function y(j,D,U){var K=new XMLHttpRequest;K.open("GET",j),K.responseType="blob",K.onload=function(){T(K.response,D,U)},K.onerror=function(){console.error("could not download file")},K.send()}function w(j){var D=new XMLHttpRequest;D.open("HEAD",j,!1);try{D.send()}catch{}return 200<=D.status&&299>=D.status}function _(j){try{j.dispatchEvent(new MouseEvent("click"))}catch{var D=document.createEvent("MouseEvents");D.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),j.dispatchEvent(D)}}var P=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,T=P.saveAs||(typeof window!="object"||window!==P?function(){}:"download"in HTMLAnchorElement.prototype?function(j,D,U){var K=P.URL||P.webkitURL,X=document.createElement("a");D=D||j.name||"download",X.download=D,X.rel="noopener",typeof j=="string"?(X.href=j,X.origin===location.origin?_(X):w(X.href)?y(j,D,U):_(X,X.target="_blank")):(X.href=K.createObjectURL(j),setTimeout(function(){K.revokeObjectURL(X.href)},4e4),setTimeout(function(){_(X)},0))}:"msSaveOrOpenBlob"in navigator?function(j,D,U){if(D=D||j.name||"download",typeof j!="string")navigator.msSaveOrOpenBlob(function(X,se){return se===void 0?se={autoBom:!1}:typeof se!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),se={autoBom:!se}),se.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(X.type)?new Blob(["\uFEFF",X],{type:X.type}):X}(j,U),D);else if(w(j))y(j,D,U);else{var K=document.createElement("a");K.href=j,K.target="_blank",setTimeout(function(){_(K)})}}:function(j,D,U,K){if((K=K||open("","_blank"))&&(K.document.title=K.document.body.innerText="downloading..."),typeof j=="string")return y(j,D,U);var X=j.type==="application/octet-stream",se=/constructor/i.test(P.HTMLElement)||P.safari,me=/CriOS\/[\d]+/.test(navigator.userAgent);if((me||X&&se)&&typeof FileReader=="object"){var Le=new FileReader;Le.onloadend=function(){var Z=Le.result;Z=me?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),K?K.location.href=Z:location=Z,K=null},Le.readAsDataURL(j)}else{var H=P.URL||P.webkitURL,R=H.createObjectURL(j);K?K.location=R:location.href=R,K=null,setTimeout(function(){H.revokeObjectURL(R)},4e4)}});P.saveAs=T.saveAs=T,d.exports=T})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var g=d.node,y=d.error;return console.warn("Map node is very big "+g.scrollWidth+"x"+g.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(y)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w={};for(var _ in this.options)y.hasOwnProperty(_)?w[_]=y[_]:w[_]=this.options[_];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(w)}).then(function(P){return d._setElementsVisible(!0),d._toCanvas(P,w)}).then(function(P){return g==="image"?d._canvasToImage(P,w):g==="canvas"?P:d._canvasToBlob(P,w)}).then(function(P){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),P}).catch(function(P){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:P}),Promise.reject(P)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(y){var w=d._map._container.querySelectorAll(y),_=!0,P=!1,T=void 0;try{for(var j,D=w[Symbol.iterator]();!(_=(j=D.next()).done);_=!0)j.value.style.opacity=g===!1?0:1}catch(U){P=!0,T=U}finally{try{!_&&D.return&&D.return()}finally{if(P)throw T}}})},_canvasToImage:function(d,g){var y=g.mimeType,w=d.toDataURL(y);return w.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(w)},_canvasToBlob:function(d,g){var y=g.mimeType;return new Promise(function(w,_){d.toBlob(function(P){w(P)},y)})},_toCanvas:function(d,g){var y=g.captionOffset,w=g.caption,_=g.captionFontSize,P=g.captionFont,T=g.captionColor,j=g.captionBgColor,D=this._node,U=D.screenHeight,K=D.screenWidth,X=document.createElement("canvas");X.width=K,X.height=U;for(var se=X.getContext("2d"),me=se.createImageData(K,U),Le=0;Le<d.length;++Le)me.data[Le]=d[Le];se.putImageData(me,0,0),me=null;var H=document.createElement("canvas"),R=H.getContext("2d"),Z=0,z=0,O=U,k=K;if(this.options.cropImageByInnerWH===!0){for(var I=[],W=0,V=0;V<U;++V){W=0;for(var G=0;G<K;++G)d[4*V*K+4*G+4]===0&&W++;W===K&&I.push(V)}var ne=this._getMinAndMaxOnValuesBreak(I);Z=ne.min;for(var _e=K,ge=ne.max,Ve=[],B=0,te=z;te<_e;++te){B=0;for(var ce=0;ce<U;++ce)d[4*ce*K+4*te+4]===0&&B++;B===U&&Ve.push(te)}var le=this._getMinAndMaxOnValuesBreak(Ve);z=le.min,_e=le.max,(z===0&&_e===0||_e===null)&&(_e=K),(Z===0&&ge===0||ge===null)&&(ge=U),this.options.debugMode===!0&&(console.log("emptyYLine",I),console.log("minMaxY",ne),console.log("emptyXLine",Ve),console.log("minMaxX",le),console.log("debugX",{}),console.log("debugY",{})),Z===0&&ge===U&&z===0&&_e===K||(Z+=this.options.onCropBorderSize,ge-=this.options.onCropBorderSize,z+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),O=ge-Z,k=_e-z,H.width=k,H.height=O}else H.width=k,H.height=O;var xe=null;return w&&(xe=typeof w=="function"?w.call(this):w),xe!==null&&(H.height=H.height+(y+_+y),R.beginPath(),R.rect(0,0,H.width,H.height),R.fillStyle=j,R.fill(),R.save()),R.drawImage(X,z,Z,k,O,0,0,k,O),xe!==null&&(R.font=_+"px "+P,R.fillStyle=T,R.fillText(xe,y,O+y+_)),Promise.resolve(H)},_getMinAndMaxOnValuesBreak:function(d){for(var g=0,y=0,w=!1,_=1;_<d.length;_++){if(d[_]-1!==d[_-1]){y=d[_],w=!0;break}g=d[_]}return w===!1&&d[0]>1?(g=0,y=d[0]):w===!1&&(g=d[d.length-1]||0,y=null),{min:g,max:y}},_getPixelData:function(d){var g=this,y=d.domtoimageOptions,w=y===void 0?{}:y;return this._getPixelDataOfNormalMap(w).catch(function(_){return console.warn("May be map size very big on that zoom level, we have error:",_.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),g._getPixelDataOfBigMap(w)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=this._map.getContainer();return this._node={node:g,screenHeight:g.scrollHeight,screenWidth:g.scrollWidth},s.toPixelData(g,d)},_getPixelDataOfBigMap:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=this._map.getContainer(),w=this._map.getPane("mapPane");w.style.width=2*y.clientWidth+"px",w.style.height=2*y.clientHeight+"px",w.style.overflow="hidden";var _=function(){w.style.width="initial",w.style.height="initial",w.style.overflow="initial"};return this._node={node:y,screenHeight:y.scrollHeight,screenWidth:y.scrollWidth},s.toPixelData(y,g).then(function(P){return _(),P}).catch(function(P){return _(),y.scrollHeight>=4e3||y.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:y,mapPane:w,error:P,domtoimageOptions:g}):Promise.reject(P)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,g=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.appendChild(document.createTextNode(d)),g.appendChild(y)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(g){var y=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;o.saveAs(g,y+".png")}).catch(function(g){d._map.fire("simpleMapScreenshoter.error",{e:g})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(g){var y=setInterval(function(){d._interaction||(g(),clearInterval(y))},100)})}}),h=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);n.default=h,n.SimpleMapScreenshoter=u,Object.defineProperty(n,"__esModule",{value:!0})})})(ib,ib.exports);const bO={class:"h-full flex flex-col bg-white overflow-y-auto"},wO={class:"p-2 border-b border-gray-200"},xO={class:"grid grid-cols-4 gap-1.5"},LO=["onClick","title"],SO=["innerHTML"],EO={key:0,class:"flex-1 overflow-y-auto"},CO={class:"p-3 border-b border-gray-200"},PO={class:"p-3"},AO={class:"grid grid-cols-6 gap-2 mb-4"},MO=["onClick","title"],kO={key:0,class:"space-y-4"},TO={class:"flex items-center gap-4"},BO={class:"flex items-center gap-2"},OO={class:"flex items-center gap-4"},NO=["value"],DO={key:0,class:"flex items-center gap-4"},IO={class:"flex items-center gap-2"},RO={key:1,class:"space-y-4"},FO={class:"flex items-center gap-4"},jO={class:"flex items-center gap-2"},zO={class:"flex items-center gap-4"},UO={class:"flex items-center gap-2"},$O={class:"p-3 border-t border-gray-200 mt-2"},VO={class:"p-3"},HO={key:0},GO={class:"mb-4"},qO={class:"grid grid-cols-1 gap-4"},WO={key:0,class:"space-y-1"},ZO={class:"flex justify-between items-center"},KO={class:"text-sm font-medium text-gray-500"},YO={class:"flex justify-between items-center"},XO={class:"text-sm font-medium text-gray-500"},JO={class:"text-sm font-medium text-gray-500"},QO={class:"flex flex-col space-y-2 w-full"},eN={class:"flex justify-between items-center"},tN={class:"text-sm font-medium text-gray-500 ml-2"},nN={class:"flex justify-between items-center"},rN={class:"text-sm font-medium text-gray-500 ml-2"},iN={class:"flex justify-between items-center"},oN={class:"text-sm font-medium text-gray-500 ml-2"},sN={class:"flex justify-between items-center"},aN={class:"text-sm font-medium text-gray-500 ml-2"},lN={class:"flex justify-between items-center"},uN={class:"text-sm font-medium text-gray-500 ml-2"},cN={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},hN={ref:"elevationCanvas"},fN={key:3,class:"space-y-1"},dN={key:1,class:"text-center text-sm text-gray-500"},pN={key:0,class:"p-3 border-t border-gray-200"},mN={class:"mt-3"},gN={class:"mb-4"},vN={class:"grid grid-cols-2 gap-2"},yN={class:"grid grid-cols-2 gap-2"},_N=Jo({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape"],setup(e,{emit:t}){const n=e,r=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"Note",label:"Note géolocalisée"}],i=O=>{switch(O){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},s=It({style:!0,properties:!0,samplePoints:!0,circleSections:!0}),o=It("#3B82F6"),u=It(2),h=It("solid"),d=It("#3B82F6"),g=It(.2),y=It(!0),w=It(""),_=It({radius:4,color:"#3B82F6",fillOpacity:.6,weight:2}),P=It({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),T=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],j=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],D=hr(()=>n.selectedShape&&n.selectedShape.properties||null),U=O=>{s.value[O]=!s.value[O]},K=O=>{o.value=O,d.value=O,X({strokeColor:O,fillColor:O})},X=O=>{n.selectedShape&&z("style-update",O)},se=()=>{n.selectedShape&&z("properties-update",{name:w.value})},me=()=>{var O;!n.selectedShape||((O=D.value)==null?void 0:O.type)!=="ElevationLine"||z("style-update",{samplePointStyle:_.value})},Le=()=>{var O;!n.selectedShape||((O=D.value)==null?void 0:O.type)!=="ElevationLine"||z("style-update",{minMaxPointStyle:P.value})},H=O=>`${Math.round(O)} m`,R=O=>O>=1e4?`${(O/1e4).toFixed(2)} ha`:`${Math.round(O)} m²`,Z=O=>`${O.toFixed(1)}%`,z=t;return vp(()=>{var O,k;if(n.selectedShape){const I=n.selectedShape.options||{};o.value=I.color||"#3B82F6",u.value=I.weight||3,h.value=I.dashArray?"dashed":"solid",d.value=I.fillColor||"#3B82F6",g.value=I.fillOpacity||.2,y.value=((O=n.selectedShape.properties)==null?void 0:O.type)!=="Line",w.value=((k=n.selectedShape.properties)==null?void 0:k.name)||""}}),(O,k)=>($e(),Ge("div",bO,[k[61]||(k[61]=M("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[M("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),M("div",wO,[M("div",xO,[($e(!0),Ge(In,null,Sr(r.filter(I=>I.type!=="delete"),I=>($e(),Ge("button",{key:I.type,class:Ni(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===I.type}]),onClick:W=>O.$emit("tool-change",e.currentTool===I.type?"":I.type),title:I.label},[M("span",{class:"icon",innerHTML:i(I.type)},null,8,SO)],10,LO))),128))]),e.selectedShape?($e(),Ge("button",{key:0,class:Ni(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:k[0]||(k[0]=I=>O.$emit("delete-shape")),title:"Supprimer la forme"},k[30]||(k[30]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),M("span",{class:"text-sm"},"Supprimer",-1)]),2)):pn("",!0)]),e.selectedShape&&D.value?($e(),Ge("div",EO,[M("div",CO,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[1]||(k[1]=I=>U("style"))},[k[32]||(k[32]=M("span",null,"Style",-1)),($e(),Ge("svg",{class:Ni(["w-4 h-4",{"rotate-180":!s.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[31]||(k[31]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),Hn(M("div",PO,[M("div",AO,[($e(),Ge(In,null,Sr(T,I=>M("button",{key:I,class:"w-8 h-8 rounded-full",style:el({backgroundColor:I}),onClick:W=>K(I),title:I},null,12,MO)),64))]),D.value.type!=="TextRectangle"?($e(),Ge("div",kO,[M("div",TO,[k[33]||(k[33]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",BO,[Hn(M("input",{type:"color","onUpdate:modelValue":k[2]||(k[2]=I=>o.value=I),class:"w-16 h-8 rounded border",onChange:k[3]||(k[3]=I=>X({strokeColor:o.value})),title:"Couleur du contour"},null,544),[[Ur,o.value]]),Hn(M("input",{type:"range","onUpdate:modelValue":k[4]||(k[4]=I=>u.value=I),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:k[5]||(k[5]=I=>X({strokeWidth:u.value})),title:"Épaisseur du contour"},null,544),[[Ur,u.value]])])]),M("div",OO,[k[34]||(k[34]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Hn(M("select",{"onUpdate:modelValue":k[6]||(k[6]=I=>h.value=I),class:"w-full rounded border",onChange:k[7]||(k[7]=I=>X({strokeStyle:h.value}))},[($e(),Ge(In,null,Sr(j,I=>M("option",{key:I.value,value:I.value},Ht(I.label),9,NO)),64))],544),[[Eo,h.value]])]),y.value?($e(),Ge("div",DO,[k[35]||(k[35]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",IO,[Hn(M("input",{type:"color","onUpdate:modelValue":k[8]||(k[8]=I=>d.value=I),class:"w-16 h-8 rounded border",onChange:k[9]||(k[9]=I=>X({fillColor:d.value})),title:"Couleur de remplissage"},null,544),[[Ur,d.value]]),Hn(M("input",{type:"range","onUpdate:modelValue":k[10]||(k[10]=I=>g.value=I),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:k[11]||(k[11]=I=>X({fillOpacity:g.value})),title:"Opacité du remplissage"},null,544),[[Ur,g.value]])])])):pn("",!0)])):pn("",!0),D.value.type==="TextRectangle"?($e(),Ge("div",RO,[M("div",FO,[k[36]||(k[36]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",jO,[Hn(M("input",{type:"color","onUpdate:modelValue":k[12]||(k[12]=I=>o.value=I),class:"w-16 h-8 rounded border",onChange:k[13]||(k[13]=I=>X({strokeColor:o.value})),title:"Couleur du contour"},null,544),[[Ur,o.value]]),Hn(M("input",{type:"range","onUpdate:modelValue":k[14]||(k[14]=I=>u.value=I),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:k[15]||(k[15]=I=>X({strokeWidth:u.value})),title:"Épaisseur du contour"},null,544),[[Ur,u.value]])])]),M("div",zO,[k[37]||(k[37]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",UO,[Hn(M("input",{type:"color","onUpdate:modelValue":k[16]||(k[16]=I=>d.value=I),class:"w-16 h-8 rounded border",onChange:k[17]||(k[17]=I=>X({fillColor:d.value})),title:"Couleur de remplissage"},null,544),[[Ur,d.value]]),Hn(M("input",{type:"range","onUpdate:modelValue":k[18]||(k[18]=I=>g.value=I),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:k[19]||(k[19]=I=>X({fillOpacity:g.value})),title:"Opacité du remplissage"},null,544),[[Ur,g.value]])])])])):pn("",!0)],512),[[Kf,!s.value.style]]),M("div",$O,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[20]||(k[20]=I=>U("properties"))},[k[39]||(k[39]=M("span",null,"Propriétés",-1)),($e(),Ge("svg",{class:Ni(["w-4 h-4",{"rotate-180":!s.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[38]||(k[38]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Hn(M("div",VO,[D.value?($e(),Ge("div",HO,[M("div",GO,[k[40]||(k[40]=M("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Hn(M("input",{type:"text",id:"shapeName","onUpdate:modelValue":k[21]||(k[21]=I=>w.value=I),onChange:se,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ur,w.value]])]),M("div",qO,[D.value.type==="Polygon"?($e(),Ge("div",WO,[M("div",ZO,[k[41]||(k[41]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",KO,Ht(R(D.value.surface||0)),1)]),M("div",YO,[k[42]||(k[42]=M("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),M("span",XO,Ht(H(D.value.perimeter||0)),1)])])):D.value.type==="Line"?($e(),Ge(In,{key:1},[k[43]||(k[43]=M("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),M("span",JO,Ht(H(D.value.length||0)),1)],64)):D.value.type==="ElevationLine"?($e(),Ge(In,{key:2},[M("div",QO,[M("div",eN,[k[44]||(k[44]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),M("span",tN,Ht(H(D.value.length||0)),1)]),M("div",nN,[k[45]||(k[45]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),M("span",rN,Ht(H(D.value.elevationGain||0)),1)]),M("div",iN,[k[46]||(k[46]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),M("span",oN,Ht(H(D.value.elevationLoss||0)),1)]),M("div",sN,[k[47]||(k[47]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),M("span",aN,Ht(Z(D.value.averageSlope||0)),1)]),M("div",lN,[k[48]||(k[48]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),M("span",uN,Ht(Z(D.value.maxSlope||0)),1)])]),M("div",cN,[M("canvas",hN,null,512)],512)],64)):D.value.type==="Note"?($e(),Ge("div",fN,k[49]||(k[49]=[M("div",{class:"flex justify-between items-center"},[M("span",{class:"text-sm font-semibold text-gray-700"},"Type :"),M("span",{class:"text-sm font-medium text-gray-500"},"Note géolocalisée")],-1)]))):pn("",!0)])])):($e(),Ge("div",dN," Aucune propriété disponible "))],512),[[Kf,!s.value.properties]])]),e.selectedShape&&D.value&&D.value.type==="ElevationLine"?($e(),Ge("div",pN,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[22]||(k[22]=I=>U("samplePoints"))},[k[51]||(k[51]=M("span",null,"Points d'échantillonnage",-1)),($e(),Ge("svg",{class:Ni(["w-4 h-4",{"rotate-180":!s.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[50]||(k[50]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Hn(M("div",mN,[M("div",gN,[k[56]||(k[56]=M("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),M("div",vN,[M("div",null,[k[52]||(k[52]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),Hn(M("input",{type:"number","onUpdate:modelValue":k[23]||(k[23]=I=>_.value.radius=I),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[Ur,_.value.radius]])]),M("div",null,[k[53]||(k[53]=M("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Hn(M("input",{type:"color","onUpdate:modelValue":k[24]||(k[24]=I=>_.value.color=I),class:"w-full h-8 px-1 border rounded",onChange:me},null,544),[[Ur,_.value.color]])]),M("div",null,[k[54]||(k[54]=M("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Hn(M("input",{type:"range","onUpdate:modelValue":k[25]||(k[25]=I=>_.value.fillOpacity=I),min:"0",max:"1",step:"0.1",class:"w-full",onChange:me},null,544),[[Ur,_.value.fillOpacity]])]),M("div",null,[k[55]||(k[55]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Hn(M("input",{type:"number","onUpdate:modelValue":k[26]||(k[26]=I=>_.value.weight=I),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[Ur,_.value.weight]])])])]),M("div",null,[k[60]||(k[60]=M("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),M("div",yN,[M("div",null,[k[57]||(k[57]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),Hn(M("input",{type:"number","onUpdate:modelValue":k[27]||(k[27]=I=>P.value.radius=I),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Le},null,544),[[Ur,P.value.radius]])]),M("div",null,[k[58]||(k[58]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Hn(M("input",{type:"number","onUpdate:modelValue":k[28]||(k[28]=I=>P.value.weight=I),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Le},null,544),[[Ur,P.value.weight]])]),M("div",null,[k[59]||(k[59]=M("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Hn(M("input",{type:"range","onUpdate:modelValue":k[29]||(k[29]=I=>P.value.fillOpacity=I),min:"0",max:"1",step:"0.1",class:"w-full",onChange:Le},null,544),[[Ur,P.value.fillOpacity]])])])])],512),[[Kf,!s.value.samplePoints]])])):pn("",!0)])):pn("",!0)]))}}),bN=ng(_N,[["__scopeId","data-v-b1b86bdb"]]),wN={class:"map-toolbar w-full"},xN={class:"hidden md:flex items-center space-x-2"},LN={class:"dropdown"},SN={class:"dropdown-menu"},EN=["onClick"],CN={key:0,class:"border-l pl-2 flex-1"},PN={class:"flex items-center"},AN={class:"plan-info"},MN={class:"plan-name"},kN={key:0,class:"plan-description"},TN={class:"border-l pl-2 ml-auto"},BN={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ON={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},NN={key:"saving"},DN={key:"success",class:"save-success-text"},IN={key:"default"},RN={class:"md:hidden"},FN={class:"flex justify-between items-center"},jN={key:0,class:"truncate mx-2 text-sm font-medium"},zN={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[2000] fixed left-0 right-0 w-full"},UN={class:"flex justify-between items-center mb-3 border-b pb-2"},$N={class:"flex flex-col space-y-4"},VN={key:0,class:"flex flex-col pb-3 border-b"},HN={class:"text-sm font-semibold text-gray-800"},GN={key:0,class:"text-xs text-gray-600 mt-1"},qN={class:"flex flex-col"},WN={class:"grid grid-cols-3 gap-2"},ZN=["onClick"],KN={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},YN={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},XN={key:"saving"},JN={key:"success",class:"save-success-text"},QN={key:"default"},eD=Jo({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:t}){const n=t,r=e,i=It("Hybride"),s=It(!1),o=j=>{const D=j.currentTarget,U=D.nextElementSibling;if(U&&U.classList.contains("dropdown-menu")){const K=D.getBoundingClientRect();U.style.top=`${K.bottom}px`,U.style.left=`${K.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},h=hr(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=j=>{i.value=j,n("change-map-type",j),T()},g=()=>{n("create-new-plan"),T()},y=()=>{n("load-plan"),T()},w=()=>{n("save-plan"),T()},_=()=>{n("adjust-view"),T()},P=()=>{n("generate-summary"),T()},T=()=>{s.value=!1};return(j,D)=>($e(),Ge("div",wN,[M("div",xN,[M("div",LN,[M("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[D[2]||(D[2]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),M("span",null,Ht(u[i.value]),1)],32),M("div",SN,[($e(),Ge(In,null,Sr(u,(U,K)=>M("button",{key:K,class:Ni(["dropdown-item",{active:K===i.value}]),onClick:X=>d(K)},Ht(U),11,EN)),64))])]),j.planName?($e(),Ge("div",CN,[M("div",PN,[M("div",AN,[M("h2",MN,Ht(j.planName),1),j.planDescription?($e(),Ge("p",kN,Ht(j.planDescription),1)):pn("",!0)])])])):pn("",!0),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:g,class:"btn-toolbar",title:"Nouveau plan"},D[3]||(D[3]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),M("button",{onClick:y,class:"btn-toolbar",title:"Charger un plan"},D[4]||(D[4]=[fh('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-a33ebaa5><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-a33ebaa5></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-a33ebaa5></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-a33ebaa5></path></svg><span class="hidden lg:inline ml-1" data-v-a33ebaa5>Charger</span>',2)])),M("button",{onClick:w,class:"btn-toolbar",title:"Enregistrer le plan"},D[5]||(D[5]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:_,class:"btn-toolbar",title:"Ajuster la vue"},D[6]||(D[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),M("button",{onClick:P,class:"btn-toolbar",title:"Générer une synthèse"},D[7]||(D[7]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),M("div",TN,[M("div",{class:Ni(["text-xs hidden lg:flex items-center",{"text-gray-500":!j.saveStatus,"text-primary-600 font-medium":j.saveStatus==="success","text-blue-600 font-medium":j.saveStatus==="saving"}])},[j.saveStatus==="saving"?($e(),Ge("svg",BN,D[8]||(D[8]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):pn("",!0),j.saveStatus==="success"?($e(),Ge("svg",ON,D[9]||(D[9]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):pn("",!0),Kr(Vv,{name:"fade-slide",mode:"out-in"},{default:$l(()=>[j.saveStatus==="saving"?($e(),Ge("span",NN," Sauvegarde en cours... ")):j.saveStatus==="success"?($e(),Ge("span",DN," Sauvegarde réussie ! ")):($e(),Ge("span",IN," Dernière modification : "+Ht(h.value),1))]),_:1})],2)])]),M("div",RN,[M("div",FN,[M("button",{onClick:D[0]||(D[0]=U=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},D[10]||(D[10]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),j.planName?($e(),Ge("div",jN,Ht(j.planName),1)):pn("",!0),M("div",{class:"flex space-x-2"},[M("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},D[11]||(D[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),M("button",{onClick:w,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},D[12]||(D[12]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),M("button",{onClick:_,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},D[13]||(D[13]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?($e(),Ge("div",zN,[M("div",UN,[D[15]||(D[15]=M("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),M("button",{onClick:D[1]||(D[1]=U=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},D[14]||(D[14]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",$N,[j.planName?($e(),Ge("div",VN,[M("h3",HN,Ht(j.planName),1),j.planDescription?($e(),Ge("p",GN,Ht(j.planDescription),1)):pn("",!0)])):pn("",!0),M("div",qN,[D[16]||(D[16]=M("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),M("div",WN,[($e(),Ge(In,null,Sr(u,(U,K)=>M("button",{key:K,class:Ni(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":K===i.value}]),onClick:X=>d(K)},Ht(U),11,ZN)),64))])]),M("div",{class:"flex flex-col"},[D[20]||(D[20]=M("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),M("div",{class:"grid grid-cols-3 gap-2"},[M("button",{onClick:g,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},D[17]||(D[17]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),ui(" Nouveau ")])),M("button",{onClick:y,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},D[18]||(D[18]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),M("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),M("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ui(" Charger ")])),M("button",{onClick:P,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},D[19]||(D[19]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ui(" Synthèse ")]))])]),M("div",{class:Ni(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!j.saveStatus,"text-primary-600 font-medium":j.saveStatus==="success","text-blue-600 font-medium":j.saveStatus==="saving"}])},[j.saveStatus==="saving"?($e(),Ge("svg",KN,D[21]||(D[21]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):pn("",!0),j.saveStatus==="success"?($e(),Ge("svg",YN,D[22]||(D[22]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):pn("",!0),Kr(Vv,{name:"fade-slide",mode:"out-in"},{default:$l(()=>[j.saveStatus==="saving"?($e(),Ge("span",XN," Sauvegarde en cours... ")):j.saveStatus==="success"?($e(),Ge("span",JN," Sauvegarde réussie ! ")):($e(),Ge("span",QN," Dernière modification : "+Ht(h.value),1))]),_:1})],2)])])):pn("",!0)])]))}}),tD=ng(eD,[["__scopeId","data-v-a33ebaa5"]]);var p0,nD=new Uint8Array(16);function rD(){if(!p0&&(p0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!p0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p0(nD)}const iD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function oD(e){return typeof e=="string"&&iD.test(e)}var ha=[];for(var tv=0;tv<256;++tv)ha.push((tv+256).toString(16).substr(1));function sD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ha[e[t+0]]+ha[e[t+1]]+ha[e[t+2]]+ha[e[t+3]]+"-"+ha[e[t+4]]+ha[e[t+5]]+"-"+ha[e[t+6]]+ha[e[t+7]]+"-"+ha[e[t+8]]+ha[e[t+9]]+"-"+ha[e[t+10]]+ha[e[t+11]]+ha[e[t+12]]+ha[e[t+13]]+ha[e[t+14]]+ha[e[t+15]]).toLowerCase();if(!oD(n))throw TypeError("Stringified UUID is invalid");return n}function aD(e,t,n){e=e||{};var r=e.random||(e.rng||rD)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sD(r)}var Lo=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(Lo||{});const Op=Mp("notes",()=>{const e=It([{id:"a-faire",title:"À faire",color:"#F59E0B",order:-1,isDefault:!0},{id:"en-cours",title:"En cours",color:"#3B82F6",order:0,isDefault:!0},{id:"termine",title:"Terminé",color:"#10B981",order:1,isDefault:!0}]),t=It([{id:1,title:"Point d'irrigation principal",description:"Point de départ du système d'irrigation",location:[43.6047,1.4442],columnId:"en-cours",order:0,createdAt:"2023-05-15T10:30:00Z",updatedAt:"2023-05-15T10:30:00Z",accessLevel:"company",style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[{id:1,text:"Vérifier le débit à cet endroit",createdAt:"2023-05-15T11:30:00Z",userId:1,userName:"Jean Dupont",userRole:"ENTREPRISE"},{id:2,text:"Débit vérifié, tout est normal",createdAt:"2023-05-16T09:45:00Z",userId:2,userName:"Marie Martin",userRole:"SALARIE"}],photos:[{id:1,url:"https://thumbs.dreamstime.com/b/gros-plan-de-pont-en-b%C3%A9ton-et-canaux-d-irrigation-avec-le-fond-arbre-l-194103331.jpg",createdAt:"2023-05-15T10:35:00Z",caption:"Vue du point d'irrigation"}]},{id:2,title:"Zone à problème",description:"Fuite détectée dans cette zone",location:[43.6057,1.4452],columnId:"en-cours",order:1,createdAt:"2023-05-16T14:20:00Z",updatedAt:"2023-05-16T14:20:00Z",accessLevel:"employee",style:{color:"#EF4444",weight:2,opacity:1,fillColor:"#EF4444",fillOpacity:.6,radius:8},comments:[],photos:[]},{id:3,title:"Vanne de contrôle",description:"Vanne principale pour le secteur nord",location:[43.6067,1.4462],columnId:"termine",order:0,createdAt:"2023-05-17T09:15:00Z",updatedAt:"2023-05-17T09:15:00Z",accessLevel:"visitor",style:{color:"#10B981",weight:2,opacity:1,fillColor:"#10B981",fillOpacity:.6,radius:8},comments:[],photos:[]}]),n=hr(()=>R=>e.value.find(Z=>Z.id===R)),r=hr(()=>R=>{const Z=e.value.find(z=>z.id===R);return Z?Z.color:"#6B7280"}),i=hr(()=>R=>t.value.filter(Z=>Z.columnId===R).sort((Z,z)=>Z.order-z.order)),s=hr(()=>e.value.find(R=>R.isDefault)||e.value[0]),o=hr(()=>[...e.value].sort((R,Z)=>R.order-Z.order)),u=hr(()=>R=>{const Z=pa();if(!Z.user)return!1;if(Z.isAdmin)return!0;switch(R.accessLevel){case"private":return!0;case"company":return Z.isAdmin||Z.isEntreprise;case"employee":return Z.isAdmin||Z.isEntreprise||Z.isSalarie;case"visitor":return Z.isAdmin||Z.isEntreprise||Z.isSalarie||Z.isVisiteur;default:return!1}}),h=hr(()=>t.value.filter(R=>u.value(R))),d=hr(()=>R=>h.value.filter(Z=>Z.columnId===R).sort((Z,z)=>Z.order-z.order));function g(R,Z="#6B7280"){const z=e.value.reduce((O,k)=>Math.max(O,k.order),-1);e.value.push({id:aD(),title:R,color:Z,order:z+1})}function y(R,Z){const z=e.value.findIndex(O=>O.id===R);z!==-1&&(e.value[z]={...e.value[z],...Z})}function w(R){const Z=e.value.find(O=>O.id===R);if(!Z||Z.isDefault)return;const z=s.value;t.value.forEach(O=>{O.columnId===R&&(O.columnId=z.id)}),e.value=e.value.filter(O=>O.id!==R)}function _(R){R.forEach((Z,z)=>{const O=e.value.find(k=>k.id===Z);O&&(O.order=z)})}function P(R){const Z=t.value.length>0?Math.max(...t.value.map(W=>W.id))+1:1,z=new Date().toISOString(),O=t.value.filter(W=>W.columnId===R.columnId),k=O.length>0?Math.max(...O.map(W=>W.order))+1:0,I=R.accessLevel||"private";return t.value.push({...R,id:Z,order:k,accessLevel:I,createdAt:z,updatedAt:z}),Z}function T(R,Z){const z=t.value.findIndex(O=>O.id===R);if(z!==-1){const O={...t.value[z],...Z,updatedAt:new Date().toISOString()};t.value[z]=O}}function j(R){t.value=t.value.filter(Z=>Z.id!==R)}function D(R,Z){const z=t.value.findIndex(O=>O.id===R);if(z!==-1){const O=t.value[z];if(O.columnId!==Z){const I=t.value.filter(G=>G.columnId===Z),W=I.length>0?Math.max(...I.map(G=>G.order))+1:0,V={...O,columnId:Z,order:W,updatedAt:new Date().toISOString()};t.value[z]=V}else t.value[z]={...t.value[z],updatedAt:new Date().toISOString()}}}function U(R,Z){Z.forEach((z,O)=>{const k=t.value.findIndex(I=>I.id===z&&I.columnId===R);k!==-1&&(t.value[k]={...t.value[k],order:O,updatedAt:new Date().toISOString()})})}function K(R){switch(R){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}function X(R,Z){const z=t.value.findIndex(V=>V.id===R);if(z===-1)return;const O=pa();if(!O.user||!O.isEntreprise&&!O.isAdmin)return;const k=t.value[z];k.comments||(k.comments=[]);const I=k.comments.length>0?Math.max(...k.comments.map(V=>V.id))+1:1,W={id:I,text:Z,createdAt:new Date().toISOString(),userId:O.user.id,userName:O.user.username,userRole:O.user.user_type};return k.comments.push(W),k.updatedAt=new Date().toISOString(),t.value[z]={...k},I}function se(R,Z){const z=t.value.findIndex(k=>k.id===R);if(z===-1||!t.value[z].comments)return;const O=t.value[z];O.comments=O.comments.filter(k=>k.id!==Z),O.updatedAt=new Date().toISOString(),t.value[z]={...O}}function me(R,Z){const z=t.value.findIndex(W=>W.id===R);if(z===-1)return;const O=t.value[z];O.photos||(O.photos=[]);const k=O.photos.length>0?Math.max(...O.photos.map(W=>W.id))+1:1,I={id:k,url:Z.url,caption:Z.caption,createdAt:new Date().toISOString()};return O.photos.push(I),O.updatedAt=new Date().toISOString(),t.value[z]={...O},k}function Le(R,Z){const z=t.value.findIndex(k=>k.id===R);if(z===-1||!t.value[z].photos)return;const O=t.value[z];O.photos=O.photos.filter(k=>k.id!==Z),O.updatedAt=new Date().toISOString(),t.value[z]={...O}}function H(R,Z,z){const O=t.value.findIndex(W=>W.id===R);if(O===-1||!t.value[O].photos)return;const k=t.value[O],I=k.photos.findIndex(W=>W.id===Z);I!==-1&&(k.photos[I].caption=z,k.updatedAt=new Date().toISOString(),t.value[O]={...k})}return{columns:e,notes:t,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:u,getAccessibleNotes:h,getAccessibleNotesByColumn:d,getAccessLevelLabel:K,addColumn:g,updateColumn:y,removeColumn:w,reorderColumns:_,addNote:P,updateNote:T,removeNote:j,moveNote:D,reorderNotes:U,addComment:X,removeComment:se,addPhoto:me,removePhoto:Le,updatePhotoCaption:H}}),lD={class:"comment-thread"},uD={key:0,class:"space-y-3 mb-4"},cD={class:"flex justify-between items-start"},hD={class:"flex items-center"},fD={class:"font-medium text-sm text-gray-900"},dD={class:"flex items-center"},pD={class:"text-xs text-gray-500"},mD=["onClick"],gD={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},vD={key:1,class:"text-center text-sm text-gray-500 italic my-4"},yD={key:2,class:"mt-3"},_D={class:"flex justify-end mt-2"},bD=["disabled"],wD={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},xD=Jo({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments"],setup(e,{emit:t}){const n=e,r=pa(),i=Op(),s=hc(),o=It(""),u=hr(()=>r.isEntreprise||r.isAdmin);function h(P){return r.user&&P.userId===r.user.id||r.isAdmin}function d(){if(o.value.trim())try{i.addComment(n.noteId,o.value.trim()),o.value=""}catch(P){console.error("Erreur lors de l'ajout du commentaire:",P),s.error("Erreur lors de l'ajout du commentaire")}}function g(P){try{i.removeComment(n.noteId,P),s.success("Commentaire supprimé")}catch(T){console.error("Erreur lors de la suppression du commentaire:",T),s.error("Erreur lors de la suppression du commentaire")}}function y(P){const T=new Date(P);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(T)}function w(P){switch(P){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function _(P){switch(P){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return P}}return(P,T)=>($e(),Ge("div",lD,[P.comments&&P.comments.length>0?($e(),Ge("div",uD,[($e(!0),Ge(In,null,Sr(P.comments,j=>($e(),Ge("div",{key:j.id,class:"bg-gray-50 rounded-lg p-3"},[M("div",cD,[M("div",hD,[M("div",fD,Ht(j.userName),1),M("span",{class:Ni(["ml-2 text-xs px-2 py-0.5 rounded-full",w(j.userRole)])},Ht(_(j.userRole)),3)]),M("div",dD,[M("span",pD,Ht(y(j.createdAt)),1),h(j)?($e(),Ge("button",{key:0,onClick:D=>g(j.id),class:"ml-2 text-gray-400 hover:text-red-500"},T[1]||(T[1]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,mD)):pn("",!0)])]),M("p",gD,Ht(j.text),1)]))),128))])):($e(),Ge("div",vD," Aucun commentaire pour le moment ")),u.value?($e(),Ge("div",yD,[Hn(M("textarea",{"onUpdate:modelValue":T[0]||(T[0]=j=>o.value=j),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Ur,o.value]]),M("div",_D,[M("button",{onClick:d,disabled:!o.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,bD)])])):($e(),Ge("div",wD," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),LD={class:"photo-gallery"},SD={key:0,class:"grid grid-cols-2 gap-2 mb-4"},ED=["src","alt","onClick"],CD={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},PD={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},AD=["onClick"],MD=["onClick"],kD={key:0,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg"},TD={key:1,class:"text-center text-sm text-gray-500 italic my-4"},BD={class:"flex space-x-2 mt-3"},OD={for:"photo-upload",class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},ND={key:2,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},DD={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},ID=["src","alt"],RD={key:1,class:"p-3 bg-white"},FD={class:"text-sm text-gray-700"},jD={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},zD={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},UD={class:"p-4"},$D={class:"p-4 bg-gray-50 flex justify-end space-x-3"},VD={key:4,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},HD={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},GD={class:"p-4 border-b flex justify-between items-center"},qD={class:"relative"},WD=["src"],ZD={class:"p-4 bg-gray-50 flex justify-center"},KD={key:1,class:"flex space-x-3"},YD=Jo({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos"],setup(e,{emit:t}){const n=e,r=Op(),i=hc(),s=It(null),o=It(null);let u=null;const h=It(!1),d=It(!1),g=It(!1),y=It(null),w=It(null),_=It(""),P=It(null);function T(Z){y.value=Z,h.value=!0}function j(Z){w.value=Z,_.value=Z.caption||"",d.value=!0}function D(){if(w.value)try{r.updatePhotoCaption(n.noteId,w.value.id,_.value),d.value=!1,i.success("Légende mise à jour")}catch(Z){console.error("Erreur lors de la mise à jour de la légende:",Z),i.error("Erreur lors de la mise à jour de la légende")}}function U(Z){if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{r.removePhoto(n.noteId,Z),i.success("Photo supprimée")}catch(z){console.error("Erreur lors de la suppression de la photo:",z),i.error("Erreur lors de la suppression de la photo")}}async function K(Z){const z=Z.target;if(!z.files||z.files.length===0)return;const O=z.files[0];if(!O.type.startsWith("image/")){i.error("Le fichier doit être une image");return}if(O.size>5*1024*1024){i.error("L'image est trop volumineuse (max 5MB)");return}try{const k=await X(O);r.addPhoto(n.noteId,{url:k}),z.value="",i.success("Photo ajoutée")}catch(k){console.error("Erreur lors de l'ajout de la photo:",k),i.error("Erreur lors de l'ajout de la photo")}}function X(Z){return new Promise((z,O)=>{const k=new FileReader;k.onload=()=>z(k.result),k.onerror=O,k.readAsDataURL(Z)})}async function se(){g.value=!0,P.value=null;try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),s.value&&(s.value.srcObject=u)}catch(Z){console.error("Erreur lors de l'accès à la caméra:",Z),i.error("Impossible d'accéder à la caméra"),g.value=!1}}function me(){if(!s.value||!o.value)return;const Z=s.value,z=o.value;z.width=Z.videoWidth,z.height=Z.videoHeight;const O=z.getContext("2d");O&&(O.drawImage(Z,0,0,z.width,z.height),P.value=z.toDataURL("image/jpeg"))}function Le(){P.value=null}function H(){if(P.value)try{r.addPhoto(n.noteId,{url:P.value}),g.value=!1,R(),i.success("Photo ajoutée")}catch(Z){console.error("Erreur lors de l'ajout de la photo:",Z),i.error("Erreur lors de l'ajout de la photo")}}function R(){u&&(u.getTracks().forEach(Z=>Z.stop()),u=null)}return Vc(()=>{R()}),(Z,z)=>($e(),Ge("div",LD,[Z.photos&&Z.photos.length>0?($e(),Ge("div",SD,[($e(!0),Ge(In,null,Sr(Z.photos,O=>($e(),Ge("div",{key:O.id,class:"relative group"},[M("img",{src:O.url,alt:O.caption||"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:k=>T(O)},null,8,ED),M("div",CD,[M("div",PD,[M("button",{onClick:zc(k=>j(O),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-primary-600",title:"Modifier la légende"},z[4]||(z[4]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,AD),M("button",{onClick:zc(k=>U(O.id),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},z[5]||(z[5]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,MD)])]),O.caption?($e(),Ge("div",kD,Ht(O.caption),1)):pn("",!0)]))),128))])):($e(),Ge("div",TD," Aucune photo pour le moment ")),M("div",BD,[M("button",{onClick:se,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},z[6]||(z[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),ui(" Prendre une photo ")])),M("label",OD,[z[7]||(z[7]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1)),z[8]||(z[8]=ui(" Téléverser ")),M("input",{id:"photo-upload",type:"file",accept:"image/*",class:"hidden",onChange:K},null,32)])]),h.value?($e(),Ge("div",ND,[M("div",DD,[M("button",{onClick:z[0]||(z[0]=O=>h.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},z[9]||(z[9]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?($e(),Ge("img",{key:0,src:y.value.url,alt:y.value.caption||"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,ID)):pn("",!0),y.value&&y.value.caption?($e(),Ge("div",RD,[M("p",FD,Ht(y.value.caption),1)])):pn("",!0)])])):pn("",!0),d.value?($e(),Ge("div",jD,[M("div",zD,[z[10]||(z[10]=M("div",{class:"p-4 border-b"},[M("h3",{class:"text-lg font-medium text-gray-900"},"Modifier la légende")],-1)),M("div",UD,[Hn(M("textarea",{"onUpdate:modelValue":z[1]||(z[1]=O=>_.value=O),placeholder:"Ajouter une légende...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3"},null,512),[[Ur,_.value]])]),M("div",$D,[M("button",{onClick:z[2]||(z[2]=O=>d.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Annuler "),M("button",{onClick:D,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Enregistrer ")])])])):pn("",!0),g.value?($e(),Ge("div",VD,[M("div",HD,[M("div",GD,[z[12]||(z[12]=M("h3",{class:"text-lg font-medium text-gray-900"},"Prendre une photo",-1)),M("button",{onClick:z[3]||(z[3]=O=>g.value=!1),class:"text-gray-400 hover:text-gray-500"},z[11]||(z[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",qD,[P.value?($e(),Ge("img",{key:1,src:P.value,class:"w-full h-64 object-cover",alt:"Captured"},null,8,WD)):($e(),Ge("video",{key:0,ref_key:"videoElement",ref:s,autoplay:"",class:"w-full h-64 object-cover"},null,512)),M("canvas",{ref_key:"canvasElement",ref:o,class:"hidden"},null,512)]),M("div",ZD,[P.value?($e(),Ge("div",KD,[M("button",{onClick:Le,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),M("button",{onClick:H,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):($e(),Ge("button",{key:0,onClick:me,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},z[13]||(z[13]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])])):pn("",!0)]))}}),XD={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},JD={class:"flex items-center justify-center min-h-screen w-full"},QD={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},eI={class:"p-4 md:p-6 flex-1 overflow-y-auto"},tI={class:"flex justify-between items-center mb-4 border-b pb-4"},nI={class:"text-xl font-semibold text-gray-900"},rI={class:"mb-4 border-b border-gray-200"},iI={class:"flex space-x-4","aria-label":"Tabs"},oI={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},sI={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},aI={key:0},lI={class:"mb-4"},uI={class:"mb-4"},cI={class:"mb-4"},hI=["value"],fI={class:"mb-4"},dI=["value"],pI={class:"mb-4"},mI={class:"mt-1 flex space-x-2"},gI=["onClick"],vI={key:1,class:"mt-4"},yI={key:2,class:"mt-4"},tx=Jo({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(e,{emit:t}){const n=e,r=t,i=Op(),s=hc(),o=It("info"),u=It({title:"",description:"",columnId:"",accessLevel:Lo.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});ma(()=>{console.log("[NoteEditModal] onMounted - props:",n),n.note?(console.log("[NoteEditModal] Édition d'une note existante:",n.note),u.value=JSON.parse(JSON.stringify(n.note))):n.isNewNote&&n.location?(console.log("[NoteEditModal] Création d'une nouvelle note avec location:",n.location),u.value={title:"Nouvelle note",description:"",location:n.location,columnId:i.getDefaultColumn.id,accessLevel:Lo.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]}):console.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note avec location"),console.log("[NoteEditModal] editingNote.value après initialisation:",u.value)});const h=hr(()=>i.getSortedColumns),d=[{id:Lo.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Lo.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Lo.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Lo.VISITOR,title:"Visiteurs",description:"Visible par tous"}],g=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"];function y(P){u.value.style.color=P,u.value.style.fillColor=P}function w(){r("close")}function _(){if(n.note)i.updateNote(n.note.id,u.value),s.success("Note mise à jour avec succès");else if(n.isNewNote&&n.location){const P=i.addNote({title:u.value.title,description:u.value.description,location:n.location,columnId:u.value.columnId,style:u.value.style,accessLevel:u.value.accessLevel});s.success("Note créée avec succès");const T=i.notes.find(j=>j.id===P);T&&r("save",T)}r("close")}return(P,T)=>{var j,D,U,K,X;return $e(),Ge("div",XD,[M("div",JD,[T[16]||(T[16]=M("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),M("div",QD,[M("form",{onSubmit:zc(_,["prevent"]),class:"h-full md:h-auto flex flex-col"},[M("div",eI,[M("div",tI,[M("h3",nI,Ht((j=P.note)!=null&&j.id?"Modifier la note":"Nouvelle note"),1),M("button",{type:"button",onClick:w,class:"text-gray-400 hover:text-gray-500"},T[7]||(T[7]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",rI,[M("nav",iI,[M("button",{type:"button",onClick:T[0]||(T[0]=se=>o.value="info"),class:Ni(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),M("button",{type:"button",onClick:T[1]||(T[1]=se=>o.value="comments"),class:Ni(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[8]||(T[8]=ui(" Commentaires ")),(U=(D=P.note)==null?void 0:D.comments)!=null&&U.length?($e(),Ge("span",oI,Ht(P.note.comments.length),1)):pn("",!0)],2),M("button",{type:"button",onClick:T[2]||(T[2]=se=>o.value="photos"),class:Ni(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[9]||(T[9]=ui(" Photos ")),(X=(K=P.note)==null?void 0:K.photos)!=null&&X.length?($e(),Ge("span",sI,Ht(P.note.photos.length),1)):pn("",!0)],2)])]),o.value==="info"?($e(),Ge("div",aI,[M("div",lI,[T[10]||(T[10]=M("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),Hn(M("input",{type:"text",id:"title","onUpdate:modelValue":T[3]||(T[3]=se=>u.value.title=se),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ur,u.value.title]])]),M("div",uI,[T[11]||(T[11]=M("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),Hn(M("textarea",{id:"description","onUpdate:modelValue":T[4]||(T[4]=se=>u.value.description=se),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ur,u.value.description]])]),M("div",cI,[T[12]||(T[12]=M("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"État",-1)),Hn(M("select",{id:"column","onUpdate:modelValue":T[5]||(T[5]=se=>u.value.columnId=se),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(!0),Ge(In,null,Sr(h.value,se=>($e(),Ge("option",{key:se.id,value:se.id},Ht(se.title),9,hI))),128))],512),[[Eo,u.value.columnId]])]),M("div",fI,[T[13]||(T[13]=M("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Hn(M("select",{id:"accessLevel","onUpdate:modelValue":T[6]||(T[6]=se=>u.value.accessLevel=se),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(),Ge(In,null,Sr(d,se=>M("option",{key:se.id,value:se.id},Ht(se.title)+" - "+Ht(se.description),9,dI)),64))],512),[[Eo,u.value.accessLevel]])]),M("div",pI,[T[14]||(T[14]=M("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),M("div",mI,[($e(),Ge(In,null,Sr(g,se=>M("div",{key:se,class:Ni(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":u.value.style.color!==se,"border-black":u.value.style.color===se}]),style:el({backgroundColor:se}),onClick:me=>y(se)},null,14,gI)),64))])])])):o.value==="comments"?($e(),Ge("div",vI,[P.note?($e(),ja(xD,{key:0,noteId:P.note.id,comments:P.note.comments||[]},null,8,["noteId","comments"])):pn("",!0)])):o.value==="photos"?($e(),Ge("div",yI,[P.note?($e(),ja(YD,{key:0,noteId:P.note.id,photos:P.note.photos||[]},null,8,["noteId","photos"])):pn("",!0)])):pn("",!0)]),M("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[T[15]||(T[15]=M("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),M("button",{onClick:w,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var En,Yn;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(l,f)=>()=>(f||l((f={exports:{}}).exports,f),f.exports),u=(l,f,v,x)=>{if(f&&typeof f=="object"||typeof f=="function")for(let E of r(f))!s.call(l,E)&&E!==v&&t(l,E,{get:()=>f[E],enumerable:!(x=n(f,E))||x.enumerable});return l},h=(l,f,v)=>(v=l!=null?e(i(l)):{},u(f||!l||!l.__esModule?t(v,"default",{value:l,enumerable:!0}):v,l)),d=o((l,f)=>{function v(){this.__data__=[],this.size=0}f.exports=v}),g=o((l,f)=>{function v(x,E){return x===E||x!==x&&E!==E}f.exports=v}),y=o((l,f)=>{var v=g();function x(E,F){for(var Y=E.length;Y--;)if(v(E[Y][0],F))return Y;return-1}f.exports=x}),w=o((l,f)=>{var v=y(),x=Array.prototype,E=x.splice;function F(Y){var ee=this.__data__,ue=v(ee,Y);if(ue<0)return!1;var Se=ee.length-1;return ue==Se?ee.pop():E.call(ee,ue,1),--this.size,!0}f.exports=F}),_=o((l,f)=>{var v=y();function x(E){var F=this.__data__,Y=v(F,E);return Y<0?void 0:F[Y][1]}f.exports=x}),P=o((l,f)=>{var v=y();function x(E){return v(this.__data__,E)>-1}f.exports=x}),T=o((l,f)=>{var v=y();function x(E,F){var Y=this.__data__,ee=v(Y,E);return ee<0?(++this.size,Y.push([E,F])):Y[ee][1]=F,this}f.exports=x}),j=o((l,f)=>{var v=d(),x=w(),E=_(),F=P(),Y=T();function ee(ue){var Se=-1,Ke=ue==null?0:ue.length;for(this.clear();++Se<Ke;){var je=ue[Se];this.set(je[0],je[1])}}ee.prototype.clear=v,ee.prototype.delete=x,ee.prototype.get=E,ee.prototype.has=F,ee.prototype.set=Y,f.exports=ee}),D=o((l,f)=>{var v=j();function x(){this.__data__=new v,this.size=0}f.exports=x}),U=o((l,f)=>{function v(x){var E=this.__data__,F=E.delete(x);return this.size=E.size,F}f.exports=v}),K=o((l,f)=>{function v(x){return this.__data__.get(x)}f.exports=v}),X=o((l,f)=>{function v(x){return this.__data__.has(x)}f.exports=v}),se=o((l,f)=>{var v=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks;f.exports=v}),me=o((l,f)=>{var v=se(),x=typeof self=="object"&&self&&self.Object===Object&&self,E=v||x||Function("return this")();f.exports=E}),Le=o((l,f)=>{var v=me(),x=v.Symbol;f.exports=x}),H=o((l,f)=>{var v=Le(),x=Object.prototype,E=x.hasOwnProperty,F=x.toString,Y=v?v.toStringTag:void 0;function ee(ue){var Se=E.call(ue,Y),Ke=ue[Y];try{ue[Y]=void 0;var je=!0}catch{}var gt=F.call(ue);return je&&(Se?ue[Y]=Ke:delete ue[Y]),gt}f.exports=ee}),R=o((l,f)=>{var v=Object.prototype,x=v.toString;function E(F){return x.call(F)}f.exports=E}),Z=o((l,f)=>{var v=Le(),x=H(),E=R(),F="[object Null]",Y="[object Undefined]",ee=v?v.toStringTag:void 0;function ue(Se){return Se==null?Se===void 0?Y:F:ee&&ee in Object(Se)?x(Se):E(Se)}f.exports=ue}),z=o((l,f)=>{function v(x){var E=typeof x;return x!=null&&(E=="object"||E=="function")}f.exports=v}),O=o((l,f)=>{var v=Z(),x=z(),E="[object AsyncFunction]",F="[object Function]",Y="[object GeneratorFunction]",ee="[object Proxy]";function ue(Se){if(!x(Se))return!1;var Ke=v(Se);return Ke==F||Ke==Y||Ke==E||Ke==ee}f.exports=ue}),k=o((l,f)=>{var v=me(),x=v["__core-js_shared__"];f.exports=x}),I=o((l,f)=>{var v=k(),x=function(){var F=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}();function E(F){return!!x&&x in F}f.exports=E}),W=o((l,f)=>{var v=Function.prototype,x=v.toString;function E(F){if(F!=null){try{return x.call(F)}catch{}try{return F+""}catch{}}return""}f.exports=E}),V=o((l,f)=>{var v=O(),x=I(),E=z(),F=W(),Y=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,ue=Function.prototype,Se=Object.prototype,Ke=ue.toString,je=Se.hasOwnProperty,gt=RegExp("^"+Ke.call(je).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Yt){if(!E(Yt)||x(Yt))return!1;var yn=v(Yt)?gt:ee;return yn.test(F(Yt))}f.exports=At}),G=o((l,f)=>{function v(x,E){return x==null?void 0:x[E]}f.exports=v}),ne=o((l,f)=>{var v=V(),x=G();function E(F,Y){var ee=x(F,Y);return v(ee)?ee:void 0}f.exports=E}),_e=o((l,f)=>{var v=ne(),x=me(),E=v(x,"Map");f.exports=E}),ge=o((l,f)=>{var v=ne(),x=v(Object,"create");f.exports=x}),Ve=o((l,f)=>{var v=ge();function x(){this.__data__=v?v(null):{},this.size=0}f.exports=x}),B=o((l,f)=>{function v(x){var E=this.has(x)&&delete this.__data__[x];return this.size-=E?1:0,E}f.exports=v}),te=o((l,f)=>{var v=ge(),x="__lodash_hash_undefined__",E=Object.prototype,F=E.hasOwnProperty;function Y(ee){var ue=this.__data__;if(v){var Se=ue[ee];return Se===x?void 0:Se}return F.call(ue,ee)?ue[ee]:void 0}f.exports=Y}),ce=o((l,f)=>{var v=ge(),x=Object.prototype,E=x.hasOwnProperty;function F(Y){var ee=this.__data__;return v?ee[Y]!==void 0:E.call(ee,Y)}f.exports=F}),le=o((l,f)=>{var v=ge(),x="__lodash_hash_undefined__";function E(F,Y){var ee=this.__data__;return this.size+=this.has(F)?0:1,ee[F]=v&&Y===void 0?x:Y,this}f.exports=E}),xe=o((l,f)=>{var v=Ve(),x=B(),E=te(),F=ce(),Y=le();function ee(ue){var Se=-1,Ke=ue==null?0:ue.length;for(this.clear();++Se<Ke;){var je=ue[Se];this.set(je[0],je[1])}}ee.prototype.clear=v,ee.prototype.delete=x,ee.prototype.get=E,ee.prototype.has=F,ee.prototype.set=Y,f.exports=ee}),he=o((l,f)=>{var v=xe(),x=j(),E=_e();function F(){this.size=0,this.__data__={hash:new v,map:new(E||x),string:new v}}f.exports=F}),J=o((l,f)=>{function v(x){var E=typeof x;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?x!=="__proto__":x===null}f.exports=v}),ae=o((l,f)=>{var v=J();function x(E,F){var Y=E.__data__;return v(F)?Y[typeof F=="string"?"string":"hash"]:Y.map}f.exports=x}),Fe=o((l,f)=>{var v=ae();function x(E){var F=v(this,E).delete(E);return this.size-=F?1:0,F}f.exports=x}),Me=o((l,f)=>{var v=ae();function x(E){return v(this,E).get(E)}f.exports=x}),Ye=o((l,f)=>{var v=ae();function x(E){return v(this,E).has(E)}f.exports=x}),oe=o((l,f)=>{var v=ae();function x(E,F){var Y=v(this,E),ee=Y.size;return Y.set(E,F),this.size+=Y.size==ee?0:1,this}f.exports=x}),fe=o((l,f)=>{var v=he(),x=Fe(),E=Me(),F=Ye(),Y=oe();function ee(ue){var Se=-1,Ke=ue==null?0:ue.length;for(this.clear();++Se<Ke;){var je=ue[Se];this.set(je[0],je[1])}}ee.prototype.clear=v,ee.prototype.delete=x,ee.prototype.get=E,ee.prototype.has=F,ee.prototype.set=Y,f.exports=ee}),be=o((l,f)=>{var v=j(),x=_e(),E=fe(),F=200;function Y(ee,ue){var Se=this.__data__;if(Se instanceof v){var Ke=Se.__data__;if(!x||Ke.length<F-1)return Ke.push([ee,ue]),this.size=++Se.size,this;Se=this.__data__=new E(Ke)}return Se.set(ee,ue),this.size=Se.size,this}f.exports=Y}),de=o((l,f)=>{var v=j(),x=D(),E=U(),F=K(),Y=X(),ee=be();function ue(Se){var Ke=this.__data__=new v(Se);this.size=Ke.size}ue.prototype.clear=x,ue.prototype.delete=E,ue.prototype.get=F,ue.prototype.has=Y,ue.prototype.set=ee,f.exports=ue}),Ue=o((l,f)=>{var v=ne(),x=function(){try{var E=v(Object,"defineProperty");return E({},"",{}),E}catch{}}();f.exports=x}),Xe=o((l,f)=>{var v=Ue();function x(E,F,Y){F=="__proto__"&&v?v(E,F,{configurable:!0,enumerable:!0,value:Y,writable:!0}):E[F]=Y}f.exports=x}),ze=o((l,f)=>{var v=Xe(),x=g();function E(F,Y,ee){(ee!==void 0&&!x(F[Y],ee)||ee===void 0&&!(Y in F))&&v(F,Y,ee)}f.exports=E}),Je=o((l,f)=>{function v(x){return function(E,F,Y){for(var ee=-1,ue=Object(E),Se=Y(E),Ke=Se.length;Ke--;){var je=Se[x?Ke:++ee];if(F(ue[je],je,ue)===!1)break}return E}}f.exports=v}),Qe=o((l,f)=>{var v=Je(),x=v();f.exports=x}),it=o((l,f)=>{var v=me(),x=typeof l=="object"&&l&&!l.nodeType&&l,E=x&&typeof f=="object"&&f&&!f.nodeType&&f,F=E&&E.exports===x,Y=F?v.Buffer:void 0,ee=Y?Y.allocUnsafe:void 0;function ue(Se,Ke){if(Ke)return Se.slice();var je=Se.length,gt=ee?ee(je):new Se.constructor(je);return Se.copy(gt),gt}f.exports=ue}),Mt=o((l,f)=>{var v=me(),x=v.Uint8Array;f.exports=x}),xt=o((l,f)=>{var v=Mt();function x(E){var F=new E.constructor(E.byteLength);return new v(F).set(new v(E)),F}f.exports=x}),Nt=o((l,f)=>{var v=xt();function x(E,F){var Y=F?v(E.buffer):E.buffer;return new E.constructor(Y,E.byteOffset,E.length)}f.exports=x}),Kt=o((l,f)=>{function v(x,E){var F=-1,Y=x.length;for(E||(E=Array(Y));++F<Y;)E[F]=x[F];return E}f.exports=v}),hn=o((l,f)=>{var v=z(),x=Object.create,E=function(){function F(){}return function(Y){if(!v(Y))return{};if(x)return x(Y);F.prototype=Y;var ee=new F;return F.prototype=void 0,ee}}();f.exports=E}),mn=o((l,f)=>{function v(x,E){return function(F){return x(E(F))}}f.exports=v}),et=o((l,f)=>{var v=mn(),x=v(Object.getPrototypeOf,Object);f.exports=x}),ot=o((l,f)=>{var v=Object.prototype;function x(E){var F=E&&E.constructor,Y=typeof F=="function"&&F.prototype||v;return E===Y}f.exports=x}),nt=o((l,f)=>{var v=hn(),x=et(),E=ot();function F(Y){return typeof Y.constructor=="function"&&!E(Y)?v(x(Y)):{}}f.exports=F}),$t=o((l,f)=>{function v(x){return x!=null&&typeof x=="object"}f.exports=v}),en=o((l,f)=>{var v=Z(),x=$t(),E="[object Arguments]";function F(Y){return x(Y)&&v(Y)==E}f.exports=F}),kn=o((l,f)=>{var v=en(),x=$t(),E=Object.prototype,F=E.hasOwnProperty,Y=E.propertyIsEnumerable,ee=v(function(){return arguments}())?v:function(ue){return x(ue)&&F.call(ue,"callee")&&!Y.call(ue,"callee")};f.exports=ee}),Ln=o((l,f)=>{var v=Array.isArray;f.exports=v}),Tn=o((l,f)=>{var v=9007199254740991;function x(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=v}f.exports=x}),or=o((l,f)=>{var v=O(),x=Tn();function E(F){return F!=null&&x(F.length)&&!v(F)}f.exports=E}),wn=o((l,f)=>{var v=or(),x=$t();function E(F){return x(F)&&v(F)}f.exports=E}),Rn=o((l,f)=>{function v(){return!1}f.exports=v}),lt=o((l,f)=>{var v=me(),x=Rn(),E=typeof l=="object"&&l&&!l.nodeType&&l,F=E&&typeof f=="object"&&f&&!f.nodeType&&f,Y=F&&F.exports===E,ee=Y?v.Buffer:void 0,ue=ee?ee.isBuffer:void 0,Se=ue||x;f.exports=Se}),We=o((l,f)=>{var v=Z(),x=et(),E=$t(),F="[object Object]",Y=Function.prototype,ee=Object.prototype,ue=Y.toString,Se=ee.hasOwnProperty,Ke=ue.call(Object);function je(gt){if(!E(gt)||v(gt)!=F)return!1;var At=x(gt);if(At===null)return!0;var Yt=Se.call(At,"constructor")&&At.constructor;return typeof Yt=="function"&&Yt instanceof Yt&&ue.call(Yt)==Ke}f.exports=je}),qt=o((l,f)=>{var v=Z(),x=Tn(),E=$t(),F="[object Arguments]",Y="[object Array]",ee="[object Boolean]",ue="[object Date]",Se="[object Error]",Ke="[object Function]",je="[object Map]",gt="[object Number]",At="[object Object]",Yt="[object RegExp]",yn="[object Set]",xn="[object String]",ar="[object WeakMap]",Ze="[object ArrayBuffer]",tt="[object DataView]",ht="[object Float32Array]",Ot="[object Float64Array]",_t="[object Int8Array]",kt="[object Int16Array]",pe="[object Int32Array]",Pe="[object Uint8Array]",Ne="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Ie="[object Uint32Array]",Re={};Re[ht]=Re[Ot]=Re[_t]=Re[kt]=Re[pe]=Re[Pe]=Re[Ne]=Re[Oe]=Re[Ie]=!0,Re[F]=Re[Y]=Re[Ze]=Re[ee]=Re[tt]=Re[ue]=Re[Se]=Re[Ke]=Re[je]=Re[gt]=Re[At]=Re[Yt]=Re[yn]=Re[xn]=Re[ar]=!1;function at(ut){return E(ut)&&x(ut.length)&&!!Re[v(ut)]}f.exports=at}),_n=o((l,f)=>{function v(x){return function(E){return x(E)}}f.exports=v}),Dn=o((l,f)=>{var v=se(),x=typeof l=="object"&&l&&!l.nodeType&&l,E=x&&typeof f=="object"&&f&&!f.nodeType&&f,F=E&&E.exports===x,Y=F&&v.process,ee=function(){try{var ue=E&&E.require&&E.require("util").types;return ue||Y&&Y.binding&&Y.binding("util")}catch{}}();f.exports=ee}),Cn=o((l,f)=>{var v=qt(),x=_n(),E=Dn(),F=E&&E.isTypedArray,Y=F?x(F):v;f.exports=Y}),Xt=o((l,f)=>{function v(x,E){if(!(E==="constructor"&&typeof x[E]=="function")&&E!="__proto__")return x[E]}f.exports=v}),Gn=o((l,f)=>{var v=Xe(),x=g(),E=Object.prototype,F=E.hasOwnProperty;function Y(ee,ue,Se){var Ke=ee[ue];(!(F.call(ee,ue)&&x(Ke,Se))||Se===void 0&&!(ue in ee))&&v(ee,ue,Se)}f.exports=Y}),Ut=o((l,f)=>{var v=Gn(),x=Xe();function E(F,Y,ee,ue){var Se=!ee;ee||(ee={});for(var Ke=-1,je=Y.length;++Ke<je;){var gt=Y[Ke],At=ue?ue(ee[gt],F[gt],gt,ee,F):void 0;At===void 0&&(At=F[gt]),Se?x(ee,gt,At):v(ee,gt,At)}return ee}f.exports=E}),Jt=o((l,f)=>{function v(x,E){for(var F=-1,Y=Array(x);++F<x;)Y[F]=E(F);return Y}f.exports=v}),vn=o((l,f)=>{var v=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function E(F,Y){var ee=typeof F;return Y=Y??v,!!Y&&(ee=="number"||ee!="symbol"&&x.test(F))&&F>-1&&F%1==0&&F<Y}f.exports=E}),ci=o((l,f)=>{var v=Jt(),x=kn(),E=Ln(),F=lt(),Y=vn(),ee=Cn(),ue=Object.prototype,Se=ue.hasOwnProperty;function Ke(je,gt){var At=E(je),Yt=!At&&x(je),yn=!At&&!Yt&&F(je),xn=!At&&!Yt&&!yn&&ee(je),ar=At||Yt||yn||xn,Ze=ar?v(je.length,String):[],tt=Ze.length;for(var ht in je)(gt||Se.call(je,ht))&&!(ar&&(ht=="length"||yn&&(ht=="offset"||ht=="parent")||xn&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||Y(ht,tt)))&&Ze.push(ht);return Ze}f.exports=Ke}),Sn=o((l,f)=>{function v(x){var E=[];if(x!=null)for(var F in Object(x))E.push(F);return E}f.exports=v}),dr=o((l,f)=>{var v=z(),x=ot(),E=Sn(),F=Object.prototype,Y=F.hasOwnProperty;function ee(ue){if(!v(ue))return E(ue);var Se=x(ue),Ke=[];for(var je in ue)je=="constructor"&&(Se||!Y.call(ue,je))||Ke.push(je);return Ke}f.exports=ee}),lr=o((l,f)=>{var v=ci(),x=dr(),E=or();function F(Y){return E(Y)?v(Y,!0):x(Y)}f.exports=F}),bn=o((l,f)=>{var v=Ut(),x=lr();function E(F){return v(F,x(F))}f.exports=E}),yi=o((l,f)=>{var v=ze(),x=it(),E=Nt(),F=Kt(),Y=nt(),ee=kn(),ue=Ln(),Se=wn(),Ke=lt(),je=O(),gt=z(),At=We(),Yt=Cn(),yn=Xt(),xn=bn();function ar(Ze,tt,ht,Ot,_t,kt,pe){var Pe=yn(Ze,ht),Ne=yn(tt,ht),Oe=pe.get(Ne);if(Oe){v(Ze,ht,Oe);return}var Ie=kt?kt(Pe,Ne,ht+"",Ze,tt,pe):void 0,Re=Ie===void 0;if(Re){var at=ue(Ne),ut=!at&&Ke(Ne),pt=!at&&!ut&&Yt(Ne);Ie=Ne,at||ut||pt?ue(Pe)?Ie=Pe:Se(Pe)?Ie=F(Pe):ut?(Re=!1,Ie=x(Ne,!0)):pt?(Re=!1,Ie=E(Ne,!0)):Ie=[]:At(Ne)||ee(Ne)?(Ie=Pe,ee(Pe)?Ie=xn(Pe):(!gt(Pe)||je(Pe))&&(Ie=Y(Ne))):Re=!1}Re&&(pe.set(Ne,Ie),_t(Ie,Ne,Ot,kt,pe),pe.delete(Ne)),v(Ze,ht,Ie)}f.exports=ar}),Es=o((l,f)=>{var v=de(),x=ze(),E=Qe(),F=yi(),Y=z(),ee=lr(),ue=Xt();function Se(Ke,je,gt,At,Yt){Ke!==je&&E(je,function(yn,xn){if(Yt||(Yt=new v),Y(yn))F(Ke,je,xn,gt,Se,At,Yt);else{var ar=At?At(ue(Ke,xn),yn,xn+"",Ke,je,Yt):void 0;ar===void 0&&(ar=yn),x(Ke,xn,ar)}},ee)}f.exports=Se}),Co=o((l,f)=>{function v(x){return x}f.exports=v}),Fi=o((l,f)=>{function v(x,E,F){switch(F.length){case 0:return x.call(E);case 1:return x.call(E,F[0]);case 2:return x.call(E,F[0],F[1]);case 3:return x.call(E,F[0],F[1],F[2])}return x.apply(E,F)}f.exports=v}),Er=o((l,f)=>{var v=Fi(),x=Math.max;function E(F,Y,ee){return Y=x(Y===void 0?F.length-1:Y,0),function(){for(var ue=arguments,Se=-1,Ke=x(ue.length-Y,0),je=Array(Ke);++Se<Ke;)je[Se]=ue[Y+Se];Se=-1;for(var gt=Array(Y+1);++Se<Y;)gt[Se]=ue[Se];return gt[Y]=ee(je),v(F,this,gt)}}f.exports=E}),_i=o((l,f)=>{function v(x){return function(){return x}}f.exports=v}),sr=o((l,f)=>{var v=_i(),x=Ue(),E=Co(),F=x?function(Y,ee){return x(Y,"toString",{configurable:!0,enumerable:!1,value:v(ee),writable:!0})}:E;f.exports=F}),rn=o((l,f)=>{var v=800,x=16,E=Date.now;function F(Y){var ee=0,ue=0;return function(){var Se=E(),Ke=x-(Se-ue);if(ue=Se,Ke>0){if(++ee>=v)return arguments[0]}else ee=0;return Y.apply(void 0,arguments)}}f.exports=F}),Uo=o((l,f)=>{var v=sr(),x=rn(),E=x(v);f.exports=E}),to=o((l,f)=>{var v=Co(),x=Er(),E=Uo();function F(Y,ee){return E(x(Y,ee,v),Y+"")}f.exports=F}),fo=o((l,f)=>{var v=g(),x=or(),E=vn(),F=z();function Y(ee,ue,Se){if(!F(Se))return!1;var Ke=typeof ue;return(Ke=="number"?x(Se)&&E(ue,Se.length):Ke=="string"&&ue in Se)?v(Se[ue],ee):!1}f.exports=Y}),qi=o((l,f)=>{var v=to(),x=fo();function E(F){return v(function(Y,ee){var ue=-1,Se=ee.length,Ke=Se>1?ee[Se-1]:void 0,je=Se>2?ee[2]:void 0;for(Ke=F.length>3&&typeof Ke=="function"?(Se--,Ke):void 0,je&&x(ee[0],ee[1],je)&&(Ke=Se<3?void 0:Ke,Se=1),Y=Object(Y);++ue<Se;){var gt=ee[ue];gt&&F(Y,gt,ue,Ke)}return Y})}f.exports=E}),ms=o((l,f)=>{var v=Es(),x=qi(),E=x(function(F,Y,ee){v(F,Y,ee)});f.exports=E}),Qo=o((l,f)=>{var v=Z(),x=$t(),E="[object Symbol]";function F(Y){return typeof Y=="symbol"||x(Y)&&v(Y)==E}f.exports=F}),Cr=o((l,f)=>{var v=Ln(),x=Qo(),E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/;function Y(ee,ue){if(v(ee))return!1;var Se=typeof ee;return Se=="number"||Se=="symbol"||Se=="boolean"||ee==null||x(ee)?!0:F.test(ee)||!E.test(ee)||ue!=null&&ee in Object(ue)}f.exports=Y}),Cs=o((l,f)=>{var v=fe(),x="Expected a function";function E(F,Y){if(typeof F!="function"||Y!=null&&typeof Y!="function")throw new TypeError(x);var ee=function(){var ue=arguments,Se=Y?Y.apply(this,ue):ue[0],Ke=ee.cache;if(Ke.has(Se))return Ke.get(Se);var je=F.apply(this,ue);return ee.cache=Ke.set(Se,je)||Ke,je};return ee.cache=new(E.Cache||v),ee}E.Cache=v,f.exports=E}),qu=o((l,f)=>{var v=Cs(),x=500;function E(F){var Y=v(F,function(ue){return ee.size===x&&ee.clear(),ue}),ee=Y.cache;return Y}f.exports=E}),Is=o((l,f)=>{var v=qu(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,F=v(function(Y){var ee=[];return Y.charCodeAt(0)===46&&ee.push(""),Y.replace(x,function(ue,Se,Ke,je){ee.push(Ke?je.replace(E,"$1"):Se||ue)}),ee});f.exports=F}),ei=o((l,f)=>{function v(x,E){for(var F=-1,Y=x==null?0:x.length,ee=Array(Y);++F<Y;)ee[F]=E(x[F],F,x);return ee}f.exports=v}),Un=o((l,f)=>{var v=Le(),x=ei(),E=Ln(),F=Qo(),Y=v?v.prototype:void 0,ee=Y?Y.toString:void 0;function ue(Se){if(typeof Se=="string")return Se;if(E(Se))return x(Se,ue)+"";if(F(Se))return ee?ee.call(Se):"";var Ke=Se+"";return Ke=="0"&&1/Se==-1/0?"-0":Ke}f.exports=ue}),Hi=o((l,f)=>{var v=Un();function x(E){return E==null?"":v(E)}f.exports=x}),hi=o((l,f)=>{var v=Ln(),x=Cr(),E=Is(),F=Hi();function Y(ee,ue){return v(ee)?ee:x(ee,ue)?[ee]:E(F(ee))}f.exports=Y}),ji=o((l,f)=>{var v=Qo();function x(E){if(typeof E=="string"||v(E))return E;var F=E+"";return F=="0"&&1/E==-1/0?"-0":F}f.exports=x}),no=o((l,f)=>{var v=hi(),x=ji();function E(F,Y){Y=v(Y,F);for(var ee=0,ue=Y.length;F!=null&&ee<ue;)F=F[x(Y[ee++])];return ee&&ee==ue?F:void 0}f.exports=E}),zi=o((l,f)=>{var v=no();function x(E,F,Y){var ee=E==null?void 0:v(E,F);return ee===void 0?Y:ee}f.exports=x}),wr=o((l,f)=>{(function(v,x){typeof l=="object"&&typeof f<"u"?f.exports=x():(v=v||self).RBush=x()})(l,function(){function v(Ze,tt,ht,Ot,_t){(function kt(pe,Pe,Ne,Oe,Ie){for(;Oe>Ne;){if(Oe-Ne>600){var Re=Oe-Ne+1,at=Pe-Ne+1,ut=Math.log(Re),pt=.5*Math.exp(2*ut/3),Lt=.5*Math.sqrt(ut*pt*(Re-pt)/Re)*(at-Re/2<0?-1:1),St=Math.max(Ne,Math.floor(Pe-at*pt/Re+Lt)),on=Math.min(Oe,Math.floor(Pe+(Re-at)*pt/Re+Lt));kt(pe,Pe,St,on,Ie)}var jn=pe[Pe],Vn=Ne,Xn=Oe;for(x(pe,Ne,Pe),Ie(pe[Oe],jn)>0&&x(pe,Ne,Oe);Vn<Xn;){for(x(pe,Vn,Xn),Vn++,Xn--;Ie(pe[Vn],jn)<0;)Vn++;for(;Ie(pe[Xn],jn)>0;)Xn--}Ie(pe[Ne],jn)===0?x(pe,Ne,Xn):x(pe,++Xn,Oe),Xn<=Pe&&(Ne=Xn+1),Pe<=Xn&&(Oe=Xn-1)}})(Ze,tt,ht||0,Ot||Ze.length-1,_t||E)}function x(Ze,tt,ht){var Ot=Ze[tt];Ze[tt]=Ze[ht],Ze[ht]=Ot}function E(Ze,tt){return Ze<tt?-1:Ze>tt?1:0}var F=function(Ze){Ze===void 0&&(Ze=9),this._maxEntries=Math.max(4,Ze),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Y(Ze,tt,ht){if(!ht)return tt.indexOf(Ze);for(var Ot=0;Ot<tt.length;Ot++)if(ht(Ze,tt[Ot]))return Ot;return-1}function ee(Ze,tt){ue(Ze,0,Ze.children.length,tt,Ze)}function ue(Ze,tt,ht,Ot,_t){_t||(_t=xn(null)),_t.minX=1/0,_t.minY=1/0,_t.maxX=-1/0,_t.maxY=-1/0;for(var kt=tt;kt<ht;kt++){var pe=Ze.children[kt];Se(_t,Ze.leaf?Ot(pe):pe)}return _t}function Se(Ze,tt){return Ze.minX=Math.min(Ze.minX,tt.minX),Ze.minY=Math.min(Ze.minY,tt.minY),Ze.maxX=Math.max(Ze.maxX,tt.maxX),Ze.maxY=Math.max(Ze.maxY,tt.maxY),Ze}function Ke(Ze,tt){return Ze.minX-tt.minX}function je(Ze,tt){return Ze.minY-tt.minY}function gt(Ze){return(Ze.maxX-Ze.minX)*(Ze.maxY-Ze.minY)}function At(Ze){return Ze.maxX-Ze.minX+(Ze.maxY-Ze.minY)}function Yt(Ze,tt){return Ze.minX<=tt.minX&&Ze.minY<=tt.minY&&tt.maxX<=Ze.maxX&&tt.maxY<=Ze.maxY}function yn(Ze,tt){return tt.minX<=Ze.maxX&&tt.minY<=Ze.maxY&&tt.maxX>=Ze.minX&&tt.maxY>=Ze.minY}function xn(Ze){return{children:Ze,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ar(Ze,tt,ht,Ot,_t){for(var kt=[tt,ht];kt.length;)if(!((ht=kt.pop())-(tt=kt.pop())<=Ot)){var pe=tt+Math.ceil((ht-tt)/Ot/2)*Ot;v(Ze,pe,tt,ht,_t),kt.push(tt,pe,pe,ht)}}return F.prototype.all=function(){return this._all(this.data,[])},F.prototype.search=function(Ze){var tt=this.data,ht=[];if(!yn(Ze,tt))return ht;for(var Ot=this.toBBox,_t=[];tt;){for(var kt=0;kt<tt.children.length;kt++){var pe=tt.children[kt],Pe=tt.leaf?Ot(pe):pe;yn(Ze,Pe)&&(tt.leaf?ht.push(pe):Yt(Ze,Pe)?this._all(pe,ht):_t.push(pe))}tt=_t.pop()}return ht},F.prototype.collides=function(Ze){var tt=this.data;if(!yn(Ze,tt))return!1;for(var ht=[];tt;){for(var Ot=0;Ot<tt.children.length;Ot++){var _t=tt.children[Ot],kt=tt.leaf?this.toBBox(_t):_t;if(yn(Ze,kt)){if(tt.leaf||Yt(Ze,kt))return!0;ht.push(_t)}}tt=ht.pop()}return!1},F.prototype.load=function(Ze){if(!Ze||!Ze.length)return this;if(Ze.length<this._minEntries){for(var tt=0;tt<Ze.length;tt++)this.insert(Ze[tt]);return this}var ht=this._build(Ze.slice(),0,Ze.length-1,0);if(this.data.children.length)if(this.data.height===ht.height)this._splitRoot(this.data,ht);else{if(this.data.height<ht.height){var Ot=this.data;this.data=ht,ht=Ot}this._insert(ht,this.data.height-ht.height-1,!0)}else this.data=ht;return this},F.prototype.insert=function(Ze){return Ze&&this._insert(Ze,this.data.height-1),this},F.prototype.clear=function(){return this.data=xn([]),this},F.prototype.remove=function(Ze,tt){if(!Ze)return this;for(var ht,Ot,_t,kt=this.data,pe=this.toBBox(Ze),Pe=[],Ne=[];kt||Pe.length;){if(kt||(kt=Pe.pop(),Ot=Pe[Pe.length-1],ht=Ne.pop(),_t=!0),kt.leaf){var Oe=Y(Ze,kt.children,tt);if(Oe!==-1)return kt.children.splice(Oe,1),Pe.push(kt),this._condense(Pe),this}_t||kt.leaf||!Yt(kt,pe)?Ot?(ht++,kt=Ot.children[ht],_t=!1):kt=null:(Pe.push(kt),Ne.push(ht),ht=0,Ot=kt,kt=kt.children[0])}return this},F.prototype.toBBox=function(Ze){return Ze},F.prototype.compareMinX=function(Ze,tt){return Ze.minX-tt.minX},F.prototype.compareMinY=function(Ze,tt){return Ze.minY-tt.minY},F.prototype.toJSON=function(){return this.data},F.prototype.fromJSON=function(Ze){return this.data=Ze,this},F.prototype._all=function(Ze,tt){for(var ht=[];Ze;)Ze.leaf?tt.push.apply(tt,Ze.children):ht.push.apply(ht,Ze.children),Ze=ht.pop();return tt},F.prototype._build=function(Ze,tt,ht,Ot){var _t,kt=ht-tt+1,pe=this._maxEntries;if(kt<=pe)return ee(_t=xn(Ze.slice(tt,ht+1)),this.toBBox),_t;Ot||(Ot=Math.ceil(Math.log(kt)/Math.log(pe)),pe=Math.ceil(kt/Math.pow(pe,Ot-1))),(_t=xn([])).leaf=!1,_t.height=Ot;var Pe=Math.ceil(kt/pe),Ne=Pe*Math.ceil(Math.sqrt(pe));ar(Ze,tt,ht,Ne,this.compareMinX);for(var Oe=tt;Oe<=ht;Oe+=Ne){var Ie=Math.min(Oe+Ne-1,ht);ar(Ze,Oe,Ie,Pe,this.compareMinY);for(var Re=Oe;Re<=Ie;Re+=Pe){var at=Math.min(Re+Pe-1,Ie);_t.children.push(this._build(Ze,Re,at,Ot-1))}}return ee(_t,this.toBBox),_t},F.prototype._chooseSubtree=function(Ze,tt,ht,Ot){for(;Ot.push(tt),!tt.leaf&&Ot.length-1!==ht;){for(var _t=1/0,kt=1/0,pe=void 0,Pe=0;Pe<tt.children.length;Pe++){var Ne=tt.children[Pe],Oe=gt(Ne),Ie=(Re=Ze,at=Ne,(Math.max(at.maxX,Re.maxX)-Math.min(at.minX,Re.minX))*(Math.max(at.maxY,Re.maxY)-Math.min(at.minY,Re.minY))-Oe);Ie<kt?(kt=Ie,_t=Oe<_t?Oe:_t,pe=Ne):Ie===kt&&Oe<_t&&(_t=Oe,pe=Ne)}tt=pe||tt.children[0]}var Re,at;return tt},F.prototype._insert=function(Ze,tt,ht){var Ot=ht?Ze:this.toBBox(Ze),_t=[],kt=this._chooseSubtree(Ot,this.data,tt,_t);for(kt.children.push(Ze),Se(kt,Ot);tt>=0&&_t[tt].children.length>this._maxEntries;)this._split(_t,tt),tt--;this._adjustParentBBoxes(Ot,_t,tt)},F.prototype._split=function(Ze,tt){var ht=Ze[tt],Ot=ht.children.length,_t=this._minEntries;this._chooseSplitAxis(ht,_t,Ot);var kt=this._chooseSplitIndex(ht,_t,Ot),pe=xn(ht.children.splice(kt,ht.children.length-kt));pe.height=ht.height,pe.leaf=ht.leaf,ee(ht,this.toBBox),ee(pe,this.toBBox),tt?Ze[tt-1].children.push(pe):this._splitRoot(ht,pe)},F.prototype._splitRoot=function(Ze,tt){this.data=xn([Ze,tt]),this.data.height=Ze.height+1,this.data.leaf=!1,ee(this.data,this.toBBox)},F.prototype._chooseSplitIndex=function(Ze,tt,ht){for(var Ot,_t,kt,pe,Pe,Ne,Oe,Ie=1/0,Re=1/0,at=tt;at<=ht-tt;at++){var ut=ue(Ze,0,at,this.toBBox),pt=ue(Ze,at,ht,this.toBBox),Lt=(_t=ut,kt=pt,pe=void 0,Pe=void 0,Ne=void 0,Oe=void 0,pe=Math.max(_t.minX,kt.minX),Pe=Math.max(_t.minY,kt.minY),Ne=Math.min(_t.maxX,kt.maxX),Oe=Math.min(_t.maxY,kt.maxY),Math.max(0,Ne-pe)*Math.max(0,Oe-Pe)),St=gt(ut)+gt(pt);Lt<Ie?(Ie=Lt,Ot=at,Re=St<Re?St:Re):Lt===Ie&&St<Re&&(Re=St,Ot=at)}return Ot||ht-tt},F.prototype._chooseSplitAxis=function(Ze,tt,ht){var Ot=Ze.leaf?this.compareMinX:Ke,_t=Ze.leaf?this.compareMinY:je;this._allDistMargin(Ze,tt,ht,Ot)<this._allDistMargin(Ze,tt,ht,_t)&&Ze.children.sort(Ot)},F.prototype._allDistMargin=function(Ze,tt,ht,Ot){Ze.children.sort(Ot);for(var _t=this.toBBox,kt=ue(Ze,0,tt,_t),pe=ue(Ze,ht-tt,ht,_t),Pe=At(kt)+At(pe),Ne=tt;Ne<ht-tt;Ne++){var Oe=Ze.children[Ne];Se(kt,Ze.leaf?_t(Oe):Oe),Pe+=At(kt)}for(var Ie=ht-tt-1;Ie>=tt;Ie--){var Re=Ze.children[Ie];Se(pe,Ze.leaf?_t(Re):Re),Pe+=At(pe)}return Pe},F.prototype._adjustParentBBoxes=function(Ze,tt,ht){for(var Ot=ht;Ot>=0;Ot--)Se(tt[Ot],Ze)},F.prototype._condense=function(Ze){for(var tt=Ze.length-1,ht=void 0;tt>=0;tt--)Ze[tt].children.length===0?tt>0?(ht=Ze[tt-1].children).splice(ht.indexOf(Ze[tt]),1):this.clear():ee(Ze[tt],this.toBBox)},F})}),Pn=o(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function f(Oe,Ie,Re){Re===void 0&&(Re={});var at={type:"Feature"};return(Re.id===0||Re.id)&&(at.id=Re.id),Re.bbox&&(at.bbox=Re.bbox),at.properties=Ie||{},at.geometry=Oe,at}l.feature=f;function v(Oe,Ie,Re){switch(Oe){case"Point":return x(Ie).geometry;case"LineString":return ee(Ie).geometry;case"Polygon":return F(Ie).geometry;case"MultiPoint":return je(Ie).geometry;case"MultiLineString":return Ke(Ie).geometry;case"MultiPolygon":return gt(Ie).geometry;default:throw new Error(Oe+" is invalid")}}l.geometry=v;function x(Oe,Ie,Re){if(Re===void 0&&(Re={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kt(Oe[0])||!kt(Oe[1]))throw new Error("coordinates must contain numbers");var at={type:"Point",coordinates:Oe};return f(at,Ie,Re)}l.point=x;function E(Oe,Ie,Re){return Re===void 0&&(Re={}),Se(Oe.map(function(at){return x(at,Ie)}),Re)}l.points=E;function F(Oe,Ie,Re){Re===void 0&&(Re={});for(var at=0,ut=Oe;at<ut.length;at++){var pt=ut[at];if(pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Lt=0;Lt<pt[pt.length-1].length;Lt++)if(pt[pt.length-1][Lt]!==pt[0][Lt])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Oe};return f(St,Ie,Re)}l.polygon=F;function Y(Oe,Ie,Re){return Re===void 0&&(Re={}),Se(Oe.map(function(at){return F(at,Ie)}),Re)}l.polygons=Y;function ee(Oe,Ie,Re){if(Re===void 0&&(Re={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var at={type:"LineString",coordinates:Oe};return f(at,Ie,Re)}l.lineString=ee;function ue(Oe,Ie,Re){return Re===void 0&&(Re={}),Se(Oe.map(function(at){return ee(at,Ie)}),Re)}l.lineStrings=ue;function Se(Oe,Ie){Ie===void 0&&(Ie={});var Re={type:"FeatureCollection"};return Ie.id&&(Re.id=Ie.id),Ie.bbox&&(Re.bbox=Ie.bbox),Re.features=Oe,Re}l.featureCollection=Se;function Ke(Oe,Ie,Re){Re===void 0&&(Re={});var at={type:"MultiLineString",coordinates:Oe};return f(at,Ie,Re)}l.multiLineString=Ke;function je(Oe,Ie,Re){Re===void 0&&(Re={});var at={type:"MultiPoint",coordinates:Oe};return f(at,Ie,Re)}l.multiPoint=je;function gt(Oe,Ie,Re){Re===void 0&&(Re={});var at={type:"MultiPolygon",coordinates:Oe};return f(at,Ie,Re)}l.multiPolygon=gt;function At(Oe,Ie,Re){Re===void 0&&(Re={});var at={type:"GeometryCollection",geometries:Oe};return f(at,Ie,Re)}l.geometryCollection=At;function Yt(Oe,Ie){if(Ie===void 0&&(Ie=0),Ie&&!(Ie>=0))throw new Error("precision must be a positive number");var Re=Math.pow(10,Ie||0);return Math.round(Oe*Re)/Re}l.round=Yt;function yn(Oe,Ie){Ie===void 0&&(Ie="kilometers");var Re=l.factors[Ie];if(!Re)throw new Error(Ie+" units is invalid");return Oe*Re}l.radiansToLength=yn;function xn(Oe,Ie){Ie===void 0&&(Ie="kilometers");var Re=l.factors[Ie];if(!Re)throw new Error(Ie+" units is invalid");return Oe/Re}l.lengthToRadians=xn;function ar(Oe,Ie){return tt(xn(Oe,Ie))}l.lengthToDegrees=ar;function Ze(Oe){var Ie=Oe%360;return Ie<0&&(Ie+=360),Ie}l.bearingToAzimuth=Ze;function tt(Oe){var Ie=Oe%(2*Math.PI);return Ie*180/Math.PI}l.radiansToDegrees=tt;function ht(Oe){var Ie=Oe%360;return Ie*Math.PI/180}l.degreesToRadians=ht;function Ot(Oe,Ie,Re){if(Ie===void 0&&(Ie="kilometers"),Re===void 0&&(Re="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return yn(xn(Oe,Ie),Re)}l.convertLength=Ot;function _t(Oe,Ie,Re){if(Ie===void 0&&(Ie="meters"),Re===void 0&&(Re="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var at=l.areaFactors[Ie];if(!at)throw new Error("invalid original units");var ut=l.areaFactors[Re];if(!ut)throw new Error("invalid final units");return Oe/at*ut}l.convertArea=_t;function kt(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}l.isNumber=kt;function pe(Oe){return!!Oe&&Oe.constructor===Object}l.isObject=pe;function Pe(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(Ie){if(!kt(Ie))throw new Error("bbox must only contain numbers")})}l.validateBBox=Pe;function Ne(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}l.validateId=Ne}),gs=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var f=Pn();function v(tt,ht,Ot){if(tt!==null)for(var _t,kt,pe,Pe,Ne,Oe,Ie,Re=0,at=0,ut,pt=tt.type,Lt=pt==="FeatureCollection",St=pt==="Feature",on=Lt?tt.features.length:1,jn=0;jn<on;jn++){Ie=Lt?tt.features[jn].geometry:St?tt.geometry:tt,ut=Ie?Ie.type==="GeometryCollection":!1,Ne=ut?Ie.geometries.length:1;for(var Vn=0;Vn<Ne;Vn++){var Xn=0,Jr=0;if(Pe=ut?Ie.geometries[Vn]:Ie,Pe!==null){Oe=Pe.coordinates;var pi=Pe.type;switch(Re=Ot&&(pi==="Polygon"||pi==="MultiPolygon")?1:0,pi){case null:break;case"Point":if(ht(Oe,at,jn,Xn,Jr)===!1)return!1;at++,Xn++;break;case"LineString":case"MultiPoint":for(_t=0;_t<Oe.length;_t++){if(ht(Oe[_t],at,jn,Xn,Jr)===!1)return!1;at++,pi==="MultiPoint"&&Xn++}pi==="LineString"&&Xn++;break;case"Polygon":case"MultiLineString":for(_t=0;_t<Oe.length;_t++){for(kt=0;kt<Oe[_t].length-Re;kt++){if(ht(Oe[_t][kt],at,jn,Xn,Jr)===!1)return!1;at++}pi==="MultiLineString"&&Xn++,pi==="Polygon"&&Jr++}pi==="Polygon"&&Xn++;break;case"MultiPolygon":for(_t=0;_t<Oe.length;_t++){for(Jr=0,kt=0;kt<Oe[_t].length;kt++){for(pe=0;pe<Oe[_t][kt].length-Re;pe++){if(ht(Oe[_t][kt][pe],at,jn,Xn,Jr)===!1)return!1;at++}Jr++}Xn++}break;case"GeometryCollection":for(_t=0;_t<Pe.geometries.length;_t++)if(v(Pe.geometries[_t],ht,Ot)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(tt,ht,Ot,_t){var kt=Ot;return v(tt,function(pe,Pe,Ne,Oe,Ie){Pe===0&&Ot===void 0?kt=pe:kt=ht(kt,pe,Pe,Ne,Oe,Ie)},_t),kt}function E(tt,ht){var Ot;switch(tt.type){case"FeatureCollection":for(Ot=0;Ot<tt.features.length&&ht(tt.features[Ot].properties,Ot)!==!1;Ot++);break;case"Feature":ht(tt.properties,0);break}}function F(tt,ht,Ot){var _t=Ot;return E(tt,function(kt,pe){pe===0&&Ot===void 0?_t=kt:_t=ht(_t,kt,pe)}),_t}function Y(tt,ht){if(tt.type==="Feature")ht(tt,0);else if(tt.type==="FeatureCollection")for(var Ot=0;Ot<tt.features.length&&ht(tt.features[Ot],Ot)!==!1;Ot++);}function ee(tt,ht,Ot){var _t=Ot;return Y(tt,function(kt,pe){pe===0&&Ot===void 0?_t=kt:_t=ht(_t,kt,pe)}),_t}function ue(tt){var ht=[];return v(tt,function(Ot){ht.push(Ot)}),ht}function Se(tt,ht){var Ot,_t,kt,pe,Pe,Ne,Oe,Ie,Re,at,ut=0,pt=tt.type==="FeatureCollection",Lt=tt.type==="Feature",St=pt?tt.features.length:1;for(Ot=0;Ot<St;Ot++){for(Ne=pt?tt.features[Ot].geometry:Lt?tt.geometry:tt,Ie=pt?tt.features[Ot].properties:Lt?tt.properties:{},Re=pt?tt.features[Ot].bbox:Lt?tt.bbox:void 0,at=pt?tt.features[Ot].id:Lt?tt.id:void 0,Oe=Ne?Ne.type==="GeometryCollection":!1,Pe=Oe?Ne.geometries.length:1,kt=0;kt<Pe;kt++){if(pe=Oe?Ne.geometries[kt]:Ne,pe===null){if(ht(null,ut,Ie,Re,at)===!1)return!1;continue}switch(pe.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ht(pe,ut,Ie,Re,at)===!1)return!1;break}case"GeometryCollection":{for(_t=0;_t<pe.geometries.length;_t++)if(ht(pe.geometries[_t],ut,Ie,Re,at)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ut++}}function Ke(tt,ht,Ot){var _t=Ot;return Se(tt,function(kt,pe,Pe,Ne,Oe){pe===0&&Ot===void 0?_t=kt:_t=ht(_t,kt,pe,Pe,Ne,Oe)}),_t}function je(tt,ht){Se(tt,function(Ot,_t,kt,pe,Pe){var Ne=Ot===null?null:Ot.type;switch(Ne){case null:case"Point":case"LineString":case"Polygon":return ht(f.feature(Ot,kt,{bbox:pe,id:Pe}),_t,0)===!1?!1:void 0}var Oe;switch(Ne){case"MultiPoint":Oe="Point";break;case"MultiLineString":Oe="LineString";break;case"MultiPolygon":Oe="Polygon";break}for(var Ie=0;Ie<Ot.coordinates.length;Ie++){var Re=Ot.coordinates[Ie],at={type:Oe,coordinates:Re};if(ht(f.feature(at,kt),_t,Ie)===!1)return!1}})}function gt(tt,ht,Ot){var _t=Ot;return je(tt,function(kt,pe,Pe){pe===0&&Pe===0&&Ot===void 0?_t=kt:_t=ht(_t,kt,pe,Pe)}),_t}function At(tt,ht){je(tt,function(Ot,_t,kt){var pe=0;if(Ot.geometry){var Pe=Ot.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var Ne,Oe=0,Ie=0,Re=0;if(v(Ot,function(at,ut,pt,Lt,St){if(Ne===void 0||_t>Oe||Lt>Ie||St>Re){Ne=at,Oe=_t,Ie=Lt,Re=St,pe=0;return}var on=f.lineString([Ne,at],Ot.properties);if(ht(on,_t,kt,St,pe)===!1)return!1;pe++,Ne=at})===!1)return!1}}})}function Yt(tt,ht,Ot){var _t=Ot,kt=!1;return At(tt,function(pe,Pe,Ne,Oe,Ie){kt===!1&&Ot===void 0?_t=pe:_t=ht(_t,pe,Pe,Ne,Oe,Ie),kt=!0}),_t}function yn(tt,ht){if(!tt)throw new Error("geojson is required");je(tt,function(Ot,_t,kt){if(Ot.geometry!==null){var pe=Ot.geometry.type,Pe=Ot.geometry.coordinates;switch(pe){case"LineString":if(ht(Ot,_t,kt,0,0)===!1)return!1;break;case"Polygon":for(var Ne=0;Ne<Pe.length;Ne++)if(ht(f.lineString(Pe[Ne],Ot.properties),_t,kt,Ne)===!1)return!1;break}}})}function xn(tt,ht,Ot){var _t=Ot;return yn(tt,function(kt,pe,Pe,Ne){pe===0&&Ot===void 0?_t=kt:_t=ht(_t,kt,pe,Pe,Ne)}),_t}function ar(tt,ht){if(ht=ht||{},!f.isObject(ht))throw new Error("options is invalid");var Ot=ht.featureIndex||0,_t=ht.multiFeatureIndex||0,kt=ht.geometryIndex||0,pe=ht.segmentIndex||0,Pe=ht.properties,Ne;switch(tt.type){case"FeatureCollection":Ot<0&&(Ot=tt.features.length+Ot),Pe=Pe||tt.features[Ot].properties,Ne=tt.features[Ot].geometry;break;case"Feature":Pe=Pe||tt.properties,Ne=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ne=tt;break;default:throw new Error("geojson is invalid")}if(Ne===null)return null;var Oe=Ne.coordinates;switch(Ne.type){case"Point":case"MultiPoint":return null;case"LineString":return pe<0&&(pe=Oe.length+pe-1),f.lineString([Oe[pe],Oe[pe+1]],Pe,ht);case"Polygon":return kt<0&&(kt=Oe.length+kt),pe<0&&(pe=Oe[kt].length+pe-1),f.lineString([Oe[kt][pe],Oe[kt][pe+1]],Pe,ht);case"MultiLineString":return _t<0&&(_t=Oe.length+_t),pe<0&&(pe=Oe[_t].length+pe-1),f.lineString([Oe[_t][pe],Oe[_t][pe+1]],Pe,ht);case"MultiPolygon":return _t<0&&(_t=Oe.length+_t),kt<0&&(kt=Oe[_t].length+kt),pe<0&&(pe=Oe[_t][kt].length-pe-1),f.lineString([Oe[_t][kt][pe],Oe[_t][kt][pe+1]],Pe,ht)}throw new Error("geojson is invalid")}function Ze(tt,ht){if(ht=ht||{},!f.isObject(ht))throw new Error("options is invalid");var Ot=ht.featureIndex||0,_t=ht.multiFeatureIndex||0,kt=ht.geometryIndex||0,pe=ht.coordIndex||0,Pe=ht.properties,Ne;switch(tt.type){case"FeatureCollection":Ot<0&&(Ot=tt.features.length+Ot),Pe=Pe||tt.features[Ot].properties,Ne=tt.features[Ot].geometry;break;case"Feature":Pe=Pe||tt.properties,Ne=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ne=tt;break;default:throw new Error("geojson is invalid")}if(Ne===null)return null;var Oe=Ne.coordinates;switch(Ne.type){case"Point":return f.point(Oe,Pe,ht);case"MultiPoint":return _t<0&&(_t=Oe.length+_t),f.point(Oe[_t],Pe,ht);case"LineString":return pe<0&&(pe=Oe.length+pe),f.point(Oe[pe],Pe,ht);case"Polygon":return kt<0&&(kt=Oe.length+kt),pe<0&&(pe=Oe[kt].length+pe),f.point(Oe[kt][pe],Pe,ht);case"MultiLineString":return _t<0&&(_t=Oe.length+_t),pe<0&&(pe=Oe[_t].length+pe),f.point(Oe[_t][pe],Pe,ht);case"MultiPolygon":return _t<0&&(_t=Oe.length+_t),kt<0&&(kt=Oe[_t].length+kt),pe<0&&(pe=Oe[_t][kt].length-pe),f.point(Oe[_t][kt][pe],Pe,ht)}throw new Error("geojson is invalid")}l.coordAll=ue,l.coordEach=v,l.coordReduce=x,l.featureEach=Y,l.featureReduce=ee,l.findPoint=Ze,l.findSegment=ar,l.flattenEach=je,l.flattenReduce=gt,l.geomEach=Se,l.geomReduce=Ke,l.lineEach=yn,l.lineReduce=xn,l.propEach=E,l.propReduce=F,l.segmentEach=At,l.segmentReduce=Yt}),bi=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var f=gs();function v(x){var E=[1/0,1/0,-1/0,-1/0];return f.coordEach(x,function(F){E[0]>F[0]&&(E[0]=F[0]),E[1]>F[1]&&(E[1]=F[1]),E[2]<F[0]&&(E[2]=F[0]),E[3]<F[1]&&(E[3]=F[1])}),E}v.default=v,l.default=v}),Di=o((l,f)=>{var v=wr(),x=Pn(),E=gs(),F=bi().default,Y=E.featureEach;E.coordEach,x.polygon;var ee=x.featureCollection;function ue(Se){var Ke=new v(Se);return Ke.insert=function(je){if(je.type!=="Feature")throw new Error("invalid feature");return je.bbox=je.bbox?je.bbox:F(je),v.prototype.insert.call(this,je)},Ke.load=function(je){var gt=[];return Array.isArray(je)?je.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:F(At),gt.push(At)}):Y(je,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:F(At),gt.push(At)}),v.prototype.load.call(this,gt)},Ke.remove=function(je,gt){if(je.type!=="Feature")throw new Error("invalid feature");return je.bbox=je.bbox?je.bbox:F(je),v.prototype.remove.call(this,je,gt)},Ke.clear=function(){return v.prototype.clear.call(this)},Ke.search=function(je){var gt=v.prototype.search.call(this,this.toBBox(je));return ee(gt)},Ke.collides=function(je){return v.prototype.collides.call(this,this.toBBox(je))},Ke.all=function(){var je=v.prototype.all.call(this);return ee(je)},Ke.toJSON=function(){return v.prototype.toJSON.call(this)},Ke.fromJSON=function(je){return v.prototype.fromJSON.call(this,je)},Ke.toBBox=function(je){var gt;if(je.bbox)gt=je.bbox;else if(Array.isArray(je)&&je.length===4)gt=je;else if(Array.isArray(je)&&je.length===6)gt=[je[0],je[1],je[3],je[4]];else if(je.type==="Feature")gt=F(je);else if(je.type==="FeatureCollection")gt=F(je);else throw new Error("invalid geojson");return{minX:gt[0],minY:gt[1],maxX:gt[2],maxY:gt[3]}},Ke}f.exports=ue,f.exports.default=ue});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var f=Object(this),v=f.length>>>0,x=arguments[1],E=0;E<v;E++)if(l.call(x,f[E],E,f))return E;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var f=Object(this),v=f.length>>>0,x=arguments[1],E=0;E<v;E++){var F=f[E];if(l.call(x,F,E,f))return F}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var f=1;f<arguments.length;f++){var v=arguments[f];if(v!=null)for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(l[x]=v[x])}return l}),function(l){l.forEach(function(f){f.hasOwnProperty("remove")||Object.defineProperty(f,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,f){if(this==null)throw new TypeError('"this" is null or not defined');var v=Object(this),x=v.length>>>0;if(x===0)return!1;var E=f|0,F=Math.max(E>=0?E:x-Math.abs(E),0);function Y(ee,ue){return ee===ue||typeof ee=="number"&&typeof ue=="number"&&isNaN(ee)&&isNaN(ue)}for(;F<x;){if(Y(v[F],l))return!0;F++}return!1}});var Hr={version:"2.18.3"},Qt=h(ms()),Gt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ar={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},fi={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Si={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Ys={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Xs={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Po={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Ei={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Mr={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Ps={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ci={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},es={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},po={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},nl={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},ts={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Rs={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},As={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Js={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Ui={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Wl={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},ti={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},nr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Qn={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Fs={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Gr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},vu={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},rl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},il=po,js={en:Gt,de:Ar,it:fi,id:Si,ro:Ys,ru:Xs,es:Po,nl:Ei,fr:Mr,pt:il,pt_br:es,pt_pt:po,zh:Ps,zh_tw:Ci,pl:nl,sv:ts,el:Rs,hu:As,da:Js,no:Ui,fa:Wl,ua:ti,tr:nr,cz:Qn,ja:Fs,fi:Gr,ko:vu,ky:rl},za={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let f={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(v=>{this._isRelevantForEdit(v)&&v.pm.enable(f)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let f in l){let v=l[f];this._isRelevantForEdit(v)&&v.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},yu=za,Cl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(f=>{this._isRelevantForDrag(f)&&f.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(f=>{f.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let f in l){let v=l[f];this._isRelevantForDrag(v)&&v.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},mr=Cl,Or={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let f=l.target;this._isRelevantForRemoval(f)&&!f.pm.dragging()&&(f.removeFrom(this.map.pm._getContainingLayer()),f.remove(),f instanceof L.LayerGroup?(this._fireRemoveLayerGroup(f),this._fireRemoveLayerGroup(this.map,f)):(f.pm._fireRemove(f),f.pm._fireRemove(this.map,f)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let f in l){let v=l[f];this._isRelevantForRemoval(v)&&(v.pm.enabled()&&v.pm.disable(),v.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Ua=Or,Wu={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let f in l){let v=l[f];this._isRelevantForRemoval(v)&&v.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},Pl=Wu,Zl=h(ms()),ol={_fireDrawStart(l="Draw",f={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,f)},_fireDrawEnd(l="Draw",f={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,f)},_fireCreate(l,f="Draw",v={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},f,v)},_fireCenterPlaced(l="Draw",f={}){let v=l==="Draw"?this._layer:void 0,x=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:v,layer:x,latlng:this._layer.getLatLng()},l,f)},_fireCut(l,f,v,x="Draw",E={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:f,originalLayer:v},x,E)},_fireEdit(l=this._layer,f="Edit",v={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},f,v)},_fireEnable(l="Edit",f={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,f)},_fireDisable(l="Edit",f={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,f)},_fireUpdate(l="Edit",f={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,f)},_fireMarkerDragStart(l,f=void 0,v="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:f},v,x)},_fireMarkerDrag(l,f=void 0,v="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:f},v,x)},_fireMarkerDragEnd(l,f=void 0,v=void 0,x="Edit",E={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:f,intersectionReset:v},x,E)},_fireDragStart(l="Edit",f={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,f)},_fireDrag(l,f="Edit",v={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},f,v)},_fireDragEnd(l="Edit",f={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,f)},_fireDragEnable(l="Edit",f={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,f)},_fireDragDisable(l="Edit",f={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,f)},_fireRemove(l,f=l,v="Edit",x={}){this.__fire(l,"pm:remove",{layer:f,shape:this.getShape()},v,x)},_fireVertexAdded(l,f,v,x="Edit",E={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:f,latlng:v,shape:this.getShape()},x,E)},_fireVertexRemoved(l,f,v="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:f,shape:this.getShape()},v,x)},_fireVertexClick(l,f,v="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:f,shape:this.getShape()},v,x)},_fireIntersect(l,f=this._layer,v="Edit",x={}){this.__fire(f,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},v,x)},_fireLayerReset(l,f,v="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:f,shape:this.getShape()},v,x)},_fireChange(l,f="Edit",v={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},f,v)},_fireTextChange(l,f="Edit",v={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},f,v)},_fireTextFocus(l="Edit",f={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,f)},_fireTextBlur(l="Edit",f={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,f)},_fireSnapDrag(l,f,v="Snapping",x={}){this.__fire(l,"pm:snapdrag",f,v,x)},_fireSnap(l,f,v="Snapping",x={}){this.__fire(l,"pm:snap",f,v,x)},_fireUnsnap(l,f,v="Snapping",x={}){this.__fire(l,"pm:unsnap",f,v,x)},_fireRotationEnable(l,f,v="Rotation",x={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,x)},_fireRotationDisable(l,f="Rotation",v={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},f,v)},_fireRotationStart(l,f,v="Rotation",x={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:f},v,x)},_fireRotation(l,f,v,x=this._rotationLayer,E="Rotation",F={}){this.__fire(l,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:f,oldLatLngs:v,newLatLngs:x.getLatLngs()},E,F)},_fireRotationEnd(l,f,v,x="Rotation",E={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:f,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},x,E)},_fireActionClick(l,f,v,x="Toolbar",E={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:f,button:v},x,E)},_fireButtonClick(l,f,v="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:f},v,x)},_fireLangChange(l,f,v,x,E="Global",F={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:f,fallback:v,translations:x},E,F)},_fireGlobalDragModeToggled(l,f="Global",v={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},f,v)},_fireGlobalEditModeToggled(l,f="Global",v={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},f,v)},_fireGlobalRemovalModeToggled(l,f="Global",v={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},f,v)},_fireGlobalCutModeToggled(l="Global",f={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,f)},_fireGlobalDrawModeToggled(l="Global",f={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,f)},_fireGlobalRotateModeToggled(l="Global",f={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,f)},_fireRemoveLayerGroup(l,f=l,v="Edit",x={}){this.__fire(l,"pm:remove",{layer:f,shape:void 0},v,x)},_fireKeyeventEvent(l,f,v,x="Global",E={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:f,focusOn:v},x,E)},__fire(l,f,v,x,E={}){v=(0,Zl.default)(v,E,{source:x}),L.PM.Utils._fireEvent(l,f,v)}},Al=ol,Kl=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let f="document";this.map.getContainer().contains(l.target)&&(f="map");let v={event:l,eventType:l.type,focusOn:f};this._lastEvents[l.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(l,l.type,f)},_onBlur(l){l.altKey=!1;let f={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=f,this._lastEvents.current=f},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Ir=Kl,Wi=h(zi());function rr(l){let f=L.PM.activeLang;return(0,Wi.default)(js[f],l)||(0,Wi.default)(js.en,l)||l}function Zi(l){for(let f=0;f<l.length;f+=1){let v=l[f];if(Array.isArray(v)){if(Zi(v))return!0}else if(v!=null&&v!=="")return!0}return!1}function sl(l){return l.reduce((f,v)=>{if(v.length!==0){let x=Array.isArray(v)?sl(v):v;Array.isArray(x)?x.length!==0&&f.push(x):f.push(x)}return f},[])}function ga(l,f,v){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:E,b:F,f:Y}=x,ee=l.lng,ue=l.lat,Se=v,Ke=Math.PI,je=f*Ke/180,gt=Math.sin(je),At=Math.cos(je),Yt=(1-Y)*Math.tan(ue*Ke/180),yn=1/Math.sqrt(1+Yt*Yt),xn=Yt*yn,ar=Math.atan2(Yt,At),Ze=yn*gt,tt=1-Ze*Ze,ht=tt*(E*E-F*F)/(F*F),Ot=1+ht/16384*(4096+ht*(-768+ht*(320-175*ht))),_t=ht/1024*(256+ht*(-128+ht*(74-47*ht))),kt=Se/(F*Ot),pe=2*Math.PI,Pe,Ne,Oe;for(;Math.abs(kt-pe)>1e-12;){Pe=Math.cos(2*ar+kt),Ne=Math.sin(kt),Oe=Math.cos(kt);let on=_t*Ne*(Pe+_t/4*(Oe*(-1+2*Pe*Pe)-_t/6*Pe*(-3+4*Ne*Ne)*(-3+4*Pe*Pe)));pe=kt,kt=Se/(F*Ot)+on}let Ie=xn*Ne-yn*Oe*At,Re=Math.atan2(xn*Oe+yn*Ne*At,(1-Y)*Math.sqrt(Ze*Ze+Ie*Ie)),at=Math.atan2(Ne*gt,yn*Oe-xn*Ne*At),ut=Y/16*tt*(4+Y*(4-3*tt)),pt=at-(1-ut)*Y*Ze*(kt+ut*Ne*(Pe+ut*Oe*(-1+2*Pe*Pe))),Lt=ee+pt*180/Ke,St=Re*180/Ke;return L.latLng(Lt,St)}function Ai(l,f,v,x,E=!0){let F,Y,ee,ue=[];for(let Se=0;Se<v;Se+=1){if(E)F=Se*360/v+x,Y=ga(l,F,f),ee=L.latLng(Y.lng,Y.lat);else{let Ke=l.lat+Math.cos(2*Se*Math.PI/v)*f,je=l.lng+Math.sin(2*Se*Math.PI/v)*f;ee=L.latLng(Ke,je)}ue.push(ee)}return ue}function Yl(l,f,v){f=(f+360)%360;let x=Math.PI/180,E=180/Math.PI,{R:F}=L.CRS.Earth,Y=l.lng*x,ee=l.lat*x,ue=f*x,Se=Math.sin(ee),Ke=Math.cos(ee),je=Math.cos(v/F),gt=Math.sin(v/F),At=Math.asin(Se*je+Ke*gt*Math.cos(ue)),Yt=Y+Math.atan2(Math.sin(ue)*gt*Ke,je-Se*Math.sin(At));Yt*=E;let yn=Yt-360,xn=Yt<-180?Yt+360:Yt;return Yt=Yt>180?yn:xn,L.latLng([At*E,Yt])}function Qs(l,f,v){let x=l.latLngToContainerPoint(f),E=l.latLngToContainerPoint(v),F=Math.atan2(E.y-x.y,E.x-x.x)*180/Math.PI+90;return F+=F<0?360:0,F}function Ml(l,f,v,x){let E=Qs(l,f,v);return Yl(f,E,x)}function kl(l,f,v="asc"){if(!f||Object.keys(f).length===0)return(ue,Se)=>ue-Se;let x=Object.keys(f),E,F=x.length-1,Y={};for(;F>=0;)E=x[F],Y[E.toLowerCase()]=f[E],F-=1;function ee(ue){if(ue instanceof L.Marker)return"Marker";if(ue instanceof L.Circle)return"Circle";if(ue instanceof L.CircleMarker)return"CircleMarker";if(ue instanceof L.Rectangle)return"Rectangle";if(ue instanceof L.Polygon)return"Polygon";if(ue instanceof L.Polyline)return"Line"}return(ue,Se)=>{let Ke,je;if(Ke=ee(ue.layer).toLowerCase(),je=ee(Se.layer).toLowerCase(),!Ke||!je)return 0;let gt=Ke in Y?Y[Ke]:Number.MAX_SAFE_INTEGER,At=je in Y?Y[je]:Number.MAX_SAFE_INTEGER,Yt=0;return gt<At?Yt=-1:gt>At&&(Yt=1),v==="desc"?Yt*-1:Yt}}function Ms(l,f=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(f).getLatLngs():L.polyline(f).getLatLngs()}function Tl(l,f){var v,x,E,F;if((x=(v=f.options.crs)==null?void 0:v.projection)!=null&&x.MAX_LATITUDE){let Y=(F=(E=f.options.crs)==null?void 0:E.projection)==null?void 0:F.MAX_LATITUDE;l.lat=Math.max(Math.min(Y,l.lat),-Y)}return l}function ni(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Zu=L.Class.extend({includes:[yu,mr,Ua,Pl,Al],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Ir(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",f,v="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let E=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(E){let F=[`${E[1]}_${E[2]}`,`${E[1]}`];for(let Y of F)if(js[Y]){l=Y;break}}}let x=L.PM.activeLang;f&&(js[l]=(0,Qt.default)(js[v],f)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,l,v,js[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",f){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,f)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,f={}){let v=f.ignoreShapes||[],x=f.merge||!1;this.map.pm.Draw.shapes.forEach(E=>{v.indexOf(E)===-1&&this.map.pm.Draw[E].setPathOptions(l,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let f=(0,Qt.default)(this.globalOptions,l);f.editable&&(f.resizeableCircleMarker=f.editable,delete f.editable);let v=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!f.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),v=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!f.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(E=>{this.map.pm.Draw[E].setOptions(f)}),v&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(E=>{E.pm.setOptions(f)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=f,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let f=L.PM.Utils.findLayers(this.map);if(!l)return f;let v=L.featureGroup();return v._pmTempLayer=!0,f.forEach(x=>{v.addLayer(x)}),v},getGeomanDrawLayers(l=!1){let f=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!l)return f;let v=L.featureGroup();return v._pmTempLayer=!0,f.forEach(x=>{v.addLayer(x)}),v},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){ni(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let f="";l.type==="touchstart"||l.type==="pointerdown"?f="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(f="mouseup"),f&&ni(this.map)._onClick(this._createMouseEvent(f,l))},_createMouseEvent(l,f){let v,x=f.touches[0]||f.changedTouches[0];try{v=new MouseEvent(l,{bubbles:f.bubbles,cancelable:f.cancelable,view:f.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:f.ctrlKey,altKey:f.altKey,shiftKey:f.shiftKey,metaKey:f.metaKey,button:f.button,relatedTarget:f.relatedTarget})}catch{v=document.createEvent("MouseEvents"),v.initMouseEvent(l,f.bubbles,f.cancelable,f.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,f.relatedTarget)}return v}}),mo=Zu,zs=L.Control.extend({includes:[Al],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let f=this.options.position.indexOf("right")>-1?"pos-right":"",v=L.DomUtil.create("div",`button-container  ${f}`,this._container);l.title&&v.setAttribute("title",l.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",v);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let E=L.DomUtil.create("div",`leaflet-pm-actions-container ${f}`,v),F=l.actions,Y={cancel:{text:rr("actions.cancel"),title:rr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:rr("actions.finish"),title:rr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:rr("actions.removeLastVertex"),title:rr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:rr("actions.finish"),title:rr("actions.finish"),onClick(ue){this._map.pm.Draw[l.jsClass]._finishShape(ue)}}};l._preparedActions=F.map(ue=>{let Se=typeof ue=="string"?ue:ue.name,Ke;if(Y[Se])Ke=Y[Se];else if(ue.text)Ke=ue;else return Ke;let je=L.DomUtil.create("a",`leaflet-pm-action ${f} action-${Se}`,E);if(je.setAttribute("role","button"),je.setAttribute("tabindex","0"),je.href="#",Ke.title&&(je.title=Ke.title),je.innerHTML=Ke.text,L.DomEvent.disableClickPropagation(je),L.DomEvent.on(je,"click",L.DomEvent.stop),Ke._node=je,!l.disabled&&Ke.onClick){let gt=At=>{At.preventDefault();let Yt="",{buttons:yn}=this._map.pm.Toolbar;for(let xn in yn)if(yn[xn]._button===l){Yt=xn;break}this._fireActionClick(Ke,Yt,l)};L.DomEvent.addListener(je,"click",gt,this),L.DomEvent.addListener(je,"click",Ke.onClick,this),L.DomEvent.addListener(je,"click",()=>this._updateActiveAction(l))}return Ke}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(v,"active");let ee=L.DomUtil.create("div","control-icon",x);return l.iconUrl&&ee.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(ee,l.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),v},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:f}=this._map.pm.Toolbar;for(let v in f)if(f[v]._button===this._button){l=v;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",f=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(f,l),f.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(f,l),f.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var f;(f=l._preparedActions)==null||f.forEach(v=>{v!=null&&v._node&&(v.isActive&&v.isActive.call(this)?L.DomUtil.addClass(v._node,"active-action"):L.DomUtil.removeClass(v._node,"active-action"))})}}),Bl=zs;L.Control.PMButton=Bl;var Us=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let f=`${l}Container`;return this[f]||(this[f]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[f]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),f={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let v in l){let x=l[v];L.Util.setOptions(x,{className:f.geomanIcons[v]})}},removeControls(){let l=this.getButtons();for(let f in l)l[f].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,f){return this.buttons[l]=f,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let f in this.buttons){let v=this.buttons[f];v._button.disableByOtherButtons&&v!==l&&v.toggled()&&v._triggerClick()}},toggleButton(l,f,v=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let x=l;return v&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(f):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:rr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},f={title:rr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},v={className:"control-icon leaflet-pm-icon-polyline",title:rr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:rr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},E={title:rr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},F={title:rr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Y={title:rr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ee={title:rr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ue={title:rr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Se={title:rr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ke={title:rr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},je={className:"control-icon leaflet-pm-icon-text",title:rr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(v)),this._addButton("drawRectangle",new L.Control.PMButton(F)),this._addButton("drawPolygon",new L.Control.PMButton(f)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(E)),this._addButton("drawText",new L.Control.PMButton(je)),this._addButton("editMode",new L.Control.PMButton(Y)),this._addButton("dragMode",new L.Control.PMButton(ee)),this._addButton("cutPolygon",new L.Control.PMButton(ue)),this._addButton("removalMode",new L.Control.PMButton(Se)),this._addButton("rotateMode",new L.Control.PMButton(Ke))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),f=[];this.options.drawControls===!1&&(f=f.concat(Object.keys(l).filter(v=>!l[v]._button.tool))),this.options.editControls===!1&&(f=f.concat(Object.keys(l).filter(v=>l[v]._button.tool==="edit"))),this.options.optionsControls===!1&&(f=f.concat(Object.keys(l).filter(v=>l[v]._button.tool==="options"))),this.options.customControls===!1&&(f=f.concat(Object.keys(l).filter(v=>l[v]._button.tool==="custom")));for(let v in l)if(this.options[v]&&f.indexOf(v)===-1){let x=l[v]._button.tool;x||(x="draw"),l[v].setPosition(this._getBtnPosition(x)),l[v].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,f){this.options.positions[l]=f,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,f){if(f)typeof f!="object"&&(f={name:f});else throw new TypeError("Button has no name");let v=this._btnNameMapping(l);if(!f.name)throw new TypeError("Button has no name");if(this.buttons[f.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(f.name,v);f={...this.buttons[v]._button,...f};let E=this.createCustomControl(f);return{drawInstance:x,control:E}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let f={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let v=this._addButton(l.name,new L.Control.PMButton(f));return this.changeControlOrder(),v},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let f={};if(l)for(let v in this.getButtons()){let x=this.getButtons()[v];(x._button.tool===l||l==="draw"&&!x._button.tool)&&(f[v]=x)}return f},changeControlOrder(l=[]){let f=this._shapeMapping(),v=[];l.forEach(F=>{f[F]?v.push(f[F]):v.push(F)});let x=this.getButtons(),E={};v.forEach(F=>{x[F]&&(E[F]=x[F])}),Object.keys(x).filter(F=>!x[F]._button.tool||x[F]._button.tool==="draw").forEach(F=>{v.indexOf(F)===-1&&(E[F]=x[F])}),Object.keys(x).filter(F=>x[F]._button.tool==="edit").forEach(F=>{v.indexOf(F)===-1&&(E[F]=x[F])}),Object.keys(x).filter(F=>x[F]._button.tool==="options").forEach(F=>{v.indexOf(F)===-1&&(E[F]=x[F])}),Object.keys(x).filter(F=>x[F]._button.tool==="custom").forEach(F=>{v.indexOf(F)===-1&&(E[F]=x[F])}),Object.keys(x).forEach(F=>{v.indexOf(F)===-1&&(E[F]=x[F])}),this.map.pm.Toolbar.buttons=E,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),f=[];for(let v in l)f.push(v);return f},changeActionsOfControl(l,f){let v=this._btnNameMapping(l);if(!v)throw new TypeError("No name passed");if(!f)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=f,this.changeControlOrder()},setButtonDisabled(l,f){let v=this._btnNameMapping(l);f?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let f=this._shapeMapping();return f[l]?f[l]:l}}),al=Us,ll=h(ms()),ri={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(f=>{if(Array.isArray(f)){this._assignEvents(f);return}f.off("drag",this._handleSnapping,this),f.on("drag",this._handleSnapping,this),f.off("dragend",this._cleanupSnapping,this),f.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let f=l.target;f._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(f=>{f.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var ee,ue,Se;let f=l.target;if(f._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ee=l==null?void 0:l.originalEvent)==null?void 0:ee.altKey)||((Se=(ue=this._map)==null?void 0:ue.pm)==null?void 0:Se.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let v=this._calcClosestLayer(f.getLatLng(),this._snapList);if(Object.keys(v).length===0)return!1;let x=v.layer instanceof L.Marker||v.layer instanceof L.CircleMarker||!this.options.snapSegment,E;x?E=v.latlng:E=this._checkPrioritiySnapping(v);let F=this.options.snapDistance,Y={marker:f,shape:this._shape,snapLatLng:E,segment:v.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:v.layer,distance:v.distance};if(this._fireSnapDrag(Y.marker,Y),this._fireSnapDrag(this._layer,Y),v.distance<F){f._orgLatLng=f.getLatLng(),f.setLatLng(E),f._snapped=!0,f._snapInfo=Y;let Ke=()=>{this._snapLatLng=E,this._fireSnap(f,Y),this._fireSnap(this._layer,Y)},je=this._snapLatLng||{},gt=E||{};(je.lat!==gt.lat||je.lng!==gt.lng)&&Ke()}else this._snapLatLng&&(this._unsnap(Y),f._snapped=!1,f._snapInfo=void 0,this._fireUnsnap(Y.marker,Y),this._fireUnsnap(this._layer,Y));return!0},_createSnapList(){let l=[],f=[],v=this._map;v.off("layerremove",this._handleSnapLayerRemoval,this),v.on("layerremove",this._handleSnapLayerRemoval,this),v.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?l.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),l.push(x);let E=L.polyline([],{color:"red",pmIgnore:!0});E._pmTempLayer=!0,f.push(E),(x instanceof L.Circle||x instanceof L.CircleMarker)&&f.push(E)}}),l=l.filter(x=>this._layer!==x),l=l.filter(x=>x._latlng||x._latlngs&&Zi(x._latlngs)),l=l.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,f.push(x)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=f},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let f=this._snapList.findIndex(v=>v._leaflet_id===l._leaflet_id);f>-1&&this._snapList.splice(f,1)},_calcClosestLayer(l,f){return this._calcClosestLayers(l,f,1)[0]},_calcClosestLayers(l,f,v=1){let x=[],E={};f.forEach((Y,ee)=>{var Se;if(Y._parentCopy&&Y._parentCopy===this._layer||((Se=Y.getLatLngs)==null?void 0:Se.call(Y).flat(5).length)<2)return;let ue=this._calcLayerDistances(l,Y);if(ue.distance=Math.floor(ue.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ee]){let Ke=L.polyline([],{color:"red",pmIgnore:!0});Ke._pmTempLayer=!0,this.debugIndicatorLines[ee]=Ke}this.debugIndicatorLines[ee].setLatLngs([l,ue.latlng])}v===1&&(E.distance===void 0||ue.distance-5<=E.distance)?(ue.distance+5<E.distance&&(x=[]),E=ue,E.layer=Y,x.push(E)):v!==1&&(E={},E=ue,E.layer=Y,x.push(E))}),v!==1&&(x=x.sort((Y,ee)=>Y.distance-ee.distance)),v===-1&&(v=x.length);let F=this._getClosestLayerByPriority(x,v);return L.Util.isArray(F)?F:[F]},_calcLayerDistances(l,f){let v=this._map,x=f instanceof L.Marker||f instanceof L.CircleMarker,E=f instanceof L.Polygon,F=l;if(x){let Y=f.getLatLng();return{latlng:{...Y},distance:this._getDistance(v,Y,F)}}return this._calcLatLngDistances(F,f.getLatLngs(),v,E)},_calcLatLngDistances(l,f,v,x=!1){let E,F,Y,ee=ue=>{ue.forEach((Se,Ke)=>{if(Array.isArray(Se)){ee(Se);return}if(this.options.snapSegment){let je=Se,gt;x?gt=Ke+1===ue.length?0:Ke+1:gt=Ke+1===ue.length?void 0:Ke+1;let At=ue[gt];if(At){let Yt=this._getDistanceToSegment(v,l,je,At);(F===void 0||Yt<F)&&(F=Yt,Y=[je,At])}}else{let je=this._getDistance(v,l,Se);(F===void 0||je<F)&&(F=je,E=Se)}})};return ee(f),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(v,l,Y[0],Y[1])},segment:Y,distance:F}:{latlng:E,distance:F}},_getClosestLayerByPriority(l,f=1){l=l.sort((Y,ee)=>Y._leaflet_id-ee._leaflet_id);let v=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],E=0,F={};return x.concat(v).forEach(Y=>{F[Y]||(E+=1,F[Y]=E)}),l.sort(kl("instanceofShape",F)),f===1?l[0]||{}:l.slice(0,f)},_checkPrioritiySnapping(l){let f=this._map,v=l.segment[0],x=l.segment[1],E=l.latlng,F=E;if(this.options.snapVertex){let Y=this._getDistance(f,v,E),ee=this._getDistance(f,x,E),ue=Y<ee?v:x,Se=Y<ee?Y:ee;if(this.options.snapMiddle){let je=L.PM.Utils.calcMiddleLatLng(f,v,x),gt=this._getDistance(f,je,E);gt<Y&&gt<ee&&(ue=je,Se=gt)}let Ke=this.options.snapDistance;Se<Ke&&(F=ue)}return{...F}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,f,v,x){let E=l.getMaxZoom();E===1/0&&(E=l.getZoom());let F=l.project(f,E),Y=l.project(v,E),ee=l.project(x,E),ue=L.LineUtil.closestPointOnSegment(F,Y,ee);return l.unproject(ue,E)},_getDistanceToSegment(l,f,v,x){let E=l.latLngToContainerPoint(f),F=l.latLngToContainerPoint(v),Y=l.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(E,F,Y)},_getDistance(l,f,v){return l.latLngToContainerPoint(f).distanceTo(l.latLngToContainerPoint(v))}},vs=ri,va=L.Class.extend({includes:[vs,Al],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let f=new L.Icon.Default;f.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=f,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(v=>{this[v]=new L.PM.Draw[v](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,f=!1){f?this.options.pathOptions=(0,ll.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,f){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(f)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(f=>{this[f]._enabled&&(l=f)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(f=>{(f instanceof L.Polyline||f instanceof L.Marker||f instanceof L.Circle||f instanceof L.CircleMarker||f instanceof L.ImageOverlay)&&(f._pmTempLayer||l.push(f))}),this._enabled?l.forEach(f=>{L.PM.Utils.disablePopup(f)}):l.forEach(f=>{L.PM.Utils.enablePopup(f)})},createNewDrawInstance(l,f){let v=this._getShapeFromBtnName(f);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError(`There is no class L.PM.Draw.${v}`);return this[l]=new L.PM.Draw[v](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[f]&&this[l].setOptions(this[f].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let f={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return f[l]?f[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,f){f==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":f==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":f==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Ki=va;Ki.Marker=Ki.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(rr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(f=>{this.isRelevantMarker(f)&&f.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let f=l;f.target=this._hintMarker,this._handleSnapping(f)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),v=new L.Marker(f,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,f;(l=this.options.markerStyle)!=null&&l.icon&&((f=this._hintMarker)==null||f.setIcon(this.options.markerStyle.icon))}});var N=63710088e-1,ve={centimeters:N*100,centimetres:N*100,degrees:N/111325,feet:N*3.28084,inches:N*39.37,kilometers:N/1e3,kilometres:N/1e3,meters:N,metres:N,miles:N/1609.344,millimeters:N*1e3,millimetres:N*1e3,nauticalmiles:N/1852,radians:1,yards:N*1.0936};function qe(l,f,v){v===void 0&&(v={});var x={type:"Feature"};return(v.id===0||v.id)&&(x.id=v.id),v.bbox&&(x.bbox=v.bbox),x.properties=f||{},x.geometry=l,x}function ct(l,f,v){if(v===void 0&&(v={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fr(l[0])||!fr(l[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:l};return qe(x,f,v)}function wt(l,f,v){if(v===void 0&&(v={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:l};return qe(x,f,v)}function Rt(l,f){f===void 0&&(f={});var v={type:"FeatureCollection"};return f.id&&(v.id=f.id),f.bbox&&(v.bbox=f.bbox),v.features=l,v}function cn(l,f){f===void 0&&(f="kilometers");var v=ve[f];if(!v)throw new Error(f+" units is invalid");return l*v}function Bn(l,f){f===void 0&&(f="kilometers");var v=ve[f];if(!v)throw new Error(f+" units is invalid");return l/v}function Fn(l){var f=l%(2*Math.PI);return f*180/Math.PI}function er(l){var f=l%360;return f*Math.PI/180}function fr(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function kr(l){var f,v,x={type:"FeatureCollection",features:[]};if(l.type==="Feature"?v=l.geometry:v=l,v.type==="LineString")f=[v.coordinates];else if(v.type==="MultiLineString")f=v.coordinates;else if(v.type==="MultiPolygon")f=[].concat.apply([],v.coordinates);else if(v.type==="Polygon")f=v.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return f.forEach(function(E){f.forEach(function(F){for(var Y=0;Y<E.length-1;Y++)for(var ee=Y;ee<F.length-1;ee++)if(!(E===F&&(Math.abs(Y-ee)===1||Y===0&&ee===E.length-2&&E[Y][0]===E[E.length-1][0]&&E[Y][1]===E[E.length-1][1]))){var ue=Pi(E[Y][0],E[Y][1],E[Y+1][0],E[Y+1][1],F[ee][0],F[ee][1],F[ee+1][0],F[ee+1][1]);ue&&x.features.push(ct([ue[0],ue[1]]))}})}),x}function Pi(l,f,v,x,E,F,Y,ee){var ue,Se,Ke,je,gt,At={x:null,y:null,onLine1:!1,onLine2:!1};return ue=(ee-F)*(v-l)-(Y-E)*(x-f),ue===0?At.x!==null&&At.y!==null?At:!1:(Se=f-F,Ke=l-E,je=(Y-E)*Se-(ee-F)*Ke,gt=(v-l)*Se-(x-f)*Ke,Se=je/ue,Ke=gt/ue,At.x=l+Se*(v-l),At.y=f+Se*(x-f),Se>=0&&Se<=1&&(At.onLine1=!0),Ke>=0&&Ke<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}Ki.Line=Ki.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let f=l[l.length-1];this._hintline.setLatLngs([f,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let f=this._layer._defaultShape().slice();f.push(this._hintMarker.getLatLng()),this._change(f)},hasSelfIntersection(){return kr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,f){let v=L.polyline(this._layer.getLatLngs());l&&(f||(f=this._hintMarker.getLatLng()),v.addLatLng(f));let x=kr(v.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),x=v[v.length-1];if(f.equals(v[0])||v.length>0&&f.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:f,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(f);let E=this._createMarker(f);this._setTooltipText(),this._setHintLineAfterNewVertex(f),this._fireVertexAdded(E,void 0,f,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let f=this._layer.getLatLngs(),v=l[l.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(l,v);l.pop(),this._layerGroup.removeLayer(v);let E=l[l.length-1],F=f.indexOf(E.getLatLng());f=f.slice(0,F+1),this._layer.setLatLngs(f),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let f=L.polyline(l,this.options.pathOptions);this._setPane(f,"layerPane"),this._finishLayer(f),f.addTo(this._map.pm._getContainingLayer()),this._fireCreate(f),this.options.snappable&&this._cleanupSnapping();let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},_createMarker(l){let f=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._pmTempLayer=!0,this._layerGroup.addLayer(f),this._markers.push(f),f.on("click",this._finishShape,this),f},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),f="";l<=1?f=rr("tooltips.continueLine"):f=rr("tooltips.finishLine"),this._hintMarker.setTooltipContent(f)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,f;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(f=this._hintline)==null||f.setStyle(this.options.hintlineStyle)}}),Ki.Polygon=Ki.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let f=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._pmTempLayer=!0,this._layerGroup.addLayer(f),this._markers.push(f),this._layer.getLatLngs().flat().length===1?(f.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(f)-1,this.options.snappable&&this._cleanupSnapping()):f.on("click",()=>1),f},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),f="";l<=2?f=rr("tooltips.continueLine"):f=rr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(f)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let f=L.polygon(l,this.options.pathOptions);this._setPane(f,"layerPane"),this._finishLayer(f),f.addTo(this._map.pm._getContainingLayer()),this._fireCreate(f),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))}}),Ki.Rectangle=Ki.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let f=0;f<2;f+=1){let v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(f),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(v=>{L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(f)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(rr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}let f=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(f,"Draw")},_syncRectangleSize(){let l=Tl(this._startMarker.getLatLng(),this._map),f=Tl(this._hintMarker.getLatLng(),this._map),v=L.PM.Utils._getRotatedRectangle(l,f,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(v),this.options.cursorMarker&&this._styleMarkers){let x=[];v.forEach(E=>{!E.equals(l,1e-8)&&!E.equals(f,1e-8)&&x.push(E)}),x.forEach((E,F)=>{try{this._styleMarkers[F].setLatLng(E)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||v.equals(f))return;let x=L.rectangle([v,f],this.options.pathOptions);if(this.options.rectangleAngle){let F=L.PM.Utils._getRotatedRectangle(v,f,this.options.rectangleAngle||0,this._map);x.setLatLngs(F),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let E=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(E))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),Ki.CircleMarker=Ki.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let f={};L.extend(f,this.options.templineStyle),f.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),f),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(rr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let f=this._hintMarker.getLatLng();this._centerMarker.setLatLng(f),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(rr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),f=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,f])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),f=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,f);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this._handleHintMarkerSnapping();let f=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(f,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),v=new this._BaseCircleClass(f,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(v),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._centerMarker.getLatLng(),v=this._defaultRadius;if(this.options[this._editableOption]){let Y=this._hintMarker.getLatLng();v=this._distanceCalculation(f,Y),this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?v=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(v=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:v},E=new this._BaseCircleClass(f,x);this._setPane(E,"layerPane"),this._finishLayer(E),E.addTo(this._map.pm._getContainingLayer()),E.pm&&E.pm._updateHiddenPolyCircle(),this._fireCreate(E);let F=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(F))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let f=this._centerMarker.getLatLng(),v=this._distanceCalculation(f,l);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?l=Ml(this._map,f,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(l=Ml(this._map,f,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),f=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,f);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var f,v;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(f=this._layer)==null||f.setStyle(l),(v=this._hintline)==null||v.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,f){return this._map.project(l).distanceTo(this._map.project(f))}}),Ki.Circle=Ki.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,f){return this._map.distance(l,f)}});function Yr(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ii(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Yi(l){return l.type==="Feature"?l.geometry:l}function ro(l,f){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function ys(l,f,v){if(l!==null)for(var x,E,F,Y,ee,ue,Se,Ke=0,je=0,gt,At=l.type,Yt=At==="FeatureCollection",yn=At==="Feature",xn=Yt?l.features.length:1,ar=0;ar<xn;ar++){Se=Yt?l.features[ar].geometry:yn?l.geometry:l,gt=Se?Se.type==="GeometryCollection":!1,ee=gt?Se.geometries.length:1;for(var Ze=0;Ze<ee;Ze++){var tt=0,ht=0;if(Y=gt?Se.geometries[Ze]:Se,Y!==null){ue=Y.coordinates;var Ot=Y.type;switch(Ke=0,Ot){case null:break;case"Point":if(f(ue,je,ar,tt,ht)===!1)return!1;je++,tt++;break;case"LineString":case"MultiPoint":for(x=0;x<ue.length;x++){if(f(ue[x],je,ar,tt,ht)===!1)return!1;je++,Ot==="MultiPoint"&&tt++}Ot==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(x=0;x<ue.length;x++){for(E=0;E<ue[x].length-Ke;E++){if(f(ue[x][E],je,ar,tt,ht)===!1)return!1;je++}Ot==="MultiLineString"&&tt++,Ot==="Polygon"&&ht++}Ot==="Polygon"&&tt++;break;case"MultiPolygon":for(x=0;x<ue.length;x++){for(ht=0,E=0;E<ue[x].length;E++){for(F=0;F<ue[x][E].length-Ke;F++){if(f(ue[x][E][F],je,ar,tt,ht)===!1)return!1;je++}ht++}tt++}break;case"GeometryCollection":for(x=0;x<Y.geometries.length;x++)if(ys(Y.geometries[x],f)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tr(l,f){if(l.type==="Feature")f(l,0);else if(l.type==="FeatureCollection")for(var v=0;v<l.features.length&&f(l.features[v],v)!==!1;v++);}function Ao(l,f,v){var x=v;return Tr(l,function(E,F){F===0&&v===void 0?x=E:x=f(x,E,F)}),x}function ul(l,f){var v,x,E,F,Y,ee,ue,Se,Ke,je,gt=0,At=l.type==="FeatureCollection",Yt=l.type==="Feature",yn=At?l.features.length:1;for(v=0;v<yn;v++){for(ee=At?l.features[v].geometry:Yt?l.geometry:l,Se=At?l.features[v].properties:Yt?l.properties:{},Ke=At?l.features[v].bbox:Yt?l.bbox:void 0,je=At?l.features[v].id:Yt?l.id:void 0,ue=ee?ee.type==="GeometryCollection":!1,Y=ue?ee.geometries.length:1,E=0;E<Y;E++){if(F=ue?ee.geometries[E]:ee,F===null){if(f(null,gt,Se,Ke,je)===!1)return!1;continue}switch(F.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(F,gt,Se,Ke,je)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<F.geometries.length;x++)if(f(F.geometries[x],gt,Se,Ke,je)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}gt++}}function $o(l,f){ul(l,function(v,x,E,F,Y){var ee=v===null?null:v.type;switch(ee){case null:case"Point":case"LineString":case"Polygon":return f(qe(v,E,{bbox:F,id:Y}),x,0)===!1?!1:void 0}var ue;switch(ee){case"MultiPoint":ue="Point";break;case"MultiLineString":ue="LineString";break;case"MultiPolygon":ue="Polygon";break}for(var Se=0;Se<v.coordinates.length;Se++){var Ke=v.coordinates[Se],je={type:ue,coordinates:Ke};if(f(qe(je,E),x,Se)===!1)return!1}})}function Xl(l){if(!l)throw new Error("geojson is required");var f=[];return $o(l,function(v){ea(v,f)}),Rt(f)}function ea(l,f){var v=[],x=l.geometry;if(x!==null){switch(x.type){case"Polygon":v=ii(x);break;case"LineString":v=[ii(x)]}v.forEach(function(E){var F=_u(E,l.properties);F.forEach(function(Y){Y.id=f.length,f.push(Y)})})}}function _u(l,f){var v=[];return l.reduce(function(x,E){var F=wt([x,E],f);return F.bbox=$a(x,E),v.push(F),E}),v}function $a(l,f){var v=l[0],x=l[1],E=f[0],F=f[1],Y=v<E?v:E,ee=x<F?x:F,ue=v>E?v:E,Se=x>F?x:F;return[Y,ee,ue,Se]}var Va=Xl,io=h(Di(),1);function ta(l,f){var v={},x=[];if(l.type==="LineString"&&(l=qe(l)),f.type==="LineString"&&(f=qe(f)),l.type==="Feature"&&f.type==="Feature"&&l.geometry!==null&&f.geometry!==null&&l.geometry.type==="LineString"&&f.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&f.geometry.coordinates.length===2){var E=_s(l,f);return E&&x.push(E),Rt(x)}var F=(0,io.default)();return F.load(Va(f)),Tr(Va(l),function(Y){Tr(F.search(Y),function(ee){var ue=_s(Y,ee);if(ue){var Se=ii(ue).join(",");v[Se]||(v[Se]=!0,x.push(ue))}})}),Rt(x)}function _s(l,f){var v=ii(l),x=ii(f);if(v.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var E=v[0][0],F=v[0][1],Y=v[1][0],ee=v[1][1],ue=x[0][0],Se=x[0][1],Ke=x[1][0],je=x[1][1],gt=(je-Se)*(Y-E)-(Ke-ue)*(ee-F),At=(Ke-ue)*(F-Se)-(je-Se)*(E-ue),Yt=(Y-E)*(F-Se)-(ee-F)*(E-ue);if(gt===0)return null;var yn=At/gt,xn=Yt/gt;if(yn>=0&&yn<=1&&xn>=0&&xn<=1){var ar=E+yn*(Y-E),Ze=F+yn*(ee-F);return ct([ar,Ze])}return null}var ns=ta,cl=h(Di(),1);function Mo(l,f,v){v===void 0&&(v={});var x=Yr(l),E=Yr(f),F=er(E[1]-x[1]),Y=er(E[0]-x[0]),ee=er(x[1]),ue=er(E[1]),Se=Math.pow(Math.sin(F/2),2)+Math.pow(Math.sin(Y/2),2)*Math.cos(ee)*Math.cos(ue);return cn(2*Math.atan2(Math.sqrt(Se),Math.sqrt(1-Se)),v.units)}var Vo=Mo;function Ho(l){var f=l[0],v=l[1],x=l[2],E=l[3],F=Vo(l.slice(0,2),[x,v]),Y=Vo(l.slice(0,2),[f,E]);if(F>=Y){var ee=(v+E)/2;return[f,ee-(x-f)/2,x,ee+(x-f)/2]}else{var ue=(f+x)/2;return[ue-(E-v)/2,v,ue+(E-v)/2,E]}}var Ku=Ho;function co(l){var f=[1/0,1/0,-1/0,-1/0];return ys(l,function(v){f[0]>v[0]&&(f[0]=v[0]),f[1]>v[1]&&(f[1]=v[1]),f[2]<v[0]&&(f[2]=v[0]),f[3]<v[1]&&(f[3]=v[1])}),f}co.default=co;var ya=co;function ko(l,f){f===void 0&&(f={});var v=f.precision,x=f.coordinates,E=f.mutate;if(v=v==null||isNaN(v)?6:v,x=x==null||isNaN(x)?3:x,!l)throw new Error("<geojson> is required");if(typeof v!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(E===!1||E===void 0)&&(l=JSON.parse(JSON.stringify(l)));var F=Math.pow(10,v);return ys(l,function(Y){To(Y,F,x)}),l}function To(l,f,v){l.length>v&&l.splice(v,l.length);for(var x=0;x<l.length;x++)l[x]=Math.round(l[x]*f)/f;return l}var _a=ko;function ba(l,f,v){if(v===void 0&&(v={}),v.final===!0)return Bo(l,f);var x=Yr(l),E=Yr(f),F=er(x[0]),Y=er(E[0]),ee=er(x[1]),ue=er(E[1]),Se=Math.sin(Y-F)*Math.cos(ue),Ke=Math.cos(ee)*Math.sin(ue)-Math.sin(ee)*Math.cos(ue)*Math.cos(Y-F);return Fn(Math.atan2(Se,Ke))}function Bo(l,f){var v=ba(f,l);return v=(v+180)%360,v}function go(l,f,v,x){x===void 0&&(x={});var E=Yr(l),F=er(E[0]),Y=er(E[1]),ee=er(v),ue=Bn(f,x.units),Se=Math.asin(Math.sin(Y)*Math.cos(ue)+Math.cos(Y)*Math.sin(ue)*Math.cos(ee)),Ke=F+Math.atan2(Math.sin(ee)*Math.sin(ue)*Math.cos(Y),Math.cos(ue)-Math.sin(Y)*Math.sin(Se)),je=Fn(Ke),gt=Fn(Se);return ct([je,gt],x.properties)}function na(l,f,v){v===void 0&&(v={});var x=ct([1/0,1/0],{dist:1/0}),E=0;return $o(l,function(F){for(var Y=ii(F),ee=0;ee<Y.length-1;ee++){var ue=ct(Y[ee]);ue.properties.dist=Vo(f,ue,v);var Se=ct(Y[ee+1]);Se.properties.dist=Vo(f,Se,v);var Ke=Vo(ue,Se,v),je=Math.max(ue.properties.dist,Se.properties.dist),gt=ba(ue,Se),At=go(f,je,gt+90,v),Yt=go(f,je,gt-90,v),yn=ns(wt([At.geometry.coordinates,Yt.geometry.coordinates]),wt([ue.geometry.coordinates,Se.geometry.coordinates])),xn=null;yn.features.length>0&&(xn=yn.features[0],xn.properties.dist=Vo(f,xn,v),xn.properties.location=E+Vo(ue,xn,v)),ue.properties.dist<x.properties.dist&&(x=ue,x.properties.index=ee,x.properties.location=E),Se.properties.dist<x.properties.dist&&(x=Se,x.properties.index=ee+1,x.properties.location=E+Ke),xn&&xn.properties.dist<x.properties.dist&&(x=xn,x.properties.index=ee),E+=Ke}}),x}var bs=na;function Oo(l,f){if(!l)throw new Error("line is required");if(!f)throw new Error("splitter is required");var v=ro(l),x=ro(f);if(v!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var E=_a(f,{precision:7});switch(x){case"Point":return Vt(l,E);case"MultiPoint":return yt(l,E);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return yt(l,ns(l,E))}}function yt(l,f){var v=[],x=(0,cl.default)();return $o(f,function(E){if(v.forEach(function(ee,ue){ee.id=ue}),!v.length)v=Vt(l,E).features,v.forEach(function(ee){ee.bbox||(ee.bbox=Ku(ya(ee)))}),x.load(Rt(v));else{var F=x.search(E);if(F.features.length){var Y=Pt(E,F);v=v.filter(function(ee){return ee.id!==Y.id}),x.remove(Y),Tr(Vt(Y,E),function(ee){v.push(ee),x.insert(ee)})}}}),Rt(v)}function Vt(l,f){var v=[],x=ii(l)[0],E=ii(l)[l.geometry.coordinates.length-1];if(An(x,Yr(f))||An(E,Yr(f)))return Rt([l]);var F=(0,cl.default)(),Y=Va(l);F.load(Y);var ee=F.search(f);if(!ee.features.length)return Rt([l]);var ue=Pt(f,ee),Se=[x],Ke=Ao(Y,function(je,gt,At){var Yt=ii(gt)[1],yn=Yr(f);return At===ue.id?(je.push(yn),v.push(wt(je)),An(yn,Yt)?[yn]:[yn,Yt]):(je.push(Yt),je)},Se);return Ke.length>1&&v.push(wt(Ke)),Rt(v)}function Pt(l,f){if(!f.features.length)throw new Error("lines must contain features");if(f.features.length===1)return f.features[0];var v,x=1/0;return Tr(f,function(E){var F=bs(E,l),Y=F.properties.dist;Y<x&&(v=E,x=Y)}),v}function An(l,f){return l[0]===f[0]&&l[1]===f[1]}var Wn=Oo;function pr(l,f,v){if(v===void 0&&(v={}),!l)throw new Error("point is required");if(!f)throw new Error("polygon is required");var x=Yr(l),E=Yi(f),F=E.type,Y=f.bbox,ee=E.coordinates;if(Y&&oi(x,Y)===!1)return!1;F==="Polygon"&&(ee=[ee]);for(var ue=!1,Se=0;Se<ee.length&&!ue;Se++)if(Mi(x,ee[Se][0],v.ignoreBoundary)){for(var Ke=!1,je=1;je<ee[Se].length&&!Ke;)Mi(x,ee[Se][je],!v.ignoreBoundary)&&(Ke=!0),je++;Ke||(ue=!0)}return ue}function Mi(l,f,v){var x=!1;f[0][0]===f[f.length-1][0]&&f[0][1]===f[f.length-1][1]&&(f=f.slice(0,f.length-1));for(var E=0,F=f.length-1;E<f.length;F=E++){var Y=f[E][0],ee=f[E][1],ue=f[F][0],Se=f[F][1],Ke=l[1]*(Y-ue)+ee*(ue-l[0])+Se*(l[0]-Y)===0&&(Y-l[0])*(ue-l[0])<=0&&(ee-l[1])*(Se-l[1])<=0;if(Ke)return!v;var je=ee>l[1]!=Se>l[1]&&l[0]<(ue-Y)*(l[1]-ee)/(Se-ee)+Y;je&&(x=!x)}return x}function oi(l,f){return f[0]<=l[0]&&f[1]<=l[1]&&f[2]>=l[0]&&f[3]>=l[1]}function Ol(l,f,v){v===void 0&&(v={});for(var x=Yr(l),E=ii(f),F=0;F<E.length-1;F++){var Y=!1;if(v.ignoreEndVertices&&(F===0&&(Y="start"),F===E.length-2&&(Y="end"),F===0&&F+1===E.length-1&&(Y="both")),Go(E[F],E[F+1],x,Y,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1}function Go(l,f,v,x,E){var F=v[0],Y=v[1],ee=l[0],ue=l[1],Se=f[0],Ke=f[1],je=v[0]-ee,gt=v[1]-ue,At=Se-ee,Yt=Ke-ue,yn=je*Yt-gt*At;if(E!==null){if(Math.abs(yn)>E)return!1}else if(yn!==0)return!1;if(x){if(x==="start")return Math.abs(At)>=Math.abs(Yt)?At>0?ee<F&&F<=Se:Se<=F&&F<ee:Yt>0?ue<Y&&Y<=Ke:Ke<=Y&&Y<ue;if(x==="end")return Math.abs(At)>=Math.abs(Yt)?At>0?ee<=F&&F<Se:Se<F&&F<=ee:Yt>0?ue<=Y&&Y<Ke:Ke<Y&&Y<=ue;if(x==="both")return Math.abs(At)>=Math.abs(Yt)?At>0?ee<F&&F<Se:Se<F&&F<ee:Yt>0?ue<Y&&Y<Ke:Ke<Y&&Y<ue}else return Math.abs(At)>=Math.abs(Yt)?At>0?ee<=F&&F<=Se:Se<=F&&F<=ee:Yt>0?ue<=Y&&Y<=Ke:Ke<=Y&&Y<=ue;return!1}var ki=Ol;function ra(l,f){var v=Yi(l),x=Yi(f),E=v.type,F=x.type,Y=v.coordinates,ee=x.coordinates;switch(E){case"Point":switch(F){case"Point":return di(Y,ee);default:throw new Error("feature2 "+F+" geometry not supported")}case"MultiPoint":switch(F){case"Point":return wa(v,x);case"MultiPoint":return ia(v,x);default:throw new Error("feature2 "+F+" geometry not supported")}case"LineString":switch(F){case"Point":return ki(x,v,{ignoreEndVertices:!0});case"LineString":return Rr(v,x);case"MultiPoint":return oa(v,x);default:throw new Error("feature2 "+F+" geometry not supported")}case"Polygon":switch(F){case"Point":return pr(x,v,{ignoreBoundary:!0});case"LineString":return $s(v,x);case"Polygon":return vo(v,x);case"MultiPoint":return sa(v,x);default:throw new Error("feature2 "+F+" geometry not supported")}default:throw new Error("feature1 "+E+" geometry not supported")}}function wa(l,f){var v,x=!1;for(v=0;v<l.coordinates.length;v++)if(di(l.coordinates[v],f.coordinates)){x=!0;break}return x}function ia(l,f){for(var v=0,x=f.coordinates;v<x.length;v++){for(var E=x[v],F=!1,Y=0,ee=l.coordinates;Y<ee.length;Y++){var ue=ee[Y];if(di(E,ue)){F=!0;break}}if(!F)return!1}return!0}function oa(l,f){for(var v=!1,x=0,E=f.coordinates;x<E.length;x++){var F=E[x];if(ki(F,l,{ignoreEndVertices:!0})&&(v=!0),!ki(F,l))return!1}return!!v}function sa(l,f){for(var v=0,x=f.coordinates;v<x.length;v++){var E=x[v];if(!pr(E,l,{ignoreBoundary:!0}))return!1}return!0}function Rr(l,f){for(var v=!1,x=0,E=f.coordinates;x<E.length;x++){var F=E[x];if(ki({type:"Point",coordinates:F},l,{ignoreEndVertices:!0})&&(v=!0),!ki({type:"Point",coordinates:F},l,{ignoreEndVertices:!1}))return!1}return v}function $s(l,f){var v=!1,x=0,E=ya(l),F=ya(f);if(!si(E,F))return!1;for(x;x<f.coordinates.length-1;x++){var Y=Xi(f.coordinates[x],f.coordinates[x+1]);if(pr({type:"Point",coordinates:Y},l,{ignoreBoundary:!0})){v=!0;break}}return v}function vo(l,f){if(l.type==="Feature"&&l.geometry===null||f.type==="Feature"&&f.geometry===null)return!1;var v=ya(l),x=ya(f);if(!si(v,x))return!1;for(var E=Yi(f).coordinates,F=0,Y=E;F<Y.length;F++)for(var ee=Y[F],ue=0,Se=ee;ue<Se.length;ue++){var Ke=Se[ue];if(!pr(Ke,l))return!1}return!0}function si(l,f){return!(l[0]>f[0]||l[2]<f[2]||l[1]>f[1]||l[3]<f[3])}function di(l,f){return l[0]===f[0]&&l[1]===f[1]}function Xi(l,f){return[(l[0]+f[0])/2,(l[1]+f[1])/2]}var xi=h(zi()),ws=l=>()=>l,rs=l=>{let f=l?(v,x)=>x.minus(v).abs().isLessThanOrEqualTo(l):ws(!1);return(v,x)=>f(v,x)?0:v.comparedTo(x)};function ks(l){let f=l?(v,x,E,F,Y)=>v.exponentiatedBy(2).isLessThanOrEqualTo(F.minus(x).exponentiatedBy(2).plus(Y.minus(E).exponentiatedBy(2)).times(l)):ws(!1);return(v,x,E)=>{let F=v.x,Y=v.y,ee=E.x,ue=E.y,Se=Y.minus(ue).times(x.x.minus(ee)).minus(F.minus(ee).times(x.y.minus(ue)));return f(Se,F,Y,ee,ue)?0:Se.comparedTo(0)}}var bu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,aa=Math.ceil,oo=Math.floor,wi="[BigNumber Error] ",No=wi+"Number primitive has more than 15 significant digits: ",is=1e14,cr=14,xa=9007199254740991,La=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Vs=1e7,qo=1e9;function vc(l){var f,v,x,E=Ze.prototype={constructor:Ze,toString:null,valueOf:null},F=new Ze(1),Y=20,ee=4,ue=-7,Se=21,Ke=-1e7,je=1e7,gt=!1,At=1,Yt=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},xn="0123456789abcdefghijklmnopqrstuvwxyz",ar=!0;function Ze(pe,Pe){var Ne,Oe,Ie,Re,at,ut,pt,Lt,St=this;if(!(St instanceof Ze))return new Ze(pe,Pe);if(Pe==null){if(pe&&pe._isBigNumber===!0){St.s=pe.s,!pe.c||pe.e>je?St.c=St.e=null:pe.e<Ke?St.c=[St.e=0]:(St.e=pe.e,St.c=pe.c.slice());return}if((ut=typeof pe=="number")&&pe*0==0){if(St.s=1/pe<0?(pe=-pe,-1):1,pe===~~pe){for(Re=0,at=pe;at>=10;at/=10,Re++);Re>je?St.c=St.e=null:(St.e=Re,St.c=[pe]);return}Lt=String(pe)}else{if(!bu.test(Lt=String(pe)))return x(St,Lt,ut);St.s=Lt.charCodeAt(0)==45?(Lt=Lt.slice(1),-1):1}(Re=Lt.indexOf("."))>-1&&(Lt=Lt.replace(".","")),(at=Lt.search(/e/i))>0?(Re<0&&(Re=at),Re+=+Lt.slice(at+1),Lt=Lt.substring(0,at)):Re<0&&(Re=Lt.length)}else{if(a(Pe,2,xn.length,"Base"),Pe==10&&ar)return St=new Ze(pe),_t(St,Y+St.e+1,ee);if(Lt=String(pe),ut=typeof pe=="number"){if(pe*0!=0)return x(St,Lt,ut,Pe);if(St.s=1/pe<0?(Lt=Lt.slice(1),-1):1,Ze.DEBUG&&Lt.replace(/^0\.0*|\./,"").length>15)throw Error(No+pe)}else St.s=Lt.charCodeAt(0)===45?(Lt=Lt.slice(1),-1):1;for(Ne=xn.slice(0,Pe),Re=at=0,pt=Lt.length;at<pt;at++)if(Ne.indexOf(Oe=Lt.charAt(at))<0){if(Oe=="."){if(at>Re){Re=pt;continue}}else if(!Ie&&(Lt==Lt.toUpperCase()&&(Lt=Lt.toLowerCase())||Lt==Lt.toLowerCase()&&(Lt=Lt.toUpperCase()))){Ie=!0,at=-1,Re=0;continue}return x(St,String(pe),ut,Pe)}ut=!1,Lt=v(Lt,Pe,10,St.s),(Re=Lt.indexOf("."))>-1?Lt=Lt.replace(".",""):Re=Lt.length}for(at=0;Lt.charCodeAt(at)===48;at++);for(pt=Lt.length;Lt.charCodeAt(--pt)===48;);if(Lt=Lt.slice(at,++pt)){if(pt-=at,ut&&Ze.DEBUG&&pt>15&&(pe>xa||pe!==oo(pe)))throw Error(No+St.s*pe);if((Re=Re-at-1)>je)St.c=St.e=null;else if(Re<Ke)St.c=[St.e=0];else{if(St.e=Re,St.c=[],at=(Re+1)%cr,Re<0&&(at+=cr),at<pt){for(at&&St.c.push(+Lt.slice(0,at)),pt-=cr;at<pt;)St.c.push(+Lt.slice(at,at+=cr));at=cr-(Lt=Lt.slice(at)).length}else at-=pt;for(;at--;Lt+="0");St.c.push(+Lt)}}else St.c=[St.e=0]}Ze.clone=vc,Ze.ROUND_UP=0,Ze.ROUND_DOWN=1,Ze.ROUND_CEIL=2,Ze.ROUND_FLOOR=3,Ze.ROUND_HALF_UP=4,Ze.ROUND_HALF_DOWN=5,Ze.ROUND_HALF_EVEN=6,Ze.ROUND_HALF_CEIL=7,Ze.ROUND_HALF_FLOOR=8,Ze.EUCLID=9,Ze.config=Ze.set=function(pe){var Pe,Ne;if(pe!=null)if(typeof pe=="object"){if(pe.hasOwnProperty(Pe="DECIMAL_PLACES")&&(Ne=pe[Pe],a(Ne,0,qo,Pe),Y=Ne),pe.hasOwnProperty(Pe="ROUNDING_MODE")&&(Ne=pe[Pe],a(Ne,0,8,Pe),ee=Ne),pe.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(Ne=pe[Pe],Ne&&Ne.pop?(a(Ne[0],-1e9,0,Pe),a(Ne[1],0,qo,Pe),ue=Ne[0],Se=Ne[1]):(a(Ne,-1e9,qo,Pe),ue=-(Se=Ne<0?-Ne:Ne))),pe.hasOwnProperty(Pe="RANGE"))if(Ne=pe[Pe],Ne&&Ne.pop)a(Ne[0],-1e9,-1,Pe),a(Ne[1],1,qo,Pe),Ke=Ne[0],je=Ne[1];else if(a(Ne,-1e9,qo,Pe),Ne)Ke=-(je=Ne<0?-Ne:Ne);else throw Error(wi+Pe+" cannot be zero: "+Ne);if(pe.hasOwnProperty(Pe="CRYPTO"))if(Ne=pe[Pe],Ne===!!Ne)if(Ne)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))gt=Ne;else throw gt=!Ne,Error(wi+"crypto unavailable");else gt=Ne;else throw Error(wi+Pe+" not true or false: "+Ne);if(pe.hasOwnProperty(Pe="MODULO_MODE")&&(Ne=pe[Pe],a(Ne,0,9,Pe),At=Ne),pe.hasOwnProperty(Pe="POW_PRECISION")&&(Ne=pe[Pe],a(Ne,0,qo,Pe),Yt=Ne),pe.hasOwnProperty(Pe="FORMAT"))if(Ne=pe[Pe],typeof Ne=="object")yn=Ne;else throw Error(wi+Pe+" not an object: "+Ne);if(pe.hasOwnProperty(Pe="ALPHABET"))if(Ne=pe[Pe],typeof Ne=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Ne))ar=Ne.slice(0,10)=="0123456789",xn=Ne;else throw Error(wi+Pe+" invalid: "+Ne)}else throw Error(wi+"Object expected: "+pe);return{DECIMAL_PLACES:Y,ROUNDING_MODE:ee,EXPONENTIAL_AT:[ue,Se],RANGE:[Ke,je],CRYPTO:gt,MODULO_MODE:At,POW_PRECISION:Yt,FORMAT:yn,ALPHABET:xn}},Ze.isBigNumber=function(pe){if(!pe||pe._isBigNumber!==!0)return!1;if(!Ze.DEBUG)return!0;var Pe,Ne,Oe=pe.c,Ie=pe.e,Re=pe.s;e:if({}.toString.call(Oe)=="[object Array]"){if((Re===1||Re===-1)&&Ie>=-1e9&&Ie<=qo&&Ie===oo(Ie)){if(Oe[0]===0){if(Ie===0&&Oe.length===1)return!0;break e}if(Pe=(Ie+1)%cr,Pe<1&&(Pe+=cr),String(Oe[0]).length==Pe){for(Pe=0;Pe<Oe.length;Pe++)if(Ne=Oe[Pe],Ne<0||Ne>=is||Ne!==oo(Ne))break e;if(Ne!==0)return!0}}}else if(Oe===null&&Ie===null&&(Re===null||Re===1||Re===-1))return!0;throw Error(wi+"Invalid BigNumber: "+pe)},Ze.maximum=Ze.max=function(){return ht(arguments,-1)},Ze.minimum=Ze.min=function(){return ht(arguments,1)},Ze.random=function(){var pe=9007199254740992,Pe=Math.random()*pe&2097151?function(){return oo(Math.random()*pe)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Ne){var Oe,Ie,Re,at,ut,pt=0,Lt=[],St=new Ze(F);if(Ne==null?Ne=Y:a(Ne,0,qo),at=aa(Ne/cr),gt)if(crypto.getRandomValues){for(Oe=crypto.getRandomValues(new Uint32Array(at*=2));pt<at;)ut=Oe[pt]*131072+(Oe[pt+1]>>>11),ut>=9e15?(Ie=crypto.getRandomValues(new Uint32Array(2)),Oe[pt]=Ie[0],Oe[pt+1]=Ie[1]):(Lt.push(ut%1e14),pt+=2);pt=at/2}else if(crypto.randomBytes){for(Oe=crypto.randomBytes(at*=7);pt<at;)ut=(Oe[pt]&31)*281474976710656+Oe[pt+1]*1099511627776+Oe[pt+2]*4294967296+Oe[pt+3]*16777216+(Oe[pt+4]<<16)+(Oe[pt+5]<<8)+Oe[pt+6],ut>=9e15?crypto.randomBytes(7).copy(Oe,pt):(Lt.push(ut%1e14),pt+=7);pt=at/7}else throw gt=!1,Error(wi+"crypto unavailable");if(!gt)for(;pt<at;)ut=Pe(),ut<9e15&&(Lt[pt++]=ut%1e14);for(at=Lt[--pt],Ne%=cr,at&&Ne&&(ut=La[cr-Ne],Lt[pt]=oo(at/ut)*ut);Lt[pt]===0;Lt.pop(),pt--);if(pt<0)Lt=[Re=0];else{for(Re=-1;Lt[0]===0;Lt.splice(0,1),Re-=cr);for(pt=1,ut=Lt[0];ut>=10;ut/=10,pt++);pt<cr&&(Re-=cr-pt)}return St.e=Re,St.c=Lt,St}}(),Ze.sum=function(){for(var pe=1,Pe=arguments,Ne=new Ze(Pe[0]);pe<Pe.length;)Ne=Ne.plus(Pe[pe++]);return Ne},v=function(){var pe="0123456789";function Pe(Ne,Oe,Ie,Re){for(var at,ut=[0],pt,Lt=0,St=Ne.length;Lt<St;){for(pt=ut.length;pt--;ut[pt]*=Oe);for(ut[0]+=Re.indexOf(Ne.charAt(Lt++)),at=0;at<ut.length;at++)ut[at]>Ie-1&&(ut[at+1]==null&&(ut[at+1]=0),ut[at+1]+=ut[at]/Ie|0,ut[at]%=Ie)}return ut.reverse()}return function(Ne,Oe,Ie,Re,at){var ut,pt,Lt,St,on,jn,Vn,Xn,Jr=Ne.indexOf("."),pi=Y,Fr=ee;for(Jr>=0&&(St=Yt,Yt=0,Ne=Ne.replace(".",""),Xn=new Ze(Oe),jn=Xn.pow(Ne.length-Jr),Yt=St,Xn.c=Pe($(_o(jn.c),jn.e,"0"),10,Ie,pe),Xn.e=Xn.c.length),Vn=Pe(Ne,Oe,Ie,at?(ut=xn,pe):(ut=pe,xn)),Lt=St=Vn.length;Vn[--St]==0;Vn.pop());if(!Vn[0])return ut.charAt(0);if(Jr<0?--Lt:(jn.c=Vn,jn.e=Lt,jn.s=Re,jn=f(jn,Xn,pi,Fr,Ie),Vn=jn.c,on=jn.r,Lt=jn.e),pt=Lt+pi+1,Jr=Vn[pt],St=Ie/2,on=on||pt<0||Vn[pt+1]!=null,on=Fr<4?(Jr!=null||on)&&(Fr==0||Fr==(jn.s<0?3:2)):Jr>St||Jr==St&&(Fr==4||on||Fr==6&&Vn[pt-1]&1||Fr==(jn.s<0?8:7)),pt<1||!Vn[0])Ne=on?$(ut.charAt(1),-pi,ut.charAt(0)):ut.charAt(0);else{if(Vn.length=pt,on)for(--Ie;++Vn[--pt]>Ie;)Vn[pt]=0,pt||(++Lt,Vn=[1].concat(Vn));for(St=Vn.length;!Vn[--St];);for(Jr=0,Ne="";Jr<=St;Ne+=ut.charAt(Vn[Jr++]));Ne=$(Ne,Lt,ut.charAt(0))}return Ne}}(),f=function(){function pe(Oe,Ie,Re){var at,ut,pt,Lt,St=0,on=Oe.length,jn=Ie%Vs,Vn=Ie/Vs|0;for(Oe=Oe.slice();on--;)pt=Oe[on]%Vs,Lt=Oe[on]/Vs|0,at=Vn*pt+Lt*jn,ut=jn*pt+at%Vs*Vs+St,St=(ut/Re|0)+(at/Vs|0)+Vn*Lt,Oe[on]=ut%Re;return St&&(Oe=[St].concat(Oe)),Oe}function Pe(Oe,Ie,Re,at){var ut,pt;if(Re!=at)pt=Re>at?1:-1;else for(ut=pt=0;ut<Re;ut++)if(Oe[ut]!=Ie[ut]){pt=Oe[ut]>Ie[ut]?1:-1;break}return pt}function Ne(Oe,Ie,Re,at){for(var ut=0;Re--;)Oe[Re]-=ut,ut=Oe[Re]<Ie[Re]?1:0,Oe[Re]=ut*at+Oe[Re]-Ie[Re];for(;!Oe[0]&&Oe.length>1;Oe.splice(0,1));}return function(Oe,Ie,Re,at,ut){var pt,Lt,St,on,jn,Vn,Xn,Jr,pi,Fr,Li,as,xu,ua,Ph,Ga,Xu,ca=Oe.s==Ie.s?1:-1,Io=Oe.c,Ji=Ie.c;if(!Io||!Io[0]||!Ji||!Ji[0])return new Ze(!Oe.s||!Ie.s||(Io?Ji&&Io[0]==Ji[0]:!Ji)?NaN:Io&&Io[0]==0||!Ji?ca*0:ca/0);for(Jr=new Ze(ca),pi=Jr.c=[],Lt=Oe.e-Ie.e,ca=Re+Lt+1,ut||(ut=is,Lt=yo(Oe.e/cr)-yo(Ie.e/cr),ca=ca/cr|0),St=0;Ji[St]==(Io[St]||0);St++);if(Ji[St]>(Io[St]||0)&&Lt--,ca<0)pi.push(1),on=!0;else{for(ua=Io.length,Ga=Ji.length,St=0,ca+=2,jn=oo(ut/(Ji[0]+1)),jn>1&&(Ji=pe(Ji,jn,ut),Io=pe(Io,jn,ut),Ga=Ji.length,ua=Io.length),xu=Ga,Fr=Io.slice(0,Ga),Li=Fr.length;Li<Ga;Fr[Li++]=0);Xu=Ji.slice(),Xu=[0].concat(Xu),Ph=Ji[0],Ji[1]>=ut/2&&Ph++;do{if(jn=0,pt=Pe(Ji,Fr,Ga,Li),pt<0){if(as=Fr[0],Ga!=Li&&(as=as*ut+(Fr[1]||0)),jn=oo(as/Ph),jn>1)for(jn>=ut&&(jn=ut-1),Vn=pe(Ji,jn,ut),Xn=Vn.length,Li=Fr.length;Pe(Vn,Fr,Xn,Li)==1;)jn--,Ne(Vn,Ga<Xn?Xu:Ji,Xn,ut),Xn=Vn.length,pt=1;else jn==0&&(pt=jn=1),Vn=Ji.slice(),Xn=Vn.length;if(Xn<Li&&(Vn=[0].concat(Vn)),Ne(Fr,Vn,Li,ut),Li=Fr.length,pt==-1)for(;Pe(Ji,Fr,Ga,Li)<1;)jn++,Ne(Fr,Ga<Li?Xu:Ji,Li,ut),Li=Fr.length}else pt===0&&(jn++,Fr=[0]);pi[St++]=jn,Fr[0]?Fr[Li++]=Io[xu]||0:(Fr=[Io[xu]],Li=1)}while((xu++<ua||Fr[0]!=null)&&ca--);on=Fr[0]!=null,pi[0]||pi.splice(0,1)}if(ut==is){for(St=1,ca=pi[0];ca>=10;ca/=10,St++);_t(Jr,Re+(Jr.e=St+Lt*cr-1)+1,at,on)}else Jr.e=Lt,Jr.r=+on;return Jr}}();function tt(pe,Pe,Ne,Oe){var Ie,Re,at,ut,pt;if(Ne==null?Ne=ee:a(Ne,0,8),!pe.c)return pe.toString();if(Ie=pe.c[0],at=pe.e,Pe==null)pt=_o(pe.c),pt=Oe==1||Oe==2&&(at<=ue||at>=Se)?S(pt,at):$(pt,at,"0");else if(pe=_t(new Ze(pe),Pe,Ne),Re=pe.e,pt=_o(pe.c),ut=pt.length,Oe==1||Oe==2&&(Pe<=Re||Re<=ue)){for(;ut<Pe;pt+="0",ut++);pt=S(pt,Re)}else if(Pe-=at,pt=$(pt,Re,"0"),Re+1>ut){if(--Pe>0)for(pt+=".";Pe--;pt+="0");}else if(Pe+=Re-ut,Pe>0)for(Re+1==ut&&(pt+=".");Pe--;pt+="0");return pe.s<0&&Ie?"-"+pt:pt}function ht(pe,Pe){for(var Ne,Oe,Ie=1,Re=new Ze(pe[0]);Ie<pe.length;Ie++)Oe=new Ze(pe[Ie]),(!Oe.s||(Ne=Hs(Re,Oe))===Pe||Ne===0&&Re.s===Pe)&&(Re=Oe);return Re}function Ot(pe,Pe,Ne){for(var Oe=1,Ie=Pe.length;!Pe[--Ie];Pe.pop());for(Ie=Pe[0];Ie>=10;Ie/=10,Oe++);return(Ne=Oe+Ne*cr-1)>je?pe.c=pe.e=null:Ne<Ke?pe.c=[pe.e=0]:(pe.e=Ne,pe.c=Pe),pe}x=function(){var pe=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,Ne=/^\.([^.]+)$/,Oe=/^-?(Infinity|NaN)$/,Ie=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Re,at,ut,pt){var Lt,St=ut?at:at.replace(Ie,"");if(Oe.test(St))Re.s=isNaN(St)?null:St<0?-1:1;else{if(!ut&&(St=St.replace(pe,function(on,jn,Vn){return Lt=(Vn=Vn.toLowerCase())=="x"?16:Vn=="b"?2:8,!pt||pt==Lt?jn:on}),pt&&(Lt=pt,St=St.replace(Pe,"$1").replace(Ne,"0.$1")),at!=St))return new Ze(St,Lt);if(Ze.DEBUG)throw Error(wi+"Not a"+(pt?" base "+pt:"")+" number: "+at);Re.s=null}Re.c=Re.e=null}}();function _t(pe,Pe,Ne,Oe){var Ie,Re,at,ut,pt,Lt,St,on=pe.c,jn=La;if(on){e:{for(Ie=1,ut=on[0];ut>=10;ut/=10,Ie++);if(Re=Pe-Ie,Re<0)Re+=cr,at=Pe,pt=on[Lt=0],St=oo(pt/jn[Ie-at-1]%10);else if(Lt=aa((Re+1)/cr),Lt>=on.length)if(Oe){for(;on.length<=Lt;on.push(0));pt=St=0,Ie=1,Re%=cr,at=Re-cr+1}else break e;else{for(pt=ut=on[Lt],Ie=1;ut>=10;ut/=10,Ie++);Re%=cr,at=Re-cr+Ie,St=at<0?0:oo(pt/jn[Ie-at-1]%10)}if(Oe=Oe||Pe<0||on[Lt+1]!=null||(at<0?pt:pt%jn[Ie-at-1]),Oe=Ne<4?(St||Oe)&&(Ne==0||Ne==(pe.s<0?3:2)):St>5||St==5&&(Ne==4||Oe||Ne==6&&(Re>0?at>0?pt/jn[Ie-at]:0:on[Lt-1])%10&1||Ne==(pe.s<0?8:7)),Pe<1||!on[0])return on.length=0,Oe?(Pe-=pe.e+1,on[0]=jn[(cr-Pe%cr)%cr],pe.e=-Pe||0):on[0]=pe.e=0,pe;if(Re==0?(on.length=Lt,ut=1,Lt--):(on.length=Lt+1,ut=jn[cr-Re],on[Lt]=at>0?oo(pt/jn[Ie-at]%jn[at])*ut:0),Oe)for(;;)if(Lt==0){for(Re=1,at=on[0];at>=10;at/=10,Re++);for(at=on[0]+=ut,ut=1;at>=10;at/=10,ut++);Re!=ut&&(pe.e++,on[0]==is&&(on[0]=1));break}else{if(on[Lt]+=ut,on[Lt]!=is)break;on[Lt--]=0,ut=1}for(Re=on.length;on[--Re]===0;on.pop());}pe.e>je?pe.c=pe.e=null:pe.e<Ke&&(pe.c=[pe.e=0])}return pe}function kt(pe){var Pe,Ne=pe.e;return Ne===null?pe.toString():(Pe=_o(pe.c),Pe=Ne<=ue||Ne>=Se?S(Pe,Ne):$(Pe,Ne,"0"),pe.s<0?"-"+Pe:Pe)}return E.absoluteValue=E.abs=function(){var pe=new Ze(this);return pe.s<0&&(pe.s=1),pe},E.comparedTo=function(pe,Pe){return Hs(this,new Ze(pe,Pe))},E.decimalPlaces=E.dp=function(pe,Pe){var Ne,Oe,Ie,Re=this;if(pe!=null)return a(pe,0,qo),Pe==null?Pe=ee:a(Pe,0,8),_t(new Ze(Re),pe+Re.e+1,Pe);if(!(Ne=Re.c))return null;if(Oe=((Ie=Ne.length-1)-yo(this.e/cr))*cr,Ie=Ne[Ie])for(;Ie%10==0;Ie/=10,Oe--);return Oe<0&&(Oe=0),Oe},E.dividedBy=E.div=function(pe,Pe){return f(this,new Ze(pe,Pe),Y,ee)},E.dividedToIntegerBy=E.idiv=function(pe,Pe){return f(this,new Ze(pe,Pe),0,1)},E.exponentiatedBy=E.pow=function(pe,Pe){var Ne,Oe,Ie,Re,at,ut,pt,Lt,St,on=this;if(pe=new Ze(pe),pe.c&&!pe.isInteger())throw Error(wi+"Exponent not an integer: "+kt(pe));if(Pe!=null&&(Pe=new Ze(Pe)),ut=pe.e>14,!on.c||!on.c[0]||on.c[0]==1&&!on.e&&on.c.length==1||!pe.c||!pe.c[0])return St=new Ze(Math.pow(+kt(on),ut?pe.s*(2-p(pe)):+kt(pe))),Pe?St.mod(Pe):St;if(pt=pe.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new Ze(NaN);Oe=!pt&&on.isInteger()&&Pe.isInteger(),Oe&&(on=on.mod(Pe))}else{if(pe.e>9&&(on.e>0||on.e<-1||(on.e==0?on.c[0]>1||ut&&on.c[1]>=24e7:on.c[0]<8e13||ut&&on.c[0]<=9999975e7)))return Re=on.s<0&&p(pe)?-0:0,on.e>-1&&(Re=1/Re),new Ze(pt?1/Re:Re);Yt&&(Re=aa(Yt/cr+2))}for(ut?(Ne=new Ze(.5),pt&&(pe.s=1),Lt=p(pe)):(Ie=Math.abs(+kt(pe)),Lt=Ie%2),St=new Ze(F);;){if(Lt){if(St=St.times(on),!St.c)break;Re?St.c.length>Re&&(St.c.length=Re):Oe&&(St=St.mod(Pe))}if(Ie){if(Ie=oo(Ie/2),Ie===0)break;Lt=Ie%2}else if(pe=pe.times(Ne),_t(pe,pe.e+1,1),pe.e>14)Lt=p(pe);else{if(Ie=+kt(pe),Ie===0)break;Lt=Ie%2}on=on.times(on),Re?on.c&&on.c.length>Re&&(on.c.length=Re):Oe&&(on=on.mod(Pe))}return Oe?St:(pt&&(St=F.div(St)),Pe?St.mod(Pe):Re?_t(St,Yt,ee,at):St)},E.integerValue=function(pe){var Pe=new Ze(this);return pe==null?pe=ee:a(pe,0,8),_t(Pe,Pe.e+1,pe)},E.isEqualTo=E.eq=function(pe,Pe){return Hs(this,new Ze(pe,Pe))===0},E.isFinite=function(){return!!this.c},E.isGreaterThan=E.gt=function(pe,Pe){return Hs(this,new Ze(pe,Pe))>0},E.isGreaterThanOrEqualTo=E.gte=function(pe,Pe){return(Pe=Hs(this,new Ze(pe,Pe)))===1||Pe===0},E.isInteger=function(){return!!this.c&&yo(this.e/cr)>this.c.length-2},E.isLessThan=E.lt=function(pe,Pe){return Hs(this,new Ze(pe,Pe))<0},E.isLessThanOrEqualTo=E.lte=function(pe,Pe){return(Pe=Hs(this,new Ze(pe,Pe)))===-1||Pe===0},E.isNaN=function(){return!this.s},E.isNegative=function(){return this.s<0},E.isPositive=function(){return this.s>0},E.isZero=function(){return!!this.c&&this.c[0]==0},E.minus=function(pe,Pe){var Ne,Oe,Ie,Re,at=this,ut=at.s;if(pe=new Ze(pe,Pe),Pe=pe.s,!ut||!Pe)return new Ze(NaN);if(ut!=Pe)return pe.s=-Pe,at.plus(pe);var pt=at.e/cr,Lt=pe.e/cr,St=at.c,on=pe.c;if(!pt||!Lt){if(!St||!on)return St?(pe.s=-Pe,pe):new Ze(on?at:NaN);if(!St[0]||!on[0])return on[0]?(pe.s=-Pe,pe):new Ze(St[0]?at:ee==3?-0:0)}if(pt=yo(pt),Lt=yo(Lt),St=St.slice(),ut=pt-Lt){for((Re=ut<0)?(ut=-ut,Ie=St):(Lt=pt,Ie=on),Ie.reverse(),Pe=ut;Pe--;Ie.push(0));Ie.reverse()}else for(Oe=(Re=(ut=St.length)<(Pe=on.length))?ut:Pe,ut=Pe=0;Pe<Oe;Pe++)if(St[Pe]!=on[Pe]){Re=St[Pe]<on[Pe];break}if(Re&&(Ie=St,St=on,on=Ie,pe.s=-pe.s),Pe=(Oe=on.length)-(Ne=St.length),Pe>0)for(;Pe--;St[Ne++]=0);for(Pe=is-1;Oe>ut;){if(St[--Oe]<on[Oe]){for(Ne=Oe;Ne&&!St[--Ne];St[Ne]=Pe);--St[Ne],St[Oe]+=is}St[Oe]-=on[Oe]}for(;St[0]==0;St.splice(0,1),--Lt);return St[0]?Ot(pe,St,Lt):(pe.s=ee==3?-1:1,pe.c=[pe.e=0],pe)},E.modulo=E.mod=function(pe,Pe){var Ne,Oe,Ie=this;return pe=new Ze(pe,Pe),!Ie.c||!pe.s||pe.c&&!pe.c[0]?new Ze(NaN):!pe.c||Ie.c&&!Ie.c[0]?new Ze(Ie):(At==9?(Oe=pe.s,pe.s=1,Ne=f(Ie,pe,0,3),pe.s=Oe,Ne.s*=Oe):Ne=f(Ie,pe,0,At),pe=Ie.minus(Ne.times(pe)),!pe.c[0]&&At==1&&(pe.s=Ie.s),pe)},E.multipliedBy=E.times=function(pe,Pe){var Ne,Oe,Ie,Re,at,ut,pt,Lt,St,on,jn,Vn,Xn,Jr,pi,Fr=this,Li=Fr.c,as=(pe=new Ze(pe,Pe)).c;if(!Li||!as||!Li[0]||!as[0])return!Fr.s||!pe.s||Li&&!Li[0]&&!as||as&&!as[0]&&!Li?pe.c=pe.e=pe.s=null:(pe.s*=Fr.s,!Li||!as?pe.c=pe.e=null:(pe.c=[0],pe.e=0)),pe;for(Oe=yo(Fr.e/cr)+yo(pe.e/cr),pe.s*=Fr.s,pt=Li.length,on=as.length,pt<on&&(Xn=Li,Li=as,as=Xn,Ie=pt,pt=on,on=Ie),Ie=pt+on,Xn=[];Ie--;Xn.push(0));for(Jr=is,pi=Vs,Ie=on;--Ie>=0;){for(Ne=0,jn=as[Ie]%pi,Vn=as[Ie]/pi|0,at=pt,Re=Ie+at;Re>Ie;)Lt=Li[--at]%pi,St=Li[at]/pi|0,ut=Vn*Lt+St*jn,Lt=jn*Lt+ut%pi*pi+Xn[Re]+Ne,Ne=(Lt/Jr|0)+(ut/pi|0)+Vn*St,Xn[Re--]=Lt%Jr;Xn[Re]=Ne}return Ne?++Oe:Xn.splice(0,1),Ot(pe,Xn,Oe)},E.negated=function(){var pe=new Ze(this);return pe.s=-pe.s||null,pe},E.plus=function(pe,Pe){var Ne,Oe=this,Ie=Oe.s;if(pe=new Ze(pe,Pe),Pe=pe.s,!Ie||!Pe)return new Ze(NaN);if(Ie!=Pe)return pe.s=-Pe,Oe.minus(pe);var Re=Oe.e/cr,at=pe.e/cr,ut=Oe.c,pt=pe.c;if(!Re||!at){if(!ut||!pt)return new Ze(Ie/0);if(!ut[0]||!pt[0])return pt[0]?pe:new Ze(ut[0]?Oe:Ie*0)}if(Re=yo(Re),at=yo(at),ut=ut.slice(),Ie=Re-at){for(Ie>0?(at=Re,Ne=pt):(Ie=-Ie,Ne=ut),Ne.reverse();Ie--;Ne.push(0));Ne.reverse()}for(Ie=ut.length,Pe=pt.length,Ie-Pe<0&&(Ne=pt,pt=ut,ut=Ne,Pe=Ie),Ie=0;Pe;)Ie=(ut[--Pe]=ut[Pe]+pt[Pe]+Ie)/is|0,ut[Pe]=is===ut[Pe]?0:ut[Pe]%is;return Ie&&(ut=[Ie].concat(ut),++at),Ot(pe,ut,at)},E.precision=E.sd=function(pe,Pe){var Ne,Oe,Ie,Re=this;if(pe!=null&&pe!==!!pe)return a(pe,1,qo),Pe==null?Pe=ee:a(Pe,0,8),_t(new Ze(Re),pe,Pe);if(!(Ne=Re.c))return null;if(Ie=Ne.length-1,Oe=Ie*cr+1,Ie=Ne[Ie]){for(;Ie%10==0;Ie/=10,Oe--);for(Ie=Ne[0];Ie>=10;Ie/=10,Oe++);}return pe&&Re.e+1>Oe&&(Oe=Re.e+1),Oe},E.shiftedBy=function(pe){return a(pe,-9007199254740991,xa),this.times("1e"+pe)},E.squareRoot=E.sqrt=function(){var pe,Pe,Ne,Oe,Ie,Re=this,at=Re.c,ut=Re.s,pt=Re.e,Lt=Y+4,St=new Ze("0.5");if(ut!==1||!at||!at[0])return new Ze(!ut||ut<0&&(!at||at[0])?NaN:at?Re:1/0);if(ut=Math.sqrt(+kt(Re)),ut==0||ut==1/0?(Pe=_o(at),(Pe.length+pt)%2==0&&(Pe+="0"),ut=Math.sqrt(+Pe),pt=yo((pt+1)/2)-(pt<0||pt%2),ut==1/0?Pe="5e"+pt:(Pe=ut.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+pt),Ne=new Ze(Pe)):Ne=new Ze(ut+""),Ne.c[0]){for(pt=Ne.e,ut=pt+Lt,ut<3&&(ut=0);;)if(Ie=Ne,Ne=St.times(Ie.plus(f(Re,Ie,Lt,1))),_o(Ie.c).slice(0,ut)===(Pe=_o(Ne.c)).slice(0,ut))if(Ne.e<pt&&--ut,Pe=Pe.slice(ut-3,ut+1),Pe=="9999"||!Oe&&Pe=="4999"){if(!Oe&&(_t(Ie,Ie.e+Y+2,0),Ie.times(Ie).eq(Re))){Ne=Ie;break}Lt+=4,ut+=4,Oe=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(_t(Ne,Ne.e+Y+2,1),pe=!Ne.times(Ne).eq(Re));break}}return _t(Ne,Ne.e+Y+1,ee,pe)},E.toExponential=function(pe,Pe){return pe!=null&&(a(pe,0,qo),pe++),tt(this,pe,Pe,1)},E.toFixed=function(pe,Pe){return pe!=null&&(a(pe,0,qo),pe=pe+this.e+1),tt(this,pe,Pe)},E.toFormat=function(pe,Pe,Ne){var Oe,Ie=this;if(Ne==null)pe!=null&&Pe&&typeof Pe=="object"?(Ne=Pe,Pe=null):pe&&typeof pe=="object"?(Ne=pe,pe=Pe=null):Ne=yn;else if(typeof Ne!="object")throw Error(wi+"Argument not an object: "+Ne);if(Oe=Ie.toFixed(pe,Pe),Ie.c){var Re,at=Oe.split("."),ut=+Ne.groupSize,pt=+Ne.secondaryGroupSize,Lt=Ne.groupSeparator||"",St=at[0],on=at[1],jn=Ie.s<0,Vn=jn?St.slice(1):St,Xn=Vn.length;if(pt&&(Re=ut,ut=pt,pt=Re,Xn-=Re),ut>0&&Xn>0){for(Re=Xn%ut||ut,St=Vn.substr(0,Re);Re<Xn;Re+=ut)St+=Lt+Vn.substr(Re,ut);pt>0&&(St+=Lt+Vn.slice(Re)),jn&&(St="-"+St)}Oe=on?St+(Ne.decimalSeparator||"")+((pt=+Ne.fractionGroupSize)?on.replace(new RegExp("\\d{"+pt+"}\\B","g"),"$&"+(Ne.fractionGroupSeparator||"")):on):St}return(Ne.prefix||"")+Oe+(Ne.suffix||"")},E.toFraction=function(pe){var Pe,Ne,Oe,Ie,Re,at,ut,pt,Lt,St,on,jn,Vn=this,Xn=Vn.c;if(pe!=null&&(ut=new Ze(pe),!ut.isInteger()&&(ut.c||ut.s!==1)||ut.lt(F)))throw Error(wi+"Argument "+(ut.isInteger()?"out of range: ":"not an integer: ")+kt(ut));if(!Xn)return new Ze(Vn);for(Pe=new Ze(F),Lt=Ne=new Ze(F),Oe=pt=new Ze(F),jn=_o(Xn),Re=Pe.e=jn.length-Vn.e-1,Pe.c[0]=La[(at=Re%cr)<0?cr+at:at],pe=!pe||ut.comparedTo(Pe)>0?Re>0?Pe:Lt:ut,at=je,je=1/0,ut=new Ze(jn),pt.c[0]=0;St=f(ut,Pe,0,1),Ie=Ne.plus(St.times(Oe)),Ie.comparedTo(pe)!=1;)Ne=Oe,Oe=Ie,Lt=pt.plus(St.times(Ie=Lt)),pt=Ie,Pe=ut.minus(St.times(Ie=Pe)),ut=Ie;return Ie=f(pe.minus(Ne),Oe,0,1),pt=pt.plus(Ie.times(Lt)),Ne=Ne.plus(Ie.times(Oe)),pt.s=Lt.s=Vn.s,Re=Re*2,on=f(Lt,Oe,Re,ee).minus(Vn).abs().comparedTo(f(pt,Ne,Re,ee).minus(Vn).abs())<1?[Lt,Oe]:[pt,Ne],je=at,on},E.toNumber=function(){return+kt(this)},E.toPrecision=function(pe,Pe){return pe!=null&&a(pe,1,qo),tt(this,pe,Pe,2)},E.toString=function(pe){var Pe,Ne=this,Oe=Ne.s,Ie=Ne.e;return Ie===null?Oe?(Pe="Infinity",Oe<0&&(Pe="-"+Pe)):Pe="NaN":(pe==null?Pe=Ie<=ue||Ie>=Se?S(_o(Ne.c),Ie):$(_o(Ne.c),Ie,"0"):pe===10&&ar?(Ne=_t(new Ze(Ne),Y+Ie+1,ee),Pe=$(_o(Ne.c),Ne.e,"0")):(a(pe,2,xn.length,"Base"),Pe=v($(_o(Ne.c),Ie,"0"),10,pe,Oe,!0)),Oe<0&&Ne.c[0]&&(Pe="-"+Pe)),Pe},E.valueOf=E.toJSON=function(){return kt(this)},E._isBigNumber=!0,E[Symbol.toStringTag]="BigNumber",E[Symbol.for("nodejs.util.inspect.custom")]=E.valueOf,l!=null&&Ze.set(l),Ze}function yo(l){var f=l|0;return l>0||l===f?f:f-1}function _o(l){for(var f,v,x=1,E=l.length,F=l[0]+"";x<E;){for(f=l[x++]+"",v=cr-f.length;v--;f="0"+f);F+=f}for(E=F.length;F.charCodeAt(--E)===48;);return F.slice(0,E+1||1)}function Hs(l,f){var v,x,E=l.c,F=f.c,Y=l.s,ee=f.s,ue=l.e,Se=f.e;if(!Y||!ee)return null;if(v=E&&!E[0],x=F&&!F[0],v||x)return v?x?0:-ee:Y;if(Y!=ee)return Y;if(v=Y<0,x=ue==Se,!E||!F)return x?0:!E^v?1:-1;if(!x)return ue>Se^v?1:-1;for(ee=(ue=E.length)<(Se=F.length)?ue:Se,Y=0;Y<ee;Y++)if(E[Y]!=F[Y])return E[Y]>F[Y]^v?1:-1;return ue==Se?0:ue>Se^v?1:-1}function a(l,f,v,x){if(l<f||l>v||l!==oo(l))throw Error(wi+(x||"Argument")+(typeof l=="number"?l<f||l>v?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var f=l.c.length-1;return yo(l.e/cr)==f&&l.c[f]%2!=0}function S(l,f){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(f<0?"e":"e+")+f}function $(l,f,v){var x,E;if(f<0){for(E=v+".";++f;E+=v);l=E+l}else if(x=l.length,++f>x){for(E=v,f-=x;--f;E+=v);l+=E}else f<x&&(l=l.slice(0,f)+"."+l.slice(f));return l}var re=vc(),Ee=re,st=class{constructor(l){zt(this,"key");zt(this,"left",null);zt(this,"right",null);this.key=l}},Ct=class extends st{constructor(l){super(l)}},Ft=class{constructor(){zt(this,"size",0);zt(this,"modificationCount",0);zt(this,"splayCount",0)}splay(l){let f=this.root;if(f==null)return this.compare(l,l),-1;let v=null,x=null,E=null,F=null,Y=f,ee=this.compare,ue;for(;;)if(ue=ee(Y.key,l),ue>0){let Se=Y.left;if(Se==null||(ue=ee(Se.key,l),ue>0&&(Y.left=Se.right,Se.right=Y,Y=Se,Se=Y.left,Se==null)))break;v==null?x=Y:v.left=Y,v=Y,Y=Se}else if(ue<0){let Se=Y.right;if(Se==null||(ue=ee(Se.key,l),ue<0&&(Y.right=Se.left,Se.left=Y,Y=Se,Se=Y.right,Se==null)))break;E==null?F=Y:E.right=Y,E=Y,Y=Se}else break;return E!=null&&(E.right=Y.left,Y.left=F),v!=null&&(v.left=Y.right,Y.right=x),this.root!==Y&&(this.root=Y,this.splayCount++),ue}splayMin(l){let f=l,v=f.left;for(;v!=null;){let x=v;f.left=x.right,x.right=f,f=x,v=f.left}return f}splayMax(l){let f=l,v=f.right;for(;v!=null;){let x=v;f.right=x.left,x.left=f,f=x,v=f.right}return f}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let f=this.root,v=f,x=f.left;if(this.size--,x==null)this.root=f.right;else{let E=f.right;f=this.splayMax(x),f.right=E,this.root=f}return this.modificationCount++,v}addNewRoot(l,f){this.size++,this.modificationCount++;let v=this.root;if(v==null){this.root=l;return}f<0?(l.left=v,l.right=v.right,v.right=null):(l.right=v,l.left=v.left,v.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,f)=>l<f?-1:l>f?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},sn=class Fd extends Ft{constructor(v,x){super();zt(this,"root",null);zt(this,"compare");zt(this,"validKey");zt(this,En,"[object Set]");this.compare=v??this.defaultCompare(),this.validKey=x??(E=>E!=null&&E!=null)}delete(v){return this.validKey(v)?this._delete(v)!=null:!1}deleteAll(v){for(let x of v)this.delete(x)}forEach(v){let x=this[Symbol.iterator](),E;for(;E=x.next(),!E.done;)v(E.value,E.value,this)}add(v){let x=this.splay(v);return x!=0&&this.addNewRoot(new Ct(v),x),this}addAndReturn(v){let x=this.splay(v);return x!=0&&this.addNewRoot(new Ct(v),x),this.root.key}addAll(v){for(let x of v)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let E=x.right;for(;E!=null;)x=E,E=x.right;return x.key}firstAfter(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let E=x.left;for(;E!=null;)x=E,E=x.left;return x.key}retainAll(v){let x=new Fd(this.compare,this.validKey),E=this.modificationCount;for(let F of v){if(E!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(F)&&this.splay(F)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(v){return!this.validKey(v)||this.splay(v)!=0?null:this.root.key}intersection(v){let x=new Fd(this.compare,this.validKey);for(let E of this)v.has(E)&&x.add(E);return x}difference(v){let x=new Fd(this.compare,this.validKey);for(let E of this)v.has(E)||x.add(E);return x}union(v){let x=this.clone();return x.addAll(v),x}clone(){let v=new Fd(this.compare,this.validKey);return v.size=this.size,v.root=this.copyNode(this.root),v}copyNode(v){if(v==null)return null;function x(F,Y){let ee,ue;do{if(ee=F.left,ue=F.right,ee!=null){let Se=new Ct(ee.key);Y.left=Se,x(ee,Se)}if(ue!=null){let Se=new Ct(ue.key);Y.right=Se,F=ue,Y=Se}}while(ue!=null)}let E=new Ct(v.key);return x(v,E),E}toSet(){return this.clone()}entries(){return new Pr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Yn=Symbol.iterator,En=Symbol.toStringTag,Yn)](){return new Kn(this.wrap())}},On=class{constructor(l){zt(this,"tree");zt(this,"path",new Array);zt(this,"modificationCount",null);zt(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let v=this.tree.getRoot();for(;v!=null;)this.path.push(v),v=v.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],f=l.right;if(f!=null){for(;f!=null;)this.path.push(f),f=f.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},Kn=class extends On{getValue(l){return l.key}},Pr=class extends On{getValue(l){return[l.key,l.key]}},so=l=>l,$i=l=>{if(l){let f=new sn(rs(l)),v=new sn(rs(l)),x=(F,Y)=>Y.addAndReturn(F),E=F=>({x:x(F.x,f),y:x(F.y,v)});return E({x:new Ee(0),y:new Ee(0)}),E}return so},bo=l=>({set:f=>{Ti=bo(f)},reset:()=>bo(l),compare:rs(l),snap:$i(l),orient:ks(l)}),Ti=bo(),os=(l,f)=>l.ll.x.isLessThanOrEqualTo(f.x)&&f.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(f.y)&&f.y.isLessThanOrEqualTo(l.ur.y),yc=(l,f)=>{if(f.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(f.ll.x)||f.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(f.ll.y))return null;let v=l.ll.x.isLessThan(f.ll.x)?f.ll.x:l.ll.x,x=l.ur.x.isLessThan(f.ur.x)?l.ur.x:f.ur.x,E=l.ll.y.isLessThan(f.ll.y)?f.ll.y:l.ll.y,F=l.ur.y.isLessThan(f.ur.y)?l.ur.y:f.ur.y;return{ll:{x:v,y:E},ur:{x,y:F}}},la=(l,f)=>l.x.times(f.y).minus(l.y.times(f.x)),Gs=(l,f)=>l.x.times(f.x).plus(l.y.times(f.y)),Ts=l=>Gs(l,l).sqrt(),Eh=(l,f,v)=>{let x={x:f.x.minus(l.x),y:f.y.minus(l.y)},E={x:v.x.minus(l.x),y:v.y.minus(l.y)};return la(E,x).div(Ts(E)).div(Ts(x))},Jl=(l,f,v)=>{let x={x:f.x.minus(l.x),y:f.y.minus(l.y)},E={x:v.x.minus(l.x),y:v.y.minus(l.y)};return Gs(E,x).div(Ts(E)).div(Ts(x))},Xr=(l,f,v)=>f.y.isZero()?null:{x:l.x.plus(f.x.div(f.y).times(v.minus(l.y))),y:v},Do=(l,f,v)=>f.x.isZero()?null:{x:v,y:l.y.plus(f.y.div(f.x).times(v.minus(l.x)))},Te=(l,f,v,x)=>{if(f.x.isZero())return Do(v,x,l.x);if(x.x.isZero())return Do(l,f,v.x);if(f.y.isZero())return Xr(v,x,l.y);if(x.y.isZero())return Xr(l,f,v.y);let E=la(f,x);if(E.isZero())return null;let F={x:v.x.minus(l.x),y:v.y.minus(l.y)},Y=la(F,f).div(E),ee=la(F,x).div(E),ue=l.x.plus(ee.times(f.x)),Se=v.x.plus(Y.times(x.x)),Ke=l.y.plus(ee.times(f.y)),je=v.y.plus(Y.times(x.y)),gt=ue.plus(Se).div(2),At=Ke.plus(je).div(2);return{x:gt,y:At}},ss=class nx{constructor(f,v){zt(this,"point");zt(this,"isLeft");zt(this,"segment");zt(this,"otherSE");zt(this,"consumedBy");f.events===void 0?f.events=[this]:f.events.push(this),this.point=f,this.isLeft=v}static compare(f,v){let x=nx.comparePoints(f.point,v.point);return x!==0?x:(f.point!==v.point&&f.link(v),f.isLeft!==v.isLeft?f.isLeft?1:-1:wo.compare(f.segment,v.segment))}static comparePoints(f,v){return f.x.isLessThan(v.x)?-1:f.x.isGreaterThan(v.x)?1:f.y.isLessThan(v.y)?-1:f.y.isGreaterThan(v.y)?1:0}link(f){if(f.point===this.point)throw new Error("Tried to link already linked events");let v=f.point.events;for(let x=0,E=v.length;x<E;x++){let F=v[x];this.point.events.push(F),F.point=this.point}this.checkForConsuming()}checkForConsuming(){let f=this.point.events.length;for(let v=0;v<f;v++){let x=this.point.events[v];if(x.segment.consumedBy===void 0)for(let E=v+1;E<f;E++){let F=this.point.events[E];F.consumedBy===void 0&&x.otherSE.point.events===F.otherSE.point.events&&x.segment.consume(F.segment)}}}getAvailableLinkedEvents(){let f=[];for(let v=0,x=this.point.events.length;v<x;v++){let E=this.point.events[v];E!==this&&!E.segment.ringOut&&E.segment.isInResult()&&f.push(E)}return f}getLeftmostComparator(f){let v=new Map,x=E=>{let F=E.otherSE;v.set(E,{sine:Eh(this.point,f.point,F.point),cosine:Jl(this.point,f.point,F.point)})};return(E,F)=>{v.has(E)||x(E),v.has(F)||x(F);let{sine:Y,cosine:ee}=v.get(E),{sine:ue,cosine:Se}=v.get(F);return Y.isGreaterThanOrEqualTo(0)&&ue.isGreaterThanOrEqualTo(0)?ee.isLessThan(Se)?1:ee.isGreaterThan(Se)?-1:0:Y.isLessThan(0)&&ue.isLessThan(0)?ee.isLessThan(Se)?-1:ee.isGreaterThan(Se)?1:0:ue.isLessThan(Y)?-1:ue.isGreaterThan(Y)?1:0}}},wu=0,wo=class I0{constructor(f,v,x,E){zt(this,"id");zt(this,"leftSE");zt(this,"rightSE");zt(this,"rings");zt(this,"windings");zt(this,"ringOut");zt(this,"consumedBy");zt(this,"prev");zt(this,"_prevInResult");zt(this,"_beforeState");zt(this,"_afterState");zt(this,"_isInResult");this.id=++wu,this.leftSE=f,f.segment=this,f.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=f,this.rings=x,this.windings=E}static compare(f,v){let x=f.leftSE.point.x,E=v.leftSE.point.x,F=f.rightSE.point.x,Y=v.rightSE.point.x;if(Y.isLessThan(x))return 1;if(F.isLessThan(E))return-1;let ee=f.leftSE.point.y,ue=v.leftSE.point.y,Se=f.rightSE.point.y,Ke=v.rightSE.point.y;if(x.isLessThan(E)){if(ue.isLessThan(ee)&&ue.isLessThan(Se))return 1;if(ue.isGreaterThan(ee)&&ue.isGreaterThan(Se))return-1;let je=f.comparePoint(v.leftSE.point);if(je<0)return 1;if(je>0)return-1;let gt=v.comparePoint(f.rightSE.point);return gt!==0?gt:-1}if(x.isGreaterThan(E)){if(ee.isLessThan(ue)&&ee.isLessThan(Ke))return-1;if(ee.isGreaterThan(ue)&&ee.isGreaterThan(Ke))return 1;let je=v.comparePoint(f.leftSE.point);if(je!==0)return je;let gt=f.comparePoint(v.rightSE.point);return gt<0?1:gt>0?-1:1}if(ee.isLessThan(ue))return-1;if(ee.isGreaterThan(ue))return 1;if(F.isLessThan(Y)){let je=v.comparePoint(f.rightSE.point);if(je!==0)return je}if(F.isGreaterThan(Y)){let je=f.comparePoint(v.rightSE.point);if(je<0)return 1;if(je>0)return-1}if(!F.eq(Y)){let je=Se.minus(ee),gt=F.minus(x),At=Ke.minus(ue),Yt=Y.minus(E);if(je.isGreaterThan(gt)&&At.isLessThan(Yt))return 1;if(je.isLessThan(gt)&&At.isGreaterThan(Yt))return-1}return F.isGreaterThan(Y)?1:F.isLessThan(Y)||Se.isLessThan(Ke)?-1:Se.isGreaterThan(Ke)?1:f.id<v.id?-1:f.id>v.id?1:0}static fromRing(f,v,x){let E,F,Y,ee=ss.comparePoints(f,v);if(ee<0)E=f,F=v,Y=1;else if(ee>0)E=v,F=f,Y=-1;else throw new Error(`Tried to create degenerate segment at [${f.x}, ${f.y}]`);let ue=new ss(E,!0),Se=new ss(F,!1);return new I0(ue,Se,[x],[Y])}replaceRightSE(f){this.rightSE=f,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let f=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:f.isLessThan(v)?f:v},ur:{x:this.rightSE.point.x,y:f.isGreaterThan(v)?f:v}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(f){return f.x.eq(this.leftSE.point.x)&&f.y.eq(this.leftSE.point.y)||f.x.eq(this.rightSE.point.x)&&f.y.eq(this.rightSE.point.y)}comparePoint(f){return Ti.orient(this.leftSE.point,f,this.rightSE.point)}getIntersection(f){let v=this.bbox(),x=f.bbox(),E=yc(v,x);if(E===null)return null;let F=this.leftSE.point,Y=this.rightSE.point,ee=f.leftSE.point,ue=f.rightSE.point,Se=os(v,ee)&&this.comparePoint(ee)===0,Ke=os(x,F)&&f.comparePoint(F)===0,je=os(v,ue)&&this.comparePoint(ue)===0,gt=os(x,Y)&&f.comparePoint(Y)===0;if(Ke&&Se)return gt&&!je?Y:!gt&&je?ue:null;if(Ke)return je&&F.x.eq(ue.x)&&F.y.eq(ue.y)?null:F;if(Se)return gt&&Y.x.eq(ee.x)&&Y.y.eq(ee.y)?null:ee;if(gt&&je)return null;if(gt)return Y;if(je)return ue;let At=Te(F,this.vector(),ee,f.vector());return At===null||!os(E,At)?null:Ti.snap(At)}split(f){let v=[],x=f.events!==void 0,E=new ss(f,!0),F=new ss(f,!1),Y=this.rightSE;this.replaceRightSE(F),v.push(F),v.push(E);let ee=new I0(E,Y,this.rings.slice(),this.windings.slice());return ss.comparePoints(ee.leftSE.point,ee.rightSE.point)>0&&ee.swapEvents(),ss.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(E.checkForConsuming(),F.checkForConsuming()),v}swapEvents(){let f=this.rightSE;this.rightSE=this.leftSE,this.leftSE=f,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let v=0,x=this.windings.length;v<x;v++)this.windings[v]*=-1}consume(f){let v=this,x=f;for(;v.consumedBy;)v=v.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let E=I0.compare(v,x);if(E!==0){if(E>0){let F=v;v=x,x=F}if(v.prev===x){let F=v;v=x,x=F}for(let F=0,Y=x.rings.length;F<Y;F++){let ee=x.rings[F],ue=x.windings[F],Se=v.rings.indexOf(ee);Se===-1?(v.rings.push(ee),v.windings.push(ue)):v.windings[Se]+=ue}x.rings=null,x.windings=null,x.consumedBy=v,x.leftSE.consumedBy=v.leftSE,x.rightSE.consumedBy=v.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let f=this.prev.consumedBy||this.prev;this._beforeState=f.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let f=this.beforeState();this._afterState={rings:f.rings.slice(0),windings:f.windings.slice(0),multiPolys:[]};let v=this._afterState.rings,x=this._afterState.windings,E=this._afterState.multiPolys;for(let ee=0,ue=this.rings.length;ee<ue;ee++){let Se=this.rings[ee],Ke=this.windings[ee],je=v.indexOf(Se);je===-1?(v.push(Se),x.push(Ke)):x[je]+=Ke}let F=[],Y=[];for(let ee=0,ue=v.length;ee<ue;ee++){if(x[ee]===0)continue;let Se=v[ee],Ke=Se.poly;if(Y.indexOf(Ke)===-1)if(Se.isExterior)F.push(Ke);else{Y.indexOf(Ke)===-1&&Y.push(Ke);let je=F.indexOf(Se.poly);je!==-1&&F.splice(je,1)}}for(let ee=0,ue=F.length;ee<ue;ee++){let Se=F[ee].multiPoly;E.indexOf(Se)===-1&&E.push(Se)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let f=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(Wc.type){case"union":{let x=f.length===0,E=v.length===0;this._isInResult=x!==E;break}case"intersection":{let x,E;f.length<v.length?(x=f.length,E=v.length):(x=v.length,E=f.length),this._isInResult=E===Wc.numMultiPolys&&x<E;break}case"xor":{let x=Math.abs(f.length-v.length);this._isInResult=x%2===1;break}case"difference":{let x=E=>E.length===1&&E[0].isSubject;this._isInResult=x(f)!==x(v);break}}return this._isInResult}},Br=class{constructor(l,f,v){zt(this,"poly");zt(this,"isExterior");zt(this,"segments");zt(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=f,this.isExterior=v,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=Ti.snap({x:new Ee(l[0][0]),y:new Ee(l[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let E=x;for(let F=1,Y=l.length;F<Y;F++){if(typeof l[F][0]!="number"||typeof l[F][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ee=Ti.snap({x:new Ee(l[F][0]),y:new Ee(l[F][1])});ee.x.eq(E.x)&&ee.y.eq(E.y)||(this.segments.push(wo.fromRing(E,ee,this)),ee.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ee.x),ee.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ee.y),ee.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ee.x),ee.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ee.y),E=ee)}(!x.x.eq(E.x)||!x.y.eq(E.y))&&this.segments.push(wo.fromRing(E,x,this))}getSweepEvents(){let l=[];for(let f=0,v=this.segments.length;f<v;f++){let x=this.segments[f];l.push(x.leftSE),l.push(x.rightSE)}return l}},Gc=class{constructor(l,f){zt(this,"multiPoly");zt(this,"exteriorRing");zt(this,"interiorRings");zt(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Br(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let v=1,x=l.length;v<x;v++){let E=new Br(l[v],this,!1);E.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=E.bbox.ll.x),E.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=E.bbox.ll.y),E.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=E.bbox.ur.x),E.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=E.bbox.ur.y),this.interiorRings.push(E)}this.multiPoly=f}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let f=0,v=this.interiorRings.length;f<v;f++){let x=this.interiorRings[f].getSweepEvents();for(let E=0,F=x.length;E<F;E++)l.push(x[E])}return l}},lf=class{constructor(l,f){zt(this,"isSubject");zt(this,"polys");zt(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Ee(Number.POSITIVE_INFINITY),y:new Ee(Number.POSITIVE_INFINITY)},ur:{x:new Ee(Number.NEGATIVE_INFINITY),y:new Ee(Number.NEGATIVE_INFINITY)}};for(let v=0,x=l.length;v<x;v++){let E=new Gc(l[v],this);E.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=E.bbox.ll.x),E.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=E.bbox.ll.y),E.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=E.bbox.ur.x),E.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=E.bbox.ur.y),this.polys.push(E)}this.isSubject=f}getSweepEvents(){let l=[];for(let f=0,v=this.polys.length;f<v;f++){let x=this.polys[f].getSweepEvents();for(let E=0,F=x.length;E<F;E++)l.push(x[E])}return l}},qc=class l1{constructor(f){zt(this,"events");zt(this,"poly");zt(this,"_isExteriorRing");zt(this,"_enclosingRing");this.events=f;for(let v=0,x=f.length;v<x;v++)f[v].segment.ringOut=this;this.poly=null}static factory(f){let v=[];for(let x=0,E=f.length;x<E;x++){let F=f[x];if(!F.isInResult()||F.ringOut)continue;let Y=null,ee=F.leftSE,ue=F.rightSE,Se=[ee],Ke=ee.point,je=[];for(;Y=ee,ee=ue,Se.push(ee),ee.point!==Ke;)for(;;){let gt=ee.getAvailableLinkedEvents();if(gt.length===0){let yn=Se[0].point,xn=Se[Se.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${xn.x}, ${xn.y}].`)}if(gt.length===1){ue=gt[0].otherSE;break}let At=null;for(let yn=0,xn=je.length;yn<xn;yn++)if(je[yn].point===ee.point){At=yn;break}if(At!==null){let yn=je.splice(At)[0],xn=Se.splice(yn.index);xn.unshift(xn[0].otherSE),v.push(new l1(xn.reverse()));continue}je.push({index:Se.length,point:ee.point});let Yt=ee.getLeftmostComparator(Y);ue=gt.sort(Yt)[0].otherSE;break}v.push(new l1(Se))}return v}getGeom(){let f=this.events[0].point,v=[f];for(let Se=1,Ke=this.events.length-1;Se<Ke;Se++){let je=this.events[Se].point,gt=this.events[Se+1].point;Ti.orient(je,f,gt)!==0&&(v.push(je),f=je)}if(v.length===1)return null;let x=v[0],E=v[1];Ti.orient(x,f,E)===0&&v.shift(),v.push(v[0]);let F=this.isExteriorRing()?1:-1,Y=this.isExteriorRing()?0:v.length-1,ee=this.isExteriorRing()?v.length:-1,ue=[];for(let Se=Y;Se!=ee;Se+=F)ue.push([v[Se].x.toNumber(),v[Se].y.toNumber()]);return ue}isExteriorRing(){if(this._isExteriorRing===void 0){let f=this.enclosingRing();this._isExteriorRing=f?!f.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var E,F;let f=this.events[0];for(let Y=1,ee=this.events.length;Y<ee;Y++){let ue=this.events[Y];ss.compare(f,ue)>0&&(f=ue)}let v=f.segment.prevInResult(),x=v?v.prevInResult():null;for(;;){if(!v)return null;if(!x)return v.ringOut;if(x.ringOut!==v.ringOut)return((E=x.ringOut)==null?void 0:E.enclosingRing())!==v.ringOut?v.ringOut:(F=v.ringOut)==null?void 0:F.enclosingRing();v=x.prevInResult(),x=v?v.prevInResult():null}}},Ha=class{constructor(l){zt(this,"exteriorRing");zt(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let f=[l];for(let v=0,x=this.interiorRings.length;v<x;v++){let E=this.interiorRings[v].getGeom();E!==null&&f.push(E)}return f}},_c=class{constructor(l){zt(this,"rings");zt(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let f=0,v=this.polys.length;f<v;f++){let x=this.polys[f].getGeom();x!==null&&l.push(x)}return l}_composePolys(l){var v;let f=[];for(let x=0,E=l.length;x<E;x++){let F=l[x];if(!F.poly)if(F.isExteriorRing())f.push(new Ha(F));else{let Y=F.enclosingRing();Y!=null&&Y.poly||f.push(new Ha(Y)),(v=Y==null?void 0:Y.poly)==null||v.addInterior(F)}}return f}},Ch=class{constructor(l,f=wo.compare){zt(this,"queue");zt(this,"tree");zt(this,"segments");this.queue=l,this.tree=new sn(f),this.segments=[]}process(l){let f=l.segment,v=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(f),v;l.isLeft&&this.tree.add(f);let x=f,E=f;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do E=this.tree.firstAfter(E);while(E!=null&&E.consumedBy!=null);if(l.isLeft){let F=null;if(x){let ee=x.getIntersection(f);if(ee!==null&&(f.isAnEndpoint(ee)||(F=ee),!x.isAnEndpoint(ee))){let ue=this._splitSafely(x,ee);for(let Se=0,Ke=ue.length;Se<Ke;Se++)v.push(ue[Se])}}let Y=null;if(E){let ee=E.getIntersection(f);if(ee!==null&&(f.isAnEndpoint(ee)||(Y=ee),!E.isAnEndpoint(ee))){let ue=this._splitSafely(E,ee);for(let Se=0,Ke=ue.length;Se<Ke;Se++)v.push(ue[Se])}}if(F!==null||Y!==null){let ee=null;F===null?ee=Y:Y===null?ee=F:ee=ss.comparePoints(F,Y)<=0?F:Y,this.queue.delete(f.rightSE),v.push(f.rightSE);let ue=f.split(ee);for(let Se=0,Ke=ue.length;Se<Ke;Se++)v.push(ue[Se])}v.length>0?(this.tree.delete(f),v.push(l)):(this.segments.push(f),f.prev=x)}else{if(x&&E){let F=x.getIntersection(E);if(F!==null){if(!x.isAnEndpoint(F)){let Y=this._splitSafely(x,F);for(let ee=0,ue=Y.length;ee<ue;ee++)v.push(Y[ee])}if(!E.isAnEndpoint(F)){let Y=this._splitSafely(E,F);for(let ee=0,ue=Y.length;ee<ue;ee++)v.push(Y[ee])}}}this.tree.delete(f)}return v}_splitSafely(l,f){this.tree.delete(l);let v=l.rightSE;this.queue.delete(v);let x=l.split(f);return x.push(v),l.consumedBy===void 0&&this.tree.add(l),x}},pd=class{constructor(){zt(this,"type");zt(this,"numMultiPolys")}run(l,f,v){Yu.type=l;let x=[new lf(f,!0)];for(let ue=0,Se=v.length;ue<Se;ue++)x.push(new lf(v[ue],!1));if(Yu.numMultiPolys=x.length,Yu.type==="difference"){let ue=x[0],Se=1;for(;Se<x.length;)yc(x[Se].bbox,ue.bbox)!==null?Se++:x.splice(Se,1)}if(Yu.type==="intersection")for(let ue=0,Se=x.length;ue<Se;ue++){let Ke=x[ue];for(let je=ue+1,gt=x.length;je<gt;je++)if(yc(Ke.bbox,x[je].bbox)===null)return[]}let E=new sn(ss.compare);for(let ue=0,Se=x.length;ue<Se;ue++){let Ke=x[ue].getSweepEvents();for(let je=0,gt=Ke.length;je<gt;je++)E.add(Ke[je])}let F=new Ch(E),Y=null;for(E.size!=0&&(Y=E.first(),E.delete(Y));Y;){let ue=F.process(Y);for(let Se=0,Ke=ue.length;Se<Ke;Se++){let je=ue[Se];je.consumedBy===void 0&&E.add(je)}E.size!=0?(Y=E.first(),E.delete(Y)):Y=null}Ti.reset();let ee=qc.factory(F.segments);return new _c(ee).getGeom()}},Yu=new pd,Wc=Yu,Nl=(l,...f)=>Wc.run("intersection",l,f),md=(l,...f)=>Wc.run("difference",l,f);Ti.set;function Zc(l){let f={type:"Feature"};return f.geometry=l,f}function Kc(l){return l.type==="Feature"?l.geometry:l}function uf(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function cf(l){return Zc({type:"LineString",coordinates:l})}function Sa(l){return Zc({type:"MultiLineString",coordinates:l})}function hf(l){return Zc({type:"Polygon",coordinates:l})}function ff(l){return Zc({type:"MultiPolygon",coordinates:l})}function df(l,f){let v=Kc(l),x=Kc(f),E=Nl(v.coordinates,x.coordinates);return E.length===0?null:E.length===1?hf(E[0]):ff(E)}function b(l,f){let v=Kc(l),x=Kc(f),E=md(v.coordinates,x.coordinates);return E.length===0?null:E.length===1?hf(E[0]):ff(E)}function C(l){return Array.isArray(l)?1+C(l[0]):-1}function q(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let f=uf(l),v=C(f),x=[];return v>1?f.forEach(E=>{x.push(cf(E))}):x.push(l),x}function ie(l){let f=[];return l.eachLayer(v=>{f.push(uf(v.toGeoJSON(15)))}),Sa(f)}Ki.Cut=Ki.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let f=L.polygon(l,this.options.pathOptions);f._latlngInfos=this._layer._latlngInfo,this.cut(f),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:E})=>{this._fireCut(E,x,E),this._fireCut(this._map,x,E),E.pm._fireEdit()}),this._editedLayers=[];let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},cut(l){let f=this._map._layers,v=l._latlngInfos||[];Object.keys(f).map(x=>f[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==l).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let E=!!ns(l.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return E||x instanceof L.Polyline&&!(x instanceof L.Polygon)?E:!!df(l.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let E;if(x instanceof L.Polygon){E=L.polygon(x.getLatLngs());let ue=E.getLatLngs();v.forEach(Se=>{if(Se&&Se.snapInfo){let{latlng:Ke}=Se,je=this._calcClosestLayer(Ke,[E]);if(je&&je.segment&&je.distance<this.options.snapDistance){let{segment:gt}=je;if(gt&&gt.length===2){let{indexPath:At,parentPath:Yt,newIndex:yn}=L.PM.Utils._getIndexFromSegment(ue,gt);(At.length>1?(0,xi.default)(ue,Yt):ue).splice(yn,0,Ke)}}}})}else E=x;let F=this._cutLayer(l,E),Y=L.geoJSON(F,x.options);Y.getLayers().length===1&&([Y]=Y.getLayers()),this._setPane(Y,"layerPane");let ee=Y.addTo(this._map.pm._getContainingLayer());if(ee.pm.enable(x.pm.options),ee.pm.disable(),x._pmTempLayer=!0,l._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),ee.getLayers&&ee.getLayers().length===0&&this._map.pm.removeLayer({target:ee}),ee instanceof L.LayerGroup?(ee.eachLayer(ue=>{this._addDrawnLayerProp(ue)}),this._addDrawnLayerProp(ee)):this._addDrawnLayerProp(ee),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ue=this.options.layersToCut.indexOf(x);ue>-1&&this.options.layersToCut.splice(ue,1)}this._editedLayers.push({layer:ee,originalLayer:x})})},_cutLayer(l,f){let v=L.geoJSON(),x;if(f instanceof L.Polygon)x=b(f.toGeoJSON(15),l.toGeoJSON(15));else{let E=q(f);E.forEach(F=>{let Y=Wn(F,l.toGeoJSON(15)),ee;Y&&Y.features.length>0?ee=L.geoJSON(Y):ee=L.geoJSON(F),ee.getLayers().forEach(ue=>{ra(l.toGeoJSON(15),ue.toGeoJSON(15))||ue.addTo(v)})}),E.length>1?x=ie(v):x=v.toGeoJSON(15)}return x},_change:L.Util.falseFn}),Ki.Text=Ki.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let f=l;f.target=this._hintMarker,this._handleSnapping(f)}},_createMarker(l){var E,F,Y,ee;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(E=this.options.textOptions)==null?void 0:E.className){let ue=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ue)}let v=this._createTextIcon(this.textArea),x=new L.Marker(f,{textMarker:!0,_textMarkerOverPM:!0,icon:v});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:((F=this.options.textOptions)==null?void 0:F.removeIfEmpty)??!0});let ue=((Y=this.options.textOptions)==null?void 0:Y.focusAfterDraw)??!0;x.pm._createTextMarker(ue),(ee=this.options.textOptions)!=null&&ee.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var ye={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ni(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(ni(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ni(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(ni(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let f=l.touches?l.touches[0]:l,v={originalEvent:f,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(f),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent(l){let f=l.touches?l.touches[0]:l,v={originalEvent:f,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(f),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent(l){let f={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(f.containerPoint=this._map.mouseEventToContainerPoint(l),f.latlng=this._map.containerPointToLatLng(f.containerPoint)),this._dragMixinOnMouseUp(f),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let f=l._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!f&&!v?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!f&&!v?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let f=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(f,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let f=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,f&&L.DomUtil.removeClass(f,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:f}=l,v={lat:f.lat-this._tempDragCoord.lat,lng:f.lng-this._tempDragCoord.lng},x=E=>E.map(F=>{if(Array.isArray(F))return x(F);let Y={lat:F.lat+v.lat,lng:F.lng+v.lng};return(F.alt||F.alt===0)&&(Y.alt=F.alt),Y});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let E=x([this._layer.getLatLng()]);this._layer.setLatLng(E[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let E=this._layer.getLatLng();this._layer._snapped&&(E=this._layer._orgLatLng);let F=x([E]);this._layer.setLatLng(F[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let E=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(E),this._fireChange(this._layer.getBounds(),"Edit")}else{let E=x(this._layer.getLatLngs());this._layer.setLatLngs(E),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=f,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,f){if(this.enabled())return!1;if(!f._fromLayerSync&&this._layer===f.target&&this.options.syncLayersOnDrag){f._fromLayerSync=!0;let v=[];if(L.Util.isArray(this.options.syncLayersOnDrag))v=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(v=v.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let E=this._parentLayerGroup[x];E.pm&&(v=E.pm.getLayers(!0))}return L.Util.isArray(v)&&v.length>0&&(v=v.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),v.forEach(x=>{x!==this._layer&&x.pm[l]&&(x._snapped=!1,x.pm[l](f))})),v.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ce=ye,Ae=h(zi());function ke(l,f,v,x){return v.unproject(f.transform(v.project(l,x)),x)}function Be(l,f,v){let x=v.getMaxZoom();if(x===1/0&&(x=v.getZoom()),L.Util.isArray(l)){let E=[];return l.forEach(F=>{E.push(Be(F,f,v))}),E}return l instanceof L.LatLng?ke(l,f,v,x):null}function He(l,f){f instanceof L.Layer&&(f=f.getLatLng());let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.project(f,v)}function ft(l,f){let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.unproject(f,v)}var Tt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=He(this._map,this._rotationOriginLatLng),this._rotationStartPoint=He(this._map,l.target.getLatLng()),this._initialRotateLatLng=Ms(this._layer),this._startAngle=this.getAngle();let f=Ms(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,f),this._fireRotationStart(this._map,f)},_onRotate(l){let f=He(this._map,l.target.getLatLng()),v=this._rotationStartPoint,x=this._rotationOriginPoint,E=Math.atan2(f.y-x.y,f.x-x.x)-Math.atan2(v.y-x.y,v.x-x.x);this._layer.setLatLngs(this._rotateLayer(E,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let F=this;function Y(Ke,je=[],gt=-1){if(gt>-1&&je.push(gt),L.Util.isArray(Ke[0]))Ke.forEach((At,Yt)=>Y(At,je.slice(),Yt));else{let At=je.length>0?(0,Ae.default)(F._markers,je):F._markers[0];Ke.forEach((Yt,yn)=>{At[yn].setLatLng(Yt)})}}Y(this._layer.getLatLngs());let ee=Ms(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(E,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ue=E*180/Math.PI;ue=ue<0?ue+360:ue;let Se=ue+this._startAngle;this._setAngle(Se),this._rotationLayer.pm._setAngle(Se),this._fireRotation(this._rotationLayer,ue,ee),this._fireRotation(this._map,ue,ee),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let f=Ms(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ms(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,f),this._fireRotationEnd(this._map,l,f),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,f,v,x,E){let F=He(E,v);return this._matrix=x.clone().rotate(l,F).flip(),Be(f,this._matrix,E)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),f=l.getCenter();return l.removeFrom(this._layer._map),f},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Qs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ms(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let f=this.getAngle(),v=this._layer.getLatLngs(),x=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let E=this.getAngle()-f;E=E<0?E+360:E,this._startAngle=f,this._fireRotation(this._layer,E,v,this._layer),this._fireRotation(this._map||this._layer._map,E,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let f=l-this.getAngle();this.rotateLayer(f)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},Bt=Tt,bt=L.Class.extend({includes:[Ce,vs,Bt,Al],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,f){f==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":f==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":f==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,f){let v=f.target,x={layer:this._layer,marker:v,event:f},E="";return l==="move"?E="moveVertexValidation":l==="add"?E="addVertexValidation":l==="remove"&&(E="removeVertexValidation"),this.options[E]&&typeof this.options[E]=="function"&&!this.options[E](x)?(l==="move"&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),Wt=bt;Wt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let f=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let E=this._layers.filter(F=>!F.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in F.pm._parentLayerGroup));E.forEach(F=>{this._initLayer(F)}),E.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(f,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let v=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(v,100,this),this)},enable(l,f=[]){f.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?f.indexOf(v._leaflet_id)===-1&&(f.push(v._leaflet_id),v.pm.enable(l,f)):v.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(f=>{f instanceof L.LayerGroup?l.indexOf(f._leaflet_id)===-1&&(l.push(f._leaflet_id),f.pm.disable(l)):f.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(f=>f instanceof L.LayerGroup?l.indexOf(f._leaflet_id)===-1?(l.push(f._leaflet_id),f.pm.enabled(l)):!1:f.pm.enabled())},toggleEdit(l,f=[]){f.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?f.indexOf(v._leaflet_id)===-1&&(f.push(v._leaflet_id),v.pm.toggleEdit(l,f)):v.pm.toggleEdit(l)})},_initLayer(l){let f=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[f]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let f=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[f]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(f=>!!f._map))==null?void 0:l._map)||null},getLayers(l=!1,f=!0,v=!0,x=[]){let E=[];return l?this._layerGroup.getLayers().forEach(F=>{E.push(F),F instanceof L.LayerGroup&&x.indexOf(F._leaflet_id)===-1&&(x.push(F._leaflet_id),E=E.concat(F.pm.getLayers(!0,!0,!0,x)))}):E=this._layerGroup.getLayers(),v&&(E=E.filter(F=>!(F instanceof L.LayerGroup))),f&&(E=E.filter(F=>!!F.pm),E=E.filter(F=>!F._pmTempLayer),E=E.filter(F=>!L.PM.optIn&&!F.options.pmIgnore||L.PM.optIn&&F.options.pmIgnore===!1)),E},setOptions(l,f=[]){f.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(v=>{v.pm&&(v instanceof L.LayerGroup?f.indexOf(v._leaflet_id)===-1&&(f.push(v._leaflet_id),v.pm.setOptions(l,f)):v.pm.setOptions(l))})}}),Wt.Marker=Wt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let f=l.target;f.remove(),this._fireRemove(f),this._fireRemove(this._map,f)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var jt=h(zi()),dt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((f,v,x)=>x.indexOf(f)===v)},_removeFromCache(l){let f=this.markerCache.indexOf(l);f>-1&&this.markerCache.splice(f,1)},renderLimits(l){this.markerCache.forEach(f=>{l.includes(f)?this._markerGroup.addLayer(f):this._markerGroup.removeLayer(f)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let f=[...this._filterClosestMarkers(l)];this.renderLimits(f)},_filterClosestMarkers(l){let f=[...this.markerCache],v=this.options.limitMarkersToCount;return v===-1?f:(f.sort((x,E)=>{let F=x._latlng.distanceTo(l),Y=E._latlng.distanceTo(l);return F-Y}),f.filter((x,E)=>v>-1?E<v:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},vt=dt;Wt.Line=Wt.extend({includes:[vt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,f=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let v=x=>{if(Array.isArray(x[0]))return x.map(v,this);let E=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map((F,Y)=>{let ee=this.isPolygon()?(Y+1)%x.length:Y+1;return this._createMiddleMarker(E[Y],E[ee])}),E};this._markers=v(f),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let f=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._pmTempLayer=!0,this.options.rotate?(f.on("dragstart",this._onRotateStart,this),f.on("drag",this._onRotate,this),f.on("dragend",this._onRotateEnd,this)):(f.on("click",this._onVertexClick,this),f.on("dragstart",this._onMarkerDragStart,this),f.on("move",this._onMarkerDrag,this),f.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||f.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(f),f},_createMiddleMarker(l,f){if(!l||!f)return!1;let v=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),f.getLatLng()),x=this._createMarker(v),E=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(E),x.leftM=l,x.rightM=f,l._middleMarkerNext=x,f._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(l){let f=l.target;if(!this._vertexValidation("add",l))return;let v=L.divIcon({className:"marker-icon"});f.setIcon(v),this._addMarker(f,f.leftM,f.rightM)},_onMiddleMarkerMoveStart(l){let f=l.target;if(f.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){f.on("move",this._onMiddleMarkerMovePrevent,this);return}f._dragging=!0,this._addMarker(f,f.leftM,f.rightM)},_onMiddleMarkerMovePrevent(l){let f=l.target;this._vertexValidationDrag(f)},_onMiddleMarkerMoveEnd(l){let f=l.target;if(f.off("move",this._onMiddleMarkerMovePrevent,this),f.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(f))return;let v=L.divIcon({className:"marker-icon"});f.setIcon(v),setTimeout(()=>{delete f._dragging},100)},_addMarker(l,f,v){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=l.getLatLng(),E=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:F,index:Y,parentPath:ee}=L.PM.Utils.findDeepMarkerIndex(this._markers,f),ue=F.length>1?(0,jt.default)(E,ee):E,Se=F.length>1?(0,jt.default)(this._markers,ee):this._markers;ue.splice(Y+1,0,x),Se.splice(Y+1,0,l),this._layer.setLatLngs(E),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(f,l),this._createMiddleMarker(l,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return kr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let f=this._layer,v,x;if(this.options.allowSelfIntersection?v=!1:(x=kr(this._layer.toGeoJSON(15)),v=x.features.length>0),v){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return v;l?this._flashLayer():(f.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else f.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return v},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,f){l.forEach(v=>{Array.isArray(v)?this._updateDisabledMarkerStyle(v,f):v._icon&&(f&&!this._checkMarkerAllowedToDrag(v)?L.DomUtil.addClass(v._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(v._icon,"vertexmarker-disabled"))})},_removeMarker(l){let f=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ms(this._layer,this._layer.getLatLngs()));let v=this._layer.getLatLngs(),{indexPath:x,index:E,parentPath:F}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);if(!x)return;let Y=x.length>1?(0,jt.default)(v,F):v,ee=x.length>1?(0,jt.default)(this._markers,F):this._markers,ue=F[F.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ue&&(Y.length<=2||this.isPolygon()&&Y.length<=3)){this._flashLayer();return}Y.splice(E,1),this._layer.setLatLngs(v),this.isPolygon()&&Y.length<=2&&Y.splice(0,Y.length);let Se=!1;if(Y.length<=1&&(Y.splice(0,Y.length),F.length>1&&x.length>1&&(v=sl(v)),this._layer.setLatLngs(v),this._initMarkers(),Se=!0),Zi(v)||this._layer.remove(),v=sl(v),this._layer.setLatLngs(v),this._markers=sl(this._markers),!Se&&(ee=x.length>1?(0,jt.default)(this._markers,F):this._markers,f._middleMarkerPrev&&(this._markerGroup.removeLayer(f._middleMarkerPrev),this._removeFromCache(f._middleMarkerPrev)),f._middleMarkerNext&&(this._markerGroup.removeLayer(f._middleMarkerNext),this._removeFromCache(f._middleMarkerNext)),this._markerGroup.removeLayer(f),this._removeFromCache(f),ee)){let Ke,je;if(this.isPolygon()?(Ke=(E+1)%ee.length,je=(E+(ee.length-1))%ee.length):(je=E-1<0?void 0:E-1,Ke=E+1>=ee.length?void 0:E+1),Ke!==je){let gt=ee[je],At=ee[Ke];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(gt,At)}ee.splice(E,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(f,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let f=this._layer.getLatLngs(),v=l.getLatLng(),{indexPath:x,index:E,parentPath:F}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(x.length>1?(0,jt.default)(f,F):f).splice(E,1,v),this._layer.setLatLngs(f)},_getNeighborMarkers(l){let{indexPath:f,index:v,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),E=f.length>1?(0,jt.default)(this._markers,x):this._markers,F=(v+1)%E.length,Y=(v+(E.length-1))%E.length,ee=E[Y],ue=E[F];return{prevMarker:ee,nextMarker:ue}},_checkMarkerAllowedToDrag(l){let{prevMarker:f,nextMarker:v}=this._getNeighborMarkers(l),x=L.polyline([f.getLatLng(),l.getLatLng()]),E=L.polyline([l.getLatLng(),v.getLatLng()]),F=ns(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,Y=ns(this._layer.toGeoJSON(15),E.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?Y+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(F+=1),!(F<=2&&Y<=2)},_onMarkerDragStart(l){let f=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDragStart(l,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ms(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(f):this._markerAllowedToDrag=null},_onMarkerDrag(l){let f=l.target;if(!this._vertexValidationDrag(f))return;let{indexPath:v,index:x,parentPath:E}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);if(!v)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(f);let F=v.length>1?(0,jt.default)(this._markers,E):this._markers,Y=(x+1)%F.length,ee=(x+(F.length-1))%F.length,ue=f.getLatLng(),Se=F[ee].getLatLng(),Ke=F[Y].getLatLng();if(f._middleMarkerNext){let je=L.PM.Utils.calcMiddleLatLng(this._map,ue,Ke);f._middleMarkerNext.setLatLng(je)}if(f._middleMarkerPrev){let je=L.PM.Utils.calcMiddleLatLng(this._map,ue,Se);f._middleMarkerPrev.setLatLng(je)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let f=l.target;if(!this._vertexValidationDragEnd(f))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,f),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let E=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(l,v,E),E){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,v);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let f=l.target;if(f._dragging)return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireVertexClick(l,v)}}),Wt.Polygon=Wt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:f,nextMarker:v}=this._getNeighborMarkers(l),x=L.polyline([f.getLatLng(),l.getLatLng()]),E=L.polyline([l.getLatLng(),v.getLatLng()]),F=ns(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,Y=ns(this._layer.toGeoJSON(15),E.toGeoJSON(15)).features.length;return!(F<=2&&Y<=2)}}),Wt.Rectangle=Wt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,f=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=f.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((v,x)=>{let E=this._cornerMarkers.find(F=>F._index===x);E&&E.setLatLng(v)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,f){let v=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=l,v._index=f,v._pmTempLayer=!0,v.on("click",this._onVertexClick,this),this._markerGroup.addLayer(v),v},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let f=l.target,v=this._cornerMarkers;f._oppositeCornerLatLng=v.find(E=>E._index===(f._index+2)%4).getLatLng(),f._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDragStart(l,x)},_onMarkerDrag(l){let f=l.target;if(!this._vertexValidationDrag(f)||f._index===void 0)return;this._adjustRectangleForMarkerMove(f);let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let f=l.target;if(!this._vertexValidationDragEnd(f))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDragEnd(l,v),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let f=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(f),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let f=this._layer.getLatLngs()[0];if(f&&f.length!==4&&f.length>0)f.forEach((v,x)=>{this._cornerMarkers[x].setLatLng(v)}),this._cornerMarkers.slice(f.length).forEach(v=>{v.setLatLng(f[0])});else if(!f||!f.length)console.error("The layer has no LatLngs");else{let v=f.findIndex(x=>l.getLatLng().equals(x));v>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(f[(v+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(f[(v+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(f[(v+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(f[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Qs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),Wt.CircleMarker=Wt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let f=this._layer.getLatLng(),v=this._layer._radius,x=this._getLatLngOnCircle(f,v);this._centerMarker=this._createCenterMarker(f),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,f){let v=this._map.project(l),x=L.point(v.x+f,v.y);return this._map.unproject(x)},_createHintLine(l,f){let v=l.getLatLng(),x=f.getLatLng();this._hintline=L.polyline([v,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let f=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(f._icon,"leaflet-pm-draggable"),f.on("move",this._moveCircle,this)):f.dragging.disable(),f},_createOuterMarker(l){let f=this._createMarker(l);return f.on("drag",this._resizeCircle,this),f},_createMarker(l){let f=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._origLatLng=l,f._pmTempLayer=!0,f.on("dragstart",this._onMarkerDragStart,this),f.on("drag",this._onMarkerDrag,this),f.on("dragend",this._onMarkerDragEnd,this),f.on("click",this._onVertexClick,this),this._helperLayers.addLayer(f),f},_moveCircle(l){if(l.target._cancelDragEventChain)return;let f=this._centerMarker.getLatLng();this._layer.setLatLng(f);let v=this._layer._radius,x=this._getLatLngOnCircle(f,v);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),f=this._layer._radius,v=this._getLatLngOnCircle(l,f);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,f);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,f])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let f=l.target;f instanceof L.Marker&&!this._vertexValidationDrag(f)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let f=l.target;this._vertexValidationDragEnd(f)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let f=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(f);let x=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,f);return this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?f=Ml(this._map,l,f,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(f=Ml(this._map,l,f,this._getMaxDistanceInMeter(l))),f},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,f);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,f){return this._map.project(l).distanceTo(this._map.project(f))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Wt.Circle=Wt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,f){return this._map.distance(l,f)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Wt.ImageOverlay=Wt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),f=l.getNorthWest(),v=l.getNorthEast(),x=l.getSouthEast(),E=l.getSouthWest();return[f,v,x,E]}}),Wt.Text=Wt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,f=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${f}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let f=this._hasFocus;this._hasFocus=l.type==="focus",!f!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let f=this.options.className.split(" ");this.textArea.classList.add(...f)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var tn=function(l,f,v,x,E,F){this._matrix=[l,f,v,x,E,F]};tn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),tn.prototype={transform(l){return this._transform(l.clone())},_transform(l){let f=this._matrix,{x:v,y:x}=l;return l.x=f[0]*v+f[1]*x+f[4],l.y=f[2]*v+f[3]*x+f[5],l},untransform(l){let f=this._matrix;return new L.Point((l.x/f[0]-f[4])/f[0],(l.y/f[2]-f[5])/f[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let f,v;return typeof l=="number"?(f=l,v=l):(f=l.x,v=l.y),this._add(1,0,0,1,f,v)},scale(l,f){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let v,x;return f=f||L.point(0,0),typeof l=="number"?(v=l,x=l):(v=l.x,x=l.y),this._add(v,0,0,x,f.x,f.y)._add(1,0,0,1,-f.x,-f.y)},rotate(l,f){let v=Math.cos(l),x=Math.sin(l);return f=f||new L.Point(0,0),this._add(v,x,-x,v,f.x,f.y)._add(1,0,0,1,-f.x,-f.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,f,v,x,E,F){let Y=[[],[],[]],ee=this._matrix,ue=[[ee[0],ee[2],ee[4]],[ee[1],ee[3],ee[5]],[0,0,1]],Se=[[l,v,E],[f,x,F],[0,0,1]],Ke;l&&l instanceof L.PM.Matrix&&(ee=l._matrix,Se=[[ee[0],ee[2],ee[4]],[ee[1],ee[3],ee[5]],[0,0,1]]);for(let je=0;je<3;je+=1)for(let gt=0;gt<3;gt+=1){Ke=0;for(let At=0;At<3;At+=1)Ke+=ue[je][At]*Se[At][gt];Y[je][gt]=Ke}return this._matrix=[Y[0][0],Y[1][0],Y[0][1],Y[1][1],Y[0][2],Y[1][2]],this}};var fn=tn,nn={calcMiddleLatLng(l,f,v){let x=l.project(f),E=l.project(v);return l.unproject(x._add(E)._divideBy(2))},findLayers(l){let f=[];return l.eachLayer(v=>{(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&f.push(v)}),f=f.filter(v=>!!v.pm),f=f.filter(v=>!v._pmTempLayer),f=f.filter(v=>!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&v.options.pmIgnore===!1),f},circleToPolygon(l,f=60,v=!0){let x=l.getLatLng(),E=l.getRadius(),F=Ai(x,E,f,0,v),Y=[];for(let ee=0;ee<F.length;ee+=1){let ue=[F[ee].lat,F[ee].lng];Y.push(ue)}return L.polygon(Y,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,f,v,x=!1){l.fire(f,v,x);let{groups:E}=this.getAllParentGroups(l);E.forEach(F=>{F.fire(f,v,x)})},getAllParentGroups(l){let f=[],v=[],x=E=>{for(let F in E._eventParents)if(f.indexOf(F)===-1){f.push(F);let Y=E._eventParents[F];v.push(Y),x(Y)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(x(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:v,groupIds:f},{groupIds:f,groups:v}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ai,getTranslation:rr,findDeepCoordIndex(l,f,v=!0){let x,E=Y=>(ee,ue)=>{let Se=Y.concat(ue);if(v){if(ee.lat&&ee.lat===f.lat&&ee.lng===f.lng)return x=Se,!0}else if(ee.lat&&L.latLng(ee).equals(f))return x=Se,!0;return Array.isArray(ee)&&ee.some(E(Se))};l.some(E([]));let F={};return x&&(F={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),F},findDeepMarkerIndex(l,f){let v,x=F=>(Y,ee)=>{let ue=F.concat(ee);return Y._leaflet_id===f._leaflet_id?(v=ue,!0):Array.isArray(Y)&&Y.some(x(ue))};l.some(x([]));let E={};return v&&(E={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),E},_getIndexFromSegment(l,f){if(f&&f.length===2){let v=this.findDeepCoordIndex(l,f[0]),x=this.findDeepCoordIndex(l,f[1]),E=Math.max(v.index,x.index);return(v.index===0||x.index===0)&&E!==1&&(E+=1),{indexA:v,indexB:x,newIndex:E,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle(l,f,v,x){let E=He(x,l),F=He(x,f),Y=v*Math.PI/180,ee=Math.cos(Y),ue=Math.sin(Y),Se=(F.x-E.x)*ee+(F.y-E.y)*ue,Ke=(F.y-E.y)*ee-(F.x-E.x)*ue,je=Se*ee+E.x,gt=Se*ue+E.y,At=-Ke*ue+E.x,Yt=Ke*ee+E.y,yn=ft(x,E),xn=ft(x,{x:je,y:gt}),ar=ft(x,F),Ze=ft(x,{x:At,y:Yt});return[yn,xn,ar,Ze]},pxRadiusToMeterRadius(l,f,v){let x=f.project(v),E=L.point(x.x+l,x.y);return f.distance(f.unproject(E),v)}},Mn=nn;L.PM=L.PM||{version:Hr.version,Map:mo,Toolbar:al,Draw:Ki,Edit:Wt,Utils:Mn,Matrix:fn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function f(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(f);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(v);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function E(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(E);function F(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(F);function Y(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(Y);function ee(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ee);function ue(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ue)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(f=>{this.reInitLayer(f)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let f=this._map.mouseEventToLayerPoint(l),v,x;for(let E=this._drawFirst;E;E=E.next)v=E.layer,v.options.interactive&&v._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(x=v);x&&(L.DomEvent.fakeStop(l),this._fireEvent([x],l))}}),L.PM.initialize()})();class If extends $n.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);zt(this,"properties");zt(this,"angleCache",new Map);zt(this,"lastCenter");zt(this,"lastCenterCosLat");zt(this,"_pendingNameUpdate",!1);zt(this,"_nameUpdateTimeout",null);ln.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){ln.measure("Circle.updateProperties",()=>{var u,h,d,g;const n=this.getRadius(),r=this.getLatLng(),i=((h=(u=this.properties)==null?void 0:u.style)==null?void 0:h.name)||"",s=((d=this.properties)==null?void 0:d.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((g=this.options)==null?void 0:g.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){ln.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return ln.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return ln.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return ln.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return ln.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),$n.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return ln.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return ln.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){ln.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}var Ya=63710088e-1,rx={centimeters:Ya*100,centimetres:Ya*100,degrees:360/(2*Math.PI),feet:Ya*3.28084,inches:Ya*39.37,kilometers:Ya/1e3,kilometres:Ya/1e3,meters:Ya,metres:Ya,miles:Ya/1609.344,millimeters:Ya*1e3,millimetres:Ya*1e3,nauticalmiles:Ya/1852,radians:1,yards:Ya*1.0936};function sd(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function fm(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ob(e[0])||!ob(e[1]))throw new Error("coordinates must contain numbers");return sd({type:"Point",coordinates:e},t,n)}function uu(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return sd({type:"Polygon",coordinates:e},t,n)}function cu(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return sd({type:"LineString",coordinates:e},t,n)}function _I(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function bI(e,t,n={}){return sd({type:"MultiPolygon",coordinates:e},t,n)}function wI(e,t="kilometers"){const n=rx[t];if(!n)throw new Error(t+" units is invalid");return e*n}function xI(e,t="kilometers"){const n=rx[t];if(!n)throw new Error(t+" units is invalid");return e/n}function u1(e){return e%(2*Math.PI)*180/Math.PI}function Fu(e){return e%360*Math.PI/180}function ob(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function sb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function fy(e,t,n={}){var r=sb(e),i=sb(t),s=Fu(i[1]-r[1]),o=Fu(i[0]-r[0]),u=Fu(r[1]),h=Fu(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(u)*Math.cos(h);return wI(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),n.units)}var nv=fy;function LI(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dy(e,t,n,r={}){const i=LI(e),s=Fu(i[0]),o=Fu(i[1]),u=Fu(n),h=xI(t,r.units),d=Math.asin(Math.sin(o)*Math.cos(h)+Math.cos(o)*Math.sin(h)*Math.cos(u)),g=s+Math.atan2(Math.sin(u)*Math.sin(h)*Math.cos(o),Math.cos(h)-Math.sin(o)*Math.sin(d)),y=u1(g),w=u1(d);return fm([y,w],r.properties)}var ab=dy,dm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dm.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",y=1,w=2,_=4,P=1,T=2,j=1,D=2,U=4,K=8,X=16,se=32,me=64,Le=128,H=256,R=512,Z=30,z="...",O=800,k=16,I=1,W=2,V=3,G=1/0,ne=9007199254740991,_e=17976931348623157e292,ge=NaN,Ve=4294967295,B=Ve-1,te=Ve>>>1,ce=[["ary",Le],["bind",j],["bindKey",D],["curry",K],["curryRight",X],["flip",R],["partial",se],["partialRight",me],["rearg",H]],le="[object Arguments]",xe="[object Array]",he="[object AsyncFunction]",J="[object Boolean]",ae="[object Date]",Fe="[object DOMException]",Me="[object Error]",Ye="[object Function]",oe="[object GeneratorFunction]",fe="[object Map]",be="[object Number]",de="[object Null]",Ue="[object Object]",Xe="[object Promise]",ze="[object Proxy]",Je="[object RegExp]",Qe="[object Set]",it="[object String]",Mt="[object Symbol]",xt="[object Undefined]",Nt="[object WeakMap]",Kt="[object WeakSet]",hn="[object ArrayBuffer]",mn="[object DataView]",et="[object Float32Array]",ot="[object Float64Array]",nt="[object Int8Array]",$t="[object Int16Array]",en="[object Int32Array]",kn="[object Uint8Array]",Ln="[object Uint8ClampedArray]",Tn="[object Uint16Array]",or="[object Uint32Array]",wn=/\b__p \+= '';/g,Rn=/\b(__p \+=) '' \+/g,lt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,We=/&(?:amp|lt|gt|quot|#39);/g,qt=/[&<>"']/g,_n=RegExp(We.source),Dn=RegExp(qt.source),Cn=/<%-([\s\S]+?)%>/g,Xt=/<%([\s\S]+?)%>/g,Gn=/<%=([\s\S]+?)%>/g,Ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jt=/^\w*$/,vn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ci=/[\\^$.*+?()[\]{}|]/g,Sn=RegExp(ci.source),dr=/^\s+/,lr=/\s/,bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yi=/\{\n\/\* \[wrapped with (.+)\] \*/,Es=/,? & /,Co=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fi=/[()=,{}\[\]\/\s]/,Er=/\\(\\)?/g,_i=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sr=/\w*$/,rn=/^[-+]0x[0-9a-f]+$/i,Uo=/^0b[01]+$/i,to=/^\[object .+?Constructor\]$/,fo=/^0o[0-7]+$/i,qi=/^(?:0|[1-9]\d*)$/,ms=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qo=/($^)/,Cr=/['\n\r\u2028\u2029\\]/g,Cs="\\ud800-\\udfff",qu="\\u0300-\\u036f",Is="\\ufe20-\\ufe2f",ei="\\u20d0-\\u20ff",Un=qu+Is+ei,Hi="\\u2700-\\u27bf",hi="a-z\\xdf-\\xf6\\xf8-\\xff",ji="\\xac\\xb1\\xd7\\xf7",no="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zi="\\u2000-\\u206f",wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pn="A-Z\\xc0-\\xd6\\xd8-\\xde",gs="\\ufe0e\\ufe0f",bi=ji+no+zi+wr,Di="['’]",Hr="["+Cs+"]",Qt="["+bi+"]",Gt="["+Un+"]",Ar="\\d+",fi="["+Hi+"]",Si="["+hi+"]",Ys="[^"+Cs+bi+Ar+Hi+hi+Pn+"]",Xs="\\ud83c[\\udffb-\\udfff]",Po="(?:"+Gt+"|"+Xs+")",Ei="[^"+Cs+"]",Mr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ps="[\\ud800-\\udbff][\\udc00-\\udfff]",Ci="["+Pn+"]",es="\\u200d",po="(?:"+Si+"|"+Ys+")",nl="(?:"+Ci+"|"+Ys+")",ts="(?:"+Di+"(?:d|ll|m|re|s|t|ve))?",Rs="(?:"+Di+"(?:D|LL|M|RE|S|T|VE))?",As=Po+"?",Js="["+gs+"]?",Ui="(?:"+es+"(?:"+[Ei,Mr,Ps].join("|")+")"+Js+As+")*",Wl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ti="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nr=Js+As+Ui,Qn="(?:"+[fi,Mr,Ps].join("|")+")"+nr,Fs="(?:"+[Ei+Gt+"?",Gt,Mr,Ps,Hr].join("|")+")",Gr=RegExp(Di,"g"),vu=RegExp(Gt,"g"),rl=RegExp(Xs+"(?="+Xs+")|"+Fs+nr,"g"),il=RegExp([Ci+"?"+Si+"+"+ts+"(?="+[Qt,Ci,"$"].join("|")+")",nl+"+"+Rs+"(?="+[Qt,Ci+po,"$"].join("|")+")",Ci+"?"+po+"+"+ts,Ci+"+"+Rs,ti,Wl,Ar,Qn].join("|"),"g"),js=RegExp("["+es+Cs+Un+gs+"]"),za=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Cl=-1,mr={};mr[et]=mr[ot]=mr[nt]=mr[$t]=mr[en]=mr[kn]=mr[Ln]=mr[Tn]=mr[or]=!0,mr[le]=mr[xe]=mr[hn]=mr[J]=mr[mn]=mr[ae]=mr[Me]=mr[Ye]=mr[fe]=mr[be]=mr[Ue]=mr[Je]=mr[Qe]=mr[it]=mr[Nt]=!1;var Or={};Or[le]=Or[xe]=Or[hn]=Or[mn]=Or[J]=Or[ae]=Or[et]=Or[ot]=Or[nt]=Or[$t]=Or[en]=Or[fe]=Or[be]=Or[Ue]=Or[Je]=Or[Qe]=Or[it]=Or[Mt]=Or[kn]=Or[Ln]=Or[Tn]=Or[or]=!0,Or[Me]=Or[Ye]=Or[Nt]=!1;var Ua={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ol=parseFloat,Al=parseInt,Kl=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,Ir=typeof self=="object"&&self&&self.Object===Object&&self,Wi=Kl||Ir||Function("return this")(),rr=t&&!t.nodeType&&t,Zi=rr&&!0&&e&&!e.nodeType&&e,sl=Zi&&Zi.exports===rr,ga=sl&&Kl.process,Ai=function(){try{var yt=Zi&&Zi.require&&Zi.require("util").types;return yt||ga&&ga.binding&&ga.binding("util")}catch{}}(),Yl=Ai&&Ai.isArrayBuffer,Qs=Ai&&Ai.isDate,Ml=Ai&&Ai.isMap,kl=Ai&&Ai.isRegExp,Ms=Ai&&Ai.isSet,Tl=Ai&&Ai.isTypedArray;function ni(yt,Vt,Pt){switch(Pt.length){case 0:return yt.call(Vt);case 1:return yt.call(Vt,Pt[0]);case 2:return yt.call(Vt,Pt[0],Pt[1]);case 3:return yt.call(Vt,Pt[0],Pt[1],Pt[2])}return yt.apply(Vt,Pt)}function Zu(yt,Vt,Pt,An){for(var Wn=-1,pr=yt==null?0:yt.length;++Wn<pr;){var Mi=yt[Wn];Vt(An,Mi,Pt(Mi),yt)}return An}function mo(yt,Vt){for(var Pt=-1,An=yt==null?0:yt.length;++Pt<An&&Vt(yt[Pt],Pt,yt)!==!1;);return yt}function zs(yt,Vt){for(var Pt=yt==null?0:yt.length;Pt--&&Vt(yt[Pt],Pt,yt)!==!1;);return yt}function Bl(yt,Vt){for(var Pt=-1,An=yt==null?0:yt.length;++Pt<An;)if(!Vt(yt[Pt],Pt,yt))return!1;return!0}function Us(yt,Vt){for(var Pt=-1,An=yt==null?0:yt.length,Wn=0,pr=[];++Pt<An;){var Mi=yt[Pt];Vt(Mi,Pt,yt)&&(pr[Wn++]=Mi)}return pr}function al(yt,Vt){var Pt=yt==null?0:yt.length;return!!Pt&&cn(yt,Vt,0)>-1}function ll(yt,Vt,Pt){for(var An=-1,Wn=yt==null?0:yt.length;++An<Wn;)if(Pt(Vt,yt[An]))return!0;return!1}function ri(yt,Vt){for(var Pt=-1,An=yt==null?0:yt.length,Wn=Array(An);++Pt<An;)Wn[Pt]=Vt(yt[Pt],Pt,yt);return Wn}function vs(yt,Vt){for(var Pt=-1,An=Vt.length,Wn=yt.length;++Pt<An;)yt[Wn+Pt]=Vt[Pt];return yt}function va(yt,Vt,Pt,An){var Wn=-1,pr=yt==null?0:yt.length;for(An&&pr&&(Pt=yt[++Wn]);++Wn<pr;)Pt=Vt(Pt,yt[Wn],Wn,yt);return Pt}function Ki(yt,Vt,Pt,An){var Wn=yt==null?0:yt.length;for(An&&Wn&&(Pt=yt[--Wn]);Wn--;)Pt=Vt(Pt,yt[Wn],Wn,yt);return Pt}function N(yt,Vt){for(var Pt=-1,An=yt==null?0:yt.length;++Pt<An;)if(Vt(yt[Pt],Pt,yt))return!0;return!1}var ve=fr("length");function qe(yt){return yt.split("")}function ct(yt){return yt.match(Co)||[]}function wt(yt,Vt,Pt){var An;return Pt(yt,function(Wn,pr,Mi){if(Vt(Wn,pr,Mi))return An=pr,!1}),An}function Rt(yt,Vt,Pt,An){for(var Wn=yt.length,pr=Pt+(An?1:-1);An?pr--:++pr<Wn;)if(Vt(yt[pr],pr,yt))return pr;return-1}function cn(yt,Vt,Pt){return Vt===Vt?co(yt,Vt,Pt):Rt(yt,Fn,Pt)}function Bn(yt,Vt,Pt,An){for(var Wn=Pt-1,pr=yt.length;++Wn<pr;)if(An(yt[Wn],Vt))return Wn;return-1}function Fn(yt){return yt!==yt}function er(yt,Vt){var Pt=yt==null?0:yt.length;return Pt?ii(yt,Vt)/Pt:ge}function fr(yt){return function(Vt){return Vt==null?n:Vt[yt]}}function kr(yt){return function(Vt){return yt==null?n:yt[Vt]}}function Pi(yt,Vt,Pt,An,Wn){return Wn(yt,function(pr,Mi,oi){Pt=An?(An=!1,pr):Vt(Pt,pr,Mi,oi)}),Pt}function Yr(yt,Vt){var Pt=yt.length;for(yt.sort(Vt);Pt--;)yt[Pt]=yt[Pt].value;return yt}function ii(yt,Vt){for(var Pt,An=-1,Wn=yt.length;++An<Wn;){var pr=Vt(yt[An]);pr!==n&&(Pt=Pt===n?pr:Pt+pr)}return Pt}function Yi(yt,Vt){for(var Pt=-1,An=Array(yt);++Pt<yt;)An[Pt]=Vt(Pt);return An}function ro(yt,Vt){return ri(Vt,function(Pt){return[Pt,yt[Pt]]})}function ys(yt){return yt&&yt.slice(0,_a(yt)+1).replace(dr,"")}function Tr(yt){return function(Vt){return yt(Vt)}}function Ao(yt,Vt){return ri(Vt,function(Pt){return yt[Pt]})}function ul(yt,Vt){return yt.has(Vt)}function $o(yt,Vt){for(var Pt=-1,An=yt.length;++Pt<An&&cn(Vt,yt[Pt],0)>-1;);return Pt}function Xl(yt,Vt){for(var Pt=yt.length;Pt--&&cn(Vt,yt[Pt],0)>-1;);return Pt}function ea(yt,Vt){for(var Pt=yt.length,An=0;Pt--;)yt[Pt]===Vt&&++An;return An}var _u=kr(Ua),$a=kr(Wu);function Va(yt){return"\\"+Zl[yt]}function io(yt,Vt){return yt==null?n:yt[Vt]}function ta(yt){return js.test(yt)}function _s(yt){return za.test(yt)}function ns(yt){for(var Vt,Pt=[];!(Vt=yt.next()).done;)Pt.push(Vt.value);return Pt}function cl(yt){var Vt=-1,Pt=Array(yt.size);return yt.forEach(function(An,Wn){Pt[++Vt]=[Wn,An]}),Pt}function Mo(yt,Vt){return function(Pt){return yt(Vt(Pt))}}function Vo(yt,Vt){for(var Pt=-1,An=yt.length,Wn=0,pr=[];++Pt<An;){var Mi=yt[Pt];(Mi===Vt||Mi===g)&&(yt[Pt]=g,pr[Wn++]=Pt)}return pr}function Ho(yt){var Vt=-1,Pt=Array(yt.size);return yt.forEach(function(An){Pt[++Vt]=An}),Pt}function Ku(yt){var Vt=-1,Pt=Array(yt.size);return yt.forEach(function(An){Pt[++Vt]=[An,An]}),Pt}function co(yt,Vt,Pt){for(var An=Pt-1,Wn=yt.length;++An<Wn;)if(yt[An]===Vt)return An;return-1}function ya(yt,Vt,Pt){for(var An=Pt+1;An--;)if(yt[An]===Vt)return An;return An}function ko(yt){return ta(yt)?Bo(yt):ve(yt)}function To(yt){return ta(yt)?go(yt):qe(yt)}function _a(yt){for(var Vt=yt.length;Vt--&&lr.test(yt.charAt(Vt)););return Vt}var ba=kr(Pl);function Bo(yt){for(var Vt=rl.lastIndex=0;rl.test(yt);)++Vt;return Vt}function go(yt){return yt.match(rl)||[]}function na(yt){return yt.match(il)||[]}var bs=function yt(Vt){Vt=Vt==null?Wi:Oo.defaults(Wi.Object(),Vt,Oo.pick(Wi,yu));var Pt=Vt.Array,An=Vt.Date,Wn=Vt.Error,pr=Vt.Function,Mi=Vt.Math,oi=Vt.Object,Ol=Vt.RegExp,Go=Vt.String,ki=Vt.TypeError,ra=Pt.prototype,wa=pr.prototype,ia=oi.prototype,oa=Vt["__core-js_shared__"],sa=wa.toString,Rr=ia.hasOwnProperty,$s=0,vo=function(){var c=/[^.]+$/.exec(oa&&oa.keys&&oa.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),si=ia.toString,di=sa.call(oi),Xi=Wi._,xi=Ol("^"+sa.call(Rr).replace(ci,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ws=sl?Vt.Buffer:n,rs=Vt.Symbol,ks=Vt.Uint8Array,bu=ws?ws.allocUnsafe:n,aa=Mo(oi.getPrototypeOf,oi),oo=oi.create,wi=ia.propertyIsEnumerable,No=ra.splice,is=rs?rs.isConcatSpreadable:n,cr=rs?rs.iterator:n,xa=rs?rs.toStringTag:n,La=function(){try{var c=Bh(oi,"defineProperty");return c({},"",{}),c}catch{}}(),Vs=Vt.clearTimeout!==Wi.clearTimeout&&Vt.clearTimeout,qo=An&&An.now!==Wi.Date.now&&An.now,vc=Vt.setTimeout!==Wi.setTimeout&&Vt.setTimeout,yo=Mi.ceil,_o=Mi.floor,Hs=oi.getOwnPropertySymbols,a=ws?ws.isBuffer:n,p=Vt.isFinite,S=ra.join,$=Mo(oi.keys,oi),re=Mi.max,Ee=Mi.min,st=An.now,Ct=Vt.parseInt,Ft=Mi.random,sn=ra.reverse,On=Bh(Vt,"DataView"),Kn=Bh(Vt,"Map"),Pr=Bh(Vt,"Promise"),so=Bh(Vt,"Set"),$i=Bh(Vt,"WeakMap"),bo=Bh(oi,"create"),Ti=$i&&new $i,os={},yc=Oh(On),la=Oh(Kn),Gs=Oh(Pr),Ts=Oh(so),Eh=Oh($i),Jl=rs?rs.prototype:n,Xr=Jl?Jl.valueOf:n,Do=Jl?Jl.toString:n;function Te(c){if(Wo(c)&&!jr(c)&&!(c instanceof Br)){if(c instanceof wo)return c;if(Rr.call(c,"__wrapped__"))return Xy(c)}return new wo(c)}var ss=function(){function c(){}return function(m){if(!Ro(m))return{};if(oo)return oo(m);c.prototype=m;var A=new c;return c.prototype=n,A}}();function wu(){}function wo(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=n}Te.templateSettings={escape:Cn,evaluate:Xt,interpolate:Gn,variable:"",imports:{_:Te}},Te.prototype=wu.prototype,Te.prototype.constructor=Te,wo.prototype=ss(wu.prototype),wo.prototype.constructor=wo;function Br(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function Gc(){var c=new Br(this.__wrapped__);return c.__actions__=fl(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=fl(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=fl(this.__views__),c}function lf(){if(this.__filtered__){var c=new Br(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function qc(){var c=this.__wrapped__.value(),m=this.__dir__,A=jr(c),Q=m<0,we=A?c.length:0,De=f3(0,we,this.__views__),rt=De.start,mt=De.end,Et=mt-rt,an=Q?mt:rt-1,un=this.__iteratees__,gn=un.length,zn=0,ir=Ee(Et,this.__takeCount__);if(!A||!Q&&we==Et&&ir==Et)return Ql(c,this.__actions__);var vr=[];e:for(;Et--&&zn<ir;){an+=m;for(var Zr=-1,yr=c[an];++Zr<gn;){var ai=un[Zr],mi=ai.iteratee,Il=ai.type,Wa=mi(yr);if(Il==W)yr=Wa;else if(!Wa){if(Il==I)continue e;break e}}vr[zn++]=yr}return vr}Br.prototype=ss(wu.prototype),Br.prototype.constructor=Br;function Ha(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var Q=c[m];this.set(Q[0],Q[1])}}function _c(){this.__data__=bo?bo(null):{},this.size=0}function Ch(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function pd(c){var m=this.__data__;if(bo){var A=m[c];return A===h?n:A}return Rr.call(m,c)?m[c]:n}function Yu(c){var m=this.__data__;return bo?m[c]!==n:Rr.call(m,c)}function Wc(c,m){var A=this.__data__;return this.size+=this.has(c)?0:1,A[c]=bo&&m===n?h:m,this}Ha.prototype.clear=_c,Ha.prototype.delete=Ch,Ha.prototype.get=pd,Ha.prototype.has=Yu,Ha.prototype.set=Wc;function Nl(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var Q=c[m];this.set(Q[0],Q[1])}}function md(){this.__data__=[],this.size=0}function Zc(c){var m=this.__data__,A=vt(m,c);if(A<0)return!1;var Q=m.length-1;return A==Q?m.pop():No.call(m,A,1),--this.size,!0}function Kc(c){var m=this.__data__,A=vt(m,c);return A<0?n:m[A][1]}function uf(c){return vt(this.__data__,c)>-1}function cf(c,m){var A=this.__data__,Q=vt(A,c);return Q<0?(++this.size,A.push([c,m])):A[Q][1]=m,this}Nl.prototype.clear=md,Nl.prototype.delete=Zc,Nl.prototype.get=Kc,Nl.prototype.has=uf,Nl.prototype.set=cf;function Sa(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var Q=c[m];this.set(Q[0],Q[1])}}function hf(){this.size=0,this.__data__={hash:new Ha,map:new(Kn||Nl),string:new Ha}}function ff(c){var m=Wp(this,c).delete(c);return this.size-=m?1:0,m}function df(c){return Wp(this,c).get(c)}function b(c){return Wp(this,c).has(c)}function C(c,m){var A=Wp(this,c),Q=A.size;return A.set(c,m),this.size+=A.size==Q?0:1,this}Sa.prototype.clear=hf,Sa.prototype.delete=ff,Sa.prototype.get=df,Sa.prototype.has=b,Sa.prototype.set=C;function q(c){var m=-1,A=c==null?0:c.length;for(this.__data__=new Sa;++m<A;)this.add(c[m])}function ie(c){return this.__data__.set(c,h),this}function ye(c){return this.__data__.has(c)}q.prototype.add=q.prototype.push=ie,q.prototype.has=ye;function Ce(c){var m=this.__data__=new Nl(c);this.size=m.size}function Ae(){this.__data__=new Nl,this.size=0}function ke(c){var m=this.__data__,A=m.delete(c);return this.size=m.size,A}function Be(c){return this.__data__.get(c)}function He(c){return this.__data__.has(c)}function ft(c,m){var A=this.__data__;if(A instanceof Nl){var Q=A.__data__;if(!Kn||Q.length<i-1)return Q.push([c,m]),this.size=++A.size,this;A=this.__data__=new Sa(Q)}return A.set(c,m),this.size=A.size,this}Ce.prototype.clear=Ae,Ce.prototype.delete=ke,Ce.prototype.get=Be,Ce.prototype.has=He,Ce.prototype.set=ft;function Tt(c,m){var A=jr(c),Q=!A&&Nh(c),we=!A&&!Q&&Xc(c),De=!A&&!Q&&!we&&xf(c),rt=A||Q||we||De,mt=rt?Yi(c.length,Go):[],Et=mt.length;for(var an in c)(m||Rr.call(c,an))&&!(rt&&(an=="length"||we&&(an=="offset"||an=="parent")||De&&(an=="buffer"||an=="byteLength"||an=="byteOffset")||Ec(an,Et)))&&mt.push(an);return mt}function Bt(c){var m=c.length;return m?c[Mh(0,m-1)]:n}function bt(c,m){return Zp(fl(c),Yn(m,0,c.length))}function Wt(c){return Zp(fl(c))}function jt(c,m,A){(A!==n&&!Pu(c[m],A)||A===n&&!(m in c))&&Mn(c,m,A)}function dt(c,m,A){var Q=c[m];(!(Rr.call(c,m)&&Pu(Q,A))||A===n&&!(m in c))&&Mn(c,m,A)}function vt(c,m){for(var A=c.length;A--;)if(Pu(c[A][0],m))return A;return-1}function tn(c,m,A,Q){return F(c,function(we,De,rt){m(Q,we,A(we),rt)}),Q}function fn(c,m){return c&&Qu(m,qs(m),c)}function nn(c,m){return c&&Qu(m,pl(m),c)}function Mn(c,m,A){m=="__proto__"&&La?La(c,m,{configurable:!0,enumerable:!0,value:A,writable:!0}):c[m]=A}function En(c,m){for(var A=-1,Q=m.length,we=Pt(Q),De=c==null;++A<Q;)we[A]=De?n:Cg(c,m[A]);return we}function Yn(c,m,A){return c===c&&(A!==n&&(c=c<=A?c:A),m!==n&&(c=c>=m?c:m)),c}function l(c,m,A,Q,we,De){var rt,mt=m&y,Et=m&w,an=m&_;if(A&&(rt=we?A(c,Q,we,De):A(c)),rt!==n)return rt;if(!Ro(c))return c;var un=jr(c);if(un){if(rt=p3(c),!mt)return fl(c,rt)}else{var gn=Ca(c),zn=gn==Ye||gn==oe;if(Xc(c))return Ly(c,mt);if(gn==Ue||gn==le||zn&&!we){if(rt=Et||zn?{}:$y(c),!mt)return Et?r3(c,nn(rt,c)):n3(c,fn(rt,c))}else{if(!Or[gn])return we?c:{};rt=m3(c,gn,mt)}}De||(De=new Ce);var ir=De.get(c);if(ir)return ir;De.set(c,rt),v2(c)?c.forEach(function(yr){rt.add(l(yr,m,A,yr,c,De))}):m2(c)&&c.forEach(function(yr,ai){rt.set(ai,l(yr,m,A,ai,c,De))});var vr=an?Et?fg:hg:Et?pl:qs,Zr=un?n:vr(c);return mo(Zr||c,function(yr,ai){Zr&&(ai=yr,yr=c[ai]),dt(rt,ai,l(yr,m,A,ai,c,De))}),rt}function f(c){var m=qs(c);return function(A){return v(A,c,m)}}function v(c,m,A){var Q=A.length;if(c==null)return!Q;for(c=oi(c);Q--;){var we=A[Q],De=m[we],rt=c[we];if(rt===n&&!(we in c)||!De(rt))return!1}return!0}function x(c,m,A){if(typeof c!="function")throw new ki(o);return bd(function(){c.apply(n,A)},m)}function E(c,m,A,Q){var we=-1,De=al,rt=!0,mt=c.length,Et=[],an=m.length;if(!mt)return Et;A&&(m=ri(m,Tr(A))),Q?(De=ll,rt=!1):m.length>=i&&(De=ul,rt=!1,m=new q(m));e:for(;++we<mt;){var un=c[we],gn=A==null?un:A(un);if(un=Q||un!==0?un:0,rt&&gn===gn){for(var zn=an;zn--;)if(m[zn]===gn)continue e;Et.push(un)}else De(m,gn,Q)||Et.push(un)}return Et}var F=Ay(Yt),Y=Ay(yn,!0);function ee(c,m){var A=!0;return F(c,function(Q,we,De){return A=!!m(Q,we,De),A}),A}function ue(c,m,A){for(var Q=-1,we=c.length;++Q<we;){var De=c[Q],rt=m(De);if(rt!=null&&(mt===n?rt===rt&&!Dl(rt):A(rt,mt)))var mt=rt,Et=De}return Et}function Se(c,m,A,Q){var we=c.length;for(A=Wr(A),A<0&&(A=-A>we?0:we+A),Q=Q===n||Q>we?we:Wr(Q),Q<0&&(Q+=we),Q=A>Q?0:_2(Q);A<Q;)c[A++]=m;return c}function Ke(c,m){var A=[];return F(c,function(Q,we,De){m(Q,we,De)&&A.push(Q)}),A}function je(c,m,A,Q,we){var De=-1,rt=c.length;for(A||(A=v3),we||(we=[]);++De<rt;){var mt=c[De];m>0&&A(mt)?m>1?je(mt,m-1,A,Q,we):vs(we,mt):Q||(we[we.length]=mt)}return we}var gt=My(),At=My(!0);function Yt(c,m){return c&&gt(c,m,qs)}function yn(c,m){return c&&At(c,m,qs)}function xn(c,m){return Us(m,function(A){return Cc(c[A])})}function ar(c,m){m=Cu(m,c);for(var A=0,Q=m.length;c!=null&&A<Q;)c=c[ec(m[A++])];return A&&A==Q?c:n}function Ze(c,m,A){var Q=m(c);return jr(c)?Q:vs(Q,A(c))}function tt(c){return c==null?c===n?xt:de:xa&&xa in oi(c)?h3(c):S3(c)}function ht(c,m){return c>m}function Ot(c,m){return c!=null&&Rr.call(c,m)}function _t(c,m){return c!=null&&m in oi(c)}function kt(c,m,A){return c>=Ee(m,A)&&c<re(m,A)}function pe(c,m,A){for(var Q=A?ll:al,we=c[0].length,De=c.length,rt=De,mt=Pt(De),Et=1/0,an=[];rt--;){var un=c[rt];rt&&m&&(un=ri(un,Tr(m))),Et=Ee(un.length,Et),mt[rt]=!A&&(m||we>=120&&un.length>=120)?new q(rt&&un):n}un=c[0];var gn=-1,zn=mt[0];e:for(;++gn<we&&an.length<Et;){var ir=un[gn],vr=m?m(ir):ir;if(ir=A||ir!==0?ir:0,!(zn?ul(zn,vr):Q(an,vr,A))){for(rt=De;--rt;){var Zr=mt[rt];if(!(Zr?ul(Zr,vr):Q(c[rt],vr,A)))continue e}zn&&zn.push(vr),an.push(ir)}}return an}function Pe(c,m,A,Q){return Yt(c,function(we,De,rt){m(Q,A(we),De,rt)}),Q}function Ne(c,m,A){m=Cu(m,c),c=qy(c,m);var Q=c==null?c:c[ec(nu(m))];return Q==null?n:ni(Q,c,A)}function Oe(c){return Wo(c)&&tt(c)==le}function Ie(c){return Wo(c)&&tt(c)==hn}function Re(c){return Wo(c)&&tt(c)==ae}function at(c,m,A,Q,we){return c===m?!0:c==null||m==null||!Wo(c)&&!Wo(m)?c!==c&&m!==m:ut(c,m,A,Q,at,we)}function ut(c,m,A,Q,we,De){var rt=jr(c),mt=jr(m),Et=rt?xe:Ca(c),an=mt?xe:Ca(m);Et=Et==le?Ue:Et,an=an==le?Ue:an;var un=Et==Ue,gn=an==Ue,zn=Et==an;if(zn&&Xc(c)){if(!Xc(m))return!1;rt=!0,un=!1}if(zn&&!un)return De||(De=new Ce),rt||xf(c)?jy(c,m,A,Q,we,De):u3(c,m,Et,A,Q,we,De);if(!(A&P)){var ir=un&&Rr.call(c,"__wrapped__"),vr=gn&&Rr.call(m,"__wrapped__");if(ir||vr){var Zr=ir?c.value():c,yr=vr?m.value():m;return De||(De=new Ce),we(Zr,yr,A,Q,De)}}return zn?(De||(De=new Ce),c3(c,m,A,Q,we,De)):!1}function pt(c){return Wo(c)&&Ca(c)==fe}function Lt(c,m,A,Q){var we=A.length,De=we,rt=!Q;if(c==null)return!De;for(c=oi(c);we--;){var mt=A[we];if(rt&&mt[2]?mt[1]!==c[mt[0]]:!(mt[0]in c))return!1}for(;++we<De;){mt=A[we];var Et=mt[0],an=c[Et],un=mt[1];if(rt&&mt[2]){if(an===n&&!(Et in c))return!1}else{var gn=new Ce;if(Q)var zn=Q(an,un,Et,c,m,gn);if(!(zn===n?at(un,an,P|T,Q,gn):zn))return!1}}return!0}function St(c){if(!Ro(c)||_3(c))return!1;var m=Cc(c)?xi:to;return m.test(Oh(c))}function on(c){return Wo(c)&&tt(c)==Je}function jn(c){return Wo(c)&&Ca(c)==Qe}function Vn(c){return Wo(c)&&e0(c.length)&&!!mr[tt(c)]}function Xn(c){return typeof c=="function"?c:c==null?ml:typeof c=="object"?jr(c)?xu(c[0],c[1]):as(c):k2(c)}function Jr(c){if(!_d(c))return $(c);var m=[];for(var A in oi(c))Rr.call(c,A)&&A!="constructor"&&m.push(A);return m}function pi(c){if(!Ro(c))return L3(c);var m=_d(c),A=[];for(var Q in c)Q=="constructor"&&(m||!Rr.call(c,Q))||A.push(Q);return A}function Fr(c,m){return c<m}function Li(c,m){var A=-1,Q=dl(c)?Pt(c.length):[];return F(c,function(we,De,rt){Q[++A]=m(we,De,rt)}),Q}function as(c){var m=pg(c);return m.length==1&&m[0][2]?Hy(m[0][0],m[0][1]):function(A){return A===c||Lt(A,c,m)}}function xu(c,m){return gg(c)&&Vy(m)?Hy(ec(c),m):function(A){var Q=Cg(A,c);return Q===n&&Q===m?Pg(A,c):at(m,Q,P|T)}}function ua(c,m,A,Q,we){c!==m&&gt(m,function(De,rt){if(we||(we=new Ce),Ro(De))Ph(c,m,rt,A,ua,Q,we);else{var mt=Q?Q(yg(c,rt),De,rt+"",c,m,we):n;mt===n&&(mt=De),jt(c,rt,mt)}},pl)}function Ph(c,m,A,Q,we,De,rt){var mt=yg(c,A),Et=yg(m,A),an=rt.get(Et);if(an){jt(c,A,an);return}var un=De?De(mt,Et,A+"",c,m,rt):n,gn=un===n;if(gn){var zn=jr(Et),ir=!zn&&Xc(Et),vr=!zn&&!ir&&xf(Et);un=Et,zn||ir||vr?jr(mt)?un=mt:ls(mt)?un=fl(mt):ir?(gn=!1,un=Ly(Et,!0)):vr?(gn=!1,un=Sy(Et,!0)):un=[]:wd(Et)||Nh(Et)?(un=mt,Nh(mt)?un=b2(mt):(!Ro(mt)||Cc(mt))&&(un=$y(Et))):gn=!1}gn&&(rt.set(Et,un),we(un,Et,Q,De,rt),rt.delete(Et)),jt(c,A,un)}function Ga(c,m){var A=c.length;if(A)return m+=m<0?A:0,Ec(m,A)?c[m]:n}function Xu(c,m,A){m.length?m=ri(m,function(De){return jr(De)?function(rt){return ar(rt,De.length===1?De[0]:De)}:De}):m=[ml];var Q=-1;m=ri(m,Tr(gr()));var we=Li(c,function(De,rt,mt){var Et=ri(m,function(an){return an(De)});return{criteria:Et,index:++Q,value:De}});return Yr(we,function(De,rt){return t3(De,rt,A)})}function ca(c,m){return Io(c,m,function(A,Q){return Pg(c,Q)})}function Io(c,m,A){for(var Q=-1,we=m.length,De={};++Q<we;){var rt=m[Q],mt=ar(c,rt);A(mt,rt)&&bc(De,Cu(rt,c),mt)}return De}function Ji(c){return function(m){return ar(m,c)}}function pf(c,m,A,Q){var we=Q?Bn:cn,De=-1,rt=m.length,mt=c;for(c===m&&(m=fl(m)),A&&(mt=ri(c,Tr(A)));++De<rt;)for(var Et=0,an=m[De],un=A?A(an):an;(Et=we(mt,un,Et,Q))>-1;)mt!==c&&No.call(mt,Et,1),No.call(c,Et,1);return c}function Ah(c,m){for(var A=c?m.length:0,Q=A-1;A--;){var we=m[A];if(A==Q||we!==De){var De=we;Ec(we)?No.call(c,we,1):wc(c,we)}}return c}function Mh(c,m){return c+_o(Ft()*(m-c+1))}function kh(c,m,A,Q){for(var we=-1,De=re(yo((m-c)/(A||1)),0),rt=Pt(De);De--;)rt[Q?De:++we]=c,c+=A;return rt}function mf(c,m){var A="";if(!c||m<1||m>ne)return A;do m%2&&(A+=c),m=_o(m/2),m&&(c+=c);while(m);return A}function qr(c,m){return _g(Gy(c,m,ml),c+"")}function gf(c){return Bt(Lf(c))}function Ip(c,m){var A=Lf(c);return Zp(A,Yn(m,0,A.length))}function bc(c,m,A,Q){if(!Ro(c))return c;m=Cu(m,c);for(var we=-1,De=m.length,rt=De-1,mt=c;mt!=null&&++we<De;){var Et=ec(m[we]),an=A;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return c;if(we!=rt){var un=mt[Et];an=Q?Q(un,Et,mt):n,an===n&&(an=Ro(un)?un:Ec(m[we+1])?[]:{})}dt(mt,Et,an),mt=mt[Et]}return c}var Lu=Ti?function(c,m){return Ti.set(c,m),c}:ml,Rp=La?function(c,m){return La(c,"toString",{configurable:!0,enumerable:!1,value:Mg(m),writable:!0})}:ml;function Fp(c){return Zp(Lf(c))}function hl(c,m,A){var Q=-1,we=c.length;m<0&&(m=-m>we?0:we+m),A=A>we?we:A,A<0&&(A+=we),we=m>A?0:A-m>>>0,m>>>=0;for(var De=Pt(we);++Q<we;)De[Q]=c[Q+m];return De}function jp(c,m){var A;return F(c,function(Q,we,De){return A=m(Q,we,De),!A}),!!A}function Su(c,m,A){var Q=0,we=c==null?Q:c.length;if(typeof m=="number"&&m===m&&we<=te){for(;Q<we;){var De=Q+we>>>1,rt=c[De];rt!==null&&!Dl(rt)&&(A?rt<=m:rt<m)?Q=De+1:we=De}return we}return gd(c,m,ml,A)}function gd(c,m,A,Q){var we=0,De=c==null?0:c.length;if(De===0)return 0;m=A(m);for(var rt=m!==m,mt=m===null,Et=Dl(m),an=m===n;we<De;){var un=_o((we+De)/2),gn=A(c[un]),zn=gn!==n,ir=gn===null,vr=gn===gn,Zr=Dl(gn);if(rt)var yr=Q||vr;else an?yr=vr&&(Q||zn):mt?yr=vr&&zn&&(Q||!ir):Et?yr=vr&&zn&&!ir&&(Q||!Zr):ir||Zr?yr=!1:yr=Q?gn<=m:gn<m;yr?we=un+1:De=un}return Ee(De,B)}function vd(c,m){for(var A=-1,Q=c.length,we=0,De=[];++A<Q;){var rt=c[A],mt=m?m(rt):rt;if(!A||!Pu(mt,Et)){var Et=mt;De[we++]=rt===0?0:rt}}return De}function zp(c){return typeof c=="number"?c:Dl(c)?ge:+c}function Ea(c){if(typeof c=="string")return c;if(jr(c))return ri(c,Ea)+"";if(Dl(c))return Do?Do.call(c):"";var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function Ju(c,m,A){var Q=-1,we=al,De=c.length,rt=!0,mt=[],Et=mt;if(A)rt=!1,we=ll;else if(De>=i){var an=m?null:a3(c);if(an)return Ho(an);rt=!1,we=ul,Et=new q}else Et=m?[]:mt;e:for(;++Q<De;){var un=c[Q],gn=m?m(un):un;if(un=A||un!==0?un:0,rt&&gn===gn){for(var zn=Et.length;zn--;)if(Et[zn]===gn)continue e;m&&Et.push(gn),mt.push(un)}else we(Et,gn,A)||(Et!==mt&&Et.push(gn),mt.push(un))}return mt}function wc(c,m){return m=Cu(m,c),c=qy(c,m),c==null||delete c[ec(nu(m))]}function vf(c,m,A,Q){return bc(c,m,A(ar(c,m)),Q)}function xc(c,m,A,Q){for(var we=c.length,De=Q?we:-1;(Q?De--:++De<we)&&m(c[De],De,c););return A?hl(c,Q?0:De,Q?De+1:we):hl(c,Q?De+1:0,Q?we:De)}function Ql(c,m){var A=c;return A instanceof Br&&(A=A.value()),va(m,function(Q,we){return we.func.apply(we.thisArg,vs([Q],we.args))},A)}function eu(c,m,A){var Q=c.length;if(Q<2)return Q?Ju(c[0]):[];for(var we=-1,De=Pt(Q);++we<Q;)for(var rt=c[we],mt=-1;++mt<Q;)mt!=we&&(De[we]=E(De[we]||rt,c[mt],m,A));return Ju(je(De,1),m,A)}function Eu(c,m,A){for(var Q=-1,we=c.length,De=m.length,rt={};++Q<we;){var mt=Q<De?m[Q]:n;A(rt,c[Q],mt)}return rt}function Yc(c){return ls(c)?c:[]}function Th(c){return typeof c=="function"?c:ml}function Cu(c,m){return jr(c)?c:gg(c,m)?[c]:Yy(Ii(c))}var ag=qr;function tu(c,m,A){var Q=c.length;return A=A===n?Q:A,!m&&A>=Q?c:hl(c,m,A)}var yf=Vs||function(c){return Wi.clearTimeout(c)};function Ly(c,m){if(m)return c.slice();var A=c.length,Q=bu?bu(A):new c.constructor(A);return c.copy(Q),Q}function lg(c){var m=new c.constructor(c.byteLength);return new ks(m).set(new ks(c)),m}function Jx(c,m){var A=m?lg(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.byteLength)}function Qx(c){var m=new c.constructor(c.source,sr.exec(c));return m.lastIndex=c.lastIndex,m}function e3(c){return Xr?oi(Xr.call(c)):{}}function Sy(c,m){var A=m?lg(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.length)}function Ey(c,m){if(c!==m){var A=c!==n,Q=c===null,we=c===c,De=Dl(c),rt=m!==n,mt=m===null,Et=m===m,an=Dl(m);if(!mt&&!an&&!De&&c>m||De&&rt&&Et&&!mt&&!an||Q&&rt&&Et||!A&&Et||!we)return 1;if(!Q&&!De&&!an&&c<m||an&&A&&we&&!Q&&!De||mt&&A&&we||!rt&&we||!Et)return-1}return 0}function t3(c,m,A){for(var Q=-1,we=c.criteria,De=m.criteria,rt=we.length,mt=A.length;++Q<rt;){var Et=Ey(we[Q],De[Q]);if(Et){if(Q>=mt)return Et;var an=A[Q];return Et*(an=="desc"?-1:1)}}return c.index-m.index}function Cy(c,m,A,Q){for(var we=-1,De=c.length,rt=A.length,mt=-1,Et=m.length,an=re(De-rt,0),un=Pt(Et+an),gn=!Q;++mt<Et;)un[mt]=m[mt];for(;++we<rt;)(gn||we<De)&&(un[A[we]]=c[we]);for(;an--;)un[mt++]=c[we++];return un}function Py(c,m,A,Q){for(var we=-1,De=c.length,rt=-1,mt=A.length,Et=-1,an=m.length,un=re(De-mt,0),gn=Pt(un+an),zn=!Q;++we<un;)gn[we]=c[we];for(var ir=we;++Et<an;)gn[ir+Et]=m[Et];for(;++rt<mt;)(zn||we<De)&&(gn[ir+A[rt]]=c[we++]);return gn}function fl(c,m){var A=-1,Q=c.length;for(m||(m=Pt(Q));++A<Q;)m[A]=c[A];return m}function Qu(c,m,A,Q){var we=!A;A||(A={});for(var De=-1,rt=m.length;++De<rt;){var mt=m[De],Et=Q?Q(A[mt],c[mt],mt,A,c):n;Et===n&&(Et=c[mt]),we?Mn(A,mt,Et):dt(A,mt,Et)}return A}function n3(c,m){return Qu(c,mg(c),m)}function r3(c,m){return Qu(c,zy(c),m)}function Up(c,m){return function(A,Q){var we=jr(A)?Zu:tn,De=m?m():{};return we(A,c,gr(Q,2),De)}}function _f(c){return qr(function(m,A){var Q=-1,we=A.length,De=we>1?A[we-1]:n,rt=we>2?A[2]:n;for(De=c.length>3&&typeof De=="function"?(we--,De):n,rt&&qa(A[0],A[1],rt)&&(De=we<3?n:De,we=1),m=oi(m);++Q<we;){var mt=A[Q];mt&&c(m,mt,Q,De)}return m})}function Ay(c,m){return function(A,Q){if(A==null)return A;if(!dl(A))return c(A,Q);for(var we=A.length,De=m?we:-1,rt=oi(A);(m?De--:++De<we)&&Q(rt[De],De,rt)!==!1;);return A}}function My(c){return function(m,A,Q){for(var we=-1,De=oi(m),rt=Q(m),mt=rt.length;mt--;){var Et=rt[c?mt:++we];if(A(De[Et],Et,De)===!1)break}return m}}function i3(c,m,A){var Q=m&j,we=yd(c);function De(){var rt=this&&this!==Wi&&this instanceof De?we:c;return rt.apply(Q?A:this,arguments)}return De}function ky(c){return function(m){m=Ii(m);var A=ta(m)?To(m):n,Q=A?A[0]:m.charAt(0),we=A?tu(A,1).join(""):m.slice(1);return Q[c]()+we}}function bf(c){return function(m){return va(A2(P2(m).replace(Gr,"")),c,"")}}function yd(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var A=ss(c.prototype),Q=c.apply(A,m);return Ro(Q)?Q:A}}function o3(c,m,A){var Q=yd(c);function we(){for(var De=arguments.length,rt=Pt(De),mt=De,Et=wf(we);mt--;)rt[mt]=arguments[mt];var an=De<3&&rt[0]!==Et&&rt[De-1]!==Et?[]:Vo(rt,Et);if(De-=an.length,De<A)return Dy(c,m,$p,we.placeholder,n,rt,an,n,n,A-De);var un=this&&this!==Wi&&this instanceof we?Q:c;return ni(un,this,rt)}return we}function Ty(c){return function(m,A,Q){var we=oi(m);if(!dl(m)){var De=gr(A,3);m=qs(m),A=function(mt){return De(we[mt],mt,we)}}var rt=c(m,A,Q);return rt>-1?we[De?m[rt]:rt]:n}}function By(c){return Sc(function(m){var A=m.length,Q=A,we=wo.prototype.thru;for(c&&m.reverse();Q--;){var De=m[Q];if(typeof De!="function")throw new ki(o);if(we&&!rt&&qp(De)=="wrapper")var rt=new wo([],!0)}for(Q=rt?Q:A;++Q<A;){De=m[Q];var mt=qp(De),Et=mt=="wrapper"?dg(De):n;Et&&vg(Et[0])&&Et[1]==(Le|K|se|H)&&!Et[4].length&&Et[9]==1?rt=rt[qp(Et[0])].apply(rt,Et[3]):rt=De.length==1&&vg(De)?rt[mt]():rt.thru(De)}return function(){var an=arguments,un=an[0];if(rt&&an.length==1&&jr(un))return rt.plant(un).value();for(var gn=0,zn=A?m[gn].apply(this,an):un;++gn<A;)zn=m[gn].call(this,zn);return zn}})}function $p(c,m,A,Q,we,De,rt,mt,Et,an){var un=m&Le,gn=m&j,zn=m&D,ir=m&(K|X),vr=m&R,Zr=zn?n:yd(c);function yr(){for(var ai=arguments.length,mi=Pt(ai),Il=ai;Il--;)mi[Il]=arguments[Il];if(ir)var Wa=wf(yr),Rl=ea(mi,Wa);if(Q&&(mi=Cy(mi,Q,we,ir)),De&&(mi=Py(mi,De,rt,ir)),ai-=Rl,ir&&ai<an){var us=Vo(mi,Wa);return Dy(c,m,$p,yr.placeholder,A,mi,us,mt,Et,an-ai)}var Au=gn?A:this,Ac=zn?Au[c]:c;return ai=mi.length,mt?mi=E3(mi,mt):vr&&ai>1&&mi.reverse(),un&&Et<ai&&(mi.length=Et),this&&this!==Wi&&this instanceof yr&&(Ac=Zr||yd(Ac)),Ac.apply(Au,mi)}return yr}function Oy(c,m){return function(A,Q){return Pe(A,c,m(Q),{})}}function Vp(c,m){return function(A,Q){var we;if(A===n&&Q===n)return m;if(A!==n&&(we=A),Q!==n){if(we===n)return Q;typeof A=="string"||typeof Q=="string"?(A=Ea(A),Q=Ea(Q)):(A=zp(A),Q=zp(Q)),we=c(A,Q)}return we}}function ug(c){return Sc(function(m){return m=ri(m,Tr(gr())),qr(function(A){var Q=this;return c(m,function(we){return ni(we,Q,A)})})})}function Hp(c,m){m=m===n?" ":Ea(m);var A=m.length;if(A<2)return A?mf(m,c):m;var Q=mf(m,yo(c/ko(m)));return ta(m)?tu(To(Q),0,c).join(""):Q.slice(0,c)}function s3(c,m,A,Q){var we=m&j,De=yd(c);function rt(){for(var mt=-1,Et=arguments.length,an=-1,un=Q.length,gn=Pt(un+Et),zn=this&&this!==Wi&&this instanceof rt?De:c;++an<un;)gn[an]=Q[an];for(;Et--;)gn[an++]=arguments[++mt];return ni(zn,we?A:this,gn)}return rt}function Ny(c){return function(m,A,Q){return Q&&typeof Q!="number"&&qa(m,A,Q)&&(A=Q=n),m=Pc(m),A===n?(A=m,m=0):A=Pc(A),Q=Q===n?m<A?1:-1:Pc(Q),kh(m,A,Q,c)}}function Gp(c){return function(m,A){return typeof m=="string"&&typeof A=="string"||(m=ru(m),A=ru(A)),c(m,A)}}function Dy(c,m,A,Q,we,De,rt,mt,Et,an){var un=m&K,gn=un?rt:n,zn=un?n:rt,ir=un?De:n,vr=un?n:De;m|=un?se:me,m&=~(un?me:se),m&U||(m&=-4);var Zr=[c,m,we,ir,gn,vr,zn,mt,Et,an],yr=A.apply(n,Zr);return vg(c)&&Wy(yr,Zr),yr.placeholder=Q,Zy(yr,c,m)}function cg(c){var m=Mi[c];return function(A,Q){if(A=ru(A),Q=Q==null?0:Ee(Wr(Q),292),Q&&p(A)){var we=(Ii(A)+"e").split("e"),De=m(we[0]+"e"+(+we[1]+Q));return we=(Ii(De)+"e").split("e"),+(we[0]+"e"+(+we[1]-Q))}return m(A)}}var a3=so&&1/Ho(new so([,-0]))[1]==G?function(c){return new so(c)}:Bg;function Iy(c){return function(m){var A=Ca(m);return A==fe?cl(m):A==Qe?Ku(m):ro(m,c(m))}}function Lc(c,m,A,Q,we,De,rt,mt){var Et=m&D;if(!Et&&typeof c!="function")throw new ki(o);var an=Q?Q.length:0;if(an||(m&=-97,Q=we=n),rt=rt===n?rt:re(Wr(rt),0),mt=mt===n?mt:Wr(mt),an-=we?we.length:0,m&me){var un=Q,gn=we;Q=we=n}var zn=Et?n:dg(c),ir=[c,m,A,Q,we,un,gn,De,rt,mt];if(zn&&x3(ir,zn),c=ir[0],m=ir[1],A=ir[2],Q=ir[3],we=ir[4],mt=ir[9]=ir[9]===n?Et?0:c.length:re(ir[9]-an,0),!mt&&m&(K|X)&&(m&=-25),!m||m==j)var vr=i3(c,m,A);else m==K||m==X?vr=o3(c,m,mt):(m==se||m==(j|se))&&!we.length?vr=s3(c,m,A,Q):vr=$p.apply(n,ir);var Zr=zn?Lu:Wy;return Zy(Zr(vr,ir),c,m)}function Ry(c,m,A,Q){return c===n||Pu(c,ia[A])&&!Rr.call(Q,A)?m:c}function Fy(c,m,A,Q,we,De){return Ro(c)&&Ro(m)&&(De.set(m,c),ua(c,m,n,Fy,De),De.delete(m)),c}function l3(c){return wd(c)?n:c}function jy(c,m,A,Q,we,De){var rt=A&P,mt=c.length,Et=m.length;if(mt!=Et&&!(rt&&Et>mt))return!1;var an=De.get(c),un=De.get(m);if(an&&un)return an==m&&un==c;var gn=-1,zn=!0,ir=A&T?new q:n;for(De.set(c,m),De.set(m,c);++gn<mt;){var vr=c[gn],Zr=m[gn];if(Q)var yr=rt?Q(Zr,vr,gn,m,c,De):Q(vr,Zr,gn,c,m,De);if(yr!==n){if(yr)continue;zn=!1;break}if(ir){if(!N(m,function(ai,mi){if(!ul(ir,mi)&&(vr===ai||we(vr,ai,A,Q,De)))return ir.push(mi)})){zn=!1;break}}else if(!(vr===Zr||we(vr,Zr,A,Q,De))){zn=!1;break}}return De.delete(c),De.delete(m),zn}function u3(c,m,A,Q,we,De,rt){switch(A){case mn:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case hn:return!(c.byteLength!=m.byteLength||!De(new ks(c),new ks(m)));case J:case ae:case be:return Pu(+c,+m);case Me:return c.name==m.name&&c.message==m.message;case Je:case it:return c==m+"";case fe:var mt=cl;case Qe:var Et=Q&P;if(mt||(mt=Ho),c.size!=m.size&&!Et)return!1;var an=rt.get(c);if(an)return an==m;Q|=T,rt.set(c,m);var un=jy(mt(c),mt(m),Q,we,De,rt);return rt.delete(c),un;case Mt:if(Xr)return Xr.call(c)==Xr.call(m)}return!1}function c3(c,m,A,Q,we,De){var rt=A&P,mt=hg(c),Et=mt.length,an=hg(m),un=an.length;if(Et!=un&&!rt)return!1;for(var gn=Et;gn--;){var zn=mt[gn];if(!(rt?zn in m:Rr.call(m,zn)))return!1}var ir=De.get(c),vr=De.get(m);if(ir&&vr)return ir==m&&vr==c;var Zr=!0;De.set(c,m),De.set(m,c);for(var yr=rt;++gn<Et;){zn=mt[gn];var ai=c[zn],mi=m[zn];if(Q)var Il=rt?Q(mi,ai,zn,m,c,De):Q(ai,mi,zn,c,m,De);if(!(Il===n?ai===mi||we(ai,mi,A,Q,De):Il)){Zr=!1;break}yr||(yr=zn=="constructor")}if(Zr&&!yr){var Wa=c.constructor,Rl=m.constructor;Wa!=Rl&&"constructor"in c&&"constructor"in m&&!(typeof Wa=="function"&&Wa instanceof Wa&&typeof Rl=="function"&&Rl instanceof Rl)&&(Zr=!1)}return De.delete(c),De.delete(m),Zr}function Sc(c){return _g(Gy(c,n,e2),c+"")}function hg(c){return Ze(c,qs,mg)}function fg(c){return Ze(c,pl,zy)}var dg=Ti?function(c){return Ti.get(c)}:Bg;function qp(c){for(var m=c.name+"",A=os[m],Q=Rr.call(os,m)?A.length:0;Q--;){var we=A[Q],De=we.func;if(De==null||De==c)return we.name}return m}function wf(c){var m=Rr.call(Te,"placeholder")?Te:c;return m.placeholder}function gr(){var c=Te.iteratee||kg;return c=c===kg?Xn:c,arguments.length?c(arguments[0],arguments[1]):c}function Wp(c,m){var A=c.__data__;return y3(m)?A[typeof m=="string"?"string":"hash"]:A.map}function pg(c){for(var m=qs(c),A=m.length;A--;){var Q=m[A],we=c[Q];m[A]=[Q,we,Vy(we)]}return m}function Bh(c,m){var A=io(c,m);return St(A)?A:n}function h3(c){var m=Rr.call(c,xa),A=c[xa];try{c[xa]=n;var Q=!0}catch{}var we=si.call(c);return Q&&(m?c[xa]=A:delete c[xa]),we}var mg=Hs?function(c){return c==null?[]:(c=oi(c),Us(Hs(c),function(m){return wi.call(c,m)}))}:Og,zy=Hs?function(c){for(var m=[];c;)vs(m,mg(c)),c=aa(c);return m}:Og,Ca=tt;(On&&Ca(new On(new ArrayBuffer(1)))!=mn||Kn&&Ca(new Kn)!=fe||Pr&&Ca(Pr.resolve())!=Xe||so&&Ca(new so)!=Qe||$i&&Ca(new $i)!=Nt)&&(Ca=function(c){var m=tt(c),A=m==Ue?c.constructor:n,Q=A?Oh(A):"";if(Q)switch(Q){case yc:return mn;case la:return fe;case Gs:return Xe;case Ts:return Qe;case Eh:return Nt}return m});function f3(c,m,A){for(var Q=-1,we=A.length;++Q<we;){var De=A[Q],rt=De.size;switch(De.type){case"drop":c+=rt;break;case"dropRight":m-=rt;break;case"take":m=Ee(m,c+rt);break;case"takeRight":c=re(c,m-rt);break}}return{start:c,end:m}}function d3(c){var m=c.match(yi);return m?m[1].split(Es):[]}function Uy(c,m,A){m=Cu(m,c);for(var Q=-1,we=m.length,De=!1;++Q<we;){var rt=ec(m[Q]);if(!(De=c!=null&&A(c,rt)))break;c=c[rt]}return De||++Q!=we?De:(we=c==null?0:c.length,!!we&&e0(we)&&Ec(rt,we)&&(jr(c)||Nh(c)))}function p3(c){var m=c.length,A=new c.constructor(m);return m&&typeof c[0]=="string"&&Rr.call(c,"index")&&(A.index=c.index,A.input=c.input),A}function $y(c){return typeof c.constructor=="function"&&!_d(c)?ss(aa(c)):{}}function m3(c,m,A){var Q=c.constructor;switch(m){case hn:return lg(c);case J:case ae:return new Q(+c);case mn:return Jx(c,A);case et:case ot:case nt:case $t:case en:case kn:case Ln:case Tn:case or:return Sy(c,A);case fe:return new Q;case be:case it:return new Q(c);case Je:return Qx(c);case Qe:return new Q;case Mt:return e3(c)}}function g3(c,m){var A=m.length;if(!A)return c;var Q=A-1;return m[Q]=(A>1?"& ":"")+m[Q],m=m.join(A>2?", ":" "),c.replace(bn,`{
/* [wrapped with `+m+`] */
`)}function v3(c){return jr(c)||Nh(c)||!!(is&&c&&c[is])}function Ec(c,m){var A=typeof c;return m=m??ne,!!m&&(A=="number"||A!="symbol"&&qi.test(c))&&c>-1&&c%1==0&&c<m}function qa(c,m,A){if(!Ro(A))return!1;var Q=typeof m;return(Q=="number"?dl(A)&&Ec(m,A.length):Q=="string"&&m in A)?Pu(A[m],c):!1}function gg(c,m){if(jr(c))return!1;var A=typeof c;return A=="number"||A=="symbol"||A=="boolean"||c==null||Dl(c)?!0:Jt.test(c)||!Ut.test(c)||m!=null&&c in oi(m)}function y3(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function vg(c){var m=qp(c),A=Te[m];if(typeof A!="function"||!(m in Br.prototype))return!1;if(c===A)return!0;var Q=dg(A);return!!Q&&c===Q[0]}function _3(c){return!!vo&&vo in c}var b3=oa?Cc:Ng;function _d(c){var m=c&&c.constructor,A=typeof m=="function"&&m.prototype||ia;return c===A}function Vy(c){return c===c&&!Ro(c)}function Hy(c,m){return function(A){return A==null?!1:A[c]===m&&(m!==n||c in oi(A))}}function w3(c){var m=Jp(c,function(Q){return A.size===d&&A.clear(),Q}),A=m.cache;return m}function x3(c,m){var A=c[1],Q=m[1],we=A|Q,De=we<(j|D|Le),rt=Q==Le&&A==K||Q==Le&&A==H&&c[7].length<=m[8]||Q==(Le|H)&&m[7].length<=m[8]&&A==K;if(!(De||rt))return c;Q&j&&(c[2]=m[2],we|=A&j?0:U);var mt=m[3];if(mt){var Et=c[3];c[3]=Et?Cy(Et,mt,m[4]):mt,c[4]=Et?Vo(c[3],g):m[4]}return mt=m[5],mt&&(Et=c[5],c[5]=Et?Py(Et,mt,m[6]):mt,c[6]=Et?Vo(c[5],g):m[6]),mt=m[7],mt&&(c[7]=mt),Q&Le&&(c[8]=c[8]==null?m[8]:Ee(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=we,c}function L3(c){var m=[];if(c!=null)for(var A in oi(c))m.push(A);return m}function S3(c){return si.call(c)}function Gy(c,m,A){return m=re(m===n?c.length-1:m,0),function(){for(var Q=arguments,we=-1,De=re(Q.length-m,0),rt=Pt(De);++we<De;)rt[we]=Q[m+we];we=-1;for(var mt=Pt(m+1);++we<m;)mt[we]=Q[we];return mt[m]=A(rt),ni(c,this,mt)}}function qy(c,m){return m.length<2?c:ar(c,hl(m,0,-1))}function E3(c,m){for(var A=c.length,Q=Ee(m.length,A),we=fl(c);Q--;){var De=m[Q];c[Q]=Ec(De,A)?we[De]:n}return c}function yg(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Wy=Ky(Lu),bd=vc||function(c,m){return Wi.setTimeout(c,m)},_g=Ky(Rp);function Zy(c,m,A){var Q=m+"";return _g(c,g3(Q,C3(d3(Q),A)))}function Ky(c){var m=0,A=0;return function(){var Q=st(),we=k-(Q-A);if(A=Q,we>0){if(++m>=O)return arguments[0]}else m=0;return c.apply(n,arguments)}}function Zp(c,m){var A=-1,Q=c.length,we=Q-1;for(m=m===n?Q:m;++A<m;){var De=Mh(A,we),rt=c[De];c[De]=c[A],c[A]=rt}return c.length=m,c}var Yy=w3(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(vn,function(A,Q,we,De){m.push(we?De.replace(Er,"$1"):Q||A)}),m});function ec(c){if(typeof c=="string"||Dl(c))return c;var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function Oh(c){if(c!=null){try{return sa.call(c)}catch{}try{return c+""}catch{}}return""}function C3(c,m){return mo(ce,function(A){var Q="_."+A[0];m&A[1]&&!al(c,Q)&&c.push(Q)}),c.sort()}function Xy(c){if(c instanceof Br)return c.clone();var m=new wo(c.__wrapped__,c.__chain__);return m.__actions__=fl(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function P3(c,m,A){(A?qa(c,m,A):m===n)?m=1:m=re(Wr(m),0);var Q=c==null?0:c.length;if(!Q||m<1)return[];for(var we=0,De=0,rt=Pt(yo(Q/m));we<Q;)rt[De++]=hl(c,we,we+=m);return rt}function A3(c){for(var m=-1,A=c==null?0:c.length,Q=0,we=[];++m<A;){var De=c[m];De&&(we[Q++]=De)}return we}function M3(){var c=arguments.length;if(!c)return[];for(var m=Pt(c-1),A=arguments[0],Q=c;Q--;)m[Q-1]=arguments[Q];return vs(jr(A)?fl(A):[A],je(m,1))}var k3=qr(function(c,m){return ls(c)?E(c,je(m,1,ls,!0)):[]}),T3=qr(function(c,m){var A=nu(m);return ls(A)&&(A=n),ls(c)?E(c,je(m,1,ls,!0),gr(A,2)):[]}),B3=qr(function(c,m){var A=nu(m);return ls(A)&&(A=n),ls(c)?E(c,je(m,1,ls,!0),n,A):[]});function O3(c,m,A){var Q=c==null?0:c.length;return Q?(m=A||m===n?1:Wr(m),hl(c,m<0?0:m,Q)):[]}function N3(c,m,A){var Q=c==null?0:c.length;return Q?(m=A||m===n?1:Wr(m),m=Q-m,hl(c,0,m<0?0:m)):[]}function D3(c,m){return c&&c.length?xc(c,gr(m,3),!0,!0):[]}function I3(c,m){return c&&c.length?xc(c,gr(m,3),!0):[]}function R3(c,m,A,Q){var we=c==null?0:c.length;return we?(A&&typeof A!="number"&&qa(c,m,A)&&(A=0,Q=we),Se(c,m,A,Q)):[]}function Jy(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=A==null?0:Wr(A);return we<0&&(we=re(Q+we,0)),Rt(c,gr(m,3),we)}function Qy(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=Q-1;return A!==n&&(we=Wr(A),we=A<0?re(Q+we,0):Ee(we,Q-1)),Rt(c,gr(m,3),we,!0)}function e2(c){var m=c==null?0:c.length;return m?je(c,1):[]}function F3(c){var m=c==null?0:c.length;return m?je(c,G):[]}function j3(c,m){var A=c==null?0:c.length;return A?(m=m===n?1:Wr(m),je(c,m)):[]}function z3(c){for(var m=-1,A=c==null?0:c.length,Q={};++m<A;){var we=c[m];Q[we[0]]=we[1]}return Q}function t2(c){return c&&c.length?c[0]:n}function U3(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=A==null?0:Wr(A);return we<0&&(we=re(Q+we,0)),cn(c,m,we)}function $3(c){var m=c==null?0:c.length;return m?hl(c,0,-1):[]}var V3=qr(function(c){var m=ri(c,Yc);return m.length&&m[0]===c[0]?pe(m):[]}),H3=qr(function(c){var m=nu(c),A=ri(c,Yc);return m===nu(A)?m=n:A.pop(),A.length&&A[0]===c[0]?pe(A,gr(m,2)):[]}),G3=qr(function(c){var m=nu(c),A=ri(c,Yc);return m=typeof m=="function"?m:n,m&&A.pop(),A.length&&A[0]===c[0]?pe(A,n,m):[]});function q3(c,m){return c==null?"":S.call(c,m)}function nu(c){var m=c==null?0:c.length;return m?c[m-1]:n}function W3(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=Q;return A!==n&&(we=Wr(A),we=we<0?re(Q+we,0):Ee(we,Q-1)),m===m?ya(c,m,we):Rt(c,Fn,we,!0)}function Z3(c,m){return c&&c.length?Ga(c,Wr(m)):n}var K3=qr(n2);function n2(c,m){return c&&c.length&&m&&m.length?pf(c,m):c}function Y3(c,m,A){return c&&c.length&&m&&m.length?pf(c,m,gr(A,2)):c}function X3(c,m,A){return c&&c.length&&m&&m.length?pf(c,m,n,A):c}var J3=Sc(function(c,m){var A=c==null?0:c.length,Q=En(c,m);return Ah(c,ri(m,function(we){return Ec(we,A)?+we:we}).sort(Ey)),Q});function Q3(c,m){var A=[];if(!(c&&c.length))return A;var Q=-1,we=[],De=c.length;for(m=gr(m,3);++Q<De;){var rt=c[Q];m(rt,Q,c)&&(A.push(rt),we.push(Q))}return Ah(c,we),A}function bg(c){return c==null?c:sn.call(c)}function eL(c,m,A){var Q=c==null?0:c.length;return Q?(A&&typeof A!="number"&&qa(c,m,A)?(m=0,A=Q):(m=m==null?0:Wr(m),A=A===n?Q:Wr(A)),hl(c,m,A)):[]}function tL(c,m){return Su(c,m)}function nL(c,m,A){return gd(c,m,gr(A,2))}function rL(c,m){var A=c==null?0:c.length;if(A){var Q=Su(c,m);if(Q<A&&Pu(c[Q],m))return Q}return-1}function iL(c,m){return Su(c,m,!0)}function oL(c,m,A){return gd(c,m,gr(A,2),!0)}function sL(c,m){var A=c==null?0:c.length;if(A){var Q=Su(c,m,!0)-1;if(Pu(c[Q],m))return Q}return-1}function aL(c){return c&&c.length?vd(c):[]}function lL(c,m){return c&&c.length?vd(c,gr(m,2)):[]}function uL(c){var m=c==null?0:c.length;return m?hl(c,1,m):[]}function cL(c,m,A){return c&&c.length?(m=A||m===n?1:Wr(m),hl(c,0,m<0?0:m)):[]}function hL(c,m,A){var Q=c==null?0:c.length;return Q?(m=A||m===n?1:Wr(m),m=Q-m,hl(c,m<0?0:m,Q)):[]}function fL(c,m){return c&&c.length?xc(c,gr(m,3),!1,!0):[]}function dL(c,m){return c&&c.length?xc(c,gr(m,3)):[]}var pL=qr(function(c){return Ju(je(c,1,ls,!0))}),mL=qr(function(c){var m=nu(c);return ls(m)&&(m=n),Ju(je(c,1,ls,!0),gr(m,2))}),gL=qr(function(c){var m=nu(c);return m=typeof m=="function"?m:n,Ju(je(c,1,ls,!0),n,m)});function vL(c){return c&&c.length?Ju(c):[]}function yL(c,m){return c&&c.length?Ju(c,gr(m,2)):[]}function _L(c,m){return m=typeof m=="function"?m:n,c&&c.length?Ju(c,n,m):[]}function wg(c){if(!(c&&c.length))return[];var m=0;return c=Us(c,function(A){if(ls(A))return m=re(A.length,m),!0}),Yi(m,function(A){return ri(c,fr(A))})}function r2(c,m){if(!(c&&c.length))return[];var A=wg(c);return m==null?A:ri(A,function(Q){return ni(m,n,Q)})}var bL=qr(function(c,m){return ls(c)?E(c,m):[]}),wL=qr(function(c){return eu(Us(c,ls))}),xL=qr(function(c){var m=nu(c);return ls(m)&&(m=n),eu(Us(c,ls),gr(m,2))}),LL=qr(function(c){var m=nu(c);return m=typeof m=="function"?m:n,eu(Us(c,ls),n,m)}),SL=qr(wg);function EL(c,m){return Eu(c||[],m||[],dt)}function CL(c,m){return Eu(c||[],m||[],bc)}var PL=qr(function(c){var m=c.length,A=m>1?c[m-1]:n;return A=typeof A=="function"?(c.pop(),A):n,r2(c,A)});function i2(c){var m=Te(c);return m.__chain__=!0,m}function AL(c,m){return m(c),c}function Kp(c,m){return m(c)}var ML=Sc(function(c){var m=c.length,A=m?c[0]:0,Q=this.__wrapped__,we=function(De){return En(De,c)};return m>1||this.__actions__.length||!(Q instanceof Br)||!Ec(A)?this.thru(we):(Q=Q.slice(A,+A+(m?1:0)),Q.__actions__.push({func:Kp,args:[we],thisArg:n}),new wo(Q,this.__chain__).thru(function(De){return m&&!De.length&&De.push(n),De}))});function kL(){return i2(this)}function TL(){return new wo(this.value(),this.__chain__)}function BL(){this.__values__===n&&(this.__values__=y2(this.value()));var c=this.__index__>=this.__values__.length,m=c?n:this.__values__[this.__index__++];return{done:c,value:m}}function OL(){return this}function NL(c){for(var m,A=this;A instanceof wu;){var Q=Xy(A);Q.__index__=0,Q.__values__=n,m?we.__wrapped__=Q:m=Q;var we=Q;A=A.__wrapped__}return we.__wrapped__=c,m}function DL(){var c=this.__wrapped__;if(c instanceof Br){var m=c;return this.__actions__.length&&(m=new Br(this)),m=m.reverse(),m.__actions__.push({func:Kp,args:[bg],thisArg:n}),new wo(m,this.__chain__)}return this.thru(bg)}function IL(){return Ql(this.__wrapped__,this.__actions__)}var RL=Up(function(c,m,A){Rr.call(c,A)?++c[A]:Mn(c,A,1)});function FL(c,m,A){var Q=jr(c)?Bl:ee;return A&&qa(c,m,A)&&(m=n),Q(c,gr(m,3))}function jL(c,m){var A=jr(c)?Us:Ke;return A(c,gr(m,3))}var zL=Ty(Jy),UL=Ty(Qy);function $L(c,m){return je(Yp(c,m),1)}function VL(c,m){return je(Yp(c,m),G)}function HL(c,m,A){return A=A===n?1:Wr(A),je(Yp(c,m),A)}function o2(c,m){var A=jr(c)?mo:F;return A(c,gr(m,3))}function s2(c,m){var A=jr(c)?zs:Y;return A(c,gr(m,3))}var GL=Up(function(c,m,A){Rr.call(c,A)?c[A].push(m):Mn(c,A,[m])});function qL(c,m,A,Q){c=dl(c)?c:Lf(c),A=A&&!Q?Wr(A):0;var we=c.length;return A<0&&(A=re(we+A,0)),t0(c)?A<=we&&c.indexOf(m,A)>-1:!!we&&cn(c,m,A)>-1}var WL=qr(function(c,m,A){var Q=-1,we=typeof m=="function",De=dl(c)?Pt(c.length):[];return F(c,function(rt){De[++Q]=we?ni(m,rt,A):Ne(rt,m,A)}),De}),ZL=Up(function(c,m,A){Mn(c,A,m)});function Yp(c,m){var A=jr(c)?ri:Li;return A(c,gr(m,3))}function KL(c,m,A,Q){return c==null?[]:(jr(m)||(m=m==null?[]:[m]),A=Q?n:A,jr(A)||(A=A==null?[]:[A]),Xu(c,m,A))}var YL=Up(function(c,m,A){c[A?0:1].push(m)},function(){return[[],[]]});function XL(c,m,A){var Q=jr(c)?va:Pi,we=arguments.length<3;return Q(c,gr(m,4),A,we,F)}function JL(c,m,A){var Q=jr(c)?Ki:Pi,we=arguments.length<3;return Q(c,gr(m,4),A,we,Y)}function QL(c,m){var A=jr(c)?Us:Ke;return A(c,Qp(gr(m,3)))}function eS(c){var m=jr(c)?Bt:gf;return m(c)}function tS(c,m,A){(A?qa(c,m,A):m===n)?m=1:m=Wr(m);var Q=jr(c)?bt:Ip;return Q(c,m)}function nS(c){var m=jr(c)?Wt:Fp;return m(c)}function rS(c){if(c==null)return 0;if(dl(c))return t0(c)?ko(c):c.length;var m=Ca(c);return m==fe||m==Qe?c.size:Jr(c).length}function iS(c,m,A){var Q=jr(c)?N:jp;return A&&qa(c,m,A)&&(m=n),Q(c,gr(m,3))}var oS=qr(function(c,m){if(c==null)return[];var A=m.length;return A>1&&qa(c,m[0],m[1])?m=[]:A>2&&qa(m[0],m[1],m[2])&&(m=[m[0]]),Xu(c,je(m,1),[])}),Xp=qo||function(){return Wi.Date.now()};function sS(c,m){if(typeof m!="function")throw new ki(o);return c=Wr(c),function(){if(--c<1)return m.apply(this,arguments)}}function a2(c,m,A){return m=A?n:m,m=c&&m==null?c.length:m,Lc(c,Le,n,n,n,n,m)}function l2(c,m){var A;if(typeof m!="function")throw new ki(o);return c=Wr(c),function(){return--c>0&&(A=m.apply(this,arguments)),c<=1&&(m=n),A}}var xg=qr(function(c,m,A){var Q=j;if(A.length){var we=Vo(A,wf(xg));Q|=se}return Lc(c,Q,m,A,we)}),u2=qr(function(c,m,A){var Q=j|D;if(A.length){var we=Vo(A,wf(u2));Q|=se}return Lc(m,Q,c,A,we)});function c2(c,m,A){m=A?n:m;var Q=Lc(c,K,n,n,n,n,n,m);return Q.placeholder=c2.placeholder,Q}function h2(c,m,A){m=A?n:m;var Q=Lc(c,X,n,n,n,n,n,m);return Q.placeholder=h2.placeholder,Q}function f2(c,m,A){var Q,we,De,rt,mt,Et,an=0,un=!1,gn=!1,zn=!0;if(typeof c!="function")throw new ki(o);m=ru(m)||0,Ro(A)&&(un=!!A.leading,gn="maxWait"in A,De=gn?re(ru(A.maxWait)||0,m):De,zn="trailing"in A?!!A.trailing:zn);function ir(us){var Au=Q,Ac=we;return Q=we=n,an=us,rt=c.apply(Ac,Au),rt}function vr(us){return an=us,mt=bd(ai,m),un?ir(us):rt}function Zr(us){var Au=us-Et,Ac=us-an,T2=m-Au;return gn?Ee(T2,De-Ac):T2}function yr(us){var Au=us-Et,Ac=us-an;return Et===n||Au>=m||Au<0||gn&&Ac>=De}function ai(){var us=Xp();if(yr(us))return mi(us);mt=bd(ai,Zr(us))}function mi(us){return mt=n,zn&&Q?ir(us):(Q=we=n,rt)}function Il(){mt!==n&&yf(mt),an=0,Q=Et=we=mt=n}function Wa(){return mt===n?rt:mi(Xp())}function Rl(){var us=Xp(),Au=yr(us);if(Q=arguments,we=this,Et=us,Au){if(mt===n)return vr(Et);if(gn)return yf(mt),mt=bd(ai,m),ir(Et)}return mt===n&&(mt=bd(ai,m)),rt}return Rl.cancel=Il,Rl.flush=Wa,Rl}var aS=qr(function(c,m){return x(c,1,m)}),lS=qr(function(c,m,A){return x(c,ru(m)||0,A)});function uS(c){return Lc(c,R)}function Jp(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new ki(o);var A=function(){var Q=arguments,we=m?m.apply(this,Q):Q[0],De=A.cache;if(De.has(we))return De.get(we);var rt=c.apply(this,Q);return A.cache=De.set(we,rt)||De,rt};return A.cache=new(Jp.Cache||Sa),A}Jp.Cache=Sa;function Qp(c){if(typeof c!="function")throw new ki(o);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function cS(c){return l2(2,c)}var hS=ag(function(c,m){m=m.length==1&&jr(m[0])?ri(m[0],Tr(gr())):ri(je(m,1),Tr(gr()));var A=m.length;return qr(function(Q){for(var we=-1,De=Ee(Q.length,A);++we<De;)Q[we]=m[we].call(this,Q[we]);return ni(c,this,Q)})}),Lg=qr(function(c,m){var A=Vo(m,wf(Lg));return Lc(c,se,n,m,A)}),d2=qr(function(c,m){var A=Vo(m,wf(d2));return Lc(c,me,n,m,A)}),fS=Sc(function(c,m){return Lc(c,H,n,n,n,m)});function dS(c,m){if(typeof c!="function")throw new ki(o);return m=m===n?m:Wr(m),qr(c,m)}function pS(c,m){if(typeof c!="function")throw new ki(o);return m=m==null?0:re(Wr(m),0),qr(function(A){var Q=A[m],we=tu(A,0,m);return Q&&vs(we,Q),ni(c,this,we)})}function mS(c,m,A){var Q=!0,we=!0;if(typeof c!="function")throw new ki(o);return Ro(A)&&(Q="leading"in A?!!A.leading:Q,we="trailing"in A?!!A.trailing:we),f2(c,m,{leading:Q,maxWait:m,trailing:we})}function gS(c){return a2(c,1)}function vS(c,m){return Lg(Th(m),c)}function yS(){if(!arguments.length)return[];var c=arguments[0];return jr(c)?c:[c]}function _S(c){return l(c,_)}function bS(c,m){return m=typeof m=="function"?m:n,l(c,_,m)}function wS(c){return l(c,y|_)}function xS(c,m){return m=typeof m=="function"?m:n,l(c,y|_,m)}function LS(c,m){return m==null||v(c,m,qs(m))}function Pu(c,m){return c===m||c!==c&&m!==m}var SS=Gp(ht),ES=Gp(function(c,m){return c>=m}),Nh=Oe(function(){return arguments}())?Oe:function(c){return Wo(c)&&Rr.call(c,"callee")&&!wi.call(c,"callee")},jr=Pt.isArray,CS=Yl?Tr(Yl):Ie;function dl(c){return c!=null&&e0(c.length)&&!Cc(c)}function ls(c){return Wo(c)&&dl(c)}function PS(c){return c===!0||c===!1||Wo(c)&&tt(c)==J}var Xc=a||Ng,AS=Qs?Tr(Qs):Re;function MS(c){return Wo(c)&&c.nodeType===1&&!wd(c)}function kS(c){if(c==null)return!0;if(dl(c)&&(jr(c)||typeof c=="string"||typeof c.splice=="function"||Xc(c)||xf(c)||Nh(c)))return!c.length;var m=Ca(c);if(m==fe||m==Qe)return!c.size;if(_d(c))return!Jr(c).length;for(var A in c)if(Rr.call(c,A))return!1;return!0}function TS(c,m){return at(c,m)}function BS(c,m,A){A=typeof A=="function"?A:n;var Q=A?A(c,m):n;return Q===n?at(c,m,n,A):!!Q}function Sg(c){if(!Wo(c))return!1;var m=tt(c);return m==Me||m==Fe||typeof c.message=="string"&&typeof c.name=="string"&&!wd(c)}function OS(c){return typeof c=="number"&&p(c)}function Cc(c){if(!Ro(c))return!1;var m=tt(c);return m==Ye||m==oe||m==he||m==ze}function p2(c){return typeof c=="number"&&c==Wr(c)}function e0(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ne}function Ro(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function Wo(c){return c!=null&&typeof c=="object"}var m2=Ml?Tr(Ml):pt;function NS(c,m){return c===m||Lt(c,m,pg(m))}function DS(c,m,A){return A=typeof A=="function"?A:n,Lt(c,m,pg(m),A)}function IS(c){return g2(c)&&c!=+c}function RS(c){if(b3(c))throw new Wn(s);return St(c)}function FS(c){return c===null}function jS(c){return c==null}function g2(c){return typeof c=="number"||Wo(c)&&tt(c)==be}function wd(c){if(!Wo(c)||tt(c)!=Ue)return!1;var m=aa(c);if(m===null)return!0;var A=Rr.call(m,"constructor")&&m.constructor;return typeof A=="function"&&A instanceof A&&sa.call(A)==di}var Eg=kl?Tr(kl):on;function zS(c){return p2(c)&&c>=-9007199254740991&&c<=ne}var v2=Ms?Tr(Ms):jn;function t0(c){return typeof c=="string"||!jr(c)&&Wo(c)&&tt(c)==it}function Dl(c){return typeof c=="symbol"||Wo(c)&&tt(c)==Mt}var xf=Tl?Tr(Tl):Vn;function US(c){return c===n}function $S(c){return Wo(c)&&Ca(c)==Nt}function VS(c){return Wo(c)&&tt(c)==Kt}var HS=Gp(Fr),GS=Gp(function(c,m){return c<=m});function y2(c){if(!c)return[];if(dl(c))return t0(c)?To(c):fl(c);if(cr&&c[cr])return ns(c[cr]());var m=Ca(c),A=m==fe?cl:m==Qe?Ho:Lf;return A(c)}function Pc(c){if(!c)return c===0?c:0;if(c=ru(c),c===G||c===-1/0){var m=c<0?-1:1;return m*_e}return c===c?c:0}function Wr(c){var m=Pc(c),A=m%1;return m===m?A?m-A:m:0}function _2(c){return c?Yn(Wr(c),0,Ve):0}function ru(c){if(typeof c=="number")return c;if(Dl(c))return ge;if(Ro(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=Ro(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=ys(c);var A=Uo.test(c);return A||fo.test(c)?Al(c.slice(2),A?2:8):rn.test(c)?ge:+c}function b2(c){return Qu(c,pl(c))}function qS(c){return c?Yn(Wr(c),-9007199254740991,ne):c===0?c:0}function Ii(c){return c==null?"":Ea(c)}var WS=_f(function(c,m){if(_d(m)||dl(m)){Qu(m,qs(m),c);return}for(var A in m)Rr.call(m,A)&&dt(c,A,m[A])}),w2=_f(function(c,m){Qu(m,pl(m),c)}),n0=_f(function(c,m,A,Q){Qu(m,pl(m),c,Q)}),ZS=_f(function(c,m,A,Q){Qu(m,qs(m),c,Q)}),KS=Sc(En);function YS(c,m){var A=ss(c);return m==null?A:fn(A,m)}var XS=qr(function(c,m){c=oi(c);var A=-1,Q=m.length,we=Q>2?m[2]:n;for(we&&qa(m[0],m[1],we)&&(Q=1);++A<Q;)for(var De=m[A],rt=pl(De),mt=-1,Et=rt.length;++mt<Et;){var an=rt[mt],un=c[an];(un===n||Pu(un,ia[an])&&!Rr.call(c,an))&&(c[an]=De[an])}return c}),JS=qr(function(c){return c.push(n,Fy),ni(x2,n,c)});function QS(c,m){return wt(c,gr(m,3),Yt)}function eE(c,m){return wt(c,gr(m,3),yn)}function tE(c,m){return c==null?c:gt(c,gr(m,3),pl)}function nE(c,m){return c==null?c:At(c,gr(m,3),pl)}function rE(c,m){return c&&Yt(c,gr(m,3))}function iE(c,m){return c&&yn(c,gr(m,3))}function oE(c){return c==null?[]:xn(c,qs(c))}function sE(c){return c==null?[]:xn(c,pl(c))}function Cg(c,m,A){var Q=c==null?n:ar(c,m);return Q===n?A:Q}function aE(c,m){return c!=null&&Uy(c,m,Ot)}function Pg(c,m){return c!=null&&Uy(c,m,_t)}var lE=Oy(function(c,m,A){m!=null&&typeof m.toString!="function"&&(m=si.call(m)),c[m]=A},Mg(ml)),uE=Oy(function(c,m,A){m!=null&&typeof m.toString!="function"&&(m=si.call(m)),Rr.call(c,m)?c[m].push(A):c[m]=[A]},gr),cE=qr(Ne);function qs(c){return dl(c)?Tt(c):Jr(c)}function pl(c){return dl(c)?Tt(c,!0):pi(c)}function hE(c,m){var A={};return m=gr(m,3),Yt(c,function(Q,we,De){Mn(A,m(Q,we,De),Q)}),A}function fE(c,m){var A={};return m=gr(m,3),Yt(c,function(Q,we,De){Mn(A,we,m(Q,we,De))}),A}var dE=_f(function(c,m,A){ua(c,m,A)}),x2=_f(function(c,m,A,Q){ua(c,m,A,Q)}),pE=Sc(function(c,m){var A={};if(c==null)return A;var Q=!1;m=ri(m,function(De){return De=Cu(De,c),Q||(Q=De.length>1),De}),Qu(c,fg(c),A),Q&&(A=l(A,y|w|_,l3));for(var we=m.length;we--;)wc(A,m[we]);return A});function mE(c,m){return L2(c,Qp(gr(m)))}var gE=Sc(function(c,m){return c==null?{}:ca(c,m)});function L2(c,m){if(c==null)return{};var A=ri(fg(c),function(Q){return[Q]});return m=gr(m),Io(c,A,function(Q,we){return m(Q,we[0])})}function vE(c,m,A){m=Cu(m,c);var Q=-1,we=m.length;for(we||(we=1,c=n);++Q<we;){var De=c==null?n:c[ec(m[Q])];De===n&&(Q=we,De=A),c=Cc(De)?De.call(c):De}return c}function yE(c,m,A){return c==null?c:bc(c,m,A)}function _E(c,m,A,Q){return Q=typeof Q=="function"?Q:n,c==null?c:bc(c,m,A,Q)}var S2=Iy(qs),E2=Iy(pl);function bE(c,m,A){var Q=jr(c),we=Q||Xc(c)||xf(c);if(m=gr(m,4),A==null){var De=c&&c.constructor;we?A=Q?new De:[]:Ro(c)?A=Cc(De)?ss(aa(c)):{}:A={}}return(we?mo:Yt)(c,function(rt,mt,Et){return m(A,rt,mt,Et)}),A}function wE(c,m){return c==null?!0:wc(c,m)}function xE(c,m,A){return c==null?c:vf(c,m,Th(A))}function LE(c,m,A,Q){return Q=typeof Q=="function"?Q:n,c==null?c:vf(c,m,Th(A),Q)}function Lf(c){return c==null?[]:Ao(c,qs(c))}function SE(c){return c==null?[]:Ao(c,pl(c))}function EE(c,m,A){return A===n&&(A=m,m=n),A!==n&&(A=ru(A),A=A===A?A:0),m!==n&&(m=ru(m),m=m===m?m:0),Yn(ru(c),m,A)}function CE(c,m,A){return m=Pc(m),A===n?(A=m,m=0):A=Pc(A),c=ru(c),kt(c,m,A)}function PE(c,m,A){if(A&&typeof A!="boolean"&&qa(c,m,A)&&(m=A=n),A===n&&(typeof m=="boolean"?(A=m,m=n):typeof c=="boolean"&&(A=c,c=n)),c===n&&m===n?(c=0,m=1):(c=Pc(c),m===n?(m=c,c=0):m=Pc(m)),c>m){var Q=c;c=m,m=Q}if(A||c%1||m%1){var we=Ft();return Ee(c+we*(m-c+ol("1e-"+((we+"").length-1))),m)}return Mh(c,m)}var AE=bf(function(c,m,A){return m=m.toLowerCase(),c+(A?C2(m):m)});function C2(c){return Ag(Ii(c).toLowerCase())}function P2(c){return c=Ii(c),c&&c.replace(ms,_u).replace(vu,"")}function ME(c,m,A){c=Ii(c),m=Ea(m);var Q=c.length;A=A===n?Q:Yn(Wr(A),0,Q);var we=A;return A-=m.length,A>=0&&c.slice(A,we)==m}function kE(c){return c=Ii(c),c&&Dn.test(c)?c.replace(qt,$a):c}function TE(c){return c=Ii(c),c&&Sn.test(c)?c.replace(ci,"\\$&"):c}var BE=bf(function(c,m,A){return c+(A?"-":"")+m.toLowerCase()}),OE=bf(function(c,m,A){return c+(A?" ":"")+m.toLowerCase()}),NE=ky("toLowerCase");function DE(c,m,A){c=Ii(c),m=Wr(m);var Q=m?ko(c):0;if(!m||Q>=m)return c;var we=(m-Q)/2;return Hp(_o(we),A)+c+Hp(yo(we),A)}function IE(c,m,A){c=Ii(c),m=Wr(m);var Q=m?ko(c):0;return m&&Q<m?c+Hp(m-Q,A):c}function RE(c,m,A){c=Ii(c),m=Wr(m);var Q=m?ko(c):0;return m&&Q<m?Hp(m-Q,A)+c:c}function FE(c,m,A){return A||m==null?m=0:m&&(m=+m),Ct(Ii(c).replace(dr,""),m||0)}function jE(c,m,A){return(A?qa(c,m,A):m===n)?m=1:m=Wr(m),mf(Ii(c),m)}function zE(){var c=arguments,m=Ii(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var UE=bf(function(c,m,A){return c+(A?"_":"")+m.toLowerCase()});function $E(c,m,A){return A&&typeof A!="number"&&qa(c,m,A)&&(m=A=n),A=A===n?Ve:A>>>0,A?(c=Ii(c),c&&(typeof m=="string"||m!=null&&!Eg(m))&&(m=Ea(m),!m&&ta(c))?tu(To(c),0,A):c.split(m,A)):[]}var VE=bf(function(c,m,A){return c+(A?" ":"")+Ag(m)});function HE(c,m,A){return c=Ii(c),A=A==null?0:Yn(Wr(A),0,c.length),m=Ea(m),c.slice(A,A+m.length)==m}function GE(c,m,A){var Q=Te.templateSettings;A&&qa(c,m,A)&&(m=n),c=Ii(c),m=n0({},m,Q,Ry);var we=n0({},m.imports,Q.imports,Ry),De=qs(we),rt=Ao(we,De),mt,Et,an=0,un=m.interpolate||Qo,gn="__p += '",zn=Ol((m.escape||Qo).source+"|"+un.source+"|"+(un===Gn?_i:Qo).source+"|"+(m.evaluate||Qo).source+"|$","g"),ir="//# sourceURL="+(Rr.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Cl+"]")+`
`;c.replace(zn,function(yr,ai,mi,Il,Wa,Rl){return mi||(mi=Il),gn+=c.slice(an,Rl).replace(Cr,Va),ai&&(mt=!0,gn+=`' +
__e(`+ai+`) +
'`),Wa&&(Et=!0,gn+=`';
`+Wa+`;
__p += '`),mi&&(gn+=`' +
((__t = (`+mi+`)) == null ? '' : __t) +
'`),an=Rl+yr.length,yr}),gn+=`';
`;var vr=Rr.call(m,"variable")&&m.variable;if(!vr)gn=`with (obj) {
`+gn+`
}
`;else if(Fi.test(vr))throw new Wn(u);gn=(Et?gn.replace(wn,""):gn).replace(Rn,"$1").replace(lt,"$1;"),gn="function("+(vr||"obj")+`) {
`+(vr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(mt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gn+`return __p
}`;var Zr=M2(function(){return pr(De,ir+"return "+gn).apply(n,rt)});if(Zr.source=gn,Sg(Zr))throw Zr;return Zr}function qE(c){return Ii(c).toLowerCase()}function WE(c){return Ii(c).toUpperCase()}function ZE(c,m,A){if(c=Ii(c),c&&(A||m===n))return ys(c);if(!c||!(m=Ea(m)))return c;var Q=To(c),we=To(m),De=$o(Q,we),rt=Xl(Q,we)+1;return tu(Q,De,rt).join("")}function KE(c,m,A){if(c=Ii(c),c&&(A||m===n))return c.slice(0,_a(c)+1);if(!c||!(m=Ea(m)))return c;var Q=To(c),we=Xl(Q,To(m))+1;return tu(Q,0,we).join("")}function YE(c,m,A){if(c=Ii(c),c&&(A||m===n))return c.replace(dr,"");if(!c||!(m=Ea(m)))return c;var Q=To(c),we=$o(Q,To(m));return tu(Q,we).join("")}function XE(c,m){var A=Z,Q=z;if(Ro(m)){var we="separator"in m?m.separator:we;A="length"in m?Wr(m.length):A,Q="omission"in m?Ea(m.omission):Q}c=Ii(c);var De=c.length;if(ta(c)){var rt=To(c);De=rt.length}if(A>=De)return c;var mt=A-ko(Q);if(mt<1)return Q;var Et=rt?tu(rt,0,mt).join(""):c.slice(0,mt);if(we===n)return Et+Q;if(rt&&(mt+=Et.length-mt),Eg(we)){if(c.slice(mt).search(we)){var an,un=Et;for(we.global||(we=Ol(we.source,Ii(sr.exec(we))+"g")),we.lastIndex=0;an=we.exec(un);)var gn=an.index;Et=Et.slice(0,gn===n?mt:gn)}}else if(c.indexOf(Ea(we),mt)!=mt){var zn=Et.lastIndexOf(we);zn>-1&&(Et=Et.slice(0,zn))}return Et+Q}function JE(c){return c=Ii(c),c&&_n.test(c)?c.replace(We,ba):c}var QE=bf(function(c,m,A){return c+(A?" ":"")+m.toUpperCase()}),Ag=ky("toUpperCase");function A2(c,m,A){return c=Ii(c),m=A?n:m,m===n?_s(c)?na(c):ct(c):c.match(m)||[]}var M2=qr(function(c,m){try{return ni(c,n,m)}catch(A){return Sg(A)?A:new Wn(A)}}),eC=Sc(function(c,m){return mo(m,function(A){A=ec(A),Mn(c,A,xg(c[A],c))}),c});function tC(c){var m=c==null?0:c.length,A=gr();return c=m?ri(c,function(Q){if(typeof Q[1]!="function")throw new ki(o);return[A(Q[0]),Q[1]]}):[],qr(function(Q){for(var we=-1;++we<m;){var De=c[we];if(ni(De[0],this,Q))return ni(De[1],this,Q)}})}function nC(c){return f(l(c,y))}function Mg(c){return function(){return c}}function rC(c,m){return c==null||c!==c?m:c}var iC=By(),oC=By(!0);function ml(c){return c}function kg(c){return Xn(typeof c=="function"?c:l(c,y))}function sC(c){return as(l(c,y))}function aC(c,m){return xu(c,l(m,y))}var lC=qr(function(c,m){return function(A){return Ne(A,c,m)}}),uC=qr(function(c,m){return function(A){return Ne(c,A,m)}});function Tg(c,m,A){var Q=qs(m),we=xn(m,Q);A==null&&!(Ro(m)&&(we.length||!Q.length))&&(A=m,m=c,c=this,we=xn(m,qs(m)));var De=!(Ro(A)&&"chain"in A)||!!A.chain,rt=Cc(c);return mo(we,function(mt){var Et=m[mt];c[mt]=Et,rt&&(c.prototype[mt]=function(){var an=this.__chain__;if(De||an){var un=c(this.__wrapped__),gn=un.__actions__=fl(this.__actions__);return gn.push({func:Et,args:arguments,thisArg:c}),un.__chain__=an,un}return Et.apply(c,vs([this.value()],arguments))})}),c}function cC(){return Wi._===this&&(Wi._=Xi),this}function Bg(){}function hC(c){return c=Wr(c),qr(function(m){return Ga(m,c)})}var fC=ug(ri),dC=ug(Bl),pC=ug(N);function k2(c){return gg(c)?fr(ec(c)):Ji(c)}function mC(c){return function(m){return c==null?n:ar(c,m)}}var gC=Ny(),vC=Ny(!0);function Og(){return[]}function Ng(){return!1}function yC(){return{}}function _C(){return""}function bC(){return!0}function wC(c,m){if(c=Wr(c),c<1||c>ne)return[];var A=Ve,Q=Ee(c,Ve);m=gr(m),c-=Ve;for(var we=Yi(Q,m);++A<c;)m(A);return we}function xC(c){return jr(c)?ri(c,ec):Dl(c)?[c]:fl(Yy(Ii(c)))}function LC(c){var m=++$s;return Ii(c)+m}var SC=Vp(function(c,m){return c+m},0),EC=cg("ceil"),CC=Vp(function(c,m){return c/m},1),PC=cg("floor");function AC(c){return c&&c.length?ue(c,ml,ht):n}function MC(c,m){return c&&c.length?ue(c,gr(m,2),ht):n}function kC(c){return er(c,ml)}function TC(c,m){return er(c,gr(m,2))}function BC(c){return c&&c.length?ue(c,ml,Fr):n}function OC(c,m){return c&&c.length?ue(c,gr(m,2),Fr):n}var NC=Vp(function(c,m){return c*m},1),DC=cg("round"),IC=Vp(function(c,m){return c-m},0);function RC(c){return c&&c.length?ii(c,ml):0}function FC(c,m){return c&&c.length?ii(c,gr(m,2)):0}return Te.after=sS,Te.ary=a2,Te.assign=WS,Te.assignIn=w2,Te.assignInWith=n0,Te.assignWith=ZS,Te.at=KS,Te.before=l2,Te.bind=xg,Te.bindAll=eC,Te.bindKey=u2,Te.castArray=yS,Te.chain=i2,Te.chunk=P3,Te.compact=A3,Te.concat=M3,Te.cond=tC,Te.conforms=nC,Te.constant=Mg,Te.countBy=RL,Te.create=YS,Te.curry=c2,Te.curryRight=h2,Te.debounce=f2,Te.defaults=XS,Te.defaultsDeep=JS,Te.defer=aS,Te.delay=lS,Te.difference=k3,Te.differenceBy=T3,Te.differenceWith=B3,Te.drop=O3,Te.dropRight=N3,Te.dropRightWhile=D3,Te.dropWhile=I3,Te.fill=R3,Te.filter=jL,Te.flatMap=$L,Te.flatMapDeep=VL,Te.flatMapDepth=HL,Te.flatten=e2,Te.flattenDeep=F3,Te.flattenDepth=j3,Te.flip=uS,Te.flow=iC,Te.flowRight=oC,Te.fromPairs=z3,Te.functions=oE,Te.functionsIn=sE,Te.groupBy=GL,Te.initial=$3,Te.intersection=V3,Te.intersectionBy=H3,Te.intersectionWith=G3,Te.invert=lE,Te.invertBy=uE,Te.invokeMap=WL,Te.iteratee=kg,Te.keyBy=ZL,Te.keys=qs,Te.keysIn=pl,Te.map=Yp,Te.mapKeys=hE,Te.mapValues=fE,Te.matches=sC,Te.matchesProperty=aC,Te.memoize=Jp,Te.merge=dE,Te.mergeWith=x2,Te.method=lC,Te.methodOf=uC,Te.mixin=Tg,Te.negate=Qp,Te.nthArg=hC,Te.omit=pE,Te.omitBy=mE,Te.once=cS,Te.orderBy=KL,Te.over=fC,Te.overArgs=hS,Te.overEvery=dC,Te.overSome=pC,Te.partial=Lg,Te.partialRight=d2,Te.partition=YL,Te.pick=gE,Te.pickBy=L2,Te.property=k2,Te.propertyOf=mC,Te.pull=K3,Te.pullAll=n2,Te.pullAllBy=Y3,Te.pullAllWith=X3,Te.pullAt=J3,Te.range=gC,Te.rangeRight=vC,Te.rearg=fS,Te.reject=QL,Te.remove=Q3,Te.rest=dS,Te.reverse=bg,Te.sampleSize=tS,Te.set=yE,Te.setWith=_E,Te.shuffle=nS,Te.slice=eL,Te.sortBy=oS,Te.sortedUniq=aL,Te.sortedUniqBy=lL,Te.split=$E,Te.spread=pS,Te.tail=uL,Te.take=cL,Te.takeRight=hL,Te.takeRightWhile=fL,Te.takeWhile=dL,Te.tap=AL,Te.throttle=mS,Te.thru=Kp,Te.toArray=y2,Te.toPairs=S2,Te.toPairsIn=E2,Te.toPath=xC,Te.toPlainObject=b2,Te.transform=bE,Te.unary=gS,Te.union=pL,Te.unionBy=mL,Te.unionWith=gL,Te.uniq=vL,Te.uniqBy=yL,Te.uniqWith=_L,Te.unset=wE,Te.unzip=wg,Te.unzipWith=r2,Te.update=xE,Te.updateWith=LE,Te.values=Lf,Te.valuesIn=SE,Te.without=bL,Te.words=A2,Te.wrap=vS,Te.xor=wL,Te.xorBy=xL,Te.xorWith=LL,Te.zip=SL,Te.zipObject=EL,Te.zipObjectDeep=CL,Te.zipWith=PL,Te.entries=S2,Te.entriesIn=E2,Te.extend=w2,Te.extendWith=n0,Tg(Te,Te),Te.add=SC,Te.attempt=M2,Te.camelCase=AE,Te.capitalize=C2,Te.ceil=EC,Te.clamp=EE,Te.clone=_S,Te.cloneDeep=wS,Te.cloneDeepWith=xS,Te.cloneWith=bS,Te.conformsTo=LS,Te.deburr=P2,Te.defaultTo=rC,Te.divide=CC,Te.endsWith=ME,Te.eq=Pu,Te.escape=kE,Te.escapeRegExp=TE,Te.every=FL,Te.find=zL,Te.findIndex=Jy,Te.findKey=QS,Te.findLast=UL,Te.findLastIndex=Qy,Te.findLastKey=eE,Te.floor=PC,Te.forEach=o2,Te.forEachRight=s2,Te.forIn=tE,Te.forInRight=nE,Te.forOwn=rE,Te.forOwnRight=iE,Te.get=Cg,Te.gt=SS,Te.gte=ES,Te.has=aE,Te.hasIn=Pg,Te.head=t2,Te.identity=ml,Te.includes=qL,Te.indexOf=U3,Te.inRange=CE,Te.invoke=cE,Te.isArguments=Nh,Te.isArray=jr,Te.isArrayBuffer=CS,Te.isArrayLike=dl,Te.isArrayLikeObject=ls,Te.isBoolean=PS,Te.isBuffer=Xc,Te.isDate=AS,Te.isElement=MS,Te.isEmpty=kS,Te.isEqual=TS,Te.isEqualWith=BS,Te.isError=Sg,Te.isFinite=OS,Te.isFunction=Cc,Te.isInteger=p2,Te.isLength=e0,Te.isMap=m2,Te.isMatch=NS,Te.isMatchWith=DS,Te.isNaN=IS,Te.isNative=RS,Te.isNil=jS,Te.isNull=FS,Te.isNumber=g2,Te.isObject=Ro,Te.isObjectLike=Wo,Te.isPlainObject=wd,Te.isRegExp=Eg,Te.isSafeInteger=zS,Te.isSet=v2,Te.isString=t0,Te.isSymbol=Dl,Te.isTypedArray=xf,Te.isUndefined=US,Te.isWeakMap=$S,Te.isWeakSet=VS,Te.join=q3,Te.kebabCase=BE,Te.last=nu,Te.lastIndexOf=W3,Te.lowerCase=OE,Te.lowerFirst=NE,Te.lt=HS,Te.lte=GS,Te.max=AC,Te.maxBy=MC,Te.mean=kC,Te.meanBy=TC,Te.min=BC,Te.minBy=OC,Te.stubArray=Og,Te.stubFalse=Ng,Te.stubObject=yC,Te.stubString=_C,Te.stubTrue=bC,Te.multiply=NC,Te.nth=Z3,Te.noConflict=cC,Te.noop=Bg,Te.now=Xp,Te.pad=DE,Te.padEnd=IE,Te.padStart=RE,Te.parseInt=FE,Te.random=PE,Te.reduce=XL,Te.reduceRight=JL,Te.repeat=jE,Te.replace=zE,Te.result=vE,Te.round=DC,Te.runInContext=yt,Te.sample=eS,Te.size=rS,Te.snakeCase=UE,Te.some=iS,Te.sortedIndex=tL,Te.sortedIndexBy=nL,Te.sortedIndexOf=rL,Te.sortedLastIndex=iL,Te.sortedLastIndexBy=oL,Te.sortedLastIndexOf=sL,Te.startCase=VE,Te.startsWith=HE,Te.subtract=IC,Te.sum=RC,Te.sumBy=FC,Te.template=GE,Te.times=wC,Te.toFinite=Pc,Te.toInteger=Wr,Te.toLength=_2,Te.toLower=qE,Te.toNumber=ru,Te.toSafeInteger=qS,Te.toString=Ii,Te.toUpper=WE,Te.trim=ZE,Te.trimEnd=KE,Te.trimStart=YE,Te.truncate=XE,Te.unescape=JE,Te.uniqueId=LC,Te.upperCase=QE,Te.upperFirst=Ag,Te.each=o2,Te.eachRight=s2,Te.first=t2,Tg(Te,function(){var c={};return Yt(Te,function(m,A){Rr.call(Te.prototype,A)||(c[A]=m)}),c}(),{chain:!1}),Te.VERSION=r,mo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Te[c].placeholder=Te}),mo(["drop","take"],function(c,m){Br.prototype[c]=function(A){A=A===n?1:re(Wr(A),0);var Q=this.__filtered__&&!m?new Br(this):this.clone();return Q.__filtered__?Q.__takeCount__=Ee(A,Q.__takeCount__):Q.__views__.push({size:Ee(A,Ve),type:c+(Q.__dir__<0?"Right":"")}),Q},Br.prototype[c+"Right"]=function(A){return this.reverse()[c](A).reverse()}}),mo(["filter","map","takeWhile"],function(c,m){var A=m+1,Q=A==I||A==V;Br.prototype[c]=function(we){var De=this.clone();return De.__iteratees__.push({iteratee:gr(we,3),type:A}),De.__filtered__=De.__filtered__||Q,De}}),mo(["head","last"],function(c,m){var A="take"+(m?"Right":"");Br.prototype[c]=function(){return this[A](1).value()[0]}}),mo(["initial","tail"],function(c,m){var A="drop"+(m?"":"Right");Br.prototype[c]=function(){return this.__filtered__?new Br(this):this[A](1)}}),Br.prototype.compact=function(){return this.filter(ml)},Br.prototype.find=function(c){return this.filter(c).head()},Br.prototype.findLast=function(c){return this.reverse().find(c)},Br.prototype.invokeMap=qr(function(c,m){return typeof c=="function"?new Br(this):this.map(function(A){return Ne(A,c,m)})}),Br.prototype.reject=function(c){return this.filter(Qp(gr(c)))},Br.prototype.slice=function(c,m){c=Wr(c);var A=this;return A.__filtered__&&(c>0||m<0)?new Br(A):(c<0?A=A.takeRight(-c):c&&(A=A.drop(c)),m!==n&&(m=Wr(m),A=m<0?A.dropRight(-m):A.take(m-c)),A)},Br.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Br.prototype.toArray=function(){return this.take(Ve)},Yt(Br.prototype,function(c,m){var A=/^(?:filter|find|map|reject)|While$/.test(m),Q=/^(?:head|last)$/.test(m),we=Te[Q?"take"+(m=="last"?"Right":""):m],De=Q||/^find/.test(m);we&&(Te.prototype[m]=function(){var rt=this.__wrapped__,mt=Q?[1]:arguments,Et=rt instanceof Br,an=mt[0],un=Et||jr(rt),gn=function(ai){var mi=we.apply(Te,vs([ai],mt));return Q&&zn?mi[0]:mi};un&&A&&typeof an=="function"&&an.length!=1&&(Et=un=!1);var zn=this.__chain__,ir=!!this.__actions__.length,vr=De&&!zn,Zr=Et&&!ir;if(!De&&un){rt=Zr?rt:new Br(this);var yr=c.apply(rt,mt);return yr.__actions__.push({func:Kp,args:[gn],thisArg:n}),new wo(yr,zn)}return vr&&Zr?c.apply(this,mt):(yr=this.thru(gn),vr?Q?yr.value()[0]:yr.value():yr)})}),mo(["pop","push","shift","sort","splice","unshift"],function(c){var m=ra[c],A=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",Q=/^(?:pop|shift)$/.test(c);Te.prototype[c]=function(){var we=arguments;if(Q&&!this.__chain__){var De=this.value();return m.apply(jr(De)?De:[],we)}return this[A](function(rt){return m.apply(jr(rt)?rt:[],we)})}}),Yt(Br.prototype,function(c,m){var A=Te[m];if(A){var Q=A.name+"";Rr.call(os,Q)||(os[Q]=[]),os[Q].push({name:m,func:A})}}),os[$p(n,D).name]=[{name:"wrapper",func:n}],Br.prototype.clone=Gc,Br.prototype.reverse=lf,Br.prototype.value=qc,Te.prototype.at=ML,Te.prototype.chain=kL,Te.prototype.commit=TL,Te.prototype.next=BL,Te.prototype.plant=NL,Te.prototype.reverse=DL,Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=IL,Te.prototype.first=Te.prototype.head,cr&&(Te.prototype[cr]=OL),Te},Oo=bs();Zi?((Zi.exports=Oo)._=Oo,rr._=Oo):Wi._=Oo}).call(Ks)})(dm,dm.exports);var ix=dm.exports;class Ba extends $n.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});zt(this,"_width");zt(this,"_height");zt(this,"_center");zt(this,"_rotation");zt(this,"_isMapReady",!1);zt(this,"properties");zt(this,"_helperPoints",{corners:[],midPoints:[]});zt(this,"_throttledUpdateProperties");const i=n instanceof $n.LatLngBounds?n:$n.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=ln.measure("Rectangle.constructor.calculateWidth",()=>{const u=nv([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),this._height=ln.measure("Rectangle.constructor.calculateHeight",()=>{const u=nv([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=ln.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=ln.measure("Rectangle.constructor.initThrottle",()=>ix.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){ln.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=ab([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=ab([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(s[0]-this._center.lng)*2,h=[$n.latLng(this._center.lat+o/2,this._center.lng-u/2),$n.latLng(this._center.lat+o/2,this._center.lng+u/2),$n.latLng(this._center.lat-o/2,this._center.lng+u/2),$n.latLng(this._center.lat-o/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(h);return}const d=this._map.latLngToContainerPoint(this._center),g=h.map(j=>this._map.latLngToContainerPoint(j)),y=-this._rotation*Math.PI/180,w=Math.cos(y),_=Math.sin(y),T=g.map(j=>{const D=j.x-d.x,U=j.y-d.y;return $n.point(d.x+(D*w-U*_),d.y+(D*_+U*w))}).map(j=>this._map.containerPointToLatLng(j));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:T,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(T),this.fire("coordinates:updated",{corners:T,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return ln.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint($n.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=nv([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),u=Math.abs(s/o);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):u})}getRotatedCorners(){return ln.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[$n.latLng(this._center.lat+i,this._center.lng-r),$n.latLng(this._center.lat+i,this._center.lng+r),$n.latLng(this._center.lat-i,this._center.lng+r),$n.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[$n.latLng(this._center.lat+i,this._center.lng-r),$n.latLng(this._center.lat+i,this._center.lng+r),$n.latLng(this._center.lat-i,this._center.lng+r),$n.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return ln.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[$n.latLng(this._center.lat+s,this._center.lng),$n.latLng(this._center.lat,this._center.lng+i),$n.latLng(this._center.lat-s,this._center.lng),$n.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[$n.latLng(this._center.lat+i,this._center.lng),$n.latLng(this._center.lat,this._center.lng+r),$n.latLng(this._center.lat-i,this._center.lng),$n.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return ln.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return $n.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return ln.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){ln.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return ln.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){ln.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){ln.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return ln.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){ln.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){ln.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,h=-this._rotation*Math.PI/180,d=Math.cos(h),g=Math.sin(h),y=o*d-u*g,w=o*g+u*d,_=this._getPixelsPerMeter(),P=n===0||n===3?-1:1,T=n===0||n===1?1:-1,j=Math.max(Math.abs(y*2)/_,1),D=Math.max(Math.abs(w*2)/_,1),U=j*_/2,K=D*_/2,X=P*U*d-T*K*g,se=P*U*g+T*K*d,me=$n.point(s.x-X,s.y-se),Le=this._map.containerPointToLatLng(me),Z=[$n.point(me.x-U,me.y+K),$n.point(me.x+U,me.y+K),$n.point(me.x+U,me.y-K),$n.point(me.x-U,me.y-K)].map(z=>{const O=z.x-me.x,k=z.y-me.y;return $n.point(me.x+(O*d-k*g),me.y+(O*g+k*d))}).map(z=>this._map.containerPointToLatLng(z));this._width=j,this._height=D,this._center=Le,this.setLatLngs(Z),this.fire("coordinates:updated",{corners:Z,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){ln.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,h=-this._rotation*Math.PI/180,d=Math.cos(h),g=Math.sin(h),y=o*d-u*g,w=o*g+u*d,_=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(w*2)/_:this._width=Math.abs(y*2)/_,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){ln.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){ln.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){ln.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return ln.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){ln.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(u=>$n.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(u=>$n.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){ln.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){ln.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return ln.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],u=n.distanceTo(o);for(let h=1;h<s.length;h++){const d=n.distanceTo(s[h]);d<u&&(u=d,o=s[h])}return o})}toggleHelperPoints(n,r,i,s){ln.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return ln.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const u=r[s].lng,h=r[s].lat,d=r[o].lng,g=r[o].lat;h>n.lat!=g>n.lat&&n.lng<(d-u)*(n.lat-h)/(g-h)+u&&(i=!i)}return i})}}function lb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function SI(e){return e.type==="Feature"?e.geometry:e}function ox(e,t,n={}){if(n.final===!0)return EI(e,t);const r=lb(e),i=lb(t),s=Fu(r[0]),o=Fu(i[0]),u=Fu(r[1]),h=Fu(i[1]),d=Math.sin(o-s)*Math.cos(h),g=Math.cos(u)*Math.sin(h)-Math.sin(u)*Math.cos(h)*Math.cos(o-s);return u1(Math.atan2(d,g))}function EI(e,t){let n=ox(t,e);return n=(n+180)%360,n}function CI(e,t,n={}){const i=SI(e).coordinates;let s=0;for(let o=0;o<i.length&&!(t>=s&&o===i.length-1);o++)if(s>=t){const u=t-s;if(u){const h=ox(i[o],i[o-1])-180;return dy(i[o],u,h,n)}else return fm(i[o])}else s+=fy(i[o],i[o+1],n);return fm(i[i.length-1])}var c1=CI;function PI(e,t){var n,r,i,s,o,u,h,d,g,y,w=0,_=e.type==="FeatureCollection",P=e.type==="Feature",T=_?e.features.length:1;for(n=0;n<T;n++){for(u=_?e.features[n].geometry:P?e.geometry:e,d=_?e.features[n].properties:P?e.properties:{},g=_?e.features[n].bbox:P?e.bbox:void 0,y=_?e.features[n].id:P?e.id:void 0,h=u?u.type==="GeometryCollection":!1,o=h?u.geometries.length:1,i=0;i<o;i++){if(s=h?u.geometries[i]:u,s===null){if(t(null,w,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,w,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],w,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function AI(e,t,n){var r=n;return PI(e,function(i,s,o,u,h){s===0&&n===void 0?r=i:r=t(r,i,s,o,u,h)}),r}function sx(e){return AI(e,(t,n)=>t+MI(n),0)}function MI(e){let t=0,n;switch(e.type){case"Polygon":return ub(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=ub(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ub(e){let t=0;if(e&&e.length>0){t+=Math.abs(cb(e[0]));for(let n=1;n<e.length;n++)t-=Math.abs(cb(e[n]))}return t}var kI=Ya*Ya/2,rv=Math.PI/180;function cb(e){const t=e.length-1;if(t<=2)return 0;let n=0,r=0;for(;r<t;){const i=e[r],s=e[r+1===t?0:r+1],o=e[r+2>=t?(r+2)%t:r+2],u=i[0]*rv,h=s[1]*rv,d=o[0]*rv;n+=(d-u)*Math.sin(h),r++}return n*kI}var nc=sx;function ax(e,t,n){if(e!==null)for(var r,i,s,o,u,h,d,g=0,y=0,w,_=e.type,P=_==="FeatureCollection",T=_==="Feature",j=P?e.features.length:1,D=0;D<j;D++){d=P?e.features[D].geometry:T?e.geometry:e,w=d?d.type==="GeometryCollection":!1,u=w?d.geometries.length:1;for(var U=0;U<u;U++){var K=0,X=0;if(o=w?d.geometries[U]:d,o!==null){h=o.coordinates;var se=o.type;switch(g=se==="Polygon"||se==="MultiPolygon"?1:0,se){case null:break;case"Point":if(t(h,y,D,K,X)===!1)return!1;y++,K++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(t(h[r],y,D,K,X)===!1)return!1;y++,se==="MultiPoint"&&K++}se==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(i=0;i<h[r].length-g;i++){if(t(h[r][i],y,D,K,X)===!1)return!1;y++}se==="MultiLineString"&&K++,se==="Polygon"&&X++}se==="Polygon"&&K++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for(X=0,i=0;i<h[r].length;i++){for(s=0;s<h[r][i].length-g;s++){if(t(h[r][i][s],y,D,K,X)===!1)return!1;y++}X++}K++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ax(o.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function TI(e,t={}){let n=0,r=0,i=0;return ax(e,function(s){n+=s[0],r+=s[1],i++}),fm([n/i,r/i],t.properties)}var np=TI;function BI(e,t,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},s=[];for(let o=0;o<r;o++)s.push(dy(e,t,o*-360/r,n).geometry.coordinates);return s.push(s[0]),uu([s],i)}var OI=BI,NI=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,iv=Math.ceil,au=Math.floor,_l="[BigNumber Error] ",hb=_l+"Number primitive has more than 15 significant digits: ",Mu=1e14,zr=14,fb=9007199254740991,ov=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],eh=1e7,Fl=1e9;function lx(e){var t,n,r,i=U.prototype={constructor:U,toString:null,valueOf:null},s=new U(1),o=20,u=4,h=-7,d=21,g=-1e7,y=1e7,w=!1,_=1,P=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},j="0123456789abcdefghijklmnopqrstuvwxyz",D=!0;function U(H,R){var Z,z,O,k,I,W,V,G,ne=this;if(!(ne instanceof U))return new U(H,R);if(R==null){if(H&&H._isBigNumber===!0){ne.s=H.s,!H.c||H.e>y?ne.c=ne.e=null:H.e<g?ne.c=[ne.e=0]:(ne.e=H.e,ne.c=H.c.slice());return}if((W=typeof H=="number")&&H*0==0){if(ne.s=1/H<0?(H=-H,-1):1,H===~~H){for(k=0,I=H;I>=10;I/=10,k++);k>y?ne.c=ne.e=null:(ne.e=k,ne.c=[H]);return}G=String(H)}else{if(!NI.test(G=String(H)))return r(ne,G,W);ne.s=G.charCodeAt(0)==45?(G=G.slice(1),-1):1}(k=G.indexOf("."))>-1&&(G=G.replace(".","")),(I=G.search(/e/i))>0?(k<0&&(k=I),k+=+G.slice(I+1),G=G.substring(0,I)):k<0&&(k=G.length)}else{if(Fo(R,2,j.length,"Base"),R==10&&D)return ne=new U(H),me(ne,o+ne.e+1,u);if(G=String(H),W=typeof H=="number"){if(H*0!=0)return r(ne,G,W,R);if(ne.s=1/H<0?(G=G.slice(1),-1):1,U.DEBUG&&G.replace(/^0\.0*|\./,"").length>15)throw Error(hb+H)}else ne.s=G.charCodeAt(0)===45?(G=G.slice(1),-1):1;for(Z=j.slice(0,R),k=I=0,V=G.length;I<V;I++)if(Z.indexOf(z=G.charAt(I))<0){if(z=="."){if(I>k){k=V;continue}}else if(!O&&(G==G.toUpperCase()&&(G=G.toLowerCase())||G==G.toLowerCase()&&(G=G.toUpperCase()))){O=!0,I=-1,k=0;continue}return r(ne,String(H),W,R)}W=!1,G=n(G,R,10,ne.s),(k=G.indexOf("."))>-1?G=G.replace(".",""):k=G.length}for(I=0;G.charCodeAt(I)===48;I++);for(V=G.length;G.charCodeAt(--V)===48;);if(G=G.slice(I,++V)){if(V-=I,W&&U.DEBUG&&V>15&&(H>fb||H!==au(H)))throw Error(hb+ne.s*H);if((k=k-I-1)>y)ne.c=ne.e=null;else if(k<g)ne.c=[ne.e=0];else{if(ne.e=k,ne.c=[],I=(k+1)%zr,k<0&&(I+=zr),I<V){for(I&&ne.c.push(+G.slice(0,I)),V-=zr;I<V;)ne.c.push(+G.slice(I,I+=zr));I=zr-(G=G.slice(I)).length}else I-=V;for(;I--;G+="0");ne.c.push(+G)}}else ne.c=[ne.e=0]}U.clone=lx,U.ROUND_UP=0,U.ROUND_DOWN=1,U.ROUND_CEIL=2,U.ROUND_FLOOR=3,U.ROUND_HALF_UP=4,U.ROUND_HALF_DOWN=5,U.ROUND_HALF_EVEN=6,U.ROUND_HALF_CEIL=7,U.ROUND_HALF_FLOOR=8,U.EUCLID=9,U.config=U.set=function(H){var R,Z;if(H!=null)if(typeof H=="object"){if(H.hasOwnProperty(R="DECIMAL_PLACES")&&(Z=H[R],Fo(Z,0,Fl,R),o=Z),H.hasOwnProperty(R="ROUNDING_MODE")&&(Z=H[R],Fo(Z,0,8,R),u=Z),H.hasOwnProperty(R="EXPONENTIAL_AT")&&(Z=H[R],Z&&Z.pop?(Fo(Z[0],-1e9,0,R),Fo(Z[1],0,Fl,R),h=Z[0],d=Z[1]):(Fo(Z,-1e9,Fl,R),h=-(d=Z<0?-Z:Z))),H.hasOwnProperty(R="RANGE"))if(Z=H[R],Z&&Z.pop)Fo(Z[0],-1e9,-1,R),Fo(Z[1],1,Fl,R),g=Z[0],y=Z[1];else if(Fo(Z,-1e9,Fl,R),Z)g=-(y=Z<0?-Z:Z);else throw Error(_l+R+" cannot be zero: "+Z);if(H.hasOwnProperty(R="CRYPTO"))if(Z=H[R],Z===!!Z)if(Z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=Z;else throw w=!Z,Error(_l+"crypto unavailable");else w=Z;else throw Error(_l+R+" not true or false: "+Z);if(H.hasOwnProperty(R="MODULO_MODE")&&(Z=H[R],Fo(Z,0,9,R),_=Z),H.hasOwnProperty(R="POW_PRECISION")&&(Z=H[R],Fo(Z,0,Fl,R),P=Z),H.hasOwnProperty(R="FORMAT"))if(Z=H[R],typeof Z=="object")T=Z;else throw Error(_l+R+" not an object: "+Z);if(H.hasOwnProperty(R="ALPHABET"))if(Z=H[R],typeof Z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Z))D=Z.slice(0,10)=="0123456789",j=Z;else throw Error(_l+R+" invalid: "+Z)}else throw Error(_l+"Object expected: "+H);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[h,d],RANGE:[g,y],CRYPTO:w,MODULO_MODE:_,POW_PRECISION:P,FORMAT:T,ALPHABET:j}},U.isBigNumber=function(H){if(!H||H._isBigNumber!==!0)return!1;if(!U.DEBUG)return!0;var R,Z,z=H.c,O=H.e,k=H.s;e:if({}.toString.call(z)=="[object Array]"){if((k===1||k===-1)&&O>=-1e9&&O<=Fl&&O===au(O)){if(z[0]===0){if(O===0&&z.length===1)return!0;break e}if(R=(O+1)%zr,R<1&&(R+=zr),String(z[0]).length==R){for(R=0;R<z.length;R++)if(Z=z[R],Z<0||Z>=Mu||Z!==au(Z))break e;if(Z!==0)return!0}}}else if(z===null&&O===null&&(k===null||k===1||k===-1))return!0;throw Error(_l+"Invalid BigNumber: "+H)},U.maximum=U.max=function(){return X(arguments,-1)},U.minimum=U.min=function(){return X(arguments,1)},U.random=function(){var H=9007199254740992,R=Math.random()*H&2097151?function(){return au(Math.random()*H)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Z){var z,O,k,I,W,V=0,G=[],ne=new U(s);if(Z==null?Z=o:Fo(Z,0,Fl),I=iv(Z/zr),w)if(crypto.getRandomValues){for(z=crypto.getRandomValues(new Uint32Array(I*=2));V<I;)W=z[V]*131072+(z[V+1]>>>11),W>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),z[V]=O[0],z[V+1]=O[1]):(G.push(W%1e14),V+=2);V=I/2}else if(crypto.randomBytes){for(z=crypto.randomBytes(I*=7);V<I;)W=(z[V]&31)*281474976710656+z[V+1]*1099511627776+z[V+2]*4294967296+z[V+3]*16777216+(z[V+4]<<16)+(z[V+5]<<8)+z[V+6],W>=9e15?crypto.randomBytes(7).copy(z,V):(G.push(W%1e14),V+=7);V=I/7}else throw w=!1,Error(_l+"crypto unavailable");if(!w)for(;V<I;)W=R(),W<9e15&&(G[V++]=W%1e14);for(I=G[--V],Z%=zr,I&&Z&&(W=ov[zr-Z],G[V]=au(I/W)*W);G[V]===0;G.pop(),V--);if(V<0)G=[k=0];else{for(k=-1;G[0]===0;G.splice(0,1),k-=zr);for(V=1,W=G[0];W>=10;W/=10,V++);V<zr&&(k-=zr-V)}return ne.e=k,ne.c=G,ne}}(),U.sum=function(){for(var H=1,R=arguments,Z=new U(R[0]);H<R.length;)Z=Z.plus(R[H++]);return Z},n=function(){var H="0123456789";function R(Z,z,O,k){for(var I,W=[0],V,G=0,ne=Z.length;G<ne;){for(V=W.length;V--;W[V]*=z);for(W[0]+=k.indexOf(Z.charAt(G++)),I=0;I<W.length;I++)W[I]>O-1&&(W[I+1]==null&&(W[I+1]=0),W[I+1]+=W[I]/O|0,W[I]%=O)}return W.reverse()}return function(Z,z,O,k,I){var W,V,G,ne,_e,ge,Ve,B,te=Z.indexOf("."),ce=o,le=u;for(te>=0&&(ne=P,P=0,Z=Z.replace(".",""),B=new U(z),ge=B.pow(Z.length-te),P=ne,B.c=R(Tc(ou(ge.c),ge.e,"0"),10,O,H),B.e=B.c.length),Ve=R(Z,z,O,I?(W=j,H):(W=H,j)),G=ne=Ve.length;Ve[--ne]==0;Ve.pop());if(!Ve[0])return W.charAt(0);if(te<0?--G:(ge.c=Ve,ge.e=G,ge.s=k,ge=t(ge,B,ce,le,O),Ve=ge.c,_e=ge.r,G=ge.e),V=G+ce+1,te=Ve[V],ne=O/2,_e=_e||V<0||Ve[V+1]!=null,_e=le<4?(te!=null||_e)&&(le==0||le==(ge.s<0?3:2)):te>ne||te==ne&&(le==4||_e||le==6&&Ve[V-1]&1||le==(ge.s<0?8:7)),V<1||!Ve[0])Z=_e?Tc(W.charAt(1),-ce,W.charAt(0)):W.charAt(0);else{if(Ve.length=V,_e)for(--O;++Ve[--V]>O;)Ve[V]=0,V||(++G,Ve=[1].concat(Ve));for(ne=Ve.length;!Ve[--ne];);for(te=0,Z="";te<=ne;Z+=W.charAt(Ve[te++]));Z=Tc(Z,G,W.charAt(0))}return Z}}(),t=function(){function H(z,O,k){var I,W,V,G,ne=0,_e=z.length,ge=O%eh,Ve=O/eh|0;for(z=z.slice();_e--;)V=z[_e]%eh,G=z[_e]/eh|0,I=Ve*V+G*ge,W=ge*V+I%eh*eh+ne,ne=(W/k|0)+(I/eh|0)+Ve*G,z[_e]=W%k;return ne&&(z=[ne].concat(z)),z}function R(z,O,k,I){var W,V;if(k!=I)V=k>I?1:-1;else for(W=V=0;W<k;W++)if(z[W]!=O[W]){V=z[W]>O[W]?1:-1;break}return V}function Z(z,O,k,I){for(var W=0;k--;)z[k]-=W,W=z[k]<O[k]?1:0,z[k]=W*I+z[k]-O[k];for(;!z[0]&&z.length>1;z.splice(0,1));}return function(z,O,k,I,W){var V,G,ne,_e,ge,Ve,B,te,ce,le,xe,he,J,ae,Fe,Me,Ye,oe=z.s==O.s?1:-1,fe=z.c,be=O.c;if(!fe||!fe[0]||!be||!be[0])return new U(!z.s||!O.s||(fe?be&&fe[0]==be[0]:!be)?NaN:fe&&fe[0]==0||!be?oe*0:oe/0);for(te=new U(oe),ce=te.c=[],G=z.e-O.e,oe=k+G+1,W||(W=Mu,G=lu(z.e/zr)-lu(O.e/zr),oe=oe/zr|0),ne=0;be[ne]==(fe[ne]||0);ne++);if(be[ne]>(fe[ne]||0)&&G--,oe<0)ce.push(1),_e=!0;else{for(ae=fe.length,Me=be.length,ne=0,oe+=2,ge=au(W/(be[0]+1)),ge>1&&(be=H(be,ge,W),fe=H(fe,ge,W),Me=be.length,ae=fe.length),J=Me,le=fe.slice(0,Me),xe=le.length;xe<Me;le[xe++]=0);Ye=be.slice(),Ye=[0].concat(Ye),Fe=be[0],be[1]>=W/2&&Fe++;do{if(ge=0,V=R(be,le,Me,xe),V<0){if(he=le[0],Me!=xe&&(he=he*W+(le[1]||0)),ge=au(he/Fe),ge>1)for(ge>=W&&(ge=W-1),Ve=H(be,ge,W),B=Ve.length,xe=le.length;R(Ve,le,B,xe)==1;)ge--,Z(Ve,Me<B?Ye:be,B,W),B=Ve.length,V=1;else ge==0&&(V=ge=1),Ve=be.slice(),B=Ve.length;if(B<xe&&(Ve=[0].concat(Ve)),Z(le,Ve,xe,W),xe=le.length,V==-1)for(;R(be,le,Me,xe)<1;)ge++,Z(le,Me<xe?Ye:be,xe,W),xe=le.length}else V===0&&(ge++,le=[0]);ce[ne++]=ge,le[0]?le[xe++]=fe[J]||0:(le=[fe[J]],xe=1)}while((J++<ae||le[0]!=null)&&oe--);_e=le[0]!=null,ce[0]||ce.splice(0,1)}if(W==Mu){for(ne=1,oe=ce[0];oe>=10;oe/=10,ne++);me(te,k+(te.e=ne+G*zr-1)+1,I,_e)}else te.e=G,te.r=+_e;return te}}();function K(H,R,Z,z){var O,k,I,W,V;if(Z==null?Z=u:Fo(Z,0,8),!H.c)return H.toString();if(O=H.c[0],I=H.e,R==null)V=ou(H.c),V=z==1||z==2&&(I<=h||I>=d)?g0(V,I):Tc(V,I,"0");else if(H=me(new U(H),R,Z),k=H.e,V=ou(H.c),W=V.length,z==1||z==2&&(R<=k||k<=h)){for(;W<R;V+="0",W++);V=g0(V,k)}else if(R-=I,V=Tc(V,k,"0"),k+1>W){if(--R>0)for(V+=".";R--;V+="0");}else if(R+=k-W,R>0)for(k+1==W&&(V+=".");R--;V+="0");return H.s<0&&O?"-"+V:V}function X(H,R){for(var Z,z,O=1,k=new U(H[0]);O<H.length;O++)z=new U(H[O]),(!z.s||(Z=Rh(k,z))===R||Z===0&&k.s===R)&&(k=z);return k}function se(H,R,Z){for(var z=1,O=R.length;!R[--O];R.pop());for(O=R[0];O>=10;O/=10,z++);return(Z=z+Z*zr-1)>y?H.c=H.e=null:Z<g?H.c=[H.e=0]:(H.e=Z,H.c=R),H}r=function(){var H=/^(-?)0([xbo])(?=\w[\w.]*$)/i,R=/^([^.]+)\.$/,Z=/^\.([^.]+)$/,z=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(k,I,W,V){var G,ne=W?I:I.replace(O,"");if(z.test(ne))k.s=isNaN(ne)?null:ne<0?-1:1;else{if(!W&&(ne=ne.replace(H,function(_e,ge,Ve){return G=(Ve=Ve.toLowerCase())=="x"?16:Ve=="b"?2:8,!V||V==G?ge:_e}),V&&(G=V,ne=ne.replace(R,"$1").replace(Z,"0.$1")),I!=ne))return new U(ne,G);if(U.DEBUG)throw Error(_l+"Not a"+(V?" base "+V:"")+" number: "+I);k.s=null}k.c=k.e=null}}();function me(H,R,Z,z){var O,k,I,W,V,G,ne,_e=H.c,ge=ov;if(_e){e:{for(O=1,W=_e[0];W>=10;W/=10,O++);if(k=R-O,k<0)k+=zr,I=R,V=_e[G=0],ne=au(V/ge[O-I-1]%10);else if(G=iv((k+1)/zr),G>=_e.length)if(z){for(;_e.length<=G;_e.push(0));V=ne=0,O=1,k%=zr,I=k-zr+1}else break e;else{for(V=W=_e[G],O=1;W>=10;W/=10,O++);k%=zr,I=k-zr+O,ne=I<0?0:au(V/ge[O-I-1]%10)}if(z=z||R<0||_e[G+1]!=null||(I<0?V:V%ge[O-I-1]),z=Z<4?(ne||z)&&(Z==0||Z==(H.s<0?3:2)):ne>5||ne==5&&(Z==4||z||Z==6&&(k>0?I>0?V/ge[O-I]:0:_e[G-1])%10&1||Z==(H.s<0?8:7)),R<1||!_e[0])return _e.length=0,z?(R-=H.e+1,_e[0]=ge[(zr-R%zr)%zr],H.e=-R||0):_e[0]=H.e=0,H;if(k==0?(_e.length=G,W=1,G--):(_e.length=G+1,W=ge[zr-k],_e[G]=I>0?au(V/ge[O-I]%ge[I])*W:0),z)for(;;)if(G==0){for(k=1,I=_e[0];I>=10;I/=10,k++);for(I=_e[0]+=W,W=1;I>=10;I/=10,W++);k!=W&&(H.e++,_e[0]==Mu&&(_e[0]=1));break}else{if(_e[G]+=W,_e[G]!=Mu)break;_e[G--]=0,W=1}for(k=_e.length;_e[--k]===0;_e.pop());}H.e>y?H.c=H.e=null:H.e<g&&(H.c=[H.e=0])}return H}function Le(H){var R,Z=H.e;return Z===null?H.toString():(R=ou(H.c),R=Z<=h||Z>=d?g0(R,Z):Tc(R,Z,"0"),H.s<0?"-"+R:R)}return i.absoluteValue=i.abs=function(){var H=new U(this);return H.s<0&&(H.s=1),H},i.comparedTo=function(H,R){return Rh(this,new U(H,R))},i.decimalPlaces=i.dp=function(H,R){var Z,z,O,k=this;if(H!=null)return Fo(H,0,Fl),R==null?R=u:Fo(R,0,8),me(new U(k),H+k.e+1,R);if(!(Z=k.c))return null;if(z=((O=Z.length-1)-lu(this.e/zr))*zr,O=Z[O])for(;O%10==0;O/=10,z--);return z<0&&(z=0),z},i.dividedBy=i.div=function(H,R){return t(this,new U(H,R),o,u)},i.dividedToIntegerBy=i.idiv=function(H,R){return t(this,new U(H,R),0,1)},i.exponentiatedBy=i.pow=function(H,R){var Z,z,O,k,I,W,V,G,ne,_e=this;if(H=new U(H),H.c&&!H.isInteger())throw Error(_l+"Exponent not an integer: "+Le(H));if(R!=null&&(R=new U(R)),W=H.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!H.c||!H.c[0])return ne=new U(Math.pow(+Le(_e),W?H.s*(2-m0(H)):+Le(H))),R?ne.mod(R):ne;if(V=H.s<0,R){if(R.c?!R.c[0]:!R.s)return new U(NaN);z=!V&&_e.isInteger()&&R.isInteger(),z&&(_e=_e.mod(R))}else{if(H.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||W&&_e.c[1]>=24e7:_e.c[0]<8e13||W&&_e.c[0]<=9999975e7)))return k=_e.s<0&&m0(H)?-0:0,_e.e>-1&&(k=1/k),new U(V?1/k:k);P&&(k=iv(P/zr+2))}for(W?(Z=new U(.5),V&&(H.s=1),G=m0(H)):(O=Math.abs(+Le(H)),G=O%2),ne=new U(s);;){if(G){if(ne=ne.times(_e),!ne.c)break;k?ne.c.length>k&&(ne.c.length=k):z&&(ne=ne.mod(R))}if(O){if(O=au(O/2),O===0)break;G=O%2}else if(H=H.times(Z),me(H,H.e+1,1),H.e>14)G=m0(H);else{if(O=+Le(H),O===0)break;G=O%2}_e=_e.times(_e),k?_e.c&&_e.c.length>k&&(_e.c.length=k):z&&(_e=_e.mod(R))}return z?ne:(V&&(ne=s.div(ne)),R?ne.mod(R):k?me(ne,P,u,I):ne)},i.integerValue=function(H){var R=new U(this);return H==null?H=u:Fo(H,0,8),me(R,R.e+1,H)},i.isEqualTo=i.eq=function(H,R){return Rh(this,new U(H,R))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(H,R){return Rh(this,new U(H,R))>0},i.isGreaterThanOrEqualTo=i.gte=function(H,R){return(R=Rh(this,new U(H,R)))===1||R===0},i.isInteger=function(){return!!this.c&&lu(this.e/zr)>this.c.length-2},i.isLessThan=i.lt=function(H,R){return Rh(this,new U(H,R))<0},i.isLessThanOrEqualTo=i.lte=function(H,R){return(R=Rh(this,new U(H,R)))===-1||R===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(H,R){var Z,z,O,k,I=this,W=I.s;if(H=new U(H,R),R=H.s,!W||!R)return new U(NaN);if(W!=R)return H.s=-R,I.plus(H);var V=I.e/zr,G=H.e/zr,ne=I.c,_e=H.c;if(!V||!G){if(!ne||!_e)return ne?(H.s=-R,H):new U(_e?I:NaN);if(!ne[0]||!_e[0])return _e[0]?(H.s=-R,H):new U(ne[0]?I:u==3?-0:0)}if(V=lu(V),G=lu(G),ne=ne.slice(),W=V-G){for((k=W<0)?(W=-W,O=ne):(G=V,O=_e),O.reverse(),R=W;R--;O.push(0));O.reverse()}else for(z=(k=(W=ne.length)<(R=_e.length))?W:R,W=R=0;R<z;R++)if(ne[R]!=_e[R]){k=ne[R]<_e[R];break}if(k&&(O=ne,ne=_e,_e=O,H.s=-H.s),R=(z=_e.length)-(Z=ne.length),R>0)for(;R--;ne[Z++]=0);for(R=Mu-1;z>W;){if(ne[--z]<_e[z]){for(Z=z;Z&&!ne[--Z];ne[Z]=R);--ne[Z],ne[z]+=Mu}ne[z]-=_e[z]}for(;ne[0]==0;ne.splice(0,1),--G);return ne[0]?se(H,ne,G):(H.s=u==3?-1:1,H.c=[H.e=0],H)},i.modulo=i.mod=function(H,R){var Z,z,O=this;return H=new U(H,R),!O.c||!H.s||H.c&&!H.c[0]?new U(NaN):!H.c||O.c&&!O.c[0]?new U(O):(_==9?(z=H.s,H.s=1,Z=t(O,H,0,3),H.s=z,Z.s*=z):Z=t(O,H,0,_),H=O.minus(Z.times(H)),!H.c[0]&&_==1&&(H.s=O.s),H)},i.multipliedBy=i.times=function(H,R){var Z,z,O,k,I,W,V,G,ne,_e,ge,Ve,B,te,ce,le=this,xe=le.c,he=(H=new U(H,R)).c;if(!xe||!he||!xe[0]||!he[0])return!le.s||!H.s||xe&&!xe[0]&&!he||he&&!he[0]&&!xe?H.c=H.e=H.s=null:(H.s*=le.s,!xe||!he?H.c=H.e=null:(H.c=[0],H.e=0)),H;for(z=lu(le.e/zr)+lu(H.e/zr),H.s*=le.s,V=xe.length,_e=he.length,V<_e&&(B=xe,xe=he,he=B,O=V,V=_e,_e=O),O=V+_e,B=[];O--;B.push(0));for(te=Mu,ce=eh,O=_e;--O>=0;){for(Z=0,ge=he[O]%ce,Ve=he[O]/ce|0,I=V,k=O+I;k>O;)G=xe[--I]%ce,ne=xe[I]/ce|0,W=Ve*G+ne*ge,G=ge*G+W%ce*ce+B[k]+Z,Z=(G/te|0)+(W/ce|0)+Ve*ne,B[k--]=G%te;B[k]=Z}return Z?++z:B.splice(0,1),se(H,B,z)},i.negated=function(){var H=new U(this);return H.s=-H.s||null,H},i.plus=function(H,R){var Z,z=this,O=z.s;if(H=new U(H,R),R=H.s,!O||!R)return new U(NaN);if(O!=R)return H.s=-R,z.minus(H);var k=z.e/zr,I=H.e/zr,W=z.c,V=H.c;if(!k||!I){if(!W||!V)return new U(O/0);if(!W[0]||!V[0])return V[0]?H:new U(W[0]?z:O*0)}if(k=lu(k),I=lu(I),W=W.slice(),O=k-I){for(O>0?(I=k,Z=V):(O=-O,Z=W),Z.reverse();O--;Z.push(0));Z.reverse()}for(O=W.length,R=V.length,O-R<0&&(Z=V,V=W,W=Z,R=O),O=0;R;)O=(W[--R]=W[R]+V[R]+O)/Mu|0,W[R]=Mu===W[R]?0:W[R]%Mu;return O&&(W=[O].concat(W),++I),se(H,W,I)},i.precision=i.sd=function(H,R){var Z,z,O,k=this;if(H!=null&&H!==!!H)return Fo(H,1,Fl),R==null?R=u:Fo(R,0,8),me(new U(k),H,R);if(!(Z=k.c))return null;if(O=Z.length-1,z=O*zr+1,O=Z[O]){for(;O%10==0;O/=10,z--);for(O=Z[0];O>=10;O/=10,z++);}return H&&k.e+1>z&&(z=k.e+1),z},i.shiftedBy=function(H){return Fo(H,-9007199254740991,fb),this.times("1e"+H)},i.squareRoot=i.sqrt=function(){var H,R,Z,z,O,k=this,I=k.c,W=k.s,V=k.e,G=o+4,ne=new U("0.5");if(W!==1||!I||!I[0])return new U(!W||W<0&&(!I||I[0])?NaN:I?k:1/0);if(W=Math.sqrt(+Le(k)),W==0||W==1/0?(R=ou(I),(R.length+V)%2==0&&(R+="0"),W=Math.sqrt(+R),V=lu((V+1)/2)-(V<0||V%2),W==1/0?R="5e"+V:(R=W.toExponential(),R=R.slice(0,R.indexOf("e")+1)+V),Z=new U(R)):Z=new U(W+""),Z.c[0]){for(V=Z.e,W=V+G,W<3&&(W=0);;)if(O=Z,Z=ne.times(O.plus(t(k,O,G,1))),ou(O.c).slice(0,W)===(R=ou(Z.c)).slice(0,W))if(Z.e<V&&--W,R=R.slice(W-3,W+1),R=="9999"||!z&&R=="4999"){if(!z&&(me(O,O.e+o+2,0),O.times(O).eq(k))){Z=O;break}G+=4,W+=4,z=1}else{(!+R||!+R.slice(1)&&R.charAt(0)=="5")&&(me(Z,Z.e+o+2,1),H=!Z.times(Z).eq(k));break}}return me(Z,Z.e+o+1,u,H)},i.toExponential=function(H,R){return H!=null&&(Fo(H,0,Fl),H++),K(this,H,R,1)},i.toFixed=function(H,R){return H!=null&&(Fo(H,0,Fl),H=H+this.e+1),K(this,H,R)},i.toFormat=function(H,R,Z){var z,O=this;if(Z==null)H!=null&&R&&typeof R=="object"?(Z=R,R=null):H&&typeof H=="object"?(Z=H,H=R=null):Z=T;else if(typeof Z!="object")throw Error(_l+"Argument not an object: "+Z);if(z=O.toFixed(H,R),O.c){var k,I=z.split("."),W=+Z.groupSize,V=+Z.secondaryGroupSize,G=Z.groupSeparator||"",ne=I[0],_e=I[1],ge=O.s<0,Ve=ge?ne.slice(1):ne,B=Ve.length;if(V&&(k=W,W=V,V=k,B-=k),W>0&&B>0){for(k=B%W||W,ne=Ve.substr(0,k);k<B;k+=W)ne+=G+Ve.substr(k,W);V>0&&(ne+=G+Ve.slice(k)),ge&&(ne="-"+ne)}z=_e?ne+(Z.decimalSeparator||"")+((V=+Z.fractionGroupSize)?_e.replace(new RegExp("\\d{"+V+"}\\B","g"),"$&"+(Z.fractionGroupSeparator||"")):_e):ne}return(Z.prefix||"")+z+(Z.suffix||"")},i.toFraction=function(H){var R,Z,z,O,k,I,W,V,G,ne,_e,ge,Ve=this,B=Ve.c;if(H!=null&&(W=new U(H),!W.isInteger()&&(W.c||W.s!==1)||W.lt(s)))throw Error(_l+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+Le(W));if(!B)return new U(Ve);for(R=new U(s),G=Z=new U(s),z=V=new U(s),ge=ou(B),k=R.e=ge.length-Ve.e-1,R.c[0]=ov[(I=k%zr)<0?zr+I:I],H=!H||W.comparedTo(R)>0?k>0?R:G:W,I=y,y=1/0,W=new U(ge),V.c[0]=0;ne=t(W,R,0,1),O=Z.plus(ne.times(z)),O.comparedTo(H)!=1;)Z=z,z=O,G=V.plus(ne.times(O=G)),V=O,R=W.minus(ne.times(O=R)),W=O;return O=t(H.minus(Z),z,0,1),V=V.plus(O.times(G)),Z=Z.plus(O.times(z)),V.s=G.s=Ve.s,k=k*2,_e=t(G,z,k,u).minus(Ve).abs().comparedTo(t(V,Z,k,u).minus(Ve).abs())<1?[G,z]:[V,Z],y=I,_e},i.toNumber=function(){return+Le(this)},i.toPrecision=function(H,R){return H!=null&&Fo(H,1,Fl),K(this,H,R,2)},i.toString=function(H){var R,Z=this,z=Z.s,O=Z.e;return O===null?z?(R="Infinity",z<0&&(R="-"+R)):R="NaN":(H==null?R=O<=h||O>=d?g0(ou(Z.c),O):Tc(ou(Z.c),O,"0"):H===10&&D?(Z=me(new U(Z),o+O+1,u),R=Tc(ou(Z.c),Z.e,"0")):(Fo(H,2,j.length,"Base"),R=n(Tc(ou(Z.c),O,"0"),10,H,z,!0)),z<0&&Z.c[0]&&(R="-"+R)),R},i.valueOf=i.toJSON=function(){return Le(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&U.set(e),U}function lu(e){var t=e|0;return e>0||e===t?t:t-1}function ou(e){for(var t,n,r=1,i=e.length,s=e[0]+"";r<i;){for(t=e[r++]+"",n=zr-t.length;n--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Rh(e,t){var n,r,i=e.c,s=t.c,o=e.s,u=t.s,h=e.e,d=t.e;if(!o||!u)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-u:o;if(o!=u)return o;if(n=o<0,r=h==d,!i||!s)return r?0:!i^n?1:-1;if(!r)return h>d^n?1:-1;for(u=(h=i.length)<(d=s.length)?h:d,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return h==d?0:h>d^n?1:-1}function Fo(e,t,n,r){if(e<t||e>n||e!==au(e))throw Error(_l+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function m0(e){var t=e.c.length-1;return lu(e.e/zr)==t&&e.c[t]%2!=0}function g0(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Tc(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var lc=lx(),DI=class{constructor(e){zt(this,"key");zt(this,"left",null);zt(this,"right",null);this.key=e}},Ad=class extends DI{constructor(e){super(e)}},II=class{constructor(){zt(this,"size",0);zt(this,"modificationCount",0);zt(this,"splayCount",0)}splay(e){const t=this.root;if(t==null)return this.compare(e,e),-1;let n=null,r=null,i=null,s=null,o=t;const u=this.compare;let h;for(;;)if(h=u(o.key,e),h>0){let d=o.left;if(d==null||(h=u(d.key,e),h>0&&(o.left=d.right,d.right=o,o=d,d=o.left,d==null)))break;n==null?r=o:n.left=o,n=o,o=d}else if(h<0){let d=o.right;if(d==null||(h=u(d.key,e),h<0&&(o.right=d.left,d.left=o,o=d,d=o.right,d==null)))break;i==null?s=o:i.right=o,i=o,o=d}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),h}splayMin(e){let t=e,n=t.left;for(;n!=null;){const r=n;t.left=r.right,r.right=t,t=r,n=t.left}return t}splayMax(e){let t=e,n=t.right;for(;n!=null;){const r=n;t.right=r.left,r.left=t,t=r,n=t.right}return t}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(e,t){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=e;return}t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,t)=>e<t?-1:e>t?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},e4,t4,pm=class jd extends II{constructor(n,r){super();zt(this,"root",null);zt(this,"compare");zt(this,"validKey");zt(this,e4,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Ad(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Ad(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new jd(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new jd(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new jd(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new jd(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let u,h;do{if(u=s.left,h=s.right,u!=null){const d=new Ad(u.key);o.left=d,r(u,d)}if(h!=null){const d=new Ad(h.key);o.right=d,s=h,o=d}}while(h!=null)}const i=new Ad(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new FI(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(t4=Symbol.iterator,e4=Symbol.toStringTag,t4)](){return new RI(this.wrap())}},ux=class{constructor(e){zt(this,"tree");zt(this,"path",new Array);zt(this,"modificationCount",null);zt(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],t=e.right;if(t!=null){for(;t!=null;)this.path.push(t),t=t.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},RI=class extends ux{getValue(e){return e.key}},FI=class extends ux{getValue(e){return[e.key,e.key]}},cx=e=>()=>e,h1=e=>{const t=e?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(e):cx(!1);return(n,r)=>t(n,r)?0:n.comparedTo(r)};function jI(e){const t=e?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(e)):cx(!1);return(n,r,i)=>{const s=n.x,o=n.y,u=i.x,h=i.y,d=o.minus(h).times(r.x.minus(u)).minus(s.minus(u).times(r.y.minus(h)));return t(d,s,o,u,h)?0:d.comparedTo(0)}}var zI=e=>e,UI=e=>{if(e){const t=new pm(h1(e)),n=new pm(h1(e)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,t),y:r(s.y,n)});return i({x:new lc(0),y:new lc(0)}),i}return zI},f1=e=>({set:t=>{Uc=f1(t)},reset:()=>f1(e),compare:h1(e),snap:UI(e),orient:jI(e)}),Uc=f1(),Md=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),d1=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,r=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,i=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,s=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},R0=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),hx=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),mm=e=>hx(e,e).sqrt(),$I=(e,t,n)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return R0(i,r).div(mm(i)).div(mm(r))},VI=(e,t,n)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return hx(i,r).div(mm(i)).div(mm(r))},db=(e,t,n)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n},pb=(e,t,n)=>t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))},HI=(e,t,n,r)=>{if(t.x.isZero())return pb(n,r,e.x);if(r.x.isZero())return pb(e,t,n.x);if(t.y.isZero())return db(n,r,e.y);if(r.y.isZero())return db(e,t,n.y);const i=R0(t,r);if(i.isZero())return null;const s={x:n.x.minus(e.x),y:n.y.minus(e.y)},o=R0(s,t).div(i),u=R0(s,r).div(i),h=e.x.plus(u.times(t.x)),d=n.x.plus(o.times(r.x)),g=e.y.plus(u.times(t.y)),y=n.y.plus(o.times(r.y)),w=h.plus(d).div(2),_=g.plus(y).div(2);return{x:w,y:_}},ac=class fx{constructor(t,n){zt(this,"point");zt(this,"isLeft");zt(this,"segment");zt(this,"otherSE");zt(this,"consumedBy");t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}static compare(t,n){const r=fx.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:gm.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x.isLessThan(n.x)?-1:t.x.isGreaterThan(n.x)?1:t.y.isLessThan(n.y)?-1:t.y.isGreaterThan(n.y)?1:0}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<t;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:$I(this.point,t.point,s.point),cosine:VI(this.point,t.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:u}=n.get(i),{sine:h,cosine:d}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&h.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:o.isLessThan(0)&&h.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:h.isLessThan(o)?-1:h.isGreaterThan(o)?1:0}}},GI=class p1{constructor(t){zt(this,"events");zt(this,"poly");zt(this,"_isExteriorRing");zt(this,"_enclosingRing");this.events=t;for(let n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}static factory(t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.isInResult()||s.ringOut)continue;let o=null,u=s.leftSE,h=s.rightSE;const d=[u],g=u.point,y=[];for(;o=u,u=h,d.push(u),u.point!==g;)for(;;){const w=u.getAvailableLinkedEvents();if(w.length===0){const T=d[0].point,j=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${T.x}, ${T.y}]. Last matching segment found ends at [${j.x}, ${j.y}].`)}if(w.length===1){h=w[0].otherSE;break}let _=null;for(let T=0,j=y.length;T<j;T++)if(y[T].point===u.point){_=T;break}if(_!==null){const T=y.splice(_)[0],j=d.splice(T.index);j.unshift(j[0].otherSE),n.push(new p1(j.reverse()));continue}y.push({index:d.length,point:u.point});const P=u.getLeftmostComparator(o);h=w.sort(P)[0].otherSE;break}n.push(new p1(d))}return n}getGeom(){let t=this.events[0].point;const n=[t];for(let d=1,g=this.events.length-1;d<g;d++){const y=this.events[d].point,w=this.events[d+1].point;Uc.orient(y,t,w)!==0&&(n.push(y),t=y)}if(n.length===1)return null;const r=n[0],i=n[1];Uc.orient(r,t,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,h=[];for(let d=o;d!=u;d+=s)h.push([n[d].x.toNumber(),n[d].y.toNumber()]);return h}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let t=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const h=this.events[o];ac.compare(t,h)>0&&(t=h)}let n=t.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},mb=class{constructor(e){zt(this,"exteriorRing");zt(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const t=[e];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}},qI=class{constructor(e){zt(this,"rings");zt(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const r=this.polys[t].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var n;const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())t.push(new mb(s));else{const o=s.enclosingRing();o!=null&&o.poly||t.push(new mb(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return t}},WI=class{constructor(e,t=gm.compare){zt(this,"queue");zt(this,"tree");zt(this,"segments");this.queue=e,this.tree=new pm(t),this.segments=[]}process(e){const t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);let r=t,i=t;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let s=null;if(r){const u=r.getIntersection(t);if(u!==null&&(t.isAnEndpoint(u)||(s=u),!r.isAnEndpoint(u))){const h=this._splitSafely(r,u);for(let d=0,g=h.length;d<g;d++)n.push(h[d])}}let o=null;if(i){const u=i.getIntersection(t);if(u!==null&&(t.isAnEndpoint(u)||(o=u),!i.isAnEndpoint(u))){const h=this._splitSafely(i,u);for(let d=0,g=h.length;d<g;d++)n.push(h[d])}}if(s!==null||o!==null){let u=null;s===null?u=o:o===null?u=s:u=ac.comparePoints(s,o)<=0?s:o,this.queue.delete(t.rightSE),n.push(t.rightSE);const h=t.split(u);for(let d=0,g=h.length;d<g;d++)n.push(h[d])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let u=0,h=o.length;u<h;u++)n.push(o[u])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let u=0,h=o.length;u<h;u++)n.push(o[u])}}}this.tree.delete(t)}return n}_splitSafely(e,t){this.tree.delete(e);const n=e.rightSE;this.queue.delete(n);const r=e.split(t);return r.push(n),e.consumedBy===void 0&&this.tree.add(e),r}},ZI=class{constructor(){zt(this,"type");zt(this,"numMultiPolys")}run(e,t,n){zd.type=e;const r=[new vb(t,!0)];for(let d=0,g=n.length;d<g;d++)r.push(new vb(n[d],!1));if(zd.numMultiPolys=r.length,zd.type==="difference"){const d=r[0];let g=1;for(;g<r.length;)d1(r[g].bbox,d.bbox)!==null?g++:r.splice(g,1)}if(zd.type==="intersection")for(let d=0,g=r.length;d<g;d++){const y=r[d];for(let w=d+1,_=r.length;w<_;w++)if(d1(y.bbox,r[w].bbox)===null)return[]}const i=new pm(ac.compare);for(let d=0,g=r.length;d<g;d++){const y=r[d].getSweepEvents();for(let w=0,_=y.length;w<_;w++)i.add(y[w])}const s=new WI(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const d=s.process(o);for(let g=0,y=d.length;g<y;g++){const w=d[g];w.consumedBy===void 0&&i.add(w)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Uc.reset();const u=GI.factory(s.segments);return new qI(u).getGeom()}},zd=new ZI,m1=zd,KI=0,gm=class F0{constructor(t,n,r,i){zt(this,"id");zt(this,"leftSE");zt(this,"rightSE");zt(this,"rings");zt(this,"windings");zt(this,"ringOut");zt(this,"consumedBy");zt(this,"prev");zt(this,"_prevInResult");zt(this,"_beforeState");zt(this,"_afterState");zt(this,"_isInResult");this.id=++KI,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}static compare(t,n){const r=t.leftSE.point.x,i=n.leftSE.point.x,s=t.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const u=t.leftSE.point.y,h=n.leftSE.point.y,d=t.rightSE.point.y,g=n.rightSE.point.y;if(r.isLessThan(i)){if(h.isLessThan(u)&&h.isLessThan(d))return 1;if(h.isGreaterThan(u)&&h.isGreaterThan(d))return-1;const y=t.comparePoint(n.leftSE.point);if(y<0)return 1;if(y>0)return-1;const w=n.comparePoint(t.rightSE.point);return w!==0?w:-1}if(r.isGreaterThan(i)){if(u.isLessThan(h)&&u.isLessThan(g))return-1;if(u.isGreaterThan(h)&&u.isGreaterThan(g))return 1;const y=n.comparePoint(t.leftSE.point);if(y!==0)return y;const w=t.comparePoint(n.rightSE.point);return w<0?1:w>0?-1:1}if(u.isLessThan(h))return-1;if(u.isGreaterThan(h))return 1;if(s.isLessThan(o)){const y=n.comparePoint(t.rightSE.point);if(y!==0)return y}if(s.isGreaterThan(o)){const y=t.comparePoint(n.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!s.eq(o)){const y=d.minus(u),w=s.minus(r),_=g.minus(h),P=o.minus(i);if(y.isGreaterThan(w)&&_.isLessThan(P))return 1;if(y.isLessThan(w)&&_.isGreaterThan(P))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||d.isLessThan(g)?-1:d.isGreaterThan(g)?1:t.id<n.id?-1:t.id>n.id?1:0}static fromRing(t,n,r){let i,s,o;const u=ac.comparePoints(t,n);if(u<0)i=t,s=n,o=1;else if(u>0)i=n,s=t,o=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const h=new ac(i,!0),d=new ac(s,!1);return new F0(h,d,[r],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(n)?t:n},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(n)?t:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return Uc.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const n=this.bbox(),r=t.bbox(),i=d1(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,u=t.leftSE.point,h=t.rightSE.point,d=Md(n,u)&&this.comparePoint(u)===0,g=Md(r,s)&&t.comparePoint(s)===0,y=Md(n,h)&&this.comparePoint(h)===0,w=Md(r,o)&&t.comparePoint(o)===0;if(g&&d)return w&&!y?o:!w&&y?h:null;if(g)return y&&s.x.eq(h.x)&&s.y.eq(h.y)?null:s;if(d)return w&&o.x.eq(u.x)&&o.y.eq(u.y)?null:u;if(w&&y)return null;if(w)return o;if(y)return h;const _=HI(s,this.vector(),u,t.vector());return _===null||!Md(i,_)?null:Uc.snap(_)}split(t){const n=[],r=t.events!==void 0,i=new ac(t,!0),s=new ac(t,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const u=new F0(i,o,this.rings.slice(),this.windings.slice());return ac.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),ac.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=F0.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const u=r.rings[s],h=r.windings[s],d=n.rings.indexOf(u);d===-1?(n.rings.push(u),n.windings.push(h)):n.windings[d]+=h}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,h=this.rings.length;u<h;u++){const d=this.rings[u],g=this.windings[u],y=n.indexOf(d);y===-1?(n.push(d),r.push(g)):r[y]+=g}const s=[],o=[];for(let u=0,h=n.length;u<h;u++){if(r[u]===0)continue;const d=n[u],g=d.poly;if(o.indexOf(g)===-1)if(d.isExterior)s.push(g);else{o.indexOf(g)===-1&&o.push(g);const y=s.indexOf(d.poly);y!==-1&&s.splice(y,1)}}for(let u=0,h=s.length;u<h;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(m1.type){case"union":{const r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;t.length<n.length?(r=t.length,i=n.length):(r=n.length,i=t.length),this._isInResult=i===m1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(t.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(t)!==r(n);break}}return this._isInResult}},gb=class{constructor(e,t,n){zt(this,"poly");zt(this,"isExterior");zt(this,"segments");zt(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Uc.snap({x:new lc(e[0][0]),y:new lc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Uc.snap({x:new lc(e[s][0]),y:new lc(e[s][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(gm.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(gm.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let t=0,n=this.segments.length;t<n;t++){const r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}},YI=class{constructor(e,t){zt(this,"multiPoly");zt(this,"exteriorRing");zt(this,"interiorRings");zt(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new gb(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=e.length;n<r;n++){const i=new gb(e[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){const r=this.interiorRings[t].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},vb=class{constructor(e,t){zt(this,"isSubject");zt(this,"polys");zt(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new lc(Number.POSITIVE_INFINITY),y:new lc(Number.POSITIVE_INFINITY)},ur:{x:new lc(Number.NEGATIVE_INFINITY),y:new lc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=e.length;n<r;n++){const i=new YI(e[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const r=this.polys[t].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},XI=(e,...t)=>m1.run("intersection",e,t);Uc.set;function JI(e,t){var n,r,i,s,o,u,h,d,g,y,w=0,_=e.type==="FeatureCollection",P=e.type==="Feature",T=_?e.features.length:1;for(n=0;n<T;n++){for(u=_?e.features[n].geometry:P?e.geometry:e,d=_?e.features[n].properties:P?e.properties:{},g=_?e.features[n].bbox:P?e.bbox:void 0,y=_?e.features[n].id:P?e.id:void 0,h=u?u.type==="GeometryCollection":!1,o=h?u.geometries.length:1,i=0;i<o;i++){if(s=h?u.geometries[i]:u,s===null){if(t(null,w,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,w,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],w,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function QI(e,t={}){const n=[];if(JI(e,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=XI(n[0],...n.slice(1));return r.length===0?null:r.length===1?uu(r[0],t.properties):bI(r,t.properties)}var eR=QI;function dx(e,t,n){if(e!==null)for(var r,i,s,o,u,h,d,g=0,y=0,w,_=e.type,P=_==="FeatureCollection",T=_==="Feature",j=P?e.features.length:1,D=0;D<j;D++){d=P?e.features[D].geometry:T?e.geometry:e,w=d?d.type==="GeometryCollection":!1,u=w?d.geometries.length:1;for(var U=0;U<u;U++){var K=0,X=0;if(o=w?d.geometries[U]:d,o!==null){h=o.coordinates;var se=o.type;switch(g=0,se){case null:break;case"Point":if(t(h,y,D,K,X)===!1)return!1;y++,K++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(t(h[r],y,D,K,X)===!1)return!1;y++,se==="MultiPoint"&&K++}se==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(i=0;i<h[r].length-g;i++){if(t(h[r][i],y,D,K,X)===!1)return!1;y++}se==="MultiLineString"&&K++,se==="Polygon"&&X++}se==="Polygon"&&K++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for(X=0,i=0;i<h[r].length;i++){for(s=0;s<h[r][i].length-g;s++){if(t(h[r][i][s],y,D,K,X)===!1)return!1;y++}X++}K++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(dx(o.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tR(e,t){var n,r,i,s,o,u,h,d,g,y,w=0,_=e.type==="FeatureCollection",P=e.type==="Feature",T=_?e.features.length:1;for(n=0;n<T;n++){for(u=_?e.features[n].geometry:P?e.geometry:e,d=_?e.features[n].properties:P?e.properties:{},g=_?e.features[n].bbox:P?e.bbox:void 0,y=_?e.features[n].id:P?e.id:void 0,h=u?u.type==="GeometryCollection":!1,o=h?u.geometries.length:1,i=0;i<o;i++){if(s=h?u.geometries[i]:u,s===null){if(t(null,w,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,w,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],w,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function nR(e,t){tR(e,function(n,r,i,s,o){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(sd(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var h;switch(u){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var d=0;d<n.coordinates.length;d++){var g=n.coordinates[d],y={type:h,coordinates:g};if(t(sd(y,i),r,d)===!1)return!1}})}function rR(e,t){nR(e,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var u,h=0,d=0,g=0;if(dx(n,function(y,w,_,P,T){if(u===void 0||r>h||P>d||T>g){u=y,h=r,d=P,g=T,s=0;return}var j=cu([u,y],n.properties);if(t(j,r,i,T,s)===!1)return!1;s++,u=y})===!1)return!1}}})}function iR(e,t,n){var r=n,i=!1;return rR(e,function(s,o,u,h,d){i===!1&&n===void 0?r=s:r=t(r,s,o,u,h,d),i=!0}),r}function vm(e,t={}){return iR(e,(n,r)=>{const i=r.geometry.coordinates;return n+fy(i[0],i[1],t)},0)}var Fh=vm;class Bs extends $n.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});zt(this,"properties");zt(this,"cachedProperties",{});zt(this,"needsUpdate",!0);this.properties=ln.measure("Line.constructor.initProperties",()=>({type:"Line",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){ln.measure("Line.updateProperties",()=>{var i,s,o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(u=>[u.lng,u.lat]);try{const u=cu(r),h=vm(u,{units:"meters"});let d;if(n.length===2)d=$n.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const w=c1(u,h/2,{units:"meters"});d=$n.latLng(w.geometry.coordinates[1],w.geometry.coordinates[0])}const g=10,y=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={type:"Line",length:h,coordinates:n.map(w=>({lat:w.lat,lng:w.lng})),center:{lat:d.lat,lng:d.lng},vertices:n.length,surfaceInfluence:h*g,dimensions:{width:g},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:y}},this.cachedProperties.length=h,this.cachedProperties.center=d,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate line properties",u)}})}setName(n){ln.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return ln.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){ln.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return ln.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push($n.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return ln.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):$n.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){ln.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){ln.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),$n.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return ln.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>$n.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return ln.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new $n.LatLng(0,0);try{const r=n.map(h=>[h.lng,h.lat]),i=cu(r),s=vm(i,{units:"meters"}),o=c1(i,s/2,{units:"meters"}),u=$n.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((u,h)=>u+h.lat,0)/n.length,s=n.reduce((u,h)=>u+h.lng,0)/n.length,o=new $n.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return ln.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return ln.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return ln.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return ln.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}class Wh extends $n.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});zt(this,"properties");this.properties=ln.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",style:{color:r.color||"#3388ff",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#3388ff",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){ln.measure("Polygon.updateProperties",()=>{var n,r,i;try{const s=this.getLatLngs()[0];if(!s||s.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const o=s.map(_=>[_.lng,_.lat]);o.push(o[0]);const u=uu([o]),h=sx(u),d=vm(cu([...o]),{units:"meters"}),g=np(u),y=$n.latLng(g.geometry.coordinates[1],g.geometry.coordinates[0]),w=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"";this.properties={type:"Polygon",coordinates:s.map(_=>({lat:_.lat,lng:_.lng})),surface:h,perimeter:d,center:{lat:y.lat,lng:y.lng},vertices:s.length,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((i=this.options)==null?void 0:i.dashArray)||"",name:w}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(s){console.error("Failed to calculate polygon properties",s)}})}setName(n){ln.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return ln.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return ln.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return ln.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push($n.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){ln.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,$n.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){ln.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),$n.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return ln.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>$n.latLng(s.lat+n.lat,s.lng+n.lng));return $n.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return ln.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new $n.LatLng(0,0);try{const r=n.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new $n.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const s=uu([i]),o=np(s),u=o.geometry.coordinates[1],h=o.geometry.coordinates[0];if(typeof u!="number"||typeof h!="number"||isNaN(u)||isNaN(h)||Math.abs(u)>90||Math.abs(h)>180)throw new Error("Centroid calculé invalide");return $n.latLng(u,h)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const u of n)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,s+=u.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new $n.LatLng(0,0)):new $n.LatLng(i/o,s/o)}})}getSegmentLengths(){return ln.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}const Xa=class Xa extends Bs{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});zt(this,"elevationData",[]);zt(this,"elevationProfile",null);zt(this,"elevationMarker",null);zt(this,"samplePoints",[]);zt(this,"sampleTooltips",[]);zt(this,"isZooming",!1);zt(this,"simpleLine",null);zt(this,"isDestroyed",!1);zt(this,"zoomAnimationTimeout",null);zt(this,"samplePointStyle",{radius:4,color:"#FF4500",fillColor:"#FF4500",fillOpacity:.6,weight:2,opacity:.8});zt(this,"minMaxPointStyle",{radius:6,weight:3,opacity:1,fillOpacity:1});this.properties=ln.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending",samplePointStyle:this.samplePointStyle,minMaxPointStyle:this.minMaxPointStyle})),this.setupEventListeners()}setupEventListeners(){ln.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignorée - ligne détruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.clearSamplePoints(),this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed&&(this.simpleLine?this.simpleLine.setLatLngs(i):this.simpleLine=$n.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}).addTo(this._map),this.simpleLine&&this.simpleLine._path)){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&(this.redraw(),this.showSamplePoints())}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration après animation:",o),this.cleanup()}},300)}}catch(r){console.debug("[ElevationLine] Animation de zoom ignorée:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&(this.redraw(),this.showSamplePoints())}catch(i){console.error("[ElevationLine] Erreur lors de la restauration après animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||ln.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.clearSamplePoints(),this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||ln.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&(this.redraw(),this.showSamplePoints())}catch(r){console.warn("[ElevationLine] Erreur lors du redraw après zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){ln.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.clearSamplePoints(),this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return ln.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/Xa.SAMPLE_DISTANCE);return Math.min(Math.max(r,Xa.MIN_SAMPLES),Xa.MAX_SAMPLES)})}async fetchElevationData(n=0){return ln.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const u=[];for(let h=0;h<o;h++){const d=h/(o-1)*i,g=this.getPointAtDistance(d);g&&u.push(`${g.lat},${g.lng}`)}s=u.join("|");try{const h=await fetch(`${Xa.API_URL}?locations=${s}`);if(!h.ok)throw new Error(`HTTP error ${h.status}`);const d=await h.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((g,y)=>({distance:y/(o-1)*i,elevation:g.elevation})),this.properties.dataSource="api"}catch(h){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${Xa.MAX_RETRIES} failed:`,h),n<Xa.MAX_RETRIES)return await new Promise(d=>setTimeout(d,Xa.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){ln.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*n,u=100+Math.sin(o/n*Math.PI*2)*50;return{distance:o,elevation:u}})})}calculateElevationStatistics(){ln.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(g=>g.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let s=0,o=0,u=0,h=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Données brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let g=1;g<this.elevationData.length;g++){const y=this.elevationData[g-1],w=this.elevationData[g],_=w.elevation-y.elevation;_>0?s+=_:o+=Math.abs(_);const P=w.distance-y.distance;if(P>0){const T=_/P*100;u=Math.max(u,Math.abs(T)),h+=Math.abs(T),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermédiaires:",{gain:s,loss:o,maxSlope:u,averageSlope:d>0?h/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?h/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Propriétés mises à jour:",this.properties)})}showSamplePoints(){ln.measure("ElevationLine.showSamplePoints",()=>{if(this.clearSamplePoints(),!this.elevationData.length)return;const n=this.elevationData.map(s=>s.elevation),r=Math.max(...n),i=Math.min(...n);this.elevationData.forEach(s=>{const o=this.getPointAtDistance(s.distance);if(!o)return;const u=s.elevation===i,h=s.elevation===r;let d={...this.samplePointStyle};u?d={...d,...this.minMaxPointStyle,color:"#DC2626",fillColor:"#DC2626"}:h&&(d={...d,...this.minMaxPointStyle,color:"#059669",fillColor:"#059669"});const g=$n.circleMarker(o,d),y=$n.tooltip({permanent:!1,direction:"top",className:"elevation-tooltip",offset:[0,-10]});let w=`
          Distance: ${this.formatDistance(s.distance)}<br>
          Altitude: ${this.formatElevation(s.elevation)}
        `;u&&(w+="<br><strong>Point le plus bas</strong>"),h&&(w+="<br><strong>Point le plus haut</strong>"),y.setContent(w),g.on("mouseover",()=>{g.setStyle({...d,radius:d.radius+2,fillOpacity:1}),g.bindTooltip(y).openTooltip()}),g.on("mouseout",()=>{g.setStyle(d),g.closeTooltip()}),this._map&&(g.addTo(this._map),this.samplePoints.push(g),this.sampleTooltips.push(y))})})}clearSamplePoints(){ln.measure("ElevationLine.clearSamplePoints",()=>{this.samplePoints.forEach(n=>n.remove()),this.samplePoints=[],this.sampleTooltips.forEach(n=>n.remove()),this.sampleTooltips=[]})}formatDistance(n){return ln.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return ln.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return ln.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this.showSamplePoints(),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return ln.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.showSamplePoints(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.showSamplePoints(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise à jour du profil d'élévation:",n),this.properties.dataSource="error"}})}updateProperties(){ln.measure("ElevationLine.updateProperties",()=>{if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const n=this.elevationData.map(w=>w.elevation),r=Math.max(...n),i=Math.min(...n);let s=0,o=0,u=0,h=0,d=0;for(let w=1;w<this.elevationData.length;w++){const _=this.elevationData[w-1],P=this.elevationData[w],T=P.elevation-_.elevation;T>0?s+=T:o+=Math.abs(T);const j=P.distance-_.distance;if(j>0){const D=T/j*100;u=Math.max(u,Math.abs(D)),h+=Math.abs(D),d++}}const y=this.getLatLngs().map(w=>({lat:w.lat,lng:w.lng}));this.properties={...this.properties,type:"ElevationLine",coordinates:y,elevationData:this.elevationData.map(w=>({distance:w.distance,elevation:w.elevation})),maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?h/d:0,dataSource:this.properties.dataSource||"api"},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return ln.measure("ElevationLine.getElevationData",()=>this.elevationData)}showElevationAt(n){ln.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-n)<Math.abs(s.distance-n)?o:s),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=$n.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'élévation:",r),this.hideElevationMarker()}})}hideElevationMarker(){ln.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return ln.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),s=cu(i),o=c1(s,n,{units:"meters"});return $n.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){ln.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){ln.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")})}setLatLngs(n){return ln.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return ln.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setSamplePointStyle(n){ln.measure("ElevationLine.setSamplePointStyle",()=>{this.samplePointStyle={...this.samplePointStyle,...n},this.properties.samplePointStyle=this.samplePointStyle,this._map&&this.showSamplePoints()})}setMinMaxPointStyle(n){ln.measure("ElevationLine.setMinMaxPointStyle",()=>{this.minMaxPointStyle={...this.minMaxPointStyle,...n},this.properties.minMaxPointStyle=this.minMaxPointStyle,this._map&&this.showSamplePoints()})}setName(n){ln.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return ln.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}};zt(Xa,"API_URL","https://api.open-elevation.com/api/v1/lookup"),zt(Xa,"RETRY_DELAY",2e3),zt(Xa,"MAX_RETRIES",3),zt(Xa,"SAMPLE_DISTANCE",100),zt(Xa,"MIN_SAMPLES",10),zt(Xa,"MAX_SAMPLES",50);let rf=Xa;class oR extends Dt.Marker{constructor(n,r={}){const s=`<div class="geo-note-marker" style="color: ${r.color||"#3B82F6"};"></div>`,u={icon:Dt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(n,u);zt(this,"properties");this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"en-cours",accessLevel:r.accessLevel||Lo.PRIVATE,style:{color:r.color||"#3B82F6",weight:r.weight||2,fillColor:r.fillColor||"#3B82F6",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12}},this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick)}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup";const r=document.createElement("div");r.className="geo-note-header",n.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.properties.columnId}
    `,s.appendChild(o);const u=document.createElement("div");u.className="geo-note-badge",u.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),u.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(u);const h=document.createElement("div");if(h.className="geo-note-content",n.appendChild(h),this.properties.description&&this.properties.description.trim()!==""){const y=document.createElement("div");y.className="geo-note-description",y.textContent=this.properties.description,h.appendChild(y)}const d=document.createElement("div");d.className="geo-note-footer",n.appendChild(d);const g=document.createElement("button");return g.className="geo-note-edit-button",g.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      Modifier cette note
    `,g.onclick=y=>{y.stopPropagation(),this.editNote()},d.appendChild(g),n}getColumnColor(n){return{"en-cours":"#3B82F6",termine:"#10B981"}[n]||"#6B7280"}getAccessLevelLabel(n){switch(n){case Lo.PRIVATE:return"Privé";case Lo.COMPANY:return"Entreprise";case Lo.EMPLOYEE:return"Salariés";case Lo.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Lo.PRIVATE:return"#9CA3AF";case Lo.COMPANY:return"#EF4444";case Lo.EMPLOYEE:return"#F59E0B";case Lo.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Dt.DomEvent.stopPropagation(n),this.editNote()}editNote(){this.closePopup();const n={id:this._leaflet_id,title:this.properties.name,description:this.properties.description,location:[this.getLatLng().lat,this.getLatLng().lng],columnId:this.properties.columnId||"en-cours",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]};console.log("[GeoNote] Émission de l'événement note:edit avec",n);const r=new CustomEvent("geonote:edit",{detail:{note:n}});window.dispatchEvent(r),this.fire("note:edit",{note:n})}updateProperties(){var i;const n=(i=this.getElement())==null?void 0:i.querySelector(".geo-note-marker"),r=n?window.getComputedStyle(n).color:"#3B82F6";this.properties.style={color:r,fillColor:r,weight:2,fillOpacity:.8,radius:12}}setNoteStyle(n){if(n.color||n.fillColor){const i=`<div class="geo-note-marker" style="color: ${n.color||n.fillColor||"#3B82F6"};"></div>`,s=Dt.divIcon({html:i,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(s)}this.updateProperties()}}const ym=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${t})`},yb=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=ym(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${ym(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},gl=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Dt.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function _b(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const Bi=(e,t="m",n="")=>{let r,i;return t==="m²"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m²"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=t),n?`${n}: ${r} ${i}`:`${r} ${i}`},sR=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),aR=(e,t)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,r),t)}},Pf=(e,t)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<t))return n=i,e.apply(this,r)}};function lR(){const e=It(null),t=It(null),n=It(null),r=It(null),i=It(""),s=It(null),o=It(!1),u=It(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(B=>B.remove()),document.querySelectorAll(".drawing-help-message").forEach(B=>B.remove())}),Vc(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const h=(B,te="Double-cliquez pour éditer")=>{const ce={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},le=(de,Ue)=>{var Qe;const Xe=((Qe=e.value)==null?void 0:Qe.getZoom())||14,ze=B.lat,Je=_b(Ue.physicalSize,ze,Xe);return`<div class="text-container" style="width:${Je}px;height:${Je}px;transform:rotate(${Ue.rotation}deg)">
        <div class="text-annotation" style="font-size:${Je*.2}px;color:${Ue.color};background-color:${ym(Ue.backgroundColor,Ue.backgroundOpacity)};border:${Ue.hasBorder?Ue.borderWidth+" solid "+ym(Ue.borderColor,Ue.borderOpacity):"none"};padding:${Ue.padding};border-radius:${Ue.borderRadius}">${de}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},xe=()=>{if(!e.value)return;const de=J.getIcon(),Ue={html:le(J.properties.text,J.properties.style),className:de.options.className};J.setIcon(Dt.divIcon(Ue))},he=Dt.divIcon({html:le(te,ce),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),J=Dt.marker(B,{icon:he,draggable:!1,pmIgnore:!0});J.properties={type:"text",text:te,style:{...ce}},e.value&&(e.value.on("zoomend",xe),J.on("remove",()=>{var de;(de=e.value)==null||de.off("zoomend",xe)})),xe();let ae=!1,Fe=!1,Me=0,Ye=0;const oe=de=>{if(!e.value)return;const Ue=de.target;if(Ue.classList.contains("rotate")){ae=!0;const Xe=J.getLatLng(),ze=e.value.mouseEventToLatLng(de);Me=Math.atan2(ze.lat-Xe.lat,ze.lng-Xe.lng)*180/Math.PI,Ye=J.properties.style.rotation||0}else Ue.classList.contains("move")&&(Fe=!0);document.addEventListener("mousemove",fe),document.addEventListener("mouseup",be)},fe=de=>{if(!(!Fe||!e.value)){if(ae){const Ue=J.getLatLng(),Xe=e.value.mouseEventToLatLng(de),ze=Math.atan2(Xe.lat-Ue.lat,Xe.lng-Ue.lng)*180/Math.PI,Je=(Ye+(ze-Me))%360;J.properties.style.rotation=Je;const Qe=J.getIcon(),it={html:le(J.properties.text,J.properties.style),className:Qe.options.className};J.setIcon(Dt.divIcon(it))}else if(Fe){const Ue=sR(de),Xe=e.value.mouseEventToLatLng(Ue);J.setLatLng(Xe)}}},be=()=>{ae=!1,Fe=!1,document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",be)};return J.on("add",()=>{const de=J.getElement();de&&de.querySelectorAll(".control-button").forEach(Xe=>{Xe.addEventListener("mousedown",oe)})}),J.on("remove",()=>{const de=J.getElement();de&&de.querySelectorAll(".control-button").forEach(Xe=>{Xe.removeEventListener("mousedown",oe)})}),J.on("dblclick",de=>{var it;Dt.DomEvent.stopPropagation(de);const Ue=(it=J.getElement())==null?void 0:it.querySelector(".text-annotation");if(!Ue)return;Ue.contentEditable="true",Ue.focus(),Ue.classList.add("editing");const Xe=window.getSelection(),ze=document.createRange();ze.selectNodeContents(Ue),Xe==null||Xe.removeAllRanges(),Xe==null||Xe.addRange(ze);const Je=()=>{Ue.contentEditable="false",Ue.classList.remove("editing");const Mt=Ue.innerText.trim();if(Mt){J.properties.text=Mt;const xt=J.getIcon(),Nt={html:le(Mt,J.properties.style),className:xt.options.className};J.setIcon(Dt.divIcon(Nt))}Ue.removeEventListener("blur",Je),Ue.removeEventListener("keydown",Qe)},Qe=Mt=>{Mt.key==="Enter"&&!Mt.shiftKey&&(Mt.preventDefault(),Je())};Ue.addEventListener("blur",Je),Ue.addEventListener("keydown",Qe)}),J},d=(B,te)=>{const ce=Dt.DomUtil.create("div","measure-tooltip");if(ce.innerHTML=te,ce.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ce),e.value){const le=e.value.latLngToContainerPoint(B);ce.style.left=`${le.x+10}px`,ce.style.top=`${le.y-25}px`}return ce},g=Pf((B,te,ce)=>{if(B&&(B.innerHTML=ce,e.value)){const le=e.value.latLngToContainerPoint(te);B.style.left=`${le.x+10}px`,B.style.top=`${le.y-25}px`}},100),y=(B,te,ce)=>{B.on("mouseover",()=>{const le=d(B.getLatLng(),ce());B.measureDiv=le}),B.on("mousemove",le=>{B.measureDiv&&e.value&&g(B.measureDiv,le.latlng,ce())}),B.on("mouseout",()=>{B.measureDiv&&(B.measureDiv.remove(),B.measureDiv=void 0)})};let w=[];const _=()=>{var B;w.cleanup&&w.cleanup(),n.value&&n.value.clearLayers(),w=[],(B=r.value)==null||B.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(te=>te.remove()),t.value&&t.value.getLayers().forEach(te=>{te instanceof Ba&&te.clearHelperPoints()})},P=(B,te="#2563EB")=>{const ce=Dt.circleMarker(B,{radius:6,color:te,fillColor:te,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(ce),ce},T=(B,te)=>{var le,xe,he,J,ae,Fe;console.log("Input layer:",{type:te,instanceof:{Circle:B instanceof Dt.Circle,Rectangle:B instanceof Dt.Rectangle,Polygon:B instanceof Dt.Polygon,Polyline:B instanceof Dt.Polyline,ElevationLine:B instanceof rf,Line:B instanceof Bs},options:B.options});const ce={type:te,style:B.options||{}};try{if(B instanceof Dt.Circle){const Me=B.getRadius();ce.radius=Me,ce.diameter=Me*2,ce.surface=Math.PI*Math.pow(Me,2),ce.perimeter=2*Math.PI*Me,ce.center=B.getLatLng()}else if(B instanceof Dt.Rectangle){const Me=B.getBounds(),Ye=Me.getNorthEast(),oe=Me.getSouthWest(),fe=cu([[oe.lng,oe.lat],[Ye.lng,oe.lat]]),be=cu([[oe.lng,oe.lat],[oe.lng,Ye.lat]]),de=Fh(fe,{units:"meters"}),Ue=Fh(be,{units:"meters"});ce.width=de,ce.height=Ue,ce.surface=de*Ue,ce.perimeter=2*(de+Ue),ce.dimensions={width:de,height:Ue}}else if(B instanceof Dt.Polygon)try{const Ye=B.getLatLngs()[0].map(fe=>[fe.lng,fe.lat]);Ye.push(Ye[0]);const oe=uu([Ye]);ce.surface=nc(oe),ce.perimeter=Fh(cu(Ye),{units:"meters"})}catch(Me){console.error("Erreur lors du calcul des propriétés du polygone",Me)}else if(B instanceof Dt.Polyline&&!(B instanceof Dt.Polygon))try{const Me=B.getLatLngs();let Ye=0;for(let oe=1;oe<Me.length;oe++)Ye+=Me[oe].distanceTo(Me[oe-1]);ce.length=Ye}catch(Me){console.error("Erreur lors du calcul de la longueur de la ligne",Me)}ce.style={...ce.style,color:((le=B.options)==null?void 0:le.color)||"#3388ff",weight:((xe=B.options)==null?void 0:xe.weight)||3,opacity:((he=B.options)==null?void 0:he.opacity)||1,fillColor:((J=B.options)==null?void 0:J.fillColor)||"#3388ff",fillOpacity:((ae=B.options)==null?void 0:ae.fillOpacity)||.2,dashArray:((Fe=B.options)==null?void 0:Fe.dashArray)||""}}catch(Me){console.error("Error calculating shape properties:",Me)}return ce},j=(B,te=2)=>{var J;if(!e.value){console.warn("Map is not available for text size update");return}const ce=e.value.getZoom(),le=B.getLatLng().lat,xe=_b(te,le,ce),he=(J=B.getElement())==null?void 0:J.querySelector(".text-annotation");he&&(B.properties.style.fontSize=`${xe}px`,B.properties.physicalWidth=te,B.properties.physicalHeight=te,yb(he,B.properties.style))},D=(B,te,ce)=>{const le=Dt.map(B).setView(te,ce);e.value=le,Dt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(le);const xe=new Dt.FeatureGroup;return xe.addTo(le),t.value=xe,n.value=Dt.featureGroup().addTo(le),r.value=Dt.featureGroup().addTo(le),le.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:xe,snapLayers:[xe,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),le.on("pm:drawstart",he=>{o.value=!0,he.shape==="Circle"&&i.value==="Semicircle"&&(le.getContainer().style.cursor="crosshair")}),le.on("pm:drawend",()=>{o.value=!1,le.getContainer().style.cursor="",s.value&&gl("Cliquez sur la forme pour afficher les points de contrôle")}),le.on("pm:create",ge),xe.on("click",he=>{var ae,Fe,Me,Ye,oe,fe,be,de,Ue,Xe,ze,Je,Qe,it,Mt;Dt.DomEvent.stopPropagation(he);const J=he.layer;if(J.name&&!((ae=J.properties)!=null&&ae.name)?(J.properties||(J.properties={}),J.properties.name=J.name):(Fe=J.properties)!=null&&Fe.name&&!J.name&&(J.name=J.properties.name),console.log("[featureGroup click] État du nom:",{directName:J.name,propertiesName:(Me=J.properties)==null?void 0:Me.name,fullProperties:J.properties}),(Ye=r.value)==null||Ye.clearLayers(),_(),s.value=J,J instanceof If)R(J);else if(J instanceof Dt.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(J,"name"),directName:J.name,propertiesName:(oe=J.properties)==null?void 0:oe.name,styleNameBeforeTransfer:(be=(fe=J.properties)==null?void 0:fe.style)==null?void 0:be.name,nameIsEnumerable:Object.keys(J).includes("name"),allProperties:Object.keys(J.properties||{}),_dbId:J._dbId});const xt=J.name,Nt=(de=J.properties)==null?void 0:de.name,Kt=(Xe=(Ue=J.properties)==null?void 0:Ue.style)==null?void 0:Xe.name,hn=J._dbId,mn=new If(J.getLatLng(),{...J.options,radius:J.getRadius()});J.properties?mn.properties={...J.properties||{}}:mn.updateProperties();const et=xt||Nt||Kt;et&&(mn.properties.name=et,mn.properties.style||(mn.properties.style={}),mn.properties.style.name=et,mn.name=et),hn&&(mn._dbId=hn),console.log("[useMapDrawing] Cercle après conversion:",{name:mn.name,propertiesName:mn.properties.name,stylePropertyName:(ze=mn.properties.style)==null?void 0:ze.name,allProperties:Object.keys(mn.properties||{})}),(Je=t.value)==null||Je.removeLayer(J),(Qe=t.value)==null||Qe.addLayer(mn),s.value=mn,R(mn)}else if(J instanceof Ba)Z(J);else if(J instanceof Dt.Rectangle){const xt=new Ba(J.getBounds(),{...J.options});xt.updateProperties(),(it=t.value)==null||it.removeLayer(J),(Mt=t.value)==null||Mt.addLayer(xt),s.value=xt,Z(xt)}else J instanceof Dt.Polygon?O(J):(J instanceof Bs||J instanceof Dt.Polyline)&&z(J)}),le.on("pm:edit",he=>{var ae,Fe,Me;console.log("[pm:edit] Début",{layer:he.layer,currentProperties:he.layer.properties});const J=he.layer;if(J){const Ye=((ae=J.properties)==null?void 0:ae.type)||"unknown";if(Le(J,Ye),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value}),J instanceof If)R(J);else if(J instanceof Ba)Z(J);else if(J instanceof Dt.Rectangle){const oe=new Ba(J.getBounds(),{...J.options});oe.updateProperties(),(Fe=t.value)==null||Fe.removeLayer(J),(Me=t.value)==null||Me.addLayer(oe),s.value=oe,Z(oe)}else J instanceof Dt.Polygon?O(J):J instanceof Bs?(J.updateProperties(),Le(J,"Line"),z(J)):J instanceof Dt.Polyline&&z(J)}}),le.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),gl("Déplacez la forme à l'endroit souhaité")}),le.on("pm:dragend",he=>{var ae,Fe,Me;console.log("[pm:dragend] Début",{layer:he.layer,currentProperties:he.layer.properties});const J=he.layer;if(J){const Ye=((ae=J.properties)==null?void 0:ae.type)||"unknown";if(J instanceof Dt.Rectangle&&!(J instanceof Ba)){const oe=new Ba(J.getBounds(),{...J.options});oe.updateProperties(),(Fe=t.value)==null||Fe.removeLayer(J),(Me=t.value)==null||Me.addLayer(oe),s.value=oe,Z(oe)}else J instanceof Bs?(J.updateProperties(),Le(J,"Line"),z(J)):Le(J,Ye);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value})}setTimeout(()=>{gl("Cliquez sur la forme pour afficher les points de contrôle")},100)}),le.on("pm:remove",()=>{var he;(he=document.querySelector(".drawing-help-message"))==null||he.remove()}),le.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),gl("Utilisez les points de contrôle pour modifier la forme")}),le.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove())}),le.on("zoomstart",()=>{s.value&&(_(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()))}),le},U=()=>{if(!(!e.value||!t.value||!t.value.getLayers().length))try{const B=t.value.getBounds();if(B.isValid()){const te={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(B,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=te.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=te.zoomAnimation,e.value.options.markerZoomAnimation=te.markerZoomAnimation}catch(ce){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ce)}},500)}catch(ce){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ce)}},500)}}catch(B){if(console.warn("[useMapDrawing] Error adjusting view:",B),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(te){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",te)}}},K=B=>{var ce;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(le=>le.remove());try{const le=e.value.pm;le.globalEditModeEnabled()&&le.disableGlobalEditMode(),le.globalRemovalModeEnabled()&&le.disableGlobalRemovalMode(),le.disableDraw(),_(),(ce=r.value)==null||ce.clearLayers()}catch(le){console.error("Error disabling modes:",le)}if(i.value=B,!B){_();return}let te=B;switch(B){case"Note":te="GeoNote";break;case"Polygon":te="Polygon";break;case"Line":te="Line";break;case"ElevationLine":te="ElevationLine";break;default:te=B}B=te,Ve(),setTimeout(()=>{var le,xe,he,J,ae,Fe,Me,Ye,oe,fe,be,de,Ue;try{switch(B){case"Polygon":gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(le=e.value)==null||le.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(xe=e.value)==null||xe.off("pm:create"),(he=e.value)==null||he.on("pm:create",ze=>{var Je,Qe,it;if(ze.shape==="Polygon"&&ze.layer){const Mt=ze.layer.getLatLngs()[0];(Je=e.value)==null||Je.removeLayer(ze.layer),(Qe=t.value)!=null&&Qe.hasLayer(ze.layer)&&t.value.removeLayer(ze.layer);const xt=new Wh(Mt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});t.value&&(t.value.addLayer(xt),s.value=xt,xt.updateProperties()),(it=e.value)==null||it.pm.disableDraw(),Ve()}});break;case"Circle":t.value&&t.value.getLayers().filter(Je=>Je instanceof Ba).forEach(Je=>{Je.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[t.value,r.value],snapMiddle:!0,snapIntersections:!0}),gl("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":gl("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(J=e.value)==null||J.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ae=e.value)==null||ae.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":gl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Fe=e.value)==null||Fe.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Me=e.value)==null||Me.off("pm:create"),(Ye=e.value)==null||Ye.on("pm:create",ze=>{var Je,Qe,it;if(ze.shape==="Line"&&ze.layer){const Mt=ze.layer.getLatLngs();(Je=e.value)==null||Je.removeLayer(ze.layer),(Qe=t.value)!=null&&Qe.hasLayer(ze.layer)&&t.value.removeLayer(ze.layer);const xt=new Bs(Mt,{color:"#3B82F6",weight:3,opacity:.8});t.value&&(t.value.addLayer(xt),s.value=xt,xt.updateProperties()),(it=e.value)==null||it.pm.disableDraw(),Ve()}});break;case"Text":if(gl("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const ze=Je=>{if(!e.value||!t.value)return;const Qe=h(Je.latlng);t.value.addLayer(Qe),s.value=Qe,e.value.off("click",ze),K("")};e.value.on("click",ze)}break;case"GeoNote":if(gl("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),e.value){const ze=Je=>{if(!e.value||!t.value)return;const Qe=new oR(Je.latlng,{color:"#3B82F6",name:"Note géolocalisée",description:""});t.value.addLayer(Qe),s.value=Qe,Qe.updateProperties(),Qe.openPopup(),e.value.off("click",ze),K("")};e.value.on("click",ze)}break;case"delete":gl("Cliquez sur une forme pour la supprimer"),(oe=e.value)==null||oe.pm.enableGlobalRemovalMode();break;case"ElevationLine":gl("Cliquez et maintenez pour tracer le profil altimétrique"),(fe=e.value)==null||fe.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(be=e.value)==null||be.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(de=e.value)==null||de.off("pm:create"),(Ue=e.value)==null||Ue.on("pm:create",async ze=>{var Je,Qe,it;if(ze.shape==="Line"&&ze.layer){const Mt=ze.layer.getLatLngs();(Je=e.value)==null||Je.removeLayer(ze.layer),(Qe=t.value)!=null&&Qe.hasLayer(ze.layer)&&t.value.removeLayer(ze.layer);const xt=new rf(Mt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(t.value){t.value.addLayer(xt),s.value=xt,await xt.updateElevationProfile();const Nt=T(xt,"ElevationLine");Object.assign(xt.properties,{...Nt,...xt.properties,type:"ElevationLine",elevationData:xt.getElevationData()}),s.value=null,Ws(()=>{s.value=xt})}(it=e.value)==null||it.pm.disableDraw(),i.value="",Ve()}});break}}catch(Xe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Xe)}},100)},X=B=>{var ce;if(!s.value)return;const te=s.value;if(te.properties=te.properties||{},te.properties.style=te.properties.style||{},te.properties.style={...te.properties.style,...B},te.properties.type==="text"){const le=te.properties._textLayer,xe=(ce=le==null?void 0:le.getElement())==null?void 0:ce.querySelector(".text-annotation");xe&&yb(xe,te.properties.style);const he={color:B.borderColor||te.properties.style.borderColor,weight:parseInt(B.borderWidth||te.properties.style.borderWidth),opacity:B.borderOpacity??te.properties.style.borderOpacity};"setStyle"in te&&te.setStyle(he)}else if(te.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const le={};B.fillColor&&(le.fillColor=B.fillColor),B.fillOpacity!==void 0&&(le.fillOpacity=B.fillOpacity),B.strokeColor&&(le.color=B.strokeColor),B.strokeOpacity!==void 0&&(le.opacity=B.strokeOpacity),B.strokeWidth!==void 0&&(le.weight=B.strokeWidth),B.dashArray&&(le.dashArray=B.dashArray),"setStyle"in te&&te.setStyle(le)}},se=B=>{var ce,le,xe,he;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}if(console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:B,layerType:(ce=s.value.properties)==null?void 0:ce.type,beforeName:s.value.name,beforePropertiesName:(le=s.value.properties)==null?void 0:le.name,nameIsDirectProperty:"name"in s.value}),s.value.properties&&Object.keys(B).forEach(J=>{s.value.properties[J]=B[J],J==="name"&&(console.log(`[useMapDrawing] Setting name "${B[J]}" directly on layer`),s.value.name=B[J])}),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(xe=s.value.properties)==null?void 0:xe.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((he=s.value.properties)==null?void 0:he.type)==="Circle"){const J=s.value,ae=J.getRadius();J.properties.radius=ae,J.properties.diameter=ae*2,J.properties.surface=Math.PI*ae*ae,J.properties.perimeter=2*Math.PI*ae,B.name&&(console.log(`[useMapDrawing] Ensuring circle name "${B.name}" is set in multiple places`),J.properties.name=B.name,J.properties.style.name=B.name,J.name=B.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:J.name,circlePropertiesName:J.properties.name,nameIsEnumerable:Object.keys(J).includes("name"),propertiesNameIsEnumerable:Object.keys(J.properties).includes("name")}))}const te=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties}});window.dispatchEvent(te)},me=B=>{console.log("[forceShapeUpdate] Début",{currentProperties:B.properties,selectedShapeRef:s.value}),s.value=null,Ws(()=>{s.value=B,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},Le=(B,te)=>{console.log("[updateLayerProperties] Début",{layer:B,shapeType:te,currentProperties:B.properties}),aR((le,xe)=>{const he=T(le,xe);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:he}),le.properties={...he},me(le),le.fire("properties:updated",{shape:le,properties:le.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:le.properties,selectedShape:s.value})},100)(B,te)},H=(B,te)=>Dt.latLng((B.lat+te.lat)/2,(B.lng+te.lng)/2),R=B=>{if(!e.value||!t.value)return;_();const te=B.getLatLng(),ce=B.getRadius(),le=P(te,"#059669");w.push(le),y(le,B,()=>[Bi(ce,"m","Rayon"),Bi(ce*2,"m","Diamètre"),Bi(Math.PI*Math.pow(ce,2),"m²","Surface")].join("<br>"));const xe=[],he=[0,45,90,135,180,225,270,315];he.forEach(J=>{const ae=B.calculatePointOnCircle(J),Fe=P(ae,"#2563EB");xe.push(Fe),w.push(Fe),y(Fe,B,()=>Bi(ce,"m","Rayon")),Fe.on("mousedown",Me=>{if(!e.value)return;Dt.DomEvent.stopPropagation(Me),e.value.dragging.disable();let Ye=!0;const oe=be=>{Ye&&(B.resizeFromControlPoint(be.latlng),xe.forEach((de,Ue)=>{const Xe=B.calculatePointOnCircle(he[Ue]);de.setLatLng(Xe)}),le.setLatLng(B.getLatLng()),Fe.measureDiv&&(Fe.measureDiv.innerHTML=Bi(B.getRadius(),"m","Rayon")))},fe=()=>{Ye=!1,e.value&&(e.value.off("mousemove",oe),document.removeEventListener("mouseup",fe),e.value.dragging.enable(),B.updateProperties(),s.value=null,Ws(()=>{s.value=B}),Le(B,"Circle"))};e.value.on("mousemove",oe),document.addEventListener("mouseup",fe)})}),le.on("mousedown",J=>{if(!e.value)return;Dt.DomEvent.stopPropagation(J),e.value.dragging.disable();let ae=!0;const Fe=B.getLatLng(),Me=J.latlng,Ye=fe=>{if(!ae)return;const be=fe.latlng.lng-Me.lng,de=fe.latlng.lat-Me.lat,Ue=Dt.latLng(Fe.lat+de,Fe.lng+be);Dt.Circle.prototype.setLatLng.call(B,Ue),le.setLatLng(Ue),xe.forEach((Xe,ze)=>{const Je=B.calculatePointOnCircle(he[ze]);Xe.setLatLng(Je)}),le.measureDiv&&(le.measureDiv.innerHTML=[Bi(B.getRadius(),"m","Rayon"),Bi(B.getRadius()*2,"m","Diamètre"),Bi(Math.PI*Math.pow(B.getRadius(),2),"m²","Surface")].join("<br>"))},oe=()=>{ae=!1,e.value&&(e.value.off("mousemove",Ye),document.removeEventListener("mouseup",oe),e.value.dragging.enable(),B.updateProperties(),s.value=null,Ws(()=>{s.value=B}),Le(B,"Circle"))};e.value.on("mousemove",Ye),document.addEventListener("mouseup",oe)}),B.on("circle:resized",()=>{Le(B,"Circle")}),s.value=B},Z=B=>{var Ye;if(!e.value||!t.value)return;if(!(B instanceof Ba)){console.warn("La couche n'est pas une instance de Rectangle");return}const te=B;_();const ce=te.getCenter(),le=te.getRotatedCorners(),xe=te.getMidPoints(),he=P(ce,"#059669");w.push(he),y(he,te,()=>{const{width:oe,height:fe}=te.getDimensions(),be=oe*fe,de=te.getRotation();return[Bi(oe,"m","Largeur"),Bi(fe,"m","Hauteur"),Bi(be,"m²","Surface"),`Rotation: ${de.toFixed(1)}°`].join("<br>")});const J=P(Dt.latLng(ce.lat+(le[0].lat-ce.lat)*1.2,ce.lng+(le[0].lng-ce.lng)*1.2),"#F97316");w.push(J);const ae=Dt.polyline([ce,J.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(Ye=n.value)==null||Ye.addLayer(ae);const Fe=le.map(oe=>{const fe=P(oe,"#DC2626");return w.push(fe),y(fe,te,()=>{const{width:be,height:de}=te.getDimensions();return[Bi(be,"m","Largeur"),Bi(de,"m","Hauteur")].join("<br>")}),fe}),Me=xe.map((oe,fe)=>{const be=P(oe,"#2563EB");return w.push(be),y(be,te,()=>{const{width:de,height:Ue}=te.getDimensions(),Xe=fe%2===0?de:Ue;return[Bi(Xe,"m","Longueur du côté"),Bi(Xe/2,"m","Distance au coin")].join("<br>")}),be});he.on("mousedown",oe=>{if(!e.value)return;Dt.DomEvent.stopPropagation(oe),e.value.dragging.disable();let fe=!0;const be=Ue=>{if(!fe)return;te.moveFromCenter(Ue.latlng);const Xe=te.getRotatedCorners(),ze=te.getMidPoints();Fe.forEach((Qe,it)=>Qe.setLatLng(Xe[it])),Me.forEach((Qe,it)=>Qe.setLatLng(ze[it])),he.setLatLng(Ue.latlng);const Je=Dt.latLng(Ue.latlng.lat+(Xe[0].lat-Ue.latlng.lat)*1.2,Ue.latlng.lng+(Xe[0].lng-Ue.latlng.lng)*1.2);J.setLatLng(Je),ae.setLatLngs([Ue.latlng,Je])},de=()=>{fe=!1,e.value&&(e.value.off("mousemove",be),document.removeEventListener("mouseup",de),e.value.dragging.enable(),te.updateProperties(),s.value=null,Ws(()=>{s.value=te}))};e.value.on("mousemove",be),document.addEventListener("mouseup",de)}),J.on("mousedown",oe=>{if(!e.value)return;Dt.DomEvent.stopPropagation(oe),e.value.dragging.disable();let fe=!1;const be=oe.latlng,de=te.getRotation(),Ue=te.getCenter(),Xe=be.lng-Ue.lng,ze=be.lat-Ue.lat,Je=Math.atan2(ze,Xe)*180/Math.PI;w.forEach(Mt=>{Mt!==J&&(Mt.setStyle({opacity:0,fillOpacity:0}),Mt.measureDiv&&(Mt.measureDiv.style.display="none"))});const Qe=Pf(Mt=>{fe||(fe=!0);const xt=Mt.latlng.lng-Ue.lng,Nt=Mt.latlng.lat-Ue.lat;let hn=Math.atan2(Nt,xt)*180/Math.PI-Je,mn=(de+hn)%360;mn<0&&(mn+=360),te.setRotation(mn,!1),J.setLatLng(Mt.latlng),ae.setLatLngs([Ue,Mt.latlng])},16),it=()=>{e.value&&(e.value.off("mousemove",Qe),document.removeEventListener("mouseup",it),e.value.dragging.enable(),fe&&te.finalizeRotation(),s.value=null,Ws(()=>{s.value=te,_(),Z(te)}))};e.value.on("mousemove",Qe),document.addEventListener("mouseup",it)}),te.on("coordinates:updated",oe=>{const{corners:fe,center:be}=oe,de=te.getMidPoints();Fe.forEach((Xe,ze)=>Xe.setLatLng(fe[ze])),Me.forEach((Xe,ze)=>Xe.setLatLng(de[ze])),he.setLatLng(be);const Ue=Dt.latLng(be.lat+(fe[0].lat-be.lat)*1.2,be.lng+(fe[0].lng-be.lng)*1.2);J.setLatLng(Ue),ae.setLatLngs([be,Ue])})},z=B=>{if(!e.value||!t.value)return;_();const te=B.getLatLngs();if(!te||te.length===0){console.warn("Pas de points pour la ligne");return}let ce=null;if(B instanceof Bs){const le=B.getCenter();ce=P(le,"#059669"),w.push(ce),y(ce,B,()=>{const xe=B.getLength()||0;return Bi(xe,"m","Longueur totale")}),ce.on("mousedown",xe=>{if(!e.value)return;Dt.DomEvent.stopPropagation(xe),e.value.dragging.disable();let he=!0;const J=B.getLatLngs().map(oe=>Dt.latLng(oe.lat,oe.lng)),ae=xe.latlng;B instanceof Bs&&(B.off("move:end"),B.off("vertex:moved"),B.off("latlngs:updated"),B.off("properties:updated")),w.forEach((oe,fe)=>{fe>0&&(oe.setStyle({opacity:0,fillOpacity:0}),oe.measureDiv&&(oe.measureDiv.style.display="none"))});const Me=Pf(oe=>{if(!he)return;const fe=oe.latlng.lng-ae.lng,be=oe.latlng.lat-ae.lat,de=J.map(Ue=>Dt.latLng(Ue.lat+be,Ue.lng+fe));Dt.Polyline.prototype.setLatLngs.call(B,de),ce==null||ce.setLatLng(oe.latlng)},16),Ye=()=>{if(he=!1,!!e.value){if(e.value.off("mousemove",Me),document.removeEventListener("mouseup",Ye),e.value.dragging.enable(),B instanceof Bs){const oe=()=>{_(),z(B)};B.on("move:end",oe),B.on("vertex:moved",oe),B.on("latlngs:updated",oe),B.on("properties:updated",oe),B.updateProperties(),Le(B,"Line")}_(),z(B)}};e.value.on("mousemove",Me),document.addEventListener("mouseup",Ye)})}if(te.forEach((le,xe)=>{const he=P(le,"#DC2626");w.push(he),y(he,B,()=>{if(B instanceof Bs){const J=B.getLength()||0,ae=B.getLengthToVertex(xe);return[Bi(ae,"m","Distance depuis le début"),Bi(J,"m","Longueur totale")].join("<br>")}return""}),he.on("mousedown",J=>{if(!e.value)return;Dt.DomEvent.stopPropagation(J),e.value.dragging.disable();let ae=!0;B instanceof Bs&&(B.off("move:end"),B.off("vertex:moved"),B.off("latlngs:updated"),B.off("properties:updated")),w.forEach((Ye,oe)=>{oe!==xe+1&&(Ye.setStyle({opacity:0,fillOpacity:0}),Ye.measureDiv&&(Ye.measureDiv.style.display="none"))});const Fe=Pf(Ye=>{if(!ae)return;const oe=B.getLatLngs();oe[xe]=Ye.latlng,Dt.Polyline.prototype.setLatLngs.call(B,oe),he.setLatLng(Ye.latlng)},16),Me=()=>{if(ae=!1,!!e.value){if(e.value.off("mousemove",Fe),document.removeEventListener("mouseup",Me),e.value.dragging.enable(),B instanceof Bs){const Ye=()=>{_(),z(B)};B.on("move:end",Ye),B.on("vertex:moved",Ye),B.on("latlngs:updated",Ye),B.on("properties:updated",Ye),B.updateProperties(),Le(B,"Line")}_(),z(B)}};e.value.on("mousemove",Fe),document.addEventListener("mouseup",Me)})}),te.length>=2)for(let le=0;le<te.length-1;le++){const xe=te[le],he=te[le+1],J=Dt.latLng((xe.lat+he.lat)/2,(xe.lng+he.lng)/2),ae=P(J,"#2563EB");w.push(ae),y(ae,B,()=>{if(B instanceof Bs){const Fe=B.getSegmentLengthAt(le),Me=B.getLength()||0,Ye=B.getLengthToVertex(le)+Fe/2;return[Bi(Fe,"m","Longueur du segment"),Bi(Fe/2,"m","Demi-segment"),Bi(Ye,"m","Distance depuis le début"),Bi(Me,"m","Longueur totale")].join("<br>")}return""})}if(B instanceof Bs){const le=()=>{_(),z(B)};B.on("move:start",()=>{w.forEach((xe,he)=>{he>0&&(xe.setStyle({opacity:0,fillOpacity:0}),xe.measureDiv&&(xe.measureDiv.style.display="none"))})}),B.on("move:end",le),B.on("vertex:moved",le),B.on("latlngs:updated",le),B.on("properties:updated",le),w.cleanup=()=>{B.off("move:start",()=>{}),B.off("move:end",le),B.off("vertex:moved",le),B.off("latlngs:updated",le),B.off("properties:updated",le)}}},O=B=>{if(!e.value||!t.value)return;_();const te=B.getLatLngs()[0],ce=te.map(Me=>[Me.lng,Me.lat]);ce.push(ce[0]);const le=uu([ce]),xe=nc(le),he=te.reduce((Me,Ye,oe)=>{const fe=te[(oe+1)%te.length];return Me+Ye.distanceTo(fe)},0);let J;if(typeof B.getCenter=="function")try{J=B.getCenter()}catch(Me){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Me);const Ye=np(le);J=Dt.latLng(Ye.geometry.coordinates[1],Ye.geometry.coordinates[0])}else{const Me=np(le);J=Dt.latLng(Me.geometry.coordinates[1],Me.geometry.coordinates[0])}const ae=P(J,"#059669");w.push(ae),y(ae,B,()=>[Bi(he,"m","Périmètre"),Bi(xe,"m²","Surface")].join("<br>")),ae.on("mousedown",Me=>{if(!e.value)return;Dt.DomEvent.stopPropagation(Me),e.value.dragging.disable();let Ye=!0;const oe=Me.latlng,fe=[...te];w.forEach((Xe,ze)=>{ze>0&&Xe.setStyle({opacity:0,fillOpacity:0})});const be=Pf(Xe=>{if(!Ye)return;const ze=Xe.latlng.lng-oe.lng,Je=Xe.latlng.lat-oe.lat,Qe=fe.map(it=>Dt.latLng(it.lat+Je,it.lng+ze));Dt.Polygon.prototype.setLatLngs.call(B,[Qe]),ae.setLatLng(Xe.latlng)},16),de=Xe=>{Ye&&be(Xe)},Ue=()=>{if(Ye=!1,!!e.value){if(e.value.off("mousemove",de),document.removeEventListener("mouseup",Ue),e.value.dragging.enable(),B.properties){const Xe=B.getLatLngs()[0],ze=Xe.map(Qe=>[Qe.lng,Qe.lat]);ze.push(ze[0]);const Je=uu([ze]);B.properties.area=nc(Je),B.properties.perimeter=Xe.reduce((Qe,it,Mt)=>{const xt=Xe[(Mt+1)%Xe.length];return Qe+it.distanceTo(xt)},0),B.properties.surface=B.properties.area}_(),O(B),s.value=null,Ws(()=>{s.value=B})}};e.value.on("mousemove",de),document.addEventListener("mouseup",Ue)}),te.forEach((Me,Ye)=>{const oe=P(Me,"#DC2626");w.push(oe),y(oe,B,()=>{const fe=te[(Ye-1+te.length)%te.length],be=te[(Ye+1)%te.length],de=Me.distanceTo(fe),Ue=Me.distanceTo(be);return[Bi(de,"m","Distance au point précédent"),Bi(Ue,"m","Distance au point suivant"),Bi(he,"m","Périmètre total"),Bi(xe,"m²","Surface")].join("<br>")}),oe.on("mousedown",fe=>{if(Dt.DomEvent.stopPropagation(fe),!e.value)return;e.value.dragging.disable();let be=!0;ae&&(ae.setStyle({opacity:0,fillOpacity:0}),ae.measureDiv&&(ae.measureDiv.style.display="none"));const de=Pf(ze=>{if(!be)return;te[Ye]=ze.latlng,Dt.Polygon.prototype.setLatLngs.call(B,[te]),oe.setLatLng(ze.latlng);const Je=w.slice(te.length+1),Qe=(Ye-1+te.length)%te.length,it=Je[Qe];if(it){const xt=te[Qe],Nt=te[Ye],Kt=Dt.latLng((xt.lat+Nt.lat)/2,(xt.lng+Nt.lng)/2);it.setLatLng(Kt)}const Mt=Je[Ye];if(Mt){const xt=te[Ye],Nt=te[(Ye+1)%te.length],Kt=Dt.latLng((xt.lat+Nt.lat)/2,(xt.lng+Nt.lng)/2);Mt.setLatLng(Kt)}},16),Ue=ze=>{be&&de(ze)},Xe=()=>{if(be=!1,!!e.value){if(e.value.off("mousemove",Ue),document.removeEventListener("mouseup",Xe),e.value.dragging.enable(),B.properties){const ze=B.getLatLngs()[0].map(Qe=>[Qe.lng,Qe.lat]);ze.push(ze[0]);const Je=uu([ze]);B.properties.area=nc(Je),B.properties.perimeter=te.reduce((Qe,it,Mt)=>{const xt=te[(Mt+1)%te.length];return Qe+it.distanceTo(xt)},0),B.properties.surface=B.properties.area}_(),O(B),s.value=null,Ws(()=>{s.value=B})}};e.value.on("mousemove",Ue),document.addEventListener("mouseup",Xe)})}),(()=>{const Me=B.getLatLngs()[0];w.slice(Me.length+1).forEach(oe=>{n.value&&n.value.removeLayer(oe)}),w=w.slice(0,Me.length+1);const Ye=new Array(Me.length);for(let oe=0;oe<Me.length;oe++){const fe=Me[oe],be=Me[(oe+1)%Me.length];Ye[oe]=H(fe,be)}Ye.forEach((oe,fe)=>{const be=P(oe,"#2563EB");w.push(be),y(be,B,()=>{const de=Me[fe],Ue=Me[(fe+1)%Me.length],Xe=de.distanceTo(Ue);return[Bi(Xe,"m","Longueur du segment"),Bi(he,"m","Périmètre total"),Bi(xe,"m²","Surface")].join("<br>")}),be.on("mousedown",de=>{if(!e.value)return;Dt.DomEvent.stopPropagation(de),e.value.dragging.disable();let Ue=!0;const Xe=fe;ae&&(ae.setStyle({opacity:0,fillOpacity:0}),ae.measureDiv&&(ae.measureDiv.style.display="none"));const ze=[...B.getLatLngs()[0]];ze.splice((Xe+1)%ze.length,0,oe),B.setLatLngs([ze]),_(),O(B);const Je=Xe+1,Qe=1+Je,it=Je<w.length-1?w[Qe]:null;if(it){const Mt=Nt=>{if(!Ue)return;const Kt=B.getLatLngs()[0];Kt[Je]=Nt.latlng,B.setLatLngs([Kt]),it.setLatLng(Nt.latlng);const hn=w.slice(1+Kt.length),mn=(Je-1+Kt.length)%Kt.length,et=Je;if(hn[mn]){const ot=Kt[mn],nt=Kt[Je],$t=Dt.latLng((ot.lat+nt.lat)/2,(ot.lng+nt.lng)/2);hn[mn].setLatLng($t)}if(hn[et]){const ot=Kt[Je],nt=Kt[(Je+1)%Kt.length],$t=Dt.latLng((ot.lat+nt.lat)/2,(ot.lng+nt.lng)/2);hn[et].setLatLng($t)}},xt=()=>{if(Ue=!1,!!e.value){if(e.value.off("mousemove",Mt),document.removeEventListener("mouseup",xt),e.value.dragging.enable(),B.properties){const Nt=B.getLatLngs()[0].map(hn=>[hn.lng,hn.lat]);Nt.push(Nt[0]);const Kt=uu([Nt]);B.properties.area=nc(Kt),B.properties.perimeter=B.getLatLngs()[0].reduce((hn,mn,et,ot)=>{const nt=ot[(et+1)%ot.length];return hn+mn.distanceTo(nt)},0)}_(),O(B),s.value=null,Ws(()=>{s.value=B})}};e.value.on("mousemove",Mt),document.addEventListener("mouseup",xt)}else e.value.dragging.enable(),_(),O(B)})})})()},k=B=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:B.constructor.name,properties:B.properties}),r.value.clearLayers();try{if(B instanceof Ba)B.generateHelperPoints(e.value);else if(B instanceof If){if("getLatLng"in B&&typeof B.getLatLng=="function"){const te=B.getLatLng();if(te){const ce=Dt.circleMarker(te,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ce)}}}else if(B instanceof Wh||B instanceof Dt.Polygon){let te=[];if("getLatLngs"in B){const le=B.getLatLngs();if(Array.isArray(le)&&le.length>0){const xe=le[0];Array.isArray(xe)?te=xe:xe instanceof Dt.LatLng&&(te=le)}}let ce=null;if(B instanceof Wh&&typeof B.getCenter=="function")ce=B.getCenter();else if(te.length>0){const le=te.map(J=>[J.lng,J.lat]);le.push(le[0]);const xe=uu([le]),he=np(xe);ce=Dt.latLng(he.geometry.coordinates[1],he.geometry.coordinates[0])}if(ce){const le=Dt.circleMarker(ce,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(le)}te.forEach(le=>{if(le){const xe=Dt.circleMarker(le,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(xe)}});for(let le=0;le<te.length;le++){const xe=te[le],he=te[(le+1)%te.length];if(xe&&he){const J=Dt.latLng((xe.lat+he.lat)/2,(xe.lng+he.lng)/2),ae=Dt.circleMarker(J,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ae)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(te){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",te)}}},I=B=>{console.log("Nombre total de couches:",B.length);const te=B.filter(J=>{var Me;if(!J)return!1;let ae=0,Fe={width:0,height:0};if(J instanceof Dt.Circle){ae=Math.PI*Math.pow(J.getRadius(),2);const Ye=J.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${ae.toFixed(2)} m²`),console.log(`- Rayon: ${Ye.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(J instanceof Ba||J instanceof Dt.Rectangle){const Ye=J.getBounds(),oe=Ye.getSouthWest(),fe=Ye.getNorthEast(),be=cu([[oe.lng,oe.lat],[fe.lng,oe.lat]]),de=cu([[oe.lng,oe.lat],[oe.lng,fe.lat]]);Fe.width=Fh(be,{units:"meters"}),Fe.height=Fh(de,{units:"meters"}),ae=Fe.width*Fe.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${ae.toFixed(2)} m²`),console.log(`- Largeur: ${Fe.width.toFixed(2)} m`),console.log(`- Hauteur: ${Fe.height.toFixed(2)} m`)}else if(((Me=J.properties)==null?void 0:Me.type)==="Semicircle"){const Ye=J.getStartAngle(),oe=J.getStopAngle(),fe=(oe-Ye+360)%360,be=J.getRadius();ae=Math.PI*Math.pow(be,2)*fe/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${ae.toFixed(2)} m²`),console.log(`- Rayon: ${be.toFixed(2)} m`),console.log(`- Angle de début: ${Ye.toFixed(2)}°`),console.log(`- Angle de fin: ${oe.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${fe.toFixed(2)}°`)}return ae>0});if(te.length===0)return 0;const ce=new Set,le=[];for(const J of te)if(!ce.has(J)){const ae=G(te,J);ae.length>0&&(le.push(ae),ae.forEach(Fe=>ce.add(Fe)))}console.log(`
Nombre de groupes de formes connectées: ${le.length}`);const xe=le.map((J,ae)=>{console.log(`
Calcul pour le groupe ${ae+1} (${J.length} formes):`);const Fe=J.map(be=>{var de,Ue,Xe;try{let ze;if(be instanceof Dt.Circle){const Je=be.getLatLng(),Qe=be.getRadius();ze=OI([Je.lng,Je.lat],Qe/1e3,{units:"kilometers",steps:256});const it=nc(ze),Mt=((de=be.properties)==null?void 0:de.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Qe.toFixed(2)}m`),console.log(`- Surface propriété: ${Mt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${it.toFixed(2)}m²`),ze}else if(be instanceof Ba||be instanceof Dt.Rectangle){const Je=be.getBounds(),Qe=Je.getSouthWest(),it=Je.getNorthEast(),Mt=Dt.latLng(it.lat,Qe.lng),xt=Dt.latLng(Qe.lat,it.lng),Nt=[[Qe.lng,Qe.lat],[xt.lng,xt.lat],[it.lng,it.lat],[Mt.lng,Mt.lat],[Qe.lng,Qe.lat]];ze=uu([Nt]);const Kt=nc(ze),hn=cu([[Qe.lng,Qe.lat],[it.lng,Qe.lat]]),mn=cu([[Qe.lng,Qe.lat],[Qe.lng,it.lat]]),et=Fh(hn,{units:"meters"}),ot=Fh(mn,{units:"meters"}),nt=et*ot;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${et.toFixed(2)}m`),console.log(`- Hauteur: ${ot.toFixed(2)}m`),console.log(`- Surface théorique: ${nt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Kt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(nt-Kt).toFixed(2)}m² (${(Math.abs(nt-Kt)/nt*100).toFixed(2)}%)`),ze}else if(((Ue=be.properties)==null?void 0:Ue.type)==="Semicircle"){const Je=be.getCenter(),Qe=be.getRadius(),it=be.getStartAngle(),Mt=be.getStopAngle(),xt=[],Nt=64;xt.push([Je.lng,Je.lat]);for(let mn=0;mn<=Nt;mn++){const ot=(it+(Mt-it+360)%360*mn/Nt)*Math.PI/180,nt=Qe*Math.cos(ot),en=Qe*Math.sin(ot)/111319.9,kn=nt/(111319.9*Math.cos(Je.lat*Math.PI/180));xt.push([Je.lng+kn,Je.lat+en])}xt.push([Je.lng,Je.lat]),ze=uu([xt]);const Kt=nc(ze),hn=((Xe=be.properties)==null?void 0:Xe.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Qe.toFixed(2)}m`),console.log(`- Surface propriété: ${hn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Kt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(hn-Kt).toFixed(2)}m² (${(Math.abs(hn-Kt)/hn*100).toFixed(2)}%)`),ze}return null}catch(ze){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",ze),null}}).filter(be=>be!==null);if(Fe.length===0)return 0;const Me=Fe.map(be=>{const de=nc(be);return console.log(`Surface individuelle: ${de.toFixed(2)}m²`),de});let Ye=0;for(let be=0;be<Fe.length;be++)for(let de=be+1;de<Fe.length;de++)try{const Ue=_I([Fe[be],Fe[de]]),Xe=eR(Ue);if(Xe){const ze=nc(Xe);Ye+=ze,console.log(`Intersection entre formes ${be+1} et ${de+1}: ${ze.toFixed(2)}m²`)}}catch(Ue){console.error(`Erreur lors du calcul d'intersection entre les formes ${be+1} et ${de+1}:`,Ue)}const oe=Me.reduce((be,de)=>be+de,0),fe=oe-Ye;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${ae+1}:`),console.log(`- Surface totale (somme): ${oe.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${Ye.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${fe.toFixed(2)}m²`),fe}),he=Math.max(...xe);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${he.toFixed(2)}m²`),he},W=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},V=(B,te)=>{if(!e.value)return;W();const ce=te?G(B,te):B;if(u.value||(u.value=Dt.layerGroup().addTo(e.value)),ce.forEach(le=>{var he;const xe=(he=le.properties)==null?void 0:he.type;if(xe==="Circle"||xe==="Semicircle"){const J=le.getLatLng(),ae=le.getRadius(),Fe=Dt.circle(J,{radius:ae,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Dt.canvas({padding:.5})}),Me=Dt.circle(J,{radius:ae,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Dt.canvas({padding:.5})});u.value&&(u.value.addLayer(Me),u.value.addLayer(Fe))}else if(xe==="Rectangle"||xe==="Polygon"){const J=le.getLatLngs(),ae=Dt.polygon(J,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Dt.canvas({padding:.5})}),Fe=Dt.polygon(J,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Dt.canvas({padding:.5})});u.value&&(u.value.addLayer(Fe),u.value.addLayer(ae))}}),te&&ce.length>1&&e.value){const le=Dt.latLngBounds([]);ce.forEach(J=>{J.getBounds?le.extend(J.getBounds()):J.getLatLng&&le.extend(J.getLatLng())});const xe=le.getCenter(),he=Dt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(xe);u.value&&u.value.addLayer(Dt.marker(xe,{opacity:0,interactive:!1}).bindTooltip(he).openTooltip())}},G=(B,te)=>{if(!te)return[];const ce=new Set,le=[te],xe=[te];for(te._leaflet_id!==void 0&&ce.add(te._leaflet_id);le.length>0;){const he=le.shift();for(const J of B){if(J===he||ce.has(J._leaflet_id))continue;ne(he,J)&&(xe.push(J),le.push(J),ce.add(J._leaflet_id))}}return xe},ne=(B,te)=>{let ce=null,le=null;if(B.getBounds&&typeof B.getBounds=="function")ce=B.getBounds();else if(B.getLatLng&&B.getRadius){const xe=B.getLatLng(),he=B.getRadius();ce=Dt.latLngBounds([xe.lat-he/111e3,xe.lng-he/(111e3*Math.cos(xe.lat*Math.PI/180))],[xe.lat+he/111e3,xe.lng+he/(111e3*Math.cos(xe.lat*Math.PI/180))])}if(te.getBounds&&typeof te.getBounds=="function")le=te.getBounds();else if(te.getLatLng&&te.getRadius){const xe=te.getLatLng(),he=te.getRadius();le=Dt.latLngBounds([xe.lat-he/111e3,xe.lng-he/(111e3*Math.cos(xe.lat*Math.PI/180))],[xe.lat+he/111e3,xe.lng+he/(111e3*Math.cos(xe.lat*Math.PI/180))])}return!(!ce||!le||!ce.intersects(le))},_e=(B,te)=>{var le;const ce=G(B,te);return ce.length===1&&(le=te.properties)!=null&&le.surface?te.properties.surface:I(ce)},ge=B=>{var le,xe,he,J,ae,Fe,Me,Ye,oe;const te=B.layer;(le=t.value)==null||le.addLayer(te);let ce="unknown";if(te instanceof Dt.Circle?ce=i.value==="Semicircle"?"Semicircle":"Circle":te instanceof Dt.Rectangle?ce="Rectangle":te instanceof Dt.Polygon?ce="Polygon":te instanceof Dt.Polyline&&!(te instanceof Dt.Polygon)&&(ce="Line"),te.properties=T(te,ce),s.value=te,console.log("[useMapDrawing] Input layer:",{type:ce,instanceof:{Circle:te instanceof Dt.Circle,Rectangle:te instanceof Dt.Rectangle,Polygon:te instanceof Dt.Polygon,Polyline:te instanceof Dt.Polyline},options:te.options,properties:te.properties}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:te,type:ce,properties:te.properties}})),te.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ce,isSelected:s.value===te}),(!s.value||s.value!==te)&&k(te)}),te.on("mouseout",()=>{var fe;console.log("[mouseout] Sortie de la forme",{type:ce,isSelected:s.value===te}),(!s.value||s.value!==te)&&((fe=r.value)==null||fe.clearLayers())}),ce==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(ce==="Circle"){(xe=t.value)==null||xe.removeLayer(te);const fe=new If(te.getLatLng(),{radius:te.getRadius(),...te.options});fe.properties={...T(fe,"Circle"),type:"Circle"},Object.defineProperty(fe,"name",{value:fe.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(fe,"name"),directName:fe.name,propertiesName:fe.properties.name,nameIsEnumerable:Object.keys(fe).includes("name"),allProperties:Object.keys(fe.properties),allKeys:Object.keys(fe)}),(he=t.value)==null||he.addLayer(fe),s.value=fe,R(fe)}else if(ce==="Rectangle"){(J=t.value)==null||J.removeLayer(te);const fe=new Ba(te.getBounds(),{...te.options});fe.updateProperties(),(ae=t.value)==null||ae.addLayer(fe),s.value=fe,Z(fe)}else if(te instanceof Dt.Polygon){const fe=te.getLatLngs()[0],be=new Wh([fe],{...te.options});be.updateProperties(),(Fe=t.value)==null||Fe.removeLayer(te),(Me=t.value)==null||Me.addLayer(be),s.value=be,O(be)}else if(te instanceof Bs)z(te);else if(te instanceof Dt.Polyline&&!(te instanceof Dt.Polygon)){const fe=te.getLatLngs(),be=new Bs(fe,{...te.options});be.updateProperties(),(Ye=t.value)==null||Ye.removeLayer(te),(oe=t.value)==null||oe.addLayer(be),s.value=be,z(be)}gl("Cliquez sur la forme pour afficher les points de contrôle")},Ve=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",ge))};return{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:D,setDrawingTool:K,updateShapeStyle:X,updateShapeProperties:se,updateTextFixedSize:j,adjustView:U,clearActiveControlPoints:_,calculateTotalCoverageArea:I,showCoverageOverlay:V,hideCoverageOverlay:W,calculateConnectedCoverageArea:_e,getConnectedShapes:G}}function uR(){const{isEnabled:e,startMeasure:t}=dd(),n=It(null),r=It(""),i=It("Hybride"),s=It(null),o=t("createBaseMaps","useMapState"),u={Hybride:Dt.layerGroup([Dt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Dt.latLngBounds(Dt.latLng(41.333,-5.566),Dt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Dt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Dt.latLngBounds(Dt.latLng(41.333,-5.566),Dt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Dt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Dt.latLngBounds(Dt.latLng(41.333,-5.566),Dt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Dt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Dt.latLngBounds(Dt.latLng(41.333,-5.566),Dt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const h=ln.createPerformanceTracker(w=>{ln.measure("initMap:setOptions",()=>{n.value=w,w.options.zoomSnap=.25,w.options.zoomDelta=.25,w.options.wheelPxPerZoomLevel=100,w.options.zoomAnimation=!0,w.options.fadeAnimation=!0,w.options.markerZoomAnimation=!0,w.options.minZoom=2,w.options.maxZoom=19,w.options.scrollWheelZoom=!0,w.options.doubleClickZoom=!0;const _=Dt.latLngBounds(Dt.latLng(-90,-180),Dt.latLng(90,180));w.setMaxBounds(_),w.options.maxBoundsViscosity=1,w.options.trackResize=!0;let P=null;w.getZoom(),w.on("zoomstart",()=>{w.getZoom(),w.options.zoomAnimation=!1,w.options.markerZoomAnimation=!1}),w.on("zoomend",()=>{P&&clearTimeout(P),P=setTimeout(()=>{setTimeout(()=>{w.options.zoomAnimation=!0,w.options.markerZoomAnimation=!0,w.invalidateSize({animate:!1,pan:!1});const j=w.getBounds(),D=w.options.maxBounds;D&&!j.intersects(D)&&w.panInsideBounds(D,{animate:!1})},250)},250)});const T=w._zoomAnimation;T&&(w._zoomAnimation=function(j){try{this._animatingZoom||T.call(this,j)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),ln.measure("initMap:addInitialLayer",()=>{w&&w.whenReady(()=>{const _=i.value;if(u[_]){if(console.log(`Initialisation de la couche de base: ${_}`),s.value&&w.hasLayer(s.value))try{w.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(P){console.warn("Erreur lors de la suppression de la couche active précédente:",P)}s.value=u[_];try{s.value.addTo(w),console.log(`Couche ${_} ajoutée à la carte`)}catch(P){console.error(`Erreur lors de l'ajout de la couche ${_}:`,P)}}else console.warn(`Couche de base non disponible: ${_}`)})},"useMapState"),w.on("baselayerchange",_=>{const P=t("baselayerchange","useMapState",{layer:_.name});i.value=_.name,s.value=_.layer,P()}),e.value&&(w.on("movestart",()=>{t("mapMove","useMapState",{startCenter:w.getCenter()})}),w.on("moveend",()=>{t("mapMoveEnd","useMapState",{endCenter:w.getCenter()})()}),w.on("tileloadstart",()=>{t("tileLoad","useMapState")}),w.on("tileload",()=>{t("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=ln.createAsyncPerformanceTracker(async w=>{if(!n.value||!u[w]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===w)return;console.log(`Changement de carte: ${i.value} -> ${w}`);const _=n.value,P=_.getCenter(),T=_.getZoom();_.options.zoomAnimation=!1,_.options.fadeAnimation=!1,_.options.markerZoomAnimation=!1;const j=u[w];if(s.value&&_.hasLayer(s.value))try{_.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(D){console.warn("Erreur lors de la suppression de la couche active:",D)}try{j instanceof Dt.LayerGroup,j.addTo(_),console.log(`Nouvelle couche ${w} ajoutée`)}catch(D){console.error("Erreur lors de l'ajout de la nouvelle couche:",D);try{_.hasLayer(j)&&_.removeLayer(j),j.addTo(_),console.log(`Récupération: couche ${w} réajoutée`)}catch(U){throw console.error("Échec de la récupération:",U),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=j,i.value=w;try{_.setView(P,T,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${P}, zoom=${T}`)}catch(D){console.warn("Erreur lors de la réinitialisation de la vue:",D)}try{_.invalidateSize({animate:!1,pan:!1})}catch(D){console.warn("Erreur lors du rafraîchissement de la carte:",D)}setTimeout(()=>{_.options.zoomAnimation=!0,_.options.fadeAnimation=!0,_.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(_){if(console.error("Erreur lors du changement de carte de base:",_),n.value)try{const P=n.value;P.eachLayer(j=>{(j instanceof Dt.TileLayer||j instanceof Dt.LayerGroup)&&P.removeLayer(j)});const T=u[w];T.addTo(P),s.value=T,i.value=w,P.options.zoomAnimation=!0,P.options.fadeAnimation=!0,P.options.markerZoomAnimation=!0,P.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(P){console.error("Erreur lors de la récupération après échec:",P)}}},"changeBaseMap","useMapState"),g=ln.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const w=await ln.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),_=await ln.measureAsync("searchLocation:parseResponse",async()=>await w.json(),"useMapState");_&&_.length>0&&ln.measure("searchLocation:updateView",()=>{const{lat:P,lon:T}=_[0];n.value.setView([P,T],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(w){console.error("Erreur lors de la recherche de localisation:",w)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:h,searchLocation:g,changeBaseMap:d,cleanup:()=>{const w=t("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),w()},isPerformanceEnabled:e}}const py=Mp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:dd()}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var n,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),t=pa();this.loading=!0;try{let i="/plans/";const s={};t.isSalarie?s.salarie=(n=t.user)==null?void 0:n.id:t.isVisiteur&&(s.visiteur=(r=t.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>ur.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var n,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),t=pa();this.loading=!0;try{let i="/plans/";const s={include_details:!0};t.isSalarie?s.salarie=(n=t.user)==null?void 0:n.id:t.isVisiteur&&(s.visiteur=(r=t.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>ur.get(i,{params:s}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(h=>({...h,entreprise:typeof h.entreprise=="object"?h.entreprise:null,salarie:typeof h.salarie=="object"?h.salarie:null,visiteur:typeof h.visiteur=="object"?h.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await d0.getVisiteurPlans(e)).data}catch(t){throw this.error="Erreur lors du chargement des plans du client",t}finally{this.loading=!1}},async createPlan(e){var r;const t=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=hc();try{const i=pa();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>d0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,t()}},async createPlanForClient(e,t){this.clearCurrentPlan(),this.loading=!0;try{const n={...e,visiteur:t},r=await d0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const t=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),t();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return ur.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===e);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,t()}},async updatePlanDetails(e,t){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=hc();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:u,...h}=t,d={...h};return s!==void 0&&(d.visiteur_id=s),o!==void 0&&(d.salarie_id=o),u!==void 0&&(d.entreprise_id=u),ur.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===e);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(e){this.loading=!0;try{const t=await ur.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await ur.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var n;this.loading=!0;const t=hc();try{const r=this.plans.find(i=>i.id===e);await d0.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((n=this.currentPlan)==null?void 0:n.id)===e&&this.clearCurrentPlan(),t.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",t.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}});function cR(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function hR(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const t=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,n=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return t&&n&&r}function fR(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function bb(e){var t,n,r,i,s,o,u,h,d,g,y,w,_,P,T,j,D,U,K,X,se,me,Le,H,R,Z,z;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(t=e.properties)==null?void 0:t.type,name:(r=(n=e.properties)==null?void 0:n.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const O=e.getLatLng();return{type_forme:"Note",data:{points:[[O.lng,O.lat]],style:{color:((s=e.properties.style)==null?void 0:s.color)||"#3388ff",weight:((o=e.properties.style)==null?void 0:o.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((h=e.properties.style)==null?void 0:h.fillColor)||"#3388ff",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((g=e.properties.style)==null?void 0:g.name)||""}}}}if(e instanceof rf||((y=e.properties)==null?void 0:y.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(I=>[I.lng,I.lat]),style:{color:((w=e.properties.style)==null?void 0:w.color)||"#FF4500",weight:((_=e.properties.style)==null?void 0:_.weight)||4,opacity:((P=e.properties.style)==null?void 0:P.opacity)||.8,name:((T=e.properties.style)==null?void 0:T.name)||""},elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof Wh||((j=e.properties)==null?void 0:j.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(I=>[I.lng,I.lat]),style:{color:((D=e.properties.style)==null?void 0:D.color)||"#3388ff",weight:((U=e.properties.style)==null?void 0:U.weight)||3,opacity:((K=e.properties.style)==null?void 0:K.opacity)||1,fillColor:((X=e.properties.style)==null?void 0:X.fillColor)||"#3388ff",fillOpacity:((se=e.properties.style)==null?void 0:se.fillOpacity)||.2,name:((me=e.properties.style)==null?void 0:me.name)||""}}};if(e instanceof Bs||((Le=e.properties)==null?void 0:Le.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(I=>[I.lng,I.lat]),style:{color:((H=e.properties.style)==null?void 0:H.color)||"#3388ff",weight:((R=e.properties.style)==null?void 0:R.weight)||3,opacity:((Z=e.properties.style)==null?void 0:Z.opacity)||1,name:((z=e.properties.style)==null?void 0:z.name)||""}}};throw new Error("Type de forme non reconnu")}function dR(e){var t,n,r,i,s,o,u,h,d,g,y,w,_,P,T,j,D,U,K,X,se,me,Le,H,R,Z,z,O,k,I,W,V;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:e}),e.type_forme){case"Polygon":{const G=e.data;if(!cR(G))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const ne=G.points.map(ge=>$n.latLng(ge[1],ge[0])),_e=new Wh([ne],{color:((t=G.style)==null?void 0:t.color)||"#3388ff",weight:((n=G.style)==null?void 0:n.weight)||3,opacity:((r=G.style)==null?void 0:r.opacity)||1,fillColor:((i=G.style)==null?void 0:i.fillColor)||"#3388ff",fillOpacity:((s=G.style)==null?void 0:s.fillOpacity)||.2,dashArray:((o=G.style)==null?void 0:o.dashArray)||"",name:((u=G.style)==null?void 0:u.name)||""});return _e.updateProperties(),_e}case"ElevationLine":{const G=e.data;if(!hR(G))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const ne=G.points.map(ge=>$n.latLng(ge[1],ge[0])),_e=new rf(ne,{color:((h=G.style)==null?void 0:h.color)||"#FF4500",weight:((d=G.style)==null?void 0:d.weight)||4,opacity:((g=G.style)==null?void 0:g.opacity)||.8,name:((y=G.style)==null?void 0:y.name)||""});return _e.properties={type:"ElevationLine",style:{...G.style||{},name:((w=G.style)==null?void 0:w.name)||""},elevationData:G.elevationData,minElevation:G.minElevation,maxElevation:G.maxElevation,elevationGain:G.elevationGain,elevationLoss:G.elevationLoss,averageSlope:G.averageSlope,maxSlope:G.maxSlope,dataSource:"restored"},G.elevationData&&_e.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:ne.length,hasElevationData:!!G.elevationData,name:(_=G.style)==null?void 0:_.name,properties:_e.properties}),_e}case"Line":{const G=e.data;if(!fR(G))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const ne=G.points.map(ge=>$n.latLng(ge[1],ge[0])),_e=new Bs(ne,{...G.style||{},name:((P=G.style)==null?void 0:P.name)||""});return _e.updateProperties(),_e}case"Rectangle":{const G=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:G,bounds:G.bounds,width:G.width,height:G.height,rotation:G.rotation}),!G.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const ne=new $n.LatLngBounds($n.latLng(G.bounds.southWest[1],G.bounds.southWest[0]),$n.latLng(G.bounds.northEast[1],G.bounds.northEast[0])),_e=new Ba(ne,{color:((T=G.style)==null?void 0:T.color)||"#3388ff",weight:((j=G.style)==null?void 0:j.weight)||3,opacity:((D=G.style)==null?void 0:D.opacity)||1,fillColor:((U=G.style)==null?void 0:U.fillColor)||"#3388ff",fillOpacity:((K=G.style)==null?void 0:K.fillOpacity)||.2,dashArray:((X=G.style)==null?void 0:X.dashArray)||"",name:((se=G.style)==null?void 0:se.name)||"",width:G.width,height:G.height});return G.rotation&&_e.setRotation(G.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:_e.getBounds(),dimensions:_e.getDimensions(),properties:_e.properties}),_e}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:e.id,data:e.data,hasName:((Le=(me=e.data)==null?void 0:me.style)==null?void 0:Le.name)!==void 0,name:(R=(H=e.data)==null?void 0:H.style)==null?void 0:R.name});const G=e.data;if(!G.center||!G.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const ne=$n.circle([G.center[1],G.center[0]],{color:((Z=G.style)==null?void 0:Z.color)||"#3388ff",weight:((z=G.style)==null?void 0:z.weight)||3,opacity:((O=G.style)==null?void 0:O.opacity)||1,fillColor:((k=G.style)==null?void 0:k.fillColor)||"#3388ff",fillOpacity:((I=G.style)==null?void 0:I.fillOpacity)||.2,dashArray:((W=G.style)==null?void 0:W.dashArray)||"",radius:G.radius});return ne.properties={type:"Circle",radius:G.radius,diameter:G.radius*2,surface:Math.PI*G.radius*G.radius,perimeter:2*Math.PI*G.radius,style:{...G.style||{},name:((V=G.style)==null?void 0:V.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof G.center,center:G.center,radius:G.radius,style:ne.properties.style,name:ne.properties.style.name}),ne}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",e.type_forme),null}}const px=Mp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:dd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var n;const t=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:e,isLeafletLayer:e instanceof $n.Layer,hasProperties:!!e.properties,properties:e.properties,type:(n=e.properties)==null?void 0:n.type}),e instanceof $n.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>bb(e),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{t()}},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){const t=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} déjà chargé avec ${this.elements.length} éléments`),t(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>ur.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,u,h;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(h=i.data)==null?void 0:h.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=dR(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),bb(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,t()}},async saveToPlan(e,t){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:t==null?void 0:t.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),"DrawingStore"),s=(t==null?void 0:t.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>ur.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>u.data.formes.map(h=>({...h,type_forme:h.type_forme})),"DrawingStore"),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),pR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},mR={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},gR={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},vR={key:0,class:"mb-4"},yR={key:0,class:"animate-pulse"},_R=["value"],bR={key:1,class:"mb-4"},wR={key:0,class:"animate-pulse"},xR=["disabled"],LR={value:null},SR=["value"],ER={key:2,class:"mb-4"},CR={key:0,class:"animate-pulse"},PR=["disabled"],AR={value:null},MR=["value"],kR={class:"mb-4"},TR={class:"mb-6"},BR={class:"flex justify-end space-x-3"},OR=["disabled"],NR={key:0},DR={key:1},mx=Jo({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:t,emit:n}){function r(k){return k?typeof k=="object"?k.id:k:null}function i(k){if(k===null)throw new Error("Invalid ID");return k}const s=e,o=n,u=pa(),h=py(),d=px(),g=It(!1),y=It(null),w=It([]),_=It([]),P=It([]),T=It(null),j=It(null),D=It(!1),U=It(!1),K=It(!1),X=It({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),se=hr(()=>{var k,I,W;return((k=u.user)==null?void 0:k.user_type)==="admin"?X.value.nom.trim()&&X.value.entreprise&&X.value.salarie&&X.value.visiteur:((I=u.user)==null?void 0:I.user_type)==="entreprise"?X.value.nom.trim()&&X.value.salarie&&X.value.visiteur:((W=u.user)==null?void 0:W.user_type)==="salarie"?X.value.nom.trim()&&X.value.visiteur:X.value.nom.trim()});ds(()=>X.value.entreprise,async k=>{if(!s.modelValue)return;X.value.salarie=null,X.value.visiteur=null,_.value=[];const I=r(k);console.log("[NewPlanModal] Entreprise sélectionnée:",I),I?await me(I):w.value=[]}),ds(()=>X.value.salarie,async k=>{if(!s.modelValue)return;X.value.visiteur=null;const I=r(k);I?await Le(I):_.value=[]}),ds(()=>s.modelValue,k=>{var I,W,V;k?((I=u.user)==null?void 0:I.user_type)==="admin"?z():((W=u.user)==null?void 0:W.user_type)==="entreprise"?me(u.user.id):((V=u.user)==null?void 0:V.user_type)==="salarie"&&Le(u.user.id):(X.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},T.value=null,j.value=null,_.value=[],w.value=[],P.value=[],y.value=null)});async function me(k){D.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",k);const I=await wl.getUsers({role:"SALARIE",entreprise:k});console.log("[NewPlanModal] Réponse salaries:",I.data),w.value=I.data}catch(I){console.error("[NewPlanModal] Error loading salaries:",I),w.value=[]}finally{D.value=!1}}async function Le(k){U.value=!0;try{const I=await wl.getUsers({role:"VISITEUR",salarie:k});_.value=I.data}catch(I){console.error("[NewPlanModal] Error loading visiteurs:",I),_.value=[]}finally{U.value=!1}}async function H(k){s.modelValue&&(T.value=k,X.value.salarie=k.id,await Le(k.id),o("salarieSelected",k))}function R(k){s.modelValue&&(j.value=k,X.value.visiteur=k.id,o("visiteurSelected",k))}function Z(){o("update:modelValue",!1),X.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},T.value=null,j.value=null,_.value=[],y.value=null}async function z(){K.value=!0;try{const k=await u.fetchEnterprises();P.value=k}catch(k){console.error("[NewPlanModal] Error loading entreprises:",k),P.value=[]}finally{K.value=!1}}async function O(){var k,I;y.value=null,g.value=!0;try{const W={nom:X.value.nom.trim(),description:X.value.description.trim()},V=u.user;if(!V)throw new Error("User not found");if(V.user_type==="admin"){if(!X.value.entreprise||!X.value.salarie||!X.value.visiteur)throw new Error("Missing required fields");W.entreprise=i(r(X.value.entreprise)),W.salarie=i(r(X.value.salarie)),W.visiteur=X.value.visiteur}else if(V.user_type==="entreprise"){if(!X.value.salarie||!X.value.visiteur)throw new Error("Missing required fields");W.entreprise=V.id,W.salarie=i(r(X.value.salarie)),W.visiteur=X.value.visiteur}else if(V.user_type==="salarie"){if(!V.entreprise||!X.value.visiteur)throw new Error("Missing required fields");W.entreprise=V.entreprise.id,W.salarie=V.id,W.visiteur=X.value.visiteur}else if(V.user_type==="visiteur"){if(!V.entreprise||!V.salarie)throw new Error("Missing required fields");W.entreprise=V.entreprise.id,W.salarie=V.salarie.id,W.visiteur=V.id}console.log("Données du plan à créer:",W),h.clearCurrentPlan(),d.setCurrentPlan(null);const G=await h.createPlan(W);o("created",G.id),Z()}catch(W){console.error("[NewPlanModal] Error creating plan:",W),console.error("Response data:",(k=W.response)==null?void 0:k.data);let V="Une erreur est survenue lors de la création du plan";(I=W.response)!=null&&I.data&&(typeof W.response.data=="object"?V=Object.entries(W.response.data).map(([G,ne])=>Array.isArray(ne)?`${G}: ${ne.join(", ")}`:`${G}: ${ne}`).join(`
`):typeof W.response.data=="string"&&(V=W.response.data)),y.value=V}finally{g.value=!1}}return t({salaries:w,visiteurs:_,selectedSalarie:T,selectedVisiteur:j,loadSalaries:me,loadVisiteurs:Le,selectSalarie:H,selectVisiteur:R}),(k,I)=>{var W,V,G,ne;return k.modelValue?($e(),Ge("div",pR,[M("div",mR,[M("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[I[6]||(I[6]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),M("button",{onClick:Z,class:"text-gray-400 hover:text-gray-500"},I[5]||(I[5]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",gR,[qn(u).isAdmin?($e(),Ge("div",vR,[I[9]||(I[9]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),K.value?($e(),Ge("div",yR,I[7]||(I[7]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Hn(($e(),Ge("select",{key:1,"onUpdate:modelValue":I[0]||(I[0]=_e=>X.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[I[8]||(I[8]=M("option",{value:null},"Sélectionnez une entreprise",-1)),($e(!0),Ge(In,null,Sr(P.value,_e=>($e(),Ge("option",{key:_e.id,value:_e.id},Ht(qn(Ul)(_e)),9,_R))),128))],512)),[[Eo,X.value.entreprise]])])):pn("",!0),((W=qn(u).user)==null?void 0:W.user_type)==="admin"||((V=qn(u).user)==null?void 0:V.user_type)==="entreprise"?($e(),Ge("div",bR,[I[11]||(I[11]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),D.value?($e(),Ge("div",wR,I[10]||(I[10]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Hn(($e(),Ge("select",{key:1,id:"edit-salarie","onUpdate:modelValue":I[1]||(I[1]=_e=>X.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:qn(u).isAdmin&&!X.value.entreprise},[M("option",LR,Ht(w.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),($e(!0),Ge(In,null,Sr(w.value,_e=>($e(),Ge("option",{key:_e.id,value:_e.id},Ht(qn(Ul)(_e)),9,SR))),128))],8,xR)),[[Eo,X.value.salarie]])])):pn("",!0),((G=qn(u).user)==null?void 0:G.user_type)!=="visiteur"?($e(),Ge("div",ER,[I[13]||(I[13]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),U.value?($e(),Ge("div",CR,I[12]||(I[12]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Hn(($e(),Ge("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":I[2]||(I[2]=_e=>X.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!_.value.length||((ne=qn(u).user)==null?void 0:ne.user_type)!=="salarie"&&!X.value.salarie},[M("option",AR,Ht(_.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),($e(!0),Ge(In,null,Sr(_.value,_e=>($e(),Ge("option",{key:_e.id,value:_e.id},Ht(qn(Ul)(_e)),9,MR))),128))],8,PR)),[[Eo,X.value.visiteur]])])):pn("",!0),M("div",kR,[I[14]||(I[14]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Hn(M("input",{id:"edit-nom","onUpdate:modelValue":I[3]||(I[3]=_e=>X.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Ur,X.value.nom]])]),M("div",TR,[I[15]||(I[15]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Hn(M("textarea",{id:"edit-description","onUpdate:modelValue":I[4]||(I[4]=_e=>X.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Ur,X.value.description]])]),M("div",BR,[M("button",{onClick:Z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),M("button",{onClick:O,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!se.value||g.value},[g.value?($e(),Ge("span",NR,"Création en cours...")):($e(),Ge("span",DR,"Créer"))],8,OR)])])])])):pn("",!0)}}});function Vi(e){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(e)}var Ia=Uint8Array,Vl=Uint16Array,my=Int32Array,rg=new Ia([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ig=new Ia([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g1=new Ia([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gx=function(e,t){for(var n=new Vl(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new my(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},vx=gx(rg,2),yx=vx.b,v1=vx.r;yx[28]=258,v1[258]=28;var _x=gx(ig,0),IR=_x.b,wb=_x.r,y1=new Vl(32768);for(var ho=0;ho<32768;++ho){var th=(ho&43690)>>1|(ho&21845)<<1;th=(th&52428)>>2|(th&13107)<<2,th=(th&61680)>>4|(th&3855)<<4,y1[ho]=((th&65280)>>8|(th&255)<<8)>>1}var fc=function(e,t,n){for(var r=e.length,i=0,s=new Vl(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new Vl(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(n){u=new Vl(1<<t);var h=15-t;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],g=t-e[i],y=o[e[i]-1]++<<g,w=y|(1<<g)-1;y<=w;++y)u[y1[y]>>h]=d}else for(u=new Vl(r),i=0;i<r;++i)e[i]&&(u[i]=y1[o[e[i]-1]++]>>15-e[i]);return u},wh=new Ia(288);for(var ho=0;ho<144;++ho)wh[ho]=8;for(var ho=144;ho<256;++ho)wh[ho]=9;for(var ho=256;ho<280;++ho)wh[ho]=7;for(var ho=280;ho<288;++ho)wh[ho]=8;var Lp=new Ia(32);for(var ho=0;ho<32;++ho)Lp[ho]=5;var RR=fc(wh,9,0),FR=fc(wh,9,1),jR=fc(Lp,5,0),zR=fc(Lp,5,1),sv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ku=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},av=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},gy=function(e){return(e+7)/8|0},bx=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ia(e.subarray(t,n))},UR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Du=function(e,t,n){var r=new Error(t||UR[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Du),!n)throw r;return r},$R=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Ia(0);var o=!n,u=o||t.i!=2,h=t.i;o&&(n=new Ia(i*3));var d=function(Me){var Ye=n.length;if(Me>Ye){var oe=new Ia(Math.max(Ye*2,Me));oe.set(n),n=oe}},g=t.f||0,y=t.p||0,w=t.b||0,_=t.l,P=t.d,T=t.m,j=t.n,D=i*8;do{if(!_){g=ku(e,y,1);var U=ku(e,y+1,3);if(y+=3,U)if(U==1)_=FR,P=zR,T=9,j=5;else if(U==2){var me=ku(e,y,31)+257,Le=ku(e,y+10,15)+4,H=me+ku(e,y+5,31)+1;y+=14;for(var R=new Ia(H),Z=new Ia(19),z=0;z<Le;++z)Z[g1[z]]=ku(e,y+z*3,7);y+=Le*3;for(var O=sv(Z),k=(1<<O)-1,I=fc(Z,O,1),z=0;z<H;){var W=I[ku(e,y,k)];y+=W&15;var K=W>>4;if(K<16)R[z++]=K;else{var V=0,G=0;for(K==16?(G=3+ku(e,y,3),y+=2,V=R[z-1]):K==17?(G=3+ku(e,y,7),y+=3):K==18&&(G=11+ku(e,y,127),y+=7);G--;)R[z++]=V}}var ne=R.subarray(0,me),_e=R.subarray(me);T=sv(ne),j=sv(_e),_=fc(ne,T,1),P=fc(_e,j,1)}else Du(1);else{var K=gy(y)+4,X=e[K-4]|e[K-3]<<8,se=K+X;if(se>i){h&&Du(0);break}u&&d(w+X),n.set(e.subarray(K,se),w),t.b=w+=X,t.p=y=se*8,t.f=g;continue}if(y>D){h&&Du(0);break}}u&&d(w+131072);for(var ge=(1<<T)-1,Ve=(1<<j)-1,B=y;;B=y){var V=_[av(e,y)&ge],te=V>>4;if(y+=V&15,y>D){h&&Du(0);break}if(V||Du(2),te<256)n[w++]=te;else if(te==256){B=y,_=null;break}else{var ce=te-254;if(te>264){var z=te-257,le=rg[z];ce=ku(e,y,(1<<le)-1)+yx[z],y+=le}var xe=P[av(e,y)&Ve],he=xe>>4;xe||Du(3),y+=xe&15;var _e=IR[he];if(he>3){var le=ig[he];_e+=av(e,y)&(1<<le)-1,y+=le}if(y>D){h&&Du(0);break}u&&d(w+131072);var J=w+ce;if(w<_e){var ae=s-_e,Fe=Math.min(_e,J);for(ae+w<0&&Du(3);w<Fe;++w)n[w]=r[ae+w]}for(;w<J;++w)n[w]=n[w-_e]}}t.l=_,t.p=B,t.b=w,t.f=g,_&&(g=1,t.m=T,t.d=P,t.n=j)}while(!g);return w!=n.length&&o?bx(n,0,w):n.subarray(0,w)},Bc=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},kd=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},lv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:xx,l:0};if(i==1){var o=new Ia(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(se,me){return se.f-me.f}),n.push({s:-1,f:25001});var u=n[0],h=n[1],d=0,g=1,y=2;for(n[0]={s:-1,f:u.f+h.f,l:u,r:h};g!=i-1;)u=n[n[d].f<n[y].f?d++:y++],h=n[d!=g&&n[d].f<n[y].f?d++:y++],n[g++]={s:-1,f:u.f+h.f,l:u,r:h};for(var w=s[0].s,r=1;r<i;++r)s[r].s>w&&(w=s[r].s);var _=new Vl(w+1),P=_1(n[g-1],_,0);if(P>t){var r=0,T=0,j=P-t,D=1<<j;for(s.sort(function(me,Le){return _[Le.s]-_[me.s]||me.f-Le.f});r<i;++r){var U=s[r].s;if(_[U]>t)T+=D-(1<<P-_[U]),_[U]=t;else break}for(T>>=j;T>0;){var K=s[r].s;_[K]<t?T-=1<<t-_[K]++-1:++r}for(;r>=0&&T;--r){var X=s[r].s;_[X]==t&&(--_[X],++T)}P=t}return{t:new Ia(_),l:P}},_1=function(e,t,n){return e.s==-1?Math.max(_1(e.l,t,n+1),_1(e.r,t,n+1)):t[e.s]=n},xb=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Vl(++t),r=0,i=e[0],s=1,o=function(h){n[r++]=h},u=1;u<=t;++u)if(e[u]==i&&u!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:n.subarray(0,r),n:t}},Td=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},wx=function(e,t,n){var r=n.length,i=gy(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},Lb=function(e,t,n,r,i,s,o,u,h,d,g){Bc(t,g++,n),++i[256];for(var y=lv(i,15),w=y.t,_=y.l,P=lv(s,15),T=P.t,j=P.l,D=xb(w),U=D.c,K=D.n,X=xb(T),se=X.c,me=X.n,Le=new Vl(19),H=0;H<U.length;++H)++Le[U[H]&31];for(var H=0;H<se.length;++H)++Le[se[H]&31];for(var R=lv(Le,7),Z=R.t,z=R.l,O=19;O>4&&!Z[g1[O-1]];--O);var k=d+5<<3,I=Td(i,wh)+Td(s,Lp)+o,W=Td(i,w)+Td(s,T)+o+14+3*O+Td(Le,Z)+2*Le[16]+3*Le[17]+7*Le[18];if(h>=0&&k<=I&&k<=W)return wx(t,g,e.subarray(h,h+d));var V,G,ne,_e;if(Bc(t,g,1+(W<I)),g+=2,W<I){V=fc(w,_,0),G=w,ne=fc(T,j,0),_e=T;var ge=fc(Z,z,0);Bc(t,g,K-257),Bc(t,g+5,me-1),Bc(t,g+10,O-4),g+=14;for(var H=0;H<O;++H)Bc(t,g+3*H,Z[g1[H]]);g+=3*O;for(var Ve=[U,se],B=0;B<2;++B)for(var te=Ve[B],H=0;H<te.length;++H){var ce=te[H]&31;Bc(t,g,ge[ce]),g+=Z[ce],ce>15&&(Bc(t,g,te[H]>>5&127),g+=te[H]>>12)}}else V=RR,G=wh,ne=jR,_e=Lp;for(var H=0;H<u;++H){var le=r[H];if(le>255){var ce=le>>18&31;kd(t,g,V[ce+257]),g+=G[ce+257],ce>7&&(Bc(t,g,le>>23&31),g+=rg[ce]);var xe=le&31;kd(t,g,ne[xe]),g+=_e[xe],xe>3&&(kd(t,g,le>>5&8191),g+=ig[xe])}else kd(t,g,V[le]),g+=G[le]}return kd(t,g,V[256]),g+G[256]},VR=new my([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xx=new Ia(0),HR=function(e,t,n,r,i,s){var o=s.z||e.length,u=new Ia(r+o+5*(1+Math.ceil(o/7e3))+i),h=u.subarray(r,u.length-i),d=s.l,g=(s.r||0)&7;if(t){g&&(h[0]=s.r>>3);for(var y=VR[t-1],w=y>>13,_=y&8191,P=(1<<n)-1,T=s.p||new Vl(32768),j=s.h||new Vl(P+1),D=Math.ceil(n/3),U=2*D,K=function(fe){return(e[fe]^e[fe+1]<<D^e[fe+2]<<U)&P},X=new my(25e3),se=new Vl(288),me=new Vl(32),Le=0,H=0,R=s.i||0,Z=0,z=s.w||0,O=0;R+2<o;++R){var k=K(R),I=R&32767,W=j[k];if(T[I]=W,j[k]=I,z<=R){var V=o-R;if((Le>7e3||Z>24576)&&(V>423||!d)){g=Lb(e,h,0,X,se,me,H,Z,O,R-O,g),Z=Le=H=0,O=R;for(var G=0;G<286;++G)se[G]=0;for(var G=0;G<30;++G)me[G]=0}var ne=2,_e=0,ge=_,Ve=I-W&32767;if(V>2&&k==K(R-Ve))for(var B=Math.min(w,V)-1,te=Math.min(32767,R),ce=Math.min(258,V);Ve<=te&&--ge&&I!=W;){if(e[R+ne]==e[R+ne-Ve]){for(var le=0;le<ce&&e[R+le]==e[R+le-Ve];++le);if(le>ne){if(ne=le,_e=Ve,le>B)break;for(var xe=Math.min(Ve,le-2),he=0,G=0;G<xe;++G){var J=R-Ve+G&32767,ae=T[J],Fe=J-ae&32767;Fe>he&&(he=Fe,W=J)}}}I=W,W=T[I],Ve+=I-W&32767}if(_e){X[Z++]=268435456|v1[ne]<<18|wb[_e];var Me=v1[ne]&31,Ye=wb[_e]&31;H+=rg[Me]+ig[Ye],++se[257+Me],++me[Ye],z=R+ne,++Le}else X[Z++]=e[R],++se[e[R]]}}for(R=Math.max(R,z);R<o;++R)X[Z++]=e[R],++se[e[R]];g=Lb(e,h,d,X,se,me,H,Z,O,R-O,g),d||(s.r=g&7|h[g/8|0]<<3,g-=7,s.h=j,s.p=T,s.i=R,s.w=z)}else{for(var R=s.w||0;R<o+d;R+=65535){var oe=R+65535;oe>=o&&(h[g/8|0]=d,oe=o),g=wx(h,g+1,e.subarray(R,oe))}s.i=o}return bx(u,0,r+gy(g)+i)},Lx=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},GR=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Ia(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return HR(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},Sx=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},qR=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Lx();i.p(t.dictionary),Sx(e,2,i.d())}},WR=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Du(6,"invalid zlib data"),(e[1]>>5&1)==1&&Du(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function b1(e,t){t||(t={});var n=Lx();n.p(e);var r=GR(e,t,t.dictionary?6:2,4);return qR(r,t),Sx(r,r.length-4,n.d()),r}function ZR(e,t){return $R(e.subarray(WR(e),-4),{i:2},t,t)}var KR=typeof TextDecoder<"u"&&new TextDecoder,YR=0;try{KR.decode(xx,{stream:!0}),YR=1}catch{}var Lr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uv(){Lr.console&&typeof Lr.console.log=="function"&&Lr.console.log.apply(Lr.console,arguments)}var Qi={log:uv,warn:function(e){Lr.console&&(typeof Lr.console.warn=="function"?Lr.console.warn.apply(Lr.console,arguments):uv.call(null,arguments))},error:function(e){Lr.console&&(typeof Lr.console.error=="function"?Lr.console.error.apply(Lr.console,arguments):uv(e))}};function cv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Uh(r.response,t,n)},r.onerror=function(){Qi.error("could not download file")},r.send()}function Sb(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function v0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rp,w1,Uh=Lr.saveAs||((typeof window>"u"?"undefined":Vi(window))!=="object"||window!==Lr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Lr.URL||Lr.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Sb(i.href)?cv(e,t,n):v0(i,i.target="_blank"):v0(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){v0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Sb(e))cv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){v0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Vi(s)!=="object"&&(Qi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return cv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(Lr.HTMLElement)||Lr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Vi(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=o?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(e)}else{var h=Lr.URL||Lr.webkitURL,d=h.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Ex(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),d.length==1&&(d="0"+d),"#"+u+h+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hv(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=Pa(n,r,i,s,t[0],7,-680876936),s=Pa(s,n,r,i,t[1],12,-389564586),i=Pa(i,s,n,r,t[2],17,606105819),r=Pa(r,i,s,n,t[3],22,-1044525330),n=Pa(n,r,i,s,t[4],7,-176418897),s=Pa(s,n,r,i,t[5],12,1200080426),i=Pa(i,s,n,r,t[6],17,-1473231341),r=Pa(r,i,s,n,t[7],22,-45705983),n=Pa(n,r,i,s,t[8],7,1770035416),s=Pa(s,n,r,i,t[9],12,-1958414417),i=Pa(i,s,n,r,t[10],17,-42063),r=Pa(r,i,s,n,t[11],22,-1990404162),n=Pa(n,r,i,s,t[12],7,1804603682),s=Pa(s,n,r,i,t[13],12,-40341101),i=Pa(i,s,n,r,t[14],17,-1502002290),n=Aa(n,r=Pa(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Aa(s,n,r,i,t[6],9,-1069501632),i=Aa(i,s,n,r,t[11],14,643717713),r=Aa(r,i,s,n,t[0],20,-373897302),n=Aa(n,r,i,s,t[5],5,-701558691),s=Aa(s,n,r,i,t[10],9,38016083),i=Aa(i,s,n,r,t[15],14,-660478335),r=Aa(r,i,s,n,t[4],20,-405537848),n=Aa(n,r,i,s,t[9],5,568446438),s=Aa(s,n,r,i,t[14],9,-1019803690),i=Aa(i,s,n,r,t[3],14,-187363961),r=Aa(r,i,s,n,t[8],20,1163531501),n=Aa(n,r,i,s,t[13],5,-1444681467),s=Aa(s,n,r,i,t[2],9,-51403784),i=Aa(i,s,n,r,t[7],14,1735328473),n=Ma(n,r=Aa(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Ma(s,n,r,i,t[8],11,-2022574463),i=Ma(i,s,n,r,t[11],16,1839030562),r=Ma(r,i,s,n,t[14],23,-35309556),n=Ma(n,r,i,s,t[1],4,-1530992060),s=Ma(s,n,r,i,t[4],11,1272893353),i=Ma(i,s,n,r,t[7],16,-155497632),r=Ma(r,i,s,n,t[10],23,-1094730640),n=Ma(n,r,i,s,t[13],4,681279174),s=Ma(s,n,r,i,t[0],11,-358537222),i=Ma(i,s,n,r,t[3],16,-722521979),r=Ma(r,i,s,n,t[6],23,76029189),n=Ma(n,r,i,s,t[9],4,-640364487),s=Ma(s,n,r,i,t[12],11,-421815835),i=Ma(i,s,n,r,t[15],16,530742520),n=ka(n,r=Ma(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ka(s,n,r,i,t[7],10,1126891415),i=ka(i,s,n,r,t[14],15,-1416354905),r=ka(r,i,s,n,t[5],21,-57434055),n=ka(n,r,i,s,t[12],6,1700485571),s=ka(s,n,r,i,t[3],10,-1894986606),i=ka(i,s,n,r,t[10],15,-1051523),r=ka(r,i,s,n,t[1],21,-2054922799),n=ka(n,r,i,s,t[8],6,1873313359),s=ka(s,n,r,i,t[15],10,-30611744),i=ka(i,s,n,r,t[6],15,-1560198380),r=ka(r,i,s,n,t[13],21,1309151649),n=ka(n,r,i,s,t[4],6,-145523070),s=ka(s,n,r,i,t[11],10,-1120210379),i=ka(i,s,n,r,t[2],15,718787259),r=ka(r,i,s,n,t[9],21,-343485551),e[0]=dh(n,e[0]),e[1]=dh(r,e[1]),e[2]=dh(i,e[2]),e[3]=dh(s,e[3])}function og(e,t,n,r,i,s){return t=dh(dh(t,e),dh(r,s)),dh(t<<i|t>>>32-i,n)}function Pa(e,t,n,r,i,s,o){return og(t&n|~t&r,e,t,i,s,o)}function Aa(e,t,n,r,i,s,o){return og(t&r|n&~r,e,t,i,s,o)}function Ma(e,t,n,r,i,s,o){return og(t^n^r,e,t,i,s,o)}function ka(e,t,n,r,i,s,o){return og(n^(t|~r),e,t,i,s,o)}function Cx(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)hv(r,XR(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(hv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,hv(r,i),r}function XR(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}rp=Lr.atob.bind(Lr),w1=Lr.btoa.bind(Lr);var Eb="0123456789abcdef".split("");function JR(e){for(var t="",n=0;n<4;n++)t+=Eb[e>>8*n+4&15]+Eb[e>>8*n&15];return t}function QR(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function x1(e){return Cx(e).map(QR).join("")}var eF=function(e){for(var t=0;t<e.length;t++)e[t]=JR(e[t]);return e.join("")}(Cx("hello"))!="5d41402abc4b2a76b9719d911017c592";function dh(e,t){if(eF){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L1(e,t){var n,r,i,s;if(e!==n){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var d=0;for(h=0;h<256;h++){var g=u[h];d=(d+g+o.charCodeAt(h))%256,u[h]=u[d],u[d]=g}n=e,r=u}else u=r;var y=t.length,w=0,_=0,P="";for(h=0;h<y;h++)_=(_+(g=u[w=(w+1)%256]))%256,u[w]=u[_],u[_]=g,o=u[(u[w]+u[_])%256],P+=String.fromCharCode(t.charCodeAt(h)^o);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Cb={print:4,modify:8,copy:16,"annot-forms":32};function Rf(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Cb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Cb[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=x1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=L1(this.encryptionKey,this.padding)}function Ff(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function Pb(e){if(Vi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var o=t[n][s];try{o[0].apply(e,r)}catch(u){Lr.console&&Qi.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _m(e){if(!(this instanceof _m))return new _m(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Px(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vh(e,t,n,r,i){if(!(this instanceof Vh))return new Vh(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Px.call(this,r,i)}function Uf(e,t,n,r,i){if(!(this instanceof Uf))return new Uf(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Px.call(this,r,i)}function _r(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,h=16,d="S",g=null;Vi(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(h=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,w={},_={internal:{},__private__:{}};_.__private__.PubSub=Pb;var P="1.3",T=_.__private__.getPdfVersion=function(){return P};_.__private__.setPdfVersion=function(N){P=N};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return j};var D=_.__private__.getPageFormat=function(N){return j[N]};i=i||"a4";var U={COMPAT:"compat",ADVANCED:"advanced"},K=U.COMPAT;function X(){this.saveGraphicsState(),de(new vn(nt,0,0,-nt,0,va()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),d="n",K=U.ADVANCED}function se(){this.restoreGraphicsState(),d="S",K=U.COMPAT}var me=_.__private__.combineFontStyleAndFontWeight=function(N,ve){if(N=="bold"&&ve=="normal"||N=="bold"&&ve==400||N=="normal"&&ve=="italic"||N=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&(N=ve==400||ve==="normal"?N==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||N!=="normal"?(ve==700?"bold":ve)+""+N:"bold"),N};_.advancedAPI=function(N){var ve=K===U.COMPAT;return ve&&X.call(this),typeof N!="function"||(N(this),ve&&se.call(this)),this},_.compatAPI=function(N){var ve=K===U.ADVANCED;return ve&&se.call(this),typeof N!="function"||(N(this),ve&&X.call(this)),this},_.isAdvancedAPI=function(){return K===U.ADVANCED};var Le,H=function(N){if(K!==U.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=_.roundToPrecision=_.__private__.roundToPrecision=function(N,ve){var qe=t||ve;if(isNaN(N)||isNaN(qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(qe).replace(/0+$/,"")};Le=_.hpf=_.__private__.hpf=typeof h=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return R(N,h)}:h==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return R(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return R(N,16)};var Z=_.f2=_.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return R(N,2)},z=_.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return R(N,3)},O=_.scale=_.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return K===U.COMPAT?N*nt:K===U.ADVANCED?N:void 0},k=function(N){return K===U.COMPAT?va()-N:K===U.ADVANCED?N:void 0},I=function(N){return O(k(N))};_.__private__.setPrecision=_.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(t=parseInt(N,10))};var W,V="00000000000000000000000000000000",G=_.__private__.getFileId=function(){return V},ne=_.__private__.setFileId=function(N){return V=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Ui=new Rf(g.userPermissions,g.userPassword,g.ownerPassword,V)),V};_.setFileId=function(N){return ne(N),this},_.getFileId=function(){return G()};var _e=_.__private__.convertDateToPDFDate=function(N){var ve=N.getTimezoneOffset(),qe=ve<0?"+":"-",ct=Math.floor(Math.abs(ve/60)),wt=Math.abs(ve%60),Rt=[qe,ce(ct),"'",ce(wt),"'"].join("");return["D:",N.getFullYear(),ce(N.getMonth()+1),ce(N.getDate()),ce(N.getHours()),ce(N.getMinutes()),ce(N.getSeconds()),Rt].join("")},ge=_.__private__.convertPDFDateToDate=function(N){var ve=parseInt(N.substr(2,4),10),qe=parseInt(N.substr(6,2),10)-1,ct=parseInt(N.substr(8,2),10),wt=parseInt(N.substr(10,2),10),Rt=parseInt(N.substr(12,2),10),cn=parseInt(N.substr(14,2),10);return new Date(ve,qe,ct,wt,Rt,cn,0)},Ve=_.__private__.setCreationDate=function(N){var ve;if(N===void 0&&(N=new Date),N instanceof Date)ve=_e(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=N}return W=ve},B=_.__private__.getCreationDate=function(N){var ve=W;return N==="jsDate"&&(ve=ge(W)),ve};_.setCreationDate=function(N){return Ve(N),this},_.getCreationDate=function(N){return B(N)};var te,ce=_.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},le=_.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},xe=0,he=[],J=[],ae=0,Fe=[],Me=[],Ye=!1,oe=J,fe=function(){xe=0,ae=0,J=[],he=[],Fe=[],Co=bn(),Fi=bn()};_.__private__.setCustomOutputDestination=function(N){Ye=!0,oe=N};var be=function(N){Ye||(oe=N)};_.__private__.resetCustomOutputDestination=function(){Ye=!1,oe=J};var de=_.__private__.out=function(N){return N=N.toString(),ae+=N.length+1,oe.push(N),oe},Ue=_.__private__.write=function(N){return de(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},Xe=_.__private__.getArrayBuffer=function(N){for(var ve=N.length,qe=new ArrayBuffer(ve),ct=new Uint8Array(qe);ve--;)ct[ve]=N.charCodeAt(ve);return qe},ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return ze};var Je=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(N){return Je=K===U.ADVANCED?N/nt:N,this};var Qe,it=_.__private__.getFontSize=_.getFontSize=function(){return K===U.COMPAT?Je:Je*nt},Mt=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(N){return Mt=N,this},_.__private__.getR2L=_.getR2L=function(){return Mt};var xt,Nt=_.__private__.setZoomMode=function(N){var ve=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Qe=N;else if(isNaN(N)){if(ve.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Qe=N}else Qe=parseInt(N,10)};_.__private__.getZoomMode=function(){return Qe};var Kt,hn=_.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');xt=N};_.__private__.getPageMode=function(){return xt};var mn=_.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Kt=N};_.__private__.getLayoutMode=function(){return Kt},_.__private__.setDisplayMode=_.setDisplayMode=function(N,ve,qe){return Nt(N),mn(ve),hn(qe),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(N){if(Object.keys(et).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[N]},_.__private__.getDocumentProperties=function(){return et},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(N){for(var ve in et)et.hasOwnProperty(ve)&&N[ve]&&(et[ve]=N[ve]);return this},_.__private__.setDocumentProperty=function(N,ve){if(Object.keys(et).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[N]=ve};var ot,nt,$t,en,kn,Ln={},Tn={},or=[],wn={},Rn={},lt={},We={},qt=null,_n=0,Dn=[],Cn=new Pb(_),Xt=e.hotfixes||[],Gn={},Ut={},Jt=[],vn=function N(ve,qe,ct,wt,Rt,cn){if(!(this instanceof N))return new N(ve,qe,ct,wt,Rt,cn);isNaN(ve)&&(ve=1),isNaN(qe)&&(qe=0),isNaN(ct)&&(ct=0),isNaN(wt)&&(wt=1),isNaN(Rt)&&(Rt=0),isNaN(cn)&&(cn=0),this._matrix=[ve,qe,ct,wt,Rt,cn]};Object.defineProperty(vn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(vn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(vn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(vn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(vn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(vn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(vn.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(vn.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(vn.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(vn.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(vn.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(vn.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(vn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vn.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Le).join(N)},vn.prototype.multiply=function(N){var ve=N.sx*this.sx+N.shy*this.shx,qe=N.sx*this.shy+N.shy*this.sy,ct=N.shx*this.sx+N.sy*this.shx,wt=N.shx*this.shy+N.sy*this.sy,Rt=N.tx*this.sx+N.ty*this.shx+this.tx,cn=N.tx*this.shy+N.ty*this.sy+this.ty;return new vn(ve,qe,ct,wt,Rt,cn)},vn.prototype.decompose=function(){var N=this.sx,ve=this.shy,qe=this.shx,ct=this.sy,wt=this.tx,Rt=this.ty,cn=Math.sqrt(N*N+ve*ve),Bn=(N/=cn)*qe+(ve/=cn)*ct;qe-=N*Bn,ct-=ve*Bn;var Fn=Math.sqrt(qe*qe+ct*ct);return Bn/=Fn,N*(ct/=Fn)<ve*(qe/=Fn)&&(N=-N,ve=-ve,Bn=-Bn,cn=-cn),{scale:new vn(cn,0,0,Fn,0,0),translate:new vn(1,0,0,1,wt,Rt),rotate:new vn(N,ve,-ve,N,0,0),skew:new vn(1,0,Bn,1,0,0)}},vn.prototype.toString=function(N){return this.join(" ")},vn.prototype.inversed=function(){var N=this.sx,ve=this.shy,qe=this.shx,ct=this.sy,wt=this.tx,Rt=this.ty,cn=1/(N*ct-ve*qe),Bn=ct*cn,Fn=-ve*cn,er=-qe*cn,fr=N*cn;return new vn(Bn,Fn,er,fr,-Bn*wt-er*Rt,-Fn*wt-fr*Rt)},vn.prototype.applyToPoint=function(N){var ve=N.x*this.sx+N.y*this.shx+this.tx,qe=N.x*this.shy+N.y*this.sy+this.ty;return new mo(ve,qe)},vn.prototype.applyToRectangle=function(N){var ve=this.applyToPoint(N),qe=this.applyToPoint(new mo(N.x+N.w,N.y+N.h));return new zs(ve.x,ve.y,qe.x-ve.x,qe.y-ve.y)},vn.prototype.clone=function(){var N=this.sx,ve=this.shy,qe=this.shx,ct=this.sy,wt=this.tx,Rt=this.ty;return new vn(N,ve,qe,ct,wt,Rt)},_.Matrix=vn;var ci=_.matrixMult=function(N,ve){return ve.multiply(N)},Sn=new vn(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Sn;var dr=function(N,ve){if(!Rn[N]){var qe=(ve instanceof Vh?"Sh":"P")+(Object.keys(wn).length+1).toString(10);ve.id=qe,Rn[N]=qe,wn[qe]=ve,Cn.publish("addPattern",ve)}};_.ShadingPattern=Vh,_.TilingPattern=Uf,_.addShadingPattern=function(N,ve){return H("addShadingPattern()"),dr(N,ve),this},_.beginTilingPattern=function(N){H("beginTilingPattern()"),Us(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},_.endTilingPattern=function(N,ve){H("endTilingPattern()"),ve.stream=Me[te].join(`
`),dr(N,ve),Cn.publish("endTilingPattern",ve),Jt.pop().restore()};var lr=_.__private__.newObject=function(){var N=bn();return yi(N,!0),N},bn=_.__private__.newObjectDeferred=function(){return xe++,he[xe]=function(){return ae},xe},yi=function(N,ve){return ve=typeof ve=="boolean"&&ve,he[N]=ae,ve&&de(N+" 0 obj"),N},Es=_.__private__.newAdditionalObject=function(){var N={objId:bn(),content:""};return Fe.push(N),N},Co=bn(),Fi=bn(),Er=_.__private__.decodeColorString=function(N){var ve=N.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length===5&&(ve[4]==="k"||ve[4]==="K")&&(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var qe=parseFloat(ve[0]);ve=[qe,qe,qe,"r"]}for(var ct="#",wt=0;wt<3;wt++)ct+=("0"+Math.floor(255*parseFloat(ve[wt])).toString(16)).slice(-2);return ct},_i=_.__private__.encodeColorString=function(N){var ve;typeof N=="string"&&(N={ch1:N});var qe=N.ch1,ct=N.ch2,wt=N.ch3,Rt=N.ch4,cn=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof qe=="string"&&qe.charAt(0)!=="#"){var Bn=new Ex(qe);if(Bn.ok)qe=Bn.toHex();else if(!/^\d*\.?\d*$/.test(qe))throw new Error('Invalid color "'+qe+'" passed to jsPDF.encodeColorString.')}if(typeof qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(qe)&&(qe="#"+qe[1]+qe[1]+qe[2]+qe[2]+qe[3]+qe[3]),typeof qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(qe)){var Fn=parseInt(qe.substr(1),16);qe=Fn>>16&255,ct=Fn>>8&255,wt=255&Fn}if(ct===void 0||Rt===void 0&&qe===ct&&ct===wt)if(typeof qe=="string")ve=qe+" "+cn[0];else switch(N.precision){case 2:ve=Z(qe/255)+" "+cn[0];break;case 3:default:ve=z(qe/255)+" "+cn[0]}else if(Rt===void 0||Vi(Rt)==="object"){if(Rt&&!isNaN(Rt.a)&&Rt.a===0)return ve=["1.","1.","1.",cn[1]].join(" ");if(typeof qe=="string")ve=[qe,ct,wt,cn[1]].join(" ");else switch(N.precision){case 2:ve=[Z(qe/255),Z(ct/255),Z(wt/255),cn[1]].join(" ");break;default:case 3:ve=[z(qe/255),z(ct/255),z(wt/255),cn[1]].join(" ")}}else if(typeof qe=="string")ve=[qe,ct,wt,Rt,cn[2]].join(" ");else switch(N.precision){case 2:ve=[Z(qe),Z(ct),Z(wt),Z(Rt),cn[2]].join(" ");break;case 3:default:ve=[z(qe),z(ct),z(wt),z(Rt),cn[2]].join(" ")}return ve},sr=_.__private__.getFilters=function(){return o},rn=_.__private__.putStream=function(N){var ve=(N=N||{}).data||"",qe=N.filters||sr(),ct=N.alreadyAppliedFilters||[],wt=N.addLength1||!1,Rt=ve.length,cn=N.objectId,Bn=function(Yi){return Yi};if(g!==null&&cn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Bn=Ui.encryptor(cn,0));var Fn={};qe===!0&&(qe=["FlateEncode"]);var er=N.additionalKeyValues||[],fr=(Fn=_r.API.processDataByFilters!==void 0?_r.API.processDataByFilters(ve,qe):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(ct)?ct.join(" "):ct.toString());if(Fn.data.length!==0&&(er.push({key:"Length",value:Fn.data.length}),wt===!0&&er.push({key:"Length1",value:Rt})),fr.length!=0)if(fr.split("/").length-1==1)er.push({key:"Filter",value:fr});else{er.push({key:"Filter",value:"["+fr+"]"});for(var kr=0;kr<er.length;kr+=1)if(er[kr].key==="DecodeParms"){for(var Pi=[],Yr=0;Yr<Fn.reverseChain.split("/").length-1;Yr+=1)Pi.push("null");Pi.push(er[kr].value),er[kr].value="["+Pi.join(" ")+"]"}}de("<<");for(var ii=0;ii<er.length;ii++)de("/"+er[ii].key+" "+er[ii].value);de(">>"),Fn.data.length!==0&&(de("stream"),de(Bn(Fn.data)),de("endstream"))},Uo=_.__private__.putPage=function(N){var ve=N.number,qe=N.data,ct=N.objId,wt=N.contentsObjId;yi(ct,!0),de("<</Type /Page"),de("/Parent "+N.rootDictionaryObjId+" 0 R"),de("/Resources "+N.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(Le(N.mediaBox.bottomLeftX))+" "+parseFloat(Le(N.mediaBox.bottomLeftY))+" "+Le(N.mediaBox.topRightX)+" "+Le(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&de("/CropBox ["+Le(N.cropBox.bottomLeftX)+" "+Le(N.cropBox.bottomLeftY)+" "+Le(N.cropBox.topRightX)+" "+Le(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&de("/BleedBox ["+Le(N.bleedBox.bottomLeftX)+" "+Le(N.bleedBox.bottomLeftY)+" "+Le(N.bleedBox.topRightX)+" "+Le(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&de("/TrimBox ["+Le(N.trimBox.bottomLeftX)+" "+Le(N.trimBox.bottomLeftY)+" "+Le(N.trimBox.topRightX)+" "+Le(N.trimBox.topRightY)+"]"),N.artBox!==null&&de("/ArtBox ["+Le(N.artBox.bottomLeftX)+" "+Le(N.artBox.bottomLeftY)+" "+Le(N.artBox.topRightX)+" "+Le(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&de("/UserUnit "+N.userUnit),Cn.publish("putPage",{objId:ct,pageContext:Dn[ve],pageNumber:ve,page:qe}),de("/Contents "+wt+" 0 R"),de(">>"),de("endobj");var Rt=qe.join(`
`);return K===U.ADVANCED&&(Rt+=`
Q`),yi(wt,!0),rn({data:Rt,filters:sr(),objectId:wt}),de("endobj"),ct},to=_.__private__.putPages=function(){var N,ve,qe=[];for(N=1;N<=_n;N++)Dn[N].objId=bn(),Dn[N].contentsObjId=bn();for(N=1;N<=_n;N++)qe.push(Uo({number:N,data:Me[N],objId:Dn[N].objId,contentsObjId:Dn[N].contentsObjId,mediaBox:Dn[N].mediaBox,cropBox:Dn[N].cropBox,bleedBox:Dn[N].bleedBox,trimBox:Dn[N].trimBox,artBox:Dn[N].artBox,userUnit:Dn[N].userUnit,rootDictionaryObjId:Co,resourceDictionaryObjId:Fi}));yi(Co,!0),de("<</Type /Pages");var ct="/Kids [";for(ve=0;ve<_n;ve++)ct+=qe[ve]+" 0 R ";de(ct+"]"),de("/Count "+_n),de(">>"),de("endobj"),Cn.publish("postPutPages")},fo=function(N){Cn.publish("putFont",{font:N,out:de,newObject:lr,putStream:rn}),N.isAlreadyPutted!==!0&&(N.objectNumber=lr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Ff(N.postScriptName)),de("/Subtype /Type1"),typeof N.encoding=="string"&&de("/Encoding /"+N.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},qi=function(){for(var N in Ln)Ln.hasOwnProperty(N)&&(y===!1||y===!0&&w.hasOwnProperty(N))&&fo(Ln[N])},ms=function(N){N.objectNumber=lr();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[Le(N.x),Le(N.y),Le(N.x+N.width),Le(N.y+N.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var qe=N.pages[1].join(`
`);rn({data:qe,additionalKeyValues:ve,objectId:N.objectNumber}),de("endobj")},Qo=function(){for(var N in Gn)Gn.hasOwnProperty(N)&&ms(Gn[N])},Cr=function(N,ve){var qe,ct=[],wt=1/(ve-1);for(qe=0;qe<1;qe+=wt)ct.push(qe);if(ct.push(1),N[0].offset!=0){var Rt={offset:0,color:N[0].color};N.unshift(Rt)}if(N[N.length-1].offset!=1){var cn={offset:1,color:N[N.length-1].color};N.push(cn)}for(var Bn="",Fn=0,er=0;er<ct.length;er++){for(qe=ct[er];qe>N[Fn+1].offset;)Fn++;var fr=N[Fn].offset,kr=(qe-fr)/(N[Fn+1].offset-fr),Pi=N[Fn].color,Yr=N[Fn+1].color;Bn+=le(Math.round((1-kr)*Pi[0]+kr*Yr[0]).toString(16))+le(Math.round((1-kr)*Pi[1]+kr*Yr[1]).toString(16))+le(Math.round((1-kr)*Pi[2]+kr*Yr[2]).toString(16))}return Bn.trim()},Cs=function(N,ve){ve||(ve=21);var qe=lr(),ct=Cr(N.colors,ve),wt=[];wt.push({key:"FunctionType",value:"0"}),wt.push({key:"Domain",value:"[0.0 1.0]"}),wt.push({key:"Size",value:"["+ve+"]"}),wt.push({key:"BitsPerSample",value:"8"}),wt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rn({data:ct,additionalKeyValues:wt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:qe}),de("endobj"),N.objectNumber=lr(),de("<< /ShadingType "+N.type),de("/ColorSpace /DeviceRGB");var Rt="/Coords ["+Le(parseFloat(N.coords[0]))+" "+Le(parseFloat(N.coords[1]))+" ";N.type===2?Rt+=Le(parseFloat(N.coords[2]))+" "+Le(parseFloat(N.coords[3])):Rt+=Le(parseFloat(N.coords[2]))+" "+Le(parseFloat(N.coords[3]))+" "+Le(parseFloat(N.coords[4]))+" "+Le(parseFloat(N.coords[5])),de(Rt+="]"),N.matrix&&de("/Matrix ["+N.matrix.toString()+"]"),de("/Function "+qe+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},qu=function(N,ve){var qe=bn(),ct=lr();ve.push({resourcesOid:qe,objectOid:ct}),N.objectNumber=ct;var wt=[];wt.push({key:"Type",value:"/Pattern"}),wt.push({key:"PatternType",value:"1"}),wt.push({key:"PaintType",value:"1"}),wt.push({key:"TilingType",value:"1"}),wt.push({key:"BBox",value:"["+N.boundingBox.map(Le).join(" ")+"]"}),wt.push({key:"XStep",value:Le(N.xStep)}),wt.push({key:"YStep",value:Le(N.yStep)}),wt.push({key:"Resources",value:qe+" 0 R"}),N.matrix&&wt.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),rn({data:N.stream,additionalKeyValues:wt,objectId:N.objectNumber}),de("endobj")},Is=function(N){var ve;for(ve in wn)wn.hasOwnProperty(ve)&&(wn[ve]instanceof Vh?Cs(wn[ve]):wn[ve]instanceof Uf&&qu(wn[ve],N))},ei=function(N){for(var ve in N.objectNumber=lr(),de("<<"),N)switch(ve){case"opacity":de("/ca "+Z(N[ve]));break;case"stroke-opacity":de("/CA "+Z(N[ve]))}de(">>"),de("endobj")},Un=function(){var N;for(N in lt)lt.hasOwnProperty(N)&&ei(lt[N])},Hi=function(){for(var N in de("/XObject <<"),Gn)Gn.hasOwnProperty(N)&&Gn[N].objectNumber>=0&&de("/"+N+" "+Gn[N].objectNumber+" 0 R");Cn.publish("putXobjectDict"),de(">>")},hi=function(){Ui.oid=lr(),de("<<"),de("/Filter /Standard"),de("/V "+Ui.v),de("/R "+Ui.r),de("/U <"+Ui.toHexString(Ui.U)+">"),de("/O <"+Ui.toHexString(Ui.O)+">"),de("/P "+Ui.P),de(">>"),de("endobj")},ji=function(){for(var N in de("/Font <<"),Ln)Ln.hasOwnProperty(N)&&(y===!1||y===!0&&w.hasOwnProperty(N))&&de("/"+N+" "+Ln[N].objectNumber+" 0 R");de(">>")},no=function(){if(Object.keys(wn).length>0){for(var N in de("/Shading <<"),wn)wn.hasOwnProperty(N)&&wn[N]instanceof Vh&&wn[N].objectNumber>=0&&de("/"+N+" "+wn[N].objectNumber+" 0 R");Cn.publish("putShadingPatternDict"),de(">>")}},zi=function(N){if(Object.keys(wn).length>0){for(var ve in de("/Pattern <<"),wn)wn.hasOwnProperty(ve)&&wn[ve]instanceof _.TilingPattern&&wn[ve].objectNumber>=0&&wn[ve].objectNumber<N&&de("/"+ve+" "+wn[ve].objectNumber+" 0 R");Cn.publish("putTilingPatternDict"),de(">>")}},wr=function(){if(Object.keys(lt).length>0){var N;for(N in de("/ExtGState <<"),lt)lt.hasOwnProperty(N)&&lt[N].objectNumber>=0&&de("/"+N+" "+lt[N].objectNumber+" 0 R");Cn.publish("putGStateDict"),de(">>")}},Pn=function(N){yi(N.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ji(),no(),zi(N.objectOid),wr(),Hi(),de(">>"),de("endobj")},gs=function(){var N=[];qi(),Un(),Qo(),Is(N),Cn.publish("putResources"),N.forEach(Pn),Pn({resourcesOid:Fi,objectOid:Number.MAX_SAFE_INTEGER}),Cn.publish("postPutResources")},bi=function(){Cn.publish("putAdditionalObjects");for(var N=0;N<Fe.length;N++){var ve=Fe[N];yi(ve.objId,!0),de(ve.content),de("endobj")}Cn.publish("postPutAdditionalObjects")},Di=function(N){Tn[N.fontName]=Tn[N.fontName]||{},Tn[N.fontName][N.fontStyle]=N.id},Hr=function(N,ve,qe,ct,wt){var Rt={id:"F"+(Object.keys(Ln).length+1).toString(10),postScriptName:N,fontName:ve,fontStyle:qe,encoding:ct,isStandardFont:wt||!1,metadata:{}};return Cn.publish("addFont",{font:Rt,instance:this}),Ln[Rt.id]=Rt,Di(Rt),Rt.id},Qt=function(N){for(var ve=0,qe=ze.length;ve<qe;ve++){var ct=Hr.call(this,N[ve][0],N[ve][1],N[ve][2],ze[ve][3],!0);y===!1&&(w[ct]=!0);var wt=N[ve][0].split("-");Di({id:ct,fontName:wt[0],fontStyle:wt[1]||""})}Cn.publish("addFonts",{fonts:Ln,dictionary:Tn})},Gt=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(ct){var ve=ct.stack||"";~ve.indexOf(" at ")&&(ve=ve.split(" at ")[1]);var qe="Error in function "+ve.split(`
`)[0].split("<")[0]+": "+ct.message;if(!Lr.console)throw new Error(qe);Lr.console.error(qe,ct),Lr.alert&&alert(qe)}},N.foo.bar=N,N.foo},Ar=function(N,ve){var qe,ct,wt,Rt,cn,Bn,Fn,er,fr;if(wt=(ve=ve||{}).sourceEncoding||"Unicode",cn=ve.outputEncoding,(ve.autoencode||cn)&&Ln[ot].metadata&&Ln[ot].metadata[wt]&&Ln[ot].metadata[wt].encoding&&(Rt=Ln[ot].metadata[wt].encoding,!cn&&Ln[ot].encoding&&(cn=Ln[ot].encoding),!cn&&Rt.codePages&&(cn=Rt.codePages[0]),typeof cn=="string"&&(cn=Rt[cn]),cn)){for(Fn=!1,Bn=[],qe=0,ct=N.length;qe<ct;qe++)(er=cn[N.charCodeAt(qe)])?Bn.push(String.fromCharCode(er)):Bn.push(N[qe]),Bn[qe].charCodeAt(0)>>8&&(Fn=!0);N=Bn.join("")}for(qe=N.length;Fn===void 0&&qe!==0;)N.charCodeAt(qe-1)>>8&&(Fn=!0),qe--;if(!Fn)return N;for(Bn=ve.noBOM?[]:[254,255],qe=0,ct=N.length;qe<ct;qe++){if((fr=(er=N.charCodeAt(qe))>>8)>>8)throw new Error("Character at position "+qe+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bn.push(fr),Bn.push(er-(fr<<8))}return String.fromCharCode.apply(void 0,Bn)},fi=_.__private__.pdfEscape=_.pdfEscape=function(N,ve){return Ar(N,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Si=_.__private__.beginPage=function(N){Me[++_n]=[],Dn[_n]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},Po(_n),be(Me[te])},Ys=function(N,ve){var qe,ct,wt;switch(n=ve||n,typeof N=="string"&&(qe=D(N.toLowerCase()),Array.isArray(qe)&&(ct=qe[0],wt=qe[1])),Array.isArray(N)&&(ct=N[0]*nt,wt=N[1]*nt),isNaN(ct)&&(ct=i[0],wt=i[1]),(ct>14400||wt>14400)&&(Qi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ct=Math.min(14400,ct),wt=Math.min(14400,wt)),i=[ct,wt],n.substr(0,1)){case"l":wt>ct&&(i=[wt,ct]);break;case"p":ct>wt&&(i=[wt,ct])}Si(i),Al(Zl),de(Ai),Tl!==0&&de(Tl+" J"),ni!==0&&de(ni+" j"),Cn.publish("addPage",{pageNumber:_n})},Xs=function(N){N>0&&N<=_n&&(Me.splice(N,1),Dn.splice(N,1),_n--,te>_n&&(te=_n),this.setPage(te))},Po=function(N){N>0&&N<=_n&&(te=N)},Ei=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Me.length-1},Mr=function(N,ve,qe){var ct,wt=void 0;return qe=qe||{},N=N!==void 0?N:Ln[ot].fontName,ve=ve!==void 0?ve:Ln[ot].fontStyle,ct=N.toLowerCase(),Tn[ct]!==void 0&&Tn[ct][ve]!==void 0?wt=Tn[ct][ve]:Tn[N]!==void 0&&Tn[N][ve]!==void 0?wt=Tn[N][ve]:qe.disableWarning===!1&&Qi.warn("Unable to look up font label for font '"+N+"', '"+ve+"'. Refer to getFontList() for available fonts."),wt||qe.noFallback||(wt=Tn.times[ve])==null&&(wt=Tn.times.normal),wt},Ps=_.__private__.putInfo=function(){var N=lr(),ve=function(ct){return ct};for(var qe in g!==null&&(ve=Ui.encryptor(N,0)),de("<<"),de("/Producer ("+fi(ve("jsPDF "+_r.version))+")"),et)et.hasOwnProperty(qe)&&et[qe]&&de("/"+qe.substr(0,1).toUpperCase()+qe.substr(1)+" ("+fi(ve(et[qe]))+")");de("/CreationDate ("+fi(ve(W))+")"),de(">>"),de("endobj")},Ci=_.__private__.putCatalog=function(N){var ve=(N=N||{}).rootDictionaryObjId||Co;switch(lr(),de("<<"),de("/Type /Catalog"),de("/Pages "+ve+" 0 R"),Qe||(Qe="fullwidth"),Qe){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var qe=""+Qe;qe.substr(qe.length-1)==="%"&&(Qe=parseInt(Qe)/100),typeof Qe=="number"&&de("/OpenAction [3 0 R /XYZ null null "+Z(Qe)+"]")}switch(Kt||(Kt="continuous"),Kt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}xt&&de("/PageMode /"+xt),Cn.publish("putCatalog"),de(">>"),de("endobj")},es=_.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(xe+1)),de("/Root "+xe+" 0 R"),de("/Info "+(xe-1)+" 0 R"),g!==null&&de("/Encrypt "+Ui.oid+" 0 R"),de("/ID [ <"+V+"> <"+V+"> ]"),de(">>")},po=_.__private__.putHeader=function(){de("%PDF-"+P),de("%ºß¬à")},nl=_.__private__.putXRef=function(){var N="0000000000";de("xref"),de("0 "+(xe+1)),de("0000000000 65535 f ");for(var ve=1;ve<=xe;ve++)typeof he[ve]=="function"?de((N+he[ve]()).slice(-10)+" 00000 n "):he[ve]!==void 0?de((N+he[ve]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},ts=_.__private__.buildDocument=function(){fe(),be(J),Cn.publish("buildDocument"),po(),to(),bi(),gs(),g!==null&&hi(),Ps(),Ci();var N=ae;return nl(),es(),de("startxref"),de(""+N),de("%%EOF"),be(Me[te]),J.join(`
`)},Rs=_.__private__.getBlob=function(N){return new Blob([Xe(N)],{type:"application/pdf"})},As=_.output=_.__private__.output=Gt(function(N,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",N){case void 0:return ts();case"save":_.save(ve.filename);break;case"arraybuffer":return Xe(ts());case"blob":return Rs(ts());case"bloburi":case"bloburl":if(Lr.URL!==void 0&&typeof Lr.URL.createObjectURL=="function")return Lr.URL&&Lr.URL.createObjectURL(Rs(ts()))||void 0;Qi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var qe="",ct=ts();try{qe=w1(ct)}catch{qe=w1(unescape(encodeURIComponent(ct)))}return"data:application/pdf;filename="+ve.filename+";base64,"+qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var wt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Rt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(wt=ve.pdfObjectUrl,Rt="");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+wt+'"'+Rt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",Bn=Lr.open();return Bn!==null&&Bn.document.write(cn),Bn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',er=Lr.open();if(er!==null){er.document.write(Fn);var fr=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=ve.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(fr.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',Pi=Lr.open();if(Pi!==null&&(Pi.document.write(kr),Pi.document.title=ve.filename),Pi||typeof safari>"u")return Pi;break;case"datauri":case"dataurl":return Lr.document.location.href=this.output("datauristring",ve);default:return null}}),Js=function(N){return Array.isArray(Xt)===!0&&Xt.indexOf(N)>-1};switch(r){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=Js("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);nt=r}var Ui=null;Ve(),ne();var Wl=function(N){return g!==null?Ui.encryptor(N,0):function(ve){return ve}},ti=_.__private__.getPageInfo=_.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dn[N].objId,pageNumber:N,pageContext:Dn[N]}},nr=_.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in Dn)if(Dn[ve].objId===N)break;return ti(ve)},Qn=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:Dn[te].objId,pageNumber:te,pageContext:Dn[te]}};_.addPage=function(){return Ys.apply(this,arguments),this},_.setPage=function(){return Po.apply(this,arguments),be.call(this,Me[te]),this},_.insertPage=function(N){return this.addPage(),this.movePage(te,N),this},_.movePage=function(N,ve){var qe,ct;if(N>ve){qe=Me[N],ct=Dn[N];for(var wt=N;wt>ve;wt--)Me[wt]=Me[wt-1],Dn[wt]=Dn[wt-1];Me[ve]=qe,Dn[ve]=ct,this.setPage(ve)}else if(N<ve){qe=Me[N],ct=Dn[N];for(var Rt=N;Rt<ve;Rt++)Me[Rt]=Me[Rt+1],Dn[Rt]=Dn[Rt+1];Me[ve]=qe,Dn[ve]=ct,this.setPage(ve)}return this},_.deletePage=function(){return Xs.apply(this,arguments),this},_.__private__.text=_.text=function(N,ve,qe,ct,wt){var Rt,cn,Bn,Fn,er,fr,kr,Pi,Yr,ii=(ct=ct||{}).scope||this;if(typeof N=="number"&&typeof ve=="number"&&(typeof qe=="string"||Array.isArray(qe))){var Yi=qe;qe=ve,ve=N,N=Yi}if(arguments[3]instanceof vn?(H("The transform parameter of text() with a Matrix value"),Yr=wt):(Bn=arguments[4],Fn=arguments[5],Vi(kr=arguments[3])==="object"&&kr!==null||(typeof Bn=="string"&&(Fn=Bn,Bn=null),typeof kr=="string"&&(Fn=kr,kr=null),typeof kr=="number"&&(Bn=kr,kr=null),ct={flags:kr,angle:Bn,align:Fn})),isNaN(ve)||isNaN(qe)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return ii;var ro="",ys=!1,Tr=typeof ct.lineHeightFactor=="number"?ct.lineHeightFactor:Pl,Ao=ii.internal.scaleFactor;function ul(si){return si=si.split("	").join(Array(ct.TabLen||9).join(" ")),fi(si,kr)}function $o(si){for(var di,Xi=si.concat(),xi=[],ws=Xi.length;ws--;)typeof(di=Xi.shift())=="string"?xi.push(di):Array.isArray(si)&&(di.length===1||di[1]===void 0&&di[2]===void 0)?xi.push(di[0]):xi.push([di[0],di[1],di[2]]);return xi}function Xl(si,di){var Xi;if(typeof si=="string")Xi=di(si)[0];else if(Array.isArray(si)){for(var xi,ws,rs=si.concat(),ks=[],bu=rs.length;bu--;)typeof(xi=rs.shift())=="string"?ks.push(di(xi)[0]):Array.isArray(xi)&&typeof xi[0]=="string"&&(ws=di(xi[0],xi[1],xi[2]),ks.push([ws[0],ws[1],ws[2]]));Xi=ks}return Xi}var ea=!1,_u=!0;if(typeof N=="string")ea=!0;else if(Array.isArray(N)){var $a=N.concat();cn=[];for(var Va,io=$a.length;io--;)(typeof(Va=$a.shift())!="string"||Array.isArray(Va)&&typeof Va[0]!="string")&&(_u=!1);ea=_u}if(ea===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var ta=Je/ii.internal.scaleFactor,_s=ta*(Tr-1);switch(ct.baseline){case"bottom":qe-=_s;break;case"top":qe+=ta-_s;break;case"hanging":qe+=ta-2*_s;break;case"middle":qe+=ta/2-_s}if((fr=ct.maxWidth||0)>0&&(typeof N=="string"?N=ii.splitTextToSize(N,fr):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(si,di){return si.concat(ii.splitTextToSize(di,fr))},[]))),Rt={text:N,x:ve,y:qe,options:ct,mutex:{pdfEscape:fi,activeFontKey:ot,fonts:Ln,activeFontSize:Je}},Cn.publish("preProcessText",Rt),N=Rt.text,Bn=(ct=Rt.options).angle,!(Yr instanceof vn)&&Bn&&typeof Bn=="number"){Bn*=Math.PI/180,ct.rotationDirection===0&&(Bn=-Bn),K===U.ADVANCED&&(Bn=-Bn);var ns=Math.cos(Bn),cl=Math.sin(Bn);Yr=new vn(ns,cl,-cl,ns,0,0)}else Bn&&Bn instanceof vn&&(Yr=Bn);K!==U.ADVANCED||Yr||(Yr=Sn),(er=ct.charSpace||kl)!==void 0&&(ro+=Le(O(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pi=ct.horizontalScale)!==void 0&&(ro+=Le(100*Pi)+` Tz
`),ct.lang;var Mo=-1,Vo=ct.renderingMode!==void 0?ct.renderingMode:ct.stroke,Ho=ii.internal.getCurrentPageInfo().pageContext;switch(Vo){case 0:case!1:case"fill":Mo=0;break;case 1:case!0:case"stroke":Mo=1;break;case 2:case"fillThenStroke":Mo=2;break;case 3:case"invisible":Mo=3;break;case 4:case"fillAndAddForClipping":Mo=4;break;case 5:case"strokeAndAddPathForClipping":Mo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Mo=6;break;case 7:case"addToPathForClipping":Mo=7}var Ku=Ho.usedRenderingMode!==void 0?Ho.usedRenderingMode:-1;Mo!==-1?ro+=Mo+` Tr
`:Ku!==-1&&(ro+=`0 Tr
`),Mo!==-1&&(Ho.usedRenderingMode=Mo),Fn=ct.align||"left";var co,ya=Je*Tr,ko=ii.internal.pageSize.getWidth(),To=Ln[ot];er=ct.charSpace||kl,fr=ct.maxWidth||0,kr=Object.assign({autoencode:!0,noBOM:!0},ct.flags);var _a=[],ba=function(si){return ii.getStringUnitWidth(si,{font:To,charSpace:er,fontSize:Je,doKerning:!1})*Je/Ao};if(Object.prototype.toString.call(N)==="[object Array]"){var Bo;cn=$o(N),Fn!=="left"&&(co=cn.map(ba));var go,na=0;if(Fn==="right"){ve-=co[0],N=[],io=cn.length;for(var bs=0;bs<io;bs++)bs===0?(go=rr(ve),Bo=Zi(qe)):(go=O(na-co[bs]),Bo=-ya),N.push([cn[bs],go,Bo]),na=co[bs]}else if(Fn==="center"){ve-=co[0]/2,N=[],io=cn.length;for(var Oo=0;Oo<io;Oo++)Oo===0?(go=rr(ve),Bo=Zi(qe)):(go=O((na-co[Oo])/2),Bo=-ya),N.push([cn[Oo],go,Bo]),na=co[Oo]}else if(Fn==="left"){N=[],io=cn.length;for(var yt=0;yt<io;yt++)N.push(cn[yt])}else if(Fn==="justify"&&To.encoding==="Identity-H"){N=[],io=cn.length,fr=fr!==0?fr:ko;for(var Vt=0,Pt=0;Pt<io;Pt++)if(Bo=Pt===0?Zi(qe):-ya,go=Pt===0?rr(ve):Vt,Pt<io-1){var An=O((fr-co[Pt])/(cn[Pt].split(" ").length-1)),Wn=cn[Pt].split(" ");N.push([Wn[0]+" ",go,Bo]),Vt=0;for(var pr=1;pr<Wn.length;pr++){var Mi=(ba(Wn[pr-1]+" "+Wn[pr])-ba(Wn[pr]))*Ao+An;pr==Wn.length-1?N.push([Wn[pr],Mi,0]):N.push([Wn[pr]+" ",Mi,0]),Vt-=Mi}}else N.push([cn[Pt],go,Bo]);N.push(["",Vt,0])}else{if(Fn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],io=cn.length,fr=fr!==0?fr:ko,Pt=0;Pt<io;Pt++)Bo=Pt===0?Zi(qe):-ya,go=Pt===0?rr(ve):0,Pt<io-1?_a.push(Le(O((fr-co[Pt])/(cn[Pt].split(" ").length-1)))):_a.push(0),N.push([cn[Pt],go,Bo])}}var oi=typeof ct.R2L=="boolean"?ct.R2L:Mt;oi===!0&&(N=Xl(N,function(si,di,Xi){return[si.split("").reverse().join(""),di,Xi]})),Rt={text:N,x:ve,y:qe,options:ct,mutex:{pdfEscape:fi,activeFontKey:ot,fonts:Ln,activeFontSize:Je}},Cn.publish("postProcessText",Rt),N=Rt.text,ys=Rt.mutex.isHex||!1;var Ol=Ln[ot].encoding;Ol!=="WinAnsiEncoding"&&Ol!=="StandardEncoding"||(N=Xl(N,function(si,di,Xi){return[ul(si),di,Xi]})),cn=$o(N),N=[];for(var Go,ki,ra,wa=0,ia=1,oa=Array.isArray(cn[0])?ia:wa,sa="",Rr=function(si,di,Xi){var xi="";return Xi instanceof vn?(Xi=typeof ct.angle=="number"?ci(Xi,new vn(1,0,0,1,si,di)):ci(new vn(1,0,0,1,si,di),Xi),K===U.ADVANCED&&(Xi=ci(new vn(1,0,0,-1,0,0),Xi)),xi=Xi.join(" ")+` Tm
`):xi=Le(si)+" "+Le(di)+` Td
`,xi},$s=0;$s<cn.length;$s++){switch(sa="",oa){case ia:ra=(ys?"<":"(")+cn[$s][0]+(ys?">":")"),Go=parseFloat(cn[$s][1]),ki=parseFloat(cn[$s][2]);break;case wa:ra=(ys?"<":"(")+cn[$s]+(ys?">":")"),Go=rr(ve),ki=Zi(qe)}_a!==void 0&&_a[$s]!==void 0&&(sa=_a[$s]+` Tw
`),$s===0?N.push(sa+Rr(Go,ki,Yr)+ra):oa===wa?N.push(sa+ra):oa===ia&&N.push(sa+Rr(Go,ki,Yr)+ra)}N=oa===wa?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var vo=`BT
/`;return vo+=ot+" "+Je+` Tf
`,vo+=Le(Je*Tr)+` TL
`,vo+=Qs+`
`,vo+=ro,vo+=N,de(vo+="ET"),w[ot]=!0,ii};var Fs=_.__private__.clip=_.clip=function(N){return de(N==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Fs("evenodd")},_.__private__.discardPath=_.discardPath=function(){return de("n"),this};var Gr=_.__private__.isValidStyle=function(N){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(ve=!0),ve};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(N){return Gr(N)&&(d=N),this};var vu=_.__private__.getStyle=_.getStyle=function(N){var ve=d;switch(N){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=N}return ve},rl=_.close=function(){return de("h"),this};_.stroke=function(){return de("S"),this},_.fill=function(N){return il("f",N),this},_.fillEvenOdd=function(N){return il("f*",N),this},_.fillStroke=function(N){return il("B",N),this},_.fillStrokeEvenOdd=function(N){return il("B*",N),this};var il=function(N,ve){Vi(ve)==="object"?yu(ve,N):de(N)},js=function(N){N===null||K===U.ADVANCED&&N===void 0||(N=vu(N),de(N))};function za(N,ve,qe,ct,wt){var Rt=new Uf(ve||this.boundingBox,qe||this.xStep,ct||this.yStep,this.gState,wt||this.matrix);Rt.stream=this.stream;var cn=N+"$$"+this.cloneIndex+++"$$";return dr(cn,Rt),Rt}var yu=function(N,ve){var qe=Rn[N.key],ct=wn[qe];if(ct instanceof Vh)de("q"),de(Cl(ve)),ct.gState&&_.setGState(ct.gState),de(N.matrix.toString()+" cm"),de("/"+qe+" sh"),de("Q");else if(ct instanceof Uf){var wt=new vn(1,0,0,-1,0,va());N.matrix&&(wt=wt.multiply(N.matrix||Sn),qe=za.call(ct,N.key,N.boundingBox,N.xStep,N.yStep,wt).id),de("q"),de("/Pattern cs"),de("/"+qe+" scn"),ct.gState&&_.setGState(ct.gState),de(ve),de("Q")}},Cl=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mr=_.moveTo=function(N,ve){return de(Le(O(N))+" "+Le(I(ve))+" m"),this},Or=_.lineTo=function(N,ve){return de(Le(O(N))+" "+Le(I(ve))+" l"),this},Ua=_.curveTo=function(N,ve,qe,ct,wt,Rt){return de([Le(O(N)),Le(I(ve)),Le(O(qe)),Le(I(ct)),Le(O(wt)),Le(I(Rt)),"c"].join(" ")),this};_.__private__.line=_.line=function(N,ve,qe,ct,wt){if(isNaN(N)||isNaN(ve)||isNaN(qe)||isNaN(ct)||!Gr(wt))throw new Error("Invalid arguments passed to jsPDF.line");return K===U.COMPAT?this.lines([[qe-N,ct-ve]],N,ve,[1,1],wt||"S"):this.lines([[qe-N,ct-ve]],N,ve,[1,1]).stroke()},_.__private__.lines=_.lines=function(N,ve,qe,ct,wt,Rt){var cn,Bn,Fn,er,fr,kr,Pi,Yr,ii,Yi,ro,ys;if(typeof N=="number"&&(ys=qe,qe=ve,ve=N,N=ys),ct=ct||[1,1],Rt=Rt||!1,isNaN(ve)||isNaN(qe)||!Array.isArray(N)||!Array.isArray(ct)||!Gr(wt)||typeof Rt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mr(ve,qe),cn=ct[0],Bn=ct[1],er=N.length,Yi=ve,ro=qe,Fn=0;Fn<er;Fn++)(fr=N[Fn]).length===2?(Yi=fr[0]*cn+Yi,ro=fr[1]*Bn+ro,Or(Yi,ro)):(kr=fr[0]*cn+Yi,Pi=fr[1]*Bn+ro,Yr=fr[2]*cn+Yi,ii=fr[3]*Bn+ro,Yi=fr[4]*cn+Yi,ro=fr[5]*Bn+ro,Ua(kr,Pi,Yr,ii,Yi,ro));return Rt&&rl(),js(wt),this},_.path=function(N){for(var ve=0;ve<N.length;ve++){var qe=N[ve],ct=qe.c;switch(qe.op){case"m":mr(ct[0],ct[1]);break;case"l":Or(ct[0],ct[1]);break;case"c":Ua.apply(this,ct);break;case"h":rl()}}return this},_.__private__.rect=_.rect=function(N,ve,qe,ct,wt){if(isNaN(N)||isNaN(ve)||isNaN(qe)||isNaN(ct)||!Gr(wt))throw new Error("Invalid arguments passed to jsPDF.rect");return K===U.COMPAT&&(ct=-ct),de([Le(O(N)),Le(I(ve)),Le(O(qe)),Le(O(ct)),"re"].join(" ")),js(wt),this},_.__private__.triangle=_.triangle=function(N,ve,qe,ct,wt,Rt,cn){if(isNaN(N)||isNaN(ve)||isNaN(qe)||isNaN(ct)||isNaN(wt)||isNaN(Rt)||!Gr(cn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[qe-N,ct-ve],[wt-qe,Rt-ct],[N-wt,ve-Rt]],N,ve,[1,1],cn,!0),this},_.__private__.roundedRect=_.roundedRect=function(N,ve,qe,ct,wt,Rt,cn){if(isNaN(N)||isNaN(ve)||isNaN(qe)||isNaN(ct)||isNaN(wt)||isNaN(Rt)||!Gr(cn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Bn=4/3*(Math.SQRT2-1);return wt=Math.min(wt,.5*qe),Rt=Math.min(Rt,.5*ct),this.lines([[qe-2*wt,0],[wt*Bn,0,wt,Rt-Rt*Bn,wt,Rt],[0,ct-2*Rt],[0,Rt*Bn,-wt*Bn,Rt,-wt,Rt],[2*wt-qe,0],[-wt*Bn,0,-wt,-Rt*Bn,-wt,-Rt],[0,2*Rt-ct],[0,-Rt*Bn,wt*Bn,-Rt,wt,-Rt]],N+wt,ve,[1,1],cn,!0),this},_.__private__.ellipse=_.ellipse=function(N,ve,qe,ct,wt){if(isNaN(N)||isNaN(ve)||isNaN(qe)||isNaN(ct)||!Gr(wt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Rt=4/3*(Math.SQRT2-1)*qe,cn=4/3*(Math.SQRT2-1)*ct;return mr(N+qe,ve),Ua(N+qe,ve-cn,N+Rt,ve-ct,N,ve-ct),Ua(N-Rt,ve-ct,N-qe,ve-cn,N-qe,ve),Ua(N-qe,ve+cn,N-Rt,ve+ct,N,ve+ct),Ua(N+Rt,ve+ct,N+qe,ve+cn,N+qe,ve),js(wt),this},_.__private__.circle=_.circle=function(N,ve,qe,ct){if(isNaN(N)||isNaN(ve)||isNaN(qe)||!Gr(ct))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,ve,qe,qe,ct)},_.setFont=function(N,ve,qe){return qe&&(ve=me(ve,qe)),ot=Mr(N,ve,{disableWarning:!1}),this};var Wu=_.__private__.getFont=_.getFont=function(){return Ln[Mr.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var N,ve,qe={};for(N in Tn)if(Tn.hasOwnProperty(N))for(ve in qe[N]=[],Tn[N])Tn[N].hasOwnProperty(ve)&&qe[N].push(ve);return qe},_.addFont=function(N,ve,qe,ct,wt){var Rt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Rt.indexOf(arguments[3])!==-1?wt=arguments[3]:arguments[3]&&Rt.indexOf(arguments[3])==-1&&(qe=me(qe,ct)),wt=wt||"Identity-H",Hr.call(this,N,ve,qe,wt)};var Pl,Zl=e.lineWidth||.200025,ol=_.__private__.getLineWidth=_.getLineWidth=function(){return Zl},Al=_.__private__.setLineWidth=_.setLineWidth=function(N){return Zl=N,de(Le(O(N))+" w"),this};_.__private__.setLineDash=_r.API.setLineDash=_r.API.setLineDashPattern=function(N,ve){if(N=N||[],ve=ve||0,isNaN(ve)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(qe){return Le(O(qe))}).join(" "),ve=Le(O(ve)),de("["+N+"] "+ve+" d"),this};var Kl=_.__private__.getLineHeight=_.getLineHeight=function(){return Je*Pl};_.__private__.getLineHeight=_.getLineHeight=function(){return Je*Pl};var Ir=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(Pl=N),this},Wi=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return Pl};Ir(e.lineHeight);var rr=_.__private__.getHorizontalCoordinate=function(N){return O(N)},Zi=_.__private__.getVerticalCoordinate=function(N){return K===U.ADVANCED?N:Dn[te].mediaBox.topRightY-Dn[te].mediaBox.bottomLeftY-O(N)},sl=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(N){return Le(rr(N))},ga=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(N){return Le(Zi(N))},Ai=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return Er(Ai)},_.__private__.setStrokeColor=_.setDrawColor=function(N,ve,qe,ct){return Ai=_i({ch1:N,ch2:ve,ch3:qe,ch4:ct,pdfColorType:"draw",precision:2}),de(Ai),this};var Yl=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return Er(Yl)},_.__private__.setFillColor=_.setFillColor=function(N,ve,qe,ct){return Yl=_i({ch1:N,ch2:ve,ch3:qe,ch4:ct,pdfColorType:"fill",precision:2}),de(Yl),this};var Qs=e.textColor||"0 g",Ml=_.__private__.getTextColor=_.getTextColor=function(){return Er(Qs)};_.__private__.setTextColor=_.setTextColor=function(N,ve,qe,ct){return Qs=_i({ch1:N,ch2:ve,ch3:qe,ch4:ct,pdfColorType:"text",precision:3}),this};var kl=e.charSpace,Ms=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(kl||0)};_.__private__.setCharSpace=_.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return kl=N,this};var Tl=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(N){var ve=_.CapJoinStyles[N];if(ve===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tl=ve,de(ve+" J"),this};var ni=0;_.__private__.setLineJoin=_.setLineJoin=function(N){var ve=_.CapJoinStyles[N];if(ve===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ni=ve,de(ve+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(Le(O(N))+" M"),this},_.GState=_m,_.setGState=function(N){(N=typeof N=="string"?lt[We[N]]:Zu(null,N)).equals(qt)||(de("/"+N.id+" gs"),qt=N)};var Zu=function(N,ve){if(!N||!We[N]){var qe=!1;for(var ct in lt)if(lt.hasOwnProperty(ct)&&lt[ct].equals(ve)){qe=!0;break}if(qe)ve=lt[ct];else{var wt="GS"+(Object.keys(lt).length+1).toString(10);lt[wt]=ve,ve.id=wt}return N&&(We[N]=ve.id),Cn.publish("addGState",ve),ve}};_.addGState=function(N,ve){return Zu(N,ve),this},_.saveGraphicsState=function(){return de("q"),or.push({key:ot,size:Je,color:Qs}),this},_.restoreGraphicsState=function(){de("Q");var N=or.pop();return ot=N.key,Je=N.size,Qs=N.color,qt=null,this},_.setCurrentTransformationMatrix=function(N){return de(N.toString()+" cm"),this},_.comment=function(N){return de("#"+N),this};var mo=function(N,ve){var qe=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return qe},set:function(Rt){isNaN(Rt)||(qe=parseFloat(Rt))}});var ct=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ct},set:function(Rt){isNaN(Rt)||(ct=parseFloat(Rt))}});var wt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return wt},set:function(Rt){wt=Rt.toString()}}),this},zs=function(N,ve,qe,ct){mo.call(this,N,ve),this.type="rect";var wt=qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return wt},set:function(cn){isNaN(cn)||(wt=parseFloat(cn))}});var Rt=ct||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Rt},set:function(cn){isNaN(cn)||(Rt=parseFloat(cn))}}),this},Bl=function(){this.page=_n,this.currentPage=te,this.pages=Me.slice(0),this.pagesContext=Dn.slice(0),this.x=$t,this.y=en,this.matrix=kn,this.width=ri(te),this.height=va(te),this.outputDestination=oe,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){_n=this.page,te=this.currentPage,Dn=this.pagesContext,Me=this.pages,$t=this.x,en=this.y,kn=this.matrix,vs(te,this.width),Ki(te,this.height),oe=this.outputDestination};var Us=function(N,ve,qe,ct,wt){Jt.push(new Bl),_n=te=0,Me=[],$t=N,en=ve,kn=wt,Si([qe,ct])},al=function(N){if(Ut[N])Jt.pop().restore();else{var ve=new Bl,qe="Xo"+(Object.keys(Gn).length+1).toString(10);ve.id=qe,Ut[N]=qe,Gn[qe]=ve,Cn.publish("addFormObject",ve),Jt.pop().restore()}};for(var ll in _.beginFormObject=function(N,ve,qe,ct,wt){return Us(N,ve,qe,ct,wt),this},_.endFormObject=function(N){return al(N),this},_.doFormObject=function(N,ve){var qe=Gn[Ut[N]];return de("q"),de(ve.toString()+" cm"),de("/"+qe.id+" Do"),de("Q"),this},_.getFormObject=function(N){var ve=Gn[Ut[N]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},_.save=function(N,ve){return N=N||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?(Uh(Rs(ts()),N),typeof Uh.unload=="function"&&Lr.setTimeout&&setTimeout(Uh.unload,911),this):new Promise(function(qe,ct){try{var wt=Uh(Rs(ts()),N);typeof Uh.unload=="function"&&Lr.setTimeout&&setTimeout(Uh.unload,911),qe(wt)}catch(Rt){ct(Rt.message)}})},_r.API)_r.API.hasOwnProperty(ll)&&(ll==="events"&&_r.API.events.length?function(N,ve){var qe,ct,wt;for(wt=ve.length-1;wt!==-1;wt--)qe=ve[wt][0],ct=ve[wt][1],N.subscribe.apply(N,[qe].concat(typeof ct=="function"?[ct]:ct))}(Cn,_r.API.events):_[ll]=_r.API[ll]);var ri=_.getPageWidth=function(N){return(Dn[N=N||te].mediaBox.topRightX-Dn[N].mediaBox.bottomLeftX)/nt},vs=_.setPageWidth=function(N,ve){Dn[N].mediaBox.topRightX=ve*nt+Dn[N].mediaBox.bottomLeftX},va=_.getPageHeight=function(N){return(Dn[N=N||te].mediaBox.topRightY-Dn[N].mediaBox.bottomLeftY)/nt},Ki=_.setPageHeight=function(N,ve){Dn[N].mediaBox.topRightY=ve*nt+Dn[N].mediaBox.bottomLeftY};return _.internal={pdfEscape:fi,getStyle:vu,getFont:Wu,getFontSize:it,getCharSpace:Ms,getTextColor:Ml,getLineHeight:Kl,getLineHeightFactor:Wi,getLineWidth:ol,write:Ue,getHorizontalCoordinate:rr,getVerticalCoordinate:Zi,getCoordinateString:sl,getVerticalCoordinateString:ga,collections:{},newObject:lr,newAdditionalObject:Es,newObjectDeferred:bn,newObjectDeferredBegin:yi,getFilters:sr,putStream:rn,events:Cn,scaleFactor:nt,pageSize:{getWidth:function(){return ri(te)},setWidth:function(N){vs(te,N)},getHeight:function(){return va(te)},setHeight:function(N){Ki(te,N)}},encryptionOptions:g,encryption:Ui,getEncryptor:Wl,output:As,getNumberOfPages:Ei,pages:Me,out:de,f2:Z,f3:z,getPageInfo:ti,getPageInfoByObjId:nr,getCurrentPageInfo:Qn,getPDFVersion:T,Point:mo,Rectangle:zs,Matrix:vn,hasHotfix:Js},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return ri(te)},set:function(N){vs(te,N)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return va(te)},set:function(N){Ki(te,N)},enumerable:!0,configurable:!0}),Qt.call(_,ze),ot="F1",Ys(i,n),Cn.publish("initialized"),_}Rf.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Rf.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rf.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Rf.prototype.processOwnerPassword=function(e,t){return L1(x1(t).substr(0,5),e)},Rf.prototype.encryptor=function(e,t){var n=x1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return L1(n,r)}},_m.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Vi(e)!==Vi(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},_r.API={events:[]},_r.version="2.5.2";var Yo=_r.API,vy=1,af=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Af=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dr=function(e){return e.toFixed(2)},nh=function(e){return e.toFixed(5)};Yo.__acroform__={};var El=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ab=function(e){return e*vy},ic=function(e){var t=new Mx,n=Zn.internal.getHeight(e)||0,r=Zn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Dr(r)),Number(Dr(n))],t},tF=Yo.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},nF=Yo.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},rF=Yo.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},cs=Yo.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rF(e,t-1)},hs=Yo.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tF(e,t-1)},fs=Yo.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nF(e,t-1)},iF=Yo.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],h={};return h.lowerLeft_X=n(i)||0,h.lowerLeft_Y=r(s+u)||0,h.upperRight_X=n(i+o)||0,h.upperRight_Y=r(s)||0,[Number(Dr(h.lowerLeft_X)),Number(Dr(h.lowerLeft_Y)),Number(Dr(h.upperRight_X)),Number(Dr(h.upperRight_Y))]},oF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=S1(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Dr(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ic(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},S1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(z){return z.split(`
`)}):i.map(function(z){return[z]});var s=n,o=Zn.internal.getHeight(e)||0;o=o<0?-o:o;var u=Zn.internal.getWidth(e)||0;u=u<0?-u:u;var h=function(z,O,k){if(z+1<i.length){var I=O+" "+i[z+1][0];return y0(I,e,k).width<=u-4}return!1};s++;e:for(;s>0;){t="",s--;var d,g,y=y0("3",e,s).height,w=e.multiline?o-s:(o-y)/2,_=w+=2,P=0,T=0,j=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+y0(t,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var D="",U=0,K=0;K<i.length;K++)if(i.hasOwnProperty(K)){var X=!1;if(i[K].length!==1&&j!==i[K].length-1){if((y+2)*(U+2)+2>o)continue e;D+=i[K][j],X=!0,T=K,K--}else{D=(D+=i[K][j]+" ").substr(D.length-1)==" "?D.substr(0,D.length-1):D;var se=parseInt(K),me=h(se,D,s),Le=K>=i.length-1;if(me&&!Le){D+=" ",j=0;continue}if(me||Le){if(Le)T=se;else if(e.multiline&&(y+2)*(U+2)+2>o)continue e}else{if(!e.multiline||(y+2)*(U+2)+2>o)continue e;T=se}}for(var H="",R=P;R<=T;R++){var Z=i[R];if(e.multiline){if(R===T){H+=Z[j]+" ",j=(j+1)%Z.length;continue}if(R===P){H+=Z[Z.length-1]+" ";continue}}H+=Z[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,g=y0(H,e,s).width,e.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;case"left":default:d=2}t+=Dr(d)+" "+Dr(_)+` Td
`,t+="("+af(H)+`) Tj
`,t+=-Dr(d)+` 0 Td
`,_=-(s+2),g=0,P=X?T:T+1,U++,D=""}break}return r.text=t,r.fontSize=s,r},y0=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},sF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aF=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},lF=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Vi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},uF=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Hu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(sF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new kx,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&aF(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],h=[],d=u.Rect;if(u.Rect&&(u.Rect=iF(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Zn.createDefaultAppearanceStream(u),Vi(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=oF(u);h.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var y="";for(var w in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(w)){var _=u.appearanceStreamContent[w];if(y+="/"+w+" ",y+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var o in _)if(_.hasOwnProperty(o)){var P=_[o];typeof P=="function"&&(P=P.call(i,u)),y+="/"+o+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=_)=="function"&&(P=P.call(i,u)),y+="/"+o+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}s&&lF(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},Ax=Yo.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Vi(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+af(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+af(r(e))+")"},uc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uc.prototype.toString=function(){return this.objId+" 0 R"},uc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},uc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:Ax(i,this.objId,this.scope)}):i instanceof uc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Mx=function(){uc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};El(Mx,uc);var kx=function(){uc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+af(n(e))+")"}},set:function(n){e=n}})};El(kx,uc);var Hu=function e(){uc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute F supplied.');t=D}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cs(t,3)},set:function(D){D?this.F=hs(t,3):this.F=fs(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute Ff supplied.');n=D}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(D){r=D!==void 0?D:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(D){r[0]=D}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(D){r[1]=D}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(D){r[2]=D}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(D){r[3]=D}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(D){switch(D){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=D;break;default:throw new Error('Invalid value "'+D+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof bm)return;s="FieldObject"+e.FieldNum++}var D=function(U){return U};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+af(D(s))+")"},set:function(D){s=D.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(D){s=D}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(D){o=D}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(D){u=D}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(D){h=D}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/vy:d},set:function(D){d=D}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(D){g=D}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof bm||this instanceof Jh))return fv(y,this.objId,this.scope)},set:function(D){D=D.toString(),y=D}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Zs?w:fv(w,this.objId,this.scope)},set:function(D){D=D.toString(),w=this instanceof Zs?D:D.substr(0,1)==="("?Af(D.substr(1,D.length-2)):Af(D)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs?Af(w.substr(1,w.length-1)):w},set:function(D){D=D.toString(),w=this instanceof Zs?"/"+D:D}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(D){this.V=D}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Zs?_:fv(_,this.objId,this.scope)},set:function(D){D=D.toString(),_=this instanceof Zs?D:D.substr(0,1)==="("?Af(D.substr(1,D.length-2)):Af(D)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs?Af(_.substr(1,_.length-1)):_},set:function(D){D=D.toString(),_=this instanceof Zs?"/"+D:D}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(D){D=!!D,T=D}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(D){P=D}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,1)},set:function(D){D?this.Ff=hs(this.Ff,1):this.Ff=fs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,2)},set:function(D){D?this.Ff=hs(this.Ff,2):this.Ff=fs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,3)},set:function(D){D?this.Ff=hs(this.Ff,3):this.Ff=fs(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(D){if([0,1,2].indexOf(D)===-1)throw new Error('Invalid value "'+D+'" for attribute Q supplied.');j=D}}),Object.defineProperty(this,"textAlign",{get:function(){var D;switch(j){case 0:default:D="left";break;case 1:D="center";break;case 2:D="right"}return D},configurable:!0,enumerable:!0,set:function(D){switch(D){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};El(Hu,uc);var Yf=function(){Hu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ax(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,u){u||(u=1);for(var h,d=[];h=o.exec(s);)d.push(h[u]);return d}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,18)},set:function(n){n?this.Ff=hs(this.Ff,18):this.Ff=fs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=hs(this.Ff,19):this.Ff=fs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,20)},set:function(n){n?(this.Ff=hs(this.Ff,20),t.sort()):this.Ff=fs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,22)},set:function(n){n?this.Ff=hs(this.Ff,22):this.Ff=fs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,23)},set:function(n){n?this.Ff=hs(this.Ff,23):this.Ff=fs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,27)},set:function(n){n?this.Ff=hs(this.Ff,27):this.Ff=fs(this.Ff,27)}}),this.hasAppearanceStream=!1};El(Yf,Hu);var Xf=function(){Yf.call(this),this.fontName="helvetica",this.combo=!1};El(Xf,Yf);var Jf=function(){Xf.call(this),this.combo=!0};El(Jf,Xf);var j0=function(){Jf.call(this),this.edit=!0};El(j0,Jf);var Zs=function(){Hu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,15)},set:function(n){n?this.Ff=hs(this.Ff,15):this.Ff=fs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,16)},set:function(n){n?this.Ff=hs(this.Ff,16):this.Ff=fs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,17)},set:function(n){n?this.Ff=hs(this.Ff,17):this.Ff=fs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,26)},set:function(n){n?this.Ff=hs(this.Ff,26):this.Ff=fs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+af(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Vi(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};El(Zs,Hu);var z0=function(){Zs.call(this),this.pushButton=!0};El(z0,Zs);var Qf=function(){Zs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};El(Qf,Zs);var bm=function(){var e,t;Hu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+af(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Vi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};El(bm,Hu),Qf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Qf.prototype.createOption=function(e){var t=new bm;return t.Parent=this,t.optionName=e,this.Kids.push(t),cF.call(this.scope,t),t};var U0=function(){Zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zn.CheckBox.createAppearanceStream()};El(U0,Zs);var Jh=function(){Hu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,13)},set:function(t){t?this.Ff=hs(this.Ff,13):this.Ff=fs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,21)},set:function(t){t?this.Ff=hs(this.Ff,21):this.Ff=fs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,23)},set:function(t){t?this.Ff=hs(this.Ff,23):this.Ff=fs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,24)},set:function(t){t?this.Ff=hs(this.Ff,24):this.Ff=fs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,25)},set:function(t){t?this.Ff=hs(this.Ff,25):this.Ff=fs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,26)},set:function(t){t?this.Ff=hs(this.Ff,26):this.Ff=fs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};El(Jh,Hu);var $0=function(){Jh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,14)},set:function(e){e?this.Ff=hs(this.Ff,14):this.Ff=fs(this.Ff,14)}}),this.password=!0};El($0,Jh);var Zn={CheckBox:{createAppearanceStream:function(){return{N:{On:Zn.CheckBox.YesNormal},D:{On:Zn.CheckBox.YesPushDown,Off:Zn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=S1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Dr(Zn.internal.getWidth(e))+" "+Dr(Zn.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Dr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ic(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Zn.internal.getHeight(e),o=Zn.internal.getWidth(e),u=S1(e,e.caption);return i.push("1 g"),i.push("0 0 "+Dr(o)+" "+Dr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Dr(o-1)+" "+Dr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Dr(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Dr(Zn.internal.getWidth(e))+" "+Dr(Zn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Zn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Zn.RadioButton.Circle.YesNormal,t.D[e]=Zn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=Zn.internal.getWidth(e)<=Zn.internal.getHeight(e)?Zn.internal.getWidth(e)/4:Zn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Zn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+nh(Zn.internal.getWidth(e)/2)+" "+nh(Zn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=Zn.internal.getWidth(e)<=Zn.internal.getHeight(e)?Zn.internal.getWidth(e)/4:Zn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Zn.internal.Bezier_C).toFixed(5)),o=Number((r*Zn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nh(Zn.internal.getWidth(e)/2)+" "+nh(Zn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+nh(Zn.internal.getWidth(e)/2)+" "+nh(Zn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=Zn.internal.getWidth(e)<=Zn.internal.getHeight(e)?Zn.internal.getWidth(e)/4:Zn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Zn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nh(Zn.internal.getWidth(e)/2)+" "+nh(Zn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Zn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Zn.RadioButton.Cross.YesNormal,t.D[e]=Zn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=Zn.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Dr(Zn.internal.getWidth(e)-2)+" "+Dr(Zn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Dr(r.x1.x)+" "+Dr(r.x1.y)+" m"),n.push(Dr(r.x2.x)+" "+Dr(r.x2.y)+" l"),n.push(Dr(r.x4.x)+" "+Dr(r.x4.y)+" m"),n.push(Dr(r.x3.x)+" "+Dr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=Zn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Dr(Zn.internal.getWidth(e))+" "+Dr(Zn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Dr(Zn.internal.getWidth(e)-2)+" "+Dr(Zn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Dr(n.x1.x)+" "+Dr(n.x1.y)+" m"),r.push(Dr(n.x2.x)+" "+Dr(n.x2.y)+" l"),r.push(Dr(n.x4.x)+" "+Dr(n.x4.y)+" m"),r.push(Dr(n.x3.x)+" "+Dr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Dr(Zn.internal.getWidth(e))+" "+Dr(Zn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Zn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Zn.internal.getWidth(e),n=Zn.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Zn.internal.getWidth=function(e){var t=0;return Vi(e)==="object"&&(t=Ab(e.Rect[2])),t},Zn.internal.getHeight=function(e){var t=0;return Vi(e)==="object"&&(t=Ab(e.Rect[3])),t};var cF=Yo.addField=function(e){if(uF(this,e),!(e instanceof Hu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Yo.AcroFormChoiceField=Yf,Yo.AcroFormListBox=Xf,Yo.AcroFormComboBox=Jf,Yo.AcroFormEditBox=j0,Yo.AcroFormButton=Zs,Yo.AcroFormPushButton=z0,Yo.AcroFormRadioButton=Qf,Yo.AcroFormCheckBox=U0,Yo.AcroFormTextField=Jh,Yo.AcroFormPasswordField=$0,Yo.AcroFormAppearance=Zn,Yo.AcroForm={ChoiceField:Yf,ListBox:Xf,ComboBox:Jf,EditBox:j0,Button:Zs,PushButton:z0,RadioButton:Qf,CheckBox:U0,TextField:Jh,PasswordField:$0,Appearance:Zn},_r.AcroForm={ChoiceField:Yf,ListBox:Xf,ComboBox:Jf,EditBox:j0,Button:Zs,PushButton:z0,RadioButton:Qf,CheckBox:U0,TextField:Jh,PasswordField:$0,Appearance:Zn};_r.AcroForm;function Tx(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(z,O){var k,I,W,V,G,ne=t;if((O=O||t)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(me(z))for(G in n)for(W=n[G],k=0;k<W.length;k+=1){for(V=!0,I=0;I<W[k].length;I+=1)if(W[k][I]!==void 0&&W[k][I]!==z[I]){V=!1;break}if(V===!0){ne=G;break}}else for(G in n)for(W=n[G],k=0;k<W.length;k+=1){for(V=!0,I=0;I<W[k].length;I+=1)if(W[k][I]!==void 0&&W[k][I]!==z.charCodeAt(I)){V=!1;break}if(V===!0){ne=G;break}}return ne===t&&O!==t&&(ne=O),ne},i=function z(O){for(var k=this.internal.write,I=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:O.width}),V.push({key:"Height",value:O.height}),O.colorSpace===j.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===j.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var G="",ne=0,_e=O.transparency.length;ne<_e;ne++)G+=O.transparency[ne]+" "+O.transparency[ne]+" ";V.push({key:"Mask",value:"["+G+"]"})}O.sMask!==void 0&&V.push({key:"SMask",value:O.objectId+1+" 0 R"});var ge=O.filter!==void 0?["/"+O.filter]:void 0;if(I({data:O.data,additionalKeyValues:V,alreadyAppliedFilters:ge,objectId:O.objectId}),k("endobj"),"sMask"in O&&O.sMask!==void 0){var Ve="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,B={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:Ve,data:O.sMask};"filter"in O&&(B.filter=O.filter),z.call(this,B)}if(O.colorSpace===j.INDEXED){var te=this.internal.newObject();I({data:H(new Uint8Array(O.palette)),objectId:te}),k("endobj")}},s=function(){var z=this.internal.collections.addImage_images;for(var O in z)i.call(this,z[O])},o=function(){var z,O=this.internal.collections.addImage_images,k=this.internal.write;for(var I in O)k("/I"+(z=O[I]).index,z.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},h=function(){var z=this.internal.collections.addImage_images;return u.call(this),z},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(z){return typeof e["process"+z.toUpperCase()]=="function"},y=function(z){return Vi(z)==="object"&&z.nodeType===1},w=function(z,O){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var k=""+z.getAttribute("src");if(k.indexOf("data:image/")===0)return rp(unescape(k).split("base64,").pop());var I=e.loadFile(k,!0);if(I!==void 0)return I}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var W;switch(O){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return rp(z.toDataURL(W,1).split("base64,").pop())}},_=function(z){var O=this.internal.collections.addImage_images;if(O){for(var k in O)if(z===O[k].alias)return O[k]}},P=function(z,O,k){return z||O||(z=-96,O=-96),z<0&&(z=-1*k.width*72/z/this.internal.scaleFactor),O<0&&(O=-1*k.height*72/O/this.internal.scaleFactor),z===0&&(z=O*k.width/k.height),O===0&&(O=z*k.height/k.width),[z,O]},T=function(z,O,k,I,W,V){var G=P.call(this,k,I,W),ne=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,ge=h.call(this);if(k=G[0],I=G[1],ge[W.index]=W,V){V*=Math.PI/180;var Ve=Math.cos(V),B=Math.sin(V),te=function(le){return le.toFixed(4)},ce=[te(Ve),te(B),te(-1*B),te(Ve),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,ne(z),_e(O+I),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([ne(k),"0","0",ne(I),"0","0","cm"].join(" "))):this.internal.write([ne(k),"0","0",ne(I),ne(z),_e(O+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var D=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=e.__addimage__.sHashCode=function(z){var O,k,I=0;if(typeof z=="string")for(k=z.length,O=0;O<k;O++)I=(I<<5)-I+z.charCodeAt(O),I|=0;else if(me(z))for(k=z.byteLength/2,O=0;O<k;O++)I=(I<<5)-I+z[O],I|=0;return I},K=e.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var O=!0;return z.length===0&&(O=!1),z.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&(O=!1),O},X=e.__addimage__.extractImageFromDataUrl=function(z){var O=(z=z||"").split("base64,"),k=null;if(O.length===2){var I=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(I)&&(k={mimeType:I[1],charset:I[2],data:O[1]})}return k},se=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(z){return se()&&z instanceof ArrayBuffer};var me=e.__addimage__.isArrayBufferView=function(z){return se()&&typeof Uint32Array<"u"&&(z instanceof Int8Array||z instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array)},Le=e.__addimage__.binaryStringToUint8Array=function(z){for(var O=z.length,k=new Uint8Array(O),I=0;I<O;I++)k[I]=z.charCodeAt(I);return k},H=e.__addimage__.arrayBufferToBinaryString=function(z){for(var O="",k=me(z)?z:new Uint8Array(z),I=0;I<k.length;I+=8192)O+=String.fromCharCode.apply(null,k.subarray(I,I+8192));return O};e.addImage=function(){var z,O,k,I,W,V,G,ne,_e;if(typeof arguments[1]=="number"?(O=t,k=arguments[1],I=arguments[2],W=arguments[3],V=arguments[4],G=arguments[5],ne=arguments[6],_e=arguments[7]):(O=arguments[1],k=arguments[2],I=arguments[3],W=arguments[4],V=arguments[5],G=arguments[6],ne=arguments[7],_e=arguments[8]),Vi(z=arguments[0])==="object"&&!y(z)&&"imageData"in z){var ge=z;z=ge.imageData,O=ge.format||O||t,k=ge.x||k||0,I=ge.y||I||0,W=ge.w||ge.width||W,V=ge.h||ge.height||V,G=ge.alias||G,ne=ge.compression||ne,_e=ge.rotation||ge.angle||_e}var Ve=this.internal.getFilters();if(ne===void 0&&Ve.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(k)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var B=R.call(this,z,O,G,ne);return T.call(this,k,I,W,V,B,_e),this};var R=function(z,O,k,I){var W,V,G;if(typeof z=="string"&&r(z)===t){z=unescape(z);var ne=Z(z,!1);(ne!==""||(ne=e.loadFile(z,!0))!==void 0)&&(z=ne)}if(y(z)&&(z=w(z,O)),O=r(z,O),!g(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((G=k)==null||G.length===0)&&(k=function(_e){return typeof _e=="string"||me(_e)?U(_e):me(_e.data)?U(_e.data):null}(z)),(W=_.call(this,k))||(se()&&(z instanceof Uint8Array||O==="RGBA"||(V=z,z=Le(z))),W=this["process"+O.toUpperCase()](z,d.call(this),k,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in e.image_compression?_e:D.NONE}(I),V)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},Z=e.__addimage__.convertBase64ToBinaryString=function(z,O){var k;O=typeof O!="boolean"||O;var I,W="";if(typeof z=="string"){I=(k=X(z))!==null?k.data:z;try{W=rp(I)}catch(V){if(O)throw K(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(z){var O,k,I="";if(y(z)&&(z=w(z)),typeof z=="string"&&r(z)===t&&((I=Z(z,!1))===""&&(I=e.loadFile(z)||""),z=I),k=r(z),!g(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(!se()||z instanceof Uint8Array||(z=Le(z)),!(O=this["process"+k.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=k,O}})(_r.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};_r.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,g=!1,y=0;y<d.length&&!g;y++)switch((r=d[y]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var w=0;w<d.length;w++){r=d[w];var _=this.internal.pdfEscape,P=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),D=this.internal.getEncryptor(T.objId),U=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+_(D(r.contents))+")",s+=" /Popup "+j.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+_(D(U))+") >>",T.content=s;var K=T.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+K,r.open&&(s+=" /Open true"),s+=" >>",j.content=s,this.internal.write(T.objId,"0 R",j.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var X=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(P(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+X+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var se=this.annotations._nameMap[r.options.name];r.options.pageNumber=se.page,r.options.top=se.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(P(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var me=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,o){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(n),y:d(r),w:h(n+i),h:d(r+s)},options:o,type:"link"})},e.textWithLink=function(n,r,i,s){var o,u,h=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var g=this.splitTextToSize(n,u).length;o=Math.ceil(d*g)}else u=h,o=d;return this.text(n,r,i,s),i+=.2*d,s.align==="center"&&(r-=h/2),s.align==="right"&&(r-=h),this.link(r,i-d,u,o,s),h},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(_r.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(T){return t[T.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},u=e.__arabicParser__.isArabicEndLetter=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length<=2},h=e.__arabicParser__.isArabicAlfLetter=function(T){return o(T)&&i.indexOf(T.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(T){var j=0,D=n,U="",K=0;for(j=0;j<T.length;j+=1)D[T.charCodeAt(j)]!==void 0?(K++,typeof(D=D[T.charCodeAt(j)])=="number"&&(U+=String.fromCharCode(D),D=n,K=0),j===T.length-1&&(D=n,U+=T.charAt(j-(K-1)),j-=K-1,K=0)):(D=n,U+=T.charAt(j-K),j-=K,K=0);return U};e.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&r[T.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(T,j,D){return o(T)?s(T)===!1?-1:!d(T)||!o(j)&&!o(D)||!o(D)&&u(j)||u(T)&&!o(j)||u(T)&&h(j)||u(T)&&u(j)?0:g(T)&&o(j)&&!u(j)&&o(D)&&d(D)?3:u(T)||!o(D)?1:2:-1},_=function(T){var j=0,D=0,U=0,K="",X="",se="",me=(T=T||"").split("\\s+"),Le=[];for(j=0;j<me.length;j+=1){for(Le.push(""),D=0;D<me[j].length;D+=1)K=me[j][D],X=me[j][D-1],se=me[j][D+1],o(K)?(U=w(K,X,se),Le[j]+=U!==-1?String.fromCharCode(t[K.charCodeAt(0)][U]):K):Le[j]+=K;Le[j]=y(Le[j])}return Le.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var T,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,D=[];if(Array.isArray(j)){var U=0;for(D=[],U=0;U<j.length;U+=1)Array.isArray(j[U])?D.push([_(j[U][0]),j[U][1],j[U][2]]):D.push([_(j[U])]);T=D}else T=_(j);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};e.events.push(["preProcessText",P])}(_r.API),_r.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(_r.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(T){h=T}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(T){d=T}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(T){g=T}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(T){y=T}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(T){_=T}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(T){P=T}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},e.getTextDimensions=function(h,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),w=d.scaleFactor||this.internal.scaleFactor,_=0,P=0,T=0,j=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var D=d.maxWidth;D>0?typeof h=="string"?h=this.splitTextToSize(h,D):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(K,X){return K.concat(j.splitTextToSize(X,D))},[])):h=Array.isArray(h)?h:[h];for(var U=0;U<h.length;U++)_<(T=this.getStringUnitWidth(h[U],{font:y})*g)&&(_=T);return _!==0&&(P=h.length),{w:_/=w,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===h.lineNumber?(h.x=(d.x||0)+(d.width||0),h.y=d.y||0):d.y+d.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,_&&w&&(this.printHeaderRow(h.lineNumber,!0),h.y+=w[0].height)):h.y=d.y+d.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,n===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};e.table=function(h,d,g,y,w){if(r.call(this),!g)throw new Error("No data for PDF table.");var _,P,T,j,D=[],U=[],K=[],X={},se={},me=[],Le=[],H=(w=w||{}).autoSize||!1,R=w.printHeaders!==!1,Z=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,z=w.margins||Object.assign({width:this.getPageWidth()},t),O=typeof w.padding=="number"?w.padding:3,k=w.headerBackgroundColor||"#c8c8c8",I=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=I,this.setFontSize(Z),y==null)U=D=Object.keys(g[0]),K=D.map(function(){return"left"});else if(Array.isArray(y)&&Vi(y[0])==="object")for(D=y.map(function(ge){return ge.name}),U=y.map(function(ge){return ge.prompt||ge.name||""}),K=y.map(function(ge){return ge.align||"left"}),_=0;_<y.length;_+=1)se[y[_].name]=y[_].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(U=D=y,K=D.map(function(){return"left"}));if(H||Array.isArray(y)&&typeof y[0]=="string")for(_=0;_<D.length;_+=1){for(X[j=D[_]]=g.map(function(ge){return ge[j]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(U[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=X[j],this.setFont(void 0,"normal"),T=0;T<P.length;T+=1)me.push(this.getTextDimensions(P[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[j]=Math.max.apply(null,me)+O+O,me=[]}if(R){var W={};for(_=0;_<D.length;_+=1)W[D[_]]={},W[D[_]].text=U[_],W[D[_]].align=K[_];var V=u.call(this,W,se);Le=D.map(function(ge){return new s(h,d,se[ge],V,W[ge].text,void 0,W[ge].align)}),this.setTableHeaderRow(Le),this.printHeaderRow(1,!1)}var G=y.reduce(function(ge,Ve){return ge[Ve.name]=Ve.align,ge},{});for(_=0;_<g.length;_+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:_,data:g[_]},this);var ne=u.call(this,g[_],se);for(T=0;T<D.length;T+=1){var _e=g[_][D[T]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:_,col:T,data:_e},this),o.call(this,new s(h,d,se[D[T]],ne,_e,_+2,G[D[T]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=d,this};var u=function(h,d){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(h).map(function(_){var P=h[_];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,d[_]-g-g)},this).map(function(_){return this.getLineHeightFactor()*_.length*y/w+g+g},this).reduce(function(_,P){return Math.max(_,P)},0)};e.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},e.printHeaderRow=function(h,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){g=this.internal.__cell__.tableHeaderRow[_].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,w.push(g)),g.lineNumber=h;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,g),this.setTextColor(P)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(_r.API);var Bx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ox=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],E1=Tx(Ox),Nx=[100,200,300,400,500,600,700,800,900],hF=Tx(Nx);function C1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Bx[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof E1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function Mb(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var fF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function dF(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},fF,n.genericFontFamilies||{}),s=null,o=null,u=0;u<t.length;++u)if(i[(s=C1(t[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Tb(s)+"' and default family '"+r+"'.");if(o=function(h,d){if(d[h])return d[h];var g=E1[h],y=g<=E1.normal?-1:1,w=Mb(d,Ox,g,y);if(!w)throw new Error("Could not find a matching font-stretch value for "+h);return w}(s.stretch,o),o=function(h,d){if(d[h])return d[h];for(var g=Bx[h],y=0;y<g.length;++y)if(d[g[y]])return d[g[y]];throw new Error("Could not find a matching font-style for "+h)}(s.style,o),!(o=function(h,d){if(d[h])return d[h];if(h===400&&d[500])return d[500];if(h===500&&d[400])return d[400];var g=hF[h],y=Mb(d,Nx,g,h<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+h);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Tb(s)+"'.");return o}function Bb(e){return e.trimLeft()}function pF(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function mF(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var _0,Ob,Nb,dv=["times"];(function(e){var t,n,r,i,s,o,u,h,d,g=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new h,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,d=new g}]);var y=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=B;Object.defineProperty(this,"pdf",{get:function(){return te}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(be){ce=!!be}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(be){le=!!be}});var xe=0;Object.defineProperty(this,"posX",{get:function(){return xe},set:function(be){isNaN(be)||(xe=be)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(be){isNaN(be)||(he=be)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(be){var de;typeof be=="number"?de=[be,be,be,be]:((de=new Array(4))[0]=be[0],de[1]=be.length>=2?be[1]:de[0],de[2]=be.length>=3?be[2]:de[0],de[3]=be.length>=4?be[3]:de[1]),d.margin=de}});var J=!1;Object.defineProperty(this,"autoPaging",{get:function(){return J},set:function(be){J=be}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(be){ae=be}});var Fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Fe},set:function(be){Fe=be}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(be){be instanceof g&&(d=be)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(be){d.path=be}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(be){Me=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var de;de=w(be),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var de=w(be);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Ye=null;function oe(be,de){if(Ye===null){var Ue=function(Xe){var ze=[];return Object.keys(Xe).forEach(function(Je){Xe[Je].forEach(function(Qe){var it=null;switch(Qe){case"bold":it={family:Je,weight:"bold"};break;case"italic":it={family:Je,style:"italic"};break;case"bolditalic":it={family:Je,weight:"bold",style:"italic"};break;case"":case"normal":it={family:Je}}it!==null&&(it.ref={name:Je,style:Qe},ze.push(it))})}),ze}(be.getFontList());Ye=function(Xe){for(var ze={},Je=0;Je<Xe.length;++Je){var Qe=C1(Xe[Je]),it=Qe.family,Mt=Qe.stretch,xt=Qe.style,Nt=Qe.weight;ze[it]=ze[it]||{},ze[it][Mt]=ze[it][Mt]||{},ze[it][Mt][xt]=ze[it][Mt][xt]||{},ze[it][Mt][xt][Nt]=Qe}return ze}(Ue.concat(de))}return Ye}var fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return fe},set:function(be){Ye=null,fe=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var de;if(this.ctx.font=be,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var Ue=de[1],Xe=(de[2],de[3]),ze=de[4],Je=(de[5],de[6]),Qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(Qe==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:Qe==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var it=function(et){var ot,nt,$t=[],en=et.trim();if(en==="")return dv;if(en in kb)return[kb[en]];for(;en!=="";){switch(nt=null,ot=(en=Bb(en)).charAt(0)){case'"':case"'":nt=pF(en.substring(1),ot);break;default:nt=mF(en)}if(nt===null||($t.push(nt[0]),(en=Bb(nt[1]))!==""&&en.charAt(0)!==","))return dv;en=en.replace(/^,/,"")}return $t}(Je);if(this.fontFaces){var Mt=dF(oe(this.pdf,this.fontFaces),it.map(function(et){return{family:et,stretch:"normal",weight:Xe,style:Ue}}));this.pdf.setFont(Mt.ref.name,Mt.ref.style)}else{var xt="";(Xe==="bold"||parseInt(Xe,10)>=700||Ue==="bold")&&(xt="bold"),Ue==="italic"&&(xt+="italic"),xt.length===0&&(xt="normal");for(var Nt="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},hn=0;hn<it.length;hn++){if(this.pdf.internal.getFont(it[hn],xt,{noFallback:!0,disableWarning:!0})!==void 0){Nt=it[hn];break}if(xt==="bolditalic"&&this.pdf.internal.getFont(it[hn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nt=it[hn],xt="bold";else if(this.pdf.internal.getFont(it[hn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nt=it[hn],xt="normal";break}}if(Nt===""){for(var mn=0;mn<it.length;mn++)if(Kt[it[mn]]){Nt=Kt[it[mn]];break}}Nt=Nt===""?"Times":Nt,this.pdf.setFont(Nt,xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Ve.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Ve.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};y.prototype.setLineDash=function(B){this.lineDash=B},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){X.call(this,"fill",!1)},y.prototype.stroke=function(){X.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(B,te){if(isNaN(B)||isNaN(te))throw Qi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new o(B,te));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(B,te)},y.prototype.closePath=function(){var B=new o(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&Vi(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){B=new o(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},y.prototype.lineTo=function(B,te){if(isNaN(B)||isNaN(te))throw Qi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new o(B,te));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),X.call(this,null,!0)},y.prototype.quadraticCurveTo=function(B,te,ce,le){if(isNaN(ce)||isNaN(le)||isNaN(B)||isNaN(te))throw Qi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xe=this.ctx.transform.applyToPoint(new o(ce,le)),he=this.ctx.transform.applyToPoint(new o(B,te));this.path.push({type:"qct",x1:he.x,y1:he.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},y.prototype.bezierCurveTo=function(B,te,ce,le,xe,he){if(isNaN(xe)||isNaN(he)||isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le))throw Qi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var J=this.ctx.transform.applyToPoint(new o(xe,he)),ae=this.ctx.transform.applyToPoint(new o(B,te)),Fe=this.ctx.transform.applyToPoint(new o(ce,le));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:Fe.x,y2:Fe.y,x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},y.prototype.arc=function(B,te,ce,le,xe,he){if(isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le)||isNaN(xe))throw Qi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var J=this.ctx.transform.applyToPoint(new o(B,te));B=J.x,te=J.y;var ae=this.ctx.transform.applyToPoint(new o(0,ce)),Fe=this.ctx.transform.applyToPoint(new o(0,0));ce=Math.sqrt(Math.pow(ae.x-Fe.x,2)+Math.pow(ae.y-Fe.y,2))}Math.abs(xe-le)>=2*Math.PI&&(le=0,xe=2*Math.PI),this.path.push({type:"arc",x:B,y:te,radius:ce,startAngle:le,endAngle:xe,counterclockwise:he})},y.prototype.arcTo=function(B,te,ce,le,xe){throw new Error("arcTo not implemented.")},y.prototype.rect=function(B,te,ce,le){if(isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le))throw Qi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,te),this.lineTo(B+ce,te),this.lineTo(B+ce,te+le),this.lineTo(B,te+le),this.lineTo(B,te),this.lineTo(B+ce,te),this.lineTo(B,te)},y.prototype.fillRect=function(B,te,ce,le){if(isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le))throw Qi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var xe={};this.lineCap!=="butt"&&(xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,te,ce,le),this.fill(),xe.hasOwnProperty("lineCap")&&(this.lineCap=xe.lineCap),xe.hasOwnProperty("lineJoin")&&(this.lineJoin=xe.lineJoin)}},y.prototype.strokeRect=function(B,te,ce,le){if(isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le))throw Qi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(B,te,ce,le),this.stroke())},y.prototype.clearRect=function(B,te,ce,le){if(isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le))throw Qi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,te,ce,le))},y.prototype.save=function(B){B=typeof B!="boolean"||B;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},y.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(te),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(B){var te,ce,le,xe;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))te=0,ce=0,le=0,xe=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(he!==null)te=parseInt(he[1]),ce=parseInt(he[2]),le=parseInt(he[3]),xe=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)te=parseInt(he[1]),ce=parseInt(he[2]),le=parseInt(he[3]),xe=parseFloat(he[4]);else{if(xe=1,typeof B=="string"&&B.charAt(0)!=="#"){var J=new Ex(B);B=J.ok?J.toHex():"#000000"}B.length===4?(te=B.substring(1,2),te+=te,ce=B.substring(2,3),ce+=ce,le=B.substring(3,4),le+=le):(te=B.substring(1,3),ce=B.substring(3,5),le=B.substring(5,7)),te=parseInt(te,16),ce=parseInt(ce,16),le=parseInt(le,16)}}return{r:te,g:ce,b:le,a:xe,style:B}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(B,te,ce,le){if(isNaN(te)||isNaN(ce)||typeof B!="string")throw Qi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!_.call(this)){var xe=ne(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;O.call(this,{text:B,x:te,y:ce,scale:he,angle:xe,align:this.textAlign,maxWidth:le})}},y.prototype.strokeText=function(B,te,ce,le){if(isNaN(te)||isNaN(ce)||typeof B!="string")throw Qi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){le=isNaN(le)?void 0:le;var xe=ne(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;O.call(this,{text:B,x:te,y:ce,scale:he,renderingMode:"stroke",angle:xe,align:this.textAlign,maxWidth:le})}},y.prototype.measureText=function(B){if(typeof B!="string")throw Qi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,ce=this.pdf.internal.scaleFactor,le=te.internal.getFontSize(),xe=te.getStringUnitWidth(B)*le/te.internal.scaleFactor,he=function(J){var ae=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new he({width:xe*=Math.round(96*ce/72*1e4)/1e4})},y.prototype.scale=function(B,te){if(isNaN(B)||isNaN(te))throw Qi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new h(B,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},y.prototype.rotate=function(B){if(isNaN(B))throw Qi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new h(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},y.prototype.translate=function(B,te){if(isNaN(B)||isNaN(te))throw Qi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new h(1,0,0,1,B,te);this.ctx.transform=this.ctx.transform.multiply(ce)},y.prototype.transform=function(B,te,ce,le,xe,he){if(isNaN(B)||isNaN(te)||isNaN(ce)||isNaN(le)||isNaN(xe)||isNaN(he))throw Qi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var J=new h(B,te,ce,le,xe,he);this.ctx.transform=this.ctx.transform.multiply(J)},y.prototype.setTransform=function(B,te,ce,le,xe,he){B=isNaN(B)?1:B,te=isNaN(te)?0:te,ce=isNaN(ce)?0:ce,le=isNaN(le)?1:le,xe=isNaN(xe)?0:xe,he=isNaN(he)?0:he,this.ctx.transform=new h(B,te,ce,le,xe,he)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(B,te,ce,le,xe,he,J,ae,Fe){var Me=this.pdf.getImageProperties(B),Ye=1,oe=1,fe=1,be=1;le!==void 0&&ae!==void 0&&(fe=ae/le,be=Fe/xe,Ye=Me.width/le*ae/le,oe=Me.height/xe*Fe/xe),he===void 0&&(he=te,J=ce,te=0,ce=0),le!==void 0&&ae===void 0&&(ae=le,Fe=xe),le===void 0&&ae===void 0&&(ae=Me.width,Fe=Me.height);for(var de,Ue=this.ctx.transform.decompose(),Xe=ne(Ue.rotate.shx),ze=new h,Je=(ze=(ze=(ze=ze.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale)).applyToRectangle(new u(he-te*fe,J-ce*be,le*Ye,xe*oe)),Qe=j.call(this,Je),it=[],Mt=0;Mt<Qe.length;Mt+=1)it.indexOf(Qe[Mt])===-1&&it.push(Qe[Mt]);if(K(it),this.autoPaging)for(var xt=it[0],Nt=it[it.length-1],Kt=xt;Kt<Nt+1;Kt++){this.pdf.setPage(Kt);var hn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mn=Kt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=Kt===1?0:et+(Kt-2)*ot;if(this.ctx.clip_path.length!==0){var $t=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(de,this.posX+this.margin[3],-nt+mn+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=$t}var en=JSON.parse(JSON.stringify(Je));en=U([en],this.posX+this.margin[3],-nt+mn+this.ctx.prevPageLastElemOffset)[0];var kn=(Kt>xt||Kt<Nt)&&T.call(this);kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hn,ot,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",en.x,en.y,en.w,en.h,null,null,Xe),kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",Je.x,Je.y,Je.w,Je.h,null,null,Xe)};var j=function(B,te,ce){var le=[];te=te||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xe=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":le.push(Math.floor((B.y+xe)/ce)+1);break;case"arc":le.push(Math.floor((B.y+xe-B.radius)/ce)+1),le.push(Math.floor((B.y+xe+B.radius)/ce)+1);break;case"qct":var he=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);le.push(Math.floor((he.y+xe)/ce)+1),le.push(Math.floor((he.y+he.h+xe)/ce)+1);break;case"bct":var J=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);le.push(Math.floor((J.y+xe)/ce)+1),le.push(Math.floor((J.y+J.h+xe)/ce)+1);break;case"rect":le.push(Math.floor((B.y+xe)/ce)+1),le.push(Math.floor((B.y+B.h+xe)/ce)+1)}for(var ae=0;ae<le.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<le[ae];)D.call(this);return le},D=function(){var B=this.fillStyle,te=this.strokeStyle,ce=this.font,le=this.lineCap,xe=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=te,this.font=ce,this.lineCap=le,this.lineWidth=xe,this.lineJoin=he},U=function(B,te,ce){for(var le=0;le<B.length;le++)switch(B[le].type){case"bct":B[le].x2+=te,B[le].y2+=ce;case"qct":B[le].x1+=te,B[le].y1+=ce;case"mt":case"lt":case"arc":default:B[le].x+=te,B[le].y+=ce}return B},K=function(B){return B.sort(function(te,ce){return te-ce})},X=function(B,te){for(var ce,le,xe=this.fillStyle,he=this.strokeStyle,J=this.lineCap,ae=this.lineWidth,Fe=Math.abs(ae*this.ctx.transform.scaleX),Me=this.lineJoin,Ye=JSON.parse(JSON.stringify(this.path)),oe=JSON.parse(JSON.stringify(this.path)),fe=[],be=0;be<oe.length;be++)if(oe[be].x!==void 0)for(var de=j.call(this,oe[be]),Ue=0;Ue<de.length;Ue+=1)fe.indexOf(de[Ue])===-1&&fe.push(de[Ue]);for(var Xe=0;Xe<fe.length;Xe++)for(;this.pdf.internal.getNumberOfPages()<fe[Xe];)D.call(this);if(K(fe),this.autoPaging)for(var ze=fe[0],Je=fe[fe.length-1],Qe=ze;Qe<Je+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=xe,this.strokeStyle=he,this.lineCap=J,this.lineWidth=Fe,this.lineJoin=Me;var it=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Qe===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Kt=Qe===1?0:xt+(Qe-2)*Nt;if(this.ctx.clip_path.length!==0){var hn=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(ce,this.posX+this.margin[3],-Kt+Mt+this.ctx.prevPageLastElemOffset),se.call(this,B,!0),this.path=hn}if(le=JSON.parse(JSON.stringify(Ye)),this.path=U(le,this.posX+this.margin[3],-Kt+Mt+this.ctx.prevPageLastElemOffset),te===!1||Qe===0){var mn=(Qe>ze||Qe<Je)&&T.call(this);mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,Nt,null).clip().discardPath()),se.call(this,B,te),mn&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=Fe,se.call(this,B,te),this.lineWidth=ae;this.path=Ye},se=function(B,te){if((B!=="stroke"||te||!P.call(this))&&(B==="stroke"||te||!_.call(this))){for(var ce,le,xe=[],he=this.path,J=0;J<he.length;J++){var ae=he[J];switch(ae.type){case"begin":xe.push({begin:!0});break;case"close":xe.push({close:!0});break;case"mt":xe.push({start:ae,deltas:[],abs:[]});break;case"lt":var Fe=xe.length;if(he[J-1]&&!isNaN(he[J-1].x)&&(ce=[ae.x-he[J-1].x,ae.y-he[J-1].y],Fe>0)){for(;Fe>=0;Fe--)if(xe[Fe-1].close!==!0&&xe[Fe-1].begin!==!0){xe[Fe-1].deltas.push(ce),xe[Fe-1].abs.push(ae);break}}break;case"bct":ce=[ae.x1-he[J-1].x,ae.y1-he[J-1].y,ae.x2-he[J-1].x,ae.y2-he[J-1].y,ae.x-he[J-1].x,ae.y-he[J-1].y],xe[xe.length-1].deltas.push(ce);break;case"qct":var Me=he[J-1].x+2/3*(ae.x1-he[J-1].x),Ye=he[J-1].y+2/3*(ae.y1-he[J-1].y),oe=ae.x+2/3*(ae.x1-ae.x),fe=ae.y+2/3*(ae.y1-ae.y),be=ae.x,de=ae.y;ce=[Me-he[J-1].x,Ye-he[J-1].y,oe-he[J-1].x,fe-he[J-1].y,be-he[J-1].x,de-he[J-1].y],xe[xe.length-1].deltas.push(ce);break;case"arc":xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(xe[xe.length-1].abs)&&xe[xe.length-1].abs.push(ae)}}le=te?null:B==="stroke"?"stroke":"fill";for(var Ue=!1,Xe=0;Xe<xe.length;Xe++)if(xe[Xe].arc)for(var ze=xe[Xe].abs,Je=0;Je<ze.length;Je++){var Qe=ze[Je];Qe.type==="arc"?H.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,te,!Ue):k.call(this,Qe.x,Qe.y),Ue=!0}else if(xe[Xe].close===!0)this.pdf.internal.out("h"),Ue=!1;else if(xe[Xe].begin!==!0){var it=xe[Xe].start.x,Mt=xe[Xe].start.y;I.call(this,xe[Xe].deltas,it,Mt),Ue=!0}le&&R.call(this,le),te&&Z.call(this)}},me=function(B){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-ce;case"top":return B+te-ce;case"hanging":return B+te-2*ce;case"middle":return B+te/2-ce;case"ideographic":return B;case"alphabetic":default:return B}},Le=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(te,ce){this.colorStops.push([te,ce])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(B,te,ce,le,xe,he,J,ae,Fe){for(var Me=V.call(this,ce,le,xe,he),Ye=0;Ye<Me.length;Ye++){var oe=Me[Ye];Ye===0&&(Fe?z.call(this,oe.x1+B,oe.y1+te):k.call(this,oe.x1+B,oe.y1+te)),W.call(this,B,te,oe.x2,oe.y2,oe.x3,oe.y3,oe.x4,oe.y4)}ae?Z.call(this):R.call(this,J)},R=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(B,te){this.pdf.internal.out(n(B)+" "+r(te)+" m")},O=function(B){var te;switch(B.align){case"right":case"end":te="right";break;case"center":te="center";break;case"left":case"start":default:te="left"}var ce=this.pdf.getTextDimensions(B.text),le=me.call(this,B.y),xe=Le.call(this,le)-ce.h,he=this.ctx.transform.applyToPoint(new o(B.x,le)),J=this.ctx.transform.decompose(),ae=new h;ae=(ae=(ae=ae.multiply(J.translate)).multiply(J.skew)).multiply(J.scale);for(var Fe,Me,Ye,oe=this.ctx.transform.applyToRectangle(new u(B.x,le,ce.w,ce.h)),fe=ae.applyToRectangle(new u(B.x,xe,ce.w,ce.h)),be=j.call(this,fe),de=[],Ue=0;Ue<be.length;Ue+=1)de.indexOf(be[Ue])===-1&&de.push(be[Ue]);if(K(de),this.autoPaging)for(var Xe=de[0],ze=de[de.length-1],Je=Xe;Je<ze+1;Je++){this.pdf.setPage(Je);var Qe=Je===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],xt=Mt-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],Kt=Nt-this.margin[3],hn=Je===1?0:it+(Je-2)*xt;if(this.ctx.clip_path.length!==0){var mn=this.path;Fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Fe,this.posX+this.margin[3],-1*hn+Qe),se.call(this,"fill",!0),this.path=mn}var et=U([JSON.parse(JSON.stringify(fe))],this.posX+this.margin[3],-hn+Qe+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*B.scale),Ye=this.lineWidth,this.lineWidth=Ye*B.scale);var ot=this.autoPaging!=="text";if(ot||et.y+et.h<=Mt){if(ot||et.y>=Qe&&et.x<=Nt){var nt=ot?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||Nt-et.x)[0],$t=U([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-hn+Qe+this.ctx.prevPageLastElemOffset)[0],en=ot&&(Je>Xe||Je<ze)&&T.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,xt,null).clip().discardPath()),this.pdf.text(nt,$t.x,$t.y,{angle:B.angle,align:te,renderingMode:B.renderingMode}),en&&this.pdf.restoreGraphicsState()}}else et.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-et.y);B.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ye)}else B.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*B.scale),Ye=this.lineWidth,this.lineWidth=Ye*B.scale),this.pdf.text(B.text,he.x+this.posX,he.y+this.posY,{angle:B.angle,align:te,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ye)},k=function(B,te,ce,le){ce=ce||0,le=le||0,this.pdf.internal.out(n(B+ce)+" "+r(te+le)+" l")},I=function(B,te,ce){return this.pdf.lines(B,te,ce,null,null)},W=function(B,te,ce,le,xe,he,J,ae){this.pdf.internal.out([t(i(ce+B)),t(s(le+te)),t(i(xe+B)),t(s(he+te)),t(i(J+B)),t(s(ae+te)),"c"].join(" "))},V=function(B,te,ce,le){for(var xe=2*Math.PI,he=Math.PI/2;te>ce;)te-=xe;var J=Math.abs(ce-te);J<xe&&le&&(J=xe-J);for(var ae=[],Fe=le?-1:1,Me=te;J>1e-5;){var Ye=Me+Fe*Math.min(J,he);ae.push(G.call(this,B,Me,Ye)),J-=Math.abs(Ye-Me),Me=Ye}return ae},G=function(B,te,ce){var le=(ce-te)/2,xe=B*Math.cos(le),he=B*Math.sin(le),J=xe,ae=-he,Fe=J*J+ae*ae,Me=Fe+J*xe+ae*he,Ye=4/3*(Math.sqrt(2*Fe*Me)-Me)/(J*he-ae*xe),oe=J-Ye*ae,fe=ae+Ye*J,be=oe,de=-fe,Ue=le+te,Xe=Math.cos(Ue),ze=Math.sin(Ue);return{x1:B*Math.cos(te),y1:B*Math.sin(te),x2:oe*Xe-fe*ze,y2:oe*ze+fe*Xe,x3:be*Xe-de*ze,y3:be*ze+de*Xe,x4:B*Math.cos(ce),y4:B*Math.sin(ce)}},ne=function(B){return 180*B/Math.PI},_e=function(B,te,ce,le,xe,he){var J=B+.5*(ce-B),ae=te+.5*(le-te),Fe=xe+.5*(ce-xe),Me=he+.5*(le-he),Ye=Math.min(B,xe,J,Fe),oe=Math.max(B,xe,J,Fe),fe=Math.min(te,he,ae,Me),be=Math.max(te,he,ae,Me);return new u(Ye,fe,oe-Ye,be-fe)},ge=function(B,te,ce,le,xe,he,J,ae){var Fe,Me,Ye,oe,fe,be,de,Ue,Xe,ze,Je,Qe,it,Mt,xt=ce-B,Nt=le-te,Kt=xe-ce,hn=he-le,mn=J-xe,et=ae-he;for(Me=0;Me<41;Me++)Xe=(de=(Ye=B+(Fe=Me/40)*xt)+Fe*((fe=ce+Fe*Kt)-Ye))+Fe*(fe+Fe*(xe+Fe*mn-fe)-de),ze=(Ue=(oe=te+Fe*Nt)+Fe*((be=le+Fe*hn)-oe))+Fe*(be+Fe*(he+Fe*et-be)-Ue),Me==0?(Je=Xe,Qe=ze,it=Xe,Mt=ze):(Je=Math.min(Je,Xe),Qe=Math.min(Qe,ze),it=Math.max(it,Xe),Mt=Math.max(Mt,ze));return new u(Math.round(Je),Math.round(Qe),Math.round(it-Je),Math.round(Mt-Qe))},Ve=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,te,ce=(B=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:te}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(_r.API),function(e){var t=function(s){var o,u,h,d,g,y,w,_,P,T;for(u=[],h=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>h;h+=4)(g=(s.charCodeAt(h)<<24)+(s.charCodeAt(h+1)<<16)+(s.charCodeAt(h+2)<<8)+s.charCodeAt(h+3))!==0?(y=(g=((g=((g=((g=(g-(T=g%85))/85)-(P=g%85))/85)-(_=g%85))/85)-(w=g%85))/85)%85,u.push(y+33,w+33,_+33,P+33,T+33)):u.push(122);return function(j,D){for(var U=D;U>0;U--)j.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},n=function(s){var o,u,h,d,g,y=String,w="length",_=255,P="charCodeAt",T="slice",j="replace";for(s[T](-2),s=s[T](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),h=[],d=0,g=(s+=o="uuuuu"[T](s[w]%5||5))[w];g>d;d+=5)u=52200625*(s[P](d)-33)+614125*(s[P](d+1)-33)+7225*(s[P](d+2)-33)+85*(s[P](d+3)-33)+(s[P](d+4)-33),h.push(_&u>>24,_&u>>16,_&u>>8,_&u);return function(D,U){for(var K=U;K>0;K--)D.pop()}(h,o[w]),y.fromCharCode.apply(y,h)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",h=0;h<s.length;h+=2)u+=String.fromCharCode("0x"+(s[h]+s[h+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=b1(o)).reduce(function(h,d){return h+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var u=0,h=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=r(h),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=i(h),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:h,reverseChain:d.reverse().join(" ")}}}(_r.API),function(e){e.loadFile=function(t,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(h,d,g){var y=new XMLHttpRequest,w=0,_=function(P){var T=P.length,j=[],D=String.fromCharCode;for(w=0;w<T;w+=1)j.push(D(255&P.charCodeAt(w)));return j.join("")};if(y.open("GET",h,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?g(_(this.responseText)):g(void 0)}),y.send(null),d&&y.status===200)return _(y.responseText)}(i,s,o)}catch{}return u}(t,n,r)},e.loadImageFile=e.loadFile}(_r.API),function(e){function t(){return(Lr.html2canvas?Promise.resolve(Lr.html2canvas):qh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Lr.DOMPurify?Promise.resolve(Lr.DOMPurify):qh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=Vi(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var h=document.createElement(o);for(var d in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[d]=u.style[d];return h},s=function o(u){var h=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),h);return d=(d=d.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:o,dompurify:h})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function h(d,g){for(var y=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),w=d.firstChild;w;w=w.nextSibling)g!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||y.appendChild(h(w,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(y.width=d.width,y.height=d.height,y.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(y.value=d.value),y.addEventListener("load",function(){y.scrollTop=d.scrollTop,y.scrollLeft=d.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(u){var h=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=d,d)for(var w=0;w<d.length;++w){var _=d[w],P=_.src.find(function(T){return T.format==="truetype"});P&&h.addFont(P.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(h){if(h in s.template.prop)return function(){this.prop[h]=o[h]};switch(h){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[h]=o[h]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var h=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(h):h})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(h,d){return Math.floor(h*d/72*96)}return this.then(function(){(o=o||_r.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,h,d){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,h,d){return this.setProgress(o?this.progress.val+o:null,u||null,h?this.progress.n+h:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,u){var h=this;return this.thenCore(o,u,function(d,g){return h.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,d),y}).then(d,g).then(function(y){return h.updateProgress(1),y})})},s.prototype.thenCore=function(o,u,h){h=h||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=h.call(d,o,u);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(h){u=u.thenCore(h)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,_r.getPageSize=function(o,u,h){if(Vi(o)==="object"){var d=o;o=d.orientation,u=d.unit||u,h=d.format||h}u=u||"mm",h=h||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+h).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var _,P=0,T=0;if(w.hasOwnProperty(y))P=w[y][1]/g,T=w[y][0]/g;else try{P=h[1],T=h[0]}catch{throw new Error("Invalid format: "+h)}if(o==="p"||o==="portrait")o="p",T>P&&(_=T,T=P,P=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",P>T&&(_=T,T=P,P=_)}return{width:T,height:P,unit:u,k:g,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(C1):null;var h=new s(u);return u.worker?h:h.from(o).doCallback()}}(_r.API),_r.API.addJS=function(e){return Nb=e,this.internal.events.subscribe("postPutResources",function(){_0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ob=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Nb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_0!==void 0&&Ob!==void 0&&this.internal.out("/Names <</JavaScript "+_0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var h=u[1];n.internal.newObjectDeferredBegin(h,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var y=n.internal.newObject();g.push(y);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var _=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<g.length;s++)n.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+_+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var h=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(_r.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,o,u){var h,d=this.decode.DCT_DECODE,g=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(h=function(y){for(var w,_=256*y.charCodeAt(4)+y.charCodeAt(5),P=y.length,T={width:0,height:0,numcomponents:1},j=4;j<P;j+=2){if(j+=_,t.indexOf(y.charCodeAt(j+1))!==-1){w=256*y.charCodeAt(j+5)+y.charCodeAt(j+6),T={width:256*y.charCodeAt(j+7)+y.charCodeAt(j+8),height:w,numcomponents:y.charCodeAt(j+9)};break}_=256*y.charCodeAt(j+2)+y.charCodeAt(j+3)}return T}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:n,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return g}}(_r.API);var Mf,b0,Db,Ib,Rb,gF=function(){var e,t,n;function r(s){var o,u,h,d,g,y,w,_,P,T,j,D,U,K;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),P=(function(){var X,se;for(se=[],X=0;X<4;++X)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,y.delay=1e3*g/d,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,D=0;0<=o?D<o:D>o;0<=o?++D:--D)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((T=h-this.transparency.indexed.length)>0)for(U=0;0<=T?U<T:U>T;0<=T?++U:--U)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":w=(j=this.read(o)).indexOf(0),_=String.fromCharCode.apply(String,j.slice(0,w)),this.text[_]=String.fromCharCode.apply(String,j.slice(w+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(K=this.colorType)===4||K===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),h=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(y,w,_,P){var T,j,D,U,K,X,se,me,Le,H,R,Z,z,O,k,I,W,V,G,ne,_e,ge=Math.ceil((d.width-y)/_),Ve=Math.ceil((d.height-w)/P),B=d.width==ge&&d.height==Ve;for(O=o*ge,Z=B?u:new Uint8Array(O*Ve),X=s.length,z=0,j=0;z<Ve&&h<X;){switch(s[h++]){case 0:for(U=W=0;W<O;U=W+=1)Z[j++]=s[h++];break;case 1:for(U=V=0;V<O;U=V+=1)T=s[h++],K=U<o?0:Z[j-o],Z[j++]=(T+K)%256;break;case 2:for(U=G=0;G<O;U=G+=1)T=s[h++],D=(U-U%o)/o,k=z&&Z[(z-1)*O+D*o+U%o],Z[j++]=(k+T)%256;break;case 3:for(U=ne=0;ne<O;U=ne+=1)T=s[h++],D=(U-U%o)/o,K=U<o?0:Z[j-o],k=z&&Z[(z-1)*O+D*o+U%o],Z[j++]=(T+Math.floor((K+k)/2))%256;break;case 4:for(U=_e=0;_e<O;U=_e+=1)T=s[h++],D=(U-U%o)/o,K=U<o?0:Z[j-o],z===0?k=I=0:(k=Z[(z-1)*O+D*o+U%o],I=D&&Z[(z-1)*O+(D-1)*o+U%o]),se=K+k-I,me=Math.abs(se-K),H=Math.abs(se-k),R=Math.abs(se-I),Le=me<=H&&me<=R?K:H<=R?k:I,Z[j++]=(T+Le)%256;break;default:throw new Error("Invalid filter algorithm: "+s[h-1])}if(!B){var te=((w+z*P)*d.width+y)*o,ce=z*O;for(U=0;U<ge;U+=1){for(var le=0;le<o;le+=1)u[te++]=Z[ce++];te+=(_-1)*o}}z++}}return s=ZR(s),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,h,d,g,y,w,_;for(u=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+u.length),h=0,s=0,o=y=0,w=u.length;y<w;o=y+=3)d[h++]=u[o],d[h++]=u[o+1],d[h++]=u[o+2],d[h++]=(_=g[s++])!=null?_:255;return d},r.prototype.copyToImageData=function(s,o){var u,h,d,g,y,w,_,P,T,j,D;if(h=this.colors,T=null,u=this.hasAlphaChannel,this.palette.length&&(T=(D=this._decodedPalette)!=null?D:this._decodedPalette=this.decodePalette(),h=4,u=!0),P=(d=s.data||s).length,y=T||o,g=w=0,h===1)for(;g<P;)_=T?4*o[g/4]:w,j=y[_++],d[g++]=j,d[g++]=j,d[g++]=j,d[g++]=u?y[_++]:255,w=_;else for(;g<P;)_=T?4*o[g/4]:w,d[g++]=y[_++],d[g++]=y[_++],d[g++]=y[_++],d[g++]=u?y[_++]:255,w=_},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Lr)==="[object Window]"){try{t=Lr.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,h,d,g,y,w,_;if(this.animation){for(_=[],u=g=0,y=(w=this.animation.frames).length;g<y;u=++g)o=w[u],h=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(h,d),o.imageData=h,_.push(o.image=e(h));return _}},r.prototype.renderFrame=function(s,o){var u,h,d;return u=(h=this.animation.frames)[o],d=h[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,h,d,g,y,w=this;return u=0,y=this.animation,d=y.numFrames,h=y.frames,g=y.numPlays,(o=function(){var _,P;if(_=u++%d,P=h[_],w.renderFrame(s,_),d>1&&u/d<g)return w.animation._timeout=setTimeout(o,P.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function vF(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,o=1<<(7&i)+1;e[t++],e[t++];var u=null,h=null;s&&(u=t,h=o,t+=3*o);var d=!0,g=[],y=0,w=null,_=0,P=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((z=e[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var T=e[t++];y=e[t++]|e[t++]<<8,w=e[t++],!(1&T)&&(w=null),_=T>>2&7,t++;break;case 254:for(;;){if(!((z=e[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,U=e[t++]|e[t++]<<8,K=e[t++]|e[t++]<<8,X=e[t++],se=X>>6&1,me=1<<(7&X)+1,Le=u,H=h,R=!1;X>>7&&(R=!0,Le=t,H=me,t+=3*me);var Z=t;for(t++;;){var z;if(!((z=e[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}g.push({x:j,y:D,width:U,height:K,has_local_palette:R,palette_offset:Le,palette_size:H,data_offset:Z,data_length:t-Z,transparent_index:w,interlaced:!!se,delay:y,disposal:_});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(O){if(O<0||O>=g.length)throw new Error("Frame index out of range.");return g[O]},this.decodeAndBlitFrameBGRA=function(O,k){var I=this.frameInfo(O),W=I.width*I.height,V=new Uint8Array(W);Fb(e,I.data_offset,V,W);var G=I.palette_offset,ne=I.transparent_index;ne===null&&(ne=256);var _e=I.width,ge=n-_e,Ve=_e,B=4*(I.y*n+I.x),te=4*((I.y+I.height)*n+I.x),ce=B,le=4*ge;I.interlaced===!0&&(le+=4*n*7);for(var xe=8,he=0,J=V.length;he<J;++he){var ae=V[he];if(Ve===0&&(Ve=_e,(ce+=le)>=te&&(le=4*ge+4*n*(xe-1),ce=B+(_e+ge)*(xe<<1),xe>>=1)),ae===ne)ce+=4;else{var Fe=e[G+3*ae],Me=e[G+3*ae+1],Ye=e[G+3*ae+2];k[ce++]=Ye,k[ce++]=Me,k[ce++]=Fe,k[ce++]=255}--Ve}},this.decodeAndBlitFrameRGBA=function(O,k){var I=this.frameInfo(O),W=I.width*I.height,V=new Uint8Array(W);Fb(e,I.data_offset,V,W);var G=I.palette_offset,ne=I.transparent_index;ne===null&&(ne=256);var _e=I.width,ge=n-_e,Ve=_e,B=4*(I.y*n+I.x),te=4*((I.y+I.height)*n+I.x),ce=B,le=4*ge;I.interlaced===!0&&(le+=4*n*7);for(var xe=8,he=0,J=V.length;he<J;++he){var ae=V[he];if(Ve===0&&(Ve=_e,(ce+=le)>=te&&(le=4*ge+4*n*(xe-1),ce=B+(_e+ge)*(xe<<1),xe>>=1)),ae===ne)ce+=4;else{var Fe=e[G+3*ae],Me=e[G+3*ae+1],Ye=e[G+3*ae+2];k[ce++]=Fe,k[ce++]=Me,k[ce++]=Ye,k[ce++]=255}--Ve}}}function Fb(e,t,n,r){for(var i=e[t++],s=1<<i,o=s+1,u=o+1,h=i+1,d=(1<<h)-1,g=0,y=0,w=0,_=e[t++],P=new Int32Array(4096),T=null;;){for(;g<16&&_!==0;)y|=e[t++]<<g,g+=8,_===1?_=e[t++]:--_;if(g<h)break;var j=y&d;if(y>>=h,g-=h,j!==s){if(j===o)break;for(var D=j<u?j:T,U=0,K=D;K>s;)K=P[K]>>8,++U;var X=K;if(w+U+(D!==j?1:0)>r)return void Qi.log("Warning, gif stream longer than expected.");n[w++]=X;var se=w+=U;for(D!==j&&(n[w++]=X),K=D;U--;)K=P[K],n[--se]=255&K,K>>=8;T!==null&&u<4096&&(P[u++]=T<<8|X,u>=d+1&&h<12&&(++h,d=d<<1|1)),T=j}else u=o+1,d=(1<<(h=i+1))-1,T=null}return w!==r&&Qi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pv(e){var t,n,r,i,s,o=Math.floor,u=new Array(64),h=new Array(64),d=new Array(64),g=new Array(64),y=new Array(65535),w=new Array(65535),_=new Array(64),P=new Array(64),T=[],j=0,D=7,U=new Array(64),K=new Array(64),X=new Array(64),se=new Array(256),me=new Array(2048),Le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(B,te){for(var ce=0,le=0,xe=new Array,he=1;he<=16;he++){for(var J=1;J<=B[he];J++)xe[te[le]]=[],xe[te[le]][0]=ce,xe[te[le]][1]=he,le++,ce++;ce*=2}return xe}function G(B){for(var te=B[0],ce=B[1]-1;ce>=0;)te&1<<ce&&(j|=1<<D),ce--,--D<0&&(j==255?(ne(255),ne(0)):ne(j),D=7,j=0)}function ne(B){T.push(B)}function _e(B){ne(B>>8&255),ne(255&B)}function ge(B,te,ce,le,xe){for(var he,J=xe[0],ae=xe[240],Fe=function(ze,Je){var Qe,it,Mt,xt,Nt,Kt,hn,mn,et,ot,nt=0;for(et=0;et<8;++et){Qe=ze[nt],it=ze[nt+1],Mt=ze[nt+2],xt=ze[nt+3],Nt=ze[nt+4],Kt=ze[nt+5],hn=ze[nt+6];var $t=Qe+(mn=ze[nt+7]),en=Qe-mn,kn=it+hn,Ln=it-hn,Tn=Mt+Kt,or=Mt-Kt,wn=xt+Nt,Rn=xt-Nt,lt=$t+wn,We=$t-wn,qt=kn+Tn,_n=kn-Tn;ze[nt]=lt+qt,ze[nt+4]=lt-qt;var Dn=.707106781*(_n+We);ze[nt+2]=We+Dn,ze[nt+6]=We-Dn;var Cn=.382683433*((lt=Rn+or)-(_n=Ln+en)),Xt=.5411961*lt+Cn,Gn=1.306562965*_n+Cn,Ut=.707106781*(qt=or+Ln),Jt=en+Ut,vn=en-Ut;ze[nt+5]=vn+Xt,ze[nt+3]=vn-Xt,ze[nt+1]=Jt+Gn,ze[nt+7]=Jt-Gn,nt+=8}for(nt=0,et=0;et<8;++et){Qe=ze[nt],it=ze[nt+8],Mt=ze[nt+16],xt=ze[nt+24],Nt=ze[nt+32],Kt=ze[nt+40],hn=ze[nt+48];var ci=Qe+(mn=ze[nt+56]),Sn=Qe-mn,dr=it+hn,lr=it-hn,bn=Mt+Kt,yi=Mt-Kt,Es=xt+Nt,Co=xt-Nt,Fi=ci+Es,Er=ci-Es,_i=dr+bn,sr=dr-bn;ze[nt]=Fi+_i,ze[nt+32]=Fi-_i;var rn=.707106781*(sr+Er);ze[nt+16]=Er+rn,ze[nt+48]=Er-rn;var Uo=.382683433*((Fi=Co+yi)-(sr=lr+Sn)),to=.5411961*Fi+Uo,fo=1.306562965*sr+Uo,qi=.707106781*(_i=yi+lr),ms=Sn+qi,Qo=Sn-qi;ze[nt+40]=Qo+to,ze[nt+24]=Qo-to,ze[nt+8]=ms+fo,ze[nt+56]=ms-fo,nt++}for(et=0;et<64;++et)ot=ze[et]*Je[et],_[et]=ot>0?ot+.5|0:ot-.5|0;return _}(B,te),Me=0;Me<64;++Me)P[Le[Me]]=Fe[Me];var Ye=P[0]-ce;ce=P[0],Ye==0?G(le[0]):(G(le[w[he=32767+Ye]]),G(y[he]));for(var oe=63;oe>0&&P[oe]==0;)oe--;if(oe==0)return G(J),ce;for(var fe,be=1;be<=oe;){for(var de=be;P[be]==0&&be<=oe;)++be;var Ue=be-de;if(Ue>=16){fe=Ue>>4;for(var Xe=1;Xe<=fe;++Xe)G(ae);Ue&=15}he=32767+P[be],G(xe[(Ue<<4)+w[he]]),G(y[he]),be++}return oe!=63&&G(J),ce}function Ve(B){B=Math.min(Math.max(B,1),100),s!=B&&(function(te){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var xe=o((ce[le]*te+50)/100);xe=Math.min(Math.max(xe,1),255),u[Le[le]]=xe}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],J=0;J<64;J++){var ae=o((he[J]*te+50)/100);ae=Math.min(Math.max(ae,1),255),h[Le[J]]=ae}for(var Fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ye=0;Ye<8;Ye++)for(var oe=0;oe<8;oe++)d[Me]=1/(u[Le[Me]]*Fe[Ye]*Fe[oe]*8),g[Me]=1/(h[Le[Me]]*Fe[Ye]*Fe[oe]*8),Me++}(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),s=B)}this.encode=function(B,te){te&&Ve(te),T=new Array,j=0,D=7,_e(65496),_e(65504),_e(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),_e(1),_e(1),ne(0),ne(0),function(){_e(65499),_e(132),ne(0);for(var it=0;it<64;it++)ne(u[it]);ne(1);for(var Mt=0;Mt<64;Mt++)ne(h[Mt])}(),function(it,Mt){_e(65472),_e(17),ne(8),_e(Mt),_e(it),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(B.width,B.height),function(){_e(65476),_e(418),ne(0);for(var it=0;it<16;it++)ne(H[it+1]);for(var Mt=0;Mt<=11;Mt++)ne(R[Mt]);ne(16);for(var xt=0;xt<16;xt++)ne(Z[xt+1]);for(var Nt=0;Nt<=161;Nt++)ne(z[Nt]);ne(1);for(var Kt=0;Kt<16;Kt++)ne(O[Kt+1]);for(var hn=0;hn<=11;hn++)ne(k[hn]);ne(17);for(var mn=0;mn<16;mn++)ne(I[mn+1]);for(var et=0;et<=161;et++)ne(W[et])}(),_e(65498),_e(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var ce=0,le=0,xe=0;j=0,D=7,this.encode.displayName="_encode_";for(var he,J,ae,Fe,Me,Ye,oe,fe,be,de=B.data,Ue=B.width,Xe=B.height,ze=4*Ue,Je=0;Je<Xe;){for(he=0;he<ze;){for(Me=ze*Je+he,oe=-1,fe=0,be=0;be<64;be++)Ye=Me+(fe=be>>3)*ze+(oe=4*(7&be)),Je+fe>=Xe&&(Ye-=ze*(Je+1+fe-Xe)),he+oe>=ze&&(Ye-=he+oe-ze+4),J=de[Ye++],ae=de[Ye++],Fe=de[Ye++],U[be]=(me[J]+me[ae+256>>0]+me[Fe+512>>0]>>16)-128,K[be]=(me[J+768>>0]+me[ae+1024>>0]+me[Fe+1280>>0]>>16)-128,X[be]=(me[J+1280>>0]+me[ae+1536>>0]+me[Fe+1792>>0]>>16)-128;ce=ge(U,d,ce,t,r),le=ge(K,g,le,n,i),xe=ge(X,g,xe,n,i),he+=32}Je+=8}if(D>=0){var Qe=[];Qe[1]=D+1,Qe[0]=(1<<D+1)-1,G(Qe)}return _e(65497),new Uint8Array(T)},e=e||50,function(){for(var B=String.fromCharCode,te=0;te<256;te++)se[te]=B(te)}(),t=V(H,R),n=V(O,k),r=V(Z,z),i=V(I,W),function(){for(var B=1,te=2,ce=1;ce<=15;ce++){for(var le=B;le<te;le++)w[32767+le]=ce,y[32767+le]=[],y[32767+le][1]=ce,y[32767+le][0]=le;for(var xe=-(te-1);xe<=-B;xe++)w[32767+xe]=ce,y[32767+xe]=[],y[32767+xe][1]=ce,y[32767+xe][0]=te-1+xe;B<<=1,te<<=1}}(),function(){for(var B=0;B<256;B++)me[B]=19595*B,me[B+256>>0]=38470*B,me[B+512>>0]=7471*B+32768,me[B+768>>0]=-11059*B,me[B+1024>>0]=-21709*B,me[B+1280>>0]=32768*B+8421375,me[B+1536>>0]=-27439*B,me[B+1792>>0]=-5329*B}(),Ve(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Tu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jb(e){function t(H){if(!H)throw Error("assert :P")}function n(H,R,Z){for(var z=0;4>z;z++)if(H[R+z]!=Z.charCodeAt(z))return!0;return!1}function r(H,R,Z,z,O){for(var k=0;k<O;k++)H[R+k]=Z[z+k]}function i(H,R,Z,z){for(var O=0;O<z;O++)H[R+O]=Z}function s(H){return new Int32Array(H)}function o(H,R){for(var Z=[],z=0;z<H;z++)Z.push(new R);return Z}function u(H,R){var Z=[];return function z(O,k,I){for(var W=I[k],V=0;V<W&&(O.push(I.length>k+1?[]:new R),!(I.length<k+1));V++)z(O[V],k+1,I)}(Z,0,H),Z}var h=function(){var H=this;function R(b,C){for(var q=1<<C-1>>>0;b&q;)q>>>=1;return q?(b&q-1)+q:b}function Z(b,C,q,ie,ye){t(!(ie%q));do b[C+(ie-=q)]=ye;while(0<ie)}function z(b,C,q,ie,ye){if(t(2328>=ye),512>=ye)var Ce=s(512);else if((Ce=s(ye))==null)return 0;return function(Ae,ke,Be,He,ft,Tt){var Bt,bt,Wt=ke,jt=1<<Be,dt=s(16),vt=s(16);for(t(ft!=0),t(He!=null),t(Ae!=null),t(0<Be),bt=0;bt<ft;++bt){if(15<He[bt])return 0;++dt[He[bt]]}if(dt[0]==ft)return 0;for(vt[1]=0,Bt=1;15>Bt;++Bt){if(dt[Bt]>1<<Bt)return 0;vt[Bt+1]=vt[Bt]+dt[Bt]}for(bt=0;bt<ft;++bt)Bt=He[bt],0<He[bt]&&(Tt[vt[Bt]++]=bt);if(vt[15]==1)return(He=new O).g=0,He.value=Tt[0],Z(Ae,Wt,1,jt,He),jt;var tn,fn=-1,nn=jt-1,Mn=0,En=1,Yn=1,l=1<<Be;for(bt=0,Bt=1,ft=2;Bt<=Be;++Bt,ft<<=1){if(En+=Yn<<=1,0>(Yn-=dt[Bt]))return 0;for(;0<dt[Bt];--dt[Bt])(He=new O).g=Bt,He.value=Tt[bt++],Z(Ae,Wt+Mn,ft,l,He),Mn=R(Mn,Bt)}for(Bt=Be+1,ft=2;15>=Bt;++Bt,ft<<=1){if(En+=Yn<<=1,0>(Yn-=dt[Bt]))return 0;for(;0<dt[Bt];--dt[Bt]){if(He=new O,(Mn&nn)!=fn){for(Wt+=l,tn=1<<(fn=Bt)-Be;15>fn&&!(0>=(tn-=dt[fn]));)++fn,tn<<=1;jt+=l=1<<(tn=fn-Be),Ae[ke+(fn=Mn&nn)].g=tn+Be,Ae[ke+fn].value=Wt-ke-fn}He.g=Bt-Be,He.value=Tt[bt++],Z(Ae,Wt+(Mn>>Be),ft,l,He),Mn=R(Mn,Bt)}}return En!=2*vt[15]-1?0:jt}(b,C,q,ie,ye,Ce)}function O(){this.value=this.g=0}function k(){this.value=this.g=0}function I(){this.G=o(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(io,k)}function W(b,C,q,ie){t(b!=null),t(C!=null),t(2147483648>ie),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=C,b.pa=q,b.Jd=C,b.Yc=q+ie,b.Zc=4<=ie?q+ie-4+1:q,he(b)}function V(b,C){for(var q=0;0<C--;)q|=ae(b,128)<<C;return q}function G(b,C){var q=V(b,C);return J(b)?-q:q}function ne(b,C,q,ie){var ye,Ce=0;for(t(b!=null),t(C!=null),t(4294967288>ie),b.Sb=ie,b.Ra=0,b.u=0,b.h=0,4<ie&&(ie=4),ye=0;ye<ie;++ye)Ce+=C[q+ye]<<8*ye;b.Ra=Ce,b.bb=ie,b.oa=C,b.pa=q}function _e(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<ns-8>>>0,++b.bb,b.u-=8;ce(b)&&(b.h=1,b.u=0)}function ge(b,C){if(t(0<=C),!b.h&&C<=_s){var q=te(b)&ta[C];return b.u+=C,_e(b),q}return b.h=1,b.u=0}function Ve(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(b){return b.Ra>>>(b.u&ns-1)>>>0}function ce(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>ns}function le(b,C){b.u=C,b.h=ce(b)}function xe(b){b.u>=cl&&(t(b.u>=cl),_e(b))}function he(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function J(b){return V(b,1)}function ae(b,C){var q=b.Ca;0>b.b&&he(b);var ie=b.b,ye=q*C>>>8,Ce=(b.I>>>ie>ye)+0;for(Ce?(q-=ye,b.I-=ye+1<<ie>>>0):q=ye+1,ie=q,ye=0;256<=ie;)ye+=8,ie>>=8;return ie=7^ye+Mo[ie],b.b-=ie,b.Ca=(q<<ie)-1,Ce}function Fe(b,C,q){b[C+0]=q>>24&255,b[C+1]=q>>16&255,b[C+2]=q>>8&255,b[C+3]=q>>0&255}function Me(b,C){return b[C+0]<<0|b[C+1]<<8}function Ye(b,C){return Me(b,C)|b[C+2]<<16}function oe(b,C){return Me(b,C)|Me(b,C+2)<<16}function fe(b,C){var q=1<<C;return t(b!=null),t(0<C),b.X=s(q),b.X==null?0:(b.Mb=32-C,b.Xa=C,1)}function be(b,C){t(b!=null),t(C!=null),t(b.Xa==C.Xa),r(C.X,0,b.X,0,1<<C.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function Ue(b,C,q,ie){t(q!=null),t(ie!=null);var ye=q[0],Ce=ie[0];return ye==0&&(ye=(b*Ce+C/2)/C),Ce==0&&(Ce=(C*ye+b/2)/b),0>=ye||0>=Ce?0:(q[0]=ye,ie[0]=Ce,1)}function Xe(b,C){return b+(1<<C)-1>>>C}function ze(b,C){return((4278255360&b)+(4278255360&C)>>>0&4278255360)+((16711935&b)+(16711935&C)>>>0&16711935)>>>0}function Je(b,C){H[C]=function(q,ie,ye,Ce,Ae,ke,Be){var He;for(He=0;He<Ae;++He){var ft=H[b](ke[Be+He-1],ye,Ce+He);ke[Be+He]=ze(q[ie+He],ft)}}}function Qe(){this.ud=this.hd=this.jd=0}function it(b,C){return((4278124286&(b^C))>>>1)+(b&C)>>>0}function Mt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function xt(b,C){return Mt(b+(b-C+.5>>1))}function Nt(b,C,q){return Math.abs(C-q)-Math.abs(b-q)}function Kt(b,C,q,ie,ye,Ce,Ae){for(ie=Ce[Ae-1],q=0;q<ye;++q)Ce[Ae+q]=ie=ze(b[C+q],ie)}function hn(b,C,q,ie,ye){var Ce;for(Ce=0;Ce<q;++Ce){var Ae=b[C+Ce],ke=Ae>>8&255,Be=16711935&(Be=(Be=16711935&Ae)+((ke<<16)+ke));ie[ye+Ce]=(4278255360&Ae)+Be>>>0}}function mn(b,C){C.jd=b>>0&255,C.hd=b>>8&255,C.ud=b>>16&255}function et(b,C,q,ie,ye,Ce){var Ae;for(Ae=0;Ae<ie;++Ae){var ke=C[q+Ae],Be=ke>>>8,He=ke,ft=255&(ft=(ft=ke>>>16)+((b.jd<<24>>24)*(Be<<24>>24)>>>5));He=255&(He=(He=He+((b.hd<<24>>24)*(Be<<24>>24)>>>5))+((b.ud<<24>>24)*(ft<<24>>24)>>>5)),ye[Ce+Ae]=(4278255360&ke)+(ft<<16)+He}}function ot(b,C,q,ie,ye){H[C]=function(Ce,Ae,ke,Be,He,ft,Tt,Bt,bt){for(Be=Tt;Be<Bt;++Be)for(Tt=0;Tt<bt;++Tt)He[ft++]=ye(ke[ie(Ce[Ae++])])},H[b]=function(Ce,Ae,ke,Be,He,ft,Tt){var Bt=8>>Ce.b,bt=Ce.Ea,Wt=Ce.K[0],jt=Ce.w;if(8>Bt)for(Ce=(1<<Ce.b)-1,jt=(1<<Bt)-1;Ae<ke;++Ae){var dt,vt=0;for(dt=0;dt<bt;++dt)dt&Ce||(vt=ie(Be[He++])),ft[Tt++]=ye(Wt[vt&jt]),vt>>=Bt}else H["VP8LMapColor"+q](Be,He,Wt,jt,ft,Tt,Ae,ke,bt)}}function nt(b,C,q,ie,ye){for(q=C+q;C<q;){var Ce=b[C++];ie[ye++]=Ce>>16&255,ie[ye++]=Ce>>8&255,ie[ye++]=Ce>>0&255}}function $t(b,C,q,ie,ye){for(q=C+q;C<q;){var Ce=b[C++];ie[ye++]=Ce>>16&255,ie[ye++]=Ce>>8&255,ie[ye++]=Ce>>0&255,ie[ye++]=Ce>>24&255}}function en(b,C,q,ie,ye){for(q=C+q;C<q;){var Ce=(Ae=b[C++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ie[ye++]=Ce,ie[ye++]=Ae}}function kn(b,C,q,ie,ye){for(q=C+q;C<q;){var Ce=(Ae=b[C++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ie[ye++]=Ce,ie[ye++]=Ae}}function Ln(b,C,q,ie,ye){for(q=C+q;C<q;){var Ce=b[C++];ie[ye++]=Ce>>0&255,ie[ye++]=Ce>>8&255,ie[ye++]=Ce>>16&255}}function Tn(b,C,q,ie,ye,Ce){if(Ce==0)for(q=C+q;C<q;)Fe(ie,((Ce=b[C++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),ye+=32;else r(ie,ye,b,C,q)}function or(b,C){H[C][0]=H[b+"0"],H[C][1]=H[b+"1"],H[C][2]=H[b+"2"],H[C][3]=H[b+"3"],H[C][4]=H[b+"4"],H[C][5]=H[b+"5"],H[C][6]=H[b+"6"],H[C][7]=H[b+"7"],H[C][8]=H[b+"8"],H[C][9]=H[b+"9"],H[C][10]=H[b+"10"],H[C][11]=H[b+"11"],H[C][12]=H[b+"12"],H[C][13]=H[b+"13"],H[C][14]=H[b+"0"],H[C][15]=H[b+"0"]}function wn(b){return b==yo||b==_o||b==Hs||b==a}function Rn(){this.eb=[],this.size=this.A=this.fb=0}function lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function We(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rn,this.f.kb=new lt,this.sd=null}function qt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function _n(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dn(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Cn(b,C){var q=b.T,ie=C.ba.f.RGBA,ye=ie.eb,Ce=ie.fb+b.ka*ie.A,Ae=Do[C.ba.S],ke=b.y,Be=b.O,He=b.f,ft=b.N,Tt=b.ea,Bt=b.W,bt=C.cc,Wt=C.dc,jt=C.Mc,dt=C.Nc,vt=b.ka,tn=b.ka+b.T,fn=b.U,nn=fn+1>>1;for(vt==0?Ae(ke,Be,null,null,He,ft,Tt,Bt,He,ft,Tt,Bt,ye,Ce,null,null,fn):(Ae(C.ec,C.fc,ke,Be,bt,Wt,jt,dt,He,ft,Tt,Bt,ye,Ce-ie.A,ye,Ce,fn),++q);vt+2<tn;vt+=2)bt=He,Wt=ft,jt=Tt,dt=Bt,ft+=b.Rc,Bt+=b.Rc,Ce+=2*ie.A,Ae(ke,(Be+=2*b.fa)-b.fa,ke,Be,bt,Wt,jt,dt,He,ft,Tt,Bt,ye,Ce-ie.A,ye,Ce,fn);return Be+=b.fa,b.j+tn<b.o?(r(C.ec,C.fc,ke,Be,fn),r(C.cc,C.dc,He,ft,nn),r(C.Mc,C.Nc,Tt,Bt,nn),q--):1&tn||Ae(ke,Be,null,null,He,ft,Tt,Bt,He,ft,Tt,Bt,ye,Ce+ie.A,null,null,fn),q}function Xt(b,C,q){var ie=b.F,ye=[b.J];if(ie!=null){var Ce=b.U,Ae=C.ba.S,ke=Ae==Vs||Ae==Hs;C=C.ba.f.RGBA;var Be=[0],He=b.ka;Be[0]=b.T,b.Kb&&(He==0?--Be[0]:(--He,ye[0]-=b.width),b.j+b.ka+b.T==b.o&&(Be[0]=b.o-b.j-He));var ft=C.eb;He=C.fb+He*C.A,b=di(ie,ye[0],b.width,Ce,Be,ft,He+(ke?0:3),C.A),t(q==Be),b&&wn(Ae)&&vo(ft,He,ke,Ce,Be,C.A)}return 0}function Gn(b){var C=b.ma,q=C.ba.S,ie=11>q,ye=q==cr||q==La||q==Vs||q==qo||q==12||wn(q);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!_u(C.Oa,b,ye?11:12))return 0;if(ye&&wn(q)&&cn(),b.da)alert("todo:use_scaling");else{if(ie){if(C.Ib=Dn,b.Kb){if(q=b.U+1>>1,C.memory=s(b.U+2*q),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+b.U,C.Mc=C.cc,C.Nc=C.dc+q,C.Ib=Cn,cn()}}else alert("todo:EmitYUV");ye&&(C.Jb=Xt,ie&&wt())}if(ie&&!Yu){for(b=0;256>b;++b)Wc[b]=89858*(b-128)+Ha>>qc,Zc[b]=-22014*(b-128)+Ha,md[b]=-45773*(b-128),Nl[b]=113618*(b-128)+Ha>>qc;for(b=_c;b<Ch;++b)C=76283*(b-16)+Ha>>qc,Kc[b-_c]=Tr(C,255),uf[b-_c]=Tr(C+8>>4,15);Yu=1}return 1}function Ut(b){var C=b.ma,q=b.U,ie=b.T;return t(!(1&b.ka)),0>=q||0>=ie?0:(q=C.Ib(b,C),C.Jb!=null&&C.Jb(b,C,q),C.Dc+=q,1)}function Jt(b){b.ma.memory=null}function vn(b,C,q,ie){return ge(b,8)!=47?0:(C[0]=ge(b,14)+1,q[0]=ge(b,14)+1,ie[0]=ge(b,1),ge(b,3)!=0?0:!b.h)}function ci(b,C){if(4>b)return b+1;var q=b-2>>1;return(2+(1&b)<<q)+ge(C,q)+1}function Sn(b,C){return 120<C?C-120:1<=(q=((q=st[C-1])>>4)*b+(8-(15&q)))?q:1;var q}function dr(b,C,q){var ie=te(q),ye=b[C+=255&ie].g-8;return 0<ye&&(le(q,q.u+8),ie=te(q),C+=b[C].value,C+=ie&(1<<ye)-1),le(q,q.u+b[C].g),b[C].value}function lr(b,C,q){return q.g+=b.g,q.value+=b.value<<C>>>0,t(8>=q.g),b.g}function bn(b,C,q){var ie=b.xc;return t((C=ie==0?0:b.vc[b.md*(q>>ie)+(C>>ie)])<b.Wb),b.Ya[C]}function yi(b,C,q,ie){var ye=b.ab,Ce=b.c*C,Ae=b.C;C=Ae+C;var ke=q,Be=ie;for(ie=b.Ta,q=b.Ua;0<ye--;){var He=b.gc[ye],ft=Ae,Tt=C,Bt=ke,bt=Be,Wt=(Be=ie,ke=q,He.Ea);switch(t(ft<Tt),t(Tt<=He.nc),He.hc){case 2:Ku(Bt,bt,(Tt-ft)*Wt,Be,ke);break;case 0:var jt=ft,dt=Tt,vt=Be,tn=ke,fn=(l=He).Ea;jt==0&&(Vo(Bt,bt,null,null,1,vt,tn),Kt(Bt,bt+1,0,0,fn-1,vt,tn+1),bt+=fn,tn+=fn,++jt);for(var nn=1<<l.b,Mn=nn-1,En=Xe(fn,l.b),Yn=l.K,l=l.w+(jt>>l.b)*En;jt<dt;){var f=Yn,v=l,x=1;for(Ho(Bt,bt,vt,tn-fn,1,vt,tn);x<fn;){var E=(x&~Mn)+nn;E>fn&&(E=fn),(0,_a[f[v++]>>8&15])(Bt,bt+ +x,vt,tn+x-fn,E-x,vt,tn+x),x=E}bt+=fn,tn+=fn,++jt&Mn||(l+=En)}Tt!=He.nc&&r(Be,ke-Wt,Be,ke+(Tt-ft-1)*Wt,Wt);break;case 1:for(Wt=Bt,dt=bt,fn=(Bt=He.Ea)-(tn=Bt&~(vt=(bt=1<<He.b)-1)),jt=Xe(Bt,He.b),nn=He.K,He=He.w+(ft>>He.b)*jt;ft<Tt;){for(Mn=nn,En=He,Yn=new Qe,l=dt+tn,f=dt+Bt;dt<l;)mn(Mn[En++],Yn),ba(Yn,Wt,dt,bt,Be,ke),dt+=bt,ke+=bt;dt<f&&(mn(Mn[En++],Yn),ba(Yn,Wt,dt,fn,Be,ke),dt+=fn,ke+=fn),++ft&vt||(He+=jt)}break;case 3:if(Bt==Be&&bt==ke&&0<He.b){for(dt=Be,Bt=Wt=ke+(Tt-ft)*Wt-(tn=(Tt-ft)*Xe(He.Ea,He.b)),bt=Be,vt=ke,jt=[],tn=(fn=tn)-1;0<=tn;--tn)jt[tn]=bt[vt+tn];for(tn=fn-1;0<=tn;--tn)dt[Bt+tn]=jt[tn];co(He,ft,Tt,Be,Wt,Be,ke)}else co(He,ft,Tt,Bt,bt,Be,ke)}ke=ie,Be=q}Be!=q&&r(ie,q,ke,Be,Ce)}function Es(b,C){var q=b.V,ie=b.Ba+b.c*b.C,ye=C-b.C;if(t(C<=b.l.o),t(16>=ye),0<ye){var Ce=b.l,Ae=b.Ta,ke=b.Ua,Be=Ce.width;if(yi(b,ye,q,ie),ye=ke=[ke],t((q=b.C)<(ie=C)),t(Ce.v<Ce.va),ie>Ce.o&&(ie=Ce.o),q<Ce.j){var He=Ce.j-q;q=Ce.j,ye[0]+=He*Be}if(q>=ie?q=0:(ye[0]+=4*Ce.v,Ce.ka=q-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=ie-q,q=1),q){if(ke=ke[0],11>(q=b.ca).S){var ft=q.f.RGBA,Tt=(ie=q.S,ye=Ce.U,Ce=Ce.T,He=ft.eb,ft.A),Bt=Ce;for(ft=ft.fb+b.Ma*ft.A;0<Bt--;){var bt=Ae,Wt=ke,jt=ye,dt=He,vt=ft;switch(ie){case is:Bo(bt,Wt,jt,dt,vt);break;case cr:go(bt,Wt,jt,dt,vt);break;case yo:go(bt,Wt,jt,dt,vt),vo(dt,vt,0,jt,1,0);break;case xa:Oo(bt,Wt,jt,dt,vt);break;case La:Tn(bt,Wt,jt,dt,vt,1);break;case _o:Tn(bt,Wt,jt,dt,vt,1),vo(dt,vt,0,jt,1,0);break;case Vs:Tn(bt,Wt,jt,dt,vt,0);break;case Hs:Tn(bt,Wt,jt,dt,vt,0),vo(dt,vt,1,jt,1,0);break;case qo:na(bt,Wt,jt,dt,vt);break;case a:na(bt,Wt,jt,dt,vt),si(dt,vt,jt,1,0);break;case vc:bs(bt,Wt,jt,dt,vt);break;default:t(0)}ke+=Be,ft+=Tt}b.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=q.height)}}b.C=C,t(b.C<=b.i)}function Co(b){var C;if(0<b.ua)return 0;for(C=0;C<b.Wb;++C){var q=b.Ya[C].G,ie=b.Ya[C].H;if(0<q[1][ie[1]+0].g||0<q[2][ie[2]+0].g||0<q[3][ie[3]+0].g)return 0}return 1}function Fi(b,C,q,ie,ye,Ce){if(b.Z!=0){var Ae=b.qd,ke=b.rd;for(t(Xr[b.Z]!=null);C<q;++C)Xr[b.Z](Ae,ke,ie,ye,ie,ye,Ce),Ae=ie,ke=ye,ye+=Ce;b.qd=Ae,b.rd=ke}}function Er(b,C){var q=b.l.ma,ie=q.Z==0||q.Z==1?b.l.j:b.C;if(ie=b.C<ie?ie:b.C,t(C<=b.l.o),C>ie){var ye=b.l.width,Ce=q.ca,Ae=q.tb+ye*ie,ke=b.V,Be=b.Ba+b.c*ie,He=b.gc;t(b.ab==1),t(He[0].hc==3),ko(He[0],ie,C,ke,Be,Ce,Ae),Fi(q,ie,C,Ce,Ae,ye)}b.C=b.Ma=C}function _i(b,C,q,ie,ye,Ce,Ae){var ke=b.$/ie,Be=b.$%ie,He=b.m,ft=b.s,Tt=q+b.$,Bt=Tt;ye=q+ie*ye;var bt=q+ie*Ce,Wt=280+ft.ua,jt=b.Pb?ke:16777216,dt=0<ft.ua?ft.Wa:null,vt=ft.wc,tn=Tt<bt?bn(ft,Be,ke):null;t(b.C<Ce),t(bt<=ye);var fn=!1;e:for(;;){for(;fn||Tt<bt;){var nn=0;if(ke>=jt){var Mn=Tt-q;t((jt=b).Pb),jt.wd=jt.m,jt.xd=Mn,0<jt.s.ua&&be(jt.s.Wa,jt.s.vb),jt=ke+Ft}if(Be&vt||(tn=bn(ft,Be,ke)),t(tn!=null),tn.Qb&&(C[Tt]=tn.qb,fn=!0),!fn)if(xe(He),tn.jc){nn=He,Mn=C;var En=Tt,Yn=tn.pd[te(nn)&io-1];t(tn.jc),256>Yn.g?(le(nn,nn.u+Yn.g),Mn[En]=Yn.value,nn=0):(le(nn,nn.u+Yn.g-256),t(256<=Yn.value),nn=Yn.value),nn==0&&(fn=!0)}else nn=dr(tn.G[0],tn.H[0],He);if(He.h)break;if(fn||256>nn){if(!fn)if(tn.nd)C[Tt]=(tn.qb|nn<<8)>>>0;else{if(xe(He),fn=dr(tn.G[1],tn.H[1],He),xe(He),Mn=dr(tn.G[2],tn.H[2],He),En=dr(tn.G[3],tn.H[3],He),He.h)break;C[Tt]=(En<<24|fn<<16|nn<<8|Mn)>>>0}if(fn=!1,++Tt,++Be>=ie&&(Be=0,++ke,Ae!=null&&ke<=Ce&&!(ke%16)&&Ae(b,ke),dt!=null))for(;Bt<Tt;)nn=C[Bt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn}else if(280>nn){if(nn=ci(nn-256,He),Mn=dr(tn.G[4],tn.H[4],He),xe(He),Mn=Sn(ie,Mn=ci(Mn,He)),He.h)break;if(Tt-q<Mn||ye-Tt<nn)break e;for(En=0;En<nn;++En)C[Tt+En]=C[Tt+En-Mn];for(Tt+=nn,Be+=nn;Be>=ie;)Be-=ie,++ke,Ae!=null&&ke<=Ce&&!(ke%16)&&Ae(b,ke);if(t(Tt<=ye),Be&vt&&(tn=bn(ft,Be,ke)),dt!=null)for(;Bt<Tt;)nn=C[Bt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn}else{if(!(nn<Wt))break e;for(fn=nn-280,t(dt!=null);Bt<Tt;)nn=C[Bt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn;nn=Tt,t(!(fn>>>(Mn=dt).Xa)),C[nn]=Mn.X[fn],fn=!0}fn||t(He.h==ce(He))}if(b.Pb&&He.h&&Tt<ye)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&be(b.s.vb,b.s.Wa);else{if(He.h)break e;Ae!=null&&Ae(b,ke>Ce?Ce:ke),b.a=0,b.$=Tt-q}return 1}return b.a=3,0}function sr(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var C=b.Wa;C!=null&&(C.X=null),b.vb=null,t(b!=null)}function rn(){var b=new al;return b==null?null:(b.a=0,b.xb=Jl,or("Predictor","VP8LPredictors"),or("Predictor","VP8LPredictors_C"),or("PredictorAdd","VP8LPredictorsAdd"),or("PredictorAdd","VP8LPredictorsAdd_C"),Ku=hn,ba=et,Bo=nt,go=$t,na=en,bs=kn,Oo=Ln,H.VP8LMapColor32b=ya,H.VP8LMapColor8b=To,b)}function Uo(b,C,q,ie,ye){var Ce=1,Ae=[b],ke=[C],Be=ie.m,He=ie.s,ft=null,Tt=0;e:for(;;){if(q)for(;Ce&&ge(Be,1);){var Bt=Ae,bt=ke,Wt=ie,jt=1,dt=Wt.m,vt=Wt.gc[Wt.ab],tn=ge(dt,2);if(Wt.Oc&1<<tn)Ce=0;else{switch(Wt.Oc|=1<<tn,vt.hc=tn,vt.Ea=Bt[0],vt.nc=bt[0],vt.K=[null],++Wt.ab,t(4>=Wt.ab),tn){case 0:case 1:vt.b=ge(dt,3)+2,jt=Uo(Xe(vt.Ea,vt.b),Xe(vt.nc,vt.b),0,Wt,vt.K),vt.K=vt.K[0];break;case 3:var fn,nn=ge(dt,8)+1,Mn=16<nn?0:4<nn?1:2<nn?2:3;if(Bt[0]=Xe(vt.Ea,Mn),vt.b=Mn,fn=jt=Uo(nn,1,0,Wt,vt.K)){var En,Yn=nn,l=vt,f=1<<(8>>l.b),v=s(f);if(v==null)fn=0;else{var x=l.K[0],E=l.w;for(v[0]=l.K[0][0],En=1;En<1*Yn;++En)v[En]=ze(x[E+En],v[En-1]);for(;En<4*f;++En)v[En]=0;l.K[0]=null,l.K[0]=v,fn=1}}jt=fn;break;case 2:break;default:t(0)}Ce=jt}}if(Ae=Ae[0],ke=ke[0],Ce&&ge(Be,1)&&!(Ce=1<=(Tt=ge(Be,4))&&11>=Tt)){ie.a=3;break e}var F;if(F=Ce)t:{var Y,ee,ue,Se=ie,Ke=Ae,je=ke,gt=Tt,At=q,Yt=Se.m,yn=Se.s,xn=[null],ar=1,Ze=0,tt=Ct[gt];n:for(;;){if(At&&ge(Yt,1)){var ht=ge(Yt,3)+2,Ot=Xe(Ke,ht),_t=Xe(je,ht),kt=Ot*_t;if(!Uo(Ot,_t,0,Se,xn))break n;for(xn=xn[0],yn.xc=ht,Y=0;Y<kt;++Y){var pe=xn[Y]>>8&65535;xn[Y]=pe,pe>=ar&&(ar=pe+1)}}if(Yt.h)break n;for(ee=0;5>ee;++ee){var Pe=$[ee];!ee&&0<gt&&(Pe+=1<<gt),Ze<Pe&&(Ze=Pe)}var Ne=o(ar*tt,O),Oe=ar,Ie=o(Oe,I);if(Ie==null)var Re=null;else t(65536>=Oe),Re=Ie;var at=s(Ze);if(Re==null||at==null||Ne==null){Se.a=1;break n}var ut=Ne;for(Y=ue=0;Y<ar;++Y){var pt=Re[Y],Lt=pt.G,St=pt.H,on=0,jn=1,Vn=0;for(ee=0;5>ee;++ee){Pe=$[ee],Lt[ee]=ut,St[ee]=ue,!ee&&0<gt&&(Pe+=1<<gt);i:{var Xn,Jr=Pe,pi=Se,Fr=at,Li=ut,as=ue,xu=0,ua=pi.m,Ph=ge(ua,1);if(i(Fr,0,0,Jr),Ph){var Ga=ge(ua,1)+1,Xu=ge(ua,1),ca=ge(ua,Xu==0?1:8);Fr[ca]=1,Ga==2&&(Fr[ca=ge(ua,8)]=1);var Io=1}else{var Ji=s(19),pf=ge(ua,4)+4;if(19<pf){pi.a=3;var Ah=0;break i}for(Xn=0;Xn<pf;++Xn)Ji[Ee[Xn]]=ge(ua,3);var Mh=void 0,kh=void 0,mf=pi,qr=Ji,gf=Jr,Ip=Fr,bc=0,Lu=mf.m,Rp=8,Fp=o(128,O);r:for(;z(Fp,0,7,qr,19);){if(ge(Lu,1)){var hl=2+2*ge(Lu,3);if((Mh=2+ge(Lu,hl))>gf)break r}else Mh=gf;for(kh=0;kh<gf&&Mh--;){xe(Lu);var jp=Fp[0+(127&te(Lu))];le(Lu,Lu.u+jp.g);var Su=jp.value;if(16>Su)Ip[kh++]=Su,Su!=0&&(Rp=Su);else{var gd=Su==16,vd=Su-16,zp=S[vd],Ea=ge(Lu,p[vd])+zp;if(kh+Ea>gf)break r;for(var Ju=gd?Rp:0;0<Ea--;)Ip[kh++]=Ju}}bc=1;break r}bc||(mf.a=3),Io=bc}(Io=Io&&!ua.h)&&(xu=z(Li,as,8,Fr,Jr)),Io&&xu!=0?Ah=xu:(pi.a=3,Ah=0)}if(Ah==0)break n;if(jn&&re[ee]==1&&(jn=ut[ue].g==0),on+=ut[ue].g,ue+=Ah,3>=ee){var wc,vf=at[0];for(wc=1;wc<Pe;++wc)at[wc]>vf&&(vf=at[wc]);Vn+=vf}}if(pt.nd=jn,pt.Qb=0,jn&&(pt.qb=(Lt[3][St[3]+0].value<<24|Lt[1][St[1]+0].value<<16|Lt[2][St[2]+0].value)>>>0,on==0&&256>Lt[0][St[0]+0].value&&(pt.Qb=1,pt.qb+=Lt[0][St[0]+0].value<<8)),pt.jc=!pt.Qb&&6>Vn,pt.jc){var xc,Ql=pt;for(xc=0;xc<io;++xc){var eu=xc,Eu=Ql.pd[eu],Yc=Ql.G[0][Ql.H[0]+eu];256<=Yc.value?(Eu.g=Yc.g+256,Eu.value=Yc.value):(Eu.g=0,Eu.value=0,eu>>=lr(Yc,8,Eu),eu>>=lr(Ql.G[1][Ql.H[1]+eu],16,Eu),eu>>=lr(Ql.G[2][Ql.H[2]+eu],0,Eu),lr(Ql.G[3][Ql.H[3]+eu],24,Eu))}}}yn.vc=xn,yn.Wb=ar,yn.Ya=Re,yn.yc=Ne,F=1;break t}F=0}if(!(Ce=F)){ie.a=3;break e}if(0<Tt){if(He.ua=1<<Tt,!fe(He.Wa,Tt)){ie.a=1,Ce=0;break e}}else He.ua=0;var Th=ie,Cu=Ae,ag=ke,tu=Th.s,yf=tu.xc;if(Th.c=Cu,Th.i=ag,tu.md=Xe(Cu,yf),tu.wc=yf==0?-1:(1<<yf)-1,q){ie.xb=Eh;break e}if((ft=s(Ae*ke))==null){ie.a=1,Ce=0;break e}Ce=(Ce=_i(ie,ft,0,Ae,ke,ke,null))&&!Be.h;break e}return Ce?(ye!=null?ye[0]=ft:(t(ft==null),t(q)),ie.$=0,q||sr(He)):sr(He),Ce}function to(b,C){var q=b.c*b.i,ie=q+C+16*C;return t(b.c<=C),b.V=s(ie),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+q+C,1)}function fo(b,C){var q=b.C,ie=C-q,ye=b.V,Ce=b.Ba+b.c*q;for(t(C<=b.l.o);0<ie;){var Ae=16<ie?16:ie,ke=b.l.ma,Be=b.l.width,He=Be*Ae,ft=ke.ca,Tt=ke.tb+Be*q,Bt=b.Ta,bt=b.Ua;yi(b,Ae,ye,Ce),Xi(Bt,bt,ft,Tt,He),Fi(ke,q,q+Ae,ft,Tt,Be),ie-=Ae,ye+=Ae*b.c,q+=Ae}t(q==C),b.C=b.Ma=C}function qi(){this.ub=this.yd=this.td=this.Rb=0}function ms(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Cr(){this.Yb=function(){var b=[];return function C(q,ie,ye){for(var Ce=ye[ie],Ae=0;Ae<Ce&&(q.push(ye.length>ie+1?[]:0),!(ye.length<ie+1));Ae++)C(q[Ae],ie+1,ye)}(b,0,[3,11]),b}()}function Cs(){this.jb=s(3),this.Wc=u([4,8],Cr),this.Xc=u([4,17],Cr)}function qu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Is(){this.ld=this.La=this.dd=this.tc=0}function ei(){this.Na=this.la=0}function Un(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hi(){this.uc=this.M=this.Nb=0,this.wa=Array(new Is),this.Y=0,this.ya=Array(new Hi),this.aa=0,this.l=new zi}function ji(){this.y=s(16),this.f=s(8),this.ea=s(8)}function no(){this.cb=this.a=0,this.sc="",this.m=new Ve,this.Od=new qi,this.Kc=new ms,this.ed=new qu,this.Qa=new Qo,this.Ic=this.$c=this.Aa=0,this.D=new hi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ve),this.ia=0,this.pb=o(4,Un),this.Pa=new Cs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ji),this.Hd=0,this.rb=Array(new ei),this.sb=0,this.wa=Array(new Is),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hi),this.L=this.aa=0,this.gd=u([4,2],Is),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wr(){var b=new no;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Kn||(Kn=Di)),b}function Pn(b,C,q){return b.a==0&&(b.a=C,b.sc=q,b.cb=0),0}function gs(b,C,q){return 3<=q&&b[C+0]==157&&b[C+1]==1&&b[C+2]==42}function bi(b,C){if(b==null)return 0;if(b.a=0,b.sc="OK",C==null)return Pn(b,2,"null VP8Io passed to VP8GetHeaders()");var q=C.data,ie=C.w,ye=C.ha;if(4>ye)return Pn(b,7,"Truncated header.");var Ce=q[ie+0]|q[ie+1]<<8|q[ie+2]<<16,Ae=b.Od;if(Ae.Rb=!(1&Ce),Ae.td=Ce>>1&7,Ae.yd=Ce>>4&1,Ae.ub=Ce>>5,3<Ae.td)return Pn(b,3,"Incorrect keyframe parameters.");if(!Ae.yd)return Pn(b,4,"Frame not displayable.");ie+=3,ye-=3;var ke=b.Kc;if(Ae.Rb){if(7>ye)return Pn(b,7,"cannot parse picture header");if(!gs(q,ie,ye))return Pn(b,3,"Bad code word");ke.c=16383&(q[ie+4]<<8|q[ie+3]),ke.Td=q[ie+4]>>6,ke.i=16383&(q[ie+6]<<8|q[ie+5]),ke.Ud=q[ie+6]>>6,ie+=7,ye-=7,b.za=ke.c+15>>4,b.Ub=ke.i+15>>4,C.width=ke.c,C.height=ke.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,i((Ce=b.Pa).jb,0,255,Ce.jb.length),t((Ce=b.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,i(Ce.Zb,0,0,Ce.Zb.length),i(Ce.Lb,0,0,Ce.Lb)}if(Ae.ub>ye)return Pn(b,7,"bad partition length");W(Ce=b.m,q,ie,Ae.ub),ie+=Ae.ub,ye-=Ae.ub,Ae.Rb&&(ke.Ld=J(Ce),ke.Kd=J(Ce)),ke=b.Qa;var Be,He=b.Pa;if(t(Ce!=null),t(ke!=null),ke.Cb=J(Ce),ke.Cb){if(ke.Bb=J(Ce),J(Ce)){for(ke.Fb=J(Ce),Be=0;4>Be;++Be)ke.Zb[Be]=J(Ce)?G(Ce,7):0;for(Be=0;4>Be;++Be)ke.Lb[Be]=J(Ce)?G(Ce,6):0}if(ke.Bb)for(Be=0;3>Be;++Be)He.jb[Be]=J(Ce)?V(Ce,8):255}else ke.Bb=0;if(Ce.Ka)return Pn(b,3,"cannot parse segment header");if((ke=b.ed).zd=J(Ce),ke.Tb=V(Ce,6),ke.wb=V(Ce,3),ke.Pc=J(Ce),ke.Pc&&J(Ce)){for(He=0;4>He;++He)J(Ce)&&(ke.vd[He]=G(Ce,6));for(He=0;4>He;++He)J(Ce)&&(ke.od[He]=G(Ce,6))}if(b.L=ke.Tb==0?0:ke.zd?1:2,Ce.Ka)return Pn(b,3,"cannot parse filter header");var ft=ye;if(ye=Be=ie,ie=Be+ft,ke=ft,b.Xb=(1<<V(b.m,2))-1,ft<3*(He=b.Xb))q=7;else{for(Be+=3*He,ke-=3*He,ft=0;ft<He;++ft){var Tt=q[ye+0]|q[ye+1]<<8|q[ye+2]<<16;Tt>ke&&(Tt=ke),W(b.Jc[+ft],q,Be,Tt),Be+=Tt,ke-=Tt,ye+=3}W(b.Jc[+He],q,Be,ke),q=Be<ie?0:5}if(q!=0)return Pn(b,q,"cannot parse partitions");for(q=V(Be=b.m,7),ye=J(Be)?G(Be,4):0,ie=J(Be)?G(Be,4):0,ke=J(Be)?G(Be,4):0,He=J(Be)?G(Be,4):0,Be=J(Be)?G(Be,4):0,ft=b.Qa,Tt=0;4>Tt;++Tt){if(ft.Cb){var Bt=ft.Zb[Tt];ft.Fb||(Bt+=q)}else{if(0<Tt){b.pb[Tt]=b.pb[0];continue}Bt=q}var bt=b.pb[Tt];bt.Sc[0]=sn[Tr(Bt+ye,127)],bt.Sc[1]=On[Tr(Bt+0,127)],bt.Eb[0]=2*sn[Tr(Bt+ie,127)],bt.Eb[1]=101581*On[Tr(Bt+ke,127)]>>16,8>bt.Eb[1]&&(bt.Eb[1]=8),bt.Qc[0]=sn[Tr(Bt+He,117)],bt.Qc[1]=On[Tr(Bt+Be,127)],bt.lc=Bt+Be}if(!Ae.Rb)return Pn(b,4,"Not a key frame.");for(J(Ce),Ae=b.Pa,q=0;4>q;++q){for(ye=0;8>ye;++ye)for(ie=0;3>ie;++ie)for(ke=0;11>ke;++ke)He=ae(Ce,os[q][ye][ie][ke])?V(Ce,8):bo[q][ye][ie][ke],Ae.Wc[q][ye].Yb[ie][ke]=He;for(ye=0;17>ye;++ye)Ae.Xc[q][ye]=Ae.Wc[q][yc[ye]]}return b.kc=J(Ce),b.kc&&(b.Bd=V(Ce,8)),b.cb=1}function Di(b,C,q,ie,ye,Ce,Ae){var ke=C[ye].Yb[q];for(q=0;16>ye;++ye){if(!ae(b,ke[q+0]))return ye;for(;!ae(b,ke[q+1]);)if(ke=C[++ye].Yb[0],q=0,ye==16)return 16;var Be=C[ye+1].Yb;if(ae(b,ke[q+2])){var He=b,ft=0;if(ae(He,(Bt=ke)[(Tt=q)+3]))if(ae(He,Bt[Tt+6])){for(ke=0,Tt=2*(ft=ae(He,Bt[Tt+8]))+(Bt=ae(He,Bt[Tt+9+ft])),ft=0,Bt=Pr[Tt];Bt[ke];++ke)ft+=ft+ae(He,Bt[ke]);ft+=3+(8<<Tt)}else ae(He,Bt[Tt+7])?(ft=7+2*ae(He,165),ft+=ae(He,145)):ft=5+ae(He,159);else ft=ae(He,Bt[Tt+4])?3+ae(He,Bt[Tt+5]):2;ke=Be[2]}else ft=1,ke=Be[1];Be=Ae+so[ye],0>(He=b).b&&he(He);var Tt,Bt=He.b,bt=(Tt=He.Ca>>1)-(He.I>>Bt)>>31;--He.b,He.Ca+=bt,He.Ca|=1,He.I-=(Tt+1&bt)<<Bt,Ce[Be]=((ft^bt)-bt)*ie[(0<ye)+0]}return 16}function Hr(b){var C=b.rb[b.sb-1];C.la=0,C.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Qt(b,C){if(b==null)return 0;if(C==null)return Pn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!bi(b,C))return 0;if(t(b.cb),C.ac==null||C.ac(C)){C.ob&&(b.L=0);var q=Sa[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=C.v-q>>4,b.zb=C.j-q>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=C.o+15+q>>4,b.Hb=C.va+15+q>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var ie=b.ed;for(q=0;4>q;++q){var ye;if(b.Qa.Cb){var Ce=b.Qa.Lb[q];b.Qa.Fb||(Ce+=ie.Tb)}else Ce=ie.Tb;for(ye=0;1>=ye;++ye){var Ae=b.gd[q][ye],ke=Ce;if(ie.Pc&&(ke+=ie.vd[0],ye&&(ke+=ie.od[0])),0<(ke=0>ke?0:63<ke?63:ke)){var Be=ke;0<ie.wb&&(Be=4<ie.wb?Be>>2:Be>>1)>9-ie.wb&&(Be=9-ie.wb),1>Be&&(Be=1),Ae.dd=Be,Ae.tc=2*ke+Be,Ae.ld=40<=ke?2:15<=ke?1:0}else Ae.tc=0;Ae.La=ye}}}q=0}else Pn(b,6,"Frame setup failed"),q=b.a;if(q=q==0){if(q){b.$c=0,0<b.Aa||(b.Ic=ff);e:{q=b.Ic,ie=4*(Be=b.za);var He=32*Be,ft=Be+1,Tt=0<b.L?Be*(0<b.Aa?2:1):0,Bt=(b.Aa==2?2:1)*Be;if((Ae=ie+832+(ye=3*(16*q+Sa[b.L])/2*He)+(Ce=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Ae)q=0;else{if(Ae>b.Vb){if(b.Vb=0,b.Ec=s(Ae),b.Fc=0,b.Ec==null){q=Pn(b,1,"no memory during frame initialization.");break e}b.Vb=Ae}Ae=b.Ec,ke=b.Fc,b.Ac=Ae,b.Bc=ke,ke+=ie,b.Gd=o(He,ji),b.Hd=0,b.rb=o(ft+1,ei),b.sb=1,b.wa=Tt?o(Tt,Is):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Be),t(!0),b.oc=Ae,b.pc=ke,ke+=832,b.ya=o(Bt,Hi),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Be),b.R=16*Be,b.B=8*Be,Be=(He=Sa[b.L])*b.R,He=He/2*b.B,b.sa=Ae,b.ta=ke+Be,b.qa=b.sa,b.ra=b.ta+16*q*b.R+He,b.Ha=b.qa,b.Ia=b.ra+8*q*b.B+He,b.$c=0,ke+=ye,b.mb=Ce?Ae:null,b.nb=Ce?ke:null,t(ke+Ce<=b.Fc+b.Vb),Hr(b),i(b.Ac,b.Bc,0,ie),q=1}}if(q){if(C.ka=0,C.y=b.sa,C.O=b.ta,C.f=b.qa,C.N=b.ra,C.ea=b.Ha,C.Vd=b.Ia,C.fa=b.R,C.Rc=b.B,C.F=null,C.J=0,!bu){for(q=-255;255>=q;++q)xi[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)ws[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)rs[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)ks[255+q]=0>q?0:255<q?255:q;bu=1}yt=Ps,Vt=Xs,An=Po,Wn=Ei,pr=Mr,Pt=Ys,Mi=Yl,oi=Qs,Ol=Ms,Go=Tl,ki=Ml,ra=kl,wa=ni,ia=Zu,oa=Wi,sa=rr,Rr=Zi,$s=sl,Gs[0]=Gr,Gs[1]=es,Gs[2]=Qn,Gs[3]=Fs,Gs[4]=vu,Gs[5]=il,Gs[6]=rl,Gs[7]=js,Gs[8]=yu,Gs[9]=za,la[0]=Js,la[1]=nl,la[2]=ts,la[3]=Rs,la[4]=Ui,la[5]=Wl,la[6]=ti,Ts[0]=Ua,Ts[1]=po,Ts[2]=Cl,Ts[3]=mr,Ts[4]=Pl,Ts[5]=Wu,Ts[6]=Zl,q=1}else q=0}q&&(q=function(bt,Wt){for(bt.M=0;bt.M<bt.Va;++bt.M){var jt,dt=bt.Jc[bt.M&bt.Xb],vt=bt.m,tn=bt;for(jt=0;jt<tn.za;++jt){var fn=vt,nn=tn,Mn=nn.Ac,En=nn.Bc+4*jt,Yn=nn.zc,l=nn.ya[nn.aa+jt];if(nn.Qa.Bb?l.$b=ae(fn,nn.Pa.jb[0])?2+ae(fn,nn.Pa.jb[2]):ae(fn,nn.Pa.jb[1]):l.$b=0,nn.kc&&(l.Ad=ae(fn,nn.Bd)),l.Za=!ae(fn,145)+0,l.Za){var f=l.Ob,v=0;for(nn=0;4>nn;++nn){var x,E=Yn[0+nn];for(x=0;4>x;++x){E=Ti[Mn[En+x]][E];for(var F=$i[ae(fn,E[0])];0<F;)F=$i[2*F+ae(fn,E[F])];E=-F,Mn[En+x]=E}r(f,v,Mn,En,4),v+=4,Yn[0+nn]=E}}else E=ae(fn,156)?ae(fn,128)?1:3:ae(fn,163)?2:0,l.Ob[0]=E,i(Mn,En,E,4),i(Yn,0,E,4);l.Dd=ae(fn,142)?ae(fn,114)?ae(fn,183)?1:3:2:0}if(tn.m.Ka)return Pn(bt,7,"Premature end-of-partition0 encountered.");for(;bt.ja<bt.za;++bt.ja){if(tn=dt,fn=(vt=bt).rb[vt.sb-1],Mn=vt.rb[vt.sb+vt.ja],jt=vt.ya[vt.aa+vt.ja],En=vt.kc?jt.Ad:0)fn.la=Mn.la=0,jt.Za||(fn.Na=Mn.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var Y,ee;if(fn=Mn,Mn=tn,En=vt.Pa.Xc,Yn=vt.ya[vt.aa+vt.ja],l=vt.pb[Yn.$b],nn=Yn.ad,f=0,v=vt.rb[vt.sb-1],E=x=0,i(nn,f,0,384),Yn.Za)var ue=0,Se=En[3];else{F=s(16);var Ke=fn.Na+v.Na;if(Ke=Kn(Mn,En[1],Ke,l.Eb,0,F,0),fn.Na=v.Na=(0<Ke)+0,1<Ke)yt(F,0,nn,f);else{var je=F[0]+3>>3;for(F=0;256>F;F+=16)nn[f+F]=je}ue=1,Se=En[0]}var gt=15&fn.la,At=15&v.la;for(F=0;4>F;++F){var Yt=1&At;for(je=ee=0;4>je;++je)gt=gt>>1|(Yt=(Ke=Kn(Mn,Se,Ke=Yt+(1&gt),l.Sc,ue,nn,f))>ue)<<7,ee=ee<<2|(3<Ke?3:1<Ke?2:nn[f+0]!=0),f+=16;gt>>=4,At=At>>1|Yt<<7,x=(x<<8|ee)>>>0}for(Se=gt,ue=At>>4,Y=0;4>Y;Y+=2){for(ee=0,gt=fn.la>>4+Y,At=v.la>>4+Y,F=0;2>F;++F){for(Yt=1&At,je=0;2>je;++je)Ke=Yt+(1&gt),gt=gt>>1|(Yt=0<(Ke=Kn(Mn,En[2],Ke,l.Qc,0,nn,f)))<<3,ee=ee<<2|(3<Ke?3:1<Ke?2:nn[f+0]!=0),f+=16;gt>>=2,At=At>>1|Yt<<5}E|=ee<<4*Y,Se|=gt<<4<<Y,ue|=(240&At)<<Y}fn.la=Se,v.la=ue,Yn.Hc=x,Yn.Gc=E,Yn.ia=43690&E?0:l.ia,En=!(x|E)}if(0<vt.L&&(vt.wa[vt.Y+vt.ja]=vt.gd[jt.$b][jt.Za],vt.wa[vt.Y+vt.ja].La|=!En),tn.Ka)return Pn(bt,7,"Premature end-of-file encountered.")}if(Hr(bt),vt=Wt,tn=1,jt=(dt=bt).D,fn=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)e:{if(jt.M=dt.M,jt.uc=fn,Xl(dt,jt),tn=1,jt=(ee=dt.D).Nb,fn=(E=Sa[dt.L])*dt.R,Mn=E/2*dt.B,F=16*jt*dt.R,je=8*jt*dt.B,En=dt.sa,Yn=dt.ta-fn+F,l=dt.qa,nn=dt.ra-Mn+je,f=dt.Ha,v=dt.Ia-Mn+je,At=(gt=ee.M)==0,x=gt>=dt.Va-1,dt.Aa==2&&Xl(dt,ee),ee.uc)for(Yt=(Ke=dt).D.M,t(Ke.D.uc),ee=Ke.yb;ee<Ke.Hb;++ee){ue=ee,Se=Yt;var yn=(xn=(Pe=Ke).D).Nb;Y=Pe.R;var xn=xn.wa[xn.Y+ue],ar=Pe.sa,Ze=Pe.ta+16*yn*Y+16*ue,tt=xn.dd,ht=xn.tc;if(ht!=0)if(t(3<=ht),Pe.L==1)0<ue&&sa(ar,Ze,Y,ht+4),xn.La&&$s(ar,Ze,Y,ht),0<Se&&oa(ar,Ze,Y,ht+4),xn.La&&Rr(ar,Ze,Y,ht);else{var Ot=Pe.B,_t=Pe.qa,kt=Pe.ra+8*yn*Ot+8*ue,pe=Pe.Ha,Pe=Pe.Ia+8*yn*Ot+8*ue;yn=xn.ld,0<ue&&(oi(ar,Ze,Y,ht+4,tt,yn),Go(_t,kt,pe,Pe,Ot,ht+4,tt,yn)),xn.La&&(ra(ar,Ze,Y,ht,tt,yn),ia(_t,kt,pe,Pe,Ot,ht,tt,yn)),0<Se&&(Mi(ar,Ze,Y,ht+4,tt,yn),Ol(_t,kt,pe,Pe,Ot,ht+4,tt,yn)),xn.La&&(ki(ar,Ze,Y,ht,tt,yn),wa(_t,kt,pe,Pe,Ot,ht,tt,yn))}}if(dt.ia&&alert("todo:DitherRow"),vt.put!=null){if(ee=16*gt,gt=16*(gt+1),At?(vt.y=dt.sa,vt.O=dt.ta+F,vt.f=dt.qa,vt.N=dt.ra+je,vt.ea=dt.Ha,vt.W=dt.Ia+je):(ee-=E,vt.y=En,vt.O=Yn,vt.f=l,vt.N=nn,vt.ea=f,vt.W=v),x||(gt-=E),gt>vt.o&&(gt=vt.o),vt.F=null,vt.J=null,dt.Fa!=null&&0<dt.Fa.length&&ee<gt&&(vt.J=Ki(dt,vt,ee,gt-ee),vt.F=dt.mb,vt.F==null&&vt.F.length==0)){tn=Pn(dt,3,"Could not decode alpha data.");break e}ee<vt.j&&(E=vt.j-ee,ee=vt.j,t(!(1&E)),vt.O+=dt.R*E,vt.N+=dt.B*(E>>1),vt.W+=dt.B*(E>>1),vt.F!=null&&(vt.J+=vt.width*E)),ee<gt&&(vt.O+=vt.v,vt.N+=vt.v>>1,vt.W+=vt.v>>1,vt.F!=null&&(vt.J+=vt.v),vt.ka=ee-vt.j,vt.U=vt.va-vt.v,vt.T=gt-ee,tn=vt.put(vt))}jt+1!=dt.Ic||x||(r(dt.sa,dt.ta-fn,En,Yn+16*dt.R,fn),r(dt.qa,dt.ra-Mn,l,nn+8*dt.B,Mn),r(dt.Ha,dt.Ia-Mn,f,v+8*dt.B,Mn))}if(!tn)return Pn(bt,6,"Output aborted.")}return 1}(b,C)),C.bc!=null&&C.bc(C),q&=1}return q?(b.cb=0,q):0}function Gt(b,C,q,ie,ye){ye=b[C+q+32*ie]+(ye>>3),b[C+q+32*ie]=-256&ye?0>ye?0:255:ye}function Ar(b,C,q,ie,ye,Ce){Gt(b,C,0,q,ie+ye),Gt(b,C,1,q,ie+Ce),Gt(b,C,2,q,ie-Ce),Gt(b,C,3,q,ie-ye)}function fi(b){return(20091*b>>16)+b}function Si(b,C,q,ie){var ye,Ce=0,Ae=s(16);for(ye=0;4>ye;++ye){var ke=b[C+0]+b[C+8],Be=b[C+0]-b[C+8],He=(35468*b[C+4]>>16)-fi(b[C+12]),ft=fi(b[C+4])+(35468*b[C+12]>>16);Ae[Ce+0]=ke+ft,Ae[Ce+1]=Be+He,Ae[Ce+2]=Be-He,Ae[Ce+3]=ke-ft,Ce+=4,C++}for(ye=Ce=0;4>ye;++ye)ke=(b=Ae[Ce+0]+4)+Ae[Ce+8],Be=b-Ae[Ce+8],He=(35468*Ae[Ce+4]>>16)-fi(Ae[Ce+12]),Gt(q,ie,0,0,ke+(ft=fi(Ae[Ce+4])+(35468*Ae[Ce+12]>>16))),Gt(q,ie,1,0,Be+He),Gt(q,ie,2,0,Be-He),Gt(q,ie,3,0,ke-ft),Ce++,ie+=32}function Ys(b,C,q,ie){var ye=b[C+0]+4,Ce=35468*b[C+4]>>16,Ae=fi(b[C+4]),ke=35468*b[C+1]>>16;Ar(q,ie,0,ye+Ae,b=fi(b[C+1]),ke),Ar(q,ie,1,ye+Ce,b,ke),Ar(q,ie,2,ye-Ce,b,ke),Ar(q,ie,3,ye-Ae,b,ke)}function Xs(b,C,q,ie,ye){Si(b,C,q,ie),ye&&Si(b,C+16,q,ie+4)}function Po(b,C,q,ie){Vt(b,C+0,q,ie,1),Vt(b,C+32,q,ie+128,1)}function Ei(b,C,q,ie){var ye;for(b=b[C+0]+4,ye=0;4>ye;++ye)for(C=0;4>C;++C)Gt(q,ie,C,ye,b)}function Mr(b,C,q,ie){b[C+0]&&Wn(b,C+0,q,ie),b[C+16]&&Wn(b,C+16,q,ie+4),b[C+32]&&Wn(b,C+32,q,ie+128),b[C+48]&&Wn(b,C+48,q,ie+128+4)}function Ps(b,C,q,ie){var ye,Ce=s(16);for(ye=0;4>ye;++ye){var Ae=b[C+0+ye]+b[C+12+ye],ke=b[C+4+ye]+b[C+8+ye],Be=b[C+4+ye]-b[C+8+ye],He=b[C+0+ye]-b[C+12+ye];Ce[0+ye]=Ae+ke,Ce[8+ye]=Ae-ke,Ce[4+ye]=He+Be,Ce[12+ye]=He-Be}for(ye=0;4>ye;++ye)Ae=(b=Ce[0+4*ye]+3)+Ce[3+4*ye],ke=Ce[1+4*ye]+Ce[2+4*ye],Be=Ce[1+4*ye]-Ce[2+4*ye],He=b-Ce[3+4*ye],q[ie+0]=Ae+ke>>3,q[ie+16]=He+Be>>3,q[ie+32]=Ae-ke>>3,q[ie+48]=He-Be>>3,ie+=64}function Ci(b,C,q){var ie,ye=C-32,Ce=wi,Ae=255-b[ye-1];for(ie=0;ie<q;++ie){var ke,Be=Ce,He=Ae+b[C-1];for(ke=0;ke<q;++ke)b[C+ke]=Be[He+b[ye+ke]];C+=32}}function es(b,C){Ci(b,C,4)}function po(b,C){Ci(b,C,8)}function nl(b,C){Ci(b,C,16)}function ts(b,C){var q;for(q=0;16>q;++q)r(b,C+32*q,b,C-32,16)}function Rs(b,C){var q;for(q=16;0<q;--q)i(b,C,b[C-1],16),C+=32}function As(b,C,q){var ie;for(ie=0;16>ie;++ie)i(C,q+32*ie,b,16)}function Js(b,C){var q,ie=16;for(q=0;16>q;++q)ie+=b[C-1+32*q]+b[C+q-32];As(ie>>5,b,C)}function Ui(b,C){var q,ie=8;for(q=0;16>q;++q)ie+=b[C-1+32*q];As(ie>>4,b,C)}function Wl(b,C){var q,ie=8;for(q=0;16>q;++q)ie+=b[C+q-32];As(ie>>4,b,C)}function ti(b,C){As(128,b,C)}function nr(b,C,q){return b+2*C+q+2>>2}function Qn(b,C){var q,ie=C-32;for(ie=new Uint8Array([nr(b[ie-1],b[ie+0],b[ie+1]),nr(b[ie+0],b[ie+1],b[ie+2]),nr(b[ie+1],b[ie+2],b[ie+3]),nr(b[ie+2],b[ie+3],b[ie+4])]),q=0;4>q;++q)r(b,C+32*q,ie,0,ie.length)}function Fs(b,C){var q=b[C-1],ie=b[C-1+32],ye=b[C-1+64],Ce=b[C-1+96];Fe(b,C+0,16843009*nr(b[C-1-32],q,ie)),Fe(b,C+32,16843009*nr(q,ie,ye)),Fe(b,C+64,16843009*nr(ie,ye,Ce)),Fe(b,C+96,16843009*nr(ye,Ce,Ce))}function Gr(b,C){var q,ie=4;for(q=0;4>q;++q)ie+=b[C+q-32]+b[C-1+32*q];for(ie>>=3,q=0;4>q;++q)i(b,C+32*q,ie,4)}function vu(b,C){var q=b[C-1+0],ie=b[C-1+32],ye=b[C-1+64],Ce=b[C-1-32],Ae=b[C+0-32],ke=b[C+1-32],Be=b[C+2-32],He=b[C+3-32];b[C+0+96]=nr(ie,ye,b[C-1+96]),b[C+1+96]=b[C+0+64]=nr(q,ie,ye),b[C+2+96]=b[C+1+64]=b[C+0+32]=nr(Ce,q,ie),b[C+3+96]=b[C+2+64]=b[C+1+32]=b[C+0+0]=nr(Ae,Ce,q),b[C+3+64]=b[C+2+32]=b[C+1+0]=nr(ke,Ae,Ce),b[C+3+32]=b[C+2+0]=nr(Be,ke,Ae),b[C+3+0]=nr(He,Be,ke)}function rl(b,C){var q=b[C+1-32],ie=b[C+2-32],ye=b[C+3-32],Ce=b[C+4-32],Ae=b[C+5-32],ke=b[C+6-32],Be=b[C+7-32];b[C+0+0]=nr(b[C+0-32],q,ie),b[C+1+0]=b[C+0+32]=nr(q,ie,ye),b[C+2+0]=b[C+1+32]=b[C+0+64]=nr(ie,ye,Ce),b[C+3+0]=b[C+2+32]=b[C+1+64]=b[C+0+96]=nr(ye,Ce,Ae),b[C+3+32]=b[C+2+64]=b[C+1+96]=nr(Ce,Ae,ke),b[C+3+64]=b[C+2+96]=nr(Ae,ke,Be),b[C+3+96]=nr(ke,Be,Be)}function il(b,C){var q=b[C-1+0],ie=b[C-1+32],ye=b[C-1+64],Ce=b[C-1-32],Ae=b[C+0-32],ke=b[C+1-32],Be=b[C+2-32],He=b[C+3-32];b[C+0+0]=b[C+1+64]=Ce+Ae+1>>1,b[C+1+0]=b[C+2+64]=Ae+ke+1>>1,b[C+2+0]=b[C+3+64]=ke+Be+1>>1,b[C+3+0]=Be+He+1>>1,b[C+0+96]=nr(ye,ie,q),b[C+0+64]=nr(ie,q,Ce),b[C+0+32]=b[C+1+96]=nr(q,Ce,Ae),b[C+1+32]=b[C+2+96]=nr(Ce,Ae,ke),b[C+2+32]=b[C+3+96]=nr(Ae,ke,Be),b[C+3+32]=nr(ke,Be,He)}function js(b,C){var q=b[C+0-32],ie=b[C+1-32],ye=b[C+2-32],Ce=b[C+3-32],Ae=b[C+4-32],ke=b[C+5-32],Be=b[C+6-32],He=b[C+7-32];b[C+0+0]=q+ie+1>>1,b[C+1+0]=b[C+0+64]=ie+ye+1>>1,b[C+2+0]=b[C+1+64]=ye+Ce+1>>1,b[C+3+0]=b[C+2+64]=Ce+Ae+1>>1,b[C+0+32]=nr(q,ie,ye),b[C+1+32]=b[C+0+96]=nr(ie,ye,Ce),b[C+2+32]=b[C+1+96]=nr(ye,Ce,Ae),b[C+3+32]=b[C+2+96]=nr(Ce,Ae,ke),b[C+3+64]=nr(Ae,ke,Be),b[C+3+96]=nr(ke,Be,He)}function za(b,C){var q=b[C-1+0],ie=b[C-1+32],ye=b[C-1+64],Ce=b[C-1+96];b[C+0+0]=q+ie+1>>1,b[C+2+0]=b[C+0+32]=ie+ye+1>>1,b[C+2+32]=b[C+0+64]=ye+Ce+1>>1,b[C+1+0]=nr(q,ie,ye),b[C+3+0]=b[C+1+32]=nr(ie,ye,Ce),b[C+3+32]=b[C+1+64]=nr(ye,Ce,Ce),b[C+3+64]=b[C+2+64]=b[C+0+96]=b[C+1+96]=b[C+2+96]=b[C+3+96]=Ce}function yu(b,C){var q=b[C-1+0],ie=b[C-1+32],ye=b[C-1+64],Ce=b[C-1+96],Ae=b[C-1-32],ke=b[C+0-32],Be=b[C+1-32],He=b[C+2-32];b[C+0+0]=b[C+2+32]=q+Ae+1>>1,b[C+0+32]=b[C+2+64]=ie+q+1>>1,b[C+0+64]=b[C+2+96]=ye+ie+1>>1,b[C+0+96]=Ce+ye+1>>1,b[C+3+0]=nr(ke,Be,He),b[C+2+0]=nr(Ae,ke,Be),b[C+1+0]=b[C+3+32]=nr(q,Ae,ke),b[C+1+32]=b[C+3+64]=nr(ie,q,Ae),b[C+1+64]=b[C+3+96]=nr(ye,ie,q),b[C+1+96]=nr(Ce,ye,ie)}function Cl(b,C){var q;for(q=0;8>q;++q)r(b,C+32*q,b,C-32,8)}function mr(b,C){var q;for(q=0;8>q;++q)i(b,C,b[C-1],8),C+=32}function Or(b,C,q){var ie;for(ie=0;8>ie;++ie)i(C,q+32*ie,b,8)}function Ua(b,C){var q,ie=8;for(q=0;8>q;++q)ie+=b[C+q-32]+b[C-1+32*q];Or(ie>>4,b,C)}function Wu(b,C){var q,ie=4;for(q=0;8>q;++q)ie+=b[C+q-32];Or(ie>>3,b,C)}function Pl(b,C){var q,ie=4;for(q=0;8>q;++q)ie+=b[C-1+32*q];Or(ie>>3,b,C)}function Zl(b,C){Or(128,b,C)}function ol(b,C,q){var ie=b[C-q],ye=b[C+0],Ce=3*(ye-ie)+aa[1020+b[C-2*q]-b[C+q]],Ae=oo[112+(Ce+4>>3)];b[C-q]=wi[255+ie+oo[112+(Ce+3>>3)]],b[C+0]=wi[255+ye-Ae]}function Al(b,C,q,ie){var ye=b[C+0],Ce=b[C+q];return No[255+b[C-2*q]-b[C-q]]>ie||No[255+Ce-ye]>ie}function Kl(b,C,q,ie){return 4*No[255+b[C-q]-b[C+0]]+No[255+b[C-2*q]-b[C+q]]<=ie}function Ir(b,C,q,ie,ye){var Ce=b[C-3*q],Ae=b[C-2*q],ke=b[C-q],Be=b[C+0],He=b[C+q],ft=b[C+2*q],Tt=b[C+3*q];return 4*No[255+ke-Be]+No[255+Ae-He]>ie?0:No[255+b[C-4*q]-Ce]<=ye&&No[255+Ce-Ae]<=ye&&No[255+Ae-ke]<=ye&&No[255+Tt-ft]<=ye&&No[255+ft-He]<=ye&&No[255+He-Be]<=ye}function Wi(b,C,q,ie){var ye=2*ie+1;for(ie=0;16>ie;++ie)Kl(b,C+ie,q,ye)&&ol(b,C+ie,q)}function rr(b,C,q,ie){var ye=2*ie+1;for(ie=0;16>ie;++ie)Kl(b,C+ie*q,1,ye)&&ol(b,C+ie*q,1)}function Zi(b,C,q,ie){var ye;for(ye=3;0<ye;--ye)Wi(b,C+=4*q,q,ie)}function sl(b,C,q,ie){var ye;for(ye=3;0<ye;--ye)rr(b,C+=4,q,ie)}function ga(b,C,q,ie,ye,Ce,Ae,ke){for(Ce=2*Ce+1;0<ye--;){if(Ir(b,C,q,Ce,Ae))if(Al(b,C,q,ke))ol(b,C,q);else{var Be=b,He=C,ft=q,Tt=Be[He-2*ft],Bt=Be[He-ft],bt=Be[He+0],Wt=Be[He+ft],jt=Be[He+2*ft],dt=27*(tn=aa[1020+3*(bt-Bt)+aa[1020+Tt-Wt]])+63>>7,vt=18*tn+63>>7,tn=9*tn+63>>7;Be[He-3*ft]=wi[255+Be[He-3*ft]+tn],Be[He-2*ft]=wi[255+Tt+vt],Be[He-ft]=wi[255+Bt+dt],Be[He+0]=wi[255+bt-dt],Be[He+ft]=wi[255+Wt-vt],Be[He+2*ft]=wi[255+jt-tn]}C+=ie}}function Ai(b,C,q,ie,ye,Ce,Ae,ke){for(Ce=2*Ce+1;0<ye--;){if(Ir(b,C,q,Ce,Ae))if(Al(b,C,q,ke))ol(b,C,q);else{var Be=b,He=C,ft=q,Tt=Be[He-ft],Bt=Be[He+0],bt=Be[He+ft],Wt=oo[112+((jt=3*(Bt-Tt))+4>>3)],jt=oo[112+(jt+3>>3)],dt=Wt+1>>1;Be[He-2*ft]=wi[255+Be[He-2*ft]+dt],Be[He-ft]=wi[255+Tt+jt],Be[He+0]=wi[255+Bt-Wt],Be[He+ft]=wi[255+bt-dt]}C+=ie}}function Yl(b,C,q,ie,ye,Ce){ga(b,C,q,1,16,ie,ye,Ce)}function Qs(b,C,q,ie,ye,Ce){ga(b,C,1,q,16,ie,ye,Ce)}function Ml(b,C,q,ie,ye,Ce){var Ae;for(Ae=3;0<Ae;--Ae)Ai(b,C+=4*q,q,1,16,ie,ye,Ce)}function kl(b,C,q,ie,ye,Ce){var Ae;for(Ae=3;0<Ae;--Ae)Ai(b,C+=4,1,q,16,ie,ye,Ce)}function Ms(b,C,q,ie,ye,Ce,Ae,ke){ga(b,C,ye,1,8,Ce,Ae,ke),ga(q,ie,ye,1,8,Ce,Ae,ke)}function Tl(b,C,q,ie,ye,Ce,Ae,ke){ga(b,C,1,ye,8,Ce,Ae,ke),ga(q,ie,1,ye,8,Ce,Ae,ke)}function ni(b,C,q,ie,ye,Ce,Ae,ke){Ai(b,C+4*ye,ye,1,8,Ce,Ae,ke),Ai(q,ie+4*ye,ye,1,8,Ce,Ae,ke)}function Zu(b,C,q,ie,ye,Ce,Ae,ke){Ai(b,C+4,1,ye,8,Ce,Ae,ke),Ai(q,ie+4,1,ye,8,Ce,Ae,ke)}function mo(){this.ba=new We,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new _n,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function zs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Us(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new O}function al(){this.xb=this.a=0,this.l=new zi,this.ca=new We,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Us,this.ab=0,this.gc=o(4,Bl),this.Oc=0}function ll(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ri(b,C,q,ie,ye,Ce,Ae){for(b=b==null?0:b[C+0],C=0;C<Ae;++C)ye[Ce+C]=b+q[ie+C]&255,b=ye[Ce+C]}function vs(b,C,q,ie,ye,Ce,Ae){var ke;if(b==null)ri(null,null,q,ie,ye,Ce,Ae);else for(ke=0;ke<Ae;++ke)ye[Ce+ke]=b[C+ke]+q[ie+ke]&255}function va(b,C,q,ie,ye,Ce,Ae){if(b==null)ri(null,null,q,ie,ye,Ce,Ae);else{var ke,Be=b[C+0],He=Be,ft=Be;for(ke=0;ke<Ae;++ke)He=ft+(Be=b[C+ke])-He,ft=q[ie+ke]+(-256&He?0>He?0:255:He)&255,He=Be,ye[Ce+ke]=ft}}function Ki(b,C,q,ie){var ye=C.width,Ce=C.o;if(t(b!=null&&C!=null),0>q||0>=ie||q+ie>Ce)return null;if(!b.Cc){if(b.ga==null){var Ae;if(b.ga=new ll,(Ae=b.ga==null)||(Ae=C.width*C.o,t(b.Gb.length==0),b.Gb=s(Ae),b.Uc=0,b.Gb==null?Ae=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=b.ga;var ke=b.Fa,Be=b.P,He=b.qc,ft=b.mb,Tt=b.nb,Bt=Be+1,bt=He-1,Wt=Ae.l;if(t(ke!=null&&ft!=null&&C!=null),Xr[0]=null,Xr[1]=ri,Xr[2]=vs,Xr[3]=va,Ae.ca=ft,Ae.tb=Tt,Ae.c=C.width,Ae.i=C.height,t(0<Ae.c&&0<Ae.i),1>=He)C=0;else if(Ae.$a=ke[Be+0]>>0&3,Ae.Z=ke[Be+0]>>2&3,Ae.Lc=ke[Be+0]>>4&3,Be=ke[Be+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Be)C=0;else if(Wt.put=Ut,Wt.ac=Gn,Wt.bc=Jt,Wt.ma=Ae,Wt.width=C.width,Wt.height=C.height,Wt.Da=C.Da,Wt.v=C.v,Wt.va=C.va,Wt.j=C.j,Wt.o=C.o,Ae.$a)e:{t(Ae.$a==1),C=rn();t:for(;;){if(C==null){C=0;break e}if(t(Ae!=null),Ae.mc=C,C.c=Ae.c,C.i=Ae.i,C.l=Ae.l,C.l.ma=Ae,C.l.width=Ae.c,C.l.height=Ae.i,C.a=0,ne(C.m,ke,Bt,bt),!Uo(Ae.c,Ae.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&Co(C.s)?(Ae.ic=1,ke=C.c*C.i,C.Ta=null,C.Ua=0,C.V=s(ke),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(Ae.ic=0,C=to(C,Ae.c)),!C))break t;C=1;break e}Ae.mc=null,C=0}else C=bt>=Ae.c*Ae.i;Ae=!C}if(Ae)return null;b.ga.Lc!=1?b.Ga=0:ie=Ce-q}t(b.ga!=null),t(q+ie<=Ce);e:{if(C=(ke=b.ga).c,Ce=ke.l.o,ke.$a==0){if(Bt=b.rc,bt=b.Vc,Wt=b.Fa,Be=b.P+1+q*C,He=b.mb,ft=b.nb+q*C,t(Be<=b.P+b.qc),ke.Z!=0)for(t(Xr[ke.Z]!=null),Ae=0;Ae<ie;++Ae)Xr[ke.Z](Bt,bt,Wt,Be,He,ft,C),Bt=He,bt=ft,ft+=C,Be+=C;else for(Ae=0;Ae<ie;++Ae)r(He,ft,Wt,Be,C),Bt=He,bt=ft,ft+=C,Be+=C;b.rc=Bt,b.Vc=bt}else{if(t(ke.mc!=null),C=q+ie,t((Ae=ke.mc)!=null),t(C<=Ae.i),Ae.C>=C)C=1;else if(ke.ic||wt(),ke.ic){ke=Ae.V,Bt=Ae.Ba,bt=Ae.c;var jt=Ae.i,dt=(Wt=1,Be=Ae.$/bt,He=Ae.$%bt,ft=Ae.m,Tt=Ae.s,Ae.$),vt=bt*jt,tn=bt*C,fn=Tt.wc,nn=dt<tn?bn(Tt,He,Be):null;t(dt<=vt),t(C<=jt),t(Co(Tt));t:for(;;){for(;!ft.h&&dt<tn;){if(He&fn||(nn=bn(Tt,He,Be)),t(nn!=null),xe(ft),256>(jt=dr(nn.G[0],nn.H[0],ft)))ke[Bt+dt]=jt,++dt,++He>=bt&&(He=0,++Be<=C&&!(Be%16)&&Er(Ae,Be));else{if(!(280>jt)){Wt=0;break t}jt=ci(jt-256,ft);var Mn,En=dr(nn.G[4],nn.H[4],ft);if(xe(ft),!(dt>=(En=Sn(bt,En=ci(En,ft)))&&vt-dt>=jt)){Wt=0;break t}for(Mn=0;Mn<jt;++Mn)ke[Bt+dt+Mn]=ke[Bt+dt+Mn-En];for(dt+=jt,He+=jt;He>=bt;)He-=bt,++Be<=C&&!(Be%16)&&Er(Ae,Be);dt<tn&&He&fn&&(nn=bn(Tt,He,Be))}t(ft.h==ce(ft))}Er(Ae,Be>C?C:Be);break t}!Wt||ft.h&&dt<vt?(Wt=0,Ae.a=ft.h?5:3):Ae.$=dt,C=Wt}else C=_i(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,C,fo);if(!C){ie=0;break e}}q+ie>=Ce&&(b.Cc=1),ie=1}if(!ie)return null;if(b.Cc&&((ie=b.ga)!=null&&(ie.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+q*ye}function N(b,C,q,ie,ye,Ce){for(;0<ye--;){var Ae,ke=b,Be=C+(q?1:0),He=b,ft=C+(q?0:3);for(Ae=0;Ae<ie;++Ae){var Tt=He[ft+4*Ae];Tt!=255&&(Tt*=32897,ke[Be+4*Ae+0]=ke[Be+4*Ae+0]*Tt>>23,ke[Be+4*Ae+1]=ke[Be+4*Ae+1]*Tt>>23,ke[Be+4*Ae+2]=ke[Be+4*Ae+2]*Tt>>23)}C+=Ce}}function ve(b,C,q,ie,ye){for(;0<ie--;){var Ce;for(Ce=0;Ce<q;++Ce){var Ae=b[C+2*Ce+0],ke=15&(He=b[C+2*Ce+1]),Be=4369*ke,He=(240&He|He>>4)*Be>>16;b[C+2*Ce+0]=(240&Ae|Ae>>4)*Be>>16&240|(15&Ae|Ae<<4)*Be>>16>>4&15,b[C+2*Ce+1]=240&He|ke}C+=ye}}function qe(b,C,q,ie,ye,Ce,Ae,ke){var Be,He,ft=255;for(He=0;He<ye;++He){for(Be=0;Be<ie;++Be){var Tt=b[C+Be];Ce[Ae+4*Be]=Tt,ft&=Tt}C+=q,Ae+=ke}return ft!=255}function ct(b,C,q,ie,ye){var Ce;for(Ce=0;Ce<ye;++Ce)q[ie+Ce]=b[C+Ce]>>8}function wt(){vo=N,si=ve,di=qe,Xi=ct}function Rt(b,C,q){H[b]=function(ie,ye,Ce,Ae,ke,Be,He,ft,Tt,Bt,bt,Wt,jt,dt,vt,tn,fn){var nn,Mn=fn-1>>1,En=ke[Be+0]|He[ft+0]<<16,Yn=Tt[Bt+0]|bt[Wt+0]<<16;t(ie!=null);var l=3*En+Yn+131074>>2;for(C(ie[ye+0],255&l,l>>16,jt,dt),Ce!=null&&(l=3*Yn+En+131074>>2,C(Ce[Ae+0],255&l,l>>16,vt,tn)),nn=1;nn<=Mn;++nn){var f=ke[Be+nn]|He[ft+nn]<<16,v=Tt[Bt+nn]|bt[Wt+nn]<<16,x=En+f+Yn+v+524296,E=x+2*(f+Yn)>>3;l=E+En>>1,En=(x=x+2*(En+v)>>3)+f>>1,C(ie[ye+2*nn-1],255&l,l>>16,jt,dt+(2*nn-1)*q),C(ie[ye+2*nn-0],255&En,En>>16,jt,dt+(2*nn-0)*q),Ce!=null&&(l=x+Yn>>1,En=E+v>>1,C(Ce[Ae+2*nn-1],255&l,l>>16,vt,tn+(2*nn-1)*q),C(Ce[Ae+2*nn+0],255&En,En>>16,vt,tn+(2*nn+0)*q)),En=f,Yn=v}1&fn||(l=3*En+Yn+131074>>2,C(ie[ye+fn-1],255&l,l>>16,jt,dt+(fn-1)*q),Ce!=null&&(l=3*Yn+En+131074>>2,C(Ce[Ae+fn-1],255&l,l>>16,vt,tn+(fn-1)*q)))}}function cn(){Do[is]=Te,Do[cr]=wu,Do[xa]=ss,Do[La]=wo,Do[Vs]=Br,Do[qo]=Gc,Do[vc]=lf,Do[yo]=wu,Do[_o]=wo,Do[Hs]=Br,Do[a]=Gc}function Bn(b){return b&-16384?0>b?0:255:b>>pd}function Fn(b,C){return Bn((19077*b>>8)+(26149*C>>8)-14234)}function er(b,C,q){return Bn((19077*b>>8)-(6419*C>>8)-(13320*q>>8)+8708)}function fr(b,C){return Bn((19077*b>>8)+(33050*C>>8)-17685)}function kr(b,C,q,ie,ye){ie[ye+0]=Fn(b,q),ie[ye+1]=er(b,C,q),ie[ye+2]=fr(b,C)}function Pi(b,C,q,ie,ye){ie[ye+0]=fr(b,C),ie[ye+1]=er(b,C,q),ie[ye+2]=Fn(b,q)}function Yr(b,C,q,ie,ye){var Ce=er(b,C,q);C=Ce<<3&224|fr(b,C)>>3,ie[ye+0]=248&Fn(b,q)|Ce>>5,ie[ye+1]=C}function ii(b,C,q,ie,ye){var Ce=240&fr(b,C)|15;ie[ye+0]=240&Fn(b,q)|er(b,C,q)>>4,ie[ye+1]=Ce}function Yi(b,C,q,ie,ye){ie[ye+0]=255,kr(b,C,q,ie,ye+1)}function ro(b,C,q,ie,ye){Pi(b,C,q,ie,ye),ie[ye+3]=255}function ys(b,C,q,ie,ye){kr(b,C,q,ie,ye),ie[ye+3]=255}function Tr(b,C){return 0>b?0:b>C?C:b}function Ao(b,C,q){H[b]=function(ie,ye,Ce,Ae,ke,Be,He,ft,Tt){for(var Bt=ft+(-2&Tt)*q;ft!=Bt;)C(ie[ye+0],Ce[Ae+0],ke[Be+0],He,ft),C(ie[ye+1],Ce[Ae+0],ke[Be+0],He,ft+q),ye+=2,++Ae,++Be,ft+=2*q;1&Tt&&C(ie[ye+0],Ce[Ae+0],ke[Be+0],He,ft)}}function ul(b,C,q){return q==0?b==0?C==0?6:5:C==0?4:0:q}function $o(b,C,q,ie,ye){switch(b>>>30){case 3:Vt(C,q,ie,ye,0);break;case 2:Pt(C,q,ie,ye);break;case 1:Wn(C,q,ie,ye)}}function Xl(b,C){var q,ie,ye=C.M,Ce=C.Nb,Ae=b.oc,ke=b.pc+40,Be=b.oc,He=b.pc+584,ft=b.oc,Tt=b.pc+600;for(q=0;16>q;++q)Ae[ke+32*q-1]=129;for(q=0;8>q;++q)Be[He+32*q-1]=129,ft[Tt+32*q-1]=129;for(0<ye?Ae[ke-1-32]=Be[He-1-32]=ft[Tt-1-32]=129:(i(Ae,ke-32-1,127,21),i(Be,He-32-1,127,9),i(ft,Tt-32-1,127,9)),ie=0;ie<b.za;++ie){var Bt=C.ya[C.aa+ie];if(0<ie){for(q=-1;16>q;++q)r(Ae,ke+32*q-4,Ae,ke+32*q+12,4);for(q=-1;8>q;++q)r(Be,He+32*q-4,Be,He+32*q+4,4),r(ft,Tt+32*q-4,ft,Tt+32*q+4,4)}var bt=b.Gd,Wt=b.Hd+ie,jt=Bt.ad,dt=Bt.Hc;if(0<ye&&(r(Ae,ke-32,bt[Wt].y,0,16),r(Be,He-32,bt[Wt].f,0,8),r(ft,Tt-32,bt[Wt].ea,0,8)),Bt.Za){var vt=Ae,tn=ke-32+16;for(0<ye&&(ie>=b.za-1?i(vt,tn,bt[Wt].y[15],4):r(vt,tn,bt[Wt+1].y,0,4)),q=0;4>q;q++)vt[tn+128+q]=vt[tn+256+q]=vt[tn+384+q]=vt[tn+0+q];for(q=0;16>q;++q,dt<<=2)vt=Ae,tn=ke+cf[q],Gs[Bt.Ob[q]](vt,tn),$o(dt,jt,16*+q,vt,tn)}else if(vt=ul(ie,ye,Bt.Ob[0]),la[vt](Ae,ke),dt!=0)for(q=0;16>q;++q,dt<<=2)$o(dt,jt,16*+q,Ae,ke+cf[q]);for(q=Bt.Gc,vt=ul(ie,ye,Bt.Dd),Ts[vt](Be,He),Ts[vt](ft,Tt),dt=jt,vt=Be,tn=He,255&(Bt=q>>0)&&(170&Bt?An(dt,256,vt,tn):pr(dt,256,vt,tn)),Bt=ft,dt=Tt,255&(q>>=8)&&(170&q?An(jt,320,Bt,dt):pr(jt,320,Bt,dt)),ye<b.Ub-1&&(r(bt[Wt].y,0,Ae,ke+480,16),r(bt[Wt].f,0,Be,He+224,8),r(bt[Wt].ea,0,ft,Tt+224,8)),q=8*Ce*b.B,bt=b.sa,Wt=b.ta+16*ie+16*Ce*b.R,jt=b.qa,Bt=b.ra+8*ie+q,dt=b.Ha,vt=b.Ia+8*ie+q,q=0;16>q;++q)r(bt,Wt+q*b.R,Ae,ke+32*q,16);for(q=0;8>q;++q)r(jt,Bt+q*b.B,Be,He+32*q,8),r(dt,vt+q*b.B,ft,Tt+32*q,8)}}function ea(b,C,q,ie,ye,Ce,Ae,ke,Be){var He=[0],ft=[0],Tt=0,Bt=Be!=null?Be.kd:0,bt=Be??new zs;if(b==null||12>q)return 7;bt.data=b,bt.w=C,bt.ha=q,C=[C],q=[q],bt.gb=[bt.gb];e:{var Wt=C,jt=q,dt=bt.gb;if(t(b!=null),t(jt!=null),t(dt!=null),dt[0]=0,12<=jt[0]&&!n(b,Wt[0],"RIFF")){if(n(b,Wt[0]+8,"WEBP")){dt=3;break e}var vt=oe(b,Wt[0]+4);if(12>vt||4294967286<vt){dt=3;break e}if(Bt&&vt>jt[0]-8){dt=7;break e}dt[0]=vt,Wt[0]+=12,jt[0]-=12}dt=0}if(dt!=0)return dt;for(vt=0<bt.gb[0],q=q[0];;){e:{var tn=b;jt=C,dt=q;var fn=He,nn=ft,Mn=Wt=[0];if((l=Tt=[Tt])[0]=0,8>dt[0])dt=7;else{if(!n(tn,jt[0],"VP8X")){if(oe(tn,jt[0]+4)!=10){dt=3;break e}if(18>dt[0]){dt=7;break e}var En=oe(tn,jt[0]+8),Yn=1+Ye(tn,jt[0]+12);if(2147483648<=Yn*(tn=1+Ye(tn,jt[0]+15))){dt=3;break e}Mn!=null&&(Mn[0]=En),fn!=null&&(fn[0]=Yn),nn!=null&&(nn[0]=tn),jt[0]+=18,dt[0]-=18,l[0]=1}dt=0}}if(Tt=Tt[0],Wt=Wt[0],dt!=0)return dt;if(jt=!!(2&Wt),!vt&&Tt)return 3;if(Ce!=null&&(Ce[0]=!!(16&Wt)),Ae!=null&&(Ae[0]=jt),ke!=null&&(ke[0]=0),Ae=He[0],Wt=ft[0],Tt&&jt&&Be==null){dt=0;break}if(4>q){dt=7;break}if(vt&&Tt||!vt&&!Tt&&!n(b,C[0],"ALPH")){q=[q],bt.na=[bt.na],bt.P=[bt.P],bt.Sa=[bt.Sa];e:{En=b,dt=C,vt=q;var l=bt.gb;fn=bt.na,nn=bt.P,Mn=bt.Sa,Yn=22,t(En!=null),t(vt!=null),tn=dt[0];var f=vt[0];for(t(fn!=null),t(Mn!=null),fn[0]=null,nn[0]=null,Mn[0]=0;;){if(dt[0]=tn,vt[0]=f,8>f){dt=7;break e}var v=oe(En,tn+4);if(4294967286<v){dt=3;break e}var x=8+v+1&-2;if(Yn+=x,0<l&&Yn>l){dt=3;break e}if(!n(En,tn,"VP8 ")||!n(En,tn,"VP8L")){dt=0;break e}if(f[0]<x){dt=7;break e}n(En,tn,"ALPH")||(fn[0]=En,nn[0]=tn+8,Mn[0]=v),tn+=x,f-=x}}if(q=q[0],bt.na=bt.na[0],bt.P=bt.P[0],bt.Sa=bt.Sa[0],dt!=0)break}q=[q],bt.Ja=[bt.Ja],bt.xa=[bt.xa];e:if(l=b,dt=C,vt=q,fn=bt.gb[0],nn=bt.Ja,Mn=bt.xa,En=dt[0],tn=!n(l,En,"VP8 "),Yn=!n(l,En,"VP8L"),t(l!=null),t(vt!=null),t(nn!=null),t(Mn!=null),8>vt[0])dt=7;else{if(tn||Yn){if(l=oe(l,En+4),12<=fn&&l>fn-12){dt=3;break e}if(Bt&&l>vt[0]-8){dt=7;break e}nn[0]=l,dt[0]+=8,vt[0]-=8,Mn[0]=Yn}else Mn[0]=5<=vt[0]&&l[En+0]==47&&!(l[En+4]>>5),nn[0]=vt[0];dt=0}if(q=q[0],bt.Ja=bt.Ja[0],bt.xa=bt.xa[0],C=C[0],dt!=0)break;if(4294967286<bt.Ja)return 3;if(ke==null||jt||(ke[0]=bt.xa?2:1),Ae=[Ae],Wt=[Wt],bt.xa){if(5>q){dt=7;break}ke=Ae,Bt=Wt,jt=Ce,b==null||5>q?b=0:5<=q&&b[C+0]==47&&!(b[C+4]>>5)?(vt=[0],l=[0],fn=[0],ne(nn=new B,b,C,q),vn(nn,vt,l,fn)?(ke!=null&&(ke[0]=vt[0]),Bt!=null&&(Bt[0]=l[0]),jt!=null&&(jt[0]=fn[0]),b=1):b=0):b=0}else{if(10>q){dt=7;break}ke=Wt,b==null||10>q||!gs(b,C+3,q-3)?b=0:(Bt=b[C+0]|b[C+1]<<8|b[C+2]<<16,jt=16383&(b[C+7]<<8|b[C+6]),b=16383&(b[C+9]<<8|b[C+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=bt.Ja||!jt||!b?b=0:(Ae&&(Ae[0]=jt),ke&&(ke[0]=b),b=1))}if(!b||(Ae=Ae[0],Wt=Wt[0],Tt&&(He[0]!=Ae||ft[0]!=Wt)))return 3;Be!=null&&(Be[0]=bt,Be.offset=C-Be.w,t(4294967286>C-Be.w),t(Be.offset==Be.ha-q));break}return dt==0||dt==7&&Tt&&Be==null?(Ce!=null&&(Ce[0]|=bt.na!=null&&0<bt.na.length),ie!=null&&(ie[0]=Ae),ye!=null&&(ye[0]=Wt),0):dt}function _u(b,C,q){var ie=C.width,ye=C.height,Ce=0,Ae=0,ke=ie,Be=ye;if(C.Da=b!=null&&0<b.Da,C.Da&&(ke=b.cd,Be=b.bd,Ce=b.v,Ae=b.j,11>q||(Ce&=-2,Ae&=-2),0>Ce||0>Ae||0>=ke||0>=Be||Ce+ke>ie||Ae+Be>ye))return 0;if(C.v=Ce,C.j=Ae,C.va=Ce+ke,C.o=Ae+Be,C.U=ke,C.T=Be,C.da=b!=null&&0<b.da,C.da){if(!Ue(ke,Be,q=[b.ib],Ce=[b.hb]))return 0;C.ib=q[0],C.hb=Ce[0]}return C.ob=b!=null&&b.ob,C.Kb=b==null||!b.Sd,C.da&&(C.ob=C.ib<3*ie/4&&C.hb<3*ye/4,C.Kb=0),1}function $a(b){if(b==null)return 2;if(11>b.S){var C=b.f.RGBA;C.fb+=(b.height-1)*C.A,C.A=-C.A}else C=b.f.kb,b=b.height,C.O+=(b-1)*C.fa,C.fa=-C.fa,C.N+=(b-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(b-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(b-1)*C.lb,C.lb=-C.lb);return 0}function Va(b,C,q,ie){if(ie==null||0>=b||0>=C)return 2;if(q!=null){if(q.Da){var ye=q.cd,Ce=q.bd,Ae=-2&q.v,ke=-2&q.j;if(0>Ae||0>ke||0>=ye||0>=Ce||Ae+ye>b||ke+Ce>C)return 2;b=ye,C=Ce}if(q.da){if(!Ue(b,C,ye=[q.ib],Ce=[q.hb]))return 2;b=ye[0],C=Ce[0]}}ie.width=b,ie.height=C;e:{var Be=ie.width,He=ie.height;if(b=ie.S,0>=Be||0>=He||!(b>=is&&13>b))b=2;else{if(0>=ie.Rd&&ie.sd==null){Ae=Ce=ye=C=0;var ft=(ke=Be*df[b])*He;if(11>b||(Ce=(He+1)/2*(C=(Be+1)/2),b==12&&(Ae=(ye=Be)*He)),(He=s(ft+2*Ce+Ae))==null){b=1;break e}ie.sd=He,11>b?((Be=ie.f.RGBA).eb=He,Be.fb=0,Be.A=ke,Be.size=ft):((Be=ie.f.kb).y=He,Be.O=0,Be.fa=ke,Be.Fd=ft,Be.f=He,Be.N=0+ft,Be.Ab=C,Be.Cd=Ce,Be.ea=He,Be.W=0+ft+Ce,Be.Db=C,Be.Ed=Ce,b==12&&(Be.F=He,Be.J=0+ft+2*Ce),Be.Tc=Ae,Be.lb=ye)}if(C=1,ye=ie.S,Ce=ie.width,Ae=ie.height,ye>=is&&13>ye)if(11>ye)b=ie.f.RGBA,C&=(ke=Math.abs(b.A))*(Ae-1)+Ce<=b.size,C&=ke>=Ce*df[ye],C&=b.eb!=null;else{b=ie.f.kb,ke=(Ce+1)/2,ft=(Ae+1)/2,Be=Math.abs(b.fa),He=Math.abs(b.Ab);var Tt=Math.abs(b.Db),Bt=Math.abs(b.lb),bt=Bt*(Ae-1)+Ce;C&=Be*(Ae-1)+Ce<=b.Fd,C&=He*(ft-1)+ke<=b.Cd,C=(C&=Tt*(ft-1)+ke<=b.Ed)&Be>=Ce&He>=ke&Tt>=ke,C&=b.y!=null,C&=b.f!=null,C&=b.ea!=null,ye==12&&(C&=Bt>=Ce,C&=bt<=b.Tc,C&=b.F!=null)}else C=0;b=C?0:2}}return b!=0||q!=null&&q.fd&&(b=$a(ie)),b}var io=64,ta=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_s=24,ns=32,cl=8,Mo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Je("Predictor0","PredictorAdd0"),H.Predictor0=function(){return 4278190080},H.Predictor1=function(b){return b},H.Predictor2=function(b,C,q){return C[q+0]},H.Predictor3=function(b,C,q){return C[q+1]},H.Predictor4=function(b,C,q){return C[q-1]},H.Predictor5=function(b,C,q){return it(it(b,C[q+1]),C[q+0])},H.Predictor6=function(b,C,q){return it(b,C[q-1])},H.Predictor7=function(b,C,q){return it(b,C[q+0])},H.Predictor8=function(b,C,q){return it(C[q-1],C[q+0])},H.Predictor9=function(b,C,q){return it(C[q+0],C[q+1])},H.Predictor10=function(b,C,q){return it(it(b,C[q-1]),it(C[q+0],C[q+1]))},H.Predictor11=function(b,C,q){var ie=C[q+0];return 0>=Nt(ie>>24&255,b>>24&255,(C=C[q-1])>>24&255)+Nt(ie>>16&255,b>>16&255,C>>16&255)+Nt(ie>>8&255,b>>8&255,C>>8&255)+Nt(255&ie,255&b,255&C)?ie:b},H.Predictor12=function(b,C,q){var ie=C[q+0];return(Mt((b>>24&255)+(ie>>24&255)-((C=C[q-1])>>24&255))<<24|Mt((b>>16&255)+(ie>>16&255)-(C>>16&255))<<16|Mt((b>>8&255)+(ie>>8&255)-(C>>8&255))<<8|Mt((255&b)+(255&ie)-(255&C)))>>>0},H.Predictor13=function(b,C,q){var ie=C[q-1];return(xt((b=it(b,C[q+0]))>>24&255,ie>>24&255)<<24|xt(b>>16&255,ie>>16&255)<<16|xt(b>>8&255,ie>>8&255)<<8|xt(b>>0&255,ie>>0&255))>>>0};var Vo=H.PredictorAdd0;H.PredictorAdd1=Kt,Je("Predictor2","PredictorAdd2"),Je("Predictor3","PredictorAdd3"),Je("Predictor4","PredictorAdd4"),Je("Predictor5","PredictorAdd5"),Je("Predictor6","PredictorAdd6"),Je("Predictor7","PredictorAdd7"),Je("Predictor8","PredictorAdd8"),Je("Predictor9","PredictorAdd9"),Je("Predictor10","PredictorAdd10"),Je("Predictor11","PredictorAdd11"),Je("Predictor12","PredictorAdd12"),Je("Predictor13","PredictorAdd13");var Ho=H.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Ku,co=H.ColorIndexInverseTransform,ya=H.MapARGB,ko=H.VP8LColorIndexInverseTransformAlpha,To=H.MapAlpha,_a=H.VP8LPredictorsAdd=[];_a.length=16,(H.VP8LPredictors=[]).length=16,(H.VP8LPredictorsAdd_C=[]).length=16,(H.VP8LPredictors_C=[]).length=16;var ba,Bo,go,na,bs,Oo,yt,Vt,Pt,An,Wn,pr,Mi,oi,Ol,Go,ki,ra,wa,ia,oa,sa,Rr,$s,vo,si,di,Xi,xi=s(511),ws=s(2041),rs=s(225),ks=s(767),bu=0,aa=ws,oo=rs,wi=ks,No=xi,is=0,cr=1,xa=2,La=3,Vs=4,qo=5,vc=6,yo=7,_o=8,Hs=9,a=10,p=[2,3,7],S=[3,3,11],$=[280,256,256,256,40],re=[0,1,1,1,0],Ee=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],st=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ct=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ft=8,sn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],On=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Kn=null,Pr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],so=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$i=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bo=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ti=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],os=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],la=[],Gs=[],Ts=[],Eh=1,Jl=2,Xr=[],Do=[];Rt("UpsampleRgbLinePair",kr,3),Rt("UpsampleBgrLinePair",Pi,3),Rt("UpsampleRgbaLinePair",ys,4),Rt("UpsampleBgraLinePair",ro,4),Rt("UpsampleArgbLinePair",Yi,4),Rt("UpsampleRgba4444LinePair",ii,2),Rt("UpsampleRgb565LinePair",Yr,2);var Te=H.UpsampleRgbLinePair,ss=H.UpsampleBgrLinePair,wu=H.UpsampleRgbaLinePair,wo=H.UpsampleBgraLinePair,Br=H.UpsampleArgbLinePair,Gc=H.UpsampleRgba4444LinePair,lf=H.UpsampleRgb565LinePair,qc=16,Ha=1<<qc-1,_c=-227,Ch=482,pd=6,Yu=0,Wc=s(256),Nl=s(256),md=s(256),Zc=s(256),Kc=s(Ch-_c),uf=s(Ch-_c);Ao("YuvToRgbRow",kr,3),Ao("YuvToBgrRow",Pi,3),Ao("YuvToRgbaRow",ys,4),Ao("YuvToBgraRow",ro,4),Ao("YuvToArgbRow",Yi,4),Ao("YuvToRgba4444Row",ii,2),Ao("YuvToRgb565Row",Yr,2);var cf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sa=[0,2,8],hf=[8,7,6,4,4,2,2,2,1,1,1,1],ff=1;this.WebPDecodeRGBA=function(b,C,q,ie,ye){var Ce=cr,Ae=new mo,ke=new We;Ae.ba=ke,ke.S=Ce,ke.width=[ke.width],ke.height=[ke.height];var Be=ke.width,He=ke.height,ft=new qt;if(ft==null||b==null)var Tt=2;else t(ft!=null),Tt=ea(b,C,q,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(Tt!=0?Be=0:(Be!=null&&(Be[0]=ft.width[0]),He!=null&&(He[0]=ft.height[0]),Be=1),Be){ke.width=ke.width[0],ke.height=ke.height[0],ie!=null&&(ie[0]=ke.width),ye!=null&&(ye[0]=ke.height);e:{if(ie=new zi,(ye=new zs).data=b,ye.w=C,ye.ha=q,ye.kd=1,C=[0],t(ye!=null),((b=ea(ye.data,ye.w,ye.ha,null,null,null,C,null,ye))==0||b==7)&&C[0]&&(b=4),(C=b)==0){if(t(Ae!=null),ie.data=ye.data,ie.w=ye.w+ye.offset,ie.ha=ye.ha-ye.offset,ie.put=Ut,ie.ac=Gn,ie.bc=Jt,ie.ma=Ae,ye.xa){if((b=rn())==null){Ae=1;break e}if(function(Bt,bt){var Wt=[0],jt=[0],dt=[0];t:for(;;){if(Bt==null)return 0;if(bt==null)return Bt.a=2,0;if(Bt.l=bt,Bt.a=0,ne(Bt.m,bt.data,bt.w,bt.ha),!vn(Bt.m,Wt,jt,dt)){Bt.a=3;break t}if(Bt.xb=Jl,bt.width=Wt[0],bt.height=jt[0],!Uo(Wt[0],jt[0],1,Bt,null))break t;return 1}return t(Bt.a!=0),0}(b,ie)){if(ie=(C=Va(ie.width,ie.height,Ae.Oa,Ae.ba))==0){t:{ie=b;n:for(;;){if(ie==null){ie=0;break t}if(t(ie.s.yc!=null),t(ie.s.Ya!=null),t(0<ie.s.Wb),t((q=ie.l)!=null),t((ye=q.ma)!=null),ie.xb!=0){if(ie.ca=ye.ba,ie.tb=ye.tb,t(ie.ca!=null),!_u(ye.Oa,q,La)){ie.a=2;break n}if(!to(ie,q.width)||q.da)break n;if((q.da||wn(ie.ca.S))&&wt(),11>ie.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ie.ca.f.kb.F!=null&&wt()),ie.Pb&&0<ie.s.ua&&ie.s.vb.X==null&&!fe(ie.s.vb,ie.s.Wa.Xa)){ie.a=1;break n}ie.xb=0}if(!_i(ie,ie.V,ie.Ba,ie.c,ie.i,q.o,Es))break n;ye.Dc=ie.Ma,ie=1;break t}t(ie.a!=0),ie=0}ie=!ie}ie&&(C=b.a)}else C=b.a}else{if((b=new wr)==null){Ae=1;break e}if(b.Fa=ye.na,b.P=ye.P,b.qc=ye.Sa,bi(b,ie)){if((C=Va(ie.width,ie.height,Ae.Oa,Ae.ba))==0){if(b.Aa=0,q=Ae.Oa,t((ye=b)!=null),q!=null){if(0<(Be=0>(Be=q.Md)?0:100<Be?255:255*Be/100)){for(He=ft=0;4>He;++He)12>(Tt=ye.pb[He]).lc&&(Tt.ia=Be*hf[0>Tt.lc?0:Tt.lc]>>3),ft|=Tt.ia;ft&&(alert("todo:VP8InitRandom"),ye.ia=1)}ye.Ga=q.Id,100<ye.Ga?ye.Ga=100:0>ye.Ga&&(ye.Ga=0)}Qt(b,ie)||(C=b.a)}}else C=b.a}C==0&&Ae.Oa!=null&&Ae.Oa.fd&&(C=$a(Ae.ba))}Ae=C}Ce=Ae!=0?null:11>Ce?ke.f.RGBA.eb:ke.f.kb.y}else Ce=null;return Ce};var df=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(H,R){for(var Z="",z=0;z<4;z++)Z+=String.fromCharCode(H[R++]);return Z}function g(H,R){return(H[R+0]<<0|H[R+1]<<8|H[R+2]<<16)>>>0}function y(H,R){return(H[R+0]<<0|H[R+1]<<8|H[R+2]<<16|H[R+3]<<24)>>>0}new h;var w=[0],_=[0],P=[],T=new h,j=e,D=function(H,R){var Z={},z=0,O=!1,k=0,I=0;if(Z.frames=[],!function(te,ce,le,xe){for(var he=0;he<xe;he++)if(te[ce+he]!=le.charCodeAt(he))return!0;return!1}(H,R,"RIFF",4)){var W,V;for(y(H,R+=4),R+=8;R<H.length;){var G=d(H,R),ne=y(H,R+=4);R+=4;var _e=ne+(1&ne);switch(G){case"VP8 ":case"VP8L":Z.frames[z]===void 0&&(Z.frames[z]={}),(B=Z.frames[z]).src_off=O?I:R-8,B.src_size=k+ne+8,z++,O&&(O=!1,k=0,I=0);break;case"VP8X":(B=Z.header={}).feature_flags=H[R];var ge=R+4;B.canvas_width=1+g(H,ge),ge+=3,B.canvas_height=1+g(H,ge),ge+=3;break;case"ALPH":O=!0,k=_e+8,I=R-8;break;case"ANIM":(B=Z.header).bgcolor=y(H,R),ge=R+4,B.loop_count=(W=H)[(V=ge)+0]<<0|W[V+1]<<8,ge+=2;break;case"ANMF":var Ve,B;(B=Z.frames[z]={}).offset_x=2*g(H,R),R+=3,B.offset_y=2*g(H,R),R+=3,B.width=1+g(H,R),R+=3,B.height=1+g(H,R),R+=3,B.duration=g(H,R),R+=3,Ve=H[R++],B.dispose=1&Ve,B.blend=Ve>>1&1}G!="ANMF"&&(R+=_e)}return Z}}(j,0);D.response=j,D.rgbaoutput=!0,D.dataurl=!1;var U=D.header?D.header:null,K=D.frames?D.frames:null;if(U){U.loop_counter=U.loop_count,w=[U.canvas_height],_=[U.canvas_width];for(var X=0;X<K.length&&K[X].blend!=0;X++);}var se=K[0],me=T.WebPDecodeRGBA(j,se.src_off,se.src_size,_,w);se.rgba=me,se.imgwidth=_[0],se.imgheight=w[0];for(var Le=0;Le<_[0]*w[0]*4;Le++)P[Le]=me[Le];return this.width=_,this.height=w,this.data=P,this}(function(e){var t=function(){return typeof b1=="function"},n=function(w,_,P,T){var j=4,D=o;switch(T){case e.image_compression.FAST:j=1,D=s;break;case e.image_compression.MEDIUM:j=6,D=u;break;case e.image_compression.SLOW:j=9,D=h}w=r(w,_,P,D);var U=b1(w,{level:j});return e.__addimage__.arrayBufferToBinaryString(U)},r=function(w,_,P,T){for(var j,D,U,K=w.length/_,X=new Uint8Array(w.length+K),se=g(),me=0;me<K;me+=1){if(U=me*_,j=w.subarray(U,U+_),T)X.set(T(j,P,D),U+me);else{for(var Le,H=se.length,R=[];Le<H;Le+=1)R[Le]=se[Le](j,P,D);var Z=y(R.concat());X.set(R[Z],U+me)}D=j}return X},i=function(w){var _=Array.apply([],w);return _.unshift(0),_},s=function(w,_){var P,T=[],j=w.length;T[0]=1;for(var D=0;D<j;D+=1)P=w[D-_]||0,T[D+1]=w[D]-P+256&255;return T},o=function(w,_,P){var T,j=[],D=w.length;j[0]=2;for(var U=0;U<D;U+=1)T=P&&P[U]||0,j[U+1]=w[U]-T+256&255;return j},u=function(w,_,P){var T,j,D=[],U=w.length;D[0]=3;for(var K=0;K<U;K+=1)T=w[K-_]||0,j=P&&P[K]||0,D[K+1]=w[K]+256-(T+j>>>1)&255;return D},h=function(w,_,P){var T,j,D,U,K=[],X=w.length;K[0]=4;for(var se=0;se<X;se+=1)T=w[se-_]||0,j=P&&P[se]||0,D=P&&P[se-_]||0,U=d(T,j,D),K[se+1]=w[se]-U+256&255;return K},d=function(w,_,P){if(w===_&&_===P)return w;var T=Math.abs(_-P),j=Math.abs(w-P),D=Math.abs(w+_-P-P);return T<=j&&T<=D?w:j<=D?_:P},g=function(){return[i,s,o,u,h]},y=function(w){var _=w.map(function(P){return P.reduce(function(T,j){return T+Math.abs(j)},0)});return _.indexOf(Math.min.apply(null,_))};e.processPNG=function(w,_,P,T){var j,D,U,K,X,se,me,Le,H,R,Z,z,O,k,I,W=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(U=new gF(w)).imgData,D=U.bits,j=U.colorSpace,X=U.colors,[4,6].indexOf(U.colorType)!==-1){if(U.bits===8){H=(Le=U.pixelBitlength==32?new Uint32Array(U.decodePixels().buffer):U.pixelBitlength==16?new Uint16Array(U.decodePixels().buffer):new Uint8Array(U.decodePixels().buffer)).length,Z=new Uint8Array(H*U.colors),R=new Uint8Array(H);var G,ne=U.pixelBitlength-U.bits;for(k=0,I=0;k<H;k++){for(O=Le[k],G=0;G<ne;)Z[I++]=O>>>G&255,G+=U.bits;R[k]=O>>>G&255}}if(U.bits===16){H=(Le=new Uint32Array(U.decodePixels().buffer)).length,Z=new Uint8Array(H*(32/U.pixelBitlength)*U.colors),R=new Uint8Array(H*(32/U.pixelBitlength)),z=U.colors>1,k=0,I=0;for(var _e=0;k<H;)O=Le[k++],Z[I++]=O>>>0&255,z&&(Z[I++]=O>>>16&255,O=Le[k++],Z[I++]=O>>>0&255),R[_e++]=O>>>16&255;D=8}T!==e.image_compression.NONE&&t()?(w=n(Z,U.width*U.colors,U.colors,T),me=n(R,U.width,1,T)):(w=Z,me=R,W=void 0)}if(U.colorType===3&&(j=this.color_spaces.INDEXED,se=U.palette,U.transparency.indexed)){var ge=U.transparency.indexed,Ve=0;for(k=0,H=ge.length;k<H;++k)Ve+=ge[k];if((Ve/=255)===H-1&&ge.indexOf(0)!==-1)K=[ge.indexOf(0)];else if(Ve!==H){for(Le=U.decodePixels(),R=new Uint8Array(Le.length),k=0,H=Le.length;k<H;k++)R[k]=ge[Le[k]];me=n(R,U.width,1)}}var B=function(te){var ce;switch(te){case e.image_compression.FAST:ce=11;break;case e.image_compression.MEDIUM:ce=13;break;case e.image_compression.SLOW:ce=14;break;default:ce=12}return ce}(T);return W===this.decode.FLATE_DECODE&&(V="/Predictor "+B+" "),V+="/Colors "+X+" /BitsPerComponent "+D+" /Columns "+U.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:P,data:w,index:_,filter:W,decodeParameters:V,transparency:K,palette:se,sMask:me,predictor:B,width:U.width,height:U.height,bitsPerComponent:D,colorSpace:j}}}})(_r.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new vF(t),o=s.width,u=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var d={data:h,width:o,height:u},g=new pv(100).encode(d,100);return e.processJPEG.call(this,g,n,r,i)},e.processGIF87A=e.processGIF89A}(_r.API),Tu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Tu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Qi.log("bit decode error:"+n)}},Tu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[s>>7-u&1];this.data[o+4*u]=h.blue,this.data[o+4*u+1]=h.green,this.data[o+4*u+2]=h.red,this.data[o+4*u+3]=255}n!==0&&(this.pos+=4-n)}},Tu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,h=15&s,d=this.palette[u];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[h],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Tu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Tu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,u=(s>>5&t)/t*255|0,h=(s>>10&t)/t*255|0,d=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=h,this.data[g+1]=u,this.data[g+2]=o,this.data[g+3]=d}this.pos+=e}},Tu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,h=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=h,this.data[g+2]=u,this.data[g+3]=255}this.pos+=e}},Tu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Tu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},Tu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Tu(t,!1),o=s.width,u=s.height,h={data:s.getData(),width:o,height:u},d=new pv(100).encode(h,100);return e.processJPEG.call(this,d,n,r,i)}}(_r.API),jb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new jb(t),o=s.width,u=s.height,h={data:s.getData(),width:o,height:u},d=new pv(100).encode(h,100);return e.processJPEG.call(this,d,n,r,i)}}(_r.API),_r.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,h=0,d=0;d<i;d+=4){var g=r[d],y=r[d+1],w=r[d+2],_=r[d+3];s[u++]=g,s[u++]=y,s[u++]=w,o[h++]=_}var P=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:P,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},_r.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mf=_r.API,b0=Mf.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,y=t.doKerning!==!1,w=0,_=e.length,P=0,T=u[0]||h,j=[];for(n=0;n<_;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?j.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(w=y&&Vi(d[r])==="object"&&!isNaN(parseInt(d[r][P],10))?d[r][P]/g:0,j.push((u[r]||T)/h+w)),P=r;return j},Db=Mf.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Mf.processArabic&&(e=Mf.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:b0.apply(this,arguments).reduce(function(s,o){return s+o},0)},Ib=function(e,t,n,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+t[s]<n;)u+=t[s],s++;i.push(e.slice(0,s));var h=s;for(u=0;s!==o;)u+t[s]>r&&(i.push(e.slice(h,s)),u=0,h=s),u+=t[s],s++;return h!==s&&i.push(e.slice(h,s)),i},Rb=function(e,t,n){n||(n={});var r,i,s,o,u,h,d,g=[],y=[g],w=n.textIndent||0,_=0,P=0,T=e.split(" "),j=b0.apply(this,[" ",n])[0];if(h=n.lineIndent===-1?T[0].length+2:n.lineIndent||0){var D=Array(h).join(" "),U=[];T.map(function(X){(X=X.split(/\s*\n/)).length>1?U=U.concat(X.map(function(se,me){return(me&&se.length?`
`:"")+se})):U.push(X[0])}),T=U,h=Db.apply(this,[D,n])}for(s=0,o=T.length;s<o;s++){var K=0;if(r=T[s],h&&r[0]==`
`&&(r=r.substr(1),K=1),w+_+(P=(i=b0.apply(this,[r,n])).reduce(function(X,se){return X+se},0))>t||K){if(P>t){for(u=Ib.apply(this,[r,i,t-(w+_),t]),g.push(u.shift()),g=[u.pop()];u.length;)y.push([u.shift()]);P=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(X,se){return X+se},0)}else g=[r];y.push(g),w=P+h,_=j}else g.push(r),w+=_+P,_=j}return d=h?function(X,se){return(se?D:"")+X.join(" ")}:function(X){return X.join(" ")},y.map(d)},Mf.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var u,h,d=[];for(u=0,h=r.length;u<h;u++)d=d.concat(Rb.apply(this,[r[u],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var w,_,P,T,j=["{"];for(var D in y){if(w=y[D],isNaN(parseInt(D,10))?_="'"+D+"'":(D=parseInt(D,10),_=(_=s(D).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof w=="number")w<0?(P=s(w).slice(3),T="-"):(P=s(w).slice(2),T=""),P=T+P.slice(0,-1)+r[P.slice(-1)];else{if(Vi(w)!=="object")throw new Error("Don't know what to do with value type "+Vi(w)+".");P=o(w)}j.push(_+P)}return j.push("}"),j.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,_,P,T,j={},D=1,U=j,K=[],X="",se="",me=y.length-1,Le=1;Le<me;Le+=1)(T=y[Le])=="'"?w?(P=w.join(""),w=void 0):w=[]:w?w.push(T):T=="{"?(K.push([U,P]),U={},P=void 0):T=="}"?((_=K.pop())[0][_[1]]=U,P=void 0,U=_[0]):T=="-"?D=-1:P===void 0?n.hasOwnProperty(T)?(X+=n[T],P=parseInt(X,16)*D,D=1,X=""):X+=T:n.hasOwnProperty(T)?(se+=n[T],U[P]=parseInt(se,16)*D,D=1,P=void 0,se=""):se+=T;return j},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var w=y.font,_=g.Unicode[w.postScriptName];_&&(w.metadata.Unicode={},w.metadata.Unicode.widths=_.widths,w.metadata.Unicode.kerning=_.kerning);var P=d.Unicode[w.postScriptName];P&&(w.metadata.Unicode.encoding=P,w.encoding=P.codePages[0])}])}(_r.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(rp(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(_r),function(e){function t(){return(Lr.canvg?Promise.resolve(Lr.canvg):qh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}_r.API.addSvgAsImage=function(n,r,i,s,o,u,h,d){if(isNaN(r)||isNaN(i))throw Qi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Qi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=o;var y=g.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,g.width,g.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return t().then(function(P){return P.fromString(y,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(w)}).then(function(){_.addImage(g.toDataURL("image/jpeg",1),r,i,s,o,h,d)})}}(),_r.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},_r.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),h=[],d=0,g=0,y=0;function w(P,T){var j,D=!1;for(j=0;j<P.length;j+=1)P[j]===T&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var _=u.length;for(y=0;y<_;y+=1)n[u[y]].value=n[u[y]].defaultValue,n[u[y]].explicitSet=!1}if(Vi(e)==="object"){for(i in e)if(s=e[i],w(u,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&w(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")h.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(r=!1);r===!0&&h.push([s[d][0]-1,s[d][1]-1].join(" "))}n[i].value="["+h.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,T=[];for(P in n)n[P].explicitSet===!0&&(n[P].type==="name"?T.push("/"+P+" /"+n[P].value):T.push("/"+P+" "+n[P].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+h),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(_r.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,o){for(var u,h=o.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],y=0,w=s.length;y<w;++y){if(u=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(y),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},r=function(s){var o,u,h,d,g,y,w;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,w=(u=Object.keys(s).sort(function(_,P){return _-P})).length;y<w;y++)o=u[y],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),h.push("<"+o+"><"+d+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var u=o.font,h=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,w=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),_="",P=0;P<w.length;P++)_+=String.fromCharCode(w[P]);var T=d();g({data:_,addLength1:!0,objectId:T}),h("endobj");var j=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var D=d();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Ff(u.fontName)),h("/FontFile2 "+T+" 0 R"),h("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var U=d();h("<<"),h("/Type /Font"),h("/BaseFont /"+Ff(u.fontName)),h("/FontDescriptor "+D+" 0 R"),h("/W "+e.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=d(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+j+" 0 R"),h("/BaseFont /"+Ff(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+U+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var u=o.font,h=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,w="",_=0;_<y.length;_++)w+=String.fromCharCode(y[_]);var P=d();g({data:w,addLength1:!0,objectId:P}),h("endobj");var T=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:T}),h("endobj");var j=d();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+P+" 0 R"),h("/Flags 96"),h("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Ff(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=d();for(var D=0;D<u.metadata.hmtx.widths.length;D++)u.metadata.hmtx.widths[D]=parseInt(u.metadata.hmtx.widths[D]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+Ff(u.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",h=s.x,d=s.y,g=s.options||{},y=s.mutex||{},w=y.pdfEscape,_=y.activeFontKey,P=y.fonts,T=_,j="",D=0,U="",K=P[T].encoding;if(P[T].encoding!=="Identity-H")return{text:u,x:h,y:d,options:g,mutex:y};for(U=u,T=_,Array.isArray(u)&&(U=u[0]),D=0;D<U.length;D+=1)P[T].metadata.hasOwnProperty("cmap")&&(o=P[T].metadata.cmap.unicode.codeMap[U[D].charCodeAt(0)]),o||U[D].charCodeAt(0)<256&&P[T].metadata.hasOwnProperty("Unicode")?j+=U[D]:j+="";var X="";return parseInt(T.slice(1))<14||K==="WinAnsiEncoding"?X=w(j,T).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(X=n(j,P[T])),y.isHex=!0,{text:X,x:h,y:d,options:g,mutex:y}};t.events.push(["postProcessText",function(s){var o=s.text||"",u=[],h={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?u.push([i(Object.assign({},h,{text:o[d][0]})).text,o[d][1],o[d][2]]):u.push(i(Object.assign({},h,{text:o[d]})).text);s.text=u}else s.text=i(Object.assign({},h,{text:o})).text}])}(_r),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(_r.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,h,d,g,y=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],D=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,K=0;this.__bidiEngine__={};var X=function(z){var O=z.charCodeAt(),k=O>>8,I=T[k];return I!==void 0?y[256*I+(255&O)]:k===252||k===253?"AL":D.test(k)?"L":k===8?"R":"N"},se=function(z){for(var O,k=0;k<z.length;k++){if((O=X(z.charAt(k)))==="L")return!1;if(O==="R")return!0}return!1},me=function(z,O,k,I){var W,V,G,ne,_e=O[I];switch(_e){case"L":case"R":U=!1;break;case"N":case"AN":break;case"EN":U&&(_e="AN");break;case"AL":U=!0,_e="R";break;case"WS":_e="N";break;case"CS":I<1||I+1>=O.length||(W=k[I-1])!=="EN"&&W!=="AN"||(V=O[I+1])!=="EN"&&V!=="AN"?_e="N":U&&(V="AN"),_e=V===W?V:"N";break;case"ES":_e=(W=I>0?k[I-1]:"B")==="EN"&&I+1<O.length&&O[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&k[I-1]==="EN"){_e="EN";break}if(U){_e="N";break}for(G=I+1,ne=O.length;G<ne&&O[G]==="ET";)G++;_e=G<ne&&O[G]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(ne=O.length,G=I+1;G<ne&&O[G]==="NSM";)G++;if(G<ne){var ge=z[I],Ve=ge>=1425&&ge<=2303||ge===64286;if(W=O[G],Ve&&(W==="R"||W==="AL")){_e="R";break}}}_e=I<1||(W=O[I-1])==="B"?"N":k[I-1];break;case"B":U=!1,i=!0,_e=K;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"BN":_e="N"}return _e},Le=function(z,O,k){var I=z.split("");return k&&H(I,k,{hiLevel:K}),I.reverse(),O&&O.reverse(),I.join("")},H=function(z,O,k){var I,W,V,G,ne,_e=-1,ge=z.length,Ve=0,B=[],te=K?_:w,ce=[];for(U=!1,i=!1,s=!1,W=0;W<ge;W++)ce[W]=X(z[W]);for(V=0;V<ge;V++){if(ne=Ve,B[V]=me(z,ce,B,V),I=240&(Ve=te[ne][P[B[V]]]),Ve&=15,O[V]=G=te[Ve][5],I>0)if(I===16){for(W=_e;W<V;W++)O[W]=1;_e=-1}else _e=-1;if(te[Ve][6])_e===-1&&(_e=V);else if(_e>-1){for(W=_e;W<V;W++)O[W]=G;_e=-1}ce[V]==="B"&&(O[V]=0),k.hiLevel|=G}s&&function(le,xe,he){for(var J=0;J<he;J++)if(le[J]==="S"){xe[J]=K;for(var ae=J-1;ae>=0&&le[ae]==="WS";ae--)xe[ae]=K}}(ce,O,ge)},R=function(z,O,k,I,W){if(!(W.hiLevel<z)){if(z===1&&K===1&&!i)return O.reverse(),void(k&&k.reverse());for(var V,G,ne,_e,ge=O.length,Ve=0;Ve<ge;){if(I[Ve]>=z){for(ne=Ve+1;ne<ge&&I[ne]>=z;)ne++;for(_e=Ve,G=ne-1;_e<G;_e++,G--)V=O[_e],O[_e]=O[G],O[G]=V,k&&(V=k[_e],k[_e]=k[G],k[G]=V);Ve=ne}Ve++}}},Z=function(z,O,k){var I=z.split(""),W={hiLevel:K};return k||(k=[]),H(I,k,W),function(V,G,ne){if(ne.hiLevel!==0&&g)for(var _e,ge=0;ge<V.length;ge++)G[ge]===1&&(_e=j.indexOf(V[ge]))>=0&&(V[ge]=j[_e+1])}(I,k,W),R(2,I,O,k,W),R(1,I,O,k,W),I.join("")};return this.__bidiEngine__.doBidiReorder=function(z,O,k){if(function(W,V){if(V)for(var G=0;G<W.length;G++)V[G]=G;u===void 0&&(u=se(W)),d===void 0&&(d=se(W))}(z,O),o||!h||d)if(o&&h&&u^d)K=u?1:0,z=Le(z,O,k);else if(!o&&h&&d)K=u?1:0,z=Z(z,O,k),z=Le(z,O);else if(!o||u||h||d){if(o&&!h&&u^d)z=Le(z,O),u?(K=0,z=Z(z,O,k)):(K=1,z=Z(z,O,k),z=Le(z,O));else if(o&&u&&!h&&d)K=1,z=Z(z,O,k),z=Le(z,O);else if(!o&&!h&&u^d){var I=g;u?(K=1,z=Z(z,O,k),K=0,g=!1,z=Z(z,O,k),g=I):(K=0,z=Z(z,O,k),z=Le(z,O),K=1,g=!1,z=Z(z,O,k),g=I,z=Le(z,O))}}else K=0,z=Z(z,O,k);else K=u?1:0,z=Z(z,O,k);return z},this.__bidiEngine__.setOptions=function(z){z&&(o=z.isInputVisual,h=z.isOutputVisual,u=z.isInputRtl,d=z.isOutputRtl,g=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([n.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([n.doBidiReorder(i[u])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(_r),_r.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new xh(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new BF(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new yF(this.contents),this.head=new bF(this),this.name=new EF(this),this.cmap=new Dx(this),this.toUnicode={},this.hhea=new wF(this),this.maxp=new CF(this),this.hmtx=new PF(this),this.post=new LF(this),this.os2=new xF(this),this.loca=new TF(this),this.glyf=new AF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,h,d;for(d=[],o=0,u=(h=this.bbox).length;o<u;o++)t=h[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,o,u;for(o=0,s=0,u=(t=""+t).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Gu,xh=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,o,u,h;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^h)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+h},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),yF=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,o,u,h,d,g,y,w,_,P,T;for(T in _=Object.keys(n).length,h=Math.log(2),y=16*Math.floor(Math.log(_)/h),o=Math.floor(y/h),g=16*_-y,(i=new xh).writeInt(this.scalarType),i.writeShort(_),i.writeShort(y),i.writeShort(o),i.writeShort(g),s=16*_,d=i.pos+s,u=null,P=[],n)for(w=n[T],i.writeString(T),i.writeInt(e(w)),i.writeInt(d),i.writeInt(w.length),P=P.concat(w),T==="head"&&(u=d),d+=w.length;d%4;)P.push(0),d++;return i.write(P),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,o;for(n=Ix.call(n);n.length%4;)n.push(0);for(s=new xh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),_F={}.hasOwnProperty,gc=function(e,t){for(var n in t)_F.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Gu=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var bF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new xh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),zb=function(){function e(t,n){var r,i,s,o,u,h,d,g,y,w,_,P,T,j,D,U,K;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),y=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(_=t.readUInt16(),w=_/2,t.pos+=6,s=function(){var X,se;for(se=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)se.push(t.readUInt16());return se}(),t.pos+=2,T=function(){var X,se;for(se=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)se.push(t.readUInt16());return se}(),d=function(){var X,se;for(se=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)se.push(t.readUInt16());return se}(),g=function(){var X,se;for(se=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)se.push(t.readUInt16());return se}(),i=(this.length-t.pos+this.offset)/2,u=function(){var X,se;for(se=[],h=X=0;0<=i?X<i:X>i;h=0<=i?++X:--X)se.push(t.readUInt16());return se}(),h=D=0,K=s.length;D<K;h=++D)for(j=s[h],r=U=P=T[h];P<=j?U<=j:U>=j;r=P<=j?++U:--U)g[h]===0?o=r+d[h]:(o=u[g[h]/2+(r-P)-(w-h)]||0)!==0&&(o+=d[h]),this.codeMap[r]=65535&o}t.pos=y}return e.encode=function(t,n){var r,i,s,o,u,h,d,g,y,w,_,P,T,j,D,U,K,X,se,me,Le,H,R,Z,z,O,k,I,W,V,G,ne,_e,ge,Ve,B,te,ce,le,xe,he,J,ae,Fe,Me,Ye;switch(I=new xh,o=Object.keys(t).sort(function(oe,fe){return oe-fe}),n){case"macroman":for(T=0,j=function(){var oe=[];for(P=0;P<256;++P)oe.push(0);return oe}(),U={0:0},s={},W=0,_e=o.length;W<_e;W++)U[ae=t[i=o[W]]]==null&&(U[ae]=++T),s[i]={old:t[i],new:U[t[i]]},j[i]=U[t[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(j),{charMap:s,subtable:I.data,maxGlyphID:T+1};case"unicode":for(O=[],y=[],K=0,U={},r={},D=d=null,V=0,ge=o.length;V<ge;V++)U[se=t[i=o[V]]]==null&&(U[se]=++K),r[i]={old:se,new:U[se]},u=U[se]-i,D!=null&&u===d||(D&&y.push(D),O.push(i),d=u),D=i;for(D&&y.push(D),y.push(65535),O.push(65535),Z=2*(R=O.length),H=2*Math.pow(Math.log(R)/Math.LN2,2),w=Math.log(H/2)/Math.LN2,Le=2*R-H,h=[],me=[],_=[],P=G=0,Ve=O.length;G<Ve;P=++G){if(z=O[P],g=y[P],z===65535){h.push(0),me.push(0);break}if(z-(k=r[z].new)>=32768)for(h.push(0),me.push(2*(_.length+R-P)),i=ne=z;z<=g?ne<=g:ne>=g;i=z<=g?++ne:--ne)_.push(r[i].new);else h.push(k-z),me.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*R+2*_.length),I.writeUInt16(0),I.writeUInt16(Z),I.writeUInt16(H),I.writeUInt16(w),I.writeUInt16(Le),he=0,B=y.length;he<B;he++)i=y[he],I.writeUInt16(i);for(I.writeUInt16(0),J=0,te=O.length;J<te;J++)i=O[J],I.writeUInt16(i);for(Fe=0,ce=h.length;Fe<ce;Fe++)u=h[Fe],I.writeUInt16(u);for(Me=0,le=me.length;Me<le;Me++)X=me[Me],I.writeUInt16(X);for(Ye=0,xe=_.length;Ye<xe;Ye++)T=_[Ye],I.writeUInt16(T);return{charMap:r,subtable:I.data,maxGlyphID:K+1}}},e}(),Dx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new zb(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=zb.encode(n,r),(s=new xh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),wF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),xF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),LF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var u,h,d;for(d=[],o=u=0,h=this.file.maxp.numGlyphs;0<=h?u<h:u>h;o=0<=h?++u:--u)d.push(n.readUInt32());return d}).call(this)}},t}(),SF=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},EF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,o,u,h,d,g,y,w,_;for(n.pos=this.offset,n.readShort(),r=n.readShort(),h=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+h+n.readShort()});for(d={},o=y=0,w=i.length;y<w;o=++y)s=i[o],n.pos=s.offset,g=n.readString(s.length),u=new SF(g,s),d[_=s.nameID]==null&&(d[_]=[]),d[s.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),CF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),PF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,o,u,h,d;for(n.pos=this.offset,this.metrics=[],r=0,h=this.file.hhea.numberOfMetrics;0<=h?r<h:r>h;r=0<=h?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,y;for(y=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)y.push(n.readInt16());return y}(),this.widths=(function(){var g,y,w,_;for(_=[],g=0,y=(w=this.metrics).length;g<y;g++)o=w[g],_.push(o.advance);return _}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(this.widths.push(i));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),Ix=[].slice,AF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,o,u,h,d,g,y,w;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,u=(h=new xh(r.read(s))).readShort(),g=h.readShort(),w=h.readShort(),d=h.readShort(),y=h.readShort(),this.cache[n]=u===-1?new kF(h,g,w,d,y):new MF(h,u,g,w,d,y),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,o,u,h,d;for(u=[],o=[],h=0,d=r.length;h<d;h++)s=n[r[h]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},t}(),MF=function(){function e(t,n,r,i,s,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),kF=function(){function e(t,n,r,i,s){var o,u;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new xh(Ix.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),TF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var h=this.offsets[u],d=this.offsets[u+1]-h;d>0&&(s+=d)}for(var g=new Array(4*i.length),y=0;y<i.length;++y)g[4*y+3]=255&i[y],g[4*y+2]=(65280&i[y])>>8,g[4*y+1]=(16711680&i[y])>>16,g[4*y]=(4278190080&i[y])>>24;return g},t}(),BF=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,o,u,h;for(i={},o=0,u=t.length;o<u;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in h=this.glyphsFor(n))r=h[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,o,u,h,d,g,y,w,_,P,T,j,D;for(i in r=Dx.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),_={0:0},D=r.charMap)_[(h=D[i]).old]=h.new;for(P in w=r.maxGlyphID,o)P in _||(_[P]=w++);return g=function(U){var K,X;for(K in X={},U)X[U[K]]=K;return X}(_),y=Object.keys(g).sort(function(U,K){return U-K}),T=function(){var U,K,X;for(X=[],U=0,K=y.length;U<K;U++)u=y[U],X.push(g[u]);return X}(),s=this.font.glyf.encode(o,T,_),d=this.font.loca.encode(s.offsets,T),j={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();_r.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var u,h,d;for(d=[],u=0,h=n.length;u<h;u++)r=n[u],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+n},t}();const OF={class:"h-full flex"},NF={class:"flex-1 relative"},DF={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},IF={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},RF={class:"text-center max-w-lg mx-auto p-8"},FF={class:"space-y-4"},jF={class:"map-parent"},zF={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},UF={class:"map-content flex flex-col md:flex-row relative"},$F={class:"flex-1 relative"},VF={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},HF={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},GF={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},qF={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},WF={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},ZF={key:0,class:"space-y-4"},KF={key:0,class:"space-y-2"},YF={class:"grid grid-cols-1 gap-2"},XF=["onClick"],JF={class:"font-medium text-gray-900"},QF={key:1,class:"space-y-2"},e9={class:"flex items-center mb-4"},t9={class:"text-sm text-gray-600"},n9={class:"grid grid-cols-1 gap-2"},r9=["onClick"],i9={class:"font-medium text-gray-900"},o9={key:2,class:"space-y-2"},s9={class:"flex items-center mb-4"},a9={class:"text-sm text-gray-600"},l9={class:"grid grid-cols-1 gap-2"},u9={key:0,class:"text-center py-8"},c9=["onClick"],h9={class:"font-medium text-gray-900"},f9={key:3,class:"space-y-2"},d9={class:"flex items-center mb-4"},p9={class:"text-sm text-gray-600"},m9={class:"grid grid-cols-1 gap-2"},g9=["onClick"],v9={class:"font-medium text-gray-900"},y9={class:"text-sm text-gray-500"},_9={class:"text-xs text-gray-400 mt-1"},b9={key:1,class:"space-y-4"},w9={key:0,class:"space-y-2"},x9={class:"grid grid-cols-1 gap-2"},L9={key:0,class:"text-center py-8"},S9=["onClick"],E9={class:"font-medium text-gray-900"},C9={key:1,class:"space-y-2"},P9={class:"flex items-center mb-4"},A9={class:"text-sm text-gray-600"},M9={class:"grid grid-cols-1 gap-2"},k9=["onClick"],T9={class:"font-medium text-gray-900"},B9={class:"text-sm text-gray-500"},O9={class:"text-xs text-gray-400 mt-1"},N9={key:2,class:"space-y-4"},D9={key:3,class:"space-y-4"},I9={key:0,class:"text-center py-8"},R9={key:1,class:"space-y-2"},F9=["onClick"],j9={class:"font-medium text-gray-900"},z9={class:"text-sm text-gray-500"},U9={class:"text-xs text-gray-400 mt-1"},Ub=Jo({__name:"MapView",emits:["shape-selected"],setup(e,{emit:t}){const n=It(null),r=It(!1),i=py(),s=px(),o=Op(),u=hc(),h=It([]),{currentTool:d,selectedShape:g,map:y,initMap:w,setDrawingTool:_,updateShapeStyle:P,updateShapeProperties:T,featureGroup:j,adjustView:D,clearActiveControlPoints:U,calculateConnectedCoverageArea:K}=lR(),{initMap:X,changeBaseMap:se}=uR(),me=It(!1),Le=It(!1),H=It(!1),R=It(null),Z=It(null),z=It(!1),O=It(null),k=pa(),I=It([]),W=It([]),V=It([]),G=It(null),ne=It(null),_e=It(null),ge=It(!1),Ve=It(!1),B=It(!1),te=It(null),ce=hr(()=>{var lt,We;return console.log("[MapView][filteredClients] Computing with:",{userType:(lt=k.user)==null?void 0:lt.user_type,selectedSalarie:G.value,salarieVisiteurs:W.value,visiteurCount:((We=W.value)==null?void 0:We.length)||0}),k.isSalarie||G.value?W.value:[]}),le=hr(()=>{var Dn,Cn,Xt;if(!g.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:g.value,hasName:"name"in g.value,name:g.value.name,hasProperties:"properties"in g.value,propertiesName:(Dn=g.value.properties)==null?void 0:Dn.name,allLayerKeys:Object.keys(g.value),allPropertiesKeys:g.value.properties?Object.keys(g.value.properties):[],_leaflet_id:g.value._leaflet_id,_dbId:g.value._dbId,descriptor:Object.getOwnPropertyDescriptor(g.value,"name")});const lt=g.value.properties||{};let We;if(lt.style&&lt.style.name)We=lt.style.name,console.log("[MapView][selectedShape] Using name from style:",We);else if(lt.name)We=lt.name,console.log("[MapView][selectedShape] Using name from properties:",We);else if(g.value.name)We=g.value.name,console.log("[MapView][selectedShape] Using name from layer:",We);else{const Gn=Object.getOwnPropertyDescriptor(g.value,"name");Gn&&Gn.value&&(We=Gn.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",We));const Ut=["_name","displayName","title"];for(const Jt of Ut)if(g.value[Jt]){We=g.value[Jt],console.log(`[MapView][selectedShape] Found name in ${Jt}:`,We);break}}We&&(console.log(`[MapView][selectedShape] Ensuring name "${We}" is set everywhere`),g.value.properties||(g.value.properties={}),g.value.properties.name=We,g.value.properties.style||(g.value.properties.style={}),g.value.properties.style.name=We,g.value.name=We,typeof g.value.setName=="function"&&(g.value.setName(We),console.log(`[MapView][selectedShape] Used setName method to set name "${We}"`))),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:lt.type,name:lt.name,foundName:We,hasNameProperty:"name"in lt,allPropertiesKeys:Object.keys(lt),layerId:g.value._leaflet_id,rawProperties:lt,layerName:g.value.name,layerPropertiesName:(Cn=g.value.properties)==null?void 0:Cn.name});const qt={...lt,name:We||g.value.name||lt.name||void 0},_n={type:qt.type||"unknown",properties:qt,layer:g.value};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:_n.type,hasName:"name"in _n.properties,name:_n.properties.name,layerName:_n.layer.name,layerPropertiesName:(Xt=_n.layer.properties)==null?void 0:Xt.name}),_n});function xe(lt){const We=lt.getCenter(),qt=lt.getZoom(),_n={lat:We.lat,lng:We.lng,zoom:qt};document.cookie=`mapState=${JSON.stringify(_n)};max-age=2592000;path=/`}function he(){const We=document.cookie.split(";").find(qt=>qt.trim().startsWith("mapState="));if(We)try{return JSON.parse(We.split("=")[1])}catch(qt){return console.error("Erreur lors de la lecture du cookie de position:",qt),null}return null}ma(async()=>{var lt,We;try{if(await i.fetchPlans(),(k.isAdmin||k.isEntreprise)&&await ot(),k.isEntreprise){ge.value=!0;try{const Ut=await ur.get("/users/",{params:{role:"SALARIE",entreprise:(lt=k.user)==null?void 0:lt.id}});I.value=Ut.data}catch(Ut){console.error("Error loading salaries:",Ut),I.value=[]}finally{ge.value=!1}}if(k.isSalarie){Ve.value=!0;try{const Ut=await k.fetchSalarieVisiteurs(((We=k.user)==null?void 0:We.id)||0);W.value=Array.isArray(Ut)?Ut:[Ut]}catch(Ut){console.error("Error loading clients:",Ut)}finally{Ve.value=!1}}const qt=he(),_n=qt?[qt.lat,qt.lng]:[46.603354,1.888334],Dn=(qt==null?void 0:qt.zoom)??6;if(n.value&&!y.value){const Ut=w(n.value,_n,Dn);Ut.pm.setLang("fr"),Ut.pm.addControls({rotateMode:!1}),X(Ut),Ut.on("moveend",()=>{xe(Ut)}),window.addEventListener("map-set-location",Jt=>{if(Ut&&Jt.detail){const{lat:vn,lng:ci,zoom:Sn}=Jt.detail;Ut.flyTo([vn,ci],Sn,{duration:1.5,easeLinearity:.25})}})}const Cn=localStorage.getItem("lastPlanId");if(Cn)try{console.log("[MapView][onMounted] Chargement immédiat du dernier plan:",Cn),await Me(parseInt(Cn));const Ut=document.querySelector(".map-parent");Ut instanceof HTMLElement&&(Ut.style.display="block")}catch(Ut){console.error("[MapView][onMounted] Erreur chargement dernier plan:",Ut),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][onMounted] Aucun dernier plan à charger"),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae();window.addEventListener("shape:created",Ut=>{const{shape:Jt,type:vn,properties:ci}=Ut.detail;console.log("[MapView] Nouvelle forme créée",{shape:Jt,type:vn,properties:ci}),s.addElement(Jt),_("")});const Xt=Ut=>{if(console.log("[MapView] Édition de note via Leaflet",Ut),console.log("[MapView] Type de e:",typeof Ut,"Contenu de e:",JSON.stringify(Ut)),!Ut||!Ut.note){console.error("[MapView] Erreur: e.note est undefined ou null",Ut);return}const Jt=Ut.note;console.log("[MapView] Note à éditer:",Jt),Z.value={id:Jt.id,title:Jt.title||Jt.name,description:Jt.description,location:Jt.location,columnId:Jt.columnId||o.getDefaultColumn.id,accessLevel:Jt.accessLevel,style:Jt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Jt.createdAt||new Date().toISOString(),updatedAt:Jt.updatedAt||new Date().toISOString(),comments:Jt.comments||[],photos:Jt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",Z.value),H.value=!0,console.log("[MapView] showNoteEditModal.value:",H.value)},Gn=Ut=>{if(console.log("[MapView] Édition de note via événement global",Ut),!Ut.detail||!Ut.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",Ut);return}const Jt=Ut.detail.note;console.log("[MapView] Note à éditer (global):",Jt),Z.value={id:Jt.id,title:Jt.title||Jt.name,description:Jt.description,location:Jt.location,columnId:Jt.columnId||o.getDefaultColumn.id,accessLevel:Jt.accessLevel,style:Jt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Jt.createdAt||new Date().toISOString(),updatedAt:Jt.updatedAt||new Date().toISOString(),comments:Jt.comments||[],photos:Jt.photos||[]},H.value=!0};window.addEventListener("geonote:edit",Gn),j.value&&(j.value.off("note:edit"),j.value.on("note:edit",Xt))}catch(qt){console.error("Error during component mount:",qt),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae(),localStorage.removeItem("lastPlanId")}}),ds(()=>s.hasUnsavedChanges,lt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",lt),lt&&R.value&&i.markUnsavedChanges()}),ds(y,async lt=>{var We;console.log(`
[MapView][watch map] Nouvelle carte:`,!!lt),lt&&i.currentPlan&&!((We=j.value)!=null&&We.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",i.currentPlan.id),ae(),await s.loadPlanElements(i.currentPlan.id))}),ds(()=>i.currentPlan,async(lt,We)=>{var qt,_n,Dn;if((lt==null?void 0:lt.id)===(We==null?void 0:We.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",lt==null?void 0:lt.id);try{if(lt){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),R.value=lt;const Cn=document.querySelector(".map-parent");Cn instanceof HTMLElement&&(Cn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),R.value=null,ae();const Cn=document.querySelector(".map-parent");Cn instanceof HTMLElement&&(Cn.style.display="none")}}catch(Cn){console.error("[MapView][watch currentPlan] ERREUR:",Cn),R.value=null,ae()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(qt=R.value)==null?void 0:qt.id,storePlanId:(_n=i.currentPlan)==null?void 0:_n.id,mapVisible:y.value!==null,mapParentDisplay:(Dn=document.querySelector(".map-parent"))==null?void 0:Dn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),cd(()=>{y.value&&y.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function J(){r.value=!r.value}function ae(){j.value&&j.value.clearLayers(),h.value=[],U(),g.value=null,d.value=""}async function Fe(lt){return await ln.measureAsync("refreshMapWithPlan",async()=>{try{ln.measure("refreshMapWithPlan:clearMap",()=>{ae()},"MapView"),await ln.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await s.loadPlanElements(lt)},"MapView");const We=ln.measure("refreshMapWithPlan:getPlanById",()=>i.getPlanById(lt),"MapView");We?(ln.measure("refreshMapWithPlan:updateCurrentPlan",()=>{R.value=We,i.setCurrentPlan(We),s.setCurrentPlan(We.id),localStorage.setItem("lastPlanId",We.id.toString())},"MapView"),y.value&&j.value&&await ln.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:s.getCurrentElements.length,elements:s.getCurrentElements.map(Cn=>{var Xt;return{id:Cn.id,type:Cn.type_forme,hasName:Cn.data&&"name"in Cn.data,name:(Xt=Cn.data)==null?void 0:Xt.name}})});const qt=s.getCurrentElements.reduce((Cn,Xt)=>(Cn[Xt.type_forme]||(Cn[Xt.type_forme]=[]),Cn[Xt.type_forme].push(Xt),Cn),{}),_n=10,Dn=Object.entries(qt).map(async([Cn,Xt])=>{for(let Gn=0;Gn<Xt.length;Gn+=_n){const Ut=Xt.slice(Gn,Gn+_n);await Promise.all(Ut.map(async Jt=>{await ln.measureAsync(`refreshMapWithPlan:createElement:${Jt.type_forme}`,async()=>{var ci;if(!j.value||!Jt.data)return;let vn=null;switch(Jt.type_forme){case"Circle":{const Sn=Jt.data;Sn.center&&Sn.radius&&(vn=new If(Dt.latLng(Sn.center[1],Sn.center[0]),{...Sn.style,radius:Sn.radius}),Sn.name&&(vn.properties={type:"Circle",name:Sn.name,style:Sn.style,radius:Sn.radius,diameter:Sn.radius*2,surface:Math.PI*Sn.radius*Sn.radius,perimeter:2*Math.PI*Sn.radius},vn.name=Sn.name));break}case"Rectangle":{const Sn=Jt.data;if(Sn.bounds){const dr=Dt.latLngBounds(Dt.latLng(Sn.bounds.southWest[1],Sn.bounds.southWest[0]),Dt.latLng(Sn.bounds.northEast[1],Sn.bounds.northEast[0]));vn=new Ba(dr,Sn.style),Sn.name&&(vn.properties={name:Sn.name},vn.name=Sn.name)}break}case"Polygon":{const Sn=Jt.data;if(Sn.points&&Sn.points.length>0){const dr=Sn.points.map(lr=>Dt.latLng(lr[1],lr[0]));vn=new Wh(dr,Sn.style),Sn.name&&(vn.properties={name:Sn.name},vn.name=Sn.name)}break}case"Line":{const Sn=Jt.data;if(Sn.points&&Sn.points.length>0){const dr=Sn.points.map(lr=>Dt.latLng(lr[1],lr[0]));vn=new Bs(dr,Sn.style),Sn.name&&(vn.properties={name:Sn.name},vn.name=Sn.name)}break}case"ElevationLine":{const Sn=Jt.data;if(Sn.points&&Sn.points.length>0){const dr=Sn.points.map(lr=>Dt.latLng(lr[1],lr[0]));vn=new rf(dr,Sn.style),Sn.name&&(vn.properties={name:Sn.name,type:"ElevationLine",elevationData:Sn.elevationData,minElevation:Sn.minElevation,maxElevation:Sn.maxElevation,elevationGain:Sn.elevationGain,elevationLoss:Sn.elevationLoss,averageSlope:Sn.averageSlope,maxSlope:Sn.maxSlope},vn.name=Sn.name),Sn.elevationData&&(vn.elevationData=Sn.elevationData)}break}}vn&&(vn._dbId=Jt.id,(ci=j.value)==null||ci.addLayer(vn),h.value.push({id:Jt.id,type:Jt.type_forme,layer:vn,properties:vn.properties}))},"MapView")})),await new Promise(Jt=>setTimeout(Jt,0))}});await Promise.all(Dn),ln.measure("refreshMapWithPlan:adjustView",()=>{D()},"MapView")},"MapView"),console.log(`Plan ${lt} chargé avec succès avec ${s.getCurrentElements.length} formes`)):console.error(`Plan ${lt} introuvable après chargement`),Le.value=!1}catch(We){throw console.error("Erreur lors du rafraîchissement de la carte:",We),We}},"MapView")}async function Me(lt){return await ln.measureAsync("loadPlan",async()=>{var We;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",lt);try{const qt=await ln.measureAsync("loadPlan:getPlanFromStore",async()=>i.getPlanById(lt),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!qt),!qt){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await ln.measureAsync("loadPlan:apiCheck",async()=>{await ur.get(`/plans/${lt}/`)},"MapView")}catch(_n){throw((We=_n.response)==null?void 0:We.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae()),_n}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await ln.measureAsync("loadPlan:refreshMap",async()=>{await Fe(lt)},"MapView"),Le.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),xt(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:lt,elementsCount:s.getCurrentElements.length})}catch(qt){throw console.error("Erreur lors du chargement du plan:",qt),ln.measure("loadPlan:errorRecovery",()=>{R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae(),localStorage.removeItem("lastPlanId")},"MapView"),qt}},"MapView")}async function Ye(){var lt;if(!R.value||!j.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}z.value=!0,O.value="saving";try{const We=[],qt=new Set(s.getCurrentElements.filter(Xt=>Xt.id!==void 0).map(Xt=>Xt.id)),_n=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:j.value.getLayers().length,existingIds:Array.from(qt),currentElements:s.getCurrentElements}),j.value.eachLayer(Xt=>{var vn,ci,Sn,dr,lr,bn,yi,Es,Co,Fi,Er,_i;console.log("[savePlan] Traitement de la couche",{type:(vn=Xt.properties)==null?void 0:vn.type,name:(ci=Xt.properties)==null?void 0:ci.name,isPolygon:Xt instanceof Dt.Polygon,properties:Xt.properties});let Gn,Ut;const Jt={color:Xt.options.color||"#3388ff",weight:Xt.options.weight||3,opacity:Xt.options.opacity||1,fillColor:Xt.options.fillColor||"#3388ff",fillOpacity:Xt.options.fillOpacity||.2,dashArray:Xt.options.dashArray||""};if(Xt instanceof Ba){Gn="Rectangle";const sr=Xt.getBounds();Ut={bounds:{southWest:[sr.getSouthWest().lng,sr.getSouthWest().lat],northEast:[sr.getNorthEast().lng,sr.getNorthEast().lat]},style:Jt,name:((Sn=Xt.properties)==null?void 0:Sn.name)||"",rotation:Xt.getRotation(),width:Xt.getDimensions().width,height:Xt.getDimensions().height,center:[Xt.getCenter().lng,Xt.getCenter().lat]}}else if(Xt instanceof Dt.Circle)Gn="Circle",Ut={center:[Xt.getLatLng().lng,Xt.getLatLng().lat],radius:Xt.getRadius(),name:((dr=Xt.properties)==null?void 0:dr.name)||"",style:Jt};else if(Xt instanceof Dt.Rectangle){Gn="Rectangle";const sr=Xt.getBounds();Ut={bounds:{southWest:[sr.getSouthWest().lng,sr.getSouthWest().lat],northEast:[sr.getNorthEast().lng,sr.getNorthEast().lat]},name:((lr=Xt.properties)==null?void 0:lr.name)||"",style:Jt}}else Xt instanceof Dt.Polyline&&!(Xt instanceof Dt.Polygon)?((bn=Xt.properties)==null?void 0:bn.type)==="ElevationLine"?(Gn="ElevationLine",Ut={points:Xt.getLatLngs().map(rn=>[rn.lng,rn.lat]),style:{...Jt,color:((yi=Xt.properties.style)==null?void 0:yi.color)||"#FF4500",weight:((Es=Xt.properties.style)==null?void 0:Es.weight)||4,opacity:((Co=Xt.properties.style)==null?void 0:Co.opacity)||.8},name:((Fi=Xt.properties)==null?void 0:Fi.name)||"",elevationData:Xt.properties.elevationData,samplePointStyle:Xt.properties.samplePointStyle,minMaxPointStyle:Xt.properties.minMaxPointStyle,minElevation:Xt.properties.minElevation,maxElevation:Xt.properties.maxElevation,elevationGain:Xt.properties.elevationGain,elevationLoss:Xt.properties.elevationLoss,averageSlope:Xt.properties.averageSlope,maxSlope:Xt.properties.maxSlope}):(Gn="Line",Ut={points:Xt.getLatLngs().map(rn=>[rn.lng,rn.lat]),name:((Er=Xt.properties)==null?void 0:Er.name)||"",style:Jt}):Xt instanceof Dt.Polygon&&!(Xt instanceof Dt.Rectangle)&&(Gn="Polygon",Ut={points:Xt.getLatLngs()[0].map(rn=>[rn.lng,rn.lat]),name:((_i=Xt.properties)==null?void 0:_i.name)||"",style:Jt});if(Gn&&Ut){let sr=Xt._elementId;Xt._dbId&&(sr=Xt._dbId,typeof sr=="number"&&_n.add(sr)),We.push({id:sr,type_forme:Gn,data:Ut})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:We.length,elements:We.map(Xt=>({type:Xt.type_forme,hasPoints:"points"in Xt.data,hasStyle:"style"in Xt.data}))});const Dn=Array.from(qt).filter(Xt=>!_n.has(Xt));s.elements=We;const Cn=await s.saveToPlan(R.value.id,{elementsToDelete:Dn});if(Cn&&((lt=R.value)!=null&&lt.id)){const Xt=R.value.id;R.value={...R.value,...Cn},i.updatePlanDetails(Xt,Cn)}O.value="success",setTimeout(()=>{O.value=null},3e3)}catch(We){console.error("Erreur lors de la sauvegarde du plan:",We),O.value=null}finally{z.value=!1}}Vc(()=>{k.user||Xe(),i.clearCurrentPlan(),s.clearCurrentPlan(),j.value&&j.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{})});function oe(lt){T(lt)}function fe(lt){try{const We=new Date(lt);return isNaN(We.getTime())?(console.error("Date invalide reçue:",lt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(We)}catch(We){return console.error("Erreur lors du formatage de la date:",We),"Date invalide"}}const be=()=>{j.value&&D()},de=()=>{g.value&&j.value&&(_(""),j.value.removeLayer(g.value),g.value=null)};async function Ue(lt){console.log(`onPlanCreated - Tentative de chargement du plan ${lt}`),await i.fetchPlans();const We=i.getPlanById(lt);We?(console.log(`Plan ${lt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",lt.toString()),R.value=We,i.setCurrentPlan(We),s.setCurrentPlan(We.id),me.value=!1,xt(),console.log(`Plan ${lt} chargé avec succès`)):console.error(`Plan ${lt} introuvable après création! Vérifiez les permissions.`)}ds(G,async lt=>{var We;if(lt&&((We=k.user)==null?void 0:We.user_type)==="admin"){Ve.value=!0;try{const qt=await k.fetchSalarieVisiteurs(lt.id);W.value=Array.isArray(qt)?qt:[qt]}catch(qt){console.error("[MapView][watch selectedSalarie] Error:",qt),W.value=[]}finally{Ve.value=!1}}});function Xe(){localStorage.removeItem("lastPlanId")}function ze(lt,We="m"){return We==="m²"?`${(lt/1e4).toFixed(2)} ha`:We==="m"?lt>=1e3?`${(lt/1e3).toFixed(2)} km`:`${lt.toFixed(2)} m`:`${lt.toFixed(2)} ${We}`}const Je=It(!1);function Qe(lt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[lt]||lt}async function it(){var We,qt,_n,Dn,Cn,Xt,Gn,Ut,Jt,vn;if(!R.value||!y.value||!j.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const lt=R.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",lt),await Ye();let Fi=lt;if(!lt.salarie_details&&!lt.entreprise_details&&!lt.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const Cr=await ur.get(`/plans/${lt.id}/`);Cr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",Cr.data),R.value={...lt,...Cr.data},Fi=Cr.data,i.updatePlanDetails(lt.id,Cr.data))}catch(Cr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",Cr)}}await new Promise(Cr=>setTimeout(Cr,1e3)),Je.value=!0;const Er=Fi.salarie_details,_i=Fi.client_details,sr=(Er==null?void 0:Er.entreprise_details)||Fi.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",Fi),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:Er?{id:Er.id,nom:`${Er.first_name} ${Er.last_name}`,company:Er.company_name,logo:Er.logo}:null,entreprise:sr?{id:sr.id,nom:`${sr.first_name} ${sr.last_name}`,company:sr.company_name,logo:sr.logo}:null,client:_i?{id:_i.id,nom:`${_i.first_name} ${_i.last_name}`,company:_i.company_name}:null}),g.value&&(U(),g.value=null);const rn=new _r("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Uo=new Image;Uo.src=s1,await new Promise(Cr=>{Uo.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),Cr()},Uo.onerror=Cs=>{console.error("[generateSynthesis] Erreur chargement logo application:",Cs),Cr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",sr==null?void 0:sr.logo);let to=null;sr!=null&&sr.logo&&(to=new Image,to.src=sr.logo,await new Promise(Cr=>{to?(to.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),Cr()},to.onerror=Cs=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Cs),Cr()}):Cr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",Er==null?void 0:Er.logo);let fo=null;Er!=null&&Er.logo&&(fo=new Image,fo.src=Er.logo,await new Promise(Cr=>{fo?(fo.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),Cr()},fo.onerror=Cs=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Cs),Cr()}):Cr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:to!==null,logoSalarie:fo!==null}),to!==null&&rn.addImage(to,"JPEG",148.5-40-30,20,40,40),rn.addImage(Uo,"JPEG",148.5-40/2,20,40,40),fo!==null&&rn.addImage(fo,"JPEG",148.5+30,20,40,40),rn.setFontSize(24),rn.setTextColor(0),rn.text(lt.nom||"Sans titre",297/2,100,{align:"center"});let qi=120;if(sr&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Entreprise:",20,qi),rn.setFont("helvetica","normal"),rn.text(`${sr.first_name} ${sr.last_name}${sr.company_name?` (${sr.company_name})`:""}`,20,qi+6),qi+=15),Er&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Salarie:",20,qi),rn.setFont("helvetica","normal"),rn.text(`${Er.first_name} ${Er.last_name}${Er.company_name?` (${Er.company_name})`:""}`,20,qi+6),qi+=15),_i&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Client:",20,qi),rn.setFont("helvetica","normal"),rn.text(`${_i.first_name} ${_i.last_name}${_i.company_name?` (${_i.company_name})`:""}`,20,qi+6),qi+=15),lt.description){rn.setFont("helvetica","bold"),rn.text("Description:",20,qi),rn.setFont("helvetica","normal");const Cr=rn.splitTextToSize(lt.description,150);rn.text(Cr,20,qi+6),qi+=8*Cr.length+10}qi=Math.min(qi,180),rn.setFontSize(10),rn.setTextColor(100),rn.text(`Date de création: ${fe(lt.date_creation)}`,20,190),rn.text(`Dernière modification: ${fe(lt.date_modification)}`,277,190,{align:"right"});const ms=[];j.value.eachLayer(Cr=>ms.push(Cr));const Qo=Dt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(y.value);await new Promise(Cr=>setTimeout(Cr,3e3));for(let Cr=0;Cr<ms.length;Cr++){rn.addPage(),rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.rect(0,0,297,25,"F"),rn.setFontSize(10),rn.setTextColor(50,50,50),rn.setFont("helvetica","bold"),rn.text(lt.nom||"Sans titre",20,12);let Is=297-20-(15*(1+(to!==null?1:0)+(fo!==null?1:0))+5*(1+(to!==null?1:0)));to!==null&&(rn.addImage(to,"JPEG",Is,5,15,15),Is+=20),rn.addImage(Uo,"JPEG",Is,5,15,15),Is+=20,fo!==null&&rn.addImage(fo,"JPEG",Is,5,15,15),rn.setDrawColor(200,200,200),rn.setLineWidth(.5),rn.line(0,25,297,25);const ei=ms[Cr],Un=ei.properties;if(Un){rn.setTextColor(0),rn.setFontSize(14),rn.setFont("helvetica","bold");const Hi=Un.name||Qe(Un.type);let hi="";if(Un.type!=="TextRectangle"){const no=K(ms,ei);hi=no>0?` (surface totale d'irrigation : ${ze(no,"m²")})`:""}const ji=`${Hi}${hi}`;rn.text(ji,20,35)}if(Un&&Un.type==="ElevationLine")try{const Hi=((We=ei.getBounds)==null?void 0:We.call(ei))||((qt=ei.getLatLng)==null?void 0:qt.call(ei));Hi&&y.value.fitBounds(Hi instanceof Dt.LatLng?Dt.latLngBounds([Hi]):Hi,{padding:[50,50]});try{const Qt=((_n=ei.getBounds)==null?void 0:_n.call(ei))||((Dn=ei.getLatLng)==null?void 0:Dn.call(ei));if(!Qt||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const Gt=Qt instanceof Dt.LatLng?Dt.latLngBounds([Qt]):Qt;Gt&&Gt.isValid&&Gt.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(Gt,{padding:[50,50],animate:!1})}}catch(Qt){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Qt)}await new Promise(Qt=>setTimeout(Qt,2e3)),y.value.invalidateSize();try{y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())?y.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Qt){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Qt)}await new Promise(Qt=>{const Gt=()=>{var Ys;const Ar=(Ys=y.value)==null?void 0:Ys.getContainer();if(!Ar){Qt();return}const fi=Ar.querySelectorAll(".leaflet-tile-loaded");Ar.querySelectorAll(".leaflet-tile-loading").length===0&&fi.length>0?Qt():setTimeout(Gt,100)};Gt()});const hi=await Qo.takeScreen("image"),ji=await new Promise((Qt,Gt)=>{const Ar=new Image;Ar.onload=()=>Qt(Ar),Ar.onerror=fi=>Gt(fi),Ar.src=hi}),no=40,zi=237/2,wr=Math.min(70,ji.height*zi/ji.width);if(rn.addImage(ji,"PNG",20,no,zi,wr),Un.elevationData&&Un.elevationData.length>0){const Qt=document.createElement("canvas");Qt.width=800,Qt.height=400;const Gt=Qt.getContext("2d");if(Gt){const Ar=Un.elevationData,fi=Un.minElevation,Si=Un.maxElevation,Xs=(Si-fi)*.05,Po=fi-Xs,Ei=Si+Xs,Mr=40,Ps=Qt.width-2*Mr,Ci=Qt.height-2*Mr,es=ti=>Mr+ti/Ar[Ar.length-1].distance*Ps,po=ti=>Mr+Ci-(ti-Po)/(Ei-Po)*Ci;Gt.fillStyle="#f8fafc",Gt.fillRect(0,0,Qt.width,Qt.height),Gt.fillStyle="#334155",Gt.font="bold 20px Arial",Gt.textAlign="center",Gt.fillText("Profil altimétrique",Qt.width/2,25),Gt.strokeStyle="#e2e8f0",Gt.lineWidth=1,Gt.beginPath(),Gt.moveTo(Mr,Mr),Gt.lineTo(Mr,Ci+Mr),Gt.lineTo(Ps+Mr,Ci+Mr),Gt.strokeStyle="#94a3b8",Gt.stroke();const nl=5;for(let ti=0;ti<=nl;ti++){const nr=Po+ti/nl*(Ei-Po),Qn=po(nr);Gt.beginPath(),Gt.strokeStyle="#e2e8f0",Gt.moveTo(Mr,Qn),Gt.lineTo(Ps+Mr,Qn),Gt.stroke(),Gt.beginPath(),Gt.strokeStyle="#94a3b8",Gt.moveTo(Mr-5,Qn),Gt.lineTo(Mr,Qn),Gt.stroke(),Gt.fillStyle="#64748b",Gt.font="12px Arial",Gt.textAlign="right",Gt.fillText(`${Math.round(nr)}m`,Mr-8,Qn+4)}const ts=5,Rs=Ar[Ar.length-1].distance;for(let ti=0;ti<=ts;ti++){const nr=ti/ts*Rs,Qn=es(nr);Gt.beginPath(),Gt.strokeStyle="#e2e8f0",Gt.moveTo(Qn,Mr),Gt.lineTo(Qn,Ci+Mr),Gt.stroke(),Gt.beginPath(),Gt.strokeStyle="#94a3b8",Gt.moveTo(Qn,Ci+Mr),Gt.lineTo(Qn,Ci+Mr+5),Gt.stroke(),Gt.fillStyle="#64748b",Gt.font="12px Arial",Gt.textAlign="center",Gt.fillText(`${Math.round(nr)}m`,Qn,Ci+Mr+16)}const As=Gt.createLinearGradient(0,Mr,0,Ci+Mr);As.addColorStop(0,"rgba(255, 69, 0, 0.8)"),As.addColorStop(1,"rgba(255, 69, 0, 0.2)"),Gt.beginPath(),Gt.moveTo(es(Ar[0].distance),po(Ar[0].elevation)),Ar.forEach((ti,nr)=>{nr>0&&Gt.lineTo(es(ti.distance),po(ti.elevation))}),Gt.strokeStyle="#FF4500",Gt.lineWidth=2,Gt.stroke(),Gt.lineTo(es(Ar[Ar.length-1].distance),po(Po)),Gt.lineTo(es(Ar[0].distance),po(Po)),Gt.closePath(),Gt.fillStyle=As,Gt.fill(),Ar.forEach(ti=>{Gt.beginPath(),Gt.arc(es(ti.distance),po(ti.elevation),3,0,Math.PI*2),Gt.fillStyle="#FF4500",Gt.fill(),Gt.strokeStyle="white",Gt.lineWidth=1,Gt.stroke()});let Js=0,Ui=0;for(let ti=0;ti<Ar.length;ti++)Ar[ti].elevation===fi&&(Js=ti),Ar[ti].elevation===Si&&(Ui=ti);Gt.beginPath(),Gt.arc(es(Ar[Ui].distance),po(Ar[Ui].elevation),6,0,Math.PI*2),Gt.fillStyle="#059669",Gt.fill(),Gt.strokeStyle="white",Gt.lineWidth=2,Gt.stroke(),Gt.beginPath(),Gt.arc(es(Ar[Js].distance),po(Ar[Js].elevation),6,0,Math.PI*2),Gt.fillStyle="#DC2626",Gt.fill(),Gt.strokeStyle="white",Gt.lineWidth=2,Gt.stroke(),Gt.font="12px Arial",Gt.fillStyle="#059669",Gt.textAlign="left",Gt.fillText(`Point haut: ${ze(Si,"m")}`,Mr,Ci+Mr+35),Gt.fillStyle="#DC2626",Gt.fillText(`Point bas: ${ze(fi,"m")}`,Mr+200,Ci+Mr+35);const Wl=Qt.toDataURL("image/png");rn.addImage(Wl,"PNG",20+zi+20,no,zi,wr)}}const Pn=no+wr+15;rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.roundedRect(20,Pn,257,50,3,3,"FD"),rn.setFont("helvetica","bold"),rn.setFontSize(12),rn.setTextColor(51,65,85),rn.text("Caractéristiques",30,Pn+10);const gs=[{label:"Distance totale",value:ze(Un.length||0)},{label:"Dénivelé positif",value:ze(Un.elevationGain||0,"m")},{label:"Dénivelé négatif",value:ze(Un.elevationLoss||0,"m")}],bi=[{label:"Pente moyenne",value:`${(Un.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(Un.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${ze(Un.minElevation||0,"m")} / ${ze(Un.maxElevation||0,"m")}`}];let Di=Pn+20;rn.setFont("helvetica","normal"),rn.setFontSize(10),gs.forEach(Qt=>{rn.setTextColor(100,116,139),rn.text(Qt.label,30,Di),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(Qt.value,110,Di),rn.setFont("helvetica","normal"),Di+=9}),Di=Pn+20;const Hr=297/2;bi.forEach(Qt=>{rn.setTextColor(100,116,139),rn.text(Qt.label,Hr,Di),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(Qt.value,Hr+80,Di),rn.setFont("helvetica","normal"),Di+=9})}catch(Hi){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",Hi)}else{const Hi=((Cn=ei.getBounds)==null?void 0:Cn.call(ei))||((Xt=ei.getLatLng)==null?void 0:Xt.call(ei));Hi&&y.value.fitBounds(Hi instanceof Dt.LatLng?Dt.latLngBounds([Hi]):Hi,{padding:[50,50]});try{const hi=((Gn=ei.getBounds)==null?void 0:Gn.call(ei))||((Ut=ei.getLatLng)==null?void 0:Ut.call(ei));if(!hi||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const ji=hi instanceof Dt.LatLng?Dt.latLngBounds([hi]):hi;ji&&ji.isValid&&ji.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(ji,{padding:[50,50],animate:!1})}}catch(hi){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",hi)}await new Promise(hi=>setTimeout(hi,2e3)),y.value.invalidateSize(),await new Promise(hi=>{const ji=()=>{var Pn;const no=(Pn=y.value)==null?void 0:Pn.getContainer();if(!no){hi();return}const zi=no.querySelectorAll(".leaflet-tile-loaded");no.querySelectorAll(".leaflet-tile-loading").length===0&&zi.length>0?hi():setTimeout(ji,100)};ji()});try{const hi=await Qo.takeScreen("image"),ji=await new Promise((Pn,gs)=>{const bi=new Image;bi.onload=()=>Pn(bi),bi.onerror=Di=>gs(Di),bi.src=hi}),no=45,zi=297*.6-30;let wr=ji.height*zi/ji.width;if(wr>210*.9&&(wr=210*.9),rn.addImage(ji,"PNG",20,no,zi,wr),Un){let Pn=function(Gt,Ar,fi,Si,Ys){rn.setTextColor(100,116,139),rn.setFont("helvetica","normal"),rn.text(Gt,fi+10,Si),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(Ar,fi+Ys-10,Si,{align:"right"})},bi=0;if(Un.type==="Circle")bi=4;else if(Un.type==="Rectangle")bi=4;else if(Un.type==="Line")bi=1,(Jt=Un.dimensions)!=null&&Jt.width&&bi++,Un.surfaceInfluence&&bi++;else if(Un.type==="Semicircle")bi=6;else if(Un.type==="Polygon")bi=2;else if(Un.type==="CircleWithSections"&&(bi=3,Un.sections&&Un.sections.length>0)){const Gt=Math.ceil(Un.sections.length/3);bi+=Gt*3}const Di=Math.max(15+bi*12+30,60),Hr=297-188.2-20;rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.roundedRect(188.2,no,Hr,Di,3,3,"FD"),rn.setFont("helvetica","bold"),rn.setFontSize(12),rn.setTextColor(51,65,85),rn.text("Caractéristiques",188.2+10,no+15);let Qt=no+30;rn.setFontSize(10),Un.type==="Circle"?(Pn("Rayon",ze(Un.radius),188.2,Qt,Hr),Qt+=12,Pn("Diamètre",ze(Un.radius*2),188.2,Qt,Hr),Qt+=12,Pn("Surface",ze(Un.surface,"m²"),188.2,Qt,Hr),Qt+=12,Pn("Périmètre",ze(Un.perimeter),188.2,Qt,Hr)):Un.type==="Rectangle"?(Pn("Largeur",ze(Un.width),188.2,Qt,Hr),Qt+=12,Pn("Hauteur",ze(Un.height),188.2,Qt,Hr),Qt+=12,Pn("Surface",ze(Un.surface,"m²"),188.2,Qt,Hr),Qt+=12,Pn("Périmètre",ze(Un.perimeter),188.2,Qt,Hr)):Un.type==="Line"?(Pn("Longueur",ze(Un.length),188.2,Qt,Hr),Qt+=12,(vn=Un.dimensions)!=null&&vn.width&&(Pn("Largeur d'influence",ze(Un.dimensions.width),188.2,Qt,Hr),Qt+=12),Un.surfaceInfluence&&Pn("Surface d'influence",ze(Un.surfaceInfluence,"m²"),188.2,Qt,Hr)):Un.type==="Semicircle"?(Pn("Rayon",ze(Un.radius),188.2,Qt,Hr),Qt+=12,Pn("Diamètre",ze(Un.radius*2),188.2,Qt,Hr),Qt+=12,Pn("Surface",ze(Un.surface,"m²"),188.2,Qt,Hr),Qt+=12,Pn("Périmètre",ze(Un.perimeter),188.2,Qt,Hr),Qt+=12,Pn("Longueur d'arc",ze(Un.arcLength),188.2,Qt,Hr),Qt+=12,Pn("Angle d'ouverture",`${Un.openingAngle.toFixed(1)}°`,188.2,Qt,Hr)):Un.type==="Polygon"?(Pn("Surface",ze(Un.surface,"m²"),188.2,Qt,Hr),Qt+=12,Pn("Périmètre",ze(Un.perimeter),188.2,Qt,Hr)):Un.type==="CircleWithSections"&&(Pn("Rayon",ze(Un.radius),188.2,Qt,Hr),Qt+=12,Pn("Surface totale",ze(Un.surface,"m²"),188.2,Qt,Hr),Qt+=12,Pn("Périmètre",ze(Un.perimeter),188.2,Qt,Hr),Qt+=20,Un.sections&&Un.sections.length>0&&(Qt=Rn(Un.sections,rn,188.2,Qt,Hr)))}}catch(hi){console.error(`[generateSynthesis] Erreur capture forme ${Cr+1}:`,hi)}}}y.value.removeControl(Qo),rn.save(`synthese_${lt.nom}.pdf`)}catch(ci){console.error("[generateSynthesis] Erreur:",ci),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Je.value=!1}}const Mt=ix.debounce(()=>{const lt=ln.startMeasure("invalidateMapSize","MapView");if(!y.value){lt();return}Ws(()=>{ln.measure("invalidateMapSize:nextTick",()=>{var We;try{if(y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())){if(y.value.invalidateSize({animate:!1}),(We=j.value)!=null&&We.getLayers().length)try{D()}catch(qt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",qt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(qt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",qt)}lt()},"MapView")})},250);function xt(){Mt()}ds(R,(lt,We)=>{lt&&lt.id!==(We==null?void 0:We.id)&&Ws(()=>{xt()})});const Nt=It(null),Kt=It(!1),hn=It([]),mn=hr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Nt.value,salaries:I.value,salariesLength:I.value.length}),!Nt.value)return[];const lt=I.value.filter(We=>{var Dn,Cn,Xt;const qt=We.entreprise,_n=typeof qt=="object"&&qt!==null?qt.id:qt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:We,salarieEntreprise:qt,salarieEntrepriseId:_n,selectedEntrepriseId:(Dn=Nt.value)==null?void 0:Dn.id,matches:_n===((Cn=Nt.value)==null?void 0:Cn.id)}),_n===((Xt=Nt.value)==null?void 0:Xt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",lt),lt});function et(lt){if(!lt)return"";const We=lt.first_name||"",qt=lt.last_name?lt.last_name.toUpperCase():"",_n=lt.company_name||lt.role||"";return`${We} ${qt} (${_n})`}async function ot(){Kt.value=!0;try{const lt=await ur.get("/users/",{params:{role:"ENTREPRISE"}});hn.value=lt.data}catch(lt){console.error("[MapView] Error loading entreprises:",lt),hn.value=[]}finally{Kt.value=!1}}async function nt(lt){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",lt),Nt.value=lt,ge.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:lt.id});const We=await ur.get("/users/",{params:{role:"SALARIE",entreprise:lt.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",We.data),I.value=We.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",I.value)}catch(We){console.error("[MapView] Error loading salaries for entreprise:",We),I.value=[]}finally{ge.value=!1}}function $t(){Nt.value=null,G.value=null,_e.value=null,I.value=[],W.value=[],V.value=[]}function en(){G.value=null,_e.value=null,W.value=[],V.value=[]}function kn(){_e.value=null,V.value=[]}async function Ln(lt){var We,qt,_n,Dn,Cn,Xt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:lt.id,username:lt.username,company:lt.company_name,role:lt.role}),console.log("Contexte utilisateur:",{userType:(We=k.user)==null?void 0:We.user_type,userId:(qt=k.user)==null?void 0:qt.id,userRole:(_n=k.user)==null?void 0:_n.role,selectedEntrepriseId:(Dn=Nt.value)==null?void 0:Dn.id}),G.value=lt,Ve.value=!0;try{const Gn={role:"VISITEUR",salarie:lt.id};k.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(Cn=k.user)==null?void 0:Cn.id),Gn.entreprise=(Xt=k.user)==null?void 0:Xt.id):Nt.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",Nt.value.id),Gn.entreprise=Nt.value.id),console.log("Paramètres de la requête:",Gn);const Ut=await ur.get("/users/",{params:Gn});console.log("Réponse reçue du serveur:",{status:Ut.status,dataLength:Array.isArray(Ut.data)?Ut.data.length:"non-array",data:Ut.data}),Array.isArray(Ut.data)?(W.value=Ut.data,console.log(`${Ut.data.length} visiteurs chargés`),Ut.data.forEach((Jt,vn)=>{console.log(`Visiteur ${vn+1}:`,{id:Jt.id,username:Jt.username,company:Jt.company_name,salarie:Jt.salarie})})):(console.warn("Format de réponse inattendu:",Ut.data),W.value=[]),W.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Gn){if(console.error("ERREUR lors du chargement des visiteurs:",Gn),Gn&&typeof Gn=="object"&&"response"in Gn){const Ut=Gn;console.error("Détails de l'erreur:",{status:Ut.response.status,data:Ut.response.data})}W.value=[]}finally{Ve.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function Tn(){H.value=!1,Z.value=null}function or(lt){if(j.value){const qt=j.value.getLayers().find(_n=>_n._leaflet_id===lt.id);qt&&(qt.properties.name=lt.title,qt.properties.description=lt.description,qt.properties.columnId=lt.columnId,qt.properties.accessLevel=lt.accessLevel,qt.setNoteStyle({color:lt.style.color,fillColor:lt.style.fillColor,weight:lt.style.weight,fillOpacity:lt.style.fillOpacity,radius:lt.style.radius}),qt.closePopup(),qt.unbindPopup(),qt.bindPopup(qt.createPopupContent()))}u.success("Note enregistrée avec succès")}async function wn(lt){var We;_e.value=lt,B.value=!0;try{const qt={visiteur:lt.id};k.isEntreprise?qt.entreprise=(We=k.user)==null?void 0:We.id:Nt.value&&(qt.entreprise=Nt.value.id),G.value&&(qt.salarie=G.value.id);const _n=await ur.get("/plans/",{params:qt});V.value=_n.data}catch(qt){console.error("[MapView] Error loading client plans:",qt),V.value=[]}finally{B.value=!1}}function Rn(lt,We,qt,_n,Dn){if(!lt||lt.length===0)return _n;const Cn=[...lt].sort((dr,lr)=>(lr.surface||0)-(dr.surface||0)),Xt=Dn,Gn=7,Ut=6,Jt=2,vn=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],ci=Gn+Ut*Cn.length;We.setFillColor(248,250,252),We.setDrawColor(226,232,240),We.roundedRect(qt,_n,Xt,ci+Jt*2,2,2,"FD"),We.setFillColor(241,245,249),We.rect(qt+Jt,_n+Jt,Xt-Jt*2,Gn,"F"),We.setFont("helvetica","bold"),We.setFontSize(7),We.setTextColor(51,65,85);let Sn=qt+Jt;return vn.forEach(dr=>{const lr=dr.width*(Xt-Jt*2);dr.align==="right"?We.text(dr.header,Sn+lr-Jt,_n+Jt+5,{align:"right"}):dr.align==="center"?We.text(dr.header,Sn+lr/2,_n+Jt+5,{align:"center"}):We.text(dr.header,Sn+Jt/2,_n+Jt+5),Sn+=lr}),We.setFont("helvetica","normal"),We.setFontSize(6.5),We.setTextColor(71,85,105),Cn.forEach((dr,lr)=>{const bn=_n+Gn+Jt+lr*Ut;lr%2===0&&(We.setFillColor(250,252,254),We.rect(qt+Jt,bn,Xt-Jt*2,Ut,"F"));let yi=qt+Jt;const Es=dr.name||`Section ${lr+1}`;We.text(Es,yi+Jt/2,bn+4),yi+=vn[0].width*(Xt-Jt*2);const Co=ze(dr.surface||0,"m²");We.text(Co,yi+vn[1].width*(Xt-Jt*2)-Jt,bn+4,{align:"right"}),yi+=vn[1].width*(Xt-Jt*2);const Fi=dr.startAngle===0&&dr.endAngle===360?"Complet":`${dr.startAngle}°-${dr.endAngle}°`;We.text(Fi,yi+vn[2].width*(Xt-Jt*2)-Jt,bn+4,{align:"right"}),yi+=vn[2].width*(Xt-Jt*2);const Er=ze(dr.radius||0);We.text(Er,yi+vn[3].width*(Xt-Jt*2)-Jt,bn+4,{align:"right"}),yi+=vn[3].width*(Xt-Jt*2);const _i=dr.startAngle===0&&dr.endAngle===360?"C":"P";We.text(_i,yi+vn[4].width*(Xt-Jt*2)/2,bn+4,{align:"center"})}),We.setDrawColor(226,232,240),We.setLineWidth(.05),We.line(qt+Jt,_n+Gn+Jt,qt+Xt-Jt,_n+Gn+Jt),_n+ci+Jt*2}return(lt,We)=>{var qt,_n,Dn,Cn,Xt,Gn;return $e(),Ge(In,null,[M("div",OF,[M("div",NF,[Je.value?($e(),Ge("div",DF,We[8]||(We[8]=[fh('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):pn("",!0),R.value?pn("",!0):($e(),Ge("div",IF,[M("div",RF,[We[11]||(We[11]=fh('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+s1+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),M("div",FF,[M("button",{onClick:We[0]||(We[0]=Ut=>me.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},We[9]||(We[9]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ui(" Créer un nouveau plan ")])),M("button",{onClick:We[1]||(We[1]=Ut=>Le.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},We[10]||(We[10]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ui(" Charger un plan existant ")]))])])])),Hn(M("div",jF,[($e(),ja(P0,{to:"body"},[R.value&&!Je.value?($e(),Ge("div",zF,[Kr(tD,{"last-save":(qt=R.value)!=null&&qt.date_modification?new Date(R.value.date_modification):void 0,"plan-name":(_n=R.value)==null?void 0:_n.nom,"plan-description":(Dn=R.value)==null?void 0:Dn.description,"save-status":O.value,onChangeMapType:qn(se),onCreateNewPlan:We[2]||(We[2]=Ut=>me.value=!0),onLoadPlan:We[3]||(We[3]=Ut=>Le.value=!0),onSavePlan:Ye,onAdjustView:be,onGenerateSummary:it},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):pn("",!0)])),M("div",UF,[r.value&&R.value&&!Je.value?($e(),Ge("div",{key:0,onClick:J,class:"md:hidden fixed inset-0 bg-black/30 z-[1999] transition-opacity duration-300"})):pn("",!0),R.value&&!Je.value?($e(),Ge("div",{key:1,onClick:J,class:"md:hidden fixed left-0 right-0 z-[2500] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"}},We[12]||(We[12]=[fh('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):pn("",!0),M("div",$F,[M("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 z-[1000]"},null,512)]),R.value&&!Je.value?($e(),Ge("div",{key:2,class:Ni([r.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 md:border-l border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none overflow-y-auto"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[M("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200"},[M("div",{class:"flex items-center"},[M("div",{onClick:J,class:"w-10 h-1.5 bg-gray-300 rounded-full cursor-pointer mr-3"})]),M("button",{onClick:J,class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},We[13]||(We[13]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Kr(bN,{"current-tool":qn(d),"selected-shape":le.value,"all-layers":((Cn=qn(j))==null?void 0:Cn.getLayers())||[],onToolChange:qn(_),onStyleUpdate:qn(P),onPropertiesUpdate:oe,onDeleteShape:de},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):pn("",!0)]),Je.value?($e(),Ge("div",VF,We[14]||(We[14]=[fh('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):pn("",!0)],512),[[Kf,R.value]]),($e(),ja(P0,{to:"body"},[Kr(mx,{ref_key:"newPlanModalRef",ref:te,modelValue:me.value,"onUpdate:modelValue":We[4]||(We[4]=Ut=>me.value=Ut),onCreated:Ue,onSalarieSelected:We[5]||(We[5]=Ut=>G.value=Ut),onVisiteurSelected:We[6]||(We[6]=Ut=>ne.value=Ut)},null,8,["modelValue"])])),($e(),ja(P0,{to:"body"},[Le.value?($e(),Ge("div",HF,[M("div",GF,[M("div",qF,[We[16]||(We[16]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),M("button",{onClick:We[7]||(We[7]=Ut=>Le.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},We[15]||(We[15]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",WF,[qn(k).isAdmin?($e(),Ge("div",ZF,[Nt.value?G.value?_e.value?($e(),Ge("div",f9,[M("div",d9,[M("button",{onClick:kn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[31]||(We[31]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des clients ")])),We[32]||(We[32]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",p9,Ht(et(_e.value)),1)]),We[34]||(We[34]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",m9,[B.value?($e(),Ge(In,{key:0},Sr(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},We[33]||(We[33]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),Ge(In,{key:1},Sr(V.value,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>Me(Ut.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",v9,Ht(Ut.nom),1),M("div",y9,Ht(Ut.description),1),M("div",_9," Modifié le "+Ht(fe(Ut.date_modification)),1)],8,g9))),128))])])):($e(),Ge("div",o9,[M("div",s9,[M("button",{onClick:en,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[25]||(We[25]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des salaries ")])),We[26]||(We[26]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",a9,Ht(et(G.value)),1)]),We[30]||(We[30]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),M("div",l9,[Ve.value?($e(),Ge(In,{key:0},Sr(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},We[27]||(We[27]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),Ge(In,{key:1},[ce.value.length===0?($e(),Ge("div",u9,We[28]||(We[28]=[M("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),M("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):($e(!0),Ge(In,{key:1},Sr(ce.value,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>wn(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",h9,Ht(et(Ut)),1)]),We[29]||(We[29]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,c9))),128))],64))])])):($e(),Ge("div",QF,[M("div",e9,[M("button",{onClick:$t,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[20]||(We[20]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des entreprises ")])),We[21]||(We[21]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",t9,Ht(et(Nt.value)),1)]),We[24]||(We[24]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),M("div",n9,[ge.value?($e(),Ge(In,{key:0},Sr(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},We[22]||(We[22]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),Ge(In,{key:1},Sr(mn.value,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>Ln(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",i9,Ht(et(Ut)),1)]),We[23]||(We[23]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,r9))),128))])])):($e(),Ge("div",KF,[We[19]||(We[19]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),M("div",YF,[Kt.value?($e(),Ge(In,{key:0},Sr(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},We[17]||(We[17]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),Ge(In,{key:1},Sr(hn.value,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>nt(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",JF,Ht(et(Ut)),1)]),We[18]||(We[18]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,XF))),128))])]))])):qn(k).isSalarie?($e(),Ge("div",b9,[_e.value?($e(),Ge("div",C9,[M("div",P9,[M("button",{onClick:kn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[39]||(We[39]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des clients ")])),We[40]||(We[40]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",A9,Ht(et(_e.value)),1)]),We[42]||(We[42]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",M9,[B.value?($e(),Ge(In,{key:0},Sr(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},We[41]||(We[41]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),Ge(In,{key:1},Sr(V.value,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>Me(Ut.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",T9,Ht(Ut.nom),1),M("div",B9,Ht(Ut.description),1),M("div",O9," Modifié le "+Ht(fe(Ut.date_modification)),1)],8,k9))),128))])])):($e(),Ge("div",w9,[We[38]||(We[38]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),M("div",x9,[Ve.value?($e(),Ge(In,{key:0},Sr(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},We[35]||(We[35]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),Ge(In,{key:1},[ce.value.length===0?($e(),Ge("div",L9,We[36]||(We[36]=[M("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),M("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):($e(!0),Ge(In,{key:1},Sr(ce.value,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>wn(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",E9,Ht(et(Ut)),1)]),We[37]||(We[37]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,S9))),128))],64))])]))])):qn(k).isEntreprise?($e(),Ge("div",N9,Ht(qn(k).isEntreprise?"...":""),1)):($e(),Ge("div",D9,[qn(i).plans.length===0?($e(),Ge("div",I9,We[43]||(We[43]=[M("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):($e(),Ge("div",R9,[($e(!0),Ge(In,null,Sr(qn(i).plans,Ut=>($e(),Ge("button",{key:Ut.id,onClick:Jt=>Me(Ut.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",j9,Ht(Ut.nom),1),M("div",z9,Ht(Ut.description),1),M("div",U9," Modifié le "+Ht(fe(Ut.date_modification)),1)],8,F9))),128))]))]))])])])):pn("",!0)]))])]),H.value?($e(),ja(tx,{key:0,note:Z.value,"is-new-note":!((Xt=Z.value)!=null&&Xt.id),location:(Gn=Z.value)==null?void 0:Gn.location,onClose:Tn,onSave:or},null,8,["note","is-new-note","location"])):pn("",!0)],64)}}}),$9={class:"fixed inset-0 z-[3001] overflow-y-auto"},V9={class:"flex items-center justify-center min-h-screen w-full p-0"},H9={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},G9={class:"p-4 md:p-6"},q9={class:"flex justify-between items-center mb-4 border-b pb-4"},W9={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},Z9={class:"mt-4"},K9={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},Y9={class:"flex"},X9={class:"ml-3"},J9={class:"text-sm font-medium text-red-800"},Q9={key:0},ej={key:1},tj=["value"],nj={key:2},rj={key:3},ij=["value"],oj={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},sj={key:0,class:"mt-2 text-sm text-red-600"},aj={key:0,class:"mt-2 text-sm text-red-600"},lj={key:4},uj={key:5},cj={key:0,class:"mt-2 text-sm text-red-600"},hj={class:"flex justify-end space-x-3"},fj=["disabled"],dj={key:0,class:"mr-2"},pj=Jo({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:t}){const n=e,r=t,i=It(!1),s=It(""),o=It(""),u=It(""),h=It(""),d=It(""),g=mu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0});ma(()=>{var w;(w=n.user)!=null&&w.id?(g.id=n.user.id,g.first_name=n.user.first_name||"",g.last_name=n.user.last_name||"",g.username=n.user.username||"",g.email=n.user.email||"",g.company_name=n.user.company_name||"",g.role=n.user.role||"VISITEUR",g.is_active=n.user.is_active??!0,n.user.salarie?typeof n.user.salarie=="object"?g.salarie=n.user.salarie.id:g.salarie=n.user.salarie:n.user.salarie_id?g.salarie=n.user.salarie_id:n.currentSalarie&&(g.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?g.entreprise=n.user.entreprise.id:g.entreprise=n.user.entreprise:n.user.entreprise_id?g.entreprise=n.user.entreprise_id:n.currentEntreprise&&(g.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(g.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(g.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?g.role="SALARIE":n.isAdmin||(g.role="VISITEUR"))}),vp(()=>{g.role==="ADMIN"||g.role==="ENTREPRISE"?(g.salarie=null,g.entreprise=null):g.role==="SALARIE"&&(g.salarie=null,n.isEntreprise&&n.currentEntreprise&&(g.entreprise=parseInt(n.currentEntreprise)))}),vp(()=>{s.value="",o.value="",u.value="",h.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(w=>{switch(w.field){case"email":s.value=w.message;break;case"username":o.value=w.message;break;case"password":u.value=w.message;break;case"non_field_error":default:h.value=w.message;break}})});async function y(){s.value="",o.value="",u.value="",h.value="";let w=!0;if(g.id||(g.password!==d.value?(u.value="Les mots de passe ne correspondent pas",w=!1):g.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractères",w=!1)),!!w){i.value=!0;try{const _={...g};g.id&&delete _.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(g.role)&&(_.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),_.salarie&&(_.salarie_id=_.salarie,delete _.salarie),n.currentSalarie&&g.role==="VISITEUR"&&(_.salarie_id=parseInt(n.currentSalarie)),await r("save",_),r("refresh")}catch(_){console.error("Erreur locale:",_)}finally{i.value=!1}}}return(w,_)=>($e(),Ge("div",$9,[M("div",V9,[_[31]||(_[31]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),M("div",H9,[M("div",null,[M("div",G9,[M("div",q9,[M("h3",W9,Ht(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),M("button",{type:"button",onClick:_[0]||(_[0]=P=>w.$emit("close")),class:"text-gray-400 hover:text-gray-500"},_[13]||(_[13]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",Z9,[h.value?($e(),Ge("div",K9,[M("div",Y9,[_[14]||(_[14]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",X9,[M("h3",J9,Ht(h.value),1)])])])):pn("",!0),M("form",{onSubmit:zc(y,["prevent"]),class:"space-y-6"},[e.isAdmin?($e(),Ge("div",Q9,[_[16]||(_[16]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Hn(M("select",{id:"role","onUpdate:modelValue":_[1]||(_[1]=P=>g.role=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[15]||(_[15]=[M("option",{value:"ADMIN"},"Administrateur",-1),M("option",{value:"ENTREPRISE"},"Entreprise",-1),M("option",{value:"SALARIE"},"Salarie",-1),M("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Eo,g.role]])])):pn("",!0),e.isAdmin&&g.role==="SALARIE"?($e(),Ge("div",ej,[_[18]||(_[18]=M("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Hn(M("select",{id:"entreprise","onUpdate:modelValue":_[2]||(_[2]=P=>g.entreprise=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[_[17]||(_[17]=M("option",{value:null},"-- Sélectionner une entreprise --",-1)),($e(!0),Ge(In,null,Sr(e.entreprises,P=>($e(),Ge("option",{key:P.id,value:P.id},Ht(P.first_name)+" "+Ht(P.last_name)+" ("+Ht(P.company_name||"Entreprise")+") ",9,tj))),128))],512),[[Eo,g.entreprise]])])):pn("",!0),e.isEntreprise&&!g.id?($e(),Ge("div",nj,[_[20]||(_[20]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Hn(M("select",{id:"role","onUpdate:modelValue":_[3]||(_[3]=P=>g.role=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[19]||(_[19]=[M("option",{value:"SALARIE"},"Salarie",-1),M("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Eo,g.role]])])):pn("",!0),(e.isAdmin||e.isEntreprise)&&g.role==="VISITEUR"&&!e.currentSalarie?($e(),Ge("div",rj,[_[22]||(_[22]=M("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Hn(M("select",{id:"salarie","onUpdate:modelValue":_[4]||(_[4]=P=>g.salarie=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[_[21]||(_[21]=M("option",{value:null},"-- Sélectionner un salarie --",-1)),($e(!0),Ge(In,null,Sr(e.salaries,P=>($e(),Ge("option",{key:P.id,value:P.id},Ht(P.first_name)+" "+Ht(P.last_name)+" ("+Ht(P.company_name||"Salarie")+") ",9,ij))),128))],512),[[Eo,g.salarie]])])):pn("",!0),M("div",oj,[M("div",null,[_[23]||(_[23]=M("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Hn(M("input",{type:"text",id:"first_name","onUpdate:modelValue":_[5]||(_[5]=P=>g.first_name=P),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,g.first_name]])]),M("div",null,[_[24]||(_[24]=M("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Hn(M("input",{type:"text",id:"last_name","onUpdate:modelValue":_[6]||(_[6]=P=>g.last_name=P),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,g.last_name]])])]),M("div",null,[_[25]||(_[25]=M("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Hn(M("input",{type:"email",id:"email","onUpdate:modelValue":_[7]||(_[7]=P=>g.email=P),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,g.email]]),s.value?($e(),Ge("div",sj,Ht(s.value),1)):pn("",!0)]),M("div",null,[_[26]||(_[26]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Hn(M("input",{type:"text",id:"username","onUpdate:modelValue":_[8]||(_[8]=P=>g.username=P),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,g.username]]),o.value?($e(),Ge("div",aj,Ht(o.value),1)):pn("",!0)]),M("div",null,[_[27]||(_[27]=M("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Hn(M("input",{type:"text",id:"company_name","onUpdate:modelValue":_[9]||(_[9]=P=>g.company_name=P),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,g.company_name]])]),g.id?pn("",!0):($e(),Ge("div",lj,[_[28]||(_[28]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Hn(M("input",{type:"password",id:"password","onUpdate:modelValue":_[10]||(_[10]=P=>g.password=P),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,g.password]])])),g.id?pn("",!0):($e(),Ge("div",uj,[_[29]||(_[29]=M("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Hn(M("input",{type:"password",id:"password_confirm","onUpdate:modelValue":_[11]||(_[11]=P=>d.value=P),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,d.value]]),u.value?($e(),Ge("div",cj,Ht(u.value),1)):pn("",!0)])),M("div",hj,[M("button",{type:"button",onClick:_[12]||(_[12]=P=>w.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),M("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?($e(),Ge("span",dj,_[30]||(_[30]=[M("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):pn("",!0),ui(" "+Ht(g.id?"Enregistrer":"Créer"),1)],8,fj)])],32)])])])])])]))}}),mj={class:"fixed inset-0 z-[3001] overflow-y-auto"},gj={class:"flex items-center justify-center min-h-screen w-full"},vj={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},yj={class:"p-4 md:p-6"},_j={class:"flex items-start"},bj={class:"ml-4 flex-1"},wj={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},xj={class:"mt-2"},Lj={class:"text-sm text-gray-500"},Sj={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},Rx=Jo({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>($e(),Ge("div",mj,[M("div",gj,[n[3]||(n[3]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),M("div",vj,[M("div",yj,[M("div",_j,[n[2]||(n[2]=M("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[M("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),M("div",bj,[M("h3",wj,Ht(e.title),1),M("div",xj,[M("p",Lj,Ht(e.message),1)])])]),M("div",Sj,[M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])])]))}}),Ej={class:"h-full bg-gray-50"},Cj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pj={class:"flex justify-between items-center mb-8"},Aj={class:"text-3xl font-extrabold text-gray-900"},Mj={key:0},kj={key:1},Tj={key:2},Bj={key:0},Oj={key:1},Nj={key:2},Dj={class:"bg-white shadow rounded-lg mb-6 p-4"},Ij={class:"space-y-4"},Rj={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Fj={key:0},jj={key:0,value:"ADMIN"},zj={key:1,value:"ENTREPRISE"},Uj={key:1},$j=["value"],Vj={key:2},Hj=["value"],Gj={class:"w-full"},qj={class:"bg-white shadow rounded-lg"},Wj={class:"overflow-x-auto"},Zj={class:"min-w-full divide-y divide-gray-200"},Kj={class:"bg-gray-50"},Yj={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Xj={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Jj={class:"bg-white divide-y divide-gray-200"},Qj={key:0,class:"animate-pulse"},ez={key:1},tz={class:"px-6 py-4 whitespace-nowrap"},nz={class:"flex items-center"},rz={class:"flex-shrink-0 h-10 w-10"},iz={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},oz={class:"text-primary-600 font-medium"},sz={class:"ml-4"},az={class:"text-sm font-medium text-gray-900"},lz={class:"text-sm text-gray-500"},uz={class:"px-6 py-4 whitespace-nowrap"},cz={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},hz={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fz={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},dz={class:"px-6 py-4 whitespace-nowrap"},pz={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},mz=["onClick"],gz=["onClick"],vz={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},yz=Jo({__name:"UserListView",setup(e){const t=pa(),n=hc(),r=It([]),i=It([]),s=It([]),o=It(!1),u=It(!1),h=It(null),d=It(null),g=It(!0),y=It([]),w=mu({role:"",search:"",salarie:"",entreprise:""}),_=hr(()=>t.isAdmin),P=hr(()=>t.isEntreprise),T=hr(()=>t.isSalarie),j=hr(()=>_.value?r.value.filter(I=>I.role==="SALARIE"):P.value?r.value.filter(I=>{var W,V;return I.role==="SALARIE"&&((W=I.entreprise)==null?void 0:W.id)===((V=t.user)==null?void 0:V.id)}):[]),D=hr(()=>{let I=r.value;if(P.value&&(I=I.filter(W=>{var V,G,ne,_e,ge;return W.role==="SALARIE"?((V=W.entreprise)==null?void 0:V.id)===((G=t.user)==null?void 0:G.id):W.role==="VISITEUR"?((_e=(ne=W.salarie)==null?void 0:ne.entreprise)==null?void 0:_e.id)===((ge=t.user)==null?void 0:ge.id):!1})),T.value&&(I=I.filter(W=>{var V,G;return W.role==="VISITEUR"&&(W.salarie_id===((V=t.user)==null?void 0:V.id)||W.salarie&&W.salarie.id===((G=t.user)==null?void 0:G.id))})),(_.value||P.value)&&(w.role&&(I=I.filter(W=>W.role===w.role)),w.salarie&&(I=I.filter(W=>{var G;const V=((G=W.salarie)==null?void 0:G.id)||W.salarie_id;return(V==null?void 0:V.toString())===w.salarie.toString()})),w.entreprise&&_.value&&(I=I.filter(W=>{var V,G,ne,_e,ge;return W.role==="SALARIE"?((G=(V=W.entreprise)==null?void 0:V.id)==null?void 0:G.toString())===w.entreprise.toString():W.role==="VISITEUR"?((ge=(_e=(ne=W.salarie)==null?void 0:ne.entreprise)==null?void 0:_e.id)==null?void 0:ge.toString())===w.entreprise.toString():!1}))),w.search){const W=w.search.toLowerCase();I=I.filter(V=>{var G,ne,_e,ge;return((G=V.username)==null?void 0:G.toLowerCase().includes(W))||((ne=V.email)==null?void 0:ne.toLowerCase().includes(W))||((_e=V.first_name)==null?void 0:_e.toLowerCase().includes(W))||((ge=V.last_name)==null?void 0:ge.toLowerCase().includes(W))||V.company_name&&V.company_name.toLowerCase().includes(W)})}return I});ma(async()=>{await U(),await K()});async function U(){var I,W,V;g.value=!0;try{if(_.value)r.value=await t.fetchUsers();else if(P.value){const[G,ne]=await Promise.all([D0({role:"SALARIE",entrepriseId:(I=t.user)==null?void 0:I.id}),D0({role:"VISITEUR",entrepriseId:(W=t.user)==null?void 0:W.id})]);r.value=[...G,...ne]}else T.value&&(r.value=await D0({role:"VISITEUR",salarieId:(V=t.user)==null?void 0:V.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(G){console.error("Erreur lors de la récupération des utilisateurs:",G),n.error("Erreur lors de la récupération des utilisateurs")}finally{g.value=!1}}async function K(){try{_.value?await Promise.all([X(),me()]):P.value&&await se()}catch(I){console.error("Erreur lors de la récupération des dépendances:",I)}}async function X(){var I;try{_.value?i.value=await t.fetchUsersByRole({role:"SALARIE"}):P.value&&(i.value=await t.fetchEntrepriseSalaries((I=t.user)==null?void 0:I.id))}catch(W){console.error("Erreur lors de la récupération des salaries:",W)}}async function se(){var I,W;if(!(!P.value||!((I=t.user)!=null&&I.id)))try{i.value=await t.fetchEntrepriseSalaries((W=t.user)==null?void 0:W.id)}catch(V){console.error("Erreur lors de la récupération des salaries de l'entreprise:",V)}}async function me(){try{s.value=await t.fetchEnterprises()}catch(I){console.error("Erreur lors de la récupération des entreprises:",I)}}function Le(){h.value=null,o.value=!0}function H(I){h.value={...I},o.value=!0}function R(){o.value=!1,h.value=null,y.value=[]}async function Z(I){var V,G,ne,_e,ge,Ve;y.value=[];const W=!!I.id;try{const B={...I};_.value?(B.entreprise&&typeof B.entreprise=="object"?B.entreprise_id=B.entreprise.id:typeof B.entreprise=="number"&&(B.entreprise_id=B.entreprise),B.salarie&&typeof B.salarie=="object"?B.salarie_id=B.salarie.id:typeof B.salarie=="number"&&(B.salarie_id=B.salarie)):P.value?(B.entreprise_id=(V=t.user)==null?void 0:V.id,B.role==="VISITEUR"&&(B.salarie&&typeof B.salarie=="object"?B.salarie_id=B.salarie.id:typeof B.salarie=="number"&&(B.salarie_id=B.salarie))):T.value&&(B.role="VISITEUR",B.salarie_id=(G=t.user)==null?void 0:G.id),B.role==="SALARIE"?((ne=B.entreprise)!=null&&ne.id?(B.entreprise_id=B.entreprise.id,delete B.entreprise):typeof B.entreprise=="number"&&(B.entreprise_id=B.entreprise,delete B.entreprise),delete B.salarie):B.role==="VISITEUR"&&((_e=B.salarie)!=null&&_e.id?(B.salarie_id=B.salarie.id,delete B.salarie):typeof B.salarie=="number"&&(B.salarie_id=B.salarie,delete B.salarie),delete B.entreprise,delete B.entreprise_id),W?(await t.updateUser(I.id,B),n.success("Utilisateur modifié avec succès")):(await t.createUser(B),n.success("Utilisateur créé avec succès")),await Promise.all([U(),K()]),R()}catch(B){console.error("Error saving user:",((ge=B.response)==null?void 0:ge.data)||B),y.value=nT(B),n.error("Erreur lors de la sauvegarde de l'utilisateur");const te=((Ve=B.response)==null?void 0:Ve.data)||{};let ce="";throw typeof te=="object"&&(ce=Object.entries(te).map(([le,xe])=>Array.isArray(xe)?`${le}: ${xe[0]}`:`${le}: ${xe}`).filter(le=>le).join(`
`)),ce||(ce="Une erreur est survenue lors de la sauvegarde"),new Error(ce)}}function z(I){d.value=I,u.value=!0}async function O(){if(d.value)try{await t.deleteUser(d.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([U(),K()]),u.value=!1,d.value=null}catch(I){throw console.error("Erreur lors de la suppression de l'utilisateur:",I),n.error("Erreur lors de la suppression de l'utilisateur"),I}}function k(I){var W,V,G,ne,_e,ge,Ve,B;return _.value?!0:P.value?I.role==="SALARIE"?((W=I.entreprise)==null?void 0:W.id)===((V=t.user)==null?void 0:V.id):I.role==="VISITEUR"?((ne=(G=I.salarie)==null?void 0:G.entreprise)==null?void 0:ne.id)===((_e=t.user)==null?void 0:_e.id):!1:T.value?I.role==="VISITEUR"&&(I.salarie_id===((ge=t.user)==null?void 0:ge.id)||((Ve=I.salarie)==null?void 0:Ve.id)===((B=t.user)==null?void 0:B.id)):!1}return(I,W)=>{var V,G,ne,_e;return $e(),Ge("div",Ej,[M("div",Cj,[M("div",Pj,[M("h1",Aj,[_.value?($e(),Ge("span",Mj,"Gestion des utilisateurs")):P.value?($e(),Ge("span",kj,"Gestion des salaries et visiteurs")):T.value?($e(),Ge("span",Tj,"Gestion des visiteurs")):pn("",!0)]),M("button",{onClick:Le,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[5]||(W[5]=M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_.value?($e(),Ge("span",Bj,"Nouvel utilisateur")):P.value?($e(),Ge("span",Oj,"Nouveau salarie/visiteur")):T.value?($e(),Ge("span",Nj,"Nouvel visiteur")):pn("",!0)])]),M("div",Dj,[M("div",Ij,[M("div",Rj,[_.value||P.value?($e(),Ge("div",Fj,[W[9]||(W[9]=M("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Hn(M("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=ge=>w.role=ge),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[6]||(W[6]=M("option",{value:""},"Tous les rôles",-1)),_.value?($e(),Ge("option",jj,"Administrateur")):pn("",!0),_.value?($e(),Ge("option",zj,"Entreprise")):pn("",!0),W[7]||(W[7]=M("option",{value:"SALARIE"},"Salarie",-1)),W[8]||(W[8]=M("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Eo,w.role]])])):pn("",!0),_.value?($e(),Ge("div",Uj,[W[11]||(W[11]=M("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Hn(M("select",{id:"entreprise-filter","onUpdate:modelValue":W[1]||(W[1]=ge=>w.entreprise=ge),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[10]||(W[10]=M("option",{value:""},"Toutes les entreprises",-1)),($e(!0),Ge(In,null,Sr(s.value,ge=>($e(),Ge("option",{key:ge.id,value:ge.id},Ht(qn(Ul)(ge)),9,$j))),128))],512),[[Eo,w.entreprise]])])):pn("",!0),_.value||P.value?($e(),Ge("div",Vj,[W[13]||(W[13]=M("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Hn(M("select",{id:"salarie-filter","onUpdate:modelValue":W[2]||(W[2]=ge=>w.salarie=ge),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[12]||(W[12]=M("option",{value:""},"Tous les salaries",-1)),($e(!0),Ge(In,null,Sr(j.value,ge=>($e(),Ge("option",{key:ge.id,value:ge.id},Ht(qn(Ul)(ge)),9,Hj))),128))],512),[[Eo,w.salarie]])])):pn("",!0)]),M("div",Gj,[W[14]||(W[14]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Hn(M("input",{type:"text",id:"search","onUpdate:modelValue":W[3]||(W[3]=ge=>w.search=ge),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ur,w.search]])])])]),M("div",qj,[M("div",Wj,[M("table",Zj,[M("thead",Kj,[M("tr",null,[W[15]||(W[15]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),W[16]||(W[16]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),W[17]||(W[17]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value||P.value?($e(),Ge("th",Yj," Entreprise ")):pn("",!0),_.value||P.value?($e(),Ge("th",Xj," Salarie ")):pn("",!0),W[18]||(W[18]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[19]||(W[19]=M("th",{scope:"col",class:"relative px-6 py-3"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",Jj,[g.value?($e(),Ge("tr",Qj,W[20]||(W[20]=[M("td",{colspan:"7",class:"py-4 px-6"},[M("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):D.value.length===0?($e(),Ge("tr",ez,W[21]||(W[21]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):pn("",!0),($e(!0),Ge(In,null,Sr(D.value,ge=>{var Ve;return $e(),Ge("tr",{key:ge.id},[M("td",tz,[M("div",nz,[M("div",rz,[M("div",iz,[M("span",oz,Ht(qn(iT)(ge.first_name,ge.last_name)),1)])]),M("div",sz,[M("div",az,Ht(qn(Ul)(ge)),1),M("div",lz,Ht(ge.username),1)])])]),M("td",uz,[M("span",{class:Ni(qn(aT)())},Ht(qn(sT)(ge.role)),3)]),M("td",cz,Ht(ge.email),1),_.value||P.value?($e(),Ge("td",hz,[ge.role==="ENTREPRISE"?($e(),Ge(In,{key:0},[ui(" - ")],64)):ge.role==="SALARIE"?($e(),Ge(In,{key:1},[ui(Ht(ge.entreprise?qn(Ul)(ge.entreprise):"Non assigné"),1)],64)):ge.role==="VISITEUR"?($e(),Ge(In,{key:2},[ui(Ht((Ve=ge.salarie)!=null&&Ve.entreprise?qn(Ul)(ge.salarie.entreprise):"Non assigné"),1)],64)):($e(),Ge(In,{key:3},[ui(" - ")],64))])):pn("",!0),_.value||P.value?($e(),Ge("td",fz,[ge.role==="ENTREPRISE"||ge.role==="ADMIN"?($e(),Ge(In,{key:0},[ui(" - ")],64)):ge.role==="SALARIE"?($e(),Ge(In,{key:1},[ui(" - ")],64)):($e(),Ge(In,{key:2},[ui(Ht(ge.salarie?qn(Ul)(ge.salarie):"Non assigné"),1)],64))])):pn("",!0),M("td",dz,[M("span",{class:Ni(qn(lT)(ge.is_active))},Ht(ge.is_active?"Actif":"Inactif"),3)]),M("td",pz,[M("button",{onClick:B=>H(ge),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,mz),k(ge)?($e(),Ge("button",{key:0,onClick:B=>z(ge),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,gz)):pn("",!0)])])}),128))])])])])]),o.value?($e(),Ge("div",vz,[Kr(pj,{user:h.value,salaries:i.value,entreprises:s.value,"is-admin":_.value,"is-entreprise":P.value,"current-salarie":T.value?(G=(V=qn(t).user)==null?void 0:V.id)==null?void 0:G.toString():void 0,"current-entreprise":P.value?(_e=(ne=qn(t).user)==null?void 0:ne.id)==null?void 0:_e.toString():void 0,"api-errors":y.value,onClose:R,onSave:Z},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):pn("",!0),u.value?($e(),ja(Rx,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:O,onCancel:W[4]||(W[4]=ge=>u.value=!1)})):pn("",!0)])}}}),_z={class:"h-full bg-gray-50"},bz={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wz={class:"sm:flex sm:items-center"},xz={class:"sm:flex-auto"},Lz={class:"text-2xl font-semibold text-gray-900"},Sz={class:"mt-2 text-sm text-gray-700"},Ez={key:0,class:"mt-8"},Cz={class:"mb-6"},Pz=["value"],Az={class:"mb-6"},Mz={value:null},kz=["value"],Tz={key:0,class:"mb-6"},Bz={value:null},Oz=["value"],Nz={key:1,class:"mt-8"},Dz={class:"mb-6"},Iz=["value"],Rz={class:"mt-8"},Fz={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},jz={class:"overflow-x-auto"},zz={class:"min-w-full divide-y divide-gray-300"},Uz={class:"bg-gray-50"},$z={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Vz={class:"ml-2 flex-none rounded"},Hz={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Gz={class:"ml-2 flex-none rounded"},qz={class:"divide-y divide-gray-200 bg-white"},Wz={key:0},Zz={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},Kz={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Yz={class:"px-3 py-4 text-sm text-gray-900"},Xz={key:0,class:"flex items-center"},Jz={class:"h-8 w-8 flex-shrink-0"},Qz={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},eU={class:"text-primary-700 font-medium text-sm"},tU={class:"ml-3"},nU={class:"font-medium"},rU={key:1,class:"text-gray-500"},iU={class:"px-3 py-4 text-sm text-gray-900"},oU={key:0,class:"flex items-center"},sU={class:"h-8 w-8 flex-shrink-0"},aU={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},lU={class:"text-primary-700 font-medium text-sm"},uU={class:"ml-3"},cU={class:"font-medium"},hU={key:1,class:"text-gray-500"},fU={class:"px-3 py-4 text-sm text-gray-900"},dU={key:0,class:"flex items-center"},pU={class:"h-8 w-8 flex-shrink-0"},mU={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},gU={class:"text-primary-700 font-medium text-sm"},vU={class:"ml-3"},yU={class:"font-medium"},_U={key:1,class:"text-gray-500"},bU={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},wU={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},xU=["onClick"],LU=["onClick"],SU=["onClick"],EU={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},CU={class:"bg-white rounded-lg p-6 max-w-md w-full"},PU={class:"flex justify-between items-center mb-4"},AU=["disabled"],MU=["disabled"],kU={key:0,class:"space-y-4"},TU={key:0},BU=["disabled"],OU=["value"],NU=["disabled"],DU=["value"],IU={key:0,class:"mt-1 text-sm text-gray-500"},RU=["disabled"],FU=["value"],jU={key:0,class:"mt-1 text-sm text-gray-500"},zU={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},UU={class:"flex"},$U={class:"ml-3"},VU={class:"text-sm font-medium text-red-800"},HU={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},GU=["disabled"],qU={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},WU=Jo({__name:"PlansView",setup(e){const t=Bp(),n=py(),r=pa(),i=It([]),s=It([]),o=It([]),u=It([]),h=It(!1),d=It(!1),g=It(!1),y=It(null),w=It({nom:"",description:"",client:null}),_=It({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),P=It(!1),T=It(null),j=It(null),D=It(null),U=It("date_modification"),K=It("desc"),X=It(null),se=hr(()=>j.value?u.value.filter(J=>typeof J.salarie=="object"&&J.salarie?J.salarie.id===j.value:J.salarie===j.value||J.salarie_id===j.value):u.value),me=hr(()=>{let J=i.value;console.log(`
[PlansView] Filtering plans:`,J.map(Fe=>({id:Fe.id,entreprise:Fe.entreprise,salarie:Fe.salarie,visiteur:Fe.visiteur}))),r.isAdmin?(X.value&&(J=J.filter(Fe=>{var Me;return typeof Fe.entreprise=="object"?((Me=Fe.entreprise)==null?void 0:Me.id)===X.value:Fe.entreprise===X.value})),j.value&&(J=J.filter(Fe=>{var Me;return typeof Fe.salarie=="object"?((Me=Fe.salarie)==null?void 0:Me.id)===j.value:Fe.salarie===j.value}),D.value&&(J=J.filter(Fe=>{var Me;return typeof Fe.visiteur=="object"?((Me=Fe.visiteur)==null?void 0:Me.id)===D.value:Fe.visiteur===D.value})))):r.isSalarie&&(J=J.filter(Fe=>{var Me,Ye,oe;return typeof Fe.salarie=="object"?((Me=Fe.salarie)==null?void 0:Me.id)===((Ye=r.user)==null?void 0:Ye.id):Fe.salarie===((oe=r.user)==null?void 0:oe.id)}),D.value&&(J=J.filter(Fe=>{var Me;return typeof Fe.visiteur=="object"?((Me=Fe.visiteur)==null?void 0:Me.id)===D.value:Fe.visiteur===D.value})));const ae=[...J].sort((Fe,Me)=>{if(U.value==="nom")return K.value==="asc"?Fe.nom.localeCompare(Me.nom):Me.nom.localeCompare(Fe.nom);{const Ye=new Date(Fe[U.value]).getTime(),oe=new Date(Me[U.value]).getTime();return K.value==="asc"?Ye-oe:oe-Ye}});return console.log("[PlansView] Final filtered and sorted plans:",ae.map(Fe=>({id:Fe.id,entreprise:Fe.entreprise,salarie:Fe.salarie,visiteur:Fe.visiteur}))),ae}),Le=hr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(J=>{var ae,Fe,Me;return typeof J.salarie=="object"?((ae=J.salarie)==null?void 0:ae.id)===((Fe=r.user)==null?void 0:Fe.id):J.salarie===((Me=r.user)==null?void 0:Me.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(J=>{var Me,Ye,oe,fe;const ae=J.createur.id===((Me=r.user)==null?void 0:Me.id);let Fe=!1;return typeof J.visiteur=="object"?Fe=((Ye=J.visiteur)==null?void 0:Ye.id)===((oe=r.user)==null?void 0:oe.id):Fe=J.visiteur===((fe=r.user)==null?void 0:fe.id),Fe||ae})}),H=hr(()=>X.value?s.value.filter(J=>{var ae;return typeof J.entreprise=="object"?((ae=J.entreprise)==null?void 0:ae.id)===X.value:J.entreprise_id===X.value}):s.value),R=hr(()=>_.value.entreprise?s.value.filter(J=>{var ae;return typeof J.entreprise=="object"?((ae=J.entreprise)==null?void 0:ae.id)===_.value.entreprise:J.entreprise_id===_.value.entreprise}):[]),Z=hr(()=>!_.value.entreprise||!_.value.salarie?[]:u.value.filter(J=>typeof J.salarie=="object"&&J.salarie?J.salarie.id===_.value.salarie:J.salarie===_.value.salarie||J.salarie_id===_.value.salarie));ma(async()=>{var J;await z(),r.isAdmin?await O():r.isSalarie&&await I(((J=r.user)==null?void 0:J.id)||0)});async function z(){try{const J=await n.fetchPlansWithDetails();i.value=J.data}catch(J){console.error("Erreur lors du chargement des plans:",J)}}async function O(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(J){console.error("Erreur lors du chargement des entreprises:",J)}}async function k(J){try{if(console.log("Chargement des salaries pour l'entreprise:",J),J===void 0){const ae=await r.fetchUsersByRole({role:"SALARIE"});s.value=ae}else s.value=await r.fetchEntrepriseSalaries(J);console.log("Salaries chargés:",s.value)}catch(ae){console.error("Erreur lors du chargement des salaries:",ae)}}async function I(J){try{console.log("Chargement des visiteurs pour le salarie:",J);const ae=await D0({role:"VISITEUR",salarieId:J});u.value=ae.map(Fe=>({...Fe,salarie_id:J})),console.log("Visiteurs chargés:",u.value)}catch(ae){console.error("Erreur lors du chargement des visiteurs:",ae)}}function W(){h.value=!0,w.value={nom:"",description:"",client:null}}async function V(J){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:J.id,nom:J.nom,entreprise:J.entreprise,salarie:J.salarie,visiteur:J.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(J),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",J.id),localStorage.setItem("lastPlanId",J.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await t.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(ae){console.error("[PlansView][editPlan] ERREUR:",ae),ae instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",ae.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function G(J){J!=null&&J.id&&(y.value=J,g.value=!0)}async function ne(){var J,ae;if((J=y.value)!=null&&J.id)try{await n.deletePlan(y.value.id),await z(),((ae=n.currentPlan)==null?void 0:ae.id)===y.value.id&&n.clearCurrentPlan()}catch(Fe){console.error("Erreur lors de la suppression du plan:",Fe),alert("Une erreur est survenue lors de la suppression du plan")}finally{g.value=!1,y.value=null}}function _e(){g.value=!1,y.value=null}function ge(J){return new Date(J).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ve(J){if(!J)return"";const ae=J.first_name||"",Fe=J.last_name||"";return(ae.charAt(0)+Fe.charAt(0)).toUpperCase()}async function B(J){P.value=!0,T.value=null;try{r.isAdmin&&!o.value.length&&await O();const ae=typeof J.entreprise=="object"&&J.entreprise?J.entreprise.id:J.entreprise,Fe=typeof J.salarie=="object"&&J.salarie?J.salarie.id:J.salarie,Me=typeof J.visiteur=="object"&&J.visiteur?J.visiteur.id:J.visiteur;_.value={id:J.id,nom:J.nom,description:J.description,entreprise:ae||null,salarie:Fe||null,visiteur:Me||null},ae&&await k(ae),Fe&&await I(Fe),d.value=!0}catch(ae){console.error("Erreur lors de l'ouverture du modal:",ae),T.value="Erreur lors du chargement des données"}finally{P.value=!1}}async function te(){var J,ae,Fe,Me,Ye;T.value=null,P.value=!0;try{if(!_.value.nom.trim())throw new Error("Le nom du plan est requis");if(_.value.visiteur&&!_.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(_.value.salarie&&!_.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:_.value.id,nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});const oe=await n.updatePlanDetails(_.value.id,{nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});console.log("Réponse de la mise à jour:",oe),oe&&(d.value=!1,await z())}catch(oe){if(console.error("Erreur lors de la mise à jour du plan:",oe),(ae=(J=oe.response)==null?void 0:J.data)!=null&&ae.detail)T.value=oe.response.data.detail;else if((Me=(Fe=oe.response)==null?void 0:Fe.data)!=null&&Me.non_field_errors)T.value=oe.response.data.non_field_errors[0];else if((Ye=oe.response)!=null&&Ye.data){const fe=Object.entries(oe.response.data).map(([be,de])=>`${be}: ${Array.isArray(de)?de[0]:de}`);T.value=fe.join(`
`)}else T.value=oe.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{P.value=!1}}ds(()=>X.value,async J=>{j.value=null,D.value=null,J?await k(J):await k()}),ds(()=>j.value,async J=>{D.value=null,J&&await I(J)}),ds(()=>_.value.entreprise,async J=>{J===null?(_.value.salarie=null,_.value.visiteur=null):await k(J)}),ds(()=>_.value.salarie,async J=>{_.value.visiteur=null,J&&await I(J)});function ce(J){var Ye,oe,fe;const ae=r.user;if(!ae)return!1;if(ae.user_type==="admin")return!0;if(ae.user_type==="entreprise")return typeof J.entreprise=="object"?((Ye=J.entreprise)==null?void 0:Ye.id)===ae.id:J.entreprise===ae.id;if(ae.user_type==="salarie")return typeof J.salarie=="object"?((oe=J.salarie)==null?void 0:oe.id)===ae.id:J.salarie===ae.id;const Fe=J.createur.id===ae.id;let Me=!1;return typeof J.visiteur=="object"?Me=((fe=J.visiteur)==null?void 0:fe.id)===ae.id:Me=J.visiteur===ae.id,Me||Fe}async function le(J){await z(),localStorage.setItem("lastPlanId",J.toString()),console.log(`Plan ${J} créé et défini comme plan actif`),t.push("/")}function xe(J){U.value===J?K.value=K.value==="asc"?"desc":"asc":(U.value=J,K.value="desc")}function he(J){return J?Ul(J):""}return(J,ae)=>{var Fe;return $e(),Ge("div",_z,[M("div",bz,[M("div",wz,[M("div",xz,[M("h1",Lz,Ht(Le.value.title),1),M("p",Sz,Ht(Le.value.description),1)]),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:W,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),qn(r).isAdmin?($e(),Ge("div",Ez,[M("div",Cz,[ae[15]||(ae[15]=M("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Hn(M("select",{id:"entreprise-filter","onUpdate:modelValue":ae[0]||(ae[0]=Me=>X.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ae[14]||(ae[14]=M("option",{value:null},"Toutes les entreprises",-1)),($e(!0),Ge(In,null,Sr(o.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,Pz))),128))],512),[[Eo,X.value]])]),M("div",Az,[ae[16]||(ae[16]=M("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Hn(M("select",{id:"salarie-filter","onUpdate:modelValue":ae[1]||(ae[1]=Me=>j.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[M("option",Mz,Ht(H.value.length?"Tous les salaries":"Aucun salarie disponible"),1),($e(!0),Ge(In,null,Sr(H.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,kz))),128))],512),[[Eo,j.value]])]),j.value?($e(),Ge("div",Tz,[ae[17]||(ae[17]=M("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Hn(M("select",{id:"visiteur-filter","onUpdate:modelValue":ae[2]||(ae[2]=Me=>D.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[M("option",Bz,Ht(se.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),($e(!0),Ge(In,null,Sr(se.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,Oz))),128))],512),[[Eo,D.value]])])):pn("",!0)])):qn(r).isSalarie?($e(),Ge("div",Nz,[M("div",Dz,[ae[19]||(ae[19]=M("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Hn(M("select",{id:"visiteur-filter","onUpdate:modelValue":ae[3]||(ae[3]=Me=>D.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ae[18]||(ae[18]=M("option",{value:null},"Tous les visiteurs",-1)),($e(!0),Ge(In,null,Sr(u.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,Iz))),128))],512),[[Eo,D.value]])])])):pn("",!0),M("div",Rz,[M("div",Fz,[M("div",jz,[M("table",zz,[M("thead",Uz,[M("tr",null,[M("th",$z,[M("button",{onClick:ae[4]||(ae[4]=Me=>xe("nom")),class:"group inline-flex items-center"},[ae[21]||(ae[21]=ui(" Nom ")),M("span",Vz,[($e(),Ge("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="nom","text-gray-400":U.value!=="nom","rotate-180":U.value==="nom"&&K.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ae[20]||(ae[20]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ae[24]||(ae[24]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),ae[25]||(ae[25]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),ae[26]||(ae[26]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),ae[27]||(ae[27]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),M("th",Hz,[M("button",{onClick:ae[5]||(ae[5]=Me=>xe("date_modification")),class:"group inline-flex items-center"},[ae[23]||(ae[23]=ui(" Dernière modification ")),M("span",Gz,[($e(),Ge("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="date_modification","text-gray-400":U.value!=="date_modification","rotate-180":U.value==="date_modification"&&K.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ae[22]||(ae[22]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ae[28]||(ae[28]=M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",qz,[me.value.length===0?($e(),Ge("tr",Wz,ae[29]||(ae[29]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):pn("",!0),($e(!0),Ge(In,null,Sr(me.value,Me=>($e(),Ge("tr",{key:Me.id,class:"hover:bg-gray-50"},[M("td",Zz,Ht(Me.nom),1),M("td",Kz,Ht(Me.description||"-"),1),M("td",Yz,[Me.entreprise&&typeof Me.entreprise=="object"?($e(),Ge("div",Xz,[M("div",Jz,[M("div",Qz,[M("span",eU,Ht(Ve(Me.entreprise)),1)])]),M("div",tU,[M("div",nU,Ht(qn(Ul)(Me.entreprise)),1)])])):($e(),Ge("div",rU," Non assigné "))]),M("td",iU,[Me.salarie&&typeof Me.salarie=="object"?($e(),Ge("div",oU,[M("div",sU,[M("div",aU,[M("span",lU,Ht(Ve(Me.salarie)),1)])]),M("div",uU,[M("div",cU,Ht(qn(Ul)(Me.salarie)),1)])])):($e(),Ge("div",hU," Non assigné "))]),M("td",fU,[Me.visiteur&&typeof Me.visiteur=="object"?($e(),Ge("div",dU,[M("div",pU,[M("div",mU,[M("span",gU,Ht(Ve(Me.visiteur)),1)])]),M("div",vU,[M("div",yU,Ht(qn(Ul)(Me.visiteur)),1)])])):($e(),Ge("div",_U," Non assigné "))]),M("td",bU,Ht(ge(Me.date_modification)),1),M("td",wU,[M("button",{onClick:Ye=>V(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,xU),M("button",{onClick:Ye=>B(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,LU),ce(Me)?($e(),Ge("button",{key:0,onClick:Ye=>G(Me),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,SU)):pn("",!0)])]))),128))])])])])]),Kr(mx,{modelValue:h.value,"onUpdate:modelValue":ae[6]||(ae[6]=Me=>h.value=Me),salaries:s.value,clients:u.value,onCreated:le},null,8,["modelValue","salaries","clients"]),d.value?($e(),Ge("div",EU,[M("div",CU,[M("div",PU,[ae[31]||(ae[31]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),M("button",{onClick:ae[7]||(ae[7]=Me=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ae[30]||(ae[30]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("form",{onSubmit:zc(te,["prevent"]),class:"space-y-4"},[M("div",null,[ae[32]||(ae[32]=M("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Hn(M("input",{type:"text",id:"edit-nom","onUpdate:modelValue":ae[8]||(ae[8]=Me=>_.value.nom=Me),disabled:P.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,AU),[[Ur,_.value.nom]])]),M("div",null,[ae[33]||(ae[33]=M("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Hn(M("textarea",{id:"edit-description","onUpdate:modelValue":ae[9]||(ae[9]=Me=>_.value.description=Me),disabled:P.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,MU),[[Ur,_.value.description]])]),qn(r).isAdmin||((Fe=qn(r).user)==null?void 0:Fe.user_type)==="entreprise"?($e(),Ge("div",kU,[qn(r).isAdmin?($e(),Ge("div",TU,[ae[35]||(ae[35]=M("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Hn(M("select",{id:"edit-entreprise","onUpdate:modelValue":ae[10]||(ae[10]=Me=>_.value.entreprise=Me),disabled:P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ae[34]||(ae[34]=M("option",{value:null},"Sélectionner une entreprise",-1)),($e(!0),Ge(In,null,Sr(o.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,OU))),128))],8,BU),[[Eo,_.value.entreprise]])])):pn("",!0),M("div",null,[ae[37]||(ae[37]=M("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Hn(M("select",{id:"edit-salarie","onUpdate:modelValue":ae[11]||(ae[11]=Me=>_.value.salarie=Me),disabled:qn(r).isAdmin&&!_.value.entreprise||P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ae[36]||(ae[36]=M("option",{value:null},"Sélectionner un salarie",-1)),($e(!0),Ge(In,null,Sr(R.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,DU))),128))],8,NU),[[Eo,_.value.salarie]]),qn(r).isAdmin&&!_.value.entreprise?($e(),Ge("p",IU," Veuillez d'abord sélectionner une entreprise ")):pn("",!0)]),M("div",null,[ae[39]||(ae[39]=M("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Hn(M("select",{id:"edit-visiteur","onUpdate:modelValue":ae[12]||(ae[12]=Me=>_.value.visiteur=Me),disabled:!_.value.salarie||P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ae[38]||(ae[38]=M("option",{value:null},"Sélectionner un visiteur",-1)),($e(!0),Ge(In,null,Sr(Z.value,Me=>($e(),Ge("option",{key:Me.id,value:Me.id},Ht(he(Me)),9,FU))),128))],8,RU),[[Eo,_.value.visiteur]]),_.value.salarie?pn("",!0):($e(),Ge("p",jU," Veuillez d'abord sélectionner un salarie "))])])):pn("",!0),T.value?($e(),Ge("div",zU,[M("div",UU,[ae[40]||(ae[40]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",$U,[M("p",VU,Ht(T.value),1)])])])):pn("",!0),M("div",HU,[M("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:ae[13]||(ae[13]=Me=>d.value=!1)}," Annuler "),M("button",{type:"submit",disabled:P.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[P.value?($e(),Ge("svg",qU,ae[41]||(ae[41]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):pn("",!0),ui(" "+Ht(P.value?"Enregistrement...":"Enregistrer"),1)],8,GU)])],32)])])):pn("",!0),g.value?($e(),ja(Rx,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:ne,onCancel:_e})):pn("",!0)])])}}});var Fx={exports:{}};const ZU=Y5(gM);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function $b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$b(Object(n),!0).forEach(function(r){KU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$b(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V0(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?V0=function(t){return typeof t}:V0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function KU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pu(){return pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pu.apply(this,arguments)}function YU(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function XU(e,t){if(e==null)return{};var n=YU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JU(e){return QU(e)||e$(e)||t$(e)||n$()}function QU(e){if(Array.isArray(e))return P1(e)}function e$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function t$(e,t){if(e){if(typeof e=="string")return P1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P1(e,t)}}function P1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r$="1.14.0";function Rc(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Hc=Rc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Np=Rc(/Edge/i),Vb=Rc(/firefox/i),ip=Rc(/safari/i)&&!Rc(/chrome/i)&&!Rc(/android/i),jx=Rc(/iP(ad|od|hone)/i),i$=Rc(/chrome/i)&&Rc(/android/i),zx={capture:!1,passive:!1};function li(e,t,n){e.addEventListener(t,n,!Hc&&zx)}function Qr(e,t,n){e.removeEventListener(t,n,!Hc&&zx)}function wm(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function o$(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Iu(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&wm(e,t):wm(e,t))||r&&e===n)return e;if(e===n)break}while(e=o$(e))}return null}var Hb=/\s+/g;function jo(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Hb," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Hb," ")}}function tr(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function Qh(e,t){var n="";if(typeof e=="string")n=e;else do{var r=tr(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Ux(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function dc(){var e=document.scrollingElement;return e||document.documentElement}function So(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,u,h,d,g,y;if(e!==window&&e.parentNode&&e!==dc()?(s=e.getBoundingClientRect(),o=s.top,u=s.left,h=s.bottom,d=s.right,g=s.height,y=s.width):(o=0,u=0,h=window.innerHeight,d=window.innerWidth,g=window.innerHeight,y=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Hc))do if(i&&i.getBoundingClientRect&&(tr(i,"transform")!=="none"||n&&tr(i,"position")!=="static")){var w=i.getBoundingClientRect();o-=w.top+parseInt(tr(i,"border-top-width")),u-=w.left+parseInt(tr(i,"border-left-width")),h=o+s.height,d=u+s.width;break}while(i=i.parentNode);if(r&&e!==window){var _=Qh(i||e),P=_&&_.a,T=_&&_.d;_&&(o/=T,u/=P,y/=P,g/=T,h=o+g,d=u+y)}return{top:o,left:u,bottom:h,right:d,width:y,height:g}}}function Gb(e,t,n){for(var r=ph(e,!0),i=So(e)[t];r;){var s=So(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===dc())break;r=ph(r,!1)}return!1}function ad(e,t,n,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==xr.ghost&&(r||o[s]!==xr.dragged)&&Iu(o[s],n.draggable,e,!1)){if(i===t)return o[s];i++}s++}return null}function yy(e,t){for(var n=e.lastElementChild;n&&(n===xr.ghost||tr(n,"display")==="none"||t&&!wm(n,t));)n=n.previousElementSibling;return n||null}function Xo(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==xr.clone&&(!t||wm(e,t))&&n++;return n}function qb(e){var t=0,n=0,r=dc();if(e)do{var i=Qh(e),s=i.a,o=i.d;t+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function s$(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function ph(e,t){if(!e||!e.getBoundingClientRect)return dc();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=tr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return dc();if(r||t)return n;r=!0}}while(n=n.parentNode);return dc()}function a$(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function mv(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var op;function $x(e,t){return function(){if(!op){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),op=setTimeout(function(){op=void 0},t)}}}function l$(){clearTimeout(op),op=void 0}function Vx(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function _y(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Wb(e,t){tr(e,"position","absolute"),tr(e,"top",t.top),tr(e,"left",t.left),tr(e,"width",t.width),tr(e,"height",t.height)}function gv(e){tr(e,"position",""),tr(e,"top",""),tr(e,"left",""),tr(e,"width",""),tr(e,"height","")}var Ra="Sortable"+new Date().getTime();function u$(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(tr(i,"display")==="none"||i===xr.ghost)){e.push({target:i,rect:So(i)});var s=mc({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=Qh(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(s$(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(u){var h=0,d=u.target,g=d.fromRect,y=So(d),w=d.prevFromRect,_=d.prevToRect,P=u.rect,T=Qh(d,!0);T&&(y.top-=T.f,y.left-=T.e),d.toRect=y,d.thisAnimationDuration&&mv(w,y)&&!mv(g,y)&&(P.top-y.top)/(P.left-y.left)===(g.top-y.top)/(g.left-y.left)&&(h=h$(P,w,_,i.options)),mv(y,g)||(d.prevFromRect=g,d.prevToRect=y,h||(h=i.options.animation),i.animate(d,P,y,h)),h&&(s=!0,o=Math.max(o,h),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},h),d.thisAnimationDuration=h)}),clearTimeout(t),s?t=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){tr(r,"transition",""),tr(r,"transform","");var u=Qh(this.el),h=u&&u.a,d=u&&u.d,g=(i.left-s.left)/(h||1),y=(i.top-s.top)/(d||1);r.animatingX=!!g,r.animatingY=!!y,tr(r,"transform","translate3d("+g+"px,"+y+"px,0)"),this.forRepaintDummy=c$(r),tr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),tr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){tr(r,"transition",""),tr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function c$(e){return e.offsetWidth}function h$(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var kf=[],vv={initializeByDefault:!0},Dp={mount:function(t){for(var n in vv)vv.hasOwnProperty(n)&&!(n in t)&&(t[n]=vv[n]);kf.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),kf.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=t+"Global";kf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](mc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][t]&&n[o.pluginName][t](mc({sortable:n},r)))})},initializePlugins:function(t,n,r,i){kf.forEach(function(u){var h=u.pluginName;if(!(!t.options[h]&&!u.initializeByDefault)){var d=new u(t,n,t.options);d.sortable=t,d.options=t.options,t[h]=d,pu(r,d.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);typeof o<"u"&&(t.options[s]=o)}},getEventProperties:function(t,n){var r={};return kf.forEach(function(i){typeof i.eventProperties=="function"&&pu(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return kf.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(t[s.pluginName],r))}),i}};function Ud(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,u=e.fromEl,h=e.oldIndex,d=e.newIndex,g=e.oldDraggableIndex,y=e.newDraggableIndex,w=e.originalEvent,_=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[Ra],!!t){var T,j=t.options,D="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Hc&&!Np?T=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(r,!0,!0)),T.to=o||n,T.from=u||n,T.item=i||n,T.clone=s,T.oldIndex=h,T.newIndex=d,T.oldDraggableIndex=g,T.newDraggableIndex=y,T.originalEvent=w,T.pullMode=_?_.lastPutMode:void 0;var U=mc(mc({},P),Dp.getEventProperties(r,t));for(var K in U)T[K]=U[K];n&&n.dispatchEvent(T),j[D]&&j[D].call(t,T)}}var f$=["evt"],vl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=XU(r,f$);Dp.pluginEvent.bind(xr)(t,n,mc({dragEl:Nn,parentEl:Zo,ghostEl:$r,rootEl:xo,nextEl:$h,lastDownEl:H0,cloneEl:Ko,cloneHidden:hh,dragStarted:$d,putSortable:fa,activeSortable:xr.active,originalEvent:i,oldIndex:$f,oldDraggableIndex:sp,newIndex:zl,newDraggableIndex:ch,hideGhostForTarget:Wx,unhideGhostForTarget:Zx,cloneNowHidden:function(){hh=!0},cloneNowShown:function(){hh=!1},dispatchSortableEvent:function(u){Ka({sortable:n,name:u,originalEvent:i})}},s))};function Ka(e){Ud(mc({putSortable:fa,cloneEl:Ko,targetEl:Nn,rootEl:xo,oldIndex:$f,oldDraggableIndex:sp,newIndex:zl,newDraggableIndex:ch},e))}var Nn,Zo,$r,xo,$h,H0,Ko,hh,$f,zl,sp,ch,w0,fa,jf=!1,xm=!1,Lm=[],jh,Bu,yv,_v,Zb,Kb,$d,Tf,ap,lp=!1,x0=!1,G0,Ta,bv=[],A1=!1,Sm=[],sg=typeof document<"u",L0=jx,Yb=Np||Hc?"cssFloat":"float",d$=sg&&!i$&&!jx&&"draggable"in document.createElement("div"),Hx=function(){if(sg){if(Hc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Gx=function(t,n){var r=tr(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=ad(t,0,n),o=ad(t,1,n),u=s&&tr(s),h=o&&tr(o),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+So(s).width,g=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+So(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return o&&(h.clear==="both"||h.clear===y)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Yb]==="none"||o&&r[Yb]==="none"&&d+g>i)?"vertical":"horizontal"},p$=function(t,n,r){var i=r?t.left:t.top,s=r?t.right:t.bottom,o=r?t.width:t.height,u=r?n.left:n.top,h=r?n.right:n.bottom,d=r?n.width:n.height;return i===u||s===h||i+o/2===u+d/2},m$=function(t,n){var r;return Lm.some(function(i){var s=i[Ra].options.emptyInsertThreshold;if(!(!s||yy(i))){var o=So(i),u=t>=o.left-s&&t<=o.right+s,h=n>=o.top-s&&n<=o.bottom+s;if(u&&h)return r=i}}),r},qx=function(t){function n(s,o){return function(u,h,d,g){var y=u.options.group.name&&h.options.group.name&&u.options.group.name===h.options.group.name;if(s==null&&(o||y))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(u,h,d,g),o)(u,h,d,g);var w=(o?u:h).options.group.name;return s===!0||typeof s=="string"&&s===w||s.join&&s.indexOf(w)>-1}}var r={},i=t.group;(!i||V0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},Wx=function(){!Hx&&$r&&tr($r,"display","none")},Zx=function(){!Hx&&$r&&tr($r,"display","")};sg&&document.addEventListener("click",function(e){if(xm)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),xm=!1,!1},!0);var zh=function(t){if(Nn){t=t.touches?t.touches[0]:t;var n=m$(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Ra]._onDragOver(r)}}},g$=function(t){Nn&&Nn.parentNode[Ra]._isOutsideThisEl(t.target)};function xr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=pu({},t),e[Ra]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gx(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,u){o.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:xr.supportPointer!==!1&&"PointerEvent"in window&&!ip,emptyInsertThreshold:5};Dp.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);qx(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:d$,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?li(e,"pointerdown",this._onTapStart):(li(e,"mousedown",this._onTapStart),li(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(li(e,"dragover",this),li(e,"dragenter",this)),Lm.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),pu(this,u$())}xr.prototype={constructor:xr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Tf=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Nn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,h=(u||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||h,g=i.filter;if(S$(r),!Nn&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ip&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=Iu(h,i.draggable,r,!1),!(h&&h.animated)&&H0!==h)){if($f=Xo(h),sp=Xo(h,i.draggable),typeof g=="function"){if(g.call(this,t,h,this)){Ka({sortable:n,rootEl:d,name:"filter",targetEl:h,toEl:r,fromEl:r}),vl("filter",n,{evt:t}),s&&t.cancelable&&t.preventDefault();return}}else if(g&&(g=g.split(",").some(function(y){if(y=Iu(d,y.trim(),r,!1),y)return Ka({sortable:n,rootEl:y,name:"filter",targetEl:h,fromEl:r,toEl:r}),vl("filter",n,{evt:t}),!0}),g)){s&&t.cancelable&&t.preventDefault();return}i.handle&&!Iu(d,i.handle,r,!1)||this._prepareDragStart(t,u,h)}}},_prepareDragStart:function(t,n,r){var i=this,s=i.el,o=i.options,u=s.ownerDocument,h;if(r&&!Nn&&r.parentNode===s){var d=So(r);if(xo=s,Nn=r,Zo=Nn.parentNode,$h=Nn.nextSibling,H0=r,w0=o.group,xr.dragged=Nn,jh={target:Nn,clientX:(n||t).clientX,clientY:(n||t).clientY},Zb=jh.clientX-d.left,Kb=jh.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Nn.style["will-change"]="all",h=function(){if(vl("delayEnded",i,{evt:t}),xr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Vb&&i.nativeDraggable&&(Nn.draggable=!0),i._triggerDragStart(t,n),Ka({sortable:i,name:"choose",originalEvent:t}),jo(Nn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(g){Ux(Nn,g.trim(),wv)}),li(u,"dragover",zh),li(u,"mousemove",zh),li(u,"touchmove",zh),li(u,"mouseup",i._onDrop),li(u,"touchend",i._onDrop),li(u,"touchcancel",i._onDrop),Vb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Nn.draggable=!0),vl("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Np||Hc))){if(xr.eventCanceled){this._onDrop();return}li(u,"mouseup",i._disableDelayedDrag),li(u,"touchend",i._disableDelayedDrag),li(u,"touchcancel",i._disableDelayedDrag),li(u,"mousemove",i._delayedDragTouchMoveHandler),li(u,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&li(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(h,o.delay)}else h()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Nn&&wv(Nn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Qr(t,"mouseup",this._disableDelayedDrag),Qr(t,"touchend",this._disableDelayedDrag),Qr(t,"touchcancel",this._disableDelayedDrag),Qr(t,"mousemove",this._delayedDragTouchMoveHandler),Qr(t,"touchmove",this._delayedDragTouchMoveHandler),Qr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?li(document,"pointermove",this._onTouchMove):n?li(document,"touchmove",this._onTouchMove):li(document,"mousemove",this._onTouchMove):(li(Nn,"dragend",this),li(xo,"dragstart",this._onDragStart));try{document.selection?q0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(jf=!1,xo&&Nn){vl("dragStarted",this,{evt:n}),this.nativeDraggable&&li(document,"dragover",g$);var r=this.options;!t&&jo(Nn,r.dragClass,!1),jo(Nn,r.ghostClass,!0),xr.active=this,t&&this._appendGhost(),Ka({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Bu){this._lastX=Bu.clientX,this._lastY=Bu.clientY,Wx();for(var t=document.elementFromPoint(Bu.clientX,Bu.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Bu.clientX,Bu.clientY),t!==n);)n=t;if(Nn.parentNode[Ra]._isOutsideThisEl(t),n)do{if(n[Ra]){var r=void 0;if(r=n[Ra]._onDragOver({clientX:Bu.clientX,clientY:Bu.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);Zx()}},_onTouchMove:function(t){if(jh){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=t.touches?t.touches[0]:t,o=$r&&Qh($r,!0),u=$r&&o&&o.a,h=$r&&o&&o.d,d=L0&&Ta&&qb(Ta),g=(s.clientX-jh.clientX+i.x)/(u||1)+(d?d[0]-bv[0]:0)/(u||1),y=(s.clientY-jh.clientY+i.y)/(h||1)+(d?d[1]-bv[1]:0)/(h||1);if(!xr.active&&!jf){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if($r){o?(o.e+=g-(yv||0),o.f+=y-(_v||0)):o={a:1,b:0,c:0,d:1,e:g,f:y};var w="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");tr($r,"webkitTransform",w),tr($r,"mozTransform",w),tr($r,"msTransform",w),tr($r,"transform",w),yv=g,_v=y,Bu=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!$r){var t=this.options.fallbackOnBody?document.body:xo,n=So(Nn,!0,L0,!0,t),r=this.options;if(L0){for(Ta=t;tr(Ta,"position")==="static"&&tr(Ta,"transform")==="none"&&Ta!==document;)Ta=Ta.parentNode;Ta!==document.body&&Ta!==document.documentElement?(Ta===document&&(Ta=dc()),n.top+=Ta.scrollTop,n.left+=Ta.scrollLeft):Ta=dc(),bv=qb(Ta)}$r=Nn.cloneNode(!0),jo($r,r.ghostClass,!1),jo($r,r.fallbackClass,!0),jo($r,r.dragClass,!0),tr($r,"transition",""),tr($r,"transform",""),tr($r,"box-sizing","border-box"),tr($r,"margin",0),tr($r,"top",n.top),tr($r,"left",n.left),tr($r,"width",n.width),tr($r,"height",n.height),tr($r,"opacity","0.8"),tr($r,"position",L0?"absolute":"fixed"),tr($r,"zIndex","100000"),tr($r,"pointerEvents","none"),xr.ghost=$r,t.appendChild($r),tr($r,"transform-origin",Zb/parseInt($r.style.width)*100+"% "+Kb/parseInt($r.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,s=r.options;if(vl("dragStart",this,{evt:t}),xr.eventCanceled){this._onDrop();return}vl("setupClone",this),xr.eventCanceled||(Ko=_y(Nn),Ko.draggable=!1,Ko.style["will-change"]="",this._hideClone(),jo(Ko,this.options.chosenClass,!1),xr.clone=Ko),r.cloneId=q0(function(){vl("clone",r),!xr.eventCanceled&&(r.options.removeCloneOnHide||xo.insertBefore(Ko,Nn),r._hideClone(),Ka({sortable:r,name:"clone"}))}),!n&&jo(Nn,s.dragClass,!0),n?(xm=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Qr(document,"mouseup",r._onDrop),Qr(document,"touchend",r._onDrop),Qr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Nn)),li(document,"drop",r),tr(Nn,"transform","translateZ(0)")),jf=!0,r._dragStartId=q0(r._dragStarted.bind(r,n,t)),li(document,"selectstart",r),$d=!0,ip&&tr(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,s,o,u=this.options,h=u.group,d=xr.active,g=w0===h,y=u.sort,w=fa||d,_,P=this,T=!1;if(A1)return;function j(ne,_e){vl(ne,P,mc({evt:t,isOwner:g,axis:_?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:y,fromSortable:w,target:r,completed:U,onMove:function(Ve,B){return S0(xo,n,Nn,i,Ve,So(Ve),t,B)},changed:K},_e))}function D(){j("dragOverAnimationCapture"),P.captureAnimationState(),P!==w&&w.captureAnimationState()}function U(ne){return j("dragOverCompleted",{insertion:ne}),ne&&(g?d._hideClone():d._showClone(P),P!==w&&(jo(Nn,fa?fa.options.ghostClass:d.options.ghostClass,!1),jo(Nn,u.ghostClass,!0)),fa!==P&&P!==xr.active?fa=P:P===xr.active&&fa&&(fa=null),w===P&&(P._ignoreWhileAnimating=r),P.animateAll(function(){j("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(r===Nn&&!Nn.animated||r===n&&!r.animated)&&(Tf=null),!u.dragoverBubble&&!t.rootEl&&r!==document&&(Nn.parentNode[Ra]._isOutsideThisEl(t.target),!ne&&zh(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),T=!0}function K(){zl=Xo(Nn),ch=Xo(Nn,u.draggable),Ka({sortable:P,name:"change",toEl:n,newIndex:zl,newDraggableIndex:ch,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Iu(r,u.draggable,n,!0),j("dragOver"),xr.eventCanceled)return T;if(Nn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||P._ignoreWhileAnimating===r)return U(!1);if(xm=!1,d&&!u.disabled&&(g?y||(o=Zo!==xo):fa===this||(this.lastPutMode=w0.checkPull(this,d,Nn,t))&&h.checkPut(this,d,Nn,t))){if(_=this._getDirection(t,r)==="vertical",i=So(Nn),j("dragOverValid"),xr.eventCanceled)return T;if(o)return Zo=xo,D(),this._hideClone(),j("revert"),xr.eventCanceled||($h?xo.insertBefore(Nn,$h):xo.appendChild(Nn)),U(!0);var X=yy(n,u.draggable);if(!X||b$(t,_,this)&&!X.animated){if(X===Nn)return U(!1);if(X&&n===t.target&&(r=X),r&&(s=So(r)),S0(xo,n,Nn,i,r,s,t,!!r)!==!1)return D(),n.appendChild(Nn),Zo=n,K(),U(!0)}else if(X&&_$(t,_,this)){var se=ad(n,0,u,!0);if(se===Nn)return U(!1);if(r=se,s=So(r),S0(xo,n,Nn,i,r,s,t,!1)!==!1)return D(),n.insertBefore(Nn,se),Zo=n,K(),U(!0)}else if(r.parentNode===n){s=So(r);var me=0,Le,H=Nn.parentNode!==n,R=!p$(Nn.animated&&Nn.toRect||i,r.animated&&r.toRect||s,_),Z=_?"top":"left",z=Gb(r,"top","top")||Gb(Nn,"top","top"),O=z?z.scrollTop:void 0;Tf!==r&&(Le=s[Z],lp=!1,x0=!R&&u.invertSwap||H),me=w$(t,r,s,_,R?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,x0,Tf===r);var k;if(me!==0){var I=Xo(Nn);do I-=me,k=Zo.children[I];while(k&&(tr(k,"display")==="none"||k===$r))}if(me===0||k===r)return U(!1);Tf=r,ap=me;var W=r.nextElementSibling,V=!1;V=me===1;var G=S0(xo,n,Nn,i,r,s,t,V);if(G!==!1)return(G===1||G===-1)&&(V=G===1),A1=!0,setTimeout(y$,30),D(),V&&!W?n.appendChild(Nn):r.parentNode.insertBefore(Nn,V?W:r),z&&Vx(z,0,O-z.scrollTop),Zo=Nn.parentNode,Le!==void 0&&!x0&&(G0=Math.abs(Le-So(r)[Z])),K(),U(!0)}if(n.contains(Nn))return U(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",zh),Qr(document,"mousemove",zh),Qr(document,"touchmove",zh)},_offUpEvents:function(){var t=this.el.ownerDocument;Qr(t,"mouseup",this._onDrop),Qr(t,"touchend",this._onDrop),Qr(t,"pointerup",this._onDrop),Qr(t,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(zl=Xo(Nn),ch=Xo(Nn,r.draggable),vl("drop",this,{evt:t}),Zo=Nn&&Nn.parentNode,zl=Xo(Nn),ch=Xo(Nn,r.draggable),xr.eventCanceled){this._nulling();return}jf=!1,x0=!1,lp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),M1(this.cloneId),M1(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ip&&tr(document.body,"user-select",""),tr(Nn,"transform",""),t&&($d&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),$r&&$r.parentNode&&$r.parentNode.removeChild($r),(xo===Zo||fa&&fa.lastPutMode!=="clone")&&Ko&&Ko.parentNode&&Ko.parentNode.removeChild(Ko),Nn&&(this.nativeDraggable&&Qr(Nn,"dragend",this),wv(Nn),Nn.style["will-change"]="",$d&&!jf&&jo(Nn,fa?fa.options.ghostClass:this.options.ghostClass,!1),jo(Nn,this.options.chosenClass,!1),Ka({sortable:this,name:"unchoose",toEl:Zo,newIndex:null,newDraggableIndex:null,originalEvent:t}),xo!==Zo?(zl>=0&&(Ka({rootEl:Zo,name:"add",toEl:Zo,fromEl:xo,originalEvent:t}),Ka({sortable:this,name:"remove",toEl:Zo,originalEvent:t}),Ka({rootEl:Zo,name:"sort",toEl:Zo,fromEl:xo,originalEvent:t}),Ka({sortable:this,name:"sort",toEl:Zo,originalEvent:t})),fa&&fa.save()):zl!==$f&&zl>=0&&(Ka({sortable:this,name:"update",toEl:Zo,originalEvent:t}),Ka({sortable:this,name:"sort",toEl:Zo,originalEvent:t})),xr.active&&((zl==null||zl===-1)&&(zl=$f,ch=sp),Ka({sortable:this,name:"end",toEl:Zo,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){vl("nulling",this),xo=Nn=Zo=$r=$h=Ko=H0=hh=jh=Bu=$d=zl=ch=$f=sp=Tf=ap=fa=w0=xr.dragged=xr.ghost=xr.clone=xr.active=null,Sm.forEach(function(t){t.checked=!0}),Sm.length=yv=_v=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Nn&&(this._onDragOver(t),v$(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Iu(n,o.draggable,this.el,!1)&&t.push(n.getAttribute(o.dataIdAttr)||L$(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var u=i.children[o];Iu(u,this.options.draggable,i,!1)&&(r[s]=u)},this),n&&this.captureAnimationState(),t.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Iu(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=Dp.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&qx(r)},destroy:function(){vl("destroy",this);var t=this.el;t[Ra]=null,Qr(t,"mousedown",this._onTapStart),Qr(t,"touchstart",this._onTapStart),Qr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(t,"dragover",this),Qr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Lm.splice(Lm.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!hh){if(vl("hideClone",this),xr.eventCanceled)return;tr(Ko,"display","none"),this.options.removeCloneOnHide&&Ko.parentNode&&Ko.parentNode.removeChild(Ko),hh=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(hh){if(vl("showClone",this),xr.eventCanceled)return;Nn.parentNode==xo&&!this.options.group.revertClone?xo.insertBefore(Ko,Nn):$h?xo.insertBefore(Ko,$h):xo.appendChild(Ko),this.options.group.revertClone&&this.animate(Nn,Ko),tr(Ko,"display",""),hh=!1}}};function v$(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function S0(e,t,n,r,i,s,o,u){var h,d=e[Ra],g=d.options.onMove,y;return window.CustomEvent&&!Hc&&!Np?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=t,h.from=e,h.dragged=n,h.draggedRect=r,h.related=i||t,h.relatedRect=s||So(t),h.willInsertAfter=u,h.originalEvent=o,e.dispatchEvent(h),g&&(y=g.call(d,h,o)),y}function wv(e){e.draggable=!1}function y$(){A1=!1}function _$(e,t,n){var r=So(ad(n.el,0,n.options,!0)),i=10;return t?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function b$(e,t,n){var r=So(yy(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function w$(e,t,n,r,i,s,o,u){var h=r?e.clientY:e.clientX,d=r?n.height:n.width,g=r?n.top:n.left,y=r?n.bottom:n.right,w=!1;if(!o){if(u&&G0<d*i){if(!lp&&(ap===1?h>g+d*s/2:h<y-d*s/2)&&(lp=!0),lp)w=!0;else if(ap===1?h<g+G0:h>y-G0)return-ap}else if(h>g+d*(1-i)/2&&h<y-d*(1-i)/2)return x$(t)}return w=w||o,w&&(h<g+d*s/2||h>y-d*s/2)?h>g+d/2?1:-1:0}function x$(e){return Xo(Nn)<Xo(e)?1:-1}function L$(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function S$(e){Sm.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Sm.push(r)}}function q0(e){return setTimeout(e,0)}function M1(e){return clearTimeout(e)}sg&&li(document,"touchmove",function(e){(xr.active||jf)&&e.cancelable&&e.preventDefault()});xr.utils={on:li,off:Qr,css:tr,find:Ux,is:function(t,n){return!!Iu(t,n,t,!1)},extend:a$,throttle:$x,closest:Iu,toggleClass:jo,clone:_y,index:Xo,nextTick:q0,cancelNextTick:M1,detectDirection:Gx,getChild:ad};xr.get=function(e){return e[Ra]};xr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(xr.utils=mc(mc({},xr.utils),r.utils)),Dp.mount(r)})};xr.create=function(e,t){return new xr(e,t)};xr.version=r$;var xs=[],Vd,k1,T1=!1,xv,Lv,Em,Hd;function E$(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?li(document,"dragover",this._handleAutoScroll):this.options.supportPointer?li(document,"pointermove",this._handleFallbackAutoScroll):r.touches?li(document,"touchmove",this._handleFallbackAutoScroll):li(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),Xb(),W0(),l$()},nulling:function(){Em=k1=Vd=T1=Hd=xv=Lv=null,xs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(s,o);if(Em=n,r||this.options.forceAutoScrollFallback||Np||Hc||ip){Sv(n,this.options,u,r);var h=ph(u,!0);T1&&(!Hd||s!==xv||o!==Lv)&&(Hd&&Xb(),Hd=setInterval(function(){var d=ph(document.elementFromPoint(s,o),!0);d!==h&&(h=d,W0()),Sv(n,i.options,d,r)},10),xv=s,Lv=o)}else{if(!this.options.bubbleScroll||ph(u,!0)===dc()){W0();return}Sv(n,this.options,ph(u,!1),!1)}}},pu(e,{pluginName:"scroll",initializeByDefault:!0})}function W0(){xs.forEach(function(e){clearInterval(e.pid)}),xs=[]}function Xb(){clearInterval(Hd)}var Sv=$x(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,u=t.scrollSpeed,h=dc(),d=!1,g;k1!==n&&(k1=n,W0(),Vd=t.scroll,g=t.scrollFn,Vd===!0&&(Vd=ph(n,!0)));var y=0,w=Vd;do{var _=w,P=So(_),T=P.top,j=P.bottom,D=P.left,U=P.right,K=P.width,X=P.height,se=void 0,me=void 0,Le=_.scrollWidth,H=_.scrollHeight,R=tr(_),Z=_.scrollLeft,z=_.scrollTop;_===h?(se=K<Le&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),me=X<H&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(se=K<Le&&(R.overflowX==="auto"||R.overflowX==="scroll"),me=X<H&&(R.overflowY==="auto"||R.overflowY==="scroll"));var O=se&&(Math.abs(U-i)<=o&&Z+K<Le)-(Math.abs(D-i)<=o&&!!Z),k=me&&(Math.abs(j-s)<=o&&z+X<H)-(Math.abs(T-s)<=o&&!!z);if(!xs[y])for(var I=0;I<=y;I++)xs[I]||(xs[I]={});(xs[y].vx!=O||xs[y].vy!=k||xs[y].el!==_)&&(xs[y].el=_,xs[y].vx=O,xs[y].vy=k,clearInterval(xs[y].pid),(O!=0||k!=0)&&(d=!0,xs[y].pid=setInterval((function(){r&&this.layer===0&&xr.active._onTouchMove(Em);var W=xs[this.layer].vy?xs[this.layer].vy*u:0,V=xs[this.layer].vx?xs[this.layer].vx*u:0;typeof g=="function"&&g.call(xr.dragged.parentNode[Ra],V,W,e,Em,xs[this.layer].el)!=="continue"||Vx(xs[this.layer].el,V,W)}).bind({layer:y}),24))),y++}while(t.bubbleScroll&&w!==h&&(w=ph(w,!1)));T1=d}},30),Kx=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,u=t.hideGhostForTarget,h=t.unhideGhostForTarget;if(n){var d=r||s;u();var g=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,y=document.elementFromPoint(g.clientX,g.clientY);h(),d&&!d.el.contains(y)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function by(){}by.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=ad(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:Kx};pu(by,{pluginName:"revertOnSpill"});function wy(){}wy.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:Kx};pu(wy,{pluginName:"removeOnSpill"});var su;function C$(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var r=n.dragEl;su=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,u=n.changed,h=n.cancel;if(o.options.swap){var d=this.sortable.el,g=this.options;if(i&&i!==d){var y=su;s(i)!==!1?(jo(i,g.swapClass,!0),su=i):su=null,y&&y!==su&&jo(y,g.swapClass,!1)}u(),r(!0),h()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,u=this.options;su&&jo(su,u.swapClass,!1),su&&(u.swap||i&&i.options.swap)&&s!==su&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),P$(s,su),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){su=null}},pu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:su}}})}function P$(e,t){var n=e.parentNode,r=t.parentNode,i,s;!n||!r||n.isEqualNode(t)||r.isEqualNode(e)||(i=Xo(e),s=Xo(t),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(t,n.children[i]),r.insertBefore(e,r.children[s]))}var Nr=[],jl=[],Bd,Ou,Od=!1,yl=!1,Bf=!1,ao,Nd,E0;function A$(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?li(document,"pointerup",this._deselectMultiDrag):(li(document,"mouseup",this._deselectMultiDrag),li(document,"touchend",this._deselectMultiDrag)),li(document,"keydown",this._checkKeyDown),li(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Nr.length&&Ou===t?Nr.forEach(function(u,h){o+=(h?", ":"")+u.textContent}):o=s.textContent,i.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;ao=r},delayEnded:function(){this.isMultiDrag=~Nr.indexOf(ao)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Nr.length;s++)jl.push(_y(Nr[s])),jl[s].sortableIndex=Nr[s].sortableIndex,jl[s].draggable=!1,jl[s].style["will-change"]="",jo(jl[s],this.options.selectedClass,!1),Nr[s]===ao&&jo(jl[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Nr.length&&Ou===r&&(Jb(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(Jb(!1,i),jl.forEach(function(o){tr(o,"display","")}),r(),E0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(jl.forEach(function(o){tr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),E0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Ou&&Ou.multiDrag._deselectMultiDrag(),Nr.forEach(function(r){r.sortableIndex=Xo(r)}),Nr=Nr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Bf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Nr.forEach(function(o){o!==ao&&tr(o,"position","absolute")});var s=So(ao,!1,!0,!0);Nr.forEach(function(o){o!==ao&&Wb(o,s)}),yl=!0,Od=!0}i.animateAll(function(){yl=!1,Od=!1,r.options.animation&&Nr.forEach(function(o){gv(o)}),r.options.sort&&C0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;yl&&~Nr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Nr.length>1&&(Nr.forEach(function(u){s.addAnimationState({target:u,rect:yl?So(u):o}),gv(u),u.fromRect=o,r.removeAnimationState(u)}),yl=!1,M$(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,u=n.parentEl,h=n.putSortable,d=this.options;if(s){if(i&&o._hideClone(),Od=!1,d.animation&&Nr.length>1&&(yl||!i&&!o.options.sort&&!h)){var g=So(ao,!1,!0,!0);Nr.forEach(function(w){w!==ao&&(Wb(w,g),u.appendChild(w))}),yl=!0}if(!i)if(yl||C0(),Nr.length>1){var y=E0;o._showClone(r),o.options.animation&&!E0&&y&&jl.forEach(function(w){o.addAnimationState({target:w,rect:Nd}),w.fromRect=Nd,w.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Nr.forEach(function(u){u.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Nd=pu({},r);var o=Qh(ao,!0);Nd.top-=o.f,Nd.left-=o.e}},dragOverAnimationComplete:function(){yl&&(yl=!1,C0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,u=n.dispatchSortableEvent,h=n.oldIndex,d=n.putSortable,g=d||this.sortable;if(r){var y=this.options,w=s.children;if(!Bf)if(y.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),jo(ao,y.selectedClass,!~Nr.indexOf(ao)),~Nr.indexOf(ao))Nr.splice(Nr.indexOf(ao),1),Bd=null,Ud({sortable:o,rootEl:i,name:"deselect",targetEl:ao});else{if(Nr.push(ao),Ud({sortable:o,rootEl:i,name:"select",targetEl:ao}),r.shiftKey&&Bd&&o.el.contains(Bd)){var _=Xo(Bd),P=Xo(ao);if(~_&&~P&&_!==P){var T,j;for(P>_?(j=_,T=P):(j=P,T=_+1);j<T;j++)~Nr.indexOf(w[j])||(jo(w[j],y.selectedClass,!0),Nr.push(w[j]),Ud({sortable:o,rootEl:i,name:"select",targetEl:w[j]}))}}else Bd=ao;Ou=g}if(Bf&&this.isMultiDrag){if(yl=!1,(s[Ra].options.sort||s!==i)&&Nr.length>1){var D=So(ao),U=Xo(ao,":not(."+this.options.selectedClass+")");if(!Od&&y.animation&&(ao.thisAnimationDuration=null),g.captureAnimationState(),!Od&&(y.animation&&(ao.fromRect=D,Nr.forEach(function(X){if(X.thisAnimationDuration=null,X!==ao){var se=yl?So(X):D;X.fromRect=se,g.addAnimationState({target:X,rect:se})}})),C0(),Nr.forEach(function(X){w[U]?s.insertBefore(X,w[U]):s.appendChild(X),U++}),h===Xo(ao))){var K=!1;Nr.forEach(function(X){if(X.sortableIndex!==Xo(X)){K=!0;return}}),K&&u("update")}Nr.forEach(function(X){gv(X)}),g.animateAll()}Ou=g}(i===s||d&&d.lastPutMode!=="clone")&&jl.forEach(function(X){X.parentNode&&X.parentNode.removeChild(X)})}},nullingGlobal:function(){this.isMultiDrag=Bf=!1,jl.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Qr(document,"pointerup",this._deselectMultiDrag),Qr(document,"mouseup",this._deselectMultiDrag),Qr(document,"touchend",this._deselectMultiDrag),Qr(document,"keydown",this._checkKeyDown),Qr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Bf<"u"&&Bf)&&Ou===this.sortable&&!(n&&Iu(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Nr.length;){var r=Nr[0];jo(r,this.options.selectedClass,!1),Nr.shift(),Ud({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},pu(e,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Ra];!r||!r.options.multiDrag||~Nr.indexOf(n)||(Ou&&Ou!==r&&(Ou.multiDrag._deselectMultiDrag(),Ou=r),jo(n,r.options.selectedClass,!0),Nr.push(n))},deselect:function(n){var r=n.parentNode[Ra],i=Nr.indexOf(n);!r||!r.options.multiDrag||!~i||(jo(n,r.options.selectedClass,!1),Nr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Nr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;yl&&s!==ao?o=-1:yl?o=Xo(s,":not(."+n.options.selectedClass+")"):o=Xo(s),i.push({multiDragElement:s,index:o})}),{items:JU(Nr),clones:[].concat(jl),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function M$(e,t){Nr.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function Jb(e,t){jl.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function C0(){Nr.forEach(function(e){e!==ao&&e.parentNode&&e.parentNode.removeChild(e)})}xr.mount(new E$);xr.mount(wy,by);const k$=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:A$,Sortable:xr,Swap:C$,default:xr},Symbol.toStringTag,{value:"Module"})),T$=Y5(k$);(function(e,t){(function(r,i){e.exports=i(ZU,T$)})(typeof self<"u"?self:Ks,function(n,r){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var h=s[u]={i:u,l:!1,exports:{}};return i[u].call(h.exports,h,h.exports,o),h.l=!0,h.exports}return o.m=i,o.c=s,o.d=function(u,h,d){o.o(u,h)||Object.defineProperty(u,h,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,h){if(h&1&&(u=o(u)),h&8||h&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),h&2&&typeof u!="string")for(var g in u)o.d(d,g,(function(y){return u[y]}).bind(null,g));return d},o.n=function(u){var h=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(h,"a",h),h},o.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var u=o("b622"),h=u("toStringTag"),d={};d[h]="z",i.exports=String(d)==="[object z]"},"0366":function(i,s,o){var u=o("1c0b");i.exports=function(h,d,g){if(u(h),d===void 0)return h;switch(g){case 0:return function(){return h.call(d)};case 1:return function(y){return h.call(d,y)};case 2:return function(y,w){return h.call(d,y,w)};case 3:return function(y,w,_){return h.call(d,y,w,_)}}return function(){return h.apply(d,arguments)}}},"057f":function(i,s,o){var u=o("fc6a"),h=o("241c").f,d={}.toString,g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(w){try{return h(w)}catch{return g.slice()}};i.exports.f=function(_){return g&&d.call(_)=="[object Window]"?y(_):h(u(_))}},"06cf":function(i,s,o){var u=o("83ab"),h=o("d1e7"),d=o("5c6c"),g=o("fc6a"),y=o("c04e"),w=o("5135"),_=o("0cfb"),P=Object.getOwnPropertyDescriptor;s.f=u?P:function(j,D){if(j=g(j),D=y(D,!0),_)try{return P(j,D)}catch{}if(w(j,D))return d(!h.f.call(j,D),j[D])}},"0cfb":function(i,s,o){var u=o("83ab"),h=o("d039"),d=o("cc12");i.exports=!u&&!h(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var u=o("23e7"),h=o("d58f").left,d=o("a640"),g=o("ae40"),y=d("reduce"),w=g("reduce",{1:0});u({target:"Array",proto:!0,forced:!y||!w},{reduce:function(P){return h(this,P,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var u=o("c6b6"),h=o("9263");i.exports=function(d,g){var y=d.exec;if(typeof y=="function"){var w=y.call(d,g);if(typeof w!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return w}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return h.call(d,g)}},"159b":function(i,s,o){var u=o("da84"),h=o("fdbc"),d=o("17c2"),g=o("9112");for(var y in h){var w=u[y],_=w&&w.prototype;if(_&&_.forEach!==d)try{g(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(i,s,o){var u=o("b727").forEach,h=o("a640"),d=o("ae40"),g=h("forEach"),y=d("forEach");i.exports=!g||!y?function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var u=o("d066");i.exports=u("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var u=o("b622"),h=u("iterator"),d=!1;try{var g=0,y={next:function(){return{done:!!g++}},return:function(){d=!0}};y[h]=function(){return this},Array.from(y,function(){throw 2})}catch{}i.exports=function(w,_){if(!_&&!d)return!1;var P=!1;try{var T={};T[h]=function(){return{next:function(){return{done:P=!0}}}},w(T)}catch{}return P}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var u=o("d039"),h=o("b622"),d=o("2d00"),g=h("species");i.exports=function(y){return d>=51||!u(function(){var w=[],_=w.constructor={};return _[g]=function(){return{foo:1}},w[y](Boolean).foo!==1})}},"23cb":function(i,s,o){var u=o("a691"),h=Math.max,d=Math.min;i.exports=function(g,y){var w=u(g);return w<0?h(w+y,0):d(w,y)}},"23e7":function(i,s,o){var u=o("da84"),h=o("06cf").f,d=o("9112"),g=o("6eeb"),y=o("ce4e"),w=o("e893"),_=o("94ca");i.exports=function(P,T){var j=P.target,D=P.global,U=P.stat,K,X,se,me,Le,H;if(D?X=u:U?X=u[j]||y(j,{}):X=(u[j]||{}).prototype,X)for(se in T){if(Le=T[se],P.noTargetGet?(H=h(X,se),me=H&&H.value):me=X[se],K=_(D?se:j+(U?".":"#")+se,P.forced),!K&&me!==void 0){if(typeof Le==typeof me)continue;w(Le,me)}(P.sham||me&&me.sham)&&d(Le,"sham",!0),g(X,se,Le,P)}}},"241c":function(i,s,o){var u=o("ca84"),h=o("7839"),d=h.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(y){return u(y,d)}},"25f0":function(i,s,o){var u=o("6eeb"),h=o("825a"),d=o("d039"),g=o("ad6d"),y="toString",w=RegExp.prototype,_=w[y],P=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),T=_.name!=y;(P||T)&&u(RegExp.prototype,y,function(){var D=h(this),U=String(D.source),K=D.flags,X=String(K===void 0&&D instanceof RegExp&&!("flags"in w)?g.call(D):K);return"/"+U+"/"+X},{unsafe:!0})},"2ca0":function(i,s,o){var u=o("23e7"),h=o("06cf").f,d=o("50c4"),g=o("5a34"),y=o("1d80"),w=o("ab13"),_=o("c430"),P="".startsWith,T=Math.min,j=w("startsWith"),D=!_&&!j&&!!function(){var U=h(String.prototype,"startsWith");return U&&!U.writable}();u({target:"String",proto:!0,forced:!D&&!j},{startsWith:function(K){var X=String(y(this));g(K);var se=d(T(arguments.length>1?arguments[1]:void 0,X.length)),me=String(K);return P?P.call(X,me,se):X.slice(se,se+me.length)===me}})},"2d00":function(i,s,o){var u=o("da84"),h=o("342f"),d=u.process,g=d&&d.versions,y=g&&g.v8,w,_;y?(w=y.split("."),_=w[0]+w[1]):h&&(w=h.match(/Edge\/(\d+)/),(!w||w[1]>=74)&&(w=h.match(/Chrome\/(\d+)/),w&&(_=w[1]))),i.exports=_&&+_},"342f":function(i,s,o){var u=o("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,s,o){var u=o("f5df"),h=o("3f8c"),d=o("b622"),g=d("iterator");i.exports=function(y){if(y!=null)return y[g]||y["@@iterator"]||h[u(y)]}},"37e8":function(i,s,o){var u=o("83ab"),h=o("9bf2"),d=o("825a"),g=o("df75");i.exports=u?Object.defineProperties:function(w,_){d(w);for(var P=g(_),T=P.length,j=0,D;T>j;)h.f(w,D=P[j++],_[D]);return w}},"3bbe":function(i,s,o){var u=o("861d");i.exports=function(h){if(!u(h)&&h!==null)throw TypeError("Can't set "+String(h)+" as a prototype");return h}},"3ca3":function(i,s,o){var u=o("6547").charAt,h=o("69f3"),d=o("7dd0"),g="String Iterator",y=h.set,w=h.getterFor(g);d(String,"String",function(_){y(this,{type:g,string:String(_),index:0})},function(){var P=w(this),T=P.string,j=P.index,D;return j>=T.length?{value:void 0,done:!0}:(D=u(T,j),P.index+=D.length,{value:D,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var u=o("23e7"),h=o("17c2");u({target:"Array",proto:!0,forced:[].forEach!=h},{forEach:h})},"428f":function(i,s,o){var u=o("da84");i.exports=u},"44ad":function(i,s,o){var u=o("d039"),h=o("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(g){return h(g)=="String"?d.call(g,""):Object(g)}:Object},"44d2":function(i,s,o){var u=o("b622"),h=o("7c73"),d=o("9bf2"),g=u("unscopables"),y=Array.prototype;y[g]==null&&d.f(y,g,{configurable:!0,value:h(null)}),i.exports=function(w){y[g][w]=!0}},"44e7":function(i,s,o){var u=o("861d"),h=o("c6b6"),d=o("b622"),g=d("match");i.exports=function(y){var w;return u(y)&&((w=y[g])!==void 0?!!w:h(y)=="RegExp")}},4930:function(i,s,o){var u=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,s,o){var u=o("fc6a"),h=o("50c4"),d=o("23cb"),g=function(y){return function(w,_,P){var T=u(w),j=h(T.length),D=d(P,j),U;if(y&&_!=_){for(;j>D;)if(U=T[D++],U!=U)return!0}else for(;j>D;D++)if((y||D in T)&&T[D]===_)return y||D||0;return!y&&-1}};i.exports={includes:g(!0),indexOf:g(!1)}},"4de4":function(i,s,o){var u=o("23e7"),h=o("b727").filter,d=o("1dde"),g=o("ae40"),y=d("filter"),w=g("filter");u({target:"Array",proto:!0,forced:!y||!w},{filter:function(P){return h(this,P,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var u=o("0366"),h=o("7b0b"),d=o("9bdd"),g=o("e95a"),y=o("50c4"),w=o("8418"),_=o("35a1");i.exports=function(T){var j=h(T),D=typeof this=="function"?this:Array,U=arguments.length,K=U>1?arguments[1]:void 0,X=K!==void 0,se=_(j),me=0,Le,H,R,Z,z,O;if(X&&(K=u(K,U>2?arguments[2]:void 0,2)),se!=null&&!(D==Array&&g(se)))for(Z=se.call(j),z=Z.next,H=new D;!(R=z.call(Z)).done;me++)O=X?d(Z,K,[R.value,me],!0):R.value,w(H,me,O);else for(Le=y(j.length),H=new D(Le);Le>me;me++)O=X?K(j[me],me):j[me],w(H,me,O);return H.length=me,H}},"4fad":function(i,s,o){var u=o("23e7"),h=o("6f53").entries;u({target:"Object",stat:!0},{entries:function(g){return h(g)}})},"50c4":function(i,s,o){var u=o("a691"),h=Math.min;i.exports=function(d){return d>0?h(u(d),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(u,h){return o.call(u,h)}},5319:function(i,s,o){var u=o("d784"),h=o("825a"),d=o("7b0b"),g=o("50c4"),y=o("a691"),w=o("1d80"),_=o("8aa5"),P=o("14c3"),T=Math.max,j=Math.min,D=Math.floor,U=/\$([$&'`]|\d\d?|<[^>]*>)/g,K=/\$([$&'`]|\d\d?)/g,X=function(se){return se===void 0?se:String(se)};u("replace",2,function(se,me,Le,H){var R=H.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Z=H.REPLACE_KEEPS_$0,z=R?"$":"$0";return[function(I,W){var V=w(this),G=I==null?void 0:I[se];return G!==void 0?G.call(I,V,W):me.call(String(V),I,W)},function(k,I){if(!R&&Z||typeof I=="string"&&I.indexOf(z)===-1){var W=Le(me,k,this,I);if(W.done)return W.value}var V=h(k),G=String(this),ne=typeof I=="function";ne||(I=String(I));var _e=V.global;if(_e){var ge=V.unicode;V.lastIndex=0}for(var Ve=[];;){var B=P(V,G);if(B===null||(Ve.push(B),!_e))break;var te=String(B[0]);te===""&&(V.lastIndex=_(G,g(V.lastIndex),ge))}for(var ce="",le=0,xe=0;xe<Ve.length;xe++){B=Ve[xe];for(var he=String(B[0]),J=T(j(y(B.index),G.length),0),ae=[],Fe=1;Fe<B.length;Fe++)ae.push(X(B[Fe]));var Me=B.groups;if(ne){var Ye=[he].concat(ae,J,G);Me!==void 0&&Ye.push(Me);var oe=String(I.apply(void 0,Ye))}else oe=O(he,G,J,ae,Me,I);J>=le&&(ce+=G.slice(le,J)+oe,le=J+he.length)}return ce+G.slice(le)}];function O(k,I,W,V,G,ne){var _e=W+k.length,ge=V.length,Ve=K;return G!==void 0&&(G=d(G),Ve=U),me.call(ne,Ve,function(B,te){var ce;switch(te.charAt(0)){case"$":return"$";case"&":return k;case"`":return I.slice(0,W);case"'":return I.slice(_e);case"<":ce=G[te.slice(1,-1)];break;default:var le=+te;if(le===0)return B;if(le>ge){var xe=D(le/10);return xe===0?B:xe<=ge?V[xe-1]===void 0?te.charAt(1):V[xe-1]+te.charAt(1):B}ce=V[le-1]}return ce===void 0?"":ce})}})},5692:function(i,s,o){var u=o("c430"),h=o("c6cd");(i.exports=function(d,g){return h[d]||(h[d]=g!==void 0?g:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var u=o("d066"),h=o("241c"),d=o("7418"),g=o("825a");i.exports=u("Reflect","ownKeys")||function(w){var _=h.f(g(w)),P=d.f;return P?_.concat(P(w)):_}},"5a34":function(i,s,o){var u=o("44e7");i.exports=function(h){if(u(h))throw TypeError("The method doesn't accept regular expressions");return h}},"5c6c":function(i,s){i.exports=function(o,u){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:u}}},"5db7":function(i,s,o){var u=o("23e7"),h=o("a2bf"),d=o("7b0b"),g=o("50c4"),y=o("1c0b"),w=o("65f0");u({target:"Array",proto:!0},{flatMap:function(P){var T=d(this),j=g(T.length),D;return y(P),D=w(T,0),D.length=h(D,T,T,j,0,1,P,arguments.length>1?arguments[1]:void 0),D}})},6547:function(i,s,o){var u=o("a691"),h=o("1d80"),d=function(g){return function(y,w){var _=String(h(y)),P=u(w),T=_.length,j,D;return P<0||P>=T?g?"":void 0:(j=_.charCodeAt(P),j<55296||j>56319||P+1===T||(D=_.charCodeAt(P+1))<56320||D>57343?g?_.charAt(P):j:g?_.slice(P,P+2):(j-55296<<10)+(D-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,s,o){var u=o("861d"),h=o("e8b5"),d=o("b622"),g=d("species");i.exports=function(y,w){var _;return h(y)&&(_=y.constructor,typeof _=="function"&&(_===Array||h(_.prototype))?_=void 0:u(_)&&(_=_[g],_===null&&(_=void 0))),new(_===void 0?Array:_)(w===0?0:w)}},"69f3":function(i,s,o){var u=o("7f9a"),h=o("da84"),d=o("861d"),g=o("9112"),y=o("5135"),w=o("f772"),_=o("d012"),P=h.WeakMap,T,j,D,U=function(R){return D(R)?j(R):T(R,{})},K=function(R){return function(Z){var z;if(!d(Z)||(z=j(Z)).type!==R)throw TypeError("Incompatible receiver, "+R+" required");return z}};if(u){var X=new P,se=X.get,me=X.has,Le=X.set;T=function(R,Z){return Le.call(X,R,Z),Z},j=function(R){return se.call(X,R)||{}},D=function(R){return me.call(X,R)}}else{var H=w("state");_[H]=!0,T=function(R,Z){return g(R,H,Z),Z},j=function(R){return y(R,H)?R[H]:{}},D=function(R){return y(R,H)}}i.exports={set:T,get:j,has:D,enforce:U,getterFor:K}},"6eeb":function(i,s,o){var u=o("da84"),h=o("9112"),d=o("5135"),g=o("ce4e"),y=o("8925"),w=o("69f3"),_=w.get,P=w.enforce,T=String(String).split("String");(i.exports=function(j,D,U,K){var X=K?!!K.unsafe:!1,se=K?!!K.enumerable:!1,me=K?!!K.noTargetGet:!1;if(typeof U=="function"&&(typeof D=="string"&&!d(U,"name")&&h(U,"name",D),P(U).source=T.join(typeof D=="string"?D:"")),j===u){se?j[D]=U:g(D,U);return}else X?!me&&j[D]&&(se=!0):delete j[D];se?j[D]=U:h(j,D,U)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||y(this)})},"6f53":function(i,s,o){var u=o("83ab"),h=o("df75"),d=o("fc6a"),g=o("d1e7").f,y=function(w){return function(_){for(var P=d(_),T=h(P),j=T.length,D=0,U=[],K;j>D;)K=T[D++],(!u||g.call(P,K))&&U.push(w?[K,P[K]]:P[K]);return U}};i.exports={entries:y(!0),values:y(!1)}},"73d9":function(i,s,o){var u=o("44d2");u("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var u=o("428f"),h=o("5135"),d=o("e538"),g=o("9bf2").f;i.exports=function(y){var w=u.Symbol||(u.Symbol={});h(w,y)||g(w,y,{value:d.f(y)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var u=o("1d80");i.exports=function(h){return Object(u(h))}},"7c73":function(i,s,o){var u=o("825a"),h=o("37e8"),d=o("7839"),g=o("d012"),y=o("1be4"),w=o("cc12"),_=o("f772"),P=">",T="<",j="prototype",D="script",U=_("IE_PROTO"),K=function(){},X=function(R){return T+D+P+R+T+"/"+D+P},se=function(R){R.write(X("")),R.close();var Z=R.parentWindow.Object;return R=null,Z},me=function(){var R=w("iframe"),Z="java"+D+":",z;return R.style.display="none",y.appendChild(R),R.src=String(Z),z=R.contentWindow.document,z.open(),z.write(X("document.F=Object")),z.close(),z.F},Le,H=function(){try{Le=document.domain&&new ActiveXObject("htmlfile")}catch{}H=Le?se(Le):me();for(var R=d.length;R--;)delete H[j][d[R]];return H()};g[U]=!0,i.exports=Object.create||function(Z,z){var O;return Z!==null?(K[j]=u(Z),O=new K,K[j]=null,O[U]=Z):O=H(),z===void 0?O:h(O,z)}},"7dd0":function(i,s,o){var u=o("23e7"),h=o("9ed3"),d=o("e163"),g=o("d2bb"),y=o("d44e"),w=o("9112"),_=o("6eeb"),P=o("b622"),T=o("c430"),j=o("3f8c"),D=o("ae93"),U=D.IteratorPrototype,K=D.BUGGY_SAFARI_ITERATORS,X=P("iterator"),se="keys",me="values",Le="entries",H=function(){return this};i.exports=function(R,Z,z,O,k,I,W){h(z,Z,O);var V=function(xe){if(xe===k&&Ve)return Ve;if(!K&&xe in _e)return _e[xe];switch(xe){case se:return function(){return new z(this,xe)};case me:return function(){return new z(this,xe)};case Le:return function(){return new z(this,xe)}}return function(){return new z(this)}},G=Z+" Iterator",ne=!1,_e=R.prototype,ge=_e[X]||_e["@@iterator"]||k&&_e[k],Ve=!K&&ge||V(k),B=Z=="Array"&&_e.entries||ge,te,ce,le;if(B&&(te=d(B.call(new R)),U!==Object.prototype&&te.next&&(!T&&d(te)!==U&&(g?g(te,U):typeof te[X]!="function"&&w(te,X,H)),y(te,G,!0,!0),T&&(j[G]=H))),k==me&&ge&&ge.name!==me&&(ne=!0,Ve=function(){return ge.call(this)}),(!T||W)&&_e[X]!==Ve&&w(_e,X,Ve),j[Z]=Ve,k)if(ce={values:V(me),keys:I?Ve:V(se),entries:V(Le)},W)for(le in ce)(K||ne||!(le in _e))&&_(_e,le,ce[le]);else u({target:Z,proto:!0,forced:K||ne},ce);return ce}},"7f9a":function(i,s,o){var u=o("da84"),h=o("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(h(d))},"825a":function(i,s,o){var u=o("861d");i.exports=function(h){if(!u(h))throw TypeError(String(h)+" is not an object");return h}},"83ab":function(i,s,o){var u=o("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var u=o("c04e"),h=o("9bf2"),d=o("5c6c");i.exports=function(g,y,w){var _=u(y);_ in g?h.f(g,_,d(0,w)):g[_]=w}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var u,h,d;(function(g,y){h=[],u=y,d=typeof u=="function"?u.apply(s,h):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function g(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==g&&document.currentScript)return document.currentScript;try{throw new Error}catch(Le){var w=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,P=w.exec(Le.stack)||_.exec(Le.stack),T=P&&P[1]||!1,j=P&&P[2]||!1,D=document.location.href.replace(document.location.hash,""),U,K,X,se=document.getElementsByTagName("script");T===D&&(U=document.documentElement.outerHTML,K=new RegExp("(?:[^\\n]+?\\n){0,"+(j-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),X=U.replace(K,"$1").trim());for(var me=0;me<se.length;me++)if(se[me].readyState==="interactive"||se[me].src===T||T===D&&se[me].innerHTML&&se[me].innerHTML.trim()===X)return se[me];return null}}return g})},8925:function(i,s,o){var u=o("c6cd"),h=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return h.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,s,o){var u=o("6547").charAt;i.exports=function(h,d,g){return d+(g?u(h,d).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,u=Math.random();i.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++o+u).toString(36)}},9112:function(i,s,o){var u=o("83ab"),h=o("9bf2"),d=o("5c6c");i.exports=u?function(g,y,w){return h.f(g,y,d(1,w))}:function(g,y,w){return g[y]=w,g}},9263:function(i,s,o){var u=o("ad6d"),h=o("9f7f"),d=RegExp.prototype.exec,g=String.prototype.replace,y=d,w=function(){var j=/a/,D=/b*/g;return d.call(j,"a"),d.call(D,"a"),j.lastIndex!==0||D.lastIndex!==0}(),_=h.UNSUPPORTED_Y||h.BROKEN_CARET,P=/()??/.exec("")[1]!==void 0,T=w||P||_;T&&(y=function(D){var U=this,K,X,se,me,Le=_&&U.sticky,H=u.call(U),R=U.source,Z=0,z=D;return Le&&(H=H.replace("y",""),H.indexOf("g")===-1&&(H+="g"),z=String(D).slice(U.lastIndex),U.lastIndex>0&&(!U.multiline||U.multiline&&D[U.lastIndex-1]!==`
`)&&(R="(?: "+R+")",z=" "+z,Z++),X=new RegExp("^(?:"+R+")",H)),P&&(X=new RegExp("^"+R+"$(?!\\s)",H)),w&&(K=U.lastIndex),se=d.call(Le?X:U,z),Le?se?(se.input=se.input.slice(Z),se[0]=se[0].slice(Z),se.index=U.lastIndex,U.lastIndex+=se[0].length):U.lastIndex=0:w&&se&&(U.lastIndex=U.global?se.index+se[0].length:K),P&&se&&se.length>1&&g.call(se[0],X,function(){for(me=1;me<arguments.length-2;me++)arguments[me]===void 0&&(se[me]=void 0)}),se}),i.exports=y},"94ca":function(i,s,o){var u=o("d039"),h=/#|\.prototype\./,d=function(P,T){var j=y[g(P)];return j==_?!0:j==w?!1:typeof T=="function"?u(T):!!T},g=d.normalize=function(P){return String(P).replace(h,".").toLowerCase()},y=d.data={},w=d.NATIVE="N",_=d.POLYFILL="P";i.exports=d},"99af":function(i,s,o){var u=o("23e7"),h=o("d039"),d=o("e8b5"),g=o("861d"),y=o("7b0b"),w=o("50c4"),_=o("8418"),P=o("65f0"),T=o("1dde"),j=o("b622"),D=o("2d00"),U=j("isConcatSpreadable"),K=9007199254740991,X="Maximum allowed index exceeded",se=D>=51||!h(function(){var R=[];return R[U]=!1,R.concat()[0]!==R}),me=T("concat"),Le=function(R){if(!g(R))return!1;var Z=R[U];return Z!==void 0?!!Z:d(R)},H=!se||!me;u({target:"Array",proto:!0,forced:H},{concat:function(Z){var z=y(this),O=P(z,0),k=0,I,W,V,G,ne;for(I=-1,V=arguments.length;I<V;I++)if(ne=I===-1?z:arguments[I],Le(ne)){if(G=w(ne.length),k+G>K)throw TypeError(X);for(W=0;W<G;W++,k++)W in ne&&_(O,k,ne[W])}else{if(k>=K)throw TypeError(X);_(O,k++,ne)}return O.length=k,O}})},"9bdd":function(i,s,o){var u=o("825a");i.exports=function(h,d,g,y){try{return y?d(u(g)[0],g[1]):d(g)}catch(_){var w=h.return;throw w!==void 0&&u(w.call(h)),_}}},"9bf2":function(i,s,o){var u=o("83ab"),h=o("0cfb"),d=o("825a"),g=o("c04e"),y=Object.defineProperty;s.f=u?y:function(_,P,T){if(d(_),P=g(P,!0),d(T),h)try{return y(_,P,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported");return"value"in T&&(_[P]=T.value),_}},"9ed3":function(i,s,o){var u=o("ae93").IteratorPrototype,h=o("7c73"),d=o("5c6c"),g=o("d44e"),y=o("3f8c"),w=function(){return this};i.exports=function(_,P,T){var j=P+" Iterator";return _.prototype=h(u,{next:d(1,T)}),g(_,j,!1,!0),y[j]=w,_}},"9f7f":function(i,s,o){var u=o("d039");function h(d,g){return RegExp(d,g)}s.UNSUPPORTED_Y=u(function(){var d=h("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),s.BROKEN_CARET=u(function(){var d=h("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,s,o){var u=o("e8b5"),h=o("50c4"),d=o("0366"),g=function(y,w,_,P,T,j,D,U){for(var K=T,X=0,se=D?d(D,U,3):!1,me;X<P;){if(X in _){if(me=se?se(_[X],X,w):_[X],j>0&&u(me))K=g(y,w,me,h(me.length),K,j-1)-1;else{if(K>=9007199254740991)throw TypeError("Exceed the acceptable array length");y[K]=me}K++}X++}return K};i.exports=g},a352:function(i,s){i.exports=r},a434:function(i,s,o){var u=o("23e7"),h=o("23cb"),d=o("a691"),g=o("50c4"),y=o("7b0b"),w=o("65f0"),_=o("8418"),P=o("1dde"),T=o("ae40"),j=P("splice"),D=T("splice",{ACCESSORS:!0,0:0,1:2}),U=Math.max,K=Math.min,X=9007199254740991,se="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!j||!D},{splice:function(Le,H){var R=y(this),Z=g(R.length),z=h(Le,Z),O=arguments.length,k,I,W,V,G,ne;if(O===0?k=I=0:O===1?(k=0,I=Z-z):(k=O-2,I=K(U(d(H),0),Z-z)),Z+k-I>X)throw TypeError(se);for(W=w(R,I),V=0;V<I;V++)G=z+V,G in R&&_(W,V,R[G]);if(W.length=I,k<I){for(V=z;V<Z-I;V++)G=V+I,ne=V+k,G in R?R[ne]=R[G]:delete R[ne];for(V=Z;V>Z-I+k;V--)delete R[V-1]}else if(k>I)for(V=Z-I;V>z;V--)G=V+I-1,ne=V+k-1,G in R?R[ne]=R[G]:delete R[ne];for(V=0;V<k;V++)R[V+z]=arguments[V+2];return R.length=Z-I+k,W}})},a4d3:function(i,s,o){var u=o("23e7"),h=o("da84"),d=o("d066"),g=o("c430"),y=o("83ab"),w=o("4930"),_=o("fdbf"),P=o("d039"),T=o("5135"),j=o("e8b5"),D=o("861d"),U=o("825a"),K=o("7b0b"),X=o("fc6a"),se=o("c04e"),me=o("5c6c"),Le=o("7c73"),H=o("df75"),R=o("241c"),Z=o("057f"),z=o("7418"),O=o("06cf"),k=o("9bf2"),I=o("d1e7"),W=o("9112"),V=o("6eeb"),G=o("5692"),ne=o("f772"),_e=o("d012"),ge=o("90e3"),Ve=o("b622"),B=o("e538"),te=o("746f"),ce=o("d44e"),le=o("69f3"),xe=o("b727").forEach,he=ne("hidden"),J="Symbol",ae="prototype",Fe=Ve("toPrimitive"),Me=le.set,Ye=le.getterFor(J),oe=Object[ae],fe=h.Symbol,be=d("JSON","stringify"),de=O.f,Ue=k.f,Xe=Z.f,ze=I.f,Je=G("symbols"),Qe=G("op-symbols"),it=G("string-to-symbol-registry"),Mt=G("symbol-to-string-registry"),xt=G("wks"),Nt=h.QObject,Kt=!Nt||!Nt[ae]||!Nt[ae].findChild,hn=y&&P(function(){return Le(Ue({},"a",{get:function(){return Ue(this,"a",{value:7}).a}})).a!=7})?function(wn,Rn,lt){var We=de(oe,Rn);We&&delete oe[Rn],Ue(wn,Rn,lt),We&&wn!==oe&&Ue(oe,Rn,We)}:Ue,mn=function(wn,Rn){var lt=Je[wn]=Le(fe[ae]);return Me(lt,{type:J,tag:wn,description:Rn}),y||(lt.description=Rn),lt},et=_?function(wn){return typeof wn=="symbol"}:function(wn){return Object(wn)instanceof fe},ot=function(Rn,lt,We){Rn===oe&&ot(Qe,lt,We),U(Rn);var qt=se(lt,!0);return U(We),T(Je,qt)?(We.enumerable?(T(Rn,he)&&Rn[he][qt]&&(Rn[he][qt]=!1),We=Le(We,{enumerable:me(0,!1)})):(T(Rn,he)||Ue(Rn,he,me(1,{})),Rn[he][qt]=!0),hn(Rn,qt,We)):Ue(Rn,qt,We)},nt=function(Rn,lt){U(Rn);var We=X(lt),qt=H(We).concat(Tn(We));return xe(qt,function(_n){(!y||en.call(We,_n))&&ot(Rn,_n,We[_n])}),Rn},$t=function(Rn,lt){return lt===void 0?Le(Rn):nt(Le(Rn),lt)},en=function(Rn){var lt=se(Rn,!0),We=ze.call(this,lt);return this===oe&&T(Je,lt)&&!T(Qe,lt)?!1:We||!T(this,lt)||!T(Je,lt)||T(this,he)&&this[he][lt]?We:!0},kn=function(Rn,lt){var We=X(Rn),qt=se(lt,!0);if(!(We===oe&&T(Je,qt)&&!T(Qe,qt))){var _n=de(We,qt);return _n&&T(Je,qt)&&!(T(We,he)&&We[he][qt])&&(_n.enumerable=!0),_n}},Ln=function(Rn){var lt=Xe(X(Rn)),We=[];return xe(lt,function(qt){!T(Je,qt)&&!T(_e,qt)&&We.push(qt)}),We},Tn=function(Rn){var lt=Rn===oe,We=Xe(lt?Qe:X(Rn)),qt=[];return xe(We,function(_n){T(Je,_n)&&(!lt||T(oe,_n))&&qt.push(Je[_n])}),qt};if(w||(fe=function(){if(this instanceof fe)throw TypeError("Symbol is not a constructor");var Rn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),lt=ge(Rn),We=function(qt){this===oe&&We.call(Qe,qt),T(this,he)&&T(this[he],lt)&&(this[he][lt]=!1),hn(this,lt,me(1,qt))};return y&&Kt&&hn(oe,lt,{configurable:!0,set:We}),mn(lt,Rn)},V(fe[ae],"toString",function(){return Ye(this).tag}),V(fe,"withoutSetter",function(wn){return mn(ge(wn),wn)}),I.f=en,k.f=ot,O.f=kn,R.f=Z.f=Ln,z.f=Tn,B.f=function(wn){return mn(Ve(wn),wn)},y&&(Ue(fe[ae],"description",{configurable:!0,get:function(){return Ye(this).description}}),g||V(oe,"propertyIsEnumerable",en,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!w,sham:!w},{Symbol:fe}),xe(H(xt),function(wn){te(wn)}),u({target:J,stat:!0,forced:!w},{for:function(wn){var Rn=String(wn);if(T(it,Rn))return it[Rn];var lt=fe(Rn);return it[Rn]=lt,Mt[lt]=Rn,lt},keyFor:function(Rn){if(!et(Rn))throw TypeError(Rn+" is not a symbol");if(T(Mt,Rn))return Mt[Rn]},useSetter:function(){Kt=!0},useSimple:function(){Kt=!1}}),u({target:"Object",stat:!0,forced:!w,sham:!y},{create:$t,defineProperty:ot,defineProperties:nt,getOwnPropertyDescriptor:kn}),u({target:"Object",stat:!0,forced:!w},{getOwnPropertyNames:Ln,getOwnPropertySymbols:Tn}),u({target:"Object",stat:!0,forced:P(function(){z.f(1)})},{getOwnPropertySymbols:function(Rn){return z.f(K(Rn))}}),be){var or=!w||P(function(){var wn=fe();return be([wn])!="[null]"||be({a:wn})!="{}"||be(Object(wn))!="{}"});u({target:"JSON",stat:!0,forced:or},{stringify:function(Rn,lt,We){for(var qt=[Rn],_n=1,Dn;arguments.length>_n;)qt.push(arguments[_n++]);if(Dn=lt,!(!D(lt)&&Rn===void 0||et(Rn)))return j(lt)||(lt=function(Cn,Xt){if(typeof Dn=="function"&&(Xt=Dn.call(this,Cn,Xt)),!et(Xt))return Xt}),qt[1]=lt,be.apply(null,qt)}})}fe[ae][Fe]||W(fe[ae],Fe,fe[ae].valueOf),ce(fe,J),_e[he]=!0},a630:function(i,s,o){var u=o("23e7"),h=o("4df4"),d=o("1c7e"),g=!d(function(y){Array.from(y)});u({target:"Array",stat:!0,forced:g},{from:h})},a640:function(i,s,o){var u=o("d039");i.exports=function(h,d){var g=[][h];return!!g&&u(function(){g.call(null,d||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,u=Math.floor;i.exports=function(h){return isNaN(h=+h)?0:(h>0?u:o)(h)}},ab13:function(i,s,o){var u=o("b622"),h=u("match");i.exports=function(d){var g=/./;try{"/./"[d](g)}catch{try{return g[h]=!1,"/./"[d](g)}catch{}}return!1}},ac1f:function(i,s,o){var u=o("23e7"),h=o("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==h},{exec:h})},ad6d:function(i,s,o){var u=o("825a");i.exports=function(){var h=u(this),d="";return h.global&&(d+="g"),h.ignoreCase&&(d+="i"),h.multiline&&(d+="m"),h.dotAll&&(d+="s"),h.unicode&&(d+="u"),h.sticky&&(d+="y"),d}},ae40:function(i,s,o){var u=o("83ab"),h=o("d039"),d=o("5135"),g=Object.defineProperty,y={},w=function(_){throw _};i.exports=function(_,P){if(d(y,_))return y[_];P||(P={});var T=[][_],j=d(P,"ACCESSORS")?P.ACCESSORS:!1,D=d(P,0)?P[0]:w,U=d(P,1)?P[1]:void 0;return y[_]=!!T&&!h(function(){if(j&&!u)return!0;var K={length:-1};j?g(K,1,{enumerable:!0,get:w}):K[1]=1,T.call(K,D,U)})}},ae93:function(i,s,o){var u=o("e163"),h=o("9112"),d=o("5135"),g=o("b622"),y=o("c430"),w=g("iterator"),_=!1,P=function(){return this},T,j,D;[].keys&&(D=[].keys(),"next"in D?(j=u(u(D)),j!==Object.prototype&&(T=j)):_=!0),T==null&&(T={}),!y&&!d(T,w)&&h(T,w,P),i.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:_}},b041:function(i,s,o){var u=o("00ee"),h=o("f5df");i.exports=u?{}.toString:function(){return"[object "+h(this)+"]"}},b0c0:function(i,s,o){var u=o("83ab"),h=o("9bf2").f,d=Function.prototype,g=d.toString,y=/^\s*function ([^ (]*)/,w="name";u&&!(w in d)&&h(d,w,{configurable:!0,get:function(){try{return g.call(this).match(y)[1]}catch{return""}}})},b622:function(i,s,o){var u=o("da84"),h=o("5692"),d=o("5135"),g=o("90e3"),y=o("4930"),w=o("fdbf"),_=h("wks"),P=u.Symbol,T=w?P:P&&P.withoutSetter||g;i.exports=function(j){return d(_,j)||(y&&d(P,j)?_[j]=P[j]:_[j]=T("Symbol."+j)),_[j]}},b64b:function(i,s,o){var u=o("23e7"),h=o("7b0b"),d=o("df75"),g=o("d039"),y=g(function(){d(1)});u({target:"Object",stat:!0,forced:y},{keys:function(_){return d(h(_))}})},b727:function(i,s,o){var u=o("0366"),h=o("44ad"),d=o("7b0b"),g=o("50c4"),y=o("65f0"),w=[].push,_=function(P){var T=P==1,j=P==2,D=P==3,U=P==4,K=P==6,X=P==5||K;return function(se,me,Le,H){for(var R=d(se),Z=h(R),z=u(me,Le,3),O=g(Z.length),k=0,I=H||y,W=T?I(se,O):j?I(se,0):void 0,V,G;O>k;k++)if((X||k in Z)&&(V=Z[k],G=z(V,k,R),P)){if(T)W[k]=G;else if(G)switch(P){case 3:return!0;case 5:return V;case 6:return k;case 2:w.call(W,V)}else if(U)return!1}return K?-1:D||U?U:W}};i.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(i,s,o){var u=o("861d");i.exports=function(h,d){if(!u(h))return h;var g,y;if(d&&typeof(g=h.toString)=="function"&&!u(y=g.call(h))||typeof(g=h.valueOf)=="function"&&!u(y=g.call(h))||!d&&typeof(g=h.toString)=="function"&&!u(y=g.call(h)))return y;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(u){return o.call(u).slice(8,-1)}},c6cd:function(i,s,o){var u=o("da84"),h=o("ce4e"),d="__core-js_shared__",g=u[d]||h(d,{});i.exports=g},c740:function(i,s,o){var u=o("23e7"),h=o("b727").findIndex,d=o("44d2"),g=o("ae40"),y="findIndex",w=!0,_=g(y);y in[]&&Array(1)[y](function(){w=!1}),u({target:"Array",proto:!0,forced:w||!_},{findIndex:function(T){return h(this,T,arguments.length>1?arguments[1]:void 0)}}),d(y)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var u=o("23e7"),h=o("4d64").indexOf,d=o("a640"),g=o("ae40"),y=[].indexOf,w=!!y&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),P=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:w||!_||!P},{indexOf:function(j){return w?y.apply(this,arguments)||0:h(this,j,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var u=o("5135"),h=o("fc6a"),d=o("4d64").indexOf,g=o("d012");i.exports=function(y,w){var _=h(y),P=0,T=[],j;for(j in _)!u(g,j)&&u(_,j)&&T.push(j);for(;w.length>P;)u(_,j=w[P++])&&(~d(T,j)||T.push(j));return T}},caad:function(i,s,o){var u=o("23e7"),h=o("4d64").includes,d=o("44d2"),g=o("ae40"),y=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!y},{includes:function(_){return h(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,s,o){var u=o("da84"),h=o("861d"),d=u.document,g=h(d)&&h(d.createElement);i.exports=function(y){return g?d.createElement(y):{}}},ce4e:function(i,s,o){var u=o("da84"),h=o("9112");i.exports=function(d,g){try{h(u,d,g)}catch{u[d]=g}return g}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var u=o("428f"),h=o("da84"),d=function(g){return typeof g=="function"?g:void 0};i.exports=function(g,y){return arguments.length<2?d(u[g])||d(h[g]):u[g]&&u[g][y]||h[g]&&h[g][y]}},d1e7:function(i,s,o){var u={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,d=h&&!u.call({1:2},1);s.f=d?function(y){var w=h(this,y);return!!w&&w.enumerable}:u},d28b:function(i,s,o){var u=o("746f");u("iterator")},d2bb:function(i,s,o){var u=o("825a"),h=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,g={},y;try{y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,y.call(g,[]),d=g instanceof Array}catch{}return function(_,P){return u(_),h(P),d?y.call(_,P):_.__proto__=P,_}}():void 0)},d3b7:function(i,s,o){var u=o("00ee"),h=o("6eeb"),d=o("b041");u||h(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,s,o){var u=o("9bf2").f,h=o("5135"),d=o("b622"),g=d("toStringTag");i.exports=function(y,w,_){y&&!h(y=_?y:y.prototype,g)&&u(y,g,{configurable:!0,value:w})}},d58f:function(i,s,o){var u=o("1c0b"),h=o("7b0b"),d=o("44ad"),g=o("50c4"),y=function(w){return function(_,P,T,j){u(P);var D=h(_),U=d(D),K=g(D.length),X=w?K-1:0,se=w?-1:1;if(T<2)for(;;){if(X in U){j=U[X],X+=se;break}if(X+=se,w?X<0:K<=X)throw TypeError("Reduce of empty array with no initial value")}for(;w?X>=0:K>X;X+=se)X in U&&(j=P(j,U[X],X,D));return j}};i.exports={left:y(!1),right:y(!0)}},d784:function(i,s,o){o("ac1f");var u=o("6eeb"),h=o("d039"),d=o("b622"),g=o("9263"),y=o("9112"),w=d("species"),_=!h(function(){var U=/./;return U.exec=function(){var K=[];return K.groups={a:"7"},K},"".replace(U,"$<a>")!=="7"}),P=function(){return"a".replace(/./,"$0")==="$0"}(),T=d("replace"),j=function(){return/./[T]?/./[T]("a","$0")==="":!1}(),D=!h(function(){var U=/(?:)/,K=U.exec;U.exec=function(){return K.apply(this,arguments)};var X="ab".split(U);return X.length!==2||X[0]!=="a"||X[1]!=="b"});i.exports=function(U,K,X,se){var me=d(U),Le=!h(function(){var k={};return k[me]=function(){return 7},""[U](k)!=7}),H=Le&&!h(function(){var k=!1,I=/a/;return U==="split"&&(I={},I.constructor={},I.constructor[w]=function(){return I},I.flags="",I[me]=/./[me]),I.exec=function(){return k=!0,null},I[me](""),!k});if(!Le||!H||U==="replace"&&!(_&&P&&!j)||U==="split"&&!D){var R=/./[me],Z=X(me,""[U],function(k,I,W,V,G){return I.exec===g?Le&&!G?{done:!0,value:R.call(I,W,V)}:{done:!0,value:k.call(W,I,V)}:{done:!1}},{REPLACE_KEEPS_$0:P,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:j}),z=Z[0],O=Z[1];u(String.prototype,U,z),u(RegExp.prototype,me,K==2?function(k,I){return O.call(k,this,I)}:function(k){return O.call(k,this)})}se&&y(RegExp.prototype[me],"sham",!0)}},d81d:function(i,s,o){var u=o("23e7"),h=o("b727").map,d=o("1dde"),g=o("ae40"),y=d("map"),w=g("map");u({target:"Array",proto:!0,forced:!y||!w},{map:function(P){return h(this,P,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(u){var h=function(d){return d&&d.Math==Math&&d};i.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof u=="object"&&u)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var u=o("23e7"),h=o("83ab"),d=o("56ef"),g=o("fc6a"),y=o("06cf"),w=o("8418");u({target:"Object",stat:!0,sham:!h},{getOwnPropertyDescriptors:function(P){for(var T=g(P),j=y.f,D=d(T),U={},K=0,X,se;D.length>K;)se=j(T,X=D[K++]),se!==void 0&&w(U,X,se);return U}})},dbf1:function(i,s,o){(function(u){o.d(s,"a",function(){return d});function h(){return typeof window<"u"?window.console:u.console}var d=h()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var u=o("da84"),h=o("fdbc"),d=o("e260"),g=o("9112"),y=o("b622"),w=y("iterator"),_=y("toStringTag"),P=d.values;for(var T in h){var j=u[T],D=j&&j.prototype;if(D){if(D[w]!==P)try{g(D,w,P)}catch{D[w]=P}if(D[_]||g(D,_,T),h[T]){for(var U in d)if(D[U]!==d[U])try{g(D,U,d[U])}catch{D[U]=d[U]}}}}},df75:function(i,s,o){var u=o("ca84"),h=o("7839");i.exports=Object.keys||function(g){return u(g,h)}},e01a:function(i,s,o){var u=o("23e7"),h=o("83ab"),d=o("da84"),g=o("5135"),y=o("861d"),w=o("9bf2").f,_=o("e893"),P=d.Symbol;if(h&&typeof P=="function"&&(!("description"in P.prototype)||P().description!==void 0)){var T={},j=function(){var me=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Le=this instanceof j?new P(me):me===void 0?P():P(me);return me===""&&(T[Le]=!0),Le};_(j,P);var D=j.prototype=P.prototype;D.constructor=j;var U=D.toString,K=String(P("test"))=="Symbol(test)",X=/^Symbol\((.*)\)[^)]+$/;w(D,"description",{configurable:!0,get:function(){var me=y(this)?this.valueOf():this,Le=U.call(me);if(g(T,me))return"";var H=K?Le.slice(7,-1):Le.replace(X,"$1");return H===""?void 0:H}}),u({global:!0,forced:!0},{Symbol:j})}},e163:function(i,s,o){var u=o("5135"),h=o("7b0b"),d=o("f772"),g=o("e177"),y=d("IE_PROTO"),w=Object.prototype;i.exports=g?Object.getPrototypeOf:function(_){return _=h(_),u(_,y)?_[y]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?w:null}},e177:function(i,s,o){var u=o("d039");i.exports=!u(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},e260:function(i,s,o){var u=o("fc6a"),h=o("44d2"),d=o("3f8c"),g=o("69f3"),y=o("7dd0"),w="Array Iterator",_=g.set,P=g.getterFor(w);i.exports=y(Array,"Array",function(T,j){_(this,{type:w,target:u(T),index:0,kind:j})},function(){var T=P(this),j=T.target,D=T.kind,U=T.index++;return!j||U>=j.length?(T.target=void 0,{value:void 0,done:!0}):D=="keys"?{value:U,done:!1}:D=="values"?{value:j[U],done:!1}:{value:[U,j[U]],done:!1}},"values"),d.Arguments=d.Array,h("keys"),h("values"),h("entries")},e439:function(i,s,o){var u=o("23e7"),h=o("d039"),d=o("fc6a"),g=o("06cf").f,y=o("83ab"),w=h(function(){g(1)}),_=!y||w;u({target:"Object",stat:!0,forced:_,sham:!y},{getOwnPropertyDescriptor:function(T,j){return g(d(T),j)}})},e538:function(i,s,o){var u=o("b622");s.f=u},e893:function(i,s,o){var u=o("5135"),h=o("56ef"),d=o("06cf"),g=o("9bf2");i.exports=function(y,w){for(var _=h(w),P=g.f,T=d.f,j=0;j<_.length;j++){var D=_[j];u(y,D)||P(y,D,T(w,D))}}},e8b5:function(i,s,o){var u=o("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,s,o){var u=o("b622"),h=o("3f8c"),d=u("iterator"),g=Array.prototype;i.exports=function(y){return y!==void 0&&(h.Array===y||g[d]===y)}},f5df:function(i,s,o){var u=o("00ee"),h=o("c6b6"),d=o("b622"),g=d("toStringTag"),y=h(function(){return arguments}())=="Arguments",w=function(_,P){try{return _[P]}catch{}};i.exports=u?h:function(_){var P,T,j;return _===void 0?"Undefined":_===null?"Null":typeof(T=w(P=Object(_),g))=="string"?T:y?h(P):(j=h(P))=="Object"&&typeof P.callee=="function"?"Arguments":j}},f772:function(i,s,o){var u=o("5692"),h=o("90e3"),d=u("keys");i.exports=function(g){return d[g]||(d[g]=h(g))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var u=window.document.currentScript;{var h=o("8875");u=h(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:h})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(o.p=d[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function g(et,ot,nt){return ot in et?Object.defineProperty(et,ot,{value:nt,enumerable:!0,configurable:!0,writable:!0}):et[ot]=nt,et}function y(et,ot){var nt=Object.keys(et);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(et);ot&&($t=$t.filter(function(en){return Object.getOwnPropertyDescriptor(et,en).enumerable})),nt.push.apply(nt,$t)}return nt}function w(et){for(var ot=1;ot<arguments.length;ot++){var nt=arguments[ot]!=null?arguments[ot]:{};ot%2?y(Object(nt),!0).forEach(function($t){g(et,$t,nt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(nt)):y(Object(nt)).forEach(function($t){Object.defineProperty(et,$t,Object.getOwnPropertyDescriptor(nt,$t))})}return et}function _(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function P(et,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var nt=[],$t=!0,en=!1,kn=void 0;try{for(var Ln=et[Symbol.iterator](),Tn;!($t=(Tn=Ln.next()).done)&&(nt.push(Tn.value),!(ot&&nt.length===ot));$t=!0);}catch(or){en=!0,kn=or}finally{try{!$t&&Ln.return!=null&&Ln.return()}finally{if(en)throw kn}}return nt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function T(et,ot){(ot==null||ot>et.length)&&(ot=et.length);for(var nt=0,$t=new Array(ot);nt<ot;nt++)$t[nt]=et[nt];return $t}function j(et,ot){if(et){if(typeof et=="string")return T(et,ot);var nt=Object.prototype.toString.call(et).slice(8,-1);if(nt==="Object"&&et.constructor&&(nt=et.constructor.name),nt==="Map"||nt==="Set")return Array.from(et);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return T(et,ot)}}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U(et,ot){return _(et)||P(et,ot)||j(et,ot)||D()}function K(et){if(Array.isArray(et))return T(et)}function X(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(et){return K(et)||X(et)||j(et)||se()}var Le=o("a352"),H=o.n(Le);function R(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function Z(et,ot,nt){var $t=nt===0?et.children[0]:et.children[nt-1].nextSibling;et.insertBefore(ot,$t)}var z=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function O(et){var ot=Object.create(null);return function($t){var en=ot[$t];return en||(ot[$t]=et($t))}}var k=/-(\w)/g,I=O(function(et){return et.replace(k,function(ot,nt){return nt.toUpperCase()})});o("5db7"),o("73d9");var W=["Start","Add","Remove","Update","End"],V=["Choose","Unchoose","Sort","Filter","Clone"],G=["Move"],ne=[G,W,V].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),_e={manage:G,manageAndEmit:W,emit:V};function ge(et){return ne.indexOf(et)!==-1}o("caad"),o("2ca0");var Ve=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function B(et){return Ve.includes(et)}function te(et){return["transition-group","TransitionGroup"].includes(et)}function ce(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function le(et){return et.reduce(function(ot,nt){var $t=U(nt,2),en=$t[0],kn=$t[1];return ot[en]=kn,ot},{})}function xe(et){var ot=et.$attrs,nt=et.componentData,$t=nt===void 0?{}:nt,en=le(Object.entries(ot).filter(function(kn){var Ln=U(kn,2),Tn=Ln[0];return Ln[1],ce(Tn)}));return w(w({},en),$t)}function he(et){var ot=et.$attrs,nt=et.callBackBuilder,$t=le(J(ot));Object.entries(nt).forEach(function(kn){var Ln=U(kn,2),Tn=Ln[0],or=Ln[1];_e[Tn].forEach(function(wn){$t["on".concat(wn)]=or(wn)})});var en="[data-draggable]".concat($t.draggable||"");return w(w({},$t),{},{draggable:en})}function J(et){return Object.entries(et).filter(function(ot){var nt=U(ot,2),$t=nt[0];return nt[1],!ce($t)}).map(function(ot){var nt=U(ot,2),$t=nt[0],en=nt[1];return[I($t),en]}).filter(function(ot){var nt=U(ot,2),$t=nt[0];return nt[1],!ge($t)})}o("c740");function ae(et,ot){if(!(et instanceof ot))throw new TypeError("Cannot call a class as a function")}function Fe(et,ot){for(var nt=0;nt<ot.length;nt++){var $t=ot[nt];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(et,$t.key,$t)}}function Me(et,ot,nt){return ot&&Fe(et.prototype,ot),et}var Ye=function(ot){var nt=ot.el;return nt},oe=function(ot,nt){return ot.__draggable_context=nt},fe=function(ot){return ot.__draggable_context},be=function(){function et(ot){var nt=ot.nodes,$t=nt.header,en=nt.default,kn=nt.footer,Ln=ot.root,Tn=ot.realList;ae(this,et),this.defaultNodes=en,this.children=[].concat(me($t),me(en),me(kn)),this.externalComponent=Ln.externalComponent,this.rootTransition=Ln.transition,this.tag=Ln.tag,this.realList=Tn}return Me(et,[{key:"render",value:function(nt,$t){var en=this.tag,kn=this.children,Ln=this._isRootComponent,Tn=Ln?{default:function(){return kn}}:kn;return nt(en,$t,Tn)}},{key:"updated",value:function(){var nt=this.defaultNodes,$t=this.realList;nt.forEach(function(en,kn){oe(Ye(en),{element:$t[kn],index:kn})})}},{key:"getUnderlyingVm",value:function(nt){return fe(nt)}},{key:"getVmIndexFromDomIndex",value:function(nt,$t){var en=this.defaultNodes,kn=en.length,Ln=$t.children,Tn=Ln.item(nt);if(Tn===null)return kn;var or=fe(Tn);if(or)return or.index;if(kn===0)return 0;var wn=Ye(en[0]),Rn=me(Ln).findIndex(function(lt){return lt===wn});return nt<Rn?0:kn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),de=o("8bbf");function Ue(et,ot){var nt=et[ot];return nt?nt():[]}function Xe(et){var ot=et.$slots,nt=et.realList,$t=et.getKey,en=nt||[],kn=["header","footer"].map(function(lt){return Ue(ot,lt)}),Ln=U(kn,2),Tn=Ln[0],or=Ln[1],wn=ot.item;if(!wn)throw new Error("draggable element must have an item slot");var Rn=en.flatMap(function(lt,We){return wn({element:lt,index:We}).map(function(qt){return qt.key=$t(lt),qt.props=w(w({},qt.props||{}),{},{"data-draggable":!0}),qt})});if(Rn.length!==en.length)throw new Error("Item slot must have only one child");return{header:Tn,footer:or,default:Rn}}function ze(et){var ot=te(et),nt=!B(et)&&!ot;return{transition:ot,externalComponent:nt,tag:nt?Object(de.resolveComponent)(et):ot?de.TransitionGroup:et}}function Je(et){var ot=et.$slots,nt=et.tag,$t=et.realList,en=et.getKey,kn=Xe({$slots:ot,realList:$t,getKey:en}),Ln=ze(nt);return new be({nodes:kn,root:Ln,realList:$t})}function Qe(et,ot){var nt=this;Object(de.nextTick)(function(){return nt.$emit(et.toLowerCase(),ot)})}function it(et){var ot=this;return function(nt,$t){if(ot.realList!==null)return ot["onDrag".concat(et)](nt,$t)}}function Mt(et){var ot=this,nt=it.call(this,et);return function($t,en){nt.call(ot,$t,en),Qe.call(ot,et,$t)}}var xt=null,Nt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Kt=["update:modelValue","change"].concat(me([].concat(me(_e.manageAndEmit),me(_e.emit)).map(function(et){return et.toLowerCase()}))),hn=Object(de.defineComponent)({name:"draggable",inheritAttrs:!1,props:Nt,emits:Kt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,nt=this.$attrs,$t=this.tag,en=this.componentData,kn=this.realList,Ln=this.getKey,Tn=Je({$slots:ot,tag:$t,realList:kn,getKey:Ln});this.componentStructure=Tn;var or=xe({$attrs:nt,componentData:en});return Tn.render(de.h,or)}catch(wn){return this.error=!0,Object(de.h)("pre",{style:{color:"red"}},wn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&z.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var nt=this.$attrs,$t=this.$el,en=this.componentStructure;en.updated();var kn=he({$attrs:nt,callBackBuilder:{manageAndEmit:function(or){return Mt.call(ot,or)},emit:function(or){return Qe.bind(ot,or)},manage:function(or){return it.call(ot,or)}}}),Ln=$t.nodeType===1?$t:$t.parentElement;this._sortable=new H.a(Ln,kn),this.targetDomElement=Ln,Ln.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(nt){return nt[ot]}}},watch:{$attrs:{handler:function(ot){var nt=this._sortable;nt&&J(ot).forEach(function($t){var en=U($t,2),kn=en[0],Ln=en[1];nt.option(kn,Ln)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var nt=this;Object(de.nextTick)(function(){return nt.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var nt=me(this.modelValue);ot(nt),this.$emit("update:modelValue",nt)},spliceList:function(){var ot=arguments,nt=function(en){return en.splice.apply(en,me(ot))};this.alterList(nt)},updatePosition:function(ot,nt){var $t=function(kn){return kn.splice(nt,0,kn.splice(ot,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(ot){var nt=ot.to,$t=ot.related,en=this.getUnderlyingPotencialDraggableComponent(nt);if(!en)return{component:en};var kn=en.realList,Ln={list:kn,component:en};if(nt!==$t&&kn){var Tn=en.getUnderlyingVm($t)||{};return w(w({},Tn),Ln)}return Ln},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),xt=ot.item},onDragAdd:function(ot){var nt=ot.item._underlying_vm_;if(nt!==void 0){R(ot.item);var $t=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList($t,0,nt);var en={element:nt,newIndex:$t};this.emitChanges({added:en})}},onDragRemove:function(ot){if(Z(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){R(ot.clone);return}var nt=this.context,$t=nt.index,en=nt.element;this.spliceList($t,1);var kn={element:en,oldIndex:$t};this.emitChanges({removed:kn})},onDragUpdate:function(ot){R(ot.item),Z(ot.from,ot.item,ot.oldIndex);var nt=this.context.index,$t=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(nt,$t);var en={element:this.context.element,oldIndex:nt,newIndex:$t};this.emitChanges({moved:en})},computeFutureIndex:function(ot,nt){if(!ot.element)return 0;var $t=me(nt.to.children).filter(function(Tn){return Tn.style.display!=="none"}),en=$t.indexOf(nt.related),kn=ot.component.getVmIndexFromDomIndex(en),Ln=$t.indexOf(xt)!==-1;return Ln||!nt.willInsertAfter?kn:kn+1},onDragMove:function(ot,nt){var $t=this.move,en=this.realList;if(!$t||!en)return!0;var kn=this.getRelatedContextFromMoveEvent(ot),Ln=this.computeFutureIndex(kn,ot),Tn=w(w({},this.context),{},{futureIndex:Ln}),or=w(w({},ot),{},{relatedContext:kn,draggedContext:Tn});return $t(or,nt)},onDragEnd:function(){xt=null}}}),mn=hn;s.default=mn},fb6a:function(i,s,o){var u=o("23e7"),h=o("861d"),d=o("e8b5"),g=o("23cb"),y=o("50c4"),w=o("fc6a"),_=o("8418"),P=o("b622"),T=o("1dde"),j=o("ae40"),D=T("slice"),U=j("slice",{ACCESSORS:!0,0:0,1:2}),K=P("species"),X=[].slice,se=Math.max;u({target:"Array",proto:!0,forced:!D||!U},{slice:function(Le,H){var R=w(this),Z=y(R.length),z=g(Le,Z),O=g(H===void 0?Z:H,Z),k,I,W;if(d(R)&&(k=R.constructor,typeof k=="function"&&(k===Array||d(k.prototype))?k=void 0:h(k)&&(k=k[K],k===null&&(k=void 0)),k===Array||k===void 0))return X.call(R,z,O);for(I=new(k===void 0?Array:k)(se(O-z,0)),W=0;z<O;z++,W++)z in R&&_(I,W,R[z]);return I.length=W,I}})},fc6a:function(i,s,o){var u=o("44ad"),h=o("1d80");i.exports=function(d){return u(h(d))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var u=o("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Fx);var B$=Fx.exports;const Qb=hy(B$),O$={class:"h-full bg-gray-50"},N$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},D$={class:"mt-6 bg-white shadow rounded-lg p-4"},I$={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},R$=["value"],F$={class:"flex items-end"},j$={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},z$={key:1,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},U$={key:2,class:"mt-6 overflow-x-auto pb-4"},$$={class:"w-80 flex-shrink-0"},V$={class:"bg-white rounded-lg shadow overflow-hidden"},H$={class:"flex items-center"},G$={class:"flex items-center space-x-2"},q$={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},W$=["onClick"],Z$=["data-column-id"],K$=["data-note-id"],Y$={class:"flex items-start justify-between mb-2 drag-handle cursor-move w-full"},X$={class:"flex items-center flex-grow min-w-0 mr-2"},J$=["title"],Q$={class:"flex space-x-0.5 sm:space-x-1 flex-shrink-0"},eV=["onClick"],tV=["onClick"],nV=["onClick"],rV=["title"],iV={key:0,class:"flex items-center space-x-2 mb-2"},oV={key:0,class:"flex items-center text-xs text-gray-500"},sV={key:1,class:"flex items-center text-xs text-gray-500"},aV={class:"flex justify-between items-center text-xs text-gray-400"},lV={class:"flex space-x-1"},uV=["title"],cV={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},hV={class:"flex items-center justify-center min-h-screen w-full"},fV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},dV={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},pV={key:2,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},mV={class:"flex items-center justify-center min-h-screen w-full"},gV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},vV={class:"p-4 md:p-6 flex-1 overflow-y-auto"},yV={class:"flex justify-between items-center mb-4 border-b pb-4"},_V={class:"mb-4"},bV={class:"mb-4"},wV={class:"mt-1 flex space-x-2"},xV=["onClick"],LV={class:"p-4 md:px-6 border-t bg-gray-50 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},SV=Jo({__name:"NotesView",setup(e){const t=Bp(),n=hc(),r=Op(),i=It(!0),s=It(!1),o=It(!1),u=It(!1),h=It(null),d=It(null),g=It(""),y=It("#6B7280"),w=It("info"),_=hr({get:()=>r.getSortedColumns,set:V=>{const G=V.map(ne=>ne.id);r.reorderColumns(G)}}),P=[{id:Lo.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Lo.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Lo.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Lo.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],T=mu({search:"",date:"",accessLevel:""}),j=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],D=hr(()=>{let V=r.getAccessibleNotes;if(T.search){const G=T.search.toLowerCase();V=V.filter(ne=>ne.title.toLowerCase().includes(G)||ne.description.toLowerCase().includes(G))}if(T.accessLevel&&(V=V.filter(G=>G.accessLevel===T.accessLevel)),T.date){const G=new Date;G.setHours(0,0,0,0);const ne=new Date(G);ne.setDate(G.getDate()-G.getDay());const _e=new Date(G.getFullYear(),G.getMonth(),1);V=V.filter(ge=>{const Ve=new Date(ge.createdAt);return T.date==="today"?Ve>=G:T.date==="week"?Ve>=ne:T.date==="month"?Ve>=_e:!0})}return V}),U=hr(()=>V=>D.value.filter(G=>G.columnId===V).sort((G,ne)=>G.order-ne.order));function K(V){return r.getAccessLevelLabel(V)}function X(V){switch(V){case Lo.PRIVATE:return"#9CA3AF";case Lo.COMPANY:return"#EF4444";case Lo.EMPLOYEE:return"#F59E0B";case Lo.VISITOR:return"#10B981";default:return"#6B7280"}}hr(()=>r.getSortedColumns),ma(async()=>{try{setTimeout(()=>{i.value=!1},500)}catch(V){console.error("Erreur lors du chargement des notes:",V),n.error("Erreur lors du chargement des notes"),i.value=!1}});function se(V){const G=new Date(V);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(G)}function me(){t.push({path:"/",query:{tool:"Note"}})}function Le(V){t.push({path:"/",query:{lat:V.location[0].toString(),lng:V.location[1].toString(),noteId:V.id.toString()}})}function H(V){d.value=JSON.parse(JSON.stringify(V)),w.value="info",o.value=!0}function R(V){o.value=!1}function Z(V){h.value=V,s.value=!0}function z(){h.value&&(r.removeNote(h.value.id),n.success("Note supprimée avec succès"),s.value=!1,h.value=null)}function O(){g.value.trim()&&(r.addColumn(g.value.trim(),y.value),n.success("Colonne ajoutée avec succès"),g.value="",y.value="#6B7280",u.value=!1)}function k(V){r.removeColumn(V),n.success("Colonne supprimée avec succès")}function I(){n.success("Ordre des colonnes mis à jour")}function W(V,G){console.log("Drag change event:",V);try{if(V.added){const{element:ne}=V.added;r.moveNote(ne.id,G);const ge=U.value(G).map(B=>B.id);r.reorderNotes(G,ge);const Ve=r.getColumnById(G);n.success(`Note déplacée vers ${(Ve==null?void 0:Ve.title)||"une autre colonne"}`)}if(V.moved){const _e=U.value(G).map(ge=>ge.id);r.reorderNotes(G,_e),n.success("Ordre des notes mis à jour")}V.removed}catch(ne){console.error("Erreur lors du drag and drop:",ne),n.error("Une erreur est survenue lors du déplacement de la note")}}return(V,G)=>{var ne,_e;return $e(),Ge(In,null,[M("div",O$,[M("div",N$,[M("div",{class:"sm:flex sm:items-center"},[G[10]||(G[10]=M("div",{class:"sm:flex-auto"},[M("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),M("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:me,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Créer une note ")])]),M("div",D$,[M("div",I$,[M("div",null,[G[11]||(G[11]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Hn(M("input",{type:"text",id:"search","onUpdate:modelValue":G[0]||(G[0]=ge=>T.search=ge),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ur,T.search]])]),M("div",null,[G[13]||(G[13]=M("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Hn(M("select",{id:"date","onUpdate:modelValue":G[1]||(G[1]=ge=>T.date=ge),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},G[12]||(G[12]=[M("option",{value:""},"Toutes les dates",-1),M("option",{value:"today"},"Aujourd'hui",-1),M("option",{value:"week"},"Cette semaine",-1),M("option",{value:"month"},"Ce mois",-1)]),512),[[Eo,T.date]])]),M("div",null,[G[15]||(G[15]=M("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Hn(M("select",{id:"accessLevel","onUpdate:modelValue":G[2]||(G[2]=ge=>T.accessLevel=ge),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[G[14]||(G[14]=M("option",{value:""},"Tous les niveaux",-1)),($e(),Ge(In,null,Sr(P,ge=>M("option",{key:ge.id,value:ge.id},Ht(ge.title),9,R$)),64))],512),[[Eo,T.accessLevel]])]),M("div",F$,[M("button",{onClick:G[3]||(G[3]=ge=>u.value=!0),class:"w-full inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},G[16]||(G[16]=[M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),ui(" Ajouter une colonne ")]))])])]),i.value?($e(),Ge("div",j$,G[17]||(G[17]=[M("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),M("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):D.value.length===0?($e(),Ge("div",z$,G[18]||(G[18]=[M("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):($e(),Ge("div",U$,[Kr(qn(Qb),{modelValue:_.value,"onUpdate:modelValue":G[4]||(G[4]=ge=>_.value=ge),class:"flex space-x-4 min-w-max","item-key":"id",handle:".column-drag-handle",onEnd:I,animation:150},{item:$l(({element:ge})=>[M("div",$$,[M("div",V$,[M("div",{class:"p-3 flex items-center justify-between column-drag-handle cursor-move no-select",style:el({backgroundColor:ge.color+"20",borderBottom:"2px solid "+ge.color})},[M("div",H$,[G[19]||(G[19]=M("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),M("h3",{class:"text-sm font-semibold",style:el({color:ge.color})},Ht(ge.title),5)]),M("div",G$,[M("span",q$,Ht(U.value(ge.id).length),1),ge.isDefault?pn("",!0):($e(),Ge("button",{key:0,onClick:Ve=>k(ge.id),class:"text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la colonne"},G[20]||(G[20]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,W$))])],4),M("div",{class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto","data-column-id":ge.id},[Kr(qn(Qb),{list:U.value(ge.id),class:"min-h-[100px] draggable-container",group:"notes","item-key":"id",animation:150,"ghost-class":"ghost-card","drag-class":"dragging","chosen-class":"chosen",handle:".drag-handle",onChange:Ve=>W(Ve,ge.id),"data-column-id":ge.id,"force-fallback":!0},X4({item:$l(({element:Ve})=>{var B,te,ce,le,xe;return[M("div",{class:"mb-2 p-3 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 no-select overflow-hidden","data-note-id":Ve.id},[M("div",Y$,[M("div",X$,[M("div",{class:"h-8 w-8 flex-shrink-0 rounded-full flex items-center justify-center mr-2",style:el({backgroundColor:Ve.style.fillColor+"40",color:Ve.style.color})},G[22]||(G[22]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),4),M("h4",{class:"text-sm font-medium text-gray-900 truncate min-w-0",title:Ve.title},Ht(Ve.title),9,J$)]),M("div",Q$,[M("button",{onClick:he=>Le(Ve),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Voir sur la carte"},G[23]||(G[23]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,eV),M("button",{onClick:he=>H(Ve),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Modifier"},G[24]||(G[24]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,tV),M("button",{onClick:he=>Z(Ve),class:"p-1.5 sm:p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Supprimer"},G[25]||(G[25]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,nV)])]),M("p",{class:"text-xs text-gray-500 mb-2 line-clamp-2",title:Ve.description},Ht(Ve.description),9,rV),(B=Ve.comments)!=null&&B.length||(te=Ve.photos)!=null&&te.length?($e(),Ge("div",iV,[(ce=Ve.comments)!=null&&ce.length?($e(),Ge("div",oV,[G[26]||(G[26]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)),ui(" "+Ht(Ve.comments.length),1)])):pn("",!0),(le=Ve.photos)!=null&&le.length?($e(),Ge("div",sV,[G[27]||(G[27]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),ui(" "+Ht(Ve.photos.length),1)])):pn("",!0)])):pn("",!0),M("div",aV,[M("span",null,Ht(se(Ve.createdAt)),1),M("div",lV,[M("span",{class:"px-2 py-1 rounded-full",style:el({backgroundColor:X(Ve.accessLevel)+"20",color:X(Ve.accessLevel)}),title:(xe=P.find(he=>he.id===Ve.accessLevel))==null?void 0:xe.description},Ht(K(Ve.accessLevel)),13,uV),M("span",{class:"px-2 py-1 rounded-full",style:el({backgroundColor:ge.color+"20",color:ge.color})},Ht(ge.title),5)])])],8,K$)]}),_:2},[U.value(ge.id).length===0?{name:"header",fn:$l(()=>[G[21]||(G[21]=M("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1))]),key:"0"}:void 0]),1032,["list","onChange","data-column-id"])],8,Z$)])])]),_:1},8,["modelValue"])]))])]),s.value?($e(),Ge("div",cV,[M("div",hV,[G[29]||(G[29]=M("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),M("div",fV,[G[28]||(G[28]=fh('<div class="p-4 md:p-6" data-v-ab8e1f24><div class="flex items-start" data-v-ab8e1f24><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-ab8e1f24><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-ab8e1f24><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-ab8e1f24></path></svg></div><div class="ml-4 flex-1" data-v-ab8e1f24><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-ab8e1f24> Supprimer la note </h3><div class="mt-2" data-v-ab8e1f24><p class="text-sm text-gray-500" data-v-ab8e1f24> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),M("div",dV,[M("button",{onClick:z,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),M("button",{onClick:G[5]||(G[5]=ge=>s.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):pn("",!0),o.value?($e(),ja(tx,{key:1,note:d.value,"is-new-note":!((ne=d.value)!=null&&ne.id),location:(_e=d.value)==null?void 0:_e.location,onClose:G[6]||(G[6]=ge=>o.value=!1),onSave:R},null,8,["note","is-new-note","location"])):pn("",!0),u.value?($e(),Ge("div",pV,[M("div",mV,[G[35]||(G[35]=M("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),M("div",gV,[M("form",{onSubmit:zc(O,["prevent"]),class:"h-full md:h-auto flex flex-col"},[M("div",vV,[M("div",yV,[G[31]||(G[31]=M("h3",{class:"text-xl font-semibold text-gray-900"},"Ajouter une nouvelle colonne",-1)),M("button",{type:"button",onClick:G[7]||(G[7]=ge=>u.value=!1),class:"text-gray-400 hover:text-gray-500"},G[30]||(G[30]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",_V,[G[32]||(G[32]=M("label",{for:"columnName",class:"block text-sm font-medium text-gray-700"},"Nom de la colonne",-1)),Hn(M("input",{type:"text",id:"columnName","onUpdate:modelValue":G[8]||(G[8]=ge=>g.value=ge),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ur,g.value]])]),M("div",bV,[G[33]||(G[33]=M("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),M("div",wV,[($e(),Ge(In,null,Sr(j,ge=>M("div",{key:ge,class:Ni(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":y.value!==ge,"border-black":y.value===ge}]),style:el({backgroundColor:ge}),onClick:Ve=>y.value=ge},null,14,xV)),64))])])]),M("div",LV,[G[34]||(G[34]=M("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Ajouter ",-1)),M("button",{onClick:G[9]||(G[9]=ge=>u.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])):pn("",!0)],64)}}}),EV=ng(SV,[["__scopeId","data-v-ab8e1f24"]]),Yx=u8({history:zT("/"),routes:[{path:"/",name:"home",component:Ub,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:WU,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:yz,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>qh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:_O,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>qh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>qh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:tO,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:EV,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Ub,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>qh(()=>import("./NotFoundView.js"),[])}]});Yx.beforeEach(async(e,t,n)=>{var u,h;const r=pa();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,s=(u=r.user)==null?void 0:u.must_change_password,o=(h=r.user)==null?void 0:h.user_type;if(e.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!s){n({name:"home"});return}if(e.meta.allowedRoles&&o&&!e.meta.allowedRoles.includes(o)){n({name:"home"});return}if(e.meta.requiresGuest&&i){n({name:"home"});return}n()});const xy=lm(OB),Xx=vM();xy.use(Xx);xy.use(Yx);const CV=pa(Xx);window.INITIAL_STATE&&CV.initialize(window.INITIAL_STATE);xy.mount("#app");export{Vi as _,mu as a,M as b,Ge as c,Jo as d,pn as e,qn as f,ui as g,Hn as h,$e as i,fh as j,Kr as k,$l as l,K4 as m,Ni as n,ma as o,qV as p,Bp as q,It as r,Ks as s,Ht as t,pa as u,Ur as v,zc as w,hy as x};

var FE=Object.defineProperty;var jE=(e,n,t)=>n in e?FE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Ht=(e,n,t)=>jE(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function P0(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const Ni={},Hh=[],du=()=>{},zE=()=>!1,Sp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),N1=e=>e.startsWith("onUpdate:"),uo=Object.assign,D1=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},$E=Object.prototype.hasOwnProperty,qi=(e,n)=>$E.call(e,n),er=Array.isArray,Gh=e=>ld(e)==="[object Map]",sh=e=>ld(e)==="[object Set]",N2=e=>ld(e)==="[object Date]",UE=e=>ld(e)==="[object RegExp]",kr=e=>typeof e=="function",_o=e=>typeof e=="string",$u=e=>typeof e=="symbol",Xi=e=>e!==null&&typeof e=="object",B1=e=>(Xi(e)||kr(e))&&kr(e.then)&&kr(e.catch),nw=Object.prototype.toString,ld=e=>nw.call(e),VE=e=>ld(e).slice(8,-1),M0=e=>ld(e)==="[object Object]",O1=e=>_o(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qh=P0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A0=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},HE=/-(\w)/g,ga=A0(e=>e.replace(HE,(n,t)=>t?t.toUpperCase():"")),GE=/\B([A-Z])/g,Cl=A0(e=>e.replace(GE,"-$1").toLowerCase()),Cp=A0(e=>e.charAt(0).toUpperCase()+e.slice(1)),Gd=A0(e=>e?`on${Cp(e)}`:""),tl=(e,n)=>!Object.is(e,n),Wh=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},rw=(e,n,t,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:t})},Kg=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Yg=e=>{const n=_o(e)?Number(e):NaN;return isNaN(n)?e:n};let D2;const k0=()=>D2||(D2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),qE="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",WE=P0(qE);function pu(e){if(er(e)){const n={};for(let t=0;t<e.length;t++){const r=e[t],i=_o(r)?JE(r):pu(r);if(i)for(const s in i)n[s]=i[s]}return n}else if(_o(e)||Xi(e))return e}const ZE=/;(?![^(]*\))/g,KE=/:([^]+)/,YE=/\/\*[^]*?\*\//g;function JE(e){const n={};return e.replace(YE,"").split(ZE).forEach(t=>{if(t){const r=t.split(KE);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function zi(e){let n="";if(_o(e))n=e;else if(er(e))for(let t=0;t<e.length;t++){const r=zi(e[t]);r&&(n+=r+" ")}else if(Xi(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}function XE(e){if(!e)return null;let{class:n,style:t}=e;return n&&!_o(n)&&(e.class=zi(n)),t&&(e.style=pu(t)),e}const QE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eP=P0(QE);function iw(e){return!!e||e===""}function tP(e,n){if(e.length!==n.length)return!1;let t=!0;for(let r=0;t&&r<e.length;r++)t=bf(e[r],n[r]);return t}function bf(e,n){if(e===n)return!0;let t=N2(e),r=N2(n);if(t||r)return t&&r?e.getTime()===n.getTime():!1;if(t=$u(e),r=$u(n),t||r)return e===n;if(t=er(e),r=er(n),t||r)return t&&r?tP(e,n):!1;if(t=Xi(e),r=Xi(n),t||r){if(!t||!r)return!1;const i=Object.keys(e).length,s=Object.keys(n).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),f=n.hasOwnProperty(o);if(u&&!f||!u&&f||!bf(e[o],n[o]))return!1}}return String(e)===String(n)}function T0(e,n){return e.findIndex(t=>bf(t,n))}const ow=e=>!!(e&&e.__v_isRef===!0),Zt=e=>_o(e)?e:e==null?"":er(e)||Xi(e)&&(e.toString===nw||!kr(e.toString))?ow(e)?Zt(e.value):JSON.stringify(e,sw,2):String(e),sw=(e,n)=>ow(n)?sw(e,n.value):Gh(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[r,i],s)=>(t[Im(r,s)+" =>"]=i,t),{})}:sh(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>Im(t))}:$u(n)?Im(n):Xi(n)&&!er(n)&&!M0(n)?String(n):n,Im=(e,n="")=>{var t;return $u(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let el;class I1{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=el,!n&&el&&(this.index=(el.scopes||(el.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=el;try{return el=this,n()}finally{el=t}}}on(){el=this}off(){el=this.parent}stop(n){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function R1(e){return new I1(e)}function F1(){return el}function aw(e,n=!1){el&&el.cleanups.push(e)}let vo;const Rm=new WeakSet;class up{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,el&&el.active&&el.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rm.has(this)&&(Rm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||uw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,B2(this),cw(this);const n=vo,t=zu;vo=this,zu=!0;try{return this.fn()}finally{fw(this),vo=n,zu=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)$1(n);this.deps=this.depsTail=void 0,B2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cv(this)&&this.run()}get dirty(){return Cv(this)}}let lw=0,qd,Wd;function uw(e,n=!1){if(e.flags|=8,n){e.next=Wd,Wd=e;return}e.next=qd,qd=e}function j1(){lw++}function z1(){if(--lw>0)return;if(Wd){let n=Wd;for(Wd=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;qd;){let n=qd;for(qd=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=t}}if(e)throw e}function cw(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function fw(e){let n,t=e.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),$1(r),nP(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=n,e.depsTail=t}function Cv(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(hw(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function hw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cp))return;e.globalVersion=cp;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!Cv(e)){e.flags&=-3;return}const t=vo,r=zu;vo=e,zu=!0;try{cw(e);const i=e.fn(e._value);(n.version===0||tl(i,e._value))&&(e._value=i,n.version++)}catch(i){throw n.version++,i}finally{vo=t,zu=r,fw(e),e.flags&=-3}}function $1(e,n=!1){const{dep:t,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),t.subs===e&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)$1(s,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function nP(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}function rP(e,n){e.effect instanceof up&&(e=e.effect.fn);const t=new up(e);n&&uo(t,n);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function iP(e){e.effect.stop()}let zu=!0;const dw=[];function Pf(){dw.push(zu),zu=!1}function Mf(){const e=dw.pop();zu=e===void 0?!0:e}function B2(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=vo;vo=void 0;try{n()}finally{vo=t}}}let cp=0;class oP{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class N0{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!vo||!zu||vo===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==vo)t=this.activeLink=new oP(vo,this),vo.deps?(t.prevDep=vo.depsTail,vo.depsTail.nextDep=t,vo.depsTail=t):vo.deps=vo.depsTail=t,pw(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=vo.depsTail,t.nextDep=void 0,vo.depsTail.nextDep=t,vo.depsTail=t,vo.deps===t&&(vo.deps=r)}return t}trigger(n){this.version++,cp++,this.notify(n)}notify(n){j1();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{z1()}}}function pw(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)pw(r)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const Jg=new WeakMap,Jf=Symbol(""),Ev=Symbol(""),fp=Symbol("");function Oa(e,n,t){if(zu&&vo){let r=Jg.get(e);r||Jg.set(e,r=new Map);let i=r.get(t);i||(r.set(t,i=new N0),i.map=r,i.key=t),i.track()}}function Rc(e,n,t,r,i,s){const o=Jg.get(e);if(!o){cp++;return}const u=f=>{f&&f.trigger()};if(j1(),n==="clear")o.forEach(u);else{const f=er(e),d=f&&O1(t);if(f&&t==="length"){const g=Number(r);o.forEach((y,x)=>{(x==="length"||x===fp||!$u(x)&&x>=g)&&u(y)})}else switch((t!==void 0||o.has(void 0))&&u(o.get(t)),d&&u(o.get(fp)),n){case"add":f?d&&u(o.get("length")):(u(o.get(Jf)),Gh(e)&&u(o.get(Ev)));break;case"delete":f||(u(o.get(Jf)),Gh(e)&&u(o.get(Ev)));break;case"set":Gh(e)&&u(o.get(Jf));break}}z1()}function sP(e,n){const t=Jg.get(e);return t&&t.get(n)}function Ch(e){const n=Ti(e);return n===e?n:(Oa(n,"iterate",fp),ql(e)?n:n.map(Ia))}function D0(e){return Oa(e=Ti(e),"iterate",fp),e}const aP={__proto__:null,[Symbol.iterator](){return Fm(this,Symbol.iterator,Ia)},concat(...e){return Ch(this).concat(...e.map(n=>er(n)?Ch(n):n))},entries(){return Fm(this,"entries",e=>(e[1]=Ia(e[1]),e))},every(e,n){return Nc(this,"every",e,n,void 0,arguments)},filter(e,n){return Nc(this,"filter",e,n,t=>t.map(Ia),arguments)},find(e,n){return Nc(this,"find",e,n,Ia,arguments)},findIndex(e,n){return Nc(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Nc(this,"findLast",e,n,Ia,arguments)},findLastIndex(e,n){return Nc(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Nc(this,"forEach",e,n,void 0,arguments)},includes(...e){return jm(this,"includes",e)},indexOf(...e){return jm(this,"indexOf",e)},join(e){return Ch(this).join(e)},lastIndexOf(...e){return jm(this,"lastIndexOf",e)},map(e,n){return Nc(this,"map",e,n,void 0,arguments)},pop(){return xd(this,"pop")},push(...e){return xd(this,"push",e)},reduce(e,...n){return O2(this,"reduce",e,n)},reduceRight(e,...n){return O2(this,"reduceRight",e,n)},shift(){return xd(this,"shift")},some(e,n){return Nc(this,"some",e,n,void 0,arguments)},splice(...e){return xd(this,"splice",e)},toReversed(){return Ch(this).toReversed()},toSorted(e){return Ch(this).toSorted(e)},toSpliced(...e){return Ch(this).toSpliced(...e)},unshift(...e){return xd(this,"unshift",e)},values(){return Fm(this,"values",Ia)}};function Fm(e,n,t){const r=D0(e),i=r[n]();return r!==e&&!ql(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const lP=Array.prototype;function Nc(e,n,t,r,i,s){const o=D0(e),u=o!==e&&!ql(e),f=o[n];if(f!==lP[n]){const y=f.apply(e,s);return u?Ia(y):y}let d=t;o!==e&&(u?d=function(y,x){return t.call(this,Ia(y),x,e)}:t.length>2&&(d=function(y,x){return t.call(this,y,x,e)}));const g=f.call(o,d,r);return u&&i?i(g):g}function O2(e,n,t,r){const i=D0(e);let s=t;return i!==e&&(ql(e)?t.length>3&&(s=function(o,u,f){return t.call(this,o,u,f,e)}):s=function(o,u,f){return t.call(this,o,Ia(u),f,e)}),i[n](s,...r)}function jm(e,n,t){const r=Ti(e);Oa(r,"iterate",fp);const i=r[n](...t);return(i===-1||i===!1)&&I0(t[0])?(t[0]=Ti(t[0]),r[n](...t)):i}function xd(e,n,t=[]){Pf(),j1();const r=Ti(e)[n].apply(e,t);return z1(),Mf(),r}const uP=P0("__proto__,__v_isRef,__isVue"),gw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($u));function cP(e){$u(e)||(e=String(e));const n=Ti(this);return Oa(n,"has",e),n.hasOwnProperty(e)}class mw{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,r){if(t==="__v_skip")return n.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?xw:ww:s?bw:_w).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const o=er(n);if(!i){let f;if(o&&(f=aP[t]))return f;if(t==="hasOwnProperty")return cP}const u=Reflect.get(n,t,Xo(n)?n:r);return($u(t)?gw.has(t):uP(t))||(i||Oa(n,"get",t),s)?u:Xo(u)?o&&O1(t)?u:u.value:Xi(u)?i?Ou(u):Kl(u):u}}class vw extends mw{constructor(n=!1){super(!1,n)}set(n,t,r,i){let s=n[t];if(!this._isShallow){const f=wf(s);if(!ql(r)&&!wf(r)&&(s=Ti(s),r=Ti(r)),!er(n)&&Xo(s)&&!Xo(r))return f?!1:(s.value=r,!0)}const o=er(n)&&O1(t)?Number(t)<n.length:qi(n,t),u=Reflect.set(n,t,r,Xo(n)?n:i);return n===Ti(i)&&(o?tl(r,s)&&Rc(n,"set",t,r):Rc(n,"add",t,r)),u}deleteProperty(n,t){const r=qi(n,t);n[t];const i=Reflect.deleteProperty(n,t);return i&&r&&Rc(n,"delete",t,void 0),i}has(n,t){const r=Reflect.has(n,t);return(!$u(t)||!gw.has(t))&&Oa(n,"has",t),r}ownKeys(n){return Oa(n,"iterate",er(n)?"length":Jf),Reflect.ownKeys(n)}}class yw extends mw{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const fP=new vw,hP=new yw,dP=new vw(!0),pP=new yw(!0),Pv=e=>e,og=e=>Reflect.getPrototypeOf(e);function gP(e,n,t){return function(...r){const i=this.__v_raw,s=Ti(i),o=Gh(s),u=e==="entries"||e===Symbol.iterator&&o,f=e==="keys"&&o,d=i[e](...r),g=t?Pv:n?Mv:Ia;return!n&&Oa(s,"iterate",f?Ev:Jf),{next(){const{value:y,done:x}=d.next();return x?{value:y,done:x}:{value:u?[g(y[0]),g(y[1])]:g(y),done:x}},[Symbol.iterator](){return this}}}}function sg(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function mP(e,n){const t={get(i){const s=this.__v_raw,o=Ti(s),u=Ti(i);e||(tl(i,u)&&Oa(o,"get",i),Oa(o,"get",u));const{has:f}=og(o),d=n?Pv:e?Mv:Ia;if(f.call(o,i))return d(s.get(i));if(f.call(o,u))return d(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Oa(Ti(i),"iterate",Jf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ti(s),u=Ti(i);return e||(tl(i,u)&&Oa(o,"has",i),Oa(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,f=Ti(u),d=n?Pv:e?Mv:Ia;return!e&&Oa(f,"iterate",Jf),u.forEach((g,y)=>i.call(s,d(g),d(y),o))}};return uo(t,e?{add:sg("add"),set:sg("set"),delete:sg("delete"),clear:sg("clear")}:{add(i){!n&&!ql(i)&&!wf(i)&&(i=Ti(i));const s=Ti(this);return og(s).has.call(s,i)||(s.add(i),Rc(s,"add",i,i)),this},set(i,s){!n&&!ql(s)&&!wf(s)&&(s=Ti(s));const o=Ti(this),{has:u,get:f}=og(o);let d=u.call(o,i);d||(i=Ti(i),d=u.call(o,i));const g=f.call(o,i);return o.set(i,s),d?tl(s,g)&&Rc(o,"set",i,s):Rc(o,"add",i,s),this},delete(i){const s=Ti(this),{has:o,get:u}=og(s);let f=o.call(s,i);f||(i=Ti(i),f=o.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return f&&Rc(s,"delete",i,void 0),d},clear(){const i=Ti(this),s=i.size!==0,o=i.clear();return s&&Rc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=gP(i,e,n)}),t}function B0(e,n){const t=mP(e,n);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(qi(t,i)&&i in r?t:r,i,s)}const vP={get:B0(!1,!1)},yP={get:B0(!1,!0)},_P={get:B0(!0,!1)},bP={get:B0(!0,!0)},_w=new WeakMap,bw=new WeakMap,ww=new WeakMap,xw=new WeakMap;function wP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xP(e){return e.__v_skip||!Object.isExtensible(e)?0:wP(VE(e))}function Kl(e){return wf(e)?e:O0(e,!1,fP,vP,_w)}function U1(e){return O0(e,!1,dP,yP,bw)}function Ou(e){return O0(e,!0,hP,_P,ww)}function LP(e){return O0(e,!0,pP,bP,xw)}function O0(e,n,t,r,i){if(!Xi(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=xP(e);if(o===0)return e;const u=new Proxy(e,o===2?r:t);return i.set(e,u),u}function hc(e){return wf(e)?hc(e.__v_raw):!!(e&&e.__v_isReactive)}function wf(e){return!!(e&&e.__v_isReadonly)}function ql(e){return!!(e&&e.__v_isShallow)}function I0(e){return e?!!e.__v_raw:!1}function Ti(e){const n=e&&e.__v_raw;return n?Ti(n):e}function R0(e){return!qi(e,"__v_skip")&&Object.isExtensible(e)&&rw(e,"__v_skip",!0),e}const Ia=e=>Xi(e)?Kl(e):e,Mv=e=>Xi(e)?Ou(e):e;function Xo(e){return e?e.__v_isRef===!0:!1}function Ft(e){return Lw(e,!1)}function V1(e){return Lw(e,!0)}function Lw(e,n){return Xo(e)?e:new SP(e,n)}class SP{constructor(n,t){this.dep=new N0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Ti(n),this._value=t?n:Ia(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,r=this.__v_isShallow||ql(n)||wf(n);n=r?n:Ti(n),tl(n,t)&&(this._rawValue=n,this._value=r?n:Ia(n),this.dep.trigger())}}function CP(e){e.dep&&e.dep.trigger()}function Wn(e){return Xo(e)?e.value:e}function EP(e){return kr(e)?e():Wn(e)}const PP={get:(e,n,t)=>n==="__v_raw"?e:Wn(Reflect.get(e,n,t)),set:(e,n,t,r)=>{const i=e[n];return Xo(i)&&!Xo(t)?(i.value=t,!0):Reflect.set(e,n,t,r)}};function H1(e){return hc(e)?e:new Proxy(e,PP)}class MP{constructor(n){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new N0,{get:r,set:i}=n(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(n){this._set(n)}}function Sw(e){return new MP(e)}function Cw(e){const n=er(e)?new Array(e.length):{};for(const t in e)n[t]=Ew(e,t);return n}class AP{constructor(n,t,r){this._object=n,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return sP(Ti(this._object),this._key)}}class kP{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function TP(e,n,t){return Xo(e)?e:kr(e)?new kP(e):Xi(e)&&arguments.length>1?Ew(e,n,t):Ft(e)}function Ew(e,n,t){const r=e[n];return Xo(r)?r:new AP(e,n,t)}class NP{constructor(n,t,r){this.fn=n,this.setter=t,this._value=void 0,this.dep=new N0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&vo!==this)return uw(this,!0),!0}get value(){const n=this.dep.track();return hw(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function DP(e,n,t=!1){let r,i;return kr(e)?r=e:(r=e.get,i=e.set),new NP(r,i,t)}const BP={GET:"get",HAS:"has",ITERATE:"iterate"},OP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},ag={},Xg=new WeakMap;let af;function IP(){return af}function Pw(e,n=!1,t=af){if(t){let r=Xg.get(t);r||Xg.set(t,r=[]),r.push(e)}}function RP(e,n,t=Ni){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:u,call:f}=t,d=X=>i?X:ql(X)||i===!1||i===0?Fc(X,1):Fc(X);let g,y,x,_,E=!1,T=!1;if(Xo(e)?(y=()=>e.value,E=ql(e)):hc(e)?(y=()=>d(e),E=!0):er(e)?(T=!0,E=e.some(X=>hc(X)||ql(X)),y=()=>e.map(X=>{if(Xo(X))return X.value;if(hc(X))return d(X);if(kr(X))return f?f(X,2):X()})):kr(e)?n?y=f?()=>f(e,2):e:y=()=>{if(x){Pf();try{x()}finally{Mf()}}const X=af;af=g;try{return f?f(e,3,[_]):e(_)}finally{af=X}}:y=du,n&&i){const X=y,ae=i===!0?1/0:i;y=()=>Fc(X(),ae)}const D=F1(),O=()=>{g.stop(),D&&D.active&&D1(D.effects,g)};if(s&&n){const X=n;n=(...ae)=>{X(...ae),O()}}let $=T?new Array(e.length).fill(ag):ag;const K=X=>{if(!(!(g.flags&1)||!g.dirty&&!X))if(n){const ae=g.run();if(i||E||(T?ae.some((ue,Le)=>tl(ue,$[Le])):tl(ae,$))){x&&x();const ue=af;af=g;try{const Le=[ae,$===ag?void 0:T&&$[0]===ag?[]:$,_];f?f(n,3,Le):n(...Le),$=ae}finally{af=ue}}}else g.run()};return u&&u(K),g=new up(y),g.scheduler=o?()=>o(K,!1):K,_=X=>Pw(X,!1,g),x=g.onStop=()=>{const X=Xg.get(g);if(X){if(f)f(X,4);else for(const ae of X)ae();Xg.delete(g)}},n?r?K(!0):$=g.run():o?o(K.bind(null,!0),!0):g.run(),O.pause=g.pause.bind(g),O.resume=g.resume.bind(g),O.stop=O,O}function Fc(e,n=1/0,t){if(n<=0||!Xi(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),n--,Xo(e))Fc(e.value,n,t);else if(er(e))for(let r=0;r<e.length;r++)Fc(e[r],n,t);else if(sh(e)||Gh(e))e.forEach(r=>{Fc(r,n,t)});else if(M0(e)){for(const r in e)Fc(e[r],n,t);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Fc(e[r],n,t)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Mw=[];function FP(e){Mw.push(e)}function jP(){Mw.pop()}function zP(e,n){}const $P={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},UP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ud(e,n,t,r){try{return r?e(...r):e()}catch(i){ah(i,n,t)}}function mu(e,n,t,r){if(kr(e)){const i=ud(e,n,t,r);return i&&B1(i)&&i.catch(s=>{ah(s,n,t)}),i}if(er(e)){const i=[];for(let s=0;s<e.length;s++)i.push(mu(e[s],n,t,r));return i}}function ah(e,n,t,r=!0){const i=n?n.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=n&&n.appContext.config||Ni;if(n){let u=n.parent;const f=n.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;u;){const g=u.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](e,f,d)===!1)return}u=u.parent}if(s){Pf(),ud(s,null,10,[e,f,d]),Mf();return}}VP(e,t,i,r,o)}function VP(e,n,t,r=!0,i=!1){if(i)throw e;console.error(e)}const nl=[];let oc=-1;const Zh=[];let lf=null,Bh=0;const Aw=Promise.resolve();let Qg=null;function Xs(e){const n=Qg||Aw;return e?n.then(this?e.bind(this):e):n}function HP(e){let n=oc+1,t=nl.length;for(;n<t;){const r=n+t>>>1,i=nl[r],s=dp(i);s<e||s===e&&i.flags&2?n=r+1:t=r}return n}function G1(e){if(!(e.flags&1)){const n=dp(e),t=nl[nl.length-1];!t||!(e.flags&2)&&n>=dp(t)?nl.push(e):nl.splice(HP(n),0,e),e.flags|=1,kw()}}function kw(){Qg||(Qg=Aw.then(Tw))}function hp(e){er(e)?Zh.push(...e):lf&&e.id===-1?lf.splice(Bh+1,0,e):e.flags&1||(Zh.push(e),e.flags|=1),kw()}function I2(e,n,t=oc+1){for(;t<nl.length;t++){const r=nl[t];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;nl.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function e0(e){if(Zh.length){const n=[...new Set(Zh)].sort((t,r)=>dp(t)-dp(r));if(Zh.length=0,lf){lf.push(...n);return}for(lf=n,Bh=0;Bh<lf.length;Bh++){const t=lf[Bh];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}lf=null,Bh=0}}const dp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Tw(e){try{for(oc=0;oc<nl.length;oc++){const n=nl[oc];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ud(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;oc<nl.length;oc++){const n=nl[oc];n&&(n.flags&=-2)}oc=-1,nl.length=0,e0(),Qg=null,(nl.length||Zh.length)&&Tw()}}let Oh,lg=[];function Nw(e,n){var t,r;Oh=e,Oh?(Oh.enabled=!0,lg.forEach(({event:i,args:s})=>Oh.emit(i,...s)),lg=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{Nw(s,n)}),setTimeout(()=>{Oh||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,lg=[])},3e3)):lg=[]}let zs=null,F0=null;function pp(e){const n=zs;return zs=e,F0=e&&e.type.__scopeId||null,n}function GP(e){F0=e}function qP(){F0=null}const WP=e=>Hl;function Hl(e,n=zs,t){if(!n||e._n)return e;const r=(...i)=>{r._d&&Iv(-1);const s=pp(n);let o;try{o=e(...i)}finally{pp(s),r._d&&Iv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function In(e,n){if(zs===null)return e;const t=Mp(zs),r=e.dirs||(e.dirs=[]);for(let i=0;i<n.length;i++){let[s,o,u,f=Ni]=n[i];s&&(kr(s)&&(s={mounted:s,updated:s}),s.deep&&Fc(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:u,modifiers:f}))}return e}function sc(e,n,t,r){const i=e.dirs,s=n&&n.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let f=u.dir[r];f&&(Pf(),mu(f,t,8,[e.el,u,e,n]),Mf())}}const Dw=Symbol("_vte"),Bw=e=>e.__isTeleport,Zd=e=>e&&(e.disabled||e.disabled===""),R2=e=>e&&(e.defer||e.defer===""),F2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,j2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Av=(e,n)=>{const t=e&&e.to;return _o(t)?n?n(t):null:t},Ow={name:"Teleport",__isTeleport:!0,process(e,n,t,r,i,s,o,u,f,d){const{mc:g,pc:y,pbc:x,o:{insert:_,querySelector:E,createText:T,createComment:D}}=d,O=Zd(n.props);let{shapeFlag:$,children:K,dynamicChildren:X}=n;if(e==null){const ae=n.el=T(""),ue=n.anchor=T("");_(ae,t,r),_(ue,t,r);const Le=(V,Y)=>{$&16&&(i&&i.isCE&&(i.ce._teleportTarget=V),g(K,V,Y,i,s,o,u,f))},W=()=>{const V=n.target=Av(n.props,E),Y=Iw(V,n,T,_);V&&(o!=="svg"&&F2(V)?o="svg":o!=="mathml"&&j2(V)&&(o="mathml"),O||(Le(V,Y),Ag(n,!1)))};O&&(Le(t,ue),Ag(n,!0)),R2(n.props)?Fs(()=>{W(),n.el.__isMounted=!0},s):W()}else{if(R2(n.props)&&!e.el.__isMounted){Fs(()=>{Ow.process(e,n,t,r,i,s,o,u,f,d),delete e.el.__isMounted},s);return}n.el=e.el,n.targetStart=e.targetStart;const ae=n.anchor=e.anchor,ue=n.target=e.target,Le=n.targetAnchor=e.targetAnchor,W=Zd(e.props),V=W?t:ue,Y=W?ae:Le;if(o==="svg"||F2(ue)?o="svg":(o==="mathml"||j2(ue))&&(o="mathml"),X?(x(e.dynamicChildren,X,V,i,s,o,u),ty(e,n,!0)):f||y(e,n,V,Y,i,s,o,u,!1),O)W?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):ug(n,t,ae,d,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const F=n.target=Av(n.props,E);F&&ug(n,F,null,d,0)}else W&&ug(n,ue,Le,d,1);Ag(n,O)}},remove(e,n,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:u,anchor:f,targetStart:d,targetAnchor:g,target:y,props:x}=e;if(y&&(i(d),i(g)),s&&i(f),o&16){const _=s||!Zd(x);for(let E=0;E<u.length;E++){const T=u[E];r(T,n,t,_,!!T.dynamicChildren)}}},move:ug,hydrate:ZP};function ug(e,n,t,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,n,t);const{el:o,anchor:u,shapeFlag:f,children:d,props:g}=e,y=s===2;if(y&&r(o,n,t),(!y||Zd(g))&&f&16)for(let x=0;x<d.length;x++)i(d[x],n,t,2);y&&r(u,n,t)}function ZP(e,n,t,r,i,s,{o:{nextSibling:o,parentNode:u,querySelector:f,insert:d,createText:g}},y){const x=n.target=Av(n.props,f);if(x){const _=Zd(n.props),E=x._lpa||x.firstChild;if(n.shapeFlag&16)if(_)n.anchor=y(o(e),n,u(e),t,r,i,s),n.targetStart=E,n.targetAnchor=E&&o(E);else{n.anchor=o(e);let T=E;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")n.targetStart=T;else if(T.data==="teleport anchor"){n.targetAnchor=T,x._lpa=n.targetAnchor&&o(n.targetAnchor);break}}T=o(T)}n.targetAnchor||Iw(x,n,g,d),y(E&&o(E),n,x,t,r,i,s)}Ag(n,_)}return n.anchor&&o(n.anchor)}const Mg=Ow;function Ag(e,n){const t=e.ctx;if(t&&t.ut){let r,i;for(n?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Iw(e,n,t,r){const i=n.targetStart=t(""),s=n.targetAnchor=t("");return i[Dw]=s,e&&(r(i,e),r(s,e)),s}const uf=Symbol("_leaveCb"),cg=Symbol("_enterCb");function q1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $s(()=>{e.isMounted=!0}),cd(()=>{e.isUnmounting=!0}),e}const su=[Function,Array],W1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:su,onEnter:su,onAfterEnter:su,onEnterCancelled:su,onBeforeLeave:su,onLeave:su,onAfterLeave:su,onLeaveCancelled:su,onBeforeAppear:su,onAppear:su,onAfterAppear:su,onAppearCancelled:su},Rw=e=>{const n=e.subTree;return n.component?Rw(n.component):n},KP={name:"BaseTransition",props:W1,setup(e,{slots:n}){const t=yu(),r=q1();return()=>{const i=n.default&&j0(n.default(),!0);if(!i||!i.length)return;const s=Fw(i),o=Ti(e),{mode:u}=o;if(r.isLeaving)return zm(s);const f=z2(s);if(!f)return zm(s);let d=ed(f,o,r,t,y=>d=y);f.type!==Ds&&$c(f,d);let g=t.subTree&&z2(t.subTree);if(g&&g.type!==Ds&&!Fu(f,g)&&Rw(t).type!==Ds){let y=ed(g,o,r,t);if($c(g,y),u==="out-in"&&f.type!==Ds)return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete y.afterLeave,g=void 0},zm(s);u==="in-out"&&f.type!==Ds?y.delayLeave=(x,_,E)=>{const T=zw(r,g);T[String(g.key)]=g,x[uf]=()=>{_(),x[uf]=void 0,delete d.delayedLeave,g=void 0},d.delayedLeave=()=>{E(),delete d.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return s}}};function Fw(e){let n=e[0];if(e.length>1){for(const t of e)if(t.type!==Ds){n=t;break}}return n}const jw=KP;function zw(e,n){const{leavingVNodes:t}=e;let r=t.get(n.type);return r||(r=Object.create(null),t.set(n.type,r)),r}function ed(e,n,t,r,i){const{appear:s,mode:o,persisted:u=!1,onBeforeEnter:f,onEnter:d,onAfterEnter:g,onEnterCancelled:y,onBeforeLeave:x,onLeave:_,onAfterLeave:E,onLeaveCancelled:T,onBeforeAppear:D,onAppear:O,onAfterAppear:$,onAppearCancelled:K}=n,X=String(e.key),ae=zw(t,e),ue=(V,Y)=>{V&&mu(V,r,9,Y)},Le=(V,Y)=>{const F=Y[1];ue(V,Y),er(V)?V.every(I=>I.length<=1)&&F():V.length<=1&&F()},W={mode:o,persisted:u,beforeEnter(V){let Y=f;if(!t.isMounted)if(s)Y=D||f;else return;V[uf]&&V[uf](!0);const F=ae[X];F&&Fu(e,F)&&F.el[uf]&&F.el[uf](),ue(Y,[V])},enter(V){let Y=d,F=g,I=y;if(!t.isMounted)if(s)Y=O||d,F=$||g,I=K||y;else return;let j=!1;const H=V[cg]=U=>{j||(j=!0,U?ue(I,[V]):ue(F,[V]),W.delayedLeave&&W.delayedLeave(),V[cg]=void 0)};Y?Le(Y,[V,H]):H()},leave(V,Y){const F=String(e.key);if(V[cg]&&V[cg](!0),t.isUnmounting)return Y();ue(x,[V]);let I=!1;const j=V[uf]=H=>{I||(I=!0,Y(),H?ue(T,[V]):ue(E,[V]),V[uf]=void 0,ae[F]===e&&delete ae[F])};ae[F]=e,_?Le(_,[V,j]):j()},clone(V){const Y=ed(V,n,t,r,i);return i&&i(Y),Y}};return W}function zm(e){if(Ep(e))return e=vc(e),e.children=null,e}function z2(e){if(!Ep(e))return Bw(e.type)&&e.children?Fw(e.children):e;const{shapeFlag:n,children:t}=e;if(t){if(n&16)return t[0];if(n&32&&kr(t.default))return t.default()}}function $c(e,n){e.shapeFlag&6&&e.component?(e.transition=n,$c(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function j0(e,n=!1,t){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const u=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Rn?(o.patchFlag&128&&i++,r=r.concat(j0(o.children,n,u))):(n||o.type!==Ds)&&r.push(u!=null?vc(o,{key:u}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function cs(e,n){return kr(e)?uo({name:e.name},n,{setup:e}):e}function YP(){const e=yu();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Z1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function JP(e){const n=yu(),t=V1(null);if(n){const i=n.refs===Ni?n.refs={}:n.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function gp(e,n,t,r,i=!1){if(er(e)){e.forEach((E,T)=>gp(E,n&&(er(n)?n[T]:n),t,r,i));return}if(vf(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&gp(e,n,t,r.component.subTree);return}const s=r.shapeFlag&4?Mp(r.component):r.el,o=i?null:s,{i:u,r:f}=e,d=n&&n.r,g=u.refs===Ni?u.refs={}:u.refs,y=u.setupState,x=Ti(y),_=y===Ni?()=>!1:E=>qi(x,E);if(d!=null&&d!==f&&(_o(d)?(g[d]=null,_(d)&&(y[d]=null)):Xo(d)&&(d.value=null)),kr(f))ud(f,u,12,[o,g]);else{const E=_o(f),T=Xo(f);if(E||T){const D=()=>{if(e.f){const O=E?_(f)?y[f]:g[f]:f.value;i?er(O)&&D1(O,s):er(O)?O.includes(s)||O.push(s):E?(g[f]=[s],_(f)&&(y[f]=g[f])):(f.value=[s],e.k&&(g[e.k]=f.value))}else E?(g[f]=o,_(f)&&(y[f]=o)):T&&(f.value=o,e.k&&(g[e.k]=o))};o?(D.id=-1,Fs(D,t)):D()}}}let $2=!1;const Eh=()=>{$2||(console.error("Hydration completed but contains mismatches."),$2=!0)},XP=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",QP=e=>e.namespaceURI.includes("MathML"),fg=e=>{if(e.nodeType===1){if(XP(e))return"svg";if(QP(e))return"mathml"}},$h=e=>e.nodeType===8;function eM(e){const{mt:n,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:u,insert:f,createComment:d}}=e,g=(K,X)=>{if(!X.hasChildNodes()){t(null,K,X),e0(),X._vnode=K;return}y(X.firstChild,K,null,null,null),e0(),X._vnode=K},y=(K,X,ae,ue,Le,W=!1)=>{W=W||!!X.dynamicChildren;const V=$h(K)&&K.data==="[",Y=()=>T(K,X,ae,ue,Le,V),{type:F,ref:I,shapeFlag:j,patchFlag:H}=X;let U=K.nodeType;X.el=K,H===-2&&(W=!1,X.dynamicChildren=null);let R=null;switch(F){case yf:U!==3?X.children===""?(f(X.el=i(""),o(K),K),R=K):R=Y():(K.data!==X.children&&(Eh(),K.data=X.children),R=s(K));break;case Ds:$(K)?(R=s(K),O(X.el=K.content.firstChild,K,ae)):U!==8||V?R=Y():R=s(K);break;case Qf:if(V&&(K=s(K),U=K.nodeType),U===1||U===3){R=K;const te=!X.children.length;for(let re=0;re<X.staticCount;re++)te&&(X.children+=R.nodeType===1?R.outerHTML:R.data),re===X.staticCount-1&&(X.anchor=R),R=s(R);return V?s(R):R}else Y();break;case Rn:V?R=E(K,X,ae,ue,Le,W):R=Y();break;default:if(j&1)(U!==1||X.type.toLowerCase()!==K.tagName.toLowerCase())&&!$(K)?R=Y():R=x(K,X,ae,ue,Le,W);else if(j&6){X.slotScopeIds=Le;const te=o(K);if(V?R=D(K):$h(K)&&K.data==="teleport start"?R=D(K,K.data,"teleport end"):R=s(K),n(X,te,null,ae,ue,fg(te),W),vf(X)&&!X.type.__asyncResolved){let re;V?(re=fi(Rn),re.anchor=R?R.previousSibling:te.lastChild):re=K.nodeType===3?Ei(""):fi("div"),re.el=K,X.component.subTree=re}}else j&64?U!==8?R=Y():R=X.type.hydrate(K,X,ae,ue,Le,W,e,_):j&128&&(R=X.type.hydrate(K,X,ae,ue,fg(o(K)),Le,W,e,y))}return I!=null&&gp(I,null,ue,X),R},x=(K,X,ae,ue,Le,W)=>{W=W||!!X.dynamicChildren;const{type:V,props:Y,patchFlag:F,shapeFlag:I,dirs:j,transition:H}=X,U=V==="input"||V==="option";if(U||F!==-1){j&&sc(X,null,ae,"created");let R=!1;if($(K)){R=p4(null,H)&&ae&&ae.vnode.props&&ae.vnode.props.appear;const re=K.content.firstChild;R&&H.beforeEnter(re),O(re,K,ae),X.el=K=re}if(I&16&&!(Y&&(Y.innerHTML||Y.textContent))){let re=_(K.firstChild,X,K,ae,ue,Le,W);for(;re;){hg(K,1)||Eh();const me=re;re=re.nextSibling,u(me)}}else if(I&8){let re=X.children;re[0]===`
`&&(K.tagName==="PRE"||K.tagName==="TEXTAREA")&&(re=re.slice(1)),K.textContent!==re&&(hg(K,0)||Eh(),K.textContent=X.children)}if(Y){if(U||!W||F&48){const re=K.tagName.includes("-");for(const me in Y)(U&&(me.endsWith("value")||me==="indeterminate")||Sp(me)&&!qh(me)||me[0]==="."||re)&&r(K,me,null,Y[me],void 0,ae)}else if(Y.onClick)r(K,"onClick",null,Y.onClick,void 0,ae);else if(F&4&&hc(Y.style))for(const re in Y.style)Y.style[re]}let te;(te=Y&&Y.onVnodeBeforeMount)&&wl(te,ae,X),j&&sc(X,null,ae,"beforeMount"),((te=Y&&Y.onVnodeMounted)||j||R)&&L4(()=>{te&&wl(te,ae,X),R&&H.enter(K),j&&sc(X,null,ae,"mounted")},ue)}return K.nextSibling},_=(K,X,ae,ue,Le,W,V)=>{V=V||!!X.dynamicChildren;const Y=X.children,F=Y.length;for(let I=0;I<F;I++){const j=V?Y[I]:Y[I]=Sl(Y[I]),H=j.type===yf;K?(H&&!V&&I+1<F&&Sl(Y[I+1]).type===yf&&(f(i(K.data.slice(j.children.length)),ae,s(K)),K.data=j.children),K=y(K,j,ue,Le,W,V)):H&&!j.children?f(j.el=i(""),ae):(hg(ae,1)||Eh(),t(null,j,ae,null,ue,Le,fg(ae),W))}return K},E=(K,X,ae,ue,Le,W)=>{const{slotScopeIds:V}=X;V&&(Le=Le?Le.concat(V):V);const Y=o(K),F=_(s(K),X,Y,ae,ue,Le,W);return F&&$h(F)&&F.data==="]"?s(X.anchor=F):(Eh(),f(X.anchor=d("]"),Y,F),F)},T=(K,X,ae,ue,Le,W)=>{if(hg(K.parentElement,1)||Eh(),X.el=null,W){const F=D(K);for(;;){const I=s(K);if(I&&I!==F)u(I);else break}}const V=s(K),Y=o(K);return u(K),t(null,X,Y,V,ae,ue,fg(Y),Le),ae&&(ae.vnode.el=X.el,V0(ae,X.el)),V},D=(K,X="[",ae="]")=>{let ue=0;for(;K;)if(K=s(K),K&&$h(K)&&(K.data===X&&ue++,K.data===ae)){if(ue===0)return s(K);ue--}return K},O=(K,X,ae)=>{const ue=X.parentNode;ue&&ue.replaceChild(K,X);let Le=ae;for(;Le;)Le.vnode.el===X&&(Le.vnode.el=Le.subTree.el=K),Le=Le.parent},$=K=>K.nodeType===1&&K.tagName==="TEMPLATE";return[g,y]}const U2="data-allow-mismatch",tM={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function hg(e,n){if(n===0||n===1)for(;e&&!e.hasAttribute(U2);)e=e.parentElement;const t=e&&e.getAttribute(U2);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return n===0&&r.includes("children")?!0:t.split(",").includes(tM[n])}}const nM=k0().requestIdleCallback||(e=>setTimeout(e,1)),rM=k0().cancelIdleCallback||(e=>clearTimeout(e)),iM=(e=1e4)=>n=>{const t=nM(n,{timeout:e});return()=>rM(t)};function oM(e){const{top:n,left:t,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(n>0&&n<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const sM=e=>(n,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),n();break}},e);return t(i=>{if(i instanceof Element){if(oM(i))return n(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},aM=e=>n=>{if(e){const t=matchMedia(e);if(t.matches)n();else return t.addEventListener("change",n,{once:!0}),()=>t.removeEventListener("change",n)}},lM=(e=[])=>(n,t)=>{_o(e)&&(e=[e]);let r=!1;const i=o=>{r||(r=!0,s(),n(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const u of e)o.removeEventListener(u,i)})};return t(o=>{for(const u of e)o.addEventListener(u,i,{once:!0})}),s};function uM(e,n){if($h(e)&&e.data==="["){let t=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(n(r)===!1)break}else if($h(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else n(e)}const vf=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function cM(e){kr(e)&&(e={loader:e});const{loader:n,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:u=!0,onError:f}=e;let d=null,g,y=0;const x=()=>(y++,d=null,_()),_=()=>{let E;return d||(E=d=n().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),f)return new Promise((D,O)=>{f(T,()=>D(x()),()=>O(T),y+1)});throw T}).then(T=>E!==d&&d?d:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),g=T,T)))};return cs({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(E,T,D){const O=s?()=>{const $=s(D,K=>uM(E,K));$&&(T.bum||(T.bum=[])).push($)}:D;g?O():_().then(()=>!T.isUnmounted&&O())},get __asyncResolved(){return g},setup(){const E=js;if(Z1(E),g)return()=>$m(g,E);const T=K=>{d=null,ah(K,E,13,!r)};if(u&&E.suspense||td)return _().then(K=>()=>$m(K,E)).catch(K=>(T(K),()=>r?fi(r,{error:K}):null));const D=Ft(!1),O=Ft(),$=Ft(!!i);return i&&setTimeout(()=>{$.value=!1},i),o!=null&&setTimeout(()=>{if(!D.value&&!O.value){const K=new Error(`Async component timed out after ${o}ms.`);T(K),O.value=K}},o),_().then(()=>{D.value=!0,E.parent&&Ep(E.parent.vnode)&&E.parent.update()}).catch(K=>{T(K),O.value=K}),()=>{if(D.value&&g)return $m(g,E);if(O.value&&r)return fi(r,{error:O.value});if(t&&!$.value)return fi(t)}}})}function $m(e,n){const{ref:t,props:r,children:i,ce:s}=n.vnode,o=fi(e,r,i);return o.ref=t,o.ce=s,delete n.vnode.ce,o}const Ep=e=>e.type.__isKeepAlive,fM={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:n}){const t=yu(),r=t.ctx;if(!r.renderer)return()=>{const $=n.default&&n.default();return $&&$.length===1?$[0]:$};const i=new Map,s=new Set;let o=null;const u=t.suspense,{renderer:{p:f,m:d,um:g,o:{createElement:y}}}=r,x=y("div");r.activate=($,K,X,ae,ue)=>{const Le=$.component;d($,K,X,0,u),f(Le.vnode,$,K,X,Le,u,ae,$.slotScopeIds,ue),Fs(()=>{Le.isDeactivated=!1,Le.a&&Wh(Le.a);const W=$.props&&$.props.onVnodeMounted;W&&wl(W,Le.parent,$)},u)},r.deactivate=$=>{const K=$.component;n0(K.m),n0(K.a),d($,x,null,1,u),Fs(()=>{K.da&&Wh(K.da);const X=$.props&&$.props.onVnodeUnmounted;X&&wl(X,K.parent,$),K.isDeactivated=!0},u)};function _($){Um($),g($,t,u,!0)}function E($){i.forEach((K,X)=>{const ae=$v(K.type);ae&&!$(ae)&&T(X)})}function T($){const K=i.get($);K&&(!o||!Fu(K,o))?_(K):o&&Um(o),i.delete($),s.delete($)}Co(()=>[e.include,e.exclude],([$,K])=>{$&&E(X=>Od($,X)),K&&E(X=>!Od(K,X))},{flush:"post",deep:!0});let D=null;const O=()=>{D!=null&&(r0(t.subTree.type)?Fs(()=>{i.set(D,dg(t.subTree))},t.subTree.suspense):i.set(D,dg(t.subTree)))};return $s(O),$0(O),cd(()=>{i.forEach($=>{const{subTree:K,suspense:X}=t,ae=dg(K);if($.type===ae.type&&$.key===ae.key){Um(ae);const ue=ae.component.da;ue&&Fs(ue,X);return}_($)})}),()=>{if(D=null,!n.default)return o=null;const $=n.default(),K=$[0];if($.length>1)return o=null,$;if(!Uc(K)||!(K.shapeFlag&4)&&!(K.shapeFlag&128))return o=null,K;let X=dg(K);if(X.type===Ds)return o=null,X;const ae=X.type,ue=$v(vf(X)?X.type.__asyncResolved||{}:ae),{include:Le,exclude:W,max:V}=e;if(Le&&(!ue||!Od(Le,ue))||W&&ue&&Od(W,ue))return X.shapeFlag&=-257,o=X,K;const Y=X.key==null?ae:X.key,F=i.get(Y);return X.el&&(X=vc(X),K.shapeFlag&128&&(K.ssContent=X)),D=Y,F?(X.el=F.el,X.component=F.component,X.transition&&$c(X,X.transition),X.shapeFlag|=512,s.delete(Y),s.add(Y)):(s.add(Y),V&&s.size>parseInt(V,10)&&T(s.values().next().value)),X.shapeFlag|=256,o=X,r0(K.type)?K:X}}},hM=fM;function Od(e,n){return er(e)?e.some(t=>Od(t,n)):_o(e)?e.split(",").includes(n):UE(e)?(e.lastIndex=0,e.test(n)):!1}function $w(e,n){Vw(e,"a",n)}function Uw(e,n){Vw(e,"da",n)}function Vw(e,n,t=js){const r=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(z0(n,r,t),t){let i=t.parent;for(;i&&i.parent;)Ep(i.parent.vnode)&&dM(r,n,t,i),i=i.parent}}function dM(e,n,t,r){const i=z0(n,e,r,!0);mc(()=>{D1(r[n],i)},t)}function Um(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function dg(e){return e.shapeFlag&128?e.ssContent:e}function z0(e,n,t=js,r=!1){if(t){const i=t[e]||(t[e]=[]),s=n.__weh||(n.__weh=(...o)=>{Pf();const u=ih(t),f=mu(n,t,e,o);return u(),Mf(),f});return r?i.unshift(s):i.push(s),s}}const Hc=e=>(n,t=js)=>{(!td||e==="sp")&&z0(e,(...r)=>n(...r),t)},Hw=Hc("bm"),$s=Hc("m"),K1=Hc("bu"),$0=Hc("u"),cd=Hc("bum"),mc=Hc("um"),Gw=Hc("sp"),qw=Hc("rtg"),Ww=Hc("rtc");function Zw(e,n=js){z0("ec",e,n)}const Y1="components",pM="directives";function Kw(e,n){return J1(Y1,e,!0,n)||e}const Yw=Symbol.for("v-ndc");function gM(e){return _o(e)?J1(Y1,e,!1)||e:e||Yw}function mM(e){return J1(pM,e)}function J1(e,n,t=!0,r=!1){const i=zs||js;if(i){const s=i.type;if(e===Y1){const u=$v(s,!1);if(u&&(u===n||u===ga(n)||u===Cp(ga(n))))return s}const o=V2(i[e]||s[e],n)||V2(i.appContext[e],n);return!o&&r?s:o}}function V2(e,n){return e&&(e[n]||e[ga(n)]||e[Cp(ga(n))])}function Rr(e,n,t,r){let i;const s=t&&t[r],o=er(e);if(o||_o(e)){const u=o&&hc(e);let f=!1;u&&(f=!ql(e),e=D0(e)),i=new Array(e.length);for(let d=0,g=e.length;d<g;d++)i[d]=n(f?Ia(e[d]):e[d],d,void 0,s&&s[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=n(u+1,u,void 0,s&&s[u])}else if(Xi(e))if(e[Symbol.iterator])i=Array.from(e,(u,f)=>n(u,f,void 0,s&&s[f]));else{const u=Object.keys(e);i=new Array(u.length);for(let f=0,d=u.length;f<d;f++){const g=u[f];i[f]=n(e[g],g,f,s&&s[f])}}else i=[];return t&&(t[r]=i),i}function Jw(e,n){for(let t=0;t<n.length;t++){const r=n[t];if(er(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function vM(e,n,t={},r,i){if(zs.ce||zs.parent&&vf(zs.parent)&&zs.parent.ce)return n!=="default"&&(t.name=n),$e(),$a(Rn,null,[fi("slot",t,r&&r())],64);let s=e[n];s&&s._c&&(s._d=!1),$e();const o=s&&X1(s(t)),u=t.key||o&&o.key,f=$a(Rn,{key:(u&&!$u(u)?u:`_${n}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!i&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),s&&s._c&&(s._d=!0),f}function X1(e){return e.some(n=>Uc(n)?!(n.type===Ds||n.type===Rn&&!X1(n.children)):!0)?e:null}function yM(e,n){const t={};for(const r in e)t[n&&/[A-Z]/.test(r)?`on:${r}`:Gd(r)]=e[r];return t}const kv=e=>e?k4(e)?Mp(e):kv(e.parent):null,Kd=uo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>kv(e.parent),$root:e=>kv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Q1(e),$forceUpdate:e=>e.f||(e.f=()=>{G1(e.update)}),$nextTick:e=>e.n||(e.n=Xs.bind(e.proxy)),$watch:e=>ZM.bind(e)}),Vm=(e,n)=>e!==Ni&&!e.__isScriptSetup&&qi(e,n),Tv={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:u,appContext:f}=e;let d;if(n[0]!=="$"){const _=o[n];if(_!==void 0)switch(_){case 1:return r[n];case 2:return i[n];case 4:return t[n];case 3:return s[n]}else{if(Vm(r,n))return o[n]=1,r[n];if(i!==Ni&&qi(i,n))return o[n]=2,i[n];if((d=e.propsOptions[0])&&qi(d,n))return o[n]=3,s[n];if(t!==Ni&&qi(t,n))return o[n]=4,t[n];Nv&&(o[n]=0)}}const g=Kd[n];let y,x;if(g)return n==="$attrs"&&Oa(e.attrs,"get",""),g(e);if((y=u.__cssModules)&&(y=y[n]))return y;if(t!==Ni&&qi(t,n))return o[n]=4,t[n];if(x=f.config.globalProperties,qi(x,n))return x[n]},set({_:e},n,t){const{data:r,setupState:i,ctx:s}=e;return Vm(i,n)?(i[n]=t,!0):r!==Ni&&qi(r,n)?(r[n]=t,!0):qi(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(s[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let u;return!!t[o]||e!==Ni&&qi(e,o)||Vm(n,o)||(u=s[0])&&qi(u,o)||qi(r,o)||qi(Kd,o)||qi(i.config.globalProperties,o)},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:qi(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}},_M=uo({},Tv,{get(e,n){if(n!==Symbol.unscopables)return Tv.get(e,n,e)},has(e,n){return n[0]!=="_"&&!WE(n)}});function bM(){return null}function wM(){return null}function xM(e){}function LM(e){}function SM(){return null}function CM(){}function EM(e,n){return null}function PM(){return Xw().slots}function MM(){return Xw().attrs}function Xw(){const e=yu();return e.setupContext||(e.setupContext=D4(e))}function mp(e){return er(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}function AM(e,n){const t=mp(e);for(const r in n){if(r.startsWith("__skip"))continue;let i=t[r];i?er(i)||kr(i)?i=t[r]={type:i,default:n[r]}:i.default=n[r]:i===null&&(i=t[r]={default:n[r]}),i&&n[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function kM(e,n){return!e||!n?e||n:er(e)&&er(n)?e.concat(n):uo({},mp(e),mp(n))}function TM(e,n){const t={};for(const r in e)n.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>e[r]});return t}function NM(e){const n=yu();let t=e();return Fv(),B1(t)&&(t=t.catch(r=>{throw ih(n),r})),[t,()=>ih(n)]}let Nv=!0;function DM(e){const n=Q1(e),t=e.proxy,r=e.ctx;Nv=!1,n.beforeCreate&&H2(n.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:f,inject:d,created:g,beforeMount:y,mounted:x,beforeUpdate:_,updated:E,activated:T,deactivated:D,beforeDestroy:O,beforeUnmount:$,destroyed:K,unmounted:X,render:ae,renderTracked:ue,renderTriggered:Le,errorCaptured:W,serverPrefetch:V,expose:Y,inheritAttrs:F,components:I,directives:j,filters:H}=n;if(d&&BM(d,r,null),o)for(const te in o){const re=o[te];kr(re)&&(r[te]=re.bind(t))}if(i){const te=i.call(t,t);Xi(te)&&(e.data=Kl(te))}if(Nv=!0,s)for(const te in s){const re=s[te],me=kr(re)?re.bind(t,t):kr(re.get)?re.get.bind(t,t):du,xe=!kr(re)&&kr(re.set)?re.set.bind(t):du,We=gr({get:me,set:xe});Object.defineProperty(r,te,{enumerable:!0,configurable:!0,get:()=>We.value,set:N=>We.value=N})}if(u)for(const te in u)Qw(u[te],r,t,te);if(f){const te=kr(f)?f.call(t):f;Reflect.ownKeys(te).forEach(re=>{Yd(re,te[re])})}g&&H2(g,e,"c");function R(te,re){er(re)?re.forEach(me=>te(me.bind(t))):re&&te(re.bind(t))}if(R(Hw,y),R($s,x),R(K1,_),R($0,E),R($w,T),R(Uw,D),R(Zw,W),R(Ww,ue),R(qw,Le),R(cd,$),R(mc,X),R(Gw,V),er(Y))if(Y.length){const te=e.exposed||(e.exposed={});Y.forEach(re=>{Object.defineProperty(te,re,{get:()=>t[re],set:me=>t[re]=me})})}else e.exposed||(e.exposed={});ae&&e.render===du&&(e.render=ae),F!=null&&(e.inheritAttrs=F),I&&(e.components=I),j&&(e.directives=j),V&&Z1(e)}function BM(e,n,t=du){er(e)&&(e=Dv(e));for(const r in e){const i=e[r];let s;Xi(i)?"default"in i?s=Wl(i.from||r,i.default,!0):s=Wl(i.from||r):s=Wl(i),Xo(s)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):n[r]=s}}function H2(e,n,t){mu(er(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,t)}function Qw(e,n,t,r){let i=r.includes(".")?_4(t,r):()=>t[r];if(_o(e)){const s=n[e];kr(s)&&Co(i,s)}else if(kr(e))Co(i,e.bind(t));else if(Xi(e))if(er(e))e.forEach(s=>Qw(s,n,t,r));else{const s=kr(e.handler)?e.handler.bind(t):n[e.handler];kr(s)&&Co(i,s,e)}}function Q1(e){const n=e.type,{mixins:t,extends:r}=n,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(n);let f;return u?f=u:!i.length&&!t&&!r?f=n:(f={},i.length&&i.forEach(d=>t0(f,d,o,!0)),t0(f,n,o)),Xi(n)&&s.set(n,f),f}function t0(e,n,t,r=!1){const{mixins:i,extends:s}=n;s&&t0(e,s,t,!0),i&&i.forEach(o=>t0(e,o,t,!0));for(const o in n)if(!(r&&o==="expose")){const u=OM[o]||t&&t[o];e[o]=u?u(e[o],n[o]):n[o]}return e}const OM={data:G2,props:q2,emits:q2,methods:Id,computed:Id,beforeCreate:Ya,created:Ya,beforeMount:Ya,mounted:Ya,beforeUpdate:Ya,updated:Ya,beforeDestroy:Ya,beforeUnmount:Ya,destroyed:Ya,unmounted:Ya,activated:Ya,deactivated:Ya,errorCaptured:Ya,serverPrefetch:Ya,components:Id,directives:Id,watch:RM,provide:G2,inject:IM};function G2(e,n){return n?e?function(){return uo(kr(e)?e.call(this,this):e,kr(n)?n.call(this,this):n)}:n:e}function IM(e,n){return Id(Dv(e),Dv(n))}function Dv(e){if(er(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Ya(e,n){return e?[...new Set([].concat(e,n))]:n}function Id(e,n){return e?uo(Object.create(null),e,n):n}function q2(e,n){return e?er(e)&&er(n)?[...new Set([...e,...n])]:uo(Object.create(null),mp(e),mp(n??{})):n}function RM(e,n){if(!e)return n;if(!n)return e;const t=uo(Object.create(null),e);for(const r in n)t[r]=Ya(e[r],n[r]);return t}function e4(){return{app:null,config:{isNativeTag:zE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let FM=0;function jM(e,n){return function(r,i=null){kr(r)||(r=uo({},r)),i!=null&&!Xi(i)&&(i=null);const s=e4(),o=new WeakSet,u=[];let f=!1;const d=s.app={_uid:FM++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:O4,get config(){return s.config},set config(g){},use(g,...y){return o.has(g)||(g&&kr(g.install)?(o.add(g),g.install(d,...y)):kr(g)&&(o.add(g),g(d,...y))),d},mixin(g){return s.mixins.includes(g)||s.mixins.push(g),d},component(g,y){return y?(s.components[g]=y,d):s.components[g]},directive(g,y){return y?(s.directives[g]=y,d):s.directives[g]},mount(g,y,x){if(!f){const _=d._ceVNode||fi(r,i);return _.appContext=s,x===!0?x="svg":x===!1&&(x=void 0),y&&n?n(_,g):e(_,g,x),f=!0,d._container=g,g.__vue_app__=d,Mp(_.component)}},onUnmount(g){u.push(g)},unmount(){f&&(mu(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(g,y){return s.provides[g]=y,d},runWithContext(g){const y=Xf;Xf=d;try{return g()}finally{Xf=y}}};return d}}let Xf=null;function Yd(e,n){if(js){let t=js.provides;const r=js.parent&&js.parent.provides;r===t&&(t=js.provides=Object.create(r)),t[e]=n}}function Wl(e,n,t=!1){const r=js||zs;if(r||Xf){const i=Xf?Xf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return t&&kr(n)?n.call(r&&r.proxy):n}}function t4(){return!!(js||zs||Xf)}const n4={},r4=()=>Object.create(n4),i4=e=>Object.getPrototypeOf(e)===n4;function zM(e,n,t,r=!1){const i={},s=r4();e.propsDefaults=Object.create(null),o4(e,n,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);t?e.props=r?i:U1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function $M(e,n,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=Ti(i),[f]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let y=0;y<g.length;y++){let x=g[y];if(U0(e.emitsOptions,x))continue;const _=n[x];if(f)if(qi(s,x))_!==s[x]&&(s[x]=_,d=!0);else{const E=ga(x);i[E]=Bv(f,u,E,_,e,!1)}else _!==s[x]&&(s[x]=_,d=!0)}}}else{o4(e,n,i,s)&&(d=!0);let g;for(const y in u)(!n||!qi(n,y)&&((g=Cl(y))===y||!qi(n,g)))&&(f?t&&(t[y]!==void 0||t[g]!==void 0)&&(i[y]=Bv(f,u,y,void 0,e,!0)):delete i[y]);if(s!==u)for(const y in s)(!n||!qi(n,y))&&(delete s[y],d=!0)}d&&Rc(e.attrs,"set","")}function o4(e,n,t,r){const[i,s]=e.propsOptions;let o=!1,u;if(n)for(let f in n){if(qh(f))continue;const d=n[f];let g;i&&qi(i,g=ga(f))?!s||!s.includes(g)?t[g]=d:(u||(u={}))[g]=d:U0(e.emitsOptions,f)||(!(f in r)||d!==r[f])&&(r[f]=d,o=!0)}if(s){const f=Ti(t),d=u||Ni;for(let g=0;g<s.length;g++){const y=s[g];t[y]=Bv(i,f,y,d[y],e,!qi(d,y))}}return o}function Bv(e,n,t,r,i,s){const o=e[t];if(o!=null){const u=qi(o,"default");if(u&&r===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&kr(f)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const g=ih(i);r=d[t]=f.call(null,n),g()}}else r=f;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!u?r=!1:o[1]&&(r===""||r===Cl(t))&&(r=!0))}return r}const UM=new WeakMap;function s4(e,n,t=!1){const r=t?UM:n.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},u=[];let f=!1;if(!kr(e)){const g=y=>{f=!0;const[x,_]=s4(y,n,!0);uo(o,x),_&&u.push(..._)};!t&&n.mixins.length&&n.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!s&&!f)return Xi(e)&&r.set(e,Hh),Hh;if(er(s))for(let g=0;g<s.length;g++){const y=ga(s[g]);W2(y)&&(o[y]=Ni)}else if(s)for(const g in s){const y=ga(g);if(W2(y)){const x=s[g],_=o[y]=er(x)||kr(x)?{type:x}:uo({},x),E=_.type;let T=!1,D=!0;if(er(E))for(let O=0;O<E.length;++O){const $=E[O],K=kr($)&&$.name;if(K==="Boolean"){T=!0;break}else K==="String"&&(D=!1)}else T=kr(E)&&E.name==="Boolean";_[0]=T,_[1]=D,(T||qi(_,"default"))&&u.push(y)}}const d=[o,u];return Xi(e)&&r.set(e,d),d}function W2(e){return e[0]!=="$"&&!qh(e)}const a4=e=>e[0]==="_"||e==="$stable",ey=e=>er(e)?e.map(Sl):[Sl(e)],VM=(e,n,t)=>{if(n._n)return n;const r=Hl((...i)=>ey(n(...i)),t);return r._c=!1,r},l4=(e,n,t)=>{const r=e._ctx;for(const i in e){if(a4(i))continue;const s=e[i];if(kr(s))n[i]=VM(i,s,r);else if(s!=null){const o=ey(s);n[i]=()=>o}}},u4=(e,n)=>{const t=ey(n);e.slots.default=()=>t},c4=(e,n,t)=>{for(const r in n)(t||r!=="_")&&(e[r]=n[r])},HM=(e,n,t)=>{const r=e.slots=r4();if(e.vnode.shapeFlag&32){const i=n._;i?(c4(r,n,t),t&&rw(r,"_",i,!0)):l4(n,r)}else n&&u4(e,n)},GM=(e,n,t)=>{const{vnode:r,slots:i}=e;let s=!0,o=Ni;if(r.shapeFlag&32){const u=n._;u?t&&u===1?s=!1:c4(i,n,t):(s=!n.$stable,l4(n,i)),o=n}else n&&(u4(e,n),o={default:1});if(s)for(const u in i)!a4(u)&&o[u]==null&&delete i[u]},Fs=L4;function f4(e){return d4(e)}function h4(e){return d4(e,eM)}function d4(e,n){const t=k0();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:u,createComment:f,setText:d,setElementText:g,parentNode:y,nextSibling:x,setScopeId:_=du,insertStaticContent:E}=e,T=(Z,de,ve,pe=null,ze=null,Qe=null,Ke=void 0,He=null,Xe=!!de.dynamicChildren)=>{if(Z===de)return;Z&&!Fu(Z,de)&&(pe=se(Z),N(Z,ze,Qe,!0),Z=null),de.patchFlag===-2&&(Xe=!1,de.dynamicChildren=null);const{type:ot,ref:kt,shapeFlag:Ct}=de;switch(ot){case yf:D(Z,de,ve,pe);break;case Ds:O(Z,de,ve,pe);break;case Qf:Z==null&&$(de,ve,pe,Ke);break;case Rn:I(Z,de,ve,pe,ze,Qe,Ke,He,Xe);break;default:Ct&1?ae(Z,de,ve,pe,ze,Qe,Ke,He,Xe):Ct&6?j(Z,de,ve,pe,ze,Qe,Ke,He,Xe):(Ct&64||Ct&128)&&ot.process(Z,de,ve,pe,ze,Qe,Ke,He,Xe,ke)}kt!=null&&ze&&gp(kt,Z&&Z.ref,Qe,de||Z,!de)},D=(Z,de,ve,pe)=>{if(Z==null)r(de.el=u(de.children),ve,pe);else{const ze=de.el=Z.el;de.children!==Z.children&&d(ze,de.children)}},O=(Z,de,ve,pe)=>{Z==null?r(de.el=f(de.children||""),ve,pe):de.el=Z.el},$=(Z,de,ve,pe)=>{[Z.el,Z.anchor]=E(Z.children,de,ve,pe,Z.el,Z.anchor)},K=({el:Z,anchor:de},ve,pe)=>{let ze;for(;Z&&Z!==de;)ze=x(Z),r(Z,ve,pe),Z=ze;r(de,ve,pe)},X=({el:Z,anchor:de})=>{let ve;for(;Z&&Z!==de;)ve=x(Z),i(Z),Z=ve;i(de)},ae=(Z,de,ve,pe,ze,Qe,Ke,He,Xe)=>{de.type==="svg"?Ke="svg":de.type==="math"&&(Ke="mathml"),Z==null?ue(de,ve,pe,ze,Qe,Ke,He,Xe):V(Z,de,ze,Qe,Ke,He,Xe)},ue=(Z,de,ve,pe,ze,Qe,Ke,He)=>{let Xe,ot;const{props:kt,shapeFlag:Ct,transition:Ut,dirs:Gt}=Z;if(Xe=Z.el=o(Z.type,Qe,kt&&kt.is,kt),Ct&8?g(Xe,Z.children):Ct&16&&W(Z.children,Xe,null,pe,ze,Hm(Z,Qe),Ke,He),Gt&&sc(Z,null,pe,"created"),Le(Xe,Z,Z.scopeId,Ke,pe),kt){for(const pn in kt)pn!=="value"&&!qh(pn)&&s(Xe,pn,null,kt[pn],Qe,pe);"value"in kt&&s(Xe,"value",null,kt.value,Qe),(ot=kt.onVnodeBeforeMount)&&wl(ot,pe,Z)}Gt&&sc(Z,null,pe,"beforeMount");const cn=p4(ze,Ut);cn&&Ut.beforeEnter(Xe),r(Xe,de,ve),((ot=kt&&kt.onVnodeMounted)||cn||Gt)&&Fs(()=>{ot&&wl(ot,pe,Z),cn&&Ut.enter(Xe),Gt&&sc(Z,null,pe,"mounted")},ze)},Le=(Z,de,ve,pe,ze)=>{if(ve&&_(Z,ve),pe)for(let Qe=0;Qe<pe.length;Qe++)_(Z,pe[Qe]);if(ze){let Qe=ze.subTree;if(de===Qe||r0(Qe.type)&&(Qe.ssContent===de||Qe.ssFallback===de)){const Ke=ze.vnode;Le(Z,Ke,Ke.scopeId,Ke.slotScopeIds,ze.parent)}}},W=(Z,de,ve,pe,ze,Qe,Ke,He,Xe=0)=>{for(let ot=Xe;ot<Z.length;ot++){const kt=Z[ot]=He?cf(Z[ot]):Sl(Z[ot]);T(null,kt,de,ve,pe,ze,Qe,Ke,He)}},V=(Z,de,ve,pe,ze,Qe,Ke)=>{const He=de.el=Z.el;let{patchFlag:Xe,dynamicChildren:ot,dirs:kt}=de;Xe|=Z.patchFlag&16;const Ct=Z.props||Ni,Ut=de.props||Ni;let Gt;if(ve&&jf(ve,!1),(Gt=Ut.onVnodeBeforeUpdate)&&wl(Gt,ve,de,Z),kt&&sc(de,Z,ve,"beforeUpdate"),ve&&jf(ve,!0),(Ct.innerHTML&&Ut.innerHTML==null||Ct.textContent&&Ut.textContent==null)&&g(He,""),ot?Y(Z.dynamicChildren,ot,He,ve,pe,Hm(de,ze),Qe):Ke||re(Z,de,He,null,ve,pe,Hm(de,ze),Qe,!1),Xe>0){if(Xe&16)F(He,Ct,Ut,ve,ze);else if(Xe&2&&Ct.class!==Ut.class&&s(He,"class",null,Ut.class,ze),Xe&4&&s(He,"style",Ct.style,Ut.style,ze),Xe&8){const cn=de.dynamicProps;for(let pn=0;pn<cn.length;pn++){const et=cn[pn],it=Ct[et],nt=Ut[et];(nt!==it||et==="value")&&s(He,et,it,nt,ze,ve)}}Xe&1&&Z.children!==de.children&&g(He,de.children)}else!Ke&&ot==null&&F(He,Ct,Ut,ve,ze);((Gt=Ut.onVnodeUpdated)||kt)&&Fs(()=>{Gt&&wl(Gt,ve,de,Z),kt&&sc(de,Z,ve,"updated")},pe)},Y=(Z,de,ve,pe,ze,Qe,Ke)=>{for(let He=0;He<de.length;He++){const Xe=Z[He],ot=de[He],kt=Xe.el&&(Xe.type===Rn||!Fu(Xe,ot)||Xe.shapeFlag&70)?y(Xe.el):ve;T(Xe,ot,kt,null,pe,ze,Qe,Ke,!0)}},F=(Z,de,ve,pe,ze)=>{if(de!==ve){if(de!==Ni)for(const Qe in de)!qh(Qe)&&!(Qe in ve)&&s(Z,Qe,de[Qe],null,ze,pe);for(const Qe in ve){if(qh(Qe))continue;const Ke=ve[Qe],He=de[Qe];Ke!==He&&Qe!=="value"&&s(Z,Qe,He,Ke,ze,pe)}"value"in ve&&s(Z,"value",de.value,ve.value,ze)}},I=(Z,de,ve,pe,ze,Qe,Ke,He,Xe)=>{const ot=de.el=Z?Z.el:u(""),kt=de.anchor=Z?Z.anchor:u("");let{patchFlag:Ct,dynamicChildren:Ut,slotScopeIds:Gt}=de;Gt&&(He=He?He.concat(Gt):Gt),Z==null?(r(ot,ve,pe),r(kt,ve,pe),W(de.children||[],ve,kt,ze,Qe,Ke,He,Xe)):Ct>0&&Ct&64&&Ut&&Z.dynamicChildren?(Y(Z.dynamicChildren,Ut,ve,ze,Qe,Ke,He),(de.key!=null||ze&&de===ze.subTree)&&ty(Z,de,!0)):re(Z,de,ve,kt,ze,Qe,Ke,He,Xe)},j=(Z,de,ve,pe,ze,Qe,Ke,He,Xe)=>{de.slotScopeIds=He,Z==null?de.shapeFlag&512?ze.ctx.activate(de,ve,pe,Ke,Xe):H(de,ve,pe,ze,Qe,Ke,Xe):U(Z,de,Xe)},H=(Z,de,ve,pe,ze,Qe,Ke)=>{const He=Z.component=A4(Z,pe,ze);if(Ep(Z)&&(He.ctx.renderer=ke),T4(He,!1,Ke),He.asyncDep){if(ze&&ze.registerDep(He,R,Ke),!Z.el){const Xe=He.subTree=fi(Ds);O(null,Xe,de,ve)}}else R(He,Z,de,ve,ze,Qe,Ke)},U=(Z,de,ve)=>{const pe=de.component=Z.component;if(eA(Z,de,ve))if(pe.asyncDep&&!pe.asyncResolved){te(pe,de,ve);return}else pe.next=de,pe.update();else de.el=Z.el,pe.vnode=de},R=(Z,de,ve,pe,ze,Qe,Ke)=>{const He=()=>{if(Z.isMounted){let{next:Ct,bu:Ut,u:Gt,parent:cn,vnode:pn}=Z;{const Qt=g4(Z);if(Qt){Ct&&(Ct.el=pn.el,te(Z,Ct,Ke)),Qt.asyncDep.then(()=>{Z.isUnmounted||He()});return}}let et=Ct,it;jf(Z,!1),Ct?(Ct.el=pn.el,te(Z,Ct,Ke)):Ct=pn,Ut&&Wh(Ut),(it=Ct.props&&Ct.props.onVnodeBeforeUpdate)&&wl(it,cn,Ct,pn),jf(Z,!0);const nt=kg(Z),Vt=Z.subTree;Z.subTree=nt,T(Vt,nt,y(Vt.el),se(Vt),Z,ze,Qe),Ct.el=nt.el,et===null&&V0(Z,nt.el),Gt&&Fs(Gt,ze),(it=Ct.props&&Ct.props.onVnodeUpdated)&&Fs(()=>wl(it,cn,Ct,pn),ze)}else{let Ct;const{el:Ut,props:Gt}=de,{bm:cn,m:pn,parent:et,root:it,type:nt}=Z,Vt=vf(de);if(jf(Z,!1),cn&&Wh(cn),!Vt&&(Ct=Gt&&Gt.onVnodeBeforeMount)&&wl(Ct,et,de),jf(Z,!0),Ut&&Ve){const Qt=()=>{Z.subTree=kg(Z),Ve(Ut,Z.subTree,Z,ze,null)};Vt&&nt.__asyncHydrate?nt.__asyncHydrate(Ut,Z,Qt):Qt()}else{it.ce&&it.ce._injectChildStyle(nt);const Qt=Z.subTree=kg(Z);T(null,Qt,ve,pe,Z,ze,Qe),de.el=Qt.el}if(pn&&Fs(pn,ze),!Vt&&(Ct=Gt&&Gt.onVnodeMounted)){const Qt=de;Fs(()=>wl(Ct,et,Qt),ze)}(de.shapeFlag&256||et&&vf(et.vnode)&&et.vnode.shapeFlag&256)&&Z.a&&Fs(Z.a,ze),Z.isMounted=!0,de=ve=pe=null}};Z.scope.on();const Xe=Z.effect=new up(He);Z.scope.off();const ot=Z.update=Xe.run.bind(Xe),kt=Z.job=Xe.runIfDirty.bind(Xe);kt.i=Z,kt.id=Z.uid,Xe.scheduler=()=>G1(kt),jf(Z,!0),ot()},te=(Z,de,ve)=>{de.component=Z;const pe=Z.vnode.props;Z.vnode=de,Z.next=null,$M(Z,de.props,pe,ve),GM(Z,de.children,ve),Pf(),I2(Z),Mf()},re=(Z,de,ve,pe,ze,Qe,Ke,He,Xe=!1)=>{const ot=Z&&Z.children,kt=Z?Z.shapeFlag:0,Ct=de.children,{patchFlag:Ut,shapeFlag:Gt}=de;if(Ut>0){if(Ut&128){xe(ot,Ct,ve,pe,ze,Qe,Ke,He,Xe);return}else if(Ut&256){me(ot,Ct,ve,pe,ze,Qe,Ke,He,Xe);return}}Gt&8?(kt&16&&ye(ot,ze,Qe),Ct!==ot&&g(ve,Ct)):kt&16?Gt&16?xe(ot,Ct,ve,pe,ze,Qe,Ke,He,Xe):ye(ot,ze,Qe,!0):(kt&8&&g(ve,""),Gt&16&&W(Ct,ve,pe,ze,Qe,Ke,He,Xe))},me=(Z,de,ve,pe,ze,Qe,Ke,He,Xe)=>{Z=Z||Hh,de=de||Hh;const ot=Z.length,kt=de.length,Ct=Math.min(ot,kt);let Ut;for(Ut=0;Ut<Ct;Ut++){const Gt=de[Ut]=Xe?cf(de[Ut]):Sl(de[Ut]);T(Z[Ut],Gt,ve,null,ze,Qe,Ke,He,Xe)}ot>kt?ye(Z,ze,Qe,!0,!1,Ct):W(de,ve,pe,ze,Qe,Ke,He,Xe,Ct)},xe=(Z,de,ve,pe,ze,Qe,Ke,He,Xe)=>{let ot=0;const kt=de.length;let Ct=Z.length-1,Ut=kt-1;for(;ot<=Ct&&ot<=Ut;){const Gt=Z[ot],cn=de[ot]=Xe?cf(de[ot]):Sl(de[ot]);if(Fu(Gt,cn))T(Gt,cn,ve,null,ze,Qe,Ke,He,Xe);else break;ot++}for(;ot<=Ct&&ot<=Ut;){const Gt=Z[Ct],cn=de[Ut]=Xe?cf(de[Ut]):Sl(de[Ut]);if(Fu(Gt,cn))T(Gt,cn,ve,null,ze,Qe,Ke,He,Xe);else break;Ct--,Ut--}if(ot>Ct){if(ot<=Ut){const Gt=Ut+1,cn=Gt<kt?de[Gt].el:pe;for(;ot<=Ut;)T(null,de[ot]=Xe?cf(de[ot]):Sl(de[ot]),ve,cn,ze,Qe,Ke,He,Xe),ot++}}else if(ot>Ut)for(;ot<=Ct;)N(Z[ot],ze,Qe,!0),ot++;else{const Gt=ot,cn=ot,pn=new Map;for(ot=cn;ot<=Ut;ot++){const Tn=de[ot]=Xe?cf(de[ot]):Sl(de[ot]);Tn.key!=null&&pn.set(Tn.key,ot)}let et,it=0;const nt=Ut-cn+1;let Vt=!1,Qt=0;const On=new Array(nt);for(ot=0;ot<nt;ot++)On[ot]=0;for(ot=Gt;ot<=Ct;ot++){const Tn=Z[ot];if(it>=nt){N(Tn,ze,Qe,!0);continue}let ar;if(Tn.key!=null)ar=pn.get(Tn.key);else for(et=cn;et<=Ut;et++)if(On[et-cn]===0&&Fu(Tn,de[et])){ar=et;break}ar===void 0?N(Tn,ze,Qe,!0):(On[ar-cn]=ot+1,ar>=Qt?Qt=ar:Vt=!0,T(Tn,de[ar],ve,null,ze,Qe,Ke,He,Xe),it++)}const wn=Vt?qM(On):Hh;for(et=wn.length-1,ot=nt-1;ot>=0;ot--){const Tn=cn+ot,ar=de[Tn],xn=Tn+1<kt?de[Tn+1].el:pe;On[ot]===0?T(null,ar,ve,xn,ze,Qe,Ke,He,Xe):Vt&&(et<0||ot!==wn[et]?We(ar,ve,xn,2):et--)}}},We=(Z,de,ve,pe,ze=null)=>{const{el:Qe,type:Ke,transition:He,children:Xe,shapeFlag:ot}=Z;if(ot&6){We(Z.component.subTree,de,ve,pe);return}if(ot&128){Z.suspense.move(de,ve,pe);return}if(ot&64){Ke.move(Z,de,ve,ke);return}if(Ke===Rn){r(Qe,de,ve);for(let Ct=0;Ct<Xe.length;Ct++)We(Xe[Ct],de,ve,pe);r(Z.anchor,de,ve);return}if(Ke===Qf){K(Z,de,ve);return}if(pe!==2&&ot&1&&He)if(pe===0)He.beforeEnter(Qe),r(Qe,de,ve),Fs(()=>He.enter(Qe),ze);else{const{leave:Ct,delayLeave:Ut,afterLeave:Gt}=He,cn=()=>r(Qe,de,ve),pn=()=>{Ct(Qe,()=>{cn(),Gt&&Gt()})};Ut?Ut(Qe,cn,pn):pn()}else r(Qe,de,ve)},N=(Z,de,ve,pe=!1,ze=!1)=>{const{type:Qe,props:Ke,ref:He,children:Xe,dynamicChildren:ot,shapeFlag:kt,patchFlag:Ct,dirs:Ut,cacheIndex:Gt}=Z;if(Ct===-2&&(ze=!1),He!=null&&gp(He,null,ve,Z,!0),Gt!=null&&(de.renderCache[Gt]=void 0),kt&256){de.ctx.deactivate(Z);return}const cn=kt&1&&Ut,pn=!vf(Z);let et;if(pn&&(et=Ke&&Ke.onVnodeBeforeUnmount)&&wl(et,de,Z),kt&6)ce(Z.component,ve,pe);else{if(kt&128){Z.suspense.unmount(ve,pe);return}cn&&sc(Z,null,de,"beforeUnmount"),kt&64?Z.type.remove(Z,de,ve,ke,pe):ot&&!ot.hasOnce&&(Qe!==Rn||Ct>0&&Ct&64)?ye(ot,de,ve,!1,!0):(Qe===Rn&&Ct&384||!ze&&kt&16)&&ye(Xe,de,ve),pe&&ee(Z)}(pn&&(et=Ke&&Ke.onVnodeUnmounted)||cn)&&Fs(()=>{et&&wl(et,de,Z),cn&&sc(Z,null,de,"unmounted")},ve)},ee=Z=>{const{type:de,el:ve,anchor:pe,transition:ze}=Z;if(de===Rn){fe(ve,pe);return}if(de===Qf){X(Z);return}const Qe=()=>{i(ve),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(Z.shapeFlag&1&&ze&&!ze.persisted){const{leave:Ke,delayLeave:He}=ze,Xe=()=>Ke(ve,Qe);He?He(Z.el,Qe,Xe):Xe()}else Qe()},fe=(Z,de)=>{let ve;for(;Z!==de;)ve=x(Z),i(Z),Z=ve;i(de)},ce=(Z,de,ve)=>{const{bum:pe,scope:ze,job:Qe,subTree:Ke,um:He,m:Xe,a:ot}=Z;n0(Xe),n0(ot),pe&&Wh(pe),ze.stop(),Qe&&(Qe.flags|=8,N(Ke,Z,de,ve)),He&&Fs(He,de),Fs(()=>{Z.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&Z.asyncDep&&!Z.asyncResolved&&Z.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},ye=(Z,de,ve,pe=!1,ze=!1,Qe=0)=>{for(let Ke=Qe;Ke<Z.length;Ke++)N(Z[Ke],de,ve,pe,ze)},se=Z=>{if(Z.shapeFlag&6)return se(Z.component.subTree);if(Z.shapeFlag&128)return Z.suspense.next();const de=x(Z.anchor||Z.el),ve=de&&de[Dw];return ve?x(ve):de};let k=!1;const le=(Z,de,ve)=>{Z==null?de._vnode&&N(de._vnode,null,null,!0):T(de._vnode||null,Z,de,null,null,null,ve),de._vnode=Z,k||(k=!0,I2(),e0(),k=!1)},ke={p:T,um:N,m:We,r:ee,mt:H,mc:W,pc:re,pbc:Y,n:se,o:e};let Pe,Ve;return n&&([Pe,Ve]=n(ke)),{render:le,hydrate:Pe,createApp:jM(le,Pe)}}function Hm({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function jf({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function p4(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function ty(e,n,t=!1){const r=e.children,i=n.children;if(er(r)&&er(i))for(let s=0;s<r.length;s++){const o=r[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=cf(i[s]),u.el=o.el),!t&&u.patchFlag!==-2&&ty(o,u)),u.type===yf&&(u.el=o.el)}}function qM(e){const n=e.slice(),t=[0];let r,i,s,o,u;const f=e.length;for(r=0;r<f;r++){const d=e[r];if(d!==0){if(i=t[t.length-1],e[i]<d){n[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)u=s+o>>1,e[t[u]]<d?s=u+1:o=u;d<e[t[s]]&&(s>0&&(n[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=n[o];return t}function g4(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:g4(n)}function n0(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const m4=Symbol.for("v-scx"),v4=()=>Wl(m4);function vp(e,n){return Pp(e,null,n)}function WM(e,n){return Pp(e,null,{flush:"post"})}function y4(e,n){return Pp(e,null,{flush:"sync"})}function Co(e,n,t){return Pp(e,n,t)}function Pp(e,n,t=Ni){const{immediate:r,deep:i,flush:s,once:o}=t,u=uo({},t),f=n&&r||!n&&s!=="post";let d;if(td){if(s==="sync"){const _=v4();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!f){const _=()=>{};return _.stop=du,_.resume=du,_.pause=du,_}}const g=js;u.call=(_,E,T)=>mu(_,g,E,T);let y=!1;s==="post"?u.scheduler=_=>{Fs(_,g&&g.suspense)}:s!=="sync"&&(y=!0,u.scheduler=(_,E)=>{E?_():G1(_)}),u.augmentJob=_=>{n&&(_.flags|=4),y&&(_.flags|=2,g&&(_.id=g.uid,_.i=g))};const x=RP(e,n,u);return td&&(d?d.push(x):f&&x()),x}function ZM(e,n,t){const r=this.proxy,i=_o(e)?e.includes(".")?_4(r,e):()=>r[e]:e.bind(r,r);let s;kr(n)?s=n:(s=n.handler,t=n);const o=ih(this),u=Pp(i,s.bind(r),t);return o(),u}function _4(e,n){const t=n.split(".");return()=>{let r=e;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function KM(e,n,t=Ni){const r=yu(),i=ga(n),s=Cl(n),o=b4(e,i),u=Sw((f,d)=>{let g,y=Ni,x;return y4(()=>{const _=e[i];tl(g,_)&&(g=_,d())}),{get(){return f(),t.get?t.get(g):g},set(_){const E=t.set?t.set(_):_;if(!tl(E,g)&&!(y!==Ni&&tl(_,y)))return;const T=r.vnode.props;T&&(n in T||i in T||s in T)&&(`onUpdate:${n}`in T||`onUpdate:${i}`in T||`onUpdate:${s}`in T)||(g=_,d()),r.emit(`update:${n}`,E),tl(_,E)&&tl(_,y)&&!tl(E,x)&&d(),y=_,x=E}}});return u[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?o||Ni:u,done:!1}:{done:!0}}}},u}const b4=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${ga(n)}Modifiers`]||e[`${Cl(n)}Modifiers`];function YM(e,n,...t){if(e.isUnmounted)return;const r=e.vnode.props||Ni;let i=t;const s=n.startsWith("update:"),o=s&&b4(r,n.slice(7));o&&(o.trim&&(i=t.map(g=>_o(g)?g.trim():g)),o.number&&(i=t.map(Kg)));let u,f=r[u=Gd(n)]||r[u=Gd(ga(n))];!f&&s&&(f=r[u=Gd(Cl(n))]),f&&mu(f,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,mu(d,e,6,i)}}function w4(e,n,t=!1){const r=n.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!kr(e)){const f=d=>{const g=w4(d,n,!0);g&&(u=!0,uo(o,g))};!t&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!s&&!u?(Xi(e)&&r.set(e,null),null):(er(s)?s.forEach(f=>o[f]=null):uo(o,s),Xi(e)&&r.set(e,o),o)}function U0(e,n){return!e||!Sp(n)?!1:(n=n.slice(2).replace(/Once$/,""),qi(e,n[0].toLowerCase()+n.slice(1))||qi(e,Cl(n))||qi(e,n))}function kg(e){const{type:n,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:f,render:d,renderCache:g,props:y,data:x,setupState:_,ctx:E,inheritAttrs:T}=e,D=pp(e);let O,$;try{if(t.shapeFlag&4){const X=i||r,ae=X;O=Sl(d.call(ae,X,g,y,_,x,E)),$=u}else{const X=n;O=Sl(X.length>1?X(y,{attrs:u,slots:o,emit:f}):X(y,null)),$=n.props?u:XM(u)}}catch(X){Jd.length=0,ah(X,e,1),O=fi(Ds)}let K=O;if($&&T!==!1){const X=Object.keys($),{shapeFlag:ae}=K;X.length&&ae&7&&(s&&X.some(N1)&&($=QM($,s)),K=vc(K,$,!1,!0))}return t.dirs&&(K=vc(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(t.dirs):t.dirs),t.transition&&$c(K,t.transition),O=K,pp(D),O}function JM(e,n=!0){let t;for(let r=0;r<e.length;r++){const i=e[r];if(Uc(i)){if(i.type!==Ds||i.children==="v-if"){if(t)return;t=i}}else return}return t}const XM=e=>{let n;for(const t in e)(t==="class"||t==="style"||Sp(t))&&((n||(n={}))[t]=e[t]);return n},QM=(e,n)=>{const t={};for(const r in e)(!N1(r)||!(r.slice(9)in n))&&(t[r]=e[r]);return t};function eA(e,n,t){const{props:r,children:i,component:s}=e,{props:o,children:u,patchFlag:f}=n,d=s.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&f>=0){if(f&1024)return!0;if(f&16)return r?Z2(r,o,d):!!o;if(f&8){const g=n.dynamicProps;for(let y=0;y<g.length;y++){const x=g[y];if(o[x]!==r[x]&&!U0(d,x))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===o?!1:r?o?Z2(r,o,d):!0:!!o;return!1}function Z2(e,n,t){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(n[s]!==e[s]&&!U0(t,s))return!0}return!1}function V0({vnode:e,parent:n},t){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=t,n=n.parent;else break}}const r0=e=>e.__isSuspense;let Ov=0;const tA={name:"Suspense",__isSuspense:!0,process(e,n,t,r,i,s,o,u,f,d){if(e==null)rA(n,t,r,i,s,o,u,f,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback){n.suspense=e.suspense,n.suspense.vnode=n,n.el=e.el;return}iA(e,n,t,r,i,o,u,f,d)}},hydrate:oA,normalize:sA},nA=tA;function yp(e,n){const t=e.props&&e.props[n];kr(t)&&t()}function rA(e,n,t,r,i,s,o,u,f){const{p:d,o:{createElement:g}}=f,y=g("div"),x=e.suspense=x4(e,i,r,n,y,t,s,o,u,f);d(null,x.pendingBranch=e.ssContent,y,null,r,x,s,o),x.deps>0?(yp(e,"onPending"),yp(e,"onFallback"),d(null,e.ssFallback,n,t,r,null,s,o),Kh(x,e.ssFallback)):x.resolve(!1,!0)}function iA(e,n,t,r,i,s,o,u,{p:f,um:d,o:{createElement:g}}){const y=n.suspense=e.suspense;y.vnode=n,n.el=e.el;const x=n.ssContent,_=n.ssFallback,{activeBranch:E,pendingBranch:T,isInFallback:D,isHydrating:O}=y;if(T)y.pendingBranch=x,Fu(x,T)?(f(T,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():D&&(O||(f(E,_,t,r,i,null,s,o,u),Kh(y,_)))):(y.pendingId=Ov++,O?(y.isHydrating=!1,y.activeBranch=T):d(T,i,y),y.deps=0,y.effects.length=0,y.hiddenContainer=g("div"),D?(f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():(f(E,_,t,r,i,null,s,o,u),Kh(y,_))):E&&Fu(x,E)?(f(E,x,t,r,i,y,s,o,u),y.resolve(!0)):(f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0&&y.resolve()));else if(E&&Fu(x,E))f(E,x,t,r,i,y,s,o,u),Kh(y,x);else if(yp(n,"onPending"),y.pendingBranch=x,x.shapeFlag&512?y.pendingId=x.component.suspenseId:y.pendingId=Ov++,f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0)y.resolve();else{const{timeout:$,pendingId:K}=y;$>0?setTimeout(()=>{y.pendingId===K&&y.fallback(_)},$):$===0&&y.fallback(_)}}function x4(e,n,t,r,i,s,o,u,f,d,g=!1){const{p:y,m:x,um:_,n:E,o:{parentNode:T,remove:D}}=d;let O;const $=aA(e);$&&n&&n.pendingBranch&&(O=n.pendingId,n.deps++);const K=e.props?Yg(e.props.timeout):void 0,X=s,ae={vnode:e,parent:n,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Ov++,timeout:typeof K=="number"?K:-1,activeBranch:null,pendingBranch:null,isInFallback:!g,isHydrating:g,isUnmounted:!1,effects:[],resolve(ue=!1,Le=!1){const{vnode:W,activeBranch:V,pendingBranch:Y,pendingId:F,effects:I,parentComponent:j,container:H}=ae;let U=!1;ae.isHydrating?ae.isHydrating=!1:ue||(U=V&&Y.transition&&Y.transition.mode==="out-in",U&&(V.transition.afterLeave=()=>{F===ae.pendingId&&(x(Y,H,s===X?E(V):s,0),hp(I))}),V&&(T(V.el)===H&&(s=E(V)),_(V,j,ae,!0)),U||x(Y,H,s,0)),Kh(ae,Y),ae.pendingBranch=null,ae.isInFallback=!1;let R=ae.parent,te=!1;for(;R;){if(R.pendingBranch){R.effects.push(...I),te=!0;break}R=R.parent}!te&&!U&&hp(I),ae.effects=[],$&&n&&n.pendingBranch&&O===n.pendingId&&(n.deps--,n.deps===0&&!Le&&n.resolve()),yp(W,"onResolve")},fallback(ue){if(!ae.pendingBranch)return;const{vnode:Le,activeBranch:W,parentComponent:V,container:Y,namespace:F}=ae;yp(Le,"onFallback");const I=E(W),j=()=>{ae.isInFallback&&(y(null,ue,Y,I,V,null,F,u,f),Kh(ae,ue))},H=ue.transition&&ue.transition.mode==="out-in";H&&(W.transition.afterLeave=j),ae.isInFallback=!0,_(W,V,null,!0),H||j()},move(ue,Le,W){ae.activeBranch&&x(ae.activeBranch,ue,Le,W),ae.container=ue},next(){return ae.activeBranch&&E(ae.activeBranch)},registerDep(ue,Le,W){const V=!!ae.pendingBranch;V&&ae.deps++;const Y=ue.vnode.el;ue.asyncDep.catch(F=>{ah(F,ue,0)}).then(F=>{if(ue.isUnmounted||ae.isUnmounted||ae.pendingId!==ue.suspenseId)return;ue.asyncResolved=!0;const{vnode:I}=ue;jv(ue,F,!1),Y&&(I.el=Y);const j=!Y&&ue.subTree.el;Le(ue,I,T(Y||ue.subTree.el),Y?null:E(ue.subTree),ae,o,W),j&&D(j),V0(ue,I.el),V&&--ae.deps===0&&ae.resolve()})},unmount(ue,Le){ae.isUnmounted=!0,ae.activeBranch&&_(ae.activeBranch,t,ue,Le),ae.pendingBranch&&_(ae.pendingBranch,t,ue,Le)}};return ae}function oA(e,n,t,r,i,s,o,u,f){const d=n.suspense=x4(n,r,t,e.parentNode,document.createElement("div"),null,i,s,o,u,!0),g=f(e,d.pendingBranch=n.ssContent,t,d,s,o);return d.deps===0&&d.resolve(!1,!0),g}function sA(e){const{shapeFlag:n,children:t}=e,r=n&32;e.ssContent=K2(r?t.default:t),e.ssFallback=r?K2(t.fallback):fi(Ds)}function K2(e){let n;if(kr(e)){const t=rh&&e._c;t&&(e._d=!1,$e()),e=e(),t&&(e._d=!0,n=za,S4())}return er(e)&&(e=JM(e)),e=Sl(e),n&&!e.dynamicChildren&&(e.dynamicChildren=n.filter(t=>t!==e)),e}function L4(e,n){n&&n.pendingBranch?er(e)?n.effects.push(...e):n.effects.push(e):hp(e)}function Kh(e,n){e.activeBranch=n;const{vnode:t,parentComponent:r}=e;let i=n.el;for(;!i&&n.component;)n=n.component.subTree,i=n.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,V0(r,i))}function aA(e){const n=e.props&&e.props.suspensible;return n!=null&&n!==!1}const Rn=Symbol.for("v-fgt"),yf=Symbol.for("v-txt"),Ds=Symbol.for("v-cmt"),Qf=Symbol.for("v-stc"),Jd=[];let za=null;function $e(e=!1){Jd.push(za=e?null:[])}function S4(){Jd.pop(),za=Jd[Jd.length-1]||null}let rh=1;function Iv(e,n=!1){rh+=e,e<0&&za&&n&&(za.hasOnce=!0)}function C4(e){return e.dynamicChildren=rh>0?za||Hh:null,S4(),rh>0&&za&&za.push(e),e}function qe(e,n,t,r,i,s){return C4(P(e,n,t,r,i,s,!0))}function $a(e,n,t,r,i){return C4(fi(e,n,t,r,i,!0))}function Uc(e){return e?e.__v_isVNode===!0:!1}function Fu(e,n){return e.type===n.type&&e.key===n.key}function lA(e){}const E4=({key:e})=>e??null,Tg=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?_o(e)||Xo(e)||kr(e)?{i:zs,r:e,k:n,f:!!t}:e:null);function P(e,n=null,t=null,r=0,i=null,s=e===Rn?0:1,o=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&E4(n),ref:n&&Tg(n),scopeId:F0,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:zs};return u?(ny(f,t),s&128&&e.normalize(f)):t&&(f.shapeFlag|=_o(t)?8:16),rh>0&&!o&&za&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&za.push(f),f}const fi=uA;function uA(e,n=null,t=null,r=0,i=null,s=!1){if((!e||e===Yw)&&(e=Ds),Uc(e)){const u=vc(e,n,!0);return t&&ny(u,t),rh>0&&!s&&za&&(u.shapeFlag&6?za[za.indexOf(e)]=u:za.push(u)),u.patchFlag=-2,u}if(mA(e)&&(e=e.__vccOpts),n){n=P4(n);let{class:u,style:f}=n;u&&!_o(u)&&(n.class=zi(u)),Xi(f)&&(I0(f)&&!er(f)&&(f=uo({},f)),n.style=pu(f))}const o=_o(e)?1:r0(e)?128:Bw(e)?64:Xi(e)?4:kr(e)?2:0;return P(e,n,t,r,i,o,s,!0)}function P4(e){return e?I0(e)||i4(e)?uo({},e):e:null}function vc(e,n,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:f}=e,d=n?M4(i||{},n):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&E4(d),ref:n&&n.ref?t&&s?er(s)?s.concat(Tg(n)):[s,Tg(n)]:Tg(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Rn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vc(e.ssContent),ssFallback:e.ssFallback&&vc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&$c(g,f.clone(g)),g}function Ei(e=" ",n=0){return fi(yf,null,e,n)}function uc(e,n){const t=fi(Qf,null,e);return t.staticCount=n,t}function dn(e="",n=!1){return n?($e(),$a(Ds,null,e)):fi(Ds,null,e)}function Sl(e){return e==null||typeof e=="boolean"?fi(Ds):er(e)?fi(Rn,null,e.slice()):Uc(e)?cf(e):fi(yf,null,String(e))}function cf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vc(e)}function ny(e,n){let t=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(er(n))t=16;else if(typeof n=="object")if(r&65){const i=n.default;i&&(i._c&&(i._d=!1),ny(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=n._;!i&&!i4(n)?n._ctx=zs:i===3&&zs&&(zs.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else kr(n)?(n={default:n,_ctx:zs},t=32):(n=String(n),r&64?(t=16,n=[Ei(n)]):t=8);e.children=n,e.shapeFlag|=t}function M4(...e){const n={};for(let t=0;t<e.length;t++){const r=e[t];for(const i in r)if(i==="class")n.class!==r.class&&(n.class=zi([n.class,r.class]));else if(i==="style")n.style=pu([n.style,r.style]);else if(Sp(i)){const s=n[i],o=r[i];o&&s!==o&&!(er(s)&&s.includes(o))&&(n[i]=s?[].concat(s,o):o)}else i!==""&&(n[i]=r[i])}return n}function wl(e,n,t,r=null){mu(e,n,7,[t,r])}const cA=e4();let fA=0;function A4(e,n,t){const r=e.type,i=(n?n.appContext:e.appContext)||cA,s={uid:fA++,vnode:e,type:r,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new I1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:s4(r,i),emitsOptions:w4(r,i),emit:null,emitted:null,propsDefaults:Ni,inheritAttrs:r.inheritAttrs,ctx:Ni,data:Ni,props:Ni,attrs:Ni,slots:Ni,refs:Ni,setupState:Ni,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=YM.bind(null,s),e.ce&&e.ce(s),s}let js=null;const yu=()=>js||zs;let i0,Rv;{const e=k0(),n=(t,r)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};i0=n("__VUE_INSTANCE_SETTERS__",t=>js=t),Rv=n("__VUE_SSR_SETTERS__",t=>td=t)}const ih=e=>{const n=js;return i0(e),e.scope.on(),()=>{e.scope.off(),i0(n)}},Fv=()=>{js&&js.scope.off(),i0(null)};function k4(e){return e.vnode.shapeFlag&4}let td=!1;function T4(e,n=!1,t=!1){n&&Rv(n);const{props:r,children:i}=e.vnode,s=k4(e);zM(e,r,s,n),HM(e,i,t);const o=s?hA(e,n):void 0;return n&&Rv(!1),o}function hA(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Tv);const{setup:r}=t;if(r){Pf();const i=e.setupContext=r.length>1?D4(e):null,s=ih(e),o=ud(r,e,0,[e.props,i]),u=B1(o);if(Mf(),s(),(u||e.sp)&&!vf(e)&&Z1(e),u){if(o.then(Fv,Fv),n)return o.then(f=>{jv(e,f,n)}).catch(f=>{ah(f,e,0)});e.asyncDep=o}else jv(e,o,n)}else N4(e,n)}function jv(e,n,t){kr(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Xi(n)&&(e.setupState=H1(n)),N4(e,t)}let o0,zv;function dA(e){o0=e,zv=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,_M))}}const pA=()=>!o0;function N4(e,n,t){const r=e.type;if(!e.render){if(!n&&o0&&!r.render){const i=r.template||Q1(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:f}=r,d=uo(uo({isCustomElement:s,delimiters:u},o),f);r.render=o0(i,d)}}e.render=r.render||du,zv&&zv(e)}{const i=ih(e);Pf();try{DM(e)}finally{Mf(),i()}}}const gA={get(e,n){return Oa(e,"get",""),e[n]}};function D4(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,gA),slots:e.slots,emit:e.emit,expose:n}}function Mp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(H1(R0(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in Kd)return Kd[t](e)},has(n,t){return t in n||t in Kd}})):e.proxy}function $v(e,n=!0){return kr(e)?e.displayName||e.name:e.name||n&&e.__name}function mA(e){return kr(e)&&"__vccOpts"in e}const gr=(e,n)=>DP(e,n,td);function H0(e,n,t){const r=arguments.length;return r===2?Xi(n)&&!er(n)?Uc(n)?fi(e,null,[n]):fi(e,n):fi(e,null,n):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Uc(t)&&(t=[t]),fi(e,n,t))}function vA(){}function yA(e,n,t,r){const i=t[r];if(i&&B4(i,e))return i;const s=n();return s.memo=e.slice(),s.cacheIndex=r,t[r]=s}function B4(e,n){const t=e.memo;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(tl(t[r],n[r]))return!1;return rh>0&&za&&za.push(e),!0}const O4="3.5.13",_A=du,bA=UP,wA=Oh,xA=Nw,LA={createComponentInstance:A4,setupComponent:T4,renderComponentRoot:kg,setCurrentRenderingInstance:pp,isVNode:Uc,normalizeVNode:Sl,getComponentPublicInstance:Mp,ensureValidVNode:X1,pushWarningContext:FP,popWarningContext:jP},SA=LA,CA=null,EA=null,PA=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Uv;const Y2=typeof window<"u"&&window.trustedTypes;if(Y2)try{Uv=Y2.createPolicy("vue",{createHTML:e=>e})}catch{}const I4=Uv?e=>Uv.createHTML(e):e=>e,MA="http://www.w3.org/2000/svg",AA="http://www.w3.org/1998/Math/MathML",Ic=typeof document<"u"?document:null,J2=Ic&&Ic.createElement("template"),kA={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,r)=>{const i=n==="svg"?Ic.createElementNS(MA,e):n==="mathml"?Ic.createElementNS(AA,e):t?Ic.createElement(e,{is:t}):Ic.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ic.createTextNode(e),createComment:e=>Ic.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ic.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,r,i,s){const o=t?t.previousSibling:n.lastChild;if(i&&(i===s||i.nextSibling))for(;n.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{J2.innerHTML=I4(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=J2.content;if(r==="svg"||r==="mathml"){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}n.insertBefore(u,t)}return[o?o.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},Qc="transition",Ld="animation",nd=Symbol("_vtc"),R4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},F4=uo({},W1,R4),TA=e=>(e.displayName="Transition",e.props=F4,e),Vv=TA((e,{slots:n})=>H0(jw,j4(e),n)),zf=(e,n=[])=>{er(e)?e.forEach(t=>t(...n)):e&&e(...n)},X2=e=>e?er(e)?e.some(n=>n.length>1):e.length>1:!1;function j4(e){const n={};for(const I in e)I in R4||(n[I]=e[I]);if(e.css===!1)return n;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:u=`${t}-enter-to`,appearFromClass:f=s,appearActiveClass:d=o,appearToClass:g=u,leaveFromClass:y=`${t}-leave-from`,leaveActiveClass:x=`${t}-leave-active`,leaveToClass:_=`${t}-leave-to`}=e,E=NA(i),T=E&&E[0],D=E&&E[1],{onBeforeEnter:O,onEnter:$,onEnterCancelled:K,onLeave:X,onLeaveCancelled:ae,onBeforeAppear:ue=O,onAppear:Le=$,onAppearCancelled:W=K}=n,V=(I,j,H,U)=>{I._enterCancelled=U,of(I,j?g:u),of(I,j?d:o),H&&H()},Y=(I,j)=>{I._isLeaving=!1,of(I,y),of(I,_),of(I,x),j&&j()},F=I=>(j,H)=>{const U=I?Le:$,R=()=>V(j,I,H);zf(U,[j,R]),Q2(()=>{of(j,I?f:s),rc(j,I?g:u),X2(U)||e_(j,r,T,R)})};return uo(n,{onBeforeEnter(I){zf(O,[I]),rc(I,s),rc(I,o)},onBeforeAppear(I){zf(ue,[I]),rc(I,f),rc(I,d)},onEnter:F(!1),onAppear:F(!0),onLeave(I,j){I._isLeaving=!0;const H=()=>Y(I,j);rc(I,y),I._enterCancelled?(rc(I,x),Hv()):(Hv(),rc(I,x)),Q2(()=>{I._isLeaving&&(of(I,y),rc(I,_),X2(X)||e_(I,r,D,H))}),zf(X,[I,H])},onEnterCancelled(I){V(I,!1,void 0,!0),zf(K,[I])},onAppearCancelled(I){V(I,!0,void 0,!0),zf(W,[I])},onLeaveCancelled(I){Y(I),zf(ae,[I])}})}function NA(e){if(e==null)return null;if(Xi(e))return[Gm(e.enter),Gm(e.leave)];{const n=Gm(e);return[n,n]}}function Gm(e){return Yg(e)}function rc(e,n){n.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[nd]||(e[nd]=new Set)).add(n)}function of(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const t=e[nd];t&&(t.delete(n),t.size||(e[nd]=void 0))}function Q2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let DA=0;function e_(e,n,t,r){const i=e._endId=++DA,s=()=>{i===e._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:u,propCount:f}=z4(e,n);if(!o)return r();const d=o+"end";let g=0;const y=()=>{e.removeEventListener(d,x),s()},x=_=>{_.target===e&&++g>=f&&y()};setTimeout(()=>{g<f&&y()},u+1),e.addEventListener(d,x)}function z4(e,n){const t=window.getComputedStyle(e),r=E=>(t[E]||"").split(", "),i=r(`${Qc}Delay`),s=r(`${Qc}Duration`),o=t_(i,s),u=r(`${Ld}Delay`),f=r(`${Ld}Duration`),d=t_(u,f);let g=null,y=0,x=0;n===Qc?o>0&&(g=Qc,y=o,x=s.length):n===Ld?d>0&&(g=Ld,y=d,x=f.length):(y=Math.max(o,d),g=y>0?o>d?Qc:Ld:null,x=g?g===Qc?s.length:f.length:0);const _=g===Qc&&/\b(transform|all)(,|$)/.test(r(`${Qc}Property`).toString());return{type:g,timeout:y,propCount:x,hasTransform:_}}function t_(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((t,r)=>n_(t)+n_(e[r])))}function n_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Hv(){return document.body.offsetHeight}function BA(e,n,t){const r=e[nd];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const s0=Symbol("_vod"),$4=Symbol("_vsh"),G0={beforeMount(e,{value:n},{transition:t}){e[s0]=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):Sd(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:r}){!n!=!t&&(r?n?(r.beforeEnter(e),Sd(e,!0),r.enter(e)):r.leave(e,()=>{Sd(e,!1)}):Sd(e,n))},beforeUnmount(e,{value:n}){Sd(e,n)}};function Sd(e,n){e.style.display=n?e[s0]:"none",e[$4]=!n}function OA(){G0.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const U4=Symbol("");function IA(e){const n=yu();if(!n)return;const t=n.ut=(i=e(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(s=>a0(s,i))},r=()=>{const i=e(n.proxy);n.ce?a0(n.ce,i):Gv(n.subTree,i),t(i)};K1(()=>{hp(r)}),$s(()=>{Co(r,du,{flush:"post"});const i=new MutationObserver(r);i.observe(n.subTree.el.parentNode,{childList:!0}),mc(()=>i.disconnect())})}function Gv(e,n){if(e.shapeFlag&128){const t=e.suspense;e=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{Gv(t.activeBranch,n)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)a0(e.el,n);else if(e.type===Rn)e.children.forEach(t=>Gv(t,n));else if(e.type===Qf){let{el:t,anchor:r}=e;for(;t&&(a0(t,n),t!==r);)t=t.nextSibling}}function a0(e,n){if(e.nodeType===1){const t=e.style;let r="";for(const i in n)t.setProperty(`--${i}`,n[i]),r+=`--${i}: ${n[i]};`;t[U4]=r}}const RA=/(^|;)\s*display\s*:/;function FA(e,n,t){const r=e.style,i=_o(t);let s=!1;if(t&&!i){if(n)if(_o(n))for(const o of n.split(";")){const u=o.slice(0,o.indexOf(":")).trim();t[u]==null&&Ng(r,u,"")}else for(const o in n)t[o]==null&&Ng(r,o,"");for(const o in t)o==="display"&&(s=!0),Ng(r,o,t[o])}else if(i){if(n!==t){const o=r[U4];o&&(t+=";"+o),r.cssText=t,s=RA.test(t)}}else n&&e.removeAttribute("style");s0 in e&&(e[s0]=s?r.display:"",e[$4]&&(r.display="none"))}const r_=/\s*!important$/;function Ng(e,n,t){if(er(t))t.forEach(r=>Ng(e,n,r));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const r=jA(e,n);r_.test(t)?e.setProperty(Cl(r),t.replace(r_,""),"important"):e[r]=t}}const i_=["Webkit","Moz","ms"],qm={};function jA(e,n){const t=qm[n];if(t)return t;let r=ga(n);if(r!=="filter"&&r in e)return qm[n]=r;r=Cp(r);for(let i=0;i<i_.length;i++){const s=i_[i]+r;if(s in e)return qm[n]=s}return n}const o_="http://www.w3.org/1999/xlink";function s_(e,n,t,r,i,s=eP(n)){r&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(o_,n.slice(6,n.length)):e.setAttributeNS(o_,n,t):t==null||s&&!iw(t)?e.removeAttribute(n):e.setAttribute(n,s?"":$u(t)?String(t):t)}function a_(e,n,t,r,i){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?I4(t):t);return}const s=e.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,f=t==null?e.type==="checkbox"?"on":"":String(t);(u!==f||!("_value"in e))&&(e.value=f),t==null&&e.removeAttribute(n),e._value=t;return}let o=!1;if(t===""||t==null){const u=typeof e[n];u==="boolean"?t=iw(t):t==null&&u==="string"?(t="",o=!0):u==="number"&&(t=0,o=!0)}try{e[n]=t}catch{}o&&e.removeAttribute(i||n)}function jc(e,n,t,r){e.addEventListener(n,t,r)}function zA(e,n,t,r){e.removeEventListener(n,t,r)}const l_=Symbol("_vei");function $A(e,n,t,r,i=null){const s=e[l_]||(e[l_]={}),o=s[n];if(r&&o)o.value=r;else{const[u,f]=UA(n);if(r){const d=s[n]=GA(r,i);jc(e,u,d,f)}else o&&(zA(e,u,o,f),s[n]=void 0)}}const u_=/(?:Once|Passive|Capture)$/;function UA(e){let n;if(u_.test(e)){n={};let r;for(;r=e.match(u_);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cl(e.slice(2)),n]}let Wm=0;const VA=Promise.resolve(),HA=()=>Wm||(VA.then(()=>Wm=0),Wm=Date.now());function GA(e,n){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;mu(qA(r,t.value),n,5,[r])};return t.value=e,t.attached=HA(),t}function qA(e,n){if(er(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(r=>i=>!i._stopped&&r&&r(i))}else return n}const c_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,WA=(e,n,t,r,i,s)=>{const o=i==="svg";n==="class"?BA(e,r,o):n==="style"?FA(e,t,r):Sp(n)?N1(n)||$A(e,n,t,r,s):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):ZA(e,n,r,o))?(a_(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&s_(e,n,r,o,s,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!_o(r))?a_(e,ga(n),r,s,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),s_(e,n,r,o))};function ZA(e,n,t,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&c_(n)&&kr(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return c_(n)&&_o(t)?!1:n in e}const f_={};/*! #__NO_SIDE_EFFECTS__ */function V4(e,n,t){const r=cs(e,n);M0(r)&&uo(r,n);class i extends q0{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const KA=(e,n)=>V4(e,n,Q4),YA=typeof HTMLElement<"u"?HTMLElement:class{};class q0 extends YA{constructor(n,t={},r=u0){super(),this._def=n,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==u0?this._root=this.shadowRoot:n.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof q0){this._parent=n;break}this._instance||(this._resolved?(this._setParent(),this._update()):n&&n._pendingResolve?this._pendingResolve=n._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(n=this._parent){n&&(this._instance.parent=n._instance,this._instance.provides=n._instance.provides)}disconnectedCallback(){this._connected=!1,Xs(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const n=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let u;if(s&&!er(s))for(const f in s){const d=s[f];(d===Number||d&&d.type===Number)&&(f in this._props&&(this._props[f]=Yg(this._props[f])),(u||(u=Object.create(null)))[ga(f)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>n(this._def=r,!0)):n(this._def)}_mount(n){this._app=this._createApp(n),n.configureApp&&n.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)qi(this,r)||Object.defineProperty(this,r,{get:()=>Wn(t[r])})}_resolveProps(n){const{props:t}=n,r=er(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(ga))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(n){if(n.startsWith("data-v-"))return;const t=this.hasAttribute(n);let r=t?this.getAttribute(n):f_;const i=ga(n);t&&this._numberProps&&this._numberProps[i]&&(r=Yg(r)),this._setProp(i,r,!1,!0)}_getProp(n){return this._props[n]}_setProp(n,t,r=!0,i=!1){if(t!==this._props[n]&&(t===f_?delete this._props[n]:(this._props[n]=t,n==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(Cl(n),""):typeof t=="string"||typeof t=="number"?this.setAttribute(Cl(n),t+""):t||this.removeAttribute(Cl(n)),s&&s.observe(this,{attributes:!0})}}_update(){X4(this._createVNode(),this._root)}_createVNode(){const n={};this.shadowRoot||(n.onVnodeMounted=n.onVnodeUpdated=this._renderSlots.bind(this));const t=fi(this._def,uo(n,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,M0(o[0])?uo({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Cl(s)!==s&&i(Cl(s),o)},this._setParent()}),t}_applyStyles(n,t){if(!n)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=n.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=n[i],this.shadowRoot.prepend(s)}}_parseSlots(){const n=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(n[r]||(n[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const n=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<n.length;r++){const i=n[r],s=i.getAttribute("name")||"default",o=this._slots[s],u=i.parentNode;if(o)for(const f of o){if(t&&f.nodeType===1){const d=t+"-s",g=document.createTreeWalker(f,1);f.setAttribute(d,"");let y;for(;y=g.nextNode();)y.setAttribute(d,"")}u.insertBefore(f,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(n){this._applyStyles(n.styles,n)}_removeChildStyle(n){}}function H4(e){const n=yu(),t=n&&n.ce;return t||null}function JA(){const e=H4();return e&&e.shadowRoot}function XA(e="$style"){{const n=yu();if(!n)return Ni;const t=n.type.__cssModules;if(!t)return Ni;const r=t[e];return r||Ni}}const G4=new WeakMap,q4=new WeakMap,l0=Symbol("_moveCb"),h_=Symbol("_enterCb"),QA=e=>(delete e.props.mode,e),e6=QA({name:"TransitionGroup",props:uo({},F4,{tag:String,moveClass:String}),setup(e,{slots:n}){const t=yu(),r=q1();let i,s;return $0(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!o6(i[0].el,t.vnode.el,o))return;i.forEach(n6),i.forEach(r6);const u=i.filter(i6);Hv(),u.forEach(f=>{const d=f.el,g=d.style;rc(d,o),g.transform=g.webkitTransform=g.transitionDuration="";const y=d[l0]=x=>{x&&x.target!==d||(!x||/transform$/.test(x.propertyName))&&(d.removeEventListener("transitionend",y),d[l0]=null,of(d,o))};d.addEventListener("transitionend",y)})}),()=>{const o=Ti(e),u=j4(o);let f=o.tag||Rn;if(i=[],s)for(let d=0;d<s.length;d++){const g=s[d];g.el&&g.el instanceof Element&&(i.push(g),$c(g,ed(g,u,r,t)),G4.set(g,g.el.getBoundingClientRect()))}s=n.default?j0(n.default()):[];for(let d=0;d<s.length;d++){const g=s[d];g.key!=null&&$c(g,ed(g,u,r,t))}return fi(f,null,s)}}}),t6=e6;function n6(e){const n=e.el;n[l0]&&n[l0](),n[h_]&&n[h_]()}function r6(e){q4.set(e,e.el.getBoundingClientRect())}function i6(e){const n=G4.get(e),t=q4.get(e),r=n.left-t.left,i=n.top-t.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function o6(e,n,t){const r=e.cloneNode(),i=e[nd];i&&i.forEach(u=>{u.split(/\s+/).forEach(f=>f&&r.classList.remove(f))}),t.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(r);const{hasTransform:o}=z4(r);return s.removeChild(r),o}const xf=e=>{const n=e.props["onUpdate:modelValue"]||!1;return er(n)?t=>Wh(n,t):n};function s6(e){e.target.composing=!0}function d_(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const gu=Symbol("_assign"),ni={created(e,{modifiers:{lazy:n,trim:t,number:r}},i){e[gu]=xf(i);const s=r||i.props&&i.props.type==="number";jc(e,n?"change":"input",o=>{if(o.target.composing)return;let u=e.value;t&&(u=u.trim()),s&&(u=Kg(u)),e[gu](u)}),t&&jc(e,"change",()=>{e.value=e.value.trim()}),n||(jc(e,"compositionstart",s6),jc(e,"compositionend",d_),jc(e,"change",d_))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(e[gu]=xf(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?Kg(e.value):e.value,f=n??"";u!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&n===t||i&&e.value.trim()===f)||(e.value=f))}},xl={deep:!0,created(e,n,t){e[gu]=xf(t),jc(e,"change",()=>{const r=e._modelValue,i=rd(e),s=e.checked,o=e[gu];if(er(r)){const u=T0(r,i),f=u!==-1;if(s&&!f)o(r.concat(i));else if(!s&&f){const d=[...r];d.splice(u,1),o(d)}}else if(sh(r)){const u=new Set(r);s?u.add(i):u.delete(i),o(u)}else o(W4(e,s))})},mounted:p_,beforeUpdate(e,n,t){e[gu]=xf(t),p_(e,n,t)}};function p_(e,{value:n,oldValue:t},r){e._modelValue=n;let i;if(er(n))i=T0(n,r.props.value)>-1;else if(sh(n))i=n.has(r.props.value);else{if(n===t)return;i=bf(n,W4(e,!0))}e.checked!==i&&(e.checked=i)}const ry={created(e,{value:n},t){e.checked=bf(n,t.props.value),e[gu]=xf(t),jc(e,"change",()=>{e[gu](rd(e))})},beforeUpdate(e,{value:n,oldValue:t},r){e[gu]=xf(r),n!==t&&(e.checked=bf(n,r.props.value))}},lo={deep:!0,created(e,{value:n,modifiers:{number:t}},r){const i=sh(n);jc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>t?Kg(rd(o)):rd(o));e[gu](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Xs(()=>{e._assigning=!1})}),e[gu]=xf(r)},mounted(e,{value:n}){g_(e,n)},beforeUpdate(e,n,t){e[gu]=xf(t)},updated(e,{value:n}){e._assigning||g_(e,n)}};function g_(e,n){const t=e.multiple,r=er(n);if(!(t&&!r&&!sh(n))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],u=rd(o);if(t)if(r){const f=typeof u;f==="string"||f==="number"?o.selected=n.some(d=>String(d)===String(u)):o.selected=T0(n,u)>-1}else o.selected=n.has(u);else if(bf(rd(o),n)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!t&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function rd(e){return"_value"in e?e._value:e.value}function W4(e,n){const t=n?"_trueValue":"_falseValue";return t in e?e[t]:n}const iy={created(e,n,t){pg(e,n,t,null,"created")},mounted(e,n,t){pg(e,n,t,null,"mounted")},beforeUpdate(e,n,t,r){pg(e,n,t,r,"beforeUpdate")},updated(e,n,t,r){pg(e,n,t,r,"updated")}};function Z4(e,n){switch(e){case"SELECT":return lo;case"TEXTAREA":return ni;default:switch(n){case"checkbox":return xl;case"radio":return ry;default:return ni}}}function pg(e,n,t,r,i){const o=Z4(e.tagName,t.props&&t.props.type)[i];o&&o(e,n,t,r)}function a6(){ni.getSSRProps=({value:e})=>({value:e}),ry.getSSRProps=({value:e},n)=>{if(n.props&&bf(n.props.value,e))return{checked:!0}},xl.getSSRProps=({value:e},n)=>{if(er(e)){if(n.props&&T0(e,n.props.value)>-1)return{checked:!0}}else if(sh(e)){if(n.props&&e.has(n.props.value))return{checked:!0}}else if(e)return{checked:!0}},iy.getSSRProps=(e,n)=>{if(typeof n.type!="string")return;const t=Z4(n.type.toUpperCase(),n.props&&n.props.type);if(t.getSSRProps)return t.getSSRProps(e,n)}}const l6=["ctrl","shift","alt","meta"],u6={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>l6.some(t=>e[`${t}Key`]&&!n.includes(t))},Lf=(e,n)=>{const t=e._withMods||(e._withMods={}),r=n.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<n.length;o++){const u=u6[n[o]];if(u&&u(i,n))return}return e(i,...s)})},c6={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},f6=(e,n)=>{const t=e._withKeys||(e._withKeys={}),r=n.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=Cl(i.key);if(n.some(o=>o===s||c6[o]===s))return e(i)})},K4=uo({patchProp:WA},kA);let Xd,m_=!1;function Y4(){return Xd||(Xd=f4(K4))}function J4(){return Xd=m_?Xd:h4(K4),m_=!0,Xd}const X4=(...e)=>{Y4().render(...e)},h6=(...e)=>{J4().hydrate(...e)},u0=(...e)=>{const n=Y4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=t5(r);if(!i)return;const s=n._component;!kr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,e5(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},n},Q4=(...e)=>{const n=J4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=t5(r);if(i)return t(i,!0,e5(i))},n};function e5(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function t5(e){return _o(e)?document.querySelector(e):e}let v_=!1;const d6=()=>{v_||(v_=!0,a6(),OA())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const p6=()=>{},g6=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:jw,BaseTransitionPropsValidators:W1,Comment:Ds,DeprecationTypes:PA,EffectScope:I1,ErrorCodes:$P,ErrorTypeStrings:bA,Fragment:Rn,KeepAlive:hM,ReactiveEffect:up,Static:Qf,Suspense:nA,Teleport:Mg,Text:yf,TrackOpTypes:BP,Transition:Vv,TransitionGroup:t6,TriggerOpTypes:OP,VueElement:q0,assertNumber:zP,callWithAsyncErrorHandling:mu,callWithErrorHandling:ud,camelize:ga,capitalize:Cp,cloneVNode:vc,compatUtils:EA,compile:p6,computed:gr,createApp:u0,createBlock:$a,createCommentVNode:dn,createElementBlock:qe,createElementVNode:P,createHydrationRenderer:h4,createPropsRestProxy:TM,createRenderer:f4,createSSRApp:Q4,createSlots:Jw,createStaticVNode:uc,createTextVNode:Ei,createVNode:fi,customRef:Sw,defineAsyncComponent:cM,defineComponent:cs,defineCustomElement:V4,defineEmits:wM,defineExpose:xM,defineModel:CM,defineOptions:LM,defineProps:bM,defineSSRCustomElement:KA,defineSlots:SM,devtools:wA,effect:rP,effectScope:R1,getCurrentInstance:yu,getCurrentScope:F1,getCurrentWatcher:IP,getTransitionRawChildren:j0,guardReactiveProps:P4,h:H0,handleError:ah,hasInjectionContext:t4,hydrate:h6,hydrateOnIdle:iM,hydrateOnInteraction:lM,hydrateOnMediaQuery:aM,hydrateOnVisible:sM,initCustomFormatter:vA,initDirectivesForSSR:d6,inject:Wl,isMemoSame:B4,isProxy:I0,isReactive:hc,isReadonly:wf,isRef:Xo,isRuntimeOnly:pA,isShallow:ql,isVNode:Uc,markRaw:R0,mergeDefaults:AM,mergeModels:kM,mergeProps:M4,nextTick:Xs,normalizeClass:zi,normalizeProps:XE,normalizeStyle:pu,onActivated:$w,onBeforeMount:Hw,onBeforeUnmount:cd,onBeforeUpdate:K1,onDeactivated:Uw,onErrorCaptured:Zw,onMounted:$s,onRenderTracked:Ww,onRenderTriggered:qw,onScopeDispose:aw,onServerPrefetch:Gw,onUnmounted:mc,onUpdated:$0,onWatcherCleanup:Pw,openBlock:$e,popScopeId:qP,provide:Yd,proxyRefs:H1,pushScopeId:GP,queuePostFlushCb:hp,reactive:Kl,readonly:Ou,ref:Ft,registerRuntimeCompiler:dA,render:X4,renderList:Rr,renderSlot:vM,resolveComponent:Kw,resolveDirective:mM,resolveDynamicComponent:gM,resolveFilter:CA,resolveTransitionHooks:ed,setBlockTracking:Iv,setDevtoolsHook:xA,setTransitionHooks:$c,shallowReactive:U1,shallowReadonly:LP,shallowRef:V1,ssrContextKey:m4,ssrUtils:SA,stop:iP,toDisplayString:Zt,toHandlerKey:Gd,toHandlers:yM,toRaw:Ti,toRef:TP,toRefs:Cw,toValue:EP,transformVNodeArgs:lA,triggerRef:CP,unref:Wn,useAttrs:MM,useCssModule:XA,useCssVars:IA,useHost:H4,useId:YP,useModel:KM,useSSRContext:v4,useShadowRoot:JA,useSlots:PM,useTemplateRef:JP,useTransitionState:q1,vModelCheckbox:xl,vModelDynamic:iy,vModelRadio:ry,vModelSelect:lo,vModelText:ni,vShow:G0,version:O4,warn:_A,watch:Co,watchEffect:vp,watchPostEffect:WM,watchSyncEffect:y4,withAsyncContext:NM,withCtx:Hl,withDefaults:EM,withDirectives:In,withKeys:f6,withMemo:yA,withModifiers:Lf,withScopeId:WP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let n5;const W0=e=>n5=e,r5=Symbol();function qv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Qd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Qd||(Qd={}));function m6(){const e=R1(!0),n=e.run(()=>Ft({}));let t=[],r=[];const i=R0({install(s){W0(i),i._a=s,s.provide(r5,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:e,_s:new Map,state:n});return i}const i5=()=>{};function y_(e,n,t,r=i5){e.push(n);const i=()=>{const s=e.indexOf(n);s>-1&&(e.splice(s,1),r())};return!t&&F1()&&aw(i),i}function Ph(e,...n){e.slice().forEach(t=>{t(...n)})}const v6=e=>e(),__=Symbol(),Zm=Symbol();function Wv(e,n){e instanceof Map&&n instanceof Map?n.forEach((t,r)=>e.set(r,t)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t],i=e[t];qv(i)&&qv(r)&&e.hasOwnProperty(t)&&!Xo(r)&&!hc(r)?e[t]=Wv(i,r):e[t]=r}return e}const y6=Symbol();function _6(e){return!qv(e)||!e.hasOwnProperty(y6)}const{assign:sf}=Object;function b6(e){return!!(Xo(e)&&e.effect)}function w6(e,n,t,r){const{state:i,actions:s,getters:o}=n,u=t.state.value[e];let f;function d(){u||(t.state.value[e]=i?i():{});const g=Cw(t.state.value[e]);return sf(g,s,Object.keys(o||{}).reduce((y,x)=>(y[x]=R0(gr(()=>{W0(t);const _=t._s.get(e);return o[x].call(_,_)})),y),{}))}return f=o5(e,d,n,t,r,!0),f}function o5(e,n,t={},r,i,s){let o;const u=sf({actions:{}},t),f={deep:!0};let d,g,y=[],x=[],_;const E=r.state.value[e];!s&&!E&&(r.state.value[e]={}),Ft({});let T;function D(W){let V;d=g=!1,typeof W=="function"?(W(r.state.value[e]),V={type:Qd.patchFunction,storeId:e,events:_}):(Wv(r.state.value[e],W),V={type:Qd.patchObject,payload:W,storeId:e,events:_});const Y=T=Symbol();Xs().then(()=>{T===Y&&(d=!0)}),g=!0,Ph(y,V,r.state.value[e])}const O=s?function(){const{state:V}=t,Y=V?V():{};this.$patch(F=>{sf(F,Y)})}:i5;function $(){o.stop(),y=[],x=[],r._s.delete(e)}const K=(W,V="")=>{if(__ in W)return W[Zm]=V,W;const Y=function(){W0(r);const F=Array.from(arguments),I=[],j=[];function H(te){I.push(te)}function U(te){j.push(te)}Ph(x,{args:F,name:Y[Zm],store:ae,after:H,onError:U});let R;try{R=W.apply(this&&this.$id===e?this:ae,F)}catch(te){throw Ph(j,te),te}return R instanceof Promise?R.then(te=>(Ph(I,te),te)).catch(te=>(Ph(j,te),Promise.reject(te))):(Ph(I,R),R)};return Y[__]=!0,Y[Zm]=V,Y},X={_p:r,$id:e,$onAction:y_.bind(null,x),$patch:D,$reset:O,$subscribe(W,V={}){const Y=y_(y,W,V.detached,()=>F()),F=o.run(()=>Co(()=>r.state.value[e],I=>{(V.flush==="sync"?g:d)&&W({storeId:e,type:Qd.direct,events:_},I)},sf({},f,V)));return Y},$dispose:$},ae=Kl(X);r._s.set(e,ae);const Le=(r._a&&r._a.runWithContext||v6)(()=>r._e.run(()=>(o=R1()).run(()=>n({action:K}))));for(const W in Le){const V=Le[W];if(Xo(V)&&!b6(V)||hc(V))s||(E&&_6(V)&&(Xo(V)?V.value=E[W]:Wv(V,E[W])),r.state.value[e][W]=V);else if(typeof V=="function"){const Y=K(V,W);Le[W]=Y,u.actions[W]=V}}return sf(ae,Le),sf(Ti(ae),Le),Object.defineProperty(ae,"$state",{get:()=>r.state.value[e],set:W=>{D(V=>{sf(V,W)})}}),r._p.forEach(W=>{sf(ae,o.run(()=>W({store:ae,app:r._a,pinia:r,options:u})))}),E&&s&&t.hydrate&&t.hydrate(ae.$state,E),d=!0,g=!0,ae}/*! #__NO_SIDE_EFFECTS__ */function Ap(e,n,t){let r,i;const s=typeof n=="function";typeof e=="string"?(r=e,i=s?t:n):(i=e,r=e.id);function o(u,f){const d=t4();return u=u||(d?Wl(r5,null):null),u&&W0(u),u=n5,u._s.has(r)||(s?o5(r,n,i,u):w6(r,i,u)),u._s.get(r)}return o.$id=r,o}function s5(e,n){return function(){return e.apply(n,arguments)}}const{toString:x6}=Object.prototype,{getPrototypeOf:oy}=Object,Z0=(e=>n=>{const t=x6.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Hu=e=>(e=e.toLowerCase(),n=>Z0(n)===e),K0=e=>n=>typeof n===e,{isArray:fd}=Array,_p=K0("undefined");function L6(e){return e!==null&&!_p(e)&&e.constructor!==null&&!_p(e.constructor)&&Zl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const a5=Hu("ArrayBuffer");function S6(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&a5(e.buffer),n}const C6=K0("string"),Zl=K0("function"),l5=K0("number"),Y0=e=>e!==null&&typeof e=="object",E6=e=>e===!0||e===!1,Dg=e=>{if(Z0(e)!=="object")return!1;const n=oy(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},P6=Hu("Date"),M6=Hu("File"),A6=Hu("Blob"),k6=Hu("FileList"),T6=e=>Y0(e)&&Zl(e.pipe),N6=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Zl(e.append)&&((n=Z0(e))==="formdata"||n==="object"&&Zl(e.toString)&&e.toString()==="[object FormData]"))},D6=Hu("URLSearchParams"),[B6,O6,I6,R6]=["ReadableStream","Request","Response","Headers"].map(Hu),F6=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kp(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),fd(e))for(r=0,i=e.length;r<i;r++)n.call(null,e[r],r,e);else{const s=t?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],n.call(null,e[u],u,e)}}function u5(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,i;for(;r-- >0;)if(i=t[r],n===i.toLowerCase())return i;return null}const Zf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,c5=e=>!_p(e)&&e!==Zf;function Zv(){const{caseless:e}=c5(this)&&this||{},n={},t=(r,i)=>{const s=e&&u5(n,i)||i;Dg(n[s])&&Dg(r)?n[s]=Zv(n[s],r):Dg(r)?n[s]=Zv({},r):fd(r)?n[s]=r.slice():n[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&kp(arguments[r],t);return n}const j6=(e,n,t,{allOwnKeys:r}={})=>(kp(n,(i,s)=>{t&&Zl(i)?e[s]=s5(i,t):e[s]=i},{allOwnKeys:r}),e),z6=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$6=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},U6=(e,n,t,r)=>{let i,s,o;const u={};if(n=n||{},e==null)return n;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,n))&&!u[o]&&(n[o]=e[o],u[o]=!0);e=t!==!1&&oy(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},V6=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},H6=e=>{if(!e)return null;if(fd(e))return e;let n=e.length;if(!l5(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},G6=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&oy(Uint8Array)),q6=(e,n)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;n.call(e,s[0],s[1])}},W6=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},Z6=Hu("HTMLFormElement"),K6=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),b_=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),Y6=Hu("RegExp"),f5=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};kp(t,(i,s)=>{let o;(o=n(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},J6=e=>{f5(e,(n,t)=>{if(Zl(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(Zl(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},X6=(e,n)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return fd(e)?r(e):r(String(e).split(n)),t},Q6=()=>{},ek=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function tk(e){return!!(e&&Zl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const nk=e=>{const n=new Array(10),t=(r,i)=>{if(Y0(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const s=fd(r)?[]:{};return kp(r,(o,u)=>{const f=t(o,i+1);!_p(f)&&(s[u]=f)}),n[i]=void 0,s}}return r};return t(e,0)},rk=Hu("AsyncFunction"),ik=e=>e&&(Y0(e)||Zl(e))&&Zl(e.then)&&Zl(e.catch),h5=((e,n)=>e?setImmediate:n?((t,r)=>(Zf.addEventListener("message",({source:i,data:s})=>{i===Zf&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Zf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Zl(Zf.postMessage)),ok=typeof queueMicrotask<"u"?queueMicrotask.bind(Zf):typeof process<"u"&&process.nextTick||h5,Jt={isArray:fd,isArrayBuffer:a5,isBuffer:L6,isFormData:N6,isArrayBufferView:S6,isString:C6,isNumber:l5,isBoolean:E6,isObject:Y0,isPlainObject:Dg,isReadableStream:B6,isRequest:O6,isResponse:I6,isHeaders:R6,isUndefined:_p,isDate:P6,isFile:M6,isBlob:A6,isRegExp:Y6,isFunction:Zl,isStream:T6,isURLSearchParams:D6,isTypedArray:G6,isFileList:k6,forEach:kp,merge:Zv,extend:j6,trim:F6,stripBOM:z6,inherits:$6,toFlatObject:U6,kindOf:Z0,kindOfTest:Hu,endsWith:V6,toArray:H6,forEachEntry:q6,matchAll:W6,isHTMLForm:Z6,hasOwnProperty:b_,hasOwnProp:b_,reduceDescriptors:f5,freezeMethods:J6,toObjectSet:X6,toCamelCase:K6,noop:Q6,toFiniteNumber:ek,findKey:u5,global:Zf,isContextDefined:c5,isSpecCompliantForm:tk,toJSONObject:nk,isAsyncFn:rk,isThenable:ik,setImmediate:h5,asap:ok};function ii(e,n,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Jt.inherits(ii,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Jt.toJSONObject(this.config),code:this.code,status:this.status}}});const d5=ii.prototype,p5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p5[e]={value:e}});Object.defineProperties(ii,p5);Object.defineProperty(d5,"isAxiosError",{value:!0});ii.from=(e,n,t,r,i,s)=>{const o=Object.create(d5);return Jt.toFlatObject(e,o,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),ii.call(o,e.message,n,t,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const sk=null;function Kv(e){return Jt.isPlainObject(e)||Jt.isArray(e)}function g5(e){return Jt.endsWith(e,"[]")?e.slice(0,-2):e}function w_(e,n,t){return e?e.concat(n).map(function(i,s){return i=g5(i),!t&&s?"["+i+"]":i}).join(t?".":""):n}function ak(e){return Jt.isArray(e)&&!e.some(Kv)}const lk=Jt.toFlatObject(Jt,{},null,function(n){return/^is[A-Z]/.test(n)});function J0(e,n,t){if(!Jt.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=Jt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,D){return!Jt.isUndefined(D[T])});const r=t.metaTokens,i=t.visitor||g,s=t.dots,o=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Jt.isSpecCompliantForm(n);if(!Jt.isFunction(i))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(Jt.isDate(E))return E.toISOString();if(!f&&Jt.isBlob(E))throw new ii("Blob is not supported. Use a Buffer instead.");return Jt.isArrayBuffer(E)||Jt.isTypedArray(E)?f&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function g(E,T,D){let O=E;if(E&&!D&&typeof E=="object"){if(Jt.endsWith(T,"{}"))T=r?T:T.slice(0,-2),E=JSON.stringify(E);else if(Jt.isArray(E)&&ak(E)||(Jt.isFileList(E)||Jt.endsWith(T,"[]"))&&(O=Jt.toArray(E)))return T=g5(T),O.forEach(function(K,X){!(Jt.isUndefined(K)||K===null)&&n.append(o===!0?w_([T],X,s):o===null?T:T+"[]",d(K))}),!1}return Kv(E)?!0:(n.append(w_(D,T,s),d(E)),!1)}const y=[],x=Object.assign(lk,{defaultVisitor:g,convertValue:d,isVisitable:Kv});function _(E,T){if(!Jt.isUndefined(E)){if(y.indexOf(E)!==-1)throw Error("Circular reference detected in "+T.join("."));y.push(E),Jt.forEach(E,function(O,$){(!(Jt.isUndefined(O)||O===null)&&i.call(n,O,Jt.isString($)?$.trim():$,T,x))===!0&&_(O,T?T.concat($):[$])}),y.pop()}}if(!Jt.isObject(e))throw new TypeError("data must be an object");return _(e),n}function x_(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function sy(e,n){this._pairs=[],e&&J0(e,this,n)}const m5=sy.prototype;m5.append=function(n,t){this._pairs.push([n,t])};m5.toString=function(n){const t=n?function(r){return n.call(this,r,x_)}:x_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function uk(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v5(e,n,t){if(!n)return e;const r=t&&t.encode||uk;Jt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(n,t):s=Jt.isURLSearchParams(n)?n.toString():new sy(n,t).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class L_{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Jt.forEach(this.handlers,function(r){r!==null&&n(r)})}}const y5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ck=typeof URLSearchParams<"u"?URLSearchParams:sy,fk=typeof FormData<"u"?FormData:null,hk=typeof Blob<"u"?Blob:null,dk={isBrowser:!0,classes:{URLSearchParams:ck,FormData:fk,Blob:hk},protocols:["http","https","file","blob","url","data"]},ay=typeof window<"u"&&typeof document<"u",Yv=typeof navigator=="object"&&navigator||void 0,pk=ay&&(!Yv||["ReactNative","NativeScript","NS"].indexOf(Yv.product)<0),gk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mk=ay&&window.location.href||"http://localhost",vk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ay,hasStandardBrowserEnv:pk,hasStandardBrowserWebWorkerEnv:gk,navigator:Yv,origin:mk},Symbol.toStringTag,{value:"Module"})),Ra={...vk,...dk};function yk(e,n){return J0(e,new Ra.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Ra.isNode&&Jt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},n))}function _k(e){return Jt.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function bk(e){const n={},t=Object.keys(e);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],n[s]=e[s];return n}function _5(e){function n(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),f=s>=t.length;return o=!o&&Jt.isArray(i)?i.length:o,f?(Jt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Jt.isObject(i[o]))&&(i[o]=[]),n(t,r,i[o],s)&&Jt.isArray(i[o])&&(i[o]=bk(i[o])),!u)}if(Jt.isFormData(e)&&Jt.isFunction(e.entries)){const t={};return Jt.forEachEntry(e,(r,i)=>{n(_k(r),i,t,0)}),t}return null}function wk(e,n,t){if(Jt.isString(e))try{return(n||JSON.parse)(e),Jt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const Tp={transitional:y5,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Jt.isObject(n);if(s&&Jt.isHTMLForm(n)&&(n=new FormData(n)),Jt.isFormData(n))return i?JSON.stringify(_5(n)):n;if(Jt.isArrayBuffer(n)||Jt.isBuffer(n)||Jt.isStream(n)||Jt.isFile(n)||Jt.isBlob(n)||Jt.isReadableStream(n))return n;if(Jt.isArrayBufferView(n))return n.buffer;if(Jt.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return yk(n,this.formSerializer).toString();if((u=Jt.isFileList(n))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return J0(u?{"files[]":n}:n,f&&new f,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),wk(n)):n}],transformResponse:[function(n){const t=this.transitional||Tp.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Jt.isResponse(n)||Jt.isReadableStream(n))return n;if(n&&Jt.isString(n)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(n)}catch(u){if(o)throw u.name==="SyntaxError"?ii.from(u,ii.ERR_BAD_RESPONSE,this,null,this.response):u}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ra.classes.FormData,Blob:Ra.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Jt.forEach(["delete","get","head","post","put","patch"],e=>{Tp.headers[e]={}});const xk=Jt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lk=e=>{const n={};let t,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||n[t]&&xk[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},S_=Symbol("internals");function Cd(e){return e&&String(e).trim().toLowerCase()}function Bg(e){return e===!1||e==null?e:Jt.isArray(e)?e.map(Bg):String(e)}function Sk(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const Ck=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Km(e,n,t,r,i){if(Jt.isFunction(r))return r.call(this,n,t);if(i&&(n=t),!!Jt.isString(n)){if(Jt.isString(r))return n.indexOf(r)!==-1;if(Jt.isRegExp(r))return r.test(n)}}function Ek(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function Pk(e,n){const t=Jt.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(i,s,o){return this[r].call(this,n,i,s,o)},configurable:!0})})}let El=class{constructor(n){n&&this.set(n)}set(n,t,r){const i=this;function s(u,f,d){const g=Cd(f);if(!g)throw new Error("header name must be a non-empty string");const y=Jt.findKey(i,g);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||f]=Bg(u))}const o=(u,f)=>Jt.forEach(u,(d,g)=>s(d,g,f));if(Jt.isPlainObject(n)||n instanceof this.constructor)o(n,t);else if(Jt.isString(n)&&(n=n.trim())&&!Ck(n))o(Lk(n),t);else if(Jt.isHeaders(n))for(const[u,f]of n.entries())s(f,u,r);else n!=null&&s(t,n,r);return this}get(n,t){if(n=Cd(n),n){const r=Jt.findKey(this,n);if(r){const i=this[r];if(!t)return i;if(t===!0)return Sk(i);if(Jt.isFunction(t))return t.call(this,i,r);if(Jt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=Cd(n),n){const r=Jt.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||Km(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let i=!1;function s(o){if(o=Cd(o),o){const u=Jt.findKey(r,o);u&&(!t||Km(r,r[u],u,t))&&(delete r[u],i=!0)}}return Jt.isArray(n)?n.forEach(s):s(n),i}clear(n){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!n||Km(this,this[s],s,n,!0))&&(delete this[s],i=!0)}return i}normalize(n){const t=this,r={};return Jt.forEach(this,(i,s)=>{const o=Jt.findKey(r,s);if(o){t[o]=Bg(i),delete t[s];return}const u=n?Ek(s):String(s).trim();u!==s&&delete t[s],t[u]=Bg(i),r[u]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return Jt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=n&&Jt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[S_]=this[S_]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Cd(o);r[u]||(Pk(i,o),r[u]=!0)}return Jt.isArray(n)?n.forEach(s):s(n),this}};El.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Jt.reduceDescriptors(El.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});Jt.freezeMethods(El);function Ym(e,n){const t=this||Tp,r=n||t,i=El.from(r.headers);let s=r.data;return Jt.forEach(e,function(u){s=u.call(t,s,i.normalize(),n?n.status:void 0)}),i.normalize(),s}function b5(e){return!!(e&&e.__CANCEL__)}function hd(e,n,t){ii.call(this,e??"canceled",ii.ERR_CANCELED,n,t),this.name="CanceledError"}Jt.inherits(hd,ii,{__CANCEL__:!0});function w5(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new ii("Request failed with status code "+t.status,[ii.ERR_BAD_REQUEST,ii.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Mk(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Ak(e,n){e=e||10;const t=new Array(e),r=new Array(e);let i=0,s=0,o;return n=n!==void 0?n:1e3,function(f){const d=Date.now(),g=r[s];o||(o=d),t[i]=f,r[i]=d;let y=s,x=0;for(;y!==i;)x+=t[y++],y=y%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),d-o<n)return;const _=g&&d-g;return _?Math.round(x*1e3/_):void 0}}function kk(e,n){let t=0,r=1e3/n,i,s;const o=(d,g=Date.now())=>{t=g,i=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const g=Date.now(),y=g-t;y>=r?o(d,g):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-y)))},()=>i&&o(i)]}const c0=(e,n,t=3)=>{let r=0;const i=Ak(50,250);return kk(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,f=o-r,d=i(f),g=o<=u;r=o;const y={loaded:o,total:u,progress:u?o/u:void 0,bytes:f,rate:d||void 0,estimated:d&&u&&g?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[n?"download":"upload"]:!0};e(y)},t)},C_=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},E_=e=>(...n)=>Jt.asap(()=>e(...n)),Tk=Ra.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Ra.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Ra.origin),Ra.navigator&&/(msie|trident)/i.test(Ra.navigator.userAgent)):()=>!0,Nk=Ra.hasStandardBrowserEnv?{write(e,n,t,r,i,s){const o=[e+"="+encodeURIComponent(n)];Jt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Jt.isString(r)&&o.push("path="+r),Jt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Dk(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Bk(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function x5(e,n,t){let r=!Dk(n);return e&&(r||t==!1)?Bk(e,n):n}const P_=e=>e instanceof El?{...e}:e;function oh(e,n){n=n||{};const t={};function r(d,g,y,x){return Jt.isPlainObject(d)&&Jt.isPlainObject(g)?Jt.merge.call({caseless:x},d,g):Jt.isPlainObject(g)?Jt.merge({},g):Jt.isArray(g)?g.slice():g}function i(d,g,y,x){if(Jt.isUndefined(g)){if(!Jt.isUndefined(d))return r(void 0,d,y,x)}else return r(d,g,y,x)}function s(d,g){if(!Jt.isUndefined(g))return r(void 0,g)}function o(d,g){if(Jt.isUndefined(g)){if(!Jt.isUndefined(d))return r(void 0,d)}else return r(void 0,g)}function u(d,g,y){if(y in n)return r(d,g);if(y in e)return r(void 0,d)}const f={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,g,y)=>i(P_(d),P_(g),y,!0)};return Jt.forEach(Object.keys(Object.assign({},e,n)),function(g){const y=f[g]||i,x=y(e[g],n[g],g);Jt.isUndefined(x)&&y!==u||(t[g]=x)}),t}const L5=e=>{const n=oh({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=n;n.headers=o=El.from(o),n.url=v5(x5(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(Jt.isFormData(t)){if(Ra.hasStandardBrowserEnv||Ra.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((f=o.getContentType())!==!1){const[d,...g]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...g].join("; "))}}if(Ra.hasStandardBrowserEnv&&(r&&Jt.isFunction(r)&&(r=r(n)),r||r!==!1&&Tk(n.url))){const d=i&&s&&Nk.read(s);d&&o.set(i,d)}return n},Ok=typeof XMLHttpRequest<"u",Ik=Ok&&function(e){return new Promise(function(t,r){const i=L5(e);let s=i.data;const o=El.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:d}=i,g,y,x,_,E;function T(){_&&_(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let D=new XMLHttpRequest;D.open(i.method.toUpperCase(),i.url,!0),D.timeout=i.timeout;function O(){if(!D)return;const K=El.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ae={data:!u||u==="text"||u==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:K,config:e,request:D};w5(function(Le){t(Le),T()},function(Le){r(Le),T()},ae),D=null}"onloadend"in D?D.onloadend=O:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(O)},D.onabort=function(){D&&(r(new ii("Request aborted",ii.ECONNABORTED,e,D)),D=null)},D.onerror=function(){r(new ii("Network Error",ii.ERR_NETWORK,e,D)),D=null},D.ontimeout=function(){let X=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ae=i.transitional||y5;i.timeoutErrorMessage&&(X=i.timeoutErrorMessage),r(new ii(X,ae.clarifyTimeoutError?ii.ETIMEDOUT:ii.ECONNABORTED,e,D)),D=null},s===void 0&&o.setContentType(null),"setRequestHeader"in D&&Jt.forEach(o.toJSON(),function(X,ae){D.setRequestHeader(ae,X)}),Jt.isUndefined(i.withCredentials)||(D.withCredentials=!!i.withCredentials),u&&u!=="json"&&(D.responseType=i.responseType),d&&([x,E]=c0(d,!0),D.addEventListener("progress",x)),f&&D.upload&&([y,_]=c0(f),D.upload.addEventListener("progress",y),D.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(g=K=>{D&&(r(!K||K.type?new hd(null,e,D):K),D.abort(),D=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const $=Mk(i.url);if($&&Ra.protocols.indexOf($)===-1){r(new ii("Unsupported protocol "+$+":",ii.ERR_BAD_REQUEST,e));return}D.send(s||null)})},Rk=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,i;const s=function(d){if(!i){i=!0,u();const g=d instanceof Error?d:this.reason;r.abort(g instanceof ii?g:new hd(g instanceof Error?g.message:g))}};let o=n&&setTimeout(()=>{o=null,s(new ii(`timeout ${n} of ms exceeded`,ii.ETIMEDOUT))},n);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:f}=r;return f.unsubscribe=()=>Jt.asap(u),f}},Fk=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,i;for(;r<t;)i=r+n,yield e.slice(r,i),r=i},jk=async function*(e,n){for await(const t of zk(e))yield*Fk(t,n)},zk=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},M_=(e,n,t,r)=>{const i=jk(e,n);let s=0,o,u=f=>{o||(o=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:d,value:g}=await i.next();if(d){u(),f.close();return}let y=g.byteLength;if(t){let x=s+=y;t(x)}f.enqueue(new Uint8Array(g))}catch(d){throw u(d),d}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},X0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",S5=X0&&typeof ReadableStream=="function",$k=X0&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),C5=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Uk=S5&&C5(()=>{let e=!1;const n=new Request(Ra.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),A_=64*1024,Jv=S5&&C5(()=>Jt.isReadableStream(new Response("").body)),f0={stream:Jv&&(e=>e.body)};X0&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!f0[n]&&(f0[n]=Jt.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new ii(`Response type '${n}' is not supported`,ii.ERR_NOT_SUPPORT,r)})})})(new Response);const Vk=async e=>{if(e==null)return 0;if(Jt.isBlob(e))return e.size;if(Jt.isSpecCompliantForm(e))return(await new Request(Ra.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Jt.isArrayBufferView(e)||Jt.isArrayBuffer(e))return e.byteLength;if(Jt.isURLSearchParams(e)&&(e=e+""),Jt.isString(e))return(await $k(e)).byteLength},Hk=async(e,n)=>{const t=Jt.toFiniteNumber(e.getContentLength());return t??Vk(n)},Gk=X0&&(async e=>{let{url:n,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:f,responseType:d,headers:g,withCredentials:y="same-origin",fetchOptions:x}=L5(e);d=d?(d+"").toLowerCase():"text";let _=Rk([i,s&&s.toAbortSignal()],o),E;const T=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let D;try{if(f&&Uk&&t!=="get"&&t!=="head"&&(D=await Hk(g,r))!==0){let ae=new Request(n,{method:"POST",body:r,duplex:"half"}),ue;if(Jt.isFormData(r)&&(ue=ae.headers.get("content-type"))&&g.setContentType(ue),ae.body){const[Le,W]=C_(D,c0(E_(f)));r=M_(ae.body,A_,Le,W)}}Jt.isString(y)||(y=y?"include":"omit");const O="credentials"in Request.prototype;E=new Request(n,{...x,signal:_,method:t.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:O?y:void 0});let $=await fetch(E);const K=Jv&&(d==="stream"||d==="response");if(Jv&&(u||K&&T)){const ae={};["status","statusText","headers"].forEach(V=>{ae[V]=$[V]});const ue=Jt.toFiniteNumber($.headers.get("content-length")),[Le,W]=u&&C_(ue,c0(E_(u),!0))||[];$=new Response(M_($.body,A_,Le,()=>{W&&W(),T&&T()}),ae)}d=d||"text";let X=await f0[Jt.findKey(f0,d)||"text"]($,e);return!K&&T&&T(),await new Promise((ae,ue)=>{w5(ae,ue,{data:X,headers:El.from($.headers),status:$.status,statusText:$.statusText,config:e,request:E})})}catch(O){throw T&&T(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new ii("Network Error",ii.ERR_NETWORK,e,E),{cause:O.cause||O}):ii.from(O,O&&O.code,e,E)}}),Xv={http:sk,xhr:Ik,fetch:Gk};Jt.forEach(Xv,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const k_=e=>`- ${e}`,qk=e=>Jt.isFunction(e)||e===null||e===!1,E5={getAdapter:e=>{e=Jt.isArray(e)?e:[e];const{length:n}=e;let t,r;const i={};for(let s=0;s<n;s++){t=e[s];let o;if(r=t,!qk(t)&&(r=Xv[(o=String(t)).toLowerCase()],r===void 0))throw new ii(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=n?s.length>1?`since :
`+s.map(k_).join(`
`):" "+k_(s[0]):"as no adapter specified";throw new ii("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Xv};function Jm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hd(null,e)}function T_(e){return Jm(e),e.headers=El.from(e.headers),e.data=Ym.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),E5.getAdapter(e.adapter||Tp.adapter)(e).then(function(r){return Jm(e),r.data=Ym.call(e,e.transformResponse,r),r.headers=El.from(r.headers),r},function(r){return b5(r)||(Jm(e),r&&r.response&&(r.response.data=Ym.call(e,e.transformResponse,r.response),r.response.headers=El.from(r.response.headers))),Promise.reject(r)})}const P5="1.8.4",Q0={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Q0[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const N_={};Q0.transitional=function(n,t,r){function i(s,o){return"[Axios v"+P5+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(n===!1)throw new ii(i(o," has been removed"+(t?" in "+t:"")),ii.ERR_DEPRECATED);return t&&!N_[o]&&(N_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(s,o,u):!0}};Q0.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function Wk(e,n,t){if(typeof e!="object")throw new ii("options must be an object",ii.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=n[s];if(o){const u=e[s],f=u===void 0||o(u,s,e);if(f!==!0)throw new ii("option "+s+" must be "+f,ii.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ii("Unknown option "+s,ii.ERR_BAD_OPTION)}}const Og={assertOptions:Wk,validators:Q0},tc=Og.validators;let eh=class{constructor(n){this.defaults=n,this.interceptors={request:new L_,response:new L_}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=oh(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Og.assertOptions(r,{silentJSONParsing:tc.transitional(tc.boolean),forcedJSONParsing:tc.transitional(tc.boolean),clarifyTimeoutError:tc.transitional(tc.boolean)},!1),i!=null&&(Jt.isFunction(i)?t.paramsSerializer={serialize:i}:Og.assertOptions(i,{encode:tc.function,serialize:tc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Og.assertOptions(t,{baseUrl:tc.spelling("baseURL"),withXsrfToken:tc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Jt.merge(s.common,s[t.method]);s&&Jt.forEach(["delete","get","head","post","put","patch","common"],E=>{delete s[E]}),t.headers=El.concat(o,s);const u=[];let f=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(f=f&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let g,y=0,x;if(!f){const E=[T_.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,d),x=E.length,g=Promise.resolve(t);y<x;)g=g.then(E[y++],E[y++]);return g}x=u.length;let _=t;for(y=0;y<x;){const E=u[y++],T=u[y++];try{_=E(_)}catch(D){T.call(this,D);break}}try{g=T_.call(this,_)}catch(E){return Promise.reject(E)}for(y=0,x=d.length;y<x;)g=g.then(d[y++],d[y++]);return g}getUri(n){n=oh(this.defaults,n);const t=x5(n.baseURL,n.url,n.allowAbsoluteUrls);return v5(t,n.params,n.paramsSerializer)}};Jt.forEach(["delete","get","head","options"],function(n){eh.prototype[n]=function(t,r){return this.request(oh(r||{},{method:n,url:t,data:(r||{}).data}))}});Jt.forEach(["post","put","patch"],function(n){function t(r){return function(s,o,u){return this.request(oh(u||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}eh.prototype[n]=t(),eh.prototype[n+"Form"]=t(!0)});let Zk=class M5{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},n(function(s,o,u){r.reason||(r.reason=new hd(s,o,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new M5(function(i){n=i}),cancel:n}}};function Kk(e){return function(t){return e.apply(null,t)}}function Yk(e){return Jt.isObject(e)&&e.isAxiosError===!0}const Qv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qv).forEach(([e,n])=>{Qv[n]=e});function A5(e){const n=new eh(e),t=s5(eh.prototype.request,n);return Jt.extend(t,eh.prototype,n,{allOwnKeys:!0}),Jt.extend(t,n,null,{allOwnKeys:!0}),t.create=function(i){return A5(oh(e,i))},t}const Ls=A5(Tp);Ls.Axios=eh;Ls.CanceledError=hd;Ls.CancelToken=Zk;Ls.isCancel=b5;Ls.VERSION=P5;Ls.toFormData=J0;Ls.AxiosError=ii;Ls.Cancel=Ls.CanceledError;Ls.all=function(n){return Promise.all(n)};Ls.spread=Kk;Ls.isAxiosError=Yk;Ls.mergeConfig=oh;Ls.AxiosHeaders=El;Ls.formToJSON=e=>_5(Jt.isHTMLForm(e)?new FormData(e):e);Ls.getAdapter=E5.getAdapter;Ls.HttpStatusCode=Qv;Ls.default=Ls;const{Axios:AV,AxiosError:kV,CanceledError:TV,isCancel:NV,CancelToken:DV,VERSION:BV,all:OV,Cancel:IV,isAxiosError:RV,spread:FV,toFormData:jV,AxiosHeaders:zV,HttpStatusCode:$V,formToJSON:UV,getAdapter:VV,mergeConfig:HV}=Ls,gn=Kl({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let _f=null,Kf=null;const Jk=1e3;function em(){if(gn.isEnabled){gn.isRecording=!0,gn.startTime=performance.now(),gn.frameCount=0,gn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(_f=new PerformanceObserver(e=>{e.getEntries().forEach(t=>{gn.longTasks.push({duration:t.duration,startTime:t.startTime,name:t.name,component:Uu()})})}),_f.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tches non support",e)}Xk(),ly()}}function h0(){gn.isRecording=!1,_f&&(_f.disconnect(),_f=null),D5()}function e1(){_f&&(_f.disconnect(),_f=null),D5(),gn.measures=[],gn.longTasks=[],gn.memorySnapshots=[],gn.operationHistory=[],gn.frameCount=0,gn.framesPerSecond=0,gn.lastFpsUpdate=0,gn.isEnabled&&em()}function k5(e,n,t){if(!gn.isEnabled||!gn.isRecording)return()=>{};const r=performance.now(),i=gn.currentOperation;return gn.currentOperation=e,gn.operationStack.push(e),()=>{const s=performance.now()-r;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:r,duration:s,component:n||Uu(),info:t,parentOperation:i||void 0}),s>10&&gn.operationHistory.push({operation:e,component:n||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}async function T5(e,n,t,r){if(!gn.isEnabled||!gn.isRecording)return n();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return await n()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:o,component:t||Uu(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||Uu()||"unknown",durationMs:o,timestamp:Date.now()})}}function N5(e,n,t,r){if(!gn.isEnabled||!gn.isRecording)return n();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return n()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:o,component:t||Uu(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||Uu()||"unknown",durationMs:o,timestamp:Date.now()})}}function ly(){!gn.isEnabled||!gn.isRecording||(performance.memory?gn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):gn.memorySnapshots.push({timestamp:performance.now()}))}function Xk(){Kf!==null&&cancelAnimationFrame(Kf),gn.frameCount=0,gn.lastFpsUpdate=performance.now();function e(){gn.frameCount++;const n=performance.now();n-gn.lastFpsUpdate>=Jk&&(gn.framesPerSecond=Math.round(gn.frameCount*1e3/(n-gn.lastFpsUpdate)),gn.frameCount=0,gn.lastFpsUpdate=n),gn.isRecording&&(Kf=requestAnimationFrame(e))}Kf=requestAnimationFrame(e)}function D5(){Kf!==null&&(cancelAnimationFrame(Kf),Kf=null)}function Uu(){return""}function t1(e){gn.isEnabled=e,e&&!gn.isRecording?em():!e&&gn.isRecording&&h0()}function B5(e,n,t){return(...r)=>{if(!gn.isEnabled||!gn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const s=performance.now()-i;gn.measures.push({name:n,startTime:i,duration:s,component:t||Uu(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:n,component:t||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function O5(e,n,t){return async(...r)=>{if(!gn.isEnabled||!gn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const s=performance.now()-i;gn.measures.push({name:n,startTime:i,duration:s,component:t||Uu(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:n,component:t||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function Qk(e,n){const t=gn.measures.filter(o=>o.startTime>=e&&o.startTime+o.duration<=n),r=new Map,i=[];t.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const u=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:u.sort((f,d)=>d.duration-f.duration).map(f=>s(f))}}return i.sort((o,u)=>u.duration-o.duration).map(o=>s(o))}function n1(e,n){const t=e||gn.startTime,r=n||performance.now(),i=Qk(t,r),s=r-t,o=new Map;function u(d){const g=o.get(d.operation)||{duration:0,component:d.component};g.duration+=d.duration,o.set(d.operation,g),d.children.forEach(y=>u(y))}i.forEach(d=>u(d));const f=Array.from(o.entries()).map(([d,{duration:g,component:y}])=>({operation:d,duration:g,component:y,impact:g/s*100})).sort((d,g)=>g.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:f}}function dd(){const e=Ft(!1);$s(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,t1(r),e1()}catch(t){console.warn("Erreur lors de la vrification du paramtre perf:",t),e.value=!1,t1(!1)}}),mc(()=>{gn.isRecording&&h0()});const n=(t,r)=>{if(!gn.isEnabled||!gn.isRecording)return null;const i=gn.measures.find(d=>d.name===t&&d.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=gn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=s&&d!==i),u=gn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=s),f=gn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:f.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:f.length>1?(f[f.length-1].usedJSHeapSize||0)-(f[0].usedJSHeapSize||0):0}}};return{isEnabled:Ou(Ft(gn.isEnabled)),isQueryParamEnabled:Ou(e),isRecording:Ou(Ft(gn.isRecording)),measures:Ou(Ft(gn.measures)),longTasks:Ou(Ft(gn.longTasks)),memorySnapshots:Ou(Ft(gn.memorySnapshots)),framesPerSecond:Ou(Ft(gn.framesPerSecond)),operationHistory:Ou(Ft(gn.operationHistory)),startRecording:em,stopRecording:h0,clearRecording:e1,startMeasure:k5,measure:N5,measureAsync:T5,captureMemorySnapshot:ly,createPerformanceTracker:B5,createAsyncPerformanceTracker:O5,getOperationDetails:n,getSlowOperations:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.measures].sort((t,r)=>r.duration-t.duration).slice(0,10),getLongTasks:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.longTasks].sort((t,r)=>r.duration-t.duration),getPerformanceReport:()=>{if(!gn.isEnabled||!gn.isRecording)return null;const t=n1();return{totalMeasures:gn.measures.length,totalLongTasks:gn.longTasks.length,slowestOperations:[...gn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:gn.framesPerSecond,memoryUsage:gn.memorySnapshots.length>0?gn.memorySnapshots[gn.memorySnapshots.length-1]:null,operationsByComponent:eT(gn.measures),criticalPaths:t.criticalPaths,bottlenecks:t.bottlenecks,recordingDuration:gn.isRecording?performance.now()-gn.startTime:null}},analyzeCriticalPaths:n1}}function eT(e){if(!gn.isEnabled||!gn.isRecording)return{};const n={};return e.forEach(t=>{const r=t.component||"unknown";n[r]||(n[r]={totalTime:0,callCount:0,operations:{}}),n[r].totalTime+=t.duration,n[r].callCount++,n[r].operations[t.name]||(n[r].operations[t.name]={totalTime:0,callCount:0}),n[r].operations[t.name].totalTime+=t.duration,n[r].operations[t.name].callCount++}),n}const hn={startRecording:em,stopRecording:h0,clearRecording:e1,startMeasure:k5,measure:N5,measureAsync:T5,captureMemorySnapshot:ly,createPerformanceTracker:B5,createAsyncPerformanceTracker:O5,setEnabled:t1,analyzeCriticalPaths:n1},Un=Ls.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Ki=dd();function I5(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Un.interceptors.request.use(async e=>{const n=Ki.startMeasure("api_request_interceptor","ApiService");try{const t=I5("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{n()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Un.interceptors.response.use(e=>e,async e=>{var r,i;const n=Ki.startMeasure("api_response_interceptor","ApiService"),t=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;const s=ma();try{await Ki.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=I5("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Un(t)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(e)}finally{n()}});function tT(e){var t;const n=[];if((t=e.response)!=null&&t.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{n.push({field:i,message:o})}):typeof s=="string"&&n.push({field:i,message:s})}):typeof r=="string"?n.push({field:"non_field_error",message:r}):r.detail&&n.push({field:"non_field_error",message:r.detail})}else e.message&&n.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return n.length===0&&n.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),n}async function Ig(e){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",e);const n={role:e.role};e.entrepriseId&&(n.entreprise=e.entrepriseId),e.salarieId&&(n.salarie=e.salarieId),e.includeDetails&&(n.include_plans=!0),e.search&&(n.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",n);try{const t=await Ll.getUsers(n);return console.log(`[fetchUsersByHierarchy] Rsultat (${t.data.length} utilisateurs):`,t.data),t.data}catch(t){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",t),t}}const Ll={async getUsers(e={}){const n=Ki.startMeasure("get_users","UserService");try{return await Ki.measureAsync("get_users_request",()=>Un.get("/users/",{params:e}),"UserService")}finally{n()}},async getUser(e){return await Un.get(`/users/${e}/`)},async createUser(e){return await Un.post("/users/",e)},async updateUser(e,n){return await Un.patch(`/users/${e}/`,n)},async deleteUser(e){return await Un.delete(`/users/${e}/`)},async getEntreprises(){return await Un.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const n={role:"SALARIE"};return e&&(n.entreprise=e),await Un.get("/users/",{params:n})},async getSalarieVisiteurs(e){return await Un.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await Un.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const n=Ki.startMeasure("get_users_hierarchy","UserService");try{const t=Ki.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await Ki.measureAsync("get_users_hierarchy_request",()=>Un.get("/users/",{params:t}),"UserService")}finally{n()}},async getEntrepriseSalaries(e){return await Un.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,n){const t={role:"VISITEUR"};return e&&(t.salarie=e),n&&(t.entreprise=n),await Un.get("/users/",{params:t})},async assignEntrepriseToSalarie(e,n){return await Un.patch(`/users/${e}/`,{entreprise:n})},async assignSalarieToVisiteur(e,n){return await Un.patch(`/users/${e}/`,{salarie:n})},formatLogoFileName(e){return Ki.measure("format_logo_filename",()=>{var i;const n=new Date().getTime(),t=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${n}.${t}`},"UserService")},async uploadLogo(e){const n=Ki.startMeasure("upload_logo","UserService");try{const t=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return t.append("logo",i),await Ki.measureAsync("upload_logo_request",()=>Un.post("/users/upload_logo/",t,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{n()}}},gg={async getPlans(){const e=Ki.startMeasure("get_plans","IrrigationService");try{return await Ki.measureAsync("get_plans_request",()=>Un.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const n=Ki.startMeasure("create_plan","IrrigationService");try{const t=Ki.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await Ki.measureAsync("create_plan_request",()=>Un.post("/plans/",t),"IrrigationService")}finally{n()}},async updatePlan(e,n){const t=Ki.startMeasure("update_plan","IrrigationService");try{return await Ki.measureAsync("update_plan_request",()=>Un.put(`/plans/${e}/`,n),"IrrigationService")}finally{t()}},async deletePlan(e){const n=Ki.startMeasure("delete_plan","IrrigationService");try{return await Ki.measureAsync("delete_plan_request",()=>Un.delete(`/plans/${e}/`),"IrrigationService")}finally{n()}},async getVisiteurPlans(e){return await Un.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await Un.post("/plans/",e)},async getEntreprisePlans(e){return await Un.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await Un.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,n){const t={...e,salarie:n};return await Un.post("/plans/",t)},async createPlanForEntreprise(e,n){const t={...e,entreprise:n};return await Un.post("/plans/",t)}},lc={async getNotes(e={}){const n=Ki.startMeasure("get_notes","NoteService");try{return await Ki.measureAsync("get_notes_request",()=>Un.get("/notes/",{params:e}),"NoteService")}finally{n()}},async getNote(e){const n=Ki.startMeasure("get_note","NoteService");try{return await Ki.measureAsync("get_note_request",()=>Un.get(`/notes/${e}/`),"NoteService")}finally{n()}},async createNote(e){const n=Ki.startMeasure("create_note","NoteService");try{return await Ki.measureAsync("create_note_request",()=>Un.post("/notes/",e),"NoteService")}finally{n()}},async updateNote(e,n){const t=Ki.startMeasure("update_note","NoteService");try{return await Ki.measureAsync("update_note_request",()=>Un.patch(`/notes/${e}/`,n),"NoteService")}finally{t()}},async deleteNote(e){const n=Ki.startMeasure("delete_note","NoteService");try{return await Ki.measureAsync("delete_note_request",()=>Un.delete(`/notes/${e}/`),"NoteService")}finally{n()}},async getComments(e){return await Un.get(`/notes/${e}/comments/`)},async addComment(e,n){return await Un.post(`/notes/${e}/comments/`,n)},async updateComment(e,n,t){return await Un.patch(`/notes/${e}/comments/${n}/`,t)},async deleteComment(e,n){return await Un.delete(`/notes/${e}/comments/${n}/`)},async getPhotos(e){return await Un.get(`/notes/${e}/photos/`)},async addPhoto(e,n){return await Un.post(`/notes/${e}/photos/`,n,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(e,n,t){return await Un.patch(`/notes/${e}/photos/${n}/`,t)},async deletePhoto(e,n){return await Un.delete(`/notes/${e}/photos/${n}/`)}};Un.defaults.baseURL="/api";Un.defaults.headers.common["Content-Type"]="application/json";Un.defaults.withCredentials=!0;function bp(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Un.interceptors.request.use(e=>{const n=bp("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Un.interceptors.response.use(e=>e,async e=>{var r,i;const n=ma(),t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;try{if(!bp("access_token"))throw new Error("No token available");await n.refreshToken();const o=bp("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Un(t)}catch(s){console.error("Token refresh failed:",s),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function nT(e,n,t=1){const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${n};${i};path=/;secure;samesite=Strict`}function Vl(e){if(!e)return"-";const n=e.first_name||"",t=e.last_name?e.last_name.toUpperCase():"",r=`${n} ${t}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function rT(e="",n=""){return`${(e==null?void 0:e.charAt(0))||""}${(n==null?void 0:n.charAt(0))||""}`.toUpperCase()}const iT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function oT(e){return iT[e]||e}function sT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function aT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function lT({role:e,entrepriseId:n,salarieId:t,includeDetails:r=!1}){const i={role:e};return n&&(i.entreprise=n),t&&(i.salarie=t),r&&(i.include_plans=!0),(await Ll.getUsers(i)).data}const ma=Ap("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="admin"},isEntreprise:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="entreprise"},isSalarie:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="salarie"},isVisiteur:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var n;return!!((n=e.user)!=null&&n.enterprise_id)},hasEmployee:e=>{var n;return!!((n=e.user)!=null&&n.employee_id)}},actions:{async initialize(e){if(!e){const t=await this.restoreSession();return this.initialized=!0,t}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){try{if(!bp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const n=await Un.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,n){var t,r,i;try{const s=await Un.post("/token/",{username:e,password:n});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((t=s.response)==null?void 0:t.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Un.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,n){try{const t=await Un.post("/users/change_password/",{old_password:e,password:n});return this.user={...this.user,must_change_password:!1},t.data}catch(t){throw console.error("Password change error:",t),t}},async refreshToken(){var e,n;try{if(!bp("refresh_token"))throw new Error("No refresh token available");const r=await Un.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return nT("access_token",i,1),this.isAuthenticated=!0,i}catch(t){throw console.error("Error refreshing token:",{status:(e=t.response)==null?void 0:e.status,data:(n=t.response)==null?void 0:n.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t}},async fetchUsers(e={}){this.loading=!0;try{return(await Ll.getUsers(e)).data}catch(n){throw this.error="Erreur lors de la rcupration des utilisateurs",n}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await Ll.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const n=await Ll.getUsers({role:"SALARIE",entreprise:e});return this.employees=n.data,this.employees}catch(n){throw this.error="Erreur lors de la rcupration des salaries",n}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const n=await Ll.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=n.data,this.visitors}catch(n){throw this.error="Erreur lors de la rcupration des visiteurs",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Ll.createUser(e)).data}catch(n){throw this.error="Erreur lors de la cration de l'utilisateur",n}finally{this.loading=!1}},async updateUser(e,n){this.loading=!0;try{return(await Ll.updateUser(e,n)).data}catch(t){throw this.error="Erreur lors de la mise  jour de l'utilisateur",t}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await Ll.deleteUser(e),!0}catch(n){throw this.error="Erreur lors de la suppression de l'utilisateur",n}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await Un.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,n){this.loading=!0;try{await Un.patch(`/users/${e}/`,{enterprise:n}),this.user&&this.user.id===e&&(this.user.enterprise_id=n)}catch(t){throw this.error="Erreur lors de la mise  jour de l'entreprise",t}finally{this.loading=!1}},async updateUserRole(e,n){this.loading=!0;try{const t=await Un.patch(`/users/${e}/`,{role:n});return this.user&&this.user.id===e&&(this.user.user_type=n),t.data}catch(t){throw this.error="Erreur lors de la mise  jour du rle",t}finally{this.loading=!1}},async updateUserEmail(e){var n;this.loading=!0;try{const t=await Un.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:e});return this.user&&(this.user.email=e),t.data}catch(t){throw this.error="Erreur lors de la mise  jour de l'email",t}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const n=await Ll.uploadLogo(e);return this.user&&n.data.logo&&(this.user.logo=n.data.logo),n.data}catch(n){throw this.error="Erreur lors du tlversement du logo",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await lT(e)}catch(n){throw console.error(`Error fetching ${e.role}:`,n),n}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await Ll.getUsers({role:"SALARIE",entreprise:e})).data}catch(n){throw this.error="Erreur lors de la rcupration des salaries",n}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await Ll.getUsers({role:"VISITEUR",salarie:e})).data}catch(n){throw this.error="Erreur lors de la rcupration des visiteurs",n}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ih=typeof document<"u";function R5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function uT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&R5(e.default)}const Zi=Object.assign;function Xm(e,n){const t={};for(const r in n){const i=n[r];t[r]=Vu(i)?i.map(e):e(i)}return t}const ep=()=>{},Vu=Array.isArray,F5=/#/g,cT=/&/g,fT=/\//g,hT=/=/g,dT=/\?/g,j5=/\+/g,pT=/%5B/g,gT=/%5D/g,z5=/%5E/g,mT=/%60/g,$5=/%7B/g,vT=/%7C/g,U5=/%7D/g,yT=/%20/g;function uy(e){return encodeURI(""+e).replace(vT,"|").replace(pT,"[").replace(gT,"]")}function _T(e){return uy(e).replace($5,"{").replace(U5,"}").replace(z5,"^")}function r1(e){return uy(e).replace(j5,"%2B").replace(yT,"+").replace(F5,"%23").replace(cT,"%26").replace(mT,"`").replace($5,"{").replace(U5,"}").replace(z5,"^")}function bT(e){return r1(e).replace(hT,"%3D")}function wT(e){return uy(e).replace(F5,"%23").replace(dT,"%3F")}function xT(e){return e==null?"":wT(e).replace(fT,"%2F")}function wp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const LT=/\/$/,ST=e=>e.replace(LT,"");function Qm(e,n,t="/"){let r,i={},s="",o="";const u=n.indexOf("#");let f=n.indexOf("?");return u<f&&u>=0&&(f=-1),f>-1&&(r=n.slice(0,f),s=n.slice(f+1,u>-1?u:n.length),i=e(s)),u>-1&&(r=r||n.slice(0,u),o=n.slice(u,n.length)),r=MT(r??n,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:wp(o)}}function CT(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function D_(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function ET(e,n,t){const r=n.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&id(n.matched[r],t.matched[i])&&V5(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function id(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function V5(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(!PT(e[t],n[t]))return!1;return!0}function PT(e,n){return Vu(e)?B_(e,n):Vu(n)?B_(n,e):e===n}function B_(e,n){return Vu(n)?e.length===n.length&&e.every((t,r)=>t===n[r]):e.length===1&&e[0]===n}function MT(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,u;for(o=0;o<r.length;o++)if(u=r[o],u!==".")if(u==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const ef={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xp;(function(e){e.pop="pop",e.push="push"})(xp||(xp={}));var tp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(tp||(tp={}));function AT(e){if(!e)if(Ih){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ST(e)}const kT=/^[^#]+#/;function TT(e,n){return e.replace(kT,"#")+n}function NT(e,n){const t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-t.left-(n.left||0),top:r.top-t.top-(n.top||0)}}const tm=()=>({left:window.scrollX,top:window.scrollY});function DT(e){let n;if("el"in e){const t=e.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;n=NT(i,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function O_(e,n){return(history.state?history.state.position-n:-1)+e}const i1=new Map;function BT(e,n){i1.set(e,n)}function OT(e){const n=i1.get(e);return i1.delete(e),n}let IT=()=>location.protocol+"//"+location.host;function H5(e,n){const{pathname:t,search:r,hash:i}=n,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),D_(f,"")}return D_(t,e)+r+i}function RT(e,n,t,r){let i=[],s=[],o=null;const u=({state:x})=>{const _=H5(e,location),E=t.value,T=n.value;let D=0;if(x){if(t.value=_,n.value=x,o&&o===E){o=null;return}D=T?x.position-T.position:0}else r(_);i.forEach(O=>{O(t.value,E,{delta:D,type:xp.pop,direction:D?D>0?tp.forward:tp.back:tp.unknown})})};function f(){o=t.value}function d(x){i.push(x);const _=()=>{const E=i.indexOf(x);E>-1&&i.splice(E,1)};return s.push(_),_}function g(){const{history:x}=window;x.state&&x.replaceState(Zi({},x.state,{scroll:tm()}),"")}function y(){for(const x of s)x();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:f,listen:d,destroy:y}}function I_(e,n,t,r=!1,i=!1){return{back:e,current:n,forward:t,replaced:r,position:window.history.length,scroll:i?tm():null}}function FT(e){const{history:n,location:t}=window,r={value:H5(e,t)},i={value:n.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function s(f,d,g){const y=e.indexOf("#"),x=y>-1?(t.host&&document.querySelector("base")?e:e.slice(y))+f:IT()+e+f;try{n[g?"replaceState":"pushState"](d,"",x),i.value=d}catch(_){console.error(_),t[g?"replace":"assign"](x)}}function o(f,d){const g=Zi({},n.state,I_(i.value.back,f,i.value.forward,!0),d,{position:i.value.position});s(f,g,!0),r.value=f}function u(f,d){const g=Zi({},i.value,n.state,{forward:f,scroll:tm()});s(g.current,g,!0);const y=Zi({},I_(r.value,f,null),{position:g.position+1},d);s(f,y,!1),r.value=f}return{location:r,state:i,push:u,replace:o}}function jT(e){e=AT(e);const n=FT(e),t=RT(e,n.state,n.location,n.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=Zi({location:"",base:e,go:r,createHref:TT.bind(null,e)},n,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>n.state.value}),i}function zT(e){return typeof e=="string"||e&&typeof e=="object"}function G5(e){return typeof e=="string"||typeof e=="symbol"}const q5=Symbol("");var R_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(R_||(R_={}));function od(e,n){return Zi(new Error,{type:e,[q5]:!0},n)}function Dc(e,n){return e instanceof Error&&q5 in e&&(n==null||!!(e.type&n))}const F_="[^/]+?",$T={sensitive:!1,strict:!1,start:!0,end:!0},UT=/[.+*?^${}()[\]/\\]/g;function VT(e,n){const t=Zi({},$T,n),r=[];let i=t.start?"^":"";const s=[];for(const d of e){const g=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let y=0;y<d.length;y++){const x=d[y];let _=40+(t.sensitive?.25:0);if(x.type===0)y||(i+="/"),i+=x.value.replace(UT,"\\$&"),_+=40;else if(x.type===1){const{value:E,repeatable:T,optional:D,regexp:O}=x;s.push({name:E,repeatable:T,optional:D});const $=O||F_;if($!==F_){_+=10;try{new RegExp(`(${$})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${E}" (${$}): `+X.message)}}let K=T?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;y||(K=D&&d.length<2?`(?:/${K})`:"/"+K),D&&(K+="?"),i+=K,_+=20,D&&(_+=-8),T&&(_+=-20),$===".*"&&(_+=-50)}g.push(_)}r.push(g)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function u(d){const g=d.match(o),y={};if(!g)return null;for(let x=1;x<g.length;x++){const _=g[x]||"",E=s[x-1];y[E.name]=_&&E.repeatable?_.split("/"):_}return y}function f(d){let g="",y=!1;for(const x of e){(!y||!g.endsWith("/"))&&(g+="/"),y=!1;for(const _ of x)if(_.type===0)g+=_.value;else if(_.type===1){const{value:E,repeatable:T,optional:D}=_,O=E in d?d[E]:"";if(Vu(O)&&!T)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const $=Vu(O)?O.join("/"):O;if(!$)if(D)x.length<2&&(g.endsWith("/")?g=g.slice(0,-1):y=!0);else throw new Error(`Missing required param "${E}"`);g+=$}}return g||"/"}return{re:o,score:r,keys:s,parse:u,stringify:f}}function HT(e,n){let t=0;for(;t<e.length&&t<n.length;){const r=n[t]-e[t];if(r)return r;t++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function W5(e,n){let t=0;const r=e.score,i=n.score;for(;t<r.length&&t<i.length;){const s=HT(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(j_(r))return 1;if(j_(i))return-1}return i.length-r.length}function j_(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const GT={type:0,value:""},qT=/[a-zA-Z0-9_]/;function WT(e){if(!e)return[[]];if(e==="/")return[[GT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(_){throw new Error(`ERR (${t})/"${d}": ${_}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let u=0,f,d="",g="";function y(){d&&(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(f==="*"||f==="+")&&n(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:g,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):n("Invalid state to consume buffer"),d="")}function x(){d+=f}for(;u<e.length;){if(f=e[u++],f==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:f==="/"?(d&&y(),o()):f===":"?(y(),t=1):x();break;case 4:x(),t=r;break;case 1:f==="("?t=2:qT.test(f)?x():(y(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--);break;case 2:f===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+f:t=3:g+=f;break;case 3:y(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--,g="";break;default:n("Unknown state");break}}return t===2&&n(`Unfinished custom RegExp for param "${d}"`),y(),o(),i}function ZT(e,n,t){const r=VT(WT(e.path),t),i=Zi(r,{record:e,parent:n,children:[],alias:[]});return n&&!i.record.aliasOf==!n.record.aliasOf&&n.children.push(i),i}function KT(e,n){const t=[],r=new Map;n=V_({strict:!1,end:!0,sensitive:!1},n);function i(y){return r.get(y)}function s(y,x,_){const E=!_,T=$_(y);T.aliasOf=_&&_.record;const D=V_(n,y),O=[T];if("alias"in y){const X=typeof y.alias=="string"?[y.alias]:y.alias;for(const ae of X)O.push($_(Zi({},T,{components:_?_.record.components:T.components,path:ae,aliasOf:_?_.record:T})))}let $,K;for(const X of O){const{path:ae}=X;if(x&&ae[0]!=="/"){const ue=x.record.path,Le=ue[ue.length-1]==="/"?"":"/";X.path=x.record.path+(ae&&Le+ae)}if($=ZT(X,x,D),_?_.alias.push($):(K=K||$,K!==$&&K.alias.push($),E&&y.name&&!U_($)&&o(y.name)),Z5($)&&f($),T.children){const ue=T.children;for(let Le=0;Le<ue.length;Le++)s(ue[Le],$,_&&_.children[Le])}_=_||$}return K?()=>{o(K)}:ep}function o(y){if(G5(y)){const x=r.get(y);x&&(r.delete(y),t.splice(t.indexOf(x),1),x.children.forEach(o),x.alias.forEach(o))}else{const x=t.indexOf(y);x>-1&&(t.splice(x,1),y.record.name&&r.delete(y.record.name),y.children.forEach(o),y.alias.forEach(o))}}function u(){return t}function f(y){const x=XT(y,t);t.splice(x,0,y),y.record.name&&!U_(y)&&r.set(y.record.name,y)}function d(y,x){let _,E={},T,D;if("name"in y&&y.name){if(_=r.get(y.name),!_)throw od(1,{location:y});D=_.record.name,E=Zi(z_(x.params,_.keys.filter(K=>!K.optional).concat(_.parent?_.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),y.params&&z_(y.params,_.keys.map(K=>K.name))),T=_.stringify(E)}else if(y.path!=null)T=y.path,_=t.find(K=>K.re.test(T)),_&&(E=_.parse(T),D=_.record.name);else{if(_=x.name?r.get(x.name):t.find(K=>K.re.test(x.path)),!_)throw od(1,{location:y,currentLocation:x});D=_.record.name,E=Zi({},x.params,y.params),T=_.stringify(E)}const O=[];let $=_;for(;$;)O.unshift($.record),$=$.parent;return{name:D,path:T,params:E,matched:O,meta:JT(O)}}e.forEach(y=>s(y));function g(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:o,clearRoutes:g,getRoutes:u,getRecordMatcher:i}}function z_(e,n){const t={};for(const r of n)r in e&&(t[r]=e[r]);return t}function $_(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:YT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function YT(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const r in e.components)n[r]=typeof t=="object"?t[r]:t;return n}function U_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function JT(e){return e.reduce((n,t)=>Zi(n,t.meta),{})}function V_(e,n){const t={};for(const r in e)t[r]=r in n?n[r]:e[r];return t}function XT(e,n){let t=0,r=n.length;for(;t!==r;){const s=t+r>>1;W5(e,n[s])<0?r=s:t=s+1}const i=QT(e);return i&&(r=n.lastIndexOf(i,r-1)),r}function QT(e){let n=e;for(;n=n.parent;)if(Z5(n)&&W5(e,n)===0)return n}function Z5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function e8(e){const n={};if(e===""||e==="?")return n;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(j5," "),o=s.indexOf("="),u=wp(o<0?s:s.slice(0,o)),f=o<0?null:wp(s.slice(o+1));if(u in n){let d=n[u];Vu(d)||(d=n[u]=[d]),d.push(f)}else n[u]=f}return n}function H_(e){let n="";for(let t in e){const r=e[t];if(t=bT(t),r==null){r!==void 0&&(n+=(n.length?"&":"")+t);continue}(Vu(r)?r.map(s=>s&&r1(s)):[r&&r1(r)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+t,s!=null&&(n+="="+s))})}return n}function t8(e){const n={};for(const t in e){const r=e[t];r!==void 0&&(n[t]=Vu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return n}const n8=Symbol(""),G_=Symbol(""),nm=Symbol(""),cy=Symbol(""),o1=Symbol("");function Ed(){let e=[];function n(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function ff(e,n,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,f)=>{const d=x=>{x===!1?f(od(4,{from:t,to:n})):x instanceof Error?f(x):zT(x)?f(od(2,{from:n,to:x})):(o&&r.enterCallbacks[i]===o&&typeof x=="function"&&o.push(x),u())},g=s(()=>e.call(r&&r.instances[i],n,t,d));let y=Promise.resolve(g);e.length<3&&(y=y.then(d)),y.catch(x=>f(x))})}function ev(e,n,t,r,i=s=>s()){const s=[];for(const o of e)for(const u in o.components){let f=o.components[u];if(!(n!=="beforeRouteEnter"&&!o.instances[u]))if(R5(f)){const g=(f.__vccOpts||f)[n];g&&s.push(ff(g,t,r,o,u,i))}else{let d=f();s.push(()=>d.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${u}" at "${o.path}"`);const y=uT(g)?g.default:g;o.mods[u]=g,o.components[u]=y;const _=(y.__vccOpts||y)[n];return _&&ff(_,t,r,o,u,i)()}))}}return s}function q_(e){const n=Wl(nm),t=Wl(cy),r=gr(()=>{const f=Wn(e.to);return n.resolve(f)}),i=gr(()=>{const{matched:f}=r.value,{length:d}=f,g=f[d-1],y=t.matched;if(!g||!y.length)return-1;const x=y.findIndex(id.bind(null,g));if(x>-1)return x;const _=W_(f[d-2]);return d>1&&W_(g)===_&&y[y.length-1].path!==_?y.findIndex(id.bind(null,f[d-2])):x}),s=gr(()=>i.value>-1&&s8(t.params,r.value.params)),o=gr(()=>i.value>-1&&i.value===t.matched.length-1&&V5(t.params,r.value.params));function u(f={}){if(o8(f)){const d=n[Wn(e.replace)?"replace":"push"](Wn(e.to)).catch(ep);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:gr(()=>r.value.href),isActive:s,isExactActive:o,navigate:u}}function r8(e){return e.length===1?e[0]:e}const i8=cs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:q_,setup(e,{slots:n}){const t=Kl(q_(e)),{options:r}=Wl(nm),i=gr(()=>({[Z_(e.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[Z_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=n.default&&r8(n.default(t));return e.custom?s:H0("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),Rd=i8;function o8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function s8(e,n){for(const t in n){const r=n[t],i=e[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Vu(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function W_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Z_=(e,n,t)=>e??n??t,a8=cs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const r=Wl(o1),i=gr(()=>e.route||r.value),s=Wl(G_,0),o=gr(()=>{let d=Wn(s);const{matched:g}=i.value;let y;for(;(y=g[d])&&!y.components;)d++;return d}),u=gr(()=>i.value.matched[o.value]);Yd(G_,gr(()=>o.value+1)),Yd(n8,u),Yd(o1,i);const f=Ft();return Co(()=>[f.value,u.value,e.name],([d,g,y],[x,_,E])=>{g&&(g.instances[y]=d,_&&_!==g&&d&&d===x&&(g.leaveGuards.size||(g.leaveGuards=_.leaveGuards),g.updateGuards.size||(g.updateGuards=_.updateGuards))),d&&g&&(!_||!id(g,_)||!x)&&(g.enterCallbacks[y]||[]).forEach(T=>T(d))},{flush:"post"}),()=>{const d=i.value,g=e.name,y=u.value,x=y&&y.components[g];if(!x)return K_(t.default,{Component:x,route:d});const _=y.props[g],E=_?_===!0?d.params:typeof _=="function"?_(d):_:null,D=H0(x,Zi({},E,n,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(y.instances[g]=null)},ref:f}));return K_(t.default,{Component:D,route:d})||D}}});function K_(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const K5=a8;function l8(e){const n=KT(e.routes,e),t=e.parseQuery||e8,r=e.stringifyQuery||H_,i=e.history,s=Ed(),o=Ed(),u=Ed(),f=V1(ef);let d=ef;Ih&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=Xm.bind(null,se=>""+se),y=Xm.bind(null,xT),x=Xm.bind(null,wp);function _(se,k){let le,ke;return G5(se)?(le=n.getRecordMatcher(se),ke=k):ke=se,n.addRoute(ke,le)}function E(se){const k=n.getRecordMatcher(se);k&&n.removeRoute(k)}function T(){return n.getRoutes().map(se=>se.record)}function D(se){return!!n.getRecordMatcher(se)}function O(se,k){if(k=Zi({},k||f.value),typeof se=="string"){const de=Qm(t,se,k.path),ve=n.resolve({path:de.path},k),pe=i.createHref(de.fullPath);return Zi(de,ve,{params:x(ve.params),hash:wp(de.hash),redirectedFrom:void 0,href:pe})}let le;if(se.path!=null)le=Zi({},se,{path:Qm(t,se.path,k.path).path});else{const de=Zi({},se.params);for(const ve in de)de[ve]==null&&delete de[ve];le=Zi({},se,{params:y(de)}),k.params=y(k.params)}const ke=n.resolve(le,k),Pe=se.hash||"";ke.params=g(x(ke.params));const Ve=CT(r,Zi({},se,{hash:_T(Pe),path:ke.path})),Z=i.createHref(Ve);return Zi({fullPath:Ve,hash:Pe,query:r===H_?t8(se.query):se.query||{}},ke,{redirectedFrom:void 0,href:Z})}function $(se){return typeof se=="string"?Qm(t,se,f.value.path):Zi({},se)}function K(se,k){if(d!==se)return od(8,{from:k,to:se})}function X(se){return Le(se)}function ae(se){return X(Zi($(se),{replace:!0}))}function ue(se){const k=se.matched[se.matched.length-1];if(k&&k.redirect){const{redirect:le}=k;let ke=typeof le=="function"?le(se):le;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=$(ke):{path:ke},ke.params={}),Zi({query:se.query,hash:se.hash,params:ke.path!=null?{}:se.params},ke)}}function Le(se,k){const le=d=O(se),ke=f.value,Pe=se.state,Ve=se.force,Z=se.replace===!0,de=ue(le);if(de)return Le(Zi($(de),{state:typeof de=="object"?Zi({},Pe,de.state):Pe,force:Ve,replace:Z}),k||le);const ve=le;ve.redirectedFrom=k;let pe;return!Ve&&ET(r,ke,le)&&(pe=od(16,{to:ve,from:ke}),We(ke,ke,!0,!1)),(pe?Promise.resolve(pe):Y(ve,ke)).catch(ze=>Dc(ze)?Dc(ze,2)?ze:xe(ze):re(ze,ve,ke)).then(ze=>{if(ze){if(Dc(ze,2))return Le(Zi({replace:Z},$(ze.to),{state:typeof ze.to=="object"?Zi({},Pe,ze.to.state):Pe,force:Ve}),k||ve)}else ze=I(ve,ke,!0,Z,Pe);return F(ve,ke,ze),ze})}function W(se,k){const le=K(se,k);return le?Promise.reject(le):Promise.resolve()}function V(se){const k=fe.values().next().value;return k&&typeof k.runWithContext=="function"?k.runWithContext(se):se()}function Y(se,k){let le;const[ke,Pe,Ve]=u8(se,k);le=ev(ke.reverse(),"beforeRouteLeave",se,k);for(const de of ke)de.leaveGuards.forEach(ve=>{le.push(ff(ve,se,k))});const Z=W.bind(null,se,k);return le.push(Z),ye(le).then(()=>{le=[];for(const de of s.list())le.push(ff(de,se,k));return le.push(Z),ye(le)}).then(()=>{le=ev(Pe,"beforeRouteUpdate",se,k);for(const de of Pe)de.updateGuards.forEach(ve=>{le.push(ff(ve,se,k))});return le.push(Z),ye(le)}).then(()=>{le=[];for(const de of Ve)if(de.beforeEnter)if(Vu(de.beforeEnter))for(const ve of de.beforeEnter)le.push(ff(ve,se,k));else le.push(ff(de.beforeEnter,se,k));return le.push(Z),ye(le)}).then(()=>(se.matched.forEach(de=>de.enterCallbacks={}),le=ev(Ve,"beforeRouteEnter",se,k,V),le.push(Z),ye(le))).then(()=>{le=[];for(const de of o.list())le.push(ff(de,se,k));return le.push(Z),ye(le)}).catch(de=>Dc(de,8)?de:Promise.reject(de))}function F(se,k,le){u.list().forEach(ke=>V(()=>ke(se,k,le)))}function I(se,k,le,ke,Pe){const Ve=K(se,k);if(Ve)return Ve;const Z=k===ef,de=Ih?history.state:{};le&&(ke||Z?i.replace(se.fullPath,Zi({scroll:Z&&de&&de.scroll},Pe)):i.push(se.fullPath,Pe)),f.value=se,We(se,k,le,Z),xe()}let j;function H(){j||(j=i.listen((se,k,le)=>{if(!ce.listening)return;const ke=O(se),Pe=ue(ke);if(Pe){Le(Zi(Pe,{replace:!0,force:!0}),ke).catch(ep);return}d=ke;const Ve=f.value;Ih&&BT(O_(Ve.fullPath,le.delta),tm()),Y(ke,Ve).catch(Z=>Dc(Z,12)?Z:Dc(Z,2)?(Le(Zi($(Z.to),{force:!0}),ke).then(de=>{Dc(de,20)&&!le.delta&&le.type===xp.pop&&i.go(-1,!1)}).catch(ep),Promise.reject()):(le.delta&&i.go(-le.delta,!1),re(Z,ke,Ve))).then(Z=>{Z=Z||I(ke,Ve,!1),Z&&(le.delta&&!Dc(Z,8)?i.go(-le.delta,!1):le.type===xp.pop&&Dc(Z,20)&&i.go(-1,!1)),F(ke,Ve,Z)}).catch(ep)}))}let U=Ed(),R=Ed(),te;function re(se,k,le){xe(se);const ke=R.list();return ke.length?ke.forEach(Pe=>Pe(se,k,le)):console.error(se),Promise.reject(se)}function me(){return te&&f.value!==ef?Promise.resolve():new Promise((se,k)=>{U.add([se,k])})}function xe(se){return te||(te=!se,H(),U.list().forEach(([k,le])=>se?le(se):k()),U.reset()),se}function We(se,k,le,ke){const{scrollBehavior:Pe}=e;if(!Ih||!Pe)return Promise.resolve();const Ve=!le&&OT(O_(se.fullPath,0))||(ke||!le)&&history.state&&history.state.scroll||null;return Xs().then(()=>Pe(se,k,Ve)).then(Z=>Z&&DT(Z)).catch(Z=>re(Z,se,k))}const N=se=>i.go(se);let ee;const fe=new Set,ce={currentRoute:f,listening:!0,addRoute:_,removeRoute:E,clearRoutes:n.clearRoutes,hasRoute:D,getRoutes:T,resolve:O,options:e,push:X,replace:ae,go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:R.add,isReady:me,install(se){const k=this;se.component("RouterLink",Rd),se.component("RouterView",K5),se.config.globalProperties.$router=k,Object.defineProperty(se.config.globalProperties,"$route",{enumerable:!0,get:()=>Wn(f)}),Ih&&!ee&&f.value===ef&&(ee=!0,X(i.location).catch(Pe=>{}));const le={};for(const Pe in ef)Object.defineProperty(le,Pe,{get:()=>f.value[Pe],enumerable:!0});se.provide(nm,k),se.provide(cy,U1(le)),se.provide(o1,f);const ke=se.unmount;fe.add(se),se.unmount=function(){fe.delete(se),fe.size<1&&(d=ef,j&&j(),j=null,f.value=ef,ee=!1,te=!1),ke()}}};function ye(se){return se.reduce((k,le)=>k.then(()=>V(le)),Promise.resolve())}return ce}function u8(e,n){const t=[],r=[],i=[],s=Math.max(n.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=n.matched[o];u&&(e.matched.find(d=>id(d,u))?r.push(u):t.push(u));const f=e.matched[o];f&&(n.matched.find(d=>id(d,f))||i.push(f))}return[t,r,i]}function Np(){return Wl(nm)}function GV(e){return Wl(cy)}const dc=Ap("notification",()=>{const e=Ft([]),n=Ft(0),t=Ft(null),r=gr(()=>[...e.value].sort((y,x)=>x.timestamp-y.timestamp));function i({type:y,message:x,duration:_=5e3}){const E=++n.value,T=Date.now(),D={id:E,type:y,message:x,duration:_,timestamp:T};return e.value.push(D),t.value=E,_>0&&setTimeout(()=>{d(E)},_),E}const s=(y,x=5e3)=>i({type:"success",message:y,duration:x}),o=(y,x=5e3)=>i({type:"error",message:y,duration:x}),u=(y,x=5e3)=>i({type:"info",message:y,duration:x}),f=(y,x=5e3)=>i({type:"warning",message:y,duration:x});function d(y){const x=e.value.findIndex(_=>_.id===y);x!==-1&&e.value.splice(x,1),t.value===y&&(t.value=null)}function g(){e.value=[],t.value=null}return{notifications:r,lastAddedId:t,addNotification:i,removeNotification:d,clearAll:g,success:s,error:o,info:u,warning:f}});var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Y5(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}function c8(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var J5=c8,f8=typeof ea=="object"&&ea&&ea.Object===Object&&ea,h8=f8,d8=h8,p8=typeof self=="object"&&self&&self.Object===Object&&self,g8=d8||p8||Function("return this")(),X5=g8,m8=X5,v8=function(){return m8.Date.now()},y8=v8,_8=/\s/;function b8(e){for(var n=e.length;n--&&_8.test(e.charAt(n)););return n}var w8=b8,x8=w8,L8=/^\s+/;function S8(e){return e&&e.slice(0,x8(e)+1).replace(L8,"")}var C8=S8,E8=X5,P8=E8.Symbol,Q5=P8,Y_=Q5,ex=Object.prototype,M8=ex.hasOwnProperty,A8=ex.toString,Pd=Y_?Y_.toStringTag:void 0;function k8(e){var n=M8.call(e,Pd),t=e[Pd];try{e[Pd]=void 0;var r=!0}catch{}var i=A8.call(e);return r&&(n?e[Pd]=t:delete e[Pd]),i}var T8=k8,N8=Object.prototype,D8=N8.toString;function B8(e){return D8.call(e)}var O8=B8,J_=Q5,I8=T8,R8=O8,F8="[object Null]",j8="[object Undefined]",X_=J_?J_.toStringTag:void 0;function z8(e){return e==null?e===void 0?j8:F8:X_&&X_ in Object(e)?I8(e):R8(e)}var $8=z8;function U8(e){return e!=null&&typeof e=="object"}var V8=U8,H8=$8,G8=V8,q8="[object Symbol]";function W8(e){return typeof e=="symbol"||G8(e)&&H8(e)==q8}var Z8=W8,K8=C8,Q_=J5,Y8=Z8,eb=NaN,J8=/^[-+]0x[0-9a-f]+$/i,X8=/^0b[01]+$/i,Q8=/^0o[0-7]+$/i,e7=parseInt;function t7(e){if(typeof e=="number")return e;if(Y8(e))return eb;if(Q_(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Q_(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=K8(e);var t=X8.test(e);return t||Q8.test(e)?e7(e.slice(2),t?2:8):J8.test(e)?eb:+e}var n7=t7,r7=J5,tv=y8,tb=n7,i7="Expected a function",o7=Math.max,s7=Math.min;function a7(e,n,t){var r,i,s,o,u,f,d=0,g=!1,y=!1,x=!0;if(typeof e!="function")throw new TypeError(i7);n=tb(n)||0,r7(t)&&(g=!!t.leading,y="maxWait"in t,s=y?o7(tb(t.maxWait)||0,n):s,x="trailing"in t?!!t.trailing:x);function _(ue){var Le=r,W=i;return r=i=void 0,d=ue,o=e.apply(W,Le),o}function E(ue){return d=ue,u=setTimeout(O,n),g?_(ue):o}function T(ue){var Le=ue-f,W=ue-d,V=n-Le;return y?s7(V,s-W):V}function D(ue){var Le=ue-f,W=ue-d;return f===void 0||Le>=n||Le<0||y&&W>=s}function O(){var ue=tv();if(D(ue))return $(ue);u=setTimeout(O,T(ue))}function $(ue){return u=void 0,x&&r?_(ue):(r=i=void 0,o)}function K(){u!==void 0&&clearTimeout(u),d=0,r=f=i=u=void 0}function X(){return u===void 0?o:$(tv())}function ae(){var ue=tv(),Le=D(ue);if(r=arguments,i=this,f=ue,Le){if(u===void 0)return E(f);if(y)return clearTimeout(u),u=setTimeout(O,n),_(f)}return u===void 0&&(u=setTimeout(O,n)),o}return ae.cancel=K,ae.flush=X,ae}var l7=a7;const u7=fy(l7),c7={class:"relative w-full"},f7={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},h7=["onClick"],nb=cs({__name:"SearchBar",emits:["select-location"],setup(e,{emit:n}){const t=Ft(""),r=Ft([]),i=n,s=u7(async f=>{if(f.length<3){r.value=[];return}try{const g=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}`)).json();r.value=g}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function o(){s(t.value)}function u(f){t.value=f.display_name,r.value=[],i("select-location",{lat:parseFloat(f.lat),lng:parseFloat(f.lon)})}return(f,d)=>($e(),qe("div",c7,[In(P("input",{"onUpdate:modelValue":d[0]||(d[0]=g=>t.value=g),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ni,t.value]]),r.value.length>0?($e(),qe("div",f7,[($e(!0),qe(Rn,null,Rr(r.value,g=>($e(),qe("div",{key:g.place_id,onClick:y=>u(g),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Zt(g.display_name),9,h7))),128))])):dn("",!0)]))}}),d7={class:"perf-title"},p7={class:"perf-basic-stats"},g7={class:"perf-stat"},m7={class:"perf-stat"},v7={class:"perf-expand-btn"},y7={key:0,class:"perf-content"},_7={class:"perf-section"},b7={class:"perf-metrics"},w7={class:"perf-metric"},x7={class:"perf-metric-value"},L7={class:"perf-metric"},S7={class:"perf-metric-value"},C7={class:"perf-metric"},E7={class:"perf-metric-value"},P7={class:"perf-metric"},M7={class:"perf-metric-value"},A7={class:"perf-section"},k7={class:"perf-metrics"},T7={key:0,class:"perf-metric"},N7={class:"perf-metric-value"},D7={key:1,class:"perf-metric"},B7={class:"perf-metric-value"},O7={key:2,class:"perf-metric"},I7={class:"perf-metric-value"},R7={class:"perf-section"},F7={class:"perf-table"},j7={class:"perf-table-cell"},z7={class:"perf-table-cell"},$7={class:"perf-table-cell"},U7={class:"perf-table-cell"},V7=["onClick"],H7={key:0,class:"perf-empty"},G7=cs({__name:"PerformancePanel",props:{position:{}},setup(e){const t=e.position||"bottom-left",r=Ft(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:u,memorySnapshots:f,framesPerSecond:d,operationHistory:g,startRecording:y,stopRecording:x,clearRecording:_,captureMemorySnapshot:E,getSlowOperations:T,getPerformanceReport:D,getOperationDetails:O}=dd(),$=gr(()=>{const I=D()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:I.totalMeasures,totalLongTasks:I.totalLongTasks,averageDuration:I.slowestOperations.length>0?I.slowestOperations.reduce((j,H)=>j+H.duration,0)/I.slowestOperations.length:0,fps:I.averageFps,slowestOperations:I.slowestOperations,memoryUsage:I.memoryUsage}}),K=gr(()=>(D()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(j=>({operation:j.name,component:j.component||"unknown",durationMs:j.duration,timestamp:j.startTime}))),X=Ft(null);$s(()=>{i.value&&(X.value=window.setInterval(()=>{E()},1e3))}),mc(()=>{X.value!==null&&clearInterval(X.value)});function ae(I){return I===void 0?"N/A":I<1024?I+" B":I<1024*1024?(I/1024).toFixed(2)+" KB":I<1024*1024*1024?(I/(1024*1024)).toFixed(2)+" MB":(I/(1024*1024*1024)).toFixed(2)+" GB"}function ue(I){return I.toFixed(2)}const Le=()=>{E()};function W(){const I=D(),j="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(I,null,2)),H=document.createElement("a");H.setAttribute("href",j),H.setAttribute("download","performance_report.json"),document.body.appendChild(H),H.click(),H.remove()}function V(){_(),Le()}function Y(){const I=D();navigator.clipboard.writeText(JSON.stringify(I,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch(j=>{console.error("Erreur lors de la copie des donnes",j),alert("Erreur lors de la copie des donnes")})}async function F(I){const j=O(I.operation,I.timestamp);if(!j){alert("Impossible de trouver les dtails de cette opration");return}const H={operation:{...j.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(j.operation.startTime).toISOString()},context:{...j.context,relatedOperations:j.context.relatedOperations.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),longTasks:j.context.longTasks.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),memorySnapshots:j.context.memorySnapshots.map(U=>({...U,timestamp:`+${U.timestamp.toFixed(2)}ms`,usedJSHeapSize:U.usedJSHeapSize?ae(U.usedJSHeapSize):"N/A",totalJSHeapSize:U.totalJSHeapSize?ae(U.totalJSHeapSize):"N/A"}))},summary:{...j.summary,memoryDelta:ae(j.summary.memoryDelta),maxLongTaskDuration:`${j.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(H,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(U){console.error("Erreur lors de la copie des dtails",U),alert("Erreur lors de la copie des dtails")}}return(I,j)=>{var H,U,R,te,re,me;return Wn(i)?($e(),qe("div",{key:0,class:zi(["performance-panel",`position-${Wn(t)}`,{expanded:r.value}])},[P("div",{class:"perf-header",onClick:j[0]||(j[0]=xe=>r.value=!r.value)},[P("div",d7,[P("div",{class:zi(["perf-indicator",{active:Wn(s)}])},null,2),j[1]||(j[1]=P("span",null,"Performance",-1))]),P("div",p7,[P("span",g7,Zt($.value.fps)+" FPS",1),P("span",m7,Zt(ue($.value.averageDuration))+"ms",1)]),P("button",v7,Zt(r.value?"":""),1)]),r.value?($e(),qe("div",y7,[P("div",_7,[j[6]||(j[6]=P("h3",null,"Mtriques gnrales",-1)),P("div",b7,[P("div",w7,[j[2]||(j[2]=P("span",{class:"perf-metric-label"},"Mesures",-1)),P("span",x7,Zt($.value.totalMeasures),1)]),P("div",L7,[j[3]||(j[3]=P("span",{class:"perf-metric-label"},"Tches longues",-1)),P("span",S7,Zt($.value.totalLongTasks),1)]),P("div",C7,[j[4]||(j[4]=P("span",{class:"perf-metric-label"},"Dure moyenne",-1)),P("span",E7,Zt(ue($.value.averageDuration))+"ms",1)]),P("div",P7,[j[5]||(j[5]=P("span",{class:"perf-metric-label"},"FPS",-1)),P("span",M7,Zt($.value.fps),1)])])]),P("div",A7,[j[10]||(j[10]=P("h3",null,"Mmoire",-1)),P("div",k7,[((H=$.value.memoryUsage)==null?void 0:H.usedJSHeapSize)!==void 0?($e(),qe("div",T7,[j[7]||(j[7]=P("span",{class:"perf-metric-label"},"Utilise",-1)),P("span",N7,Zt(ae((U=$.value.memoryUsage)==null?void 0:U.usedJSHeapSize)),1)])):dn("",!0),((R=$.value.memoryUsage)==null?void 0:R.totalJSHeapSize)!==void 0?($e(),qe("div",D7,[j[8]||(j[8]=P("span",{class:"perf-metric-label"},"Totale",-1)),P("span",B7,Zt(ae((te=$.value.memoryUsage)==null?void 0:te.totalJSHeapSize)),1)])):dn("",!0),((re=$.value.memoryUsage)==null?void 0:re.jsHeapSizeLimit)!==void 0?($e(),qe("div",O7,[j[9]||(j[9]=P("span",{class:"perf-metric-label"},"Limite",-1)),P("span",I7,Zt(ae((me=$.value.memoryUsage)==null?void 0:me.jsHeapSizeLimit)),1)])):dn("",!0)])]),P("div",R7,[j[13]||(j[13]=P("h3",null,"Oprations les plus lentes",-1)),P("div",F7,[j[12]||(j[12]=uc('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),($e(!0),qe(Rn,null,Rr(K.value,xe=>($e(),qe("div",{class:"perf-table-row",key:xe.timestamp},[P("div",j7,Zt(xe.operation),1),P("div",z7,Zt(xe.component),1),P("div",$7,Zt(ue(xe.durationMs))+"ms",1),P("div",U7,[P("button",{onClick:We=>F(xe),class:"perf-action-button",title:"Copier les dtails"},j[11]||(j[11]=[P("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,V7)])]))),128)),K.value.length===0?($e(),qe("div",H7," Aucune opration enregistre ")):dn("",!0)])]),P("div",{class:"perf-actions"},[P("button",{onClick:V,class:"perf-button"}," Rinitialiser "),P("button",{onClick:W,class:"perf-button"}," Tlcharger "),P("button",{onClick:Y,class:"perf-button"}," Copier ")])])):dn("",!0)],2)):dn("",!0)}}}),rm=(e,n)=>{const t=e.__vccOpts||e;for(const[r,i]of n)t[r]=i;return t},q7=rm(G7,[["__scopeId","data-v-fefe39b0"]]),W7={class:"h-screen flex flex-col"},Z7={key:0,class:"bg-white shadow-sm z-[2000] flex-shrink-0"},K7={class:"mx-auto px-4 sm:px-6 lg:px-8"},Y7={class:"flex h-16 items-center justify-between"},J7={class:"flex items-center"},X7={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Q7={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},eN={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},tN={class:"hidden md:flex md:ml-6 space-x-8"},nN={key:0,class:"hidden md:block flex-1 mx-8"},rN={key:1,class:"flex-1"},iN={class:"flex items-center space-x-2 md:space-x-4"},oN={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance active"},sN={class:"relative"},aN={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},lN={class:"flex items-center justify-between w-full"},uN={class:"flex items-center space-x-3"},cN={class:"max-h-72 overflow-y-auto"},fN={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},hN={class:"flex items-start"},dN={class:"flex-shrink-0 mr-3"},pN={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},gN={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},mN={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},vN={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},yN={class:"flex-1"},_N={class:"text-sm md:text-sm text-gray-800"},bN=["onClick"],wN={class:"relative"},xN={class:"hidden md:flex flex-col items-end"},LN={class:"text-sm font-medium text-gray-700"},SN={key:0,class:"text-xs text-gray-500"},CN=["src","alt"],EN={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},PN={class:"text-sm font-semibold text-gray-700"},MN={class:"text-xs text-gray-500"},AN={key:0,class:"md:hidden bg-white border-t border-gray-200"},kN={class:"space-y-1 px-2 pb-3 pt-2"},TN={key:0,class:"px-4 py-3 border-t border-gray-200"},NN=cs({__name:"App",setup(e){const n=Np(),t=ma(),r=dc(),{isQueryParamEnabled:i}=dd(),s=Ft(!1),o=Ft(!1),u=Ft(!1),f=Ft(!1),d=Ft(null),g=Ft(!1),y=Ft(!1),x=Ft(null),_=Ft("13px"),E=Ft("65px");function T(){y.value=window.innerWidth<768}$s(()=>{T(),window.addEventListener("resize",T),window.addEventListener("resize",D)}),cd(()=>{window.removeEventListener("resize",T),window.removeEventListener("resize",D)});function D(){if(!x.value)return;const j=x.value.getBoundingClientRect();_.value=`${j.top+window.scrollY+5}px`;const H=j.left+j.width/2;E.value=`${window.innerWidth-H-22}px`}const O=gr(()=>{const j=t.user;if(!j)return"";const H=`${j.first_name} ${j.last_name.toUpperCase()}`;return j.company_name?`${H} (${j.company_name})`:H}),$=gr(()=>{var H;switch((H=t.user)==null?void 0:H.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),K=gr(()=>{var j;return((j=t.user)==null?void 0:j.user_type)==="admin"}),X=gr(()=>t.isAuthenticated),ae=[{name:"Carte",to:"/"},{name:"Notes",to:"/notes"}],ue=gr(()=>{var H;if(!X.value)return[];const j=[...ae];return(K.value||((H=t.user)==null?void 0:H.user_type)==="entreprise")&&j.push({name:"Utilisateurs",to:"/users"}),j}),Le=gr(()=>X.value?[{name:"Mon profil",to:"/profile"}]:[]);async function W(){try{await t.logout(),n.push("/login")}catch(j){console.error("Erreur lors de la dconnexion:",j)}}function V(j){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:j.lat,lng:j.lng,zoom:16}}))}$s(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await t.checkAuth(),await t.fetchUserProfile();const H=localStorage.getItem("lastPlanId");H&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:H}}))}else console.log("No token found")}catch(j){console.error("Auth check error:",j),n.push("/login")}});const Y=gr(()=>{const j="TagMap";if(!X.value)return`${j} - Connexion`;const H=n.currentRoute.value,R={home:"Carte",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[H.name]||"";return R?`${j} - ${R}`:j});Co(Y,j=>{document.title=j},{immediate:!0});const F=gr(()=>r.notifications.length);function I(){r.clearAll(),u.value=!1}return vp(()=>{if(r.lastAddedId!==null){const j=r.notifications.find(H=>H.id===r.lastAddedId);j&&Xs(()=>{D(),f.value=!0,d.value={id:j.id,message:j.message,type:j.type},requestAnimationFrame(()=>{setTimeout(()=>{g.value=!0,setTimeout(()=>{g.value=!1,setTimeout(()=>{var H;((H=d.value)==null?void 0:H.id)===j.id&&(d.value=null,f.value=!1)},300)},4e3)},50)})})}}),(j,H)=>{var U;return $e(),qe("div",W7,[X.value?($e(),qe("header",Z7,[P("nav",K7,[P("div",Y7,[P("div",J7,[P("button",{onClick:H[0]||(H[0]=R=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[H[7]||(H[7]=P("span",{class:"sr-only"},"Ouvrir le menu",-1)),($e(),qe("svg",X7,[o.value?($e(),qe("path",eN)):($e(),qe("path",Q7))]))]),fi(Wn(Rd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Hl(()=>H[8]||(H[8]=[P("span",{class:"md:inline hidden"},"TagMap",-1),P("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),P("div",tN,[($e(!0),qe(Rn,null,Rr(ue.value,R=>($e(),$a(Wn(Rd),{key:R.name,to:R.to,class:zi(["text-sm font-medium transition-colors duration-200",[j.$route.path===R.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Hl(()=>[Ei(Zt(R.name),1)]),_:2},1032,["to","class"]))),128))])]),j.$route.path==="/"?($e(),qe("div",nN,[fi(nb,{onSelectLocation:V})])):($e(),qe("div",rN)),P("div",iN,[Wn(i)?($e(),qe("button",oN,H[9]||(H[9]=[P("span",{class:"sr-only"},"Performance",-1),P("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):dn("",!0),P("div",sN,[P("button",{ref_key:"bellButtonRef",ref:x,onClick:H[1]||(H[1]=R=>u.value=!u.value),class:zi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":f.value}])},H[10]||(H[10]=[P("span",{class:"sr-only"},"Voir les notifications",-1),P("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?($e(),qe("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:pu(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",aN,[P("div",lN,[H[12]||(H[12]=P("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),P("div",uN,[F.value>0?($e(),qe("button",{key:0,onClick:I,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):dn("",!0),P("button",{onClick:H[2]||(H[2]=R=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},H[11]||(H[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),P("div",cN,[F.value===0?($e(),qe("div",fN," Aucune notification ")):dn("",!0),($e(!0),qe(Rn,null,Rr(Wn(r).notifications,R=>($e(),qe("div",{key:R.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[P("div",hN,[P("div",dN,[R.type==="success"?($e(),qe("svg",pN,H[13]||(H[13]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):R.type==="error"?($e(),qe("svg",gN,H[14]||(H[14]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):R.type==="warning"?($e(),qe("svg",mN,H[15]||(H[15]=[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):($e(),qe("svg",vN,H[16]||(H[16]=[P("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),P("div",yN,[P("p",_N,Zt(R.message),1),P("button",{onClick:te=>Wn(r).removeNotification(R.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,bN)])])]))),128))])],4)):dn("",!0)]),P("div",wN,[P("button",{onClick:H[3]||(H[3]=R=>s.value=!s.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[P("div",xN,[P("span",LN,Zt(O.value),1),$.value?($e(),qe("span",SN,Zt($.value),1)):dn("",!0)]),P("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((U=Wn(t).user)==null?void 0:U.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(O.value),alt:O.value},null,8,CN)]),s.value?($e(),qe("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:pu(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",EN,[P("div",null,[P("div",PN,Zt(O.value),1),P("div",MN,Zt($.value),1)]),P("button",{onClick:H[4]||(H[4]=R=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},H[17]||(H[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),($e(!0),qe(Rn,null,Rr(Le.value,R=>($e(),$a(Wn(Rd),{key:R.name,to:R.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:H[5]||(H[5]=te=>s.value=!1)},{default:Hl(()=>[Ei(Zt(R.name),1)]),_:2},1032,["to"]))),128)),P("button",{onClick:W,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):dn("",!0)])])]),o.value?($e(),qe("div",AN,[P("div",kN,[($e(!0),qe(Rn,null,Rr(ue.value,R=>($e(),$a(Wn(Rd),{key:R.name,to:R.to,class:zi(["block px-3 py-2 rounded-md text-base font-medium",[j.$route.path===R.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:H[6]||(H[6]=te=>o.value=!1)},{default:Hl(()=>[Ei(Zt(R.name),1)]),_:2},1032,["to","class"]))),128))]),j.$route.path==="/"?($e(),qe("div",TN,[fi(nb,{onSelectLocation:V})])):dn("",!0)])):dn("",!0)])])):dn("",!0),P("main",{class:zi([j.$route.path==="/"&&!y.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[fi(Wn(K5))],2),fi(q7,{position:"bottom-left"})])}}}),DN="modulepreload",BN=function(e){return"/static/frontend/"+e},rb={},Yf=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=BN(f),f in rb)return;rb[f]=!0;const d=f.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":DN,d||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return n().catch(s)})},ON={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},IN={class:"max-w-md w-full space-y-8"},RN={class:"space-y-4"},FN={class:"mt-1"},jN={class:"mt-1"},zN={class:"mt-1"},$N={key:0,class:"rounded-md bg-red-50 p-4"},UN={class:"flex"},VN={class:"ml-3"},HN={class:"text-sm font-medium text-red-800"},GN={key:1,class:"rounded-md bg-yellow-50 p-4"},qN={class:"flex"},WN={class:"ml-3"},ZN={class:"mt-2 text-sm text-yellow-700"},KN={class:"list-disc pl-5 space-y-1"},YN=["disabled"],JN={class:"absolute left-0 inset-y-0 flex items-center pl-3"},XN={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},QN={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},eD=cs({__name:"ChangePasswordForm",setup(e){const n=Np(),t=ma(),r=Kl({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ft(!1),s=Ft("");$s(()=>{var d,g;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:t.isAuthenticated,userId:(d=t.user)==null?void 0:d.id,mustChangePassword:(g=t.user)==null?void 0:g.must_change_password})});const o=gr(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=gr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function f(){var d,g,y,x,_,E,T,D;if(!u.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=t.user)!=null&&d.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await t.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),n.push("/")}catch(O){console.error("Password change failed:",O),(y=(g=O.response)==null?void 0:g.data)!=null&&y.detail?s.value=O.response.data.detail:(_=(x=O.response)==null?void 0:x.data)!=null&&_.old_password?s.value=O.response.data.old_password[0]:(T=(E=O.response)==null?void 0:E.data)!=null&&T.password?s.value=O.response.data.password[0]:((D=O.response)==null?void 0:D.status)===401?(s.value="Session expire, veuillez vous reconnecter",await t.logout(),n.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,g)=>($e(),qe("div",ON,[P("div",IN,[g[12]||(g[12]=P("div",null,[P("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),P("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),P("form",{class:"mt-8 space-y-6",onSubmit:Lf(f,["prevent"])},[P("div",RN,[P("div",null,[g[3]||(g[3]=P("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),P("div",FN,[In(P("input",{id:"old-password","onUpdate:modelValue":g[0]||(g[0]=y=>r.oldPassword=y),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ni,r.oldPassword]])])]),P("div",null,[g[4]||(g[4]=P("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),P("div",jN,[In(P("input",{id:"new-password","onUpdate:modelValue":g[1]||(g[1]=y=>r.newPassword=y),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ni,r.newPassword]])]),g[5]||(g[5]=P("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),P("div",null,[g[6]||(g[6]=P("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),P("div",zN,[In(P("input",{id:"confirm-password","onUpdate:modelValue":g[2]||(g[2]=y=>r.confirmPassword=y),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ni,r.confirmPassword]])])])]),s.value?($e(),qe("div",$N,[P("div",UN,[g[7]||(g[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",VN,[P("h3",HN,Zt(s.value),1)])])])):dn("",!0),o.value.length>0?($e(),qe("div",GN,[P("div",qN,[g[9]||(g[9]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),P("div",WN,[g[8]||(g[8]=P("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),P("div",ZN,[P("ul",KN,[($e(!0),qe(Rn,null,Rr(o.value,(y,x)=>($e(),qe("li",{key:x},Zt(y),1))),128))])])])])])):dn("",!0),P("div",null,[P("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[P("span",JN,[i.value?($e(),qe("svg",QN,g[11]||(g[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):($e(),qe("svg",XN,g[10]||(g[10]=[P("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Ei(" "+Zt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,YN)])],32)])]))}}),s1="/static/frontend/assets/logo.svg",tD={class:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12 sm:px-6 lg:px-8 overflow-auto relative"},nD={class:"container mx-auto"},rD={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},iD={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},oD={key:0,class:"rounded-md bg-red-50 p-4"},sD={class:"flex"},aD={class:"ml-3"},lD={class:"text-sm font-medium text-red-800"},uD={class:"mt-1"},cD={class:"mt-1 relative"},fD=["type"],hD={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},dD={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pD={class:"flex items-center justify-between"},gD={class:"flex items-center"},mD={class:"text-sm"},vD=["disabled"],yD={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_D=cs({__name:"LoginView",setup(e){const n=Np(),t=ma(),r=Ft(!1),i=Ft(null),s=Ft(!1),o=Kl({username:"",password:"",rememberMe:!1});$s(async()=>{var f;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((f=window.INITIAL_STATE)!=null&&f.isAuthenticated){console.log("User is authenticated, redirecting to home"),n.push("/");return}await t.restoreSession()&&(console.log("Session restored, redirecting to home"),n.push("/"))}catch(d){console.error("Error during initialization:",d),i.value=null}});async function u(){var f,d,g,y,x,_,E,T,D;r.value=!0,i.value=null;try{if(!o.username||!o.password){i.value="Veuillez remplir tous les champs";return}await t.login(o.username,o.password),(f=t.user)!=null&&f.must_change_password?n.push("/change-password"):n.push("/")}catch(O){console.error("Login error:",O),((d=O==null?void 0:O.response)==null?void 0:d.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((g=O==null?void 0:O.response)==null?void 0:g.status)===401||((y=O==null?void 0:O.response)==null?void 0:y.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(_=(x=O==null?void 0:O.response)==null?void 0:x.data)!=null&&_.detail?i.value=O.response.data.detail:(D=(T=(E=O==null?void 0:O.response)==null?void 0:E.data)==null?void 0:T.non_field_errors)!=null&&D[0]?i.value=O.response.data.non_field_errors[0]:(O==null?void 0:O.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(f,d)=>{const g=Kw("router-link");return $e(),qe("div",tD,[P("div",nD,[d[12]||(d[12]=P("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[P("img",{src:s1,alt:"TagMap Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),P("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," TagMap "),P("p",{class:"mt-2 text-center text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),P("div",rD,[P("div",iD,[P("form",{class:"space-y-6",onSubmit:Lf(u,["prevent"])},[i.value?($e(),qe("div",oD,[P("div",sD,[d[4]||(d[4]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",aD,[P("h3",lD,Zt(i.value),1)])])])):dn("",!0),P("div",null,[d[5]||(d[5]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),P("div",uD,[In(P("input",{id:"username","onUpdate:modelValue":d[0]||(d[0]=y=>o.username=y),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ni,o.username]])])]),P("div",null,[d[8]||(d[8]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),P("div",cD,[In(P("input",{id:"password","onUpdate:modelValue":d[1]||(d[1]=y=>o.password=y),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,fD),[[iy,o.password]]),P("button",{type:"button",onClick:d[2]||(d[2]=y=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?($e(),qe("svg",hD,d[6]||(d[6]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):($e(),qe("svg",dD,d[7]||(d[7]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),P("div",pD,[P("div",gD,[In(P("input",{id:"remember-me","onUpdate:modelValue":d[3]||(d[3]=y=>o.rememberMe=y),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[xl,o.rememberMe]]),d[9]||(d[9]=P("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),P("div",mD,[fi(g,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Hl(()=>d[10]||(d[10]=[Ei(" Mot de passe oubli ? ")])),_:1})])]),P("div",null,[P("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?($e(),qe("svg",yD,d[11]||(d[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dn("",!0),Ei(" "+Zt(r.value?"Connexion en cours...":"Se connecter"),1)],8,vD)])],32)])]),d[13]||(d[13]=uc('<div class="mt-16 pt-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><h2 class="text-center text-2xl font-bold text-gray-800 mb-8">Dcouvrez comment TagMap transforme vos projets </h2><div class="flex justify-center mb-10"><a href="/assets/plaquette-tagmap.pdf" target="_blank" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Tlcharger notre plaquette </a></div><div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3"><div class="bg-white overflow-hidden shadow-lg rounded-lg transition-all duration-300 hover:shadow-xl"><div class="p-6"><div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white mb-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center">Cartographie de prcision</h3><p class="mt-3 text-base text-gray-600 text-center"> Crez des plans dtaills avec des mesures prcises de surfaces, distances et lvations pour optimiser vos projets d&#39;irrigation et d&#39;amnagement. </p></div></div><div class="bg-white overflow-hidden shadow-lg rounded-lg transition-all duration-300 hover:shadow-xl"><div class="p-6"><div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white mb-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center">Gestion collaborative</h3><p class="mt-3 text-base text-gray-600 text-center"> Partagez vos projets avec votre quipe et vos clients. Organisez vos notes golocalises et suivez l&#39;avancement des tches en temps rel. </p></div></div></div><div class="mt-16 mb-16 bg-white overflow-hidden shadow-lg rounded-lg max-w-4xl mx-auto"><div class="p-8"><div class="flex items-center mb-6"><div class="h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-xl"> P</div><div class="ml-4"><h4 class="text-lg font-medium text-gray-900">Pierre Durand</h4><p class="text-sm text-gray-600">Directeur technique, Irrigation Pro</p></div></div><blockquote class="italic text-gray-700"> &quot;TagMap a rvolutionn notre faon de concevoir et de suivre nos projets d&#39;irrigation. La prcision des mesures et la facilit de collaboration entre nos quipes terrain et bureau ont considrablement amlior notre efficacit.&quot; </blockquote></div></div><div class="h-16"></div></div>',1))])])}}});var a1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(t,r){r(n)})(ea,function(t){var r="1.9.4";function i(a){var p,S,G,ie;for(S=1,G=arguments.length;S<G;S++){ie=arguments[S];for(p in ie)a[p]=ie[p]}return a}var s=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function o(a,p){var S=Array.prototype.slice;if(a.bind)return a.bind.apply(a,S.call(arguments,1));var G=S.call(arguments,2);return function(){return a.apply(p,G.length?G.concat(S.call(arguments)):arguments)}}var u=0;function f(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,S){var G,ie,Ce,st;return st=function(){G=!1,ie&&(Ce.apply(S,ie),ie=!1)},Ce=function(){G?ie=arguments:(a.apply(S,arguments),setTimeout(st,p),G=!0)},Ce}function g(a,p,S){var G=p[1],ie=p[0],Ce=G-ie;return a===G&&S?a:((a-ie)%Ce+Ce)%Ce+ie}function y(){return!1}function x(a,p){if(p===!1)return a;var S=Math.pow(10,p===void 0?6:p);return Math.round(a*S)/S}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function E(a){return _(a).split(/\s+/)}function T(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var S in p)a.options[S]=p[S];return a.options}function D(a,p,S){var G=[];for(var ie in a)G.push(encodeURIComponent(S?ie.toUpperCase():ie)+"="+encodeURIComponent(a[ie]));return(!p||p.indexOf("?")===-1?"?":"&")+G.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function $(a,p){return a.replace(O,function(S,G){var ie=p[G];if(ie===void 0)throw new Error("No value provided for variable "+S);return typeof ie=="function"&&(ie=ie(p)),ie})}var K=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function X(a,p){for(var S=0;S<a.length;S++)if(a[S]===p)return S;return-1}var ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Le=0;function W(a){var p=+new Date,S=Math.max(0,16-(p-Le));return Le=p+S,window.setTimeout(a,S)}var V=window.requestAnimationFrame||ue("RequestAnimationFrame")||W,Y=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function F(a,p,S){if(S&&V===W)a.call(p);else return V.call(window,o(a,p))}function I(a){a&&Y.call(window,a)}var j={__proto__:null,extend:i,create:s,bind:o,get lastId(){return u},stamp:f,throttle:d,wrapNum:g,falseFn:y,formatNum:x,trim:_,splitWords:E,setOptions:T,getParamString:D,template:$,isArray:K,indexOf:X,emptyImageUrl:ae,requestFn:V,cancelFn:Y,requestAnimFrame:F,cancelAnimFrame:I};function H(){}H.extend=function(a){var p=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,G=s(S);G.constructor=p,p.prototype=G;for(var ie in this)Object.prototype.hasOwnProperty.call(this,ie)&&ie!=="prototype"&&ie!=="__super__"&&(p[ie]=this[ie]);return a.statics&&i(p,a.statics),a.includes&&(U(a.includes),i.apply(null,[G].concat(a.includes))),i(G,a),delete G.statics,delete G.includes,G.options&&(G.options=S.options?s(S.options):{},i(G.options,a.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ce=0,st=G._initHooks.length;Ce<st;Ce++)G._initHooks[Ce].call(this)}},p},H.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},H.mergeOptions=function(a){return i(this.prototype.options,a),this},H.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),S=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function U(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=K(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var R={on:function(a,p,S){if(typeof a=="object")for(var G in a)this._on(G,a[G],p);else{a=E(a);for(var ie=0,Ce=a.length;ie<Ce;ie++)this._on(a[ie],p,S)}return this},off:function(a,p,S){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var G in a)this._off(G,a[G],p);else{a=E(a);for(var ie=arguments.length===1,Ce=0,st=a.length;Ce<st;Ce++)ie?this._off(a[Ce]):this._off(a[Ce],p,S)}return this},_on:function(a,p,S,G){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,S)===!1){S===this&&(S=void 0);var ie={fn:p,ctx:S};G&&(ie.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(ie)}},_off:function(a,p,S){var G,ie,Ce;if(this._events&&(G=this._events[a],!!G)){if(arguments.length===1){if(this._firingCount)for(ie=0,Ce=G.length;ie<Ce;ie++)G[ie].fn=y;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var st=this._listens(a,p,S);if(st!==!1){var Pt=G[st];this._firingCount&&(Pt.fn=y,this._events[a]=G=G.slice()),G.splice(st,1)}}},fire:function(a,p,S){if(!this.listens(a,S))return this;var G=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var ie=this._events[a];if(ie){this._firingCount=this._firingCount+1||1;for(var Ce=0,st=ie.length;Ce<st;Ce++){var Pt=ie[Ce],zt=Pt.fn;Pt.once&&this.off(a,zt,Pt.ctx),zt.call(Pt.ctx||this,G)}this._firingCount--}}return S&&this._propagateEvent(G),this},listens:function(a,p,S,G){typeof a!="string"&&console.warn('"string" type argument expected');var ie=p;typeof p!="function"&&(G=!!p,ie=void 0,S=void 0);var Ce=this._events&&this._events[a];if(Ce&&Ce.length&&this._listens(a,ie,S)!==!1)return!0;if(G){for(var st in this._eventParents)if(this._eventParents[st].listens(a,p,S,G))return!0}return!1},_listens:function(a,p,S){if(!this._events)return!1;var G=this._events[a]||[];if(!p)return!!G.length;S===this&&(S=void 0);for(var ie=0,Ce=G.length;ie<Ce;ie++)if(G[ie].fn===p&&G[ie].ctx===S)return ie;return!1},once:function(a,p,S){if(typeof a=="object")for(var G in a)this._on(G,a[G],p,!0);else{a=E(a);for(var ie=0,Ce=a.length;ie<Ce;ie++)this._on(a[ie],p,S,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};R.addEventListener=R.on,R.removeEventListener=R.clearAllEventListeners=R.off,R.addOneTimeEventListener=R.once,R.fireEvent=R.fire,R.hasEventListeners=R.listens;var te=H.extend(R);function re(a,p,S){this.x=S?Math.round(a):a,this.y=S?Math.round(p):p}var me=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};re.prototype={clone:function(){return new re(this.x,this.y)},add:function(a){return this.clone()._add(xe(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(xe(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new re(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new re(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(a){a=xe(a);var p=a.x-this.x,S=a.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(a){return a=xe(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=xe(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function xe(a,p,S){return a instanceof re?a:K(a)?new re(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new re(a.x,a.y):new re(a,p,S)}function We(a,p){if(a)for(var S=p?[a,p]:a,G=0,ie=S.length;G<ie;G++)this.extend(S[G])}We.prototype={extend:function(a){var p,S;if(!a)return this;if(a instanceof re||typeof a[0]=="number"||"x"in a)p=S=xe(a);else if(a=N(a),p=a.min,S=a.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(a){return xe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return xe(this.min.x,this.max.y)},getTopRight:function(){return xe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,S;return typeof a[0]=="number"||a instanceof re?a=xe(a):a=N(a),a instanceof We?(p=a.min,S=a.max):p=S=a,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(a){a=N(a);var p=this.min,S=this.max,G=a.min,ie=a.max,Ce=ie.x>=p.x&&G.x<=S.x,st=ie.y>=p.y&&G.y<=S.y;return Ce&&st},overlaps:function(a){a=N(a);var p=this.min,S=this.max,G=a.min,ie=a.max,Ce=ie.x>p.x&&G.x<S.x,st=ie.y>p.y&&G.y<S.y;return Ce&&st},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,S=this.max,G=Math.abs(p.x-S.x)*a,ie=Math.abs(p.y-S.y)*a;return N(xe(p.x-G,p.y-ie),xe(S.x+G,S.y+ie))},equals:function(a){return a?(a=N(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function N(a,p){return!a||a instanceof We?a:new We(a,p)}function ee(a,p){if(a)for(var S=p?[a,p]:a,G=0,ie=S.length;G<ie;G++)this.extend(S[G])}ee.prototype={extend:function(a){var p=this._southWest,S=this._northEast,G,ie;if(a instanceof ce)G=a,ie=a;else if(a instanceof ee){if(G=a._southWest,ie=a._northEast,!G||!ie)return this}else return a?this.extend(ye(a)||fe(a)):this;return!p&&!S?(this._southWest=new ce(G.lat,G.lng),this._northEast=new ce(ie.lat,ie.lng)):(p.lat=Math.min(G.lat,p.lat),p.lng=Math.min(G.lng,p.lng),S.lat=Math.max(ie.lat,S.lat),S.lng=Math.max(ie.lng,S.lng)),this},pad:function(a){var p=this._southWest,S=this._northEast,G=Math.abs(p.lat-S.lat)*a,ie=Math.abs(p.lng-S.lng)*a;return new ee(new ce(p.lat-G,p.lng-ie),new ce(S.lat+G,S.lng+ie))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ce||"lat"in a?a=ye(a):a=fe(a);var p=this._southWest,S=this._northEast,G,ie;return a instanceof ee?(G=a.getSouthWest(),ie=a.getNorthEast()):G=ie=a,G.lat>=p.lat&&ie.lat<=S.lat&&G.lng>=p.lng&&ie.lng<=S.lng},intersects:function(a){a=fe(a);var p=this._southWest,S=this._northEast,G=a.getSouthWest(),ie=a.getNorthEast(),Ce=ie.lat>=p.lat&&G.lat<=S.lat,st=ie.lng>=p.lng&&G.lng<=S.lng;return Ce&&st},overlaps:function(a){a=fe(a);var p=this._southWest,S=this._northEast,G=a.getSouthWest(),ie=a.getNorthEast(),Ce=ie.lat>p.lat&&G.lat<S.lat,st=ie.lng>p.lng&&G.lng<S.lng;return Ce&&st},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=fe(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(a,p){return a instanceof ee?a:new ee(a,p)}function ce(a,p,S){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,S!==void 0&&(this.alt=+S)}ce.prototype={equals:function(a,p){if(!a)return!1;a=ye(a);var S=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return S<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return k.distance(this,ye(a))},wrap:function(){return k.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,S=p/Math.cos(Math.PI/180*this.lat);return fe([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function ye(a,p,S){return a instanceof ce?a:K(a)&&typeof a[0]!="object"?a.length===3?new ce(a[0],a[1],a[2]):a.length===2?new ce(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ce(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new ce(a,p,S)}var se={latLngToPoint:function(a,p){var S=this.projection.project(a),G=this.scale(p);return this.transformation._transform(S,G)},pointToLatLng:function(a,p){var S=this.scale(p),G=this.transformation.untransform(a,S);return this.projection.unproject(G)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(a),G=this.transformation.transform(p.min,S),ie=this.transformation.transform(p.max,S);return new We(G,ie)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?g(a.lng,this.wrapLng,!0):a.lng,S=this.wrapLat?g(a.lat,this.wrapLat,!0):a.lat,G=a.alt;return new ce(S,p,G)},wrapLatLngBounds:function(a){var p=a.getCenter(),S=this.wrapLatLng(p),G=p.lat-S.lat,ie=p.lng-S.lng;if(G===0&&ie===0)return a;var Ce=a.getSouthWest(),st=a.getNorthEast(),Pt=new ce(Ce.lat-G,Ce.lng-ie),zt=new ce(st.lat-G,st.lng-ie);return new ee(Pt,zt)}},k=i({},se,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var S=Math.PI/180,G=a.lat*S,ie=p.lat*S,Ce=Math.sin((p.lat-a.lat)*S/2),st=Math.sin((p.lng-a.lng)*S/2),Pt=Ce*Ce+Math.cos(G)*Math.cos(ie)*st*st,zt=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*zt}}),le=6378137,ke={R:le,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,S=this.MAX_LATITUDE,G=Math.max(Math.min(S,a.lat),-S),ie=Math.sin(G*p);return new re(this.R*a.lng*p,this.R*Math.log((1+ie)/(1-ie))/2)},unproject:function(a){var p=180/Math.PI;return new ce((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=le*Math.PI;return new We([-a,-a],[a,a])}()};function Pe(a,p,S,G){if(K(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=S,this._d=G}Pe.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new re((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function Ve(a,p,S,G){return new Pe(a,p,S,G)}var Z=i({},k,{code:"EPSG:3857",projection:ke,transformation:function(){var a=.5/(Math.PI*ke.R);return Ve(a,.5,-a,.5)}()}),de=i({},Z,{code:"EPSG:900913"});function ve(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function pe(a,p){var S="",G,ie,Ce,st,Pt,zt;for(G=0,Ce=a.length;G<Ce;G++){for(Pt=a[G],ie=0,st=Pt.length;ie<st;ie++)zt=Pt[ie],S+=(ie?"L":"M")+zt.x+" "+zt.y;S+=p?at.svg?"z":"x":""}return S||"M0 0"}var ze=document.documentElement.style,Qe="ActiveXObject"in window,Ke=Qe&&!document.addEventListener,He="msLaunchUri"in navigator&&!("documentMode"in document),Xe=mr("webkit"),ot=mr("android"),kt=mr("android 2")||mr("android 3"),Ct=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ut=ot&&mr("Google")&&Ct<537&&!("AudioNode"in window),Gt=!!window.opera,cn=!He&&mr("chrome"),pn=mr("gecko")&&!Xe&&!Gt&&!Qe,et=!cn&&mr("safari"),it=mr("phantom"),nt="OTransition"in ze,Vt=navigator.platform.indexOf("Win")===0,Qt=Qe&&"transition"in ze,On="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kt,wn="MozPerspective"in ze,Tn=!window.L_DISABLE_3D&&(Qt||On||wn)&&!nt&&!it,ar=typeof orientation<"u"||mr("mobile"),xn=ar&&Xe,Mn=ar&&On,En=!window.PointerEvent&&window.MSPointerEvent,cr=!!(window.PointerEvent||En),yr="ontouchstart"in window||!!window.TouchEvent,mt=!window.L_NO_TOUCH&&(yr||cr),Ge=ar&&Gt,Ot=ar&&pn,Pn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tr=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,p),window.removeEventListener("testPassiveEventSupport",y,p)}catch{}return a}(),Zn=function(){return!!document.createElement("canvas").getContext}(),Wt=!!(document.createElementNS&&ve("svg").createSVGRect),mn=!!Wt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),It=!Wt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Kt=navigator.platform.indexOf("Mac")===0,Ln=navigator.platform.indexOf("Linux")===0;function mr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var at={ie:Qe,ielt9:Ke,edge:He,webkit:Xe,android:ot,android23:kt,androidStock:Ut,opera:Gt,chrome:cn,gecko:pn,safari:et,phantom:it,opera12:nt,win:Vt,ie3d:Qt,webkit3d:On,gecko3d:wn,any3d:Tn,mobile:ar,mobileWebkit:xn,mobileWebkit3d:Mn,msPointer:En,pointer:cr,touch:mt,touchNative:yr,mobileOpera:Ge,mobileGecko:Ot,retina:Pn,passiveEvents:tr,canvas:Zn,svg:Wt,vml:It,inlineSvg:mn,mac:Kt,linux:Ln},Cn=at.msPointer?"MSPointerDown":"pointerdown",xr=at.msPointer?"MSPointerMove":"pointermove",Di=at.msPointer?"MSPointerUp":"pointerup",Fr=at.msPointer?"MSPointerCancel":"pointercancel",Er={touchstart:Cn,touchmove:xr,touchend:Di,touchcancel:Fr},lr={touchstart:Or,touchmove:Zr,touchend:Zr,touchcancel:Zr},Hr={},ir=!1;function Br(a,p,S){return p==="touchstart"&&pi(),lr[p]?(S=lr[p].bind(this,S),a.addEventListener(Er[p],S,!1),S):(console.warn("wrong event specified:",p),y)}function jr(a,p,S){if(!Er[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(Er[p],S,!1)}function rn(a){Hr[a.pointerId]=a}function Ri(a){Hr[a.pointerId]&&(Hr[a.pointerId]=a)}function yi(a){delete Hr[a.pointerId]}function pi(){ir||(document.addEventListener(Cn,rn,!0),document.addEventListener(xr,Ri,!0),document.addEventListener(Di,yi,!0),document.addEventListener(Fr,yi,!0),ir=!0)}function Zr(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in Hr)p.touches.push(Hr[S]);p.changedTouches=[p],a(p)}}function Or(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Sr(p),Zr(a,p)}function Ir(a){var p={},S,G;for(G in a)S=a[G],p[G]=S&&S.bind?S.bind(a):S;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var hr=200;function Fi(a,p){a.addEventListener("dblclick",p);var S=0,G;function ie(Ce){if(Ce.detail!==1){G=Ce.detail;return}if(!(Ce.pointerType==="mouse"||Ce.sourceCapabilities&&!Ce.sourceCapabilities.firesTouchEvents)){var st=Va(Ce);if(!(st.some(function(zt){return zt instanceof HTMLLabelElement&&zt.attributes.for})&&!st.some(function(zt){return zt instanceof HTMLInputElement||zt instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-S<=hr?(G++,G===2&&p(Ir(Ce))):G=1,S=Pt}}}return a.addEventListener("click",ie),{dblclick:p,simDblclick:ie}}function Ss(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var Cs=co(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oi=co(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fn=oi==="webkitTransition"||oi==="OTransition"?oi+"End":"transitionend";function Po(a){return typeof a=="string"?document.getElementById(a):a}function ui(a,p){var S=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(a,null);S=G?G[p]:null}return S==="auto"?null:S}function fr(a,p,S){var G=document.createElement(a);return G.className=p||"",S&&S.appendChild(G),G}function qn(a){var p=a.parentNode;p&&p.removeChild(a)}function bo(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function wo(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function Lr(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function Us(a,p){if(a.classList!==void 0)return a.classList.contains(p);var S=_n(a);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function Hn(a,p){if(a.classList!==void 0)for(var S=E(p),G=0,ie=S.length;G<ie;G++)a.classList.add(S[G]);else if(!Us(a,p)){var Ce=_n(a);Kr(a,(Ce?Ce+" ":"")+p)}}function _r(a,p){a.classList!==void 0?a.classList.remove(p):Kr(a,_((" "+_n(a)+" ").replace(" "+p+" "," ")))}function Kr(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function _n(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function tn(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&si(a,p)}function si(a,p){var S=!1,G="DXImageTransform.Microsoft.Alpha";try{S=a.filters.item(G)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):a.style.filter+=" progid:"+G+"(opacity="+p+")"}function co(a){for(var p=document.documentElement.style,S=0;S<a.length;S++)if(a[S]in p)return a[S];return!1}function xo(a,p,S){var G=p||new re(0,0);a.style[Cs]=(at.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(S?" scale("+S+")":"")}function Pi(a,p){a._leaflet_pos=p,at.any3d?xo(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function fs(a){return a._leaflet_pos||new re(0,0)}var Qo,Ro,hi;if("onselectstart"in document)Qo=function(){br(window,"selectstart",Sr)},Ro=function(){Tr(window,"selectstart",Sr)};else{var Bs=co(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qo=function(){if(Bs){var a=document.documentElement.style;hi=a[Bs],a[Bs]="none"}},Ro=function(){Bs&&(document.documentElement.style[Bs]=hi,hi=void 0)}}function Fo(){br(window,"dragstart",Sr)}function Qi(){Tr(window,"dragstart",Sr)}var Lo,Vs;function va(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(eo(),Lo=a,Vs=a.style.outlineStyle,a.style.outlineStyle="none",br(window,"keydown",eo))}function eo(){Lo&&(Lo.style.outlineStyle=Vs,Lo=void 0,Vs=void 0,Tr(window,"keydown",eo))}function rl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ya(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var pr={__proto__:null,TRANSFORM:Cs,TRANSITION:oi,TRANSITION_END:Fn,get:Po,getStyle:ui,create:fr,remove:qn,empty:bo,toFront:wo,toBack:Lr,hasClass:Us,addClass:Hn,removeClass:_r,setClass:Kr,getClass:_n,setOpacity:tn,testProp:co,setTransform:xo,setPosition:Pi,getPosition:fs,get disableTextSelection(){return Qo},get enableTextSelection(){return Ro},disableImageDrag:Fo,enableImageDrag:Qi,preventOutline:va,restoreOutline:eo,getSizedParentNode:rl,getScale:ya};function br(a,p,S,G){if(p&&typeof p=="object")for(var ie in p)ol(a,ie,p[ie],S);else{p=E(p);for(var Ce=0,st=p.length;Ce<st;Ce++)ol(a,p[Ce],S,G)}return this}var Yr="_leaflet_events";function Tr(a,p,S,G){if(arguments.length===1)jo(a),delete a[Yr];else if(p&&typeof p=="object")for(var ie in p)Hs(a,ie,p[ie],S);else if(p=E(p),arguments.length===2)jo(a,function(Pt){return X(p,Pt)!==-1});else for(var Ce=0,st=p.length;Ce<st;Ce++)Hs(a,p[Ce],S,G);return this}function jo(a,p){for(var S in a[Yr]){var G=S.split(/\d/)[0];(!p||p(G))&&Hs(a,G,null,null,S)}}var il={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ol(a,p,S,G){var ie=p+f(S)+(G?"_"+f(G):"");if(a[Yr]&&a[Yr][ie])return this;var Ce=function(Pt){return S.call(G||a,Pt||window.event)},st=Ce;!at.touchNative&&at.pointer&&p.indexOf("touch")===0?Ce=Br(a,p,Ce):at.touch&&p==="dblclick"?Ce=Fi(a,Ce):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(il[p]||p,Ce,at.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Ce=function(Pt){Pt=Pt||window.event,sl(a,Pt)&&st(Pt)},a.addEventListener(il[p],Ce,!1)):a.addEventListener(p,st,!1):a.attachEvent("on"+p,Ce),a[Yr]=a[Yr]||{},a[Yr][ie]=Ce}function Hs(a,p,S,G,ie){ie=ie||p+f(S)+(G?"_"+f(G):"");var Ce=a[Yr]&&a[Yr][ie];if(!Ce)return this;!at.touchNative&&at.pointer&&p.indexOf("touch")===0?jr(a,p,Ce):at.touch&&p==="dblclick"?Ss(a,Ce):"removeEventListener"in a?a.removeEventListener(il[p]||p,Ce,!1):a.detachEvent("on"+p,Ce),a[Yr][ie]=null}function Ua(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function _u(a){return ol(a,"wheel",Ua),this}function Ml(a){return br(a,"mousedown touchstart dblclick contextmenu",Ua),a._leaflet_disable_click=!0,this}function Sr(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Gr(a){return Sr(a),Ua(a),this}function Va(a){if(a.composedPath)return a.composedPath();for(var p=[],S=a.target;S;)p.push(S),S=S.parentNode;return p}function Wu(a,p){if(!p)return new re(a.clientX,a.clientY);var S=ya(p),G=S.boundingClientRect;return new re((a.clientX-G.left)/S.x-p.clientLeft,(a.clientY-G.top)/S.y-p.clientTop)}var Al=at.linux&&at.chrome?window.devicePixelRatio:at.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Yl(a){return at.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Al:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function sl(a,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==a;)S=S.parentNode}catch{return!1}return S!==a}var kl={__proto__:null,on:br,off:Tr,stopPropagation:Ua,disableScrollPropagation:_u,disableClickPropagation:Ml,preventDefault:Sr,stop:Gr,getPropagationPath:Va,getMousePosition:Wu,getWheelDelta:Yl,isExternalTarget:sl,addListener:br,removeListener:Tr},Jl=te.extend({run:function(a,p,S,G){this.stop(),this._el=a,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=fs(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var S=this._startPos.add(this._offset.multiplyBy(a));p&&S._round(),Pi(this._el,S),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Jr=te.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=T(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(ye(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oi&&at.any3d&&!at.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),br(this._proxy,Fn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(ye(a),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var G=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,S.zoom):this._tryAnimatedPan(a,S.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,S){var G=this.getZoomScale(p),ie=this.getSize().divideBy(2),Ce=a instanceof re?a:this.latLngToContainerPoint(a),st=Ce.subtract(ie).multiplyBy(1-1/G),Pt=this.containerPointToLatLng(ie.add(st));return this.setView(Pt,p,{zoom:S})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():fe(a);var S=xe(p.paddingTopLeft||p.padding||[0,0]),G=xe(p.paddingBottomRight||p.padding||[0,0]),ie=this.getBoundsZoom(a,!1,S.add(G));if(ie=typeof p.maxZoom=="number"?Math.min(p.maxZoom,ie):ie,ie===1/0)return{center:a.getCenter(),zoom:ie};var Ce=G.subtract(S).divideBy(2),st=this.project(a.getSouthWest(),ie),Pt=this.project(a.getNorthEast(),ie),zt=this.unproject(st.add(Pt).divideBy(2).add(Ce),ie);return{center:zt,zoom:ie}},fitBounds:function(a,p){if(a=fe(a),!a.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(a,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=xe(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Hn(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,S){if(S=S||{},S.animate===!1||!at.any3d)return this.setView(a,p,S);this._stop();var G=this.project(this.getCenter()),ie=this.project(a),Ce=this.getSize(),st=this._zoom;a=ye(a),p=p===void 0?st:p;var Pt=Math.max(Ce.x,Ce.y),zt=Pt*this.getZoomScale(st,p),sn=ie.distanceTo(G)||1,Dn=1.42,Jn=Dn*Dn;function zr(gi){var Wo=gi?-1:1,Ne=gi?zt:Pt,ms=zt*zt-Pt*Pt+Wo*Jn*Jn*sn*sn,xu=2*Ne*Jn*sn,Bo=ms/xu,Vr=Math.sqrt(Bo*Bo+1)-Bo,qc=Vr<1e-9?-18:Math.log(Vr);return qc}function go(gi){return(Math.exp(gi)-Math.exp(-gi))/2}function Yi(gi){return(Math.exp(gi)+Math.exp(-gi))/2}function Do(gi){return go(gi)/Yi(gi)}var Hi=zr(0);function gs(gi){return Pt*(Yi(Hi)/Yi(Hi+Dn*gi))}function wc(gi){return Pt*(Yi(Hi)*Do(Hi+Dn*gi)-go(Hi))/Jn}function ca(gi){return 1-Math.pow(1-gi,1.5)}var Ys=Date.now(),Rs=(zr(1)-Hi)/Dn,Af=S.duration?1e3*S.duration:1e3*Rs*.8;function eu(){var gi=(Date.now()-Ys)/Af,Wo=ca(gi)*Rs;gi<=1?(this._flyToFrame=F(eu,this),this._move(this.unproject(G.add(ie.subtract(G).multiplyBy(wc(Wo)/sn)),st),this.getScaleZoom(Pt/gs(Wo),st),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),eu.call(this),this},flyToBounds:function(a,p){var S=this._getBoundsCenterZoom(a,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(a){return a=fe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var S=this.getCenter(),G=this._limitCenter(S,this._zoom,fe(a));return S.equals(G)||this.panTo(G,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var S=xe(p.paddingTopLeft||p.padding||[0,0]),G=xe(p.paddingBottomRight||p.padding||[0,0]),ie=this.project(this.getCenter()),Ce=this.project(a),st=this.getPixelBounds(),Pt=N([st.min.add(S),st.max.subtract(G)]),zt=Pt.getSize();if(!Pt.contains(Ce)){this._enforcingBounds=!0;var sn=Ce.subtract(Pt.getCenter()),Dn=Pt.extend(Ce).getSize().subtract(zt);ie.x+=sn.x<0?-Dn.x:Dn.x,ie.y+=sn.y<0?-Dn.y:Dn.y,this.panTo(this.unproject(ie),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),G=p.divideBy(2).round(),ie=S.divideBy(2).round(),Ce=G.subtract(ie);return!Ce.x&&!Ce.y?this:(a.animate&&a.pan?this.panBy(Ce):(a.pan&&this._rawPanBy(Ce),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,a):navigator.geolocation.getCurrentPosition(p,S,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,S=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,S=a.coords.longitude,G=new ce(p,S),ie=G.toBounds(a.coords.accuracy*2),Ce=this._locateOptions;if(Ce.setView){var st=this.getBoundsZoom(ie);this.setView(G,Ce.maxZoom?Math.min(st,Ce.maxZoom):st)}var Pt={latlng:G,bounds:ie,timestamp:a.timestamp};for(var zt in a.coords)typeof a.coords[zt]=="number"&&(Pt[zt]=a.coords[zt]);this.fire("locationfound",Pt)}},addHandler:function(a,p){if(!p)return this;var S=this[a]=new p(this);return this._handlers.push(S),this.options[a]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)qn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var S="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),G=fr("div",S,p||this._mapPane);return a&&(this._panes[a]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),S=this.unproject(a.getTopRight());return new ee(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,S){a=fe(a),S=xe(S||[0,0]);var G=this.getZoom()||0,ie=this.getMinZoom(),Ce=this.getMaxZoom(),st=a.getNorthWest(),Pt=a.getSouthEast(),zt=this.getSize().subtract(S),sn=N(this.project(Pt,G),this.project(st,G)).getSize(),Dn=at.any3d?this.options.zoomSnap:1,Jn=zt.x/sn.x,zr=zt.y/sn.y,go=p?Math.max(Jn,zr):Math.min(Jn,zr);return G=this.getScaleZoom(go,G),Dn&&(G=Math.round(G/(Dn/100))*(Dn/100),G=p?Math.ceil(G/Dn)*Dn:Math.floor(G/Dn)*Dn),Math.max(ie,Math.min(Ce,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var S=this._getTopLeftPoint(a,p);return new We(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(a)/S.scale(p)},getScaleZoom:function(a,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var G=S.zoom(a*S.scale(p));return isNaN(G)?1/0:G},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(ye(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(xe(a),p)},layerPointToLatLng:function(a){var p=xe(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(ye(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ye(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(fe(a))},distance:function(a,p){return this.options.crs.distance(ye(a),ye(p))},containerPointToLayerPoint:function(a){return xe(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return xe(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(xe(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(a)))},mouseEventToContainerPoint:function(a){return Wu(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=Po(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");br(p,"scroll",this._onScroll,this),this._containerId=f(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&at.any3d,Hn(a,"leaflet-container"+(at.touch?" leaflet-touch":"")+(at.retina?" leaflet-retina":"")+(at.ielt9?" leaflet-oldie":"")+(at.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=ui(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pi(this._mapPane,new re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Hn(a.markerPane,"leaflet-zoom-hide"),Hn(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,S){Pi(this._mapPane,new re(0,0));var G=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var ie=this._zoom!==p;this._moveStart(ie,S)._move(a,p)._moveEnd(ie),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,S,G){p===void 0&&(p=this._zoom);var ie=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),G?S&&S.pinch&&this.fire("zoom",S):((ie||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Pi(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[f(this._container)]=this;var p=a?Tr:br;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),at.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var S=[],G,ie=p==="mouseout"||p==="mouseover",Ce=a.target||a.srcElement,st=!1;Ce;){if(G=this._targets[f(Ce)],G&&(p==="click"||p==="preclick")&&this._draggableMoved(G)){st=!0;break}if(G&&G.listens(p,!0)&&(ie&&!sl(Ce,a)||(S.push(G),ie))||Ce===this._container)break;Ce=Ce.parentNode}return!S.length&&!st&&!ie&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var S=a.type;S==="mousedown"&&va(p),this._fireDOMEvent(a,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,S){if(a.type==="click"){var G=i({},a);G.type="preclick",this._fireDOMEvent(G,G.type,S)}var ie=this._findEventTargets(a,p);if(S){for(var Ce=[],st=0;st<S.length;st++)S[st].listens(p,!0)&&Ce.push(S[st]);ie=Ce.concat(ie)}if(ie.length){p==="contextmenu"&&Sr(a);var Pt=ie[0],zt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var sn=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);zt.containerPoint=sn?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(a),zt.layerPoint=this.containerPointToLayerPoint(zt.containerPoint),zt.latlng=sn?Pt.getLatLng():this.layerPointToLatLng(zt.layerPoint)}for(st=0;st<ie.length;st++)if(ie[st].fire(p,zt,!0),zt.originalEvent._stopped||ie[st].options.bubblingMouseEvents===!1&&X(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return fs(this._mapPane)||new re(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var S=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var S=this.getSize()._divideBy(2);return this.project(a,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,S){var G=this._getNewPixelOrigin(S,p);return this.project(a,p)._subtract(G)},_latLngBoundsToNewLayerBounds:function(a,p,S){var G=this._getNewPixelOrigin(S,p);return N([this.project(a.getSouthWest(),p)._subtract(G),this.project(a.getNorthWest(),p)._subtract(G),this.project(a.getSouthEast(),p)._subtract(G),this.project(a.getNorthEast(),p)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,S){if(!S)return a;var G=this.project(a,p),ie=this.getSize().divideBy(2),Ce=new We(G.subtract(ie),G.add(ie)),st=this._getBoundsOffset(Ce,S,p);return Math.abs(st.x)<=1&&Math.abs(st.y)<=1?a:this.unproject(G.add(st),p)},_limitOffset:function(a,p){if(!p)return a;var S=this.getPixelBounds(),G=new We(S.min.add(a),S.max.add(a));return a.add(this._getBoundsOffset(G,p))},_getBoundsOffset:function(a,p,S){var G=N(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),ie=G.min.subtract(a.min),Ce=G.max.subtract(a.max),st=this._rebound(ie.x,-Ce.x),Pt=this._rebound(ie.y,-Ce.y);return new re(st,Pt)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),S=this.getMaxZoom(),G=at.any3d?this.options.zoomSnap:1;return G&&(a=Math.round(a/G)*G),Math.max(p,Math.min(S,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_r(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var S=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var a=this._proxy=fr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var S=Cs,G=this._proxy.style[S];xo(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),G===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();xo(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(p),ie=this._getCenterOffset(a)._divideBy(1-1/G);return S.animate!==!0&&!this.getSize().contains(ie)?!1:(F(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,S,G){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,Hn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_r(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function to(a,p){return new Jr(a,p)}var or=H.extend({options:{position:"topright"},initialize:function(a){T(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),S=this.getPosition(),G=a._controlCorners[S];return Hn(p,"leaflet-control"),S.indexOf("bottom")!==-1?G.insertBefore(p,G.firstChild):G.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),no=function(a){return new or(a)};Jr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",S=this._controlContainer=fr("div",p+"control-container",this._container);function G(ie,Ce){var st=p+ie+" "+p+Ce;a[ie+Ce]=fr("div",st,S)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)qn(this._controlCorners[a]);qn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var al=or.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,S,G){return S<G?-1:G<S?1:0}},initialize:function(a,p,S){T(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in a)this._addLayer(a[G],G);for(G in p)this._addLayer(p[G],G,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return or.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(f(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Hn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Hn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):_r(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _r(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=fr("div",a),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Ml(p),_u(p);var G=this._section=fr("section",a+"-list");S&&(this._map.on("click",this.collapse,this),br(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ie=this._layersLink=fr("a",a+"-toggle",p);ie.href="#",ie.title="Layers",ie.setAttribute("role","button"),br(ie,{keydown:function(Ce){Ce.keyCode===13&&this._expandSafely()},click:function(Ce){Sr(Ce),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=fr("div",a+"-base",G),this._separator=fr("div",a+"-separator",G),this._overlaysList=fr("div",a+"-overlays",G),p.appendChild(G)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&f(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,S){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(G,ie){return this.options.sortFunction(G.layer,ie.layer,G.name,ie.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bo(this._baseLayersList),bo(this._overlaysList),this._layerControlInputs=[];var a,p,S,G,ie=0;for(S=0;S<this._layers.length;S++)G=this._layers[S],this._addItem(G),p=p||G.overlay,a=a||!G.overlay,ie+=G.overlay?0:1;return this.options.hideSingleBase&&(a=a&&ie>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(f(a.target)),S=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(a,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=S,G.firstChild},_addItem:function(a){var p=document.createElement("label"),S=this._map.hasLayer(a.layer),G;a.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=S):G=this._createRadioElement("leaflet-base-layers_"+f(this),S),this._layerControlInputs.push(G),G.layerId=f(a.layer),br(G,"click",this._onInputClick,this);var ie=document.createElement("span");ie.innerHTML=" "+a.name;var Ce=document.createElement("span");p.appendChild(Ce),Ce.appendChild(G),Ce.appendChild(ie);var st=a.overlay?this._overlaysList:this._baseLayersList;return st.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,S,G=[],ie=[];this._handlingClick=!0;for(var Ce=a.length-1;Ce>=0;Ce--)p=a[Ce],S=this._getLayer(p.layerId).layer,p.checked?G.push(S):p.checked||ie.push(S);for(Ce=0;Ce<ie.length;Ce++)this._map.hasLayer(ie[Ce])&&this._map.removeLayer(ie[Ce]);for(Ce=0;Ce<G.length;Ce++)this._map.hasLayer(G[Ce])||this._map.addLayer(G[Ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,S,G=this._map.getZoom(),ie=a.length-1;ie>=0;ie--)p=a[ie],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&G<S.options.minZoom||S.options.maxZoom!==void 0&&G>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,br(a,"click",Sr),this.expand();var p=this;setTimeout(function(){Tr(a,"click",Sr),p._preventClick=!1})}}),_a=function(a,p,S){return new al(a,p,S)},$i=or.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",S=fr("div",p+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,S,G,ie){var Ce=fr("a",S,G);return Ce.innerHTML=a,Ce.href="#",Ce.title=p,Ce.setAttribute("role","button"),Ce.setAttribute("aria-label",p),Ml(Ce),br(Ce,"click",Gr),br(Ce,"click",ie,this),br(Ce,"click",this._refocusOnMap,this),Ce},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";_r(this._zoomInButton,p),_r(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Hn(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Hn(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jr.mergeOptions({zoomControl:!0}),Jr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $i,this.addControl(this.zoomControl))});var Xl=function(a){return new $i(a)},ta=or.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",S=fr("div",p),G=this.options;return this._addScales(G,p+"-line",S),a.on(G.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),S},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,S){a.metric&&(this._mScale=fr("div",p,S)),a.imperial&&(this._iScale=fr("div",p,S))},_update:function(){var a=this._map,p=a.getSize().y/2,S=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/a)},_updateImperial:function(a){var p=a*3.2808399,S,G,ie;p>5280?(S=p/5280,G=this._getRoundNum(S),this._updateScale(this._iScale,G+" mi",G/S)):(ie=this._getRoundNum(p),this._updateScale(this._iScale,ie+" ft",ie/p))},_updateScale:function(a,p,S){a.style.width=Math.round(this.options.maxWidth*S)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),S=a/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),Tl=function(a){return new ta(a)},Nl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Os=or.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(at.inlineSvg?Nl+" ":"")+"Leaflet</a>"},initialize:function(a){T(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=fr("div","leaflet-control-attribution"),Ml(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),a.length&&S.push(a.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Jr.mergeOptions({attributionControl:!0}),Jr.addInitHook(function(){this.options.attributionControl&&new Os().addTo(this)});var Dl=function(a){return new Os(a)};or.Layers=al,or.Zoom=$i,or.Scale=ta,or.Attribution=Os,no.layers=_a,no.zoom=Xl,no.scale=Tl,no.attribution=Dl;var _i=H.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_i.addTo=function(a,p){return a.addHandler(p,this),this};var Zu={Events:R},Mo=at.touch?"touchstart mousedown":"mousedown",Gs=te.extend({options:{clickTolerance:3},initialize:function(a,p,S,G){T(this,G),this._element=a,this._dragStartTarget=p||a,this._preventOutline=S},enable:function(){this._enabled||(br(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gs._dragging===this&&this.finishDrag(!0),Tr(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Us(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Gs._dragging===this&&this.finishDrag();return}if(!(Gs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Gs._dragging=this,this._preventOutline&&va(this._element),Fo(),Qo(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,S=rl(this._element);this._startPoint=new re(p.clientX,p.clientY),this._startPos=fs(this._element),this._parentScale=ya(S);var G=a.type==="mousedown";br(document,G?"mousemove":"touchmove",this._onMove,this),br(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,S=new re(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Sr(a),this._moved||(this.fire("dragstart"),this._moved=!0,Hn(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Hn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Pi(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){_r(document.body,"leaflet-dragging"),this._lastTarget&&(_r(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Tr(document,"mousemove touchmove",this._onMove,this),Tr(document,"mouseup touchend touchcancel",this._onUp,this),Qi(),Ro();var p=this._moved&&this._moving;this._moving=!1,Gs._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Bl(a,p,S){var G,ie=[1,4,2,8],Ce,st,Pt,zt,sn,Dn,Jn,zr;for(Ce=0,Dn=a.length;Ce<Dn;Ce++)a[Ce]._code=jt(a[Ce],p);for(Pt=0;Pt<4;Pt++){for(Jn=ie[Pt],G=[],Ce=0,Dn=a.length,st=Dn-1;Ce<Dn;st=Ce++)zt=a[Ce],sn=a[st],zt._code&Jn?sn._code&Jn||(zr=xt(sn,zt,Jn,p,S),zr._code=jt(zr,p),G.push(zr)):(sn._code&Jn&&(zr=xt(sn,zt,Jn,p,S),zr._code=jt(zr,p),G.push(zr)),G.push(zt));a=G}return a}function qs(a,p){var S,G,ie,Ce,st,Pt,zt,sn,Dn;if(!a||a.length===0)throw new Error("latlngs not passed");jn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Jn=ye([0,0]),zr=fe(a),go=zr.getNorthWest().distanceTo(zr.getSouthWest())*zr.getNorthEast().distanceTo(zr.getNorthWest());go<1700&&(Jn=ll(a));var Yi=a.length,Do=[];for(S=0;S<Yi;S++){var Hi=ye(a[S]);Do.push(p.project(ye([Hi.lat-Jn.lat,Hi.lng-Jn.lng])))}for(Pt=zt=sn=0,S=0,G=Yi-1;S<Yi;G=S++)ie=Do[S],Ce=Do[G],st=ie.y*Ce.x-Ce.y*ie.x,zt+=(ie.x+Ce.x)*st,sn+=(ie.y+Ce.y)*st,Pt+=st*3;Pt===0?Dn=Do[0]:Dn=[zt/Pt,sn/Pt];var gs=p.unproject(xe(Dn));return ye([gs.lat+Jn.lat,gs.lng+Jn.lng])}function ll(a){for(var p=0,S=0,G=0,ie=0;ie<a.length;ie++){var Ce=ye(a[ie]);p+=Ce.lat,S+=Ce.lng,G++}return ye([p/G,S/G])}var ul={__proto__:null,clipPolygon:Bl,polygonCenter:qs,centroid:ll};function bi(a,p){if(!p||!a.length)return a.slice();var S=p*p;return a=_e(a,S),a=ro(a,S),a}function Es(a,p,S){return Math.sqrt(Nn(a,p,S,!0))}function ba(a,p,S){return Nn(a,p,S)}function ro(a,p){var S=a.length,G=typeof Uint8Array<"u"?Uint8Array:Array,ie=new G(S);ie[0]=ie[S-1]=1,B(a,ie,p,0,S-1);var Ce,st=[];for(Ce=0;Ce<S;Ce++)ie[Ce]&&st.push(a[Ce]);return st}function B(a,p,S,G,ie){var Ce=0,st,Pt,zt;for(Pt=G+1;Pt<=ie-1;Pt++)zt=Nn(a[Pt],a[G],a[ie],!0),zt>Ce&&(st=Pt,Ce=zt);Ce>S&&(p[st]=1,B(a,p,S,G,st),B(a,p,S,st,ie))}function _e(a,p){for(var S=[a[0]],G=1,ie=0,Ce=a.length;G<Ce;G++)un(a[G],a[ie])>p&&(S.push(a[G]),ie=G);return ie<Ce-1&&S.push(a[Ce-1]),S}var Ze;function ct(a,p,S,G,ie){var Ce=G?Ze:jt(a,S),st=jt(p,S),Pt,zt,sn;for(Ze=st;;){if(!(Ce|st))return[a,p];if(Ce&st)return!1;Pt=Ce||st,zt=xt(a,p,Pt,S,ie),sn=jt(zt,S),Pt===Ce?(a=zt,Ce=sn):(p=zt,st=sn)}}function xt(a,p,S,G,ie){var Ce=p.x-a.x,st=p.y-a.y,Pt=G.min,zt=G.max,sn,Dn;return S&8?(sn=a.x+Ce*(zt.y-a.y)/st,Dn=zt.y):S&4?(sn=a.x+Ce*(Pt.y-a.y)/st,Dn=Pt.y):S&2?(sn=zt.x,Dn=a.y+st*(zt.x-a.x)/Ce):S&1&&(sn=Pt.x,Dn=a.y+st*(Pt.x-a.x)/Ce),new re(sn,Dn,ie)}function jt(a,p){var S=0;return a.x<p.min.x?S|=1:a.x>p.max.x&&(S|=2),a.y<p.min.y?S|=4:a.y>p.max.y&&(S|=8),S}function un(a,p){var S=p.x-a.x,G=p.y-a.y;return S*S+G*G}function Nn(a,p,S,G){var ie=p.x,Ce=p.y,st=S.x-ie,Pt=S.y-Ce,zt=st*st+Pt*Pt,sn;return zt>0&&(sn=((a.x-ie)*st+(a.y-Ce)*Pt)/zt,sn>1?(ie=S.x,Ce=S.y):sn>0&&(ie+=st*sn,Ce+=Pt*sn)),st=a.x-ie,Pt=a.y-Ce,G?st*st+Pt*Pt:new re(ie,Ce)}function jn(a){return!K(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function nr(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jn(a)}function vr(a,p){var S,G,ie,Ce,st,Pt,zt,sn;if(!a||a.length===0)throw new Error("latlngs not passed");jn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Dn=ye([0,0]),Jn=fe(a),zr=Jn.getNorthWest().distanceTo(Jn.getSouthWest())*Jn.getNorthEast().distanceTo(Jn.getNorthWest());zr<1700&&(Dn=ll(a));var go=a.length,Yi=[];for(S=0;S<go;S++){var Do=ye(a[S]);Yi.push(p.project(ye([Do.lat-Dn.lat,Do.lng-Dn.lng])))}for(S=0,G=0;S<go-1;S++)G+=Yi[S].distanceTo(Yi[S+1])/2;if(G===0)sn=Yi[0];else for(S=0,Ce=0;S<go-1;S++)if(st=Yi[S],Pt=Yi[S+1],ie=st.distanceTo(Pt),Ce+=ie,Ce>G){zt=(Ce-G)/ie,sn=[Pt.x-zt*(Pt.x-st.x),Pt.y-zt*(Pt.y-st.y)];break}var Hi=p.unproject(xe(sn));return ye([Hi.lat+Dn.lat,Hi.lng+Dn.lng])}var $r={__proto__:null,simplify:bi,pointToSegmentDistance:Es,closestPointOnSegment:ba,clipSegment:ct,_getEdgeIntersection:xt,_getBitCode:jt,_sqClosestPointOnSegment:Nn,isFlat:jn,_flat:nr,polylineCenter:vr},ji={project:function(a){return new re(a.lng,a.lat)},unproject:function(a){return new ce(a.y,a.x)},bounds:new We([-180,-90],[180,90])},di={R:6378137,R_MINOR:6356752314245179e-9,bounds:new We([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,S=this.R,G=a.lat*p,ie=this.R_MINOR/S,Ce=Math.sqrt(1-ie*ie),st=Ce*Math.sin(G),Pt=Math.tan(Math.PI/4-G/2)/Math.pow((1-st)/(1+st),Ce/2);return G=-S*Math.log(Math.max(Pt,1e-10)),new re(a.lng*p*S,G)},unproject:function(a){for(var p=180/Math.PI,S=this.R,G=this.R_MINOR/S,ie=Math.sqrt(1-G*G),Ce=Math.exp(-a.y/S),st=Math.PI/2-2*Math.atan(Ce),Pt=0,zt=.1,sn;Pt<15&&Math.abs(zt)>1e-7;Pt++)sn=ie*Math.sin(st),sn=Math.pow((1-sn)/(1+sn),ie/2),zt=Math.PI/2-2*Math.atan(Ce*sn)-st,st+=zt;return new ce(st*p,a.x*p/S)}},wi={__proto__:null,LonLat:ji,Mercator:di,SphericalMercator:ke},io=i({},k,{code:"EPSG:3395",projection:di,transformation:function(){var a=.5/(Math.PI*di.R);return Ve(a,.5,-a,.5)}()}),fo=i({},k,{code:"EPSG:4326",projection:ji,transformation:Ve(1/180,1,-1/180,.5)}),Ps=i({},se,{projection:ji,transformation:Ve(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var S=p.lng-a.lng,G=p.lat-a.lat;return Math.sqrt(S*S+G*G)},infinite:!0});se.Earth=k,se.EPSG3395=io,se.EPSG3857=Z,se.EPSG900913=de,se.EPSG4326=fo,se.Simple=Ps;var Ur=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Jr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=f(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=f(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return f(a)in this._layers},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},_addLayers:function(a){a=a?K(a)?a:[a]:[];for(var p=0,S=a.length;p<S;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[f(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=f(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,S=this._getZoomSpan();for(var G in this._zoomBoundLayers){var ie=this._zoomBoundLayers[G].options;a=ie.minZoom===void 0?a:Math.min(a,ie.minZoom),p=ie.maxZoom===void 0?p:Math.max(p,ie.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zo=Ur.extend({initialize:function(a,p){T(this,p),this._layers={};var S,G;if(a)for(S=0,G=a.length;S<G;S++)this.addLayer(a[S])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),S,G;for(S in this._layers)G=this._layers[S],G[a]&&G[a].apply(G,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f(a)}}),cl=function(a,p){return new zo(a,p)},es=zo.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),zo.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),zo.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ee;for(var p in this._layers){var S=this._layers[p];a.extend(S.getBounds?S.getBounds():S.getLatLng())}return a}}),Ql=function(a,p){return new es(a,p)},na=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){T(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var S=this._getIconUrl(a);if(!S){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(G,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(a,p){var S=this.options,G=S[p+"Size"];typeof G=="number"&&(G=[G,G]);var ie=xe(G),Ce=xe(p==="shadow"&&S.shadowAnchor||S.iconAnchor||ie&&ie.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(S.className||""),Ce&&(a.style.marginLeft=-Ce.x+"px",a.style.marginTop=-Ce.y+"px"),ie&&(a.style.width=ie.x+"px",a.style.height=ie.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return at.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bu(a){return new na(a)}var Ha=na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ha.imagePath!="string"&&(Ha.imagePath=this._detectIconPath()),(this.options.imagePath||Ha.imagePath)+na.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(S,G,ie){var Ce=G.exec(S);return Ce&&Ce[ie]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=fr("div","leaflet-default-icon-path",document.body),p=ui(a,"background-image")||ui(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Ga=_i.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Gs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Hn(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_r(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,S=p._map,G=this._marker.options.autoPanSpeed,ie=this._marker.options.autoPanPadding,Ce=fs(p._icon),st=S.getPixelBounds(),Pt=S.getPixelOrigin(),zt=N(st.min._subtract(Pt).add(ie),st.max._subtract(Pt).subtract(ie));if(!zt.contains(Ce)){var sn=xe((Math.max(zt.max.x,Ce.x)-zt.max.x)/(st.max.x-zt.max.x)-(Math.min(zt.min.x,Ce.x)-zt.min.x)/(st.min.x-zt.min.x),(Math.max(zt.max.y,Ce.y)-zt.max.y)/(st.max.y-zt.max.y)-(Math.min(zt.min.y,Ce.y)-zt.min.y)/(st.min.y-zt.min.y)).multiplyBy(G);S.panBy(sn,{animate:!1}),this._draggable._newPos._add(sn),this._draggable._startPos._add(sn),Pi(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=F(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,S=p._shadow,G=fs(p._icon),ie=p._map.layerPointToLatLng(G);S&&Pi(S,G),p._latlng=ie,a.latlng=ie,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),ho=Ur.extend({options:{icon:new Ha,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){T(this,p),this._latlng=ye(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=ye(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=a.icon.createIcon(this._icon),G=!1;S!==this._icon&&(this._icon&&this._removeIcon(),G=!0,a.title&&(S.title=a.title),S.tagName==="IMG"&&(S.alt=a.alt||"")),Hn(S,p),a.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&br(S,"focus",this._panOnFocus,this);var ie=a.icon.createShadow(this._shadow),Ce=!1;ie!==this._shadow&&(this._removeShadow(),Ce=!0),ie&&(Hn(ie,p),ie.alt=""),this._shadow=ie,a.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),ie&&Ce&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tr(this._icon,"focus",this._panOnFocus,this),qn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Pi(this._icon,a),this._shadow&&Pi(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Hn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ga)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ga(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&tn(this._icon,a),this._shadow&&tn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,S=p.iconSize?xe(p.iconSize):xe(0,0),G=p.iconAnchor?xe(p.iconAnchor):xe(0,0);a.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:S.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ra(a,p){return new ho(a,p)}var Ms=Ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return T(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hs=Ms.extend({options:{fill:!0,radius:10},initialize:function(a,p){T(this,p),this._latlng=ye(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=ye(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return Ms.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,S=this._clickTolerance(),G=[a+S,p+S];this._pxBounds=new We(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fl(a,p){return new hs(a,p)}var $o=hs.extend({initialize:function(a,p,S){if(typeof p=="number"&&(p=i({},S,{radius:p})),T(this,p),this._latlng=ye(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ee(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ms.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,S=this._map,G=S.options.crs;if(G.distance===k.distance){var ie=Math.PI/180,Ce=this._mRadius/k.R/ie,st=S.project([p+Ce,a]),Pt=S.project([p-Ce,a]),zt=st.add(Pt).divideBy(2),sn=S.unproject(zt).lat,Dn=Math.acos((Math.cos(Ce*ie)-Math.sin(p*ie)*Math.sin(sn*ie))/(Math.cos(p*ie)*Math.cos(sn*ie)))/ie;(isNaN(Dn)||Dn===0)&&(Dn=Ce/Math.cos(Math.PI/180*p)),this._point=zt.subtract(S.getPixelOrigin()),this._radius=isNaN(Dn)?0:zt.x-S.project([sn,a-Dn]).x,this._radiusY=zt.y-st.y}else{var Jn=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Jn).x}this._updateBounds()}});function ts(a,p,S){return new $o(a,p,S)}var ns=Ms.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){T(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,S=null,G=Nn,ie,Ce,st=0,Pt=this._parts.length;st<Pt;st++)for(var zt=this._parts[st],sn=1,Dn=zt.length;sn<Dn;sn++){ie=zt[sn-1],Ce=zt[sn];var Jn=G(a,ie,Ce,!0);Jn<p&&(p=Jn,S=G(a,ie,Ce))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=ye(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ee,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],S=jn(a),G=0,ie=a.length;G<ie;G++)S?(p[G]=ye(a[G]),this._bounds.extend(p[G])):p[G]=this._convertLatLngs(a[G]);return p},_project:function(){var a=new We;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new re(a,a);this._rawPxBounds&&(this._pxBounds=new We([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,S){var G=a[0]instanceof ce,ie=a.length,Ce,st;if(G){for(st=[],Ce=0;Ce<ie;Ce++)st[Ce]=this._map.latLngToLayerPoint(a[Ce]),S.extend(st[Ce]);p.push(st)}else for(Ce=0;Ce<ie;Ce++)this._projectLatlngs(a[Ce],p,S)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,G,ie,Ce,st,Pt,zt;for(S=0,ie=0,Ce=this._rings.length;S<Ce;S++)for(zt=this._rings[S],G=0,st=zt.length;G<st-1;G++)Pt=ct(zt[G],zt[G+1],a,G,!0),Pt&&(p[ie]=p[ie]||[],p[ie].push(Pt[0]),(Pt[1]!==zt[G+1]||G===st-2)&&(p[ie].push(Pt[1]),ie++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,S=0,G=a.length;S<G;S++)a[S]=bi(a[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var S,G,ie,Ce,st,Pt,zt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,Ce=this._parts.length;S<Ce;S++)for(Pt=this._parts[S],G=0,st=Pt.length,ie=st-1;G<st;ie=G++)if(!(!p&&G===0)&&Es(a,Pt[ie],Pt[G])<=zt)return!0;return!1}});function Ku(a,p){return new ns(a,p)}ns._flat=nr;var So=ns.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=ns.prototype._convertLatLngs.call(this,a),S=p.length;return S>=2&&p[0]instanceof ce&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(a){ns.prototype._setLatLngs.call(this,a),jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,S=new re(p,p);if(a=new We(a.min.subtract(S),a.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,ie=this._rings.length,Ce;G<ie;G++)Ce=Bl(this._rings[G],a,!0),Ce.length&&this._parts.push(Ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,S,G,ie,Ce,st,Pt,zt,sn;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Ce=0,zt=this._parts.length;Ce<zt;Ce++)for(S=this._parts[Ce],st=0,sn=S.length,Pt=sn-1;st<sn;Pt=st++)G=S[st],ie=S[Pt],G.y>a.y!=ie.y>a.y&&a.x<(ie.x-G.x)*(a.y-G.y)/(ie.y-G.y)+G.x&&(p=!p);return p||ns.prototype._containsPoint.call(this,a,!0)}});function wa(a,p){return new So(a,p)}var Uo=es.extend({initialize:function(a,p){T(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=K(a)?a:a.features,S,G,ie;if(p){for(S=0,G=p.length;S<G;S++)ie=p[S],(ie.geometries||ie.geometry||ie.features||ie.coordinates)&&this.addData(ie);return this}var Ce=this.options;if(Ce.filter&&!Ce.filter(a))return this;var st=Vo(a,Ce);return st?(st.feature=Go(a),st.defaultOptions=st.options,this.resetStyle(st),Ce.onEachFeature&&Ce.onEachFeature(a,st),this.addLayer(st)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function Vo(a,p){var S=a.type==="Feature"?a.geometry:a,G=S?S.coordinates:null,ie=[],Ce=p&&p.pointToLayer,st=p&&p.coordsToLatLng||La,Pt,zt,sn,Dn;if(!G&&!S)return null;switch(S.type){case"Point":return Pt=st(G),xa(Ce,a,Pt,p);case"MultiPoint":for(sn=0,Dn=G.length;sn<Dn;sn++)Pt=st(G[sn]),ie.push(xa(Ce,a,Pt,p));return new es(ie);case"LineString":case"MultiLineString":return zt=Ho(G,S.type==="LineString"?0:1,st),new ns(zt,p);case"Polygon":case"MultiPolygon":return zt=Ho(G,S.type==="Polygon"?1:2,st),new So(zt,p);case"GeometryCollection":for(sn=0,Dn=S.geometries.length;sn<Dn;sn++){var Jn=Vo({geometry:S.geometries[sn],type:"Feature",properties:a.properties},p);Jn&&ie.push(Jn)}return new es(ie);case"FeatureCollection":for(sn=0,Dn=S.features.length;sn<Dn;sn++){var zr=Vo(S.features[sn],p);zr&&ie.push(zr)}return new es(ie);default:throw new Error("Invalid GeoJSON object.")}}function xa(a,p,S,G){return a?a(p,S):new ho(S,G&&G.markersInheritOptions&&G)}function La(a){return new ce(a[1],a[0],a[2])}function Ho(a,p,S){for(var G=[],ie=0,Ce=a.length,st;ie<Ce;ie++)st=p?Ho(a[ie],p-1,S):(S||La)(a[ie]),G.push(st);return G}function Ao(a,p){return a=ye(a),a.alt!==void 0?[x(a.lng,p),x(a.lat,p),x(a.alt,p)]:[x(a.lng,p),x(a.lat,p)]}function ia(a,p,S,G){for(var ie=[],Ce=0,st=a.length;Ce<st;Ce++)ie.push(p?ia(a[Ce],jn(a[Ce])?0:p-1,S,G):Ao(a[Ce],G));return!p&&S&&ie.length>0&&ie.push(ie[0].slice()),ie}function As(a,p){return a.feature?i({},a.feature,{geometry:p}):Go(p)}function Go(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var _t={toGeoJSON:function(a){return As(this,{type:"Point",coordinates:Ao(this.getLatLng(),a)})}};ho.include(_t),$o.include(_t),hs.include(_t),ns.include({toGeoJSON:function(a){var p=!jn(this._latlngs),S=ia(this._latlngs,p?1:0,!1,a);return As(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),So.include({toGeoJSON:function(a){var p=!jn(this._latlngs),S=p&&!jn(this._latlngs[0]),G=ia(this._latlngs,S?2:p?1:0,!0,a);return p||(G=[G]),As(this,{type:(S?"Multi":"")+"Polygon",coordinates:G})}}),zo.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(a).geometry.coordinates)}),As(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var S=p==="GeometryCollection",G=[];return this.eachLayer(function(ie){if(ie.toGeoJSON){var Ce=ie.toGeoJSON(a);if(S)G.push(Ce.geometry);else{var st=Go(Ce);st.type==="FeatureCollection"?G.push.apply(G,st.features):G.push(st)}}}),S?As(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function qt(a,p){return new Uo(a,p)}var Mt=qt,An=Ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,S){this._url=a,this._bounds=fe(p),T(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Hn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&wo(this._image),this},bringToBack:function(){return this._map&&Lr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=fe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:fr("img");if(Hn(p,"leaflet-image-layer"),this._zoomAnimated&&Hn(p,"leaflet-zoom-animated"),this.options.className&&Hn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;xo(this._image,S,p)},_reset:function(){var a=this._image,p=new We(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();Pi(a,p.min),a.style.width=S.x+"px",a.style.height=S.y+"px"},_updateOpacity:function(){tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Kn=function(a,p,S){return new An(a,p,S)},wr=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:fr("video");if(Hn(p,"leaflet-image-layer"),this._zoomAnimated&&Hn(p,"leaflet-zoom-animated"),this.options.className&&Hn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onloadeddata=o(this.fire,this,"load"),a){for(var S=p.getElementsByTagName("source"),G=[],ie=0;ie<S.length;ie++)G.push(S[ie].src);this._url=S.length>0?G:[p.src];return}K(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Ce=0;Ce<this._url.length;Ce++){var st=fr("source");st.src=this._url[Ce],p.appendChild(st)}}});function Ui(a,p,S){return new wr(a,p,S)}var xi=An.extend({_initImage:function(){var a=this._image=this._url;Hn(a,"leaflet-image-layer"),this._zoomAnimated&&Hn(a,"leaflet-zoom-animated"),this.options.className&&Hn(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Ol(a,p,S){return new xi(a,p,S)}var rs=Ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof ce||K(a))?(this._latlng=ye(a),T(this,p)):(T(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&tn(this._container,1),this.bringToFront(),this.options.interactive&&(Hn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(tn(this._container,0),this._removeTimeout=setTimeout(o(qn,void 0,this._container),200)):qn(this._container),this.options.interactive&&(_r(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ye(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wo(this._container),this},bringToBack:function(){return this._map&&Lr(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof es){p=null;var S=this._source._layers;for(var G in S)if(S[G]._map){p=S[G];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=xe(this.options.offset),S=this._getAnchor();this._zoomAnimated?Pi(this._container,a.add(S)):p=p.add(a).add(S);var G=this._containerBottom=-p.y,ie=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=G+"px",this._container.style.left=ie+"px"}},_getAnchor:function(){return[0,0]}});Jr.include({_initOverlay:function(a,p,S,G){var ie=p;return ie instanceof a||(ie=new a(G).setContent(p)),S&&ie.setLatLng(S),ie}}),Ur.include({_initOverlay:function(a,p,S,G){var ie=S;return ie instanceof a?(T(ie,G),ie._source=this):(ie=p&&!G?p:new a(G,this),ie.setContent(S)),ie}});var Vi=rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,rs.prototype.openOn.call(this,a)},onAdd:function(a){rs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ms||this._source.on("preclick",Ua))},onRemove:function(a){rs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ms||this._source.off("preclick",Ua))},getEvents:function(){var a=rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=fr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=fr("div",a+"-content-wrapper",p);if(this._contentNode=fr("div",a+"-content",S),Ml(p),_u(this._contentNode),br(p,"contextmenu",Ua),this._tipContainer=fr("div",a+"-tip-container",p),this._tip=fr("div",a+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=fr("a",a+"-close-button",p);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',br(G,"click",function(ie){Sr(ie),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var S=a.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var G=a.offsetHeight,ie=this.options.maxHeight,Ce="leaflet-popup-scrolled";ie&&G>ie?(p.height=ie+"px",Hn(a,Ce)):_r(a,Ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),S=this._getAnchor();Pi(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(ui(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,G=this._containerWidth,ie=new re(this._containerLeft,-S-this._containerBottom);ie._add(fs(this._container));var Ce=a.layerPointToContainerPoint(ie),st=xe(this.options.autoPanPadding),Pt=xe(this.options.autoPanPaddingTopLeft||st),zt=xe(this.options.autoPanPaddingBottomRight||st),sn=a.getSize(),Dn=0,Jn=0;Ce.x+G+zt.x>sn.x&&(Dn=Ce.x+G-sn.x+zt.x),Ce.x-Dn-Pt.x<0&&(Dn=Ce.x-Pt.x),Ce.y+S+zt.y>sn.y&&(Jn=Ce.y+S-sn.y+zt.y),Ce.y-Jn-Pt.y<0&&(Jn=Ce.y-Pt.y),(Dn||Jn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Dn,Jn]))}},_getAnchor:function(){return xe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oa=function(a,p){return new Vi(a,p)};Jr.mergeOptions({closePopupOnClick:!0}),Jr.include({openPopup:function(a,p,S){return this._initOverlay(Vi,a,p,S).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ur.include({bindPopup:function(a,p){return this._popup=this._initOverlay(Vi,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof es||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Gr(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof Ms)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Sa=rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){rs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){rs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=rs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fr("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,S,G=this._map,ie=this._container,Ce=G.latLngToContainerPoint(G.getCenter()),st=G.layerPointToContainerPoint(a),Pt=this.options.direction,zt=ie.offsetWidth,sn=ie.offsetHeight,Dn=xe(this.options.offset),Jn=this._getAnchor();Pt==="top"?(p=zt/2,S=sn):Pt==="bottom"?(p=zt/2,S=0):Pt==="center"?(p=zt/2,S=sn/2):Pt==="right"?(p=0,S=sn/2):Pt==="left"?(p=zt,S=sn/2):st.x<Ce.x?(Pt="right",p=0,S=sn/2):(Pt="left",p=zt+(Dn.x+Jn.x)*2,S=sn/2),a=a.subtract(xe(p,S,!0)).add(Dn).add(Jn),_r(ie,"leaflet-tooltip-right"),_r(ie,"leaflet-tooltip-left"),_r(ie,"leaflet-tooltip-top"),_r(ie,"leaflet-tooltip-bottom"),Hn(ie,"leaflet-tooltip-"+Pt),Pi(ie,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&tn(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return xe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sa=function(a,p){return new Sa(a,p)};Jr.include({openTooltip:function(a,p,S){return this._initOverlay(Sa,a,p,S).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ur.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Sa,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof es||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(br(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),br(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,S,G;this._tooltip.options.sticky&&a.originalEvent&&(S=this._map.mouseEventToContainerPoint(a.originalEvent),G=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(p)}});var aa=na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),S=this.options;if(S.html instanceof Element?(bo(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var G=xe(S.bgPos);p.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function la(a){return new aa(a)}na.Default=Ha;var Xr=Ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:at.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){T(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),qn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof re?a:new re(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,S=-a(-1/0,1/0),G=0,ie=p.length,Ce;G<ie;G++)Ce=p[G].style.zIndex,p[G]!==this._container&&Ce&&(S=a(S,+Ce));isFinite(S)&&(this.options.zIndex=S+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!at.ielt9){tn(this._container,this.options.opacity);var a=+new Date,p=!1,S=!1;for(var G in this._tiles){var ie=this._tiles[G];if(!(!ie.current||!ie.loaded)){var Ce=Math.min(1,(a-ie.loaded)/200);tn(ie.el,Ce),Ce<1?p=!0:(ie.active?S=!0:this._onOpaqueTile(ie),ie.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(I(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=fr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===a?(this._levels[S].el.style.zIndex=p-Math.abs(a-S),this._onUpdateLevel(S)):(qn(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var G=this._levels[a],ie=this._map;return G||(G=this._levels[a]={},G.el=fr("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=p,G.origin=ie.project(ie.unproject(ie.getPixelOrigin()),a).round(),G.zoom=a,this._setZoomTransform(G,ie.getCenter(),ie.getZoom()),y(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var G=p.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)qn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,S,G){var ie=Math.floor(a/2),Ce=Math.floor(p/2),st=S-1,Pt=new re(+ie,+Ce);Pt.z=+st;var zt=this._tileCoordsToKey(Pt),sn=this._tiles[zt];return sn&&sn.active?(sn.retain=!0,!0):(sn&&sn.loaded&&(sn.retain=!0),st>G?this._retainParent(ie,Ce,st,G):!1)},_retainChildren:function(a,p,S,G){for(var ie=2*a;ie<2*a+2;ie++)for(var Ce=2*p;Ce<2*p+2;Ce++){var st=new re(ie,Ce);st.z=S+1;var Pt=this._tileCoordsToKey(st),zt=this._tiles[Pt];if(zt&&zt.active){zt.retain=!0;continue}else zt&&zt.loaded&&(zt.retain=!0);S+1<G&&this._retainChildren(ie,Ce,S+1,G)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,S,G){var ie=Math.round(p);this.options.maxZoom!==void 0&&ie>this.options.maxZoom||this.options.minZoom!==void 0&&ie<this.options.minZoom?ie=void 0:ie=this._clampZoom(ie);var Ce=this.options.updateWhenZooming&&ie!==this._tileZoom;(!G||Ce)&&(this._tileZoom=ie,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ie!==void 0&&this._update(a),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],a,p)},_setZoomTransform:function(a,p,S){var G=this._map.getZoomScale(S,a.zoom),ie=a.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(p,S)).round();at.any3d?xo(a.el,ie,G):Pi(a.el,ie)},_resetGrid:function(){var a=this._map,p=a.options.crs,S=this._tileSize=this.getTileSize(),G=this._tileZoom,ie=this._map.getPixelWorldBounds(this._tileZoom);ie&&(this._globalTileRange=this._pxBoundsToTileRange(ie)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],G).x/S.x),Math.ceil(a.project([0,p.wrapLng[1]],G).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],G).y/S.x),Math.ceil(a.project([p.wrapLat[1],0],G).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),G=p.getZoomScale(S,this._tileZoom),ie=p.project(a,this._tileZoom).floor(),Ce=p.getSize().divideBy(G*2);return new We(ie.subtract(Ce),ie.add(Ce))},_update:function(a){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(a),ie=this._pxBoundsToTileRange(G),Ce=ie.getCenter(),st=[],Pt=this.options.keepBuffer,zt=new We(ie.getBottomLeft().subtract([Pt,-Pt]),ie.getTopRight().add([Pt,-Pt]));if(!(isFinite(ie.min.x)&&isFinite(ie.min.y)&&isFinite(ie.max.x)&&isFinite(ie.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var sn in this._tiles){var Dn=this._tiles[sn].coords;(Dn.z!==this._tileZoom||!zt.contains(new re(Dn.x,Dn.y)))&&(this._tiles[sn].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(a,S);return}for(var Jn=ie.min.y;Jn<=ie.max.y;Jn++)for(var zr=ie.min.x;zr<=ie.max.x;zr++){var go=new re(zr,Jn);if(go.z=this._tileZoom,!!this._isValidTile(go)){var Yi=this._tiles[this._tileCoordsToKey(go)];Yi?Yi.current=!0:st.push(go)}}if(st.sort(function(Hi,gs){return Hi.distanceTo(Ce)-gs.distanceTo(Ce)}),st.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Do=document.createDocumentFragment();for(zr=0;zr<st.length;zr++)this._addTile(st[zr],Do);this._level.el.appendChild(Do)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(a.x<S.min.x||a.x>S.max.x)||!p.wrapLat&&(a.y<S.min.y||a.y>S.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(a);return fe(this.options.bounds).overlaps(G)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,S=this.getTileSize(),G=a.scaleBy(S),ie=G.add(S),Ce=p.unproject(G,a.z),st=p.unproject(ie,a.z);return[Ce,st]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),S=new ee(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),S=new re(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(a){var p=this._tiles[a];p&&(qn(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Hn(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=y,a.onmousemove=y,at.ielt9&&this.options.opacity<1&&tn(a,this.options.opacity)},_addTile:function(a,p){var S=this._getTilePos(a),G=this._tileCoordsToKey(a),ie=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(ie),this.createTile.length<2&&F(o(this._tileReady,this,a,null,ie)),Pi(ie,S),this._tiles[G]={el:ie,coords:a,current:!0},p.appendChild(ie),this.fire("tileloadstart",{tile:ie,coords:a})},_tileReady:function(a,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:a});var G=this._tileCoordsToKey(a);S=this._tiles[G],S&&(S.loaded=+new Date,this._map._fadeAnimated?(tn(S.el,0),I(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(Hn(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),at.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new re(this._wrapX?g(a.x,this._wrapX):a.x,this._wrapY?g(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new We(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Ws(a){return new Xr(a)}var ko=Xr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=T(this,p),p.detectRetina&&at.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var S=document.createElement("img");return br(S,"load",o(this._tileOnLoad,this,p,S)),br(S,"error",o(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(a),S},getTileUrl:function(a){var p={r:at.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=S),p["-y"]=S}return $(this._url,i(p,this.options))},_tileOnLoad:function(a,p){at.ielt9?setTimeout(o(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,S){var G=this.options.errorTileUrl;G&&p.getAttribute("src")!==G&&(p.src=G),a(S,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,G=this.options.zoomOffset;return S&&(a=p-a),a+G},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=y,p.onerror=y,!p.complete)){p.src=ae;var S=this._tiles[a].coords;qn(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",ae),Xr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,S){if(!(!this._map||S&&S.getAttribute("src")===ae))return Xr.prototype._tileReady.call(this,a,p,S)}});function Li(a,p){return new ko(a,p)}var Mi=ko.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var S=i({},this.defaultWmsParams);for(var G in p)G in this.options||(S[G]=p[G]);p=T(this,p);var ie=p.detectRetina&&at.retina?2:1,Ce=this.getTileSize();S.width=Ce.x*ie,S.height=Ce.y*ie,this.wmsParams=S},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,ko.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),S=this._crs,G=N(S.project(p[0]),S.project(p[1])),ie=G.min,Ce=G.max,st=(this._wmsVersion>=1.3&&this._crs===fo?[ie.y,ie.x,Ce.y,Ce.x]:[ie.x,ie.y,Ce.x,Ce.y]).join(","),Pt=ko.prototype.getTileUrl.call(this,a);return Pt+D(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+st},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function oo(a,p){return new Mi(a,p)}ko.WMS=Mi,Li.wms=oo;var Oi=Ur.extend({options:{padding:.1},initialize:function(a){T(this,a),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Hn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var S=this._map.getZoomScale(p,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),ie=this._map.project(this._center,p),Ce=G.multiplyBy(-S).add(ie).subtract(this._map._getNewPixelOrigin(a,p));at.any3d?xo(this._container,Ce,S):Pi(this._container,Ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new We(S,S.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ks=Oi.extend({options:{tolerance:0},getEvents:function(){var a=Oi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");br(a,"mousemove",this._onMouseMove,this),br(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),br(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,qn(this._container),Tr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,p=this._container,S=a.getSize(),G=at.retina?2:1;Pi(p,a.min),p.width=G*S.x,p.height=G*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",at.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,S=p.next,G=p.prev;S?S.prev=G:this._drawLast=G,G?G.next=S:this._drawFirst=S,delete a._order,delete this._layers[f(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),S=[],G,ie;for(ie=0;ie<p.length;ie++){if(G=Number(p[ie]),isNaN(G))return;S.push(G)}a.options._dashArray=S}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new We,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)a=G.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var S,G,ie,Ce,st=a._parts,Pt=st.length,zt=this._ctx;if(Pt){for(zt.beginPath(),S=0;S<Pt;S++){for(G=0,ie=st[S].length;G<ie;G++)Ce=st[S][G],zt[G?"lineTo":"moveTo"](Ce.x,Ce.y);p&&zt.closePath()}this._fillStroke(zt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,S=this._ctx,G=Math.max(Math.round(a._radius),1),ie=(Math.max(Math.round(a._radiusY),1)||G)/G;ie!==1&&(S.save(),S.scale(1,ie)),S.beginPath(),S.arc(p.x,p.y/ie,G,0,Math.PI*2,!1),ie!==1&&S.restore(),this._fillStroke(S,a)}},_fillStroke:function(a,p){var S=p.options;S.fill&&(a.globalAlpha=S.fillOpacity,a.fillStyle=S.fillColor||S.color,a.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=S.opacity,a.lineWidth=S.weight,a.strokeStyle=S.color,a.lineCap=S.lineCap,a.lineJoin=S.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),S,G,ie=this._drawFirst;ie;ie=ie.next)S=ie.layer,S.options.interactive&&S._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(S))&&(G=S);this._fireEvent(G?[G]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(_r(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var S,G,ie=this._drawFirst;ie;ie=ie.next)S=ie.layer,S.options.interactive&&S._containsPoint(p)&&(G=S);G!==this._hoveredLayer&&(this._handleMouseOut(a),G&&(Hn(this._container,"leaflet-interactive"),this._fireEvent([G],a,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,S){this._map._fireDOMEvent(p,S||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var S=p.next,G=p.prev;if(S)S.prev=G;else return;G?G.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var S=p.next,G=p.prev;if(G)G.next=S;else return;S?S.prev=G:G&&(this._drawLast=G),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function ds(a){return at.canvas?new ks(a):null}var Is=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),wu={_initContainer:function(){this._container=fr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=Is("shape");Hn(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=Is("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;qn(p),a.removeInteractiveTarget(p),delete this._layers[f(a)]},_updateStyle:function(a){var p=a._stroke,S=a._fill,G=a.options,ie=a._container;ie.stroked=!!G.stroke,ie.filled=!!G.fill,G.stroke?(p||(p=a._stroke=Is("stroke")),ie.appendChild(p),p.weight=G.weight+"px",p.color=G.color,p.opacity=G.opacity,G.dashArray?p.dashStyle=K(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=G.lineCap.replace("butt","flat"),p.joinstyle=G.lineJoin):p&&(ie.removeChild(p),a._stroke=null),G.fill?(S||(S=a._fill=Is("fill")),ie.appendChild(S),S.color=G.fillColor||G.color,S.opacity=G.fillOpacity):S&&(ie.removeChild(S),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),S=Math.round(a._radius),G=Math.round(a._radiusY||S);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+G+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){wo(a._container)},_bringToBack:function(a){Lr(a._container)}},ua=at.vml?Is:ve,po=Oi.extend({_initContainer:function(){this._container=ua("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ua("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qn(this._container),Tr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,p=a.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),Pi(S,a.min),S.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=ua("path");a.options.className&&Hn(p,a.options.className),a.options.interactive&&Hn(p,"leaflet-interactive"),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){qn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,S=a.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,pe(a._parts,p))},_updateCircle:function(a){var p=a._point,S=Math.max(Math.round(a._radius),1),G=Math.max(Math.round(a._radiusY),1)||S,ie="a"+S+","+G+" 0 1,0 ",Ce=a._empty()?"M0 0":"M"+(p.x-S)+","+p.y+ie+S*2+",0 "+ie+-S*2+",0 ";this._setPath(a,Ce)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){wo(a._path)},_bringToBack:function(a){Lr(a._path)}});at.vml&&po.include(wu);function Bi(a){return at.svg||at.vml?new po(a):null}Jr.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&ds(a)||Bi(a)}});var qo=So.extend({initialize:function(a,p){So.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=fe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ps(a,p){return new qo(a,p)}po.create=ua,po.pointsToPath=pe,Uo.geometryToLayer=Vo,Uo.coordsToLatLng=La,Uo.coordsToLatLngs=Ho,Uo.latLngToCoords=Ao,Uo.latLngsToCoords=ia,Uo.getFeature=As,Uo.asFeature=Go,Jr.mergeOptions({boxZoom:!0});var dr=_i.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){br(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Tr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qo(),Fo(),this._startPoint=this._map.mouseEventToContainerPoint(a),br(document,{contextmenu:Gr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=fr("div","leaflet-zoom-box",this._container),Hn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new We(this._point,this._startPoint),S=p.getSize();Pi(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(qn(this._box),_r(this._container,"leaflet-crosshair")),Ro(),Qi(),Tr(document,{contextmenu:Gr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jr.addInitHook("addHandler","boxZoom",dr),Jr.mergeOptions({doubleClickZoom:!0});var Ca=_i.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,S=p.getZoom(),G=p.options.zoomDelta,ie=a.originalEvent.shiftKey?S-G:S+G;p.options.doubleClickZoom==="center"?p.setZoom(ie):p.setZoomAround(a.containerPoint,ie)}});Jr.addInitHook("addHandler","doubleClickZoom",Ca),Jr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ea=_i.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Gs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Hn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_r(this._map._container,"leaflet-grab"),_r(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=fe(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),S=this._initialWorldOffset,G=this._draggable._newPos.x,ie=(G-p+S)%a+p-S,Ce=(G+p+S)%a-p-S,st=Math.abs(ie+S)<Math.abs(Ce+S)?ie:Ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=st},_onDragEnd:function(a){var p=this._map,S=p.options,G=!S.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),G)p.fire("moveend");else{this._prunePositions(+new Date);var ie=this._lastPos.subtract(this._positions[0]),Ce=(this._lastTime-this._times[0])/1e3,st=S.easeLinearity,Pt=ie.multiplyBy(st/Ce),zt=Pt.distanceTo([0,0]),sn=Math.min(S.inertiaMaxSpeed,zt),Dn=Pt.multiplyBy(sn/zt),Jn=sn/(S.inertiaDeceleration*st),zr=Dn.multiplyBy(-Jn/2).round();!zr.x&&!zr.y?p.fire("moveend"):(zr=p._limitOffset(zr,p.options.maxBounds),F(function(){p.panBy(zr,{duration:Jn,easeLinearity:st,noMoveStart:!0,animate:!0})}))}}});Jr.addInitHook("addHandler","dragging",Ea),Jr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zs=_i.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),br(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Tr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,S=a.scrollTop||p.scrollTop,G=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(G,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},S=this.keyCodes,G,ie;for(G=0,ie=S.left.length;G<ie;G++)p[S.left[G]]=[-1*a,0];for(G=0,ie=S.right.length;G<ie;G++)p[S.right[G]]=[a,0];for(G=0,ie=S.down.length;G<ie;G++)p[S.down[G]]=[0,a];for(G=0,ie=S.up.length;G<ie;G++)p[S.up[G]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},S=this.keyCodes,G,ie;for(G=0,ie=S.zoomIn.length;G<ie;G++)p[S.zoomIn[G]]=a;for(G=0,ie=S.zoomOut.length;G<ie;G++)p[S.zoomOut[G]]=-a},_addHooks:function(){br(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Tr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,S=this._map,G;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(G=this._panKeys[p],a.shiftKey&&(G=xe(G).multiplyBy(3)),S.options.maxBounds&&(G=S._limitOffset(xe(G),S.options.maxBounds)),S.options.worldCopyJump){var ie=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(G)));S.panTo(ie)}else S.panBy(G)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Gr(a)}}});Jr.addInitHook("addHandler","keyboard",Zs),Jr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var is=_i.extend({addHooks:function(){br(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Tr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Yl(a),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var G=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),G),Gr(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),S=this._map.options.zoomSnap||0;a._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ie=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,Ce=S?Math.ceil(ie/S)*S:ie,st=a._limitZoom(p+(this._delta>0?Ce:-Ce))-p;this._delta=0,this._startTime=null,st&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+st):a.setZoomAround(this._lastMousePos,p+st))}});Jr.addInitHook("addHandler","scrollWheelZoom",is);var bc=600;Jr.mergeOptions({tapHold:at.touchNative&&at.safari&&at.mobile,tapTolerance:15});var To=_i.extend({addHooks:function(){br(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Tr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new re(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(br(document,"touchend",Sr),br(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),bc),br(document,"touchend touchcancel contextmenu",this._cancel,this),br(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Tr(document,"touchend",Sr),Tr(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Tr(document,"touchend touchcancel contextmenu",this._cancel,this),Tr(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new re(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var S=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});Jr.addInitHook("addHandler","tapHold",To),Jr.mergeOptions({touchZoom:at.touch,bounceAtZoomLimits:!0});var No=_i.extend({addHooks:function(){Hn(this._map._container,"leaflet-touch-zoom"),br(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_r(this._map._container,"leaflet-touch-zoom"),Tr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(a.touches[0]),G=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add(G)._divideBy(2))),this._startDist=S.distanceTo(G),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),br(document,"touchmove",this._onTouchMove,this),br(document,"touchend touchcancel",this._onTouchEnd,this),Sr(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(a.touches[0]),G=p.mouseEventToContainerPoint(a.touches[1]),ie=S.distanceTo(G)/this._startDist;if(this._zoom=p.getScaleZoom(ie,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&ie<1||this._zoom>p.getMaxZoom()&&ie>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,ie===1)return}else{var Ce=S._add(G)._divideBy(2)._subtract(this._centerPoint);if(ie===1&&Ce.x===0&&Ce.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Ce),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var st=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(st,this,!0),Sr(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Tr(document,"touchmove",this._onTouchMove,this),Tr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jr.addInitHook("addHandler","touchZoom",No),Jr.BoxZoom=dr,Jr.DoubleClickZoom=Ca,Jr.Drag=Ea,Jr.Keyboard=Zs,Jr.ScrollWheelZoom=is,Jr.TapHold=To,Jr.TouchZoom=No,t.Bounds=We,t.Browser=at,t.CRS=se,t.Canvas=ks,t.Circle=$o,t.CircleMarker=hs,t.Class=H,t.Control=or,t.DivIcon=aa,t.DivOverlay=rs,t.DomEvent=kl,t.DomUtil=pr,t.Draggable=Gs,t.Evented=te,t.FeatureGroup=es,t.GeoJSON=Uo,t.GridLayer=Xr,t.Handler=_i,t.Icon=na,t.ImageOverlay=An,t.LatLng=ce,t.LatLngBounds=ee,t.Layer=Ur,t.LayerGroup=zo,t.LineUtil=$r,t.Map=Jr,t.Marker=ho,t.Mixin=Zu,t.Path=Ms,t.Point=re,t.PolyUtil=ul,t.Polygon=So,t.Polyline=ns,t.Popup=Vi,t.PosAnimation=Jl,t.Projection=wi,t.Rectangle=qo,t.Renderer=Oi,t.SVG=po,t.SVGOverlay=xi,t.TileLayer=ko,t.Tooltip=Sa,t.Transformation=Pe,t.Util=j,t.VideoOverlay=wr,t.bind=o,t.bounds=N,t.canvas=ds,t.circle=ts,t.circleMarker=fl,t.control=no,t.divIcon=la,t.extend=i,t.featureGroup=Ql,t.geoJSON=qt,t.geoJson=Mt,t.gridLayer=Ws,t.icon=bu,t.imageOverlay=Kn,t.latLng=ye,t.latLngBounds=fe,t.layerGroup=cl,t.map=to,t.marker=ra,t.point=xe,t.polygon=wa,t.polyline=Ku,t.popup=oa,t.rectangle=ps,t.setOptions=T,t.stamp=f,t.svg=Bi,t.svgOverlay=Ol,t.tileLayer=Li,t.tooltip=sa,t.transformation=Ve,t.version=r,t.videoOverlay=Ui;var Ks=window.L;t.noConflict=function(){return window.L=Ks,this},window.L=t})})(a1,a1.exports);var Rt=a1.exports;const Vn=fy(Rt);var ib={exports:{}};(function(e,n){(function(t,r){r(n)})(ea,function(t){var r=typeof window<"u"?window:typeof ea<"u"?ea:typeof self<"u"?self:{};function i(d,g){return d(g={exports:{}},g.exports),g.exports}var s=i(function(d,g){(function(y){const x={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:_,mimeType:function(U){return U=_(U).toLowerCase(),function(){var R="application/font-woff",te="image/jpeg";return{woff:R,woff2:R,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:te,jpeg:te,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,R){return`data:${R};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(te){U.toBlob(te)}):(R=U,new Promise(function(te){const re=Le(R.toDataURL().split(",")[1]);var me=re.length;const xe=new Uint8Array(me);for(let We=0;We<me;We++)xe[We]=re.charCodeAt(We);te(new Blob([xe],{type:"image/png"}))}));var R},resolveUrl:function(U,R){const te=document.implementation.createHTMLDocument(),re=te.createElement("base"),me=(te.head.appendChild(re),te.createElement("a"));return te.body.appendChild(me),re.href=R,me.href=U,me.href},getAndEncode:function(U){let R=ae.impl.urlCache.find(function(te){return te.url===U});return R||(R={url:U,promise:null},ae.impl.urlCache.push(R)),R.promise===null&&(ae.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),R.promise=new Promise(function(te){const re=ae.impl.options.httpTimeout,me=new XMLHttpRequest;let xe;var We;function N(ee){console.error(ee),te("")}me.onreadystatechange=function(){if(me.readyState===4)if(me.status!==200)xe?te(xe):N(`cannot fetch resource: ${U}, status: `+me.status);else{const ee=new FileReader;ee.onloadend=function(){var fe=ee.result.split(/,/)[1];te(fe)},ee.readAsDataURL(me.response)}},me.ontimeout=function(){xe?te(xe):N(`timeout of ${re}ms occured while fetching resource: `+U)},me.responseType="blob",me.timeout=re,ae.impl.options.useCredentials&&(me.withCredentials=!0),me.open("GET",U,!0),me.send(),ae.impl.options.imagePlaceholder&&(We=ae.impl.options.imagePlaceholder.split(/,/))&&We[1]&&(xe=We[1])})),R.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function(R){return new Promise(function(te){setTimeout(function(){te(R)},U)})}},asArray:function(U){const R=[],te=U.length;for(let re=0;re<te;re++)R.push(U[re]);return R},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function(R,te){const re=new Image;ae.impl.options.useCredentials&&(re.crossOrigin="use-credentials"),re.onload=function(){R(re)},re.onerror=te,re.src=U}):Promise.resolve()},width:function(U){var R=E(U,"border-left-width"),te=E(U,"border-right-width");return U.scrollWidth+R+te},height:function(U){var R=E(U,"border-top-width"),te=E(U,"border-bottom-width");return U.scrollHeight+R+te}};function _(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function E(U,R){const te=ue(U).getPropertyValue(R);return parseFloat(te.replace("px",""))}const T=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(me,xe,We){return R(me)?Promise.resolve(me).then(te).then(function(N){let ee=Promise.resolve(me);return N.forEach(function(fe){ee=ee.then(function(ce){return re(ce,fe,xe,We)})}),ee}):Promise.resolve(me)},shouldProcess:R,impl:{readUrls:te,inline:re}};function R(me){return me.search(U)!==-1}function te(me){const xe=[];for(var We;(We=U.exec(me))!==null;)xe.push(We[1]);return xe.filter(function(N){return!x.isDataUrl(N)})}function re(me,xe,We,N){return Promise.resolve(xe).then(function(ee){return We?x.resolveUrl(ee,We):ee}).then(N||x.getAndEncode).then(function(ee){return x.dataAsUrl(ee,x.mimeType(xe))}).then(function(ee){return me.replace((fe=xe,new RegExp(`(url\\(['"]?)(${x.escape(fe)})(['"]?\\))`,"g")),`$1${ee}$3`);var fe})}}(),D={resolveAll:function(){return O().then(function(U){return Promise.all(U.map(function(R){return R.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:O}};function O(){return Promise.resolve(x.asArray(document.styleSheets)).then(function(R){const te=[];return R.forEach(function(re){if(Object.getPrototypeOf(re).hasOwnProperty("cssRules"))try{x.asArray(re.cssRules||[]).forEach(te.push.bind(te))}catch(me){console.log("Error while reading CSS rules from "+re.href,me.toString())}}),te}).then(function(R){return R.filter(function(te){return te.type===CSSRule.FONT_FACE_RULE}).filter(function(te){return T.shouldProcess(te.style.getPropertyValue("src"))})}).then(function(R){return R.map(U)});function U(R){return{resolve:function(){var te=(R.parentStyleSheet||{}).href;return T.inlineAll(R.cssText,te)},src:function(){return R.style.getPropertyValue("src")}}}}const $={inlineAll:function U(R){return R instanceof Element?function(te){const re=te.style.getPropertyValue("background");return re?T.inlineAll(re).then(function(me){te.style.setProperty("background",me,re)}).then(function(){return te}):Promise.resolve(te)}(R).then(function(){return R instanceof HTMLImageElement?K(R).inline():Promise.all(x.asArray(R.childNodes).map(function(te){return U(te)}))}):Promise.resolve(R)},impl:{newImage:K}};function K(U){return{inline:function(R){return x.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then(R||x.getAndEncode).then(function(te){return x.dataAsUrl(te,x.mimeType(U.src))}).then(function(te){return new Promise(function(re){U.onload=re,U.onerror=re,U.src=te})})}}}const X={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ae={toSvg:W,toPng:function(U,R){return(R=R||{}).raster=!0,V(U,R).then(function(te){return te.toDataURL()})},toJpeg:function(U,R){return(R=R||{}).raster=!0,V(U,R).then(function(te){return te.toDataURL("image/jpeg",R.quality||1)})},toBlob:function(U,R){return(R=R||{}).raster=!0,V(U,R).then(x.canvasToBlob)},toPixelData:function(U,R){return(R=R||{}).raster=!0,V(U,R).then(function(te){return te.getContext("2d").getImageData(0,0,x.width(U),x.height(U)).data})},toCanvas:function(U,R){return(R=R||{}).raster=!0,V(U,R||{})},impl:{fontFaces:D,images:$,util:x,inliner:T,urlCache:[],options:{}}},ue=(d.exports=ae,y.getComputedStyle||window.getComputedStyle),Le=y.atob||window.atob;function W(U,R){var te=R=R||{};return te.imagePlaceholder===void 0?ae.impl.options.imagePlaceholder=X.imagePlaceholder:ae.impl.options.imagePlaceholder=te.imagePlaceholder,te.cacheBust===void 0?ae.impl.options.cacheBust=X.cacheBust:ae.impl.options.cacheBust=te.cacheBust,te.useCredentials===void 0?ae.impl.options.useCredentials=X.useCredentials:ae.impl.options.useCredentials=te.useCredentials,Promise.resolve(U).then(function(re){return function me(xe,We,N,ee,fe=null){return N||!We||We(xe)?Promise.resolve(xe).then(function(ce){return ce instanceof HTMLCanvasElement?x.makeImage(ce.toDataURL()):ce.nodeName==="IFRAME"?html2canvas(ce.contentDocument.body).then(ye=>ye.toDataURL()).then(x.makeImage):ce.cloneNode(!1)}).then(function(ce){return function(ye,se){const k=ye.childNodes;return k.length===0?Promise.resolve(se):function(le,ke){const Pe=ue(ye);let Ve=Promise.resolve();return ke.forEach(function(Z){Ve=Ve.then(function(){return me(Z,We,!1,ee,Pe)}).then(function(de){de&&le.appendChild(de)})}),Ve}(se,x.asArray(k)).then(function(){return se})}(xe,ce)}).then(function(ce){return function(ye,se,k){return se instanceof Element?Promise.resolve().then(function(){(function(le,ke){const Pe=ue(le);Pe.cssText?(ke.style.cssText=Pe.cssText,function(Ve,Z){Z.font=Ve.font,Z.fontFamily=Ve.fontFamily,Z.fontFeatureSettings=Ve.fontFeatureSettings,Z.fontKerning=Ve.fontKerning,Z.fontSize=Ve.fontSize,Z.fontStretch=Ve.fontStretch,Z.fontStyle=Ve.fontStyle,Z.fontVariant=Ve.fontVariant,Z.fontVariantCaps=Ve.fontVariantCaps,Z.fontVariantEastAsian=Ve.fontVariantEastAsian,Z.fontVariantLigatures=Ve.fontVariantLigatures,Z.fontVariantNumeric=Ve.fontVariantNumeric,Z.fontVariationSettings=Ve.fontVariationSettings,Z.fontWeight=Ve.fontWeight}(Pe,ke.style)):(k?function(Ve,Z,de,ve){const pe=de.style,ze=Ve.style;for(var Qe of Z){var Ke=Z.getPropertyValue(Qe),He=ze.getPropertyValue(Qe),Xe=(ze.setProperty(Qe,ve?"initial":"unset"),Z.getPropertyValue(Qe));Xe!==Ke?pe.setProperty(Qe,Ke):pe.removeProperty(Qe),ze.setProperty(Qe,He)}}(le,Pe,ke,N):function(Ve,Z,de){const ve=function(ze){if(H[ze])return H[ze];j||((j=document.createElement("iframe")).style.visibility="hidden",j.style.position="fixed",document.body.appendChild(j),j.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Qe=document.createElement(ze),Ke=(j.contentWindow.document.body.appendChild(Qe),Qe.textContent=".",j.contentWindow.getComputedStyle(Qe)),He={};return x.asArray(Ke).forEach(function(Xe){He[Xe]=Xe==="width"||Xe==="height"?"auto":Ke.getPropertyValue(Xe)}),j.contentWindow.document.body.removeChild(Qe),H[ze]=He}(de.tagName),pe=de.style;x.asArray(Ve).forEach(function(ze){var Qe=Ve.getPropertyValue(ze);(Qe!==ve[ze]||Z&&Qe!==Z.getPropertyValue(ze))&&pe.setProperty(ze,Qe,Ve.getPropertyPriority(ze))})}(Pe,fe,ke),N&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ve=>ke.style.removeProperty(Ve)),["left","right","top","bottom"].forEach(Ve=>{ke.style.getPropertyValue(Ve)&&ke.style.setProperty(Ve,"0px")})))})(ye,se)}).then(function(){[":before",":after"].forEach(function(le){(function(ke){const Pe=ue(ye,ke),Ve=Pe.getPropertyValue("content");if(Ve!==""&&Ve!=="none"){const Z=x.uid(),de=se.getAttribute("class"),ve=(de&&se.setAttribute("class",de+" "+Z),document.createElement("style"));ve.appendChild(function(){const pe=`.${Z}:`+ke,ze=(Pe.cssText?function(){return`${Pe.cssText} content: ${Pe.getPropertyValue("content")};`}:function(){return x.asArray(Pe).map(function(Qe){return Qe+": "+Pe.getPropertyValue(Qe)+(Pe.getPropertyPriority(Qe)?" !important":"")}).join("; ")+";"})();return document.createTextNode(pe+`{${ze}}`)}()),se.appendChild(ve)}})(le)})}).then(function(){ye instanceof HTMLTextAreaElement&&(se.innerHTML=ye.value),ye instanceof HTMLInputElement&&se.setAttribute("value",ye.value)}).then(function(){se instanceof SVGElement&&(se.setAttribute("xmlns","http://www.w3.org/2000/svg"),se instanceof SVGRectElement&&["width","height"].forEach(function(le){const ke=se.getAttribute(le);ke&&se.style.setProperty(le,ke)}))}).then(function(){return se}):se}(xe,ce,ee)}):Promise.resolve()}(re,R.filter,!0,!R.raster)}).then(Y).then(F).then(function(re){R.bgcolor&&(re.style.backgroundColor=R.bgcolor),R.width&&(re.style.width=R.width+"px"),R.height&&(re.style.height=R.height+"px"),R.style&&Object.keys(R.style).forEach(function(xe){re.style[xe]=R.style[xe]});let me=null;return typeof R.onclone=="function"&&(me=R.onclone(re)),Promise.resolve(me).then(function(){return re})}).then(function(re){return re=re,me=R.width||x.width(U),xe=R.height||x.height(U),Promise.resolve(re).then(function(We){return We.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(We)}).then(x.escapeXhtml).then(function(We){return`<foreignObject x="0" y="0" width="100%" height="100%">${We}</foreignObject>`}).then(function(We){return`<svg xmlns="http://www.w3.org/2000/svg" width="${me}" height="${xe}">${We}</svg>`}).then(function(We){return"data:image/svg+xml;charset=utf-8,"+We});var me,xe}).then(function(re){return ae.impl.urlCache=[],re})}function V(U,R){return W(U,R).then(x.makeImage).then(x.delay(0)).then(function(te){var re=typeof R.scale!="number"?1:R.scale;const me=function(We,N){const ee=document.createElement("canvas");if(ee.width=(R.width||x.width(We))*N,ee.height=(R.height||x.height(We))*N,R.bgcolor){const fe=ee.getContext("2d");fe.fillStyle=R.bgcolor,fe.fillRect(0,0,ee.width,ee.height)}return ee}(U,re),xe=me.getContext("2d");return xe.mozImageSmoothingEnabled=!1,xe.msImageSmoothingEnabled=!1,xe.imageSmoothingEnabled=!1,te&&(xe.scale(re,re),xe.drawImage(te,0,0)),j&&(document.body.removeChild(j),j=null,I&&clearTimeout(I),I=setTimeout(()=>{I=null,H={}},2e4)),me})}function Y(U){return D.resolveAll().then(function(R){const te=document.createElement("style");return U.appendChild(te),te.appendChild(document.createTextNode(R)),U})}function F(U){return $.inlineAll(U).then(function(){return U})}let I=null,j=null,H={}})(r)}),o=i(function(d,g){(function(){function y(D,O,$){var K=new XMLHttpRequest;K.open("GET",D),K.responseType="blob",K.onload=function(){T(K.response,O,$)},K.onerror=function(){console.error("could not download file")},K.send()}function x(D){var O=new XMLHttpRequest;O.open("HEAD",D,!1);try{O.send()}catch{}return 200<=O.status&&299>=O.status}function _(D){try{D.dispatchEvent(new MouseEvent("click"))}catch{var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),D.dispatchEvent(O)}}var E=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,T=E.saveAs||(typeof window!="object"||window!==E?function(){}:"download"in HTMLAnchorElement.prototype?function(D,O,$){var K=E.URL||E.webkitURL,X=document.createElement("a");O=O||D.name||"download",X.download=O,X.rel="noopener",typeof D=="string"?(X.href=D,X.origin===location.origin?_(X):x(X.href)?y(D,O,$):_(X,X.target="_blank")):(X.href=K.createObjectURL(D),setTimeout(function(){K.revokeObjectURL(X.href)},4e4),setTimeout(function(){_(X)},0))}:"msSaveOrOpenBlob"in navigator?function(D,O,$){if(O=O||D.name||"download",typeof D!="string")navigator.msSaveOrOpenBlob(function(X,ae){return ae===void 0?ae={autoBom:!1}:typeof ae!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ae={autoBom:!ae}),ae.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(X.type)?new Blob(["\uFEFF",X],{type:X.type}):X}(D,$),O);else if(x(D))y(D,O,$);else{var K=document.createElement("a");K.href=D,K.target="_blank",setTimeout(function(){_(K)})}}:function(D,O,$,K){if((K=K||open("","_blank"))&&(K.document.title=K.document.body.innerText="downloading..."),typeof D=="string")return y(D,O,$);var X=D.type==="application/octet-stream",ae=/constructor/i.test(E.HTMLElement)||E.safari,ue=/CriOS\/[\d]+/.test(navigator.userAgent);if((ue||X&&ae)&&typeof FileReader=="object"){var Le=new FileReader;Le.onloadend=function(){var Y=Le.result;Y=ue?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),K?K.location.href=Y:location=Y,K=null},Le.readAsDataURL(D)}else{var W=E.URL||E.webkitURL,V=W.createObjectURL(D);K?K.location=V:location.href=V,K=null,setTimeout(function(){W.revokeObjectURL(V)},4e4)}});E.saveAs=T.saveAs=T,d.exports=T})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var g=d.node,y=d.error;return console.warn("Map node is very big "+g.scrollWidth+"x"+g.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(y)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(var _ in this.options)y.hasOwnProperty(_)?x[_]=y[_]:x[_]=this.options[_];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(x)}).then(function(E){return d._setElementsVisible(!0),d._toCanvas(E,x)}).then(function(E){return g==="image"?d._canvasToImage(E,x):g==="canvas"?E:d._canvasToBlob(E,x)}).then(function(E){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),E}).catch(function(E){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:E}),Promise.reject(E)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(y){var x=d._map._container.querySelectorAll(y),_=!0,E=!1,T=void 0;try{for(var D,O=x[Symbol.iterator]();!(_=(D=O.next()).done);_=!0)D.value.style.opacity=g===!1?0:1}catch($){E=!0,T=$}finally{try{!_&&O.return&&O.return()}finally{if(E)throw T}}})},_canvasToImage:function(d,g){var y=g.mimeType,x=d.toDataURL(y);return x.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(x)},_canvasToBlob:function(d,g){var y=g.mimeType;return new Promise(function(x,_){d.toBlob(function(E){x(E)},y)})},_toCanvas:function(d,g){var y=g.captionOffset,x=g.caption,_=g.captionFontSize,E=g.captionFont,T=g.captionColor,D=g.captionBgColor,O=this._node,$=O.screenHeight,K=O.screenWidth,X=document.createElement("canvas");X.width=K,X.height=$;for(var ae=X.getContext("2d"),ue=ae.createImageData(K,$),Le=0;Le<d.length;++Le)ue.data[Le]=d[Le];ae.putImageData(ue,0,0),ue=null;var W=document.createElement("canvas"),V=W.getContext("2d"),Y=0,F=0,I=$,j=K;if(this.options.cropImageByInnerWH===!0){for(var H=[],U=0,R=0;R<$;++R){U=0;for(var te=0;te<K;++te)d[4*R*K+4*te+4]===0&&U++;U===K&&H.push(R)}var re=this._getMinAndMaxOnValuesBreak(H);Y=re.min;for(var me=K,xe=re.max,We=[],N=0,ee=F;ee<me;++ee){N=0;for(var fe=0;fe<$;++fe)d[4*fe*K+4*ee+4]===0&&N++;N===$&&We.push(ee)}var ce=this._getMinAndMaxOnValuesBreak(We);F=ce.min,me=ce.max,(F===0&&me===0||me===null)&&(me=K),(Y===0&&xe===0||xe===null)&&(xe=$),this.options.debugMode===!0&&(console.log("emptyYLine",H),console.log("minMaxY",re),console.log("emptyXLine",We),console.log("minMaxX",ce),console.log("debugX",{}),console.log("debugY",{})),Y===0&&xe===$&&F===0&&me===K||(Y+=this.options.onCropBorderSize,xe-=this.options.onCropBorderSize,F+=this.options.onCropBorderSize,me-=this.options.onCropBorderSize),I=xe-Y,j=me-F,W.width=j,W.height=I}else W.width=j,W.height=I;var ye=null;return x&&(ye=typeof x=="function"?x.call(this):x),ye!==null&&(W.height=W.height+(y+_+y),V.beginPath(),V.rect(0,0,W.width,W.height),V.fillStyle=D,V.fill(),V.save()),V.drawImage(X,F,Y,j,I,0,0,j,I),ye!==null&&(V.font=_+"px "+E,V.fillStyle=T,V.fillText(ye,y,I+y+_)),Promise.resolve(W)},_getMinAndMaxOnValuesBreak:function(d){for(var g=0,y=0,x=!1,_=1;_<d.length;_++){if(d[_]-1!==d[_-1]){y=d[_],x=!0;break}g=d[_]}return x===!1&&d[0]>1?(g=0,y=d[0]):x===!1&&(g=d[d.length-1]||0,y=null),{min:g,max:y}},_getPixelData:function(d){var g=this,y=d.domtoimageOptions,x=y===void 0?{}:y;return this._getPixelDataOfNormalMap(x).catch(function(_){return console.warn("May be map size very big on that zoom level, we have error:",_.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),g._getPixelDataOfBigMap(x)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=this._map.getContainer();return this._node={node:g,screenHeight:g.scrollHeight,screenWidth:g.scrollWidth},s.toPixelData(g,d)},_getPixelDataOfBigMap:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=this._map.getContainer(),x=this._map.getPane("mapPane");x.style.width=2*y.clientWidth+"px",x.style.height=2*y.clientHeight+"px",x.style.overflow="hidden";var _=function(){x.style.width="initial",x.style.height="initial",x.style.overflow="initial"};return this._node={node:y,screenHeight:y.scrollHeight,screenWidth:y.scrollWidth},s.toPixelData(y,g).then(function(E){return _(),E}).catch(function(E){return _(),y.scrollHeight>=4e3||y.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:y,mapPane:x,error:E,domtoimageOptions:g}):Promise.reject(E)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,g=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.appendChild(document.createTextNode(d)),g.appendChild(y)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(g){var y=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;o.saveAs(g,y+".png")}).catch(function(g){d._map.fire("simpleMapScreenshoter.error",{e:g})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(g){var y=setInterval(function(){d._interaction||(g(),clearInterval(y))},100)})}}),f=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);t.default=f,t.SimpleMapScreenshoter=u,Object.defineProperty(t,"__esModule",{value:!0})})})(ib,ib.exports);var Xa=63710088e-1,tx={centimeters:Xa*100,centimetres:Xa*100,degrees:360/(2*Math.PI),feet:Xa*3.28084,inches:Xa*39.37,kilometers:Xa/1e3,kilometres:Xa/1e3,meters:Xa,metres:Xa,miles:Xa/1609.344,millimeters:Xa*1e3,millimetres:Xa*1e3,nauticalmiles:Xa/1852,radians:1,yards:Xa*1.0936};function sd(e,n,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=n||{},r.geometry=e,r}function d0(e,n,t={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ob(e[0])||!ob(e[1]))throw new Error("coordinates must contain numbers");return sd({type:"Point",coordinates:e},n,t)}function fu(e,n,t={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return sd({type:"Polygon",coordinates:e},n,t)}function hu(e,n,t={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return sd({type:"LineString",coordinates:e},n,t)}function bD(e,n={}){const t={type:"FeatureCollection"};return n.id&&(t.id=n.id),n.bbox&&(t.bbox=n.bbox),t.features=e,t}function wD(e,n,t={}){return sd({type:"MultiPolygon",coordinates:e},n,t)}function xD(e,n="kilometers"){const t=tx[n];if(!t)throw new Error(n+" units is invalid");return e*t}function LD(e,n="kilometers"){const t=tx[n];if(!t)throw new Error(n+" units is invalid");return e/t}function l1(e){return e%(2*Math.PI)*180/Math.PI}function ju(e){return e%360*Math.PI/180}function ob(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function sb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function SD(e){return e.type==="Feature"?e.geometry:e}function nx(e,n,t={}){if(t.final===!0)return CD(e,n);const r=sb(e),i=sb(n),s=ju(r[0]),o=ju(i[0]),u=ju(r[1]),f=ju(i[1]),d=Math.sin(o-s)*Math.cos(f),g=Math.cos(u)*Math.sin(f)-Math.sin(u)*Math.cos(f)*Math.cos(o-s);return l1(Math.atan2(d,g))}function CD(e,n){let t=nx(n,e);return t=(t+180)%360,t}function ED(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hy(e,n,t,r={}){const i=ED(e),s=ju(i[0]),o=ju(i[1]),u=ju(t),f=LD(n,r.units),d=Math.asin(Math.sin(o)*Math.cos(f)+Math.cos(o)*Math.sin(f)*Math.cos(u)),g=s+Math.atan2(Math.sin(u)*Math.sin(f)*Math.cos(o),Math.cos(f)-Math.sin(o)*Math.sin(d)),y=l1(g),x=l1(d);return d0([y,x],r.properties)}var ab=hy;function lb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dy(e,n,t={}){var r=lb(e),i=lb(n),s=ju(i[1]-r[1]),o=ju(i[0]-r[0]),u=ju(r[1]),f=ju(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(u)*Math.cos(f);return xD(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),t.units)}var nv=dy;function PD(e,n,t={}){const i=SD(e).coordinates;let s=0;for(let o=0;o<i.length&&!(n>=s&&o===i.length-1);o++)if(s>=n){const u=n-s;if(u){const f=nx(i[o],i[o-1])-180;return hy(i[o],u,f,t)}else return d0(i[o])}else s+=dy(i[o],i[o+1],t);return d0(i[i.length-1])}var u1=PD;function MD(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",E=e.type==="Feature",T=_?e.features.length:1;for(t=0;t<T;t++){for(u=_?e.features[t].geometry:E?e.geometry:e,d=_?e.features[t].properties:E?e.properties:{},g=_?e.features[t].bbox:E?e.bbox:void 0,y=_?e.features[t].id:E?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function AD(e,n,t){var r=t;return MD(e,function(i,s,o,u,f){s===0&&t===void 0?r=i:r=n(r,i,s,o,u,f)}),r}function rx(e){return AD(e,(n,t)=>n+kD(t),0)}function kD(e){let n=0,t;switch(e.type){case"Polygon":return ub(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=ub(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ub(e){let n=0;if(e&&e.length>0){n+=Math.abs(cb(e[0]));for(let t=1;t<e.length;t++)n-=Math.abs(cb(e[t]))}return n}var TD=Xa*Xa/2,rv=Math.PI/180;function cb(e){const n=e.length-1;if(n<=2)return 0;let t=0,r=0;for(;r<n;){const i=e[r],s=e[r+1===n?0:r+1],o=e[r+2>=n?(r+2)%n:r+2],u=i[0]*rv,f=s[1]*rv,d=o[0]*rv;t+=(d-u)*Math.sin(f),r++}return t*TD}var nc=rx;function ix(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,g=0,y=0,x,_=e.type,E=_==="FeatureCollection",T=_==="Feature",D=E?e.features.length:1,O=0;O<D;O++){d=E?e.features[O].geometry:T?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var $=0;$<u;$++){var K=0,X=0;if(o=x?d.geometries[$]:d,o!==null){f=o.coordinates;var ae=o.type;switch(g=ae==="Polygon"||ae==="MultiPolygon"?1:0,ae){case null:break;case"Point":if(n(f,y,O,K,X)===!1)return!1;y++,K++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],y,O,K,X)===!1)return!1;y++,ae==="MultiPoint"&&K++}ae==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-g;i++){if(n(f[r][i],y,O,K,X)===!1)return!1;y++}ae==="MultiLineString"&&K++,ae==="Polygon"&&X++}ae==="Polygon"&&K++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(X=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-g;s++){if(n(f[r][i][s],y,O,K,X)===!1)return!1;y++}X++}K++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ix(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ND(e,n={}){let t=0,r=0,i=0;return ix(e,function(s){t+=s[0],r+=s[1],i++}),d0([t/i,r/i],n.properties)}var np=ND;function DD(e,n,t={}){const r=t.steps||64,i=t.properties?t.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},s=[];for(let o=0;o<r;o++)s.push(hy(e,n,o*-360/r,t).geometry.coordinates);return s.push(s[0]),fu([s],i)}var BD=DD,OD=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,iv=Math.ceil,uu=Math.floor,bl="[BigNumber Error] ",fb=bl+"Number primitive has more than 15 significant digits: ",ku=1e14,ti=14,hb=9007199254740991,ov=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],tf=1e7,zl=1e9;function ox(e){var n,t,r,i=$.prototype={constructor:$,toString:null,valueOf:null},s=new $(1),o=20,u=4,f=-7,d=21,g=-1e7,y=1e7,x=!1,_=1,E=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},D="0123456789abcdefghijklmnopqrstuvwxyz",O=!0;function $(W,V){var Y,F,I,j,H,U,R,te,re=this;if(!(re instanceof $))return new $(W,V);if(V==null){if(W&&W._isBigNumber===!0){re.s=W.s,!W.c||W.e>y?re.c=re.e=null:W.e<g?re.c=[re.e=0]:(re.e=W.e,re.c=W.c.slice());return}if((U=typeof W=="number")&&W*0==0){if(re.s=1/W<0?(W=-W,-1):1,W===~~W){for(j=0,H=W;H>=10;H/=10,j++);j>y?re.c=re.e=null:(re.e=j,re.c=[W]);return}te=String(W)}else{if(!OD.test(te=String(W)))return r(re,te,U);re.s=te.charCodeAt(0)==45?(te=te.slice(1),-1):1}(j=te.indexOf("."))>-1&&(te=te.replace(".","")),(H=te.search(/e/i))>0?(j<0&&(j=H),j+=+te.slice(H+1),te=te.substring(0,H)):j<0&&(j=te.length)}else{if(Yo(V,2,D.length,"Base"),V==10&&O)return re=new $(W),ue(re,o+re.e+1,u);if(te=String(W),U=typeof W=="number"){if(W*0!=0)return r(re,te,U,V);if(re.s=1/W<0?(te=te.slice(1),-1):1,$.DEBUG&&te.replace(/^0\.0*|\./,"").length>15)throw Error(fb+W)}else re.s=te.charCodeAt(0)===45?(te=te.slice(1),-1):1;for(Y=D.slice(0,V),j=H=0,R=te.length;H<R;H++)if(Y.indexOf(F=te.charAt(H))<0){if(F=="."){if(H>j){j=R;continue}}else if(!I&&(te==te.toUpperCase()&&(te=te.toLowerCase())||te==te.toLowerCase()&&(te=te.toUpperCase()))){I=!0,H=-1,j=0;continue}return r(re,String(W),U,V)}U=!1,te=t(te,V,10,re.s),(j=te.indexOf("."))>-1?te=te.replace(".",""):j=te.length}for(H=0;te.charCodeAt(H)===48;H++);for(R=te.length;te.charCodeAt(--R)===48;);if(te=te.slice(H,++R)){if(R-=H,U&&$.DEBUG&&R>15&&(W>hb||W!==uu(W)))throw Error(fb+re.s*W);if((j=j-H-1)>y)re.c=re.e=null;else if(j<g)re.c=[re.e=0];else{if(re.e=j,re.c=[],H=(j+1)%ti,j<0&&(H+=ti),H<R){for(H&&re.c.push(+te.slice(0,H)),R-=ti;H<R;)re.c.push(+te.slice(H,H+=ti));H=ti-(te=te.slice(H)).length}else H-=R;for(;H--;te+="0");re.c.push(+te)}}else re.c=[re.e=0]}$.clone=ox,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(W){var V,Y;if(W!=null)if(typeof W=="object"){if(W.hasOwnProperty(V="DECIMAL_PLACES")&&(Y=W[V],Yo(Y,0,zl,V),o=Y),W.hasOwnProperty(V="ROUNDING_MODE")&&(Y=W[V],Yo(Y,0,8,V),u=Y),W.hasOwnProperty(V="EXPONENTIAL_AT")&&(Y=W[V],Y&&Y.pop?(Yo(Y[0],-1e9,0,V),Yo(Y[1],0,zl,V),f=Y[0],d=Y[1]):(Yo(Y,-1e9,zl,V),f=-(d=Y<0?-Y:Y))),W.hasOwnProperty(V="RANGE"))if(Y=W[V],Y&&Y.pop)Yo(Y[0],-1e9,-1,V),Yo(Y[1],1,zl,V),g=Y[0],y=Y[1];else if(Yo(Y,-1e9,zl,V),Y)g=-(y=Y<0?-Y:Y);else throw Error(bl+V+" cannot be zero: "+Y);if(W.hasOwnProperty(V="CRYPTO"))if(Y=W[V],Y===!!Y)if(Y)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))x=Y;else throw x=!Y,Error(bl+"crypto unavailable");else x=Y;else throw Error(bl+V+" not true or false: "+Y);if(W.hasOwnProperty(V="MODULO_MODE")&&(Y=W[V],Yo(Y,0,9,V),_=Y),W.hasOwnProperty(V="POW_PRECISION")&&(Y=W[V],Yo(Y,0,zl,V),E=Y),W.hasOwnProperty(V="FORMAT"))if(Y=W[V],typeof Y=="object")T=Y;else throw Error(bl+V+" not an object: "+Y);if(W.hasOwnProperty(V="ALPHABET"))if(Y=W[V],typeof Y=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Y))O=Y.slice(0,10)=="0123456789",D=Y;else throw Error(bl+V+" invalid: "+Y)}else throw Error(bl+"Object expected: "+W);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,d],RANGE:[g,y],CRYPTO:x,MODULO_MODE:_,POW_PRECISION:E,FORMAT:T,ALPHABET:D}},$.isBigNumber=function(W){if(!W||W._isBigNumber!==!0)return!1;if(!$.DEBUG)return!0;var V,Y,F=W.c,I=W.e,j=W.s;e:if({}.toString.call(F)=="[object Array]"){if((j===1||j===-1)&&I>=-1e9&&I<=zl&&I===uu(I)){if(F[0]===0){if(I===0&&F.length===1)return!0;break e}if(V=(I+1)%ti,V<1&&(V+=ti),String(F[0]).length==V){for(V=0;V<F.length;V++)if(Y=F[V],Y<0||Y>=ku||Y!==uu(Y))break e;if(Y!==0)return!0}}}else if(F===null&&I===null&&(j===null||j===1||j===-1))return!0;throw Error(bl+"Invalid BigNumber: "+W)},$.maximum=$.max=function(){return X(arguments,-1)},$.minimum=$.min=function(){return X(arguments,1)},$.random=function(){var W=9007199254740992,V=Math.random()*W&2097151?function(){return uu(Math.random()*W)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Y){var F,I,j,H,U,R=0,te=[],re=new $(s);if(Y==null?Y=o:Yo(Y,0,zl),H=iv(Y/ti),x)if(crypto.getRandomValues){for(F=crypto.getRandomValues(new Uint32Array(H*=2));R<H;)U=F[R]*131072+(F[R+1]>>>11),U>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),F[R]=I[0],F[R+1]=I[1]):(te.push(U%1e14),R+=2);R=H/2}else if(crypto.randomBytes){for(F=crypto.randomBytes(H*=7);R<H;)U=(F[R]&31)*281474976710656+F[R+1]*1099511627776+F[R+2]*4294967296+F[R+3]*16777216+(F[R+4]<<16)+(F[R+5]<<8)+F[R+6],U>=9e15?crypto.randomBytes(7).copy(F,R):(te.push(U%1e14),R+=7);R=H/7}else throw x=!1,Error(bl+"crypto unavailable");if(!x)for(;R<H;)U=V(),U<9e15&&(te[R++]=U%1e14);for(H=te[--R],Y%=ti,H&&Y&&(U=ov[ti-Y],te[R]=uu(H/U)*U);te[R]===0;te.pop(),R--);if(R<0)te=[j=0];else{for(j=-1;te[0]===0;te.splice(0,1),j-=ti);for(R=1,U=te[0];U>=10;U/=10,R++);R<ti&&(j-=ti-R)}return re.e=j,re.c=te,re}}(),$.sum=function(){for(var W=1,V=arguments,Y=new $(V[0]);W<V.length;)Y=Y.plus(V[W++]);return Y},t=function(){var W="0123456789";function V(Y,F,I,j){for(var H,U=[0],R,te=0,re=Y.length;te<re;){for(R=U.length;R--;U[R]*=F);for(U[0]+=j.indexOf(Y.charAt(te++)),H=0;H<U.length;H++)U[H]>I-1&&(U[H+1]==null&&(U[H+1]=0),U[H+1]+=U[H]/I|0,U[H]%=I)}return U.reverse()}return function(Y,F,I,j,H){var U,R,te,re,me,xe,We,N,ee=Y.indexOf("."),fe=o,ce=u;for(ee>=0&&(re=E,E=0,Y=Y.replace(".",""),N=new $(F),xe=N.pow(Y.length-ee),E=re,N.c=V(Bc(au(xe.c),xe.e,"0"),10,I,W),N.e=N.c.length),We=V(Y,F,I,H?(U=D,W):(U=W,D)),te=re=We.length;We[--re]==0;We.pop());if(!We[0])return U.charAt(0);if(ee<0?--te:(xe.c=We,xe.e=te,xe.s=j,xe=n(xe,N,fe,ce,I),We=xe.c,me=xe.r,te=xe.e),R=te+fe+1,ee=We[R],re=I/2,me=me||R<0||We[R+1]!=null,me=ce<4?(ee!=null||me)&&(ce==0||ce==(xe.s<0?3:2)):ee>re||ee==re&&(ce==4||me||ce==6&&We[R-1]&1||ce==(xe.s<0?8:7)),R<1||!We[0])Y=me?Bc(U.charAt(1),-fe,U.charAt(0)):U.charAt(0);else{if(We.length=R,me)for(--I;++We[--R]>I;)We[R]=0,R||(++te,We=[1].concat(We));for(re=We.length;!We[--re];);for(ee=0,Y="";ee<=re;Y+=U.charAt(We[ee++]));Y=Bc(Y,te,U.charAt(0))}return Y}}(),n=function(){function W(F,I,j){var H,U,R,te,re=0,me=F.length,xe=I%tf,We=I/tf|0;for(F=F.slice();me--;)R=F[me]%tf,te=F[me]/tf|0,H=We*R+te*xe,U=xe*R+H%tf*tf+re,re=(U/j|0)+(H/tf|0)+We*te,F[me]=U%j;return re&&(F=[re].concat(F)),F}function V(F,I,j,H){var U,R;if(j!=H)R=j>H?1:-1;else for(U=R=0;U<j;U++)if(F[U]!=I[U]){R=F[U]>I[U]?1:-1;break}return R}function Y(F,I,j,H){for(var U=0;j--;)F[j]-=U,U=F[j]<I[j]?1:0,F[j]=U*H+F[j]-I[j];for(;!F[0]&&F.length>1;F.splice(0,1));}return function(F,I,j,H,U){var R,te,re,me,xe,We,N,ee,fe,ce,ye,se,k,le,ke,Pe,Ve,Z=F.s==I.s?1:-1,de=F.c,ve=I.c;if(!de||!de[0]||!ve||!ve[0])return new $(!F.s||!I.s||(de?ve&&de[0]==ve[0]:!ve)?NaN:de&&de[0]==0||!ve?Z*0:Z/0);for(ee=new $(Z),fe=ee.c=[],te=F.e-I.e,Z=j+te+1,U||(U=ku,te=cu(F.e/ti)-cu(I.e/ti),Z=Z/ti|0),re=0;ve[re]==(de[re]||0);re++);if(ve[re]>(de[re]||0)&&te--,Z<0)fe.push(1),me=!0;else{for(le=de.length,Pe=ve.length,re=0,Z+=2,xe=uu(U/(ve[0]+1)),xe>1&&(ve=W(ve,xe,U),de=W(de,xe,U),Pe=ve.length,le=de.length),k=Pe,ce=de.slice(0,Pe),ye=ce.length;ye<Pe;ce[ye++]=0);Ve=ve.slice(),Ve=[0].concat(Ve),ke=ve[0],ve[1]>=U/2&&ke++;do{if(xe=0,R=V(ve,ce,Pe,ye),R<0){if(se=ce[0],Pe!=ye&&(se=se*U+(ce[1]||0)),xe=uu(se/ke),xe>1)for(xe>=U&&(xe=U-1),We=W(ve,xe,U),N=We.length,ye=ce.length;V(We,ce,N,ye)==1;)xe--,Y(We,Pe<N?Ve:ve,N,U),N=We.length,R=1;else xe==0&&(R=xe=1),We=ve.slice(),N=We.length;if(N<ye&&(We=[0].concat(We)),Y(ce,We,ye,U),ye=ce.length,R==-1)for(;V(ve,ce,Pe,ye)<1;)xe++,Y(ce,Pe<ye?Ve:ve,ye,U),ye=ce.length}else R===0&&(xe++,ce=[0]);fe[re++]=xe,ce[0]?ce[ye++]=de[k]||0:(ce=[de[k]],ye=1)}while((k++<le||ce[0]!=null)&&Z--);me=ce[0]!=null,fe[0]||fe.splice(0,1)}if(U==ku){for(re=1,Z=fe[0];Z>=10;Z/=10,re++);ue(ee,j+(ee.e=re+te*ti-1)+1,H,me)}else ee.e=te,ee.r=+me;return ee}}();function K(W,V,Y,F){var I,j,H,U,R;if(Y==null?Y=u:Yo(Y,0,8),!W.c)return W.toString();if(I=W.c[0],H=W.e,V==null)R=au(W.c),R=F==1||F==2&&(H<=f||H>=d)?vg(R,H):Bc(R,H,"0");else if(W=ue(new $(W),V,Y),j=W.e,R=au(W.c),U=R.length,F==1||F==2&&(V<=j||j<=f)){for(;U<V;R+="0",U++);R=vg(R,j)}else if(V-=H,R=Bc(R,j,"0"),j+1>U){if(--V>0)for(R+=".";V--;R+="0");}else if(V+=j-U,V>0)for(j+1==U&&(R+=".");V--;R+="0");return W.s<0&&I?"-"+R:R}function X(W,V){for(var Y,F,I=1,j=new $(W[0]);I<W.length;I++)F=new $(W[I]),(!F.s||(Y=$f(j,F))===V||Y===0&&j.s===V)&&(j=F);return j}function ae(W,V,Y){for(var F=1,I=V.length;!V[--I];V.pop());for(I=V[0];I>=10;I/=10,F++);return(Y=F+Y*ti-1)>y?W.c=W.e=null:Y<g?W.c=[W.e=0]:(W.e=Y,W.c=V),W}r=function(){var W=/^(-?)0([xbo])(?=\w[\w.]*$)/i,V=/^([^.]+)\.$/,Y=/^\.([^.]+)$/,F=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(j,H,U,R){var te,re=U?H:H.replace(I,"");if(F.test(re))j.s=isNaN(re)?null:re<0?-1:1;else{if(!U&&(re=re.replace(W,function(me,xe,We){return te=(We=We.toLowerCase())=="x"?16:We=="b"?2:8,!R||R==te?xe:me}),R&&(te=R,re=re.replace(V,"$1").replace(Y,"0.$1")),H!=re))return new $(re,te);if($.DEBUG)throw Error(bl+"Not a"+(R?" base "+R:"")+" number: "+H);j.s=null}j.c=j.e=null}}();function ue(W,V,Y,F){var I,j,H,U,R,te,re,me=W.c,xe=ov;if(me){e:{for(I=1,U=me[0];U>=10;U/=10,I++);if(j=V-I,j<0)j+=ti,H=V,R=me[te=0],re=uu(R/xe[I-H-1]%10);else if(te=iv((j+1)/ti),te>=me.length)if(F){for(;me.length<=te;me.push(0));R=re=0,I=1,j%=ti,H=j-ti+1}else break e;else{for(R=U=me[te],I=1;U>=10;U/=10,I++);j%=ti,H=j-ti+I,re=H<0?0:uu(R/xe[I-H-1]%10)}if(F=F||V<0||me[te+1]!=null||(H<0?R:R%xe[I-H-1]),F=Y<4?(re||F)&&(Y==0||Y==(W.s<0?3:2)):re>5||re==5&&(Y==4||F||Y==6&&(j>0?H>0?R/xe[I-H]:0:me[te-1])%10&1||Y==(W.s<0?8:7)),V<1||!me[0])return me.length=0,F?(V-=W.e+1,me[0]=xe[(ti-V%ti)%ti],W.e=-V||0):me[0]=W.e=0,W;if(j==0?(me.length=te,U=1,te--):(me.length=te+1,U=xe[ti-j],me[te]=H>0?uu(R/xe[I-H]%xe[H])*U:0),F)for(;;)if(te==0){for(j=1,H=me[0];H>=10;H/=10,j++);for(H=me[0]+=U,U=1;H>=10;H/=10,U++);j!=U&&(W.e++,me[0]==ku&&(me[0]=1));break}else{if(me[te]+=U,me[te]!=ku)break;me[te--]=0,U=1}for(j=me.length;me[--j]===0;me.pop());}W.e>y?W.c=W.e=null:W.e<g&&(W.c=[W.e=0])}return W}function Le(W){var V,Y=W.e;return Y===null?W.toString():(V=au(W.c),V=Y<=f||Y>=d?vg(V,Y):Bc(V,Y,"0"),W.s<0?"-"+V:V)}return i.absoluteValue=i.abs=function(){var W=new $(this);return W.s<0&&(W.s=1),W},i.comparedTo=function(W,V){return $f(this,new $(W,V))},i.decimalPlaces=i.dp=function(W,V){var Y,F,I,j=this;if(W!=null)return Yo(W,0,zl),V==null?V=u:Yo(V,0,8),ue(new $(j),W+j.e+1,V);if(!(Y=j.c))return null;if(F=((I=Y.length-1)-cu(this.e/ti))*ti,I=Y[I])for(;I%10==0;I/=10,F--);return F<0&&(F=0),F},i.dividedBy=i.div=function(W,V){return n(this,new $(W,V),o,u)},i.dividedToIntegerBy=i.idiv=function(W,V){return n(this,new $(W,V),0,1)},i.exponentiatedBy=i.pow=function(W,V){var Y,F,I,j,H,U,R,te,re,me=this;if(W=new $(W),W.c&&!W.isInteger())throw Error(bl+"Exponent not an integer: "+Le(W));if(V!=null&&(V=new $(V)),U=W.e>14,!me.c||!me.c[0]||me.c[0]==1&&!me.e&&me.c.length==1||!W.c||!W.c[0])return re=new $(Math.pow(+Le(me),U?W.s*(2-mg(W)):+Le(W))),V?re.mod(V):re;if(R=W.s<0,V){if(V.c?!V.c[0]:!V.s)return new $(NaN);F=!R&&me.isInteger()&&V.isInteger(),F&&(me=me.mod(V))}else{if(W.e>9&&(me.e>0||me.e<-1||(me.e==0?me.c[0]>1||U&&me.c[1]>=24e7:me.c[0]<8e13||U&&me.c[0]<=9999975e7)))return j=me.s<0&&mg(W)?-0:0,me.e>-1&&(j=1/j),new $(R?1/j:j);E&&(j=iv(E/ti+2))}for(U?(Y=new $(.5),R&&(W.s=1),te=mg(W)):(I=Math.abs(+Le(W)),te=I%2),re=new $(s);;){if(te){if(re=re.times(me),!re.c)break;j?re.c.length>j&&(re.c.length=j):F&&(re=re.mod(V))}if(I){if(I=uu(I/2),I===0)break;te=I%2}else if(W=W.times(Y),ue(W,W.e+1,1),W.e>14)te=mg(W);else{if(I=+Le(W),I===0)break;te=I%2}me=me.times(me),j?me.c&&me.c.length>j&&(me.c.length=j):F&&(me=me.mod(V))}return F?re:(R&&(re=s.div(re)),V?re.mod(V):j?ue(re,E,u,H):re)},i.integerValue=function(W){var V=new $(this);return W==null?W=u:Yo(W,0,8),ue(V,V.e+1,W)},i.isEqualTo=i.eq=function(W,V){return $f(this,new $(W,V))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(W,V){return $f(this,new $(W,V))>0},i.isGreaterThanOrEqualTo=i.gte=function(W,V){return(V=$f(this,new $(W,V)))===1||V===0},i.isInteger=function(){return!!this.c&&cu(this.e/ti)>this.c.length-2},i.isLessThan=i.lt=function(W,V){return $f(this,new $(W,V))<0},i.isLessThanOrEqualTo=i.lte=function(W,V){return(V=$f(this,new $(W,V)))===-1||V===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(W,V){var Y,F,I,j,H=this,U=H.s;if(W=new $(W,V),V=W.s,!U||!V)return new $(NaN);if(U!=V)return W.s=-V,H.plus(W);var R=H.e/ti,te=W.e/ti,re=H.c,me=W.c;if(!R||!te){if(!re||!me)return re?(W.s=-V,W):new $(me?H:NaN);if(!re[0]||!me[0])return me[0]?(W.s=-V,W):new $(re[0]?H:u==3?-0:0)}if(R=cu(R),te=cu(te),re=re.slice(),U=R-te){for((j=U<0)?(U=-U,I=re):(te=R,I=me),I.reverse(),V=U;V--;I.push(0));I.reverse()}else for(F=(j=(U=re.length)<(V=me.length))?U:V,U=V=0;V<F;V++)if(re[V]!=me[V]){j=re[V]<me[V];break}if(j&&(I=re,re=me,me=I,W.s=-W.s),V=(F=me.length)-(Y=re.length),V>0)for(;V--;re[Y++]=0);for(V=ku-1;F>U;){if(re[--F]<me[F]){for(Y=F;Y&&!re[--Y];re[Y]=V);--re[Y],re[F]+=ku}re[F]-=me[F]}for(;re[0]==0;re.splice(0,1),--te);return re[0]?ae(W,re,te):(W.s=u==3?-1:1,W.c=[W.e=0],W)},i.modulo=i.mod=function(W,V){var Y,F,I=this;return W=new $(W,V),!I.c||!W.s||W.c&&!W.c[0]?new $(NaN):!W.c||I.c&&!I.c[0]?new $(I):(_==9?(F=W.s,W.s=1,Y=n(I,W,0,3),W.s=F,Y.s*=F):Y=n(I,W,0,_),W=I.minus(Y.times(W)),!W.c[0]&&_==1&&(W.s=I.s),W)},i.multipliedBy=i.times=function(W,V){var Y,F,I,j,H,U,R,te,re,me,xe,We,N,ee,fe,ce=this,ye=ce.c,se=(W=new $(W,V)).c;if(!ye||!se||!ye[0]||!se[0])return!ce.s||!W.s||ye&&!ye[0]&&!se||se&&!se[0]&&!ye?W.c=W.e=W.s=null:(W.s*=ce.s,!ye||!se?W.c=W.e=null:(W.c=[0],W.e=0)),W;for(F=cu(ce.e/ti)+cu(W.e/ti),W.s*=ce.s,R=ye.length,me=se.length,R<me&&(N=ye,ye=se,se=N,I=R,R=me,me=I),I=R+me,N=[];I--;N.push(0));for(ee=ku,fe=tf,I=me;--I>=0;){for(Y=0,xe=se[I]%fe,We=se[I]/fe|0,H=R,j=I+H;j>I;)te=ye[--H]%fe,re=ye[H]/fe|0,U=We*te+re*xe,te=xe*te+U%fe*fe+N[j]+Y,Y=(te/ee|0)+(U/fe|0)+We*re,N[j--]=te%ee;N[j]=Y}return Y?++F:N.splice(0,1),ae(W,N,F)},i.negated=function(){var W=new $(this);return W.s=-W.s||null,W},i.plus=function(W,V){var Y,F=this,I=F.s;if(W=new $(W,V),V=W.s,!I||!V)return new $(NaN);if(I!=V)return W.s=-V,F.minus(W);var j=F.e/ti,H=W.e/ti,U=F.c,R=W.c;if(!j||!H){if(!U||!R)return new $(I/0);if(!U[0]||!R[0])return R[0]?W:new $(U[0]?F:I*0)}if(j=cu(j),H=cu(H),U=U.slice(),I=j-H){for(I>0?(H=j,Y=R):(I=-I,Y=U),Y.reverse();I--;Y.push(0));Y.reverse()}for(I=U.length,V=R.length,I-V<0&&(Y=R,R=U,U=Y,V=I),I=0;V;)I=(U[--V]=U[V]+R[V]+I)/ku|0,U[V]=ku===U[V]?0:U[V]%ku;return I&&(U=[I].concat(U),++H),ae(W,U,H)},i.precision=i.sd=function(W,V){var Y,F,I,j=this;if(W!=null&&W!==!!W)return Yo(W,1,zl),V==null?V=u:Yo(V,0,8),ue(new $(j),W,V);if(!(Y=j.c))return null;if(I=Y.length-1,F=I*ti+1,I=Y[I]){for(;I%10==0;I/=10,F--);for(I=Y[0];I>=10;I/=10,F++);}return W&&j.e+1>F&&(F=j.e+1),F},i.shiftedBy=function(W){return Yo(W,-9007199254740991,hb),this.times("1e"+W)},i.squareRoot=i.sqrt=function(){var W,V,Y,F,I,j=this,H=j.c,U=j.s,R=j.e,te=o+4,re=new $("0.5");if(U!==1||!H||!H[0])return new $(!U||U<0&&(!H||H[0])?NaN:H?j:1/0);if(U=Math.sqrt(+Le(j)),U==0||U==1/0?(V=au(H),(V.length+R)%2==0&&(V+="0"),U=Math.sqrt(+V),R=cu((R+1)/2)-(R<0||R%2),U==1/0?V="5e"+R:(V=U.toExponential(),V=V.slice(0,V.indexOf("e")+1)+R),Y=new $(V)):Y=new $(U+""),Y.c[0]){for(R=Y.e,U=R+te,U<3&&(U=0);;)if(I=Y,Y=re.times(I.plus(n(j,I,te,1))),au(I.c).slice(0,U)===(V=au(Y.c)).slice(0,U))if(Y.e<R&&--U,V=V.slice(U-3,U+1),V=="9999"||!F&&V=="4999"){if(!F&&(ue(I,I.e+o+2,0),I.times(I).eq(j))){Y=I;break}te+=4,U+=4,F=1}else{(!+V||!+V.slice(1)&&V.charAt(0)=="5")&&(ue(Y,Y.e+o+2,1),W=!Y.times(Y).eq(j));break}}return ue(Y,Y.e+o+1,u,W)},i.toExponential=function(W,V){return W!=null&&(Yo(W,0,zl),W++),K(this,W,V,1)},i.toFixed=function(W,V){return W!=null&&(Yo(W,0,zl),W=W+this.e+1),K(this,W,V)},i.toFormat=function(W,V,Y){var F,I=this;if(Y==null)W!=null&&V&&typeof V=="object"?(Y=V,V=null):W&&typeof W=="object"?(Y=W,W=V=null):Y=T;else if(typeof Y!="object")throw Error(bl+"Argument not an object: "+Y);if(F=I.toFixed(W,V),I.c){var j,H=F.split("."),U=+Y.groupSize,R=+Y.secondaryGroupSize,te=Y.groupSeparator||"",re=H[0],me=H[1],xe=I.s<0,We=xe?re.slice(1):re,N=We.length;if(R&&(j=U,U=R,R=j,N-=j),U>0&&N>0){for(j=N%U||U,re=We.substr(0,j);j<N;j+=U)re+=te+We.substr(j,U);R>0&&(re+=te+We.slice(j)),xe&&(re="-"+re)}F=me?re+(Y.decimalSeparator||"")+((R=+Y.fractionGroupSize)?me.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(Y.fractionGroupSeparator||"")):me):re}return(Y.prefix||"")+F+(Y.suffix||"")},i.toFraction=function(W){var V,Y,F,I,j,H,U,R,te,re,me,xe,We=this,N=We.c;if(W!=null&&(U=new $(W),!U.isInteger()&&(U.c||U.s!==1)||U.lt(s)))throw Error(bl+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+Le(U));if(!N)return new $(We);for(V=new $(s),te=Y=new $(s),F=R=new $(s),xe=au(N),j=V.e=xe.length-We.e-1,V.c[0]=ov[(H=j%ti)<0?ti+H:H],W=!W||U.comparedTo(V)>0?j>0?V:te:U,H=y,y=1/0,U=new $(xe),R.c[0]=0;re=n(U,V,0,1),I=Y.plus(re.times(F)),I.comparedTo(W)!=1;)Y=F,F=I,te=R.plus(re.times(I=te)),R=I,V=U.minus(re.times(I=V)),U=I;return I=n(W.minus(Y),F,0,1),R=R.plus(I.times(te)),Y=Y.plus(I.times(F)),R.s=te.s=We.s,j=j*2,me=n(te,F,j,u).minus(We).abs().comparedTo(n(R,Y,j,u).minus(We).abs())<1?[te,F]:[R,Y],y=H,me},i.toNumber=function(){return+Le(this)},i.toPrecision=function(W,V){return W!=null&&Yo(W,1,zl),K(this,W,V,2)},i.toString=function(W){var V,Y=this,F=Y.s,I=Y.e;return I===null?F?(V="Infinity",F<0&&(V="-"+V)):V="NaN":(W==null?V=I<=f||I>=d?vg(au(Y.c),I):Bc(au(Y.c),I,"0"):W===10&&O?(Y=ue(new $(Y),o+I+1,u),V=Bc(au(Y.c),Y.e,"0")):(Yo(W,2,D.length,"Base"),V=t(Bc(au(Y.c),I,"0"),10,W,F,!0)),F<0&&Y.c[0]&&(V="-"+V)),V},i.valueOf=i.toJSON=function(){return Le(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&$.set(e),$}function cu(e){var n=e|0;return e>0||e===n?n:n-1}function au(e){for(var n,t,r=1,i=e.length,s=e[0]+"";r<i;){for(n=e[r++]+"",t=ti-n.length;t--;n="0"+n);s+=n}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function $f(e,n){var t,r,i=e.c,s=n.c,o=e.s,u=n.s,f=e.e,d=n.e;if(!o||!u)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-u:o;if(o!=u)return o;if(t=o<0,r=f==d,!i||!s)return r?0:!i^t?1:-1;if(!r)return f>d^t?1:-1;for(u=(f=i.length)<(d=s.length)?f:d,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return f==d?0:f>d^t?1:-1}function Yo(e,n,t,r){if(e<n||e>t||e!==uu(e))throw Error(bl+(r||"Argument")+(typeof e=="number"?e<n||e>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function mg(e){var n=e.c.length-1;return cu(e.e/ti)==n&&e.c[n]%2!=0}function vg(e,n){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(n<0?"e":"e+")+n}function Bc(e,n,t){var r,i;if(n<0){for(i=t+".";++n;i+=t);e=i+e}else if(r=e.length,++n>r){for(i=t,n-=r;--n;i+=t);e+=i}else n<r&&(e=e.slice(0,n)+"."+e.slice(n));return e}var cc=ox(),ID=class{constructor(e){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=e}},Md=class extends ID{constructor(e){super(e)}},RD=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(e){const n=this.root;if(n==null)return this.compare(e,e),-1;let t=null,r=null,i=null,s=null,o=n;const u=this.compare;let f;for(;;)if(f=u(o.key,e),f>0){let d=o.left;if(d==null||(f=u(d.key,e),f>0&&(o.left=d.right,d.right=o,o=d,d=o.left,d==null)))break;t==null?r=o:t.left=o,t=o,o=d}else if(f<0){let d=o.right;if(d==null||(f=u(d.key,e),f<0&&(o.right=d.left,d.left=o,o=d,d=o.right,d==null)))break;i==null?s=o:i.right=o,i=o,o=d}else break;return i!=null&&(i.right=o.left,o.left=s),t!=null&&(t.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),f}splayMin(e){let n=e,t=n.left;for(;t!=null;){const r=t;n.left=r.right,r.right=n,n=r,t=n.left}return n}splayMax(e){let n=e,t=n.right;for(;t!=null;){const r=t;n.right=r.left,r.left=n,n=r,t=n.right}return n}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let t=this.root;const r=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const s=t.right;t=this.splayMax(i),t.right=s,this.root=t}return this.modificationCount++,r}addNewRoot(e,n){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=e;return}n<0?(e.left=t,e.right=t.right,t.right=null):(e.right=t,e.left=t.left,t.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,n)=>e<n?-1:e>n?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},ew,tw,p0=class Fd extends RD{constructor(t,r){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,ew,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const r of t)this.delete(r)}forEach(t){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)t(i.value,i.value,this)}add(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new Md(t),r),this}addAndReturn(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new Md(t),r),this.root.key}addAll(t){for(const r of t)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(t){const r=new Fd(this.compare,this.validKey),i=this.modificationCount;for(const s of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const r=new Fd(this.compare,this.validKey);for(const i of this)t.has(i)&&r.add(i);return r}difference(t){const r=new Fd(this.compare,this.validKey);for(const i of this)t.has(i)||r.add(i);return r}union(t){const r=this.clone();return r.addAll(t),r}clone(){const t=new Fd(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function r(s,o){let u,f;do{if(u=s.left,f=s.right,u!=null){const d=new Md(u.key);o.left=d,r(u,d)}if(f!=null){const d=new Md(f.key);o.right=d,s=f,o=d}}while(f!=null)}const i=new Md(t.key);return r(t,i),i}toSet(){return this.clone()}entries(){return new jD(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(tw=Symbol.iterator,ew=Symbol.toStringTag,tw)](){return new FD(this.wrap())}},sx=class{constructor(e){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],n=e.right;if(n!=null){for(;n!=null;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},FD=class extends sx{getValue(e){return e.key}},jD=class extends sx{getValue(e){return[e.key,e.key]}},ax=e=>()=>e,c1=e=>{const n=e?(t,r)=>r.minus(t).abs().isLessThanOrEqualTo(e):ax(!1);return(t,r)=>n(t,r)?0:t.comparedTo(r)};function zD(e){const n=e?(t,r,i,s,o)=>t.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(e)):ax(!1);return(t,r,i)=>{const s=t.x,o=t.y,u=i.x,f=i.y,d=o.minus(f).times(r.x.minus(u)).minus(s.minus(u).times(r.y.minus(f)));return n(d,s,o,u,f)?0:d.comparedTo(0)}}var $D=e=>e,UD=e=>{if(e){const n=new p0(c1(e)),t=new p0(c1(e)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,n),y:r(s.y,t)});return i({x:new cc(0),y:new cc(0)}),i}return $D},f1=e=>({set:n=>{Vc=f1(n)},reset:()=>f1(e),compare:c1(e),snap:UD(e),orient:zD(e)}),Vc=f1(),Ad=(e,n)=>e.ll.x.isLessThanOrEqualTo(n.x)&&n.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(n.y)&&n.y.isLessThanOrEqualTo(e.ur.y),h1=(e,n)=>{if(n.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(n.ll.x)||n.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(n.ll.y))return null;const t=e.ll.x.isLessThan(n.ll.x)?n.ll.x:e.ll.x,r=e.ur.x.isLessThan(n.ur.x)?e.ur.x:n.ur.x,i=e.ll.y.isLessThan(n.ll.y)?n.ll.y:e.ll.y,s=e.ur.y.isLessThan(n.ur.y)?e.ur.y:n.ur.y;return{ll:{x:t,y:i},ur:{x:r,y:s}}},Rg=(e,n)=>e.x.times(n.y).minus(e.y.times(n.x)),lx=(e,n)=>e.x.times(n.x).plus(e.y.times(n.y)),g0=e=>lx(e,e).sqrt(),VD=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return Rg(i,r).div(g0(i)).div(g0(r))},HD=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return lx(i,r).div(g0(i)).div(g0(r))},db=(e,n,t)=>n.y.isZero()?null:{x:e.x.plus(n.x.div(n.y).times(t.minus(e.y))),y:t},pb=(e,n,t)=>n.x.isZero()?null:{x:t,y:e.y.plus(n.y.div(n.x).times(t.minus(e.x)))},GD=(e,n,t,r)=>{if(n.x.isZero())return pb(t,r,e.x);if(r.x.isZero())return pb(e,n,t.x);if(n.y.isZero())return db(t,r,e.y);if(r.y.isZero())return db(e,n,t.y);const i=Rg(n,r);if(i.isZero())return null;const s={x:t.x.minus(e.x),y:t.y.minus(e.y)},o=Rg(s,n).div(i),u=Rg(s,r).div(i),f=e.x.plus(u.times(n.x)),d=t.x.plus(o.times(r.x)),g=e.y.plus(u.times(n.y)),y=t.y.plus(o.times(r.y)),x=f.plus(d).div(2),_=g.plus(y).div(2);return{x,y:_}},ac=class ux{constructor(n,t){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");n.events===void 0?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=t}static compare(n,t){const r=ux.comparePoints(n.point,t.point);return r!==0?r:(n.point!==t.point&&n.link(t),n.isLeft!==t.isLeft?n.isLeft?1:-1:m0.compare(n.segment,t.segment))}static comparePoints(n,t){return n.x.isLessThan(t.x)?-1:n.x.isGreaterThan(t.x)?1:n.y.isLessThan(t.y)?-1:n.y.isGreaterThan(t.y)?1:0}link(n){if(n.point===this.point)throw new Error("Tried to link already linked events");const t=n.point.events;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const n=this.point.events.length;for(let t=0;t<n;t++){const r=this.point.events[t];if(r.segment.consumedBy===void 0)for(let i=t+1;i<n;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const n=[];for(let t=0,r=this.point.events.length;t<r;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i)}return n}getLeftmostComparator(n){const t=new Map,r=i=>{const s=i.otherSE;t.set(i,{sine:VD(this.point,n.point,s.point),cosine:HD(this.point,n.point,s.point)})};return(i,s)=>{t.has(i)||r(i),t.has(s)||r(s);const{sine:o,cosine:u}=t.get(i),{sine:f,cosine:d}=t.get(s);return o.isGreaterThanOrEqualTo(0)&&f.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:o.isLessThan(0)&&f.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:f.isLessThan(o)?-1:f.isGreaterThan(o)?1:0}}},qD=class d1{constructor(n){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=n;for(let t=0,r=n.length;t<r;t++)n[t].segment.ringOut=this;this.poly=null}static factory(n){const t=[];for(let r=0,i=n.length;r<i;r++){const s=n[r];if(!s.isInResult()||s.ringOut)continue;let o=null,u=s.leftSE,f=s.rightSE;const d=[u],g=u.point,y=[];for(;o=u,u=f,d.push(u),u.point!==g;)for(;;){const x=u.getAvailableLinkedEvents();if(x.length===0){const T=d[0].point,D=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${T.x}, ${T.y}]. Last matching segment found ends at [${D.x}, ${D.y}].`)}if(x.length===1){f=x[0].otherSE;break}let _=null;for(let T=0,D=y.length;T<D;T++)if(y[T].point===u.point){_=T;break}if(_!==null){const T=y.splice(_)[0],D=d.splice(T.index);D.unshift(D[0].otherSE),t.push(new d1(D.reverse()));continue}y.push({index:d.length,point:u.point});const E=u.getLeftmostComparator(o);f=x.sort(E)[0].otherSE;break}t.push(new d1(d))}return t}getGeom(){let n=this.events[0].point;const t=[n];for(let d=1,g=this.events.length-1;d<g;d++){const y=this.events[d].point,x=this.events[d+1].point;Vc.orient(y,n,x)!==0&&(t.push(y),n=y)}if(t.length===1)return null;const r=t[0],i=t[1];Vc.orient(r,n,i)===0&&t.shift(),t.push(t[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,f=[];for(let d=o;d!=u;d+=s)f.push([t[d].x.toNumber(),t[d].y.toNumber()]);return f}isExteriorRing(){if(this._isExteriorRing===void 0){const n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let n=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const f=this.events[o];ac.compare(n,f)>0&&(n=f)}let t=n.segment.prevInResult(),r=t?t.prevInResult():null;for(;;){if(!t)return null;if(!r)return t.ringOut;if(r.ringOut!==t.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(s=t.ringOut)==null?void 0:s.enclosingRing();t=r.prevInResult(),r=t?t.prevInResult():null}}},gb=class{constructor(e){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const n=[e];for(let t=0,r=this.interiorRings.length;t<r;t++){const i=this.interiorRings[t].getGeom();i!==null&&n.push(i)}return n}},WD=class{constructor(e){Ht(this,"rings");Ht(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var t;const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())n.push(new gb(s));else{const o=s.enclosingRing();o!=null&&o.poly||n.push(new gb(o)),(t=o==null?void 0:o.poly)==null||t.addInterior(s)}}return n}},ZD=class{constructor(e,n=m0.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=e,this.tree=new p0(n),this.segments=[]}process(e){const n=e.segment,t=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(n),t;e.isLeft&&this.tree.add(n);let r=n,i=n;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let s=null;if(r){const u=r.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(s=u),!r.isAnEndpoint(u))){const f=this._splitSafely(r,u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}}let o=null;if(i){const u=i.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(o=u),!i.isAnEndpoint(u))){const f=this._splitSafely(i,u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}}if(s!==null||o!==null){let u=null;s===null?u=o:o===null?u=s:u=ac.comparePoints(s,o)<=0?s:o,this.queue.delete(n.rightSE),t.push(n.rightSE);const f=n.split(u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}t.length>0?(this.tree.delete(n),t.push(e)):(this.segments.push(n),n.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}}}this.tree.delete(n)}return t}_splitSafely(e,n){this.tree.delete(e);const t=e.rightSE;this.queue.delete(t);const r=e.split(n);return r.push(t),e.consumedBy===void 0&&this.tree.add(e),r}},KD=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(e,n,t){jd.type=e;const r=[new vb(n,!0)];for(let d=0,g=t.length;d<g;d++)r.push(new vb(t[d],!1));if(jd.numMultiPolys=r.length,jd.type==="difference"){const d=r[0];let g=1;for(;g<r.length;)h1(r[g].bbox,d.bbox)!==null?g++:r.splice(g,1)}if(jd.type==="intersection")for(let d=0,g=r.length;d<g;d++){const y=r[d];for(let x=d+1,_=r.length;x<_;x++)if(h1(y.bbox,r[x].bbox)===null)return[]}const i=new p0(ac.compare);for(let d=0,g=r.length;d<g;d++){const y=r[d].getSweepEvents();for(let x=0,_=y.length;x<_;x++)i.add(y[x])}const s=new ZD(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const d=s.process(o);for(let g=0,y=d.length;g<y;g++){const x=d[g];x.consumedBy===void 0&&i.add(x)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Vc.reset();const u=qD.factory(s.segments);return new WD(u).getGeom()}},jd=new KD,p1=jd,YD=0,m0=class Fg{constructor(n,t,r,i){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++YD,this.leftSE=n,n.segment=this,n.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=n,this.rings=r,this.windings=i}static compare(n,t){const r=n.leftSE.point.x,i=t.leftSE.point.x,s=n.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const u=n.leftSE.point.y,f=t.leftSE.point.y,d=n.rightSE.point.y,g=t.rightSE.point.y;if(r.isLessThan(i)){if(f.isLessThan(u)&&f.isLessThan(d))return 1;if(f.isGreaterThan(u)&&f.isGreaterThan(d))return-1;const y=n.comparePoint(t.leftSE.point);if(y<0)return 1;if(y>0)return-1;const x=t.comparePoint(n.rightSE.point);return x!==0?x:-1}if(r.isGreaterThan(i)){if(u.isLessThan(f)&&u.isLessThan(g))return-1;if(u.isGreaterThan(f)&&u.isGreaterThan(g))return 1;const y=t.comparePoint(n.leftSE.point);if(y!==0)return y;const x=n.comparePoint(t.rightSE.point);return x<0?1:x>0?-1:1}if(u.isLessThan(f))return-1;if(u.isGreaterThan(f))return 1;if(s.isLessThan(o)){const y=t.comparePoint(n.rightSE.point);if(y!==0)return y}if(s.isGreaterThan(o)){const y=n.comparePoint(t.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!s.eq(o)){const y=d.minus(u),x=s.minus(r),_=g.minus(f),E=o.minus(i);if(y.isGreaterThan(x)&&_.isLessThan(E))return 1;if(y.isLessThan(x)&&_.isGreaterThan(E))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||d.isLessThan(g)?-1:d.isGreaterThan(g)?1:n.id<t.id?-1:n.id>t.id?1:0}static fromRing(n,t,r){let i,s,o;const u=ac.comparePoints(n,t);if(u<0)i=n,s=t,o=1;else if(u>0)i=t,s=n,o=-1;else throw new Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);const f=new ac(i,!0),d=new ac(s,!1);return new Fg(f,d,[r],[o])}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const n=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n.isLessThan(t)?n:t},ur:{x:this.rightSE.point.x,y:n.isGreaterThan(t)?n:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(n){return n.x.eq(this.leftSE.point.x)&&n.y.eq(this.leftSE.point.y)||n.x.eq(this.rightSE.point.x)&&n.y.eq(this.rightSE.point.y)}comparePoint(n){return Vc.orient(this.leftSE.point,n,this.rightSE.point)}getIntersection(n){const t=this.bbox(),r=n.bbox(),i=h1(t,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,u=n.leftSE.point,f=n.rightSE.point,d=Ad(t,u)&&this.comparePoint(u)===0,g=Ad(r,s)&&n.comparePoint(s)===0,y=Ad(t,f)&&this.comparePoint(f)===0,x=Ad(r,o)&&n.comparePoint(o)===0;if(g&&d)return x&&!y?o:!x&&y?f:null;if(g)return y&&s.x.eq(f.x)&&s.y.eq(f.y)?null:s;if(d)return x&&o.x.eq(u.x)&&o.y.eq(u.y)?null:u;if(x&&y)return null;if(x)return o;if(y)return f;const _=GD(s,this.vector(),u,n.vector());return _===null||!Ad(i,_)?null:Vc.snap(_)}split(n){const t=[],r=n.events!==void 0,i=new ac(n,!0),s=new ac(n,!1),o=this.rightSE;this.replaceRightSE(s),t.push(s),t.push(i);const u=new Fg(i,o,this.rings.slice(),this.windings.slice());return ac.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),ac.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),t}swapEvents(){const n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}consume(n){let t=this,r=n;for(;t.consumedBy;)t=t.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=Fg.compare(t,r);if(i!==0){if(i>0){const s=t;t=r,r=s}if(t.prev===r){const s=t;t=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const u=r.rings[s],f=r.windings[s],d=t.rings.indexOf(u);d===-1?(t.rings.push(u),t.windings.push(f)):t.windings[d]+=f}r.rings=null,r.windings=null,r.consumedBy=t,r.leftSE.consumedBy=t.leftSE,r.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,f=this.rings.length;u<f;u++){const d=this.rings[u],g=this.windings[u],y=t.indexOf(d);y===-1?(t.push(d),r.push(g)):r[y]+=g}const s=[],o=[];for(let u=0,f=t.length;u<f;u++){if(r[u]===0)continue;const d=t[u],g=d.poly;if(o.indexOf(g)===-1)if(d.isExterior)s.push(g);else{o.indexOf(g)===-1&&o.push(g);const y=s.indexOf(d.poly);y!==-1&&s.splice(y,1)}}for(let u=0,f=s.length;u<f;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const n=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(p1.type){case"union":{const r=n.length===0,i=t.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;n.length<t.length?(r=n.length,i=t.length):(r=t.length,i=n.length),this._isInResult=i===p1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(n.length-t.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(n)!==r(t);break}}return this._isInResult}},mb=class{constructor(e,n,t){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=t,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Vc.snap({x:new cc(e[0][0]),y:new cc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Vc.snap({x:new cc(e[s][0]),y:new cc(e[s][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(m0.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(m0.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let n=0,t=this.segments.length;n<t;n++){const r=this.segments[n];e.push(r.leftSE),e.push(r.rightSE)}return e}},JD=class{constructor(e,n){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new mb(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,r=e.length;t<r;t++){const i=new mb(e[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,t=this.interiorRings.length;n<t;n++){const r=this.interiorRings[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},vb=class{constructor(e,n){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new cc(Number.POSITIVE_INFINITY),y:new cc(Number.POSITIVE_INFINITY)},ur:{x:new cc(Number.NEGATIVE_INFINITY),y:new cc(Number.NEGATIVE_INFINITY)}};for(let t=0,r=e.length;t<r;t++){const i=new JD(e[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},XD=(e,...n)=>p1.run("intersection",e,n);Vc.set;function QD(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",E=e.type==="Feature",T=_?e.features.length:1;for(t=0;t<T;t++){for(u=_?e.features[t].geometry:E?e.geometry:e,d=_?e.features[t].properties:E?e.properties:{},g=_?e.features[t].bbox:E?e.bbox:void 0,y=_?e.features[t].id:E?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function eB(e,n={}){const t=[];if(QD(e,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const r=XD(t[0],...t.slice(1));return r.length===0?null:r.length===1?fu(r[0],n.properties):wD(r,n.properties)}var tB=eB;function cx(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,g=0,y=0,x,_=e.type,E=_==="FeatureCollection",T=_==="Feature",D=E?e.features.length:1,O=0;O<D;O++){d=E?e.features[O].geometry:T?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var $=0;$<u;$++){var K=0,X=0;if(o=x?d.geometries[$]:d,o!==null){f=o.coordinates;var ae=o.type;switch(g=0,ae){case null:break;case"Point":if(n(f,y,O,K,X)===!1)return!1;y++,K++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],y,O,K,X)===!1)return!1;y++,ae==="MultiPoint"&&K++}ae==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-g;i++){if(n(f[r][i],y,O,K,X)===!1)return!1;y++}ae==="MultiLineString"&&K++,ae==="Polygon"&&X++}ae==="Polygon"&&K++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(X=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-g;s++){if(n(f[r][i][s],y,O,K,X)===!1)return!1;y++}X++}K++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(cx(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function nB(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",E=e.type==="Feature",T=_?e.features.length:1;for(t=0;t<T;t++){for(u=_?e.features[t].geometry:E?e.geometry:e,d=_?e.features[t].properties:E?e.properties:{},g=_?e.features[t].bbox:E?e.bbox:void 0,y=_?e.features[t].id:E?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function rB(e,n){nB(e,function(t,r,i,s,o){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return n(sd(t,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var f;switch(u){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var d=0;d<t.coordinates.length;d++){var g=t.coordinates[d],y={type:f,coordinates:g};if(n(sd(y,i),r,d)===!1)return!1}})}function iB(e,n){rB(e,function(t,r,i){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var u,f=0,d=0,g=0;if(cx(t,function(y,x,_,E,T){if(u===void 0||r>f||E>d||T>g){u=y,f=r,d=E,g=T,s=0;return}var D=hu([u,y],t.properties);if(n(D,r,i,T,s)===!1)return!1;s++,u=y})===!1)return!1}}})}function oB(e,n,t){var r=t,i=!1;return iB(e,function(s,o,u,f,d){i===!1&&t===void 0?r=s:r=n(r,s,o,u,f,d),i=!0}),r}function v0(e,n={}){return oB(e,(t,r)=>{const i=r.geometry.coordinates;return t+dy(i[0],i[1],n)},0)}var Uf=v0;class pf extends Vn.Polygon{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");this.properties=hn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){hn.measure("Polygon.updateProperties",()=>{var t,r,i,s,o;try{const u=this.getLatLngs()[0];if(!u||u.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const f=u.map(O=>[O.lng,O.lat]);f.push(f[0]);const d=fu([f]),g=rx(d),y=v0(hu([...f]),{units:"meters"}),x=np(d),_=Vn.latLng(x.geometry.coordinates[1],x.geometry.coordinates[0]),E=((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||"",T=((i=this.properties)==null?void 0:i.category)||"forages",D=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:u.map(O=>({lat:O.lat,lng:O.lng})),surface:g,perimeter:y,center:{lat:_.lat,lng:_.lng},vertices:u.length,category:T,accessLevel:D,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:E}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate polygon properties",u)}})}setName(t){hn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return hn.measure("Polygon.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}setLatLngs(t){return hn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(t),this.updateProperties(),this))}getMidPoints(){return hn.measure("Polygon.getMidPoints",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(t,r){hn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i[t]=r,Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(t,r){hn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i.splice((t+1)%i.length,0,r),Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(t){return hn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Vn.latLng(s.lat+t.lat,s.lng+t.lng));return Vn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return hn.measure("Polygon.getCenter",()=>{const t=this.getLatLngs()[0];if(!t||t.length===0)return new Vn.LatLng(0,0);try{const r=t.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Vn.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const s=fu([i]),o=np(s),u=o.geometry.coordinates[1],f=o.geometry.coordinates[0];if(typeof u!="number"||typeof f!="number"||isNaN(u)||isNaN(f)||Math.abs(u)>90||Math.abs(f)>180)throw new Error("Centroid calcul invalide");return Vn.latLng(u,f)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const u of t)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,s+=u.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Vn.LatLng(0,0)):new Vn.LatLng(i/o,s/o)}})}getSegmentLengths(){return hn.measure("Polygon.getSegmentLengths",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(s.distanceTo(o))}return r})}}class Ns extends Vn.Polyline{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");Ht(this,"cachedProperties",{});Ht(this,"needsUpdate",!0);this.properties=hn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){hn.measure("Line.updateProperties",()=>{var i,s,o,u,f;const t=this.getLatLngs();if(!t||t.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=t.map(d=>[d.lng,d.lat]);try{const d=hu(r),g=v0(d,{units:"meters"});let y;if(t.length===2)y=Vn.latLng((t[0].lat+t[1].lat)/2,(t[0].lng+t[1].lng)/2);else{const D=u1(d,g/2,{units:"meters"});y=Vn.latLng(D.geometry.coordinates[1],D.geometry.coordinates[0])}const x=10,_=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",E=((o=this.properties)==null?void 0:o.category)||"forages",T=((u=this.properties)==null?void 0:u.accessLevel)||"visitor";this.properties={type:"Line",length:g,coordinates:t.map(D=>({lat:D.lat,lng:D.lng})),center:{lat:y.lat,lng:y.lng},vertices:t.length,surfaceInfluence:g*x,dimensions:{width:x},category:E,accessLevel:T,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((f=this.options)==null?void 0:f.dashArray)||"",name:_}},this.cachedProperties.length=g,this.cachedProperties.center=y,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(d){console.error("Failed to calculate line properties",d)}})}setName(t){hn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return hn.measure("Line.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}invalidateCache(){hn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(t){return super.setLatLngs(t),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return hn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(t){return hn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return null;const i=r[t],s=r[t+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",t),null):Vn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(t,r,i=!1){hn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length&&(s[t]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:t,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(t,r,i=!1){hn.measure("Line.addVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length-1&&(s.splice(t+1,0,r),Vn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(t,r=!0){return hn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Vn.latLng(o.lat+t.lat,o.lng+t.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:t,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return hn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const t=this.getLatLngs();if(t.length<2)return t[0]||new Vn.LatLng(0,0);try{const r=t.map(f=>[f.lng,f.lat]),i=hu(r),s=v0(i,{units:"meters"}),o=u1(i,s/2,{units:"meters"}),u=Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=t.reduce((u,f)=>u+f.lat,0)/t.length,s=t.reduce((u,f)=>u+f.lng,0)/t.length,o=new Vn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return hn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(t){return hn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return 0;const i=r[t],s=r[t+1];return i.distanceTo(s)})}getLengthToVertex(t){return hn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(t<=0||r.length<2)return 0;for(let s=0;s<Math.min(t,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return hn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const t=this.getLatLngs();let r=0;for(let i=0;i<t.length-1;i++)r+=t[i].distanceTo(t[i+1]);return this.cachedProperties.length=r,r})}}const Qa=class Qa extends Ns{constructor(t,r={}){super(t,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ht(this,"elevationData",[]);Ht(this,"elevationProfile",null);Ht(this,"elevationMarker",null);Ht(this,"isZooming",!1);Ht(this,"simpleLine",null);Ht(this,"isDestroyed",!1);Ht(this,"zoomAnimationTimeout",null);this.properties=hn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){hn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(t){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignore - ligne dtruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Vn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration aprs animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignore:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration aprs animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||hn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const t=this._path;t&&(t.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(t){console.error("[ElevationLine] Error in handleZoomStart:",t),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||hn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const t=this._path;t&&(t.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw aprs zoom:",r),this.cleanup()}},50)}catch(t){console.error("[ElevationLine] Error in handleZoomEnd:",t)}finally{this.isZooming=!1}})}cleanup(){hn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const t=this._path;t&&(t.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return hn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const t=this.getLength(),r=Math.ceil(t/Qa.SAMPLE_DISTANCE);return Math.min(Math.max(r,Qa.MIN_SAMPLES),Qa.MAX_SAMPLES)})}async fetchElevationData(t=0){return hn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const u=[];for(let f=0;f<o;f++){const d=f/(o-1)*i,g=this.getPointAtDistance(d);g&&u.push(`${g.lat},${g.lng}`)}s=u.join("|");try{const f=await fetch(`${Qa.API_URL}?locations=${s}`);if(!f.ok)throw new Error(`HTTP error ${f.status}`);const d=await f.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((g,y)=>({distance:y/(o-1)*i,elevation:g.elevation})),this.properties.dataSource="api"}catch(f){if(console.warn(`[ElevationLine] API fetch attempt ${t+1}/${Qa.MAX_RETRIES} failed:`,f),t<Qa.MAX_RETRIES)return await new Promise(d=>setTimeout(d,Qa.RETRY_DELAY)),this.fetchElevationData(t+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){hn.measure("ElevationLine.simulateElevationData",()=>{const t=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*t,u=100+Math.sin(o/t*Math.PI*2)*50;return{distance:o,elevation:u}})})}calculateElevationStatistics(){hn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const t=this.elevationData.map(g=>g.elevation),r=t.length?Math.max(...t):0,i=t.length?Math.min(...t):0;let s=0,o=0,u=0,f=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Donnes brutes:",{elevationsCount:t.length,maxElevation:r,minElevation:i});for(let g=1;g<this.elevationData.length;g++){const y=this.elevationData[g-1],x=this.elevationData[g],_=x.elevation-y.elevation;_>0?s+=_:o+=Math.abs(_);const E=x.distance-y.distance;if(E>0){const T=_/E*100;u=Math.max(u,Math.abs(T)),f+=Math.abs(T),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermdiaires:",{gain:s,loss:o,maxSlope:u,averageSlope:d>0?f/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?f/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Proprits mises  jour:",this.properties)})}showElevationAt(t){hn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-t)<Math.abs(s.distance-t)?o:s),i=this.getPointAtDistance(t);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Vn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:t,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'lvation:",r),this.hideElevationMarker()}})}hideElevationMarker(){hn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(t){return hn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),s=hu(i),o=u1(s,t,{units:"meters"});return Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(t,r,i=!1){hn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(t,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(t,r,i=!1){hn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignore - non autoris pour un profil altimtrique")})}setLatLngs(t){return hn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(t),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(t,r=!0){return hn.measure("ElevationLine.move",()=>(super.move(t,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(t){hn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return hn.measure("ElevationLine.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}formatDistance(t){return hn.measure("ElevationLine.formatDistance",()=>t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t.toFixed(0)} m`)}formatElevation(t){return hn.measure("ElevationLine.formatElevation",()=>`${t.toFixed(0)} m`)}onAdd(t){return hn.measure("ElevationLine.onAdd",()=>(super.onAdd(t),this))}onRemove(t){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(t)}async updateElevationProfile(){return hn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(t){console.error("[ElevationLine] Erreur lors de la mise  jour du profil d'lvation:",t),this.properties.dataSource="error"}})}updateProperties(){hn.measure("ElevationLine.updateProperties",()=>{var t,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(D=>D.elevation),s=Math.max(...i),o=Math.min(...i);let u=0,f=0,d=0,g=0,y=0;for(let D=1;D<this.elevationData.length;D++){const O=this.elevationData[D-1],$=this.elevationData[D],K=$.elevation-O.elevation;K>0?u+=K:f+=Math.abs(K);const X=$.distance-O.distance;if(X>0){const ae=K/X*100;d=Math.max(d,Math.abs(ae)),g+=Math.abs(ae),y++}}const _=this.getLatLngs().map(D=>({lat:D.lat,lng:D.lng})),E=((t=this.properties)==null?void 0:t.category)||"forages",T=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:_,elevationData:this.elevationData.map(D=>({distance:D.distance,elevation:D.elevation})),maxElevation:s,minElevation:o,elevationGain:u,elevationLoss:f,maxSlope:d,averageSlope:y>0?g/y:0,dataSource:this.properties.dataSource||"api",category:E,accessLevel:T},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return hn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ht(Qa,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ht(Qa,"RETRY_DELAY",2e3),Ht(Qa,"MAX_RETRIES",3),Ht(Qa,"SAMPLE_DISTANCE",100),Ht(Qa,"MIN_SAMPLES",10),Ht(Qa,"MAX_SAMPLES",50);let Sf=Qa;var y0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */y0.exports;(function(e,n){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",y=1,x=2,_=4,E=1,T=2,D=1,O=2,$=4,K=8,X=16,ae=32,ue=64,Le=128,W=256,V=512,Y=30,F="...",I=800,j=16,H=1,U=2,R=3,te=1/0,re=9007199254740991,me=17976931348623157e292,xe=NaN,We=4294967295,N=We-1,ee=We>>>1,fe=[["ary",Le],["bind",D],["bindKey",O],["curry",K],["curryRight",X],["flip",V],["partial",ae],["partialRight",ue],["rearg",W]],ce="[object Arguments]",ye="[object Array]",se="[object AsyncFunction]",k="[object Boolean]",le="[object Date]",ke="[object DOMException]",Pe="[object Error]",Ve="[object Function]",Z="[object GeneratorFunction]",de="[object Map]",ve="[object Number]",pe="[object Null]",ze="[object Object]",Qe="[object Promise]",Ke="[object Proxy]",He="[object RegExp]",Xe="[object Set]",ot="[object String]",kt="[object Symbol]",Ct="[object Undefined]",Ut="[object WeakMap]",Gt="[object WeakSet]",cn="[object ArrayBuffer]",pn="[object DataView]",et="[object Float32Array]",it="[object Float64Array]",nt="[object Int8Array]",Vt="[object Int16Array]",Qt="[object Int32Array]",On="[object Uint8Array]",wn="[object Uint8ClampedArray]",Tn="[object Uint16Array]",ar="[object Uint32Array]",xn=/\b__p \+= '';/g,Mn=/\b(__p \+=) '' \+/g,En=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cr=/&(?:amp|lt|gt|quot|#39);/g,yr=/[&<>"']/g,mt=RegExp(cr.source),Ge=RegExp(yr.source),Ot=/<%-([\s\S]+?)%>/g,Pn=/<%([\s\S]+?)%>/g,tr=/<%=([\s\S]+?)%>/g,Zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/,mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Kt=RegExp(It.source),Ln=/^\s+/,mr=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cn=/\{\n\/\* \[wrapped with (.+)\] \*/,xr=/,? & /,Di=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fr=/[()=,{}\[\]\/\s]/,Er=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hr=/\w*$/,ir=/^[-+]0x[0-9a-f]+$/i,Br=/^0b[01]+$/i,jr=/^\[object .+?Constructor\]$/,rn=/^0o[0-7]+$/i,Ri=/^(?:0|[1-9]\d*)$/,yi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pi=/($^)/,Zr=/['\n\r\u2028\u2029\\]/g,Or="\\ud800-\\udfff",Ir="\\u0300-\\u036f",hr="\\ufe20-\\ufe2f",Fi="\\u20d0-\\u20ff",Ss=Ir+hr+Fi,Cs="\\u2700-\\u27bf",oi="a-z\\xdf-\\xf6\\xf8-\\xff",Fn="\\xac\\xb1\\xd7\\xf7",Po="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ui="\\u2000-\\u206f",fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",bo="\\ufe0e\\ufe0f",wo=Fn+Po+ui+fr,Lr="[']",Us="["+Or+"]",Hn="["+wo+"]",_r="["+Ss+"]",Kr="\\d+",_n="["+Cs+"]",tn="["+oi+"]",si="[^"+Or+wo+Kr+Cs+oi+qn+"]",co="\\ud83c[\\udffb-\\udfff]",xo="(?:"+_r+"|"+co+")",Pi="[^"+Or+"]",fs="(?:\\ud83c[\\udde6-\\uddff]){2}",Qo="[\\ud800-\\udbff][\\udc00-\\udfff]",Ro="["+qn+"]",hi="\\u200d",Bs="(?:"+tn+"|"+si+")",Fo="(?:"+Ro+"|"+si+")",Qi="(?:"+Lr+"(?:d|ll|m|re|s|t|ve))?",Lo="(?:"+Lr+"(?:D|LL|M|RE|S|T|VE))?",Vs=xo+"?",va="["+bo+"]?",eo="(?:"+hi+"(?:"+[Pi,fs,Qo].join("|")+")"+va+Vs+")*",rl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pr=va+Vs+eo,br="(?:"+[_n,fs,Qo].join("|")+")"+pr,Yr="(?:"+[Pi+_r+"?",_r,fs,Qo,Us].join("|")+")",Tr=RegExp(Lr,"g"),jo=RegExp(_r,"g"),il=RegExp(co+"(?="+co+")|"+Yr+pr,"g"),ol=RegExp([Ro+"?"+tn+"+"+Qi+"(?="+[Hn,Ro,"$"].join("|")+")",Fo+"+"+Lo+"(?="+[Hn,Ro+Bs,"$"].join("|")+")",Ro+"?"+Bs+"+"+Qi,Ro+"+"+Lo,ya,rl,Kr,br].join("|"),"g"),Hs=RegExp("["+hi+Or+Ss+bo+"]"),Ua=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_u=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ml=-1,Sr={};Sr[et]=Sr[it]=Sr[nt]=Sr[Vt]=Sr[Qt]=Sr[On]=Sr[wn]=Sr[Tn]=Sr[ar]=!0,Sr[ce]=Sr[ye]=Sr[cn]=Sr[k]=Sr[pn]=Sr[le]=Sr[Pe]=Sr[Ve]=Sr[de]=Sr[ve]=Sr[ze]=Sr[He]=Sr[Xe]=Sr[ot]=Sr[Ut]=!1;var Gr={};Gr[ce]=Gr[ye]=Gr[cn]=Gr[pn]=Gr[k]=Gr[le]=Gr[et]=Gr[it]=Gr[nt]=Gr[Vt]=Gr[Qt]=Gr[de]=Gr[ve]=Gr[ze]=Gr[He]=Gr[Xe]=Gr[ot]=Gr[kt]=Gr[On]=Gr[wn]=Gr[Tn]=Gr[ar]=!0,Gr[Pe]=Gr[Ve]=Gr[Ut]=!1;var Va={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Al={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sl=parseFloat,kl=parseInt,Jl=typeof ea=="object"&&ea&&ea.Object===Object&&ea,Jr=typeof self=="object"&&self&&self.Object===Object&&self,to=Jl||Jr||Function("return this")(),or=n&&!n.nodeType&&n,no=or&&!0&&e&&!e.nodeType&&e,al=no&&no.exports===or,_a=al&&Jl.process,$i=function(){try{var _t=no&&no.require&&no.require("util").types;return _t||_a&&_a.binding&&_a.binding("util")}catch{}}(),Xl=$i&&$i.isArrayBuffer,ta=$i&&$i.isDate,Tl=$i&&$i.isMap,Nl=$i&&$i.isRegExp,Os=$i&&$i.isSet,Dl=$i&&$i.isTypedArray;function _i(_t,qt,Mt){switch(Mt.length){case 0:return _t.call(qt);case 1:return _t.call(qt,Mt[0]);case 2:return _t.call(qt,Mt[0],Mt[1]);case 3:return _t.call(qt,Mt[0],Mt[1],Mt[2])}return _t.apply(qt,Mt)}function Zu(_t,qt,Mt,An){for(var Kn=-1,wr=_t==null?0:_t.length;++Kn<wr;){var Ui=_t[Kn];qt(An,Ui,Mt(Ui),_t)}return An}function Mo(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length;++Mt<An&&qt(_t[Mt],Mt,_t)!==!1;);return _t}function Gs(_t,qt){for(var Mt=_t==null?0:_t.length;Mt--&&qt(_t[Mt],Mt,_t)!==!1;);return _t}function Bl(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length;++Mt<An;)if(!qt(_t[Mt],Mt,_t))return!1;return!0}function qs(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length,Kn=0,wr=[];++Mt<An;){var Ui=_t[Mt];qt(Ui,Mt,_t)&&(wr[Kn++]=Ui)}return wr}function ll(_t,qt){var Mt=_t==null?0:_t.length;return!!Mt&&un(_t,qt,0)>-1}function ul(_t,qt,Mt){for(var An=-1,Kn=_t==null?0:_t.length;++An<Kn;)if(Mt(qt,_t[An]))return!0;return!1}function bi(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length,Kn=Array(An);++Mt<An;)Kn[Mt]=qt(_t[Mt],Mt,_t);return Kn}function Es(_t,qt){for(var Mt=-1,An=qt.length,Kn=_t.length;++Mt<An;)_t[Kn+Mt]=qt[Mt];return _t}function ba(_t,qt,Mt,An){var Kn=-1,wr=_t==null?0:_t.length;for(An&&wr&&(Mt=_t[++Kn]);++Kn<wr;)Mt=qt(Mt,_t[Kn],Kn,_t);return Mt}function ro(_t,qt,Mt,An){var Kn=_t==null?0:_t.length;for(An&&Kn&&(Mt=_t[--Kn]);Kn--;)Mt=qt(Mt,_t[Kn],Kn,_t);return Mt}function B(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length;++Mt<An;)if(qt(_t[Mt],Mt,_t))return!0;return!1}var _e=vr("length");function Ze(_t){return _t.split("")}function ct(_t){return _t.match(Di)||[]}function xt(_t,qt,Mt){var An;return Mt(_t,function(Kn,wr,Ui){if(qt(Kn,wr,Ui))return An=wr,!1}),An}function jt(_t,qt,Mt,An){for(var Kn=_t.length,wr=Mt+(An?1:-1);An?wr--:++wr<Kn;)if(qt(_t[wr],wr,_t))return wr;return-1}function un(_t,qt,Mt){return qt===qt?So(_t,qt,Mt):jt(_t,jn,Mt)}function Nn(_t,qt,Mt,An){for(var Kn=Mt-1,wr=_t.length;++Kn<wr;)if(An(_t[Kn],qt))return Kn;return-1}function jn(_t){return _t!==_t}function nr(_t,qt){var Mt=_t==null?0:_t.length;return Mt?wi(_t,qt)/Mt:xe}function vr(_t){return function(qt){return qt==null?t:qt[_t]}}function $r(_t){return function(qt){return _t==null?t:_t[qt]}}function ji(_t,qt,Mt,An,Kn){return Kn(_t,function(wr,Ui,xi){Mt=An?(An=!1,wr):qt(Mt,wr,Ui,xi)}),Mt}function di(_t,qt){var Mt=_t.length;for(_t.sort(qt);Mt--;)_t[Mt]=_t[Mt].value;return _t}function wi(_t,qt){for(var Mt,An=-1,Kn=_t.length;++An<Kn;){var wr=qt(_t[An]);wr!==t&&(Mt=Mt===t?wr:Mt+wr)}return Mt}function io(_t,qt){for(var Mt=-1,An=Array(_t);++Mt<_t;)An[Mt]=qt(Mt);return An}function fo(_t,qt){return bi(qt,function(Mt){return[Mt,_t[Mt]]})}function Ps(_t){return _t&&_t.slice(0,xa(_t)+1).replace(Ln,"")}function Ur(_t){return function(qt){return _t(qt)}}function zo(_t,qt){return bi(qt,function(Mt){return _t[Mt]})}function cl(_t,qt){return _t.has(qt)}function es(_t,qt){for(var Mt=-1,An=_t.length;++Mt<An&&un(qt,_t[Mt],0)>-1;);return Mt}function Ql(_t,qt){for(var Mt=_t.length;Mt--&&un(qt,_t[Mt],0)>-1;);return Mt}function na(_t,qt){for(var Mt=_t.length,An=0;Mt--;)_t[Mt]===qt&&++An;return An}var bu=$r(Va),Ha=$r(Wu);function Ga(_t){return"\\"+Yl[_t]}function ho(_t,qt){return _t==null?t:_t[qt]}function ra(_t){return Hs.test(_t)}function Ms(_t){return Ua.test(_t)}function hs(_t){for(var qt,Mt=[];!(qt=_t.next()).done;)Mt.push(qt.value);return Mt}function fl(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(An,Kn){Mt[++qt]=[Kn,An]}),Mt}function $o(_t,qt){return function(Mt){return _t(qt(Mt))}}function ts(_t,qt){for(var Mt=-1,An=_t.length,Kn=0,wr=[];++Mt<An;){var Ui=_t[Mt];(Ui===qt||Ui===g)&&(_t[Mt]=g,wr[Kn++]=Mt)}return wr}function ns(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(An){Mt[++qt]=An}),Mt}function Ku(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(An){Mt[++qt]=[An,An]}),Mt}function So(_t,qt,Mt){for(var An=Mt-1,Kn=_t.length;++An<Kn;)if(_t[An]===qt)return An;return-1}function wa(_t,qt,Mt){for(var An=Mt+1;An--;)if(_t[An]===qt)return An;return An}function Uo(_t){return ra(_t)?Ho(_t):_e(_t)}function Vo(_t){return ra(_t)?Ao(_t):Ze(_t)}function xa(_t){for(var qt=_t.length;qt--&&mr.test(_t.charAt(qt)););return qt}var La=$r(Al);function Ho(_t){for(var qt=il.lastIndex=0;il.test(_t);)++qt;return qt}function Ao(_t){return _t.match(il)||[]}function ia(_t){return _t.match(ol)||[]}var As=function _t(qt){qt=qt==null?to:Go.defaults(to.Object(),qt,Go.pick(to,_u));var Mt=qt.Array,An=qt.Date,Kn=qt.Error,wr=qt.Function,Ui=qt.Math,xi=qt.Object,Ol=qt.RegExp,rs=qt.String,Vi=qt.TypeError,oa=Mt.prototype,Sa=wr.prototype,sa=xi.prototype,aa=qt["__core-js_shared__"],la=Sa.toString,Xr=sa.hasOwnProperty,Ws=0,ko=function(){var c=/[^.]+$/.exec(aa&&aa.keys&&aa.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Li=sa.toString,Mi=la.call(xi),oo=to._,Oi=Ol("^"+la.call(Xr).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ks=al?qt.Buffer:t,ds=qt.Symbol,Is=qt.Uint8Array,wu=ks?ks.allocUnsafe:t,ua=$o(xi.getPrototypeOf,xi),po=xi.create,Bi=sa.propertyIsEnumerable,qo=oa.splice,ps=ds?ds.isConcatSpreadable:t,dr=ds?ds.iterator:t,Ca=ds?ds.toStringTag:t,Ea=function(){try{var c=If(xi,"defineProperty");return c({},"",{}),c}catch{}}(),Zs=qt.clearTimeout!==to.clearTimeout&&qt.clearTimeout,is=An&&An.now!==to.Date.now&&An.now,bc=qt.setTimeout!==to.setTimeout&&qt.setTimeout,To=Ui.ceil,No=Ui.floor,Ks=xi.getOwnPropertySymbols,a=ks?ks.isBuffer:t,p=qt.isFinite,S=oa.join,G=$o(xi.keys,xi),ie=Ui.max,Ce=Ui.min,st=An.now,Pt=qt.parseInt,zt=Ui.random,sn=oa.reverse,Dn=If(qt,"DataView"),Jn=If(qt,"Map"),zr=If(qt,"Promise"),go=If(qt,"Set"),Yi=If(qt,"WeakMap"),Do=If(xi,"create"),Hi=Yi&&new Yi,gs={},wc=Rf(Dn),ca=Rf(Jn),Ys=Rf(zr),Rs=Rf(go),Af=Rf(Yi),eu=ds?ds.prototype:t,gi=eu?eu.valueOf:t,Wo=eu?eu.toString:t;function Ne(c){if(os(c)&&!ei(c)&&!(c instanceof Vr)){if(c instanceof Bo)return c;if(Xr.call(c,"__wrapped__"))return Jy(c)}return new Bo(c)}var ms=function(){function c(){}return function(m){if(!Ko(m))return{};if(po)return po(m);c.prototype=m;var A=new c;return c.prototype=t,A}}();function xu(){}function Bo(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}Ne.templateSettings={escape:Ot,evaluate:Pn,interpolate:tr,variable:"",imports:{_:Ne}},Ne.prototype=xu.prototype,Ne.prototype.constructor=Ne,Bo.prototype=ms(xu.prototype),Bo.prototype.constructor=Bo;function Vr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=We,this.__views__=[]}function qc(){var c=new Vr(this.__wrapped__);return c.__actions__=dl(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=dl(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=dl(this.__views__),c}function uh(){if(this.__filtered__){var c=new Vr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Wc(){var c=this.__wrapped__.value(),m=this.__dir__,A=ei(c),Q=m<0,we=A?c.length:0,Ie=f3(0,we,this.__views__),rt=Ie.start,gt=Ie.end,Et=gt-rt,an=Q?gt:rt-1,ln=this.__iteratees__,vn=ln.length,$n=0,sr=Ce(Et,this.__takeCount__);if(!A||!Q&&we==Et&&sr==Et)return tu(c,this.__actions__);var Pr=[];e:for(;Et--&&$n<sr;){an+=m;for(var ci=-1,Mr=c[an];++ci<vn;){var Si=ln[ci],ki=Si.iteratee,Fl=Si.type,Ka=ki(Mr);if(Fl==U)Mr=Ka;else if(!Ka){if(Fl==H)continue e;break e}}Pr[$n++]=Mr}return Pr}Vr.prototype=ms(xu.prototype),Vr.prototype.constructor=Vr;function qa(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var Q=c[m];this.set(Q[0],Q[1])}}function xc(){this.__data__=Do?Do(null):{},this.size=0}function kf(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function pd(c){var m=this.__data__;if(Do){var A=m[c];return A===f?t:A}return Xr.call(m,c)?m[c]:t}function Yu(c){var m=this.__data__;return Do?m[c]!==t:Xr.call(m,c)}function Zc(c,m){var A=this.__data__;return this.size+=this.has(c)?0:1,A[c]=Do&&m===t?f:m,this}qa.prototype.clear=xc,qa.prototype.delete=kf,qa.prototype.get=pd,qa.prototype.has=Yu,qa.prototype.set=Zc;function Il(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var Q=c[m];this.set(Q[0],Q[1])}}function gd(){this.__data__=[],this.size=0}function Kc(c){var m=this.__data__,A=yt(m,c);if(A<0)return!1;var Q=m.length-1;return A==Q?m.pop():qo.call(m,A,1),--this.size,!0}function Yc(c){var m=this.__data__,A=yt(m,c);return A<0?t:m[A][1]}function ch(c){return yt(this.__data__,c)>-1}function fh(c,m){var A=this.__data__,Q=yt(A,c);return Q<0?(++this.size,A.push([c,m])):A[Q][1]=m,this}Il.prototype.clear=gd,Il.prototype.delete=Kc,Il.prototype.get=Yc,Il.prototype.has=ch,Il.prototype.set=fh;function Pa(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var Q=c[m];this.set(Q[0],Q[1])}}function hh(){this.size=0,this.__data__={hash:new qa,map:new(Jn||Il),string:new qa}}function dh(c){var m=Kp(this,c).delete(c);return this.size-=m?1:0,m}function ph(c){return Kp(this,c).get(c)}function b(c){return Kp(this,c).has(c)}function M(c,m){var A=Kp(this,c),Q=A.size;return A.set(c,m),this.size+=A.size==Q?0:1,this}Pa.prototype.clear=hh,Pa.prototype.delete=dh,Pa.prototype.get=ph,Pa.prototype.has=b,Pa.prototype.set=M;function q(c){var m=-1,A=c==null?0:c.length;for(this.__data__=new Pa;++m<A;)this.add(c[m])}function oe(c){return this.__data__.set(c,f),this}function be(c){return this.__data__.has(c)}q.prototype.add=q.prototype.push=oe,q.prototype.has=be;function Ee(c){var m=this.__data__=new Il(c);this.size=m.size}function Ae(){this.__data__=new Il,this.size=0}function Te(c){var m=this.__data__,A=m.delete(c);return this.size=m.size,A}function De(c){return this.__data__.get(c)}function Ue(c){return this.__data__.has(c)}function ht(c,m){var A=this.__data__;if(A instanceof Il){var Q=A.__data__;if(!Jn||Q.length<i-1)return Q.push([c,m]),this.size=++A.size,this;A=this.__data__=new Pa(Q)}return A.set(c,m),this.size=A.size,this}Ee.prototype.clear=Ae,Ee.prototype.delete=Te,Ee.prototype.get=De,Ee.prototype.has=Ue,Ee.prototype.set=ht;function Nt(c,m){var A=ei(c),Q=!A&&Ff(c),we=!A&&!Q&&Xc(c),Ie=!A&&!Q&&!we&&Lh(c),rt=A||Q||we||Ie,gt=rt?io(c.length,rs):[],Et=gt.length;for(var an in c)(m||Xr.call(c,an))&&!(rt&&(an=="length"||we&&(an=="offset"||an=="parent")||Ie&&(an=="buffer"||an=="byteLength"||an=="byteOffset")||Mc(an,Et)))&&gt.push(an);return gt}function Dt(c){var m=c.length;return m?c[Df(0,m-1)]:t}function wt(c,m){return Yp(dl(c),Xn(m,0,c.length))}function Yt(c){return Yp(dl(c))}function $t(c,m,A){(A!==t&&!Mu(c[m],A)||A===t&&!(m in c))&&kn(c,m,A)}function dt(c,m,A){var Q=c[m];(!(Xr.call(c,m)&&Mu(Q,A))||A===t&&!(m in c))&&kn(c,m,A)}function yt(c,m){for(var A=c.length;A--;)if(Mu(c[A][0],m))return A;return-1}function en(c,m,A,Q){return z(c,function(we,Ie,rt){m(Q,we,A(we),rt)}),Q}function fn(c,m){return c&&Qu(m,Js(m),c)}function nn(c,m){return c&&Qu(m,gl(m),c)}function kn(c,m,A){m=="__proto__"&&Ea?Ea(c,m,{configurable:!0,enumerable:!0,value:A,writable:!0}):c[m]=A}function Sn(c,m){for(var A=-1,Q=m.length,we=Mt(Q),Ie=c==null;++A<Q;)we[A]=Ie?t:Pm(c,m[A]);return we}function Xn(c,m,A){return c===c&&(A!==t&&(c=c<=A?c:A),m!==t&&(c=c>=m?c:m)),c}function l(c,m,A,Q,we,Ie){var rt,gt=m&y,Et=m&x,an=m&_;if(A&&(rt=we?A(c,Q,we,Ie):A(c)),rt!==t)return rt;if(!Ko(c))return c;var ln=ei(c);if(ln){if(rt=d3(c),!gt)return dl(c,rt)}else{var vn=Aa(c),$n=vn==Ve||vn==Z;if(Xc(c))return Ly(c,gt);if(vn==ze||vn==ce||$n&&!we){if(rt=Et||$n?{}:Uy(c),!gt)return Et?n3(c,nn(rt,c)):t3(c,fn(rt,c))}else{if(!Gr[vn])return we?c:{};rt=p3(c,vn,gt)}}Ie||(Ie=new Ee);var sr=Ie.get(c);if(sr)return sr;Ie.set(c,rt),v2(c)?c.forEach(function(Mr){rt.add(l(Mr,m,A,Mr,c,Ie))}):g2(c)&&c.forEach(function(Mr,Si){rt.set(Si,l(Mr,m,A,Si,c,Ie))});var Pr=an?Et?dm:hm:Et?gl:Js,ci=ln?t:Pr(c);return Mo(ci||c,function(Mr,Si){ci&&(Si=Mr,Mr=c[Si]),dt(rt,Si,l(Mr,m,A,Si,c,Ie))}),rt}function h(c){var m=Js(c);return function(A){return v(A,c,m)}}function v(c,m,A){var Q=A.length;if(c==null)return!Q;for(c=xi(c);Q--;){var we=A[Q],Ie=m[we],rt=c[we];if(rt===t&&!(we in c)||!Ie(rt))return!1}return!0}function w(c,m,A){if(typeof c!="function")throw new Vi(o);return bd(function(){c.apply(t,A)},m)}function C(c,m,A,Q){var we=-1,Ie=ll,rt=!0,gt=c.length,Et=[],an=m.length;if(!gt)return Et;A&&(m=bi(m,Ur(A))),Q?(Ie=ul,rt=!1):m.length>=i&&(Ie=cl,rt=!1,m=new q(m));e:for(;++we<gt;){var ln=c[we],vn=A==null?ln:A(ln);if(ln=Q||ln!==0?ln:0,rt&&vn===vn){for(var $n=an;$n--;)if(m[$n]===vn)continue e;Et.push(ln)}else Ie(m,vn,Q)||Et.push(ln)}return Et}var z=My(Xt),J=My(yn,!0);function ne(c,m){var A=!0;return z(c,function(Q,we,Ie){return A=!!m(Q,we,Ie),A}),A}function he(c,m,A){for(var Q=-1,we=c.length;++Q<we;){var Ie=c[Q],rt=m(Ie);if(rt!=null&&(gt===t?rt===rt&&!Rl(rt):A(rt,gt)))var gt=rt,Et=Ie}return Et}function Se(c,m,A,Q){var we=c.length;for(A=li(A),A<0&&(A=-A>we?0:we+A),Q=Q===t||Q>we?we:li(Q),Q<0&&(Q+=we),Q=A>Q?0:_2(Q);A<Q;)c[A++]=m;return c}function Je(c,m){var A=[];return z(c,function(Q,we,Ie){m(Q,we,Ie)&&A.push(Q)}),A}function je(c,m,A,Q,we){var Ie=-1,rt=c.length;for(A||(A=m3),we||(we=[]);++Ie<rt;){var gt=c[Ie];m>0&&A(gt)?m>1?je(gt,m-1,A,Q,we):Es(we,gt):Q||(we[we.length]=gt)}return we}var vt=Ay(),At=Ay(!0);function Xt(c,m){return c&&vt(c,m,Js)}function yn(c,m){return c&&At(c,m,Js)}function bn(c,m){return qs(m,function(A){return Ac(c[A])})}function ur(c,m){m=Pu(m,c);for(var A=0,Q=m.length;c!=null&&A<Q;)c=c[ec(m[A++])];return A&&A==Q?c:t}function Ye(c,m,A){var Q=m(c);return ei(c)?Q:Es(Q,A(c))}function tt(c){return c==null?c===t?Ct:pe:Ca&&Ca in xi(c)?c3(c):L3(c)}function ft(c,m){return c>m}function Bt(c,m){return c!=null&&Xr.call(c,m)}function bt(c,m){return c!=null&&m in xi(c)}function Tt(c,m,A){return c>=Ce(m,A)&&c<ie(m,A)}function ge(c,m,A){for(var Q=A?ul:ll,we=c[0].length,Ie=c.length,rt=Ie,gt=Mt(Ie),Et=1/0,an=[];rt--;){var ln=c[rt];rt&&m&&(ln=bi(ln,Ur(m))),Et=Ce(ln.length,Et),gt[rt]=!A&&(m||we>=120&&ln.length>=120)?new q(rt&&ln):t}ln=c[0];var vn=-1,$n=gt[0];e:for(;++vn<we&&an.length<Et;){var sr=ln[vn],Pr=m?m(sr):sr;if(sr=A||sr!==0?sr:0,!($n?cl($n,Pr):Q(an,Pr,A))){for(rt=Ie;--rt;){var ci=gt[rt];if(!(ci?cl(ci,Pr):Q(c[rt],Pr,A)))continue e}$n&&$n.push(Pr),an.push(sr)}}return an}function Me(c,m,A,Q){return Xt(c,function(we,Ie,rt){m(Q,A(we),Ie,rt)}),Q}function Oe(c,m,A){m=Pu(m,c),c=qy(c,m);var Q=c==null?c:c[ec(iu(m))];return Q==null?t:_i(Q,c,A)}function Be(c){return os(c)&&tt(c)==ce}function Re(c){return os(c)&&tt(c)==cn}function Fe(c){return os(c)&&tt(c)==le}function lt(c,m,A,Q,we){return c===m?!0:c==null||m==null||!os(c)&&!os(m)?c!==c&&m!==m:ut(c,m,A,Q,lt,we)}function ut(c,m,A,Q,we,Ie){var rt=ei(c),gt=ei(m),Et=rt?ye:Aa(c),an=gt?ye:Aa(m);Et=Et==ce?ze:Et,an=an==ce?ze:an;var ln=Et==ze,vn=an==ze,$n=Et==an;if($n&&Xc(c)){if(!Xc(m))return!1;rt=!0,ln=!1}if($n&&!ln)return Ie||(Ie=new Ee),rt||Lh(c)?jy(c,m,A,Q,we,Ie):l3(c,m,Et,A,Q,we,Ie);if(!(A&E)){var sr=ln&&Xr.call(c,"__wrapped__"),Pr=vn&&Xr.call(m,"__wrapped__");if(sr||Pr){var ci=sr?c.value():c,Mr=Pr?m.value():m;return Ie||(Ie=new Ee),we(ci,Mr,A,Q,Ie)}}return $n?(Ie||(Ie=new Ee),u3(c,m,A,Q,we,Ie)):!1}function pt(c){return os(c)&&Aa(c)==de}function Lt(c,m,A,Q){var we=A.length,Ie=we,rt=!Q;if(c==null)return!Ie;for(c=xi(c);we--;){var gt=A[we];if(rt&&gt[2]?gt[1]!==c[gt[0]]:!(gt[0]in c))return!1}for(;++we<Ie;){gt=A[we];var Et=gt[0],an=c[Et],ln=gt[1];if(rt&&gt[2]){if(an===t&&!(Et in c))return!1}else{var vn=new Ee;if(Q)var $n=Q(an,ln,Et,c,m,vn);if(!($n===t?lt(ln,an,E|T,Q,vn):$n))return!1}}return!0}function St(c){if(!Ko(c)||y3(c))return!1;var m=Ac(c)?Oi:jr;return m.test(Rf(c))}function on(c){return os(c)&&tt(c)==He}function zn(c){return os(c)&&Aa(c)==Xe}function Gn(c){return os(c)&&ng(c.length)&&!!Sr[tt(c)]}function Qn(c){return typeof c=="function"?c:c==null?ml:typeof c=="object"?ei(c)?Lu(c[0],c[1]):vs(c):k2(c)}function mi(c){if(!_d(c))return G(c);var m=[];for(var A in xi(c))Xr.call(c,A)&&A!="constructor"&&m.push(A);return m}function Ai(c){if(!Ko(c))return x3(c);var m=_d(c),A=[];for(var Q in c)Q=="constructor"&&(m||!Xr.call(c,Q))||A.push(Q);return A}function Qr(c,m){return c<m}function Ii(c,m){var A=-1,Q=pl(c)?Mt(c.length):[];return z(c,function(we,Ie,rt){Q[++A]=m(we,Ie,rt)}),Q}function vs(c){var m=gm(c);return m.length==1&&m[0][2]?Hy(m[0][0],m[0][1]):function(A){return A===c||Lt(A,c,m)}}function Lu(c,m){return vm(c)&&Vy(m)?Hy(ec(c),m):function(A){var Q=Pm(A,c);return Q===t&&Q===m?Mm(A,c):lt(m,Q,E|T)}}function fa(c,m,A,Q,we){c!==m&&vt(m,function(Ie,rt){if(we||(we=new Ee),Ko(Ie))Tf(c,m,rt,A,fa,Q,we);else{var gt=Q?Q(_m(c,rt),Ie,rt+"",c,m,we):t;gt===t&&(gt=Ie),$t(c,rt,gt)}},gl)}function Tf(c,m,A,Q,we,Ie,rt){var gt=_m(c,A),Et=_m(m,A),an=rt.get(Et);if(an){$t(c,A,an);return}var ln=Ie?Ie(gt,Et,A+"",c,m,rt):t,vn=ln===t;if(vn){var $n=ei(Et),sr=!$n&&Xc(Et),Pr=!$n&&!sr&&Lh(Et);ln=Et,$n||sr||Pr?ei(gt)?ln=gt:ys(gt)?ln=dl(gt):sr?(vn=!1,ln=Ly(Et,!0)):Pr?(vn=!1,ln=Sy(Et,!0)):ln=[]:wd(Et)||Ff(Et)?(ln=gt,Ff(gt)?ln=b2(gt):(!Ko(gt)||Ac(gt))&&(ln=Uy(Et))):vn=!1}vn&&(rt.set(Et,ln),we(ln,Et,Q,Ie,rt),rt.delete(Et)),$t(c,A,ln)}function Wa(c,m){var A=c.length;if(A)return m+=m<0?A:0,Mc(m,A)?c[m]:t}function Ju(c,m,A){m.length?m=bi(m,function(Ie){return ei(Ie)?function(rt){return ur(rt,Ie.length===1?Ie[0]:Ie)}:Ie}):m=[ml];var Q=-1;m=bi(m,Ur(Cr()));var we=Ii(c,function(Ie,rt,gt){var Et=bi(m,function(an){return an(Ie)});return{criteria:Et,index:++Q,value:Ie}});return di(we,function(Ie,rt){return e3(Ie,rt,A)})}function ha(c,m){return Zo(c,m,function(A,Q){return Mm(c,Q)})}function Zo(c,m,A){for(var Q=-1,we=m.length,Ie={};++Q<we;){var rt=m[Q],gt=ur(c,rt);A(gt,rt)&&Lc(Ie,Pu(rt,c),gt)}return Ie}function so(c){return function(m){return ur(m,c)}}function gh(c,m,A,Q){var we=Q?Nn:un,Ie=-1,rt=m.length,gt=c;for(c===m&&(m=dl(m)),A&&(gt=bi(c,Ur(A)));++Ie<rt;)for(var Et=0,an=m[Ie],ln=A?A(an):an;(Et=we(gt,ln,Et,Q))>-1;)gt!==c&&qo.call(gt,Et,1),qo.call(c,Et,1);return c}function Nf(c,m){for(var A=c?m.length:0,Q=A-1;A--;){var we=m[A];if(A==Q||we!==Ie){var Ie=we;Mc(we)?qo.call(c,we,1):Sc(c,we)}}return c}function Df(c,m){return c+No(zt()*(m-c+1))}function Bf(c,m,A,Q){for(var we=-1,Ie=ie(To((m-c)/(A||1)),0),rt=Mt(Ie);Ie--;)rt[Q?Ie:++we]=c,c+=A;return rt}function mh(c,m){var A="";if(!c||m<1||m>re)return A;do m%2&&(A+=c),m=No(m/2),m&&(c+=c);while(m);return A}function ai(c,m){return bm(Gy(c,m,ml),c+"")}function vh(c){return Dt(Sh(c))}function Fp(c,m){var A=Sh(c);return Yp(A,Xn(m,0,A.length))}function Lc(c,m,A,Q){if(!Ko(c))return c;m=Pu(m,c);for(var we=-1,Ie=m.length,rt=Ie-1,gt=c;gt!=null&&++we<Ie;){var Et=ec(m[we]),an=A;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return c;if(we!=rt){var ln=gt[Et];an=Q?Q(ln,Et,gt):t,an===t&&(an=Ko(ln)?ln:Mc(m[we+1])?[]:{})}dt(gt,Et,an),gt=gt[Et]}return c}var Su=Hi?function(c,m){return Hi.set(c,m),c}:ml,jp=Ea?function(c,m){return Ea(c,"toString",{configurable:!0,enumerable:!1,value:km(m),writable:!0})}:ml;function zp(c){return Yp(Sh(c))}function hl(c,m,A){var Q=-1,we=c.length;m<0&&(m=-m>we?0:we+m),A=A>we?we:A,A<0&&(A+=we),we=m>A?0:A-m>>>0,m>>>=0;for(var Ie=Mt(we);++Q<we;)Ie[Q]=c[Q+m];return Ie}function $p(c,m){var A;return z(c,function(Q,we,Ie){return A=m(Q,we,Ie),!A}),!!A}function Cu(c,m,A){var Q=0,we=c==null?Q:c.length;if(typeof m=="number"&&m===m&&we<=ee){for(;Q<we;){var Ie=Q+we>>>1,rt=c[Ie];rt!==null&&!Rl(rt)&&(A?rt<=m:rt<m)?Q=Ie+1:we=Ie}return we}return md(c,m,ml,A)}function md(c,m,A,Q){var we=0,Ie=c==null?0:c.length;if(Ie===0)return 0;m=A(m);for(var rt=m!==m,gt=m===null,Et=Rl(m),an=m===t;we<Ie;){var ln=No((we+Ie)/2),vn=A(c[ln]),$n=vn!==t,sr=vn===null,Pr=vn===vn,ci=Rl(vn);if(rt)var Mr=Q||Pr;else an?Mr=Pr&&(Q||$n):gt?Mr=Pr&&$n&&(Q||!sr):Et?Mr=Pr&&$n&&!sr&&(Q||!ci):sr||ci?Mr=!1:Mr=Q?vn<=m:vn<m;Mr?we=ln+1:Ie=ln}return Ce(Ie,N)}function vd(c,m){for(var A=-1,Q=c.length,we=0,Ie=[];++A<Q;){var rt=c[A],gt=m?m(rt):rt;if(!A||!Mu(gt,Et)){var Et=gt;Ie[we++]=rt===0?0:rt}}return Ie}function Up(c){return typeof c=="number"?c:Rl(c)?xe:+c}function Ma(c){if(typeof c=="string")return c;if(ei(c))return bi(c,Ma)+"";if(Rl(c))return Wo?Wo.call(c):"";var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function Xu(c,m,A){var Q=-1,we=ll,Ie=c.length,rt=!0,gt=[],Et=gt;if(A)rt=!1,we=ul;else if(Ie>=i){var an=m?null:s3(c);if(an)return ns(an);rt=!1,we=cl,Et=new q}else Et=m?[]:gt;e:for(;++Q<Ie;){var ln=c[Q],vn=m?m(ln):ln;if(ln=A||ln!==0?ln:0,rt&&vn===vn){for(var $n=Et.length;$n--;)if(Et[$n]===vn)continue e;m&&Et.push(vn),gt.push(ln)}else we(Et,vn,A)||(Et!==gt&&Et.push(vn),gt.push(ln))}return gt}function Sc(c,m){return m=Pu(m,c),c=qy(c,m),c==null||delete c[ec(iu(m))]}function yh(c,m,A,Q){return Lc(c,m,A(ur(c,m)),Q)}function Cc(c,m,A,Q){for(var we=c.length,Ie=Q?we:-1;(Q?Ie--:++Ie<we)&&m(c[Ie],Ie,c););return A?hl(c,Q?0:Ie,Q?Ie+1:we):hl(c,Q?Ie+1:0,Q?we:Ie)}function tu(c,m){var A=c;return A instanceof Vr&&(A=A.value()),ba(m,function(Q,we){return we.func.apply(we.thisArg,Es([Q],we.args))},A)}function nu(c,m,A){var Q=c.length;if(Q<2)return Q?Xu(c[0]):[];for(var we=-1,Ie=Mt(Q);++we<Q;)for(var rt=c[we],gt=-1;++gt<Q;)gt!=we&&(Ie[we]=C(Ie[we]||rt,c[gt],m,A));return Xu(je(Ie,1),m,A)}function Eu(c,m,A){for(var Q=-1,we=c.length,Ie=m.length,rt={};++Q<we;){var gt=Q<Ie?m[Q]:t;A(rt,c[Q],gt)}return rt}function Jc(c){return ys(c)?c:[]}function Of(c){return typeof c=="function"?c:ml}function Pu(c,m){return ei(c)?c:vm(c,m)?[c]:Yy(Wi(c))}var lm=ai;function ru(c,m,A){var Q=c.length;return A=A===t?Q:A,!m&&A>=Q?c:hl(c,m,A)}var _h=Zs||function(c){return to.clearTimeout(c)};function Ly(c,m){if(m)return c.slice();var A=c.length,Q=wu?wu(A):new c.constructor(A);return c.copy(Q),Q}function um(c){var m=new c.constructor(c.byteLength);return new Is(m).set(new Is(c)),m}function Jx(c,m){var A=m?um(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.byteLength)}function Xx(c){var m=new c.constructor(c.source,Hr.exec(c));return m.lastIndex=c.lastIndex,m}function Qx(c){return gi?xi(gi.call(c)):{}}function Sy(c,m){var A=m?um(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.length)}function Cy(c,m){if(c!==m){var A=c!==t,Q=c===null,we=c===c,Ie=Rl(c),rt=m!==t,gt=m===null,Et=m===m,an=Rl(m);if(!gt&&!an&&!Ie&&c>m||Ie&&rt&&Et&&!gt&&!an||Q&&rt&&Et||!A&&Et||!we)return 1;if(!Q&&!Ie&&!an&&c<m||an&&A&&we&&!Q&&!Ie||gt&&A&&we||!rt&&we||!Et)return-1}return 0}function e3(c,m,A){for(var Q=-1,we=c.criteria,Ie=m.criteria,rt=we.length,gt=A.length;++Q<rt;){var Et=Cy(we[Q],Ie[Q]);if(Et){if(Q>=gt)return Et;var an=A[Q];return Et*(an=="desc"?-1:1)}}return c.index-m.index}function Ey(c,m,A,Q){for(var we=-1,Ie=c.length,rt=A.length,gt=-1,Et=m.length,an=ie(Ie-rt,0),ln=Mt(Et+an),vn=!Q;++gt<Et;)ln[gt]=m[gt];for(;++we<rt;)(vn||we<Ie)&&(ln[A[we]]=c[we]);for(;an--;)ln[gt++]=c[we++];return ln}function Py(c,m,A,Q){for(var we=-1,Ie=c.length,rt=-1,gt=A.length,Et=-1,an=m.length,ln=ie(Ie-gt,0),vn=Mt(ln+an),$n=!Q;++we<ln;)vn[we]=c[we];for(var sr=we;++Et<an;)vn[sr+Et]=m[Et];for(;++rt<gt;)($n||we<Ie)&&(vn[sr+A[rt]]=c[we++]);return vn}function dl(c,m){var A=-1,Q=c.length;for(m||(m=Mt(Q));++A<Q;)m[A]=c[A];return m}function Qu(c,m,A,Q){var we=!A;A||(A={});for(var Ie=-1,rt=m.length;++Ie<rt;){var gt=m[Ie],Et=Q?Q(A[gt],c[gt],gt,A,c):t;Et===t&&(Et=c[gt]),we?kn(A,gt,Et):dt(A,gt,Et)}return A}function t3(c,m){return Qu(c,mm(c),m)}function n3(c,m){return Qu(c,zy(c),m)}function Vp(c,m){return function(A,Q){var we=ei(A)?Zu:en,Ie=m?m():{};return we(A,c,Cr(Q,2),Ie)}}function bh(c){return ai(function(m,A){var Q=-1,we=A.length,Ie=we>1?A[we-1]:t,rt=we>2?A[2]:t;for(Ie=c.length>3&&typeof Ie=="function"?(we--,Ie):t,rt&&Za(A[0],A[1],rt)&&(Ie=we<3?t:Ie,we=1),m=xi(m);++Q<we;){var gt=A[Q];gt&&c(m,gt,Q,Ie)}return m})}function My(c,m){return function(A,Q){if(A==null)return A;if(!pl(A))return c(A,Q);for(var we=A.length,Ie=m?we:-1,rt=xi(A);(m?Ie--:++Ie<we)&&Q(rt[Ie],Ie,rt)!==!1;);return A}}function Ay(c){return function(m,A,Q){for(var we=-1,Ie=xi(m),rt=Q(m),gt=rt.length;gt--;){var Et=rt[c?gt:++we];if(A(Ie[Et],Et,Ie)===!1)break}return m}}function r3(c,m,A){var Q=m&D,we=yd(c);function Ie(){var rt=this&&this!==to&&this instanceof Ie?we:c;return rt.apply(Q?A:this,arguments)}return Ie}function ky(c){return function(m){m=Wi(m);var A=ra(m)?Vo(m):t,Q=A?A[0]:m.charAt(0),we=A?ru(A,1).join(""):m.slice(1);return Q[c]()+we}}function wh(c){return function(m){return ba(M2(P2(m).replace(Tr,"")),c,"")}}function yd(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var A=ms(c.prototype),Q=c.apply(A,m);return Ko(Q)?Q:A}}function i3(c,m,A){var Q=yd(c);function we(){for(var Ie=arguments.length,rt=Mt(Ie),gt=Ie,Et=xh(we);gt--;)rt[gt]=arguments[gt];var an=Ie<3&&rt[0]!==Et&&rt[Ie-1]!==Et?[]:ts(rt,Et);if(Ie-=an.length,Ie<A)return Oy(c,m,Hp,we.placeholder,t,rt,an,t,t,A-Ie);var ln=this&&this!==to&&this instanceof we?Q:c;return _i(ln,this,rt)}return we}function Ty(c){return function(m,A,Q){var we=xi(m);if(!pl(m)){var Ie=Cr(A,3);m=Js(m),A=function(gt){return Ie(we[gt],gt,we)}}var rt=c(m,A,Q);return rt>-1?we[Ie?m[rt]:rt]:t}}function Ny(c){return Pc(function(m){var A=m.length,Q=A,we=Bo.prototype.thru;for(c&&m.reverse();Q--;){var Ie=m[Q];if(typeof Ie!="function")throw new Vi(o);if(we&&!rt&&Zp(Ie)=="wrapper")var rt=new Bo([],!0)}for(Q=rt?Q:A;++Q<A;){Ie=m[Q];var gt=Zp(Ie),Et=gt=="wrapper"?pm(Ie):t;Et&&ym(Et[0])&&Et[1]==(Le|K|ae|W)&&!Et[4].length&&Et[9]==1?rt=rt[Zp(Et[0])].apply(rt,Et[3]):rt=Ie.length==1&&ym(Ie)?rt[gt]():rt.thru(Ie)}return function(){var an=arguments,ln=an[0];if(rt&&an.length==1&&ei(ln))return rt.plant(ln).value();for(var vn=0,$n=A?m[vn].apply(this,an):ln;++vn<A;)$n=m[vn].call(this,$n);return $n}})}function Hp(c,m,A,Q,we,Ie,rt,gt,Et,an){var ln=m&Le,vn=m&D,$n=m&O,sr=m&(K|X),Pr=m&V,ci=$n?t:yd(c);function Mr(){for(var Si=arguments.length,ki=Mt(Si),Fl=Si;Fl--;)ki[Fl]=arguments[Fl];if(sr)var Ka=xh(Mr),jl=na(ki,Ka);if(Q&&(ki=Ey(ki,Q,we,sr)),Ie&&(ki=Py(ki,Ie,rt,sr)),Si-=jl,sr&&Si<an){var _s=ts(ki,Ka);return Oy(c,m,Hp,Mr.placeholder,A,ki,_s,gt,Et,an-Si)}var Au=vn?A:this,Tc=$n?Au[c]:c;return Si=ki.length,gt?ki=S3(ki,gt):Pr&&Si>1&&ki.reverse(),ln&&Et<Si&&(ki.length=Et),this&&this!==to&&this instanceof Mr&&(Tc=ci||yd(Tc)),Tc.apply(Au,ki)}return Mr}function Dy(c,m){return function(A,Q){return Me(A,c,m(Q),{})}}function Gp(c,m){return function(A,Q){var we;if(A===t&&Q===t)return m;if(A!==t&&(we=A),Q!==t){if(we===t)return Q;typeof A=="string"||typeof Q=="string"?(A=Ma(A),Q=Ma(Q)):(A=Up(A),Q=Up(Q)),we=c(A,Q)}return we}}function cm(c){return Pc(function(m){return m=bi(m,Ur(Cr())),ai(function(A){var Q=this;return c(m,function(we){return _i(we,Q,A)})})})}function qp(c,m){m=m===t?" ":Ma(m);var A=m.length;if(A<2)return A?mh(m,c):m;var Q=mh(m,To(c/Uo(m)));return ra(m)?ru(Vo(Q),0,c).join(""):Q.slice(0,c)}function o3(c,m,A,Q){var we=m&D,Ie=yd(c);function rt(){for(var gt=-1,Et=arguments.length,an=-1,ln=Q.length,vn=Mt(ln+Et),$n=this&&this!==to&&this instanceof rt?Ie:c;++an<ln;)vn[an]=Q[an];for(;Et--;)vn[an++]=arguments[++gt];return _i($n,we?A:this,vn)}return rt}function By(c){return function(m,A,Q){return Q&&typeof Q!="number"&&Za(m,A,Q)&&(A=Q=t),m=kc(m),A===t?(A=m,m=0):A=kc(A),Q=Q===t?m<A?1:-1:kc(Q),Bf(m,A,Q,c)}}function Wp(c){return function(m,A){return typeof m=="string"&&typeof A=="string"||(m=ou(m),A=ou(A)),c(m,A)}}function Oy(c,m,A,Q,we,Ie,rt,gt,Et,an){var ln=m&K,vn=ln?rt:t,$n=ln?t:rt,sr=ln?Ie:t,Pr=ln?t:Ie;m|=ln?ae:ue,m&=~(ln?ue:ae),m&$||(m&=-4);var ci=[c,m,we,sr,vn,Pr,$n,gt,Et,an],Mr=A.apply(t,ci);return ym(c)&&Wy(Mr,ci),Mr.placeholder=Q,Zy(Mr,c,m)}function fm(c){var m=Ui[c];return function(A,Q){if(A=ou(A),Q=Q==null?0:Ce(li(Q),292),Q&&p(A)){var we=(Wi(A)+"e").split("e"),Ie=m(we[0]+"e"+(+we[1]+Q));return we=(Wi(Ie)+"e").split("e"),+(we[0]+"e"+(+we[1]-Q))}return m(A)}}var s3=go&&1/ns(new go([,-0]))[1]==te?function(c){return new go(c)}:Dm;function Iy(c){return function(m){var A=Aa(m);return A==de?fl(m):A==Xe?Ku(m):fo(m,c(m))}}function Ec(c,m,A,Q,we,Ie,rt,gt){var Et=m&O;if(!Et&&typeof c!="function")throw new Vi(o);var an=Q?Q.length:0;if(an||(m&=-97,Q=we=t),rt=rt===t?rt:ie(li(rt),0),gt=gt===t?gt:li(gt),an-=we?we.length:0,m&ue){var ln=Q,vn=we;Q=we=t}var $n=Et?t:pm(c),sr=[c,m,A,Q,we,ln,vn,Ie,rt,gt];if($n&&w3(sr,$n),c=sr[0],m=sr[1],A=sr[2],Q=sr[3],we=sr[4],gt=sr[9]=sr[9]===t?Et?0:c.length:ie(sr[9]-an,0),!gt&&m&(K|X)&&(m&=-25),!m||m==D)var Pr=r3(c,m,A);else m==K||m==X?Pr=i3(c,m,gt):(m==ae||m==(D|ae))&&!we.length?Pr=o3(c,m,A,Q):Pr=Hp.apply(t,sr);var ci=$n?Su:Wy;return Zy(ci(Pr,sr),c,m)}function Ry(c,m,A,Q){return c===t||Mu(c,sa[A])&&!Xr.call(Q,A)?m:c}function Fy(c,m,A,Q,we,Ie){return Ko(c)&&Ko(m)&&(Ie.set(m,c),fa(c,m,t,Fy,Ie),Ie.delete(m)),c}function a3(c){return wd(c)?t:c}function jy(c,m,A,Q,we,Ie){var rt=A&E,gt=c.length,Et=m.length;if(gt!=Et&&!(rt&&Et>gt))return!1;var an=Ie.get(c),ln=Ie.get(m);if(an&&ln)return an==m&&ln==c;var vn=-1,$n=!0,sr=A&T?new q:t;for(Ie.set(c,m),Ie.set(m,c);++vn<gt;){var Pr=c[vn],ci=m[vn];if(Q)var Mr=rt?Q(ci,Pr,vn,m,c,Ie):Q(Pr,ci,vn,c,m,Ie);if(Mr!==t){if(Mr)continue;$n=!1;break}if(sr){if(!B(m,function(Si,ki){if(!cl(sr,ki)&&(Pr===Si||we(Pr,Si,A,Q,Ie)))return sr.push(ki)})){$n=!1;break}}else if(!(Pr===ci||we(Pr,ci,A,Q,Ie))){$n=!1;break}}return Ie.delete(c),Ie.delete(m),$n}function l3(c,m,A,Q,we,Ie,rt){switch(A){case pn:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case cn:return!(c.byteLength!=m.byteLength||!Ie(new Is(c),new Is(m)));case k:case le:case ve:return Mu(+c,+m);case Pe:return c.name==m.name&&c.message==m.message;case He:case ot:return c==m+"";case de:var gt=fl;case Xe:var Et=Q&E;if(gt||(gt=ns),c.size!=m.size&&!Et)return!1;var an=rt.get(c);if(an)return an==m;Q|=T,rt.set(c,m);var ln=jy(gt(c),gt(m),Q,we,Ie,rt);return rt.delete(c),ln;case kt:if(gi)return gi.call(c)==gi.call(m)}return!1}function u3(c,m,A,Q,we,Ie){var rt=A&E,gt=hm(c),Et=gt.length,an=hm(m),ln=an.length;if(Et!=ln&&!rt)return!1;for(var vn=Et;vn--;){var $n=gt[vn];if(!(rt?$n in m:Xr.call(m,$n)))return!1}var sr=Ie.get(c),Pr=Ie.get(m);if(sr&&Pr)return sr==m&&Pr==c;var ci=!0;Ie.set(c,m),Ie.set(m,c);for(var Mr=rt;++vn<Et;){$n=gt[vn];var Si=c[$n],ki=m[$n];if(Q)var Fl=rt?Q(ki,Si,$n,m,c,Ie):Q(Si,ki,$n,c,m,Ie);if(!(Fl===t?Si===ki||we(Si,ki,A,Q,Ie):Fl)){ci=!1;break}Mr||(Mr=$n=="constructor")}if(ci&&!Mr){var Ka=c.constructor,jl=m.constructor;Ka!=jl&&"constructor"in c&&"constructor"in m&&!(typeof Ka=="function"&&Ka instanceof Ka&&typeof jl=="function"&&jl instanceof jl)&&(ci=!1)}return Ie.delete(c),Ie.delete(m),ci}function Pc(c){return bm(Gy(c,t,e2),c+"")}function hm(c){return Ye(c,Js,mm)}function dm(c){return Ye(c,gl,zy)}var pm=Hi?function(c){return Hi.get(c)}:Dm;function Zp(c){for(var m=c.name+"",A=gs[m],Q=Xr.call(gs,m)?A.length:0;Q--;){var we=A[Q],Ie=we.func;if(Ie==null||Ie==c)return we.name}return m}function xh(c){var m=Xr.call(Ne,"placeholder")?Ne:c;return m.placeholder}function Cr(){var c=Ne.iteratee||Tm;return c=c===Tm?Qn:c,arguments.length?c(arguments[0],arguments[1]):c}function Kp(c,m){var A=c.__data__;return v3(m)?A[typeof m=="string"?"string":"hash"]:A.map}function gm(c){for(var m=Js(c),A=m.length;A--;){var Q=m[A],we=c[Q];m[A]=[Q,we,Vy(we)]}return m}function If(c,m){var A=ho(c,m);return St(A)?A:t}function c3(c){var m=Xr.call(c,Ca),A=c[Ca];try{c[Ca]=t;var Q=!0}catch{}var we=Li.call(c);return Q&&(m?c[Ca]=A:delete c[Ca]),we}var mm=Ks?function(c){return c==null?[]:(c=xi(c),qs(Ks(c),function(m){return Bi.call(c,m)}))}:Bm,zy=Ks?function(c){for(var m=[];c;)Es(m,mm(c)),c=ua(c);return m}:Bm,Aa=tt;(Dn&&Aa(new Dn(new ArrayBuffer(1)))!=pn||Jn&&Aa(new Jn)!=de||zr&&Aa(zr.resolve())!=Qe||go&&Aa(new go)!=Xe||Yi&&Aa(new Yi)!=Ut)&&(Aa=function(c){var m=tt(c),A=m==ze?c.constructor:t,Q=A?Rf(A):"";if(Q)switch(Q){case wc:return pn;case ca:return de;case Ys:return Qe;case Rs:return Xe;case Af:return Ut}return m});function f3(c,m,A){for(var Q=-1,we=A.length;++Q<we;){var Ie=A[Q],rt=Ie.size;switch(Ie.type){case"drop":c+=rt;break;case"dropRight":m-=rt;break;case"take":m=Ce(m,c+rt);break;case"takeRight":c=ie(c,m-rt);break}}return{start:c,end:m}}function h3(c){var m=c.match(Cn);return m?m[1].split(xr):[]}function $y(c,m,A){m=Pu(m,c);for(var Q=-1,we=m.length,Ie=!1;++Q<we;){var rt=ec(m[Q]);if(!(Ie=c!=null&&A(c,rt)))break;c=c[rt]}return Ie||++Q!=we?Ie:(we=c==null?0:c.length,!!we&&ng(we)&&Mc(rt,we)&&(ei(c)||Ff(c)))}function d3(c){var m=c.length,A=new c.constructor(m);return m&&typeof c[0]=="string"&&Xr.call(c,"index")&&(A.index=c.index,A.input=c.input),A}function Uy(c){return typeof c.constructor=="function"&&!_d(c)?ms(ua(c)):{}}function p3(c,m,A){var Q=c.constructor;switch(m){case cn:return um(c);case k:case le:return new Q(+c);case pn:return Jx(c,A);case et:case it:case nt:case Vt:case Qt:case On:case wn:case Tn:case ar:return Sy(c,A);case de:return new Q;case ve:case ot:return new Q(c);case He:return Xx(c);case Xe:return new Q;case kt:return Qx(c)}}function g3(c,m){var A=m.length;if(!A)return c;var Q=A-1;return m[Q]=(A>1?"& ":"")+m[Q],m=m.join(A>2?", ":" "),c.replace(at,`{
/* [wrapped with `+m+`] */
`)}function m3(c){return ei(c)||Ff(c)||!!(ps&&c&&c[ps])}function Mc(c,m){var A=typeof c;return m=m??re,!!m&&(A=="number"||A!="symbol"&&Ri.test(c))&&c>-1&&c%1==0&&c<m}function Za(c,m,A){if(!Ko(A))return!1;var Q=typeof m;return(Q=="number"?pl(A)&&Mc(m,A.length):Q=="string"&&m in A)?Mu(A[m],c):!1}function vm(c,m){if(ei(c))return!1;var A=typeof c;return A=="number"||A=="symbol"||A=="boolean"||c==null||Rl(c)?!0:Wt.test(c)||!Zn.test(c)||m!=null&&c in xi(m)}function v3(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function ym(c){var m=Zp(c),A=Ne[m];if(typeof A!="function"||!(m in Vr.prototype))return!1;if(c===A)return!0;var Q=pm(A);return!!Q&&c===Q[0]}function y3(c){return!!ko&&ko in c}var _3=aa?Ac:Om;function _d(c){var m=c&&c.constructor,A=typeof m=="function"&&m.prototype||sa;return c===A}function Vy(c){return c===c&&!Ko(c)}function Hy(c,m){return function(A){return A==null?!1:A[c]===m&&(m!==t||c in xi(A))}}function b3(c){var m=eg(c,function(Q){return A.size===d&&A.clear(),Q}),A=m.cache;return m}function w3(c,m){var A=c[1],Q=m[1],we=A|Q,Ie=we<(D|O|Le),rt=Q==Le&&A==K||Q==Le&&A==W&&c[7].length<=m[8]||Q==(Le|W)&&m[7].length<=m[8]&&A==K;if(!(Ie||rt))return c;Q&D&&(c[2]=m[2],we|=A&D?0:$);var gt=m[3];if(gt){var Et=c[3];c[3]=Et?Ey(Et,gt,m[4]):gt,c[4]=Et?ts(c[3],g):m[4]}return gt=m[5],gt&&(Et=c[5],c[5]=Et?Py(Et,gt,m[6]):gt,c[6]=Et?ts(c[5],g):m[6]),gt=m[7],gt&&(c[7]=gt),Q&Le&&(c[8]=c[8]==null?m[8]:Ce(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=we,c}function x3(c){var m=[];if(c!=null)for(var A in xi(c))m.push(A);return m}function L3(c){return Li.call(c)}function Gy(c,m,A){return m=ie(m===t?c.length-1:m,0),function(){for(var Q=arguments,we=-1,Ie=ie(Q.length-m,0),rt=Mt(Ie);++we<Ie;)rt[we]=Q[m+we];we=-1;for(var gt=Mt(m+1);++we<m;)gt[we]=Q[we];return gt[m]=A(rt),_i(c,this,gt)}}function qy(c,m){return m.length<2?c:ur(c,hl(m,0,-1))}function S3(c,m){for(var A=c.length,Q=Ce(m.length,A),we=dl(c);Q--;){var Ie=m[Q];c[Q]=Mc(Ie,A)?we[Ie]:t}return c}function _m(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Wy=Ky(Su),bd=bc||function(c,m){return to.setTimeout(c,m)},bm=Ky(jp);function Zy(c,m,A){var Q=m+"";return bm(c,g3(Q,C3(h3(Q),A)))}function Ky(c){var m=0,A=0;return function(){var Q=st(),we=j-(Q-A);if(A=Q,we>0){if(++m>=I)return arguments[0]}else m=0;return c.apply(t,arguments)}}function Yp(c,m){var A=-1,Q=c.length,we=Q-1;for(m=m===t?Q:m;++A<m;){var Ie=Df(A,we),rt=c[Ie];c[Ie]=c[A],c[A]=rt}return c.length=m,c}var Yy=b3(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(mn,function(A,Q,we,Ie){m.push(we?Ie.replace(Er,"$1"):Q||A)}),m});function ec(c){if(typeof c=="string"||Rl(c))return c;var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function Rf(c){if(c!=null){try{return la.call(c)}catch{}try{return c+""}catch{}}return""}function C3(c,m){return Mo(fe,function(A){var Q="_."+A[0];m&A[1]&&!ll(c,Q)&&c.push(Q)}),c.sort()}function Jy(c){if(c instanceof Vr)return c.clone();var m=new Bo(c.__wrapped__,c.__chain__);return m.__actions__=dl(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function E3(c,m,A){(A?Za(c,m,A):m===t)?m=1:m=ie(li(m),0);var Q=c==null?0:c.length;if(!Q||m<1)return[];for(var we=0,Ie=0,rt=Mt(To(Q/m));we<Q;)rt[Ie++]=hl(c,we,we+=m);return rt}function P3(c){for(var m=-1,A=c==null?0:c.length,Q=0,we=[];++m<A;){var Ie=c[m];Ie&&(we[Q++]=Ie)}return we}function M3(){var c=arguments.length;if(!c)return[];for(var m=Mt(c-1),A=arguments[0],Q=c;Q--;)m[Q-1]=arguments[Q];return Es(ei(A)?dl(A):[A],je(m,1))}var A3=ai(function(c,m){return ys(c)?C(c,je(m,1,ys,!0)):[]}),k3=ai(function(c,m){var A=iu(m);return ys(A)&&(A=t),ys(c)?C(c,je(m,1,ys,!0),Cr(A,2)):[]}),T3=ai(function(c,m){var A=iu(m);return ys(A)&&(A=t),ys(c)?C(c,je(m,1,ys,!0),t,A):[]});function N3(c,m,A){var Q=c==null?0:c.length;return Q?(m=A||m===t?1:li(m),hl(c,m<0?0:m,Q)):[]}function D3(c,m,A){var Q=c==null?0:c.length;return Q?(m=A||m===t?1:li(m),m=Q-m,hl(c,0,m<0?0:m)):[]}function B3(c,m){return c&&c.length?Cc(c,Cr(m,3),!0,!0):[]}function O3(c,m){return c&&c.length?Cc(c,Cr(m,3),!0):[]}function I3(c,m,A,Q){var we=c==null?0:c.length;return we?(A&&typeof A!="number"&&Za(c,m,A)&&(A=0,Q=we),Se(c,m,A,Q)):[]}function Xy(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=A==null?0:li(A);return we<0&&(we=ie(Q+we,0)),jt(c,Cr(m,3),we)}function Qy(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=Q-1;return A!==t&&(we=li(A),we=A<0?ie(Q+we,0):Ce(we,Q-1)),jt(c,Cr(m,3),we,!0)}function e2(c){var m=c==null?0:c.length;return m?je(c,1):[]}function R3(c){var m=c==null?0:c.length;return m?je(c,te):[]}function F3(c,m){var A=c==null?0:c.length;return A?(m=m===t?1:li(m),je(c,m)):[]}function j3(c){for(var m=-1,A=c==null?0:c.length,Q={};++m<A;){var we=c[m];Q[we[0]]=we[1]}return Q}function t2(c){return c&&c.length?c[0]:t}function z3(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=A==null?0:li(A);return we<0&&(we=ie(Q+we,0)),un(c,m,we)}function $3(c){var m=c==null?0:c.length;return m?hl(c,0,-1):[]}var U3=ai(function(c){var m=bi(c,Jc);return m.length&&m[0]===c[0]?ge(m):[]}),V3=ai(function(c){var m=iu(c),A=bi(c,Jc);return m===iu(A)?m=t:A.pop(),A.length&&A[0]===c[0]?ge(A,Cr(m,2)):[]}),H3=ai(function(c){var m=iu(c),A=bi(c,Jc);return m=typeof m=="function"?m:t,m&&A.pop(),A.length&&A[0]===c[0]?ge(A,t,m):[]});function G3(c,m){return c==null?"":S.call(c,m)}function iu(c){var m=c==null?0:c.length;return m?c[m-1]:t}function q3(c,m,A){var Q=c==null?0:c.length;if(!Q)return-1;var we=Q;return A!==t&&(we=li(A),we=we<0?ie(Q+we,0):Ce(we,Q-1)),m===m?wa(c,m,we):jt(c,jn,we,!0)}function W3(c,m){return c&&c.length?Wa(c,li(m)):t}var Z3=ai(n2);function n2(c,m){return c&&c.length&&m&&m.length?gh(c,m):c}function K3(c,m,A){return c&&c.length&&m&&m.length?gh(c,m,Cr(A,2)):c}function Y3(c,m,A){return c&&c.length&&m&&m.length?gh(c,m,t,A):c}var J3=Pc(function(c,m){var A=c==null?0:c.length,Q=Sn(c,m);return Nf(c,bi(m,function(we){return Mc(we,A)?+we:we}).sort(Cy)),Q});function X3(c,m){var A=[];if(!(c&&c.length))return A;var Q=-1,we=[],Ie=c.length;for(m=Cr(m,3);++Q<Ie;){var rt=c[Q];m(rt,Q,c)&&(A.push(rt),we.push(Q))}return Nf(c,we),A}function wm(c){return c==null?c:sn.call(c)}function Q3(c,m,A){var Q=c==null?0:c.length;return Q?(A&&typeof A!="number"&&Za(c,m,A)?(m=0,A=Q):(m=m==null?0:li(m),A=A===t?Q:li(A)),hl(c,m,A)):[]}function eL(c,m){return Cu(c,m)}function tL(c,m,A){return md(c,m,Cr(A,2))}function nL(c,m){var A=c==null?0:c.length;if(A){var Q=Cu(c,m);if(Q<A&&Mu(c[Q],m))return Q}return-1}function rL(c,m){return Cu(c,m,!0)}function iL(c,m,A){return md(c,m,Cr(A,2),!0)}function oL(c,m){var A=c==null?0:c.length;if(A){var Q=Cu(c,m,!0)-1;if(Mu(c[Q],m))return Q}return-1}function sL(c){return c&&c.length?vd(c):[]}function aL(c,m){return c&&c.length?vd(c,Cr(m,2)):[]}function lL(c){var m=c==null?0:c.length;return m?hl(c,1,m):[]}function uL(c,m,A){return c&&c.length?(m=A||m===t?1:li(m),hl(c,0,m<0?0:m)):[]}function cL(c,m,A){var Q=c==null?0:c.length;return Q?(m=A||m===t?1:li(m),m=Q-m,hl(c,m<0?0:m,Q)):[]}function fL(c,m){return c&&c.length?Cc(c,Cr(m,3),!1,!0):[]}function hL(c,m){return c&&c.length?Cc(c,Cr(m,3)):[]}var dL=ai(function(c){return Xu(je(c,1,ys,!0))}),pL=ai(function(c){var m=iu(c);return ys(m)&&(m=t),Xu(je(c,1,ys,!0),Cr(m,2))}),gL=ai(function(c){var m=iu(c);return m=typeof m=="function"?m:t,Xu(je(c,1,ys,!0),t,m)});function mL(c){return c&&c.length?Xu(c):[]}function vL(c,m){return c&&c.length?Xu(c,Cr(m,2)):[]}function yL(c,m){return m=typeof m=="function"?m:t,c&&c.length?Xu(c,t,m):[]}function xm(c){if(!(c&&c.length))return[];var m=0;return c=qs(c,function(A){if(ys(A))return m=ie(A.length,m),!0}),io(m,function(A){return bi(c,vr(A))})}function r2(c,m){if(!(c&&c.length))return[];var A=xm(c);return m==null?A:bi(A,function(Q){return _i(m,t,Q)})}var _L=ai(function(c,m){return ys(c)?C(c,m):[]}),bL=ai(function(c){return nu(qs(c,ys))}),wL=ai(function(c){var m=iu(c);return ys(m)&&(m=t),nu(qs(c,ys),Cr(m,2))}),xL=ai(function(c){var m=iu(c);return m=typeof m=="function"?m:t,nu(qs(c,ys),t,m)}),LL=ai(xm);function SL(c,m){return Eu(c||[],m||[],dt)}function CL(c,m){return Eu(c||[],m||[],Lc)}var EL=ai(function(c){var m=c.length,A=m>1?c[m-1]:t;return A=typeof A=="function"?(c.pop(),A):t,r2(c,A)});function i2(c){var m=Ne(c);return m.__chain__=!0,m}function PL(c,m){return m(c),c}function Jp(c,m){return m(c)}var ML=Pc(function(c){var m=c.length,A=m?c[0]:0,Q=this.__wrapped__,we=function(Ie){return Sn(Ie,c)};return m>1||this.__actions__.length||!(Q instanceof Vr)||!Mc(A)?this.thru(we):(Q=Q.slice(A,+A+(m?1:0)),Q.__actions__.push({func:Jp,args:[we],thisArg:t}),new Bo(Q,this.__chain__).thru(function(Ie){return m&&!Ie.length&&Ie.push(t),Ie}))});function AL(){return i2(this)}function kL(){return new Bo(this.value(),this.__chain__)}function TL(){this.__values__===t&&(this.__values__=y2(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function NL(){return this}function DL(c){for(var m,A=this;A instanceof xu;){var Q=Jy(A);Q.__index__=0,Q.__values__=t,m?we.__wrapped__=Q:m=Q;var we=Q;A=A.__wrapped__}return we.__wrapped__=c,m}function BL(){var c=this.__wrapped__;if(c instanceof Vr){var m=c;return this.__actions__.length&&(m=new Vr(this)),m=m.reverse(),m.__actions__.push({func:Jp,args:[wm],thisArg:t}),new Bo(m,this.__chain__)}return this.thru(wm)}function OL(){return tu(this.__wrapped__,this.__actions__)}var IL=Vp(function(c,m,A){Xr.call(c,A)?++c[A]:kn(c,A,1)});function RL(c,m,A){var Q=ei(c)?Bl:ne;return A&&Za(c,m,A)&&(m=t),Q(c,Cr(m,3))}function FL(c,m){var A=ei(c)?qs:Je;return A(c,Cr(m,3))}var jL=Ty(Xy),zL=Ty(Qy);function $L(c,m){return je(Xp(c,m),1)}function UL(c,m){return je(Xp(c,m),te)}function VL(c,m,A){return A=A===t?1:li(A),je(Xp(c,m),A)}function o2(c,m){var A=ei(c)?Mo:z;return A(c,Cr(m,3))}function s2(c,m){var A=ei(c)?Gs:J;return A(c,Cr(m,3))}var HL=Vp(function(c,m,A){Xr.call(c,A)?c[A].push(m):kn(c,A,[m])});function GL(c,m,A,Q){c=pl(c)?c:Sh(c),A=A&&!Q?li(A):0;var we=c.length;return A<0&&(A=ie(we+A,0)),rg(c)?A<=we&&c.indexOf(m,A)>-1:!!we&&un(c,m,A)>-1}var qL=ai(function(c,m,A){var Q=-1,we=typeof m=="function",Ie=pl(c)?Mt(c.length):[];return z(c,function(rt){Ie[++Q]=we?_i(m,rt,A):Oe(rt,m,A)}),Ie}),WL=Vp(function(c,m,A){kn(c,A,m)});function Xp(c,m){var A=ei(c)?bi:Ii;return A(c,Cr(m,3))}function ZL(c,m,A,Q){return c==null?[]:(ei(m)||(m=m==null?[]:[m]),A=Q?t:A,ei(A)||(A=A==null?[]:[A]),Ju(c,m,A))}var KL=Vp(function(c,m,A){c[A?0:1].push(m)},function(){return[[],[]]});function YL(c,m,A){var Q=ei(c)?ba:ji,we=arguments.length<3;return Q(c,Cr(m,4),A,we,z)}function JL(c,m,A){var Q=ei(c)?ro:ji,we=arguments.length<3;return Q(c,Cr(m,4),A,we,J)}function XL(c,m){var A=ei(c)?qs:Je;return A(c,tg(Cr(m,3)))}function QL(c){var m=ei(c)?Dt:vh;return m(c)}function eS(c,m,A){(A?Za(c,m,A):m===t)?m=1:m=li(m);var Q=ei(c)?wt:Fp;return Q(c,m)}function tS(c){var m=ei(c)?Yt:zp;return m(c)}function nS(c){if(c==null)return 0;if(pl(c))return rg(c)?Uo(c):c.length;var m=Aa(c);return m==de||m==Xe?c.size:mi(c).length}function rS(c,m,A){var Q=ei(c)?B:$p;return A&&Za(c,m,A)&&(m=t),Q(c,Cr(m,3))}var iS=ai(function(c,m){if(c==null)return[];var A=m.length;return A>1&&Za(c,m[0],m[1])?m=[]:A>2&&Za(m[0],m[1],m[2])&&(m=[m[0]]),Ju(c,je(m,1),[])}),Qp=is||function(){return to.Date.now()};function oS(c,m){if(typeof m!="function")throw new Vi(o);return c=li(c),function(){if(--c<1)return m.apply(this,arguments)}}function a2(c,m,A){return m=A?t:m,m=c&&m==null?c.length:m,Ec(c,Le,t,t,t,t,m)}function l2(c,m){var A;if(typeof m!="function")throw new Vi(o);return c=li(c),function(){return--c>0&&(A=m.apply(this,arguments)),c<=1&&(m=t),A}}var Lm=ai(function(c,m,A){var Q=D;if(A.length){var we=ts(A,xh(Lm));Q|=ae}return Ec(c,Q,m,A,we)}),u2=ai(function(c,m,A){var Q=D|O;if(A.length){var we=ts(A,xh(u2));Q|=ae}return Ec(m,Q,c,A,we)});function c2(c,m,A){m=A?t:m;var Q=Ec(c,K,t,t,t,t,t,m);return Q.placeholder=c2.placeholder,Q}function f2(c,m,A){m=A?t:m;var Q=Ec(c,X,t,t,t,t,t,m);return Q.placeholder=f2.placeholder,Q}function h2(c,m,A){var Q,we,Ie,rt,gt,Et,an=0,ln=!1,vn=!1,$n=!0;if(typeof c!="function")throw new Vi(o);m=ou(m)||0,Ko(A)&&(ln=!!A.leading,vn="maxWait"in A,Ie=vn?ie(ou(A.maxWait)||0,m):Ie,$n="trailing"in A?!!A.trailing:$n);function sr(_s){var Au=Q,Tc=we;return Q=we=t,an=_s,rt=c.apply(Tc,Au),rt}function Pr(_s){return an=_s,gt=bd(Si,m),ln?sr(_s):rt}function ci(_s){var Au=_s-Et,Tc=_s-an,T2=m-Au;return vn?Ce(T2,Ie-Tc):T2}function Mr(_s){var Au=_s-Et,Tc=_s-an;return Et===t||Au>=m||Au<0||vn&&Tc>=Ie}function Si(){var _s=Qp();if(Mr(_s))return ki(_s);gt=bd(Si,ci(_s))}function ki(_s){return gt=t,$n&&Q?sr(_s):(Q=we=t,rt)}function Fl(){gt!==t&&_h(gt),an=0,Q=Et=we=gt=t}function Ka(){return gt===t?rt:ki(Qp())}function jl(){var _s=Qp(),Au=Mr(_s);if(Q=arguments,we=this,Et=_s,Au){if(gt===t)return Pr(Et);if(vn)return _h(gt),gt=bd(Si,m),sr(Et)}return gt===t&&(gt=bd(Si,m)),rt}return jl.cancel=Fl,jl.flush=Ka,jl}var sS=ai(function(c,m){return w(c,1,m)}),aS=ai(function(c,m,A){return w(c,ou(m)||0,A)});function lS(c){return Ec(c,V)}function eg(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Vi(o);var A=function(){var Q=arguments,we=m?m.apply(this,Q):Q[0],Ie=A.cache;if(Ie.has(we))return Ie.get(we);var rt=c.apply(this,Q);return A.cache=Ie.set(we,rt)||Ie,rt};return A.cache=new(eg.Cache||Pa),A}eg.Cache=Pa;function tg(c){if(typeof c!="function")throw new Vi(o);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function uS(c){return l2(2,c)}var cS=lm(function(c,m){m=m.length==1&&ei(m[0])?bi(m[0],Ur(Cr())):bi(je(m,1),Ur(Cr()));var A=m.length;return ai(function(Q){for(var we=-1,Ie=Ce(Q.length,A);++we<Ie;)Q[we]=m[we].call(this,Q[we]);return _i(c,this,Q)})}),Sm=ai(function(c,m){var A=ts(m,xh(Sm));return Ec(c,ae,t,m,A)}),d2=ai(function(c,m){var A=ts(m,xh(d2));return Ec(c,ue,t,m,A)}),fS=Pc(function(c,m){return Ec(c,W,t,t,t,m)});function hS(c,m){if(typeof c!="function")throw new Vi(o);return m=m===t?m:li(m),ai(c,m)}function dS(c,m){if(typeof c!="function")throw new Vi(o);return m=m==null?0:ie(li(m),0),ai(function(A){var Q=A[m],we=ru(A,0,m);return Q&&Es(we,Q),_i(c,this,we)})}function pS(c,m,A){var Q=!0,we=!0;if(typeof c!="function")throw new Vi(o);return Ko(A)&&(Q="leading"in A?!!A.leading:Q,we="trailing"in A?!!A.trailing:we),h2(c,m,{leading:Q,maxWait:m,trailing:we})}function gS(c){return a2(c,1)}function mS(c,m){return Sm(Of(m),c)}function vS(){if(!arguments.length)return[];var c=arguments[0];return ei(c)?c:[c]}function yS(c){return l(c,_)}function _S(c,m){return m=typeof m=="function"?m:t,l(c,_,m)}function bS(c){return l(c,y|_)}function wS(c,m){return m=typeof m=="function"?m:t,l(c,y|_,m)}function xS(c,m){return m==null||v(c,m,Js(m))}function Mu(c,m){return c===m||c!==c&&m!==m}var LS=Wp(ft),SS=Wp(function(c,m){return c>=m}),Ff=Be(function(){return arguments}())?Be:function(c){return os(c)&&Xr.call(c,"callee")&&!Bi.call(c,"callee")},ei=Mt.isArray,CS=Xl?Ur(Xl):Re;function pl(c){return c!=null&&ng(c.length)&&!Ac(c)}function ys(c){return os(c)&&pl(c)}function ES(c){return c===!0||c===!1||os(c)&&tt(c)==k}var Xc=a||Om,PS=ta?Ur(ta):Fe;function MS(c){return os(c)&&c.nodeType===1&&!wd(c)}function AS(c){if(c==null)return!0;if(pl(c)&&(ei(c)||typeof c=="string"||typeof c.splice=="function"||Xc(c)||Lh(c)||Ff(c)))return!c.length;var m=Aa(c);if(m==de||m==Xe)return!c.size;if(_d(c))return!mi(c).length;for(var A in c)if(Xr.call(c,A))return!1;return!0}function kS(c,m){return lt(c,m)}function TS(c,m,A){A=typeof A=="function"?A:t;var Q=A?A(c,m):t;return Q===t?lt(c,m,t,A):!!Q}function Cm(c){if(!os(c))return!1;var m=tt(c);return m==Pe||m==ke||typeof c.message=="string"&&typeof c.name=="string"&&!wd(c)}function NS(c){return typeof c=="number"&&p(c)}function Ac(c){if(!Ko(c))return!1;var m=tt(c);return m==Ve||m==Z||m==se||m==Ke}function p2(c){return typeof c=="number"&&c==li(c)}function ng(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=re}function Ko(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function os(c){return c!=null&&typeof c=="object"}var g2=Tl?Ur(Tl):pt;function DS(c,m){return c===m||Lt(c,m,gm(m))}function BS(c,m,A){return A=typeof A=="function"?A:t,Lt(c,m,gm(m),A)}function OS(c){return m2(c)&&c!=+c}function IS(c){if(_3(c))throw new Kn(s);return St(c)}function RS(c){return c===null}function FS(c){return c==null}function m2(c){return typeof c=="number"||os(c)&&tt(c)==ve}function wd(c){if(!os(c)||tt(c)!=ze)return!1;var m=ua(c);if(m===null)return!0;var A=Xr.call(m,"constructor")&&m.constructor;return typeof A=="function"&&A instanceof A&&la.call(A)==Mi}var Em=Nl?Ur(Nl):on;function jS(c){return p2(c)&&c>=-9007199254740991&&c<=re}var v2=Os?Ur(Os):zn;function rg(c){return typeof c=="string"||!ei(c)&&os(c)&&tt(c)==ot}function Rl(c){return typeof c=="symbol"||os(c)&&tt(c)==kt}var Lh=Dl?Ur(Dl):Gn;function zS(c){return c===t}function $S(c){return os(c)&&Aa(c)==Ut}function US(c){return os(c)&&tt(c)==Gt}var VS=Wp(Qr),HS=Wp(function(c,m){return c<=m});function y2(c){if(!c)return[];if(pl(c))return rg(c)?Vo(c):dl(c);if(dr&&c[dr])return hs(c[dr]());var m=Aa(c),A=m==de?fl:m==Xe?ns:Sh;return A(c)}function kc(c){if(!c)return c===0?c:0;if(c=ou(c),c===te||c===-1/0){var m=c<0?-1:1;return m*me}return c===c?c:0}function li(c){var m=kc(c),A=m%1;return m===m?A?m-A:m:0}function _2(c){return c?Xn(li(c),0,We):0}function ou(c){if(typeof c=="number")return c;if(Rl(c))return xe;if(Ko(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=Ko(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Ps(c);var A=Br.test(c);return A||rn.test(c)?kl(c.slice(2),A?2:8):ir.test(c)?xe:+c}function b2(c){return Qu(c,gl(c))}function GS(c){return c?Xn(li(c),-9007199254740991,re):c===0?c:0}function Wi(c){return c==null?"":Ma(c)}var qS=bh(function(c,m){if(_d(m)||pl(m)){Qu(m,Js(m),c);return}for(var A in m)Xr.call(m,A)&&dt(c,A,m[A])}),w2=bh(function(c,m){Qu(m,gl(m),c)}),ig=bh(function(c,m,A,Q){Qu(m,gl(m),c,Q)}),WS=bh(function(c,m,A,Q){Qu(m,Js(m),c,Q)}),ZS=Pc(Sn);function KS(c,m){var A=ms(c);return m==null?A:fn(A,m)}var YS=ai(function(c,m){c=xi(c);var A=-1,Q=m.length,we=Q>2?m[2]:t;for(we&&Za(m[0],m[1],we)&&(Q=1);++A<Q;)for(var Ie=m[A],rt=gl(Ie),gt=-1,Et=rt.length;++gt<Et;){var an=rt[gt],ln=c[an];(ln===t||Mu(ln,sa[an])&&!Xr.call(c,an))&&(c[an]=Ie[an])}return c}),JS=ai(function(c){return c.push(t,Fy),_i(x2,t,c)});function XS(c,m){return xt(c,Cr(m,3),Xt)}function QS(c,m){return xt(c,Cr(m,3),yn)}function eC(c,m){return c==null?c:vt(c,Cr(m,3),gl)}function tC(c,m){return c==null?c:At(c,Cr(m,3),gl)}function nC(c,m){return c&&Xt(c,Cr(m,3))}function rC(c,m){return c&&yn(c,Cr(m,3))}function iC(c){return c==null?[]:bn(c,Js(c))}function oC(c){return c==null?[]:bn(c,gl(c))}function Pm(c,m,A){var Q=c==null?t:ur(c,m);return Q===t?A:Q}function sC(c,m){return c!=null&&$y(c,m,Bt)}function Mm(c,m){return c!=null&&$y(c,m,bt)}var aC=Dy(function(c,m,A){m!=null&&typeof m.toString!="function"&&(m=Li.call(m)),c[m]=A},km(ml)),lC=Dy(function(c,m,A){m!=null&&typeof m.toString!="function"&&(m=Li.call(m)),Xr.call(c,m)?c[m].push(A):c[m]=[A]},Cr),uC=ai(Oe);function Js(c){return pl(c)?Nt(c):mi(c)}function gl(c){return pl(c)?Nt(c,!0):Ai(c)}function cC(c,m){var A={};return m=Cr(m,3),Xt(c,function(Q,we,Ie){kn(A,m(Q,we,Ie),Q)}),A}function fC(c,m){var A={};return m=Cr(m,3),Xt(c,function(Q,we,Ie){kn(A,we,m(Q,we,Ie))}),A}var hC=bh(function(c,m,A){fa(c,m,A)}),x2=bh(function(c,m,A,Q){fa(c,m,A,Q)}),dC=Pc(function(c,m){var A={};if(c==null)return A;var Q=!1;m=bi(m,function(Ie){return Ie=Pu(Ie,c),Q||(Q=Ie.length>1),Ie}),Qu(c,dm(c),A),Q&&(A=l(A,y|x|_,a3));for(var we=m.length;we--;)Sc(A,m[we]);return A});function pC(c,m){return L2(c,tg(Cr(m)))}var gC=Pc(function(c,m){return c==null?{}:ha(c,m)});function L2(c,m){if(c==null)return{};var A=bi(dm(c),function(Q){return[Q]});return m=Cr(m),Zo(c,A,function(Q,we){return m(Q,we[0])})}function mC(c,m,A){m=Pu(m,c);var Q=-1,we=m.length;for(we||(we=1,c=t);++Q<we;){var Ie=c==null?t:c[ec(m[Q])];Ie===t&&(Q=we,Ie=A),c=Ac(Ie)?Ie.call(c):Ie}return c}function vC(c,m,A){return c==null?c:Lc(c,m,A)}function yC(c,m,A,Q){return Q=typeof Q=="function"?Q:t,c==null?c:Lc(c,m,A,Q)}var S2=Iy(Js),C2=Iy(gl);function _C(c,m,A){var Q=ei(c),we=Q||Xc(c)||Lh(c);if(m=Cr(m,4),A==null){var Ie=c&&c.constructor;we?A=Q?new Ie:[]:Ko(c)?A=Ac(Ie)?ms(ua(c)):{}:A={}}return(we?Mo:Xt)(c,function(rt,gt,Et){return m(A,rt,gt,Et)}),A}function bC(c,m){return c==null?!0:Sc(c,m)}function wC(c,m,A){return c==null?c:yh(c,m,Of(A))}function xC(c,m,A,Q){return Q=typeof Q=="function"?Q:t,c==null?c:yh(c,m,Of(A),Q)}function Sh(c){return c==null?[]:zo(c,Js(c))}function LC(c){return c==null?[]:zo(c,gl(c))}function SC(c,m,A){return A===t&&(A=m,m=t),A!==t&&(A=ou(A),A=A===A?A:0),m!==t&&(m=ou(m),m=m===m?m:0),Xn(ou(c),m,A)}function CC(c,m,A){return m=kc(m),A===t?(A=m,m=0):A=kc(A),c=ou(c),Tt(c,m,A)}function EC(c,m,A){if(A&&typeof A!="boolean"&&Za(c,m,A)&&(m=A=t),A===t&&(typeof m=="boolean"?(A=m,m=t):typeof c=="boolean"&&(A=c,c=t)),c===t&&m===t?(c=0,m=1):(c=kc(c),m===t?(m=c,c=0):m=kc(m)),c>m){var Q=c;c=m,m=Q}if(A||c%1||m%1){var we=zt();return Ce(c+we*(m-c+sl("1e-"+((we+"").length-1))),m)}return Df(c,m)}var PC=wh(function(c,m,A){return m=m.toLowerCase(),c+(A?E2(m):m)});function E2(c){return Am(Wi(c).toLowerCase())}function P2(c){return c=Wi(c),c&&c.replace(yi,bu).replace(jo,"")}function MC(c,m,A){c=Wi(c),m=Ma(m);var Q=c.length;A=A===t?Q:Xn(li(A),0,Q);var we=A;return A-=m.length,A>=0&&c.slice(A,we)==m}function AC(c){return c=Wi(c),c&&Ge.test(c)?c.replace(yr,Ha):c}function kC(c){return c=Wi(c),c&&Kt.test(c)?c.replace(It,"\\$&"):c}var TC=wh(function(c,m,A){return c+(A?"-":"")+m.toLowerCase()}),NC=wh(function(c,m,A){return c+(A?" ":"")+m.toLowerCase()}),DC=ky("toLowerCase");function BC(c,m,A){c=Wi(c),m=li(m);var Q=m?Uo(c):0;if(!m||Q>=m)return c;var we=(m-Q)/2;return qp(No(we),A)+c+qp(To(we),A)}function OC(c,m,A){c=Wi(c),m=li(m);var Q=m?Uo(c):0;return m&&Q<m?c+qp(m-Q,A):c}function IC(c,m,A){c=Wi(c),m=li(m);var Q=m?Uo(c):0;return m&&Q<m?qp(m-Q,A)+c:c}function RC(c,m,A){return A||m==null?m=0:m&&(m=+m),Pt(Wi(c).replace(Ln,""),m||0)}function FC(c,m,A){return(A?Za(c,m,A):m===t)?m=1:m=li(m),mh(Wi(c),m)}function jC(){var c=arguments,m=Wi(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var zC=wh(function(c,m,A){return c+(A?"_":"")+m.toLowerCase()});function $C(c,m,A){return A&&typeof A!="number"&&Za(c,m,A)&&(m=A=t),A=A===t?We:A>>>0,A?(c=Wi(c),c&&(typeof m=="string"||m!=null&&!Em(m))&&(m=Ma(m),!m&&ra(c))?ru(Vo(c),0,A):c.split(m,A)):[]}var UC=wh(function(c,m,A){return c+(A?" ":"")+Am(m)});function VC(c,m,A){return c=Wi(c),A=A==null?0:Xn(li(A),0,c.length),m=Ma(m),c.slice(A,A+m.length)==m}function HC(c,m,A){var Q=Ne.templateSettings;A&&Za(c,m,A)&&(m=t),c=Wi(c),m=ig({},m,Q,Ry);var we=ig({},m.imports,Q.imports,Ry),Ie=Js(we),rt=zo(we,Ie),gt,Et,an=0,ln=m.interpolate||pi,vn="__p += '",$n=Ol((m.escape||pi).source+"|"+ln.source+"|"+(ln===tr?lr:pi).source+"|"+(m.evaluate||pi).source+"|$","g"),sr="//# sourceURL="+(Xr.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ml+"]")+`
`;c.replace($n,function(Mr,Si,ki,Fl,Ka,jl){return ki||(ki=Fl),vn+=c.slice(an,jl).replace(Zr,Ga),Si&&(gt=!0,vn+=`' +
__e(`+Si+`) +
'`),Ka&&(Et=!0,vn+=`';
`+Ka+`;
__p += '`),ki&&(vn+=`' +
((__t = (`+ki+`)) == null ? '' : __t) +
'`),an=jl+Mr.length,Mr}),vn+=`';
`;var Pr=Xr.call(m,"variable")&&m.variable;if(!Pr)vn=`with (obj) {
`+vn+`
}
`;else if(Fr.test(Pr))throw new Kn(u);vn=(Et?vn.replace(xn,""):vn).replace(Mn,"$1").replace(En,"$1;"),vn="function("+(Pr||"obj")+`) {
`+(Pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(gt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+vn+`return __p
}`;var ci=A2(function(){return wr(Ie,sr+"return "+vn).apply(t,rt)});if(ci.source=vn,Cm(ci))throw ci;return ci}function GC(c){return Wi(c).toLowerCase()}function qC(c){return Wi(c).toUpperCase()}function WC(c,m,A){if(c=Wi(c),c&&(A||m===t))return Ps(c);if(!c||!(m=Ma(m)))return c;var Q=Vo(c),we=Vo(m),Ie=es(Q,we),rt=Ql(Q,we)+1;return ru(Q,Ie,rt).join("")}function ZC(c,m,A){if(c=Wi(c),c&&(A||m===t))return c.slice(0,xa(c)+1);if(!c||!(m=Ma(m)))return c;var Q=Vo(c),we=Ql(Q,Vo(m))+1;return ru(Q,0,we).join("")}function KC(c,m,A){if(c=Wi(c),c&&(A||m===t))return c.replace(Ln,"");if(!c||!(m=Ma(m)))return c;var Q=Vo(c),we=es(Q,Vo(m));return ru(Q,we).join("")}function YC(c,m){var A=Y,Q=F;if(Ko(m)){var we="separator"in m?m.separator:we;A="length"in m?li(m.length):A,Q="omission"in m?Ma(m.omission):Q}c=Wi(c);var Ie=c.length;if(ra(c)){var rt=Vo(c);Ie=rt.length}if(A>=Ie)return c;var gt=A-Uo(Q);if(gt<1)return Q;var Et=rt?ru(rt,0,gt).join(""):c.slice(0,gt);if(we===t)return Et+Q;if(rt&&(gt+=Et.length-gt),Em(we)){if(c.slice(gt).search(we)){var an,ln=Et;for(we.global||(we=Ol(we.source,Wi(Hr.exec(we))+"g")),we.lastIndex=0;an=we.exec(ln);)var vn=an.index;Et=Et.slice(0,vn===t?gt:vn)}}else if(c.indexOf(Ma(we),gt)!=gt){var $n=Et.lastIndexOf(we);$n>-1&&(Et=Et.slice(0,$n))}return Et+Q}function JC(c){return c=Wi(c),c&&mt.test(c)?c.replace(cr,La):c}var XC=wh(function(c,m,A){return c+(A?" ":"")+m.toUpperCase()}),Am=ky("toUpperCase");function M2(c,m,A){return c=Wi(c),m=A?t:m,m===t?Ms(c)?ia(c):ct(c):c.match(m)||[]}var A2=ai(function(c,m){try{return _i(c,t,m)}catch(A){return Cm(A)?A:new Kn(A)}}),QC=Pc(function(c,m){return Mo(m,function(A){A=ec(A),kn(c,A,Lm(c[A],c))}),c});function eE(c){var m=c==null?0:c.length,A=Cr();return c=m?bi(c,function(Q){if(typeof Q[1]!="function")throw new Vi(o);return[A(Q[0]),Q[1]]}):[],ai(function(Q){for(var we=-1;++we<m;){var Ie=c[we];if(_i(Ie[0],this,Q))return _i(Ie[1],this,Q)}})}function tE(c){return h(l(c,y))}function km(c){return function(){return c}}function nE(c,m){return c==null||c!==c?m:c}var rE=Ny(),iE=Ny(!0);function ml(c){return c}function Tm(c){return Qn(typeof c=="function"?c:l(c,y))}function oE(c){return vs(l(c,y))}function sE(c,m){return Lu(c,l(m,y))}var aE=ai(function(c,m){return function(A){return Oe(A,c,m)}}),lE=ai(function(c,m){return function(A){return Oe(c,A,m)}});function Nm(c,m,A){var Q=Js(m),we=bn(m,Q);A==null&&!(Ko(m)&&(we.length||!Q.length))&&(A=m,m=c,c=this,we=bn(m,Js(m)));var Ie=!(Ko(A)&&"chain"in A)||!!A.chain,rt=Ac(c);return Mo(we,function(gt){var Et=m[gt];c[gt]=Et,rt&&(c.prototype[gt]=function(){var an=this.__chain__;if(Ie||an){var ln=c(this.__wrapped__),vn=ln.__actions__=dl(this.__actions__);return vn.push({func:Et,args:arguments,thisArg:c}),ln.__chain__=an,ln}return Et.apply(c,Es([this.value()],arguments))})}),c}function uE(){return to._===this&&(to._=oo),this}function Dm(){}function cE(c){return c=li(c),ai(function(m){return Wa(m,c)})}var fE=cm(bi),hE=cm(Bl),dE=cm(B);function k2(c){return vm(c)?vr(ec(c)):so(c)}function pE(c){return function(m){return c==null?t:ur(c,m)}}var gE=By(),mE=By(!0);function Bm(){return[]}function Om(){return!1}function vE(){return{}}function yE(){return""}function _E(){return!0}function bE(c,m){if(c=li(c),c<1||c>re)return[];var A=We,Q=Ce(c,We);m=Cr(m),c-=We;for(var we=io(Q,m);++A<c;)m(A);return we}function wE(c){return ei(c)?bi(c,ec):Rl(c)?[c]:dl(Yy(Wi(c)))}function xE(c){var m=++Ws;return Wi(c)+m}var LE=Gp(function(c,m){return c+m},0),SE=fm("ceil"),CE=Gp(function(c,m){return c/m},1),EE=fm("floor");function PE(c){return c&&c.length?he(c,ml,ft):t}function ME(c,m){return c&&c.length?he(c,Cr(m,2),ft):t}function AE(c){return nr(c,ml)}function kE(c,m){return nr(c,Cr(m,2))}function TE(c){return c&&c.length?he(c,ml,Qr):t}function NE(c,m){return c&&c.length?he(c,Cr(m,2),Qr):t}var DE=Gp(function(c,m){return c*m},1),BE=fm("round"),OE=Gp(function(c,m){return c-m},0);function IE(c){return c&&c.length?wi(c,ml):0}function RE(c,m){return c&&c.length?wi(c,Cr(m,2)):0}return Ne.after=oS,Ne.ary=a2,Ne.assign=qS,Ne.assignIn=w2,Ne.assignInWith=ig,Ne.assignWith=WS,Ne.at=ZS,Ne.before=l2,Ne.bind=Lm,Ne.bindAll=QC,Ne.bindKey=u2,Ne.castArray=vS,Ne.chain=i2,Ne.chunk=E3,Ne.compact=P3,Ne.concat=M3,Ne.cond=eE,Ne.conforms=tE,Ne.constant=km,Ne.countBy=IL,Ne.create=KS,Ne.curry=c2,Ne.curryRight=f2,Ne.debounce=h2,Ne.defaults=YS,Ne.defaultsDeep=JS,Ne.defer=sS,Ne.delay=aS,Ne.difference=A3,Ne.differenceBy=k3,Ne.differenceWith=T3,Ne.drop=N3,Ne.dropRight=D3,Ne.dropRightWhile=B3,Ne.dropWhile=O3,Ne.fill=I3,Ne.filter=FL,Ne.flatMap=$L,Ne.flatMapDeep=UL,Ne.flatMapDepth=VL,Ne.flatten=e2,Ne.flattenDeep=R3,Ne.flattenDepth=F3,Ne.flip=lS,Ne.flow=rE,Ne.flowRight=iE,Ne.fromPairs=j3,Ne.functions=iC,Ne.functionsIn=oC,Ne.groupBy=HL,Ne.initial=$3,Ne.intersection=U3,Ne.intersectionBy=V3,Ne.intersectionWith=H3,Ne.invert=aC,Ne.invertBy=lC,Ne.invokeMap=qL,Ne.iteratee=Tm,Ne.keyBy=WL,Ne.keys=Js,Ne.keysIn=gl,Ne.map=Xp,Ne.mapKeys=cC,Ne.mapValues=fC,Ne.matches=oE,Ne.matchesProperty=sE,Ne.memoize=eg,Ne.merge=hC,Ne.mergeWith=x2,Ne.method=aE,Ne.methodOf=lE,Ne.mixin=Nm,Ne.negate=tg,Ne.nthArg=cE,Ne.omit=dC,Ne.omitBy=pC,Ne.once=uS,Ne.orderBy=ZL,Ne.over=fE,Ne.overArgs=cS,Ne.overEvery=hE,Ne.overSome=dE,Ne.partial=Sm,Ne.partialRight=d2,Ne.partition=KL,Ne.pick=gC,Ne.pickBy=L2,Ne.property=k2,Ne.propertyOf=pE,Ne.pull=Z3,Ne.pullAll=n2,Ne.pullAllBy=K3,Ne.pullAllWith=Y3,Ne.pullAt=J3,Ne.range=gE,Ne.rangeRight=mE,Ne.rearg=fS,Ne.reject=XL,Ne.remove=X3,Ne.rest=hS,Ne.reverse=wm,Ne.sampleSize=eS,Ne.set=vC,Ne.setWith=yC,Ne.shuffle=tS,Ne.slice=Q3,Ne.sortBy=iS,Ne.sortedUniq=sL,Ne.sortedUniqBy=aL,Ne.split=$C,Ne.spread=dS,Ne.tail=lL,Ne.take=uL,Ne.takeRight=cL,Ne.takeRightWhile=fL,Ne.takeWhile=hL,Ne.tap=PL,Ne.throttle=pS,Ne.thru=Jp,Ne.toArray=y2,Ne.toPairs=S2,Ne.toPairsIn=C2,Ne.toPath=wE,Ne.toPlainObject=b2,Ne.transform=_C,Ne.unary=gS,Ne.union=dL,Ne.unionBy=pL,Ne.unionWith=gL,Ne.uniq=mL,Ne.uniqBy=vL,Ne.uniqWith=yL,Ne.unset=bC,Ne.unzip=xm,Ne.unzipWith=r2,Ne.update=wC,Ne.updateWith=xC,Ne.values=Sh,Ne.valuesIn=LC,Ne.without=_L,Ne.words=M2,Ne.wrap=mS,Ne.xor=bL,Ne.xorBy=wL,Ne.xorWith=xL,Ne.zip=LL,Ne.zipObject=SL,Ne.zipObjectDeep=CL,Ne.zipWith=EL,Ne.entries=S2,Ne.entriesIn=C2,Ne.extend=w2,Ne.extendWith=ig,Nm(Ne,Ne),Ne.add=LE,Ne.attempt=A2,Ne.camelCase=PC,Ne.capitalize=E2,Ne.ceil=SE,Ne.clamp=SC,Ne.clone=yS,Ne.cloneDeep=bS,Ne.cloneDeepWith=wS,Ne.cloneWith=_S,Ne.conformsTo=xS,Ne.deburr=P2,Ne.defaultTo=nE,Ne.divide=CE,Ne.endsWith=MC,Ne.eq=Mu,Ne.escape=AC,Ne.escapeRegExp=kC,Ne.every=RL,Ne.find=jL,Ne.findIndex=Xy,Ne.findKey=XS,Ne.findLast=zL,Ne.findLastIndex=Qy,Ne.findLastKey=QS,Ne.floor=EE,Ne.forEach=o2,Ne.forEachRight=s2,Ne.forIn=eC,Ne.forInRight=tC,Ne.forOwn=nC,Ne.forOwnRight=rC,Ne.get=Pm,Ne.gt=LS,Ne.gte=SS,Ne.has=sC,Ne.hasIn=Mm,Ne.head=t2,Ne.identity=ml,Ne.includes=GL,Ne.indexOf=z3,Ne.inRange=CC,Ne.invoke=uC,Ne.isArguments=Ff,Ne.isArray=ei,Ne.isArrayBuffer=CS,Ne.isArrayLike=pl,Ne.isArrayLikeObject=ys,Ne.isBoolean=ES,Ne.isBuffer=Xc,Ne.isDate=PS,Ne.isElement=MS,Ne.isEmpty=AS,Ne.isEqual=kS,Ne.isEqualWith=TS,Ne.isError=Cm,Ne.isFinite=NS,Ne.isFunction=Ac,Ne.isInteger=p2,Ne.isLength=ng,Ne.isMap=g2,Ne.isMatch=DS,Ne.isMatchWith=BS,Ne.isNaN=OS,Ne.isNative=IS,Ne.isNil=FS,Ne.isNull=RS,Ne.isNumber=m2,Ne.isObject=Ko,Ne.isObjectLike=os,Ne.isPlainObject=wd,Ne.isRegExp=Em,Ne.isSafeInteger=jS,Ne.isSet=v2,Ne.isString=rg,Ne.isSymbol=Rl,Ne.isTypedArray=Lh,Ne.isUndefined=zS,Ne.isWeakMap=$S,Ne.isWeakSet=US,Ne.join=G3,Ne.kebabCase=TC,Ne.last=iu,Ne.lastIndexOf=q3,Ne.lowerCase=NC,Ne.lowerFirst=DC,Ne.lt=VS,Ne.lte=HS,Ne.max=PE,Ne.maxBy=ME,Ne.mean=AE,Ne.meanBy=kE,Ne.min=TE,Ne.minBy=NE,Ne.stubArray=Bm,Ne.stubFalse=Om,Ne.stubObject=vE,Ne.stubString=yE,Ne.stubTrue=_E,Ne.multiply=DE,Ne.nth=W3,Ne.noConflict=uE,Ne.noop=Dm,Ne.now=Qp,Ne.pad=BC,Ne.padEnd=OC,Ne.padStart=IC,Ne.parseInt=RC,Ne.random=EC,Ne.reduce=YL,Ne.reduceRight=JL,Ne.repeat=FC,Ne.replace=jC,Ne.result=mC,Ne.round=BE,Ne.runInContext=_t,Ne.sample=QL,Ne.size=nS,Ne.snakeCase=zC,Ne.some=rS,Ne.sortedIndex=eL,Ne.sortedIndexBy=tL,Ne.sortedIndexOf=nL,Ne.sortedLastIndex=rL,Ne.sortedLastIndexBy=iL,Ne.sortedLastIndexOf=oL,Ne.startCase=UC,Ne.startsWith=VC,Ne.subtract=OE,Ne.sum=IE,Ne.sumBy=RE,Ne.template=HC,Ne.times=bE,Ne.toFinite=kc,Ne.toInteger=li,Ne.toLength=_2,Ne.toLower=GC,Ne.toNumber=ou,Ne.toSafeInteger=GS,Ne.toString=Wi,Ne.toUpper=qC,Ne.trim=WC,Ne.trimEnd=ZC,Ne.trimStart=KC,Ne.truncate=YC,Ne.unescape=JC,Ne.uniqueId=xE,Ne.upperCase=XC,Ne.upperFirst=Am,Ne.each=o2,Ne.eachRight=s2,Ne.first=t2,Nm(Ne,function(){var c={};return Xt(Ne,function(m,A){Xr.call(Ne.prototype,A)||(c[A]=m)}),c}(),{chain:!1}),Ne.VERSION=r,Mo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Ne[c].placeholder=Ne}),Mo(["drop","take"],function(c,m){Vr.prototype[c]=function(A){A=A===t?1:ie(li(A),0);var Q=this.__filtered__&&!m?new Vr(this):this.clone();return Q.__filtered__?Q.__takeCount__=Ce(A,Q.__takeCount__):Q.__views__.push({size:Ce(A,We),type:c+(Q.__dir__<0?"Right":"")}),Q},Vr.prototype[c+"Right"]=function(A){return this.reverse()[c](A).reverse()}}),Mo(["filter","map","takeWhile"],function(c,m){var A=m+1,Q=A==H||A==R;Vr.prototype[c]=function(we){var Ie=this.clone();return Ie.__iteratees__.push({iteratee:Cr(we,3),type:A}),Ie.__filtered__=Ie.__filtered__||Q,Ie}}),Mo(["head","last"],function(c,m){var A="take"+(m?"Right":"");Vr.prototype[c]=function(){return this[A](1).value()[0]}}),Mo(["initial","tail"],function(c,m){var A="drop"+(m?"":"Right");Vr.prototype[c]=function(){return this.__filtered__?new Vr(this):this[A](1)}}),Vr.prototype.compact=function(){return this.filter(ml)},Vr.prototype.find=function(c){return this.filter(c).head()},Vr.prototype.findLast=function(c){return this.reverse().find(c)},Vr.prototype.invokeMap=ai(function(c,m){return typeof c=="function"?new Vr(this):this.map(function(A){return Oe(A,c,m)})}),Vr.prototype.reject=function(c){return this.filter(tg(Cr(c)))},Vr.prototype.slice=function(c,m){c=li(c);var A=this;return A.__filtered__&&(c>0||m<0)?new Vr(A):(c<0?A=A.takeRight(-c):c&&(A=A.drop(c)),m!==t&&(m=li(m),A=m<0?A.dropRight(-m):A.take(m-c)),A)},Vr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Vr.prototype.toArray=function(){return this.take(We)},Xt(Vr.prototype,function(c,m){var A=/^(?:filter|find|map|reject)|While$/.test(m),Q=/^(?:head|last)$/.test(m),we=Ne[Q?"take"+(m=="last"?"Right":""):m],Ie=Q||/^find/.test(m);we&&(Ne.prototype[m]=function(){var rt=this.__wrapped__,gt=Q?[1]:arguments,Et=rt instanceof Vr,an=gt[0],ln=Et||ei(rt),vn=function(Si){var ki=we.apply(Ne,Es([Si],gt));return Q&&$n?ki[0]:ki};ln&&A&&typeof an=="function"&&an.length!=1&&(Et=ln=!1);var $n=this.__chain__,sr=!!this.__actions__.length,Pr=Ie&&!$n,ci=Et&&!sr;if(!Ie&&ln){rt=ci?rt:new Vr(this);var Mr=c.apply(rt,gt);return Mr.__actions__.push({func:Jp,args:[vn],thisArg:t}),new Bo(Mr,$n)}return Pr&&ci?c.apply(this,gt):(Mr=this.thru(vn),Pr?Q?Mr.value()[0]:Mr.value():Mr)})}),Mo(["pop","push","shift","sort","splice","unshift"],function(c){var m=oa[c],A=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",Q=/^(?:pop|shift)$/.test(c);Ne.prototype[c]=function(){var we=arguments;if(Q&&!this.__chain__){var Ie=this.value();return m.apply(ei(Ie)?Ie:[],we)}return this[A](function(rt){return m.apply(ei(rt)?rt:[],we)})}}),Xt(Vr.prototype,function(c,m){var A=Ne[m];if(A){var Q=A.name+"";Xr.call(gs,Q)||(gs[Q]=[]),gs[Q].push({name:m,func:A})}}),gs[Hp(t,O).name]=[{name:"wrapper",func:t}],Vr.prototype.clone=qc,Vr.prototype.reverse=uh,Vr.prototype.value=Wc,Ne.prototype.at=ML,Ne.prototype.chain=AL,Ne.prototype.commit=kL,Ne.prototype.next=TL,Ne.prototype.plant=DL,Ne.prototype.reverse=BL,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=OL,Ne.prototype.first=Ne.prototype.head,dr&&(Ne.prototype[dr]=NL),Ne},Go=As();no?((no.exports=Go)._=Go,or._=Go):to._=Go}).call(ea)})(y0,y0.exports);var fx=y0.exports;class pa extends Vn.Polygon{constructor(t,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ht(this,"_width");Ht(this,"_height");Ht(this,"_center");Ht(this,"_rotation");Ht(this,"_isMapReady",!1);Ht(this,"properties");Ht(this,"_helperPoints",{corners:[],midPoints:[]});Ht(this,"_throttledUpdateProperties");const i=t instanceof Vn.LatLngBounds?t:Vn.latLngBounds(t);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=hn.measure("Rectangle.constructor.calculateWidth",()=>{const u=nv([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),this._height=hn.measure("Rectangle.constructor.calculateHeight",()=>{const u=nv([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=hn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=hn.measure("Rectangle.constructor.initThrottle",()=>fx.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){hn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const t=this._width/2,r=this._height/2,i=ab([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=ab([this._center.lng,this._center.lat],t,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(s[0]-this._center.lng)*2,f=[Vn.latLng(this._center.lat+o/2,this._center.lng-u/2),Vn.latLng(this._center.lat+o/2,this._center.lng+u/2),Vn.latLng(this._center.lat-o/2,this._center.lng+u/2),Vn.latLng(this._center.lat-o/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(f);return}const d=this._map.latLngToContainerPoint(this._center),g=f.map(D=>this._map.latLngToContainerPoint(D)),y=-this._rotation*Math.PI/180,x=Math.cos(y),_=Math.sin(y),T=g.map(D=>{const O=D.x-d.x,$=D.y-d.y;return Vn.point(d.x+(O*x-$*_),d.y+(O*_+$*x))}).map(D=>this._map.containerPointToLatLng(D));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:T,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(T),this.fire("coordinates:updated",{corners:T,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return hn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const t=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Vn.latLng(this._center.lat,this._center.lng+t)).x-r.x,o=nv([this._center.lng,this._center.lat],[this._center.lng+t,this._center.lat],{units:"meters"}),u=Math.abs(s/o);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):u})}getRotatedCorners(){return hn.measure("Rectangle.getRotatedCorners",()=>{try{const t=this.getLatLngs();if(!t||!Array.isArray(t)||t.length===0){const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}return t[0]}catch(t){console.warn("Error in getRotatedCorners:",t);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return hn.measure("Rectangle.getMidPoints",()=>{try{const t=this.getRotatedCorners();if(!t||t.length<4){const i=this._width/2,s=this._height/2;return[Vn.latLng(this._center.lat+s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+i),Vn.latLng(this._center.lat-s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-i)]}if(!t.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(t[3],t[0]),this._getMidPoint(t[0],t[1]),this._getMidPoint(t[1],t[2]),this._getMidPoint(t[2],t[3])]}catch(t){console.warn("Error in getMidPoints:",t);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(t,r){return hn.measure("Rectangle._getMidPoint",()=>{if(!t||!r||typeof t.lat!="number"||typeof t.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Vn.latLng((t.lat+r.lat)/2,(t.lng+r.lng)/2)})}getCenter(){return hn.measure("Rectangle.getCenter",()=>this._center)}setCenter(t){hn.measure("Rectangle.setCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return hn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(t,r=!1){hn.measure("Rectangle.setRotation",()=>{this._rotation=(t%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){hn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return hn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(t,r){hn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:t,newHeight:r}),this._width=t,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(t,r){hn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),g=Math.sin(f),y=o*d-u*g,x=o*g+u*d,_=this._getPixelsPerMeter(),E=t===0||t===3?-1:1,T=t===0||t===1?1:-1,D=Math.max(Math.abs(y*2)/_,1),O=Math.max(Math.abs(x*2)/_,1),$=D*_/2,K=O*_/2,X=E*$*d-T*K*g,ae=E*$*g+T*K*d,ue=Vn.point(s.x-X,s.y-ae),Le=this._map.containerPointToLatLng(ue),Y=[Vn.point(ue.x-$,ue.y+K),Vn.point(ue.x+$,ue.y+K),Vn.point(ue.x+$,ue.y-K),Vn.point(ue.x-$,ue.y-K)].map(F=>{const I=F.x-ue.x,j=F.y-ue.y;return Vn.point(ue.x+(I*d-j*g),ue.y+(I*g+j*d))}).map(F=>this._map.containerPointToLatLng(F));this._width=D,this._height=O,this._center=Le,this.setLatLngs(Y),this.fire("coordinates:updated",{corners:Y,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(t,r){hn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),g=Math.sin(f),y=o*d-u*g,x=o*g+u*d,_=this._getPixelsPerMeter();t%2===0?this._height=Math.abs(x*2)/_:this._width=Math.abs(y*2)/_,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(t){hn.measure("Rectangle.moveFromCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){hn.measure("Rectangle.updateProperties",()=>{var i,s,o;const t=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:t,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:t,midPoints:this.getMidPoints()})})}setName(t){hn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return hn.measure("Rectangle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}generateHelperPoints(t,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){hn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(u=>Vn.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(t)),this._helperPoints.midPoints=o.map(u=>Vn.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(t))})}clearHelperPoints(){hn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){hn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const t=this.getRotatedCorners(),r=this.getMidPoints();t.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(t){return hn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],u=t.distanceTo(o);for(let f=1;f<s.length;f++){const d=t.distanceTo(s[f]);d<u&&(u=d,o=s[f])}return o})}toggleHelperPoints(t,r,i,s){hn.measure("Rectangle.toggleHelperPoints",()=>{r&&t?this.generateHelperPoints(t,i,s):this.clearHelperPoints()})}containsPoint(t){return hn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const u=r[s].lng,f=r[s].lat,d=r[o].lng,g=r[o].lat;f>t.lat!=g>t.lat&&t.lng<(d-u)*(t.lat-f)/(g-f)+u&&(i=!i)}return i})}}var yo=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(yo||{});const Dp=Ap("notes",()=>{const e=Ft([]),n=Ft([]),t=gr(()=>Y=>e.value.find(F=>F.id===Y)),r=gr(()=>Y=>{const F=e.value.find(I=>I.id===Y);return F?F.color:"#6B7280"}),i=gr(()=>Y=>n.value.filter(F=>F.columnId===Y).sort((F,I)=>F.order-I.order)),s=gr(()=>e.value.find(Y=>Y.isDefault)||e.value[0]),o=gr(()=>[...e.value].sort((Y,F)=>Y.order-F.order)),u=gr(()=>Y=>{const F=ma();if(!F.user)return!1;if(F.isAdmin)return!0;switch(Y.accessLevel){case"private":return!0;case"company":return F.isAdmin||F.isEntreprise;case"employee":return F.isAdmin||F.isEntreprise||F.isSalarie;case"visitor":return F.isAdmin||F.isEntreprise||F.isSalarie||F.isVisiteur;default:return!1}}),f=gr(()=>n.value.filter(Y=>u.value(Y))),d=gr(()=>Y=>f.value.filter(F=>F.columnId===Y).sort((F,I)=>F.order-I.order));async function g(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const Y=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];e.value=Y,console.log("[NotesStore][loadColumns] Colonnes fixes initialises:",e.value)}catch(Y){throw console.error("[NotesStore][loadColumns] Erreur:",Y),Y}}async function y(Y){console.log(`
[NotesStore][addColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function x(Y,F){console.log(`
[NotesStore][updateColumn] Mise  jour locale de la colonne:`,Y,F);try{const I=e.value.findIndex(j=>j.id===Y);I!==-1&&(e.value[I]={...e.value[I],...F},console.log("[NotesStore][updateColumn] tat des colonnes aprs mise  jour:",e.value))}catch(I){throw console.error("[NotesStore][updateColumn] Erreur:",I),I}}async function _(Y){console.log(`
[NotesStore][removeColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function E(Y){console.log(`
[NotesStore][reorderColumns] Rorganisation locale des colonnes`);try{Y.forEach((F,I)=>{const j=e.value.find(H=>H.id===F);j&&(j.order=I)}),console.log("[NotesStore][reorderColumns] Nouvel ordre des colonnes:",e.value)}catch(F){throw console.error("[NotesStore][reorderColumns] Erreur:",F),F}}function T(Y){const F=n.value.length>0?Math.max(...n.value.map(R=>R.id))+1:1,I=new Date().toISOString(),j=n.value.filter(R=>R.columnId===Y.columnId),H=j.length>0?Math.max(...j.map(R=>R.order))+1:0,U=Y.accessLevel||"private";return n.value.push({...Y,id:F,order:H,accessLevel:U,createdAt:I,updatedAt:I,comments:[],photos:[]}),F}function D(Y,F){const I=n.value.findIndex(j=>j.id===Y);if(I!==-1){const j={...n.value[I],...F,updatedAt:new Date().toISOString()};n.value[I]=j}}function O(Y){n.value=n.value.filter(F=>F.id!==Y)}function $(Y,F){const I=n.value.findIndex(j=>j.id===Y);if(I!==-1){const j=n.value[I];if(j.columnId!==F){const U=n.value.filter(re=>re.columnId===F),R=U.length>0?Math.max(...U.map(re=>re.order))+1:0,te={...j,columnId:F,order:R,updatedAt:new Date().toISOString()};n.value[I]=te}else n.value[I]={...n.value[I],updatedAt:new Date().toISOString()}}}function K(Y,F){F.forEach((I,j)=>{const H=n.value.findIndex(U=>U.id===I&&U.columnId===Y);H!==-1&&(n.value[H]={...n.value[H],order:j,updatedAt:new Date().toISOString()})})}function X(Y){switch(Y){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ae(Y,F){try{const I=ma();if(!I.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!I.isEntreprise&&!I.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!n.value.some(me=>me.id===Y))throw new Error(`La note avec l'ID ${Y} n'existe pas`);const U=(await lc.addComment(Y,F)).data,R=n.value.findIndex(me=>me.id===Y);if(R===-1)return;const te=n.value[R];te.comments||(te.comments=[]);const re={id:U.id,text:U.text,createdAt:U.created_at,userId:U.user,userName:U.user_name,userRole:U.user_role};return te.comments.push(re),te.updatedAt=new Date().toISOString(),n.value[R]={...te},re.id}catch(I){throw console.error("Erreur lors de l'ajout du commentaire:",I),I}}async function ue(Y,F){try{const I=n.value.findIndex(U=>U.id===Y);if(I===-1)throw new Error(`La note avec l'ID ${Y} n'existe pas`);const j=n.value[I];if(!j.comments||j.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!j.comments.some(U=>U.id===F))throw new Error(`Le commentaire avec l'ID ${F} n'existe pas`);await lc.deleteComment(Y,F),j.comments=j.comments.filter(U=>U.id!==F),j.updatedAt=new Date().toISOString(),n.value[I]={...j}}catch(I){throw console.error("Erreur lors de la suppression du commentaire:",I),I}}async function Le(Y,F){try{if(F.id&&F.image){const I=n.value.findIndex(U=>U.id===Y);if(I===-1)return;const j=n.value[I];j.photos||(j.photos=[]);const H={id:F.id,url:F.image,caption:F.caption,createdAt:F.created_at};return j.photos.push(H),j.updatedAt=new Date().toISOString(),n.value[I]={...j},H.id}else{const I=new FormData;I.append("image",F.url),F.caption&&I.append("caption",F.caption);const H=(await lc.addPhoto(Y,I)).data,U=n.value.findIndex(re=>re.id===Y);if(U===-1)return;const R=n.value[U];R.photos||(R.photos=[]);const te={id:H.id,url:H.image,caption:H.caption,createdAt:H.created_at};return R.photos.push(te),R.updatedAt=new Date().toISOString(),n.value[U]={...R},te.id}}catch(I){throw console.error("Erreur lors de l'ajout de la photo:",I),I}}async function W(Y,F){try{await lc.deletePhoto(Y,F);const I=n.value.findIndex(H=>H.id===Y);if(I===-1||!n.value[I].photos)return;const j=n.value[I];j.photos=j.photos.filter(H=>H.id!==F),j.updatedAt=new Date().toISOString(),n.value[I]={...j}}catch(I){throw console.error("Erreur lors de la suppression de la photo:",I),I}}async function V(Y,F,I){try{await lc.updatePhoto(Y,F,{caption:I});const j=n.value.findIndex(R=>R.id===Y);if(j===-1||!n.value[j].photos)return;const H=n.value[j],U=H.photos.findIndex(R=>R.id===F);if(U===-1)return;H.photos[U].caption=I,H.updatedAt=new Date().toISOString(),n.value[j]={...H}}catch(j){throw console.error("Erreur lors de la mise  jour de la lgende:",j),j}}return{columns:e,notes:n,getColumnById:t,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:u,getAccessibleNotes:f,getAccessibleNotesByColumn:d,getAccessLevelLabel:X,loadColumns:g,addColumn:y,updateColumn:x,removeColumn:_,reorderColumns:E,addNote:T,updateNote:D,removeNote:O,moveNote:$,reorderNotes:K,addComment:ae,removeComment:ue,addPhoto:Le,removePhoto:W,updatePhoto:V}});class Bp extends Rt.Marker{constructor(t,r={}){const s=`<div class="geo-note-marker" style="color: ${r.color||"#2b6451"};"></div>`,u={icon:Rt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(t,u);Ht(this,"properties");this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"en-cours",accessLevel:r.accessLevel||yo.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),window.addEventListener("geonote:updateStyle",f=>{f.detail.noteId===this._leaflet_id&&(this.setNoteStyle(f.detail.style),this.bindPopup(this.createPopupContent()))}),console.log("[GeoNote][constructor] Note cre:",{location:t,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const t=document.createElement("div");t.className="geo-note-popup",t.style.display="flex",t.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",t.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const u=document.createElement("div");if(u.className="geo-note-badge",u.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),u.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(u),this.properties.description&&this.properties.description.trim()!==""){const y=document.createElement("div");y.className="geo-note-content",t.appendChild(y);const x=document.createElement("div");x.className="geo-note-description",x.textContent=this.properties.description,y.appendChild(x)}const f=document.createElement("div");f.className="geo-note-buttons",f.style.display="flex",f.style.width="100%",f.style.marginTop="auto",f.style.borderTop="1px solid #E5E7EB",t.appendChild(f);const d=document.createElement("button");d.className="geo-note-edit-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.borderRight="1px solid #E5E7EB",d.style.background="transparent",d.style.color="#4B5563",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      diter
    `,d.onclick=y=>{y.stopPropagation(),this.editNote()},f.appendChild(d);const g=document.createElement("button");return g.className="geo-note-open-button",g.style.flex="1",g.style.height="36px",g.style.border="none",g.style.background="transparent",g.style.color="#3B82F6",g.style.fontSize="11px",g.style.fontWeight="500",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",g.style.cursor="pointer",g.style.padding="0",g.style.margin="0",g.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Ouvrir
    `,g.onclick=y=>{y.stopPropagation(),this.openInGoogleMaps()},f.appendChild(g),t}getColumnColor(t){return{"en-cours":"#2b6451",termine:"#10B981"}[t]||"#6B7280"}getColumnLabel(t){return{"en-cours":"En cours",termine:"Termin"}[t]||t}getAccessLevelLabel(t){switch(t){case yo.PRIVATE:return"Priv";case yo.COMPANY:return"Entreprise";case yo.EMPLOYEE:return"Salaris";case yo.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(t){switch(t){case yo.PRIVATE:return"#9CA3AF";case yo.COMPANY:return"#EF4444";case yo.EMPLOYEE:return"#F59E0B";case yo.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(t){Rt.DomEvent.stopPropagation(t),this.editNote()}editNote(){this.closePopup();const t={id:this._leaflet_id,title:this.properties.name,description:this.properties.description,location:[this.getLatLng().lat,this.getLatLng().lng],columnId:this.properties.columnId||"en-cours",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]};console.log("[GeoNote] mission de l'vnement note:edit avec",t);const r=new CustomEvent("geonote:edit",{detail:{note:t}});window.dispatchEvent(r),this.fire("note:edit",{note:t})}openInGoogleMaps(){this.closePopup();const t=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${t},${r}`;window.open(i,"_blank")}updateProperties(){var s,o;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=yo.PRIVATE);const t=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker"),r=t?window.getComputedStyle(t).color:"#2b6451",i=((o=this.properties.style)==null?void 0:o.radius)||12;this.properties.style={color:r,fillColor:r,weight:2,fillOpacity:.8,radius:i}}setNoteStyle(t){if(t.color||t.fillColor){const i=`<div class="geo-note-marker" style="color: ${t.color||t.fillColor||"#2b6451"};"></div>`,s=Rt.divIcon({html:i,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(s)}this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:t.color||this.properties.style.color,weight:t.weight||this.properties.style.weight,fillColor:t.fillColor||this.properties.style.fillColor,fillOpacity:t.fillOpacity!==void 0?t.fillOpacity:this.properties.style.fillOpacity,radius:t.radius||this.properties.style.radius||12}),this.updateProperties()}toBackendFormat(t){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel};return{id:t,type_forme:"Note",data:{location:[r.lat,r.lng],name:this.properties.name,description:this.properties.description,columnId:this.properties.columnId,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(t){this.properties.type="Note";const r=t.style?{...t.style,radius:t.style.radius||12}:this.properties.style;this.properties={...this.properties,name:t.name||this.properties.name,description:t.description||this.properties.description,columnId:t.columnId||this.properties.columnId,accessLevel:t.accessLevel||this.properties.accessLevel,category:t.category||this.properties.category||"forages",style:r,comments:t.comments||this.properties.comments||[],photos:t.photos||this.properties.photos||[],order:t.order||this.properties.order||0,createdAt:t.createdAt||this.properties.createdAt,updatedAt:t.updatedAt||new Date().toISOString()},this.setNoteStyle(r),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise  jour:",{name:this.properties.name,type:this.properties.type,style:this.properties.style})}static fromBackendData(t){var s,o,u,f,d,g,y;if(!t.location||!Array.isArray(t.location)||t.location.length!==2)throw new Error("Les donnes de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Cration d'une note  partir des donnes:",t);const r=((s=t.style)==null?void 0:s._accessLevel)||((o=t.style)==null?void 0:o.accessLevel)||t.accessLevel||yo.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accs rcupr:",r,"Style:",t.style),t.accessLevel=r;const i=new Bp(t.location,{name:t.name,description:t.description,columnId:t.columnId,accessLevel:r,category:t.category||"forages",color:(u=t.style)==null?void 0:u.color,weight:(f=t.style)==null?void 0:f.weight,fillColor:(d=t.style)==null?void 0:d.fillColor,fillOpacity:(g=t.style)==null?void 0:g.fillOpacity,radius:(y=t.style)==null?void 0:y.radius});return i.properties.type="Note",i.properties.comments=t.comments||[],i.properties.photos=t.photos||[],i.properties.order=t.order||0,i.properties.createdAt=t.createdAt||new Date().toISOString(),i.properties.updatedAt=t.updatedAt||new Date().toISOString(),t.style&&i.setNoteStyle(t.style),i.bindPopup(i.createPopupContent()),console.log("[GeoNote][fromBackendData] Note cre:",{location:t.location,name:i.properties.name,type:i.properties.type,style:i.properties.style}),i}}function sB(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function aB(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const n=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,t=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return n&&t&&r}function lB(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function yb(e){var n,t,r,i,s,o,u,f,d,g,y,x,_,E,T,D,O,$,K,X,ae,ue,Le,W,V,Y,F;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(n=e.properties)==null?void 0:n.type,name:(r=(t=e.properties)==null?void 0:t.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const I=e.getLatLng();return{type_forme:"Note",data:{points:[[I.lng,I.lat]],style:{color:((s=e.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=e.properties.style)==null?void 0:o.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((f=e.properties.style)==null?void 0:f.fillColor)||"#2b6451",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((g=e.properties.style)==null?void 0:g.name)||""}}}}if(e instanceof Sf||((y=e.properties)==null?void 0:y.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(H=>[H.lng,H.lat]),style:{color:((x=e.properties.style)==null?void 0:x.color)||"#2b6451",weight:((_=e.properties.style)==null?void 0:_.weight)||4,opacity:((E=e.properties.style)==null?void 0:E.opacity)||.8,name:((T=e.properties.style)==null?void 0:T.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof pf||((D=e.properties)==null?void 0:D.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(H=>[H.lng,H.lat]),style:{color:((O=e.properties.style)==null?void 0:O.color)||"#2b6451",weight:(($=e.properties.style)==null?void 0:$.weight)||3,opacity:((K=e.properties.style)==null?void 0:K.opacity)||1,fillColor:((X=e.properties.style)==null?void 0:X.fillColor)||"#2b6451",fillOpacity:((ae=e.properties.style)==null?void 0:ae.fillOpacity)||.2,name:((ue=e.properties.style)==null?void 0:ue.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor"}};if(e instanceof Ns||((Le=e.properties)==null?void 0:Le.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(H=>[H.lng,H.lat]),category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",style:{color:((W=e.properties.style)==null?void 0:W.color)||"#2b6451",weight:((V=e.properties.style)==null?void 0:V.weight)||3,opacity:((Y=e.properties.style)==null?void 0:Y.opacity)||1,name:((F=e.properties.style)==null?void 0:F.name)||""}}};throw new Error("Type de forme non reconnu")}function uB(e){var n,t,r,i,s,o,u,f,d,g,y,x,_,E,T,D,O,$,K,X,ae,ue,Le,W,V,Y,F,I,j,H,U,R,te,re,me,xe,We,N,ee,fe,ce,ye,se;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:e}),e.type_forme){case"Polygon":{const k=e.data;if(!sB(k))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const le=k.points.map(Ve=>Vn.latLng(Ve[1],Ve[0])),ke=((n=k.style)==null?void 0:n._accessLevel)||((t=k.style)==null?void 0:t.accessLevel)||k.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accs rcupr:",ke,"Style:",k.style),k.accessLevel=ke;const Pe=new pf([le],{color:((r=k.style)==null?void 0:r.color)||"#2b6451",weight:((i=k.style)==null?void 0:i.weight)||3,opacity:((s=k.style)==null?void 0:s.opacity)||1,fillColor:((o=k.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((u=k.style)==null?void 0:u.fillOpacity)||.2,dashArray:((f=k.style)==null?void 0:f.dashArray)||"",name:((d=k.style)==null?void 0:d.name)||"",category:k.category||"forages",accessLevel:ke});return Pe.updateProperties(),Pe}case"ElevationLine":{const k=e.data;if(!aB(k))return console.error("[DrawingStore] Donnes invalides pour ElevationLine"),null;const le=k.points.map(Ve=>Vn.latLng(Ve[1],Ve[0])),ke=((g=k.style)==null?void 0:g._accessLevel)||((y=k.style)==null?void 0:y.accessLevel)||k.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accs rcupr:",ke,"Style:",k.style),k.accessLevel=ke;const Pe=new Sf(le,{color:((x=k.style)==null?void 0:x.color)||"#2b6451",weight:((_=k.style)==null?void 0:_.weight)||4,opacity:((E=k.style)==null?void 0:E.opacity)||.8,name:((T=k.style)==null?void 0:T.name)||"",category:k.category||"forages",accessLevel:ke});return Pe.properties={type:"ElevationLine",category:k.category||"forages",accessLevel:ke,style:{...k.style||{},name:((D=k.style)==null?void 0:D.name)||""},elevationData:k.elevationData,minElevation:k.minElevation,maxElevation:k.maxElevation,elevationGain:k.elevationGain,elevationLoss:k.elevationLoss,averageSlope:k.averageSlope,maxSlope:k.maxSlope,dataSource:"restored"},k.elevationData&&Pe.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:le.length,hasElevationData:!!k.elevationData,name:(O=k.style)==null?void 0:O.name,properties:Pe.properties}),Pe}case"Line":{const k=e.data;if(!lB(k))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const le=k.points.map(Ve=>Vn.latLng(Ve[1],Ve[0])),ke=(($=k.style)==null?void 0:$._accessLevel)||((K=k.style)==null?void 0:K.accessLevel)||k.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accs rcupr:",ke,"Style:",k.style),k.accessLevel=ke;const Pe=new Ns(le,{...k.style||{},name:((X=k.style)==null?void 0:X.name)||"",category:k.category||"forages",accessLevel:ke});return Pe.updateProperties(),Pe}case"Rectangle":{const k=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:k,bounds:k.bounds,width:k.width,height:k.height,rotation:k.rotation}),!k.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const le=new Vn.LatLngBounds(Vn.latLng(k.bounds.southWest[1],k.bounds.southWest[0]),Vn.latLng(k.bounds.northEast[1],k.bounds.northEast[0])),ke=new pa(le,{color:((ae=k.style)==null?void 0:ae.color)||"#2b6451",weight:((ue=k.style)==null?void 0:ue.weight)||3,opacity:((Le=k.style)==null?void 0:Le.opacity)||1,fillColor:((W=k.style)==null?void 0:W.fillColor)||"#2b6451",fillOpacity:((V=k.style)==null?void 0:V.fillOpacity)||.2,dashArray:((Y=k.style)==null?void 0:Y.dashArray)||"",name:((F=k.style)==null?void 0:F.name)||"",width:k.width,height:k.height});return k.rotation&&ke.setRotation(k.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:ke.getBounds(),dimensions:ke.getDimensions(),properties:ke.properties}),ke}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:e.id,data:e.data,hasName:((j=(I=e.data)==null?void 0:I.style)==null?void 0:j.name)!==void 0,name:(U=(H=e.data)==null?void 0:H.style)==null?void 0:U.name});const k=e.data;if(!k.center||!k.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const le=Vn.circle([k.center[1],k.center[0]],{color:((R=k.style)==null?void 0:R.color)||"#2b6451",weight:((te=k.style)==null?void 0:te.weight)||3,opacity:((re=k.style)==null?void 0:re.opacity)||1,fillColor:((me=k.style)==null?void 0:me.fillColor)||"#2b6451",fillOpacity:((xe=k.style)==null?void 0:xe.fillOpacity)||.2,dashArray:((We=k.style)==null?void 0:We.dashArray)||"",radius:k.radius});return le.properties={type:"Circle",radius:k.radius,diameter:k.radius*2,surface:Math.PI*k.radius*k.radius,perimeter:2*Math.PI*k.radius,style:{...k.style||{},name:((N=k.style)==null?void 0:N.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof k.center,center:k.center,radius:k.radius,style:le.properties.style,name:le.properties.style.name}),le}case"Note":{console.log("[DrawingStore] Traitement d'une Note  partir de l'API",{id:e.id,data:e.data});const k=e.data;if(!k.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const le={location:k.location,name:k.name||"Note golocalise",description:k.description||"",columnId:k.columnId||"en-cours",accessLevel:k.accessLevel||"private",category:k.category||"forages",style:{color:((ee=k.style)==null?void 0:ee.color)||"#2b6451",weight:((fe=k.style)==null?void 0:fe.weight)||2,fillColor:((ce=k.style)==null?void 0:ce.fillColor)||"#2b6451",fillOpacity:((ye=k.style)==null?void 0:ye.fillOpacity)||.8,radius:((se=k.style)==null?void 0:se.radius)||12},comments:k.comments||[],photos:k.photos||[],order:k.order||0,createdAt:k.createdAt||new Date().toISOString(),updatedAt:k.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Donnes prpares pour la note:",le);const ke=Bp.fromBackendData(le);return ke._dbId=e.id,console.log("[DrawingStore] Note cre:",{id:e.id,location:le.location,name:le.name,type:ke.properties.type}),ke}catch(le){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",le),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",e.type_forme),null}}const Op=Ap("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:dd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType,getFilters:e=>e.filters,getFilteredElements:e=>{if(e.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun lment dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Dbut du filtrage avec",{totalElements:e.elements.length,filters:JSON.stringify({accessLevels:e.filters.accessLevels,categories:e.filters.categories,shapeTypes:e.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] lments dans le store:",e.elements.map(t=>({id:t.id,type_forme:t.type_forme,data:t.data?JSON.stringify(t.data):null})));const n=e.elements.filter(t=>{var f,d;if(console.log(`[DrawingStore][getFilteredElements] Vrification de l'lment ${t.id} (${t.type_forme})`),!(t.type_forme in e.filters.shapeTypes?e.filters.shapeTypes[t.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par type: ${t.type_forme} (non visible)`),!1;const i=((f=t.data)==null?void 0:f.category)||"default";if(!(i in e.filters.categories?e.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par catgorie: ${i} (non visible)`),!1;const o=((d=t.data)==null?void 0:d.accessLevel)||"visitor";let u=!0;return o==="company"?u=e.filters.accessLevels.company:o==="employee"?u=e.filters.accessLevels.employee:o==="visitor"&&(u=e.filters.accessLevels.visitor),u?(console.log(`[DrawingStore][getFilteredElements] lment ${t.id} visible: type=${t.type_forme}, catgorie=${i}, accs=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par niveau d'accs: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Rsultat du filtrage:",{total:e.elements.length,filtered:n.length,filteredIds:n.map(t=>t.id)}),n}},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var t;const n=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:e,isLeafletLayer:e instanceof Vn.Layer,hasProperties:!!e.properties,properties:e.properties,type:(t=e.properties)==null?void 0:t.type}),e instanceof Vn.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>yb(e),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{n()}},updateElement(e){const n=this.elements.findIndex(t=>t.id===e.id);if(n!==-1){const t=this.elements[n].type_forme;this.elements[n]={...e,type_forme:t},this.unsavedChanges=!0}},removeElement(e){const n=this.elements.findIndex(t=>t.id===e);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},updateFilters(e){if(console.log("[DrawingStore][updateFilters] Mise  jour des filtres:",JSON.stringify(e,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise  jour:",JSON.stringify(this.filters,null,2)),e.accessLevels){const n={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...e.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accs mis  jour:",{avant:n,aprs:this.filters.accessLevels})}if(e.categories){const n={...this.filters.categories};this.filters.categories={...this.filters.categories,...e.categories},console.log("[DrawingStore][updateFilters] Catgories mises  jour:",{avant:n,aprs:this.filters.categories});const t=Object.keys(e.categories).filter(r=>n[r]!==this.filters.categories[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Catgories modifies: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catgories ractives: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(e.shapeTypes){const n={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...e.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis  jour:",{avant:n,aprs:this.filters.shapeTypes});const t=Object.keys(e.shapeTypes).filter(r=>n[r]!==this.filters.shapeTypes[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifis: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes ractivs: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis  jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] mission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(e){const n=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} dj charg avec ${this.elements.length} lments`),n(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Un.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,u,f;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(f=i.data)==null?void 0:f.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=uB(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),yb(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(t){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",t),this.error="Erreur lors du chargement des lments du plan",t}finally{this.loading=!1,n()}},async saveToPlan(e,n){const t=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:n==null?void 0:n.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(f=>({...f,type_forme:f.type_forme||this.lastUsedType})),"DrawingStore"),s=(n==null?void 0:n.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Un.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const f=new Set(s);return u.data.formes.filter(d=>!f.has(d.id)).map(d=>({...d,type_forme:d.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] lments aprs filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,t()}}}}),cB={class:"h-full flex flex-col bg-white overflow-y-auto"},fB={class:"border-b border-gray-200"},hB={class:"flex -mb-px"},dB={class:"flex-1 overflow-y-auto"},pB={key:0,class:"p-3"},gB={class:"grid grid-cols-4 gap-1.5 mb-4"},mB=["onClick","title"],vB=["innerHTML"],yB={key:1,class:"p-3"},_B={class:"grid grid-cols-6 gap-2 mb-4"},bB=["onClick","title"],wB={key:0,class:"space-y-4"},xB={class:"flex items-center gap-4"},LB={class:"flex items-center gap-2"},SB={class:"flex items-center gap-4"},CB=["value"],EB={key:0,class:"flex items-center gap-4"},PB={class:"flex items-center gap-2"},MB={key:1,class:"space-y-4"},AB={class:"flex items-center gap-4"},kB={class:"flex items-center gap-2"},TB={class:"flex items-center gap-4"},NB={class:"flex items-center gap-2"},DB={key:2,class:"p-3"},BB={key:0},OB={class:"mb-4"},IB={class:"mb-4"},RB={class:"mb-4"},FB={class:"grid grid-cols-1 gap-4"},jB={key:0,class:"space-y-1"},zB={class:"flex justify-between items-center"},$B={class:"text-sm font-medium text-gray-500"},UB={class:"flex justify-between items-center"},VB={class:"text-sm font-medium text-gray-500"},HB={class:"text-sm font-medium text-gray-500"},GB={class:"flex flex-col space-y-2 w-full"},qB={class:"flex justify-between items-center"},WB={class:"text-sm font-medium text-gray-500 ml-2"},ZB={class:"flex justify-between items-center"},KB={class:"text-sm font-medium text-gray-500 ml-2"},YB={class:"flex justify-between items-center"},JB={class:"text-sm font-medium text-gray-500 ml-2"},XB={class:"flex justify-between items-center"},QB={class:"text-sm font-medium text-gray-500 ml-2"},eO={class:"flex justify-between items-center"},tO={class:"text-sm font-medium text-gray-500 ml-2"},nO={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},rO={ref:"elevationCanvas"},iO={key:1,class:"text-center text-sm text-gray-500"},oO={key:3,class:"p-3 space-y-4"},sO={class:"space-y-2"},aO={class:"space-y-2"},lO={class:"space-y-1"},uO={class:"flex items-center"},cO={class:"flex items-center"},fO={class:"flex items-center"},hO={class:"flex items-center"},dO={class:"flex items-center"},pO={class:"flex items-center"},gO={class:"space-y-2"},mO={class:"space-y-1"},vO={class:"flex items-center"},yO={class:"flex items-center"},_O={class:"flex items-center"},bO={class:"flex items-center"},wO={key:0,class:"p-3 border-t border-gray-200"},xO={class:"mt-3"},LO={class:"mb-4"},SO={class:"grid grid-cols-2 gap-2"},CO={class:"grid grid-cols-2 gap-2"},EO=cs({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape","filter-change"],setup(e,{emit:n}){const t=e,r=Op(),i=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimtrique"},{type:"Note",label:"Note golocalise"}],s=se=>{switch(se){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},o=Ft("tools");Co(o,(se,k)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:se,oldTab:k}),se==="filters"&&k!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage  l'onglet filtres"),console.log("[DrawingTools][watch activeTab] tat actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] tat actuel des filtres locaux:",JSON.stringify({accessLevels:{...ue.accessLevels},categories:{...ue.categories},shapeTypes:{...ue.shapeTypes}},null,2)),t.selectedShape&&(console.log("[DrawingTools][watch activeTab] Dslection de la forme actuelle lors du passage  l'onglet filtres"),ye("tool-change","")),setTimeout(()=>{xe()},0)),k==="filters"&&se!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] tat des filtres locaux avant application:",JSON.stringify({accessLevels:{...ue.accessLevels},categories:{...ue.categories},shapeTypes:{...ue.shapeTypes}},null,2)),xe())});const u=Ft({samplePoints:!0,circleSections:!0}),f=Ft("#2b6451"),d=Ft(2),g=Ft("solid"),y=Ft("#2b6451"),x=Ft(.2),_=Ft(!0),E=Ft(""),T=Ft("default"),D=Ft("visitor"),O=Ft({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),$=Ft({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),K=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],X=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],ae=Ft("company"),ue=Kl({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),Le=se=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accs: ${se}`),ae.value=se,se==="company"?(ue.accessLevels.company=!0,ue.accessLevels.employee=!1,ue.accessLevels.visitor=!1):se==="employee"?(ue.accessLevels.company=!1,ue.accessLevels.employee=!0,ue.accessLevels.visitor=!1):se==="visitor"&&(ue.accessLevels.company=!1,ue.accessLevels.employee=!1,ue.accessLevels.visitor=!0),xe()},W=se=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accs: ${se}`),t.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Dslection de la forme actuelle"),ye("tool-change","")),Le(se)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...ue.accessLevels},categories:{...ue.categories},shapeTypes:{...ue.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const V=gr(()=>t.selectedShape&&t.selectedShape.properties||null),Y=se=>{u.value[se]=!u.value[se]},F=se=>{f.value=se,y.value=se,I({strokeColor:se,fillColor:se})},I=se=>{t.selectedShape&&ye("style-update",se)},j=()=>{t.selectedShape&&ye("properties-update",{name:E.value})},H=()=>{t.selectedShape&&ye("properties-update",{category:T.value})},U=()=>{t.selectedShape&&ye("properties-update",{accessLevel:D.value})},R=()=>{var se;!t.selectedShape||((se=V.value)==null?void 0:se.type)!=="ElevationLine"||ye("style-update",{samplePointStyle:O.value})},te=()=>{var se;!t.selectedShape||((se=V.value)==null?void 0:se.type)!=="ElevationLine"||ye("style-update",{minMaxPointStyle:$.value})},re=()=>{console.log("[DrawingTools][resetFilters] Dbut de la rinitialisation des filtres"),console.log("[DrawingTools][resetFilters] tat actuel des filtres:",JSON.stringify({accessLevels:{...ue.accessLevels},categories:{...ue.categories},shapeTypes:{...ue.shapeTypes}},null,2));const se={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres  appliquer:",JSON.stringify(se,null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres locaux"),ue.accessLevels.company=!0,ue.accessLevels.employee=!0,ue.accessLevels.visitor=!0,ue.categories.forages=!0,ue.categories.clients=!0,ue.categories.entrepots=!0,ue.categories.livraisons=!0,ue.categories.cultures=!0,ue.categories.parcelles=!0,ue.shapeTypes.Polygon=!0,ue.shapeTypes.Line=!0,ue.shapeTypes.ElevationLine=!0,ue.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux aprs mise  jour:",JSON.stringify({accessLevels:{...ue.accessLevels},categories:{...ue.categories},shapeTypes:{...ue.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres dans le store"),r.updateFilters(se),console.log("[DrawingTools][resetFilters] mission de l'event filter-change"),ye("filter-change",se),console.log("[DrawingTools][resetFilters] Mise  jour force de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres rinitialiss avec succs")},me=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Dbut de la rinitialisation des filtres avec dslection"),fe(),re(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres rinitialiss et forme dslectionne avec succs")},xe=()=>{const se={...ue.accessLevels},k={...ue.categories},le={...ue.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:se,categories:k,shapeTypes:le},null,2));const ke={accessLevels:se,categories:k,shapeTypes:le};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(ke,null,2)),r.updateFilters(ke),console.log("[DrawingTools][applyFilters] mission de l'event filter-change"),ye("filter-change",ke),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise  jour force de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:ke}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqus avec succs")},We=se=>`${Math.round(se)} m`,N=se=>se>=1e4?`${(se/1e4).toFixed(2)} ha`:`${Math.round(se)} m`,ee=se=>`${se.toFixed(1)}%`,fe=()=>{t.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Dslection de la forme actuelle"),ye("tool-change",""))},ce=()=>{fe(),o.value="filters"},ye=n;return vp(()=>{var se,k,le,ke,Pe,Ve,Z;if(t.selectedShape){console.log("[DrawingTools][watchEffect] Mise  jour des proprits pour la forme slectionne:",{type:t.selectedShape.type,properties:t.selectedShape.properties,options:t.selectedShape.options,layer:(se=t.selectedShape.layer)==null?void 0:se._leaflet_id});const de=t.selectedShape.options||{};f.value=de.color||"#2b6451",d.value=de.weight||3,g.value=de.dashArray?"dashed":"solid",y.value=de.fillColor||"#2b6451",x.value=de.fillOpacity||.2;const ve=t.selectedShape.type||((k=t.selectedShape.properties)==null?void 0:k.type)||"";_.value=ve!=="Line",console.log("[DrawingTools][watchEffect] Type de forme dtect:",ve),E.value=((le=t.selectedShape.properties)==null?void 0:le.name)||"",T.value=((ke=t.selectedShape.properties)==null?void 0:ke.category)||"forages",D.value=((Pe=t.selectedShape.properties)==null?void 0:Pe.accessLevel)||"visitor",ve==="ElevationLine"&&((Ve=t.selectedShape.properties)!=null&&Ve.samplePointStyle&&(O.value={...t.selectedShape.properties.samplePointStyle}),(Z=t.selectedShape.properties)!=null&&Z.minMaxPointStyle&&($.value={...t.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Proprits mises  jour avec succs")}}),$s(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const se=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...se.accessLevels},categories:{...se.categories},shapeTypes:{...se.shapeTypes}},null,2)),ue.accessLevels.company=se.accessLevels.company,ue.accessLevels.employee=se.accessLevels.employee,ue.accessLevels.visitor=se.accessLevels.visitor,ue.categories.forages=se.categories.forages,ue.categories.clients=se.categories.clients,ue.categories.entrepots=se.categories.entrepots,ue.categories.livraisons=se.categories.livraisons,ue.categories.cultures=se.categories.cultures,ue.categories.parcelles=se.categories.parcelles,ue.shapeTypes.Polygon=se.shapeTypes.Polygon,ue.shapeTypes.Line=se.shapeTypes.Line,ue.shapeTypes.ElevationLine=se.shapeTypes.ElevationLine,ue.shapeTypes.Note=se.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux aprs initialisation:",JSON.stringify({accessLevels:{...ue.accessLevels},categories:{...ue.categories},shapeTypes:{...ue.shapeTypes}},null,2))}),Co(ue,(se,k)=>{console.log("[DrawingTools][watch filters] Changement dtect:",{activeTab:o.value,newFilters:JSON.stringify({accessLevels:se.accessLevels,categories:se.categories,shapeTypes:se.shapeTypes}),oldFilters:JSON.stringify({accessLevels:k.accessLevels,categories:k.categories,shapeTypes:k.shapeTypes})});const le=Object.keys(se.accessLevels).filter(Z=>k.accessLevels[Z]!==se.accessLevels[Z]),ke=Object.keys(se.categories).filter(Z=>k.categories[Z]!==se.categories[Z]),Pe=Object.keys(se.shapeTypes).filter(Z=>k.shapeTypes[Z]!==se.shapeTypes[Z]),Ve=le.length>0||ke.length>0||Pe.length>0;console.log("[DrawingTools][watch filters] Diffrences dtectes:",{accessLevelsDiff:le,categoriesDiff:ke,shapeTypesDiff:Pe,hasChanges:Ve}),o.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),xe()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0}),(se,k)=>{var le,ke,Pe,Ve;return $e(),qe("div",cB,[k[96]||(k[96]=P("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[P("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),P("div",fB,[P("nav",hB,[P("button",{onClick:k[0]||(k[0]=Z=>o.value="tools"),class:zi([o.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},k[45]||(k[45]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),P("span",null,"Outils",-1)]),2),e.selectedShape&&((le=e.selectedShape.properties)==null?void 0:le.type)!=="Note"?($e(),qe("button",{key:0,onClick:k[1]||(k[1]=Z=>o.value="style"),class:zi([o.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},k[46]||(k[46]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),P("span",null,"Style",-1)]),2)):dn("",!0),e.selectedShape?($e(),qe("button",{key:1,onClick:k[2]||(k[2]=Z=>o.value="properties"),class:zi([o.value==="properties"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},k[47]||(k[47]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),P("span",null,"Proprits",-1)]),2)):dn("",!0),P("button",{onClick:ce,class:zi([o.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},k[48]||(k[48]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),P("span",null,"Filtres",-1)]),2)])]),P("div",dB,[o.value==="tools"?($e(),qe("div",pB,[P("div",gB,[($e(!0),qe(Rn,null,Rr(i.filter(Z=>Z.type!=="delete"),Z=>($e(),qe("button",{key:Z.type,class:zi(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===Z.type}]),onClick:de=>se.$emit("tool-change",e.currentTool===Z.type?"":Z.type),title:Z.label},[P("span",{class:"icon",innerHTML:s(Z.type)},null,8,vB)],10,mB))),128))]),e.selectedShape?($e(),qe("button",{key:0,class:zi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:k[3]||(k[3]=Z=>se.$emit("delete-shape")),title:"Supprimer la forme"},k[49]||(k[49]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),P("span",{class:"text-sm"},"Supprimer",-1)]),2)):dn("",!0)])):dn("",!0),o.value==="style"&&e.selectedShape&&((ke=e.selectedShape.properties)==null?void 0:ke.type)!=="Note"?($e(),qe("div",yB,[P("div",_B,[($e(),qe(Rn,null,Rr(K,Z=>P("button",{key:Z,class:"w-8 h-8 rounded-full",style:pu({backgroundColor:Z}),onClick:de=>F(Z),title:Z},null,12,bB)),64))]),((Pe=V.value)==null?void 0:Pe.type)!=="TextRectangle"?($e(),qe("div",wB,[P("div",xB,[k[50]||(k[50]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),P("div",LB,[In(P("input",{type:"color","onUpdate:modelValue":k[4]||(k[4]=Z=>f.value=Z),class:"w-16 h-8 rounded border",onChange:k[5]||(k[5]=Z=>I({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[ni,f.value]]),In(P("input",{type:"range","onUpdate:modelValue":k[6]||(k[6]=Z=>d.value=Z),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:k[7]||(k[7]=Z=>I({strokeWidth:d.value})),title:"paisseur du contour"},null,544),[[ni,d.value]])])]),P("div",SB,[k[51]||(k[51]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),In(P("select",{"onUpdate:modelValue":k[8]||(k[8]=Z=>g.value=Z),class:"w-full rounded border",onChange:k[9]||(k[9]=Z=>I({strokeStyle:g.value}))},[($e(),qe(Rn,null,Rr(X,Z=>P("option",{key:Z.value,value:Z.value},Zt(Z.label),9,CB)),64))],544),[[lo,g.value]])]),_.value?($e(),qe("div",EB,[k[52]||(k[52]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),P("div",PB,[In(P("input",{type:"color","onUpdate:modelValue":k[10]||(k[10]=Z=>y.value=Z),class:"w-16 h-8 rounded border",onChange:k[11]||(k[11]=Z=>I({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[ni,y.value]]),In(P("input",{type:"range","onUpdate:modelValue":k[12]||(k[12]=Z=>x.value=Z),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:k[13]||(k[13]=Z=>I({fillOpacity:x.value})),title:"Opacit du remplissage"},null,544),[[ni,x.value]])])])):dn("",!0)])):dn("",!0),((Ve=V.value)==null?void 0:Ve.type)==="TextRectangle"?($e(),qe("div",MB,[P("div",AB,[k[53]||(k[53]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),P("div",kB,[In(P("input",{type:"color","onUpdate:modelValue":k[14]||(k[14]=Z=>f.value=Z),class:"w-16 h-8 rounded border",onChange:k[15]||(k[15]=Z=>I({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[ni,f.value]]),In(P("input",{type:"range","onUpdate:modelValue":k[16]||(k[16]=Z=>d.value=Z),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:k[17]||(k[17]=Z=>I({strokeWidth:d.value})),title:"paisseur du contour"},null,544),[[ni,d.value]])])]),P("div",TB,[k[54]||(k[54]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),P("div",NB,[In(P("input",{type:"color","onUpdate:modelValue":k[18]||(k[18]=Z=>y.value=Z),class:"w-16 h-8 rounded border",onChange:k[19]||(k[19]=Z=>I({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[ni,y.value]]),In(P("input",{type:"range","onUpdate:modelValue":k[20]||(k[20]=Z=>x.value=Z),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:k[21]||(k[21]=Z=>I({fillOpacity:x.value})),title:"Opacit du remplissage"},null,544),[[ni,x.value]])])])])):dn("",!0)])):dn("",!0),o.value==="properties"&&e.selectedShape?($e(),qe("div",DB,[V.value?($e(),qe("div",BB,[P("div",OB,[k[55]||(k[55]=P("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),In(P("input",{type:"text",id:"shapeName","onUpdate:modelValue":k[22]||(k[22]=Z=>E.value=Z),onChange:j,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[ni,E.value]])]),P("div",IB,[k[57]||(k[57]=P("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),In(P("select",{id:"shapeCategory","onUpdate:modelValue":k[23]||(k[23]=Z=>T.value=Z),onChange:H,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},k[56]||(k[56]=[uc('<option value="forages" data-v-9dccca1e>Forages</option><option value="clients" data-v-9dccca1e>Clients</option><option value="entrepots" data-v-9dccca1e>Entrepts</option><option value="livraisons" data-v-9dccca1e>Lieux de livraison</option><option value="cultures" data-v-9dccca1e>Cultures</option><option value="parcelles" data-v-9dccca1e>Noms des parcelles</option><option value="default" data-v-9dccca1e>Autre</option>',7)]),544),[[lo,T.value]])]),P("div",RB,[k[59]||(k[59]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),k[60]||(k[60]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),In(P("select",{id:"accessLevel","onUpdate:modelValue":k[24]||(k[24]=Z=>D.value=Z),onChange:U,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},k[58]||(k[58]=[P("option",{value:"company"},"Entreprise uniquement",-1),P("option",{value:"employee"},"Entreprise et salaris",-1),P("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[lo,D.value]])]),P("div",FB,[V.value.type==="Polygon"?($e(),qe("div",jB,[P("div",zB,[k[61]||(k[61]=P("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),P("span",$B,Zt(N(V.value.surface||0)),1)]),P("div",UB,[k[62]||(k[62]=P("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),P("span",VB,Zt(We(V.value.perimeter||0)),1)])])):V.value.type==="Line"?($e(),qe(Rn,{key:1},[k[63]||(k[63]=P("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),P("span",HB,Zt(We(V.value.length||0)),1)],64)):V.value.type==="ElevationLine"?($e(),qe(Rn,{key:2},[P("div",GB,[P("div",qB,[k[64]||(k[64]=P("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),P("span",WB,Zt(We(V.value.length||0)),1)]),P("div",ZB,[k[65]||(k[65]=P("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),P("span",KB,Zt(We(V.value.elevationGain||0)),1)]),P("div",YB,[k[66]||(k[66]=P("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),P("span",JB,Zt(We(V.value.elevationLoss||0)),1)]),P("div",XB,[k[67]||(k[67]=P("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),P("span",QB,Zt(ee(V.value.averageSlope||0)),1)]),P("div",eO,[k[68]||(k[68]=P("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),P("span",tO,Zt(ee(V.value.maxSlope||0)),1)])]),P("div",nO,[P("canvas",rO,null,512)],512)],64)):dn("",!0)])])):($e(),qe("div",iO," Aucune proprit disponible "))])):dn("",!0),o.value==="filters"?($e(),qe("div",oO,[P("div",sO,[k[71]||(k[71]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),k[72]||(k[72]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),P("div",null,[In(P("select",{"onUpdate:modelValue":k[25]||(k[25]=Z=>ae.value=Z),onChange:k[26]||(k[26]=Z=>W(ae.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},k[69]||(k[69]=[P("option",{value:"company"},"Entreprise (accs  tout)",-1),P("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),P("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[lo,ae.value]]),k[70]||(k[70]=P("div",{class:"mt-2 text-xs text-gray-500"},[P("p",null,[P("strong",null,"Entreprise"),Ei(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),P("p",null,[P("strong",null,"Salaris"),Ei(" : Vous verrez les lments pour salaris et visiteurs")]),P("p",null,[P("strong",null,"Visiteurs"),Ei(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),P("div",aO,[k[79]||(k[79]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"lments",-1)),P("div",lO,[P("label",uO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[27]||(k[27]=Z=>ue.categories.forages=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.categories.forages]]),k[73]||(k[73]=P("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),P("label",cO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[28]||(k[28]=Z=>ue.categories.clients=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.categories.clients]]),k[74]||(k[74]=P("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),P("label",fO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[29]||(k[29]=Z=>ue.categories.entrepots=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.categories.entrepots]]),k[75]||(k[75]=P("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),P("label",hO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[30]||(k[30]=Z=>ue.categories.livraisons=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.categories.livraisons]]),k[76]||(k[76]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),P("label",dO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[31]||(k[31]=Z=>ue.categories.cultures=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.categories.cultures]]),k[77]||(k[77]=P("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),P("label",pO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[32]||(k[32]=Z=>ue.categories.parcelles=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.categories.parcelles]]),k[78]||(k[78]=P("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))])])]),P("div",gO,[k[84]||(k[84]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),P("div",mO,[P("label",vO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[33]||(k[33]=Z=>ue.shapeTypes.Polygon=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.shapeTypes.Polygon]]),k[80]||(k[80]=P("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),P("label",yO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[34]||(k[34]=Z=>ue.shapeTypes.Line=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.shapeTypes.Line]]),k[81]||(k[81]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),P("label",_O,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[35]||(k[35]=Z=>ue.shapeTypes.ElevationLine=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.shapeTypes.ElevationLine]]),k[82]||(k[82]=P("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimtriques",-1))]),P("label",bO,[In(P("input",{type:"checkbox","onUpdate:modelValue":k[36]||(k[36]=Z=>ue.shapeTypes.Note=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,ue.shapeTypes.Note]]),k[83]||(k[83]=P("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),P("div",{class:"pt-2"},[P("button",{onClick:me,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])):dn("",!0)]),e.selectedShape&&V.value&&V.value.type==="ElevationLine"?($e(),qe("div",wO,[P("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[37]||(k[37]=Z=>Y("samplePoints"))},[k[86]||(k[86]=P("span",null,"Points d'chantillonnage",-1)),($e(),qe("svg",{class:zi(["w-4 h-4",{"rotate-180":!u.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[85]||(k[85]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),In(P("div",xO,[P("div",LO,[k[91]||(k[91]=P("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),P("div",SO,[P("div",null,[k[87]||(k[87]=P("label",{class:"text-xs text-gray-600"},"Taille",-1)),In(P("input",{type:"number","onUpdate:modelValue":k[38]||(k[38]=Z=>O.value.radius=Z),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:R},null,544),[[ni,O.value.radius]])]),P("div",null,[k[88]||(k[88]=P("label",{class:"text-xs text-gray-600"},"Couleur",-1)),In(P("input",{type:"color","onUpdate:modelValue":k[39]||(k[39]=Z=>O.value.color=Z),class:"w-full h-8 px-1 border rounded",onChange:R},null,544),[[ni,O.value.color]])]),P("div",null,[k[89]||(k[89]=P("label",{class:"text-xs text-gray-600"},"Opacit",-1)),In(P("input",{type:"range","onUpdate:modelValue":k[40]||(k[40]=Z=>O.value.fillOpacity=Z),min:"0",max:"1",step:"0.1",class:"w-full",onChange:R},null,544),[[ni,O.value.fillOpacity]])]),P("div",null,[k[90]||(k[90]=P("label",{class:"text-xs text-gray-600"},"Bordure",-1)),In(P("input",{type:"number","onUpdate:modelValue":k[41]||(k[41]=Z=>O.value.weight=Z),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:R},null,544),[[ni,O.value.weight]])])])]),P("div",null,[k[95]||(k[95]=P("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),P("div",CO,[P("div",null,[k[92]||(k[92]=P("label",{class:"text-xs text-gray-600"},"Taille",-1)),In(P("input",{type:"number","onUpdate:modelValue":k[42]||(k[42]=Z=>$.value.radius=Z),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:te},null,544),[[ni,$.value.radius]])]),P("div",null,[k[93]||(k[93]=P("label",{class:"text-xs text-gray-600"},"Bordure",-1)),In(P("input",{type:"number","onUpdate:modelValue":k[43]||(k[43]=Z=>$.value.weight=Z),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:te},null,544),[[ni,$.value.weight]])]),P("div",null,[k[94]||(k[94]=P("label",{class:"text-xs text-gray-600"},"Opacit",-1)),In(P("input",{type:"range","onUpdate:modelValue":k[44]||(k[44]=Z=>$.value.fillOpacity=Z),min:"0",max:"1",step:"0.1",class:"w-full",onChange:te},null,544),[[ni,$.value.fillOpacity]])])])])],512),[[G0,!u.value.samplePoints]])])):dn("",!0)])}}}),PO=rm(EO,[["__scopeId","data-v-9dccca1e"]]),MO={class:"map-toolbar w-full"},AO={class:"hidden md:flex items-center space-x-2"},kO={class:"dropdown"},TO={class:"dropdown-menu"},NO=["onClick"],DO={key:0,class:"border-l pl-2 flex-1"},BO={class:"flex items-center"},OO={class:"plan-info"},IO={class:"plan-name"},RO={key:0,class:"plan-description"},FO={class:"border-l pl-2 ml-auto"},jO={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},zO={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$O={key:"saving"},UO={key:"success",class:"save-success-text"},VO={key:"default"},HO={class:"md:hidden"},GO={class:"flex justify-between items-center"},qO={key:0,class:"truncate mx-2 text-sm font-medium"},WO={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[2000] fixed left-0 right-0 w-full"},ZO={class:"flex justify-between items-center mb-3 border-b pb-2"},KO={class:"flex flex-col space-y-4"},YO={key:0,class:"flex flex-col pb-3 border-b"},JO={class:"text-sm font-semibold text-gray-800"},XO={key:0,class:"text-xs text-gray-600 mt-1"},QO={class:"flex flex-col"},eI={class:"grid grid-cols-3 gap-2"},tI=["onClick"],nI={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rI={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},iI={key:"saving"},oI={key:"success",class:"save-success-text"},sI={key:"default"},aI=cs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:n}){const t=n,r=e,i=Ft("Hybride"),s=Ft(!1),o=D=>{const O=D.currentTarget,$=O.nextElementSibling;if($&&$.classList.contains("dropdown-menu")){const K=O.getBoundingClientRect();$.style.top=`${K.bottom}px`,$.style.left=`${K.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},f=gr(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=D=>{i.value=D,t("change-map-type",D),T()},g=()=>{t("create-new-plan"),T()},y=()=>{t("load-plan"),T()},x=()=>{t("save-plan"),T()},_=()=>{t("adjust-view"),T()},E=()=>{t("generate-summary"),T()},T=()=>{s.value=!1};return(D,O)=>($e(),qe("div",MO,[P("div",AO,[P("div",kO,[P("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[O[2]||(O[2]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),P("span",null,Zt(u[i.value]),1)],32),P("div",TO,[($e(),qe(Rn,null,Rr(u,($,K)=>P("button",{key:K,class:zi(["dropdown-item",{active:K===i.value}]),onClick:X=>d(K)},Zt($),11,NO)),64))])]),D.planName?($e(),qe("div",DO,[P("div",BO,[P("div",OO,[P("h2",IO,Zt(D.planName),1),D.planDescription?($e(),qe("p",RO,Zt(D.planDescription),1)):dn("",!0)])])])):dn("",!0),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:g,class:"btn-toolbar",title:"Nouveau plan"},O[3]||(O[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),P("button",{onClick:y,class:"btn-toolbar",title:"Charger un plan"},O[4]||(O[4]=[uc('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-a33ebaa5><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-a33ebaa5></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-a33ebaa5></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-a33ebaa5></path></svg><span class="hidden lg:inline ml-1" data-v-a33ebaa5>Charger</span>',2)])),P("button",{onClick:x,class:"btn-toolbar",title:"Enregistrer le plan"},O[5]||(O[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:_,class:"btn-toolbar",title:"Ajuster la vue"},O[6]||(O[6]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),P("button",{onClick:E,class:"btn-toolbar",title:"Gnrer une synthse"},O[7]||(O[7]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),P("div",FO,[P("div",{class:zi(["text-xs hidden lg:flex items-center",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?($e(),qe("svg",jO,O[8]||(O[8]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dn("",!0),D.saveStatus==="success"?($e(),qe("svg",zO,O[9]||(O[9]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):dn("",!0),fi(Vv,{name:"fade-slide",mode:"out-in"},{default:Hl(()=>[D.saveStatus==="saving"?($e(),qe("span",$O," Sauvegarde en cours... ")):D.saveStatus==="success"?($e(),qe("span",UO," Sauvegarde russie ! ")):($e(),qe("span",VO," Dernire modification : "+Zt(f.value),1))]),_:1})],2)])]),P("div",HO,[P("div",GO,[P("button",{onClick:O[0]||(O[0]=$=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},O[10]||(O[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),D.planName?($e(),qe("div",qO,Zt(D.planName),1)):dn("",!0),P("div",{class:"flex space-x-2"},[P("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},O[11]||(O[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),P("button",{onClick:x,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},O[12]||(O[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),P("button",{onClick:_,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},O[13]||(O[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?($e(),qe("div",WO,[P("div",ZO,[O[15]||(O[15]=P("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),P("button",{onClick:O[1]||(O[1]=$=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},O[14]||(O[14]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",KO,[D.planName?($e(),qe("div",YO,[P("h3",JO,Zt(D.planName),1),D.planDescription?($e(),qe("p",XO,Zt(D.planDescription),1)):dn("",!0)])):dn("",!0),P("div",QO,[O[16]||(O[16]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),P("div",eI,[($e(),qe(Rn,null,Rr(u,($,K)=>P("button",{key:K,class:zi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":K===i.value}]),onClick:X=>d(K)},Zt($),11,tI)),64))])]),P("div",{class:"flex flex-col"},[O[20]||(O[20]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),P("div",{class:"grid grid-cols-3 gap-2"},[P("button",{onClick:g,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},O[17]||(O[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Ei(" Nouveau ")])),P("button",{onClick:y,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},O[18]||(O[18]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),P("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),P("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Ei(" Charger ")])),P("button",{onClick:E,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},O[19]||(O[19]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Ei(" Synthse ")]))])]),P("div",{class:zi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?($e(),qe("svg",nI,O[21]||(O[21]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dn("",!0),D.saveStatus==="success"?($e(),qe("svg",rI,O[22]||(O[22]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):dn("",!0),fi(Vv,{name:"fade-slide",mode:"out-in"},{default:Hl(()=>[D.saveStatus==="saving"?($e(),qe("span",iI," Sauvegarde en cours... ")):D.saveStatus==="success"?($e(),qe("span",oI," Sauvegarde russie ! ")):($e(),qe("span",sI," Dernire modification : "+Zt(f.value),1))]),_:1})],2)])])):dn("",!0)])]))}}),lI=rm(aI,[["__scopeId","data-v-a33ebaa5"]]),uI={class:"comment-thread"},cI={key:0,class:"space-y-3 mb-4"},fI={class:"flex justify-between items-start"},hI={class:"flex items-center"},dI={class:"font-medium text-sm text-gray-900"},pI={class:"flex items-center"},gI={class:"text-xs text-gray-500"},mI=["onClick"],vI={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},yI={key:1,class:"text-center text-sm text-gray-500 italic my-4"},_I={key:2,class:"mt-3"},bI={class:"flex justify-end mt-2"},wI=["disabled"],xI={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},LI=cs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments"],setup(e,{emit:n}){const t=e,r=ma(),i=Dp(),s=dc(),o=Ft(""),u=gr(()=>r.isEntreprise||r.isAdmin);function f(E){return r.user&&E.userId===r.user.id||r.isAdmin}async function d(){var E;if(o.value.trim())try{await i.addComment(t.noteId,o.value.trim()),o.value="",s.success("Commentaire ajout avec succs")}catch(T){if(console.error("Erreur lors de l'ajout du commentaire:",T),(E=T.response)!=null&&E.data){const D=T.response.data;D.note?s.error(`Erreur: ${D.note[0]}`):D.user?s.error(`Erreur: ${D.user[0]}`):D.text?s.error(`Erreur: ${D.text[0]}`):s.error("Erreur lors de l'ajout du commentaire")}else s.error("Erreur lors de l'ajout du commentaire")}}async function g(E){var T;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await i.removeComment(t.noteId,E),s.success("Commentaire supprim")}catch(D){if(console.error("Erreur lors de la suppression du commentaire:",D),(T=D.response)!=null&&T.data){const O=D.response.data;O.detail?s.error(`Erreur: ${O.detail}`):s.error("Erreur lors de la suppression du commentaire")}else s.error("Erreur lors de la suppression du commentaire")}}function y(E){const T=new Date(E);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(T)}function x(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function _(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return E}}return(E,T)=>($e(),qe("div",uI,[E.comments&&E.comments.length>0?($e(),qe("div",cI,[($e(!0),qe(Rn,null,Rr(E.comments,D=>($e(),qe("div",{key:D.id,class:"bg-gray-50 rounded-lg p-3"},[P("div",fI,[P("div",hI,[P("div",dI,Zt(D.userName),1),P("span",{class:zi(["ml-2 text-xs px-2 py-0.5 rounded-full",x(D.userRole)])},Zt(_(D.userRole)),3)]),P("div",pI,[P("span",gI,Zt(y(D.createdAt)),1),f(D)?($e(),qe("button",{key:0,onClick:O=>g(D.id),class:"ml-2 text-gray-400 hover:text-red-500"},T[1]||(T[1]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,mI)):dn("",!0)])]),P("p",vI,Zt(D.text),1)]))),128))])):($e(),qe("div",yI," Aucun commentaire pour le moment ")),u.value?($e(),qe("div",_I,[In(P("textarea",{"onUpdate:modelValue":T[0]||(T[0]=D=>o.value=D),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[ni,o.value]]),P("div",bI,[P("button",{onClick:d,disabled:!o.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,wI)])])):($e(),qe("div",xI," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),SI={class:"photo-gallery"},CI={key:0,class:"grid grid-cols-2 gap-2 mb-4"},EI=["src","alt","onClick"],PI={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},MI={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},AI=["onClick"],kI=["onClick"],TI={key:0,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg"},NI={key:1,class:"text-center text-sm text-gray-500 italic my-4"},DI={class:"flex space-x-2 mt-3"},BI={for:"photo-upload",class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},OI={key:2,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},II={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},RI=["src","alt"],FI={key:1,class:"p-3 bg-white"},jI={class:"text-sm text-gray-700"},zI={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},$I={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},UI={class:"p-4"},VI={class:"p-4 bg-gray-50 flex justify-end space-x-3"},HI={key:4,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},GI={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},qI={class:"p-4 border-b flex justify-between items-center"},WI={class:"relative"},ZI=["src"],KI={class:"p-4 bg-gray-50 flex justify-center"},YI={key:1,class:"flex space-x-3"},JI=cs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos"],setup(e,{emit:n}){const t=e,r=Dp(),i=dc(),s=Ft(null),o=Ft(null);let u=null;const f=Ft(!1),d=Ft(!1),g=Ft(!1),y=Ft(null),x=Ft(null),_=Ft(""),E=Ft(null);function T(Y){y.value=Y,f.value=!0}function D(Y){x.value=Y,_.value=Y.caption||"",d.value=!0}function O(){if(x.value)try{r.updatePhoto(t.noteId,x.value.id,_.value),d.value=!1,i.success("Lgende mise  jour")}catch(Y){console.error("Erreur lors de la mise  jour de la lgende:",Y),i.error("Erreur lors de la mise  jour de la lgende")}}function $(Y){if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{r.removePhoto(t.noteId,Y),i.success("Photo supprime")}catch(F){console.error("Erreur lors de la suppression de la photo:",F),i.error("Erreur lors de la suppression de la photo")}}async function K(Y){const F=Y.target;if(!F.files||F.files.length===0)return;const I=F.files[0];if(!I.type.startsWith("image/")){i.error("Le fichier doit tre une image");return}if(I.size>5*1024*1024){i.error("L'image est trop volumineuse (max 5MB)");return}try{const j=await X(I);r.addPhoto(t.noteId,{url:j}),F.value="",i.success("Photo ajoute")}catch(j){console.error("Erreur lors de l'ajout de la photo:",j),i.error("Erreur lors de l'ajout de la photo")}}function X(Y){return new Promise((F,I)=>{const j=new FileReader;j.onload=()=>F(j.result),j.onerror=I,j.readAsDataURL(Y)})}async function ae(){g.value=!0,E.value=null;try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),s.value&&(s.value.srcObject=u)}catch(Y){console.error("Erreur lors de l'accs  la camra:",Y),i.error("Impossible d'accder  la camra"),g.value=!1}}function ue(){if(!s.value||!o.value)return;const Y=s.value,F=o.value;F.width=Y.videoWidth,F.height=Y.videoHeight;const I=F.getContext("2d");I&&(I.drawImage(Y,0,0,F.width,F.height),E.value=F.toDataURL("image/jpeg"))}function Le(){E.value=null}function W(){if(E.value)try{r.addPhoto(t.noteId,{url:E.value}),g.value=!1,V(),i.success("Photo ajoute")}catch(Y){console.error("Erreur lors de l'ajout de la photo:",Y),i.error("Erreur lors de l'ajout de la photo")}}function V(){u&&(u.getTracks().forEach(Y=>Y.stop()),u=null)}return mc(()=>{V()}),(Y,F)=>($e(),qe("div",SI,[Y.photos&&Y.photos.length>0?($e(),qe("div",CI,[($e(!0),qe(Rn,null,Rr(Y.photos,I=>($e(),qe("div",{key:I.id,class:"relative group"},[P("img",{src:I.url,alt:I.caption||"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:j=>T(I)},null,8,EI),P("div",PI,[P("div",MI,[P("button",{onClick:Lf(j=>D(I),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-primary-600",title:"Modifier la lgende"},F[4]||(F[4]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,AI),P("button",{onClick:Lf(j=>$(I.id),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},F[5]||(F[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,kI)])]),I.caption?($e(),qe("div",TI,Zt(I.caption),1)):dn("",!0)]))),128))])):($e(),qe("div",NI," Aucune photo pour le moment ")),P("div",DI,[P("button",{onClick:ae,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},F[6]||(F[6]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Ei(" Prendre une photo ")])),P("label",BI,[F[7]||(F[7]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1)),F[8]||(F[8]=Ei(" Tlverser ")),P("input",{id:"photo-upload",type:"file",accept:"image/*",class:"hidden",onChange:K},null,32)])]),f.value?($e(),qe("div",OI,[P("div",II,[P("button",{onClick:F[0]||(F[0]=I=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},F[9]||(F[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?($e(),qe("img",{key:0,src:y.value.url,alt:y.value.caption||"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,RI)):dn("",!0),y.value&&y.value.caption?($e(),qe("div",FI,[P("p",jI,Zt(y.value.caption),1)])):dn("",!0)])])):dn("",!0),d.value?($e(),qe("div",zI,[P("div",$I,[F[10]||(F[10]=P("div",{class:"p-4 border-b"},[P("h3",{class:"text-lg font-medium text-gray-900"},"Modifier la lgende")],-1)),P("div",UI,[In(P("textarea",{"onUpdate:modelValue":F[1]||(F[1]=I=>_.value=I),placeholder:"Ajouter une lgende...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3"},null,512),[[ni,_.value]])]),P("div",VI,[P("button",{onClick:F[2]||(F[2]=I=>d.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Annuler "),P("button",{onClick:O,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Enregistrer ")])])])):dn("",!0),g.value?($e(),qe("div",HI,[P("div",GI,[P("div",qI,[F[12]||(F[12]=P("h3",{class:"text-lg font-medium text-gray-900"},"Prendre une photo",-1)),P("button",{onClick:F[3]||(F[3]=I=>g.value=!1),class:"text-gray-400 hover:text-gray-500"},F[11]||(F[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",WI,[E.value?($e(),qe("img",{key:1,src:E.value,class:"w-full h-64 object-cover",alt:"Captured"},null,8,ZI)):($e(),qe("video",{key:0,ref_key:"videoElement",ref:s,autoplay:"",class:"w-full h-64 object-cover"},null,512)),P("canvas",{ref_key:"canvasElement",ref:o,class:"hidden"},null,512)]),P("div",KI,[E.value?($e(),qe("div",YI,[P("button",{onClick:Le,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),P("button",{onClick:W,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):($e(),qe("button",{key:0,onClick:ue,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},F[13]||(F[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])])):dn("",!0)]))}}),XI={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},QI={class:"flex items-center justify-center min-h-screen w-full"},eR={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},tR={class:"p-4 md:p-6 flex-1 overflow-y-auto"},nR={class:"flex justify-between items-center mb-4 border-b pb-4"},rR={class:"text-xl font-semibold text-gray-900"},iR={class:"mb-4 border-b border-gray-200"},oR={class:"flex space-x-4","aria-label":"Tabs"},sR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},aR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},lR={key:0},uR={class:"mb-4"},cR={class:"mb-4"},fR={class:"mb-4"},hR=["value"],dR={class:"mb-4"},pR=["value"],gR={class:"mb-4"},mR={class:"mt-1 flex space-x-2"},vR=["onClick"],yR={key:1,class:"mt-4"},_R={key:2,class:"mt-4"},hx=cs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(e,{emit:n}){const t=e,r=n,i=Dp(),s=dc(),o=Ft("info"),u=Ft({title:"",description:"",columnId:"",accessLevel:yo.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});$s(()=>{console.log("[NoteEditModal] onMounted - props:",t),t.note?(console.log("[NoteEditModal] dition d'une note existante:",t.note),u.value=JSON.parse(JSON.stringify(t.note))):t.isNewNote&&t.location?(console.log("[NoteEditModal] Cration d'une nouvelle note avec location:",t.location),u.value={title:"Nouvelle note",description:"",location:t.location,columnId:i.getDefaultColumn.id,accessLevel:yo.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]}):console.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note avec location"),console.log("[NoteEditModal] editingNote.value aprs initialisation:",u.value)});const f=gr(()=>i.getSortedColumns),d=[{id:yo.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:yo.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:yo.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:yo.VISITOR,title:"Visiteurs",description:"Visible par tous"}],g=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"];function y(E){var D;u.value.style.color=E,u.value.style.fillColor=E;const T=new CustomEvent("geonote:updateStyle",{detail:{noteId:(D=t.note)==null?void 0:D.id,style:{color:E,fillColor:E}}});window.dispatchEvent(T)}function x(){r("close")}async function _(){try{const E={title:u.value.title,description:u.value.description,location:u.value.location,columnId:u.value.columnId,style:u.value.style,accessLevel:u.value.accessLevel,comments:u.value.comments||[],photos:u.value.photos||[]};if(t.note)await lc.updateNote(t.note.id,E),i.updateNote(t.note.id,u.value),s.success("Note mise  jour avec succs");else if(t.isNewNote&&t.location){const D=(await lc.createNote(E)).data.id;i.addNote({title:E.title,description:E.description,location:E.location,columnId:E.columnId,style:E.style}),s.success("Note cre avec succs");const O=i.notes.find($=>$.id===D);O&&r("save",O)}r("close")}catch(E){console.error("Erreur lors de la sauvegarde de la note:",E),s.error("Erreur lors de la sauvegarde de la note")}}return(E,T)=>{var D,O,$,K,X;return $e(),qe("div",XI,[P("div",QI,[T[16]||(T[16]=P("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),P("div",eR,[P("form",{onSubmit:Lf(_,["prevent"]),class:"h-full md:h-auto flex flex-col"},[P("div",tR,[P("div",nR,[P("h3",rR,Zt((D=E.note)!=null&&D.id?"Modifier la note":"Nouvelle note"),1),P("button",{type:"button",onClick:x,class:"text-gray-400 hover:text-gray-500"},T[7]||(T[7]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",iR,[P("nav",oR,[P("button",{type:"button",onClick:T[0]||(T[0]=ae=>o.value="info"),class:zi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),P("button",{type:"button",onClick:T[1]||(T[1]=ae=>o.value="comments"),class:zi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[8]||(T[8]=Ei(" Commentaires ")),($=(O=E.note)==null?void 0:O.comments)!=null&&$.length?($e(),qe("span",sR,Zt(E.note.comments.length),1)):dn("",!0)],2),P("button",{type:"button",onClick:T[2]||(T[2]=ae=>o.value="photos"),class:zi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[9]||(T[9]=Ei(" Photos ")),(X=(K=E.note)==null?void 0:K.photos)!=null&&X.length?($e(),qe("span",aR,Zt(E.note.photos.length),1)):dn("",!0)],2)])]),o.value==="info"?($e(),qe("div",lR,[P("div",uR,[T[10]||(T[10]=P("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),In(P("input",{type:"text",id:"title","onUpdate:modelValue":T[3]||(T[3]=ae=>u.value.title=ae),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ni,u.value.title]])]),P("div",cR,[T[11]||(T[11]=P("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),In(P("textarea",{id:"description","onUpdate:modelValue":T[4]||(T[4]=ae=>u.value.description=ae),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ni,u.value.description]])]),P("div",fR,[T[12]||(T[12]=P("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"tat",-1)),In(P("select",{id:"column","onUpdate:modelValue":T[5]||(T[5]=ae=>u.value.columnId=ae),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(!0),qe(Rn,null,Rr(f.value,ae=>($e(),qe("option",{key:ae.id,value:ae.id},Zt(ae.title),9,hR))),128))],512),[[lo,u.value.columnId]])]),P("div",dR,[T[13]||(T[13]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),In(P("select",{id:"accessLevel","onUpdate:modelValue":T[6]||(T[6]=ae=>u.value.accessLevel=ae),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(),qe(Rn,null,Rr(d,ae=>P("option",{key:ae.id,value:ae.id},Zt(ae.title)+" - "+Zt(ae.description),9,pR)),64))],512),[[lo,u.value.accessLevel]])]),P("div",gR,[T[14]||(T[14]=P("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),P("div",mR,[($e(),qe(Rn,null,Rr(g,ae=>P("div",{key:ae,class:zi(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":u.value.style.color!==ae,"border-black":u.value.style.color===ae}]),style:pu({backgroundColor:ae}),onClick:ue=>y(ae)},null,14,vR)),64))])])])):o.value==="comments"?($e(),qe("div",yR,[E.note?($e(),$a(LI,{key:0,noteId:E.note.id,comments:E.note.comments||[]},null,8,["noteId","comments"])):dn("",!0)])):o.value==="photos"?($e(),qe("div",_R,[E.note?($e(),$a(JI,{key:0,noteId:E.note.id,photos:E.note.photos||[]},null,8,["noteId","photos"])):dn("",!0)])):dn("",!0)]),P("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[T[15]||(T[15]=P("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),P("button",{onClick:x,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var Sn,Xn;var e=Object.create,n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(l,h)=>()=>(h||l((h={exports:{}}).exports,h),h.exports),u=(l,h,v,w)=>{if(h&&typeof h=="object"||typeof h=="function")for(let C of r(h))!s.call(l,C)&&C!==v&&n(l,C,{get:()=>h[C],enumerable:!(w=t(h,C))||w.enumerable});return l},f=(l,h,v)=>(v=l!=null?e(i(l)):{},u(h||!l||!l.__esModule?n(v,"default",{value:l,enumerable:!0}):v,l)),d=o((l,h)=>{function v(){this.__data__=[],this.size=0}h.exports=v}),g=o((l,h)=>{function v(w,C){return w===C||w!==w&&C!==C}h.exports=v}),y=o((l,h)=>{var v=g();function w(C,z){for(var J=C.length;J--;)if(v(C[J][0],z))return J;return-1}h.exports=w}),x=o((l,h)=>{var v=y(),w=Array.prototype,C=w.splice;function z(J){var ne=this.__data__,he=v(ne,J);if(he<0)return!1;var Se=ne.length-1;return he==Se?ne.pop():C.call(ne,he,1),--this.size,!0}h.exports=z}),_=o((l,h)=>{var v=y();function w(C){var z=this.__data__,J=v(z,C);return J<0?void 0:z[J][1]}h.exports=w}),E=o((l,h)=>{var v=y();function w(C){return v(this.__data__,C)>-1}h.exports=w}),T=o((l,h)=>{var v=y();function w(C,z){var J=this.__data__,ne=v(J,C);return ne<0?(++this.size,J.push([C,z])):J[ne][1]=z,this}h.exports=w}),D=o((l,h)=>{var v=d(),w=x(),C=_(),z=E(),J=T();function ne(he){var Se=-1,Je=he==null?0:he.length;for(this.clear();++Se<Je;){var je=he[Se];this.set(je[0],je[1])}}ne.prototype.clear=v,ne.prototype.delete=w,ne.prototype.get=C,ne.prototype.has=z,ne.prototype.set=J,h.exports=ne}),O=o((l,h)=>{var v=D();function w(){this.__data__=new v,this.size=0}h.exports=w}),$=o((l,h)=>{function v(w){var C=this.__data__,z=C.delete(w);return this.size=C.size,z}h.exports=v}),K=o((l,h)=>{function v(w){return this.__data__.get(w)}h.exports=v}),X=o((l,h)=>{function v(w){return this.__data__.has(w)}h.exports=v}),ae=o((l,h)=>{var v=typeof ea=="object"&&ea&&ea.Object===Object&&ea;h.exports=v}),ue=o((l,h)=>{var v=ae(),w=typeof self=="object"&&self&&self.Object===Object&&self,C=v||w||Function("return this")();h.exports=C}),Le=o((l,h)=>{var v=ue(),w=v.Symbol;h.exports=w}),W=o((l,h)=>{var v=Le(),w=Object.prototype,C=w.hasOwnProperty,z=w.toString,J=v?v.toStringTag:void 0;function ne(he){var Se=C.call(he,J),Je=he[J];try{he[J]=void 0;var je=!0}catch{}var vt=z.call(he);return je&&(Se?he[J]=Je:delete he[J]),vt}h.exports=ne}),V=o((l,h)=>{var v=Object.prototype,w=v.toString;function C(z){return w.call(z)}h.exports=C}),Y=o((l,h)=>{var v=Le(),w=W(),C=V(),z="[object Null]",J="[object Undefined]",ne=v?v.toStringTag:void 0;function he(Se){return Se==null?Se===void 0?J:z:ne&&ne in Object(Se)?w(Se):C(Se)}h.exports=he}),F=o((l,h)=>{function v(w){var C=typeof w;return w!=null&&(C=="object"||C=="function")}h.exports=v}),I=o((l,h)=>{var v=Y(),w=F(),C="[object AsyncFunction]",z="[object Function]",J="[object GeneratorFunction]",ne="[object Proxy]";function he(Se){if(!w(Se))return!1;var Je=v(Se);return Je==z||Je==J||Je==C||Je==ne}h.exports=he}),j=o((l,h)=>{var v=ue(),w=v["__core-js_shared__"];h.exports=w}),H=o((l,h)=>{var v=j(),w=function(){var z=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}();function C(z){return!!w&&w in z}h.exports=C}),U=o((l,h)=>{var v=Function.prototype,w=v.toString;function C(z){if(z!=null){try{return w.call(z)}catch{}try{return z+""}catch{}}return""}h.exports=C}),R=o((l,h)=>{var v=I(),w=H(),C=F(),z=U(),J=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,he=Function.prototype,Se=Object.prototype,Je=he.toString,je=Se.hasOwnProperty,vt=RegExp("^"+Je.call(je).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Xt){if(!C(Xt)||w(Xt))return!1;var yn=v(Xt)?vt:ne;return yn.test(z(Xt))}h.exports=At}),te=o((l,h)=>{function v(w,C){return w==null?void 0:w[C]}h.exports=v}),re=o((l,h)=>{var v=R(),w=te();function C(z,J){var ne=w(z,J);return v(ne)?ne:void 0}h.exports=C}),me=o((l,h)=>{var v=re(),w=ue(),C=v(w,"Map");h.exports=C}),xe=o((l,h)=>{var v=re(),w=v(Object,"create");h.exports=w}),We=o((l,h)=>{var v=xe();function w(){this.__data__=v?v(null):{},this.size=0}h.exports=w}),N=o((l,h)=>{function v(w){var C=this.has(w)&&delete this.__data__[w];return this.size-=C?1:0,C}h.exports=v}),ee=o((l,h)=>{var v=xe(),w="__lodash_hash_undefined__",C=Object.prototype,z=C.hasOwnProperty;function J(ne){var he=this.__data__;if(v){var Se=he[ne];return Se===w?void 0:Se}return z.call(he,ne)?he[ne]:void 0}h.exports=J}),fe=o((l,h)=>{var v=xe(),w=Object.prototype,C=w.hasOwnProperty;function z(J){var ne=this.__data__;return v?ne[J]!==void 0:C.call(ne,J)}h.exports=z}),ce=o((l,h)=>{var v=xe(),w="__lodash_hash_undefined__";function C(z,J){var ne=this.__data__;return this.size+=this.has(z)?0:1,ne[z]=v&&J===void 0?w:J,this}h.exports=C}),ye=o((l,h)=>{var v=We(),w=N(),C=ee(),z=fe(),J=ce();function ne(he){var Se=-1,Je=he==null?0:he.length;for(this.clear();++Se<Je;){var je=he[Se];this.set(je[0],je[1])}}ne.prototype.clear=v,ne.prototype.delete=w,ne.prototype.get=C,ne.prototype.has=z,ne.prototype.set=J,h.exports=ne}),se=o((l,h)=>{var v=ye(),w=D(),C=me();function z(){this.size=0,this.__data__={hash:new v,map:new(C||w),string:new v}}h.exports=z}),k=o((l,h)=>{function v(w){var C=typeof w;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?w!=="__proto__":w===null}h.exports=v}),le=o((l,h)=>{var v=k();function w(C,z){var J=C.__data__;return v(z)?J[typeof z=="string"?"string":"hash"]:J.map}h.exports=w}),ke=o((l,h)=>{var v=le();function w(C){var z=v(this,C).delete(C);return this.size-=z?1:0,z}h.exports=w}),Pe=o((l,h)=>{var v=le();function w(C){return v(this,C).get(C)}h.exports=w}),Ve=o((l,h)=>{var v=le();function w(C){return v(this,C).has(C)}h.exports=w}),Z=o((l,h)=>{var v=le();function w(C,z){var J=v(this,C),ne=J.size;return J.set(C,z),this.size+=J.size==ne?0:1,this}h.exports=w}),de=o((l,h)=>{var v=se(),w=ke(),C=Pe(),z=Ve(),J=Z();function ne(he){var Se=-1,Je=he==null?0:he.length;for(this.clear();++Se<Je;){var je=he[Se];this.set(je[0],je[1])}}ne.prototype.clear=v,ne.prototype.delete=w,ne.prototype.get=C,ne.prototype.has=z,ne.prototype.set=J,h.exports=ne}),ve=o((l,h)=>{var v=D(),w=me(),C=de(),z=200;function J(ne,he){var Se=this.__data__;if(Se instanceof v){var Je=Se.__data__;if(!w||Je.length<z-1)return Je.push([ne,he]),this.size=++Se.size,this;Se=this.__data__=new C(Je)}return Se.set(ne,he),this.size=Se.size,this}h.exports=J}),pe=o((l,h)=>{var v=D(),w=O(),C=$(),z=K(),J=X(),ne=ve();function he(Se){var Je=this.__data__=new v(Se);this.size=Je.size}he.prototype.clear=w,he.prototype.delete=C,he.prototype.get=z,he.prototype.has=J,he.prototype.set=ne,h.exports=he}),ze=o((l,h)=>{var v=re(),w=function(){try{var C=v(Object,"defineProperty");return C({},"",{}),C}catch{}}();h.exports=w}),Qe=o((l,h)=>{var v=ze();function w(C,z,J){z=="__proto__"&&v?v(C,z,{configurable:!0,enumerable:!0,value:J,writable:!0}):C[z]=J}h.exports=w}),Ke=o((l,h)=>{var v=Qe(),w=g();function C(z,J,ne){(ne!==void 0&&!w(z[J],ne)||ne===void 0&&!(J in z))&&v(z,J,ne)}h.exports=C}),He=o((l,h)=>{function v(w){return function(C,z,J){for(var ne=-1,he=Object(C),Se=J(C),Je=Se.length;Je--;){var je=Se[w?Je:++ne];if(z(he[je],je,he)===!1)break}return C}}h.exports=v}),Xe=o((l,h)=>{var v=He(),w=v();h.exports=w}),ot=o((l,h)=>{var v=ue(),w=typeof l=="object"&&l&&!l.nodeType&&l,C=w&&typeof h=="object"&&h&&!h.nodeType&&h,z=C&&C.exports===w,J=z?v.Buffer:void 0,ne=J?J.allocUnsafe:void 0;function he(Se,Je){if(Je)return Se.slice();var je=Se.length,vt=ne?ne(je):new Se.constructor(je);return Se.copy(vt),vt}h.exports=he}),kt=o((l,h)=>{var v=ue(),w=v.Uint8Array;h.exports=w}),Ct=o((l,h)=>{var v=kt();function w(C){var z=new C.constructor(C.byteLength);return new v(z).set(new v(C)),z}h.exports=w}),Ut=o((l,h)=>{var v=Ct();function w(C,z){var J=z?v(C.buffer):C.buffer;return new C.constructor(J,C.byteOffset,C.length)}h.exports=w}),Gt=o((l,h)=>{function v(w,C){var z=-1,J=w.length;for(C||(C=Array(J));++z<J;)C[z]=w[z];return C}h.exports=v}),cn=o((l,h)=>{var v=F(),w=Object.create,C=function(){function z(){}return function(J){if(!v(J))return{};if(w)return w(J);z.prototype=J;var ne=new z;return z.prototype=void 0,ne}}();h.exports=C}),pn=o((l,h)=>{function v(w,C){return function(z){return w(C(z))}}h.exports=v}),et=o((l,h)=>{var v=pn(),w=v(Object.getPrototypeOf,Object);h.exports=w}),it=o((l,h)=>{var v=Object.prototype;function w(C){var z=C&&C.constructor,J=typeof z=="function"&&z.prototype||v;return C===J}h.exports=w}),nt=o((l,h)=>{var v=cn(),w=et(),C=it();function z(J){return typeof J.constructor=="function"&&!C(J)?v(w(J)):{}}h.exports=z}),Vt=o((l,h)=>{function v(w){return w!=null&&typeof w=="object"}h.exports=v}),Qt=o((l,h)=>{var v=Y(),w=Vt(),C="[object Arguments]";function z(J){return w(J)&&v(J)==C}h.exports=z}),On=o((l,h)=>{var v=Qt(),w=Vt(),C=Object.prototype,z=C.hasOwnProperty,J=C.propertyIsEnumerable,ne=v(function(){return arguments}())?v:function(he){return w(he)&&z.call(he,"callee")&&!J.call(he,"callee")};h.exports=ne}),wn=o((l,h)=>{var v=Array.isArray;h.exports=v}),Tn=o((l,h)=>{var v=9007199254740991;function w(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=v}h.exports=w}),ar=o((l,h)=>{var v=I(),w=Tn();function C(z){return z!=null&&w(z.length)&&!v(z)}h.exports=C}),xn=o((l,h)=>{var v=ar(),w=Vt();function C(z){return w(z)&&v(z)}h.exports=C}),Mn=o((l,h)=>{function v(){return!1}h.exports=v}),En=o((l,h)=>{var v=ue(),w=Mn(),C=typeof l=="object"&&l&&!l.nodeType&&l,z=C&&typeof h=="object"&&h&&!h.nodeType&&h,J=z&&z.exports===C,ne=J?v.Buffer:void 0,he=ne?ne.isBuffer:void 0,Se=he||w;h.exports=Se}),cr=o((l,h)=>{var v=Y(),w=et(),C=Vt(),z="[object Object]",J=Function.prototype,ne=Object.prototype,he=J.toString,Se=ne.hasOwnProperty,Je=he.call(Object);function je(vt){if(!C(vt)||v(vt)!=z)return!1;var At=w(vt);if(At===null)return!0;var Xt=Se.call(At,"constructor")&&At.constructor;return typeof Xt=="function"&&Xt instanceof Xt&&he.call(Xt)==Je}h.exports=je}),yr=o((l,h)=>{var v=Y(),w=Tn(),C=Vt(),z="[object Arguments]",J="[object Array]",ne="[object Boolean]",he="[object Date]",Se="[object Error]",Je="[object Function]",je="[object Map]",vt="[object Number]",At="[object Object]",Xt="[object RegExp]",yn="[object Set]",bn="[object String]",ur="[object WeakMap]",Ye="[object ArrayBuffer]",tt="[object DataView]",ft="[object Float32Array]",Bt="[object Float64Array]",bt="[object Int8Array]",Tt="[object Int16Array]",ge="[object Int32Array]",Me="[object Uint8Array]",Oe="[object Uint8ClampedArray]",Be="[object Uint16Array]",Re="[object Uint32Array]",Fe={};Fe[ft]=Fe[Bt]=Fe[bt]=Fe[Tt]=Fe[ge]=Fe[Me]=Fe[Oe]=Fe[Be]=Fe[Re]=!0,Fe[z]=Fe[J]=Fe[Ye]=Fe[ne]=Fe[tt]=Fe[he]=Fe[Se]=Fe[Je]=Fe[je]=Fe[vt]=Fe[At]=Fe[Xt]=Fe[yn]=Fe[bn]=Fe[ur]=!1;function lt(ut){return C(ut)&&w(ut.length)&&!!Fe[v(ut)]}h.exports=lt}),mt=o((l,h)=>{function v(w){return function(C){return w(C)}}h.exports=v}),Ge=o((l,h)=>{var v=ae(),w=typeof l=="object"&&l&&!l.nodeType&&l,C=w&&typeof h=="object"&&h&&!h.nodeType&&h,z=C&&C.exports===w,J=z&&v.process,ne=function(){try{var he=C&&C.require&&C.require("util").types;return he||J&&J.binding&&J.binding("util")}catch{}}();h.exports=ne}),Ot=o((l,h)=>{var v=yr(),w=mt(),C=Ge(),z=C&&C.isTypedArray,J=z?w(z):v;h.exports=J}),Pn=o((l,h)=>{function v(w,C){if(!(C==="constructor"&&typeof w[C]=="function")&&C!="__proto__")return w[C]}h.exports=v}),tr=o((l,h)=>{var v=Qe(),w=g(),C=Object.prototype,z=C.hasOwnProperty;function J(ne,he,Se){var Je=ne[he];(!(z.call(ne,he)&&w(Je,Se))||Se===void 0&&!(he in ne))&&v(ne,he,Se)}h.exports=J}),Zn=o((l,h)=>{var v=tr(),w=Qe();function C(z,J,ne,he){var Se=!ne;ne||(ne={});for(var Je=-1,je=J.length;++Je<je;){var vt=J[Je],At=he?he(ne[vt],z[vt],vt,ne,z):void 0;At===void 0&&(At=z[vt]),Se?w(ne,vt,At):v(ne,vt,At)}return ne}h.exports=C}),Wt=o((l,h)=>{function v(w,C){for(var z=-1,J=Array(w);++z<w;)J[z]=C(z);return J}h.exports=v}),mn=o((l,h)=>{var v=9007199254740991,w=/^(?:0|[1-9]\d*)$/;function C(z,J){var ne=typeof z;return J=J??v,!!J&&(ne=="number"||ne!="symbol"&&w.test(z))&&z>-1&&z%1==0&&z<J}h.exports=C}),It=o((l,h)=>{var v=Wt(),w=On(),C=wn(),z=En(),J=mn(),ne=Ot(),he=Object.prototype,Se=he.hasOwnProperty;function Je(je,vt){var At=C(je),Xt=!At&&w(je),yn=!At&&!Xt&&z(je),bn=!At&&!Xt&&!yn&&ne(je),ur=At||Xt||yn||bn,Ye=ur?v(je.length,String):[],tt=Ye.length;for(var ft in je)(vt||Se.call(je,ft))&&!(ur&&(ft=="length"||yn&&(ft=="offset"||ft=="parent")||bn&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||J(ft,tt)))&&Ye.push(ft);return Ye}h.exports=Je}),Kt=o((l,h)=>{function v(w){var C=[];if(w!=null)for(var z in Object(w))C.push(z);return C}h.exports=v}),Ln=o((l,h)=>{var v=F(),w=it(),C=Kt(),z=Object.prototype,J=z.hasOwnProperty;function ne(he){if(!v(he))return C(he);var Se=w(he),Je=[];for(var je in he)je=="constructor"&&(Se||!J.call(he,je))||Je.push(je);return Je}h.exports=ne}),mr=o((l,h)=>{var v=It(),w=Ln(),C=ar();function z(J){return C(J)?v(J,!0):w(J)}h.exports=z}),at=o((l,h)=>{var v=Zn(),w=mr();function C(z){return v(z,w(z))}h.exports=C}),Cn=o((l,h)=>{var v=Ke(),w=ot(),C=Ut(),z=Gt(),J=nt(),ne=On(),he=wn(),Se=xn(),Je=En(),je=I(),vt=F(),At=cr(),Xt=Ot(),yn=Pn(),bn=at();function ur(Ye,tt,ft,Bt,bt,Tt,ge){var Me=yn(Ye,ft),Oe=yn(tt,ft),Be=ge.get(Oe);if(Be){v(Ye,ft,Be);return}var Re=Tt?Tt(Me,Oe,ft+"",Ye,tt,ge):void 0,Fe=Re===void 0;if(Fe){var lt=he(Oe),ut=!lt&&Je(Oe),pt=!lt&&!ut&&Xt(Oe);Re=Oe,lt||ut||pt?he(Me)?Re=Me:Se(Me)?Re=z(Me):ut?(Fe=!1,Re=w(Oe,!0)):pt?(Fe=!1,Re=C(Oe,!0)):Re=[]:At(Oe)||ne(Oe)?(Re=Me,ne(Me)?Re=bn(Me):(!vt(Me)||je(Me))&&(Re=J(Oe))):Fe=!1}Fe&&(ge.set(Oe,Re),bt(Re,Oe,Bt,Tt,ge),ge.delete(Oe)),v(Ye,ft,Re)}h.exports=ur}),xr=o((l,h)=>{var v=pe(),w=Ke(),C=Xe(),z=Cn(),J=F(),ne=mr(),he=Pn();function Se(Je,je,vt,At,Xt){Je!==je&&C(je,function(yn,bn){if(Xt||(Xt=new v),J(yn))z(Je,je,bn,vt,Se,At,Xt);else{var ur=At?At(he(Je,bn),yn,bn+"",Je,je,Xt):void 0;ur===void 0&&(ur=yn),w(Je,bn,ur)}},ne)}h.exports=Se}),Di=o((l,h)=>{function v(w){return w}h.exports=v}),Fr=o((l,h)=>{function v(w,C,z){switch(z.length){case 0:return w.call(C);case 1:return w.call(C,z[0]);case 2:return w.call(C,z[0],z[1]);case 3:return w.call(C,z[0],z[1],z[2])}return w.apply(C,z)}h.exports=v}),Er=o((l,h)=>{var v=Fr(),w=Math.max;function C(z,J,ne){return J=w(J===void 0?z.length-1:J,0),function(){for(var he=arguments,Se=-1,Je=w(he.length-J,0),je=Array(Je);++Se<Je;)je[Se]=he[J+Se];Se=-1;for(var vt=Array(J+1);++Se<J;)vt[Se]=he[Se];return vt[J]=ne(je),v(z,this,vt)}}h.exports=C}),lr=o((l,h)=>{function v(w){return function(){return w}}h.exports=v}),Hr=o((l,h)=>{var v=lr(),w=ze(),C=Di(),z=w?function(J,ne){return w(J,"toString",{configurable:!0,enumerable:!1,value:v(ne),writable:!0})}:C;h.exports=z}),ir=o((l,h)=>{var v=800,w=16,C=Date.now;function z(J){var ne=0,he=0;return function(){var Se=C(),Je=w-(Se-he);if(he=Se,Je>0){if(++ne>=v)return arguments[0]}else ne=0;return J.apply(void 0,arguments)}}h.exports=z}),Br=o((l,h)=>{var v=Hr(),w=ir(),C=w(v);h.exports=C}),jr=o((l,h)=>{var v=Di(),w=Er(),C=Br();function z(J,ne){return C(w(J,ne,v),J+"")}h.exports=z}),rn=o((l,h)=>{var v=g(),w=ar(),C=mn(),z=F();function J(ne,he,Se){if(!z(Se))return!1;var Je=typeof he;return(Je=="number"?w(Se)&&C(he,Se.length):Je=="string"&&he in Se)?v(Se[he],ne):!1}h.exports=J}),Ri=o((l,h)=>{var v=jr(),w=rn();function C(z){return v(function(J,ne){var he=-1,Se=ne.length,Je=Se>1?ne[Se-1]:void 0,je=Se>2?ne[2]:void 0;for(Je=z.length>3&&typeof Je=="function"?(Se--,Je):void 0,je&&w(ne[0],ne[1],je)&&(Je=Se<3?void 0:Je,Se=1),J=Object(J);++he<Se;){var vt=ne[he];vt&&z(J,vt,he,Je)}return J})}h.exports=C}),yi=o((l,h)=>{var v=xr(),w=Ri(),C=w(function(z,J,ne){v(z,J,ne)});h.exports=C}),pi=o((l,h)=>{var v=Y(),w=Vt(),C="[object Symbol]";function z(J){return typeof J=="symbol"||w(J)&&v(J)==C}h.exports=z}),Zr=o((l,h)=>{var v=wn(),w=pi(),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/;function J(ne,he){if(v(ne))return!1;var Se=typeof ne;return Se=="number"||Se=="symbol"||Se=="boolean"||ne==null||w(ne)?!0:z.test(ne)||!C.test(ne)||he!=null&&ne in Object(he)}h.exports=J}),Or=o((l,h)=>{var v=de(),w="Expected a function";function C(z,J){if(typeof z!="function"||J!=null&&typeof J!="function")throw new TypeError(w);var ne=function(){var he=arguments,Se=J?J.apply(this,he):he[0],Je=ne.cache;if(Je.has(Se))return Je.get(Se);var je=z.apply(this,he);return ne.cache=Je.set(Se,je)||Je,je};return ne.cache=new(C.Cache||v),ne}C.Cache=v,h.exports=C}),Ir=o((l,h)=>{var v=Or(),w=500;function C(z){var J=v(z,function(he){return ne.size===w&&ne.clear(),he}),ne=J.cache;return J}h.exports=C}),hr=o((l,h)=>{var v=Ir(),w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,z=v(function(J){var ne=[];return J.charCodeAt(0)===46&&ne.push(""),J.replace(w,function(he,Se,Je,je){ne.push(Je?je.replace(C,"$1"):Se||he)}),ne});h.exports=z}),Fi=o((l,h)=>{function v(w,C){for(var z=-1,J=w==null?0:w.length,ne=Array(J);++z<J;)ne[z]=C(w[z],z,w);return ne}h.exports=v}),Ss=o((l,h)=>{var v=Le(),w=Fi(),C=wn(),z=pi(),J=v?v.prototype:void 0,ne=J?J.toString:void 0;function he(Se){if(typeof Se=="string")return Se;if(C(Se))return w(Se,he)+"";if(z(Se))return ne?ne.call(Se):"";var Je=Se+"";return Je=="0"&&1/Se==-1/0?"-0":Je}h.exports=he}),Cs=o((l,h)=>{var v=Ss();function w(C){return C==null?"":v(C)}h.exports=w}),oi=o((l,h)=>{var v=wn(),w=Zr(),C=hr(),z=Cs();function J(ne,he){return v(ne)?ne:w(ne,he)?[ne]:C(z(ne))}h.exports=J}),Fn=o((l,h)=>{var v=pi();function w(C){if(typeof C=="string"||v(C))return C;var z=C+"";return z=="0"&&1/C==-1/0?"-0":z}h.exports=w}),Po=o((l,h)=>{var v=oi(),w=Fn();function C(z,J){J=v(J,z);for(var ne=0,he=J.length;z!=null&&ne<he;)z=z[w(J[ne++])];return ne&&ne==he?z:void 0}h.exports=C}),ui=o((l,h)=>{var v=Po();function w(C,z,J){var ne=C==null?void 0:v(C,z);return ne===void 0?J:ne}h.exports=w}),fr=o((l,h)=>{(function(v,w){typeof l=="object"&&typeof h<"u"?h.exports=w():(v=v||self).RBush=w()})(l,function(){function v(Ye,tt,ft,Bt,bt){(function Tt(ge,Me,Oe,Be,Re){for(;Be>Oe;){if(Be-Oe>600){var Fe=Be-Oe+1,lt=Me-Oe+1,ut=Math.log(Fe),pt=.5*Math.exp(2*ut/3),Lt=.5*Math.sqrt(ut*pt*(Fe-pt)/Fe)*(lt-Fe/2<0?-1:1),St=Math.max(Oe,Math.floor(Me-lt*pt/Fe+Lt)),on=Math.min(Be,Math.floor(Me+(Fe-lt)*pt/Fe+Lt));Tt(ge,Me,St,on,Re)}var zn=ge[Me],Gn=Oe,Qn=Be;for(w(ge,Oe,Me),Re(ge[Be],zn)>0&&w(ge,Oe,Be);Gn<Qn;){for(w(ge,Gn,Qn),Gn++,Qn--;Re(ge[Gn],zn)<0;)Gn++;for(;Re(ge[Qn],zn)>0;)Qn--}Re(ge[Oe],zn)===0?w(ge,Oe,Qn):w(ge,++Qn,Be),Qn<=Me&&(Oe=Qn+1),Me<=Qn&&(Be=Qn-1)}})(Ye,tt,ft||0,Bt||Ye.length-1,bt||C)}function w(Ye,tt,ft){var Bt=Ye[tt];Ye[tt]=Ye[ft],Ye[ft]=Bt}function C(Ye,tt){return Ye<tt?-1:Ye>tt?1:0}var z=function(Ye){Ye===void 0&&(Ye=9),this._maxEntries=Math.max(4,Ye),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function J(Ye,tt,ft){if(!ft)return tt.indexOf(Ye);for(var Bt=0;Bt<tt.length;Bt++)if(ft(Ye,tt[Bt]))return Bt;return-1}function ne(Ye,tt){he(Ye,0,Ye.children.length,tt,Ye)}function he(Ye,tt,ft,Bt,bt){bt||(bt=bn(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var Tt=tt;Tt<ft;Tt++){var ge=Ye.children[Tt];Se(bt,Ye.leaf?Bt(ge):ge)}return bt}function Se(Ye,tt){return Ye.minX=Math.min(Ye.minX,tt.minX),Ye.minY=Math.min(Ye.minY,tt.minY),Ye.maxX=Math.max(Ye.maxX,tt.maxX),Ye.maxY=Math.max(Ye.maxY,tt.maxY),Ye}function Je(Ye,tt){return Ye.minX-tt.minX}function je(Ye,tt){return Ye.minY-tt.minY}function vt(Ye){return(Ye.maxX-Ye.minX)*(Ye.maxY-Ye.minY)}function At(Ye){return Ye.maxX-Ye.minX+(Ye.maxY-Ye.minY)}function Xt(Ye,tt){return Ye.minX<=tt.minX&&Ye.minY<=tt.minY&&tt.maxX<=Ye.maxX&&tt.maxY<=Ye.maxY}function yn(Ye,tt){return tt.minX<=Ye.maxX&&tt.minY<=Ye.maxY&&tt.maxX>=Ye.minX&&tt.maxY>=Ye.minY}function bn(Ye){return{children:Ye,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ur(Ye,tt,ft,Bt,bt){for(var Tt=[tt,ft];Tt.length;)if(!((ft=Tt.pop())-(tt=Tt.pop())<=Bt)){var ge=tt+Math.ceil((ft-tt)/Bt/2)*Bt;v(Ye,ge,tt,ft,bt),Tt.push(tt,ge,ge,ft)}}return z.prototype.all=function(){return this._all(this.data,[])},z.prototype.search=function(Ye){var tt=this.data,ft=[];if(!yn(Ye,tt))return ft;for(var Bt=this.toBBox,bt=[];tt;){for(var Tt=0;Tt<tt.children.length;Tt++){var ge=tt.children[Tt],Me=tt.leaf?Bt(ge):ge;yn(Ye,Me)&&(tt.leaf?ft.push(ge):Xt(Ye,Me)?this._all(ge,ft):bt.push(ge))}tt=bt.pop()}return ft},z.prototype.collides=function(Ye){var tt=this.data;if(!yn(Ye,tt))return!1;for(var ft=[];tt;){for(var Bt=0;Bt<tt.children.length;Bt++){var bt=tt.children[Bt],Tt=tt.leaf?this.toBBox(bt):bt;if(yn(Ye,Tt)){if(tt.leaf||Xt(Ye,Tt))return!0;ft.push(bt)}}tt=ft.pop()}return!1},z.prototype.load=function(Ye){if(!Ye||!Ye.length)return this;if(Ye.length<this._minEntries){for(var tt=0;tt<Ye.length;tt++)this.insert(Ye[tt]);return this}var ft=this._build(Ye.slice(),0,Ye.length-1,0);if(this.data.children.length)if(this.data.height===ft.height)this._splitRoot(this.data,ft);else{if(this.data.height<ft.height){var Bt=this.data;this.data=ft,ft=Bt}this._insert(ft,this.data.height-ft.height-1,!0)}else this.data=ft;return this},z.prototype.insert=function(Ye){return Ye&&this._insert(Ye,this.data.height-1),this},z.prototype.clear=function(){return this.data=bn([]),this},z.prototype.remove=function(Ye,tt){if(!Ye)return this;for(var ft,Bt,bt,Tt=this.data,ge=this.toBBox(Ye),Me=[],Oe=[];Tt||Me.length;){if(Tt||(Tt=Me.pop(),Bt=Me[Me.length-1],ft=Oe.pop(),bt=!0),Tt.leaf){var Be=J(Ye,Tt.children,tt);if(Be!==-1)return Tt.children.splice(Be,1),Me.push(Tt),this._condense(Me),this}bt||Tt.leaf||!Xt(Tt,ge)?Bt?(ft++,Tt=Bt.children[ft],bt=!1):Tt=null:(Me.push(Tt),Oe.push(ft),ft=0,Bt=Tt,Tt=Tt.children[0])}return this},z.prototype.toBBox=function(Ye){return Ye},z.prototype.compareMinX=function(Ye,tt){return Ye.minX-tt.minX},z.prototype.compareMinY=function(Ye,tt){return Ye.minY-tt.minY},z.prototype.toJSON=function(){return this.data},z.prototype.fromJSON=function(Ye){return this.data=Ye,this},z.prototype._all=function(Ye,tt){for(var ft=[];Ye;)Ye.leaf?tt.push.apply(tt,Ye.children):ft.push.apply(ft,Ye.children),Ye=ft.pop();return tt},z.prototype._build=function(Ye,tt,ft,Bt){var bt,Tt=ft-tt+1,ge=this._maxEntries;if(Tt<=ge)return ne(bt=bn(Ye.slice(tt,ft+1)),this.toBBox),bt;Bt||(Bt=Math.ceil(Math.log(Tt)/Math.log(ge)),ge=Math.ceil(Tt/Math.pow(ge,Bt-1))),(bt=bn([])).leaf=!1,bt.height=Bt;var Me=Math.ceil(Tt/ge),Oe=Me*Math.ceil(Math.sqrt(ge));ur(Ye,tt,ft,Oe,this.compareMinX);for(var Be=tt;Be<=ft;Be+=Oe){var Re=Math.min(Be+Oe-1,ft);ur(Ye,Be,Re,Me,this.compareMinY);for(var Fe=Be;Fe<=Re;Fe+=Me){var lt=Math.min(Fe+Me-1,Re);bt.children.push(this._build(Ye,Fe,lt,Bt-1))}}return ne(bt,this.toBBox),bt},z.prototype._chooseSubtree=function(Ye,tt,ft,Bt){for(;Bt.push(tt),!tt.leaf&&Bt.length-1!==ft;){for(var bt=1/0,Tt=1/0,ge=void 0,Me=0;Me<tt.children.length;Me++){var Oe=tt.children[Me],Be=vt(Oe),Re=(Fe=Ye,lt=Oe,(Math.max(lt.maxX,Fe.maxX)-Math.min(lt.minX,Fe.minX))*(Math.max(lt.maxY,Fe.maxY)-Math.min(lt.minY,Fe.minY))-Be);Re<Tt?(Tt=Re,bt=Be<bt?Be:bt,ge=Oe):Re===Tt&&Be<bt&&(bt=Be,ge=Oe)}tt=ge||tt.children[0]}var Fe,lt;return tt},z.prototype._insert=function(Ye,tt,ft){var Bt=ft?Ye:this.toBBox(Ye),bt=[],Tt=this._chooseSubtree(Bt,this.data,tt,bt);for(Tt.children.push(Ye),Se(Tt,Bt);tt>=0&&bt[tt].children.length>this._maxEntries;)this._split(bt,tt),tt--;this._adjustParentBBoxes(Bt,bt,tt)},z.prototype._split=function(Ye,tt){var ft=Ye[tt],Bt=ft.children.length,bt=this._minEntries;this._chooseSplitAxis(ft,bt,Bt);var Tt=this._chooseSplitIndex(ft,bt,Bt),ge=bn(ft.children.splice(Tt,ft.children.length-Tt));ge.height=ft.height,ge.leaf=ft.leaf,ne(ft,this.toBBox),ne(ge,this.toBBox),tt?Ye[tt-1].children.push(ge):this._splitRoot(ft,ge)},z.prototype._splitRoot=function(Ye,tt){this.data=bn([Ye,tt]),this.data.height=Ye.height+1,this.data.leaf=!1,ne(this.data,this.toBBox)},z.prototype._chooseSplitIndex=function(Ye,tt,ft){for(var Bt,bt,Tt,ge,Me,Oe,Be,Re=1/0,Fe=1/0,lt=tt;lt<=ft-tt;lt++){var ut=he(Ye,0,lt,this.toBBox),pt=he(Ye,lt,ft,this.toBBox),Lt=(bt=ut,Tt=pt,ge=void 0,Me=void 0,Oe=void 0,Be=void 0,ge=Math.max(bt.minX,Tt.minX),Me=Math.max(bt.minY,Tt.minY),Oe=Math.min(bt.maxX,Tt.maxX),Be=Math.min(bt.maxY,Tt.maxY),Math.max(0,Oe-ge)*Math.max(0,Be-Me)),St=vt(ut)+vt(pt);Lt<Re?(Re=Lt,Bt=lt,Fe=St<Fe?St:Fe):Lt===Re&&St<Fe&&(Fe=St,Bt=lt)}return Bt||ft-tt},z.prototype._chooseSplitAxis=function(Ye,tt,ft){var Bt=Ye.leaf?this.compareMinX:Je,bt=Ye.leaf?this.compareMinY:je;this._allDistMargin(Ye,tt,ft,Bt)<this._allDistMargin(Ye,tt,ft,bt)&&Ye.children.sort(Bt)},z.prototype._allDistMargin=function(Ye,tt,ft,Bt){Ye.children.sort(Bt);for(var bt=this.toBBox,Tt=he(Ye,0,tt,bt),ge=he(Ye,ft-tt,ft,bt),Me=At(Tt)+At(ge),Oe=tt;Oe<ft-tt;Oe++){var Be=Ye.children[Oe];Se(Tt,Ye.leaf?bt(Be):Be),Me+=At(Tt)}for(var Re=ft-tt-1;Re>=tt;Re--){var Fe=Ye.children[Re];Se(ge,Ye.leaf?bt(Fe):Fe),Me+=At(ge)}return Me},z.prototype._adjustParentBBoxes=function(Ye,tt,ft){for(var Bt=ft;Bt>=0;Bt--)Se(tt[Bt],Ye)},z.prototype._condense=function(Ye){for(var tt=Ye.length-1,ft=void 0;tt>=0;tt--)Ye[tt].children.length===0?tt>0?(ft=Ye[tt-1].children).splice(ft.indexOf(Ye[tt]),1):this.clear():ne(Ye[tt],this.toBBox)},z})}),qn=o(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function h(Be,Re,Fe){Fe===void 0&&(Fe={});var lt={type:"Feature"};return(Fe.id===0||Fe.id)&&(lt.id=Fe.id),Fe.bbox&&(lt.bbox=Fe.bbox),lt.properties=Re||{},lt.geometry=Be,lt}l.feature=h;function v(Be,Re,Fe){switch(Be){case"Point":return w(Re).geometry;case"LineString":return ne(Re).geometry;case"Polygon":return z(Re).geometry;case"MultiPoint":return je(Re).geometry;case"MultiLineString":return Je(Re).geometry;case"MultiPolygon":return vt(Re).geometry;default:throw new Error(Be+" is invalid")}}l.geometry=v;function w(Be,Re,Fe){if(Fe===void 0&&(Fe={}),!Be)throw new Error("coordinates is required");if(!Array.isArray(Be))throw new Error("coordinates must be an Array");if(Be.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(Be[0])||!Tt(Be[1]))throw new Error("coordinates must contain numbers");var lt={type:"Point",coordinates:Be};return h(lt,Re,Fe)}l.point=w;function C(Be,Re,Fe){return Fe===void 0&&(Fe={}),Se(Be.map(function(lt){return w(lt,Re)}),Fe)}l.points=C;function z(Be,Re,Fe){Fe===void 0&&(Fe={});for(var lt=0,ut=Be;lt<ut.length;lt++){var pt=ut[lt];if(pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Lt=0;Lt<pt[pt.length-1].length;Lt++)if(pt[pt.length-1][Lt]!==pt[0][Lt])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Be};return h(St,Re,Fe)}l.polygon=z;function J(Be,Re,Fe){return Fe===void 0&&(Fe={}),Se(Be.map(function(lt){return z(lt,Re)}),Fe)}l.polygons=J;function ne(Be,Re,Fe){if(Fe===void 0&&(Fe={}),Be.length<2)throw new Error("coordinates must be an array of two or more positions");var lt={type:"LineString",coordinates:Be};return h(lt,Re,Fe)}l.lineString=ne;function he(Be,Re,Fe){return Fe===void 0&&(Fe={}),Se(Be.map(function(lt){return ne(lt,Re)}),Fe)}l.lineStrings=he;function Se(Be,Re){Re===void 0&&(Re={});var Fe={type:"FeatureCollection"};return Re.id&&(Fe.id=Re.id),Re.bbox&&(Fe.bbox=Re.bbox),Fe.features=Be,Fe}l.featureCollection=Se;function Je(Be,Re,Fe){Fe===void 0&&(Fe={});var lt={type:"MultiLineString",coordinates:Be};return h(lt,Re,Fe)}l.multiLineString=Je;function je(Be,Re,Fe){Fe===void 0&&(Fe={});var lt={type:"MultiPoint",coordinates:Be};return h(lt,Re,Fe)}l.multiPoint=je;function vt(Be,Re,Fe){Fe===void 0&&(Fe={});var lt={type:"MultiPolygon",coordinates:Be};return h(lt,Re,Fe)}l.multiPolygon=vt;function At(Be,Re,Fe){Fe===void 0&&(Fe={});var lt={type:"GeometryCollection",geometries:Be};return h(lt,Re,Fe)}l.geometryCollection=At;function Xt(Be,Re){if(Re===void 0&&(Re=0),Re&&!(Re>=0))throw new Error("precision must be a positive number");var Fe=Math.pow(10,Re||0);return Math.round(Be*Fe)/Fe}l.round=Xt;function yn(Be,Re){Re===void 0&&(Re="kilometers");var Fe=l.factors[Re];if(!Fe)throw new Error(Re+" units is invalid");return Be*Fe}l.radiansToLength=yn;function bn(Be,Re){Re===void 0&&(Re="kilometers");var Fe=l.factors[Re];if(!Fe)throw new Error(Re+" units is invalid");return Be/Fe}l.lengthToRadians=bn;function ur(Be,Re){return tt(bn(Be,Re))}l.lengthToDegrees=ur;function Ye(Be){var Re=Be%360;return Re<0&&(Re+=360),Re}l.bearingToAzimuth=Ye;function tt(Be){var Re=Be%(2*Math.PI);return Re*180/Math.PI}l.radiansToDegrees=tt;function ft(Be){var Re=Be%360;return Re*Math.PI/180}l.degreesToRadians=ft;function Bt(Be,Re,Fe){if(Re===void 0&&(Re="kilometers"),Fe===void 0&&(Fe="kilometers"),!(Be>=0))throw new Error("length must be a positive number");return yn(bn(Be,Re),Fe)}l.convertLength=Bt;function bt(Be,Re,Fe){if(Re===void 0&&(Re="meters"),Fe===void 0&&(Fe="kilometers"),!(Be>=0))throw new Error("area must be a positive number");var lt=l.areaFactors[Re];if(!lt)throw new Error("invalid original units");var ut=l.areaFactors[Fe];if(!ut)throw new Error("invalid final units");return Be/lt*ut}l.convertArea=bt;function Tt(Be){return!isNaN(Be)&&Be!==null&&!Array.isArray(Be)}l.isNumber=Tt;function ge(Be){return!!Be&&Be.constructor===Object}l.isObject=ge;function Me(Be){if(!Be)throw new Error("bbox is required");if(!Array.isArray(Be))throw new Error("bbox must be an Array");if(Be.length!==4&&Be.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Be.forEach(function(Re){if(!Tt(Re))throw new Error("bbox must only contain numbers")})}l.validateBBox=Me;function Oe(Be){if(!Be)throw new Error("id is required");if(["string","number"].indexOf(typeof Be)===-1)throw new Error("id must be a number or a string")}l.validateId=Oe}),bo=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=qn();function v(tt,ft,Bt){if(tt!==null)for(var bt,Tt,ge,Me,Oe,Be,Re,Fe=0,lt=0,ut,pt=tt.type,Lt=pt==="FeatureCollection",St=pt==="Feature",on=Lt?tt.features.length:1,zn=0;zn<on;zn++){Re=Lt?tt.features[zn].geometry:St?tt.geometry:tt,ut=Re?Re.type==="GeometryCollection":!1,Oe=ut?Re.geometries.length:1;for(var Gn=0;Gn<Oe;Gn++){var Qn=0,mi=0;if(Me=ut?Re.geometries[Gn]:Re,Me!==null){Be=Me.coordinates;var Ai=Me.type;switch(Fe=Bt&&(Ai==="Polygon"||Ai==="MultiPolygon")?1:0,Ai){case null:break;case"Point":if(ft(Be,lt,zn,Qn,mi)===!1)return!1;lt++,Qn++;break;case"LineString":case"MultiPoint":for(bt=0;bt<Be.length;bt++){if(ft(Be[bt],lt,zn,Qn,mi)===!1)return!1;lt++,Ai==="MultiPoint"&&Qn++}Ai==="LineString"&&Qn++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<Be.length;bt++){for(Tt=0;Tt<Be[bt].length-Fe;Tt++){if(ft(Be[bt][Tt],lt,zn,Qn,mi)===!1)return!1;lt++}Ai==="MultiLineString"&&Qn++,Ai==="Polygon"&&mi++}Ai==="Polygon"&&Qn++;break;case"MultiPolygon":for(bt=0;bt<Be.length;bt++){for(mi=0,Tt=0;Tt<Be[bt].length;Tt++){for(ge=0;ge<Be[bt][Tt].length-Fe;ge++){if(ft(Be[bt][Tt][ge],lt,zn,Qn,mi)===!1)return!1;lt++}mi++}Qn++}break;case"GeometryCollection":for(bt=0;bt<Me.geometries.length;bt++)if(v(Me.geometries[bt],ft,Bt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(tt,ft,Bt,bt){var Tt=Bt;return v(tt,function(ge,Me,Oe,Be,Re){Me===0&&Bt===void 0?Tt=ge:Tt=ft(Tt,ge,Me,Oe,Be,Re)},bt),Tt}function C(tt,ft){var Bt;switch(tt.type){case"FeatureCollection":for(Bt=0;Bt<tt.features.length&&ft(tt.features[Bt].properties,Bt)!==!1;Bt++);break;case"Feature":ft(tt.properties,0);break}}function z(tt,ft,Bt){var bt=Bt;return C(tt,function(Tt,ge){ge===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,ge)}),bt}function J(tt,ft){if(tt.type==="Feature")ft(tt,0);else if(tt.type==="FeatureCollection")for(var Bt=0;Bt<tt.features.length&&ft(tt.features[Bt],Bt)!==!1;Bt++);}function ne(tt,ft,Bt){var bt=Bt;return J(tt,function(Tt,ge){ge===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,ge)}),bt}function he(tt){var ft=[];return v(tt,function(Bt){ft.push(Bt)}),ft}function Se(tt,ft){var Bt,bt,Tt,ge,Me,Oe,Be,Re,Fe,lt,ut=0,pt=tt.type==="FeatureCollection",Lt=tt.type==="Feature",St=pt?tt.features.length:1;for(Bt=0;Bt<St;Bt++){for(Oe=pt?tt.features[Bt].geometry:Lt?tt.geometry:tt,Re=pt?tt.features[Bt].properties:Lt?tt.properties:{},Fe=pt?tt.features[Bt].bbox:Lt?tt.bbox:void 0,lt=pt?tt.features[Bt].id:Lt?tt.id:void 0,Be=Oe?Oe.type==="GeometryCollection":!1,Me=Be?Oe.geometries.length:1,Tt=0;Tt<Me;Tt++){if(ge=Be?Oe.geometries[Tt]:Oe,ge===null){if(ft(null,ut,Re,Fe,lt)===!1)return!1;continue}switch(ge.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ft(ge,ut,Re,Fe,lt)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<ge.geometries.length;bt++)if(ft(ge.geometries[bt],ut,Re,Fe,lt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ut++}}function Je(tt,ft,Bt){var bt=Bt;return Se(tt,function(Tt,ge,Me,Oe,Be){ge===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,ge,Me,Oe,Be)}),bt}function je(tt,ft){Se(tt,function(Bt,bt,Tt,ge,Me){var Oe=Bt===null?null:Bt.type;switch(Oe){case null:case"Point":case"LineString":case"Polygon":return ft(h.feature(Bt,Tt,{bbox:ge,id:Me}),bt,0)===!1?!1:void 0}var Be;switch(Oe){case"MultiPoint":Be="Point";break;case"MultiLineString":Be="LineString";break;case"MultiPolygon":Be="Polygon";break}for(var Re=0;Re<Bt.coordinates.length;Re++){var Fe=Bt.coordinates[Re],lt={type:Be,coordinates:Fe};if(ft(h.feature(lt,Tt),bt,Re)===!1)return!1}})}function vt(tt,ft,Bt){var bt=Bt;return je(tt,function(Tt,ge,Me){ge===0&&Me===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,ge,Me)}),bt}function At(tt,ft){je(tt,function(Bt,bt,Tt){var ge=0;if(Bt.geometry){var Me=Bt.geometry.type;if(!(Me==="Point"||Me==="MultiPoint")){var Oe,Be=0,Re=0,Fe=0;if(v(Bt,function(lt,ut,pt,Lt,St){if(Oe===void 0||bt>Be||Lt>Re||St>Fe){Oe=lt,Be=bt,Re=Lt,Fe=St,ge=0;return}var on=h.lineString([Oe,lt],Bt.properties);if(ft(on,bt,Tt,St,ge)===!1)return!1;ge++,Oe=lt})===!1)return!1}}})}function Xt(tt,ft,Bt){var bt=Bt,Tt=!1;return At(tt,function(ge,Me,Oe,Be,Re){Tt===!1&&Bt===void 0?bt=ge:bt=ft(bt,ge,Me,Oe,Be,Re),Tt=!0}),bt}function yn(tt,ft){if(!tt)throw new Error("geojson is required");je(tt,function(Bt,bt,Tt){if(Bt.geometry!==null){var ge=Bt.geometry.type,Me=Bt.geometry.coordinates;switch(ge){case"LineString":if(ft(Bt,bt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Oe=0;Oe<Me.length;Oe++)if(ft(h.lineString(Me[Oe],Bt.properties),bt,Tt,Oe)===!1)return!1;break}}})}function bn(tt,ft,Bt){var bt=Bt;return yn(tt,function(Tt,ge,Me,Oe){ge===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,ge,Me,Oe)}),bt}function ur(tt,ft){if(ft=ft||{},!h.isObject(ft))throw new Error("options is invalid");var Bt=ft.featureIndex||0,bt=ft.multiFeatureIndex||0,Tt=ft.geometryIndex||0,ge=ft.segmentIndex||0,Me=ft.properties,Oe;switch(tt.type){case"FeatureCollection":Bt<0&&(Bt=tt.features.length+Bt),Me=Me||tt.features[Bt].properties,Oe=tt.features[Bt].geometry;break;case"Feature":Me=Me||tt.properties,Oe=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Oe=tt;break;default:throw new Error("geojson is invalid")}if(Oe===null)return null;var Be=Oe.coordinates;switch(Oe.type){case"Point":case"MultiPoint":return null;case"LineString":return ge<0&&(ge=Be.length+ge-1),h.lineString([Be[ge],Be[ge+1]],Me,ft);case"Polygon":return Tt<0&&(Tt=Be.length+Tt),ge<0&&(ge=Be[Tt].length+ge-1),h.lineString([Be[Tt][ge],Be[Tt][ge+1]],Me,ft);case"MultiLineString":return bt<0&&(bt=Be.length+bt),ge<0&&(ge=Be[bt].length+ge-1),h.lineString([Be[bt][ge],Be[bt][ge+1]],Me,ft);case"MultiPolygon":return bt<0&&(bt=Be.length+bt),Tt<0&&(Tt=Be[bt].length+Tt),ge<0&&(ge=Be[bt][Tt].length-ge-1),h.lineString([Be[bt][Tt][ge],Be[bt][Tt][ge+1]],Me,ft)}throw new Error("geojson is invalid")}function Ye(tt,ft){if(ft=ft||{},!h.isObject(ft))throw new Error("options is invalid");var Bt=ft.featureIndex||0,bt=ft.multiFeatureIndex||0,Tt=ft.geometryIndex||0,ge=ft.coordIndex||0,Me=ft.properties,Oe;switch(tt.type){case"FeatureCollection":Bt<0&&(Bt=tt.features.length+Bt),Me=Me||tt.features[Bt].properties,Oe=tt.features[Bt].geometry;break;case"Feature":Me=Me||tt.properties,Oe=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Oe=tt;break;default:throw new Error("geojson is invalid")}if(Oe===null)return null;var Be=Oe.coordinates;switch(Oe.type){case"Point":return h.point(Be,Me,ft);case"MultiPoint":return bt<0&&(bt=Be.length+bt),h.point(Be[bt],Me,ft);case"LineString":return ge<0&&(ge=Be.length+ge),h.point(Be[ge],Me,ft);case"Polygon":return Tt<0&&(Tt=Be.length+Tt),ge<0&&(ge=Be[Tt].length+ge),h.point(Be[Tt][ge],Me,ft);case"MultiLineString":return bt<0&&(bt=Be.length+bt),ge<0&&(ge=Be[bt].length+ge),h.point(Be[bt][ge],Me,ft);case"MultiPolygon":return bt<0&&(bt=Be.length+bt),Tt<0&&(Tt=Be[bt].length+Tt),ge<0&&(ge=Be[bt][Tt].length-ge),h.point(Be[bt][Tt][ge],Me,ft)}throw new Error("geojson is invalid")}l.coordAll=he,l.coordEach=v,l.coordReduce=w,l.featureEach=J,l.featureReduce=ne,l.findPoint=Ye,l.findSegment=ur,l.flattenEach=je,l.flattenReduce=vt,l.geomEach=Se,l.geomReduce=Je,l.lineEach=yn,l.lineReduce=bn,l.propEach=C,l.propReduce=z,l.segmentEach=At,l.segmentReduce=Xt}),wo=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=bo();function v(w){var C=[1/0,1/0,-1/0,-1/0];return h.coordEach(w,function(z){C[0]>z[0]&&(C[0]=z[0]),C[1]>z[1]&&(C[1]=z[1]),C[2]<z[0]&&(C[2]=z[0]),C[3]<z[1]&&(C[3]=z[1])}),C}v.default=v,l.default=v}),Lr=o((l,h)=>{var v=fr(),w=qn(),C=bo(),z=wo().default,J=C.featureEach;C.coordEach,w.polygon;var ne=w.featureCollection;function he(Se){var Je=new v(Se);return Je.insert=function(je){if(je.type!=="Feature")throw new Error("invalid feature");return je.bbox=je.bbox?je.bbox:z(je),v.prototype.insert.call(this,je)},Je.load=function(je){var vt=[];return Array.isArray(je)?je.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:z(At),vt.push(At)}):J(je,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:z(At),vt.push(At)}),v.prototype.load.call(this,vt)},Je.remove=function(je,vt){if(je.type!=="Feature")throw new Error("invalid feature");return je.bbox=je.bbox?je.bbox:z(je),v.prototype.remove.call(this,je,vt)},Je.clear=function(){return v.prototype.clear.call(this)},Je.search=function(je){var vt=v.prototype.search.call(this,this.toBBox(je));return ne(vt)},Je.collides=function(je){return v.prototype.collides.call(this,this.toBBox(je))},Je.all=function(){var je=v.prototype.all.call(this);return ne(je)},Je.toJSON=function(){return v.prototype.toJSON.call(this)},Je.fromJSON=function(je){return v.prototype.fromJSON.call(this,je)},Je.toBBox=function(je){var vt;if(je.bbox)vt=je.bbox;else if(Array.isArray(je)&&je.length===4)vt=je;else if(Array.isArray(je)&&je.length===6)vt=[je[0],je[1],je[3],je[4]];else if(je.type==="Feature")vt=z(je);else if(je.type==="FeatureCollection")vt=z(je);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Je}h.exports=he,h.exports.default=he});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,w=arguments[1],C=0;C<v;C++)if(l.call(w,h[C],C,h))return C;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,w=arguments[1],C=0;C<v;C++){var z=h[C];if(l.call(w,z,C,h))return z}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var h=1;h<arguments.length;h++){var v=arguments[h];if(v!=null)for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(l[w]=v[w])}return l}),function(l){l.forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,h){if(this==null)throw new TypeError('"this" is null or not defined');var v=Object(this),w=v.length>>>0;if(w===0)return!1;var C=h|0,z=Math.max(C>=0?C:w-Math.abs(C),0);function J(ne,he){return ne===he||typeof ne=="number"&&typeof he=="number"&&isNaN(ne)&&isNaN(he)}for(;z<w;){if(J(v[z],l))return!0;z++}return!1}});var Us={version:"2.18.3"},Hn=f(yi()),_r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Kr={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},_n={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},tn={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},si={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},co={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},xo={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Pi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},fs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Qo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Ro={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},hi={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Bs={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Fo={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Qi={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Lo={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Vs={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},va={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},eo={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},rl={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ya={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},pr={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},br={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Yr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Tr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},jo={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},il={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ol=Bs,Hs={en:_r,de:Kr,it:_n,id:tn,ro:si,ru:co,es:xo,nl:Pi,fr:fs,pt:ol,pt_br:hi,pt_pt:Bs,zh:Qo,zh_tw:Ro,pl:Fo,sv:Qi,el:Lo,hu:Vs,da:va,no:eo,fa:rl,ua:ya,tr:pr,cz:br,ja:Yr,fi:Tr,ko:jo,ky:il},Ua={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let h={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(v=>{this._isRelevantForEdit(v)&&v.pm.enable(h)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let h in l){let v=l[h];this._isRelevantForEdit(v)&&v.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},_u=Ua,Ml={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(h=>{this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(h=>{h.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let h in l){let v=l[h];this._isRelevantForDrag(v)&&v.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},Sr=Ml,Gr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let h=l.target;this._isRelevantForRemoval(h)&&!h.pm.dragging()&&(h.removeFrom(this.map.pm._getContainingLayer()),h.remove(),h instanceof L.LayerGroup?(this._fireRemoveLayerGroup(h),this._fireRemoveLayerGroup(this.map,h)):(h.pm._fireRemove(h),h.pm._fireRemove(this.map,h)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&(v.pm.enabled()&&v.pm.disable(),v.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Va=Gr,Wu={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&v.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},Al=Wu,Yl=f(yi()),sl={_fireDrawStart(l="Draw",h={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,h)},_fireDrawEnd(l="Draw",h={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,h)},_fireCreate(l,h="Draw",v={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},h,v)},_fireCenterPlaced(l="Draw",h={}){let v=l==="Draw"?this._layer:void 0,w=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:v,layer:w,latlng:this._layer.getLatLng()},l,h)},_fireCut(l,h,v,w="Draw",C={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:h,originalLayer:v},w,C)},_fireEdit(l=this._layer,h="Edit",v={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},h,v)},_fireEnable(l="Edit",h={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDisable(l="Edit",h={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,h)},_fireUpdate(l="Edit",h={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,h)},_fireMarkerDragStart(l,h=void 0,v="Edit",w={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,w)},_fireMarkerDrag(l,h=void 0,v="Edit",w={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,w)},_fireMarkerDragEnd(l,h=void 0,v=void 0,w="Edit",C={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h,intersectionReset:v},w,C)},_fireDragStart(l="Edit",h={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,h)},_fireDrag(l,h="Edit",v={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},h,v)},_fireDragEnd(l="Edit",h={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragEnable(l="Edit",h={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragDisable(l="Edit",h={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRemove(l,h=l,v="Edit",w={}){this.__fire(l,"pm:remove",{layer:h,shape:this.getShape()},v,w)},_fireVertexAdded(l,h,v,w="Edit",C={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:h,latlng:v,shape:this.getShape()},w,C)},_fireVertexRemoved(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:h,shape:this.getShape()},v,w)},_fireVertexClick(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,w)},_fireIntersect(l,h=this._layer,v="Edit",w={}){this.__fire(h,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},v,w)},_fireLayerReset(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,w)},_fireChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},h,v)},_fireTextChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},h,v)},_fireTextFocus(l="Edit",h={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,h)},_fireTextBlur(l="Edit",h={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,h)},_fireSnapDrag(l,h,v="Snapping",w={}){this.__fire(l,"pm:snapdrag",h,v,w)},_fireSnap(l,h,v="Snapping",w={}){this.__fire(l,"pm:snap",h,v,w)},_fireUnsnap(l,h,v="Snapping",w={}){this.__fire(l,"pm:unsnap",h,v,w)},_fireRotationEnable(l,h,v="Rotation",w={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,w)},_fireRotationDisable(l,h="Rotation",v={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},h,v)},_fireRotationStart(l,h,v="Rotation",w={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:h},v,w)},_fireRotation(l,h,v,w=this._rotationLayer,C="Rotation",z={}){this.__fire(l,"pm:rotate",{layer:w,helpLayer:this._layer,startAngle:this._startAngle,angle:w.pm.getAngle(),angleDiff:h,oldLatLngs:v,newLatLngs:w.getLatLngs()},C,z)},_fireRotationEnd(l,h,v,w="Rotation",C={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:h,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},w,C)},_fireActionClick(l,h,v,w="Toolbar",C={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:h,button:v},w,C)},_fireButtonClick(l,h,v="Toolbar",w={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:h},v,w)},_fireLangChange(l,h,v,w,C="Global",z={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:h,fallback:v,translations:w},C,z)},_fireGlobalDragModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalEditModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalRemovalModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalCutModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,h)},_fireGlobalDrawModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,h)},_fireGlobalRotateModeToggled(l="Global",h={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,h)},_fireRemoveLayerGroup(l,h=l,v="Edit",w={}){this.__fire(l,"pm:remove",{layer:h,shape:void 0},v,w)},_fireKeyeventEvent(l,h,v,w="Global",C={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:h,focusOn:v},w,C)},__fire(l,h,v,w,C={}){v=(0,Yl.default)(v,C,{source:w}),L.PM.Utils._fireEvent(l,h,v)}},kl=sl,Jl=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let h="document";this.map.getContainer().contains(l.target)&&(h="map");let v={event:l,eventType:l.type,focusOn:h};this._lastEvents[l.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(l,l.type,h)},_onBlur(l){l.altKey=!1;let h={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=h,this._lastEvents.current=h},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Jr=Jl,to=f(ui());function or(l){let h=L.PM.activeLang;return(0,to.default)(Hs[h],l)||(0,to.default)(Hs.en,l)||l}function no(l){for(let h=0;h<l.length;h+=1){let v=l[h];if(Array.isArray(v)){if(no(v))return!0}else if(v!=null&&v!=="")return!0}return!1}function al(l){return l.reduce((h,v)=>{if(v.length!==0){let w=Array.isArray(v)?al(v):v;Array.isArray(w)?w.length!==0&&h.push(w):h.push(w)}return h},[])}function _a(l,h,v){let w={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:C,b:z,f:J}=w,ne=l.lng,he=l.lat,Se=v,Je=Math.PI,je=h*Je/180,vt=Math.sin(je),At=Math.cos(je),Xt=(1-J)*Math.tan(he*Je/180),yn=1/Math.sqrt(1+Xt*Xt),bn=Xt*yn,ur=Math.atan2(Xt,At),Ye=yn*vt,tt=1-Ye*Ye,ft=tt*(C*C-z*z)/(z*z),Bt=1+ft/16384*(4096+ft*(-768+ft*(320-175*ft))),bt=ft/1024*(256+ft*(-128+ft*(74-47*ft))),Tt=Se/(z*Bt),ge=2*Math.PI,Me,Oe,Be;for(;Math.abs(Tt-ge)>1e-12;){Me=Math.cos(2*ur+Tt),Oe=Math.sin(Tt),Be=Math.cos(Tt);let on=bt*Oe*(Me+bt/4*(Be*(-1+2*Me*Me)-bt/6*Me*(-3+4*Oe*Oe)*(-3+4*Me*Me)));ge=Tt,Tt=Se/(z*Bt)+on}let Re=bn*Oe-yn*Be*At,Fe=Math.atan2(bn*Be+yn*Oe*At,(1-J)*Math.sqrt(Ye*Ye+Re*Re)),lt=Math.atan2(Oe*vt,yn*Be-bn*Oe*At),ut=J/16*tt*(4+J*(4-3*tt)),pt=lt-(1-ut)*J*Ye*(Tt+ut*Oe*(Me+ut*Be*(-1+2*Me*Me))),Lt=ne+pt*180/Je,St=Fe*180/Je;return L.latLng(Lt,St)}function $i(l,h,v,w,C=!0){let z,J,ne,he=[];for(let Se=0;Se<v;Se+=1){if(C)z=Se*360/v+w,J=_a(l,z,h),ne=L.latLng(J.lng,J.lat);else{let Je=l.lat+Math.cos(2*Se*Math.PI/v)*h,je=l.lng+Math.sin(2*Se*Math.PI/v)*h;ne=L.latLng(Je,je)}he.push(ne)}return he}function Xl(l,h,v){h=(h+360)%360;let w=Math.PI/180,C=180/Math.PI,{R:z}=L.CRS.Earth,J=l.lng*w,ne=l.lat*w,he=h*w,Se=Math.sin(ne),Je=Math.cos(ne),je=Math.cos(v/z),vt=Math.sin(v/z),At=Math.asin(Se*je+Je*vt*Math.cos(he)),Xt=J+Math.atan2(Math.sin(he)*vt*Je,je-Se*Math.sin(At));Xt*=C;let yn=Xt-360,bn=Xt<-180?Xt+360:Xt;return Xt=Xt>180?yn:bn,L.latLng([At*C,Xt])}function ta(l,h,v){let w=l.latLngToContainerPoint(h),C=l.latLngToContainerPoint(v),z=Math.atan2(C.y-w.y,C.x-w.x)*180/Math.PI+90;return z+=z<0?360:0,z}function Tl(l,h,v,w){let C=ta(l,h,v);return Xl(h,C,w)}function Nl(l,h,v="asc"){if(!h||Object.keys(h).length===0)return(he,Se)=>he-Se;let w=Object.keys(h),C,z=w.length-1,J={};for(;z>=0;)C=w[z],J[C.toLowerCase()]=h[C],z-=1;function ne(he){if(he instanceof L.Marker)return"Marker";if(he instanceof L.Circle)return"Circle";if(he instanceof L.CircleMarker)return"CircleMarker";if(he instanceof L.Rectangle)return"Rectangle";if(he instanceof L.Polygon)return"Polygon";if(he instanceof L.Polyline)return"Line"}return(he,Se)=>{let Je,je;if(Je=ne(he.layer).toLowerCase(),je=ne(Se.layer).toLowerCase(),!Je||!je)return 0;let vt=Je in J?J[Je]:Number.MAX_SAFE_INTEGER,At=je in J?J[je]:Number.MAX_SAFE_INTEGER,Xt=0;return vt<At?Xt=-1:vt>At&&(Xt=1),v==="desc"?Xt*-1:Xt}}function Os(l,h=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(h).getLatLngs():L.polyline(h).getLatLngs()}function Dl(l,h){var v,w,C,z;if((w=(v=h.options.crs)==null?void 0:v.projection)!=null&&w.MAX_LATITUDE){let J=(z=(C=h.options.crs)==null?void 0:C.projection)==null?void 0:z.MAX_LATITUDE;l.lat=Math.max(Math.min(J,l.lat),-J)}return l}function _i(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Zu=L.Class.extend({includes:[_u,Sr,Va,Al,kl],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Jr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",h,v="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let C=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(C){let z=[`${C[1]}_${C[2]}`,`${C[1]}`];for(let J of z)if(Hs[J]){l=J;break}}}let w=L.PM.activeLang;h&&(Hs[l]=(0,Hn.default)(Hs[v],h)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(w,l,v,Hs[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",h){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,h)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,h={}){let v=h.ignoreShapes||[],w=h.merge||!1;this.map.pm.Draw.shapes.forEach(C=>{v.indexOf(C)===-1&&this.map.pm.Draw[C].setPathOptions(l,w)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let h=(0,Hn.default)(this.globalOptions,l);h.editable&&(h.resizeableCircleMarker=h.editable,delete h.editable);let v=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!h.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),v=!0);let w=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!h.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),w=!0),this.map.pm.Draw.shapes.forEach(C=>{this.map.pm.Draw[C].setOptions(h)}),v&&this.map.pm.Draw.CircleMarker.enable(),w&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(C=>{C.pm.setOptions(h)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=h,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let h=L.PM.Utils.findLayers(this.map);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(w=>{v.addLayer(w)}),v},getGeomanDrawLayers(l=!1){let h=L.PM.Utils.findLayers(this.map).filter(w=>w._drawnByGeoman===!0);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(w=>{v.addLayer(w)}),v},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){_i(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let h="";l.type==="touchstart"||l.type==="pointerdown"?h="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(h="mouseup"),h&&_i(this.map)._onClick(this._createMouseEvent(h,l))},_createMouseEvent(l,h){let v,w=h.touches[0]||h.changedTouches[0];try{v=new MouseEvent(l,{bubbles:h.bubbles,cancelable:h.cancelable,view:h.view,detail:w.detail,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY,ctrlKey:h.ctrlKey,altKey:h.altKey,shiftKey:h.shiftKey,metaKey:h.metaKey,button:h.button,relatedTarget:h.relatedTarget})}catch{v=document.createEvent("MouseEvents"),v.initMouseEvent(l,h.bubbles,h.cancelable,h.view,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget)}return v}}),Mo=Zu,Gs=L.Control.extend({includes:[kl],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let h=this.options.position.indexOf("right")>-1?"pos-right":"",v=L.DomUtil.create("div",`button-container  ${h}`,this._container);l.title&&v.setAttribute("title",l.title);let w=L.DomUtil.create("a","leaflet-buttons-control-button",v);w.setAttribute("role","button"),w.setAttribute("tabindex","0"),w.href="#";let C=L.DomUtil.create("div",`leaflet-pm-actions-container ${h}`,v),z=l.actions,J={cancel:{text:or("actions.cancel"),title:or("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:or("actions.finish"),title:or("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:or("actions.removeLastVertex"),title:or("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:or("actions.finish"),title:or("actions.finish"),onClick(he){this._map.pm.Draw[l.jsClass]._finishShape(he)}}};l._preparedActions=z.map(he=>{let Se=typeof he=="string"?he:he.name,Je;if(J[Se])Je=J[Se];else if(he.text)Je=he;else return Je;let je=L.DomUtil.create("a",`leaflet-pm-action ${h} action-${Se}`,C);if(je.setAttribute("role","button"),je.setAttribute("tabindex","0"),je.href="#",Je.title&&(je.title=Je.title),je.innerHTML=Je.text,L.DomEvent.disableClickPropagation(je),L.DomEvent.on(je,"click",L.DomEvent.stop),Je._node=je,!l.disabled&&Je.onClick){let vt=At=>{At.preventDefault();let Xt="",{buttons:yn}=this._map.pm.Toolbar;for(let bn in yn)if(yn[bn]._button===l){Xt=bn;break}this._fireActionClick(Je,Xt,l)};L.DomEvent.addListener(je,"click",vt,this),L.DomEvent.addListener(je,"click",Je.onClick,this),L.DomEvent.addListener(je,"click",()=>this._updateActiveAction(l))}return Je}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(v,"active");let ne=L.DomUtil.create("div","control-icon",w);return l.iconUrl&&ne.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(ne,l.className),L.DomEvent.disableClickPropagation(w),L.DomEvent.on(w,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(w,"click",this._onBtnClick,this),L.DomEvent.addListener(w,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(w,"pm-disabled"),w.setAttribute("aria-disabled","true")),v},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:h}=this._map.pm.Toolbar;for(let v in h)if(h[v]._button===this._button){l=v;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",h=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(h,l),h.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(h,l),h.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var h;(h=l._preparedActions)==null||h.forEach(v=>{v!=null&&v._node&&(v.isActive&&v.isActive.call(this)?L.DomUtil.addClass(v._node,"active-action"):L.DomUtil.removeClass(v._node,"active-action"))})}}),Bl=Gs;L.Control.PMButton=Bl;var qs=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let h=`${l}Container`;return this[h]||(this[h]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[h]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),h={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let v in l){let w=l[v];L.Util.setOptions(w,{className:h.geomanIcons[v]})}},removeControls(){let l=this.getButtons();for(let h in l)l[h].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,h){return this.buttons[l]=h,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let h in this.buttons){let v=this.buttons[h];v._button.disableByOtherButtons&&v!==l&&v.toggled()&&v._triggerClick()}},toggleButton(l,h,v=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let w=l;return v&&this.triggerClickOnToggledButtons(this.buttons[w]),this.buttons[w]?this.buttons[w].toggle(h):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:or("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},h={title:or("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},v={className:"control-icon leaflet-pm-icon-polyline",title:or("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},w={title:or("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:or("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},z={title:or("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},J={title:or("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:or("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},he={title:or("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Se={title:or("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Je={title:or("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},je={className:"control-icon leaflet-pm-icon-text",title:or("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(v)),this._addButton("drawRectangle",new L.Control.PMButton(z)),this._addButton("drawPolygon",new L.Control.PMButton(h)),this._addButton("drawCircle",new L.Control.PMButton(w)),this._addButton("drawCircleMarker",new L.Control.PMButton(C)),this._addButton("drawText",new L.Control.PMButton(je)),this._addButton("editMode",new L.Control.PMButton(J)),this._addButton("dragMode",new L.Control.PMButton(ne)),this._addButton("cutPolygon",new L.Control.PMButton(he)),this._addButton("removalMode",new L.Control.PMButton(Se)),this._addButton("rotateMode",new L.Control.PMButton(Je))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),h=[];this.options.drawControls===!1&&(h=h.concat(Object.keys(l).filter(v=>!l[v]._button.tool))),this.options.editControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="edit"))),this.options.optionsControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="options"))),this.options.customControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="custom")));for(let v in l)if(this.options[v]&&h.indexOf(v)===-1){let w=l[v]._button.tool;w||(w="draw"),l[v].setPosition(this._getBtnPosition(w)),l[v].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,h){this.options.positions[l]=h,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,h){if(h)typeof h!="object"&&(h={name:h});else throw new TypeError("Button has no name");let v=this._btnNameMapping(l);if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");let w=this.map.pm.Draw.createNewDrawInstance(h.name,v);h={...this.buttons[v]._button,...h};let C=this.createCustomControl(h);return{drawInstance:w,control:C}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let h={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let v=this._addButton(l.name,new L.Control.PMButton(h));return this.changeControlOrder(),v},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let h={};if(l)for(let v in this.getButtons()){let w=this.getButtons()[v];(w._button.tool===l||l==="draw"&&!w._button.tool)&&(h[v]=w)}return h},changeControlOrder(l=[]){let h=this._shapeMapping(),v=[];l.forEach(z=>{h[z]?v.push(h[z]):v.push(z)});let w=this.getButtons(),C={};v.forEach(z=>{w[z]&&(C[z]=w[z])}),Object.keys(w).filter(z=>!w[z]._button.tool||w[z]._button.tool==="draw").forEach(z=>{v.indexOf(z)===-1&&(C[z]=w[z])}),Object.keys(w).filter(z=>w[z]._button.tool==="edit").forEach(z=>{v.indexOf(z)===-1&&(C[z]=w[z])}),Object.keys(w).filter(z=>w[z]._button.tool==="options").forEach(z=>{v.indexOf(z)===-1&&(C[z]=w[z])}),Object.keys(w).filter(z=>w[z]._button.tool==="custom").forEach(z=>{v.indexOf(z)===-1&&(C[z]=w[z])}),Object.keys(w).forEach(z=>{v.indexOf(z)===-1&&(C[z]=w[z])}),this.map.pm.Toolbar.buttons=C,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),h=[];for(let v in l)h.push(v);return h},changeActionsOfControl(l,h){let v=this._btnNameMapping(l);if(!v)throw new TypeError("No name passed");if(!h)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=h,this.changeControlOrder()},setButtonDisabled(l,h){let v=this._btnNameMapping(l);h?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let h=this._shapeMapping();return h[l]?h[l]:l}}),ll=qs,ul=f(yi()),bi={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(h=>{if(Array.isArray(h)){this._assignEvents(h);return}h.off("drag",this._handleSnapping,this),h.on("drag",this._handleSnapping,this),h.off("dragend",this._cleanupSnapping,this),h.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let h=l.target;h._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(h=>{h.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var ne,he,Se;let h=l.target;if(h._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ne=l==null?void 0:l.originalEvent)==null?void 0:ne.altKey)||((Se=(he=this._map)==null?void 0:he.pm)==null?void 0:Se.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let v=this._calcClosestLayer(h.getLatLng(),this._snapList);if(Object.keys(v).length===0)return!1;let w=v.layer instanceof L.Marker||v.layer instanceof L.CircleMarker||!this.options.snapSegment,C;w?C=v.latlng:C=this._checkPrioritiySnapping(v);let z=this.options.snapDistance,J={marker:h,shape:this._shape,snapLatLng:C,segment:v.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:v.layer,distance:v.distance};if(this._fireSnapDrag(J.marker,J),this._fireSnapDrag(this._layer,J),v.distance<z){h._orgLatLng=h.getLatLng(),h.setLatLng(C),h._snapped=!0,h._snapInfo=J;let Je=()=>{this._snapLatLng=C,this._fireSnap(h,J),this._fireSnap(this._layer,J)},je=this._snapLatLng||{},vt=C||{};(je.lat!==vt.lat||je.lng!==vt.lng)&&Je()}else this._snapLatLng&&(this._unsnap(J),h._snapped=!1,h._snapInfo=void 0,this._fireUnsnap(J.marker,J),this._fireUnsnap(this._layer,J));return!0},_createSnapList(){let l=[],h=[],v=this._map;v.off("layerremove",this._handleSnapLayerRemoval,this),v.on("layerremove",this._handleSnapLayerRemoval,this),v.eachLayer(w=>{if((w instanceof L.Polyline||w instanceof L.Marker||w instanceof L.CircleMarker||w instanceof L.ImageOverlay)&&w.options.snapIgnore!==!0){if(w.options.snapIgnore===void 0&&(!L.PM.optIn&&w.options.pmIgnore===!0||L.PM.optIn&&w.options.pmIgnore!==!1))return;(w instanceof L.Circle||w instanceof L.CircleMarker)&&w.pm&&w.pm._hiddenPolyCircle?l.push(w.pm._hiddenPolyCircle):w instanceof L.ImageOverlay&&(w=L.rectangle(w.getBounds())),l.push(w);let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,h.push(C),(w instanceof L.Circle||w instanceof L.CircleMarker)&&h.push(C)}}),l=l.filter(w=>this._layer!==w),l=l.filter(w=>w._latlng||w._latlngs&&no(w._latlngs)),l=l.filter(w=>!w._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let w=L.polyline([],{color:"red",pmIgnore:!0});w._pmTempLayer=!0,h.push(w)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=h},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let h=this._snapList.findIndex(v=>v._leaflet_id===l._leaflet_id);h>-1&&this._snapList.splice(h,1)},_calcClosestLayer(l,h){return this._calcClosestLayers(l,h,1)[0]},_calcClosestLayers(l,h,v=1){let w=[],C={};h.forEach((J,ne)=>{var Se;if(J._parentCopy&&J._parentCopy===this._layer||((Se=J.getLatLngs)==null?void 0:Se.call(J).flat(5).length)<2)return;let he=this._calcLayerDistances(l,J);if(he.distance=Math.floor(he.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ne]){let Je=L.polyline([],{color:"red",pmIgnore:!0});Je._pmTempLayer=!0,this.debugIndicatorLines[ne]=Je}this.debugIndicatorLines[ne].setLatLngs([l,he.latlng])}v===1&&(C.distance===void 0||he.distance-5<=C.distance)?(he.distance+5<C.distance&&(w=[]),C=he,C.layer=J,w.push(C)):v!==1&&(C={},C=he,C.layer=J,w.push(C))}),v!==1&&(w=w.sort((J,ne)=>J.distance-ne.distance)),v===-1&&(v=w.length);let z=this._getClosestLayerByPriority(w,v);return L.Util.isArray(z)?z:[z]},_calcLayerDistances(l,h){let v=this._map,w=h instanceof L.Marker||h instanceof L.CircleMarker,C=h instanceof L.Polygon,z=l;if(w){let J=h.getLatLng();return{latlng:{...J},distance:this._getDistance(v,J,z)}}return this._calcLatLngDistances(z,h.getLatLngs(),v,C)},_calcLatLngDistances(l,h,v,w=!1){let C,z,J,ne=he=>{he.forEach((Se,Je)=>{if(Array.isArray(Se)){ne(Se);return}if(this.options.snapSegment){let je=Se,vt;w?vt=Je+1===he.length?0:Je+1:vt=Je+1===he.length?void 0:Je+1;let At=he[vt];if(At){let Xt=this._getDistanceToSegment(v,l,je,At);(z===void 0||Xt<z)&&(z=Xt,J=[je,At])}}else{let je=this._getDistance(v,l,Se);(z===void 0||je<z)&&(z=je,C=Se)}})};return ne(h),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(v,l,J[0],J[1])},segment:J,distance:z}:{latlng:C,distance:z}},_getClosestLayerByPriority(l,h=1){l=l.sort((J,ne)=>J._leaflet_id-ne._leaflet_id);let v=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],w=this._map.pm.globalOptions.snappingOrder||[],C=0,z={};return w.concat(v).forEach(J=>{z[J]||(C+=1,z[J]=C)}),l.sort(Nl("instanceofShape",z)),h===1?l[0]||{}:l.slice(0,h)},_checkPrioritiySnapping(l){let h=this._map,v=l.segment[0],w=l.segment[1],C=l.latlng,z=C;if(this.options.snapVertex){let J=this._getDistance(h,v,C),ne=this._getDistance(h,w,C),he=J<ne?v:w,Se=J<ne?J:ne;if(this.options.snapMiddle){let je=L.PM.Utils.calcMiddleLatLng(h,v,w),vt=this._getDistance(h,je,C);vt<J&&vt<ne&&(he=je,Se=vt)}let Je=this.options.snapDistance;Se<Je&&(z=he)}return{...z}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,h,v,w){let C=l.getMaxZoom();C===1/0&&(C=l.getZoom());let z=l.project(h,C),J=l.project(v,C),ne=l.project(w,C),he=L.LineUtil.closestPointOnSegment(z,J,ne);return l.unproject(he,C)},_getDistanceToSegment(l,h,v,w){let C=l.latLngToContainerPoint(h),z=l.latLngToContainerPoint(v),J=l.latLngToContainerPoint(w);return L.LineUtil.pointToSegmentDistance(C,z,J)},_getDistance(l,h,v){return l.latLngToContainerPoint(h).distanceTo(l.latLngToContainerPoint(v))}},Es=bi,ba=L.Class.extend({includes:[Es,kl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let h=new L.Icon.Default;h.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=h,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(v=>{this[v]=new L.PM.Draw[v](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,h=!1){h?this.options.pathOptions=(0,ul.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,h){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(h)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(h=>{this[h]._enabled&&(l=h)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&(h._pmTempLayer||l.push(h))}),this._enabled?l.forEach(h=>{L.PM.Utils.disablePopup(h)}):l.forEach(h=>{L.PM.Utils.enablePopup(h)})},createNewDrawInstance(l,h){let v=this._getShapeFromBtnName(h);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError(`There is no class L.PM.Draw.${v}`);return this[l]=new L.PM.Draw[v](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[h]&&this[l].setOptions(this[h].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let h={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return h[l]?h[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ro=ba;ro.Marker=ro.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new L.Marker(h,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,h;(l=this.options.markerStyle)!=null&&l.icon&&((h=this._hintMarker)==null||h.setIcon(this.options.markerStyle.icon))}});var B=63710088e-1,_e={centimeters:B*100,centimetres:B*100,degrees:B/111325,feet:B*3.28084,inches:B*39.37,kilometers:B/1e3,kilometres:B/1e3,meters:B,metres:B,miles:B/1609.344,millimeters:B*1e3,millimetres:B*1e3,nauticalmiles:B/1852,radians:1,yards:B*1.0936};function Ze(l,h,v){v===void 0&&(v={});var w={type:"Feature"};return(v.id===0||v.id)&&(w.id=v.id),v.bbox&&(w.bbox=v.bbox),w.properties=h||{},w.geometry=l,w}function ct(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vr(l[0])||!vr(l[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:l};return Ze(w,h,v)}function xt(l,h,v){if(v===void 0&&(v={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:l};return Ze(w,h,v)}function jt(l,h){h===void 0&&(h={});var v={type:"FeatureCollection"};return h.id&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.features=l,v}function un(l,h){h===void 0&&(h="kilometers");var v=_e[h];if(!v)throw new Error(h+" units is invalid");return l*v}function Nn(l,h){h===void 0&&(h="kilometers");var v=_e[h];if(!v)throw new Error(h+" units is invalid");return l/v}function jn(l){var h=l%(2*Math.PI);return h*180/Math.PI}function nr(l){var h=l%360;return h*Math.PI/180}function vr(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function $r(l){var h,v,w={type:"FeatureCollection",features:[]};if(l.type==="Feature"?v=l.geometry:v=l,v.type==="LineString")h=[v.coordinates];else if(v.type==="MultiLineString")h=v.coordinates;else if(v.type==="MultiPolygon")h=[].concat.apply([],v.coordinates);else if(v.type==="Polygon")h=v.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return h.forEach(function(C){h.forEach(function(z){for(var J=0;J<C.length-1;J++)for(var ne=J;ne<z.length-1;ne++)if(!(C===z&&(Math.abs(J-ne)===1||J===0&&ne===C.length-2&&C[J][0]===C[C.length-1][0]&&C[J][1]===C[C.length-1][1]))){var he=ji(C[J][0],C[J][1],C[J+1][0],C[J+1][1],z[ne][0],z[ne][1],z[ne+1][0],z[ne+1][1]);he&&w.features.push(ct([he[0],he[1]]))}})}),w}function ji(l,h,v,w,C,z,J,ne){var he,Se,Je,je,vt,At={x:null,y:null,onLine1:!1,onLine2:!1};return he=(ne-z)*(v-l)-(J-C)*(w-h),he===0?At.x!==null&&At.y!==null?At:!1:(Se=h-z,Je=l-C,je=(J-C)*Se-(ne-z)*Je,vt=(v-l)*Se-(w-h)*Je,Se=je/he,Je=vt/he,At.x=l+Se*(v-l),At.y=h+Se*(w-h),Se>=0&&Se<=1&&(At.onLine1=!0),Je>=0&&Je<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}ro.Line=ro.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let h=l[l.length-1];this._hintline.setLatLngs([h,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let h=this._layer._defaultShape().slice();h.push(this._hintMarker.getLatLng()),this._change(h)},hasSelfIntersection(){return $r(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,h){let v=L.polyline(this._layer.getLatLngs());l&&(h||(h=this._hintMarker.getLatLng()),v.addLatLng(h));let w=$r(v.toGeoJSON(15));this._doesSelfIntersect=w.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(w,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),w=v[v.length-1];if(h.equals(v[0])||v.length>0&&h.equals(w)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:h,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(h);let C=this._createMarker(h);this._setTooltipText(),this._setHintLineAfterNewVertex(h),this._fireVertexAdded(C,void 0,h,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let h=this._layer.getLatLngs(),v=l[l.length-1],{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(l,v);l.pop(),this._layerGroup.removeLayer(v);let C=l[l.length-1],z=h.indexOf(C.getLatLng());h=h.slice(0,z+1),this._layer.setLatLngs(h),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,w,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let h=L.polyline(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this.options.snappable&&this._cleanupSnapping();let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),h.on("click",this._finishShape,this),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=1?h=or("tooltips.continueLine"):h=or("tooltips.finishLine"),this._hintMarker.setTooltipContent(h)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,h;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)}}),ro.Polygon=ro.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),this._layer.getLatLngs().flat().length===1?(h.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(h)-1,this.options.snappable&&this._cleanupSnapping()):h.on("click",()=>1),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=2?h=or("tooltips.continueLine"):h=or("tooltips.finishPoly"),this._hintMarker.setTooltipContent(h)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))}}),ro.Rectangle=ro.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let h=0;h<2;h+=1){let v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(h),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(v=>{L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(h)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(or("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}let h=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(h,"Draw")},_syncRectangleSize(){let l=Dl(this._startMarker.getLatLng(),this._map),h=Dl(this._hintMarker.getLatLng(),this._map),v=L.PM.Utils._getRotatedRectangle(l,h,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(v),this.options.cursorMarker&&this._styleMarkers){let w=[];v.forEach(C=>{!C.equals(l,1e-8)&&!C.equals(h,1e-8)&&w.push(C)}),w.forEach((C,z)=>{try{this._styleMarkers[z].setLatLng(C)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||v.equals(h))return;let w=L.rectangle([v,h],this.options.pathOptions);if(this.options.rectangleAngle){let z=L.PM.Utils._getRotatedRectangle(v,h,this.options.rectangleAngle||0,this._map);w.setLatLngs(z),w.pm&&w.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(w,"layerPane"),this._finishLayer(w),w.addTo(this._map.pm._getContainingLayer()),this._fireCreate(w);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),ro.CircleMarker=ro.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let h={};L.extend(h,this.options.templineStyle),h.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),h),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let h=this._hintMarker.getLatLng();this._centerMarker.setLatLng(h),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(or("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,h])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this._handleHintMarkerSnapping();let h=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(h,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new this._BaseCircleClass(h,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(v),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._centerMarker.getLatLng(),v=this._defaultRadius;if(this.options[this._editableOption]){let J=this._hintMarker.getLatLng();v=this._distanceCalculation(h,J),this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?v=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(v=this.options[this._maxRadiusOption])}let w={...this.options.pathOptions,radius:v},C=new this._BaseCircleClass(h,w);this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),C.pm&&C.pm._updateHiddenPolyCircle(),this._fireCreate(C);let z=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(z))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let h=this._centerMarker.getLatLng(),v=this._distanceCalculation(h,l);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?l=Tl(this._map,h,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(l=Tl(this._map,h,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var h,v;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(h=this._layer)==null||h.setStyle(l),(v=this._hintline)==null||v.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))}}),ro.Circle=ro.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,h){return this._map.distance(l,h)}});function di(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function wi(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function io(l){return l.type==="Feature"?l.geometry:l}function fo(l,h){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function Ps(l,h,v){if(l!==null)for(var w,C,z,J,ne,he,Se,Je=0,je=0,vt,At=l.type,Xt=At==="FeatureCollection",yn=At==="Feature",bn=Xt?l.features.length:1,ur=0;ur<bn;ur++){Se=Xt?l.features[ur].geometry:yn?l.geometry:l,vt=Se?Se.type==="GeometryCollection":!1,ne=vt?Se.geometries.length:1;for(var Ye=0;Ye<ne;Ye++){var tt=0,ft=0;if(J=vt?Se.geometries[Ye]:Se,J!==null){he=J.coordinates;var Bt=J.type;switch(Je=0,Bt){case null:break;case"Point":if(h(he,je,ur,tt,ft)===!1)return!1;je++,tt++;break;case"LineString":case"MultiPoint":for(w=0;w<he.length;w++){if(h(he[w],je,ur,tt,ft)===!1)return!1;je++,Bt==="MultiPoint"&&tt++}Bt==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(w=0;w<he.length;w++){for(C=0;C<he[w].length-Je;C++){if(h(he[w][C],je,ur,tt,ft)===!1)return!1;je++}Bt==="MultiLineString"&&tt++,Bt==="Polygon"&&ft++}Bt==="Polygon"&&tt++;break;case"MultiPolygon":for(w=0;w<he.length;w++){for(ft=0,C=0;C<he[w].length;C++){for(z=0;z<he[w][C].length-Je;z++){if(h(he[w][C][z],je,ur,tt,ft)===!1)return!1;je++}ft++}tt++}break;case"GeometryCollection":for(w=0;w<J.geometries.length;w++)if(Ps(J.geometries[w],h)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ur(l,h){if(l.type==="Feature")h(l,0);else if(l.type==="FeatureCollection")for(var v=0;v<l.features.length&&h(l.features[v],v)!==!1;v++);}function zo(l,h,v){var w=v;return Ur(l,function(C,z){z===0&&v===void 0?w=C:w=h(w,C,z)}),w}function cl(l,h){var v,w,C,z,J,ne,he,Se,Je,je,vt=0,At=l.type==="FeatureCollection",Xt=l.type==="Feature",yn=At?l.features.length:1;for(v=0;v<yn;v++){for(ne=At?l.features[v].geometry:Xt?l.geometry:l,Se=At?l.features[v].properties:Xt?l.properties:{},Je=At?l.features[v].bbox:Xt?l.bbox:void 0,je=At?l.features[v].id:Xt?l.id:void 0,he=ne?ne.type==="GeometryCollection":!1,J=he?ne.geometries.length:1,C=0;C<J;C++){if(z=he?ne.geometries[C]:ne,z===null){if(h(null,vt,Se,Je,je)===!1)return!1;continue}switch(z.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(h(z,vt,Se,Je,je)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<z.geometries.length;w++)if(h(z.geometries[w],vt,Se,Je,je)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function es(l,h){cl(l,function(v,w,C,z,J){var ne=v===null?null:v.type;switch(ne){case null:case"Point":case"LineString":case"Polygon":return h(Ze(v,C,{bbox:z,id:J}),w,0)===!1?!1:void 0}var he;switch(ne){case"MultiPoint":he="Point";break;case"MultiLineString":he="LineString";break;case"MultiPolygon":he="Polygon";break}for(var Se=0;Se<v.coordinates.length;Se++){var Je=v.coordinates[Se],je={type:he,coordinates:Je};if(h(Ze(je,C),w,Se)===!1)return!1}})}function Ql(l){if(!l)throw new Error("geojson is required");var h=[];return es(l,function(v){na(v,h)}),jt(h)}function na(l,h){var v=[],w=l.geometry;if(w!==null){switch(w.type){case"Polygon":v=wi(w);break;case"LineString":v=[wi(w)]}v.forEach(function(C){var z=bu(C,l.properties);z.forEach(function(J){J.id=h.length,h.push(J)})})}}function bu(l,h){var v=[];return l.reduce(function(w,C){var z=xt([w,C],h);return z.bbox=Ha(w,C),v.push(z),C}),v}function Ha(l,h){var v=l[0],w=l[1],C=h[0],z=h[1],J=v<C?v:C,ne=w<z?w:z,he=v>C?v:C,Se=w>z?w:z;return[J,ne,he,Se]}var Ga=Ql,ho=f(Lr(),1);function ra(l,h){var v={},w=[];if(l.type==="LineString"&&(l=Ze(l)),h.type==="LineString"&&(h=Ze(h)),l.type==="Feature"&&h.type==="Feature"&&l.geometry!==null&&h.geometry!==null&&l.geometry.type==="LineString"&&h.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&h.geometry.coordinates.length===2){var C=Ms(l,h);return C&&w.push(C),jt(w)}var z=(0,ho.default)();return z.load(Ga(h)),Ur(Ga(l),function(J){Ur(z.search(J),function(ne){var he=Ms(J,ne);if(he){var Se=wi(he).join(",");v[Se]||(v[Se]=!0,w.push(he))}})}),jt(w)}function Ms(l,h){var v=wi(l),w=wi(h);if(v.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(w.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var C=v[0][0],z=v[0][1],J=v[1][0],ne=v[1][1],he=w[0][0],Se=w[0][1],Je=w[1][0],je=w[1][1],vt=(je-Se)*(J-C)-(Je-he)*(ne-z),At=(Je-he)*(z-Se)-(je-Se)*(C-he),Xt=(J-C)*(z-Se)-(ne-z)*(C-he);if(vt===0)return null;var yn=At/vt,bn=Xt/vt;if(yn>=0&&yn<=1&&bn>=0&&bn<=1){var ur=C+yn*(J-C),Ye=z+yn*(ne-z);return ct([ur,Ye])}return null}var hs=ra,fl=f(Lr(),1);function $o(l,h,v){v===void 0&&(v={});var w=di(l),C=di(h),z=nr(C[1]-w[1]),J=nr(C[0]-w[0]),ne=nr(w[1]),he=nr(C[1]),Se=Math.pow(Math.sin(z/2),2)+Math.pow(Math.sin(J/2),2)*Math.cos(ne)*Math.cos(he);return un(2*Math.atan2(Math.sqrt(Se),Math.sqrt(1-Se)),v.units)}var ts=$o;function ns(l){var h=l[0],v=l[1],w=l[2],C=l[3],z=ts(l.slice(0,2),[w,v]),J=ts(l.slice(0,2),[h,C]);if(z>=J){var ne=(v+C)/2;return[h,ne-(w-h)/2,w,ne+(w-h)/2]}else{var he=(h+w)/2;return[he-(C-v)/2,v,he+(C-v)/2,C]}}var Ku=ns;function So(l){var h=[1/0,1/0,-1/0,-1/0];return Ps(l,function(v){h[0]>v[0]&&(h[0]=v[0]),h[1]>v[1]&&(h[1]=v[1]),h[2]<v[0]&&(h[2]=v[0]),h[3]<v[1]&&(h[3]=v[1])}),h}So.default=So;var wa=So;function Uo(l,h){h===void 0&&(h={});var v=h.precision,w=h.coordinates,C=h.mutate;if(v=v==null||isNaN(v)?6:v,w=w==null||isNaN(w)?3:w,!l)throw new Error("<geojson> is required");if(typeof v!="number")throw new Error("<precision> must be a number");if(typeof w!="number")throw new Error("<coordinates> must be a number");(C===!1||C===void 0)&&(l=JSON.parse(JSON.stringify(l)));var z=Math.pow(10,v);return Ps(l,function(J){Vo(J,z,w)}),l}function Vo(l,h,v){l.length>v&&l.splice(v,l.length);for(var w=0;w<l.length;w++)l[w]=Math.round(l[w]*h)/h;return l}var xa=Uo;function La(l,h,v){if(v===void 0&&(v={}),v.final===!0)return Ho(l,h);var w=di(l),C=di(h),z=nr(w[0]),J=nr(C[0]),ne=nr(w[1]),he=nr(C[1]),Se=Math.sin(J-z)*Math.cos(he),Je=Math.cos(ne)*Math.sin(he)-Math.sin(ne)*Math.cos(he)*Math.cos(J-z);return jn(Math.atan2(Se,Je))}function Ho(l,h){var v=La(h,l);return v=(v+180)%360,v}function Ao(l,h,v,w){w===void 0&&(w={});var C=di(l),z=nr(C[0]),J=nr(C[1]),ne=nr(v),he=Nn(h,w.units),Se=Math.asin(Math.sin(J)*Math.cos(he)+Math.cos(J)*Math.sin(he)*Math.cos(ne)),Je=z+Math.atan2(Math.sin(ne)*Math.sin(he)*Math.cos(J),Math.cos(he)-Math.sin(J)*Math.sin(Se)),je=jn(Je),vt=jn(Se);return ct([je,vt],w.properties)}function ia(l,h,v){v===void 0&&(v={});var w=ct([1/0,1/0],{dist:1/0}),C=0;return es(l,function(z){for(var J=wi(z),ne=0;ne<J.length-1;ne++){var he=ct(J[ne]);he.properties.dist=ts(h,he,v);var Se=ct(J[ne+1]);Se.properties.dist=ts(h,Se,v);var Je=ts(he,Se,v),je=Math.max(he.properties.dist,Se.properties.dist),vt=La(he,Se),At=Ao(h,je,vt+90,v),Xt=Ao(h,je,vt-90,v),yn=hs(xt([At.geometry.coordinates,Xt.geometry.coordinates]),xt([he.geometry.coordinates,Se.geometry.coordinates])),bn=null;yn.features.length>0&&(bn=yn.features[0],bn.properties.dist=ts(h,bn,v),bn.properties.location=C+ts(he,bn,v)),he.properties.dist<w.properties.dist&&(w=he,w.properties.index=ne,w.properties.location=C),Se.properties.dist<w.properties.dist&&(w=Se,w.properties.index=ne+1,w.properties.location=C+Je),bn&&bn.properties.dist<w.properties.dist&&(w=bn,w.properties.index=ne),C+=Je}}),w}var As=ia;function Go(l,h){if(!l)throw new Error("line is required");if(!h)throw new Error("splitter is required");var v=fo(l),w=fo(h);if(v!=="LineString")throw new Error("line must be LineString");if(w==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(w==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var C=xa(h,{precision:7});switch(w){case"Point":return qt(l,C);case"MultiPoint":return _t(l,C);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(l,hs(l,C))}}function _t(l,h){var v=[],w=(0,fl.default)();return es(h,function(C){if(v.forEach(function(ne,he){ne.id=he}),!v.length)v=qt(l,C).features,v.forEach(function(ne){ne.bbox||(ne.bbox=Ku(wa(ne)))}),w.load(jt(v));else{var z=w.search(C);if(z.features.length){var J=Mt(C,z);v=v.filter(function(ne){return ne.id!==J.id}),w.remove(J),Ur(qt(J,C),function(ne){v.push(ne),w.insert(ne)})}}}),jt(v)}function qt(l,h){var v=[],w=wi(l)[0],C=wi(l)[l.geometry.coordinates.length-1];if(An(w,di(h))||An(C,di(h)))return jt([l]);var z=(0,fl.default)(),J=Ga(l);z.load(J);var ne=z.search(h);if(!ne.features.length)return jt([l]);var he=Mt(h,ne),Se=[w],Je=zo(J,function(je,vt,At){var Xt=wi(vt)[1],yn=di(h);return At===he.id?(je.push(yn),v.push(xt(je)),An(yn,Xt)?[yn]:[yn,Xt]):(je.push(Xt),je)},Se);return Je.length>1&&v.push(xt(Je)),jt(v)}function Mt(l,h){if(!h.features.length)throw new Error("lines must contain features");if(h.features.length===1)return h.features[0];var v,w=1/0;return Ur(h,function(C){var z=As(C,l),J=z.properties.dist;J<w&&(v=C,w=J)}),v}function An(l,h){return l[0]===h[0]&&l[1]===h[1]}var Kn=Go;function wr(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("point is required");if(!h)throw new Error("polygon is required");var w=di(l),C=io(h),z=C.type,J=h.bbox,ne=C.coordinates;if(J&&xi(w,J)===!1)return!1;z==="Polygon"&&(ne=[ne]);for(var he=!1,Se=0;Se<ne.length&&!he;Se++)if(Ui(w,ne[Se][0],v.ignoreBoundary)){for(var Je=!1,je=1;je<ne[Se].length&&!Je;)Ui(w,ne[Se][je],!v.ignoreBoundary)&&(Je=!0),je++;Je||(he=!0)}return he}function Ui(l,h,v){var w=!1;h[0][0]===h[h.length-1][0]&&h[0][1]===h[h.length-1][1]&&(h=h.slice(0,h.length-1));for(var C=0,z=h.length-1;C<h.length;z=C++){var J=h[C][0],ne=h[C][1],he=h[z][0],Se=h[z][1],Je=l[1]*(J-he)+ne*(he-l[0])+Se*(l[0]-J)===0&&(J-l[0])*(he-l[0])<=0&&(ne-l[1])*(Se-l[1])<=0;if(Je)return!v;var je=ne>l[1]!=Se>l[1]&&l[0]<(he-J)*(l[1]-ne)/(Se-ne)+J;je&&(w=!w)}return w}function xi(l,h){return h[0]<=l[0]&&h[1]<=l[1]&&h[2]>=l[0]&&h[3]>=l[1]}function Ol(l,h,v){v===void 0&&(v={});for(var w=di(l),C=wi(h),z=0;z<C.length-1;z++){var J=!1;if(v.ignoreEndVertices&&(z===0&&(J="start"),z===C.length-2&&(J="end"),z===0&&z+1===C.length-1&&(J="both")),rs(C[z],C[z+1],w,J,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1}function rs(l,h,v,w,C){var z=v[0],J=v[1],ne=l[0],he=l[1],Se=h[0],Je=h[1],je=v[0]-ne,vt=v[1]-he,At=Se-ne,Xt=Je-he,yn=je*Xt-vt*At;if(C!==null){if(Math.abs(yn)>C)return!1}else if(yn!==0)return!1;if(w){if(w==="start")return Math.abs(At)>=Math.abs(Xt)?At>0?ne<z&&z<=Se:Se<=z&&z<ne:Xt>0?he<J&&J<=Je:Je<=J&&J<he;if(w==="end")return Math.abs(At)>=Math.abs(Xt)?At>0?ne<=z&&z<Se:Se<z&&z<=ne:Xt>0?he<=J&&J<Je:Je<J&&J<=he;if(w==="both")return Math.abs(At)>=Math.abs(Xt)?At>0?ne<z&&z<Se:Se<z&&z<ne:Xt>0?he<J&&J<Je:Je<J&&J<he}else return Math.abs(At)>=Math.abs(Xt)?At>0?ne<=z&&z<=Se:Se<=z&&z<=ne:Xt>0?he<=J&&J<=Je:Je<=J&&J<=he;return!1}var Vi=Ol;function oa(l,h){var v=io(l),w=io(h),C=v.type,z=w.type,J=v.coordinates,ne=w.coordinates;switch(C){case"Point":switch(z){case"Point":return Mi(J,ne);default:throw new Error("feature2 "+z+" geometry not supported")}case"MultiPoint":switch(z){case"Point":return Sa(v,w);case"MultiPoint":return sa(v,w);default:throw new Error("feature2 "+z+" geometry not supported")}case"LineString":switch(z){case"Point":return Vi(w,v,{ignoreEndVertices:!0});case"LineString":return Xr(v,w);case"MultiPoint":return aa(v,w);default:throw new Error("feature2 "+z+" geometry not supported")}case"Polygon":switch(z){case"Point":return wr(w,v,{ignoreBoundary:!0});case"LineString":return Ws(v,w);case"Polygon":return ko(v,w);case"MultiPoint":return la(v,w);default:throw new Error("feature2 "+z+" geometry not supported")}default:throw new Error("feature1 "+C+" geometry not supported")}}function Sa(l,h){var v,w=!1;for(v=0;v<l.coordinates.length;v++)if(Mi(l.coordinates[v],h.coordinates)){w=!0;break}return w}function sa(l,h){for(var v=0,w=h.coordinates;v<w.length;v++){for(var C=w[v],z=!1,J=0,ne=l.coordinates;J<ne.length;J++){var he=ne[J];if(Mi(C,he)){z=!0;break}}if(!z)return!1}return!0}function aa(l,h){for(var v=!1,w=0,C=h.coordinates;w<C.length;w++){var z=C[w];if(Vi(z,l,{ignoreEndVertices:!0})&&(v=!0),!Vi(z,l))return!1}return!!v}function la(l,h){for(var v=0,w=h.coordinates;v<w.length;v++){var C=w[v];if(!wr(C,l,{ignoreBoundary:!0}))return!1}return!0}function Xr(l,h){for(var v=!1,w=0,C=h.coordinates;w<C.length;w++){var z=C[w];if(Vi({type:"Point",coordinates:z},l,{ignoreEndVertices:!0})&&(v=!0),!Vi({type:"Point",coordinates:z},l,{ignoreEndVertices:!1}))return!1}return v}function Ws(l,h){var v=!1,w=0,C=wa(l),z=wa(h);if(!Li(C,z))return!1;for(w;w<h.coordinates.length-1;w++){var J=oo(h.coordinates[w],h.coordinates[w+1]);if(wr({type:"Point",coordinates:J},l,{ignoreBoundary:!0})){v=!0;break}}return v}function ko(l,h){if(l.type==="Feature"&&l.geometry===null||h.type==="Feature"&&h.geometry===null)return!1;var v=wa(l),w=wa(h);if(!Li(v,w))return!1;for(var C=io(h).coordinates,z=0,J=C;z<J.length;z++)for(var ne=J[z],he=0,Se=ne;he<Se.length;he++){var Je=Se[he];if(!wr(Je,l))return!1}return!0}function Li(l,h){return!(l[0]>h[0]||l[2]<h[2]||l[1]>h[1]||l[3]<h[3])}function Mi(l,h){return l[0]===h[0]&&l[1]===h[1]}function oo(l,h){return[(l[0]+h[0])/2,(l[1]+h[1])/2]}var Oi=f(ui()),ks=l=>()=>l,ds=l=>{let h=l?(v,w)=>w.minus(v).abs().isLessThanOrEqualTo(l):ks(!1);return(v,w)=>h(v,w)?0:v.comparedTo(w)};function Is(l){let h=l?(v,w,C,z,J)=>v.exponentiatedBy(2).isLessThanOrEqualTo(z.minus(w).exponentiatedBy(2).plus(J.minus(C).exponentiatedBy(2)).times(l)):ks(!1);return(v,w,C)=>{let z=v.x,J=v.y,ne=C.x,he=C.y,Se=J.minus(he).times(w.x.minus(ne)).minus(z.minus(ne).times(w.y.minus(he)));return h(Se,z,J,ne,he)?0:Se.comparedTo(0)}}var wu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ua=Math.ceil,po=Math.floor,Bi="[BigNumber Error] ",qo=Bi+"Number primitive has more than 15 significant digits: ",ps=1e14,dr=14,Ca=9007199254740991,Ea=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zs=1e7,is=1e9;function bc(l){var h,v,w,C=Ye.prototype={constructor:Ye,toString:null,valueOf:null},z=new Ye(1),J=20,ne=4,he=-7,Se=21,Je=-1e7,je=1e7,vt=!1,At=1,Xt=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},bn="0123456789abcdefghijklmnopqrstuvwxyz",ur=!0;function Ye(ge,Me){var Oe,Be,Re,Fe,lt,ut,pt,Lt,St=this;if(!(St instanceof Ye))return new Ye(ge,Me);if(Me==null){if(ge&&ge._isBigNumber===!0){St.s=ge.s,!ge.c||ge.e>je?St.c=St.e=null:ge.e<Je?St.c=[St.e=0]:(St.e=ge.e,St.c=ge.c.slice());return}if((ut=typeof ge=="number")&&ge*0==0){if(St.s=1/ge<0?(ge=-ge,-1):1,ge===~~ge){for(Fe=0,lt=ge;lt>=10;lt/=10,Fe++);Fe>je?St.c=St.e=null:(St.e=Fe,St.c=[ge]);return}Lt=String(ge)}else{if(!wu.test(Lt=String(ge)))return w(St,Lt,ut);St.s=Lt.charCodeAt(0)==45?(Lt=Lt.slice(1),-1):1}(Fe=Lt.indexOf("."))>-1&&(Lt=Lt.replace(".","")),(lt=Lt.search(/e/i))>0?(Fe<0&&(Fe=lt),Fe+=+Lt.slice(lt+1),Lt=Lt.substring(0,lt)):Fe<0&&(Fe=Lt.length)}else{if(a(Me,2,bn.length,"Base"),Me==10&&ur)return St=new Ye(ge),bt(St,J+St.e+1,ne);if(Lt=String(ge),ut=typeof ge=="number"){if(ge*0!=0)return w(St,Lt,ut,Me);if(St.s=1/ge<0?(Lt=Lt.slice(1),-1):1,Ye.DEBUG&&Lt.replace(/^0\.0*|\./,"").length>15)throw Error(qo+ge)}else St.s=Lt.charCodeAt(0)===45?(Lt=Lt.slice(1),-1):1;for(Oe=bn.slice(0,Me),Fe=lt=0,pt=Lt.length;lt<pt;lt++)if(Oe.indexOf(Be=Lt.charAt(lt))<0){if(Be=="."){if(lt>Fe){Fe=pt;continue}}else if(!Re&&(Lt==Lt.toUpperCase()&&(Lt=Lt.toLowerCase())||Lt==Lt.toLowerCase()&&(Lt=Lt.toUpperCase()))){Re=!0,lt=-1,Fe=0;continue}return w(St,String(ge),ut,Me)}ut=!1,Lt=v(Lt,Me,10,St.s),(Fe=Lt.indexOf("."))>-1?Lt=Lt.replace(".",""):Fe=Lt.length}for(lt=0;Lt.charCodeAt(lt)===48;lt++);for(pt=Lt.length;Lt.charCodeAt(--pt)===48;);if(Lt=Lt.slice(lt,++pt)){if(pt-=lt,ut&&Ye.DEBUG&&pt>15&&(ge>Ca||ge!==po(ge)))throw Error(qo+St.s*ge);if((Fe=Fe-lt-1)>je)St.c=St.e=null;else if(Fe<Je)St.c=[St.e=0];else{if(St.e=Fe,St.c=[],lt=(Fe+1)%dr,Fe<0&&(lt+=dr),lt<pt){for(lt&&St.c.push(+Lt.slice(0,lt)),pt-=dr;lt<pt;)St.c.push(+Lt.slice(lt,lt+=dr));lt=dr-(Lt=Lt.slice(lt)).length}else lt-=pt;for(;lt--;Lt+="0");St.c.push(+Lt)}}else St.c=[St.e=0]}Ye.clone=bc,Ye.ROUND_UP=0,Ye.ROUND_DOWN=1,Ye.ROUND_CEIL=2,Ye.ROUND_FLOOR=3,Ye.ROUND_HALF_UP=4,Ye.ROUND_HALF_DOWN=5,Ye.ROUND_HALF_EVEN=6,Ye.ROUND_HALF_CEIL=7,Ye.ROUND_HALF_FLOOR=8,Ye.EUCLID=9,Ye.config=Ye.set=function(ge){var Me,Oe;if(ge!=null)if(typeof ge=="object"){if(ge.hasOwnProperty(Me="DECIMAL_PLACES")&&(Oe=ge[Me],a(Oe,0,is,Me),J=Oe),ge.hasOwnProperty(Me="ROUNDING_MODE")&&(Oe=ge[Me],a(Oe,0,8,Me),ne=Oe),ge.hasOwnProperty(Me="EXPONENTIAL_AT")&&(Oe=ge[Me],Oe&&Oe.pop?(a(Oe[0],-1e9,0,Me),a(Oe[1],0,is,Me),he=Oe[0],Se=Oe[1]):(a(Oe,-1e9,is,Me),he=-(Se=Oe<0?-Oe:Oe))),ge.hasOwnProperty(Me="RANGE"))if(Oe=ge[Me],Oe&&Oe.pop)a(Oe[0],-1e9,-1,Me),a(Oe[1],1,is,Me),Je=Oe[0],je=Oe[1];else if(a(Oe,-1e9,is,Me),Oe)Je=-(je=Oe<0?-Oe:Oe);else throw Error(Bi+Me+" cannot be zero: "+Oe);if(ge.hasOwnProperty(Me="CRYPTO"))if(Oe=ge[Me],Oe===!!Oe)if(Oe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Oe;else throw vt=!Oe,Error(Bi+"crypto unavailable");else vt=Oe;else throw Error(Bi+Me+" not true or false: "+Oe);if(ge.hasOwnProperty(Me="MODULO_MODE")&&(Oe=ge[Me],a(Oe,0,9,Me),At=Oe),ge.hasOwnProperty(Me="POW_PRECISION")&&(Oe=ge[Me],a(Oe,0,is,Me),Xt=Oe),ge.hasOwnProperty(Me="FORMAT"))if(Oe=ge[Me],typeof Oe=="object")yn=Oe;else throw Error(Bi+Me+" not an object: "+Oe);if(ge.hasOwnProperty(Me="ALPHABET"))if(Oe=ge[Me],typeof Oe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Oe))ur=Oe.slice(0,10)=="0123456789",bn=Oe;else throw Error(Bi+Me+" invalid: "+Oe)}else throw Error(Bi+"Object expected: "+ge);return{DECIMAL_PLACES:J,ROUNDING_MODE:ne,EXPONENTIAL_AT:[he,Se],RANGE:[Je,je],CRYPTO:vt,MODULO_MODE:At,POW_PRECISION:Xt,FORMAT:yn,ALPHABET:bn}},Ye.isBigNumber=function(ge){if(!ge||ge._isBigNumber!==!0)return!1;if(!Ye.DEBUG)return!0;var Me,Oe,Be=ge.c,Re=ge.e,Fe=ge.s;e:if({}.toString.call(Be)=="[object Array]"){if((Fe===1||Fe===-1)&&Re>=-1e9&&Re<=is&&Re===po(Re)){if(Be[0]===0){if(Re===0&&Be.length===1)return!0;break e}if(Me=(Re+1)%dr,Me<1&&(Me+=dr),String(Be[0]).length==Me){for(Me=0;Me<Be.length;Me++)if(Oe=Be[Me],Oe<0||Oe>=ps||Oe!==po(Oe))break e;if(Oe!==0)return!0}}}else if(Be===null&&Re===null&&(Fe===null||Fe===1||Fe===-1))return!0;throw Error(Bi+"Invalid BigNumber: "+ge)},Ye.maximum=Ye.max=function(){return ft(arguments,-1)},Ye.minimum=Ye.min=function(){return ft(arguments,1)},Ye.random=function(){var ge=9007199254740992,Me=Math.random()*ge&2097151?function(){return po(Math.random()*ge)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Oe){var Be,Re,Fe,lt,ut,pt=0,Lt=[],St=new Ye(z);if(Oe==null?Oe=J:a(Oe,0,is),lt=ua(Oe/dr),vt)if(crypto.getRandomValues){for(Be=crypto.getRandomValues(new Uint32Array(lt*=2));pt<lt;)ut=Be[pt]*131072+(Be[pt+1]>>>11),ut>=9e15?(Re=crypto.getRandomValues(new Uint32Array(2)),Be[pt]=Re[0],Be[pt+1]=Re[1]):(Lt.push(ut%1e14),pt+=2);pt=lt/2}else if(crypto.randomBytes){for(Be=crypto.randomBytes(lt*=7);pt<lt;)ut=(Be[pt]&31)*281474976710656+Be[pt+1]*1099511627776+Be[pt+2]*4294967296+Be[pt+3]*16777216+(Be[pt+4]<<16)+(Be[pt+5]<<8)+Be[pt+6],ut>=9e15?crypto.randomBytes(7).copy(Be,pt):(Lt.push(ut%1e14),pt+=7);pt=lt/7}else throw vt=!1,Error(Bi+"crypto unavailable");if(!vt)for(;pt<lt;)ut=Me(),ut<9e15&&(Lt[pt++]=ut%1e14);for(lt=Lt[--pt],Oe%=dr,lt&&Oe&&(ut=Ea[dr-Oe],Lt[pt]=po(lt/ut)*ut);Lt[pt]===0;Lt.pop(),pt--);if(pt<0)Lt=[Fe=0];else{for(Fe=-1;Lt[0]===0;Lt.splice(0,1),Fe-=dr);for(pt=1,ut=Lt[0];ut>=10;ut/=10,pt++);pt<dr&&(Fe-=dr-pt)}return St.e=Fe,St.c=Lt,St}}(),Ye.sum=function(){for(var ge=1,Me=arguments,Oe=new Ye(Me[0]);ge<Me.length;)Oe=Oe.plus(Me[ge++]);return Oe},v=function(){var ge="0123456789";function Me(Oe,Be,Re,Fe){for(var lt,ut=[0],pt,Lt=0,St=Oe.length;Lt<St;){for(pt=ut.length;pt--;ut[pt]*=Be);for(ut[0]+=Fe.indexOf(Oe.charAt(Lt++)),lt=0;lt<ut.length;lt++)ut[lt]>Re-1&&(ut[lt+1]==null&&(ut[lt+1]=0),ut[lt+1]+=ut[lt]/Re|0,ut[lt]%=Re)}return ut.reverse()}return function(Oe,Be,Re,Fe,lt){var ut,pt,Lt,St,on,zn,Gn,Qn,mi=Oe.indexOf("."),Ai=J,Qr=ne;for(mi>=0&&(St=Xt,Xt=0,Oe=Oe.replace(".",""),Qn=new Ye(Be),zn=Qn.pow(Oe.length-mi),Xt=St,Qn.c=Me(G(No(zn.c),zn.e,"0"),10,Re,ge),Qn.e=Qn.c.length),Gn=Me(Oe,Be,Re,lt?(ut=bn,ge):(ut=ge,bn)),Lt=St=Gn.length;Gn[--St]==0;Gn.pop());if(!Gn[0])return ut.charAt(0);if(mi<0?--Lt:(zn.c=Gn,zn.e=Lt,zn.s=Fe,zn=h(zn,Qn,Ai,Qr,Re),Gn=zn.c,on=zn.r,Lt=zn.e),pt=Lt+Ai+1,mi=Gn[pt],St=Re/2,on=on||pt<0||Gn[pt+1]!=null,on=Qr<4?(mi!=null||on)&&(Qr==0||Qr==(zn.s<0?3:2)):mi>St||mi==St&&(Qr==4||on||Qr==6&&Gn[pt-1]&1||Qr==(zn.s<0?8:7)),pt<1||!Gn[0])Oe=on?G(ut.charAt(1),-Ai,ut.charAt(0)):ut.charAt(0);else{if(Gn.length=pt,on)for(--Re;++Gn[--pt]>Re;)Gn[pt]=0,pt||(++Lt,Gn=[1].concat(Gn));for(St=Gn.length;!Gn[--St];);for(mi=0,Oe="";mi<=St;Oe+=ut.charAt(Gn[mi++]));Oe=G(Oe,Lt,ut.charAt(0))}return Oe}}(),h=function(){function ge(Be,Re,Fe){var lt,ut,pt,Lt,St=0,on=Be.length,zn=Re%Zs,Gn=Re/Zs|0;for(Be=Be.slice();on--;)pt=Be[on]%Zs,Lt=Be[on]/Zs|0,lt=Gn*pt+Lt*zn,ut=zn*pt+lt%Zs*Zs+St,St=(ut/Fe|0)+(lt/Zs|0)+Gn*Lt,Be[on]=ut%Fe;return St&&(Be=[St].concat(Be)),Be}function Me(Be,Re,Fe,lt){var ut,pt;if(Fe!=lt)pt=Fe>lt?1:-1;else for(ut=pt=0;ut<Fe;ut++)if(Be[ut]!=Re[ut]){pt=Be[ut]>Re[ut]?1:-1;break}return pt}function Oe(Be,Re,Fe,lt){for(var ut=0;Fe--;)Be[Fe]-=ut,ut=Be[Fe]<Re[Fe]?1:0,Be[Fe]=ut*lt+Be[Fe]-Re[Fe];for(;!Be[0]&&Be.length>1;Be.splice(0,1));}return function(Be,Re,Fe,lt,ut){var pt,Lt,St,on,zn,Gn,Qn,mi,Ai,Qr,Ii,vs,Lu,fa,Tf,Wa,Ju,ha=Be.s==Re.s?1:-1,Zo=Be.c,so=Re.c;if(!Zo||!Zo[0]||!so||!so[0])return new Ye(!Be.s||!Re.s||(Zo?so&&Zo[0]==so[0]:!so)?NaN:Zo&&Zo[0]==0||!so?ha*0:ha/0);for(mi=new Ye(ha),Ai=mi.c=[],Lt=Be.e-Re.e,ha=Fe+Lt+1,ut||(ut=ps,Lt=To(Be.e/dr)-To(Re.e/dr),ha=ha/dr|0),St=0;so[St]==(Zo[St]||0);St++);if(so[St]>(Zo[St]||0)&&Lt--,ha<0)Ai.push(1),on=!0;else{for(fa=Zo.length,Wa=so.length,St=0,ha+=2,zn=po(ut/(so[0]+1)),zn>1&&(so=ge(so,zn,ut),Zo=ge(Zo,zn,ut),Wa=so.length,fa=Zo.length),Lu=Wa,Qr=Zo.slice(0,Wa),Ii=Qr.length;Ii<Wa;Qr[Ii++]=0);Ju=so.slice(),Ju=[0].concat(Ju),Tf=so[0],so[1]>=ut/2&&Tf++;do{if(zn=0,pt=Me(so,Qr,Wa,Ii),pt<0){if(vs=Qr[0],Wa!=Ii&&(vs=vs*ut+(Qr[1]||0)),zn=po(vs/Tf),zn>1)for(zn>=ut&&(zn=ut-1),Gn=ge(so,zn,ut),Qn=Gn.length,Ii=Qr.length;Me(Gn,Qr,Qn,Ii)==1;)zn--,Oe(Gn,Wa<Qn?Ju:so,Qn,ut),Qn=Gn.length,pt=1;else zn==0&&(pt=zn=1),Gn=so.slice(),Qn=Gn.length;if(Qn<Ii&&(Gn=[0].concat(Gn)),Oe(Qr,Gn,Ii,ut),Ii=Qr.length,pt==-1)for(;Me(so,Qr,Wa,Ii)<1;)zn++,Oe(Qr,Wa<Ii?Ju:so,Ii,ut),Ii=Qr.length}else pt===0&&(zn++,Qr=[0]);Ai[St++]=zn,Qr[0]?Qr[Ii++]=Zo[Lu]||0:(Qr=[Zo[Lu]],Ii=1)}while((Lu++<fa||Qr[0]!=null)&&ha--);on=Qr[0]!=null,Ai[0]||Ai.splice(0,1)}if(ut==ps){for(St=1,ha=Ai[0];ha>=10;ha/=10,St++);bt(mi,Fe+(mi.e=St+Lt*dr-1)+1,lt,on)}else mi.e=Lt,mi.r=+on;return mi}}();function tt(ge,Me,Oe,Be){var Re,Fe,lt,ut,pt;if(Oe==null?Oe=ne:a(Oe,0,8),!ge.c)return ge.toString();if(Re=ge.c[0],lt=ge.e,Me==null)pt=No(ge.c),pt=Be==1||Be==2&&(lt<=he||lt>=Se)?S(pt,lt):G(pt,lt,"0");else if(ge=bt(new Ye(ge),Me,Oe),Fe=ge.e,pt=No(ge.c),ut=pt.length,Be==1||Be==2&&(Me<=Fe||Fe<=he)){for(;ut<Me;pt+="0",ut++);pt=S(pt,Fe)}else if(Me-=lt,pt=G(pt,Fe,"0"),Fe+1>ut){if(--Me>0)for(pt+=".";Me--;pt+="0");}else if(Me+=Fe-ut,Me>0)for(Fe+1==ut&&(pt+=".");Me--;pt+="0");return ge.s<0&&Re?"-"+pt:pt}function ft(ge,Me){for(var Oe,Be,Re=1,Fe=new Ye(ge[0]);Re<ge.length;Re++)Be=new Ye(ge[Re]),(!Be.s||(Oe=Ks(Fe,Be))===Me||Oe===0&&Fe.s===Me)&&(Fe=Be);return Fe}function Bt(ge,Me,Oe){for(var Be=1,Re=Me.length;!Me[--Re];Me.pop());for(Re=Me[0];Re>=10;Re/=10,Be++);return(Oe=Be+Oe*dr-1)>je?ge.c=ge.e=null:Oe<Je?ge.c=[ge.e=0]:(ge.e=Oe,ge.c=Me),ge}w=function(){var ge=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Me=/^([^.]+)\.$/,Oe=/^\.([^.]+)$/,Be=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Fe,lt,ut,pt){var Lt,St=ut?lt:lt.replace(Re,"");if(Be.test(St))Fe.s=isNaN(St)?null:St<0?-1:1;else{if(!ut&&(St=St.replace(ge,function(on,zn,Gn){return Lt=(Gn=Gn.toLowerCase())=="x"?16:Gn=="b"?2:8,!pt||pt==Lt?zn:on}),pt&&(Lt=pt,St=St.replace(Me,"$1").replace(Oe,"0.$1")),lt!=St))return new Ye(St,Lt);if(Ye.DEBUG)throw Error(Bi+"Not a"+(pt?" base "+pt:"")+" number: "+lt);Fe.s=null}Fe.c=Fe.e=null}}();function bt(ge,Me,Oe,Be){var Re,Fe,lt,ut,pt,Lt,St,on=ge.c,zn=Ea;if(on){e:{for(Re=1,ut=on[0];ut>=10;ut/=10,Re++);if(Fe=Me-Re,Fe<0)Fe+=dr,lt=Me,pt=on[Lt=0],St=po(pt/zn[Re-lt-1]%10);else if(Lt=ua((Fe+1)/dr),Lt>=on.length)if(Be){for(;on.length<=Lt;on.push(0));pt=St=0,Re=1,Fe%=dr,lt=Fe-dr+1}else break e;else{for(pt=ut=on[Lt],Re=1;ut>=10;ut/=10,Re++);Fe%=dr,lt=Fe-dr+Re,St=lt<0?0:po(pt/zn[Re-lt-1]%10)}if(Be=Be||Me<0||on[Lt+1]!=null||(lt<0?pt:pt%zn[Re-lt-1]),Be=Oe<4?(St||Be)&&(Oe==0||Oe==(ge.s<0?3:2)):St>5||St==5&&(Oe==4||Be||Oe==6&&(Fe>0?lt>0?pt/zn[Re-lt]:0:on[Lt-1])%10&1||Oe==(ge.s<0?8:7)),Me<1||!on[0])return on.length=0,Be?(Me-=ge.e+1,on[0]=zn[(dr-Me%dr)%dr],ge.e=-Me||0):on[0]=ge.e=0,ge;if(Fe==0?(on.length=Lt,ut=1,Lt--):(on.length=Lt+1,ut=zn[dr-Fe],on[Lt]=lt>0?po(pt/zn[Re-lt]%zn[lt])*ut:0),Be)for(;;)if(Lt==0){for(Fe=1,lt=on[0];lt>=10;lt/=10,Fe++);for(lt=on[0]+=ut,ut=1;lt>=10;lt/=10,ut++);Fe!=ut&&(ge.e++,on[0]==ps&&(on[0]=1));break}else{if(on[Lt]+=ut,on[Lt]!=ps)break;on[Lt--]=0,ut=1}for(Fe=on.length;on[--Fe]===0;on.pop());}ge.e>je?ge.c=ge.e=null:ge.e<Je&&(ge.c=[ge.e=0])}return ge}function Tt(ge){var Me,Oe=ge.e;return Oe===null?ge.toString():(Me=No(ge.c),Me=Oe<=he||Oe>=Se?S(Me,Oe):G(Me,Oe,"0"),ge.s<0?"-"+Me:Me)}return C.absoluteValue=C.abs=function(){var ge=new Ye(this);return ge.s<0&&(ge.s=1),ge},C.comparedTo=function(ge,Me){return Ks(this,new Ye(ge,Me))},C.decimalPlaces=C.dp=function(ge,Me){var Oe,Be,Re,Fe=this;if(ge!=null)return a(ge,0,is),Me==null?Me=ne:a(Me,0,8),bt(new Ye(Fe),ge+Fe.e+1,Me);if(!(Oe=Fe.c))return null;if(Be=((Re=Oe.length-1)-To(this.e/dr))*dr,Re=Oe[Re])for(;Re%10==0;Re/=10,Be--);return Be<0&&(Be=0),Be},C.dividedBy=C.div=function(ge,Me){return h(this,new Ye(ge,Me),J,ne)},C.dividedToIntegerBy=C.idiv=function(ge,Me){return h(this,new Ye(ge,Me),0,1)},C.exponentiatedBy=C.pow=function(ge,Me){var Oe,Be,Re,Fe,lt,ut,pt,Lt,St,on=this;if(ge=new Ye(ge),ge.c&&!ge.isInteger())throw Error(Bi+"Exponent not an integer: "+Tt(ge));if(Me!=null&&(Me=new Ye(Me)),ut=ge.e>14,!on.c||!on.c[0]||on.c[0]==1&&!on.e&&on.c.length==1||!ge.c||!ge.c[0])return St=new Ye(Math.pow(+Tt(on),ut?ge.s*(2-p(ge)):+Tt(ge))),Me?St.mod(Me):St;if(pt=ge.s<0,Me){if(Me.c?!Me.c[0]:!Me.s)return new Ye(NaN);Be=!pt&&on.isInteger()&&Me.isInteger(),Be&&(on=on.mod(Me))}else{if(ge.e>9&&(on.e>0||on.e<-1||(on.e==0?on.c[0]>1||ut&&on.c[1]>=24e7:on.c[0]<8e13||ut&&on.c[0]<=9999975e7)))return Fe=on.s<0&&p(ge)?-0:0,on.e>-1&&(Fe=1/Fe),new Ye(pt?1/Fe:Fe);Xt&&(Fe=ua(Xt/dr+2))}for(ut?(Oe=new Ye(.5),pt&&(ge.s=1),Lt=p(ge)):(Re=Math.abs(+Tt(ge)),Lt=Re%2),St=new Ye(z);;){if(Lt){if(St=St.times(on),!St.c)break;Fe?St.c.length>Fe&&(St.c.length=Fe):Be&&(St=St.mod(Me))}if(Re){if(Re=po(Re/2),Re===0)break;Lt=Re%2}else if(ge=ge.times(Oe),bt(ge,ge.e+1,1),ge.e>14)Lt=p(ge);else{if(Re=+Tt(ge),Re===0)break;Lt=Re%2}on=on.times(on),Fe?on.c&&on.c.length>Fe&&(on.c.length=Fe):Be&&(on=on.mod(Me))}return Be?St:(pt&&(St=z.div(St)),Me?St.mod(Me):Fe?bt(St,Xt,ne,lt):St)},C.integerValue=function(ge){var Me=new Ye(this);return ge==null?ge=ne:a(ge,0,8),bt(Me,Me.e+1,ge)},C.isEqualTo=C.eq=function(ge,Me){return Ks(this,new Ye(ge,Me))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(ge,Me){return Ks(this,new Ye(ge,Me))>0},C.isGreaterThanOrEqualTo=C.gte=function(ge,Me){return(Me=Ks(this,new Ye(ge,Me)))===1||Me===0},C.isInteger=function(){return!!this.c&&To(this.e/dr)>this.c.length-2},C.isLessThan=C.lt=function(ge,Me){return Ks(this,new Ye(ge,Me))<0},C.isLessThanOrEqualTo=C.lte=function(ge,Me){return(Me=Ks(this,new Ye(ge,Me)))===-1||Me===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(ge,Me){var Oe,Be,Re,Fe,lt=this,ut=lt.s;if(ge=new Ye(ge,Me),Me=ge.s,!ut||!Me)return new Ye(NaN);if(ut!=Me)return ge.s=-Me,lt.plus(ge);var pt=lt.e/dr,Lt=ge.e/dr,St=lt.c,on=ge.c;if(!pt||!Lt){if(!St||!on)return St?(ge.s=-Me,ge):new Ye(on?lt:NaN);if(!St[0]||!on[0])return on[0]?(ge.s=-Me,ge):new Ye(St[0]?lt:ne==3?-0:0)}if(pt=To(pt),Lt=To(Lt),St=St.slice(),ut=pt-Lt){for((Fe=ut<0)?(ut=-ut,Re=St):(Lt=pt,Re=on),Re.reverse(),Me=ut;Me--;Re.push(0));Re.reverse()}else for(Be=(Fe=(ut=St.length)<(Me=on.length))?ut:Me,ut=Me=0;Me<Be;Me++)if(St[Me]!=on[Me]){Fe=St[Me]<on[Me];break}if(Fe&&(Re=St,St=on,on=Re,ge.s=-ge.s),Me=(Be=on.length)-(Oe=St.length),Me>0)for(;Me--;St[Oe++]=0);for(Me=ps-1;Be>ut;){if(St[--Be]<on[Be]){for(Oe=Be;Oe&&!St[--Oe];St[Oe]=Me);--St[Oe],St[Be]+=ps}St[Be]-=on[Be]}for(;St[0]==0;St.splice(0,1),--Lt);return St[0]?Bt(ge,St,Lt):(ge.s=ne==3?-1:1,ge.c=[ge.e=0],ge)},C.modulo=C.mod=function(ge,Me){var Oe,Be,Re=this;return ge=new Ye(ge,Me),!Re.c||!ge.s||ge.c&&!ge.c[0]?new Ye(NaN):!ge.c||Re.c&&!Re.c[0]?new Ye(Re):(At==9?(Be=ge.s,ge.s=1,Oe=h(Re,ge,0,3),ge.s=Be,Oe.s*=Be):Oe=h(Re,ge,0,At),ge=Re.minus(Oe.times(ge)),!ge.c[0]&&At==1&&(ge.s=Re.s),ge)},C.multipliedBy=C.times=function(ge,Me){var Oe,Be,Re,Fe,lt,ut,pt,Lt,St,on,zn,Gn,Qn,mi,Ai,Qr=this,Ii=Qr.c,vs=(ge=new Ye(ge,Me)).c;if(!Ii||!vs||!Ii[0]||!vs[0])return!Qr.s||!ge.s||Ii&&!Ii[0]&&!vs||vs&&!vs[0]&&!Ii?ge.c=ge.e=ge.s=null:(ge.s*=Qr.s,!Ii||!vs?ge.c=ge.e=null:(ge.c=[0],ge.e=0)),ge;for(Be=To(Qr.e/dr)+To(ge.e/dr),ge.s*=Qr.s,pt=Ii.length,on=vs.length,pt<on&&(Qn=Ii,Ii=vs,vs=Qn,Re=pt,pt=on,on=Re),Re=pt+on,Qn=[];Re--;Qn.push(0));for(mi=ps,Ai=Zs,Re=on;--Re>=0;){for(Oe=0,zn=vs[Re]%Ai,Gn=vs[Re]/Ai|0,lt=pt,Fe=Re+lt;Fe>Re;)Lt=Ii[--lt]%Ai,St=Ii[lt]/Ai|0,ut=Gn*Lt+St*zn,Lt=zn*Lt+ut%Ai*Ai+Qn[Fe]+Oe,Oe=(Lt/mi|0)+(ut/Ai|0)+Gn*St,Qn[Fe--]=Lt%mi;Qn[Fe]=Oe}return Oe?++Be:Qn.splice(0,1),Bt(ge,Qn,Be)},C.negated=function(){var ge=new Ye(this);return ge.s=-ge.s||null,ge},C.plus=function(ge,Me){var Oe,Be=this,Re=Be.s;if(ge=new Ye(ge,Me),Me=ge.s,!Re||!Me)return new Ye(NaN);if(Re!=Me)return ge.s=-Me,Be.minus(ge);var Fe=Be.e/dr,lt=ge.e/dr,ut=Be.c,pt=ge.c;if(!Fe||!lt){if(!ut||!pt)return new Ye(Re/0);if(!ut[0]||!pt[0])return pt[0]?ge:new Ye(ut[0]?Be:Re*0)}if(Fe=To(Fe),lt=To(lt),ut=ut.slice(),Re=Fe-lt){for(Re>0?(lt=Fe,Oe=pt):(Re=-Re,Oe=ut),Oe.reverse();Re--;Oe.push(0));Oe.reverse()}for(Re=ut.length,Me=pt.length,Re-Me<0&&(Oe=pt,pt=ut,ut=Oe,Me=Re),Re=0;Me;)Re=(ut[--Me]=ut[Me]+pt[Me]+Re)/ps|0,ut[Me]=ps===ut[Me]?0:ut[Me]%ps;return Re&&(ut=[Re].concat(ut),++lt),Bt(ge,ut,lt)},C.precision=C.sd=function(ge,Me){var Oe,Be,Re,Fe=this;if(ge!=null&&ge!==!!ge)return a(ge,1,is),Me==null?Me=ne:a(Me,0,8),bt(new Ye(Fe),ge,Me);if(!(Oe=Fe.c))return null;if(Re=Oe.length-1,Be=Re*dr+1,Re=Oe[Re]){for(;Re%10==0;Re/=10,Be--);for(Re=Oe[0];Re>=10;Re/=10,Be++);}return ge&&Fe.e+1>Be&&(Be=Fe.e+1),Be},C.shiftedBy=function(ge){return a(ge,-9007199254740991,Ca),this.times("1e"+ge)},C.squareRoot=C.sqrt=function(){var ge,Me,Oe,Be,Re,Fe=this,lt=Fe.c,ut=Fe.s,pt=Fe.e,Lt=J+4,St=new Ye("0.5");if(ut!==1||!lt||!lt[0])return new Ye(!ut||ut<0&&(!lt||lt[0])?NaN:lt?Fe:1/0);if(ut=Math.sqrt(+Tt(Fe)),ut==0||ut==1/0?(Me=No(lt),(Me.length+pt)%2==0&&(Me+="0"),ut=Math.sqrt(+Me),pt=To((pt+1)/2)-(pt<0||pt%2),ut==1/0?Me="5e"+pt:(Me=ut.toExponential(),Me=Me.slice(0,Me.indexOf("e")+1)+pt),Oe=new Ye(Me)):Oe=new Ye(ut+""),Oe.c[0]){for(pt=Oe.e,ut=pt+Lt,ut<3&&(ut=0);;)if(Re=Oe,Oe=St.times(Re.plus(h(Fe,Re,Lt,1))),No(Re.c).slice(0,ut)===(Me=No(Oe.c)).slice(0,ut))if(Oe.e<pt&&--ut,Me=Me.slice(ut-3,ut+1),Me=="9999"||!Be&&Me=="4999"){if(!Be&&(bt(Re,Re.e+J+2,0),Re.times(Re).eq(Fe))){Oe=Re;break}Lt+=4,ut+=4,Be=1}else{(!+Me||!+Me.slice(1)&&Me.charAt(0)=="5")&&(bt(Oe,Oe.e+J+2,1),ge=!Oe.times(Oe).eq(Fe));break}}return bt(Oe,Oe.e+J+1,ne,ge)},C.toExponential=function(ge,Me){return ge!=null&&(a(ge,0,is),ge++),tt(this,ge,Me,1)},C.toFixed=function(ge,Me){return ge!=null&&(a(ge,0,is),ge=ge+this.e+1),tt(this,ge,Me)},C.toFormat=function(ge,Me,Oe){var Be,Re=this;if(Oe==null)ge!=null&&Me&&typeof Me=="object"?(Oe=Me,Me=null):ge&&typeof ge=="object"?(Oe=ge,ge=Me=null):Oe=yn;else if(typeof Oe!="object")throw Error(Bi+"Argument not an object: "+Oe);if(Be=Re.toFixed(ge,Me),Re.c){var Fe,lt=Be.split("."),ut=+Oe.groupSize,pt=+Oe.secondaryGroupSize,Lt=Oe.groupSeparator||"",St=lt[0],on=lt[1],zn=Re.s<0,Gn=zn?St.slice(1):St,Qn=Gn.length;if(pt&&(Fe=ut,ut=pt,pt=Fe,Qn-=Fe),ut>0&&Qn>0){for(Fe=Qn%ut||ut,St=Gn.substr(0,Fe);Fe<Qn;Fe+=ut)St+=Lt+Gn.substr(Fe,ut);pt>0&&(St+=Lt+Gn.slice(Fe)),zn&&(St="-"+St)}Be=on?St+(Oe.decimalSeparator||"")+((pt=+Oe.fractionGroupSize)?on.replace(new RegExp("\\d{"+pt+"}\\B","g"),"$&"+(Oe.fractionGroupSeparator||"")):on):St}return(Oe.prefix||"")+Be+(Oe.suffix||"")},C.toFraction=function(ge){var Me,Oe,Be,Re,Fe,lt,ut,pt,Lt,St,on,zn,Gn=this,Qn=Gn.c;if(ge!=null&&(ut=new Ye(ge),!ut.isInteger()&&(ut.c||ut.s!==1)||ut.lt(z)))throw Error(Bi+"Argument "+(ut.isInteger()?"out of range: ":"not an integer: ")+Tt(ut));if(!Qn)return new Ye(Gn);for(Me=new Ye(z),Lt=Oe=new Ye(z),Be=pt=new Ye(z),zn=No(Qn),Fe=Me.e=zn.length-Gn.e-1,Me.c[0]=Ea[(lt=Fe%dr)<0?dr+lt:lt],ge=!ge||ut.comparedTo(Me)>0?Fe>0?Me:Lt:ut,lt=je,je=1/0,ut=new Ye(zn),pt.c[0]=0;St=h(ut,Me,0,1),Re=Oe.plus(St.times(Be)),Re.comparedTo(ge)!=1;)Oe=Be,Be=Re,Lt=pt.plus(St.times(Re=Lt)),pt=Re,Me=ut.minus(St.times(Re=Me)),ut=Re;return Re=h(ge.minus(Oe),Be,0,1),pt=pt.plus(Re.times(Lt)),Oe=Oe.plus(Re.times(Be)),pt.s=Lt.s=Gn.s,Fe=Fe*2,on=h(Lt,Be,Fe,ne).minus(Gn).abs().comparedTo(h(pt,Oe,Fe,ne).minus(Gn).abs())<1?[Lt,Be]:[pt,Oe],je=lt,on},C.toNumber=function(){return+Tt(this)},C.toPrecision=function(ge,Me){return ge!=null&&a(ge,1,is),tt(this,ge,Me,2)},C.toString=function(ge){var Me,Oe=this,Be=Oe.s,Re=Oe.e;return Re===null?Be?(Me="Infinity",Be<0&&(Me="-"+Me)):Me="NaN":(ge==null?Me=Re<=he||Re>=Se?S(No(Oe.c),Re):G(No(Oe.c),Re,"0"):ge===10&&ur?(Oe=bt(new Ye(Oe),J+Re+1,ne),Me=G(No(Oe.c),Oe.e,"0")):(a(ge,2,bn.length,"Base"),Me=v(G(No(Oe.c),Re,"0"),10,ge,Be,!0)),Be<0&&Oe.c[0]&&(Me="-"+Me)),Me},C.valueOf=C.toJSON=function(){return Tt(this)},C._isBigNumber=!0,C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf,l!=null&&Ye.set(l),Ye}function To(l){var h=l|0;return l>0||l===h?h:h-1}function No(l){for(var h,v,w=1,C=l.length,z=l[0]+"";w<C;){for(h=l[w++]+"",v=dr-h.length;v--;h="0"+h);z+=h}for(C=z.length;z.charCodeAt(--C)===48;);return z.slice(0,C+1||1)}function Ks(l,h){var v,w,C=l.c,z=h.c,J=l.s,ne=h.s,he=l.e,Se=h.e;if(!J||!ne)return null;if(v=C&&!C[0],w=z&&!z[0],v||w)return v?w?0:-ne:J;if(J!=ne)return J;if(v=J<0,w=he==Se,!C||!z)return w?0:!C^v?1:-1;if(!w)return he>Se^v?1:-1;for(ne=(he=C.length)<(Se=z.length)?he:Se,J=0;J<ne;J++)if(C[J]!=z[J])return C[J]>z[J]^v?1:-1;return he==Se?0:he>Se^v?1:-1}function a(l,h,v,w){if(l<h||l>v||l!==po(l))throw Error(Bi+(w||"Argument")+(typeof l=="number"?l<h||l>v?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var h=l.c.length-1;return To(l.e/dr)==h&&l.c[h]%2!=0}function S(l,h){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(h<0?"e":"e+")+h}function G(l,h,v){var w,C;if(h<0){for(C=v+".";++h;C+=v);l=C+l}else if(w=l.length,++h>w){for(C=v,h-=w;--h;C+=v);l+=C}else h<w&&(l=l.slice(0,h)+"."+l.slice(h));return l}var ie=bc(),Ce=ie,st=class{constructor(l){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=l}},Pt=class extends st{constructor(l){super(l)}},zt=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(l){let h=this.root;if(h==null)return this.compare(l,l),-1;let v=null,w=null,C=null,z=null,J=h,ne=this.compare,he;for(;;)if(he=ne(J.key,l),he>0){let Se=J.left;if(Se==null||(he=ne(Se.key,l),he>0&&(J.left=Se.right,Se.right=J,J=Se,Se=J.left,Se==null)))break;v==null?w=J:v.left=J,v=J,J=Se}else if(he<0){let Se=J.right;if(Se==null||(he=ne(Se.key,l),he<0&&(J.right=Se.left,Se.left=J,J=Se,Se=J.right,Se==null)))break;C==null?z=J:C.right=J,C=J,J=Se}else break;return C!=null&&(C.right=J.left,J.left=z),v!=null&&(v.left=J.right,J.right=w),this.root!==J&&(this.root=J,this.splayCount++),he}splayMin(l){let h=l,v=h.left;for(;v!=null;){let w=v;h.left=w.right,w.right=h,h=w,v=h.left}return h}splayMax(l){let h=l,v=h.right;for(;v!=null;){let w=v;h.right=w.left,w.left=h,h=w,v=h.right}return h}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let h=this.root,v=h,w=h.left;if(this.size--,w==null)this.root=h.right;else{let C=h.right;h=this.splayMax(w),h.right=C,this.root=h}return this.modificationCount++,v}addNewRoot(l,h){this.size++,this.modificationCount++;let v=this.root;if(v==null){this.root=l;return}h<0?(l.left=v,l.right=v.right,v.right=null):(l.right=v,l.left=v.left,v.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,h)=>l<h?-1:l>h?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},sn=class zd extends zt{constructor(v,w){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,Sn,"[object Set]");this.compare=v??this.defaultCompare(),this.validKey=w??(C=>C!=null&&C!=null)}delete(v){return this.validKey(v)?this._delete(v)!=null:!1}deleteAll(v){for(let w of v)this.delete(w)}forEach(v){let w=this[Symbol.iterator](),C;for(;C=w.next(),!C.done;)v(C.value,C.value,this)}add(v){let w=this.splay(v);return w!=0&&this.addNewRoot(new Pt(v),w),this}addAndReturn(v){let w=this.splay(v);return w!=0&&this.addNewRoot(new Pt(v),w),this.root.key}addAll(v){for(let w of v)this.add(w)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)<0)return this.root.key;let w=this.root.left;if(w==null)return null;let C=w.right;for(;C!=null;)w=C,C=w.right;return w.key}firstAfter(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)>0)return this.root.key;let w=this.root.right;if(w==null)return null;let C=w.left;for(;C!=null;)w=C,C=w.left;return w.key}retainAll(v){let w=new zd(this.compare,this.validKey),C=this.modificationCount;for(let z of v){if(C!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(z)&&this.splay(z)==0&&w.add(this.root.key)}w.size!=this.size&&(this.root=w.root,this.size=w.size,this.modificationCount++)}lookup(v){return!this.validKey(v)||this.splay(v)!=0?null:this.root.key}intersection(v){let w=new zd(this.compare,this.validKey);for(let C of this)v.has(C)&&w.add(C);return w}difference(v){let w=new zd(this.compare,this.validKey);for(let C of this)v.has(C)||w.add(C);return w}union(v){let w=this.clone();return w.addAll(v),w}clone(){let v=new zd(this.compare,this.validKey);return v.size=this.size,v.root=this.copyNode(this.root),v}copyNode(v){if(v==null)return null;function w(z,J){let ne,he;do{if(ne=z.left,he=z.right,ne!=null){let Se=new Pt(ne.key);J.left=Se,w(ne,Se)}if(he!=null){let Se=new Pt(he.key);J.right=Se,z=he,J=Se}}while(he!=null)}let C=new Pt(v.key);return w(v,C),C}toSet(){return this.clone()}entries(){return new zr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Xn=Symbol.iterator,Sn=Symbol.toStringTag,Xn)](){return new Jn(this.wrap())}},Dn=class{constructor(l){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let v=this.tree.getRoot();for(;v!=null;)this.path.push(v),v=v.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],h=l.right;if(h!=null){for(;h!=null;)this.path.push(h),h=h.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},Jn=class extends Dn{getValue(l){return l.key}},zr=class extends Dn{getValue(l){return[l.key,l.key]}},go=l=>l,Yi=l=>{if(l){let h=new sn(ds(l)),v=new sn(ds(l)),w=(z,J)=>J.addAndReturn(z),C=z=>({x:w(z.x,h),y:w(z.y,v)});return C({x:new Ce(0),y:new Ce(0)}),C}return go},Do=l=>({set:h=>{Hi=Do(h)},reset:()=>Do(l),compare:ds(l),snap:Yi(l),orient:Is(l)}),Hi=Do(),gs=(l,h)=>l.ll.x.isLessThanOrEqualTo(h.x)&&h.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(h.y)&&h.y.isLessThanOrEqualTo(l.ur.y),wc=(l,h)=>{if(h.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(h.ll.x)||h.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(h.ll.y))return null;let v=l.ll.x.isLessThan(h.ll.x)?h.ll.x:l.ll.x,w=l.ur.x.isLessThan(h.ur.x)?l.ur.x:h.ur.x,C=l.ll.y.isLessThan(h.ll.y)?h.ll.y:l.ll.y,z=l.ur.y.isLessThan(h.ur.y)?l.ur.y:h.ur.y;return{ll:{x:v,y:C},ur:{x:w,y:z}}},ca=(l,h)=>l.x.times(h.y).minus(l.y.times(h.x)),Ys=(l,h)=>l.x.times(h.x).plus(l.y.times(h.y)),Rs=l=>Ys(l,l).sqrt(),Af=(l,h,v)=>{let w={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return ca(C,w).div(Rs(C)).div(Rs(w))},eu=(l,h,v)=>{let w={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return Ys(C,w).div(Rs(C)).div(Rs(w))},gi=(l,h,v)=>h.y.isZero()?null:{x:l.x.plus(h.x.div(h.y).times(v.minus(l.y))),y:v},Wo=(l,h,v)=>h.x.isZero()?null:{x:v,y:l.y.plus(h.y.div(h.x).times(v.minus(l.x)))},Ne=(l,h,v,w)=>{if(h.x.isZero())return Wo(v,w,l.x);if(w.x.isZero())return Wo(l,h,v.x);if(h.y.isZero())return gi(v,w,l.y);if(w.y.isZero())return gi(l,h,v.y);let C=ca(h,w);if(C.isZero())return null;let z={x:v.x.minus(l.x),y:v.y.minus(l.y)},J=ca(z,h).div(C),ne=ca(z,w).div(C),he=l.x.plus(ne.times(h.x)),Se=v.x.plus(J.times(w.x)),Je=l.y.plus(ne.times(h.y)),je=v.y.plus(J.times(w.y)),vt=he.plus(Se).div(2),At=Je.plus(je).div(2);return{x:vt,y:At}},ms=class dx{constructor(h,v){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");h.events===void 0?h.events=[this]:h.events.push(this),this.point=h,this.isLeft=v}static compare(h,v){let w=dx.comparePoints(h.point,v.point);return w!==0?w:(h.point!==v.point&&h.link(v),h.isLeft!==v.isLeft?h.isLeft?1:-1:Bo.compare(h.segment,v.segment))}static comparePoints(h,v){return h.x.isLessThan(v.x)?-1:h.x.isGreaterThan(v.x)?1:h.y.isLessThan(v.y)?-1:h.y.isGreaterThan(v.y)?1:0}link(h){if(h.point===this.point)throw new Error("Tried to link already linked events");let v=h.point.events;for(let w=0,C=v.length;w<C;w++){let z=v[w];this.point.events.push(z),z.point=this.point}this.checkForConsuming()}checkForConsuming(){let h=this.point.events.length;for(let v=0;v<h;v++){let w=this.point.events[v];if(w.segment.consumedBy===void 0)for(let C=v+1;C<h;C++){let z=this.point.events[C];z.consumedBy===void 0&&w.otherSE.point.events===z.otherSE.point.events&&w.segment.consume(z.segment)}}}getAvailableLinkedEvents(){let h=[];for(let v=0,w=this.point.events.length;v<w;v++){let C=this.point.events[v];C!==this&&!C.segment.ringOut&&C.segment.isInResult()&&h.push(C)}return h}getLeftmostComparator(h){let v=new Map,w=C=>{let z=C.otherSE;v.set(C,{sine:Af(this.point,h.point,z.point),cosine:eu(this.point,h.point,z.point)})};return(C,z)=>{v.has(C)||w(C),v.has(z)||w(z);let{sine:J,cosine:ne}=v.get(C),{sine:he,cosine:Se}=v.get(z);return J.isGreaterThanOrEqualTo(0)&&he.isGreaterThanOrEqualTo(0)?ne.isLessThan(Se)?1:ne.isGreaterThan(Se)?-1:0:J.isLessThan(0)&&he.isLessThan(0)?ne.isLessThan(Se)?-1:ne.isGreaterThan(Se)?1:0:he.isLessThan(J)?-1:he.isGreaterThan(J)?1:0}}},xu=0,Bo=class jg{constructor(h,v,w,C){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++xu,this.leftSE=h,h.segment=this,h.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=h,this.rings=w,this.windings=C}static compare(h,v){let w=h.leftSE.point.x,C=v.leftSE.point.x,z=h.rightSE.point.x,J=v.rightSE.point.x;if(J.isLessThan(w))return 1;if(z.isLessThan(C))return-1;let ne=h.leftSE.point.y,he=v.leftSE.point.y,Se=h.rightSE.point.y,Je=v.rightSE.point.y;if(w.isLessThan(C)){if(he.isLessThan(ne)&&he.isLessThan(Se))return 1;if(he.isGreaterThan(ne)&&he.isGreaterThan(Se))return-1;let je=h.comparePoint(v.leftSE.point);if(je<0)return 1;if(je>0)return-1;let vt=v.comparePoint(h.rightSE.point);return vt!==0?vt:-1}if(w.isGreaterThan(C)){if(ne.isLessThan(he)&&ne.isLessThan(Je))return-1;if(ne.isGreaterThan(he)&&ne.isGreaterThan(Je))return 1;let je=v.comparePoint(h.leftSE.point);if(je!==0)return je;let vt=h.comparePoint(v.rightSE.point);return vt<0?1:vt>0?-1:1}if(ne.isLessThan(he))return-1;if(ne.isGreaterThan(he))return 1;if(z.isLessThan(J)){let je=v.comparePoint(h.rightSE.point);if(je!==0)return je}if(z.isGreaterThan(J)){let je=h.comparePoint(v.rightSE.point);if(je<0)return 1;if(je>0)return-1}if(!z.eq(J)){let je=Se.minus(ne),vt=z.minus(w),At=Je.minus(he),Xt=J.minus(C);if(je.isGreaterThan(vt)&&At.isLessThan(Xt))return 1;if(je.isLessThan(vt)&&At.isGreaterThan(Xt))return-1}return z.isGreaterThan(J)?1:z.isLessThan(J)||Se.isLessThan(Je)?-1:Se.isGreaterThan(Je)?1:h.id<v.id?-1:h.id>v.id?1:0}static fromRing(h,v,w){let C,z,J,ne=ms.comparePoints(h,v);if(ne<0)C=h,z=v,J=1;else if(ne>0)C=v,z=h,J=-1;else throw new Error(`Tried to create degenerate segment at [${h.x}, ${h.y}]`);let he=new ms(C,!0),Se=new ms(z,!1);return new jg(he,Se,[w],[J])}replaceRightSE(h){this.rightSE=h,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let h=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:h.isLessThan(v)?h:v},ur:{x:this.rightSE.point.x,y:h.isGreaterThan(v)?h:v}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(h){return h.x.eq(this.leftSE.point.x)&&h.y.eq(this.leftSE.point.y)||h.x.eq(this.rightSE.point.x)&&h.y.eq(this.rightSE.point.y)}comparePoint(h){return Hi.orient(this.leftSE.point,h,this.rightSE.point)}getIntersection(h){let v=this.bbox(),w=h.bbox(),C=wc(v,w);if(C===null)return null;let z=this.leftSE.point,J=this.rightSE.point,ne=h.leftSE.point,he=h.rightSE.point,Se=gs(v,ne)&&this.comparePoint(ne)===0,Je=gs(w,z)&&h.comparePoint(z)===0,je=gs(v,he)&&this.comparePoint(he)===0,vt=gs(w,J)&&h.comparePoint(J)===0;if(Je&&Se)return vt&&!je?J:!vt&&je?he:null;if(Je)return je&&z.x.eq(he.x)&&z.y.eq(he.y)?null:z;if(Se)return vt&&J.x.eq(ne.x)&&J.y.eq(ne.y)?null:ne;if(vt&&je)return null;if(vt)return J;if(je)return he;let At=Ne(z,this.vector(),ne,h.vector());return At===null||!gs(C,At)?null:Hi.snap(At)}split(h){let v=[],w=h.events!==void 0,C=new ms(h,!0),z=new ms(h,!1),J=this.rightSE;this.replaceRightSE(z),v.push(z),v.push(C);let ne=new jg(C,J,this.rings.slice(),this.windings.slice());return ms.comparePoints(ne.leftSE.point,ne.rightSE.point)>0&&ne.swapEvents(),ms.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),w&&(C.checkForConsuming(),z.checkForConsuming()),v}swapEvents(){let h=this.rightSE;this.rightSE=this.leftSE,this.leftSE=h,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let v=0,w=this.windings.length;v<w;v++)this.windings[v]*=-1}consume(h){let v=this,w=h;for(;v.consumedBy;)v=v.consumedBy;for(;w.consumedBy;)w=w.consumedBy;let C=jg.compare(v,w);if(C!==0){if(C>0){let z=v;v=w,w=z}if(v.prev===w){let z=v;v=w,w=z}for(let z=0,J=w.rings.length;z<J;z++){let ne=w.rings[z],he=w.windings[z],Se=v.rings.indexOf(ne);Se===-1?(v.rings.push(ne),v.windings.push(he)):v.windings[Se]+=he}w.rings=null,w.windings=null,w.consumedBy=v,w.leftSE.consumedBy=v.leftSE,w.rightSE.consumedBy=v.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let h=this.prev.consumedBy||this.prev;this._beforeState=h.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let h=this.beforeState();this._afterState={rings:h.rings.slice(0),windings:h.windings.slice(0),multiPolys:[]};let v=this._afterState.rings,w=this._afterState.windings,C=this._afterState.multiPolys;for(let ne=0,he=this.rings.length;ne<he;ne++){let Se=this.rings[ne],Je=this.windings[ne],je=v.indexOf(Se);je===-1?(v.push(Se),w.push(Je)):w[je]+=Je}let z=[],J=[];for(let ne=0,he=v.length;ne<he;ne++){if(w[ne]===0)continue;let Se=v[ne],Je=Se.poly;if(J.indexOf(Je)===-1)if(Se.isExterior)z.push(Je);else{J.indexOf(Je)===-1&&J.push(Je);let je=z.indexOf(Se.poly);je!==-1&&z.splice(je,1)}}for(let ne=0,he=z.length;ne<he;ne++){let Se=z[ne].multiPoly;C.indexOf(Se)===-1&&C.push(Se)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let h=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(Zc.type){case"union":{let w=h.length===0,C=v.length===0;this._isInResult=w!==C;break}case"intersection":{let w,C;h.length<v.length?(w=h.length,C=v.length):(w=v.length,C=h.length),this._isInResult=C===Zc.numMultiPolys&&w<C;break}case"xor":{let w=Math.abs(h.length-v.length);this._isInResult=w%2===1;break}case"difference":{let w=C=>C.length===1&&C[0].isSubject;this._isInResult=w(h)!==w(v);break}}return this._isInResult}},Vr=class{constructor(l,h,v){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=h,this.isExterior=v,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let w=Hi.snap({x:new Ce(l[0][0]),y:new Ce(l[0][1])});this.bbox={ll:{x:w.x,y:w.y},ur:{x:w.x,y:w.y}};let C=w;for(let z=1,J=l.length;z<J;z++){if(typeof l[z][0]!="number"||typeof l[z][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ne=Hi.snap({x:new Ce(l[z][0]),y:new Ce(l[z][1])});ne.x.eq(C.x)&&ne.y.eq(C.y)||(this.segments.push(Bo.fromRing(C,ne,this)),ne.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ne.x),ne.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ne.y),ne.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ne.x),ne.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ne.y),C=ne)}(!w.x.eq(C.x)||!w.y.eq(C.y))&&this.segments.push(Bo.fromRing(C,w,this))}getSweepEvents(){let l=[];for(let h=0,v=this.segments.length;h<v;h++){let w=this.segments[h];l.push(w.leftSE),l.push(w.rightSE)}return l}},qc=class{constructor(l,h){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vr(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let v=1,w=l.length;v<w;v++){let C=new Vr(l[v],this,!1);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.interiorRings.push(C)}this.multiPoly=h}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let h=0,v=this.interiorRings.length;h<v;h++){let w=this.interiorRings[h].getSweepEvents();for(let C=0,z=w.length;C<z;C++)l.push(w[C])}return l}},uh=class{constructor(l,h){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Ce(Number.POSITIVE_INFINITY),y:new Ce(Number.POSITIVE_INFINITY)},ur:{x:new Ce(Number.NEGATIVE_INFINITY),y:new Ce(Number.NEGATIVE_INFINITY)}};for(let v=0,w=l.length;v<w;v++){let C=new qc(l[v],this);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.polys.push(C)}this.isSubject=h}getSweepEvents(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let w=this.polys[h].getSweepEvents();for(let C=0,z=w.length;C<z;C++)l.push(w[C])}return l}},Wc=class g1{constructor(h){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=h;for(let v=0,w=h.length;v<w;v++)h[v].segment.ringOut=this;this.poly=null}static factory(h){let v=[];for(let w=0,C=h.length;w<C;w++){let z=h[w];if(!z.isInResult()||z.ringOut)continue;let J=null,ne=z.leftSE,he=z.rightSE,Se=[ne],Je=ne.point,je=[];for(;J=ne,ne=he,Se.push(ne),ne.point!==Je;)for(;;){let vt=ne.getAvailableLinkedEvents();if(vt.length===0){let yn=Se[0].point,bn=Se[Se.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${bn.x}, ${bn.y}].`)}if(vt.length===1){he=vt[0].otherSE;break}let At=null;for(let yn=0,bn=je.length;yn<bn;yn++)if(je[yn].point===ne.point){At=yn;break}if(At!==null){let yn=je.splice(At)[0],bn=Se.splice(yn.index);bn.unshift(bn[0].otherSE),v.push(new g1(bn.reverse()));continue}je.push({index:Se.length,point:ne.point});let Xt=ne.getLeftmostComparator(J);he=vt.sort(Xt)[0].otherSE;break}v.push(new g1(Se))}return v}getGeom(){let h=this.events[0].point,v=[h];for(let Se=1,Je=this.events.length-1;Se<Je;Se++){let je=this.events[Se].point,vt=this.events[Se+1].point;Hi.orient(je,h,vt)!==0&&(v.push(je),h=je)}if(v.length===1)return null;let w=v[0],C=v[1];Hi.orient(w,h,C)===0&&v.shift(),v.push(v[0]);let z=this.isExteriorRing()?1:-1,J=this.isExteriorRing()?0:v.length-1,ne=this.isExteriorRing()?v.length:-1,he=[];for(let Se=J;Se!=ne;Se+=z)he.push([v[Se].x.toNumber(),v[Se].y.toNumber()]);return he}isExteriorRing(){if(this._isExteriorRing===void 0){let h=this.enclosingRing();this._isExteriorRing=h?!h.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var C,z;let h=this.events[0];for(let J=1,ne=this.events.length;J<ne;J++){let he=this.events[J];ms.compare(h,he)>0&&(h=he)}let v=h.segment.prevInResult(),w=v?v.prevInResult():null;for(;;){if(!v)return null;if(!w)return v.ringOut;if(w.ringOut!==v.ringOut)return((C=w.ringOut)==null?void 0:C.enclosingRing())!==v.ringOut?v.ringOut:(z=v.ringOut)==null?void 0:z.enclosingRing();v=w.prevInResult(),w=v?v.prevInResult():null}}},qa=class{constructor(l){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let h=[l];for(let v=0,w=this.interiorRings.length;v<w;v++){let C=this.interiorRings[v].getGeom();C!==null&&h.push(C)}return h}},xc=class{constructor(l){Ht(this,"rings");Ht(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let w=this.polys[h].getGeom();w!==null&&l.push(w)}return l}_composePolys(l){var v;let h=[];for(let w=0,C=l.length;w<C;w++){let z=l[w];if(!z.poly)if(z.isExteriorRing())h.push(new qa(z));else{let J=z.enclosingRing();J!=null&&J.poly||h.push(new qa(J)),(v=J==null?void 0:J.poly)==null||v.addInterior(z)}}return h}},kf=class{constructor(l,h=Bo.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=l,this.tree=new sn(h),this.segments=[]}process(l){let h=l.segment,v=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(h),v;l.isLeft&&this.tree.add(h);let w=h,C=h;do w=this.tree.lastBefore(w);while(w!=null&&w.consumedBy!=null);do C=this.tree.firstAfter(C);while(C!=null&&C.consumedBy!=null);if(l.isLeft){let z=null;if(w){let ne=w.getIntersection(h);if(ne!==null&&(h.isAnEndpoint(ne)||(z=ne),!w.isAnEndpoint(ne))){let he=this._splitSafely(w,ne);for(let Se=0,Je=he.length;Se<Je;Se++)v.push(he[Se])}}let J=null;if(C){let ne=C.getIntersection(h);if(ne!==null&&(h.isAnEndpoint(ne)||(J=ne),!C.isAnEndpoint(ne))){let he=this._splitSafely(C,ne);for(let Se=0,Je=he.length;Se<Je;Se++)v.push(he[Se])}}if(z!==null||J!==null){let ne=null;z===null?ne=J:J===null?ne=z:ne=ms.comparePoints(z,J)<=0?z:J,this.queue.delete(h.rightSE),v.push(h.rightSE);let he=h.split(ne);for(let Se=0,Je=he.length;Se<Je;Se++)v.push(he[Se])}v.length>0?(this.tree.delete(h),v.push(l)):(this.segments.push(h),h.prev=w)}else{if(w&&C){let z=w.getIntersection(C);if(z!==null){if(!w.isAnEndpoint(z)){let J=this._splitSafely(w,z);for(let ne=0,he=J.length;ne<he;ne++)v.push(J[ne])}if(!C.isAnEndpoint(z)){let J=this._splitSafely(C,z);for(let ne=0,he=J.length;ne<he;ne++)v.push(J[ne])}}}this.tree.delete(h)}return v}_splitSafely(l,h){this.tree.delete(l);let v=l.rightSE;this.queue.delete(v);let w=l.split(h);return w.push(v),l.consumedBy===void 0&&this.tree.add(l),w}},pd=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(l,h,v){Yu.type=l;let w=[new uh(h,!0)];for(let he=0,Se=v.length;he<Se;he++)w.push(new uh(v[he],!1));if(Yu.numMultiPolys=w.length,Yu.type==="difference"){let he=w[0],Se=1;for(;Se<w.length;)wc(w[Se].bbox,he.bbox)!==null?Se++:w.splice(Se,1)}if(Yu.type==="intersection")for(let he=0,Se=w.length;he<Se;he++){let Je=w[he];for(let je=he+1,vt=w.length;je<vt;je++)if(wc(Je.bbox,w[je].bbox)===null)return[]}let C=new sn(ms.compare);for(let he=0,Se=w.length;he<Se;he++){let Je=w[he].getSweepEvents();for(let je=0,vt=Je.length;je<vt;je++)C.add(Je[je])}let z=new kf(C),J=null;for(C.size!=0&&(J=C.first(),C.delete(J));J;){let he=z.process(J);for(let Se=0,Je=he.length;Se<Je;Se++){let je=he[Se];je.consumedBy===void 0&&C.add(je)}C.size!=0?(J=C.first(),C.delete(J)):J=null}Hi.reset();let ne=Wc.factory(z.segments);return new xc(ne).getGeom()}},Yu=new pd,Zc=Yu,Il=(l,...h)=>Zc.run("intersection",l,h),gd=(l,...h)=>Zc.run("difference",l,h);Hi.set;function Kc(l){let h={type:"Feature"};return h.geometry=l,h}function Yc(l){return l.type==="Feature"?l.geometry:l}function ch(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function fh(l){return Kc({type:"LineString",coordinates:l})}function Pa(l){return Kc({type:"MultiLineString",coordinates:l})}function hh(l){return Kc({type:"Polygon",coordinates:l})}function dh(l){return Kc({type:"MultiPolygon",coordinates:l})}function ph(l,h){let v=Yc(l),w=Yc(h),C=Il(v.coordinates,w.coordinates);return C.length===0?null:C.length===1?hh(C[0]):dh(C)}function b(l,h){let v=Yc(l),w=Yc(h),C=gd(v.coordinates,w.coordinates);return C.length===0?null:C.length===1?hh(C[0]):dh(C)}function M(l){return Array.isArray(l)?1+M(l[0]):-1}function q(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let h=ch(l),v=M(h),w=[];return v>1?h.forEach(C=>{w.push(fh(C))}):w.push(l),w}function oe(l){let h=[];return l.eachLayer(v=>{h.push(ch(v.toGeoJSON(15)))}),Pa(h)}ro.Cut=ro.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);h._latlngInfos=this._layer._latlngInfo,this.cut(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:w,originalLayer:C})=>{this._fireCut(C,w,C),this._fireCut(this._map,w,C),C.pm._fireEdit()}),this._editedLayers=[];let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},cut(l){let h=this._map._layers,v=l._latlngInfos||[];Object.keys(h).map(w=>h[w]).filter(w=>w.pm).filter(w=>!w._pmTempLayer).filter(w=>!L.PM.optIn&&!w.options.pmIgnore||L.PM.optIn&&w.options.pmIgnore===!1).filter(w=>w instanceof L.Polyline).filter(w=>w!==l).filter(w=>w.pm.options.allowCutting).filter(w=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(w)>-1:!0).filter(w=>!this._layerGroup.hasLayer(w)).filter(w=>{try{let C=!!hs(l.toGeoJSON(15),w.toGeoJSON(15)).features.length>0;return C||w instanceof L.Polyline&&!(w instanceof L.Polygon)?C:!!ph(l.toGeoJSON(15),w.toGeoJSON(15))}catch{return w instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(w=>{let C;if(w instanceof L.Polygon){C=L.polygon(w.getLatLngs());let he=C.getLatLngs();v.forEach(Se=>{if(Se&&Se.snapInfo){let{latlng:Je}=Se,je=this._calcClosestLayer(Je,[C]);if(je&&je.segment&&je.distance<this.options.snapDistance){let{segment:vt}=je;if(vt&&vt.length===2){let{indexPath:At,parentPath:Xt,newIndex:yn}=L.PM.Utils._getIndexFromSegment(he,vt);(At.length>1?(0,Oi.default)(he,Xt):he).splice(yn,0,Je)}}}})}else C=w;let z=this._cutLayer(l,C),J=L.geoJSON(z,w.options);J.getLayers().length===1&&([J]=J.getLayers()),this._setPane(J,"layerPane");let ne=J.addTo(this._map.pm._getContainingLayer());if(ne.pm.enable(w.pm.options),ne.pm.disable(),w._pmTempLayer=!0,l._pmTempLayer=!0,w.remove(),w.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),ne.getLayers&&ne.getLayers().length===0&&this._map.pm.removeLayer({target:ne}),ne instanceof L.LayerGroup?(ne.eachLayer(he=>{this._addDrawnLayerProp(he)}),this._addDrawnLayerProp(ne)):this._addDrawnLayerProp(ne),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let he=this.options.layersToCut.indexOf(w);he>-1&&this.options.layersToCut.splice(he,1)}this._editedLayers.push({layer:ne,originalLayer:w})})},_cutLayer(l,h){let v=L.geoJSON(),w;if(h instanceof L.Polygon)w=b(h.toGeoJSON(15),l.toGeoJSON(15));else{let C=q(h);C.forEach(z=>{let J=Kn(z,l.toGeoJSON(15)),ne;J&&J.features.length>0?ne=L.geoJSON(J):ne=L.geoJSON(z),ne.getLayers().forEach(he=>{oa(l.toGeoJSON(15),he.toGeoJSON(15))||he.addTo(v)})}),C.length>1?w=oe(v):w=v.toGeoJSON(15)}return w},_change:L.Util.falseFn}),ro.Text=ro.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}},_createMarker(l){var C,z,J,ne;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(C=this.options.textOptions)==null?void 0:C.className){let he=this.options.textOptions.className.split(" ");this.textArea.classList.add(...he)}let v=this._createTextIcon(this.textArea),w=new L.Marker(h,{textMarker:!0,_textMarkerOverPM:!0,icon:v});if(this._setPane(w,"markerPane"),this._finishLayer(w),w.pm||(w.options.draggable=!1),w.addTo(this._map.pm._getContainingLayer()),w.pm){w.pm.textArea=this.textArea,L.setOptions(w.pm,{removeIfEmpty:((z=this.options.textOptions)==null?void 0:z.removeIfEmpty)??!0});let he=((J=this.options.textOptions)==null?void 0:J.focusAfterDraw)??!0;w.pm._createTextMarker(he),(ne=this.options.textOptions)!=null&&ne.text&&w.pm.setText(this.options.textOptions.text)}this._fireCreate(w),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var be={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,_i(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(_i(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,_i(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(_i(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent(l){let h={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint)),this._dragMixinOnMouseUp(h),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let h=l._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!h&&!v?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let w="resizeableCircleMarker";this._layer instanceof L.Circle&&(w="resizeableCircle"),this.options.snappable&&!h&&!v?this._layer.pm.options[w]||this._initSnappableMarkersDrag():this._layer.pm.options[w]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let h=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(h,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let h=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,h&&L.DomUtil.removeClass(h,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:h}=l,v={lat:h.lat-this._tempDragCoord.lat,lng:h.lng-this._tempDragCoord.lng},w=C=>C.map(z=>{if(Array.isArray(z))return w(z);let J={lat:z.lat+v.lat,lng:z.lng+v.lng};return(z.alt||z.alt===0)&&(J.alt=z.alt),J});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let C=w([this._layer.getLatLng()]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let C=this._layer.getLatLng();this._layer._snapped&&(C=this._layer._orgLatLng);let z=w([C]);this._layer.setLatLng(z[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let C=w([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(C),this._fireChange(this._layer.getBounds(),"Edit")}else{let C=w(this._layer.getLatLngs());this._layer.setLatLngs(C),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=h,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,h){if(this.enabled())return!1;if(!h._fromLayerSync&&this._layer===h.target&&this.options.syncLayersOnDrag){h._fromLayerSync=!0;let v=[];if(L.Util.isArray(this.options.syncLayersOnDrag))v=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(w=>{w instanceof L.LayerGroup&&(v=v.concat(w.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let w in this._parentLayerGroup){let C=this._parentLayerGroup[w];C.pm&&(v=C.pm.getLayers(!0))}return L.Util.isArray(v)&&v.length>0&&(v=v.filter(w=>!!w.pm).filter(w=>!!w.pm.options.draggable),v.forEach(w=>{w!==this._layer&&w.pm[l]&&(w._snapped=!1,w.pm[l](h))})),v.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ee=be,Ae=f(ui());function Te(l,h,v,w){return v.unproject(h.transform(v.project(l,w)),w)}function De(l,h,v){let w=v.getMaxZoom();if(w===1/0&&(w=v.getZoom()),L.Util.isArray(l)){let C=[];return l.forEach(z=>{C.push(De(z,h,v))}),C}return l instanceof L.LatLng?Te(l,h,v,w):null}function Ue(l,h){h instanceof L.Layer&&(h=h.getLatLng());let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.project(h,v)}function ht(l,h){let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.unproject(h,v)}var Nt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ue(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ue(this._map,l.target.getLatLng()),this._initialRotateLatLng=Os(this._layer),this._startAngle=this.getAngle();let h=Os(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,h),this._fireRotationStart(this._map,h)},_onRotate(l){let h=Ue(this._map,l.target.getLatLng()),v=this._rotationStartPoint,w=this._rotationOriginPoint,C=Math.atan2(h.y-w.y,h.x-w.x)-Math.atan2(v.y-w.y,v.x-w.x);this._layer.setLatLngs(this._rotateLayer(C,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let z=this;function J(Je,je=[],vt=-1){if(vt>-1&&je.push(vt),L.Util.isArray(Je[0]))Je.forEach((At,Xt)=>J(At,je.slice(),Xt));else{let At=je.length>0?(0,Ae.default)(z._markers,je):z._markers[0];Je.forEach((Xt,yn)=>{At[yn].setLatLng(Xt)})}}J(this._layer.getLatLngs());let ne=Os(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(C,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let he=C*180/Math.PI;he=he<0?he+360:he;let Se=he+this._startAngle;this._setAngle(Se),this._rotationLayer.pm._setAngle(Se),this._fireRotation(this._rotationLayer,he,ne),this._fireRotation(this._map,he,ne),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let h=Os(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Os(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,h),this._fireRotationEnd(this._map,l,h),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,h,v,w,C){let z=Ue(C,v);return this._matrix=w.clone().rotate(l,z).flip(),De(h,this._matrix,C)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),h=l.getCenter();return l.removeFrom(this._layer._map),h},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ta(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Os(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let h=this.getAngle(),v=this._layer.getLatLngs(),w=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(w,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(w,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let C=this.getAngle()-h;C=C<0?C+360:C,this._startAngle=h,this._fireRotation(this._layer,C,v,this._layer),this._fireRotation(this._map||this._layer._map,C,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let h=l-this.getAngle();this.rotateLayer(h)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},Dt=Nt,wt=L.Class.extend({includes:[Ee,Es,Dt,kl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,h){let v=h.target,w={layer:this._layer,marker:v,event:h},C="";return l==="move"?C="moveVertexValidation":l==="add"?C="addVertexValidation":l==="remove"&&(C="removeVertexValidation"),this.options[C]&&typeof this.options[C]=="function"&&!this.options[C](w)?(l==="move"&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),Yt=wt;Yt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(w=>this._initLayer(w));let h=w=>{if(w.layer._pmTempLayer)return;this._layers=this.getLayers();let C=this._layers.filter(z=>!z.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in z.pm._parentLayerGroup));C.forEach(z=>{this._initLayer(z)}),C.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(h,100,this),this),this._layerGroup.on("layerremove",w=>{this._removeLayerFromGroup(w.target)},this);let v=w=>{w.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(v,100,this),this)},enable(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.enable(l,h)):v.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.disable(l)):h.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(h=>h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1?(l.push(h._leaflet_id),h.pm.enabled(l)):!1:h.pm.enabled())},toggleEdit(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.toggleEdit(l,h)):v.pm.toggleEdit(l)})},_initLayer(l){let h=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[h]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let h=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[h]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(h=>!!h._map))==null?void 0:l._map)||null},getLayers(l=!1,h=!0,v=!0,w=[]){let C=[];return l?this._layerGroup.getLayers().forEach(z=>{C.push(z),z instanceof L.LayerGroup&&w.indexOf(z._leaflet_id)===-1&&(w.push(z._leaflet_id),C=C.concat(z.pm.getLayers(!0,!0,!0,w)))}):C=this._layerGroup.getLayers(),v&&(C=C.filter(z=>!(z instanceof L.LayerGroup))),h&&(C=C.filter(z=>!!z.pm),C=C.filter(z=>!z._pmTempLayer),C=C.filter(z=>!L.PM.optIn&&!z.options.pmIgnore||L.PM.optIn&&z.options.pmIgnore===!1)),C},setOptions(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(v=>{v.pm&&(v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.setOptions(l,h)):v.pm.setOptions(l))})}}),Yt.Marker=Yt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let h=l.target;h.remove(),this._fireRemove(h),this._fireRemove(this._map,h)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var $t=f(ui()),dt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((h,v,w)=>w.indexOf(h)===v)},_removeFromCache(l){let h=this.markerCache.indexOf(l);h>-1&&this.markerCache.splice(h,1)},renderLimits(l){this.markerCache.forEach(h=>{l.includes(h)?this._markerGroup.addLayer(h):this._markerGroup.removeLayer(h)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let h=[...this._filterClosestMarkers(l)];this.renderLimits(h)},_filterClosestMarkers(l){let h=[...this.markerCache],v=this.options.limitMarkersToCount;return v===-1?h:(h.sort((w,C)=>{let z=w._latlng.distanceTo(l),J=C._latlng.distanceTo(l);return z-J}),h.filter((w,C)=>v>-1?C<v:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},yt=dt;Yt.Line=Yt.extend({includes:[yt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,h=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let v=w=>{if(Array.isArray(w[0]))return w.map(v,this);let C=w.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&w.map((z,J)=>{let ne=this.isPolygon()?(J+1)%w.length:J+1;return this._createMiddleMarker(C[J],C[ne])}),C};this._markers=v(h),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this.options.rotate?(h.on("dragstart",this._onRotateStart,this),h.on("drag",this._onRotate,this),h.on("dragend",this._onRotateEnd,this)):(h.on("click",this._onVertexClick,this),h.on("dragstart",this._onMarkerDragStart,this),h.on("move",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(h),h},_createMiddleMarker(l,h){if(!l||!h)return!1;let v=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),h.getLatLng()),w=this._createMarker(v),C=L.divIcon({className:"marker-icon marker-icon-middle"});return w.setIcon(C),w.leftM=l,w.rightM=h,l._middleMarkerNext=w,h._middleMarkerPrev=w,w.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),w.on("movestart",this._onMiddleMarkerMoveStart,this),w},_onMiddleMarkerClick(l){let h=l.target;if(!this._vertexValidation("add",l))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMoveStart(l){let h=l.target;if(h.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){h.on("move",this._onMiddleMarkerMovePrevent,this);return}h._dragging=!0,this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMovePrevent(l){let h=l.target;this._vertexValidationDrag(h)},_onMiddleMarkerMoveEnd(l){let h=l.target;if(h.off("move",this._onMiddleMarkerMovePrevent,this),h.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(h))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),setTimeout(()=>{delete h._dragging},100)},_addMarker(l,h,v){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let w=l.getLatLng(),C=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:z,index:J,parentPath:ne}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),he=z.length>1?(0,$t.default)(C,ne):C,Se=z.length>1?(0,$t.default)(this._markers,ne):this._markers;he.splice(J+1,0,w),Se.splice(J+1,0,l),this._layer.setLatLngs(C),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(h,l),this._createMiddleMarker(l,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,w),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return $r(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let h=this._layer,v,w;if(this.options.allowSelfIntersection?v=!1:(w=$r(this._layer.toGeoJSON(15)),v=w.features.length>0),v){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return v;l?this._flashLayer():(h.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(w)}else h.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return v},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,h){l.forEach(v=>{Array.isArray(v)?this._updateDisabledMarkerStyle(v,h):v._icon&&(h&&!this._checkMarkerAllowedToDrag(v)?L.DomUtil.addClass(v._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(v._icon,"vertexmarker-disabled"))})},_removeMarker(l){let h=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Os(this._layer,this._layer.getLatLngs()));let v=this._layer.getLatLngs(),{indexPath:w,index:C,parentPath:z}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!w)return;let J=w.length>1?(0,$t.default)(v,z):v,ne=w.length>1?(0,$t.default)(this._markers,z):this._markers,he=z[z.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!he&&(J.length<=2||this.isPolygon()&&J.length<=3)){this._flashLayer();return}J.splice(C,1),this._layer.setLatLngs(v),this.isPolygon()&&J.length<=2&&J.splice(0,J.length);let Se=!1;if(J.length<=1&&(J.splice(0,J.length),z.length>1&&w.length>1&&(v=al(v)),this._layer.setLatLngs(v),this._initMarkers(),Se=!0),no(v)||this._layer.remove(),v=al(v),this._layer.setLatLngs(v),this._markers=al(this._markers),!Se&&(ne=w.length>1?(0,$t.default)(this._markers,z):this._markers,h._middleMarkerPrev&&(this._markerGroup.removeLayer(h._middleMarkerPrev),this._removeFromCache(h._middleMarkerPrev)),h._middleMarkerNext&&(this._markerGroup.removeLayer(h._middleMarkerNext),this._removeFromCache(h._middleMarkerNext)),this._markerGroup.removeLayer(h),this._removeFromCache(h),ne)){let Je,je;if(this.isPolygon()?(Je=(C+1)%ne.length,je=(C+(ne.length-1))%ne.length):(je=C-1<0?void 0:C-1,Je=C+1>=ne.length?void 0:C+1),Je!==je){let vt=ne[je],At=ne[Je];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,At)}ne.splice(C,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(h,w),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let h=this._layer.getLatLngs(),v=l.getLatLng(),{indexPath:w,index:C,parentPath:z}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(w.length>1?(0,$t.default)(h,z):h).splice(C,1,v),this._layer.setLatLngs(h)},_getNeighborMarkers(l){let{indexPath:h,index:v,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),C=h.length>1?(0,$t.default)(this._markers,w):this._markers,z=(v+1)%C.length,J=(v+(C.length-1))%C.length,ne=C[J],he=C[z];return{prevMarker:ne,nextMarker:he}},_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),w=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),z=hs(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,J=hs(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?J+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(z+=1),!(z<=2&&J<=2)},_onMarkerDragStart(l){let h=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Os(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(h):this._markerAllowedToDrag=null},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h))return;let{indexPath:v,index:w,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!v)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(h);let z=v.length>1?(0,$t.default)(this._markers,C):this._markers,J=(w+1)%z.length,ne=(w+(z.length-1))%z.length,he=h.getLatLng(),Se=z[ne].getLatLng(),Je=z[J].getLatLng();if(h._middleMarkerNext){let je=L.PM.Utils.calcMiddleLatLng(this._map,he,Je);h._middleMarkerNext.setLatLng(je)}if(h._middleMarkerPrev){let je=L.PM.Utils.calcMiddleLatLng(this._map,he,Se);h._middleMarkerPrev.setLatLng(je)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),w=!this.options.allowSelfIntersection&&this.hasSelfIntersection();w&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(w=!1);let C=!this.options.allowSelfIntersection&&w;if(this._fireMarkerDragEnd(l,v,C),C){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,v);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let h=l.target;if(h._dragging)return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireVertexClick(l,v)}}),Yt.Polygon=Yt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),w=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),z=hs(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,J=hs(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return!(z<=2&&J<=2)}}),Yt.Rectangle=Yt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,h=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=h.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((v,w)=>{let C=this._cornerMarkers.find(z=>z._index===w);C&&C.setLatLng(v)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,h){let v=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=l,v._index=h,v._pmTempLayer=!0,v.on("click",this._onVertexClick,this),this._markerGroup.addLayer(v),v},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let h=l.target,v=this._cornerMarkers;h._oppositeCornerLatLng=v.find(C=>C._index===(h._index+2)%4).getLatLng(),h._snapped=!1;let{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,w)},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h)||h._index===void 0)return;this._adjustRectangleForMarkerMove(h);let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;this._cornerMarkers.forEach(w=>{delete w._oppositeCornerLatLng});let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragEnd(l,v),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let h=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(h),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let h=this._layer.getLatLngs()[0];if(h&&h.length!==4&&h.length>0)h.forEach((v,w)=>{this._cornerMarkers[w].setLatLng(v)}),this._cornerMarkers.slice(h.length).forEach(v=>{v.setLatLng(h[0])});else if(!h||!h.length)console.error("The layer has no LatLngs");else{let v=h.findIndex(w=>l.getLatLng().equals(w));v>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(h[(v+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(h[(v+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(h[(v+3)%4])):this._cornerMarkers.forEach(w=>{w.setLatLng(h[w._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ta(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),Yt.CircleMarker=Yt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let h=this._layer.getLatLng(),v=this._layer._radius,w=this._getLatLngOnCircle(h,v);this._centerMarker=this._createCenterMarker(h),this._outerMarker=this._createOuterMarker(w),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,h){let v=this._map.project(l),w=L.point(v.x+h,v.y);return this._map.unproject(w)},_createHintLine(l,h){let v=l.getLatLng(),w=h.getLatLng();this._hintline=L.polyline([v,w],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let h=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(h._icon,"leaflet-pm-draggable"),h.on("move",this._moveCircle,this)):h.dragging.disable(),h},_createOuterMarker(l){let h=this._createMarker(l);return h.on("drag",this._resizeCircle,this),h},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=l,h._pmTempLayer=!0,h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),h.on("click",this._onVertexClick,this),this._helperLayers.addLayer(h),h},_moveCircle(l){if(l.target._cancelDragEventChain)return;let h=this._centerMarker.getLatLng();this._layer.setLatLng(h);let v=this._layer._radius,w=this._getLatLngOnCircle(h,v);this._outerMarker._latlng=w,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),h=this._layer._radius,v=this._getLatLngOnCircle(l,h);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,h])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let h=l.target;h instanceof L.Marker&&!this._vertexValidationDrag(h)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let h=l.target;this._vertexValidationDragEnd(h)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let h=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(h);let w=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!w).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!w),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);return this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?h=Tl(this._map,l,h,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(h=Tl(this._map,l,h,this._getMaxDistanceInMeter(l))),h},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Yt.Circle=Yt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,h){return this._map.distance(l,h)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Yt.ImageOverlay=Yt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),h=l.getNorthWest(),v=l.getNorthEast(),w=l.getSouthEast(),C=l.getSouthWest();return[h,v,w,C]}}),Yt.Text=Yt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,h=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${h}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let h=this._hasFocus;this._hasFocus=l.type==="focus",!h!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let h=this.options.className.split(" ");this.textArea.classList.add(...h)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var en=function(l,h,v,w,C,z){this._matrix=[l,h,v,w,C,z]};en.init=()=>new L.PM.Matrix(1,0,0,1,0,0),en.prototype={transform(l){return this._transform(l.clone())},_transform(l){let h=this._matrix,{x:v,y:w}=l;return l.x=h[0]*v+h[1]*w+h[4],l.y=h[2]*v+h[3]*w+h[5],l},untransform(l){let h=this._matrix;return new L.Point((l.x/h[0]-h[4])/h[0],(l.y/h[2]-h[5])/h[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let h,v;return typeof l=="number"?(h=l,v=l):(h=l.x,v=l.y),this._add(1,0,0,1,h,v)},scale(l,h){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let v,w;return h=h||L.point(0,0),typeof l=="number"?(v=l,w=l):(v=l.x,w=l.y),this._add(v,0,0,w,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},rotate(l,h){let v=Math.cos(l),w=Math.sin(l);return h=h||new L.Point(0,0),this._add(v,w,-w,v,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,h,v,w,C,z){let J=[[],[],[]],ne=this._matrix,he=[[ne[0],ne[2],ne[4]],[ne[1],ne[3],ne[5]],[0,0,1]],Se=[[l,v,C],[h,w,z],[0,0,1]],Je;l&&l instanceof L.PM.Matrix&&(ne=l._matrix,Se=[[ne[0],ne[2],ne[4]],[ne[1],ne[3],ne[5]],[0,0,1]]);for(let je=0;je<3;je+=1)for(let vt=0;vt<3;vt+=1){Je=0;for(let At=0;At<3;At+=1)Je+=he[je][At]*Se[At][vt];J[je][vt]=Je}return this._matrix=[J[0][0],J[1][0],J[0][1],J[1][1],J[0][2],J[1][2]],this}};var fn=en,nn={calcMiddleLatLng(l,h,v){let w=l.project(h),C=l.project(v);return l.unproject(w._add(C)._divideBy(2))},findLayers(l){let h=[];return l.eachLayer(v=>{(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&h.push(v)}),h=h.filter(v=>!!v.pm),h=h.filter(v=>!v._pmTempLayer),h=h.filter(v=>!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&v.options.pmIgnore===!1),h},circleToPolygon(l,h=60,v=!0){let w=l.getLatLng(),C=l.getRadius(),z=$i(w,C,h,0,v),J=[];for(let ne=0;ne<z.length;ne+=1){let he=[z[ne].lat,z[ne].lng];J.push(he)}return L.polygon(J,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,h,v,w=!1){l.fire(h,v,w);let{groups:C}=this.getAllParentGroups(l);C.forEach(z=>{z.fire(h,v,w)})},getAllParentGroups(l){let h=[],v=[],w=C=>{for(let z in C._eventParents)if(h.indexOf(z)===-1){h.push(z);let J=C._eventParents[z];v.push(J),w(J)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(w(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:v,groupIds:h},{groupIds:h,groups:v}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:$i,getTranslation:or,findDeepCoordIndex(l,h,v=!0){let w,C=J=>(ne,he)=>{let Se=J.concat(he);if(v){if(ne.lat&&ne.lat===h.lat&&ne.lng===h.lng)return w=Se,!0}else if(ne.lat&&L.latLng(ne).equals(h))return w=Se,!0;return Array.isArray(ne)&&ne.some(C(Se))};l.some(C([]));let z={};return w&&(z={indexPath:w,index:w[w.length-1],parentPath:w.slice(0,w.length-1)}),z},findDeepMarkerIndex(l,h){let v,w=z=>(J,ne)=>{let he=z.concat(ne);return J._leaflet_id===h._leaflet_id?(v=he,!0):Array.isArray(J)&&J.some(w(he))};l.some(w([]));let C={};return v&&(C={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),C},_getIndexFromSegment(l,h){if(h&&h.length===2){let v=this.findDeepCoordIndex(l,h[0]),w=this.findDeepCoordIndex(l,h[1]),C=Math.max(v.index,w.index);return(v.index===0||w.index===0)&&C!==1&&(C+=1),{indexA:v,indexB:w,newIndex:C,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle(l,h,v,w){let C=Ue(w,l),z=Ue(w,h),J=v*Math.PI/180,ne=Math.cos(J),he=Math.sin(J),Se=(z.x-C.x)*ne+(z.y-C.y)*he,Je=(z.y-C.y)*ne-(z.x-C.x)*he,je=Se*ne+C.x,vt=Se*he+C.y,At=-Je*he+C.x,Xt=Je*ne+C.y,yn=ht(w,C),bn=ht(w,{x:je,y:vt}),ur=ht(w,z),Ye=ht(w,{x:At,y:Xt});return[yn,bn,ur,Ye]},pxRadiusToMeterRadius(l,h,v){let w=h.project(v),C=L.point(w.x+l,w.y);return h.distance(h.unproject(C),v)}},kn=nn;L.PM=L.PM||{version:Us.version,Map:Mo,Toolbar:ll,Draw:ro,Edit:Yt,Utils:kn,Matrix:fn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(h);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(v);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(w);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(C);function z(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(z);function J(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(J);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ne);function he(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(he)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(h=>{this.reInitLayer(h)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let h=this._map.mouseEventToLayerPoint(l),v,w;for(let C=this._drawFirst;C;C=C.next)v=C.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(w=v);w&&(L.DomEvent.fakeStop(l),this._fireEvent([w],l))}}),L.PM.initialize()})();class Rh extends Vn.Circle{constructor(t,r){const i=r.radius||10;super(t,i,r);Ht(this,"properties");Ht(this,"angleCache",new Map);Ht(this,"lastCenter");Ht(this,"lastCenterCosLat");Ht(this,"_pendingNameUpdate",!1);Ht(this,"_nameUpdateTimeout",null);hn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){hn.measure("Circle.updateProperties",()=>{var u,f,d,g;const t=this.getRadius(),r=this.getLatLng(),i=((f=(u=this.properties)==null?void 0:u.style)==null?void 0:f.name)||"",s=((d=this.properties)==null?void 0:d.style)||{},o={type:"Circle",radius:t,diameter:t*2,surface:Math.PI*Math.pow(t,2),perimeter:2*Math.PI*t,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((g=this.options)==null?void 0:g.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(t){hn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==t&&(this.properties.style||(this.properties.style={}),this.properties.style.name=t,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return hn.measure("Circle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""},"Circle")}setRadius(t){return hn.measure("Circle.setRadius",()=>(super.setRadius(t),this.updateProperties(),this),"Circle")}setLatLng(t){return hn.measure("Circle.setLatLng",()=>(super.setLatLng(t),this.updateProperties(),this),"Circle")}calculatePointOnCircle(t){return hn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(t);if(!s){const o=t*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(t,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Vn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return hn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(t=>this.calculatePointOnCircle(t)),"Circle")}calculateAngleFromPoint(t){return hn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=t.lng-r.lng,s=t.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(t){hn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(t);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const _0=(e,n)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${t}, ${r}, ${i}, ${n})`},_b=(e,n)=>{e.style.fontSize=n.fontSize,e.style.color=n.color,e.style.backgroundColor=_0(n.backgroundColor,n.backgroundOpacity),n.hasBorder?e.style.border=`${n.borderWidth} solid ${_0(n.borderColor,n.borderOpacity)}`:e.style.border="none",e.style.padding=n.padding,e.style.borderRadius=n.borderRadius},vl=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const t=Rt.DomUtil.create("div","drawing-help-message");return t.innerHTML=e,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(t),t};function bb(e,n,t){const r=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,t);return e/r}const Gi=(e,n="m",t="")=>{let r,i;return n==="m"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m"):n==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=n),t?`${t}: ${r} ${i}`:`${r} ${i}`},bR=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),wR=(e,n)=>{let t;return function(...r){window.clearTimeout(t),t=window.setTimeout(()=>e.apply(this,r),n)}},Mh=(e,n)=>{let t=0;return function(...r){const i=Date.now();if(!(i-t<n))return t=i,e.apply(this,r)}};function xR(){const e=Ft(null),n=Ft(null),t=Ft(null),r=Ft(null),i=Ft(""),s=Ft(null),o=Ft(!1),u=Ft(null);window.addEventListener("clearControlPoints",()=>{s.value=null,t.value&&t.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(N=>N.remove()),document.querySelectorAll(".drawing-help-message").forEach(N=>N.remove())}),mc(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const f=(N,ee="Double-cliquez pour diter")=>{const fe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ce=(pe,ze)=>{var Xe;const Qe=((Xe=e.value)==null?void 0:Xe.getZoom())||14,Ke=N.lat,He=bb(ze.physicalSize,Ke,Qe);return`<div class="text-container" style="width:${He}px;height:${He}px;transform:rotate(${ze.rotation}deg)">
        <div class="text-annotation" style="font-size:${He*.2}px;color:${ze.color};background-color:${_0(ze.backgroundColor,ze.backgroundOpacity)};border:${ze.hasBorder?ze.borderWidth+" solid "+_0(ze.borderColor,ze.borderOpacity):"none"};padding:${ze.padding};border-radius:${ze.borderRadius}">${pe}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ye=()=>{if(!e.value)return;const pe=k.getIcon(),ze={html:ce(k.properties.text,k.properties.style),className:pe.options.className};k.setIcon(Rt.divIcon(ze))},se=Rt.divIcon({html:ce(ee,fe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),k=Rt.marker(N,{icon:se,draggable:!1,pmIgnore:!0});k.properties={type:"text",text:ee,style:{...fe}},e.value&&(e.value.on("zoomend",ye),k.on("remove",()=>{var pe;(pe=e.value)==null||pe.off("zoomend",ye)})),ye();let le=!1,ke=!1,Pe=0,Ve=0;const Z=pe=>{if(!e.value)return;const ze=pe.target;if(ze.classList.contains("rotate")){le=!0;const Qe=k.getLatLng(),Ke=e.value.mouseEventToLatLng(pe);Pe=Math.atan2(Ke.lat-Qe.lat,Ke.lng-Qe.lng)*180/Math.PI,Ve=k.properties.style.rotation||0}else ze.classList.contains("move")&&(ke=!0);document.addEventListener("mousemove",de),document.addEventListener("mouseup",ve)},de=pe=>{if(!(!ke||!e.value)){if(le){const ze=k.getLatLng(),Qe=e.value.mouseEventToLatLng(pe),Ke=Math.atan2(Qe.lat-ze.lat,Qe.lng-ze.lng)*180/Math.PI,He=(Ve+(Ke-Pe))%360;k.properties.style.rotation=He;const Xe=k.getIcon(),ot={html:ce(k.properties.text,k.properties.style),className:Xe.options.className};k.setIcon(Rt.divIcon(ot))}else if(ke){const ze=bR(pe),Qe=e.value.mouseEventToLatLng(ze);k.setLatLng(Qe)}}},ve=()=>{le=!1,ke=!1,document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",ve)};return k.on("add",()=>{const pe=k.getElement();pe&&pe.querySelectorAll(".control-button").forEach(Qe=>{Qe.addEventListener("mousedown",Z)})}),k.on("remove",()=>{const pe=k.getElement();pe&&pe.querySelectorAll(".control-button").forEach(Qe=>{Qe.removeEventListener("mousedown",Z)})}),k.on("dblclick",pe=>{var ot;Rt.DomEvent.stopPropagation(pe);const ze=(ot=k.getElement())==null?void 0:ot.querySelector(".text-annotation");if(!ze)return;ze.contentEditable="true",ze.focus(),ze.classList.add("editing");const Qe=window.getSelection(),Ke=document.createRange();Ke.selectNodeContents(ze),Qe==null||Qe.removeAllRanges(),Qe==null||Qe.addRange(Ke);const He=()=>{ze.contentEditable="false",ze.classList.remove("editing");const kt=ze.innerText.trim();if(kt){k.properties.text=kt;const Ct=k.getIcon(),Ut={html:ce(kt,k.properties.style),className:Ct.options.className};k.setIcon(Rt.divIcon(Ut))}ze.removeEventListener("blur",He),ze.removeEventListener("keydown",Xe)},Xe=kt=>{kt.key==="Enter"&&!kt.shiftKey&&(kt.preventDefault(),He())};ze.addEventListener("blur",He),ze.addEventListener("keydown",Xe)}),k},d=(N,ee)=>{const fe=Rt.DomUtil.create("div","measure-tooltip");if(fe.innerHTML=ee,fe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(fe),e.value){const ce=e.value.latLngToContainerPoint(N);fe.style.left=`${ce.x+10}px`,fe.style.top=`${ce.y-25}px`}return fe},g=Mh((N,ee,fe)=>{if(N&&(N.innerHTML=fe,e.value)){const ce=e.value.latLngToContainerPoint(ee);N.style.left=`${ce.x+10}px`,N.style.top=`${ce.y-25}px`}},100),y=(N,ee,fe)=>{N.on("mouseover",()=>{const ce=d(N.getLatLng(),fe());N.measureDiv=ce}),N.on("mousemove",ce=>{N.measureDiv&&e.value&&g(N.measureDiv,ce.latlng,fe())}),N.on("mouseout",()=>{N.measureDiv&&(N.measureDiv.remove(),N.measureDiv=void 0)})};let x=[];const _=()=>{var N;x.cleanup&&x.cleanup(),t.value&&t.value.clearLayers(),x=[],(N=r.value)==null||N.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(ee=>ee.remove()),n.value&&n.value.getLayers().forEach(ee=>{ee instanceof pa&&ee.clearHelperPoints()})},E=(N,ee="#2563EB")=>{const fe=Rt.circleMarker(N,{radius:6,color:ee,fillColor:ee,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(fe),fe},T=(N,ee)=>{var ce,ye,se,k,le,ke;console.log("Input layer:",{type:ee,instanceof:{Circle:N instanceof Rt.Circle,Rectangle:N instanceof Rt.Rectangle,Polygon:N instanceof Rt.Polygon,Polyline:N instanceof Rt.Polyline,ElevationLine:N instanceof Sf,Line:N instanceof Ns},options:N.options});const fe={type:ee,style:N.options||{}};try{if(N instanceof Rt.Circle){const Pe=N.getRadius();fe.radius=Pe,fe.diameter=Pe*2,fe.surface=Math.PI*Math.pow(Pe,2),fe.perimeter=2*Math.PI*Pe,fe.center=N.getLatLng()}else if(N instanceof Rt.Rectangle){const Pe=N.getBounds(),Ve=Pe.getNorthEast(),Z=Pe.getSouthWest(),de=hu([[Z.lng,Z.lat],[Ve.lng,Z.lat]]),ve=hu([[Z.lng,Z.lat],[Z.lng,Ve.lat]]),pe=Uf(de,{units:"meters"}),ze=Uf(ve,{units:"meters"});fe.width=pe,fe.height=ze,fe.surface=pe*ze,fe.perimeter=2*(pe+ze),fe.dimensions={width:pe,height:ze}}else if(N instanceof Rt.Polygon)try{const Ve=N.getLatLngs()[0].map(de=>[de.lng,de.lat]);Ve.push(Ve[0]);const Z=fu([Ve]);fe.surface=nc(Z),fe.perimeter=Uf(hu(Ve),{units:"meters"})}catch(Pe){console.error("Erreur lors du calcul des proprits du polygone",Pe)}else if(N instanceof Rt.Polyline&&!(N instanceof Rt.Polygon))try{const Pe=N.getLatLngs();let Ve=0;for(let Z=1;Z<Pe.length;Z++)Ve+=Pe[Z].distanceTo(Pe[Z-1]);fe.length=Ve}catch(Pe){console.error("Erreur lors du calcul de la longueur de la ligne",Pe)}fe.style={...fe.style,color:((ce=N.options)==null?void 0:ce.color)||"#3388ff",weight:((ye=N.options)==null?void 0:ye.weight)||3,opacity:((se=N.options)==null?void 0:se.opacity)||1,fillColor:((k=N.options)==null?void 0:k.fillColor)||"#3388ff",fillOpacity:((le=N.options)==null?void 0:le.fillOpacity)||.2,dashArray:((ke=N.options)==null?void 0:ke.dashArray)||""}}catch(Pe){console.error("Error calculating shape properties:",Pe)}return fe},D=(N,ee=2)=>{var k;if(!e.value){console.warn("Map is not available for text size update");return}const fe=e.value.getZoom(),ce=N.getLatLng().lat,ye=bb(ee,ce,fe),se=(k=N.getElement())==null?void 0:k.querySelector(".text-annotation");se&&(N.properties.style.fontSize=`${ye}px`,N.properties.physicalWidth=ee,N.properties.physicalHeight=ee,_b(se,N.properties.style))},O=(N,ee,fe)=>{const ce=Rt.map(N).setView(ee,fe);e.value=ce,Rt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ce);const ye=new Rt.FeatureGroup;return ye.addTo(ce),n.value=ye,t.value=Rt.featureGroup().addTo(ce),r.value=Rt.featureGroup().addTo(ce),ce.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ye,snapLayers:[ye,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ce.on("pm:drawstart",se=>{o.value=!0,se.shape==="Circle"&&i.value==="Semicircle"&&(ce.getContainer().style.cursor="crosshair")}),ce.on("pm:drawend",()=>{o.value=!1,ce.getContainer().style.cursor="",s.value&&vl("Cliquez sur la forme pour afficher les points de contrle")}),ce.on("pm:create",xe),ye.on("click",se=>{var le,ke,Pe,Ve,Z,de,ve,pe,ze,Qe,Ke,He,Xe,ot,kt;Rt.DomEvent.stopPropagation(se);const k=se.layer;if(k.name&&!((le=k.properties)!=null&&le.name)?(k.properties||(k.properties={}),k.properties.name=k.name):(ke=k.properties)!=null&&ke.name&&!k.name&&(k.name=k.properties.name),console.log("[featureGroup click] tat du nom:",{directName:k.name,propertiesName:(Pe=k.properties)==null?void 0:Pe.name,fullProperties:k.properties}),(Ve=r.value)==null||Ve.clearLayers(),_(),s.value=k,k instanceof Rh)V(k);else if(k instanceof Rt.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(k,"name"),directName:k.name,propertiesName:(Z=k.properties)==null?void 0:Z.name,styleNameBeforeTransfer:(ve=(de=k.properties)==null?void 0:de.style)==null?void 0:ve.name,nameIsEnumerable:Object.keys(k).includes("name"),allProperties:Object.keys(k.properties||{}),_dbId:k._dbId});const Ct=k.name,Ut=(pe=k.properties)==null?void 0:pe.name,Gt=(Qe=(ze=k.properties)==null?void 0:ze.style)==null?void 0:Qe.name,cn=k._dbId,pn=new Rh(k.getLatLng(),{...k.options,radius:k.getRadius()});k.properties?pn.properties={...k.properties||{}}:pn.updateProperties();const et=Ct||Ut||Gt;et&&(pn.properties.name=et,pn.properties.style||(pn.properties.style={}),pn.properties.style.name=et,pn.name=et),cn&&(pn._dbId=cn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:pn.name,propertiesName:pn.properties.name,stylePropertyName:(Ke=pn.properties.style)==null?void 0:Ke.name,allProperties:Object.keys(pn.properties||{})}),(He=n.value)==null||He.removeLayer(k),(Xe=n.value)==null||Xe.addLayer(pn),s.value=pn,V(pn)}else if(k instanceof pa)Y(k);else if(k instanceof Rt.Rectangle){const Ct=new pa(k.getBounds(),{...k.options});Ct.updateProperties(),(ot=n.value)==null||ot.removeLayer(k),(kt=n.value)==null||kt.addLayer(Ct),s.value=Ct,Y(Ct)}else k instanceof Rt.Polygon?I(k):(k instanceof Ns||k instanceof Rt.Polyline)&&F(k)}),ce.on("pm:edit",se=>{var le,ke,Pe;console.log("[pm:edit] Dbut",{layer:se.layer,currentProperties:se.layer.properties});const k=se.layer;if(k){const Ve=((le=k.properties)==null?void 0:le.type)||"unknown";if(Le(k,Ve),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:k.properties,selectedShape:s.value}),k instanceof Rh)V(k);else if(k instanceof pa)Y(k);else if(k instanceof Rt.Rectangle){const Z=new pa(k.getBounds(),{...k.options});Z.updateProperties(),(ke=n.value)==null||ke.removeLayer(k),(Pe=n.value)==null||Pe.addLayer(Z),s.value=Z,Y(Z)}else k instanceof Rt.Polygon?I(k):k instanceof Ns?(k.updateProperties(),Le(k,"Line"),F(k)):k instanceof Rt.Polyline&&F(k)}}),ce.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(se=>se.remove()),vl("Dplacez la forme  l'endroit souhait")}),ce.on("pm:dragend",se=>{var le,ke,Pe;console.log("[pm:dragend] Dbut",{layer:se.layer,currentProperties:se.layer.properties});const k=se.layer;if(k){const Ve=((le=k.properties)==null?void 0:le.type)||"unknown";if(k instanceof Rt.Rectangle&&!(k instanceof pa)){const Z=new pa(k.getBounds(),{...k.options});Z.updateProperties(),(ke=n.value)==null||ke.removeLayer(k),(Pe=n.value)==null||Pe.addLayer(Z),s.value=Z,Y(Z)}else k instanceof Ns?(k.updateProperties(),Le(k,"Line"),F(k)):Le(k,Ve);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:k.properties,selectedShape:s.value})}setTimeout(()=>{vl("Cliquez sur la forme pour afficher les points de contrle")},100)}),ce.on("pm:remove",()=>{var se;(se=document.querySelector(".drawing-help-message"))==null||se.remove()}),ce.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(se=>se.remove()),vl("Utilisez les points de contrle pour modifier la forme")}),ce.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(se=>se.remove())}),ce.on("zoomstart",()=>{s.value&&(_(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(se=>se.remove()))}),ce},$=()=>{if(!(!e.value||!n.value||!n.value.getLayers().length))try{const N=n.value.getBounds();if(N.isValid()){const ee={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(N,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=ee.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=ee.zoomAnimation,e.value.options.markerZoomAnimation=ee.markerZoomAnimation}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}}catch(N){if(console.warn("[useMapDrawing] Error adjusting view:",N),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(ee){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",ee)}}},K=N=>{var fe;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove());try{const ce=e.value.pm;ce.globalEditModeEnabled()&&ce.disableGlobalEditMode(),ce.globalRemovalModeEnabled()&&ce.disableGlobalRemovalMode(),ce.disableDraw(),_(),(fe=r.value)==null||fe.clearLayers()}catch(ce){console.error("Error disabling modes:",ce)}if(i.value=N,!N){_();return}let ee=N;switch(N){case"Note":ee="GeoNote";break;case"Polygon":ee="Polygon";break;case"Line":ee="Line";break;case"ElevationLine":ee="ElevationLine";break;default:ee=N}N=ee,We(),setTimeout(()=>{var ce,ye,se,k,le,ke,Pe,Ve,Z,de,ve,pe,ze;try{switch(N){case"Polygon":vl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ce=e.value)==null||ce.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ye=e.value)==null||ye.off("pm:create"),(se=e.value)==null||se.on("pm:create",Ke=>{var He,Xe,ot;if(Ke.shape==="Polygon"&&Ke.layer){const kt=Ke.layer.getLatLngs()[0];(He=e.value)==null||He.removeLayer(Ke.layer),(Xe=n.value)!=null&&Xe.hasLayer(Ke.layer)&&n.value.removeLayer(Ke.layer);const Ct=new pf(kt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});n.value&&(n.value.addLayer(Ct),s.value=Ct,Ct.updateProperties()),(ot=e.value)==null||ot.pm.disableDraw(),We()}});break;case"Circle":n.value&&n.value.getLayers().filter(He=>He instanceof pa).forEach(He=>{He.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[n.value,r.value],snapMiddle:!0,snapIntersections:!0}),vl("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":vl("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(k=e.value)==null||k.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":vl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(le=e.value)==null||le.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":vl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(ke=e.value)==null||ke.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Pe=e.value)==null||Pe.off("pm:create"),(Ve=e.value)==null||Ve.on("pm:create",Ke=>{var He,Xe,ot;if(Ke.shape==="Line"&&Ke.layer){const kt=Ke.layer.getLatLngs();(He=e.value)==null||He.removeLayer(Ke.layer),(Xe=n.value)!=null&&Xe.hasLayer(Ke.layer)&&n.value.removeLayer(Ke.layer);const Ct=new Ns(kt,{color:"#3B82F6",weight:3,opacity:.8});n.value&&(n.value.addLayer(Ct),s.value=Ct,Ct.updateProperties()),(ot=e.value)==null||ot.pm.disableDraw(),We()}});break;case"Text":if(vl("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const Ke=He=>{if(!e.value||!n.value)return;const Xe=f(He.latlng);n.value.addLayer(Xe),s.value=Xe,e.value.off("click",Ke),K("")};e.value.on("click",Ke)}break;case"GeoNote":if(vl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),e.value){const Ke=He=>{if(!e.value||!n.value)return;const Xe=new Bp(He.latlng,{color:"#3B82F6",name:"Note golocalise",description:""});n.value.addLayer(Xe),s.value=Xe,Xe.updateProperties(),Xe.openPopup(),e.value.off("click",Ke),K("")};e.value.on("click",Ke)}break;case"delete":vl("Cliquez sur une forme pour la supprimer"),(Z=e.value)==null||Z.pm.enableGlobalRemovalMode();break;case"ElevationLine":vl("Cliquez et maintenez pour tracer le profil altimtrique"),(de=e.value)==null||de.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(ve=e.value)==null||ve.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(pe=e.value)==null||pe.off("pm:create"),(ze=e.value)==null||ze.on("pm:create",async Ke=>{var He,Xe,ot;if(Ke.shape==="Line"&&Ke.layer){const kt=Ke.layer.getLatLngs();(He=e.value)==null||He.removeLayer(Ke.layer),(Xe=n.value)!=null&&Xe.hasLayer(Ke.layer)&&n.value.removeLayer(Ke.layer);const Ct=new Sf(kt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(n.value){n.value.addLayer(Ct),s.value=Ct,await Ct.updateElevationProfile();const Ut=T(Ct,"ElevationLine");Object.assign(Ct.properties,{...Ut,...Ct.properties,type:"ElevationLine",elevationData:Ct.getElevationData()}),s.value=null,Xs(()=>{s.value=Ct})}(ot=e.value)==null||ot.pm.disableDraw(),i.value="",We()}});break}}catch(Qe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Qe)}},100)},X=N=>{var fe;if(!s.value)return;const ee=s.value;if(ee.properties=ee.properties||{},ee.properties.style=ee.properties.style||{},ee.properties.style={...ee.properties.style,...N},ee.properties.type==="text"){const ce=ee.properties._textLayer,ye=(fe=ce==null?void 0:ce.getElement())==null?void 0:fe.querySelector(".text-annotation");ye&&_b(ye,ee.properties.style);const se={color:N.borderColor||ee.properties.style.borderColor,weight:parseInt(N.borderWidth||ee.properties.style.borderWidth),opacity:N.borderOpacity??ee.properties.style.borderOpacity};"setStyle"in ee&&ee.setStyle(se)}else if(ee.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const ce={};N.fillColor&&(ce.fillColor=N.fillColor),N.fillOpacity!==void 0&&(ce.fillOpacity=N.fillOpacity),N.strokeColor&&(ce.color=N.strokeColor),N.strokeOpacity!==void 0&&(ce.opacity=N.strokeOpacity),N.strokeWidth!==void 0&&(ce.weight=N.strokeWidth),N.dashArray&&(ce.dashArray=N.dashArray),"setStyle"in ee&&ee.setStyle(ce)}},ae=N=>{var k,le,ke,Pe,Ve;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:N,layerType:(k=s.value.properties)==null?void 0:k.type,beforeName:s.value.name,beforePropertiesName:(le=s.value.properties)==null?void 0:le.name,beforeCategory:(ke=s.value.properties)==null?void 0:ke.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const ee=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${ee}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const fe=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise  jour: ${fe}`);const ce=s.value.properties.category;console.log(`[useMapDrawing] Catgorie existante: ${ce}`);const ye="category"in N&&N.category!==ce;if(Object.keys(N).forEach(Z=>{Z==="type"&&fe?console.log(`[useMapDrawing] Prservation du type original: ${fe}`):s.value.properties[Z]=N[Z],Z==="name"&&(console.log(`[useMapDrawing] Setting name "${N[Z]}" directly on layer`),s.value.name=N[Z]),Z==="category"&&console.log(`[useMapDrawing] Mise  jour de la catgorie: ${ce} -> ${N[Z]}`)}),fe&&(s.value.properties.type=fe),ce&&!ye&&(console.log(`[useMapDrawing] Restauration de la catgorie originale: ${ce}`),s.value.properties.category=ce),s.value._dbId&&ye){const Z=Op(),de=Z.elements.find(ve=>ve.id===s.value._dbId);if(de){console.log(`[useMapDrawing] Mise  jour de la catgorie dans le store: ${s.value.properties.category} pour l'lment ${s.value._dbId}`);const ve=de;ve.data||(ve.data={}),ve.data.category=s.value.properties.category,Z.$patch({unsavedChanges:!0})}}const se=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ye}});if(window.dispatchEvent(se),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Pe=s.value.properties)==null?void 0:Pe.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((Ve=s.value.properties)==null?void 0:Ve.type)==="Circle"){const Z=s.value,de=Z.getRadius();Z.properties.radius=de,Z.properties.diameter=de*2,Z.properties.surface=Math.PI*de*de,Z.properties.perimeter=2*Math.PI*de,N.name&&(console.log(`[useMapDrawing] Ensuring circle name "${N.name}" is set in multiple places`),Z.properties.name=N.name,Z.properties.style.name=N.name,Z.name=N.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Z.name,circlePropertiesName:Z.properties.name,nameIsEnumerable:Object.keys(Z).includes("name"),propertiesNameIsEnumerable:Object.keys(Z.properties).includes("name")}))}},ue=N=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:N.properties,selectedShapeRef:s.value}),s.value=null,Xs(()=>{s.value=N,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},Le=(N,ee)=>{console.log("[updateLayerProperties] Dbut",{layer:N,shapeType:ee,currentProperties:N.properties}),wR((ce,ye)=>{const se=T(ce,ye);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:se}),ce.properties={...se},ue(ce),ce.fire("properties:updated",{shape:ce,properties:ce.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ce.properties,selectedShape:s.value})},100)(N,ee)},W=(N,ee)=>Rt.latLng((N.lat+ee.lat)/2,(N.lng+ee.lng)/2),V=N=>{if(!e.value||!n.value)return;_();const ee=N.getLatLng(),fe=N.getRadius(),ce=E(ee,"#059669");x.push(ce),y(ce,N,()=>[Gi(fe,"m","Rayon"),Gi(fe*2,"m","Diamtre"),Gi(Math.PI*Math.pow(fe,2),"m","Surface")].join("<br>"));const ye=[],se=[0,45,90,135,180,225,270,315];se.forEach(k=>{const le=N.calculatePointOnCircle(k),ke=E(le,"#2563EB");ye.push(ke),x.push(ke),y(ke,N,()=>Gi(fe,"m","Rayon")),ke.on("mousedown",Pe=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Pe),e.value.dragging.disable();let Ve=!0;const Z=ve=>{Ve&&(N.resizeFromControlPoint(ve.latlng),ye.forEach((pe,ze)=>{const Qe=N.calculatePointOnCircle(se[ze]);pe.setLatLng(Qe)}),ce.setLatLng(N.getLatLng()),ke.measureDiv&&(ke.measureDiv.innerHTML=Gi(N.getRadius(),"m","Rayon")))},de=()=>{Ve=!1,e.value&&(e.value.off("mousemove",Z),document.removeEventListener("mouseup",de),e.value.dragging.enable(),N.updateProperties(),s.value=null,Xs(()=>{s.value=N}),Le(N,"Circle"))};e.value.on("mousemove",Z),document.addEventListener("mouseup",de)})}),ce.on("mousedown",k=>{if(!e.value)return;Rt.DomEvent.stopPropagation(k),e.value.dragging.disable();let le=!0;const ke=N.getLatLng(),Pe=k.latlng,Ve=de=>{if(!le)return;const ve=de.latlng.lng-Pe.lng,pe=de.latlng.lat-Pe.lat,ze=Rt.latLng(ke.lat+pe,ke.lng+ve);Rt.Circle.prototype.setLatLng.call(N,ze),ce.setLatLng(ze),ye.forEach((Qe,Ke)=>{const He=N.calculatePointOnCircle(se[Ke]);Qe.setLatLng(He)}),ce.measureDiv&&(ce.measureDiv.innerHTML=[Gi(N.getRadius(),"m","Rayon"),Gi(N.getRadius()*2,"m","Diamtre"),Gi(Math.PI*Math.pow(N.getRadius(),2),"m","Surface")].join("<br>"))},Z=()=>{le=!1,e.value&&(e.value.off("mousemove",Ve),document.removeEventListener("mouseup",Z),e.value.dragging.enable(),N.updateProperties(),s.value=null,Xs(()=>{s.value=N}),Le(N,"Circle"))};e.value.on("mousemove",Ve),document.addEventListener("mouseup",Z)}),N.on("circle:resized",()=>{Le(N,"Circle")}),s.value=N},Y=N=>{var Ve;if(!e.value||!n.value)return;if(!(N instanceof pa)){console.warn("La couche n'est pas une instance de Rectangle");return}const ee=N;_();const fe=ee.getCenter(),ce=ee.getRotatedCorners(),ye=ee.getMidPoints(),se=E(fe,"#059669");x.push(se),y(se,ee,()=>{const{width:Z,height:de}=ee.getDimensions(),ve=Z*de,pe=ee.getRotation();return[Gi(Z,"m","Largeur"),Gi(de,"m","Hauteur"),Gi(ve,"m","Surface"),`Rotation: ${pe.toFixed(1)}`].join("<br>")});const k=E(Rt.latLng(fe.lat+(ce[0].lat-fe.lat)*1.2,fe.lng+(ce[0].lng-fe.lng)*1.2),"#F97316");x.push(k);const le=Rt.polyline([fe,k.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(Ve=t.value)==null||Ve.addLayer(le);const ke=ce.map(Z=>{const de=E(Z,"#DC2626");return x.push(de),y(de,ee,()=>{const{width:ve,height:pe}=ee.getDimensions();return[Gi(ve,"m","Largeur"),Gi(pe,"m","Hauteur")].join("<br>")}),de}),Pe=ye.map((Z,de)=>{const ve=E(Z,"#2b6451");return x.push(ve),y(ve,ee,()=>{const{width:pe,height:ze}=ee.getDimensions(),Qe=de%2===0?pe:ze;return[Gi(Qe,"m","Longueur du ct"),Gi(Qe/2,"m","Distance au coin")].join("<br>")}),ve});se.on("mousedown",Z=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Z),e.value.dragging.disable();let de=!0;const ve=ze=>{if(!de)return;ee.moveFromCenter(ze.latlng);const Qe=ee.getRotatedCorners(),Ke=ee.getMidPoints();ke.forEach((Xe,ot)=>Xe.setLatLng(Qe[ot])),Pe.forEach((Xe,ot)=>Xe.setLatLng(Ke[ot])),se.setLatLng(ze.latlng);const He=Rt.latLng(ze.latlng.lat+(Qe[0].lat-ze.latlng.lat)*1.2,ze.latlng.lng+(Qe[0].lng-ze.latlng.lng)*1.2);k.setLatLng(He),le.setLatLngs([ze.latlng,He])},pe=()=>{de=!1,e.value&&(e.value.off("mousemove",ve),document.removeEventListener("mouseup",pe),e.value.dragging.enable(),ee.updateProperties(),s.value=null,Xs(()=>{s.value=ee}))};e.value.on("mousemove",ve),document.addEventListener("mouseup",pe)}),k.on("mousedown",Z=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Z),e.value.dragging.disable();let de=!1;const ve=Z.latlng,pe=ee.getRotation(),ze=ee.getCenter(),Qe=ve.lng-ze.lng,Ke=ve.lat-ze.lat,He=Math.atan2(Ke,Qe)*180/Math.PI;x.forEach(kt=>{kt!==k&&(kt.setStyle({opacity:0,fillOpacity:0}),kt.measureDiv&&(kt.measureDiv.style.display="none"))});const Xe=Mh(kt=>{de||(de=!0);const Ct=kt.latlng.lng-ze.lng,Ut=kt.latlng.lat-ze.lat;let cn=Math.atan2(Ut,Ct)*180/Math.PI-He,pn=(pe+cn)%360;pn<0&&(pn+=360),ee.setRotation(pn,!1),k.setLatLng(kt.latlng),le.setLatLngs([ze,kt.latlng])},16),ot=()=>{e.value&&(e.value.off("mousemove",Xe),document.removeEventListener("mouseup",ot),e.value.dragging.enable(),de&&ee.finalizeRotation(),s.value=null,Xs(()=>{s.value=ee,_(),Y(ee)}))};e.value.on("mousemove",Xe),document.addEventListener("mouseup",ot)}),ee.on("coordinates:updated",Z=>{const{corners:de,center:ve}=Z,pe=ee.getMidPoints();ke.forEach((Qe,Ke)=>Qe.setLatLng(de[Ke])),Pe.forEach((Qe,Ke)=>Qe.setLatLng(pe[Ke])),se.setLatLng(ve);const ze=Rt.latLng(ve.lat+(de[0].lat-ve.lat)*1.2,ve.lng+(de[0].lng-ve.lng)*1.2);k.setLatLng(ze),le.setLatLngs([ve,ze])})},F=N=>{if(!e.value||!n.value)return;_();const ee=N.getLatLngs();if(!ee||ee.length===0){console.warn("Pas de points pour la ligne");return}let fe=null;if(N instanceof Ns){const ce=N.getCenter();fe=E(ce,"#059669"),x.push(fe),y(fe,N,()=>{const ye=N.getLength()||0;return Gi(ye,"m","Longueur totale")}),fe.on("mousedown",ye=>{if(!e.value)return;Rt.DomEvent.stopPropagation(ye),e.value.dragging.disable();let se=!0;const k=N.getLatLngs().map(Z=>Rt.latLng(Z.lat,Z.lng)),le=ye.latlng;N instanceof Ns&&(N.off("move:end"),N.off("vertex:moved"),N.off("latlngs:updated"),N.off("properties:updated")),x.forEach((Z,de)=>{de>0&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"))});const Pe=Mh(Z=>{if(!se)return;const de=Z.latlng.lng-le.lng,ve=Z.latlng.lat-le.lat,pe=k.map(ze=>Rt.latLng(ze.lat+ve,ze.lng+de));Rt.Polyline.prototype.setLatLngs.call(N,pe),fe==null||fe.setLatLng(Z.latlng)},16),Ve=()=>{if(se=!1,!!e.value){if(e.value.off("mousemove",Pe),document.removeEventListener("mouseup",Ve),e.value.dragging.enable(),N instanceof Ns){const Z=()=>{_(),F(N)};N.on("move:end",Z),N.on("vertex:moved",Z),N.on("latlngs:updated",Z),N.on("properties:updated",Z),N.updateProperties(),Le(N,"Line")}_(),F(N)}};e.value.on("mousemove",Pe),document.addEventListener("mouseup",Ve)})}if(ee.forEach((ce,ye)=>{const se=E(ce,"#DC2626");x.push(se),y(se,N,()=>{if(N instanceof Ns){const k=N.getLength()||0,le=N.getLengthToVertex(ye);return[Gi(le,"m","Distance depuis le dbut"),Gi(k,"m","Longueur totale")].join("<br>")}return""}),se.on("mousedown",k=>{if(!e.value)return;Rt.DomEvent.stopPropagation(k),e.value.dragging.disable();let le=!0;N instanceof Ns&&(N.off("move:end"),N.off("vertex:moved"),N.off("latlngs:updated"),N.off("properties:updated")),x.forEach((Ve,Z)=>{Z!==ye+1&&(Ve.setStyle({opacity:0,fillOpacity:0}),Ve.measureDiv&&(Ve.measureDiv.style.display="none"))});const ke=Mh(Ve=>{if(!le)return;const Z=N.getLatLngs();Z[ye]=Ve.latlng,Rt.Polyline.prototype.setLatLngs.call(N,Z),se.setLatLng(Ve.latlng)},16),Pe=()=>{if(le=!1,!!e.value){if(e.value.off("mousemove",ke),document.removeEventListener("mouseup",Pe),e.value.dragging.enable(),N instanceof Ns){const Ve=()=>{_(),F(N)};N.on("move:end",Ve),N.on("vertex:moved",Ve),N.on("latlngs:updated",Ve),N.on("properties:updated",Ve),N.updateProperties(),Le(N,"Line")}_(),F(N)}};e.value.on("mousemove",ke),document.addEventListener("mouseup",Pe)})}),ee.length>=2)for(let ce=0;ce<ee.length-1;ce++){const ye=ee[ce],se=ee[ce+1],k=Rt.latLng((ye.lat+se.lat)/2,(ye.lng+se.lng)/2),le=E(k,"#2b6451");x.push(le),y(le,N,()=>{if(N instanceof Ns){const ke=N.getSegmentLengthAt(ce),Pe=N.getLength()||0,Ve=N.getLengthToVertex(ce)+ke/2;return[Gi(ke,"m","Longueur du segment"),Gi(ke/2,"m","Demi-segment"),Gi(Ve,"m","Distance depuis le dbut"),Gi(Pe,"m","Longueur totale")].join("<br>")}return""})}if(N instanceof Ns){const ce=()=>{_(),F(N)};N.on("move:start",()=>{x.forEach((ye,se)=>{se>0&&(ye.setStyle({opacity:0,fillOpacity:0}),ye.measureDiv&&(ye.measureDiv.style.display="none"))})}),N.on("move:end",ce),N.on("vertex:moved",ce),N.on("latlngs:updated",ce),N.on("properties:updated",ce),x.cleanup=()=>{N.off("move:start",()=>{}),N.off("move:end",ce),N.off("vertex:moved",ce),N.off("latlngs:updated",ce),N.off("properties:updated",ce)}}},I=N=>{if(!e.value||!n.value)return;_();const ee=N.getLatLngs()[0],fe=ee.map(Pe=>[Pe.lng,Pe.lat]);fe.push(fe[0]);const ce=fu([fe]),ye=nc(ce),se=ee.reduce((Pe,Ve,Z)=>{const de=ee[(Z+1)%ee.length];return Pe+Ve.distanceTo(de)},0);let k;if(typeof N.getCenter=="function")try{k=N.getCenter()}catch(Pe){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",Pe);const Ve=np(ce);k=Rt.latLng(Ve.geometry.coordinates[1],Ve.geometry.coordinates[0])}else{const Pe=np(ce);k=Rt.latLng(Pe.geometry.coordinates[1],Pe.geometry.coordinates[0])}const le=E(k,"#059669");x.push(le),y(le,N,()=>[Gi(se,"m","Primtre"),Gi(ye,"m","Surface")].join("<br>")),le.on("mousedown",Pe=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Pe),e.value.dragging.disable();let Ve=!0;const Z=Pe.latlng,de=[...ee];x.forEach((Qe,Ke)=>{Ke>0&&Qe.setStyle({opacity:0,fillOpacity:0})});const ve=Mh(Qe=>{if(!Ve)return;const Ke=Qe.latlng.lng-Z.lng,He=Qe.latlng.lat-Z.lat,Xe=de.map(ot=>Rt.latLng(ot.lat+He,ot.lng+Ke));Rt.Polygon.prototype.setLatLngs.call(N,[Xe]),le.setLatLng(Qe.latlng)},16),pe=Qe=>{Ve&&ve(Qe)},ze=()=>{if(Ve=!1,!!e.value){if(e.value.off("mousemove",pe),document.removeEventListener("mouseup",ze),e.value.dragging.enable(),N.properties){const Qe=N.getLatLngs()[0],Ke=Qe.map(Xe=>[Xe.lng,Xe.lat]);Ke.push(Ke[0]);const He=fu([Ke]);N.properties.area=nc(He),N.properties.perimeter=Qe.reduce((Xe,ot,kt)=>{const Ct=Qe[(kt+1)%Qe.length];return Xe+ot.distanceTo(Ct)},0),N.properties.surface=N.properties.area}_(),I(N),s.value=null,Xs(()=>{s.value=N})}};e.value.on("mousemove",pe),document.addEventListener("mouseup",ze)}),ee.forEach((Pe,Ve)=>{const Z=E(Pe,"#DC2626");x.push(Z),y(Z,N,()=>{const de=ee[(Ve-1+ee.length)%ee.length],ve=ee[(Ve+1)%ee.length],pe=Pe.distanceTo(de),ze=Pe.distanceTo(ve);return[Gi(pe,"m","Distance au point prcdent"),Gi(ze,"m","Distance au point suivant"),Gi(se,"m","Primtre total"),Gi(ye,"m","Surface")].join("<br>")}),Z.on("mousedown",de=>{if(Rt.DomEvent.stopPropagation(de),!e.value)return;e.value.dragging.disable();let ve=!0;le&&(le.setStyle({opacity:0,fillOpacity:0}),le.measureDiv&&(le.measureDiv.style.display="none"));const pe=Mh(Ke=>{if(!ve)return;ee[Ve]=Ke.latlng,Rt.Polygon.prototype.setLatLngs.call(N,[ee]),Z.setLatLng(Ke.latlng);const He=x.slice(ee.length+1),Xe=(Ve-1+ee.length)%ee.length,ot=He[Xe];if(ot){const Ct=ee[Xe],Ut=ee[Ve],Gt=Rt.latLng((Ct.lat+Ut.lat)/2,(Ct.lng+Ut.lng)/2);ot.setLatLng(Gt)}const kt=He[Ve];if(kt){const Ct=ee[Ve],Ut=ee[(Ve+1)%ee.length],Gt=Rt.latLng((Ct.lat+Ut.lat)/2,(Ct.lng+Ut.lng)/2);kt.setLatLng(Gt)}},16),ze=Ke=>{ve&&pe(Ke)},Qe=()=>{if(ve=!1,!!e.value){if(e.value.off("mousemove",ze),document.removeEventListener("mouseup",Qe),e.value.dragging.enable(),N.properties){const Ke=N.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);Ke.push(Ke[0]);const He=fu([Ke]);N.properties.area=nc(He),N.properties.perimeter=ee.reduce((Xe,ot,kt)=>{const Ct=ee[(kt+1)%ee.length];return Xe+ot.distanceTo(Ct)},0),N.properties.surface=N.properties.area}_(),I(N),s.value=null,Xs(()=>{s.value=N})}};e.value.on("mousemove",ze),document.addEventListener("mouseup",Qe)})}),(()=>{const Pe=N.getLatLngs()[0];x.slice(Pe.length+1).forEach(Z=>{t.value&&t.value.removeLayer(Z)}),x=x.slice(0,Pe.length+1);const Ve=new Array(Pe.length);for(let Z=0;Z<Pe.length;Z++){const de=Pe[Z],ve=Pe[(Z+1)%Pe.length];Ve[Z]=W(de,ve)}Ve.forEach((Z,de)=>{const ve=E(Z,"#2b6451");x.push(ve),y(ve,N,()=>{const pe=Pe[de],ze=Pe[(de+1)%Pe.length],Qe=pe.distanceTo(ze);return[Gi(Qe,"m","Longueur du segment"),Gi(se,"m","Primtre total"),Gi(ye,"m","Surface")].join("<br>")}),ve.on("mousedown",pe=>{if(!e.value)return;Rt.DomEvent.stopPropagation(pe),e.value.dragging.disable();let ze=!0;const Qe=de;le&&(le.setStyle({opacity:0,fillOpacity:0}),le.measureDiv&&(le.measureDiv.style.display="none"));const Ke=[...N.getLatLngs()[0]];Ke.splice((Qe+1)%Ke.length,0,Z),N.setLatLngs([Ke]),_(),I(N);const He=Qe+1,Xe=1+He,ot=He<x.length-1?x[Xe]:null;if(ot){const kt=Ut=>{if(!ze)return;const Gt=N.getLatLngs()[0];Gt[He]=Ut.latlng,N.setLatLngs([Gt]),ot.setLatLng(Ut.latlng);const cn=x.slice(1+Gt.length),pn=(He-1+Gt.length)%Gt.length,et=He;if(cn[pn]){const it=Gt[pn],nt=Gt[He],Vt=Rt.latLng((it.lat+nt.lat)/2,(it.lng+nt.lng)/2);cn[pn].setLatLng(Vt)}if(cn[et]){const it=Gt[He],nt=Gt[(He+1)%Gt.length],Vt=Rt.latLng((it.lat+nt.lat)/2,(it.lng+nt.lng)/2);cn[et].setLatLng(Vt)}},Ct=()=>{if(ze=!1,!!e.value){if(e.value.off("mousemove",kt),document.removeEventListener("mouseup",Ct),e.value.dragging.enable(),N.properties){const Ut=N.getLatLngs()[0].map(cn=>[cn.lng,cn.lat]);Ut.push(Ut[0]);const Gt=fu([Ut]);N.properties.area=nc(Gt),N.properties.perimeter=N.getLatLngs()[0].reduce((cn,pn,et,it)=>{const nt=it[(et+1)%it.length];return cn+pn.distanceTo(nt)},0)}_(),I(N),s.value=null,Xs(()=>{s.value=N})}};e.value.on("mousemove",kt),document.addEventListener("mouseup",Ct)}else e.value.dragging.enable(),_(),I(N)})})})()},j=N=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:N.constructor.name,properties:N.properties}),r.value.clearLayers();try{if(N instanceof pa)N.generateHelperPoints(e.value);else if(N instanceof Rh){if("getLatLng"in N&&typeof N.getLatLng=="function"){const ee=N.getLatLng();if(ee){const fe=Rt.circleMarker(ee,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}}}else if(N instanceof pf||N instanceof Rt.Polygon){let ee=[];if("getLatLngs"in N){const ce=N.getLatLngs();if(Array.isArray(ce)&&ce.length>0){const ye=ce[0];Array.isArray(ye)?ee=ye:ye instanceof Rt.LatLng&&(ee=ce)}}let fe=null;if(N instanceof pf&&typeof N.getCenter=="function")fe=N.getCenter();else if(ee.length>0){const ce=ee.map(k=>[k.lng,k.lat]);ce.push(ce[0]);const ye=fu([ce]),se=np(ye);fe=Rt.latLng(se.geometry.coordinates[1],se.geometry.coordinates[0])}if(fe){const ce=Rt.circleMarker(fe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ce)}ee.forEach(ce=>{if(ce){const ye=Rt.circleMarker(ce,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ye)}});for(let ce=0;ce<ee.length;ce++){const ye=ee[ce],se=ee[(ce+1)%ee.length];if(ye&&se){const k=Rt.latLng((ye.lat+se.lat)/2,(ye.lng+se.lng)/2),le=Rt.circleMarker(k,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(le)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(ee){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",ee)}}},H=N=>{console.log("Nombre total de couches:",N.length);const ee=N.filter(k=>{var Pe;if(!k)return!1;let le=0,ke={width:0,height:0};if(k instanceof Rt.Circle){le=Math.PI*Math.pow(k.getRadius(),2);const Ve=k.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${le.toFixed(2)} m`),console.log(`- Rayon: ${Ve.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(k instanceof pa||k instanceof Rt.Rectangle){const Ve=k.getBounds(),Z=Ve.getSouthWest(),de=Ve.getNorthEast(),ve=hu([[Z.lng,Z.lat],[de.lng,Z.lat]]),pe=hu([[Z.lng,Z.lat],[Z.lng,de.lat]]);ke.width=Uf(ve,{units:"meters"}),ke.height=Uf(pe,{units:"meters"}),le=ke.width*ke.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${le.toFixed(2)} m`),console.log(`- Largeur: ${ke.width.toFixed(2)} m`),console.log(`- Hauteur: ${ke.height.toFixed(2)} m`)}else if(((Pe=k.properties)==null?void 0:Pe.type)==="Semicircle"){const Ve=k.getStartAngle(),Z=k.getStopAngle(),de=(Z-Ve+360)%360,ve=k.getRadius();le=Math.PI*Math.pow(ve,2)*de/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${le.toFixed(2)} m`),console.log(`- Rayon: ${ve.toFixed(2)} m`),console.log(`- Angle de dbut: ${Ve.toFixed(2)}`),console.log(`- Angle de fin: ${Z.toFixed(2)}`),console.log(`- Angle d'ouverture: ${de.toFixed(2)}`)}return le>0});if(ee.length===0)return 0;const fe=new Set,ce=[];for(const k of ee)if(!fe.has(k)){const le=te(ee,k);le.length>0&&(ce.push(le),le.forEach(ke=>fe.add(ke)))}console.log(`
Nombre de groupes de formes connectes: ${ce.length}`);const ye=ce.map((k,le)=>{console.log(`
Calcul pour le groupe ${le+1} (${k.length} formes):`);const ke=k.map(ve=>{var pe,ze,Qe;try{let Ke;if(ve instanceof Rt.Circle){const He=ve.getLatLng(),Xe=ve.getRadius();Ke=BD([He.lng,He.lat],Xe/1e3,{units:"kilometers",steps:256});const ot=nc(Ke),kt=((pe=ve.properties)==null?void 0:pe.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface proprit: ${kt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${ot.toFixed(2)}m`),Ke}else if(ve instanceof pa||ve instanceof Rt.Rectangle){const He=ve.getBounds(),Xe=He.getSouthWest(),ot=He.getNorthEast(),kt=Rt.latLng(ot.lat,Xe.lng),Ct=Rt.latLng(Xe.lat,ot.lng),Ut=[[Xe.lng,Xe.lat],[Ct.lng,Ct.lat],[ot.lng,ot.lat],[kt.lng,kt.lat],[Xe.lng,Xe.lat]];Ke=fu([Ut]);const Gt=nc(Ke),cn=hu([[Xe.lng,Xe.lat],[ot.lng,Xe.lat]]),pn=hu([[Xe.lng,Xe.lat],[Xe.lng,ot.lat]]),et=Uf(cn,{units:"meters"}),it=Uf(pn,{units:"meters"}),nt=et*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${et.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface thorique: ${nt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Gt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(nt-Gt).toFixed(2)}m (${(Math.abs(nt-Gt)/nt*100).toFixed(2)}%)`),Ke}else if(((ze=ve.properties)==null?void 0:ze.type)==="Semicircle"){const He=ve.getCenter(),Xe=ve.getRadius(),ot=ve.getStartAngle(),kt=ve.getStopAngle(),Ct=[],Ut=64;Ct.push([He.lng,He.lat]);for(let pn=0;pn<=Ut;pn++){const it=(ot+(kt-ot+360)%360*pn/Ut)*Math.PI/180,nt=Xe*Math.cos(it),Qt=Xe*Math.sin(it)/111319.9,On=nt/(111319.9*Math.cos(He.lat*Math.PI/180));Ct.push([He.lng+On,He.lat+Qt])}Ct.push([He.lng,He.lat]),Ke=fu([Ct]);const Gt=nc(Ke),cn=((Qe=ve.properties)==null?void 0:Qe.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface proprit: ${cn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Gt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(cn-Gt).toFixed(2)}m (${(Math.abs(cn-Gt)/cn*100).toFixed(2)}%)`),Ke}return null}catch(Ke){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ke),null}}).filter(ve=>ve!==null);if(ke.length===0)return 0;const Pe=ke.map(ve=>{const pe=nc(ve);return console.log(`Surface individuelle: ${pe.toFixed(2)}m`),pe});let Ve=0;for(let ve=0;ve<ke.length;ve++)for(let pe=ve+1;pe<ke.length;pe++)try{const ze=bD([ke[ve],ke[pe]]),Qe=tB(ze);if(Qe){const Ke=nc(Qe);Ve+=Ke,console.log(`Intersection entre formes ${ve+1} et ${pe+1}: ${Ke.toFixed(2)}m`)}}catch(ze){console.error(`Erreur lors du calcul d'intersection entre les formes ${ve+1} et ${pe+1}:`,ze)}const Z=Pe.reduce((ve,pe)=>ve+pe,0),de=Z-Ve;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${le+1}:`),console.log(`- Surface totale (somme): ${Z.toFixed(2)}m`),console.log(`- Surface d'intersection: ${Ve.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${de.toFixed(2)}m`),de}),se=Math.max(...ye);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${se.toFixed(2)}m`),se},U=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},R=(N,ee)=>{if(!e.value)return;U();const fe=ee?te(N,ee):N;if(u.value||(u.value=Rt.layerGroup().addTo(e.value)),fe.forEach(ce=>{var se;const ye=(se=ce.properties)==null?void 0:se.type;if(ye==="Circle"||ye==="Semicircle"){const k=ce.getLatLng(),le=ce.getRadius(),ke=Rt.circle(k,{radius:le,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Rt.canvas({padding:.5})}),Pe=Rt.circle(k,{radius:le,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Rt.canvas({padding:.5})});u.value&&(u.value.addLayer(Pe),u.value.addLayer(ke))}else if(ye==="Rectangle"||ye==="Polygon"){const k=ce.getLatLngs(),le=Rt.polygon(k,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Rt.canvas({padding:.5})}),ke=Rt.polygon(k,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Rt.canvas({padding:.5})});u.value&&(u.value.addLayer(ke),u.value.addLayer(le))}}),ee&&fe.length>1&&e.value){const ce=Rt.latLngBounds([]);fe.forEach(k=>{k.getBounds?ce.extend(k.getBounds()):k.getLatLng&&ce.extend(k.getLatLng())});const ye=ce.getCenter(),se=Rt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(ye);u.value&&u.value.addLayer(Rt.marker(ye,{opacity:0,interactive:!1}).bindTooltip(se).openTooltip())}},te=(N,ee)=>{if(!ee)return[];const fe=new Set,ce=[ee],ye=[ee];for(ee._leaflet_id!==void 0&&fe.add(ee._leaflet_id);ce.length>0;){const se=ce.shift();for(const k of N){if(k===se||fe.has(k._leaflet_id))continue;re(se,k)&&(ye.push(k),ce.push(k),fe.add(k._leaflet_id))}}return ye},re=(N,ee)=>{let fe=null,ce=null;if(N.getBounds&&typeof N.getBounds=="function")fe=N.getBounds();else if(N.getLatLng&&N.getRadius){const ye=N.getLatLng(),se=N.getRadius();fe=Rt.latLngBounds([ye.lat-se/111e3,ye.lng-se/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+se/111e3,ye.lng+se/(111e3*Math.cos(ye.lat*Math.PI/180))])}if(ee.getBounds&&typeof ee.getBounds=="function")ce=ee.getBounds();else if(ee.getLatLng&&ee.getRadius){const ye=ee.getLatLng(),se=ee.getRadius();ce=Rt.latLngBounds([ye.lat-se/111e3,ye.lng-se/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+se/111e3,ye.lng+se/(111e3*Math.cos(ye.lat*Math.PI/180))])}return!(!fe||!ce||!fe.intersects(ce))},me=(N,ee)=>{var ce;const fe=te(N,ee);return fe.length===1&&(ce=ee.properties)!=null&&ce.surface?ee.properties.surface:H(fe)},xe=N=>{var ce,ye,se,k,le,ke,Pe,Ve,Z;const ee=N.layer;(ce=n.value)==null||ce.addLayer(ee);let fe="unknown";if(ee instanceof Rt.Circle?fe=i.value==="Semicircle"?"Semicircle":"Circle":ee instanceof Rt.Rectangle?fe="Rectangle":ee instanceof Rt.Polygon?fe="Polygon":ee instanceof Rt.Polyline&&!(ee instanceof Rt.Polygon)&&(fe="Line"),ee.properties=T(ee,fe),ee.properties||(ee.properties={}),ee.properties.category||(ee.properties.category="forages"),ee.properties.accessLevel||(ee.properties.accessLevel="visitor"),ee._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=ee,console.log("[useMapDrawing] Input layer:",{type:fe,instanceof:{Circle:ee instanceof Rt.Circle,Rectangle:ee instanceof Rt.Rectangle,Polygon:ee instanceof Rt.Polygon,Polyline:ee instanceof Rt.Polyline},options:ee.options,properties:ee.properties,_dbId:ee._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:ee,type:fe,properties:ee.properties}})),ee.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:fe,isSelected:s.value===ee}),(!s.value||s.value!==ee)&&j(ee)}),ee.on("mouseout",()=>{var de;console.log("[mouseout] Sortie de la forme",{type:fe,isSelected:s.value===ee}),(!s.value||s.value!==ee)&&((de=r.value)==null||de.clearLayers())}),fe==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(fe==="Circle"){(ye=n.value)==null||ye.removeLayer(ee);const de=new Rh(ee.getLatLng(),{radius:ee.getRadius(),...ee.options});de.properties={...T(de,"Circle"),type:"Circle"},Object.defineProperty(de,"name",{value:de.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(de,"name"),directName:de.name,propertiesName:de.properties.name,nameIsEnumerable:Object.keys(de).includes("name"),allProperties:Object.keys(de.properties),allKeys:Object.keys(de)}),(se=n.value)==null||se.addLayer(de),s.value=de,V(de)}else if(fe==="Rectangle"){(k=n.value)==null||k.removeLayer(ee);const de=new pa(ee.getBounds(),{...ee.options});de.updateProperties(),(le=n.value)==null||le.addLayer(de),s.value=de,Y(de)}else if(ee instanceof Rt.Polygon){const de=ee.getLatLngs()[0],ve=new pf([de],{...ee.options});ve.updateProperties(),(ke=n.value)==null||ke.removeLayer(ee),(Pe=n.value)==null||Pe.addLayer(ve),s.value=ve,I(ve)}else if(ee instanceof Ns)F(ee);else if(ee instanceof Rt.Polyline&&!(ee instanceof Rt.Polygon)){const de=ee.getLatLngs(),ve=new Ns(de,{...ee.options});ve.updateProperties(),(Ve=n.value)==null||Ve.removeLayer(ee),(Z=n.value)==null||Z.addLayer(ve),s.value=ve,F(ve)}vl("Cliquez sur la forme pour afficher les points de contrle")},We=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",xe))};return{map:e,featureGroup:n,controlPointsGroup:t,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:O,setDrawingTool:K,updateShapeStyle:X,updateShapeProperties:ae,updateTextFixedSize:D,adjustView:$,clearActiveControlPoints:_,calculateTotalCoverageArea:H,showCoverageOverlay:R,hideCoverageOverlay:U,calculateConnectedCoverageArea:me,getConnectedShapes:te}}function LR(){const{isEnabled:e,startMeasure:n}=dd(),t=Ft(null),r=Ft(""),i=Ft("Hybride"),s=Ft(null),o=n("createBaseMaps","useMapState"),u={Hybride:Rt.layerGroup([Rt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Rt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Rt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Rt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const f=hn.createPerformanceTracker(x=>{hn.measure("initMap:setOptions",()=>{t.value=x,x.options.zoomSnap=.25,x.options.zoomDelta=.25,x.options.wheelPxPerZoomLevel=100,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.options.minZoom=2,x.options.maxZoom=19,x.options.scrollWheelZoom=!0,x.options.doubleClickZoom=!0;const _=Rt.latLngBounds(Rt.latLng(-90,-180),Rt.latLng(90,180));x.setMaxBounds(_),x.options.maxBoundsViscosity=1,x.options.trackResize=!0;let E=null;x.getZoom(),x.on("zoomstart",()=>{x.getZoom(),x.options.zoomAnimation=!1,x.options.markerZoomAnimation=!1}),x.on("zoomend",()=>{E&&clearTimeout(E),E=setTimeout(()=>{setTimeout(()=>{x.options.zoomAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1});const D=x.getBounds(),O=x.options.maxBounds;O&&!D.intersects(O)&&x.panInsideBounds(O,{animate:!1})},250)},250)});const T=x._zoomAnimation;T&&(x._zoomAnimation=function(D){try{this._animatingZoom||T.call(this,D)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),hn.measure("initMap:addInitialLayer",()=>{x&&x.whenReady(()=>{const _=i.value;if(u[_]){if(console.log(`Initialisation de la couche de base: ${_}`),s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(E){console.warn("Erreur lors de la suppression de la couche active prcdente:",E)}s.value=u[_];try{s.value.addTo(x),console.log(`Couche ${_} ajoute  la carte`)}catch(E){console.error(`Erreur lors de l'ajout de la couche ${_}:`,E)}}else console.warn(`Couche de base non disponible: ${_}`)})},"useMapState"),x.on("baselayerchange",_=>{const E=n("baselayerchange","useMapState",{layer:_.name});i.value=_.name,s.value=_.layer,E()}),e.value&&(x.on("movestart",()=>{n("mapMove","useMapState",{startCenter:x.getCenter()})}),x.on("moveend",()=>{n("mapMoveEnd","useMapState",{endCenter:x.getCenter()})()}),x.on("tileloadstart",()=>{n("tileLoad","useMapState")}),x.on("tileload",()=>{n("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=hn.createAsyncPerformanceTracker(async x=>{if(!t.value||!u[x]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===x)return;console.log(`Changement de carte: ${i.value} -> ${x}`);const _=t.value,E=_.getCenter(),T=_.getZoom();_.options.zoomAnimation=!1,_.options.fadeAnimation=!1,_.options.markerZoomAnimation=!1;const D=u[x];if(s.value&&_.hasLayer(s.value))try{_.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(O){console.warn("Erreur lors de la suppression de la couche active:",O)}try{D instanceof Rt.LayerGroup,D.addTo(_),console.log(`Nouvelle couche ${x} ajoute`)}catch(O){console.error("Erreur lors de l'ajout de la nouvelle couche:",O);try{_.hasLayer(D)&&_.removeLayer(D),D.addTo(_),console.log(`Rcupration: couche ${x} rajoute`)}catch($){throw console.error("chec de la rcupration:",$),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=D,i.value=x;try{_.setView(E,T,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${E}, zoom=${T}`)}catch(O){console.warn("Erreur lors de la rinitialisation de la vue:",O)}try{_.invalidateSize({animate:!1,pan:!1})}catch(O){console.warn("Erreur lors du rafrachissement de la carte:",O)}setTimeout(()=>{_.options.zoomAnimation=!0,_.options.fadeAnimation=!0,_.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(_){if(console.error("Erreur lors du changement de carte de base:",_),t.value)try{const E=t.value;E.eachLayer(D=>{(D instanceof Rt.TileLayer||D instanceof Rt.LayerGroup)&&E.removeLayer(D)});const T=u[x];T.addTo(E),s.value=T,i.value=x,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(E){console.error("Erreur lors de la rcupration aprs chec:",E)}}},"changeBaseMap","useMapState"),g=hn.createAsyncPerformanceTracker(async()=>{if(!(!t.value||!r.value))try{const x=await hn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),_=await hn.measureAsync("searchLocation:parseResponse",async()=>await x.json(),"useMapState");_&&_.length>0&&hn.measure("searchLocation:updateView",()=>{const{lat:E,lon:T}=_[0];t.value.setView([E,T],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(x){console.error("Erreur lors de la recherche de localisation:",x)}},"searchLocation","useMapState");return{map:t,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:f,searchLocation:g,changeBaseMap:d,cleanup:()=>{const x=n("cleanup","useMapState");t.value&&(t.value.remove(),t.value=null),s.value&&(s.value=null),x()},isPerformanceEnabled:e}}const py=Ap("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:dd()}),getters:{getPlanById:e=>n=>e.plans.find(t=>t.id===n),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),n=ma();this.loading=!0;try{let i="/plans/";const s={};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Un.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),n=ma();this.loading=!0;try{let i="/plans/";const s={include_details:!0};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Un.get(i,{params:s}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(f=>({...f,entreprise:typeof f.entreprise=="object"?f.entreprise:null,salarie:typeof f.salarie=="object"?f.salarie:null,visiteur:typeof f.visiteur=="object"?f.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await gg.getVisiteurPlans(e)).data}catch(n){throw this.error="Erreur lors du chargement des plans du client",n}finally{this.loading=!1}},async createPlan(e){var r;const n=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const t=dc();try{const i=ma();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>gg.createPlan(s),"IrrigationStore");return this.plans.push(o.data),t.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,t.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,n()}},async createPlanForClient(e,n){this.clearCurrentPlan(),this.loading=!0;try{const t={...e,visiteur:n},r=await gg.createPlanForVisiteur(t);return this.plans.push(r.data),r.data}catch(t){const r=t instanceof Error?t.message:String(t);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const n=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),n();return}this.loading=!0;try{const t=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Un.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===e);r!==-1&&(this.plans[r]=t.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=t.data)},"IrrigationStore"),this.unsavedChanges=!1,t.data}catch(t){throw console.error("[IrrigationStore][savePlan] ERREUR:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1,n()}},async updatePlanDetails(e,n){const t=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=dc();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:u,...f}=n,d={...f};return s!==void 0&&(d.visiteur_id=s),o!==void 0&&(d.salarie_id=o),u!==void 0&&(d.entreprise_id=u),Un.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===e);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{t()}},async fetchPlanHistory(e){this.loading=!0;try{const n=await Un.get(`/plans/${e}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la rcupration de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(e,n){var t;this.loading=!0;try{const r=await Un.post(`/plans/${e}/restaurer/`,{version_id:n});((t=this.currentPlan)==null?void 0:t.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;const n=dc();try{const r=this.plans.find(i=>i.id===e);await gg.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan(),n.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",n.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),SR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},CR={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},ER={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},PR={key:0,class:"mb-4"},MR={key:0,class:"animate-pulse"},AR=["value"],kR={key:1,class:"mb-4"},TR={key:0,class:"animate-pulse"},NR=["disabled"],DR={value:null},BR=["value"],OR={key:2,class:"mb-4"},IR={key:0,class:"animate-pulse"},RR=["disabled"],FR={value:null},jR=["value"],zR={class:"mb-4"},$R={class:"mb-6"},UR={class:"flex justify-end space-x-3"},VR=["disabled"],HR={key:0},GR={key:1},px=cs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:n,emit:t}){function r(j){return j?typeof j=="object"?j.id:j:null}function i(j){if(j===null)throw new Error("Invalid ID");return j}const s=e,o=t,u=ma(),f=py(),d=Op(),g=Ft(!1),y=Ft(null),x=Ft([]),_=Ft([]),E=Ft([]),T=Ft(null),D=Ft(null),O=Ft(!1),$=Ft(!1),K=Ft(!1),X=Ft({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),ae=gr(()=>{var j,H,U;return((j=u.user)==null?void 0:j.user_type)==="admin"?X.value.nom.trim()&&X.value.entreprise&&X.value.salarie&&X.value.visiteur:((H=u.user)==null?void 0:H.user_type)==="entreprise"?X.value.nom.trim()&&X.value.salarie&&X.value.visiteur:((U=u.user)==null?void 0:U.user_type)==="salarie"?X.value.nom.trim()&&X.value.visiteur:X.value.nom.trim()});Co(()=>X.value.entreprise,async j=>{if(!s.modelValue)return;X.value.salarie=null,X.value.visiteur=null,_.value=[];const H=r(j);console.log("[NewPlanModal] Entreprise slectionne:",H),H?await ue(H):x.value=[]}),Co(()=>X.value.salarie,async j=>{if(!s.modelValue)return;X.value.visiteur=null;const H=r(j);H?await Le(H):_.value=[]}),Co(()=>s.modelValue,j=>{var H,U,R;j?((H=u.user)==null?void 0:H.user_type)==="admin"?F():((U=u.user)==null?void 0:U.user_type)==="entreprise"?ue(u.user.id):((R=u.user)==null?void 0:R.user_type)==="salarie"&&Le(u.user.id):(X.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},T.value=null,D.value=null,_.value=[],x.value=[],E.value=[],y.value=null)});async function ue(j){O.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",j);const H=await Ll.getUsers({role:"SALARIE",entreprise:j});console.log("[NewPlanModal] Rponse salaries:",H.data),x.value=H.data}catch(H){console.error("[NewPlanModal] Error loading salaries:",H),x.value=[]}finally{O.value=!1}}async function Le(j){$.value=!0;try{const H=await Ll.getUsers({role:"VISITEUR",salarie:j});_.value=H.data}catch(H){console.error("[NewPlanModal] Error loading visiteurs:",H),_.value=[]}finally{$.value=!1}}async function W(j){s.modelValue&&(T.value=j,X.value.salarie=j.id,await Le(j.id),o("salarieSelected",j))}function V(j){s.modelValue&&(D.value=j,X.value.visiteur=j.id,o("visiteurSelected",j))}function Y(){o("update:modelValue",!1),X.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},T.value=null,D.value=null,_.value=[],y.value=null}async function F(){K.value=!0;try{const j=await u.fetchEnterprises();E.value=j}catch(j){console.error("[NewPlanModal] Error loading entreprises:",j),E.value=[]}finally{K.value=!1}}async function I(){var j,H;y.value=null,g.value=!0;try{const U={nom:X.value.nom.trim(),description:X.value.description.trim()},R=u.user;if(!R)throw new Error("User not found");if(R.user_type==="admin"){if(!X.value.entreprise||!X.value.salarie||!X.value.visiteur)throw new Error("Missing required fields");U.entreprise=i(r(X.value.entreprise)),U.salarie=i(r(X.value.salarie)),U.visiteur=X.value.visiteur}else if(R.user_type==="entreprise"){if(!X.value.salarie||!X.value.visiteur)throw new Error("Missing required fields");U.entreprise=R.id,U.salarie=i(r(X.value.salarie)),U.visiteur=X.value.visiteur}else if(R.user_type==="salarie"){if(!R.entreprise||!X.value.visiteur)throw new Error("Missing required fields");U.entreprise=R.entreprise.id,U.salarie=R.id,U.visiteur=X.value.visiteur}else if(R.user_type==="visiteur"){if(!R.entreprise||!R.salarie)throw new Error("Missing required fields");U.entreprise=R.entreprise.id,U.salarie=R.salarie.id,U.visiteur=R.id}console.log("Donnes du plan  crer:",U),f.clearCurrentPlan(),d.setCurrentPlan(null);const te=await f.createPlan(U);o("created",te.id),Y()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",(j=U.response)==null?void 0:j.data);let R="Une erreur est survenue lors de la cration du plan";(H=U.response)!=null&&H.data&&(typeof U.response.data=="object"?R=Object.entries(U.response.data).map(([te,re])=>Array.isArray(re)?`${te}: ${re.join(", ")}`:`${te}: ${re}`).join(`
`):typeof U.response.data=="string"&&(R=U.response.data)),y.value=R}finally{g.value=!1}}return n({salaries:x,visiteurs:_,selectedSalarie:T,selectedVisiteur:D,loadSalaries:ue,loadVisiteurs:Le,selectSalarie:W,selectVisiteur:V}),(j,H)=>{var U,R,te,re;return j.modelValue?($e(),qe("div",SR,[P("div",CR,[P("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[H[6]||(H[6]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),P("button",{onClick:Y,class:"text-gray-400 hover:text-gray-500"},H[5]||(H[5]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",ER,[Wn(u).isAdmin?($e(),qe("div",PR,[H[9]||(H[9]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),K.value?($e(),qe("div",MR,H[7]||(H[7]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In(($e(),qe("select",{key:1,"onUpdate:modelValue":H[0]||(H[0]=me=>X.value.entreprise=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[H[8]||(H[8]=P("option",{value:null},"Slectionnez une entreprise",-1)),($e(!0),qe(Rn,null,Rr(E.value,me=>($e(),qe("option",{key:me.id,value:me.id},Zt(Wn(Vl)(me)),9,AR))),128))],512)),[[lo,X.value.entreprise]])])):dn("",!0),((U=Wn(u).user)==null?void 0:U.user_type)==="admin"||((R=Wn(u).user)==null?void 0:R.user_type)==="entreprise"?($e(),qe("div",kR,[H[11]||(H[11]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),O.value?($e(),qe("div",TR,H[10]||(H[10]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In(($e(),qe("select",{key:1,id:"edit-salarie","onUpdate:modelValue":H[1]||(H[1]=me=>X.value.salarie=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Wn(u).isAdmin&&!X.value.entreprise},[P("option",DR,Zt(x.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),($e(!0),qe(Rn,null,Rr(x.value,me=>($e(),qe("option",{key:me.id,value:me.id},Zt(Wn(Vl)(me)),9,BR))),128))],8,NR)),[[lo,X.value.salarie]])])):dn("",!0),((te=Wn(u).user)==null?void 0:te.user_type)!=="visiteur"?($e(),qe("div",OR,[H[13]||(H[13]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),$.value?($e(),qe("div",IR,H[12]||(H[12]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In(($e(),qe("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":H[2]||(H[2]=me=>X.value.visiteur=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!_.value.length||((re=Wn(u).user)==null?void 0:re.user_type)!=="salarie"&&!X.value.salarie},[P("option",FR,Zt(_.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),($e(!0),qe(Rn,null,Rr(_.value,me=>($e(),qe("option",{key:me.id,value:me.id},Zt(Wn(Vl)(me)),9,jR))),128))],8,RR)),[[lo,X.value.visiteur]])])):dn("",!0),P("div",zR,[H[14]||(H[14]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),In(P("input",{id:"edit-nom","onUpdate:modelValue":H[3]||(H[3]=me=>X.value.nom=me),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ni,X.value.nom]])]),P("div",$R,[H[15]||(H[15]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),In(P("textarea",{id:"edit-description","onUpdate:modelValue":H[4]||(H[4]=me=>X.value.description=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ni,X.value.description]])]),P("div",UR,[P("button",{onClick:Y,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),P("button",{onClick:I,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!ae.value||g.value},[g.value?($e(),qe("span",HR,"Cration en cours...")):($e(),qe("span",GR,"Crer"))],8,VR)])])])])):dn("",!0)}}});function Ji(e){"@babel/helpers - typeof";return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ji(e)}var Fa=Uint8Array,Gl=Uint16Array,gy=Int32Array,im=new Fa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),om=new Fa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m1=new Fa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gx=function(e,n){for(var t=new Gl(31),r=0;r<31;++r)t[r]=n+=1<<e[r-1];for(var i=new gy(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},mx=gx(im,2),vx=mx.b,v1=mx.r;vx[28]=258,v1[258]=28;var yx=gx(om,0),qR=yx.b,wb=yx.r,y1=new Gl(32768);for(var Eo=0;Eo<32768;++Eo){var nf=(Eo&43690)>>1|(Eo&21845)<<1;nf=(nf&52428)>>2|(nf&13107)<<2,nf=(nf&61680)>>4|(nf&3855)<<4,y1[Eo]=((nf&65280)>>8|(nf&255)<<8)>>1}var pc=function(e,n,t){for(var r=e.length,i=0,s=new Gl(n);i<r;++i)e[i]&&++s[e[i]-1];var o=new Gl(n);for(i=1;i<n;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(t){u=new Gl(1<<n);var f=15-n;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],g=n-e[i],y=o[e[i]-1]++<<g,x=y|(1<<g)-1;y<=x;++y)u[y1[y]>>f]=d}else for(u=new Gl(r),i=0;i<r;++i)e[i]&&(u[i]=y1[o[e[i]-1]++]>>15-e[i]);return u},Cf=new Fa(288);for(var Eo=0;Eo<144;++Eo)Cf[Eo]=8;for(var Eo=144;Eo<256;++Eo)Cf[Eo]=9;for(var Eo=256;Eo<280;++Eo)Cf[Eo]=7;for(var Eo=280;Eo<288;++Eo)Cf[Eo]=8;var Lp=new Fa(32);for(var Eo=0;Eo<32;++Eo)Lp[Eo]=5;var WR=pc(Cf,9,0),ZR=pc(Cf,9,1),KR=pc(Lp,5,0),YR=pc(Lp,5,1),sv=function(e){for(var n=e[0],t=1;t<e.length;++t)e[t]>n&&(n=e[t]);return n},Tu=function(e,n,t){var r=n/8|0;return(e[r]|e[r+1]<<8)>>(n&7)&t},av=function(e,n){var t=n/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(n&7)},my=function(e){return(e+7)/8|0},_x=function(e,n,t){return(t==null||t>e.length)&&(t=e.length),new Fa(e.subarray(n,t))},JR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Iu=function(e,n,t){var r=new Error(n||JR[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Iu),!t)throw r;return r},XR=function(e,n,t,r){var i=e.length,s=0;if(!i||n.f&&!n.l)return t||new Fa(0);var o=!t,u=o||n.i!=2,f=n.i;o&&(t=new Fa(i*3));var d=function(Pe){var Ve=t.length;if(Pe>Ve){var Z=new Fa(Math.max(Ve*2,Pe));Z.set(t),t=Z}},g=n.f||0,y=n.p||0,x=n.b||0,_=n.l,E=n.d,T=n.m,D=n.n,O=i*8;do{if(!_){g=Tu(e,y,1);var $=Tu(e,y+1,3);if(y+=3,$)if($==1)_=ZR,E=YR,T=9,D=5;else if($==2){var ue=Tu(e,y,31)+257,Le=Tu(e,y+10,15)+4,W=ue+Tu(e,y+5,31)+1;y+=14;for(var V=new Fa(W),Y=new Fa(19),F=0;F<Le;++F)Y[m1[F]]=Tu(e,y+F*3,7);y+=Le*3;for(var I=sv(Y),j=(1<<I)-1,H=pc(Y,I,1),F=0;F<W;){var U=H[Tu(e,y,j)];y+=U&15;var K=U>>4;if(K<16)V[F++]=K;else{var R=0,te=0;for(K==16?(te=3+Tu(e,y,3),y+=2,R=V[F-1]):K==17?(te=3+Tu(e,y,7),y+=3):K==18&&(te=11+Tu(e,y,127),y+=7);te--;)V[F++]=R}}var re=V.subarray(0,ue),me=V.subarray(ue);T=sv(re),D=sv(me),_=pc(re,T,1),E=pc(me,D,1)}else Iu(1);else{var K=my(y)+4,X=e[K-4]|e[K-3]<<8,ae=K+X;if(ae>i){f&&Iu(0);break}u&&d(x+X),t.set(e.subarray(K,ae),x),n.b=x+=X,n.p=y=ae*8,n.f=g;continue}if(y>O){f&&Iu(0);break}}u&&d(x+131072);for(var xe=(1<<T)-1,We=(1<<D)-1,N=y;;N=y){var R=_[av(e,y)&xe],ee=R>>4;if(y+=R&15,y>O){f&&Iu(0);break}if(R||Iu(2),ee<256)t[x++]=ee;else if(ee==256){N=y,_=null;break}else{var fe=ee-254;if(ee>264){var F=ee-257,ce=im[F];fe=Tu(e,y,(1<<ce)-1)+vx[F],y+=ce}var ye=E[av(e,y)&We],se=ye>>4;ye||Iu(3),y+=ye&15;var me=qR[se];if(se>3){var ce=om[se];me+=av(e,y)&(1<<ce)-1,y+=ce}if(y>O){f&&Iu(0);break}u&&d(x+131072);var k=x+fe;if(x<me){var le=s-me,ke=Math.min(me,k);for(le+x<0&&Iu(3);x<ke;++x)t[x]=r[le+x]}for(;x<k;++x)t[x]=t[x-me]}}n.l=_,n.p=N,n.b=x,n.f=g,_&&(g=1,n.m=T,n.d=E,n.n=D)}while(!g);return x!=t.length&&o?_x(t,0,x):t.subarray(0,x)},Oc=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8},kd=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8,e[r+2]|=t>>16},lv=function(e,n){for(var t=[],r=0;r<e.length;++r)e[r]&&t.push({s:r,f:e[r]});var i=t.length,s=t.slice();if(!i)return{t:wx,l:0};if(i==1){var o=new Fa(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(ae,ue){return ae.f-ue.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],d=0,g=1,y=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};g!=i-1;)u=t[t[d].f<t[y].f?d++:y++],f=t[d!=g&&t[d].f<t[y].f?d++:y++],t[g++]={s:-1,f:u.f+f.f,l:u,r:f};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var _=new Gl(x+1),E=_1(t[g-1],_,0);if(E>n){var r=0,T=0,D=E-n,O=1<<D;for(s.sort(function(ue,Le){return _[Le.s]-_[ue.s]||ue.f-Le.f});r<i;++r){var $=s[r].s;if(_[$]>n)T+=O-(1<<E-_[$]),_[$]=n;else break}for(T>>=D;T>0;){var K=s[r].s;_[K]<n?T-=1<<n-_[K]++-1:++r}for(;r>=0&&T;--r){var X=s[r].s;_[X]==n&&(--_[X],++T)}E=n}return{t:new Fa(_),l:E}},_1=function(e,n,t){return e.s==-1?Math.max(_1(e.l,n,t+1),_1(e.r,n,t+1)):n[e.s]=t},xb=function(e){for(var n=e.length;n&&!e[--n];);for(var t=new Gl(++n),r=0,i=e[0],s=1,o=function(f){t[r++]=f},u=1;u<=n;++u)if(e[u]==i&&u!=n)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:t.subarray(0,r),n}},Td=function(e,n){for(var t=0,r=0;r<n.length;++r)t+=e[r]*n[r];return t},bx=function(e,n,t){var r=t.length,i=my(n+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=t[s];return(i+4+r)*8},Lb=function(e,n,t,r,i,s,o,u,f,d,g){Oc(n,g++,t),++i[256];for(var y=lv(i,15),x=y.t,_=y.l,E=lv(s,15),T=E.t,D=E.l,O=xb(x),$=O.c,K=O.n,X=xb(T),ae=X.c,ue=X.n,Le=new Gl(19),W=0;W<$.length;++W)++Le[$[W]&31];for(var W=0;W<ae.length;++W)++Le[ae[W]&31];for(var V=lv(Le,7),Y=V.t,F=V.l,I=19;I>4&&!Y[m1[I-1]];--I);var j=d+5<<3,H=Td(i,Cf)+Td(s,Lp)+o,U=Td(i,x)+Td(s,T)+o+14+3*I+Td(Le,Y)+2*Le[16]+3*Le[17]+7*Le[18];if(f>=0&&j<=H&&j<=U)return bx(n,g,e.subarray(f,f+d));var R,te,re,me;if(Oc(n,g,1+(U<H)),g+=2,U<H){R=pc(x,_,0),te=x,re=pc(T,D,0),me=T;var xe=pc(Y,F,0);Oc(n,g,K-257),Oc(n,g+5,ue-1),Oc(n,g+10,I-4),g+=14;for(var W=0;W<I;++W)Oc(n,g+3*W,Y[m1[W]]);g+=3*I;for(var We=[$,ae],N=0;N<2;++N)for(var ee=We[N],W=0;W<ee.length;++W){var fe=ee[W]&31;Oc(n,g,xe[fe]),g+=Y[fe],fe>15&&(Oc(n,g,ee[W]>>5&127),g+=ee[W]>>12)}}else R=WR,te=Cf,re=KR,me=Lp;for(var W=0;W<u;++W){var ce=r[W];if(ce>255){var fe=ce>>18&31;kd(n,g,R[fe+257]),g+=te[fe+257],fe>7&&(Oc(n,g,ce>>23&31),g+=im[fe]);var ye=ce&31;kd(n,g,re[ye]),g+=me[ye],ye>3&&(kd(n,g,ce>>5&8191),g+=om[ye])}else kd(n,g,R[ce]),g+=te[ce]}return kd(n,g,R[256]),g+te[256]},QR=new gy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wx=new Fa(0),eF=function(e,n,t,r,i,s){var o=s.z||e.length,u=new Fa(r+o+5*(1+Math.ceil(o/7e3))+i),f=u.subarray(r,u.length-i),d=s.l,g=(s.r||0)&7;if(n){g&&(f[0]=s.r>>3);for(var y=QR[n-1],x=y>>13,_=y&8191,E=(1<<t)-1,T=s.p||new Gl(32768),D=s.h||new Gl(E+1),O=Math.ceil(t/3),$=2*O,K=function(de){return(e[de]^e[de+1]<<O^e[de+2]<<$)&E},X=new gy(25e3),ae=new Gl(288),ue=new Gl(32),Le=0,W=0,V=s.i||0,Y=0,F=s.w||0,I=0;V+2<o;++V){var j=K(V),H=V&32767,U=D[j];if(T[H]=U,D[j]=H,F<=V){var R=o-V;if((Le>7e3||Y>24576)&&(R>423||!d)){g=Lb(e,f,0,X,ae,ue,W,Y,I,V-I,g),Y=Le=W=0,I=V;for(var te=0;te<286;++te)ae[te]=0;for(var te=0;te<30;++te)ue[te]=0}var re=2,me=0,xe=_,We=H-U&32767;if(R>2&&j==K(V-We))for(var N=Math.min(x,R)-1,ee=Math.min(32767,V),fe=Math.min(258,R);We<=ee&&--xe&&H!=U;){if(e[V+re]==e[V+re-We]){for(var ce=0;ce<fe&&e[V+ce]==e[V+ce-We];++ce);if(ce>re){if(re=ce,me=We,ce>N)break;for(var ye=Math.min(We,ce-2),se=0,te=0;te<ye;++te){var k=V-We+te&32767,le=T[k],ke=k-le&32767;ke>se&&(se=ke,U=k)}}}H=U,U=T[H],We+=H-U&32767}if(me){X[Y++]=268435456|v1[re]<<18|wb[me];var Pe=v1[re]&31,Ve=wb[me]&31;W+=im[Pe]+om[Ve],++ae[257+Pe],++ue[Ve],F=V+re,++Le}else X[Y++]=e[V],++ae[e[V]]}}for(V=Math.max(V,F);V<o;++V)X[Y++]=e[V],++ae[e[V]];g=Lb(e,f,d,X,ae,ue,W,Y,I,V-I,g),d||(s.r=g&7|f[g/8|0]<<3,g-=7,s.h=D,s.p=T,s.i=V,s.w=F)}else{for(var V=s.w||0;V<o+d;V+=65535){var Z=V+65535;Z>=o&&(f[g/8|0]=d,Z=o),g=bx(f,g+1,e.subarray(V,Z))}s.i=o}return _x(u,0,r+my(g)+i)},xx=function(){var e=1,n=0;return{p:function(t){for(var r=e,i=n,s=t.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,n=i},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},tF=function(e,n,t,r,i){if(!i&&(i={l:1},n.dictionary)){var s=n.dictionary.subarray(-32768),o=new Fa(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return eF(e,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,t,r,i)},Lx=function(e,n,t){for(;t;++n)e[n]=t,t>>>=8},nF=function(e,n){var t=n.level,r=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=r<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var i=xx();i.p(n.dictionary),Lx(e,2,i.d())}},rF=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Iu(6,"invalid zlib data"),(e[1]>>5&1)==1&&Iu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function b1(e,n){n||(n={});var t=xx();t.p(e);var r=tF(e,n,n.dictionary?6:2,4);return nF(r,n),Lx(r,r.length-4,t.d()),r}function iF(e,n){return XR(e.subarray(rF(e),-4),{i:2},n,n)}var oF=typeof TextDecoder<"u"&&new TextDecoder,sF=0;try{oF.decode(wx,{stream:!0}),sF=1}catch{}var Dr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uv(){Dr.console&&typeof Dr.console.log=="function"&&Dr.console.log.apply(Dr.console,arguments)}var ao={log:uv,warn:function(e){Dr.console&&(typeof Dr.console.warn=="function"?Dr.console.warn.apply(Dr.console,arguments):uv.call(null,arguments))},error:function(e){Dr.console&&(typeof Dr.console.error=="function"?Dr.console.error.apply(Dr.console,arguments):uv(e))}};function cv(e,n,t){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Gf(r.response,n,t)},r.onerror=function(){ao.error("could not download file")},r.send()}function Sb(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function yg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var rp,w1,Gf=Dr.saveAs||((typeof window>"u"?"undefined":Ji(window))!=="object"||window!==Dr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,t){var r=Dr.URL||Dr.webkitURL,i=document.createElement("a");n=n||e.name||"download",i.download=n,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Sb(i.href)?cv(e,n,t):yg(i,i.target="_blank"):yg(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){yg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,t){if(n=n||e.name||"download",typeof e=="string")if(Sb(e))cv(e,n,t);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){yg(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ji(s)!=="object"&&(ao.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,t),n)}:function(e,n,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return cv(e,n,t);var i=e.type==="application/octet-stream",s=/constructor/i.test(Dr.HTMLElement)||Dr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ji(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=o?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(e)}else{var f=Dr.URL||Dr.webkitURL,d=f.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Sx(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(e);o&&(n=s(o),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function fv(e,n){var t=e[0],r=e[1],i=e[2],s=e[3];t=ka(t,r,i,s,n[0],7,-680876936),s=ka(s,t,r,i,n[1],12,-389564586),i=ka(i,s,t,r,n[2],17,606105819),r=ka(r,i,s,t,n[3],22,-1044525330),t=ka(t,r,i,s,n[4],7,-176418897),s=ka(s,t,r,i,n[5],12,1200080426),i=ka(i,s,t,r,n[6],17,-1473231341),r=ka(r,i,s,t,n[7],22,-45705983),t=ka(t,r,i,s,n[8],7,1770035416),s=ka(s,t,r,i,n[9],12,-1958414417),i=ka(i,s,t,r,n[10],17,-42063),r=ka(r,i,s,t,n[11],22,-1990404162),t=ka(t,r,i,s,n[12],7,1804603682),s=ka(s,t,r,i,n[13],12,-40341101),i=ka(i,s,t,r,n[14],17,-1502002290),t=Ta(t,r=ka(r,i,s,t,n[15],22,1236535329),i,s,n[1],5,-165796510),s=Ta(s,t,r,i,n[6],9,-1069501632),i=Ta(i,s,t,r,n[11],14,643717713),r=Ta(r,i,s,t,n[0],20,-373897302),t=Ta(t,r,i,s,n[5],5,-701558691),s=Ta(s,t,r,i,n[10],9,38016083),i=Ta(i,s,t,r,n[15],14,-660478335),r=Ta(r,i,s,t,n[4],20,-405537848),t=Ta(t,r,i,s,n[9],5,568446438),s=Ta(s,t,r,i,n[14],9,-1019803690),i=Ta(i,s,t,r,n[3],14,-187363961),r=Ta(r,i,s,t,n[8],20,1163531501),t=Ta(t,r,i,s,n[13],5,-1444681467),s=Ta(s,t,r,i,n[2],9,-51403784),i=Ta(i,s,t,r,n[7],14,1735328473),t=Na(t,r=Ta(r,i,s,t,n[12],20,-1926607734),i,s,n[5],4,-378558),s=Na(s,t,r,i,n[8],11,-2022574463),i=Na(i,s,t,r,n[11],16,1839030562),r=Na(r,i,s,t,n[14],23,-35309556),t=Na(t,r,i,s,n[1],4,-1530992060),s=Na(s,t,r,i,n[4],11,1272893353),i=Na(i,s,t,r,n[7],16,-155497632),r=Na(r,i,s,t,n[10],23,-1094730640),t=Na(t,r,i,s,n[13],4,681279174),s=Na(s,t,r,i,n[0],11,-358537222),i=Na(i,s,t,r,n[3],16,-722521979),r=Na(r,i,s,t,n[6],23,76029189),t=Na(t,r,i,s,n[9],4,-640364487),s=Na(s,t,r,i,n[12],11,-421815835),i=Na(i,s,t,r,n[15],16,530742520),t=Da(t,r=Na(r,i,s,t,n[2],23,-995338651),i,s,n[0],6,-198630844),s=Da(s,t,r,i,n[7],10,1126891415),i=Da(i,s,t,r,n[14],15,-1416354905),r=Da(r,i,s,t,n[5],21,-57434055),t=Da(t,r,i,s,n[12],6,1700485571),s=Da(s,t,r,i,n[3],10,-1894986606),i=Da(i,s,t,r,n[10],15,-1051523),r=Da(r,i,s,t,n[1],21,-2054922799),t=Da(t,r,i,s,n[8],6,1873313359),s=Da(s,t,r,i,n[15],10,-30611744),i=Da(i,s,t,r,n[6],15,-1560198380),r=Da(r,i,s,t,n[13],21,1309151649),t=Da(t,r,i,s,n[4],6,-145523070),s=Da(s,t,r,i,n[11],10,-1120210379),i=Da(i,s,t,r,n[2],15,718787259),r=Da(r,i,s,t,n[9],21,-343485551),e[0]=gf(t,e[0]),e[1]=gf(r,e[1]),e[2]=gf(i,e[2]),e[3]=gf(s,e[3])}function sm(e,n,t,r,i,s){return n=gf(gf(n,e),gf(r,s)),gf(n<<i|n>>>32-i,t)}function ka(e,n,t,r,i,s,o){return sm(n&t|~n&r,e,n,i,s,o)}function Ta(e,n,t,r,i,s,o){return sm(n&r|t&~r,e,n,i,s,o)}function Na(e,n,t,r,i,s,o){return sm(n^t^r,e,n,i,s,o)}function Da(e,n,t,r,i,s,o){return sm(t^(n|~r),e,n,i,s,o)}function Cx(e){var n,t=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)fv(r,aF(e.substring(n-64,n)));e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(fv(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*t,fv(r,i),r}function aF(e){var n,t=[];for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}rp=Dr.atob.bind(Dr),w1=Dr.btoa.bind(Dr);var Cb="0123456789abcdef".split("");function lF(e){for(var n="",t=0;t<4;t++)n+=Cb[e>>8*t+4&15]+Cb[e>>8*t&15];return n}function uF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function x1(e){return Cx(e).map(uF).join("")}var cF=function(e){for(var n=0;n<e.length;n++)e[n]=lF(e[n]);return e.join("")}(Cx("hello"))!="5d41402abc4b2a76b9719d911017c592";function gf(e,n){if(cF){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}return e+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L1(e,n){var t,r,i,s;if(e!==t){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var g=u[f];d=(d+g+o.charCodeAt(f))%256,u[f]=u[d],u[d]=g}t=e,r=u}else u=r;var y=n.length,x=0,_=0,E="";for(f=0;f<y;f++)_=(_+(g=u[x=(x+1)%256]))%256,u[x]=u[_],u[_]=g,o=u[(u[x]+u[_])%256],E+=String.fromCharCode(n.charCodeAt(f)^o);return E}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Eb={print:4,modify:8,copy:16,"annot-forms":32};function Fh(e,n,t,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Eb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Eb[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(n+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=x1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=L1(this.encryptionKey,this.padding)}function jh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",t=e.length,r=0;r<t;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?n+="#"+("0"+i.toString(16)).slice(-2):n+=e[r]}return n}function Pb(e){if(Ji(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(t)||(n[t]={});var s=Math.random().toString(35);return n[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in n)if(n[r][t])return delete n[r][t],Object.keys(n[r]).length===0&&delete n[r],!0;return!1},this.publish=function(t){if(n.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in n[t]){var o=n[t][s];try{o[0].apply(e,r)}catch(u){Dr.console&&ao.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function b0(e){if(!(this instanceof b0))return new b0(e);var n="opacity,stroke-opacity".split(",");for(var t in e)e.hasOwnProperty(t)&&n.indexOf(t)>=0&&(this[t]=e[t]);this.id="",this.objectNumber=-1}function Ex(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Wf(e,n,t,r,i){if(!(this instanceof Wf))return new Wf(e,n,t,r,i);this.type=e==="axial"?2:3,this.coords=n,this.colors=t,Ex.call(this,r,i)}function Uh(e,n,t,r,i){if(!(this instanceof Uh))return new Uh(e,n,t,r,i);this.boundingBox=e,this.xStep=n,this.yStep=t,this.stream="",this.cloneIndex=0,Ex.call(this,r,i)}function Ar(e){var n,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,f=16,d="S",g=null;Ji(e=e||{})==="object"&&(t=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,x={},_={internal:{},__private__:{}};_.__private__.PubSub=Pb;var E="1.3",T=_.__private__.getPdfVersion=function(){return E};_.__private__.setPdfVersion=function(B){E=B};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return D};var O=_.__private__.getPageFormat=function(B){return D[B]};i=i||"a4";var $={COMPAT:"compat",ADVANCED:"advanced"},K=$.COMPAT;function X(){this.saveGraphicsState(),pe(new mn(nt,0,0,-nt,0,ba()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),d="n",K=$.ADVANCED}function ae(){this.restoreGraphicsState(),d="S",K=$.COMPAT}var ue=_.__private__.combineFontStyleAndFontWeight=function(B,_e){if(B=="bold"&&_e=="normal"||B=="bold"&&_e==400||B=="normal"&&_e=="italic"||B=="bold"&&_e=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return _e&&(B=_e==400||_e==="normal"?B==="italic"?"italic":"normal":_e!=700&&_e!=="bold"||B!=="normal"?(_e==700?"bold":_e)+""+B:"bold"),B};_.advancedAPI=function(B){var _e=K===$.COMPAT;return _e&&X.call(this),typeof B!="function"||(B(this),_e&&ae.call(this)),this},_.compatAPI=function(B){var _e=K===$.ADVANCED;return _e&&ae.call(this),typeof B!="function"||(B(this),_e&&X.call(this)),this},_.isAdvancedAPI=function(){return K===$.ADVANCED};var Le,W=function(B){if(K!==$.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=_.roundToPrecision=_.__private__.roundToPrecision=function(B,_e){var Ze=n||_e;if(isNaN(B)||isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ze).replace(/0+$/,"")};Le=_.hpf=_.__private__.hpf=typeof f=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return V(B,f)}:f==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return V(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return V(B,16)};var Y=_.f2=_.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return V(B,2)},F=_.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return V(B,3)},I=_.scale=_.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return K===$.COMPAT?B*nt:K===$.ADVANCED?B:void 0},j=function(B){return K===$.COMPAT?ba()-B:K===$.ADVANCED?B:void 0},H=function(B){return I(j(B))};_.__private__.setPrecision=_.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(n=parseInt(B,10))};var U,R="00000000000000000000000000000000",te=_.__private__.getFileId=function(){return R},re=_.__private__.setFileId=function(B){return R=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():R.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(eo=new Fh(g.userPermissions,g.userPassword,g.ownerPassword,R)),R};_.setFileId=function(B){return re(B),this},_.getFileId=function(){return te()};var me=_.__private__.convertDateToPDFDate=function(B){var _e=B.getTimezoneOffset(),Ze=_e<0?"+":"-",ct=Math.floor(Math.abs(_e/60)),xt=Math.abs(_e%60),jt=[Ze,fe(ct),"'",fe(xt),"'"].join("");return["D:",B.getFullYear(),fe(B.getMonth()+1),fe(B.getDate()),fe(B.getHours()),fe(B.getMinutes()),fe(B.getSeconds()),jt].join("")},xe=_.__private__.convertPDFDateToDate=function(B){var _e=parseInt(B.substr(2,4),10),Ze=parseInt(B.substr(6,2),10)-1,ct=parseInt(B.substr(8,2),10),xt=parseInt(B.substr(10,2),10),jt=parseInt(B.substr(12,2),10),un=parseInt(B.substr(14,2),10);return new Date(_e,Ze,ct,xt,jt,un,0)},We=_.__private__.setCreationDate=function(B){var _e;if(B===void 0&&(B=new Date),B instanceof Date)_e=me(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");_e=B}return U=_e},N=_.__private__.getCreationDate=function(B){var _e=U;return B==="jsDate"&&(_e=xe(U)),_e};_.setCreationDate=function(B){return We(B),this},_.getCreationDate=function(B){return N(B)};var ee,fe=_.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},ce=_.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},ye=0,se=[],k=[],le=0,ke=[],Pe=[],Ve=!1,Z=k,de=function(){ye=0,le=0,k=[],se=[],ke=[],Di=at(),Fr=at()};_.__private__.setCustomOutputDestination=function(B){Ve=!0,Z=B};var ve=function(B){Ve||(Z=B)};_.__private__.resetCustomOutputDestination=function(){Ve=!1,Z=k};var pe=_.__private__.out=function(B){return B=B.toString(),le+=B.length+1,Z.push(B),Z},ze=_.__private__.write=function(B){return pe(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},Qe=_.__private__.getArrayBuffer=function(B){for(var _e=B.length,Ze=new ArrayBuffer(_e),ct=new Uint8Array(Ze);_e--;)ct[_e]=B.charCodeAt(_e);return Ze},Ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return Ke};var He=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(B){return He=K===$.ADVANCED?B/nt:B,this};var Xe,ot=_.__private__.getFontSize=_.getFontSize=function(){return K===$.COMPAT?He:He*nt},kt=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(B){return kt=B,this},_.__private__.getR2L=_.getR2L=function(){return kt};var Ct,Ut=_.__private__.setZoomMode=function(B){var _e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Xe=B;else if(isNaN(B)){if(_e.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Xe=B}else Xe=parseInt(B,10)};_.__private__.getZoomMode=function(){return Xe};var Gt,cn=_.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Ct=B};_.__private__.getPageMode=function(){return Ct};var pn=_.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Gt=B};_.__private__.getLayoutMode=function(){return Gt},_.__private__.setDisplayMode=_.setDisplayMode=function(B,_e,Ze){return Ut(B),pn(_e),cn(Ze),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(B){if(Object.keys(et).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[B]},_.__private__.getDocumentProperties=function(){return et},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(B){for(var _e in et)et.hasOwnProperty(_e)&&B[_e]&&(et[_e]=B[_e]);return this},_.__private__.setDocumentProperty=function(B,_e){if(Object.keys(et).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[B]=_e};var it,nt,Vt,Qt,On,wn={},Tn={},ar=[],xn={},Mn={},En={},cr={},yr=null,mt=0,Ge=[],Ot=new Pb(_),Pn=e.hotfixes||[],tr={},Zn={},Wt=[],mn=function B(_e,Ze,ct,xt,jt,un){if(!(this instanceof B))return new B(_e,Ze,ct,xt,jt,un);isNaN(_e)&&(_e=1),isNaN(Ze)&&(Ze=0),isNaN(ct)&&(ct=0),isNaN(xt)&&(xt=1),isNaN(jt)&&(jt=0),isNaN(un)&&(un=0),this._matrix=[_e,Ze,ct,xt,jt,un]};Object.defineProperty(mn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(mn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(mn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(mn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(mn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(mn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(mn.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(mn.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(mn.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(mn.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(mn.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(mn.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(mn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(mn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(mn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(mn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),mn.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Le).join(B)},mn.prototype.multiply=function(B){var _e=B.sx*this.sx+B.shy*this.shx,Ze=B.sx*this.shy+B.shy*this.sy,ct=B.shx*this.sx+B.sy*this.shx,xt=B.shx*this.shy+B.sy*this.sy,jt=B.tx*this.sx+B.ty*this.shx+this.tx,un=B.tx*this.shy+B.ty*this.sy+this.ty;return new mn(_e,Ze,ct,xt,jt,un)},mn.prototype.decompose=function(){var B=this.sx,_e=this.shy,Ze=this.shx,ct=this.sy,xt=this.tx,jt=this.ty,un=Math.sqrt(B*B+_e*_e),Nn=(B/=un)*Ze+(_e/=un)*ct;Ze-=B*Nn,ct-=_e*Nn;var jn=Math.sqrt(Ze*Ze+ct*ct);return Nn/=jn,B*(ct/=jn)<_e*(Ze/=jn)&&(B=-B,_e=-_e,Nn=-Nn,un=-un),{scale:new mn(un,0,0,jn,0,0),translate:new mn(1,0,0,1,xt,jt),rotate:new mn(B,_e,-_e,B,0,0),skew:new mn(1,0,Nn,1,0,0)}},mn.prototype.toString=function(B){return this.join(" ")},mn.prototype.inversed=function(){var B=this.sx,_e=this.shy,Ze=this.shx,ct=this.sy,xt=this.tx,jt=this.ty,un=1/(B*ct-_e*Ze),Nn=ct*un,jn=-_e*un,nr=-Ze*un,vr=B*un;return new mn(Nn,jn,nr,vr,-Nn*xt-nr*jt,-jn*xt-vr*jt)},mn.prototype.applyToPoint=function(B){var _e=B.x*this.sx+B.y*this.shx+this.tx,Ze=B.x*this.shy+B.y*this.sy+this.ty;return new Mo(_e,Ze)},mn.prototype.applyToRectangle=function(B){var _e=this.applyToPoint(B),Ze=this.applyToPoint(new Mo(B.x+B.w,B.y+B.h));return new Gs(_e.x,_e.y,Ze.x-_e.x,Ze.y-_e.y)},mn.prototype.clone=function(){var B=this.sx,_e=this.shy,Ze=this.shx,ct=this.sy,xt=this.tx,jt=this.ty;return new mn(B,_e,Ze,ct,xt,jt)},_.Matrix=mn;var It=_.matrixMult=function(B,_e){return _e.multiply(B)},Kt=new mn(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Kt;var Ln=function(B,_e){if(!Mn[B]){var Ze=(_e instanceof Wf?"Sh":"P")+(Object.keys(xn).length+1).toString(10);_e.id=Ze,Mn[B]=Ze,xn[Ze]=_e,Ot.publish("addPattern",_e)}};_.ShadingPattern=Wf,_.TilingPattern=Uh,_.addShadingPattern=function(B,_e){return W("addShadingPattern()"),Ln(B,_e),this},_.beginTilingPattern=function(B){W("beginTilingPattern()"),qs(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},_.endTilingPattern=function(B,_e){W("endTilingPattern()"),_e.stream=Pe[ee].join(`
`),Ln(B,_e),Ot.publish("endTilingPattern",_e),Wt.pop().restore()};var mr=_.__private__.newObject=function(){var B=at();return Cn(B,!0),B},at=_.__private__.newObjectDeferred=function(){return ye++,se[ye]=function(){return le},ye},Cn=function(B,_e){return _e=typeof _e=="boolean"&&_e,se[B]=le,_e&&pe(B+" 0 obj"),B},xr=_.__private__.newAdditionalObject=function(){var B={objId:at(),content:""};return ke.push(B),B},Di=at(),Fr=at(),Er=_.__private__.decodeColorString=function(B){var _e=B.split(" ");if(_e.length!==2||_e[1]!=="g"&&_e[1]!=="G")_e.length===5&&(_e[4]==="k"||_e[4]==="K")&&(_e=[(1-_e[0])*(1-_e[3]),(1-_e[1])*(1-_e[3]),(1-_e[2])*(1-_e[3]),"r"]);else{var Ze=parseFloat(_e[0]);_e=[Ze,Ze,Ze,"r"]}for(var ct="#",xt=0;xt<3;xt++)ct+=("0"+Math.floor(255*parseFloat(_e[xt])).toString(16)).slice(-2);return ct},lr=_.__private__.encodeColorString=function(B){var _e;typeof B=="string"&&(B={ch1:B});var Ze=B.ch1,ct=B.ch2,xt=B.ch3,jt=B.ch4,un=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ze=="string"&&Ze.charAt(0)!=="#"){var Nn=new Sx(Ze);if(Nn.ok)Ze=Nn.toHex();else if(!/^\d*\.?\d*$/.test(Ze))throw new Error('Invalid color "'+Ze+'" passed to jsPDF.encodeColorString.')}if(typeof Ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ze)&&(Ze="#"+Ze[1]+Ze[1]+Ze[2]+Ze[2]+Ze[3]+Ze[3]),typeof Ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ze)){var jn=parseInt(Ze.substr(1),16);Ze=jn>>16&255,ct=jn>>8&255,xt=255&jn}if(ct===void 0||jt===void 0&&Ze===ct&&ct===xt)if(typeof Ze=="string")_e=Ze+" "+un[0];else switch(B.precision){case 2:_e=Y(Ze/255)+" "+un[0];break;case 3:default:_e=F(Ze/255)+" "+un[0]}else if(jt===void 0||Ji(jt)==="object"){if(jt&&!isNaN(jt.a)&&jt.a===0)return _e=["1.","1.","1.",un[1]].join(" ");if(typeof Ze=="string")_e=[Ze,ct,xt,un[1]].join(" ");else switch(B.precision){case 2:_e=[Y(Ze/255),Y(ct/255),Y(xt/255),un[1]].join(" ");break;default:case 3:_e=[F(Ze/255),F(ct/255),F(xt/255),un[1]].join(" ")}}else if(typeof Ze=="string")_e=[Ze,ct,xt,jt,un[2]].join(" ");else switch(B.precision){case 2:_e=[Y(Ze),Y(ct),Y(xt),Y(jt),un[2]].join(" ");break;case 3:default:_e=[F(Ze),F(ct),F(xt),F(jt),un[2]].join(" ")}return _e},Hr=_.__private__.getFilters=function(){return o},ir=_.__private__.putStream=function(B){var _e=(B=B||{}).data||"",Ze=B.filters||Hr(),ct=B.alreadyAppliedFilters||[],xt=B.addLength1||!1,jt=_e.length,un=B.objectId,Nn=function(io){return io};if(g!==null&&un===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Nn=eo.encryptor(un,0));var jn={};Ze===!0&&(Ze=["FlateEncode"]);var nr=B.additionalKeyValues||[],vr=(jn=Ar.API.processDataByFilters!==void 0?Ar.API.processDataByFilters(_e,Ze):{data:_e,reverseChain:[]}).reverseChain+(Array.isArray(ct)?ct.join(" "):ct.toString());if(jn.data.length!==0&&(nr.push({key:"Length",value:jn.data.length}),xt===!0&&nr.push({key:"Length1",value:jt})),vr.length!=0)if(vr.split("/").length-1==1)nr.push({key:"Filter",value:vr});else{nr.push({key:"Filter",value:"["+vr+"]"});for(var $r=0;$r<nr.length;$r+=1)if(nr[$r].key==="DecodeParms"){for(var ji=[],di=0;di<jn.reverseChain.split("/").length-1;di+=1)ji.push("null");ji.push(nr[$r].value),nr[$r].value="["+ji.join(" ")+"]"}}pe("<<");for(var wi=0;wi<nr.length;wi++)pe("/"+nr[wi].key+" "+nr[wi].value);pe(">>"),jn.data.length!==0&&(pe("stream"),pe(Nn(jn.data)),pe("endstream"))},Br=_.__private__.putPage=function(B){var _e=B.number,Ze=B.data,ct=B.objId,xt=B.contentsObjId;Cn(ct,!0),pe("<</Type /Page"),pe("/Parent "+B.rootDictionaryObjId+" 0 R"),pe("/Resources "+B.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(Le(B.mediaBox.bottomLeftX))+" "+parseFloat(Le(B.mediaBox.bottomLeftY))+" "+Le(B.mediaBox.topRightX)+" "+Le(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&pe("/CropBox ["+Le(B.cropBox.bottomLeftX)+" "+Le(B.cropBox.bottomLeftY)+" "+Le(B.cropBox.topRightX)+" "+Le(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&pe("/BleedBox ["+Le(B.bleedBox.bottomLeftX)+" "+Le(B.bleedBox.bottomLeftY)+" "+Le(B.bleedBox.topRightX)+" "+Le(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&pe("/TrimBox ["+Le(B.trimBox.bottomLeftX)+" "+Le(B.trimBox.bottomLeftY)+" "+Le(B.trimBox.topRightX)+" "+Le(B.trimBox.topRightY)+"]"),B.artBox!==null&&pe("/ArtBox ["+Le(B.artBox.bottomLeftX)+" "+Le(B.artBox.bottomLeftY)+" "+Le(B.artBox.topRightX)+" "+Le(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&pe("/UserUnit "+B.userUnit),Ot.publish("putPage",{objId:ct,pageContext:Ge[_e],pageNumber:_e,page:Ze}),pe("/Contents "+xt+" 0 R"),pe(">>"),pe("endobj");var jt=Ze.join(`
`);return K===$.ADVANCED&&(jt+=`
Q`),Cn(xt,!0),ir({data:jt,filters:Hr(),objectId:xt}),pe("endobj"),ct},jr=_.__private__.putPages=function(){var B,_e,Ze=[];for(B=1;B<=mt;B++)Ge[B].objId=at(),Ge[B].contentsObjId=at();for(B=1;B<=mt;B++)Ze.push(Br({number:B,data:Pe[B],objId:Ge[B].objId,contentsObjId:Ge[B].contentsObjId,mediaBox:Ge[B].mediaBox,cropBox:Ge[B].cropBox,bleedBox:Ge[B].bleedBox,trimBox:Ge[B].trimBox,artBox:Ge[B].artBox,userUnit:Ge[B].userUnit,rootDictionaryObjId:Di,resourceDictionaryObjId:Fr}));Cn(Di,!0),pe("<</Type /Pages");var ct="/Kids [";for(_e=0;_e<mt;_e++)ct+=Ze[_e]+" 0 R ";pe(ct+"]"),pe("/Count "+mt),pe(">>"),pe("endobj"),Ot.publish("postPutPages")},rn=function(B){Ot.publish("putFont",{font:B,out:pe,newObject:mr,putStream:ir}),B.isAlreadyPutted!==!0&&(B.objectNumber=mr(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+jh(B.postScriptName)),pe("/Subtype /Type1"),typeof B.encoding=="string"&&pe("/Encoding /"+B.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},Ri=function(){for(var B in wn)wn.hasOwnProperty(B)&&(y===!1||y===!0&&x.hasOwnProperty(B))&&rn(wn[B])},yi=function(B){B.objectNumber=mr();var _e=[];_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Form"}),_e.push({key:"BBox",value:"["+[Le(B.x),Le(B.y),Le(B.x+B.width),Le(B.y+B.height)].join(" ")+"]"}),_e.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ze=B.pages[1].join(`
`);ir({data:Ze,additionalKeyValues:_e,objectId:B.objectNumber}),pe("endobj")},pi=function(){for(var B in tr)tr.hasOwnProperty(B)&&yi(tr[B])},Zr=function(B,_e){var Ze,ct=[],xt=1/(_e-1);for(Ze=0;Ze<1;Ze+=xt)ct.push(Ze);if(ct.push(1),B[0].offset!=0){var jt={offset:0,color:B[0].color};B.unshift(jt)}if(B[B.length-1].offset!=1){var un={offset:1,color:B[B.length-1].color};B.push(un)}for(var Nn="",jn=0,nr=0;nr<ct.length;nr++){for(Ze=ct[nr];Ze>B[jn+1].offset;)jn++;var vr=B[jn].offset,$r=(Ze-vr)/(B[jn+1].offset-vr),ji=B[jn].color,di=B[jn+1].color;Nn+=ce(Math.round((1-$r)*ji[0]+$r*di[0]).toString(16))+ce(Math.round((1-$r)*ji[1]+$r*di[1]).toString(16))+ce(Math.round((1-$r)*ji[2]+$r*di[2]).toString(16))}return Nn.trim()},Or=function(B,_e){_e||(_e=21);var Ze=mr(),ct=Zr(B.colors,_e),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+_e+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ir({data:ct,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ze}),pe("endobj"),B.objectNumber=mr(),pe("<< /ShadingType "+B.type),pe("/ColorSpace /DeviceRGB");var jt="/Coords ["+Le(parseFloat(B.coords[0]))+" "+Le(parseFloat(B.coords[1]))+" ";B.type===2?jt+=Le(parseFloat(B.coords[2]))+" "+Le(parseFloat(B.coords[3])):jt+=Le(parseFloat(B.coords[2]))+" "+Le(parseFloat(B.coords[3]))+" "+Le(parseFloat(B.coords[4]))+" "+Le(parseFloat(B.coords[5])),pe(jt+="]"),B.matrix&&pe("/Matrix ["+B.matrix.toString()+"]"),pe("/Function "+Ze+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},Ir=function(B,_e){var Ze=at(),ct=mr();_e.push({resourcesOid:Ze,objectOid:ct}),B.objectNumber=ct;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+B.boundingBox.map(Le).join(" ")+"]"}),xt.push({key:"XStep",value:Le(B.xStep)}),xt.push({key:"YStep",value:Le(B.yStep)}),xt.push({key:"Resources",value:Ze+" 0 R"}),B.matrix&&xt.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ir({data:B.stream,additionalKeyValues:xt,objectId:B.objectNumber}),pe("endobj")},hr=function(B){var _e;for(_e in xn)xn.hasOwnProperty(_e)&&(xn[_e]instanceof Wf?Or(xn[_e]):xn[_e]instanceof Uh&&Ir(xn[_e],B))},Fi=function(B){for(var _e in B.objectNumber=mr(),pe("<<"),B)switch(_e){case"opacity":pe("/ca "+Y(B[_e]));break;case"stroke-opacity":pe("/CA "+Y(B[_e]))}pe(">>"),pe("endobj")},Ss=function(){var B;for(B in En)En.hasOwnProperty(B)&&Fi(En[B])},Cs=function(){for(var B in pe("/XObject <<"),tr)tr.hasOwnProperty(B)&&tr[B].objectNumber>=0&&pe("/"+B+" "+tr[B].objectNumber+" 0 R");Ot.publish("putXobjectDict"),pe(">>")},oi=function(){eo.oid=mr(),pe("<<"),pe("/Filter /Standard"),pe("/V "+eo.v),pe("/R "+eo.r),pe("/U <"+eo.toHexString(eo.U)+">"),pe("/O <"+eo.toHexString(eo.O)+">"),pe("/P "+eo.P),pe(">>"),pe("endobj")},Fn=function(){for(var B in pe("/Font <<"),wn)wn.hasOwnProperty(B)&&(y===!1||y===!0&&x.hasOwnProperty(B))&&pe("/"+B+" "+wn[B].objectNumber+" 0 R");pe(">>")},Po=function(){if(Object.keys(xn).length>0){for(var B in pe("/Shading <<"),xn)xn.hasOwnProperty(B)&&xn[B]instanceof Wf&&xn[B].objectNumber>=0&&pe("/"+B+" "+xn[B].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),pe(">>")}},ui=function(B){if(Object.keys(xn).length>0){for(var _e in pe("/Pattern <<"),xn)xn.hasOwnProperty(_e)&&xn[_e]instanceof _.TilingPattern&&xn[_e].objectNumber>=0&&xn[_e].objectNumber<B&&pe("/"+_e+" "+xn[_e].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),pe(">>")}},fr=function(){if(Object.keys(En).length>0){var B;for(B in pe("/ExtGState <<"),En)En.hasOwnProperty(B)&&En[B].objectNumber>=0&&pe("/"+B+" "+En[B].objectNumber+" 0 R");Ot.publish("putGStateDict"),pe(">>")}},qn=function(B){Cn(B.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fn(),Po(),ui(B.objectOid),fr(),Cs(),pe(">>"),pe("endobj")},bo=function(){var B=[];Ri(),Ss(),pi(),hr(B),Ot.publish("putResources"),B.forEach(qn),qn({resourcesOid:Fr,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources")},wo=function(){Ot.publish("putAdditionalObjects");for(var B=0;B<ke.length;B++){var _e=ke[B];Cn(_e.objId,!0),pe(_e.content),pe("endobj")}Ot.publish("postPutAdditionalObjects")},Lr=function(B){Tn[B.fontName]=Tn[B.fontName]||{},Tn[B.fontName][B.fontStyle]=B.id},Us=function(B,_e,Ze,ct,xt){var jt={id:"F"+(Object.keys(wn).length+1).toString(10),postScriptName:B,fontName:_e,fontStyle:Ze,encoding:ct,isStandardFont:xt||!1,metadata:{}};return Ot.publish("addFont",{font:jt,instance:this}),wn[jt.id]=jt,Lr(jt),jt.id},Hn=function(B){for(var _e=0,Ze=Ke.length;_e<Ze;_e++){var ct=Us.call(this,B[_e][0],B[_e][1],B[_e][2],Ke[_e][3],!0);y===!1&&(x[ct]=!0);var xt=B[_e][0].split("-");Lr({id:ct,fontName:xt[0],fontStyle:xt[1]||""})}Ot.publish("addFonts",{fonts:wn,dictionary:Tn})},_r=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(ct){var _e=ct.stack||"";~_e.indexOf(" at ")&&(_e=_e.split(" at ")[1]);var Ze="Error in function "+_e.split(`
`)[0].split("<")[0]+": "+ct.message;if(!Dr.console)throw new Error(Ze);Dr.console.error(Ze,ct),Dr.alert&&alert(Ze)}},B.foo.bar=B,B.foo},Kr=function(B,_e){var Ze,ct,xt,jt,un,Nn,jn,nr,vr;if(xt=(_e=_e||{}).sourceEncoding||"Unicode",un=_e.outputEncoding,(_e.autoencode||un)&&wn[it].metadata&&wn[it].metadata[xt]&&wn[it].metadata[xt].encoding&&(jt=wn[it].metadata[xt].encoding,!un&&wn[it].encoding&&(un=wn[it].encoding),!un&&jt.codePages&&(un=jt.codePages[0]),typeof un=="string"&&(un=jt[un]),un)){for(jn=!1,Nn=[],Ze=0,ct=B.length;Ze<ct;Ze++)(nr=un[B.charCodeAt(Ze)])?Nn.push(String.fromCharCode(nr)):Nn.push(B[Ze]),Nn[Ze].charCodeAt(0)>>8&&(jn=!0);B=Nn.join("")}for(Ze=B.length;jn===void 0&&Ze!==0;)B.charCodeAt(Ze-1)>>8&&(jn=!0),Ze--;if(!jn)return B;for(Nn=_e.noBOM?[]:[254,255],Ze=0,ct=B.length;Ze<ct;Ze++){if((vr=(nr=B.charCodeAt(Ze))>>8)>>8)throw new Error("Character at position "+Ze+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nn.push(vr),Nn.push(nr-(vr<<8))}return String.fromCharCode.apply(void 0,Nn)},_n=_.__private__.pdfEscape=_.pdfEscape=function(B,_e){return Kr(B,_e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tn=_.__private__.beginPage=function(B){Pe[++mt]=[],Ge[mt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},xo(mt),ve(Pe[ee])},si=function(B,_e){var Ze,ct,xt;switch(t=_e||t,typeof B=="string"&&(Ze=O(B.toLowerCase()),Array.isArray(Ze)&&(ct=Ze[0],xt=Ze[1])),Array.isArray(B)&&(ct=B[0]*nt,xt=B[1]*nt),isNaN(ct)&&(ct=i[0],xt=i[1]),(ct>14400||xt>14400)&&(ao.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ct=Math.min(14400,ct),xt=Math.min(14400,xt)),i=[ct,xt],t.substr(0,1)){case"l":xt>ct&&(i=[xt,ct]);break;case"p":ct>xt&&(i=[xt,ct])}tn(i),kl(Yl),pe($i),Dl!==0&&pe(Dl+" J"),_i!==0&&pe(_i+" j"),Ot.publish("addPage",{pageNumber:mt})},co=function(B){B>0&&B<=mt&&(Pe.splice(B,1),Ge.splice(B,1),mt--,ee>mt&&(ee=mt),this.setPage(ee))},xo=function(B){B>0&&B<=mt&&(ee=B)},Pi=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Pe.length-1},fs=function(B,_e,Ze){var ct,xt=void 0;return Ze=Ze||{},B=B!==void 0?B:wn[it].fontName,_e=_e!==void 0?_e:wn[it].fontStyle,ct=B.toLowerCase(),Tn[ct]!==void 0&&Tn[ct][_e]!==void 0?xt=Tn[ct][_e]:Tn[B]!==void 0&&Tn[B][_e]!==void 0?xt=Tn[B][_e]:Ze.disableWarning===!1&&ao.warn("Unable to look up font label for font '"+B+"', '"+_e+"'. Refer to getFontList() for available fonts."),xt||Ze.noFallback||(xt=Tn.times[_e])==null&&(xt=Tn.times.normal),xt},Qo=_.__private__.putInfo=function(){var B=mr(),_e=function(ct){return ct};for(var Ze in g!==null&&(_e=eo.encryptor(B,0)),pe("<<"),pe("/Producer ("+_n(_e("jsPDF "+Ar.version))+")"),et)et.hasOwnProperty(Ze)&&et[Ze]&&pe("/"+Ze.substr(0,1).toUpperCase()+Ze.substr(1)+" ("+_n(_e(et[Ze]))+")");pe("/CreationDate ("+_n(_e(U))+")"),pe(">>"),pe("endobj")},Ro=_.__private__.putCatalog=function(B){var _e=(B=B||{}).rootDictionaryObjId||Di;switch(mr(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+_e+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ze=""+Xe;Ze.substr(Ze.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+Y(Xe)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}Ct&&pe("/PageMode /"+Ct),Ot.publish("putCatalog"),pe(">>"),pe("endobj")},hi=_.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(ye+1)),pe("/Root "+ye+" 0 R"),pe("/Info "+(ye-1)+" 0 R"),g!==null&&pe("/Encrypt "+eo.oid+" 0 R"),pe("/ID [ <"+R+"> <"+R+"> ]"),pe(">>")},Bs=_.__private__.putHeader=function(){pe("%PDF-"+E),pe("%")},Fo=_.__private__.putXRef=function(){var B="0000000000";pe("xref"),pe("0 "+(ye+1)),pe("0000000000 65535 f ");for(var _e=1;_e<=ye;_e++)typeof se[_e]=="function"?pe((B+se[_e]()).slice(-10)+" 00000 n "):se[_e]!==void 0?pe((B+se[_e]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Qi=_.__private__.buildDocument=function(){de(),ve(k),Ot.publish("buildDocument"),Bs(),jr(),wo(),bo(),g!==null&&oi(),Qo(),Ro();var B=le;return Fo(),hi(),pe("startxref"),pe(""+B),pe("%%EOF"),ve(Pe[ee]),k.join(`
`)},Lo=_.__private__.getBlob=function(B){return new Blob([Qe(B)],{type:"application/pdf"})},Vs=_.output=_.__private__.output=_r(function(B,_e){switch(typeof(_e=_e||{})=="string"?_e={filename:_e}:_e.filename=_e.filename||"generated.pdf",B){case void 0:return Qi();case"save":_.save(_e.filename);break;case"arraybuffer":return Qe(Qi());case"blob":return Lo(Qi());case"bloburi":case"bloburl":if(Dr.URL!==void 0&&typeof Dr.URL.createObjectURL=="function")return Dr.URL&&Dr.URL.createObjectURL(Lo(Qi()))||void 0;ao.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ze="",ct=Qi();try{Ze=w1(ct)}catch{Ze=w1(unescape(encodeURIComponent(ct)))}return"data:application/pdf;filename="+_e.filename+";base64,"+Ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';_e.pdfObjectUrl&&(xt=_e.pdfObjectUrl,jt="");var un='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(_e)+");<\/script></body></html>",Nn=Dr.open();return Nn!==null&&Nn.document.write(un),Nn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var jn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(_e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+_e.filename+'" width="500px" height="400px" /></body></html>',nr=Dr.open();if(nr!==null){nr.document.write(jn);var vr=this;nr.document.documentElement.querySelector("#pdfViewer").onload=function(){nr.document.title=_e.filename,nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vr.output("bloburl"))}}return nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",_e)+'"></iframe></body></html>',ji=Dr.open();if(ji!==null&&(ji.document.write($r),ji.document.title=_e.filename),ji||typeof safari>"u")return ji;break;case"datauri":case"dataurl":return Dr.document.location.href=this.output("datauristring",_e);default:return null}}),va=function(B){return Array.isArray(Pn)===!0&&Pn.indexOf(B)>-1};switch(r){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=va("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);nt=r}var eo=null;We(),re();var rl=function(B){return g!==null?eo.encryptor(B,0):function(_e){return _e}},ya=_.__private__.getPageInfo=_.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ge[B].objId,pageNumber:B,pageContext:Ge[B]}},pr=_.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var _e in Ge)if(Ge[_e].objId===B)break;return ya(_e)},br=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:Ge[ee].objId,pageNumber:ee,pageContext:Ge[ee]}};_.addPage=function(){return si.apply(this,arguments),this},_.setPage=function(){return xo.apply(this,arguments),ve.call(this,Pe[ee]),this},_.insertPage=function(B){return this.addPage(),this.movePage(ee,B),this},_.movePage=function(B,_e){var Ze,ct;if(B>_e){Ze=Pe[B],ct=Ge[B];for(var xt=B;xt>_e;xt--)Pe[xt]=Pe[xt-1],Ge[xt]=Ge[xt-1];Pe[_e]=Ze,Ge[_e]=ct,this.setPage(_e)}else if(B<_e){Ze=Pe[B],ct=Ge[B];for(var jt=B;jt<_e;jt++)Pe[jt]=Pe[jt+1],Ge[jt]=Ge[jt+1];Pe[_e]=Ze,Ge[_e]=ct,this.setPage(_e)}return this},_.deletePage=function(){return co.apply(this,arguments),this},_.__private__.text=_.text=function(B,_e,Ze,ct,xt){var jt,un,Nn,jn,nr,vr,$r,ji,di,wi=(ct=ct||{}).scope||this;if(typeof B=="number"&&typeof _e=="number"&&(typeof Ze=="string"||Array.isArray(Ze))){var io=Ze;Ze=_e,_e=B,B=io}if(arguments[3]instanceof mn?(W("The transform parameter of text() with a Matrix value"),di=xt):(Nn=arguments[4],jn=arguments[5],Ji($r=arguments[3])==="object"&&$r!==null||(typeof Nn=="string"&&(jn=Nn,Nn=null),typeof $r=="string"&&(jn=$r,$r=null),typeof $r=="number"&&(Nn=$r,$r=null),ct={flags:$r,angle:Nn,align:jn})),isNaN(_e)||isNaN(Ze)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return wi;var fo="",Ps=!1,Ur=typeof ct.lineHeightFactor=="number"?ct.lineHeightFactor:Al,zo=wi.internal.scaleFactor;function cl(Li){return Li=Li.split("	").join(Array(ct.TabLen||9).join(" ")),_n(Li,$r)}function es(Li){for(var Mi,oo=Li.concat(),Oi=[],ks=oo.length;ks--;)typeof(Mi=oo.shift())=="string"?Oi.push(Mi):Array.isArray(Li)&&(Mi.length===1||Mi[1]===void 0&&Mi[2]===void 0)?Oi.push(Mi[0]):Oi.push([Mi[0],Mi[1],Mi[2]]);return Oi}function Ql(Li,Mi){var oo;if(typeof Li=="string")oo=Mi(Li)[0];else if(Array.isArray(Li)){for(var Oi,ks,ds=Li.concat(),Is=[],wu=ds.length;wu--;)typeof(Oi=ds.shift())=="string"?Is.push(Mi(Oi)[0]):Array.isArray(Oi)&&typeof Oi[0]=="string"&&(ks=Mi(Oi[0],Oi[1],Oi[2]),Is.push([ks[0],ks[1],ks[2]]));oo=Is}return oo}var na=!1,bu=!0;if(typeof B=="string")na=!0;else if(Array.isArray(B)){var Ha=B.concat();un=[];for(var Ga,ho=Ha.length;ho--;)(typeof(Ga=Ha.shift())!="string"||Array.isArray(Ga)&&typeof Ga[0]!="string")&&(bu=!1);na=bu}if(na===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ra=He/wi.internal.scaleFactor,Ms=ra*(Ur-1);switch(ct.baseline){case"bottom":Ze-=Ms;break;case"top":Ze+=ra-Ms;break;case"hanging":Ze+=ra-2*Ms;break;case"middle":Ze+=ra/2-Ms}if((vr=ct.maxWidth||0)>0&&(typeof B=="string"?B=wi.splitTextToSize(B,vr):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(Li,Mi){return Li.concat(wi.splitTextToSize(Mi,vr))},[]))),jt={text:B,x:_e,y:Ze,options:ct,mutex:{pdfEscape:_n,activeFontKey:it,fonts:wn,activeFontSize:He}},Ot.publish("preProcessText",jt),B=jt.text,Nn=(ct=jt.options).angle,!(di instanceof mn)&&Nn&&typeof Nn=="number"){Nn*=Math.PI/180,ct.rotationDirection===0&&(Nn=-Nn),K===$.ADVANCED&&(Nn=-Nn);var hs=Math.cos(Nn),fl=Math.sin(Nn);di=new mn(hs,fl,-fl,hs,0,0)}else Nn&&Nn instanceof mn&&(di=Nn);K!==$.ADVANCED||di||(di=Kt),(nr=ct.charSpace||Nl)!==void 0&&(fo+=Le(I(nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ji=ct.horizontalScale)!==void 0&&(fo+=Le(100*ji)+` Tz
`),ct.lang;var $o=-1,ts=ct.renderingMode!==void 0?ct.renderingMode:ct.stroke,ns=wi.internal.getCurrentPageInfo().pageContext;switch(ts){case 0:case!1:case"fill":$o=0;break;case 1:case!0:case"stroke":$o=1;break;case 2:case"fillThenStroke":$o=2;break;case 3:case"invisible":$o=3;break;case 4:case"fillAndAddForClipping":$o=4;break;case 5:case"strokeAndAddPathForClipping":$o=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$o=6;break;case 7:case"addToPathForClipping":$o=7}var Ku=ns.usedRenderingMode!==void 0?ns.usedRenderingMode:-1;$o!==-1?fo+=$o+` Tr
`:Ku!==-1&&(fo+=`0 Tr
`),$o!==-1&&(ns.usedRenderingMode=$o),jn=ct.align||"left";var So,wa=He*Ur,Uo=wi.internal.pageSize.getWidth(),Vo=wn[it];nr=ct.charSpace||Nl,vr=ct.maxWidth||0,$r=Object.assign({autoencode:!0,noBOM:!0},ct.flags);var xa=[],La=function(Li){return wi.getStringUnitWidth(Li,{font:Vo,charSpace:nr,fontSize:He,doKerning:!1})*He/zo};if(Object.prototype.toString.call(B)==="[object Array]"){var Ho;un=es(B),jn!=="left"&&(So=un.map(La));var Ao,ia=0;if(jn==="right"){_e-=So[0],B=[],ho=un.length;for(var As=0;As<ho;As++)As===0?(Ao=or(_e),Ho=no(Ze)):(Ao=I(ia-So[As]),Ho=-wa),B.push([un[As],Ao,Ho]),ia=So[As]}else if(jn==="center"){_e-=So[0]/2,B=[],ho=un.length;for(var Go=0;Go<ho;Go++)Go===0?(Ao=or(_e),Ho=no(Ze)):(Ao=I((ia-So[Go])/2),Ho=-wa),B.push([un[Go],Ao,Ho]),ia=So[Go]}else if(jn==="left"){B=[],ho=un.length;for(var _t=0;_t<ho;_t++)B.push(un[_t])}else if(jn==="justify"&&Vo.encoding==="Identity-H"){B=[],ho=un.length,vr=vr!==0?vr:Uo;for(var qt=0,Mt=0;Mt<ho;Mt++)if(Ho=Mt===0?no(Ze):-wa,Ao=Mt===0?or(_e):qt,Mt<ho-1){var An=I((vr-So[Mt])/(un[Mt].split(" ").length-1)),Kn=un[Mt].split(" ");B.push([Kn[0]+" ",Ao,Ho]),qt=0;for(var wr=1;wr<Kn.length;wr++){var Ui=(La(Kn[wr-1]+" "+Kn[wr])-La(Kn[wr]))*zo+An;wr==Kn.length-1?B.push([Kn[wr],Ui,0]):B.push([Kn[wr]+" ",Ui,0]),qt-=Ui}}else B.push([un[Mt],Ao,Ho]);B.push(["",qt,0])}else{if(jn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],ho=un.length,vr=vr!==0?vr:Uo,Mt=0;Mt<ho;Mt++)Ho=Mt===0?no(Ze):-wa,Ao=Mt===0?or(_e):0,Mt<ho-1?xa.push(Le(I((vr-So[Mt])/(un[Mt].split(" ").length-1)))):xa.push(0),B.push([un[Mt],Ao,Ho])}}var xi=typeof ct.R2L=="boolean"?ct.R2L:kt;xi===!0&&(B=Ql(B,function(Li,Mi,oo){return[Li.split("").reverse().join(""),Mi,oo]})),jt={text:B,x:_e,y:Ze,options:ct,mutex:{pdfEscape:_n,activeFontKey:it,fonts:wn,activeFontSize:He}},Ot.publish("postProcessText",jt),B=jt.text,Ps=jt.mutex.isHex||!1;var Ol=wn[it].encoding;Ol!=="WinAnsiEncoding"&&Ol!=="StandardEncoding"||(B=Ql(B,function(Li,Mi,oo){return[cl(Li),Mi,oo]})),un=es(B),B=[];for(var rs,Vi,oa,Sa=0,sa=1,aa=Array.isArray(un[0])?sa:Sa,la="",Xr=function(Li,Mi,oo){var Oi="";return oo instanceof mn?(oo=typeof ct.angle=="number"?It(oo,new mn(1,0,0,1,Li,Mi)):It(new mn(1,0,0,1,Li,Mi),oo),K===$.ADVANCED&&(oo=It(new mn(1,0,0,-1,0,0),oo)),Oi=oo.join(" ")+` Tm
`):Oi=Le(Li)+" "+Le(Mi)+` Td
`,Oi},Ws=0;Ws<un.length;Ws++){switch(la="",aa){case sa:oa=(Ps?"<":"(")+un[Ws][0]+(Ps?">":")"),rs=parseFloat(un[Ws][1]),Vi=parseFloat(un[Ws][2]);break;case Sa:oa=(Ps?"<":"(")+un[Ws]+(Ps?">":")"),rs=or(_e),Vi=no(Ze)}xa!==void 0&&xa[Ws]!==void 0&&(la=xa[Ws]+` Tw
`),Ws===0?B.push(la+Xr(rs,Vi,di)+oa):aa===Sa?B.push(la+oa):aa===sa&&B.push(la+Xr(rs,Vi,di)+oa)}B=aa===Sa?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var ko=`BT
/`;return ko+=it+" "+He+` Tf
`,ko+=Le(He*Ur)+` TL
`,ko+=ta+`
`,ko+=fo,ko+=B,pe(ko+="ET"),x[it]=!0,wi};var Yr=_.__private__.clip=_.clip=function(B){return pe(B==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Yr("evenodd")},_.__private__.discardPath=_.discardPath=function(){return pe("n"),this};var Tr=_.__private__.isValidStyle=function(B){var _e=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(_e=!0),_e};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(B){return Tr(B)&&(d=B),this};var jo=_.__private__.getStyle=_.getStyle=function(B){var _e=d;switch(B){case"D":case"S":_e="S";break;case"F":_e="f";break;case"FD":case"DF":_e="B";break;case"f":case"f*":case"B":case"B*":_e=B}return _e},il=_.close=function(){return pe("h"),this};_.stroke=function(){return pe("S"),this},_.fill=function(B){return ol("f",B),this},_.fillEvenOdd=function(B){return ol("f*",B),this},_.fillStroke=function(B){return ol("B",B),this},_.fillStrokeEvenOdd=function(B){return ol("B*",B),this};var ol=function(B,_e){Ji(_e)==="object"?_u(_e,B):pe(B)},Hs=function(B){B===null||K===$.ADVANCED&&B===void 0||(B=jo(B),pe(B))};function Ua(B,_e,Ze,ct,xt){var jt=new Uh(_e||this.boundingBox,Ze||this.xStep,ct||this.yStep,this.gState,xt||this.matrix);jt.stream=this.stream;var un=B+"$$"+this.cloneIndex+++"$$";return Ln(un,jt),jt}var _u=function(B,_e){var Ze=Mn[B.key],ct=xn[Ze];if(ct instanceof Wf)pe("q"),pe(Ml(_e)),ct.gState&&_.setGState(ct.gState),pe(B.matrix.toString()+" cm"),pe("/"+Ze+" sh"),pe("Q");else if(ct instanceof Uh){var xt=new mn(1,0,0,-1,0,ba());B.matrix&&(xt=xt.multiply(B.matrix||Kt),Ze=Ua.call(ct,B.key,B.boundingBox,B.xStep,B.yStep,xt).id),pe("q"),pe("/Pattern cs"),pe("/"+Ze+" scn"),ct.gState&&_.setGState(ct.gState),pe(_e),pe("Q")}},Ml=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Sr=_.moveTo=function(B,_e){return pe(Le(I(B))+" "+Le(H(_e))+" m"),this},Gr=_.lineTo=function(B,_e){return pe(Le(I(B))+" "+Le(H(_e))+" l"),this},Va=_.curveTo=function(B,_e,Ze,ct,xt,jt){return pe([Le(I(B)),Le(H(_e)),Le(I(Ze)),Le(H(ct)),Le(I(xt)),Le(H(jt)),"c"].join(" ")),this};_.__private__.line=_.line=function(B,_e,Ze,ct,xt){if(isNaN(B)||isNaN(_e)||isNaN(Ze)||isNaN(ct)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.line");return K===$.COMPAT?this.lines([[Ze-B,ct-_e]],B,_e,[1,1],xt||"S"):this.lines([[Ze-B,ct-_e]],B,_e,[1,1]).stroke()},_.__private__.lines=_.lines=function(B,_e,Ze,ct,xt,jt){var un,Nn,jn,nr,vr,$r,ji,di,wi,io,fo,Ps;if(typeof B=="number"&&(Ps=Ze,Ze=_e,_e=B,B=Ps),ct=ct||[1,1],jt=jt||!1,isNaN(_e)||isNaN(Ze)||!Array.isArray(B)||!Array.isArray(ct)||!Tr(xt)||typeof jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sr(_e,Ze),un=ct[0],Nn=ct[1],nr=B.length,io=_e,fo=Ze,jn=0;jn<nr;jn++)(vr=B[jn]).length===2?(io=vr[0]*un+io,fo=vr[1]*Nn+fo,Gr(io,fo)):($r=vr[0]*un+io,ji=vr[1]*Nn+fo,di=vr[2]*un+io,wi=vr[3]*Nn+fo,io=vr[4]*un+io,fo=vr[5]*Nn+fo,Va($r,ji,di,wi,io,fo));return jt&&il(),Hs(xt),this},_.path=function(B){for(var _e=0;_e<B.length;_e++){var Ze=B[_e],ct=Ze.c;switch(Ze.op){case"m":Sr(ct[0],ct[1]);break;case"l":Gr(ct[0],ct[1]);break;case"c":Va.apply(this,ct);break;case"h":il()}}return this},_.__private__.rect=_.rect=function(B,_e,Ze,ct,xt){if(isNaN(B)||isNaN(_e)||isNaN(Ze)||isNaN(ct)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return K===$.COMPAT&&(ct=-ct),pe([Le(I(B)),Le(H(_e)),Le(I(Ze)),Le(I(ct)),"re"].join(" ")),Hs(xt),this},_.__private__.triangle=_.triangle=function(B,_e,Ze,ct,xt,jt,un){if(isNaN(B)||isNaN(_e)||isNaN(Ze)||isNaN(ct)||isNaN(xt)||isNaN(jt)||!Tr(un))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ze-B,ct-_e],[xt-Ze,jt-ct],[B-xt,_e-jt]],B,_e,[1,1],un,!0),this},_.__private__.roundedRect=_.roundedRect=function(B,_e,Ze,ct,xt,jt,un){if(isNaN(B)||isNaN(_e)||isNaN(Ze)||isNaN(ct)||isNaN(xt)||isNaN(jt)||!Tr(un))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*Ze),jt=Math.min(jt,.5*ct),this.lines([[Ze-2*xt,0],[xt*Nn,0,xt,jt-jt*Nn,xt,jt],[0,ct-2*jt],[0,jt*Nn,-xt*Nn,jt,-xt,jt],[2*xt-Ze,0],[-xt*Nn,0,-xt,-jt*Nn,-xt,-jt],[0,2*jt-ct],[0,-jt*Nn,xt*Nn,-jt,xt,-jt]],B+xt,_e,[1,1],un,!0),this},_.__private__.ellipse=_.ellipse=function(B,_e,Ze,ct,xt){if(isNaN(B)||isNaN(_e)||isNaN(Ze)||isNaN(ct)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var jt=4/3*(Math.SQRT2-1)*Ze,un=4/3*(Math.SQRT2-1)*ct;return Sr(B+Ze,_e),Va(B+Ze,_e-un,B+jt,_e-ct,B,_e-ct),Va(B-jt,_e-ct,B-Ze,_e-un,B-Ze,_e),Va(B-Ze,_e+un,B-jt,_e+ct,B,_e+ct),Va(B+jt,_e+ct,B+Ze,_e+un,B+Ze,_e),Hs(xt),this},_.__private__.circle=_.circle=function(B,_e,Ze,ct){if(isNaN(B)||isNaN(_e)||isNaN(Ze)||!Tr(ct))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,_e,Ze,Ze,ct)},_.setFont=function(B,_e,Ze){return Ze&&(_e=ue(_e,Ze)),it=fs(B,_e,{disableWarning:!1}),this};var Wu=_.__private__.getFont=_.getFont=function(){return wn[fs.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var B,_e,Ze={};for(B in Tn)if(Tn.hasOwnProperty(B))for(_e in Ze[B]=[],Tn[B])Tn[B].hasOwnProperty(_e)&&Ze[B].push(_e);return Ze},_.addFont=function(B,_e,Ze,ct,xt){var jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&jt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&jt.indexOf(arguments[3])==-1&&(Ze=ue(Ze,ct)),xt=xt||"Identity-H",Us.call(this,B,_e,Ze,xt)};var Al,Yl=e.lineWidth||.200025,sl=_.__private__.getLineWidth=_.getLineWidth=function(){return Yl},kl=_.__private__.setLineWidth=_.setLineWidth=function(B){return Yl=B,pe(Le(I(B))+" w"),this};_.__private__.setLineDash=Ar.API.setLineDash=Ar.API.setLineDashPattern=function(B,_e){if(B=B||[],_e=_e||0,isNaN(_e)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ze){return Le(I(Ze))}).join(" "),_e=Le(I(_e)),pe("["+B+"] "+_e+" d"),this};var Jl=_.__private__.getLineHeight=_.getLineHeight=function(){return He*Al};_.__private__.getLineHeight=_.getLineHeight=function(){return He*Al};var Jr=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Al=B),this},to=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return Al};Jr(e.lineHeight);var or=_.__private__.getHorizontalCoordinate=function(B){return I(B)},no=_.__private__.getVerticalCoordinate=function(B){return K===$.ADVANCED?B:Ge[ee].mediaBox.topRightY-Ge[ee].mediaBox.bottomLeftY-I(B)},al=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(B){return Le(or(B))},_a=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(B){return Le(no(B))},$i=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return Er($i)},_.__private__.setStrokeColor=_.setDrawColor=function(B,_e,Ze,ct){return $i=lr({ch1:B,ch2:_e,ch3:Ze,ch4:ct,pdfColorType:"draw",precision:2}),pe($i),this};var Xl=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return Er(Xl)},_.__private__.setFillColor=_.setFillColor=function(B,_e,Ze,ct){return Xl=lr({ch1:B,ch2:_e,ch3:Ze,ch4:ct,pdfColorType:"fill",precision:2}),pe(Xl),this};var ta=e.textColor||"0 g",Tl=_.__private__.getTextColor=_.getTextColor=function(){return Er(ta)};_.__private__.setTextColor=_.setTextColor=function(B,_e,Ze,ct){return ta=lr({ch1:B,ch2:_e,ch3:Ze,ch4:ct,pdfColorType:"text",precision:3}),this};var Nl=e.charSpace,Os=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Nl||0)};_.__private__.setCharSpace=_.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Nl=B,this};var Dl=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(B){var _e=_.CapJoinStyles[B];if(_e===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=_e,pe(_e+" J"),this};var _i=0;_.__private__.setLineJoin=_.setLineJoin=function(B){var _e=_.CapJoinStyles[B];if(_e===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _i=_e,pe(_e+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(Le(I(B))+" M"),this},_.GState=b0,_.setGState=function(B){(B=typeof B=="string"?En[cr[B]]:Zu(null,B)).equals(yr)||(pe("/"+B.id+" gs"),yr=B)};var Zu=function(B,_e){if(!B||!cr[B]){var Ze=!1;for(var ct in En)if(En.hasOwnProperty(ct)&&En[ct].equals(_e)){Ze=!0;break}if(Ze)_e=En[ct];else{var xt="GS"+(Object.keys(En).length+1).toString(10);En[xt]=_e,_e.id=xt}return B&&(cr[B]=_e.id),Ot.publish("addGState",_e),_e}};_.addGState=function(B,_e){return Zu(B,_e),this},_.saveGraphicsState=function(){return pe("q"),ar.push({key:it,size:He,color:ta}),this},_.restoreGraphicsState=function(){pe("Q");var B=ar.pop();return it=B.key,He=B.size,ta=B.color,yr=null,this},_.setCurrentTransformationMatrix=function(B){return pe(B.toString()+" cm"),this},_.comment=function(B){return pe("#"+B),this};var Mo=function(B,_e){var Ze=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function(jt){isNaN(jt)||(Ze=parseFloat(jt))}});var ct=_e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ct},set:function(jt){isNaN(jt)||(ct=parseFloat(jt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(jt){xt=jt.toString()}}),this},Gs=function(B,_e,Ze,ct){Mo.call(this,B,_e),this.type="rect";var xt=Ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(un){isNaN(un)||(xt=parseFloat(un))}});var jt=ct||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return jt},set:function(un){isNaN(un)||(jt=parseFloat(un))}}),this},Bl=function(){this.page=mt,this.currentPage=ee,this.pages=Pe.slice(0),this.pagesContext=Ge.slice(0),this.x=Vt,this.y=Qt,this.matrix=On,this.width=bi(ee),this.height=ba(ee),this.outputDestination=Z,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){mt=this.page,ee=this.currentPage,Ge=this.pagesContext,Pe=this.pages,Vt=this.x,Qt=this.y,On=this.matrix,Es(ee,this.width),ro(ee,this.height),Z=this.outputDestination};var qs=function(B,_e,Ze,ct,xt){Wt.push(new Bl),mt=ee=0,Pe=[],Vt=B,Qt=_e,On=xt,tn([Ze,ct])},ll=function(B){if(Zn[B])Wt.pop().restore();else{var _e=new Bl,Ze="Xo"+(Object.keys(tr).length+1).toString(10);_e.id=Ze,Zn[B]=Ze,tr[Ze]=_e,Ot.publish("addFormObject",_e),Wt.pop().restore()}};for(var ul in _.beginFormObject=function(B,_e,Ze,ct,xt){return qs(B,_e,Ze,ct,xt),this},_.endFormObject=function(B){return ll(B),this},_.doFormObject=function(B,_e){var Ze=tr[Zn[B]];return pe("q"),pe(_e.toString()+" cm"),pe("/"+Ze.id+" Do"),pe("Q"),this},_.getFormObject=function(B){var _e=tr[Zn[B]];return{x:_e.x,y:_e.y,width:_e.width,height:_e.height,matrix:_e.matrix}},_.save=function(B,_e){return B=B||"generated.pdf",(_e=_e||{}).returnPromise=_e.returnPromise||!1,_e.returnPromise===!1?(Gf(Lo(Qi()),B),typeof Gf.unload=="function"&&Dr.setTimeout&&setTimeout(Gf.unload,911),this):new Promise(function(Ze,ct){try{var xt=Gf(Lo(Qi()),B);typeof Gf.unload=="function"&&Dr.setTimeout&&setTimeout(Gf.unload,911),Ze(xt)}catch(jt){ct(jt.message)}})},Ar.API)Ar.API.hasOwnProperty(ul)&&(ul==="events"&&Ar.API.events.length?function(B,_e){var Ze,ct,xt;for(xt=_e.length-1;xt!==-1;xt--)Ze=_e[xt][0],ct=_e[xt][1],B.subscribe.apply(B,[Ze].concat(typeof ct=="function"?[ct]:ct))}(Ot,Ar.API.events):_[ul]=Ar.API[ul]);var bi=_.getPageWidth=function(B){return(Ge[B=B||ee].mediaBox.topRightX-Ge[B].mediaBox.bottomLeftX)/nt},Es=_.setPageWidth=function(B,_e){Ge[B].mediaBox.topRightX=_e*nt+Ge[B].mediaBox.bottomLeftX},ba=_.getPageHeight=function(B){return(Ge[B=B||ee].mediaBox.topRightY-Ge[B].mediaBox.bottomLeftY)/nt},ro=_.setPageHeight=function(B,_e){Ge[B].mediaBox.topRightY=_e*nt+Ge[B].mediaBox.bottomLeftY};return _.internal={pdfEscape:_n,getStyle:jo,getFont:Wu,getFontSize:ot,getCharSpace:Os,getTextColor:Tl,getLineHeight:Jl,getLineHeightFactor:to,getLineWidth:sl,write:ze,getHorizontalCoordinate:or,getVerticalCoordinate:no,getCoordinateString:al,getVerticalCoordinateString:_a,collections:{},newObject:mr,newAdditionalObject:xr,newObjectDeferred:at,newObjectDeferredBegin:Cn,getFilters:Hr,putStream:ir,events:Ot,scaleFactor:nt,pageSize:{getWidth:function(){return bi(ee)},setWidth:function(B){Es(ee,B)},getHeight:function(){return ba(ee)},setHeight:function(B){ro(ee,B)}},encryptionOptions:g,encryption:eo,getEncryptor:rl,output:Vs,getNumberOfPages:Pi,pages:Pe,out:pe,f2:Y,f3:F,getPageInfo:ya,getPageInfoByObjId:pr,getCurrentPageInfo:br,getPDFVersion:T,Point:Mo,Rectangle:Gs,Matrix:mn,hasHotfix:va},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return bi(ee)},set:function(B){Es(ee,B)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return ba(ee)},set:function(B){ro(ee,B)},enumerable:!0,configurable:!0}),Hn.call(_,Ke),it="F1",si(i,t),Ot.publish("initialized"),_}Fh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Fh.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fh.prototype.hexToBytes=function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(String.fromCharCode(parseInt(e.substr(t,2),16)));return n.join("")},Fh.prototype.processOwnerPassword=function(e,n){return L1(x1(n).substr(0,5),e)},Fh.prototype.encryptor=function(e,n){var t=x1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(r){return L1(t,r)}},b0.prototype.equals=function(e){var n,t="id,objectNumber,equals";if(!e||Ji(e)!==Ji(this))return!1;var r=0;for(n in this)if(!(t.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;r++}for(n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&r--;return r===0},Ar.API={events:[]},Ar.version="2.5.2";var ls=Ar.API,vy=1,lh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ah=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wr=function(e){return e.toFixed(2)},rf=function(e){return e.toFixed(5)};ls.__acroform__={};var Pl=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},Mb=function(e){return e*vy},ic=function(e){var n=new Mx,t=Yn.internal.getHeight(e)||0,r=Yn.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Wr(r)),Number(Wr(t))],n},fF=ls.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<n},hF=ls.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<n)},dF=ls.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},bs=ls.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dF(e,n-1)},ws=ls.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fF(e,n-1)},xs=ls.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return hF(e,n-1)},pF=ls.__acroform__.calculateCoordinates=function(e,n){var t=n.internal.getHorizontalCoordinate,r=n.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],f={};return f.lowerLeft_X=t(i)||0,f.lowerLeft_Y=r(s+u)||0,f.upperRight_X=t(i+o)||0,f.upperRight_Y=r(s)||0,[Number(Wr(f.lowerLeft_X)),Number(Wr(f.lowerLeft_Y)),Number(Wr(f.upperRight_X)),Number(Wr(f.upperRight_Y))]},gF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],t=e._V||e.DV,r=S1(e,t),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+i+" "+Wr(r.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC");var s=ic(e);return s.scope=e.scope,s.stream=n.join(`
`),s}},S1=function(e,n){var t=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");i=e.multiline?i.map(function(F){return F.split(`
`)}):i.map(function(F){return[F]});var s=t,o=Yn.internal.getHeight(e)||0;o=o<0?-o:o;var u=Yn.internal.getWidth(e)||0;u=u<0?-u:u;var f=function(F,I,j){if(F+1<i.length){var H=I+" "+i[F+1][0];return _g(H,e,j).width<=u-4}return!1};s++;e:for(;s>0;){n="",s--;var d,g,y=_g("3",e,s).height,x=e.multiline?o-s:(o-y)/2,_=x+=2,E=0,T=0,D=0;if(s<=0){n=`(...) Tj
`,n+="% Width of Text: "+_g(n,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var O="",$=0,K=0;K<i.length;K++)if(i.hasOwnProperty(K)){var X=!1;if(i[K].length!==1&&D!==i[K].length-1){if((y+2)*($+2)+2>o)continue e;O+=i[K][D],X=!0,T=K,K--}else{O=(O+=i[K][D]+" ").substr(O.length-1)==" "?O.substr(0,O.length-1):O;var ae=parseInt(K),ue=f(ae,O,s),Le=K>=i.length-1;if(ue&&!Le){O+=" ",D=0;continue}if(ue||Le){if(Le)T=ae;else if(e.multiline&&(y+2)*($+2)+2>o)continue e}else{if(!e.multiline||(y+2)*($+2)+2>o)continue e;T=ae}}for(var W="",V=E;V<=T;V++){var Y=i[V];if(e.multiline){if(V===T){W+=Y[D]+" ",D=(D+1)%Y.length;continue}if(V===E){W+=Y[Y.length-1]+" ";continue}}W+=Y[0]+" "}switch(W=W.substr(W.length-1)==" "?W.substr(0,W.length-1):W,g=_g(W,e,s).width,e.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;case"left":default:d=2}n+=Wr(d)+" "+Wr(_)+` Td
`,n+="("+lh(W)+`) Tj
`,n+=-Wr(d)+` 0 Td
`,_=-(s+2),g=0,E=X?T:T+1,$++,O=""}break}return r.text=n,r.fontSize=s,r},_g=function(e,n,t){var r=n.scope.internal.getFont(n.fontName,n.fontStyle),i=n.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:n.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},mF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vF=function(e,n){var t={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(t)},yF=function(e,n){for(var t in e)if(e.hasOwnProperty(t)){var r=t,i=e[t];n.internal.newObjectDeferredBegin(i.objId,!0),Ji(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},_F=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Gu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(mF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Ax,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&vF(s,t)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],f=[],d=u.Rect;if(u.Rect&&(u.Rect=pF(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Yn.createDefaultAppearanceStream(u),Ji(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=gF(u);f.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var y="";for(var x in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(x)){var _=u.appearanceStreamContent[x];if(y+="/"+x+" ",y+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var o in _)if(_.hasOwnProperty(o)){var E=_[o];typeof E=="function"&&(E=E.call(i,u)),y+="/"+o+" "+E+" ",i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E)}}else typeof(E=_)=="function"&&(E=E.call(i,u)),y+="/"+o+" "+E,i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:u.objId}),i.internal.out("endobj")}s&&yF(i.internal.acroformPlugin.xForms,i)})(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},Px=ls.__acroform__.arrayToPdfArray=function(e,n,t){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Ji(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(n!==void 0&&t&&(r=t.internal.getEncryptor(n)),i+="("+lh(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hv=function(e,n,t){var r=function(i){return i};return n!==void 0&&t&&(r=t.internal.getEncryptor(n)),(e=e||"").toString(),e="("+lh(r(e))+")"},fc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fc.prototype.toString=function(){return this.objId+" 0 R"},fc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fc.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in n)if(Object.getOwnPropertyDescriptor(this,n[t]).configurable===!1){var r=n[t],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:Px(i,this.objId,this.scope)}):i instanceof fc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Mx=function(){fc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Pl(Mx,fc);var Ax=function(){fc.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+lh(t(e))+")"}},set:function(t){e=t}})};Pl(Ax,fc);var Gu=function e(){fc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute F supplied.');n=O}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bs(n,3)},set:function(O){O?this.F=ws(n,3):this.F=xs(n,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute Ff supplied.');t=O}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(O){r=O!==void 0?O:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(O){r[0]=O}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(O){r[1]=O}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(O){r[2]=O}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(O){r[3]=O}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(O){switch(O){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=O;break;default:throw new Error('Invalid value "'+O+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof w0)return;s="FieldObject"+e.FieldNum++}var O=function($){return $};return this.scope&&(O=this.scope.internal.getEncryptor(this.objId)),"("+lh(O(s))+")"},set:function(O){s=O.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(O){s=O}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(O){o=O}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(O){u=O}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(O){f=O}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/vy:d},set:function(O){d=O}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(O){g=O}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof w0||this instanceof th))return hv(y,this.objId,this.scope)},set:function(O){O=O.toString(),y=O}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Qs?x:hv(x,this.objId,this.scope)},set:function(O){O=O.toString(),x=this instanceof Qs?O:O.substr(0,1)==="("?Ah(O.substr(1,O.length-2)):Ah(O)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Ah(x.substr(1,x.length-1)):x},set:function(O){O=O.toString(),x=this instanceof Qs?"/"+O:O}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(O){this.V=O}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Qs?_:hv(_,this.objId,this.scope)},set:function(O){O=O.toString(),_=this instanceof Qs?O:O.substr(0,1)==="("?Ah(O.substr(1,O.length-2)):Ah(O)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Ah(_.substr(1,_.length-1)):_},set:function(O){O=O.toString(),_=this instanceof Qs?"/"+O:O}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(O){O=!!O,T=O}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(O){E=O}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,1)},set:function(O){O?this.Ff=ws(this.Ff,1):this.Ff=xs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,2)},set:function(O){O?this.Ff=ws(this.Ff,2):this.Ff=xs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,3)},set:function(O){O?this.Ff=ws(this.Ff,3):this.Ff=xs(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(O){if([0,1,2].indexOf(O)===-1)throw new Error('Invalid value "'+O+'" for attribute Q supplied.');D=O}}),Object.defineProperty(this,"textAlign",{get:function(){var O;switch(D){case 0:default:O="left";break;case 1:O="center";break;case 2:O="right"}return O},configurable:!0,enumerable:!0,set:function(O){switch(O){case"right":case 2:D=2;break;case"center":case 1:D=1;break;case"left":case 0:default:D=0}}})};Pl(Gu,fc);var Yh=function(){Gu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Px(n,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,u){u||(u=1);for(var f,d=[];f=o.exec(s);)d.push(f[u]);return d}(r,/\((.*?)\)/g)),n=i}}),this.getOptions=function(){return n},this.setOptions=function(t){n=t,this.sort&&n.sort()},this.addOption=function(t){t=(t=t||"").toString(),n.push(t),this.sort&&n.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();n.indexOf(t)!==-1&&(n.splice(n.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,18)},set:function(t){t?this.Ff=ws(this.Ff,18):this.Ff=xs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ws(this.Ff,19):this.Ff=xs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,20)},set:function(t){t?(this.Ff=ws(this.Ff,20),n.sort()):this.Ff=xs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,22)},set:function(t){t?this.Ff=ws(this.Ff,22):this.Ff=xs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(t){t?this.Ff=ws(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,27)},set:function(t){t?this.Ff=ws(this.Ff,27):this.Ff=xs(this.Ff,27)}}),this.hasAppearanceStream=!1};Pl(Yh,Gu);var Jh=function(){Yh.call(this),this.fontName="helvetica",this.combo=!1};Pl(Jh,Yh);var Xh=function(){Jh.call(this),this.combo=!0};Pl(Xh,Jh);var zg=function(){Xh.call(this),this.edit=!0};Pl(zg,Xh);var Qs=function(){Gu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,15)},set:function(t){t?this.Ff=ws(this.Ff,15):this.Ff=xs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,16)},set:function(t){t?this.Ff=ws(this.Ff,16):this.Ff=xs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,17)},set:function(t){t?this.Ff=ws(this.Ff,17):this.Ff=xs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(t){t?this.Ff=ws(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var r,i=[];for(r in i.push("<<"),n)i.push("/"+r+" ("+lh(t(n[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Ji(t)==="object"&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(t){typeof t=="string"&&(n.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Pl(Qs,Gu);var $g=function(){Qs.call(this),this.pushButton=!0};Pl($g,Qs);var Qh=function(){Qs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Pl(Qh,Qs);var w0=function(){var e,n;Gu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(i){n=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+lh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ji(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pl(w0,Gu),Qh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var t=this.Kids[n];t.appearanceStreamContent=e.createAppearanceStream(t.optionName),t.caption=e.getCA()}},Qh.prototype.createOption=function(e){var n=new w0;return n.Parent=this,n.optionName=e,this.Kids.push(n),bF.call(this.scope,n),n};var Ug=function(){Qs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yn.CheckBox.createAppearanceStream()};Pl(Ug,Qs);var th=function(){Gu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,13)},set:function(n){n?this.Ff=ws(this.Ff,13):this.Ff=xs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,21)},set:function(n){n?this.Ff=ws(this.Ff,21):this.Ff=xs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(n){n?this.Ff=ws(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,24)},set:function(n){n?this.Ff=ws(this.Ff,24):this.Ff=xs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,25)},set:function(n){n?this.Ff=ws(this.Ff,25):this.Ff=xs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(n){n?this.Ff=ws(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pl(th,Gu);var Vg=function(){th.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,14)},set:function(e){e?this.Ff=ws(this.Ff,14):this.Ff=xs(this.Ff,14)}}),this.password=!0};Pl(Vg,th);var Yn={CheckBox:{createAppearanceStream:function(){return{N:{On:Yn.CheckBox.YesNormal},D:{On:Yn.CheckBox.YesPushDown,Off:Yn.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=S1(e,e.caption);return t.push("0.749023 g"),t.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Wr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),n.stream=t.join(`
`),n},YesNormal:function(e){var n=ic(e);n.scope=e.scope;var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Yn.internal.getHeight(e),o=Yn.internal.getWidth(e),u=S1(e,e.caption);return i.push("1 g"),i.push("0 0 "+Wr(o)+" "+Wr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Wr(o-1)+" "+Wr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Wr(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:Yn.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=Yn.RadioButton.Circle.YesNormal,n.D[e]=Yn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Yn.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+rf(Yn.internal.getWidth(e)/2)+" "+rf(Yn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Yn.internal.Bezier_C).toFixed(5)),o=Number((r*Yn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+rf(Yn.internal.getWidth(e)/2)+" "+rf(Yn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+rf(Yn.internal.getWidth(e)/2)+" "+rf(Yn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},OffPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Yn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+rf(Yn.internal.getWidth(e)/2)+" "+rf(Yn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:Yn.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=Yn.RadioButton.Cross.YesNormal,n.D[e]=Yn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Yn.internal.calculateCross(e);return t.push("q"),t.push("1 1 "+Wr(Yn.internal.getWidth(e)-2)+" "+Wr(Yn.internal.getHeight(e)-2)+" re"),t.push("W"),t.push("n"),t.push(Wr(r.x1.x)+" "+Wr(r.x1.y)+" m"),t.push(Wr(r.x2.x)+" "+Wr(r.x2.y)+" l"),t.push(Wr(r.x4.x)+" "+Wr(r.x4.y)+" m"),t.push(Wr(r.x3.x)+" "+Wr(r.x3.y)+" l"),t.push("s"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=Yn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Wr(Yn.internal.getWidth(e)-2)+" "+Wr(Yn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Wr(t.x1.x)+" "+Wr(t.x1.y)+" m"),r.push(Wr(t.x2.x)+" "+Wr(t.x2.y)+" l"),r.push(Wr(t.x4.x)+" "+Wr(t.x4.y)+" m"),r.push(Wr(t.x3.x)+" "+Wr(t.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,t=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+t}};Yn.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=Yn.internal.getWidth(e),t=Yn.internal.getHeight(e),r=Math.min(n,t);return{x1:{x:(n-r)/2,y:(t-r)/2+r},x2:{x:(n-r)/2+r,y:(t-r)/2},x3:{x:(n-r)/2,y:(t-r)/2},x4:{x:(n-r)/2+r,y:(t-r)/2+r}}}},Yn.internal.getWidth=function(e){var n=0;return Ji(e)==="object"&&(n=Mb(e.Rect[2])),n},Yn.internal.getHeight=function(e){var n=0;return Ji(e)==="object"&&(n=Mb(e.Rect[3])),n};var bF=ls.addField=function(e){if(_F(this,e),!(e instanceof Gu))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ls.AcroFormChoiceField=Yh,ls.AcroFormListBox=Jh,ls.AcroFormComboBox=Xh,ls.AcroFormEditBox=zg,ls.AcroFormButton=Qs,ls.AcroFormPushButton=$g,ls.AcroFormRadioButton=Qh,ls.AcroFormCheckBox=Ug,ls.AcroFormTextField=th,ls.AcroFormPasswordField=Vg,ls.AcroFormAppearance=Yn,ls.AcroForm={ChoiceField:Yh,ListBox:Jh,ComboBox:Xh,EditBox:zg,Button:Qs,PushButton:$g,RadioButton:Qh,CheckBox:Ug,TextField:th,PasswordField:Vg,Appearance:Yn},Ar.AcroForm={ChoiceField:Yh,ListBox:Jh,ComboBox:Xh,EditBox:zg,Button:Qs,PushButton:$g,RadioButton:Qh,CheckBox:Ug,TextField:th,PasswordField:Vg,Appearance:Yn};Ar.AcroForm;function kx(e){return e.reduce(function(n,t,r){return n[t]=r,n},{})}(function(e){e.__addimage__={};var n="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(F,I){var j,H,U,R,te,re=n;if((I=I||n)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(ue(F))for(te in t)for(U=t[te],j=0;j<U.length;j+=1){for(R=!0,H=0;H<U[j].length;H+=1)if(U[j][H]!==void 0&&U[j][H]!==F[H]){R=!1;break}if(R===!0){re=te;break}}else for(te in t)for(U=t[te],j=0;j<U.length;j+=1){for(R=!0,H=0;H<U[j].length;H+=1)if(U[j][H]!==void 0&&U[j][H]!==F.charCodeAt(H)){R=!1;break}if(R===!0){re=te;break}}return re===n&&I!==n&&(re=I),re},i=function F(I){for(var j=this.internal.write,H=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var R=[];if(R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Image"}),R.push({key:"Width",value:I.width}),R.push({key:"Height",value:I.height}),I.colorSpace===D.INDEXED?R.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(R.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===D.DEVICE_CMYK&&R.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),R.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&R.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var te="",re=0,me=I.transparency.length;re<me;re++)te+=I.transparency[re]+" "+I.transparency[re]+" ";R.push({key:"Mask",value:"["+te+"]"})}I.sMask!==void 0&&R.push({key:"SMask",value:I.objectId+1+" 0 R"});var xe=I.filter!==void 0?["/"+I.filter]:void 0;if(H({data:I.data,additionalKeyValues:R,alreadyAppliedFilters:xe,objectId:I.objectId}),j("endobj"),"sMask"in I&&I.sMask!==void 0){var We="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,N={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:We,data:I.sMask};"filter"in I&&(N.filter=I.filter),F.call(this,N)}if(I.colorSpace===D.INDEXED){var ee=this.internal.newObject();H({data:W(new Uint8Array(I.palette)),objectId:ee}),j("endobj")}},s=function(){var F=this.internal.collections.addImage_images;for(var I in F)i.call(this,F[I])},o=function(){var F,I=this.internal.collections.addImage_images,j=this.internal.write;for(var H in I)j("/I"+(F=I[H]).index,F.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},f=function(){var F=this.internal.collections.addImage_images;return u.call(this),F},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(F){return typeof e["process"+F.toUpperCase()]=="function"},y=function(F){return Ji(F)==="object"&&F.nodeType===1},x=function(F,I){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var j=""+F.getAttribute("src");if(j.indexOf("data:image/")===0)return rp(unescape(j).split("base64,").pop());var H=e.loadFile(j,!0);if(H!==void 0)return H}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var U;switch(I){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return rp(F.toDataURL(U,1).split("base64,").pop())}},_=function(F){var I=this.internal.collections.addImage_images;if(I){for(var j in I)if(F===I[j].alias)return I[j]}},E=function(F,I,j){return F||I||(F=-96,I=-96),F<0&&(F=-1*j.width*72/F/this.internal.scaleFactor),I<0&&(I=-1*j.height*72/I/this.internal.scaleFactor),F===0&&(F=I*j.width/j.height),I===0&&(I=F*j.height/j.width),[F,I]},T=function(F,I,j,H,U,R){var te=E.call(this,j,H,U),re=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,xe=f.call(this);if(j=te[0],H=te[1],xe[U.index]=U,R){R*=Math.PI/180;var We=Math.cos(R),N=Math.sin(R),ee=function(ce){return ce.toFixed(4)},fe=[ee(We),ee(N),ee(-1*N),ee(We),0,0,"cm"]}this.internal.write("q"),R?(this.internal.write([1,"0","0",1,re(F),me(I+H),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([re(j),"0","0",re(H),"0","0","cm"].join(" "))):this.internal.write([re(j),"0","0",re(H),re(F),me(I+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},D=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=e.__addimage__.sHashCode=function(F){var I,j,H=0;if(typeof F=="string")for(j=F.length,I=0;I<j;I++)H=(H<<5)-H+F.charCodeAt(I),H|=0;else if(ue(F))for(j=F.byteLength/2,I=0;I<j;I++)H=(H<<5)-H+F[I],H|=0;return H},K=e.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var I=!0;return F.length===0&&(I=!1),F.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(I=!1),I},X=e.__addimage__.extractImageFromDataUrl=function(F){var I=(F=F||"").split("base64,"),j=null;if(I.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(H)&&(j={mimeType:H[1],charset:H[2],data:I[1]})}return j},ae=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(F){return ae()&&F instanceof ArrayBuffer};var ue=e.__addimage__.isArrayBufferView=function(F){return ae()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},Le=e.__addimage__.binaryStringToUint8Array=function(F){for(var I=F.length,j=new Uint8Array(I),H=0;H<I;H++)j[H]=F.charCodeAt(H);return j},W=e.__addimage__.arrayBufferToBinaryString=function(F){for(var I="",j=ue(F)?F:new Uint8Array(F),H=0;H<j.length;H+=8192)I+=String.fromCharCode.apply(null,j.subarray(H,H+8192));return I};e.addImage=function(){var F,I,j,H,U,R,te,re,me;if(typeof arguments[1]=="number"?(I=n,j=arguments[1],H=arguments[2],U=arguments[3],R=arguments[4],te=arguments[5],re=arguments[6],me=arguments[7]):(I=arguments[1],j=arguments[2],H=arguments[3],U=arguments[4],R=arguments[5],te=arguments[6],re=arguments[7],me=arguments[8]),Ji(F=arguments[0])==="object"&&!y(F)&&"imageData"in F){var xe=F;F=xe.imageData,I=xe.format||I||n,j=xe.x||j||0,H=xe.y||H||0,U=xe.w||xe.width||U,R=xe.h||xe.height||R,te=xe.alias||te,re=xe.compression||re,me=xe.rotation||xe.angle||me}var We=this.internal.getFilters();if(re===void 0&&We.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(j)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var N=V.call(this,F,I,te,re);return T.call(this,j,H,U,R,N,me),this};var V=function(F,I,j,H){var U,R,te;if(typeof F=="string"&&r(F)===n){F=unescape(F);var re=Y(F,!1);(re!==""||(re=e.loadFile(F,!0))!==void 0)&&(F=re)}if(y(F)&&(F=x(F,I)),I=r(F,I),!g(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((te=j)==null||te.length===0)&&(j=function(me){return typeof me=="string"||ue(me)?$(me):ue(me.data)?$(me.data):null}(F)),(U=_.call(this,j))||(ae()&&(F instanceof Uint8Array||I==="RGBA"||(R=F,F=Le(F))),U=this["process"+I.toUpperCase()](F,d.call(this),j,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in e.image_compression?me:O.NONE}(H),R)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},Y=e.__addimage__.convertBase64ToBinaryString=function(F,I){var j;I=typeof I!="boolean"||I;var H,U="";if(typeof F=="string"){H=(j=X(F))!==null?j.data:F;try{U=rp(H)}catch(R){if(I)throw K(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+R.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(F){var I,j,H="";if(y(F)&&(F=x(F)),typeof F=="string"&&r(F)===n&&((H=Y(F,!1))===""&&(H=e.loadFile(F)||""),F=H),j=r(F),!g(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!ae()||F instanceof Uint8Array||(F=Le(F)),!(I=this["process"+j.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=j,I}})(Ar.API),function(e){var n=function(t){if(t!==void 0&&t!="")return!0};Ar.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,y=0;y<d.length&&!g;y++)switch((r=d[y]).type){case"link":(n(r.options.url)||n(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){r=d[x];var _=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),O=this.internal.getEncryptor(T.objId),$=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+_(O(r.contents))+")",s+=" /Popup "+D.objId+" 0 R",s+=" /P "+f.objId+" 0 R",s+=" /T ("+_(O($))+") >>",T.content=s;var K=T.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+K,r.open&&(s+=" /Open true"),s+=" >>",D.content=s,this.internal.write(T.objId,"0 R",D.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var X=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(E(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+X+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(E(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ue=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ue+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},e.link=function(t,r,i,s,o){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:d(r),w:f(t+i),h:d(r+s)},options:o,type:"link"})},e.textWithLink=function(t,r,i,s){var o,u,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var g=this.splitTextToSize(t,u).length;o=Math.ceil(d*g)}else u=f,o=d;return this.text(t,r,i,s),i+=.2*d,s.align==="center"&&(r-=f/2),s.align==="right"&&(r-=f),this.link(r,i-d,u,o,s),f},e.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Ar.API),function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(T){return n[T.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},u=e.__arabicParser__.isArabicEndLetter=function(T){return o(T)&&s(T)&&n[T.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(T){return o(T)&&i.indexOf(T.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return o(T)&&s(T)&&n[T.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(T){return o(T)&&s(T)&&n[T.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(T){return o(T)&&s(T)&&n[T.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(T){return o(T)&&s(T)&&n[T.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(T){var D=0,O=t,$="",K=0;for(D=0;D<T.length;D+=1)O[T.charCodeAt(D)]!==void 0?(K++,typeof(O=O[T.charCodeAt(D)])=="number"&&($+=String.fromCharCode(O),O=t,K=0),D===T.length-1&&(O=t,$+=T.charAt(D-(K-1)),D-=K-1,K=0)):(O=t,$+=T.charAt(D-K),D-=K,K=0);return $};e.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&r[T.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(T,D,O){return o(T)?s(T)===!1?-1:!d(T)||!o(D)&&!o(O)||!o(O)&&u(D)||u(T)&&!o(D)||u(T)&&f(D)||u(T)&&u(D)?0:g(T)&&o(D)&&!u(D)&&o(O)&&d(O)?3:u(T)||!o(O)?1:2:-1},_=function(T){var D=0,O=0,$=0,K="",X="",ae="",ue=(T=T||"").split("\\s+"),Le=[];for(D=0;D<ue.length;D+=1){for(Le.push(""),O=0;O<ue[D].length;O+=1)K=ue[D][O],X=ue[D][O-1],ae=ue[D][O+1],o(K)?($=x(K,X,ae),Le[D]+=$!==-1?String.fromCharCode(n[K.charCodeAt(0)][$]):K):Le[D]+=K;Le[D]=y(Le[D])}return Le.join(" ")},E=e.__arabicParser__.processArabic=e.processArabic=function(){var T,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,O=[];if(Array.isArray(D)){var $=0;for(O=[],$=0;$<D.length;$+=1)Array.isArray(D[$])?O.push([_(D[$][0]),D[$][1],D[$][2]]):O.push([_(D[$])]);T=O}else T=_(D);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};e.events.push(["preProcessText",E])}(Ar.API),Ar.API.autoPrint=function(e){var n;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})}return this},function(e){var n=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(Ar.API),function(e){var n={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(T){f=T}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(T){d=T}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(T){g=T}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(T){y=T}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(T){_=T}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(T){E=T}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,_=0,E=0,T=0,D=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var O=d.maxWidth;O>0?typeof f=="string"?f=this.splitTextToSize(f,O):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(K,X){return K.concat(D.splitTextToSize(X,O))},[])):f=Array.isArray(f)?f:[f];for(var $=0;$<f.length;$++)_<(T=this.getStringUnitWidth(f[$],{font:y})*g)&&(_=T);return _!==0&&(E=f.length),{w:_/=x,h:Math.max((E*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new s(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var f;f=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||n,x=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,_&&x&&(this.printHeaderRow(f.lineNumber,!0),f.y+=x[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-g,f.y+g,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+g,{align:"center",baseline:"top",maxWidth:f.width-g-g}):this.text(f.text,f.x+g,f.y+g,{align:"left",baseline:"top",maxWidth:f.width-g-g})),this.internal.__cell__.lastCell=f,this};e.table=function(f,d,g,y,x){if(r.call(this),!g)throw new Error("No data for PDF table.");var _,E,T,D,O=[],$=[],K=[],X={},ae={},ue=[],Le=[],W=(x=x||{}).autoSize||!1,V=x.printHeaders!==!1,Y=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,F=x.margins||Object.assign({width:this.getPageWidth()},n),I=typeof x.padding=="number"?x.padding:3,j=x.headerBackgroundColor||"#c8c8c8",H=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=V,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=H,this.setFontSize(Y),y==null)$=O=Object.keys(g[0]),K=O.map(function(){return"left"});else if(Array.isArray(y)&&Ji(y[0])==="object")for(O=y.map(function(xe){return xe.name}),$=y.map(function(xe){return xe.prompt||xe.name||""}),K=y.map(function(xe){return xe.align||"left"}),_=0;_<y.length;_+=1)ae[y[_].name]=y[_].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&($=O=y,K=O.map(function(){return"left"}));if(W||Array.isArray(y)&&typeof y[0]=="string")for(_=0;_<O.length;_+=1){for(X[D=O[_]]=g.map(function(xe){return xe[D]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions($[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=X[D],this.setFont(void 0,"normal"),T=0;T<E.length;T+=1)ue.push(this.getTextDimensions(E[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[D]=Math.max.apply(null,ue)+I+I,ue=[]}if(V){var U={};for(_=0;_<O.length;_+=1)U[O[_]]={},U[O[_]].text=$[_],U[O[_]].align=K[_];var R=u.call(this,U,ae);Le=O.map(function(xe){return new s(f,d,ae[xe],R,U[xe].text,void 0,U[xe].align)}),this.setTableHeaderRow(Le),this.printHeaderRow(1,!1)}var te=y.reduce(function(xe,We){return xe[We.name]=We.align,xe},{});for(_=0;_<g.length;_+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:_,data:g[_]},this);var re=u.call(this,g[_],ae);for(T=0;T<O.length;T+=1){var me=g[_][O[T]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:_,col:T,data:me},this),o.call(this,new s(f,d,ae[O[T]],re,me,_+2,te[O[T]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(f).map(function(_){var E=f[_];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,d[_]-g-g)},this).map(function(_){return this.getLineHeightFactor()*_.length*y/x+g+g},this).reduce(function(_,E){return Math.max(_,E)},0)};e.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){g=this.internal.__cell__.tableHeaderRow[_].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,x.push(g)),g.lineNumber=f;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,g),this.setTextColor(E)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}}(Ar.API);var Tx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],C1=kx(Nx),Dx=[100,200,300,400,500,600,700,800,900],wF=kx(Dx);function E1(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Tx[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof C1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:n,style:t,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:n,style:[i,t,r].join(" ")}}}function Ab(e,n,t,r){var i;for(i=t;i>=0&&i<n.length;i+=r)if(e[n[i]])return e[n[i]];for(i=t;i>=0&&i<n.length;i-=r)if(e[n[i]])return e[n[i]]}var xF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function LF(e,n,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},xF,t.genericFontFamilies||{}),s=null,o=null,u=0;u<n.length;++u)if(i[(s=E1(n[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Tb(s)+"' and default family '"+r+"'.");if(o=function(f,d){if(d[f])return d[f];var g=C1[f],y=g<=C1.normal?-1:1,x=Ab(d,Nx,g,y);if(!x)throw new Error("Could not find a matching font-stretch value for "+f);return x}(s.stretch,o),o=function(f,d){if(d[f])return d[f];for(var g=Tx[f],y=0;y<g.length;++y)if(d[g[y]])return d[g[y]];throw new Error("Could not find a matching font-style for "+f)}(s.style,o),!(o=function(f,d){if(d[f])return d[f];if(f===400&&d[500])return d[500];if(f===500&&d[400])return d[400];var g=wF[f],y=Ab(d,Dx,g,f<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+f);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Tb(s)+"'.");return o}function Nb(e){return e.trimLeft()}function SF(e,n){for(var t=0;t<e.length;){if(e.charAt(t)===n)return[e.substring(0,t),e.substring(t+1)];t+=1}return null}function CF(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var bg,Db,Bb,dv=["times"];(function(e){var n,t,r,i,s,o,u,f,d,g=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new f,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new o,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new o,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),n=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new g}]);var y=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=N;Object.defineProperty(this,"pdf",{get:function(){return ee}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(ve){fe=!!ve}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(ve){ce=!!ve}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(ve){isNaN(ve)||(ye=ve)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(ve){isNaN(ve)||(se=ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ve){var pe;typeof ve=="number"?pe=[ve,ve,ve,ve]:((pe=new Array(4))[0]=ve[0],pe[1]=ve.length>=2?ve[1]:pe[0],pe[2]=ve.length>=3?ve[2]:pe[0],pe[3]=ve.length>=4?ve[3]:pe[1]),d.margin=pe}});var k=!1;Object.defineProperty(this,"autoPaging",{get:function(){return k},set:function(ve){k=ve}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(ve){le=ve}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(ve){ke=ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ve){ve instanceof g&&(d=ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ve){d.path=ve}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(ve){Pe=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var pe;pe=x(ve),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var pe=x(ve);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Ve=null;function Z(ve,pe){if(Ve===null){var ze=function(Qe){var Ke=[];return Object.keys(Qe).forEach(function(He){Qe[He].forEach(function(Xe){var ot=null;switch(Xe){case"bold":ot={family:He,weight:"bold"};break;case"italic":ot={family:He,style:"italic"};break;case"bolditalic":ot={family:He,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:He}}ot!==null&&(ot.ref={name:He,style:Xe},Ke.push(ot))})}),Ke}(ve.getFontList());Ve=function(Qe){for(var Ke={},He=0;He<Qe.length;++He){var Xe=E1(Qe[He]),ot=Xe.family,kt=Xe.stretch,Ct=Xe.style,Ut=Xe.weight;Ke[ot]=Ke[ot]||{},Ke[ot][kt]=Ke[ot][kt]||{},Ke[ot][kt][Ct]=Ke[ot][kt][Ct]||{},Ke[ot][kt][Ct][Ut]=Xe}return Ke}(ze.concat(pe))}return Ve}var de=null;Object.defineProperty(this,"fontFaces",{get:function(){return de},set:function(ve){Ve=null,de=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var pe;if(this.ctx.font=ve,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var ze=pe[1],Qe=(pe[2],pe[3]),Ke=pe[4],He=(pe[5],pe[6]),Xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ke)[2];Ke=Math.floor(Xe==="px"?parseFloat(Ke)*this.pdf.internal.scaleFactor:Xe==="em"?parseFloat(Ke)*this.pdf.getFontSize():parseFloat(Ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ke);var ot=function(et){var it,nt,Vt=[],Qt=et.trim();if(Qt==="")return dv;if(Qt in kb)return[kb[Qt]];for(;Qt!=="";){switch(nt=null,it=(Qt=Nb(Qt)).charAt(0)){case'"':case"'":nt=SF(Qt.substring(1),it);break;default:nt=CF(Qt)}if(nt===null||(Vt.push(nt[0]),(Qt=Nb(nt[1]))!==""&&Qt.charAt(0)!==","))return dv;Qt=Qt.replace(/^,/,"")}return Vt}(He);if(this.fontFaces){var kt=LF(Z(this.pdf,this.fontFaces),ot.map(function(et){return{family:et,stretch:"normal",weight:Qe,style:ze}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Ct="";(Qe==="bold"||parseInt(Qe,10)>=700||ze==="bold")&&(Ct="bold"),ze==="italic"&&(Ct+="italic"),Ct.length===0&&(Ct="normal");for(var Ut="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},cn=0;cn<ot.length;cn++){if(this.pdf.internal.getFont(ot[cn],Ct,{noFallback:!0,disableWarning:!0})!==void 0){Ut=ot[cn];break}if(Ct==="bolditalic"&&this.pdf.internal.getFont(ot[cn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ut=ot[cn],Ct="bold";else if(this.pdf.internal.getFont(ot[cn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ut=ot[cn],Ct="normal";break}}if(Ut===""){for(var pn=0;pn<ot.length;pn++)if(Gt[ot[pn]]){Ut=Gt[ot[pn]];break}}Ut=Ut===""?"Times":Ut,this.pdf.setFont(Ut,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,We.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,We.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};y.prototype.setLineDash=function(N){this.lineDash=N},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){X.call(this,"fill",!1)},y.prototype.stroke=function(){X.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(N,ee){if(isNaN(N)||isNaN(ee))throw ao.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new o(N,ee));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(N,ee)},y.prototype.closePath=function(){var N=new o(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Ji(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){N=new o(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(N.x,N.y)},y.prototype.lineTo=function(N,ee){if(isNaN(N)||isNaN(ee))throw ao.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new o(N,ee));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),X.call(this,null,!0)},y.prototype.quadraticCurveTo=function(N,ee,fe,ce){if(isNaN(fe)||isNaN(ce)||isNaN(N)||isNaN(ee))throw ao.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new o(fe,ce)),se=this.ctx.transform.applyToPoint(new o(N,ee));this.path.push({type:"qct",x1:se.x,y1:se.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},y.prototype.bezierCurveTo=function(N,ee,fe,ce,ye,se){if(isNaN(ye)||isNaN(se)||isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce))throw ao.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var k=this.ctx.transform.applyToPoint(new o(ye,se)),le=this.ctx.transform.applyToPoint(new o(N,ee)),ke=this.ctx.transform.applyToPoint(new o(fe,ce));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:ke.x,y2:ke.y,x:k.x,y:k.y}),this.ctx.lastPoint=new o(k.x,k.y)},y.prototype.arc=function(N,ee,fe,ce,ye,se){if(isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce)||isNaN(ye))throw ao.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var k=this.ctx.transform.applyToPoint(new o(N,ee));N=k.x,ee=k.y;var le=this.ctx.transform.applyToPoint(new o(0,fe)),ke=this.ctx.transform.applyToPoint(new o(0,0));fe=Math.sqrt(Math.pow(le.x-ke.x,2)+Math.pow(le.y-ke.y,2))}Math.abs(ye-ce)>=2*Math.PI&&(ce=0,ye=2*Math.PI),this.path.push({type:"arc",x:N,y:ee,radius:fe,startAngle:ce,endAngle:ye,counterclockwise:se})},y.prototype.arcTo=function(N,ee,fe,ce,ye){throw new Error("arcTo not implemented.")},y.prototype.rect=function(N,ee,fe,ce){if(isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce))throw ao.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,ee),this.lineTo(N+fe,ee),this.lineTo(N+fe,ee+ce),this.lineTo(N,ee+ce),this.lineTo(N,ee),this.lineTo(N+fe,ee),this.lineTo(N,ee)},y.prototype.fillRect=function(N,ee,fe,ce){if(isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce))throw ao.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,ee,fe,ce),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},y.prototype.strokeRect=function(N,ee,fe,ce){if(isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce))throw ao.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(N,ee,fe,ce),this.stroke())},y.prototype.clearRect=function(N,ee,fe,ce){if(isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce))throw ao.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,ee,fe,ce))},y.prototype.save=function(N){N=typeof N!="boolean"||N;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},y.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(N){var ee,fe,ce,ye;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))ee=0,fe=0,ce=0,ye=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(se!==null)ee=parseInt(se[1]),fe=parseInt(se[2]),ce=parseInt(se[3]),ye=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)ee=parseInt(se[1]),fe=parseInt(se[2]),ce=parseInt(se[3]),ye=parseFloat(se[4]);else{if(ye=1,typeof N=="string"&&N.charAt(0)!=="#"){var k=new Sx(N);N=k.ok?k.toHex():"#000000"}N.length===4?(ee=N.substring(1,2),ee+=ee,fe=N.substring(2,3),fe+=fe,ce=N.substring(3,4),ce+=ce):(ee=N.substring(1,3),fe=N.substring(3,5),ce=N.substring(5,7)),ee=parseInt(ee,16),fe=parseInt(fe,16),ce=parseInt(ce,16)}}return{r:ee,g:fe,b:ce,a:ye,style:N}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(N,ee,fe,ce){if(isNaN(ee)||isNaN(fe)||typeof N!="string")throw ao.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!_.call(this)){var ye=re(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;I.call(this,{text:N,x:ee,y:fe,scale:se,angle:ye,align:this.textAlign,maxWidth:ce})}},y.prototype.strokeText=function(N,ee,fe,ce){if(isNaN(ee)||isNaN(fe)||typeof N!="string")throw ao.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){ce=isNaN(ce)?void 0:ce;var ye=re(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;I.call(this,{text:N,x:ee,y:fe,scale:se,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:ce})}},y.prototype.measureText=function(N){if(typeof N!="string")throw ao.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,fe=this.pdf.internal.scaleFactor,ce=ee.internal.getFontSize(),ye=ee.getStringUnitWidth(N)*ce/ee.internal.scaleFactor,se=function(k){var le=(k=k||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new se({width:ye*=Math.round(96*fe/72*1e4)/1e4})},y.prototype.scale=function(N,ee){if(isNaN(N)||isNaN(ee))throw ao.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new f(N,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},y.prototype.rotate=function(N){if(isNaN(N))throw ao.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new f(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},y.prototype.translate=function(N,ee){if(isNaN(N)||isNaN(ee))throw ao.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new f(1,0,0,1,N,ee);this.ctx.transform=this.ctx.transform.multiply(fe)},y.prototype.transform=function(N,ee,fe,ce,ye,se){if(isNaN(N)||isNaN(ee)||isNaN(fe)||isNaN(ce)||isNaN(ye)||isNaN(se))throw ao.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var k=new f(N,ee,fe,ce,ye,se);this.ctx.transform=this.ctx.transform.multiply(k)},y.prototype.setTransform=function(N,ee,fe,ce,ye,se){N=isNaN(N)?1:N,ee=isNaN(ee)?0:ee,fe=isNaN(fe)?0:fe,ce=isNaN(ce)?1:ce,ye=isNaN(ye)?0:ye,se=isNaN(se)?0:se,this.ctx.transform=new f(N,ee,fe,ce,ye,se)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(N,ee,fe,ce,ye,se,k,le,ke){var Pe=this.pdf.getImageProperties(N),Ve=1,Z=1,de=1,ve=1;ce!==void 0&&le!==void 0&&(de=le/ce,ve=ke/ye,Ve=Pe.width/ce*le/ce,Z=Pe.height/ye*ke/ye),se===void 0&&(se=ee,k=fe,ee=0,fe=0),ce!==void 0&&le===void 0&&(le=ce,ke=ye),ce===void 0&&le===void 0&&(le=Pe.width,ke=Pe.height);for(var pe,ze=this.ctx.transform.decompose(),Qe=re(ze.rotate.shx),Ke=new f,He=(Ke=(Ke=(Ke=Ke.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new u(se-ee*de,k-fe*ve,ce*Ve,ye*Z)),Xe=D.call(this,He),ot=[],kt=0;kt<Xe.length;kt+=1)ot.indexOf(Xe[kt])===-1&&ot.push(Xe[kt]);if(K(ot),this.autoPaging)for(var Ct=ot[0],Ut=ot[ot.length-1],Gt=Ct;Gt<Ut+1;Gt++){this.pdf.setPage(Gt);var cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pn=Gt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=Gt===1?0:et+(Gt-2)*it;if(this.ctx.clip_path.length!==0){var Vt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(pe,this.posX+this.margin[3],-nt+pn+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=Vt}var Qt=JSON.parse(JSON.stringify(He));Qt=$([Qt],this.posX+this.margin[3],-nt+pn+this.ctx.prevPageLastElemOffset)[0];var On=(Gt>Ct||Gt<Ut)&&T.call(this);On&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,it,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Qe),On&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",He.x,He.y,He.w,He.h,null,null,Qe)};var D=function(N,ee,fe){var ce=[];ee=ee||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":ce.push(Math.floor((N.y+ye)/fe)+1);break;case"arc":ce.push(Math.floor((N.y+ye-N.radius)/fe)+1),ce.push(Math.floor((N.y+ye+N.radius)/fe)+1);break;case"qct":var se=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);ce.push(Math.floor((se.y+ye)/fe)+1),ce.push(Math.floor((se.y+se.h+ye)/fe)+1);break;case"bct":var k=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);ce.push(Math.floor((k.y+ye)/fe)+1),ce.push(Math.floor((k.y+k.h+ye)/fe)+1);break;case"rect":ce.push(Math.floor((N.y+ye)/fe)+1),ce.push(Math.floor((N.y+N.h+ye)/fe)+1)}for(var le=0;le<ce.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<ce[le];)O.call(this);return ce},O=function(){var N=this.fillStyle,ee=this.strokeStyle,fe=this.font,ce=this.lineCap,ye=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=ee,this.font=fe,this.lineCap=ce,this.lineWidth=ye,this.lineJoin=se},$=function(N,ee,fe){for(var ce=0;ce<N.length;ce++)switch(N[ce].type){case"bct":N[ce].x2+=ee,N[ce].y2+=fe;case"qct":N[ce].x1+=ee,N[ce].y1+=fe;case"mt":case"lt":case"arc":default:N[ce].x+=ee,N[ce].y+=fe}return N},K=function(N){return N.sort(function(ee,fe){return ee-fe})},X=function(N,ee){for(var fe,ce,ye=this.fillStyle,se=this.strokeStyle,k=this.lineCap,le=this.lineWidth,ke=Math.abs(le*this.ctx.transform.scaleX),Pe=this.lineJoin,Ve=JSON.parse(JSON.stringify(this.path)),Z=JSON.parse(JSON.stringify(this.path)),de=[],ve=0;ve<Z.length;ve++)if(Z[ve].x!==void 0)for(var pe=D.call(this,Z[ve]),ze=0;ze<pe.length;ze+=1)de.indexOf(pe[ze])===-1&&de.push(pe[ze]);for(var Qe=0;Qe<de.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<de[Qe];)O.call(this);if(K(de),this.autoPaging)for(var Ke=de[0],He=de[de.length-1],Xe=Ke;Xe<He+1;Xe++){this.pdf.setPage(Xe),this.fillStyle=ye,this.strokeStyle=se,this.lineCap=k,this.lineWidth=ke,this.lineJoin=Pe;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Xe===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Xe===1?0:Ct+(Xe-2)*Ut;if(this.ctx.clip_path.length!==0){var cn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(fe,this.posX+this.margin[3],-Gt+kt+this.ctx.prevPageLastElemOffset),ae.call(this,N,!0),this.path=cn}if(ce=JSON.parse(JSON.stringify(Ve)),this.path=$(ce,this.posX+this.margin[3],-Gt+kt+this.ctx.prevPageLastElemOffset),ee===!1||Xe===0){var pn=(Xe>Ke||Xe<He)&&T.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Ut,null).clip().discardPath()),ae.call(this,N,ee),pn&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=ke,ae.call(this,N,ee),this.lineWidth=le;this.path=Ve},ae=function(N,ee){if((N!=="stroke"||ee||!E.call(this))&&(N==="stroke"||ee||!_.call(this))){for(var fe,ce,ye=[],se=this.path,k=0;k<se.length;k++){var le=se[k];switch(le.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:le,deltas:[],abs:[]});break;case"lt":var ke=ye.length;if(se[k-1]&&!isNaN(se[k-1].x)&&(fe=[le.x-se[k-1].x,le.y-se[k-1].y],ke>0)){for(;ke>=0;ke--)if(ye[ke-1].close!==!0&&ye[ke-1].begin!==!0){ye[ke-1].deltas.push(fe),ye[ke-1].abs.push(le);break}}break;case"bct":fe=[le.x1-se[k-1].x,le.y1-se[k-1].y,le.x2-se[k-1].x,le.y2-se[k-1].y,le.x-se[k-1].x,le.y-se[k-1].y],ye[ye.length-1].deltas.push(fe);break;case"qct":var Pe=se[k-1].x+2/3*(le.x1-se[k-1].x),Ve=se[k-1].y+2/3*(le.y1-se[k-1].y),Z=le.x+2/3*(le.x1-le.x),de=le.y+2/3*(le.y1-le.y),ve=le.x,pe=le.y;fe=[Pe-se[k-1].x,Ve-se[k-1].y,Z-se[k-1].x,de-se[k-1].y,ve-se[k-1].x,pe-se[k-1].y],ye[ye.length-1].deltas.push(fe);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(le)}}ce=ee?null:N==="stroke"?"stroke":"fill";for(var ze=!1,Qe=0;Qe<ye.length;Qe++)if(ye[Qe].arc)for(var Ke=ye[Qe].abs,He=0;He<Ke.length;He++){var Xe=Ke[He];Xe.type==="arc"?W.call(this,Xe.x,Xe.y,Xe.radius,Xe.startAngle,Xe.endAngle,Xe.counterclockwise,void 0,ee,!ze):j.call(this,Xe.x,Xe.y),ze=!0}else if(ye[Qe].close===!0)this.pdf.internal.out("h"),ze=!1;else if(ye[Qe].begin!==!0){var ot=ye[Qe].start.x,kt=ye[Qe].start.y;H.call(this,ye[Qe].deltas,ot,kt),ze=!0}ce&&V.call(this,ce),ee&&Y.call(this)}},ue=function(N){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-fe;case"top":return N+ee-fe;case"hanging":return N+ee-2*fe;case"middle":return N+ee/2-fe;case"ideographic":return N;case"alphabetic":default:return N}},Le=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(ee,fe){this.colorStops.push([ee,fe])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var W=function(N,ee,fe,ce,ye,se,k,le,ke){for(var Pe=R.call(this,fe,ce,ye,se),Ve=0;Ve<Pe.length;Ve++){var Z=Pe[Ve];Ve===0&&(ke?F.call(this,Z.x1+N,Z.y1+ee):j.call(this,Z.x1+N,Z.y1+ee)),U.call(this,N,ee,Z.x2,Z.y2,Z.x3,Z.y3,Z.x4,Z.y4)}le?Y.call(this):V.call(this,k)},V=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(N,ee){this.pdf.internal.out(t(N)+" "+r(ee)+" m")},I=function(N){var ee;switch(N.align){case"right":case"end":ee="right";break;case"center":ee="center";break;case"left":case"start":default:ee="left"}var fe=this.pdf.getTextDimensions(N.text),ce=ue.call(this,N.y),ye=Le.call(this,ce)-fe.h,se=this.ctx.transform.applyToPoint(new o(N.x,ce)),k=this.ctx.transform.decompose(),le=new f;le=(le=(le=le.multiply(k.translate)).multiply(k.skew)).multiply(k.scale);for(var ke,Pe,Ve,Z=this.ctx.transform.applyToRectangle(new u(N.x,ce,fe.w,fe.h)),de=le.applyToRectangle(new u(N.x,ye,fe.w,fe.h)),ve=D.call(this,de),pe=[],ze=0;ze<ve.length;ze+=1)pe.indexOf(ve[ze])===-1&&pe.push(ve[ze]);if(K(pe),this.autoPaging)for(var Qe=pe[0],Ke=pe[pe.length-1],He=Qe;He<Ke+1;He++){this.pdf.setPage(He);var Xe=He===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Ct=kt-this.margin[0],Ut=this.pdf.internal.pageSize.width-this.margin[1],Gt=Ut-this.margin[3],cn=He===1?0:ot+(He-2)*Ct;if(this.ctx.clip_path.length!==0){var pn=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(ke,this.posX+this.margin[3],-1*cn+Xe),ae.call(this,"fill",!0),this.path=pn}var et=$([JSON.parse(JSON.stringify(de))],this.posX+this.margin[3],-cn+Xe+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*N.scale),Ve=this.lineWidth,this.lineWidth=Ve*N.scale);var it=this.autoPaging!=="text";if(it||et.y+et.h<=kt){if(it||et.y>=Xe&&et.x<=Ut){var nt=it?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||Ut-et.x)[0],Vt=$([JSON.parse(JSON.stringify(Z))],this.posX+this.margin[3],-cn+Xe+this.ctx.prevPageLastElemOffset)[0],Qt=it&&(He>Qe||He<Ke)&&T.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Ct,null).clip().discardPath()),this.pdf.text(nt,Vt.x,Vt.y,{angle:N.angle,align:ee,renderingMode:N.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else et.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-et.y);N.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Ve)}else N.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*N.scale),Ve=this.lineWidth,this.lineWidth=Ve*N.scale),this.pdf.text(N.text,se.x+this.posX,se.y+this.posY,{angle:N.angle,align:ee,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Ve)},j=function(N,ee,fe,ce){fe=fe||0,ce=ce||0,this.pdf.internal.out(t(N+fe)+" "+r(ee+ce)+" l")},H=function(N,ee,fe){return this.pdf.lines(N,ee,fe,null,null)},U=function(N,ee,fe,ce,ye,se,k,le){this.pdf.internal.out([n(i(fe+N)),n(s(ce+ee)),n(i(ye+N)),n(s(se+ee)),n(i(k+N)),n(s(le+ee)),"c"].join(" "))},R=function(N,ee,fe,ce){for(var ye=2*Math.PI,se=Math.PI/2;ee>fe;)ee-=ye;var k=Math.abs(fe-ee);k<ye&&ce&&(k=ye-k);for(var le=[],ke=ce?-1:1,Pe=ee;k>1e-5;){var Ve=Pe+ke*Math.min(k,se);le.push(te.call(this,N,Pe,Ve)),k-=Math.abs(Ve-Pe),Pe=Ve}return le},te=function(N,ee,fe){var ce=(fe-ee)/2,ye=N*Math.cos(ce),se=N*Math.sin(ce),k=ye,le=-se,ke=k*k+le*le,Pe=ke+k*ye+le*se,Ve=4/3*(Math.sqrt(2*ke*Pe)-Pe)/(k*se-le*ye),Z=k-Ve*le,de=le+Ve*k,ve=Z,pe=-de,ze=ce+ee,Qe=Math.cos(ze),Ke=Math.sin(ze);return{x1:N*Math.cos(ee),y1:N*Math.sin(ee),x2:Z*Qe-de*Ke,y2:Z*Ke+de*Qe,x3:ve*Qe-pe*Ke,y3:ve*Ke+pe*Qe,x4:N*Math.cos(fe),y4:N*Math.sin(fe)}},re=function(N){return 180*N/Math.PI},me=function(N,ee,fe,ce,ye,se){var k=N+.5*(fe-N),le=ee+.5*(ce-ee),ke=ye+.5*(fe-ye),Pe=se+.5*(ce-se),Ve=Math.min(N,ye,k,ke),Z=Math.max(N,ye,k,ke),de=Math.min(ee,se,le,Pe),ve=Math.max(ee,se,le,Pe);return new u(Ve,de,Z-Ve,ve-de)},xe=function(N,ee,fe,ce,ye,se,k,le){var ke,Pe,Ve,Z,de,ve,pe,ze,Qe,Ke,He,Xe,ot,kt,Ct=fe-N,Ut=ce-ee,Gt=ye-fe,cn=se-ce,pn=k-ye,et=le-se;for(Pe=0;Pe<41;Pe++)Qe=(pe=(Ve=N+(ke=Pe/40)*Ct)+ke*((de=fe+ke*Gt)-Ve))+ke*(de+ke*(ye+ke*pn-de)-pe),Ke=(ze=(Z=ee+ke*Ut)+ke*((ve=ce+ke*cn)-Z))+ke*(ve+ke*(se+ke*et-ve)-ze),Pe==0?(He=Qe,Xe=Ke,ot=Qe,kt=Ke):(He=Math.min(He,Qe),Xe=Math.min(Xe,Ke),ot=Math.max(ot,Qe),kt=Math.max(kt,Ke));return new u(Math.round(He),Math.round(Xe),Math.round(ot-He),Math.round(kt-Xe))},We=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,ee,fe=(N=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:ee}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(Ar.API),function(e){var n=function(s){var o,u,f,d,g,y,x,_,E,T;for(u=[],f=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>f;f+=4)(g=(s.charCodeAt(f)<<24)+(s.charCodeAt(f+1)<<16)+(s.charCodeAt(f+2)<<8)+s.charCodeAt(f+3))!==0?(y=(g=((g=((g=((g=(g-(T=g%85))/85)-(E=g%85))/85)-(_=g%85))/85)-(x=g%85))/85)%85,u.push(y+33,x+33,_+33,E+33,T+33)):u.push(122);return function(D,O){for(var $=O;$>0;$--)D.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},t=function(s){var o,u,f,d,g,y=String,x="length",_=255,E="charCodeAt",T="slice",D="replace";for(s[T](-2),s=s[T](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),f=[],d=0,g=(s+=o="uuuuu"[T](s[x]%5||5))[x];g>d;d+=5)u=52200625*(s[E](d)-33)+614125*(s[E](d+1)-33)+7225*(s[E](d+2)-33)+85*(s[E](d+3)-33)+(s[E](d+4)-33),f.push(_&u>>24,_&u>>16,_&u>>8,_&u);return function(O,$){for(var K=$;K>0;K--)O.pop()}(f,o[x]),y.fromCharCode.apply(y,f)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",f=0;f<s.length;f+=2)u+=String.fromCharCode("0x"+(s[f]+s[f+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=b1(o)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var u=0,f=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=n(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(Ar.API),function(e){e.loadFile=function(n,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(f,d,g){var y=new XMLHttpRequest,x=0,_=function(E){var T=E.length,D=[],O=String.fromCharCode;for(x=0;x<T;x+=1)D.push(O(255&E.charCodeAt(x)));return D.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?g(_(this.responseText)):g(void 0)}),y.send(null),d&&y.status===200)return _(y.responseText)}(i,s,o)}catch{}return u}(n,t,r)},e.loadImageFile=e.loadFile}(Ar.API),function(e){function n(){return(Dr.html2canvas?Promise.resolve(Dr.html2canvas):Yf(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Dr.DOMPurify?Promise.resolve(Dr.DOMPurify):Yf(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=Ji(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var f=document.createElement(o);for(var d in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[d]=u.style[d];return f},s=function o(u){var f=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),f);return d=(d=d.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:o,dompurify:f})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function f(d,g){for(var y=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)g!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||y.appendChild(f(x,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(y.width=d.width,y.height=d.height,y.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(y.value=d.value),y.addEventListener("load",function(){y.scrollTop=d.scrollTop,y.scrollLeft=d.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var x=0;x<d.length;++x){var _=d[x],E=_.src.find(function(T){return T.format==="truetype"});E&&f.addFont(E.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,f.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(f){if(f in s.template.prop)return function(){this.prop[f]=o[f]};switch(f){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[f]=o[f]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var f=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(f):f})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(o=o||Ar.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,f,d){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,f,d){return this.setProgress(o?this.progress.val+o:null,u||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,u){var f=this;return this.thenCore(o,u,function(d,g){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return f.updateProgress(null,d),y}).then(d,g).then(function(y){return f.updateProgress(1),y})})},s.prototype.thenCore=function(o,u,f){f=f||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=f.call(d,o,u);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(f){u=u.thenCore(f)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ar.getPageSize=function(o,u,f){if(Ji(o)==="object"){var d=o;o=d.orientation,u=d.unit||u,f=d.format||f}u=u||"mm",f=f||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var _,E=0,T=0;if(x.hasOwnProperty(y))E=x[y][1]/g,T=x[y][0]/g;else try{E=f[1],T=f[0]}catch{throw new Error("Invalid format: "+f)}if(o==="p"||o==="portrait")o="p",T>E&&(_=T,T=E,E=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",E>T&&(_=T,T=E,E=_)}return{width:T,height:E,unit:u,k:g,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(E1):null;var f=new s(u);return u.worker?f:f.from(o).doCallback()}}(Ar.API),Ar.API.addJS=function(e){return Bb=e,this.internal.events.subscribe("postPutResources",function(){bg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(bg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Db=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Bb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){bg!==void 0&&Db!==void 0&&this.internal.out("/Names <</JavaScript "+bg+" 0 R>>")}),this},function(e){var n;e.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var y=t.internal.newObject();g.push(y);var x=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var _=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),n=t.internal.newObject(),t.internal.write("<< /Dests "+_+" 0 R"),t.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var f=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ar.API),function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(t,r,i,s,o,u){var f,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(y){for(var x,_=256*y.charCodeAt(4)+y.charCodeAt(5),E=y.length,T={width:0,height:0,numcomponents:1},D=4;D<E;D+=2){if(D+=_,n.indexOf(y.charCodeAt(D+1))!==-1){x=256*y.charCodeAt(D+5)+y.charCodeAt(D+6),T={width:256*y.charCodeAt(D+7)+y.charCodeAt(D+8),height:x,numcomponents:y.charCodeAt(D+9)};break}_=256*y.charCodeAt(D+2)+y.charCodeAt(D+3)}return T}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return g}}(Ar.API);var kh,wg,Ob,Ib,Rb,EF=function(){var e,n,t;function r(s){var o,u,f,d,g,y,x,_,E,T,D,O,$,K;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),E=(function(){var X,ae;for(ae=[],X=0;X<4;++X)ae.push(String.fromCharCode(this.data[this.pos++]));return ae}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,y.delay=1e3*g/d,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(E==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,O=0;0<=o?O<o:O>o;0<=o?++O:--O)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((T=f-this.transparency.indexed.length)>0)for($=0;0<=T?$<T:$>T;0<=T?++$:--$)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":x=(D=this.read(o)).indexOf(0),_=String.fromCharCode.apply(String,D.slice(0,x)),this.text[_]=String.fromCharCode.apply(String,D.slice(x+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(K=this.colorType)===4||K===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),f=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(y,x,_,E){var T,D,O,$,K,X,ae,ue,Le,W,V,Y,F,I,j,H,U,R,te,re,me,xe=Math.ceil((d.width-y)/_),We=Math.ceil((d.height-x)/E),N=d.width==xe&&d.height==We;for(I=o*xe,Y=N?u:new Uint8Array(I*We),X=s.length,F=0,D=0;F<We&&f<X;){switch(s[f++]){case 0:for($=U=0;U<I;$=U+=1)Y[D++]=s[f++];break;case 1:for($=R=0;R<I;$=R+=1)T=s[f++],K=$<o?0:Y[D-o],Y[D++]=(T+K)%256;break;case 2:for($=te=0;te<I;$=te+=1)T=s[f++],O=($-$%o)/o,j=F&&Y[(F-1)*I+O*o+$%o],Y[D++]=(j+T)%256;break;case 3:for($=re=0;re<I;$=re+=1)T=s[f++],O=($-$%o)/o,K=$<o?0:Y[D-o],j=F&&Y[(F-1)*I+O*o+$%o],Y[D++]=(T+Math.floor((K+j)/2))%256;break;case 4:for($=me=0;me<I;$=me+=1)T=s[f++],O=($-$%o)/o,K=$<o?0:Y[D-o],F===0?j=H=0:(j=Y[(F-1)*I+O*o+$%o],H=O&&Y[(F-1)*I+(O-1)*o+$%o]),ae=K+j-H,ue=Math.abs(ae-K),W=Math.abs(ae-j),V=Math.abs(ae-H),Le=ue<=W&&ue<=V?K:W<=V?j:H,Y[D++]=(T+Le)%256;break;default:throw new Error("Invalid filter algorithm: "+s[f-1])}if(!N){var ee=((x+F*E)*d.width+y)*o,fe=F*I;for($=0;$<xe;$+=1){for(var ce=0;ce<o;ce+=1)u[ee++]=Y[fe++];ee+=(_-1)*o}}F++}}return s=iF(s),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,f,d,g,y,x,_;for(u=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+u.length),f=0,s=0,o=y=0,x=u.length;y<x;o=y+=3)d[f++]=u[o],d[f++]=u[o+1],d[f++]=u[o+2],d[f++]=(_=g[s++])!=null?_:255;return d},r.prototype.copyToImageData=function(s,o){var u,f,d,g,y,x,_,E,T,D,O;if(f=this.colors,T=null,u=this.hasAlphaChannel,this.palette.length&&(T=(O=this._decodedPalette)!=null?O:this._decodedPalette=this.decodePalette(),f=4,u=!0),E=(d=s.data||s).length,y=T||o,g=x=0,f===1)for(;g<E;)_=T?4*o[g/4]:x,D=y[_++],d[g++]=D,d[g++]=D,d[g++]=D,d[g++]=u?y[_++]:255,x=_;else for(;g<E;)_=T?4*o[g/4]:x,d[g++]=y[_++],d[g++]=y[_++],d[g++]=y[_++],d[g++]=u?y[_++]:255,x=_},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Dr)==="[object Window]"){try{n=Dr.document.createElement("canvas"),t=n.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=n.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,f,d,g,y,x,_;if(this.animation){for(_=[],u=g=0,y=(x=this.animation.frames).length;g<y;u=++g)o=x[u],f=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(f,d),o.imageData=f,_.push(o.image=e(f));return _}},r.prototype.renderFrame=function(s,o){var u,f,d;return u=(f=this.animation.frames)[o],d=f[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,f,d,g,y,x=this;return u=0,y=this.animation,d=y.numFrames,f=y.frames,g=y.numPlays,(o=function(){var _,E;if(_=u++%d,E=f[_],x.renderFrame(s,_),d>1&&u/d<g)return x.animation._timeout=setTimeout(o,E.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function PF(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=e[n++]|e[n++]<<8,r=e[n++]|e[n++]<<8,i=e[n++],s=i>>7,o=1<<(7&i)+1;e[n++],e[n++];var u=null,f=null;s&&(u=n,f=o,n+=3*o);var d=!0,g=[],y=0,x=null,_=0,E=null;for(this.width=t,this.height=r;d&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,E=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((F=e[n++])>=0))throw Error("Invalid block size");if(F===0)break;n+=F}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var T=e[n++];y=e[n++]|e[n++]<<8,x=e[n++],!(1&T)&&(x=null),_=T>>2&7,n++;break;case 254:for(;;){if(!((F=e[n++])>=0))throw Error("Invalid block size");if(F===0)break;n+=F}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var D=e[n++]|e[n++]<<8,O=e[n++]|e[n++]<<8,$=e[n++]|e[n++]<<8,K=e[n++]|e[n++]<<8,X=e[n++],ae=X>>6&1,ue=1<<(7&X)+1,Le=u,W=f,V=!1;X>>7&&(V=!0,Le=n,W=ue,n+=3*ue);var Y=n;for(n++;;){var F;if(!((F=e[n++])>=0))throw Error("Invalid block size");if(F===0)break;n+=F}g.push({x:D,y:O,width:$,height:K,has_local_palette:V,palette_offset:Le,palette_size:W,data_offset:Y,data_length:n-Y,transparent_index:x,interlaced:!!ae,delay:y,disposal:_});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return E},this.frameInfo=function(I){if(I<0||I>=g.length)throw new Error("Frame index out of range.");return g[I]},this.decodeAndBlitFrameBGRA=function(I,j){var H=this.frameInfo(I),U=H.width*H.height,R=new Uint8Array(U);Fb(e,H.data_offset,R,U);var te=H.palette_offset,re=H.transparent_index;re===null&&(re=256);var me=H.width,xe=t-me,We=me,N=4*(H.y*t+H.x),ee=4*((H.y+H.height)*t+H.x),fe=N,ce=4*xe;H.interlaced===!0&&(ce+=4*t*7);for(var ye=8,se=0,k=R.length;se<k;++se){var le=R[se];if(We===0&&(We=me,(fe+=ce)>=ee&&(ce=4*xe+4*t*(ye-1),fe=N+(me+xe)*(ye<<1),ye>>=1)),le===re)fe+=4;else{var ke=e[te+3*le],Pe=e[te+3*le+1],Ve=e[te+3*le+2];j[fe++]=Ve,j[fe++]=Pe,j[fe++]=ke,j[fe++]=255}--We}},this.decodeAndBlitFrameRGBA=function(I,j){var H=this.frameInfo(I),U=H.width*H.height,R=new Uint8Array(U);Fb(e,H.data_offset,R,U);var te=H.palette_offset,re=H.transparent_index;re===null&&(re=256);var me=H.width,xe=t-me,We=me,N=4*(H.y*t+H.x),ee=4*((H.y+H.height)*t+H.x),fe=N,ce=4*xe;H.interlaced===!0&&(ce+=4*t*7);for(var ye=8,se=0,k=R.length;se<k;++se){var le=R[se];if(We===0&&(We=me,(fe+=ce)>=ee&&(ce=4*xe+4*t*(ye-1),fe=N+(me+xe)*(ye<<1),ye>>=1)),le===re)fe+=4;else{var ke=e[te+3*le],Pe=e[te+3*le+1],Ve=e[te+3*le+2];j[fe++]=ke,j[fe++]=Pe,j[fe++]=Ve,j[fe++]=255}--We}}}function Fb(e,n,t,r){for(var i=e[n++],s=1<<i,o=s+1,u=o+1,f=i+1,d=(1<<f)-1,g=0,y=0,x=0,_=e[n++],E=new Int32Array(4096),T=null;;){for(;g<16&&_!==0;)y|=e[n++]<<g,g+=8,_===1?_=e[n++]:--_;if(g<f)break;var D=y&d;if(y>>=f,g-=f,D!==s){if(D===o)break;for(var O=D<u?D:T,$=0,K=O;K>s;)K=E[K]>>8,++$;var X=K;if(x+$+(O!==D?1:0)>r)return void ao.log("Warning, gif stream longer than expected.");t[x++]=X;var ae=x+=$;for(O!==D&&(t[x++]=X),K=O;$--;)K=E[K],t[--ae]=255&K,K>>=8;T!==null&&u<4096&&(E[u++]=T<<8|X,u>=d+1&&f<12&&(++f,d=d<<1|1)),T=D}else u=o+1,d=(1<<(f=i+1))-1,T=null}return x!==r&&ao.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pv(e){var n,t,r,i,s,o=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),g=new Array(64),y=new Array(65535),x=new Array(65535),_=new Array(64),E=new Array(64),T=[],D=0,O=7,$=new Array(64),K=new Array(64),X=new Array(64),ae=new Array(256),ue=new Array(2048),Le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],W=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(N,ee){for(var fe=0,ce=0,ye=new Array,se=1;se<=16;se++){for(var k=1;k<=N[se];k++)ye[ee[ce]]=[],ye[ee[ce]][0]=fe,ye[ee[ce]][1]=se,ce++,fe++;fe*=2}return ye}function te(N){for(var ee=N[0],fe=N[1]-1;fe>=0;)ee&1<<fe&&(D|=1<<O),fe--,--O<0&&(D==255?(re(255),re(0)):re(D),O=7,D=0)}function re(N){T.push(N)}function me(N){re(N>>8&255),re(255&N)}function xe(N,ee,fe,ce,ye){for(var se,k=ye[0],le=ye[240],ke=function(Ke,He){var Xe,ot,kt,Ct,Ut,Gt,cn,pn,et,it,nt=0;for(et=0;et<8;++et){Xe=Ke[nt],ot=Ke[nt+1],kt=Ke[nt+2],Ct=Ke[nt+3],Ut=Ke[nt+4],Gt=Ke[nt+5],cn=Ke[nt+6];var Vt=Xe+(pn=Ke[nt+7]),Qt=Xe-pn,On=ot+cn,wn=ot-cn,Tn=kt+Gt,ar=kt-Gt,xn=Ct+Ut,Mn=Ct-Ut,En=Vt+xn,cr=Vt-xn,yr=On+Tn,mt=On-Tn;Ke[nt]=En+yr,Ke[nt+4]=En-yr;var Ge=.707106781*(mt+cr);Ke[nt+2]=cr+Ge,Ke[nt+6]=cr-Ge;var Ot=.382683433*((En=Mn+ar)-(mt=wn+Qt)),Pn=.5411961*En+Ot,tr=1.306562965*mt+Ot,Zn=.707106781*(yr=ar+wn),Wt=Qt+Zn,mn=Qt-Zn;Ke[nt+5]=mn+Pn,Ke[nt+3]=mn-Pn,Ke[nt+1]=Wt+tr,Ke[nt+7]=Wt-tr,nt+=8}for(nt=0,et=0;et<8;++et){Xe=Ke[nt],ot=Ke[nt+8],kt=Ke[nt+16],Ct=Ke[nt+24],Ut=Ke[nt+32],Gt=Ke[nt+40],cn=Ke[nt+48];var It=Xe+(pn=Ke[nt+56]),Kt=Xe-pn,Ln=ot+cn,mr=ot-cn,at=kt+Gt,Cn=kt-Gt,xr=Ct+Ut,Di=Ct-Ut,Fr=It+xr,Er=It-xr,lr=Ln+at,Hr=Ln-at;Ke[nt]=Fr+lr,Ke[nt+32]=Fr-lr;var ir=.707106781*(Hr+Er);Ke[nt+16]=Er+ir,Ke[nt+48]=Er-ir;var Br=.382683433*((Fr=Di+Cn)-(Hr=mr+Kt)),jr=.5411961*Fr+Br,rn=1.306562965*Hr+Br,Ri=.707106781*(lr=Cn+mr),yi=Kt+Ri,pi=Kt-Ri;Ke[nt+40]=pi+jr,Ke[nt+24]=pi-jr,Ke[nt+8]=yi+rn,Ke[nt+56]=yi-rn,nt++}for(et=0;et<64;++et)it=Ke[et]*He[et],_[et]=it>0?it+.5|0:it-.5|0;return _}(N,ee),Pe=0;Pe<64;++Pe)E[Le[Pe]]=ke[Pe];var Ve=E[0]-fe;fe=E[0],Ve==0?te(ce[0]):(te(ce[x[se=32767+Ve]]),te(y[se]));for(var Z=63;Z>0&&E[Z]==0;)Z--;if(Z==0)return te(k),fe;for(var de,ve=1;ve<=Z;){for(var pe=ve;E[ve]==0&&ve<=Z;)++ve;var ze=ve-pe;if(ze>=16){de=ze>>4;for(var Qe=1;Qe<=de;++Qe)te(le);ze&=15}se=32767+E[ve],te(ye[(ze<<4)+x[se]]),te(y[se]),ve++}return Z!=63&&te(k),fe}function We(N){N=Math.min(Math.max(N,1),100),s!=N&&(function(ee){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var ye=o((fe[ce]*ee+50)/100);ye=Math.min(Math.max(ye,1),255),u[Le[ce]]=ye}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],k=0;k<64;k++){var le=o((se[k]*ee+50)/100);le=Math.min(Math.max(le,1),255),f[Le[k]]=le}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,Ve=0;Ve<8;Ve++)for(var Z=0;Z<8;Z++)d[Pe]=1/(u[Le[Pe]]*ke[Ve]*ke[Z]*8),g[Pe]=1/(f[Le[Pe]]*ke[Ve]*ke[Z]*8),Pe++}(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),s=N)}this.encode=function(N,ee){ee&&We(ee),T=new Array,D=0,O=7,me(65496),me(65504),me(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),me(1),me(1),re(0),re(0),function(){me(65499),me(132),re(0);for(var ot=0;ot<64;ot++)re(u[ot]);re(1);for(var kt=0;kt<64;kt++)re(f[kt])}(),function(ot,kt){me(65472),me(17),re(8),me(kt),me(ot),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}(N.width,N.height),function(){me(65476),me(418),re(0);for(var ot=0;ot<16;ot++)re(W[ot+1]);for(var kt=0;kt<=11;kt++)re(V[kt]);re(16);for(var Ct=0;Ct<16;Ct++)re(Y[Ct+1]);for(var Ut=0;Ut<=161;Ut++)re(F[Ut]);re(1);for(var Gt=0;Gt<16;Gt++)re(I[Gt+1]);for(var cn=0;cn<=11;cn++)re(j[cn]);re(17);for(var pn=0;pn<16;pn++)re(H[pn+1]);for(var et=0;et<=161;et++)re(U[et])}(),me(65498),me(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var fe=0,ce=0,ye=0;D=0,O=7,this.encode.displayName="_encode_";for(var se,k,le,ke,Pe,Ve,Z,de,ve,pe=N.data,ze=N.width,Qe=N.height,Ke=4*ze,He=0;He<Qe;){for(se=0;se<Ke;){for(Pe=Ke*He+se,Z=-1,de=0,ve=0;ve<64;ve++)Ve=Pe+(de=ve>>3)*Ke+(Z=4*(7&ve)),He+de>=Qe&&(Ve-=Ke*(He+1+de-Qe)),se+Z>=Ke&&(Ve-=se+Z-Ke+4),k=pe[Ve++],le=pe[Ve++],ke=pe[Ve++],$[ve]=(ue[k]+ue[le+256>>0]+ue[ke+512>>0]>>16)-128,K[ve]=(ue[k+768>>0]+ue[le+1024>>0]+ue[ke+1280>>0]>>16)-128,X[ve]=(ue[k+1280>>0]+ue[le+1536>>0]+ue[ke+1792>>0]>>16)-128;fe=xe($,d,fe,n,r),ce=xe(K,g,ce,t,i),ye=xe(X,g,ye,t,i),se+=32}He+=8}if(O>=0){var Xe=[];Xe[1]=O+1,Xe[0]=(1<<O+1)-1,te(Xe)}return me(65497),new Uint8Array(T)},e=e||50,function(){for(var N=String.fromCharCode,ee=0;ee<256;ee++)ae[ee]=N(ee)}(),n=R(W,V),t=R(I,j),r=R(Y,F),i=R(H,U),function(){for(var N=1,ee=2,fe=1;fe<=15;fe++){for(var ce=N;ce<ee;ce++)x[32767+ce]=fe,y[32767+ce]=[],y[32767+ce][1]=fe,y[32767+ce][0]=ce;for(var ye=-(ee-1);ye<=-N;ye++)x[32767+ye]=fe,y[32767+ye]=[],y[32767+ye][1]=fe,y[32767+ye][0]=ee-1+ye;N<<=1,ee<<=1}}(),function(){for(var N=0;N<256;N++)ue[N]=19595*N,ue[N+256>>0]=38470*N,ue[N+512>>0]=7471*N+32768,ue[N+768>>0]=-11059*N,ue[N+1024>>0]=-21709*N,ue[N+1280>>0]=32768*N+8421375,ue[N+1536>>0]=-27439*N,ue[N+1792>>0]=-5329*N}(),We(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Nu(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jb(e){function n(W){if(!W)throw Error("assert :P")}function t(W,V,Y){for(var F=0;4>F;F++)if(W[V+F]!=Y.charCodeAt(F))return!0;return!1}function r(W,V,Y,F,I){for(var j=0;j<I;j++)W[V+j]=Y[F+j]}function i(W,V,Y,F){for(var I=0;I<F;I++)W[V+I]=Y}function s(W){return new Int32Array(W)}function o(W,V){for(var Y=[],F=0;F<W;F++)Y.push(new V);return Y}function u(W,V){var Y=[];return function F(I,j,H){for(var U=H[j],R=0;R<U&&(I.push(H.length>j+1?[]:new V),!(H.length<j+1));R++)F(I[R],j+1,H)}(Y,0,W),Y}var f=function(){var W=this;function V(b,M){for(var q=1<<M-1>>>0;b&q;)q>>>=1;return q?(b&q-1)+q:b}function Y(b,M,q,oe,be){n(!(oe%q));do b[M+(oe-=q)]=be;while(0<oe)}function F(b,M,q,oe,be){if(n(2328>=be),512>=be)var Ee=s(512);else if((Ee=s(be))==null)return 0;return function(Ae,Te,De,Ue,ht,Nt){var Dt,wt,Yt=Te,$t=1<<De,dt=s(16),yt=s(16);for(n(ht!=0),n(Ue!=null),n(Ae!=null),n(0<De),wt=0;wt<ht;++wt){if(15<Ue[wt])return 0;++dt[Ue[wt]]}if(dt[0]==ht)return 0;for(yt[1]=0,Dt=1;15>Dt;++Dt){if(dt[Dt]>1<<Dt)return 0;yt[Dt+1]=yt[Dt]+dt[Dt]}for(wt=0;wt<ht;++wt)Dt=Ue[wt],0<Ue[wt]&&(Nt[yt[Dt]++]=wt);if(yt[15]==1)return(Ue=new I).g=0,Ue.value=Nt[0],Y(Ae,Yt,1,$t,Ue),$t;var en,fn=-1,nn=$t-1,kn=0,Sn=1,Xn=1,l=1<<De;for(wt=0,Dt=1,ht=2;Dt<=De;++Dt,ht<<=1){if(Sn+=Xn<<=1,0>(Xn-=dt[Dt]))return 0;for(;0<dt[Dt];--dt[Dt])(Ue=new I).g=Dt,Ue.value=Nt[wt++],Y(Ae,Yt+kn,ht,l,Ue),kn=V(kn,Dt)}for(Dt=De+1,ht=2;15>=Dt;++Dt,ht<<=1){if(Sn+=Xn<<=1,0>(Xn-=dt[Dt]))return 0;for(;0<dt[Dt];--dt[Dt]){if(Ue=new I,(kn&nn)!=fn){for(Yt+=l,en=1<<(fn=Dt)-De;15>fn&&!(0>=(en-=dt[fn]));)++fn,en<<=1;$t+=l=1<<(en=fn-De),Ae[Te+(fn=kn&nn)].g=en+De,Ae[Te+fn].value=Yt-Te-fn}Ue.g=Dt-De,Ue.value=Nt[wt++],Y(Ae,Yt+(kn>>De),ht,l,Ue),kn=V(kn,Dt)}}return Sn!=2*yt[15]-1?0:$t}(b,M,q,oe,be,Ee)}function I(){this.value=this.g=0}function j(){this.value=this.g=0}function H(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ho,j)}function U(b,M,q,oe){n(b!=null),n(M!=null),n(2147483648>oe),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=M,b.pa=q,b.Jd=M,b.Yc=q+oe,b.Zc=4<=oe?q+oe-4+1:q,se(b)}function R(b,M){for(var q=0;0<M--;)q|=le(b,128)<<M;return q}function te(b,M){var q=R(b,M);return k(b)?-q:q}function re(b,M,q,oe){var be,Ee=0;for(n(b!=null),n(M!=null),n(4294967288>oe),b.Sb=oe,b.Ra=0,b.u=0,b.h=0,4<oe&&(oe=4),be=0;be<oe;++be)Ee+=M[q+be]<<8*be;b.Ra=Ee,b.bb=oe,b.oa=M,b.pa=q}function me(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<hs-8>>>0,++b.bb,b.u-=8;fe(b)&&(b.h=1,b.u=0)}function xe(b,M){if(n(0<=M),!b.h&&M<=Ms){var q=ee(b)&ra[M];return b.u+=M,me(b),q}return b.h=1,b.u=0}function We(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function N(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(b){return b.Ra>>>(b.u&hs-1)>>>0}function fe(b){return n(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>hs}function ce(b,M){b.u=M,b.h=fe(b)}function ye(b){b.u>=fl&&(n(b.u>=fl),me(b))}function se(b){n(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(n(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function k(b){return R(b,1)}function le(b,M){var q=b.Ca;0>b.b&&se(b);var oe=b.b,be=q*M>>>8,Ee=(b.I>>>oe>be)+0;for(Ee?(q-=be,b.I-=be+1<<oe>>>0):q=be+1,oe=q,be=0;256<=oe;)be+=8,oe>>=8;return oe=7^be+$o[oe],b.b-=oe,b.Ca=(q<<oe)-1,Ee}function ke(b,M,q){b[M+0]=q>>24&255,b[M+1]=q>>16&255,b[M+2]=q>>8&255,b[M+3]=q>>0&255}function Pe(b,M){return b[M+0]<<0|b[M+1]<<8}function Ve(b,M){return Pe(b,M)|b[M+2]<<16}function Z(b,M){return Pe(b,M)|Pe(b,M+2)<<16}function de(b,M){var q=1<<M;return n(b!=null),n(0<M),b.X=s(q),b.X==null?0:(b.Mb=32-M,b.Xa=M,1)}function ve(b,M){n(b!=null),n(M!=null),n(b.Xa==M.Xa),r(M.X,0,b.X,0,1<<M.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function ze(b,M,q,oe){n(q!=null),n(oe!=null);var be=q[0],Ee=oe[0];return be==0&&(be=(b*Ee+M/2)/M),Ee==0&&(Ee=(M*be+b/2)/b),0>=be||0>=Ee?0:(q[0]=be,oe[0]=Ee,1)}function Qe(b,M){return b+(1<<M)-1>>>M}function Ke(b,M){return((4278255360&b)+(4278255360&M)>>>0&4278255360)+((16711935&b)+(16711935&M)>>>0&16711935)>>>0}function He(b,M){W[M]=function(q,oe,be,Ee,Ae,Te,De){var Ue;for(Ue=0;Ue<Ae;++Ue){var ht=W[b](Te[De+Ue-1],be,Ee+Ue);Te[De+Ue]=Ke(q[oe+Ue],ht)}}}function Xe(){this.ud=this.hd=this.jd=0}function ot(b,M){return((4278124286&(b^M))>>>1)+(b&M)>>>0}function kt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Ct(b,M){return kt(b+(b-M+.5>>1))}function Ut(b,M,q){return Math.abs(M-q)-Math.abs(b-q)}function Gt(b,M,q,oe,be,Ee,Ae){for(oe=Ee[Ae-1],q=0;q<be;++q)Ee[Ae+q]=oe=Ke(b[M+q],oe)}function cn(b,M,q,oe,be){var Ee;for(Ee=0;Ee<q;++Ee){var Ae=b[M+Ee],Te=Ae>>8&255,De=16711935&(De=(De=16711935&Ae)+((Te<<16)+Te));oe[be+Ee]=(4278255360&Ae)+De>>>0}}function pn(b,M){M.jd=b>>0&255,M.hd=b>>8&255,M.ud=b>>16&255}function et(b,M,q,oe,be,Ee){var Ae;for(Ae=0;Ae<oe;++Ae){var Te=M[q+Ae],De=Te>>>8,Ue=Te,ht=255&(ht=(ht=Te>>>16)+((b.jd<<24>>24)*(De<<24>>24)>>>5));Ue=255&(Ue=(Ue=Ue+((b.hd<<24>>24)*(De<<24>>24)>>>5))+((b.ud<<24>>24)*(ht<<24>>24)>>>5)),be[Ee+Ae]=(4278255360&Te)+(ht<<16)+Ue}}function it(b,M,q,oe,be){W[M]=function(Ee,Ae,Te,De,Ue,ht,Nt,Dt,wt){for(De=Nt;De<Dt;++De)for(Nt=0;Nt<wt;++Nt)Ue[ht++]=be(Te[oe(Ee[Ae++])])},W[b]=function(Ee,Ae,Te,De,Ue,ht,Nt){var Dt=8>>Ee.b,wt=Ee.Ea,Yt=Ee.K[0],$t=Ee.w;if(8>Dt)for(Ee=(1<<Ee.b)-1,$t=(1<<Dt)-1;Ae<Te;++Ae){var dt,yt=0;for(dt=0;dt<wt;++dt)dt&Ee||(yt=oe(De[Ue++])),ht[Nt++]=be(Yt[yt&$t]),yt>>=Dt}else W["VP8LMapColor"+q](De,Ue,Yt,$t,ht,Nt,Ae,Te,wt)}}function nt(b,M,q,oe,be){for(q=M+q;M<q;){var Ee=b[M++];oe[be++]=Ee>>16&255,oe[be++]=Ee>>8&255,oe[be++]=Ee>>0&255}}function Vt(b,M,q,oe,be){for(q=M+q;M<q;){var Ee=b[M++];oe[be++]=Ee>>16&255,oe[be++]=Ee>>8&255,oe[be++]=Ee>>0&255,oe[be++]=Ee>>24&255}}function Qt(b,M,q,oe,be){for(q=M+q;M<q;){var Ee=(Ae=b[M++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;oe[be++]=Ee,oe[be++]=Ae}}function On(b,M,q,oe,be){for(q=M+q;M<q;){var Ee=(Ae=b[M++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;oe[be++]=Ee,oe[be++]=Ae}}function wn(b,M,q,oe,be){for(q=M+q;M<q;){var Ee=b[M++];oe[be++]=Ee>>0&255,oe[be++]=Ee>>8&255,oe[be++]=Ee>>16&255}}function Tn(b,M,q,oe,be,Ee){if(Ee==0)for(q=M+q;M<q;)ke(oe,((Ee=b[M++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),be+=32;else r(oe,be,b,M,q)}function ar(b,M){W[M][0]=W[b+"0"],W[M][1]=W[b+"1"],W[M][2]=W[b+"2"],W[M][3]=W[b+"3"],W[M][4]=W[b+"4"],W[M][5]=W[b+"5"],W[M][6]=W[b+"6"],W[M][7]=W[b+"7"],W[M][8]=W[b+"8"],W[M][9]=W[b+"9"],W[M][10]=W[b+"10"],W[M][11]=W[b+"11"],W[M][12]=W[b+"12"],W[M][13]=W[b+"13"],W[M][14]=W[b+"0"],W[M][15]=W[b+"0"]}function xn(b){return b==To||b==No||b==Ks||b==a}function Mn(){this.eb=[],this.size=this.A=this.fb=0}function En(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Mn,this.f.kb=new En,this.sd=null}function yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ge(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Ot(b,M){var q=b.T,oe=M.ba.f.RGBA,be=oe.eb,Ee=oe.fb+b.ka*oe.A,Ae=Wo[M.ba.S],Te=b.y,De=b.O,Ue=b.f,ht=b.N,Nt=b.ea,Dt=b.W,wt=M.cc,Yt=M.dc,$t=M.Mc,dt=M.Nc,yt=b.ka,en=b.ka+b.T,fn=b.U,nn=fn+1>>1;for(yt==0?Ae(Te,De,null,null,Ue,ht,Nt,Dt,Ue,ht,Nt,Dt,be,Ee,null,null,fn):(Ae(M.ec,M.fc,Te,De,wt,Yt,$t,dt,Ue,ht,Nt,Dt,be,Ee-oe.A,be,Ee,fn),++q);yt+2<en;yt+=2)wt=Ue,Yt=ht,$t=Nt,dt=Dt,ht+=b.Rc,Dt+=b.Rc,Ee+=2*oe.A,Ae(Te,(De+=2*b.fa)-b.fa,Te,De,wt,Yt,$t,dt,Ue,ht,Nt,Dt,be,Ee-oe.A,be,Ee,fn);return De+=b.fa,b.j+en<b.o?(r(M.ec,M.fc,Te,De,fn),r(M.cc,M.dc,Ue,ht,nn),r(M.Mc,M.Nc,Nt,Dt,nn),q--):1&en||Ae(Te,De,null,null,Ue,ht,Nt,Dt,Ue,ht,Nt,Dt,be,Ee+oe.A,null,null,fn),q}function Pn(b,M,q){var oe=b.F,be=[b.J];if(oe!=null){var Ee=b.U,Ae=M.ba.S,Te=Ae==Zs||Ae==Ks;M=M.ba.f.RGBA;var De=[0],Ue=b.ka;De[0]=b.T,b.Kb&&(Ue==0?--De[0]:(--Ue,be[0]-=b.width),b.j+b.ka+b.T==b.o&&(De[0]=b.o-b.j-Ue));var ht=M.eb;Ue=M.fb+Ue*M.A,b=Mi(oe,be[0],b.width,Ee,De,ht,Ue+(Te?0:3),M.A),n(q==De),b&&xn(Ae)&&ko(ht,Ue,Te,Ee,De,M.A)}return 0}function tr(b){var M=b.ma,q=M.ba.S,oe=11>q,be=q==dr||q==Ea||q==Zs||q==is||q==12||xn(q);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!bu(M.Oa,b,be?11:12))return 0;if(be&&xn(q)&&un(),b.da)alert("todo:use_scaling");else{if(oe){if(M.Ib=Ge,b.Kb){if(q=b.U+1>>1,M.memory=s(b.U+2*q),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+b.U,M.Mc=M.cc,M.Nc=M.dc+q,M.Ib=Ot,un()}}else alert("todo:EmitYUV");be&&(M.Jb=Pn,oe&&xt())}if(oe&&!Yu){for(b=0;256>b;++b)Zc[b]=89858*(b-128)+qa>>Wc,Kc[b]=-22014*(b-128)+qa,gd[b]=-45773*(b-128),Il[b]=113618*(b-128)+qa>>Wc;for(b=xc;b<kf;++b)M=76283*(b-16)+qa>>Wc,Yc[b-xc]=Ur(M,255),ch[b-xc]=Ur(M+8>>4,15);Yu=1}return 1}function Zn(b){var M=b.ma,q=b.U,oe=b.T;return n(!(1&b.ka)),0>=q||0>=oe?0:(q=M.Ib(b,M),M.Jb!=null&&M.Jb(b,M,q),M.Dc+=q,1)}function Wt(b){b.ma.memory=null}function mn(b,M,q,oe){return xe(b,8)!=47?0:(M[0]=xe(b,14)+1,q[0]=xe(b,14)+1,oe[0]=xe(b,1),xe(b,3)!=0?0:!b.h)}function It(b,M){if(4>b)return b+1;var q=b-2>>1;return(2+(1&b)<<q)+xe(M,q)+1}function Kt(b,M){return 120<M?M-120:1<=(q=((q=st[M-1])>>4)*b+(8-(15&q)))?q:1;var q}function Ln(b,M,q){var oe=ee(q),be=b[M+=255&oe].g-8;return 0<be&&(ce(q,q.u+8),oe=ee(q),M+=b[M].value,M+=oe&(1<<be)-1),ce(q,q.u+b[M].g),b[M].value}function mr(b,M,q){return q.g+=b.g,q.value+=b.value<<M>>>0,n(8>=q.g),b.g}function at(b,M,q){var oe=b.xc;return n((M=oe==0?0:b.vc[b.md*(q>>oe)+(M>>oe)])<b.Wb),b.Ya[M]}function Cn(b,M,q,oe){var be=b.ab,Ee=b.c*M,Ae=b.C;M=Ae+M;var Te=q,De=oe;for(oe=b.Ta,q=b.Ua;0<be--;){var Ue=b.gc[be],ht=Ae,Nt=M,Dt=Te,wt=De,Yt=(De=oe,Te=q,Ue.Ea);switch(n(ht<Nt),n(Nt<=Ue.nc),Ue.hc){case 2:Ku(Dt,wt,(Nt-ht)*Yt,De,Te);break;case 0:var $t=ht,dt=Nt,yt=De,en=Te,fn=(l=Ue).Ea;$t==0&&(ts(Dt,wt,null,null,1,yt,en),Gt(Dt,wt+1,0,0,fn-1,yt,en+1),wt+=fn,en+=fn,++$t);for(var nn=1<<l.b,kn=nn-1,Sn=Qe(fn,l.b),Xn=l.K,l=l.w+($t>>l.b)*Sn;$t<dt;){var h=Xn,v=l,w=1;for(ns(Dt,wt,yt,en-fn,1,yt,en);w<fn;){var C=(w&~kn)+nn;C>fn&&(C=fn),(0,xa[h[v++]>>8&15])(Dt,wt+ +w,yt,en+w-fn,C-w,yt,en+w),w=C}wt+=fn,en+=fn,++$t&kn||(l+=Sn)}Nt!=Ue.nc&&r(De,Te-Yt,De,Te+(Nt-ht-1)*Yt,Yt);break;case 1:for(Yt=Dt,dt=wt,fn=(Dt=Ue.Ea)-(en=Dt&~(yt=(wt=1<<Ue.b)-1)),$t=Qe(Dt,Ue.b),nn=Ue.K,Ue=Ue.w+(ht>>Ue.b)*$t;ht<Nt;){for(kn=nn,Sn=Ue,Xn=new Xe,l=dt+en,h=dt+Dt;dt<l;)pn(kn[Sn++],Xn),La(Xn,Yt,dt,wt,De,Te),dt+=wt,Te+=wt;dt<h&&(pn(kn[Sn++],Xn),La(Xn,Yt,dt,fn,De,Te),dt+=fn,Te+=fn),++ht&yt||(Ue+=$t)}break;case 3:if(Dt==De&&wt==Te&&0<Ue.b){for(dt=De,Dt=Yt=Te+(Nt-ht)*Yt-(en=(Nt-ht)*Qe(Ue.Ea,Ue.b)),wt=De,yt=Te,$t=[],en=(fn=en)-1;0<=en;--en)$t[en]=wt[yt+en];for(en=fn-1;0<=en;--en)dt[Dt+en]=$t[en];So(Ue,ht,Nt,De,Yt,De,Te)}else So(Ue,ht,Nt,Dt,wt,De,Te)}Te=oe,De=q}De!=q&&r(oe,q,Te,De,Ee)}function xr(b,M){var q=b.V,oe=b.Ba+b.c*b.C,be=M-b.C;if(n(M<=b.l.o),n(16>=be),0<be){var Ee=b.l,Ae=b.Ta,Te=b.Ua,De=Ee.width;if(Cn(b,be,q,oe),be=Te=[Te],n((q=b.C)<(oe=M)),n(Ee.v<Ee.va),oe>Ee.o&&(oe=Ee.o),q<Ee.j){var Ue=Ee.j-q;q=Ee.j,be[0]+=Ue*De}if(q>=oe?q=0:(be[0]+=4*Ee.v,Ee.ka=q-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=oe-q,q=1),q){if(Te=Te[0],11>(q=b.ca).S){var ht=q.f.RGBA,Nt=(oe=q.S,be=Ee.U,Ee=Ee.T,Ue=ht.eb,ht.A),Dt=Ee;for(ht=ht.fb+b.Ma*ht.A;0<Dt--;){var wt=Ae,Yt=Te,$t=be,dt=Ue,yt=ht;switch(oe){case ps:Ho(wt,Yt,$t,dt,yt);break;case dr:Ao(wt,Yt,$t,dt,yt);break;case To:Ao(wt,Yt,$t,dt,yt),ko(dt,yt,0,$t,1,0);break;case Ca:Go(wt,Yt,$t,dt,yt);break;case Ea:Tn(wt,Yt,$t,dt,yt,1);break;case No:Tn(wt,Yt,$t,dt,yt,1),ko(dt,yt,0,$t,1,0);break;case Zs:Tn(wt,Yt,$t,dt,yt,0);break;case Ks:Tn(wt,Yt,$t,dt,yt,0),ko(dt,yt,1,$t,1,0);break;case is:ia(wt,Yt,$t,dt,yt);break;case a:ia(wt,Yt,$t,dt,yt),Li(dt,yt,$t,1,0);break;case bc:As(wt,Yt,$t,dt,yt);break;default:n(0)}Te+=De,ht+=Nt}b.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");n(b.Ma<=q.height)}}b.C=M,n(b.C<=b.i)}function Di(b){var M;if(0<b.ua)return 0;for(M=0;M<b.Wb;++M){var q=b.Ya[M].G,oe=b.Ya[M].H;if(0<q[1][oe[1]+0].g||0<q[2][oe[2]+0].g||0<q[3][oe[3]+0].g)return 0}return 1}function Fr(b,M,q,oe,be,Ee){if(b.Z!=0){var Ae=b.qd,Te=b.rd;for(n(gi[b.Z]!=null);M<q;++M)gi[b.Z](Ae,Te,oe,be,oe,be,Ee),Ae=oe,Te=be,be+=Ee;b.qd=Ae,b.rd=Te}}function Er(b,M){var q=b.l.ma,oe=q.Z==0||q.Z==1?b.l.j:b.C;if(oe=b.C<oe?oe:b.C,n(M<=b.l.o),M>oe){var be=b.l.width,Ee=q.ca,Ae=q.tb+be*oe,Te=b.V,De=b.Ba+b.c*oe,Ue=b.gc;n(b.ab==1),n(Ue[0].hc==3),Uo(Ue[0],oe,M,Te,De,Ee,Ae),Fr(q,oe,M,Ee,Ae,be)}b.C=b.Ma=M}function lr(b,M,q,oe,be,Ee,Ae){var Te=b.$/oe,De=b.$%oe,Ue=b.m,ht=b.s,Nt=q+b.$,Dt=Nt;be=q+oe*be;var wt=q+oe*Ee,Yt=280+ht.ua,$t=b.Pb?Te:16777216,dt=0<ht.ua?ht.Wa:null,yt=ht.wc,en=Nt<wt?at(ht,De,Te):null;n(b.C<Ee),n(wt<=be);var fn=!1;e:for(;;){for(;fn||Nt<wt;){var nn=0;if(Te>=$t){var kn=Nt-q;n(($t=b).Pb),$t.wd=$t.m,$t.xd=kn,0<$t.s.ua&&ve($t.s.Wa,$t.s.vb),$t=Te+zt}if(De&yt||(en=at(ht,De,Te)),n(en!=null),en.Qb&&(M[Nt]=en.qb,fn=!0),!fn)if(ye(Ue),en.jc){nn=Ue,kn=M;var Sn=Nt,Xn=en.pd[ee(nn)&ho-1];n(en.jc),256>Xn.g?(ce(nn,nn.u+Xn.g),kn[Sn]=Xn.value,nn=0):(ce(nn,nn.u+Xn.g-256),n(256<=Xn.value),nn=Xn.value),nn==0&&(fn=!0)}else nn=Ln(en.G[0],en.H[0],Ue);if(Ue.h)break;if(fn||256>nn){if(!fn)if(en.nd)M[Nt]=(en.qb|nn<<8)>>>0;else{if(ye(Ue),fn=Ln(en.G[1],en.H[1],Ue),ye(Ue),kn=Ln(en.G[2],en.H[2],Ue),Sn=Ln(en.G[3],en.H[3],Ue),Ue.h)break;M[Nt]=(Sn<<24|fn<<16|nn<<8|kn)>>>0}if(fn=!1,++Nt,++De>=oe&&(De=0,++Te,Ae!=null&&Te<=Ee&&!(Te%16)&&Ae(b,Te),dt!=null))for(;Dt<Nt;)nn=M[Dt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn}else if(280>nn){if(nn=It(nn-256,Ue),kn=Ln(en.G[4],en.H[4],Ue),ye(Ue),kn=Kt(oe,kn=It(kn,Ue)),Ue.h)break;if(Nt-q<kn||be-Nt<nn)break e;for(Sn=0;Sn<nn;++Sn)M[Nt+Sn]=M[Nt+Sn-kn];for(Nt+=nn,De+=nn;De>=oe;)De-=oe,++Te,Ae!=null&&Te<=Ee&&!(Te%16)&&Ae(b,Te);if(n(Nt<=be),De&yt&&(en=at(ht,De,Te)),dt!=null)for(;Dt<Nt;)nn=M[Dt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn}else{if(!(nn<Yt))break e;for(fn=nn-280,n(dt!=null);Dt<Nt;)nn=M[Dt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn;nn=Nt,n(!(fn>>>(kn=dt).Xa)),M[nn]=kn.X[fn],fn=!0}fn||n(Ue.h==fe(Ue))}if(b.Pb&&Ue.h&&Nt<be)n(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ve(b.s.vb,b.s.Wa);else{if(Ue.h)break e;Ae!=null&&Ae(b,Te>Ee?Ee:Te),b.a=0,b.$=Nt-q}return 1}return b.a=3,0}function Hr(b){n(b!=null),b.vc=null,b.yc=null,b.Ya=null;var M=b.Wa;M!=null&&(M.X=null),b.vb=null,n(b!=null)}function ir(){var b=new ll;return b==null?null:(b.a=0,b.xb=eu,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Ku=cn,La=et,Ho=nt,Ao=Vt,ia=Qt,As=On,Go=wn,W.VP8LMapColor32b=wa,W.VP8LMapColor8b=Vo,b)}function Br(b,M,q,oe,be){var Ee=1,Ae=[b],Te=[M],De=oe.m,Ue=oe.s,ht=null,Nt=0;e:for(;;){if(q)for(;Ee&&xe(De,1);){var Dt=Ae,wt=Te,Yt=oe,$t=1,dt=Yt.m,yt=Yt.gc[Yt.ab],en=xe(dt,2);if(Yt.Oc&1<<en)Ee=0;else{switch(Yt.Oc|=1<<en,yt.hc=en,yt.Ea=Dt[0],yt.nc=wt[0],yt.K=[null],++Yt.ab,n(4>=Yt.ab),en){case 0:case 1:yt.b=xe(dt,3)+2,$t=Br(Qe(yt.Ea,yt.b),Qe(yt.nc,yt.b),0,Yt,yt.K),yt.K=yt.K[0];break;case 3:var fn,nn=xe(dt,8)+1,kn=16<nn?0:4<nn?1:2<nn?2:3;if(Dt[0]=Qe(yt.Ea,kn),yt.b=kn,fn=$t=Br(nn,1,0,Yt,yt.K)){var Sn,Xn=nn,l=yt,h=1<<(8>>l.b),v=s(h);if(v==null)fn=0;else{var w=l.K[0],C=l.w;for(v[0]=l.K[0][0],Sn=1;Sn<1*Xn;++Sn)v[Sn]=Ke(w[C+Sn],v[Sn-1]);for(;Sn<4*h;++Sn)v[Sn]=0;l.K[0]=null,l.K[0]=v,fn=1}}$t=fn;break;case 2:break;default:n(0)}Ee=$t}}if(Ae=Ae[0],Te=Te[0],Ee&&xe(De,1)&&!(Ee=1<=(Nt=xe(De,4))&&11>=Nt)){oe.a=3;break e}var z;if(z=Ee)t:{var J,ne,he,Se=oe,Je=Ae,je=Te,vt=Nt,At=q,Xt=Se.m,yn=Se.s,bn=[null],ur=1,Ye=0,tt=Pt[vt];n:for(;;){if(At&&xe(Xt,1)){var ft=xe(Xt,3)+2,Bt=Qe(Je,ft),bt=Qe(je,ft),Tt=Bt*bt;if(!Br(Bt,bt,0,Se,bn))break n;for(bn=bn[0],yn.xc=ft,J=0;J<Tt;++J){var ge=bn[J]>>8&65535;bn[J]=ge,ge>=ur&&(ur=ge+1)}}if(Xt.h)break n;for(ne=0;5>ne;++ne){var Me=G[ne];!ne&&0<vt&&(Me+=1<<vt),Ye<Me&&(Ye=Me)}var Oe=o(ur*tt,I),Be=ur,Re=o(Be,H);if(Re==null)var Fe=null;else n(65536>=Be),Fe=Re;var lt=s(Ye);if(Fe==null||lt==null||Oe==null){Se.a=1;break n}var ut=Oe;for(J=he=0;J<ur;++J){var pt=Fe[J],Lt=pt.G,St=pt.H,on=0,zn=1,Gn=0;for(ne=0;5>ne;++ne){Me=G[ne],Lt[ne]=ut,St[ne]=he,!ne&&0<vt&&(Me+=1<<vt);i:{var Qn,mi=Me,Ai=Se,Qr=lt,Ii=ut,vs=he,Lu=0,fa=Ai.m,Tf=xe(fa,1);if(i(Qr,0,0,mi),Tf){var Wa=xe(fa,1)+1,Ju=xe(fa,1),ha=xe(fa,Ju==0?1:8);Qr[ha]=1,Wa==2&&(Qr[ha=xe(fa,8)]=1);var Zo=1}else{var so=s(19),gh=xe(fa,4)+4;if(19<gh){Ai.a=3;var Nf=0;break i}for(Qn=0;Qn<gh;++Qn)so[Ce[Qn]]=xe(fa,3);var Df=void 0,Bf=void 0,mh=Ai,ai=so,vh=mi,Fp=Qr,Lc=0,Su=mh.m,jp=8,zp=o(128,I);r:for(;F(zp,0,7,ai,19);){if(xe(Su,1)){var hl=2+2*xe(Su,3);if((Df=2+xe(Su,hl))>vh)break r}else Df=vh;for(Bf=0;Bf<vh&&Df--;){ye(Su);var $p=zp[0+(127&ee(Su))];ce(Su,Su.u+$p.g);var Cu=$p.value;if(16>Cu)Fp[Bf++]=Cu,Cu!=0&&(jp=Cu);else{var md=Cu==16,vd=Cu-16,Up=S[vd],Ma=xe(Su,p[vd])+Up;if(Bf+Ma>vh)break r;for(var Xu=md?jp:0;0<Ma--;)Fp[Bf++]=Xu}}Lc=1;break r}Lc||(mh.a=3),Zo=Lc}(Zo=Zo&&!fa.h)&&(Lu=F(Ii,vs,8,Qr,mi)),Zo&&Lu!=0?Nf=Lu:(Ai.a=3,Nf=0)}if(Nf==0)break n;if(zn&&ie[ne]==1&&(zn=ut[he].g==0),on+=ut[he].g,he+=Nf,3>=ne){var Sc,yh=lt[0];for(Sc=1;Sc<Me;++Sc)lt[Sc]>yh&&(yh=lt[Sc]);Gn+=yh}}if(pt.nd=zn,pt.Qb=0,zn&&(pt.qb=(Lt[3][St[3]+0].value<<24|Lt[1][St[1]+0].value<<16|Lt[2][St[2]+0].value)>>>0,on==0&&256>Lt[0][St[0]+0].value&&(pt.Qb=1,pt.qb+=Lt[0][St[0]+0].value<<8)),pt.jc=!pt.Qb&&6>Gn,pt.jc){var Cc,tu=pt;for(Cc=0;Cc<ho;++Cc){var nu=Cc,Eu=tu.pd[nu],Jc=tu.G[0][tu.H[0]+nu];256<=Jc.value?(Eu.g=Jc.g+256,Eu.value=Jc.value):(Eu.g=0,Eu.value=0,nu>>=mr(Jc,8,Eu),nu>>=mr(tu.G[1][tu.H[1]+nu],16,Eu),nu>>=mr(tu.G[2][tu.H[2]+nu],0,Eu),mr(tu.G[3][tu.H[3]+nu],24,Eu))}}}yn.vc=bn,yn.Wb=ur,yn.Ya=Fe,yn.yc=Oe,z=1;break t}z=0}if(!(Ee=z)){oe.a=3;break e}if(0<Nt){if(Ue.ua=1<<Nt,!de(Ue.Wa,Nt)){oe.a=1,Ee=0;break e}}else Ue.ua=0;var Of=oe,Pu=Ae,lm=Te,ru=Of.s,_h=ru.xc;if(Of.c=Pu,Of.i=lm,ru.md=Qe(Pu,_h),ru.wc=_h==0?-1:(1<<_h)-1,q){oe.xb=Af;break e}if((ht=s(Ae*Te))==null){oe.a=1,Ee=0;break e}Ee=(Ee=lr(oe,ht,0,Ae,Te,Te,null))&&!De.h;break e}return Ee?(be!=null?be[0]=ht:(n(ht==null),n(q)),oe.$=0,q||Hr(Ue)):Hr(Ue),Ee}function jr(b,M){var q=b.c*b.i,oe=q+M+16*M;return n(b.c<=M),b.V=s(oe),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+q+M,1)}function rn(b,M){var q=b.C,oe=M-q,be=b.V,Ee=b.Ba+b.c*q;for(n(M<=b.l.o);0<oe;){var Ae=16<oe?16:oe,Te=b.l.ma,De=b.l.width,Ue=De*Ae,ht=Te.ca,Nt=Te.tb+De*q,Dt=b.Ta,wt=b.Ua;Cn(b,Ae,be,Ee),oo(Dt,wt,ht,Nt,Ue),Fr(Te,q,q+Ae,ht,Nt,De),oe-=Ae,be+=Ae*b.c,q+=Ae}n(q==M),b.C=b.Ma=M}function Ri(){this.ub=this.yd=this.td=this.Rb=0}function yi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Zr(){this.Yb=function(){var b=[];return function M(q,oe,be){for(var Ee=be[oe],Ae=0;Ae<Ee&&(q.push(be.length>oe+1?[]:0),!(be.length<oe+1));Ae++)M(q[Ae],oe+1,be)}(b,0,[3,11]),b}()}function Or(){this.jb=s(3),this.Wc=u([4,8],Zr),this.Xc=u([4,17],Zr)}function Ir(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hr(){this.ld=this.La=this.dd=this.tc=0}function Fi(){this.Na=this.la=0}function Ss(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Cs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oi(){this.uc=this.M=this.Nb=0,this.wa=Array(new hr),this.Y=0,this.ya=Array(new Cs),this.aa=0,this.l=new ui}function Fn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Po(){this.cb=this.a=0,this.sc="",this.m=new We,this.Od=new Ri,this.Kc=new yi,this.ed=new Ir,this.Qa=new pi,this.Ic=this.$c=this.Aa=0,this.D=new oi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,We),this.ia=0,this.pb=o(4,Ss),this.Pa=new Or,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fn),this.Hd=0,this.rb=Array(new Fi),this.sb=0,this.wa=Array(new hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Cs),this.L=this.aa=0,this.gd=u([4,2],hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ui(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fr(){var b=new Po;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Jn||(Jn=Lr)),b}function qn(b,M,q){return b.a==0&&(b.a=M,b.sc=q,b.cb=0),0}function bo(b,M,q){return 3<=q&&b[M+0]==157&&b[M+1]==1&&b[M+2]==42}function wo(b,M){if(b==null)return 0;if(b.a=0,b.sc="OK",M==null)return qn(b,2,"null VP8Io passed to VP8GetHeaders()");var q=M.data,oe=M.w,be=M.ha;if(4>be)return qn(b,7,"Truncated header.");var Ee=q[oe+0]|q[oe+1]<<8|q[oe+2]<<16,Ae=b.Od;if(Ae.Rb=!(1&Ee),Ae.td=Ee>>1&7,Ae.yd=Ee>>4&1,Ae.ub=Ee>>5,3<Ae.td)return qn(b,3,"Incorrect keyframe parameters.");if(!Ae.yd)return qn(b,4,"Frame not displayable.");oe+=3,be-=3;var Te=b.Kc;if(Ae.Rb){if(7>be)return qn(b,7,"cannot parse picture header");if(!bo(q,oe,be))return qn(b,3,"Bad code word");Te.c=16383&(q[oe+4]<<8|q[oe+3]),Te.Td=q[oe+4]>>6,Te.i=16383&(q[oe+6]<<8|q[oe+5]),Te.Ud=q[oe+6]>>6,oe+=7,be-=7,b.za=Te.c+15>>4,b.Ub=Te.i+15>>4,M.width=Te.c,M.height=Te.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((Ee=b.Pa).jb,0,255,Ee.jb.length),n((Ee=b.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Ae.ub>be)return qn(b,7,"bad partition length");U(Ee=b.m,q,oe,Ae.ub),oe+=Ae.ub,be-=Ae.ub,Ae.Rb&&(Te.Ld=k(Ee),Te.Kd=k(Ee)),Te=b.Qa;var De,Ue=b.Pa;if(n(Ee!=null),n(Te!=null),Te.Cb=k(Ee),Te.Cb){if(Te.Bb=k(Ee),k(Ee)){for(Te.Fb=k(Ee),De=0;4>De;++De)Te.Zb[De]=k(Ee)?te(Ee,7):0;for(De=0;4>De;++De)Te.Lb[De]=k(Ee)?te(Ee,6):0}if(Te.Bb)for(De=0;3>De;++De)Ue.jb[De]=k(Ee)?R(Ee,8):255}else Te.Bb=0;if(Ee.Ka)return qn(b,3,"cannot parse segment header");if((Te=b.ed).zd=k(Ee),Te.Tb=R(Ee,6),Te.wb=R(Ee,3),Te.Pc=k(Ee),Te.Pc&&k(Ee)){for(Ue=0;4>Ue;++Ue)k(Ee)&&(Te.vd[Ue]=te(Ee,6));for(Ue=0;4>Ue;++Ue)k(Ee)&&(Te.od[Ue]=te(Ee,6))}if(b.L=Te.Tb==0?0:Te.zd?1:2,Ee.Ka)return qn(b,3,"cannot parse filter header");var ht=be;if(be=De=oe,oe=De+ht,Te=ht,b.Xb=(1<<R(b.m,2))-1,ht<3*(Ue=b.Xb))q=7;else{for(De+=3*Ue,Te-=3*Ue,ht=0;ht<Ue;++ht){var Nt=q[be+0]|q[be+1]<<8|q[be+2]<<16;Nt>Te&&(Nt=Te),U(b.Jc[+ht],q,De,Nt),De+=Nt,Te-=Nt,be+=3}U(b.Jc[+Ue],q,De,Te),q=De<oe?0:5}if(q!=0)return qn(b,q,"cannot parse partitions");for(q=R(De=b.m,7),be=k(De)?te(De,4):0,oe=k(De)?te(De,4):0,Te=k(De)?te(De,4):0,Ue=k(De)?te(De,4):0,De=k(De)?te(De,4):0,ht=b.Qa,Nt=0;4>Nt;++Nt){if(ht.Cb){var Dt=ht.Zb[Nt];ht.Fb||(Dt+=q)}else{if(0<Nt){b.pb[Nt]=b.pb[0];continue}Dt=q}var wt=b.pb[Nt];wt.Sc[0]=sn[Ur(Dt+be,127)],wt.Sc[1]=Dn[Ur(Dt+0,127)],wt.Eb[0]=2*sn[Ur(Dt+oe,127)],wt.Eb[1]=101581*Dn[Ur(Dt+Te,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=sn[Ur(Dt+Ue,117)],wt.Qc[1]=Dn[Ur(Dt+De,127)],wt.lc=Dt+De}if(!Ae.Rb)return qn(b,4,"Not a key frame.");for(k(Ee),Ae=b.Pa,q=0;4>q;++q){for(be=0;8>be;++be)for(oe=0;3>oe;++oe)for(Te=0;11>Te;++Te)Ue=le(Ee,gs[q][be][oe][Te])?R(Ee,8):Do[q][be][oe][Te],Ae.Wc[q][be].Yb[oe][Te]=Ue;for(be=0;17>be;++be)Ae.Xc[q][be]=Ae.Wc[q][wc[be]]}return b.kc=k(Ee),b.kc&&(b.Bd=R(Ee,8)),b.cb=1}function Lr(b,M,q,oe,be,Ee,Ae){var Te=M[be].Yb[q];for(q=0;16>be;++be){if(!le(b,Te[q+0]))return be;for(;!le(b,Te[q+1]);)if(Te=M[++be].Yb[0],q=0,be==16)return 16;var De=M[be+1].Yb;if(le(b,Te[q+2])){var Ue=b,ht=0;if(le(Ue,(Dt=Te)[(Nt=q)+3]))if(le(Ue,Dt[Nt+6])){for(Te=0,Nt=2*(ht=le(Ue,Dt[Nt+8]))+(Dt=le(Ue,Dt[Nt+9+ht])),ht=0,Dt=zr[Nt];Dt[Te];++Te)ht+=ht+le(Ue,Dt[Te]);ht+=3+(8<<Nt)}else le(Ue,Dt[Nt+7])?(ht=7+2*le(Ue,165),ht+=le(Ue,145)):ht=5+le(Ue,159);else ht=le(Ue,Dt[Nt+4])?3+le(Ue,Dt[Nt+5]):2;Te=De[2]}else ht=1,Te=De[1];De=Ae+go[be],0>(Ue=b).b&&se(Ue);var Nt,Dt=Ue.b,wt=(Nt=Ue.Ca>>1)-(Ue.I>>Dt)>>31;--Ue.b,Ue.Ca+=wt,Ue.Ca|=1,Ue.I-=(Nt+1&wt)<<Dt,Ee[De]=((ht^wt)-wt)*oe[(0<be)+0]}return 16}function Us(b){var M=b.rb[b.sb-1];M.la=0,M.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Hn(b,M){if(b==null)return 0;if(M==null)return qn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!wo(b,M))return 0;if(n(b.cb),M.ac==null||M.ac(M)){M.ob&&(b.L=0);var q=Pa[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=M.v-q>>4,b.zb=M.j-q>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=M.o+15+q>>4,b.Hb=M.va+15+q>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var oe=b.ed;for(q=0;4>q;++q){var be;if(b.Qa.Cb){var Ee=b.Qa.Lb[q];b.Qa.Fb||(Ee+=oe.Tb)}else Ee=oe.Tb;for(be=0;1>=be;++be){var Ae=b.gd[q][be],Te=Ee;if(oe.Pc&&(Te+=oe.vd[0],be&&(Te+=oe.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var De=Te;0<oe.wb&&(De=4<oe.wb?De>>2:De>>1)>9-oe.wb&&(De=9-oe.wb),1>De&&(De=1),Ae.dd=De,Ae.tc=2*Te+De,Ae.ld=40<=Te?2:15<=Te?1:0}else Ae.tc=0;Ae.La=be}}}q=0}else qn(b,6,"Frame setup failed"),q=b.a;if(q=q==0){if(q){b.$c=0,0<b.Aa||(b.Ic=dh);e:{q=b.Ic,oe=4*(De=b.za);var Ue=32*De,ht=De+1,Nt=0<b.L?De*(0<b.Aa?2:1):0,Dt=(b.Aa==2?2:1)*De;if((Ae=oe+832+(be=3*(16*q+Pa[b.L])/2*Ue)+(Ee=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Ae)q=0;else{if(Ae>b.Vb){if(b.Vb=0,b.Ec=s(Ae),b.Fc=0,b.Ec==null){q=qn(b,1,"no memory during frame initialization.");break e}b.Vb=Ae}Ae=b.Ec,Te=b.Fc,b.Ac=Ae,b.Bc=Te,Te+=oe,b.Gd=o(Ue,Fn),b.Hd=0,b.rb=o(ht+1,Fi),b.sb=1,b.wa=Nt?o(Nt,hr):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=De),n(!0),b.oc=Ae,b.pc=Te,Te+=832,b.ya=o(Dt,Cs),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=De),b.R=16*De,b.B=8*De,De=(Ue=Pa[b.L])*b.R,Ue=Ue/2*b.B,b.sa=Ae,b.ta=Te+De,b.qa=b.sa,b.ra=b.ta+16*q*b.R+Ue,b.Ha=b.qa,b.Ia=b.ra+8*q*b.B+Ue,b.$c=0,Te+=be,b.mb=Ee?Ae:null,b.nb=Ee?Te:null,n(Te+Ee<=b.Fc+b.Vb),Us(b),i(b.Ac,b.Bc,0,oe),q=1}}if(q){if(M.ka=0,M.y=b.sa,M.O=b.ta,M.f=b.qa,M.N=b.ra,M.ea=b.Ha,M.Vd=b.Ia,M.fa=b.R,M.Rc=b.B,M.F=null,M.J=0,!wu){for(q=-255;255>=q;++q)Oi[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)ks[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)ds[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)Is[255+q]=0>q?0:255<q?255:q;wu=1}_t=Qo,qt=co,An=xo,Kn=Pi,wr=fs,Mt=si,Ui=Xl,xi=ta,Ol=Os,rs=Dl,Vi=Tl,oa=Nl,Sa=_i,sa=Zu,aa=to,la=or,Xr=no,Ws=al,Ys[0]=Tr,Ys[1]=hi,Ys[2]=br,Ys[3]=Yr,Ys[4]=jo,Ys[5]=ol,Ys[6]=il,Ys[7]=Hs,Ys[8]=_u,Ys[9]=Ua,ca[0]=va,ca[1]=Fo,ca[2]=Qi,ca[3]=Lo,ca[4]=eo,ca[5]=rl,ca[6]=ya,Rs[0]=Va,Rs[1]=Bs,Rs[2]=Ml,Rs[3]=Sr,Rs[4]=Al,Rs[5]=Wu,Rs[6]=Yl,q=1}else q=0}q&&(q=function(wt,Yt){for(wt.M=0;wt.M<wt.Va;++wt.M){var $t,dt=wt.Jc[wt.M&wt.Xb],yt=wt.m,en=wt;for($t=0;$t<en.za;++$t){var fn=yt,nn=en,kn=nn.Ac,Sn=nn.Bc+4*$t,Xn=nn.zc,l=nn.ya[nn.aa+$t];if(nn.Qa.Bb?l.$b=le(fn,nn.Pa.jb[0])?2+le(fn,nn.Pa.jb[2]):le(fn,nn.Pa.jb[1]):l.$b=0,nn.kc&&(l.Ad=le(fn,nn.Bd)),l.Za=!le(fn,145)+0,l.Za){var h=l.Ob,v=0;for(nn=0;4>nn;++nn){var w,C=Xn[0+nn];for(w=0;4>w;++w){C=Hi[kn[Sn+w]][C];for(var z=Yi[le(fn,C[0])];0<z;)z=Yi[2*z+le(fn,C[z])];C=-z,kn[Sn+w]=C}r(h,v,kn,Sn,4),v+=4,Xn[0+nn]=C}}else C=le(fn,156)?le(fn,128)?1:3:le(fn,163)?2:0,l.Ob[0]=C,i(kn,Sn,C,4),i(Xn,0,C,4);l.Dd=le(fn,142)?le(fn,114)?le(fn,183)?1:3:2:0}if(en.m.Ka)return qn(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(en=dt,fn=(yt=wt).rb[yt.sb-1],kn=yt.rb[yt.sb+yt.ja],$t=yt.ya[yt.aa+yt.ja],Sn=yt.kc?$t.Ad:0)fn.la=kn.la=0,$t.Za||(fn.Na=kn.Na=0),$t.Hc=0,$t.Gc=0,$t.ia=0;else{var J,ne;if(fn=kn,kn=en,Sn=yt.Pa.Xc,Xn=yt.ya[yt.aa+yt.ja],l=yt.pb[Xn.$b],nn=Xn.ad,h=0,v=yt.rb[yt.sb-1],C=w=0,i(nn,h,0,384),Xn.Za)var he=0,Se=Sn[3];else{z=s(16);var Je=fn.Na+v.Na;if(Je=Jn(kn,Sn[1],Je,l.Eb,0,z,0),fn.Na=v.Na=(0<Je)+0,1<Je)_t(z,0,nn,h);else{var je=z[0]+3>>3;for(z=0;256>z;z+=16)nn[h+z]=je}he=1,Se=Sn[0]}var vt=15&fn.la,At=15&v.la;for(z=0;4>z;++z){var Xt=1&At;for(je=ne=0;4>je;++je)vt=vt>>1|(Xt=(Je=Jn(kn,Se,Je=Xt+(1&vt),l.Sc,he,nn,h))>he)<<7,ne=ne<<2|(3<Je?3:1<Je?2:nn[h+0]!=0),h+=16;vt>>=4,At=At>>1|Xt<<7,w=(w<<8|ne)>>>0}for(Se=vt,he=At>>4,J=0;4>J;J+=2){for(ne=0,vt=fn.la>>4+J,At=v.la>>4+J,z=0;2>z;++z){for(Xt=1&At,je=0;2>je;++je)Je=Xt+(1&vt),vt=vt>>1|(Xt=0<(Je=Jn(kn,Sn[2],Je,l.Qc,0,nn,h)))<<3,ne=ne<<2|(3<Je?3:1<Je?2:nn[h+0]!=0),h+=16;vt>>=2,At=At>>1|Xt<<5}C|=ne<<4*J,Se|=vt<<4<<J,he|=(240&At)<<J}fn.la=Se,v.la=he,Xn.Hc=w,Xn.Gc=C,Xn.ia=43690&C?0:l.ia,Sn=!(w|C)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[$t.$b][$t.Za],yt.wa[yt.Y+yt.ja].La|=!Sn),en.Ka)return qn(wt,7,"Premature end-of-file encountered.")}if(Us(wt),yt=Yt,en=1,$t=(dt=wt).D,fn=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)e:{if($t.M=dt.M,$t.uc=fn,Ql(dt,$t),en=1,$t=(ne=dt.D).Nb,fn=(C=Pa[dt.L])*dt.R,kn=C/2*dt.B,z=16*$t*dt.R,je=8*$t*dt.B,Sn=dt.sa,Xn=dt.ta-fn+z,l=dt.qa,nn=dt.ra-kn+je,h=dt.Ha,v=dt.Ia-kn+je,At=(vt=ne.M)==0,w=vt>=dt.Va-1,dt.Aa==2&&Ql(dt,ne),ne.uc)for(Xt=(Je=dt).D.M,n(Je.D.uc),ne=Je.yb;ne<Je.Hb;++ne){he=ne,Se=Xt;var yn=(bn=(Me=Je).D).Nb;J=Me.R;var bn=bn.wa[bn.Y+he],ur=Me.sa,Ye=Me.ta+16*yn*J+16*he,tt=bn.dd,ft=bn.tc;if(ft!=0)if(n(3<=ft),Me.L==1)0<he&&la(ur,Ye,J,ft+4),bn.La&&Ws(ur,Ye,J,ft),0<Se&&aa(ur,Ye,J,ft+4),bn.La&&Xr(ur,Ye,J,ft);else{var Bt=Me.B,bt=Me.qa,Tt=Me.ra+8*yn*Bt+8*he,ge=Me.Ha,Me=Me.Ia+8*yn*Bt+8*he;yn=bn.ld,0<he&&(xi(ur,Ye,J,ft+4,tt,yn),rs(bt,Tt,ge,Me,Bt,ft+4,tt,yn)),bn.La&&(oa(ur,Ye,J,ft,tt,yn),sa(bt,Tt,ge,Me,Bt,ft,tt,yn)),0<Se&&(Ui(ur,Ye,J,ft+4,tt,yn),Ol(bt,Tt,ge,Me,Bt,ft+4,tt,yn)),bn.La&&(Vi(ur,Ye,J,ft,tt,yn),Sa(bt,Tt,ge,Me,Bt,ft,tt,yn))}}if(dt.ia&&alert("todo:DitherRow"),yt.put!=null){if(ne=16*vt,vt=16*(vt+1),At?(yt.y=dt.sa,yt.O=dt.ta+z,yt.f=dt.qa,yt.N=dt.ra+je,yt.ea=dt.Ha,yt.W=dt.Ia+je):(ne-=C,yt.y=Sn,yt.O=Xn,yt.f=l,yt.N=nn,yt.ea=h,yt.W=v),w||(vt-=C),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,dt.Fa!=null&&0<dt.Fa.length&&ne<vt&&(yt.J=ro(dt,yt,ne,vt-ne),yt.F=dt.mb,yt.F==null&&yt.F.length==0)){en=qn(dt,3,"Could not decode alpha data.");break e}ne<yt.j&&(C=yt.j-ne,ne=yt.j,n(!(1&C)),yt.O+=dt.R*C,yt.N+=dt.B*(C>>1),yt.W+=dt.B*(C>>1),yt.F!=null&&(yt.J+=yt.width*C)),ne<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=ne-yt.j,yt.U=yt.va-yt.v,yt.T=vt-ne,en=yt.put(yt))}$t+1!=dt.Ic||w||(r(dt.sa,dt.ta-fn,Sn,Xn+16*dt.R,fn),r(dt.qa,dt.ra-kn,l,nn+8*dt.B,kn),r(dt.Ha,dt.Ia-kn,h,v+8*dt.B,kn))}if(!en)return qn(wt,6,"Output aborted.")}return 1}(b,M)),M.bc!=null&&M.bc(M),q&=1}return q?(b.cb=0,q):0}function _r(b,M,q,oe,be){be=b[M+q+32*oe]+(be>>3),b[M+q+32*oe]=-256&be?0>be?0:255:be}function Kr(b,M,q,oe,be,Ee){_r(b,M,0,q,oe+be),_r(b,M,1,q,oe+Ee),_r(b,M,2,q,oe-Ee),_r(b,M,3,q,oe-be)}function _n(b){return(20091*b>>16)+b}function tn(b,M,q,oe){var be,Ee=0,Ae=s(16);for(be=0;4>be;++be){var Te=b[M+0]+b[M+8],De=b[M+0]-b[M+8],Ue=(35468*b[M+4]>>16)-_n(b[M+12]),ht=_n(b[M+4])+(35468*b[M+12]>>16);Ae[Ee+0]=Te+ht,Ae[Ee+1]=De+Ue,Ae[Ee+2]=De-Ue,Ae[Ee+3]=Te-ht,Ee+=4,M++}for(be=Ee=0;4>be;++be)Te=(b=Ae[Ee+0]+4)+Ae[Ee+8],De=b-Ae[Ee+8],Ue=(35468*Ae[Ee+4]>>16)-_n(Ae[Ee+12]),_r(q,oe,0,0,Te+(ht=_n(Ae[Ee+4])+(35468*Ae[Ee+12]>>16))),_r(q,oe,1,0,De+Ue),_r(q,oe,2,0,De-Ue),_r(q,oe,3,0,Te-ht),Ee++,oe+=32}function si(b,M,q,oe){var be=b[M+0]+4,Ee=35468*b[M+4]>>16,Ae=_n(b[M+4]),Te=35468*b[M+1]>>16;Kr(q,oe,0,be+Ae,b=_n(b[M+1]),Te),Kr(q,oe,1,be+Ee,b,Te),Kr(q,oe,2,be-Ee,b,Te),Kr(q,oe,3,be-Ae,b,Te)}function co(b,M,q,oe,be){tn(b,M,q,oe),be&&tn(b,M+16,q,oe+4)}function xo(b,M,q,oe){qt(b,M+0,q,oe,1),qt(b,M+32,q,oe+128,1)}function Pi(b,M,q,oe){var be;for(b=b[M+0]+4,be=0;4>be;++be)for(M=0;4>M;++M)_r(q,oe,M,be,b)}function fs(b,M,q,oe){b[M+0]&&Kn(b,M+0,q,oe),b[M+16]&&Kn(b,M+16,q,oe+4),b[M+32]&&Kn(b,M+32,q,oe+128),b[M+48]&&Kn(b,M+48,q,oe+128+4)}function Qo(b,M,q,oe){var be,Ee=s(16);for(be=0;4>be;++be){var Ae=b[M+0+be]+b[M+12+be],Te=b[M+4+be]+b[M+8+be],De=b[M+4+be]-b[M+8+be],Ue=b[M+0+be]-b[M+12+be];Ee[0+be]=Ae+Te,Ee[8+be]=Ae-Te,Ee[4+be]=Ue+De,Ee[12+be]=Ue-De}for(be=0;4>be;++be)Ae=(b=Ee[0+4*be]+3)+Ee[3+4*be],Te=Ee[1+4*be]+Ee[2+4*be],De=Ee[1+4*be]-Ee[2+4*be],Ue=b-Ee[3+4*be],q[oe+0]=Ae+Te>>3,q[oe+16]=Ue+De>>3,q[oe+32]=Ae-Te>>3,q[oe+48]=Ue-De>>3,oe+=64}function Ro(b,M,q){var oe,be=M-32,Ee=Bi,Ae=255-b[be-1];for(oe=0;oe<q;++oe){var Te,De=Ee,Ue=Ae+b[M-1];for(Te=0;Te<q;++Te)b[M+Te]=De[Ue+b[be+Te]];M+=32}}function hi(b,M){Ro(b,M,4)}function Bs(b,M){Ro(b,M,8)}function Fo(b,M){Ro(b,M,16)}function Qi(b,M){var q;for(q=0;16>q;++q)r(b,M+32*q,b,M-32,16)}function Lo(b,M){var q;for(q=16;0<q;--q)i(b,M,b[M-1],16),M+=32}function Vs(b,M,q){var oe;for(oe=0;16>oe;++oe)i(M,q+32*oe,b,16)}function va(b,M){var q,oe=16;for(q=0;16>q;++q)oe+=b[M-1+32*q]+b[M+q-32];Vs(oe>>5,b,M)}function eo(b,M){var q,oe=8;for(q=0;16>q;++q)oe+=b[M-1+32*q];Vs(oe>>4,b,M)}function rl(b,M){var q,oe=8;for(q=0;16>q;++q)oe+=b[M+q-32];Vs(oe>>4,b,M)}function ya(b,M){Vs(128,b,M)}function pr(b,M,q){return b+2*M+q+2>>2}function br(b,M){var q,oe=M-32;for(oe=new Uint8Array([pr(b[oe-1],b[oe+0],b[oe+1]),pr(b[oe+0],b[oe+1],b[oe+2]),pr(b[oe+1],b[oe+2],b[oe+3]),pr(b[oe+2],b[oe+3],b[oe+4])]),q=0;4>q;++q)r(b,M+32*q,oe,0,oe.length)}function Yr(b,M){var q=b[M-1],oe=b[M-1+32],be=b[M-1+64],Ee=b[M-1+96];ke(b,M+0,16843009*pr(b[M-1-32],q,oe)),ke(b,M+32,16843009*pr(q,oe,be)),ke(b,M+64,16843009*pr(oe,be,Ee)),ke(b,M+96,16843009*pr(be,Ee,Ee))}function Tr(b,M){var q,oe=4;for(q=0;4>q;++q)oe+=b[M+q-32]+b[M-1+32*q];for(oe>>=3,q=0;4>q;++q)i(b,M+32*q,oe,4)}function jo(b,M){var q=b[M-1+0],oe=b[M-1+32],be=b[M-1+64],Ee=b[M-1-32],Ae=b[M+0-32],Te=b[M+1-32],De=b[M+2-32],Ue=b[M+3-32];b[M+0+96]=pr(oe,be,b[M-1+96]),b[M+1+96]=b[M+0+64]=pr(q,oe,be),b[M+2+96]=b[M+1+64]=b[M+0+32]=pr(Ee,q,oe),b[M+3+96]=b[M+2+64]=b[M+1+32]=b[M+0+0]=pr(Ae,Ee,q),b[M+3+64]=b[M+2+32]=b[M+1+0]=pr(Te,Ae,Ee),b[M+3+32]=b[M+2+0]=pr(De,Te,Ae),b[M+3+0]=pr(Ue,De,Te)}function il(b,M){var q=b[M+1-32],oe=b[M+2-32],be=b[M+3-32],Ee=b[M+4-32],Ae=b[M+5-32],Te=b[M+6-32],De=b[M+7-32];b[M+0+0]=pr(b[M+0-32],q,oe),b[M+1+0]=b[M+0+32]=pr(q,oe,be),b[M+2+0]=b[M+1+32]=b[M+0+64]=pr(oe,be,Ee),b[M+3+0]=b[M+2+32]=b[M+1+64]=b[M+0+96]=pr(be,Ee,Ae),b[M+3+32]=b[M+2+64]=b[M+1+96]=pr(Ee,Ae,Te),b[M+3+64]=b[M+2+96]=pr(Ae,Te,De),b[M+3+96]=pr(Te,De,De)}function ol(b,M){var q=b[M-1+0],oe=b[M-1+32],be=b[M-1+64],Ee=b[M-1-32],Ae=b[M+0-32],Te=b[M+1-32],De=b[M+2-32],Ue=b[M+3-32];b[M+0+0]=b[M+1+64]=Ee+Ae+1>>1,b[M+1+0]=b[M+2+64]=Ae+Te+1>>1,b[M+2+0]=b[M+3+64]=Te+De+1>>1,b[M+3+0]=De+Ue+1>>1,b[M+0+96]=pr(be,oe,q),b[M+0+64]=pr(oe,q,Ee),b[M+0+32]=b[M+1+96]=pr(q,Ee,Ae),b[M+1+32]=b[M+2+96]=pr(Ee,Ae,Te),b[M+2+32]=b[M+3+96]=pr(Ae,Te,De),b[M+3+32]=pr(Te,De,Ue)}function Hs(b,M){var q=b[M+0-32],oe=b[M+1-32],be=b[M+2-32],Ee=b[M+3-32],Ae=b[M+4-32],Te=b[M+5-32],De=b[M+6-32],Ue=b[M+7-32];b[M+0+0]=q+oe+1>>1,b[M+1+0]=b[M+0+64]=oe+be+1>>1,b[M+2+0]=b[M+1+64]=be+Ee+1>>1,b[M+3+0]=b[M+2+64]=Ee+Ae+1>>1,b[M+0+32]=pr(q,oe,be),b[M+1+32]=b[M+0+96]=pr(oe,be,Ee),b[M+2+32]=b[M+1+96]=pr(be,Ee,Ae),b[M+3+32]=b[M+2+96]=pr(Ee,Ae,Te),b[M+3+64]=pr(Ae,Te,De),b[M+3+96]=pr(Te,De,Ue)}function Ua(b,M){var q=b[M-1+0],oe=b[M-1+32],be=b[M-1+64],Ee=b[M-1+96];b[M+0+0]=q+oe+1>>1,b[M+2+0]=b[M+0+32]=oe+be+1>>1,b[M+2+32]=b[M+0+64]=be+Ee+1>>1,b[M+1+0]=pr(q,oe,be),b[M+3+0]=b[M+1+32]=pr(oe,be,Ee),b[M+3+32]=b[M+1+64]=pr(be,Ee,Ee),b[M+3+64]=b[M+2+64]=b[M+0+96]=b[M+1+96]=b[M+2+96]=b[M+3+96]=Ee}function _u(b,M){var q=b[M-1+0],oe=b[M-1+32],be=b[M-1+64],Ee=b[M-1+96],Ae=b[M-1-32],Te=b[M+0-32],De=b[M+1-32],Ue=b[M+2-32];b[M+0+0]=b[M+2+32]=q+Ae+1>>1,b[M+0+32]=b[M+2+64]=oe+q+1>>1,b[M+0+64]=b[M+2+96]=be+oe+1>>1,b[M+0+96]=Ee+be+1>>1,b[M+3+0]=pr(Te,De,Ue),b[M+2+0]=pr(Ae,Te,De),b[M+1+0]=b[M+3+32]=pr(q,Ae,Te),b[M+1+32]=b[M+3+64]=pr(oe,q,Ae),b[M+1+64]=b[M+3+96]=pr(be,oe,q),b[M+1+96]=pr(Ee,be,oe)}function Ml(b,M){var q;for(q=0;8>q;++q)r(b,M+32*q,b,M-32,8)}function Sr(b,M){var q;for(q=0;8>q;++q)i(b,M,b[M-1],8),M+=32}function Gr(b,M,q){var oe;for(oe=0;8>oe;++oe)i(M,q+32*oe,b,8)}function Va(b,M){var q,oe=8;for(q=0;8>q;++q)oe+=b[M+q-32]+b[M-1+32*q];Gr(oe>>4,b,M)}function Wu(b,M){var q,oe=4;for(q=0;8>q;++q)oe+=b[M+q-32];Gr(oe>>3,b,M)}function Al(b,M){var q,oe=4;for(q=0;8>q;++q)oe+=b[M-1+32*q];Gr(oe>>3,b,M)}function Yl(b,M){Gr(128,b,M)}function sl(b,M,q){var oe=b[M-q],be=b[M+0],Ee=3*(be-oe)+ua[1020+b[M-2*q]-b[M+q]],Ae=po[112+(Ee+4>>3)];b[M-q]=Bi[255+oe+po[112+(Ee+3>>3)]],b[M+0]=Bi[255+be-Ae]}function kl(b,M,q,oe){var be=b[M+0],Ee=b[M+q];return qo[255+b[M-2*q]-b[M-q]]>oe||qo[255+Ee-be]>oe}function Jl(b,M,q,oe){return 4*qo[255+b[M-q]-b[M+0]]+qo[255+b[M-2*q]-b[M+q]]<=oe}function Jr(b,M,q,oe,be){var Ee=b[M-3*q],Ae=b[M-2*q],Te=b[M-q],De=b[M+0],Ue=b[M+q],ht=b[M+2*q],Nt=b[M+3*q];return 4*qo[255+Te-De]+qo[255+Ae-Ue]>oe?0:qo[255+b[M-4*q]-Ee]<=be&&qo[255+Ee-Ae]<=be&&qo[255+Ae-Te]<=be&&qo[255+Nt-ht]<=be&&qo[255+ht-Ue]<=be&&qo[255+Ue-De]<=be}function to(b,M,q,oe){var be=2*oe+1;for(oe=0;16>oe;++oe)Jl(b,M+oe,q,be)&&sl(b,M+oe,q)}function or(b,M,q,oe){var be=2*oe+1;for(oe=0;16>oe;++oe)Jl(b,M+oe*q,1,be)&&sl(b,M+oe*q,1)}function no(b,M,q,oe){var be;for(be=3;0<be;--be)to(b,M+=4*q,q,oe)}function al(b,M,q,oe){var be;for(be=3;0<be;--be)or(b,M+=4,q,oe)}function _a(b,M,q,oe,be,Ee,Ae,Te){for(Ee=2*Ee+1;0<be--;){if(Jr(b,M,q,Ee,Ae))if(kl(b,M,q,Te))sl(b,M,q);else{var De=b,Ue=M,ht=q,Nt=De[Ue-2*ht],Dt=De[Ue-ht],wt=De[Ue+0],Yt=De[Ue+ht],$t=De[Ue+2*ht],dt=27*(en=ua[1020+3*(wt-Dt)+ua[1020+Nt-Yt]])+63>>7,yt=18*en+63>>7,en=9*en+63>>7;De[Ue-3*ht]=Bi[255+De[Ue-3*ht]+en],De[Ue-2*ht]=Bi[255+Nt+yt],De[Ue-ht]=Bi[255+Dt+dt],De[Ue+0]=Bi[255+wt-dt],De[Ue+ht]=Bi[255+Yt-yt],De[Ue+2*ht]=Bi[255+$t-en]}M+=oe}}function $i(b,M,q,oe,be,Ee,Ae,Te){for(Ee=2*Ee+1;0<be--;){if(Jr(b,M,q,Ee,Ae))if(kl(b,M,q,Te))sl(b,M,q);else{var De=b,Ue=M,ht=q,Nt=De[Ue-ht],Dt=De[Ue+0],wt=De[Ue+ht],Yt=po[112+(($t=3*(Dt-Nt))+4>>3)],$t=po[112+($t+3>>3)],dt=Yt+1>>1;De[Ue-2*ht]=Bi[255+De[Ue-2*ht]+dt],De[Ue-ht]=Bi[255+Nt+$t],De[Ue+0]=Bi[255+Dt-Yt],De[Ue+ht]=Bi[255+wt-dt]}M+=oe}}function Xl(b,M,q,oe,be,Ee){_a(b,M,q,1,16,oe,be,Ee)}function ta(b,M,q,oe,be,Ee){_a(b,M,1,q,16,oe,be,Ee)}function Tl(b,M,q,oe,be,Ee){var Ae;for(Ae=3;0<Ae;--Ae)$i(b,M+=4*q,q,1,16,oe,be,Ee)}function Nl(b,M,q,oe,be,Ee){var Ae;for(Ae=3;0<Ae;--Ae)$i(b,M+=4,1,q,16,oe,be,Ee)}function Os(b,M,q,oe,be,Ee,Ae,Te){_a(b,M,be,1,8,Ee,Ae,Te),_a(q,oe,be,1,8,Ee,Ae,Te)}function Dl(b,M,q,oe,be,Ee,Ae,Te){_a(b,M,1,be,8,Ee,Ae,Te),_a(q,oe,1,be,8,Ee,Ae,Te)}function _i(b,M,q,oe,be,Ee,Ae,Te){$i(b,M+4*be,be,1,8,Ee,Ae,Te),$i(q,oe+4*be,be,1,8,Ee,Ae,Te)}function Zu(b,M,q,oe,be,Ee,Ae,Te){$i(b,M+4,1,be,8,Ee,Ae,Te),$i(q,oe+4,1,be,8,Ee,Ae,Te)}function Mo(){this.ba=new cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qs(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new I}function ll(){this.xb=this.a=0,this.l=new ui,this.ca=new cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new N,this.Pb=0,this.wd=new N,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qs,this.ab=0,this.gc=o(4,Bl),this.Oc=0}function ul(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ui,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function bi(b,M,q,oe,be,Ee,Ae){for(b=b==null?0:b[M+0],M=0;M<Ae;++M)be[Ee+M]=b+q[oe+M]&255,b=be[Ee+M]}function Es(b,M,q,oe,be,Ee,Ae){var Te;if(b==null)bi(null,null,q,oe,be,Ee,Ae);else for(Te=0;Te<Ae;++Te)be[Ee+Te]=b[M+Te]+q[oe+Te]&255}function ba(b,M,q,oe,be,Ee,Ae){if(b==null)bi(null,null,q,oe,be,Ee,Ae);else{var Te,De=b[M+0],Ue=De,ht=De;for(Te=0;Te<Ae;++Te)Ue=ht+(De=b[M+Te])-Ue,ht=q[oe+Te]+(-256&Ue?0>Ue?0:255:Ue)&255,Ue=De,be[Ee+Te]=ht}}function ro(b,M,q,oe){var be=M.width,Ee=M.o;if(n(b!=null&&M!=null),0>q||0>=oe||q+oe>Ee)return null;if(!b.Cc){if(b.ga==null){var Ae;if(b.ga=new ul,(Ae=b.ga==null)||(Ae=M.width*M.o,n(b.Gb.length==0),b.Gb=s(Ae),b.Uc=0,b.Gb==null?Ae=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=b.ga;var Te=b.Fa,De=b.P,Ue=b.qc,ht=b.mb,Nt=b.nb,Dt=De+1,wt=Ue-1,Yt=Ae.l;if(n(Te!=null&&ht!=null&&M!=null),gi[0]=null,gi[1]=bi,gi[2]=Es,gi[3]=ba,Ae.ca=ht,Ae.tb=Nt,Ae.c=M.width,Ae.i=M.height,n(0<Ae.c&&0<Ae.i),1>=Ue)M=0;else if(Ae.$a=Te[De+0]>>0&3,Ae.Z=Te[De+0]>>2&3,Ae.Lc=Te[De+0]>>4&3,De=Te[De+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||De)M=0;else if(Yt.put=Zn,Yt.ac=tr,Yt.bc=Wt,Yt.ma=Ae,Yt.width=M.width,Yt.height=M.height,Yt.Da=M.Da,Yt.v=M.v,Yt.va=M.va,Yt.j=M.j,Yt.o=M.o,Ae.$a)e:{n(Ae.$a==1),M=ir();t:for(;;){if(M==null){M=0;break e}if(n(Ae!=null),Ae.mc=M,M.c=Ae.c,M.i=Ae.i,M.l=Ae.l,M.l.ma=Ae,M.l.width=Ae.c,M.l.height=Ae.i,M.a=0,re(M.m,Te,Dt,wt),!Br(Ae.c,Ae.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Di(M.s)?(Ae.ic=1,Te=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(Te),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Ae.ic=0,M=jr(M,Ae.c)),!M))break t;M=1;break e}Ae.mc=null,M=0}else M=wt>=Ae.c*Ae.i;Ae=!M}if(Ae)return null;b.ga.Lc!=1?b.Ga=0:oe=Ee-q}n(b.ga!=null),n(q+oe<=Ee);e:{if(M=(Te=b.ga).c,Ee=Te.l.o,Te.$a==0){if(Dt=b.rc,wt=b.Vc,Yt=b.Fa,De=b.P+1+q*M,Ue=b.mb,ht=b.nb+q*M,n(De<=b.P+b.qc),Te.Z!=0)for(n(gi[Te.Z]!=null),Ae=0;Ae<oe;++Ae)gi[Te.Z](Dt,wt,Yt,De,Ue,ht,M),Dt=Ue,wt=ht,ht+=M,De+=M;else for(Ae=0;Ae<oe;++Ae)r(Ue,ht,Yt,De,M),Dt=Ue,wt=ht,ht+=M,De+=M;b.rc=Dt,b.Vc=wt}else{if(n(Te.mc!=null),M=q+oe,n((Ae=Te.mc)!=null),n(M<=Ae.i),Ae.C>=M)M=1;else if(Te.ic||xt(),Te.ic){Te=Ae.V,Dt=Ae.Ba,wt=Ae.c;var $t=Ae.i,dt=(Yt=1,De=Ae.$/wt,Ue=Ae.$%wt,ht=Ae.m,Nt=Ae.s,Ae.$),yt=wt*$t,en=wt*M,fn=Nt.wc,nn=dt<en?at(Nt,Ue,De):null;n(dt<=yt),n(M<=$t),n(Di(Nt));t:for(;;){for(;!ht.h&&dt<en;){if(Ue&fn||(nn=at(Nt,Ue,De)),n(nn!=null),ye(ht),256>($t=Ln(nn.G[0],nn.H[0],ht)))Te[Dt+dt]=$t,++dt,++Ue>=wt&&(Ue=0,++De<=M&&!(De%16)&&Er(Ae,De));else{if(!(280>$t)){Yt=0;break t}$t=It($t-256,ht);var kn,Sn=Ln(nn.G[4],nn.H[4],ht);if(ye(ht),!(dt>=(Sn=Kt(wt,Sn=It(Sn,ht)))&&yt-dt>=$t)){Yt=0;break t}for(kn=0;kn<$t;++kn)Te[Dt+dt+kn]=Te[Dt+dt+kn-Sn];for(dt+=$t,Ue+=$t;Ue>=wt;)Ue-=wt,++De<=M&&!(De%16)&&Er(Ae,De);dt<en&&Ue&fn&&(nn=at(Nt,Ue,De))}n(ht.h==fe(ht))}Er(Ae,De>M?M:De);break t}!Yt||ht.h&&dt<yt?(Yt=0,Ae.a=ht.h?5:3):Ae.$=dt,M=Yt}else M=lr(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,M,rn);if(!M){oe=0;break e}}q+oe>=Ee&&(b.Cc=1),oe=1}if(!oe)return null;if(b.Cc&&((oe=b.ga)!=null&&(oe.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+q*be}function B(b,M,q,oe,be,Ee){for(;0<be--;){var Ae,Te=b,De=M+(q?1:0),Ue=b,ht=M+(q?0:3);for(Ae=0;Ae<oe;++Ae){var Nt=Ue[ht+4*Ae];Nt!=255&&(Nt*=32897,Te[De+4*Ae+0]=Te[De+4*Ae+0]*Nt>>23,Te[De+4*Ae+1]=Te[De+4*Ae+1]*Nt>>23,Te[De+4*Ae+2]=Te[De+4*Ae+2]*Nt>>23)}M+=Ee}}function _e(b,M,q,oe,be){for(;0<oe--;){var Ee;for(Ee=0;Ee<q;++Ee){var Ae=b[M+2*Ee+0],Te=15&(Ue=b[M+2*Ee+1]),De=4369*Te,Ue=(240&Ue|Ue>>4)*De>>16;b[M+2*Ee+0]=(240&Ae|Ae>>4)*De>>16&240|(15&Ae|Ae<<4)*De>>16>>4&15,b[M+2*Ee+1]=240&Ue|Te}M+=be}}function Ze(b,M,q,oe,be,Ee,Ae,Te){var De,Ue,ht=255;for(Ue=0;Ue<be;++Ue){for(De=0;De<oe;++De){var Nt=b[M+De];Ee[Ae+4*De]=Nt,ht&=Nt}M+=q,Ae+=Te}return ht!=255}function ct(b,M,q,oe,be){var Ee;for(Ee=0;Ee<be;++Ee)q[oe+Ee]=b[M+Ee]>>8}function xt(){ko=B,Li=_e,Mi=Ze,oo=ct}function jt(b,M,q){W[b]=function(oe,be,Ee,Ae,Te,De,Ue,ht,Nt,Dt,wt,Yt,$t,dt,yt,en,fn){var nn,kn=fn-1>>1,Sn=Te[De+0]|Ue[ht+0]<<16,Xn=Nt[Dt+0]|wt[Yt+0]<<16;n(oe!=null);var l=3*Sn+Xn+131074>>2;for(M(oe[be+0],255&l,l>>16,$t,dt),Ee!=null&&(l=3*Xn+Sn+131074>>2,M(Ee[Ae+0],255&l,l>>16,yt,en)),nn=1;nn<=kn;++nn){var h=Te[De+nn]|Ue[ht+nn]<<16,v=Nt[Dt+nn]|wt[Yt+nn]<<16,w=Sn+h+Xn+v+524296,C=w+2*(h+Xn)>>3;l=C+Sn>>1,Sn=(w=w+2*(Sn+v)>>3)+h>>1,M(oe[be+2*nn-1],255&l,l>>16,$t,dt+(2*nn-1)*q),M(oe[be+2*nn-0],255&Sn,Sn>>16,$t,dt+(2*nn-0)*q),Ee!=null&&(l=w+Xn>>1,Sn=C+v>>1,M(Ee[Ae+2*nn-1],255&l,l>>16,yt,en+(2*nn-1)*q),M(Ee[Ae+2*nn+0],255&Sn,Sn>>16,yt,en+(2*nn+0)*q)),Sn=h,Xn=v}1&fn||(l=3*Sn+Xn+131074>>2,M(oe[be+fn-1],255&l,l>>16,$t,dt+(fn-1)*q),Ee!=null&&(l=3*Xn+Sn+131074>>2,M(Ee[Ae+fn-1],255&l,l>>16,yt,en+(fn-1)*q)))}}function un(){Wo[ps]=Ne,Wo[dr]=xu,Wo[Ca]=ms,Wo[Ea]=Bo,Wo[Zs]=Vr,Wo[is]=qc,Wo[bc]=uh,Wo[To]=xu,Wo[No]=Bo,Wo[Ks]=Vr,Wo[a]=qc}function Nn(b){return b&-16384?0>b?0:255:b>>pd}function jn(b,M){return Nn((19077*b>>8)+(26149*M>>8)-14234)}function nr(b,M,q){return Nn((19077*b>>8)-(6419*M>>8)-(13320*q>>8)+8708)}function vr(b,M){return Nn((19077*b>>8)+(33050*M>>8)-17685)}function $r(b,M,q,oe,be){oe[be+0]=jn(b,q),oe[be+1]=nr(b,M,q),oe[be+2]=vr(b,M)}function ji(b,M,q,oe,be){oe[be+0]=vr(b,M),oe[be+1]=nr(b,M,q),oe[be+2]=jn(b,q)}function di(b,M,q,oe,be){var Ee=nr(b,M,q);M=Ee<<3&224|vr(b,M)>>3,oe[be+0]=248&jn(b,q)|Ee>>5,oe[be+1]=M}function wi(b,M,q,oe,be){var Ee=240&vr(b,M)|15;oe[be+0]=240&jn(b,q)|nr(b,M,q)>>4,oe[be+1]=Ee}function io(b,M,q,oe,be){oe[be+0]=255,$r(b,M,q,oe,be+1)}function fo(b,M,q,oe,be){ji(b,M,q,oe,be),oe[be+3]=255}function Ps(b,M,q,oe,be){$r(b,M,q,oe,be),oe[be+3]=255}function Ur(b,M){return 0>b?0:b>M?M:b}function zo(b,M,q){W[b]=function(oe,be,Ee,Ae,Te,De,Ue,ht,Nt){for(var Dt=ht+(-2&Nt)*q;ht!=Dt;)M(oe[be+0],Ee[Ae+0],Te[De+0],Ue,ht),M(oe[be+1],Ee[Ae+0],Te[De+0],Ue,ht+q),be+=2,++Ae,++De,ht+=2*q;1&Nt&&M(oe[be+0],Ee[Ae+0],Te[De+0],Ue,ht)}}function cl(b,M,q){return q==0?b==0?M==0?6:5:M==0?4:0:q}function es(b,M,q,oe,be){switch(b>>>30){case 3:qt(M,q,oe,be,0);break;case 2:Mt(M,q,oe,be);break;case 1:Kn(M,q,oe,be)}}function Ql(b,M){var q,oe,be=M.M,Ee=M.Nb,Ae=b.oc,Te=b.pc+40,De=b.oc,Ue=b.pc+584,ht=b.oc,Nt=b.pc+600;for(q=0;16>q;++q)Ae[Te+32*q-1]=129;for(q=0;8>q;++q)De[Ue+32*q-1]=129,ht[Nt+32*q-1]=129;for(0<be?Ae[Te-1-32]=De[Ue-1-32]=ht[Nt-1-32]=129:(i(Ae,Te-32-1,127,21),i(De,Ue-32-1,127,9),i(ht,Nt-32-1,127,9)),oe=0;oe<b.za;++oe){var Dt=M.ya[M.aa+oe];if(0<oe){for(q=-1;16>q;++q)r(Ae,Te+32*q-4,Ae,Te+32*q+12,4);for(q=-1;8>q;++q)r(De,Ue+32*q-4,De,Ue+32*q+4,4),r(ht,Nt+32*q-4,ht,Nt+32*q+4,4)}var wt=b.Gd,Yt=b.Hd+oe,$t=Dt.ad,dt=Dt.Hc;if(0<be&&(r(Ae,Te-32,wt[Yt].y,0,16),r(De,Ue-32,wt[Yt].f,0,8),r(ht,Nt-32,wt[Yt].ea,0,8)),Dt.Za){var yt=Ae,en=Te-32+16;for(0<be&&(oe>=b.za-1?i(yt,en,wt[Yt].y[15],4):r(yt,en,wt[Yt+1].y,0,4)),q=0;4>q;q++)yt[en+128+q]=yt[en+256+q]=yt[en+384+q]=yt[en+0+q];for(q=0;16>q;++q,dt<<=2)yt=Ae,en=Te+fh[q],Ys[Dt.Ob[q]](yt,en),es(dt,$t,16*+q,yt,en)}else if(yt=cl(oe,be,Dt.Ob[0]),ca[yt](Ae,Te),dt!=0)for(q=0;16>q;++q,dt<<=2)es(dt,$t,16*+q,Ae,Te+fh[q]);for(q=Dt.Gc,yt=cl(oe,be,Dt.Dd),Rs[yt](De,Ue),Rs[yt](ht,Nt),dt=$t,yt=De,en=Ue,255&(Dt=q>>0)&&(170&Dt?An(dt,256,yt,en):wr(dt,256,yt,en)),Dt=ht,dt=Nt,255&(q>>=8)&&(170&q?An($t,320,Dt,dt):wr($t,320,Dt,dt)),be<b.Ub-1&&(r(wt[Yt].y,0,Ae,Te+480,16),r(wt[Yt].f,0,De,Ue+224,8),r(wt[Yt].ea,0,ht,Nt+224,8)),q=8*Ee*b.B,wt=b.sa,Yt=b.ta+16*oe+16*Ee*b.R,$t=b.qa,Dt=b.ra+8*oe+q,dt=b.Ha,yt=b.Ia+8*oe+q,q=0;16>q;++q)r(wt,Yt+q*b.R,Ae,Te+32*q,16);for(q=0;8>q;++q)r($t,Dt+q*b.B,De,Ue+32*q,8),r(dt,yt+q*b.B,ht,Nt+32*q,8)}}function na(b,M,q,oe,be,Ee,Ae,Te,De){var Ue=[0],ht=[0],Nt=0,Dt=De!=null?De.kd:0,wt=De??new Gs;if(b==null||12>q)return 7;wt.data=b,wt.w=M,wt.ha=q,M=[M],q=[q],wt.gb=[wt.gb];e:{var Yt=M,$t=q,dt=wt.gb;if(n(b!=null),n($t!=null),n(dt!=null),dt[0]=0,12<=$t[0]&&!t(b,Yt[0],"RIFF")){if(t(b,Yt[0]+8,"WEBP")){dt=3;break e}var yt=Z(b,Yt[0]+4);if(12>yt||4294967286<yt){dt=3;break e}if(Dt&&yt>$t[0]-8){dt=7;break e}dt[0]=yt,Yt[0]+=12,$t[0]-=12}dt=0}if(dt!=0)return dt;for(yt=0<wt.gb[0],q=q[0];;){e:{var en=b;$t=M,dt=q;var fn=Ue,nn=ht,kn=Yt=[0];if((l=Nt=[Nt])[0]=0,8>dt[0])dt=7;else{if(!t(en,$t[0],"VP8X")){if(Z(en,$t[0]+4)!=10){dt=3;break e}if(18>dt[0]){dt=7;break e}var Sn=Z(en,$t[0]+8),Xn=1+Ve(en,$t[0]+12);if(2147483648<=Xn*(en=1+Ve(en,$t[0]+15))){dt=3;break e}kn!=null&&(kn[0]=Sn),fn!=null&&(fn[0]=Xn),nn!=null&&(nn[0]=en),$t[0]+=18,dt[0]-=18,l[0]=1}dt=0}}if(Nt=Nt[0],Yt=Yt[0],dt!=0)return dt;if($t=!!(2&Yt),!yt&&Nt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Yt)),Ae!=null&&(Ae[0]=$t),Te!=null&&(Te[0]=0),Ae=Ue[0],Yt=ht[0],Nt&&$t&&De==null){dt=0;break}if(4>q){dt=7;break}if(yt&&Nt||!yt&&!Nt&&!t(b,M[0],"ALPH")){q=[q],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{Sn=b,dt=M,yt=q;var l=wt.gb;fn=wt.na,nn=wt.P,kn=wt.Sa,Xn=22,n(Sn!=null),n(yt!=null),en=dt[0];var h=yt[0];for(n(fn!=null),n(kn!=null),fn[0]=null,nn[0]=null,kn[0]=0;;){if(dt[0]=en,yt[0]=h,8>h){dt=7;break e}var v=Z(Sn,en+4);if(4294967286<v){dt=3;break e}var w=8+v+1&-2;if(Xn+=w,0<l&&Xn>l){dt=3;break e}if(!t(Sn,en,"VP8 ")||!t(Sn,en,"VP8L")){dt=0;break e}if(h[0]<w){dt=7;break e}t(Sn,en,"ALPH")||(fn[0]=Sn,nn[0]=en+8,kn[0]=v),en+=w,h-=w}}if(q=q[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],dt!=0)break}q=[q],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(l=b,dt=M,yt=q,fn=wt.gb[0],nn=wt.Ja,kn=wt.xa,Sn=dt[0],en=!t(l,Sn,"VP8 "),Xn=!t(l,Sn,"VP8L"),n(l!=null),n(yt!=null),n(nn!=null),n(kn!=null),8>yt[0])dt=7;else{if(en||Xn){if(l=Z(l,Sn+4),12<=fn&&l>fn-12){dt=3;break e}if(Dt&&l>yt[0]-8){dt=7;break e}nn[0]=l,dt[0]+=8,yt[0]-=8,kn[0]=Xn}else kn[0]=5<=yt[0]&&l[Sn+0]==47&&!(l[Sn+4]>>5),nn[0]=yt[0];dt=0}if(q=q[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],M=M[0],dt!=0)break;if(4294967286<wt.Ja)return 3;if(Te==null||$t||(Te[0]=wt.xa?2:1),Ae=[Ae],Yt=[Yt],wt.xa){if(5>q){dt=7;break}Te=Ae,Dt=Yt,$t=Ee,b==null||5>q?b=0:5<=q&&b[M+0]==47&&!(b[M+4]>>5)?(yt=[0],l=[0],fn=[0],re(nn=new N,b,M,q),mn(nn,yt,l,fn)?(Te!=null&&(Te[0]=yt[0]),Dt!=null&&(Dt[0]=l[0]),$t!=null&&($t[0]=fn[0]),b=1):b=0):b=0}else{if(10>q){dt=7;break}Te=Yt,b==null||10>q||!bo(b,M+3,q-3)?b=0:(Dt=b[M+0]|b[M+1]<<8|b[M+2]<<16,$t=16383&(b[M+7]<<8|b[M+6]),b=16383&(b[M+9]<<8|b[M+8]),1&Dt||3<(Dt>>1&7)||!(Dt>>4&1)||Dt>>5>=wt.Ja||!$t||!b?b=0:(Ae&&(Ae[0]=$t),Te&&(Te[0]=b),b=1))}if(!b||(Ae=Ae[0],Yt=Yt[0],Nt&&(Ue[0]!=Ae||ht[0]!=Yt)))return 3;De!=null&&(De[0]=wt,De.offset=M-De.w,n(4294967286>M-De.w),n(De.offset==De.ha-q));break}return dt==0||dt==7&&Nt&&De==null?(Ee!=null&&(Ee[0]|=wt.na!=null&&0<wt.na.length),oe!=null&&(oe[0]=Ae),be!=null&&(be[0]=Yt),0):dt}function bu(b,M,q){var oe=M.width,be=M.height,Ee=0,Ae=0,Te=oe,De=be;if(M.Da=b!=null&&0<b.Da,M.Da&&(Te=b.cd,De=b.bd,Ee=b.v,Ae=b.j,11>q||(Ee&=-2,Ae&=-2),0>Ee||0>Ae||0>=Te||0>=De||Ee+Te>oe||Ae+De>be))return 0;if(M.v=Ee,M.j=Ae,M.va=Ee+Te,M.o=Ae+De,M.U=Te,M.T=De,M.da=b!=null&&0<b.da,M.da){if(!ze(Te,De,q=[b.ib],Ee=[b.hb]))return 0;M.ib=q[0],M.hb=Ee[0]}return M.ob=b!=null&&b.ob,M.Kb=b==null||!b.Sd,M.da&&(M.ob=M.ib<3*oe/4&&M.hb<3*be/4,M.Kb=0),1}function Ha(b){if(b==null)return 2;if(11>b.S){var M=b.f.RGBA;M.fb+=(b.height-1)*M.A,M.A=-M.A}else M=b.f.kb,b=b.height,M.O+=(b-1)*M.fa,M.fa=-M.fa,M.N+=(b-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(b-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(b-1)*M.lb,M.lb=-M.lb);return 0}function Ga(b,M,q,oe){if(oe==null||0>=b||0>=M)return 2;if(q!=null){if(q.Da){var be=q.cd,Ee=q.bd,Ae=-2&q.v,Te=-2&q.j;if(0>Ae||0>Te||0>=be||0>=Ee||Ae+be>b||Te+Ee>M)return 2;b=be,M=Ee}if(q.da){if(!ze(b,M,be=[q.ib],Ee=[q.hb]))return 2;b=be[0],M=Ee[0]}}oe.width=b,oe.height=M;e:{var De=oe.width,Ue=oe.height;if(b=oe.S,0>=De||0>=Ue||!(b>=ps&&13>b))b=2;else{if(0>=oe.Rd&&oe.sd==null){Ae=Ee=be=M=0;var ht=(Te=De*ph[b])*Ue;if(11>b||(Ee=(Ue+1)/2*(M=(De+1)/2),b==12&&(Ae=(be=De)*Ue)),(Ue=s(ht+2*Ee+Ae))==null){b=1;break e}oe.sd=Ue,11>b?((De=oe.f.RGBA).eb=Ue,De.fb=0,De.A=Te,De.size=ht):((De=oe.f.kb).y=Ue,De.O=0,De.fa=Te,De.Fd=ht,De.f=Ue,De.N=0+ht,De.Ab=M,De.Cd=Ee,De.ea=Ue,De.W=0+ht+Ee,De.Db=M,De.Ed=Ee,b==12&&(De.F=Ue,De.J=0+ht+2*Ee),De.Tc=Ae,De.lb=be)}if(M=1,be=oe.S,Ee=oe.width,Ae=oe.height,be>=ps&&13>be)if(11>be)b=oe.f.RGBA,M&=(Te=Math.abs(b.A))*(Ae-1)+Ee<=b.size,M&=Te>=Ee*ph[be],M&=b.eb!=null;else{b=oe.f.kb,Te=(Ee+1)/2,ht=(Ae+1)/2,De=Math.abs(b.fa),Ue=Math.abs(b.Ab);var Nt=Math.abs(b.Db),Dt=Math.abs(b.lb),wt=Dt*(Ae-1)+Ee;M&=De*(Ae-1)+Ee<=b.Fd,M&=Ue*(ht-1)+Te<=b.Cd,M=(M&=Nt*(ht-1)+Te<=b.Ed)&De>=Ee&Ue>=Te&Nt>=Te,M&=b.y!=null,M&=b.f!=null,M&=b.ea!=null,be==12&&(M&=Dt>=Ee,M&=wt<=b.Tc,M&=b.F!=null)}else M=0;b=M?0:2}}return b!=0||q!=null&&q.fd&&(b=Ha(oe)),b}var ho=64,ra=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ms=24,hs=32,fl=8,$o=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),W.Predictor0=function(){return 4278190080},W.Predictor1=function(b){return b},W.Predictor2=function(b,M,q){return M[q+0]},W.Predictor3=function(b,M,q){return M[q+1]},W.Predictor4=function(b,M,q){return M[q-1]},W.Predictor5=function(b,M,q){return ot(ot(b,M[q+1]),M[q+0])},W.Predictor6=function(b,M,q){return ot(b,M[q-1])},W.Predictor7=function(b,M,q){return ot(b,M[q+0])},W.Predictor8=function(b,M,q){return ot(M[q-1],M[q+0])},W.Predictor9=function(b,M,q){return ot(M[q+0],M[q+1])},W.Predictor10=function(b,M,q){return ot(ot(b,M[q-1]),ot(M[q+0],M[q+1]))},W.Predictor11=function(b,M,q){var oe=M[q+0];return 0>=Ut(oe>>24&255,b>>24&255,(M=M[q-1])>>24&255)+Ut(oe>>16&255,b>>16&255,M>>16&255)+Ut(oe>>8&255,b>>8&255,M>>8&255)+Ut(255&oe,255&b,255&M)?oe:b},W.Predictor12=function(b,M,q){var oe=M[q+0];return(kt((b>>24&255)+(oe>>24&255)-((M=M[q-1])>>24&255))<<24|kt((b>>16&255)+(oe>>16&255)-(M>>16&255))<<16|kt((b>>8&255)+(oe>>8&255)-(M>>8&255))<<8|kt((255&b)+(255&oe)-(255&M)))>>>0},W.Predictor13=function(b,M,q){var oe=M[q-1];return(Ct((b=ot(b,M[q+0]))>>24&255,oe>>24&255)<<24|Ct(b>>16&255,oe>>16&255)<<16|Ct(b>>8&255,oe>>8&255)<<8|Ct(b>>0&255,oe>>0&255))>>>0};var ts=W.PredictorAdd0;W.PredictorAdd1=Gt,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var ns=W.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Ku,So=W.ColorIndexInverseTransform,wa=W.MapARGB,Uo=W.VP8LColorIndexInverseTransformAlpha,Vo=W.MapAlpha,xa=W.VP8LPredictorsAdd=[];xa.length=16,(W.VP8LPredictors=[]).length=16,(W.VP8LPredictorsAdd_C=[]).length=16,(W.VP8LPredictors_C=[]).length=16;var La,Ho,Ao,ia,As,Go,_t,qt,Mt,An,Kn,wr,Ui,xi,Ol,rs,Vi,oa,Sa,sa,aa,la,Xr,Ws,ko,Li,Mi,oo,Oi=s(511),ks=s(2041),ds=s(225),Is=s(767),wu=0,ua=ks,po=ds,Bi=Is,qo=Oi,ps=0,dr=1,Ca=2,Ea=3,Zs=4,is=5,bc=6,To=7,No=8,Ks=9,a=10,p=[2,3,7],S=[3,3,11],G=[280,256,256,256,40],ie=[0,1,1,1,0],Ce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],st=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],zt=8,sn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Jn=null,zr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],go=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Do=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],Ys=[],Rs=[],Af=1,eu=2,gi=[],Wo=[];jt("UpsampleRgbLinePair",$r,3),jt("UpsampleBgrLinePair",ji,3),jt("UpsampleRgbaLinePair",Ps,4),jt("UpsampleBgraLinePair",fo,4),jt("UpsampleArgbLinePair",io,4),jt("UpsampleRgba4444LinePair",wi,2),jt("UpsampleRgb565LinePair",di,2);var Ne=W.UpsampleRgbLinePair,ms=W.UpsampleBgrLinePair,xu=W.UpsampleRgbaLinePair,Bo=W.UpsampleBgraLinePair,Vr=W.UpsampleArgbLinePair,qc=W.UpsampleRgba4444LinePair,uh=W.UpsampleRgb565LinePair,Wc=16,qa=1<<Wc-1,xc=-227,kf=482,pd=6,Yu=0,Zc=s(256),Il=s(256),gd=s(256),Kc=s(256),Yc=s(kf-xc),ch=s(kf-xc);zo("YuvToRgbRow",$r,3),zo("YuvToBgrRow",ji,3),zo("YuvToRgbaRow",Ps,4),zo("YuvToBgraRow",fo,4),zo("YuvToArgbRow",io,4),zo("YuvToRgba4444Row",wi,2),zo("YuvToRgb565Row",di,2);var fh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pa=[0,2,8],hh=[8,7,6,4,4,2,2,2,1,1,1,1],dh=1;this.WebPDecodeRGBA=function(b,M,q,oe,be){var Ee=dr,Ae=new Mo,Te=new cr;Ae.ba=Te,Te.S=Ee,Te.width=[Te.width],Te.height=[Te.height];var De=Te.width,Ue=Te.height,ht=new yr;if(ht==null||b==null)var Nt=2;else n(ht!=null),Nt=na(b,M,q,ht.width,ht.height,ht.Pd,ht.Qd,ht.format,null);if(Nt!=0?De=0:(De!=null&&(De[0]=ht.width[0]),Ue!=null&&(Ue[0]=ht.height[0]),De=1),De){Te.width=Te.width[0],Te.height=Te.height[0],oe!=null&&(oe[0]=Te.width),be!=null&&(be[0]=Te.height);e:{if(oe=new ui,(be=new Gs).data=b,be.w=M,be.ha=q,be.kd=1,M=[0],n(be!=null),((b=na(be.data,be.w,be.ha,null,null,null,M,null,be))==0||b==7)&&M[0]&&(b=4),(M=b)==0){if(n(Ae!=null),oe.data=be.data,oe.w=be.w+be.offset,oe.ha=be.ha-be.offset,oe.put=Zn,oe.ac=tr,oe.bc=Wt,oe.ma=Ae,be.xa){if((b=ir())==null){Ae=1;break e}if(function(Dt,wt){var Yt=[0],$t=[0],dt=[0];t:for(;;){if(Dt==null)return 0;if(wt==null)return Dt.a=2,0;if(Dt.l=wt,Dt.a=0,re(Dt.m,wt.data,wt.w,wt.ha),!mn(Dt.m,Yt,$t,dt)){Dt.a=3;break t}if(Dt.xb=eu,wt.width=Yt[0],wt.height=$t[0],!Br(Yt[0],$t[0],1,Dt,null))break t;return 1}return n(Dt.a!=0),0}(b,oe)){if(oe=(M=Ga(oe.width,oe.height,Ae.Oa,Ae.ba))==0){t:{oe=b;n:for(;;){if(oe==null){oe=0;break t}if(n(oe.s.yc!=null),n(oe.s.Ya!=null),n(0<oe.s.Wb),n((q=oe.l)!=null),n((be=q.ma)!=null),oe.xb!=0){if(oe.ca=be.ba,oe.tb=be.tb,n(oe.ca!=null),!bu(be.Oa,q,Ea)){oe.a=2;break n}if(!jr(oe,q.width)||q.da)break n;if((q.da||xn(oe.ca.S))&&xt(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&xt()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!de(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break n}oe.xb=0}if(!lr(oe,oe.V,oe.Ba,oe.c,oe.i,q.o,xr))break n;be.Dc=oe.Ma,oe=1;break t}n(oe.a!=0),oe=0}oe=!oe}oe&&(M=b.a)}else M=b.a}else{if((b=new fr)==null){Ae=1;break e}if(b.Fa=be.na,b.P=be.P,b.qc=be.Sa,wo(b,oe)){if((M=Ga(oe.width,oe.height,Ae.Oa,Ae.ba))==0){if(b.Aa=0,q=Ae.Oa,n((be=b)!=null),q!=null){if(0<(De=0>(De=q.Md)?0:100<De?255:255*De/100)){for(Ue=ht=0;4>Ue;++Ue)12>(Nt=be.pb[Ue]).lc&&(Nt.ia=De*hh[0>Nt.lc?0:Nt.lc]>>3),ht|=Nt.ia;ht&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=q.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}Hn(b,oe)||(M=b.a)}}else M=b.a}M==0&&Ae.Oa!=null&&Ae.Oa.fd&&(M=Ha(Ae.ba))}Ae=M}Ee=Ae!=0?null:11>Ee?Te.f.RGBA.eb:Te.f.kb.y}else Ee=null;return Ee};var ph=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(W,V){for(var Y="",F=0;F<4;F++)Y+=String.fromCharCode(W[V++]);return Y}function g(W,V){return(W[V+0]<<0|W[V+1]<<8|W[V+2]<<16)>>>0}function y(W,V){return(W[V+0]<<0|W[V+1]<<8|W[V+2]<<16|W[V+3]<<24)>>>0}new f;var x=[0],_=[0],E=[],T=new f,D=e,O=function(W,V){var Y={},F=0,I=!1,j=0,H=0;if(Y.frames=[],!function(ee,fe,ce,ye){for(var se=0;se<ye;se++)if(ee[fe+se]!=ce.charCodeAt(se))return!0;return!1}(W,V,"RIFF",4)){var U,R;for(y(W,V+=4),V+=8;V<W.length;){var te=d(W,V),re=y(W,V+=4);V+=4;var me=re+(1&re);switch(te){case"VP8 ":case"VP8L":Y.frames[F]===void 0&&(Y.frames[F]={}),(N=Y.frames[F]).src_off=I?H:V-8,N.src_size=j+re+8,F++,I&&(I=!1,j=0,H=0);break;case"VP8X":(N=Y.header={}).feature_flags=W[V];var xe=V+4;N.canvas_width=1+g(W,xe),xe+=3,N.canvas_height=1+g(W,xe),xe+=3;break;case"ALPH":I=!0,j=me+8,H=V-8;break;case"ANIM":(N=Y.header).bgcolor=y(W,V),xe=V+4,N.loop_count=(U=W)[(R=xe)+0]<<0|U[R+1]<<8,xe+=2;break;case"ANMF":var We,N;(N=Y.frames[F]={}).offset_x=2*g(W,V),V+=3,N.offset_y=2*g(W,V),V+=3,N.width=1+g(W,V),V+=3,N.height=1+g(W,V),V+=3,N.duration=g(W,V),V+=3,We=W[V++],N.dispose=1&We,N.blend=We>>1&1}te!="ANMF"&&(V+=me)}return Y}}(D,0);O.response=D,O.rgbaoutput=!0,O.dataurl=!1;var $=O.header?O.header:null,K=O.frames?O.frames:null;if($){$.loop_counter=$.loop_count,x=[$.canvas_height],_=[$.canvas_width];for(var X=0;X<K.length&&K[X].blend!=0;X++);}var ae=K[0],ue=T.WebPDecodeRGBA(D,ae.src_off,ae.src_size,_,x);ae.rgba=ue,ae.imgwidth=_[0],ae.imgheight=x[0];for(var Le=0;Le<_[0]*x[0]*4;Le++)E[Le]=ue[Le];return this.width=_,this.height=x,this.data=E,this}(function(e){var n=function(){return typeof b1=="function"},t=function(x,_,E,T){var D=4,O=o;switch(T){case e.image_compression.FAST:D=1,O=s;break;case e.image_compression.MEDIUM:D=6,O=u;break;case e.image_compression.SLOW:D=9,O=f}x=r(x,_,E,O);var $=b1(x,{level:D});return e.__addimage__.arrayBufferToBinaryString($)},r=function(x,_,E,T){for(var D,O,$,K=x.length/_,X=new Uint8Array(x.length+K),ae=g(),ue=0;ue<K;ue+=1){if($=ue*_,D=x.subarray($,$+_),T)X.set(T(D,E,O),$+ue);else{for(var Le,W=ae.length,V=[];Le<W;Le+=1)V[Le]=ae[Le](D,E,O);var Y=y(V.concat());X.set(V[Y],$+ue)}O=D}return X},i=function(x){var _=Array.apply([],x);return _.unshift(0),_},s=function(x,_){var E,T=[],D=x.length;T[0]=1;for(var O=0;O<D;O+=1)E=x[O-_]||0,T[O+1]=x[O]-E+256&255;return T},o=function(x,_,E){var T,D=[],O=x.length;D[0]=2;for(var $=0;$<O;$+=1)T=E&&E[$]||0,D[$+1]=x[$]-T+256&255;return D},u=function(x,_,E){var T,D,O=[],$=x.length;O[0]=3;for(var K=0;K<$;K+=1)T=x[K-_]||0,D=E&&E[K]||0,O[K+1]=x[K]+256-(T+D>>>1)&255;return O},f=function(x,_,E){var T,D,O,$,K=[],X=x.length;K[0]=4;for(var ae=0;ae<X;ae+=1)T=x[ae-_]||0,D=E&&E[ae]||0,O=E&&E[ae-_]||0,$=d(T,D,O),K[ae+1]=x[ae]-$+256&255;return K},d=function(x,_,E){if(x===_&&_===E)return x;var T=Math.abs(_-E),D=Math.abs(x-E),O=Math.abs(x+_-E-E);return T<=D&&T<=O?x:D<=O?_:E},g=function(){return[i,s,o,u,f]},y=function(x){var _=x.map(function(E){return E.reduce(function(T,D){return T+Math.abs(D)},0)});return _.indexOf(Math.min.apply(null,_))};e.processPNG=function(x,_,E,T){var D,O,$,K,X,ae,ue,Le,W,V,Y,F,I,j,H,U=this.decode.FLATE_DECODE,R="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=($=new EF(x)).imgData,O=$.bits,D=$.colorSpace,X=$.colors,[4,6].indexOf($.colorType)!==-1){if($.bits===8){W=(Le=$.pixelBitlength==32?new Uint32Array($.decodePixels().buffer):$.pixelBitlength==16?new Uint16Array($.decodePixels().buffer):new Uint8Array($.decodePixels().buffer)).length,Y=new Uint8Array(W*$.colors),V=new Uint8Array(W);var te,re=$.pixelBitlength-$.bits;for(j=0,H=0;j<W;j++){for(I=Le[j],te=0;te<re;)Y[H++]=I>>>te&255,te+=$.bits;V[j]=I>>>te&255}}if($.bits===16){W=(Le=new Uint32Array($.decodePixels().buffer)).length,Y=new Uint8Array(W*(32/$.pixelBitlength)*$.colors),V=new Uint8Array(W*(32/$.pixelBitlength)),F=$.colors>1,j=0,H=0;for(var me=0;j<W;)I=Le[j++],Y[H++]=I>>>0&255,F&&(Y[H++]=I>>>16&255,I=Le[j++],Y[H++]=I>>>0&255),V[me++]=I>>>16&255;O=8}T!==e.image_compression.NONE&&n()?(x=t(Y,$.width*$.colors,$.colors,T),ue=t(V,$.width,1,T)):(x=Y,ue=V,U=void 0)}if($.colorType===3&&(D=this.color_spaces.INDEXED,ae=$.palette,$.transparency.indexed)){var xe=$.transparency.indexed,We=0;for(j=0,W=xe.length;j<W;++j)We+=xe[j];if((We/=255)===W-1&&xe.indexOf(0)!==-1)K=[xe.indexOf(0)];else if(We!==W){for(Le=$.decodePixels(),V=new Uint8Array(Le.length),j=0,W=Le.length;j<W;j++)V[j]=xe[Le[j]];ue=t(V,$.width,1)}}var N=function(ee){var fe;switch(ee){case e.image_compression.FAST:fe=11;break;case e.image_compression.MEDIUM:fe=13;break;case e.image_compression.SLOW:fe=14;break;default:fe=12}return fe}(T);return U===this.decode.FLATE_DECODE&&(R="/Predictor "+N+" "),R+="/Colors "+X+" /BitsPerComponent "+O+" /Columns "+$.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(ue&&this.__addimage__.isArrayBuffer(ue)||this.__addimage__.isArrayBufferView(ue))&&(ue=this.__addimage__.arrayBufferToBinaryString(ue)),{alias:E,data:x,index:_,filter:U,decodeParameters:R,transparency:K,palette:ae,sMask:ue,predictor:N,width:$.width,height:$.height,bitsPerComponent:O,colorSpace:D}}}})(Ar.API),function(e){e.processGIF89A=function(n,t,r,i){var s=new PF(n),o=s.width,u=s.height,f=[];s.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:o,height:u},g=new pv(100).encode(d,100);return e.processJPEG.call(this,g,t,r,i)},e.processGIF87A=e.processGIF89A}(Ar.API),Nu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Nu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(t){ao.log("bit decode error:"+t)}},Nu.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),t=n%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var f=this.palette[s>>7-u&1];this.data[o+4*u]=f.blue,this.data[o+4*u+1]=f.green,this.data[o+4*u+2]=f.red,this.data[o+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Nu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,f=15&s,d=this.palette[u];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[f],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}n!==0&&(this.pos+=4-n)}},Nu.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Nu.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&n)/n*255|0,u=(s>>5&n)/n*255|0,f=(s>>10&n)/n*255|0,d=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=f,this.data[g+1]=u,this.data[g+2]=o,this.data[g+3]=d}this.pos+=e}},Nu.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&n)/n*255|0,f=(o>>5&t)/t*255|0,d=(o>>11)/n*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=f,this.data[g+2]=u,this.data[g+3]=255}this.pos+=e}},Nu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Nu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},Nu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(n,t,r,i){var s=new Nu(n,!1),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new pv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(Ar.API),jb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(n,t,r,i){var s=new jb(n),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new pv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(Ar.API),Ar.API.processRGBA=function(e,n,t){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,f=0,d=0;d<i;d+=4){var g=r[d],y=r[d+1],x=r[d+2],_=r[d+3];s[u++]=g,s[u++]=y,s[u++]=x,o[f++]=_}var E=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:E,index:n,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ar.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kh=Ar.API,wg=kh.getCharWidthsArray=function(e,n){var t,r,i=(n=n||{}).font||this.internal.getFont(),s=n.fontSize||this.internal.getFontSize(),o=n.charSpace||this.internal.getCharSpace(),u=n.widths?n.widths:i.metadata.Unicode.widths,f=u.fof?u.fof:1,d=n.kerning?n.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,y=n.doKerning!==!1,x=0,_=e.length,E=0,T=u[0]||f,D=[];for(t=0;t<_;t++)r=e.charCodeAt(t),typeof i.metadata.widthOfString=="function"?D.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(x=y&&Ji(d[r])==="object"&&!isNaN(parseInt(d[r][E],10))?d[r][E]/g:0,D.push((u[r]||T)/f+x)),E=r;return D},Ob=kh.getStringUnitWidth=function(e,n){var t=(n=n||{}).fontSize||this.internal.getFontSize(),r=n.font||this.internal.getFont(),i=n.charSpace||this.internal.getCharSpace();return kh.processArabic&&(e=kh.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,t,i)/t:wg.apply(this,arguments).reduce(function(s,o){return s+o},0)},Ib=function(e,n,t,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+n[s]<t;)u+=n[s],s++;i.push(e.slice(0,s));var f=s;for(u=0;s!==o;)u+n[s]>r&&(i.push(e.slice(f,s)),u=0,f=s),u+=n[s],s++;return f!==s&&i.push(e.slice(f,s)),i},Rb=function(e,n,t){t||(t={});var r,i,s,o,u,f,d,g=[],y=[g],x=t.textIndent||0,_=0,E=0,T=e.split(" "),D=wg.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?T[0].length+2:t.lineIndent||0){var O=Array(f).join(" "),$=[];T.map(function(X){(X=X.split(/\s*\n/)).length>1?$=$.concat(X.map(function(ae,ue){return(ue&&ae.length?`
`:"")+ae})):$.push(X[0])}),T=$,f=Ob.apply(this,[O,t])}for(s=0,o=T.length;s<o;s++){var K=0;if(r=T[s],f&&r[0]==`
`&&(r=r.substr(1),K=1),x+_+(E=(i=wg.apply(this,[r,t])).reduce(function(X,ae){return X+ae},0))>n||K){if(E>n){for(u=Ib.apply(this,[r,i,n-(x+_),n]),g.push(u.shift()),g=[u.pop()];u.length;)y.push([u.shift()]);E=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(X,ae){return X+ae},0)}else g=[r];y.push(g),x=E+f,_=D}else g.push(r),x+=_+E,_=D}return d=f?function(X,ae){return(ae?O:"")+X.join(" ")}:function(X){return X.join(" ")},y.map(d)},kh.splitTextToSize=function(e,n,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*n/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var u,f,d=[];for(u=0,f=r.length;u<f;u++)d=d.concat(Rb.apply(this,[r[u],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",t={},r={},i=0;i<n.length;i++)t[n[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=n[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var x,_,E,T,D=["{"];for(var O in y){if(x=y[O],isNaN(parseInt(O,10))?_="'"+O+"'":(O=parseInt(O,10),_=(_=s(O).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof x=="number")x<0?(E=s(x).slice(3),T="-"):(E=s(x).slice(2),T=""),E=T+E.slice(0,-1)+r[E.slice(-1)];else{if(Ji(x)!=="object")throw new Error("Don't know what to do with value type "+Ji(x)+".");E=o(x)}D.push(_+E)}return D.push("}"),D.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,_,E,T,D={},O=1,$=D,K=[],X="",ae="",ue=y.length-1,Le=1;Le<ue;Le+=1)(T=y[Le])=="'"?x?(E=x.join(""),x=void 0):x=[]:x?x.push(T):T=="{"?(K.push([$,E]),$={},E=void 0):T=="}"?((_=K.pop())[0][_[1]]=$,E=void 0,$=_[0]):T=="-"?O=-1:E===void 0?t.hasOwnProperty(T)?(X+=t[T],E=parseInt(X,16)*O,O=1,X=""):X+=T:t.hasOwnProperty(T)?(ae+=t[T],$[E]=parseInt(ae,16)*O,O=1,E=void 0,ae=""):ae+=T;return D},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var x=y.font,_=g.Unicode[x.postScriptName];_&&(x.metadata.Unicode={},x.metadata.Unicode.widths=_.widths,x.metadata.Unicode.kerning=_.kerning);var E=d.Unicode[x.postScriptName];E&&(x.metadata.Unicode.encoding=E,x.encoding=E.codePages[0])}])}(Ar.API),function(e){var n=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};e.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?n(u):n(rp(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ar),function(e){function n(){return(Dr.canvg?Promise.resolve(Dr.canvg):Yf(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ar.API.addSvgAsImage=function(t,r,i,s,o,u,f,d){if(isNaN(r)||isNaN(i))throw ao.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw ao.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=o;var y=g.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,g.width,g.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return n().then(function(E){return E.fromString(y,t,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(E){return E.render(x)}).then(function(){_.addImage(g.toDataURL("image/jpeg",1),r,i,s,o,f,d)})}}(),Ar.API.putTotalPages=function(e){var n,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),t=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(n,t);return this},Ar.API.viewerPreferences=function(e,n){var t;e=e||{},n=n||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),f=[],d=0,g=0,y=0;function x(E,T){var D,O=!1;for(D=0;D<E.length;D+=1)E[D]===T&&(O=!0);return O}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var _=u.length;for(y=0;y<_;y+=1)t[u[y]].value=t[u[y]].defaultValue,t[u[y]].explicitSet=!1}if(Ji(e)==="object"){for(i in e)if(s=e[i],x(u,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&x(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")f.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(r=!1);r===!0&&f.push([s[d][0]-1,s[d][1]-1].join(" "))}t[i].value="["+f.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,T=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?T.push("/"+E+" /"+t[E].value):T.push("/"+E+" "+t[E].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(e){var n=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+u.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",n)),this}}(Ar.API),function(e){var n=e.API,t=n.pdfEscape16=function(s,o){for(var u,f=o.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],y=0,x=s.length;y<x;++y){if(u=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(y),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},r=function(s){var o,u,f,d,g,y,x;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,x=(u=Object.keys(s).sort(function(_,E){return _-E})).length;y<x;y++)o=u[y],f.length>=100&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),f.push("<"+o+"><"+d+">"));return f.length&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,x=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),_="",E=0;E<x.length;E++)_+=String.fromCharCode(x[E]);var T=d();g({data:_,addLength1:!0,objectId:T}),f("endobj");var D=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:D}),f("endobj");var O=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+jh(u.fontName)),f("/FontFile2 "+T+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var $=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+jh(u.fontName)),f("/FontDescriptor "+O+" 0 R"),f("/W "+e.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+D+" 0 R"),f("/BaseFont /"+jh(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+$+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]),n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,x="",_=0;_<y.length;_++)x+=String.fromCharCode(y[_]);var E=d();g({data:x,addLength1:!0,objectId:E}),f("endobj");var T=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:T}),f("endobj");var D=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+E+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+jh(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var O=0;O<u.metadata.hmtx.widths.length;O++)u.metadata.hmtx.widths[O]=parseInt(u.metadata.hmtx.widths[O]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+jh(u.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",f=s.x,d=s.y,g=s.options||{},y=s.mutex||{},x=y.pdfEscape,_=y.activeFontKey,E=y.fonts,T=_,D="",O=0,$="",K=E[T].encoding;if(E[T].encoding!=="Identity-H")return{text:u,x:f,y:d,options:g,mutex:y};for($=u,T=_,Array.isArray(u)&&($=u[0]),O=0;O<$.length;O+=1)E[T].metadata.hasOwnProperty("cmap")&&(o=E[T].metadata.cmap.unicode.codeMap[$[O].charCodeAt(0)]),o||$[O].charCodeAt(0)<256&&E[T].metadata.hasOwnProperty("Unicode")?D+=$[O]:D+="";var X="";return parseInt(T.slice(1))<14||K==="WinAnsiEncoding"?X=x(D,T).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(X=t(D,E[T])),y.isHex=!0,{text:X,x:f,y:d,options:g,mutex:y}};n.events.push(["postProcessText",function(s){var o=s.text||"",u=[],f={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?u.push([i(Object.assign({},f,{text:o[d][0]})).text,o[d][1],o[d][2]]):u.push(i(Object.assign({},f,{text:o[d]})).text);s.text=u}else s.text=i(Object.assign({},f,{text:o})).text}])}(Ar),function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0},e.addFileToVFS=function(t,r){return n.call(this),this.internal.vFS[t]=r,this},e.getFileFromVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ar.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,f,d,g,y=n,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],O=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),$=!1,K=0;this.__bidiEngine__={};var X=function(F){var I=F.charCodeAt(),j=I>>8,H=T[j];return H!==void 0?y[256*H+(255&I)]:j===252||j===253?"AL":O.test(j)?"L":j===8?"R":"N"},ae=function(F){for(var I,j=0;j<F.length;j++){if((I=X(F.charAt(j)))==="L")return!1;if(I==="R")return!0}return!1},ue=function(F,I,j,H){var U,R,te,re,me=I[H];switch(me){case"L":case"R":$=!1;break;case"N":case"AN":break;case"EN":$&&(me="AN");break;case"AL":$=!0,me="R";break;case"WS":me="N";break;case"CS":H<1||H+1>=I.length||(U=j[H-1])!=="EN"&&U!=="AN"||(R=I[H+1])!=="EN"&&R!=="AN"?me="N":$&&(R="AN"),me=R===U?R:"N";break;case"ES":me=(U=H>0?j[H-1]:"B")==="EN"&&H+1<I.length&&I[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&j[H-1]==="EN"){me="EN";break}if($){me="N";break}for(te=H+1,re=I.length;te<re&&I[te]==="ET";)te++;me=te<re&&I[te]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(re=I.length,te=H+1;te<re&&I[te]==="NSM";)te++;if(te<re){var xe=F[H],We=xe>=1425&&xe<=2303||xe===64286;if(U=I[te],We&&(U==="R"||U==="AL")){me="R";break}}}me=H<1||(U=I[H-1])==="B"?"N":j[H-1];break;case"B":$=!1,i=!0,me=K;break;case"S":s=!0,me="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":$=!1;break;case"BN":me="N"}return me},Le=function(F,I,j){var H=F.split("");return j&&W(H,j,{hiLevel:K}),H.reverse(),I&&I.reverse(),H.join("")},W=function(F,I,j){var H,U,R,te,re,me=-1,xe=F.length,We=0,N=[],ee=K?_:x,fe=[];for($=!1,i=!1,s=!1,U=0;U<xe;U++)fe[U]=X(F[U]);for(R=0;R<xe;R++){if(re=We,N[R]=ue(F,fe,N,R),H=240&(We=ee[re][E[N[R]]]),We&=15,I[R]=te=ee[We][5],H>0)if(H===16){for(U=me;U<R;U++)I[U]=1;me=-1}else me=-1;if(ee[We][6])me===-1&&(me=R);else if(me>-1){for(U=me;U<R;U++)I[U]=te;me=-1}fe[R]==="B"&&(I[R]=0),j.hiLevel|=te}s&&function(ce,ye,se){for(var k=0;k<se;k++)if(ce[k]==="S"){ye[k]=K;for(var le=k-1;le>=0&&ce[le]==="WS";le--)ye[le]=K}}(fe,I,xe)},V=function(F,I,j,H,U){if(!(U.hiLevel<F)){if(F===1&&K===1&&!i)return I.reverse(),void(j&&j.reverse());for(var R,te,re,me,xe=I.length,We=0;We<xe;){if(H[We]>=F){for(re=We+1;re<xe&&H[re]>=F;)re++;for(me=We,te=re-1;me<te;me++,te--)R=I[me],I[me]=I[te],I[te]=R,j&&(R=j[me],j[me]=j[te],j[te]=R);We=re}We++}}},Y=function(F,I,j){var H=F.split(""),U={hiLevel:K};return j||(j=[]),W(H,j,U),function(R,te,re){if(re.hiLevel!==0&&g)for(var me,xe=0;xe<R.length;xe++)te[xe]===1&&(me=D.indexOf(R[xe]))>=0&&(R[xe]=D[me+1])}(H,j,U),V(2,H,I,j,U),V(1,H,I,j,U),H.join("")};return this.__bidiEngine__.doBidiReorder=function(F,I,j){if(function(U,R){if(R)for(var te=0;te<U.length;te++)R[te]=te;u===void 0&&(u=ae(U)),d===void 0&&(d=ae(U))}(F,I),o||!f||d)if(o&&f&&u^d)K=u?1:0,F=Le(F,I,j);else if(!o&&f&&d)K=u?1:0,F=Y(F,I,j),F=Le(F,I);else if(!o||u||f||d){if(o&&!f&&u^d)F=Le(F,I),u?(K=0,F=Y(F,I,j)):(K=1,F=Y(F,I,j),F=Le(F,I));else if(o&&u&&!f&&d)K=1,F=Y(F,I,j),F=Le(F,I);else if(!o&&!f&&u^d){var H=g;u?(K=1,F=Y(F,I,j),K=0,g=!1,F=Y(F,I,j),g=H):(K=0,F=Y(F,I,j),F=Le(F,I),K=1,g=!1,F=Y(F,I,j),g=H,F=Le(F,I))}}else K=0,F=Y(F,I,j);else K=u?1:0,F=Y(F,I,j);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,f=F.isOutputVisual,u=F.isInputRtl,d=F.isOutputRtl,g=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([t.doBidiReorder(i[u])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Ar),Ar.API.TTFFont=function(){function e(n){var t;if(this.rawData=n,t=this.contents=new Ef(n),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new UF(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new MF(this.contents),this.head=new kF(this),this.name=new OF(this),this.cmap=new Bx(this),this.toUnicode={},this.hhea=new TF(this),this.maxp=new IF(this),this.hmtx=new RF(this),this.post=new DF(this),this.os2=new NF(this),this.loca=new $F(this),this.glyf=new FF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,f,d;for(d=[],o=0,u=(f=this.bbox).length;o<u;o++)n=f[o],d.push(Math.round(n*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var t;return((t=this.cmap.unicode)!=null?t.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*t},e.prototype.widthOfString=function(n,t,r){var i,s,o,u;for(o=0,s=0,u=(n=""+n).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=n.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(n,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*n},e}();var qu,Ef=function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var t,r;for(r=[],t=0;0<=n?t<n:t>n;t=0<=n?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(n){var t,r,i;for(i=[],t=0,r=n.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(n.charCodeAt(t)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,t,r,i,s,o,u,f;return n=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),f=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^f)+1):72057594037927940*n+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+f},e.prototype.writeLongLong=function(n){var t,r;return t=Math.floor(n/4294967296),r=4294967295&n,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var t,r;for(t=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(n){var t,r,i,s;for(s=[],r=0,i=n.length;r<i;r++)t=n[r],s.push(this.writeByte(t));return s},e}(),MF=function(){var e;function n(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return n.prototype.encode=function(t){var r,i,s,o,u,f,d,g,y,x,_,E,T;for(T in _=Object.keys(t).length,f=Math.log(2),y=16*Math.floor(Math.log(_)/f),o=Math.floor(y/f),g=16*_-y,(i=new Ef).writeInt(this.scalarType),i.writeShort(_),i.writeShort(y),i.writeShort(o),i.writeShort(g),s=16*_,d=i.pos+s,u=null,E=[],t)for(x=t[T],i.writeString(T),i.writeInt(e(x)),i.writeInt(d),i.writeInt(x.length),E=E.concat(x),T==="head"&&(u=d),d+=x.length;d%4;)E.push(0),d++;return i.write(E),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(t){var r,i,s,o;for(t=Ox.call(t);t.length%4;)t.push(0);for(s=new Ef(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},n}(),AF={}.hasOwnProperty,_c=function(e,n){for(var t in n)AF.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};qu=function(){function e(n){var t;this.file=n,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var kF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var r;return(r=new Ef).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},n}(),zb=function(){function e(n,t){var r,i,s,o,u,f,d,g,y,x,_,E,T,D,O,$,K;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=t+n.readInt(),y=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=n.readByte();break;case 4:for(_=n.readUInt16(),x=_/2,n.pos+=6,s=function(){var X,ae;for(ae=[],f=X=0;0<=x?X<x:X>x;f=0<=x?++X:--X)ae.push(n.readUInt16());return ae}(),n.pos+=2,T=function(){var X,ae;for(ae=[],f=X=0;0<=x?X<x:X>x;f=0<=x?++X:--X)ae.push(n.readUInt16());return ae}(),d=function(){var X,ae;for(ae=[],f=X=0;0<=x?X<x:X>x;f=0<=x?++X:--X)ae.push(n.readUInt16());return ae}(),g=function(){var X,ae;for(ae=[],f=X=0;0<=x?X<x:X>x;f=0<=x?++X:--X)ae.push(n.readUInt16());return ae}(),i=(this.length-n.pos+this.offset)/2,u=function(){var X,ae;for(ae=[],f=X=0;0<=i?X<i:X>i;f=0<=i?++X:--X)ae.push(n.readUInt16());return ae}(),f=O=0,K=s.length;O<K;f=++O)for(D=s[f],r=$=E=T[f];E<=D?$<=D:$>=D;r=E<=D?++$:--$)g[f]===0?o=r+d[f]:(o=u[g[f]/2+(r-E)-(x-f)]||0)!==0&&(o+=d[f]),this.codeMap[r]=65535&o}n.pos=y}return e.encode=function(n,t){var r,i,s,o,u,f,d,g,y,x,_,E,T,D,O,$,K,X,ae,ue,Le,W,V,Y,F,I,j,H,U,R,te,re,me,xe,We,N,ee,fe,ce,ye,se,k,le,ke,Pe,Ve;switch(H=new Ef,o=Object.keys(n).sort(function(Z,de){return Z-de}),t){case"macroman":for(T=0,D=function(){var Z=[];for(E=0;E<256;++E)Z.push(0);return Z}(),$={0:0},s={},U=0,me=o.length;U<me;U++)$[le=n[i=o[U]]]==null&&($[le]=++T),s[i]={old:n[i],new:$[n[i]]},D[i]=$[n[i]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(D),{charMap:s,subtable:H.data,maxGlyphID:T+1};case"unicode":for(I=[],y=[],K=0,$={},r={},O=d=null,R=0,xe=o.length;R<xe;R++)$[ae=n[i=o[R]]]==null&&($[ae]=++K),r[i]={old:ae,new:$[ae]},u=$[ae]-i,O!=null&&u===d||(O&&y.push(O),I.push(i),d=u),O=i;for(O&&y.push(O),y.push(65535),I.push(65535),Y=2*(V=I.length),W=2*Math.pow(Math.log(V)/Math.LN2,2),x=Math.log(W/2)/Math.LN2,Le=2*V-W,f=[],ue=[],_=[],E=te=0,We=I.length;te<We;E=++te){if(F=I[E],g=y[E],F===65535){f.push(0),ue.push(0);break}if(F-(j=r[F].new)>=32768)for(f.push(0),ue.push(2*(_.length+V-E)),i=re=F;F<=g?re<=g:re>=g;i=F<=g?++re:--re)_.push(r[i].new);else f.push(j-F),ue.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*V+2*_.length),H.writeUInt16(0),H.writeUInt16(Y),H.writeUInt16(W),H.writeUInt16(x),H.writeUInt16(Le),se=0,N=y.length;se<N;se++)i=y[se],H.writeUInt16(i);for(H.writeUInt16(0),k=0,ee=I.length;k<ee;k++)i=I[k],H.writeUInt16(i);for(ke=0,fe=f.length;ke<fe;ke++)u=f[ke],H.writeUInt16(u);for(Pe=0,ce=ue.length;Pe<ce;Pe++)X=ue[Pe],H.writeUInt16(X);for(Ve=0,ye=_.length;Ve<ye;Ve++)T=_[Ve],H.writeUInt16(T);return{charMap:r,subtable:H.data,maxGlyphID:K+1}}},e}(),Bx=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="cmap",n.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new zb(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},n.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=zb.encode(t,r),(s=new Ef).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},n}(),TF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),NF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),DF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="post",n.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var u,f,d;for(d=[],o=u=0,f=this.file.maxp.numGlyphs;0<=f?u<f:u>f;o=0<=f?++u:--u)d.push(t.readUInt32());return d}).call(this)}},n}(),BF=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},OF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="name",n.prototype.parse=function(t){var r,i,s,o,u,f,d,g,y,x,_;for(t.pos=this.offset,t.readShort(),r=t.readShort(),f=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(d={},o=y=0,x=i.length;y<x;o=++y)s=i[o],t.pos=s.offset,g=t.readString(s.length),u=new BF(g,s),d[_=s.nameID]==null&&(d[_]=[]),d[s.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},n}(),IF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),RF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="hmtx",n.prototype.parse=function(t){var r,i,s,o,u,f,d;for(t.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,y;for(y=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)y.push(t.readInt16());return y}(),this.widths=(function(){var g,y,x,_;for(_=[],g=0,y=(x=this.metrics).length;g<y;g++)o=x[g],_.push(o.advance);return _}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(this.widths.push(i));return d},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),Ox=[].slice,FF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var r,i,s,o,u,f,d,g,y,x;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,u=(f=new Ef(r.read(s))).readShort(),g=f.readShort(),x=f.readShort(),d=f.readShort(),y=f.readShort(),this.cache[t]=u===-1?new zF(f,g,x,d,y):new jF(f,u,g,x,d,y),this.cache[t]))},n.prototype.encode=function(t,r,i){var s,o,u,f,d;for(u=[],o=[],f=0,d=r.length;f<d;f++)s=t[r[f]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},n}(),jF=function(){function e(n,t,r,i,s,o){this.raw=n,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),zF=function(){function e(n,t,r,i,s){var o,u;for(this.raw=n,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var n,t,r;for(t=new Ef(Ox.call(this.raw.data)),n=0,r=this.glyphIDs.length;n<r;++n)t.pos=this.glyphOffsets[n];return t.data},e}(),$F=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,qu),n.prototype.tag="loca",n.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var f=this.offsets[u],d=this.offsets[u+1]-f;d>0&&(s+=d)}for(var g=new Array(4*i.length),y=0;y<i.length;++y)g[4*y+3]=255&i[y],g[4*y+2]=(65280&i[y])>>8,g[4*y+1]=(16711680&i[y])>>16,g[4*y]=(4278190080&i[y])>>24;return g},n}(),UF=function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,n={},s=this.subset)r=s[t],n[t]=i[r];return n},e.prototype.glyphsFor=function(n){var t,r,i,s,o,u,f;for(i={},o=0,u=n.length;o<u;o++)i[s=n[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in f=this.glyphsFor(t))r=f[s],i[s]=r;return i},e.prototype.encode=function(n,t){var r,i,s,o,u,f,d,g,y,x,_,E,T,D,O;for(i in r=Bx.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(n),_={0:0},O=r.charMap)_[(f=O[i]).old]=f.new;for(E in x=r.maxGlyphID,o)E in _||(_[E]=x++);return g=function($){var K,X;for(K in X={},$)X[$[K]]=K;return X}(_),y=Object.keys(g).sort(function($,K){return $-K}),T=function(){var $,K,X;for(X=[],$=0,K=y.length;$<K;$++)u=y[$],X.push(g[u]);return X}(),s=this.font.glyf.encode(o,T,_),d=this.font.loca.encode(s.offsets,T),D={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},e}();Ar.API.PDFObject=function(){var e;function n(){}return e=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},n.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var u,f,d;for(d=[],u=0,f=t.length;u<f;u++)r=t[u],d.push(n.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+e(t.getUTCFullYear(),4)+e(t.getUTCMonth(),2)+e(t.getUTCDate(),2)+e(t.getUTCHours(),2)+e(t.getUTCMinutes(),2)+e(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+n.convert(o));return s.push(">>"),s.join(`
`)}return""+t},n}();const VF={class:"h-full flex"},HF={class:"flex-1 relative"},GF={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},qF={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},WF={class:"text-center max-w-lg mx-auto p-8"},ZF={class:"space-y-4"},KF={class:"map-parent"},YF={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},JF={class:"map-content flex flex-col md:flex-row relative"},XF={class:"flex-1 relative"},QF={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},e9={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},t9={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},n9={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},r9={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},i9={key:0,class:"space-y-4"},o9={key:0,class:"space-y-2"},s9={class:"grid grid-cols-1 gap-2"},a9=["onClick"],l9={class:"font-medium text-gray-900"},u9={key:1,class:"space-y-2"},c9={class:"flex items-center mb-4"},f9={class:"text-sm text-gray-600"},h9={class:"grid grid-cols-1 gap-2"},d9=["onClick"],p9={class:"font-medium text-gray-900"},g9={key:2,class:"space-y-2"},m9={class:"flex items-center mb-4"},v9={class:"text-sm text-gray-600"},y9={class:"grid grid-cols-1 gap-2"},_9={key:0,class:"text-center py-8"},b9=["onClick"],w9={class:"font-medium text-gray-900"},x9={key:3,class:"space-y-2"},L9={class:"flex items-center mb-4"},S9={class:"text-sm text-gray-600"},C9={class:"grid grid-cols-1 gap-2"},E9=["onClick"],P9={class:"font-medium text-gray-900"},M9={class:"text-sm text-gray-500"},A9={class:"text-xs text-gray-400 mt-1"},k9={key:1,class:"space-y-4"},T9={key:0,class:"space-y-2"},N9={class:"grid grid-cols-1 gap-2"},D9={key:0,class:"text-center py-8"},B9=["onClick"],O9={class:"font-medium text-gray-900"},I9={key:1,class:"space-y-2"},R9={class:"flex items-center mb-4"},F9={class:"text-sm text-gray-600"},j9={class:"grid grid-cols-1 gap-2"},z9=["onClick"],$9={class:"font-medium text-gray-900"},U9={class:"text-sm text-gray-500"},V9={class:"text-xs text-gray-400 mt-1"},H9={key:2,class:"space-y-4"},G9={key:3,class:"space-y-4"},q9={key:0,class:"text-center py-8"},W9={key:1,class:"space-y-2"},Z9=["onClick"],K9={class:"font-medium text-gray-900"},Y9={class:"text-sm text-gray-500"},J9={class:"text-xs text-gray-400 mt-1"},$b=cs({__name:"MapView",emits:["shape-selected"],setup(e,{emit:n}){const t=Ft(null),r=Ft(!1),i=py(),s=Op(),o=Dp(),u=dc(),f=Ft([]),{currentTool:d,selectedShape:g,map:y,initMap:x,setDrawingTool:_,updateShapeStyle:E,updateShapeProperties:T,featureGroup:D,adjustView:O,clearActiveControlPoints:$,calculateConnectedCoverageArea:K}=xR(),{initMap:X,changeBaseMap:ae}=LR(),ue=Ft(!1),Le=Ft(!1),W=Ft(!1),V=Ft(null),Y=Ft(null),F=Ft(!1),I=Ft(null),j=ma(),H=Ft([]),U=Ft([]),R=Ft([]),te=Ft(null),re=Ft(null),me=Ft(null),xe=Ft(!1),We=Ft(!1),N=Ft(!1),ee=Ft(null),fe=gr(()=>{var mt,Ge;return console.log("[MapView][filteredClients] Computing with:",{userType:(mt=j.user)==null?void 0:mt.user_type,selectedSalarie:te.value,salarieVisiteurs:U.value,visiteurCount:((Ge=U.value)==null?void 0:Ge.length)||0}),j.isSalarie||te.value?U.value:[]}),ce=gr(()=>{var Zn,Wt,mn;if(!g.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:g.value,hasName:"name"in g.value,name:g.value.name,hasProperties:"properties"in g.value,propertiesName:(Zn=g.value.properties)==null?void 0:Zn.name,allLayerKeys:Object.keys(g.value),allPropertiesKeys:g.value.properties?Object.keys(g.value.properties):[],_leaflet_id:g.value._leaflet_id,_dbId:g.value._dbId,descriptor:Object.getOwnPropertyDescriptor(g.value,"name")});const mt=g.value.properties||{};let Ge="unknown";mt.type?Ge=mt.type:g.value instanceof Rt.Circle?Ge="Circle":g.value instanceof pa||g.value instanceof Rt.Rectangle?Ge="Rectangle":g.value instanceof pf||g.value instanceof Rt.Polygon?Ge="Polygon":g.value instanceof Sf?Ge="ElevationLine":(g.value instanceof Ns||g.value instanceof Rt.Polyline&&!(g.value instanceof Rt.Polygon))&&(Ge="Line"),console.log(`[MapView][selectedShape] Type de forme dtect: ${Ge}`),mt.type||(g.value.properties||(g.value.properties={}),g.value.properties.type=Ge);let Ot;if(mt.style&&mt.style.name)Ot=mt.style.name,console.log("[MapView][selectedShape] Using name from style:",Ot);else if(mt.name)Ot=mt.name,console.log("[MapView][selectedShape] Using name from properties:",Ot);else if(g.value.name)Ot=g.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ot);else{const It=Object.getOwnPropertyDescriptor(g.value,"name");It&&It.value&&(Ot=It.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ot));const Kt=["_name","displayName","title"];for(const Ln of Kt)if(g.value[Ln]){Ot=g.value[Ln],console.log(`[MapView][selectedShape] Found name in ${Ln}:`,Ot);break}}Ot&&(console.log(`[MapView][selectedShape] Ensuring name "${Ot}" is set everywhere`),g.value.properties||(g.value.properties={}),g.value.properties.name=Ot,g.value.properties.style||(g.value.properties.style={}),g.value.properties.style.name=Ot,g.value.name=Ot,typeof g.value.setName=="function"&&(g.value.setName(Ot),console.log(`[MapView][selectedShape] Used setName method to set name "${Ot}"`))),g.value.properties.category||(g.value.properties.category="forages"),g.value.properties.accessLevel||(g.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:Ge,name:mt.name,foundName:Ot,hasNameProperty:"name"in mt,allPropertiesKeys:Object.keys(mt),layerId:g.value._leaflet_id,rawProperties:mt,layerName:g.value.name,layerPropertiesName:(Wt=g.value.properties)==null?void 0:Wt.name});const Pn={...mt,type:Ge,name:Ot||g.value.name||mt.name||void 0,category:g.value.properties.category||"forages",accessLevel:g.value.properties.accessLevel||"visitor"},tr={type:Ge,properties:Pn,layer:g.value,options:g.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:tr.type,hasName:"name"in tr.properties,name:tr.properties.name,layerName:tr.layer.name,layerPropertiesName:(mn=tr.layer.properties)==null?void 0:mn.name}),tr});function ye(mt){const Ge=mt.getCenter(),Ot=mt.getZoom(),Pn={lat:Ge.lat,lng:Ge.lng,zoom:Ot};document.cookie=`mapState=${JSON.stringify(Pn)};max-age=2592000;path=/`}function se(){const Ge=document.cookie.split(";").find(Ot=>Ot.trim().startsWith("mapState="));if(Ge)try{return JSON.parse(Ge.split("=")[1])}catch(Ot){return console.error("Erreur lors de la lecture du cookie de position:",Ot),null}return null}$s(async()=>{var mt,Ge;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] tat initial des filtres dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2));try{if(await i.fetchPlans(),(j.isAdmin||j.isEntreprise)&&await nt(),j.isEntreprise){xe.value=!0;try{const It=await Un.get("/users/",{params:{role:"SALARIE",entreprise:(mt=j.user)==null?void 0:mt.id}});H.value=It.data}catch(It){console.error("Error loading salaries:",It),H.value=[]}finally{xe.value=!1}}if(j.isSalarie){We.value=!0;try{const It=await j.fetchSalarieVisiteurs(((Ge=j.user)==null?void 0:Ge.id)||0);U.value=Array.isArray(It)?It:[It]}catch(It){console.error("Error loading clients:",It)}finally{We.value=!1}}const Ot=se(),Pn=Ot?[Ot.lat,Ot.lng]:[46.603354,1.888334],tr=(Ot==null?void 0:Ot.zoom)??6;if(t.value&&!y.value){const It=x(t.value,Pn,tr);It.pm.setLang("fr"),It.pm.addControls({rotateMode:!1}),X(It),It.on("moveend",()=>{ye(It)}),window.addEventListener("map-set-location",Kt=>{if(It&&Kt.detail){const{lat:Ln,lng:mr,zoom:at}=Kt.detail;It.flyTo([Ln,mr],at,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",Kt=>{const Ln=Kt.layer;Ln&&Ln._leaflet_id&&f.value.findIndex(at=>at.layer&&at.layer._leaflet_id===Ln._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ln._leaflet_id}  shapes.value`),f.value.push({layer:Ln,id:Ln._dbId||Ln._leaflet_id}))}),D.value.on("layerremove",Kt=>{const Ln=Kt.layer;Ln&&Ln._leaflet_id&&console.log(`[MapView][featureGroup.layerremove] Couche ${Ln._leaflet_id} supprime du featureGroup mais conserve dans shapes.value`)}))}const Zn=localStorage.getItem("lastPlanId");if(Zn)try{console.log("[MapView][onMounted] Chargement immdiat du dernier plan:",Zn),await Ve(parseInt(Zn));const It=document.querySelector(".map-parent");It instanceof HTMLElement&&(It.style.display="block")}catch(It){console.error("[MapView][onMounted] Erreur chargement dernier plan:",It),V.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][onMounted] Aucun dernier plan  charger"),V.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke();window.addEventListener("shape:created",It=>{const{shape:Kt,type:Ln,properties:mr}=It.detail;console.log("[MapView] Nouvelle forme cre",{shape:Kt,type:Ln,properties:mr}),s.addElement(Kt),_("")}),window.addEventListener("categoriesReactivated",It=>{console.log("[MapView][categoriesReactivated] vnement reu:",It.detail),Mn()}),window.addEventListener("shapeTypesReactivated",It=>{console.log("[MapView][shapeTypesReactivated] vnement reu:",It.detail),Mn()});const Wt=It=>{if(console.log("[MapView] dition de note via Leaflet",It),console.log("[MapView] Type de e:",typeof It,"Contenu de e:",JSON.stringify(It)),!It||!It.note){console.error("[MapView] Erreur: e.note est undefined ou null",It);return}const Kt=It.note;console.log("[MapView] Note  diter:",Kt),Y.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||o.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},console.log("[MapView] editingMapNote.value aprs conversion:",Y.value),W.value=!0,console.log("[MapView] showNoteEditModal.value:",W.value)},mn=It=>{if(console.log("[MapView] dition de note via vnement global",It),!It.detail||!It.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",It);return}const Kt=It.detail.note;console.log("[MapView] Note  diter (global):",Kt),Y.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||o.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},W.value=!0};window.addEventListener("geonote:edit",mn),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",Wt))}catch(Ot){console.error("Error during component mount:",Ot),V.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")}}),Co(()=>s.hasUnsavedChanges,mt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",mt),mt&&V.value&&i.markUnsavedChanges()}),Co(()=>s.filters,(mt,Ge)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres dtect:",JSON.stringify(mt,null,2)),Ge){const Ot=JSON.stringify(Ge.accessLevels)!==JSON.stringify(mt.accessLevels),Pn=JSON.stringify(Ge.categories)!==JSON.stringify(mt.categories),tr=JSON.stringify(Ge.shapeTypes)!==JSON.stringify(mt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements dtects:",{accessLevelsChanged:Ot,categoriesChanged:Pn,shapeTypesChanged:tr}),Ot||Pn||tr?(console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Mn()):console.log("[MapView][watch drawingStore.filters] Aucun changement rel, pas de mise  jour")}else console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Mn()},{deep:!0});const k=mt=>{console.log("[MapView][filtersChanged] vnement reu:",mt.detail),Mn()};$s(()=>{window.addEventListener("filtersChanged",k)}),mc(()=>{window.removeEventListener("filtersChanged",k),console.log("[MapView][filtersChanged] vnement dsactiv")}),Co(()=>s.getFilteredElements,(mt,Ge)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage, lments filtrs:",{nouveaux:mt.length,anciens:Ge?Ge.length:"aucun",ids:mt.map(Ot=>Ot.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage suite au changement d'elements filtrs"),Mn()},{deep:!0}),Co(y,async mt=>{var Ge;console.log(`
[MapView][watch map] Nouvelle carte:`,!!mt),mt&&i.currentPlan&&!((Ge=D.value)!=null&&Ge.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",i.currentPlan.id),ke(),await s.loadPlanElements(i.currentPlan.id))}),Co(()=>i.currentPlan,async(mt,Ge)=>{var Ot,Pn,tr;if((mt==null?void 0:mt.id)===(Ge==null?void 0:Ge.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",mt==null?void 0:mt.id);try{if(mt){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),V.value=mt;const Zn=document.querySelector(".map-parent");Zn instanceof HTMLElement&&(Zn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),V.value=null,ke();const Zn=document.querySelector(".map-parent");Zn instanceof HTMLElement&&(Zn.style.display="none")}}catch(Zn){console.error("[MapView][watch currentPlan] ERREUR:",Zn),V.value=null,ke()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(Ot=V.value)==null?void 0:Ot.id,storePlanId:(Pn=i.currentPlan)==null?void 0:Pn.id,mapVisible:y.value!==null,mapParentDisplay:(tr=document.querySelector(".map-parent"))==null?void 0:tr.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),cd(()=>{y.value&&y.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function le(){r.value=!r.value}function ke(){D.value&&D.value.clearLayers(),f.value=[],$(),g.value=null,d.value=""}async function Pe(mt){return await hn.measureAsync("refreshMapWithPlan",async()=>{try{hn.measure("refreshMapWithPlan:clearMap",()=>{ke()},"MapView"),await hn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await s.loadPlanElements(mt)},"MapView");const Ge=hn.measure("refreshMapWithPlan:getPlanById",()=>i.getPlanById(mt),"MapView");Ge?(hn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{V.value=Ge,i.setCurrentPlan(Ge),s.setCurrentPlan(Ge.id),localStorage.setItem("lastPlanId",Ge.id.toString())},"MapView"),y.value&&D.value&&await hn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:s.getCurrentElements.length,elements:s.getCurrentElements.map(Zn=>{var Wt;return{id:Zn.id,type:Zn.type_forme,hasName:Zn.data&&"name"in Zn.data,name:(Wt=Zn.data)==null?void 0:Wt.name}})});const Ot=s.getCurrentElements.reduce((Zn,Wt)=>(Zn[Wt.type_forme]||(Zn[Wt.type_forme]=[]),Zn[Wt.type_forme].push(Wt),Zn),{}),Pn=10,tr=Object.entries(Ot).map(async([Zn,Wt])=>{for(let mn=0;mn<Wt.length;mn+=Pn){const It=Wt.slice(mn,mn+Pn);await Promise.all(It.map(async Kt=>{await hn.measureAsync(`refreshMapWithPlan:createElement:${Kt.type_forme}`,async()=>{var mr;if(!D.value||!Kt.data)return;let Ln=null;switch(Kt.type_forme){case"Circle":{const at=Kt.data;at.center&&at.radius&&(Ln=new Rh(Rt.latLng(at.center[1],at.center[0]),{...at.style,radius:at.radius}),at.name&&(Ln.properties={type:"Circle",name:at.name,style:at.style,radius:at.radius,diameter:at.radius*2,surface:Math.PI*at.radius*at.radius,perimeter:2*Math.PI*at.radius},Ln.name=at.name));break}case"Rectangle":{const at=Kt.data;if(at.bounds){const Cn=Rt.latLngBounds(Rt.latLng(at.bounds.southWest[1],at.bounds.southWest[0]),Rt.latLng(at.bounds.northEast[1],at.bounds.northEast[0]));Ln=new pa(Cn,at.style),at.name&&(Ln.properties={name:at.name},Ln.name=at.name)}break}case"Polygon":{const at=Kt.data;if(at.points&&at.points.length>0){const Cn=at.points.map(xr=>Rt.latLng(xr[1],xr[0]));Ln=new pf(Cn,at.style),at.name&&(Ln.properties={name:at.name},Ln.name=at.name)}break}case"Line":{const at=Kt.data;if(at.points&&at.points.length>0){const Cn=at.points.map(xr=>Rt.latLng(xr[1],xr[0]));Ln=new Ns(Cn,at.style),at.name&&(Ln.properties={name:at.name},Ln.name=at.name)}break}case"ElevationLine":{const at=Kt.data;if(at.points&&at.points.length>0){const Cn=at.points.map(xr=>Rt.latLng(xr[1],xr[0]));Ln=new Sf(Cn,at.style),at.name&&(Ln.properties={name:at.name,type:"ElevationLine",elevationData:at.elevationData,minElevation:at.minElevation,maxElevation:at.maxElevation,elevationGain:at.elevationGain,elevationLoss:at.elevationLoss,averageSlope:at.averageSlope,maxSlope:at.maxSlope},Ln.name=at.name),at.elevationData&&(Ln.elevationData=at.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Cration d'une note:",Kt.data);const at=Kt.data;if(at.location&&Array.isArray(at.location)&&at.location.length===2)try{at.category||(at.category="forages",console.log("[MapView][refreshMapWithPlan] Catgorie par dfaut ajoute:",at.category)),at.accessLevel||(at.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accs par dfaut ajout:",at.accessLevel));const Cn=Bp.fromBackendData(at);Cn._dbId=Kt.id,Ln=Cn,console.log("[MapView][refreshMapWithPlan] Note cre:",{id:Kt.id,location:at.location,name:at.name,category:at.category,accessLevel:at.accessLevel,type:Cn.properties.type})}catch(Cn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",Cn)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",at);break}}Ln&&(Ln._dbId=Kt.id,(mr=D.value)==null||mr.addLayer(Ln),f.value.push({id:Kt.id,type:Kt.type_forme,layer:Ln,properties:Ln.properties}))},"MapView")})),await new Promise(Kt=>setTimeout(Kt,0))}});await Promise.all(tr),hn.measure("refreshMapWithPlan:adjustView",()=>{O()},"MapView")},"MapView"),console.log(`Plan ${mt} charg avec succs avec ${s.getCurrentElements.length} formes`)):console.error(`Plan ${mt} introuvable aprs chargement`),Le.value=!1}catch(Ge){throw console.error("Erreur lors du rafrachissement de la carte:",Ge),Ge}},"MapView")}async function Ve(mt){return await hn.measureAsync("loadPlan",async()=>{var Ge;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",mt);try{const Ot=await hn.measureAsync("loadPlan:getPlanFromStore",async()=>i.getPlanById(mt),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!Ot),!Ot){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await hn.measureAsync("loadPlan:apiCheck",async()=>{await Un.get(`/plans/${mt}/`)},"MapView")}catch(Pn){throw((Ge=Pn.response)==null?void 0:Ge.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),V.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke()),Pn}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await hn.measureAsync("loadPlan:refreshMap",async()=>{await Pe(mt)},"MapView"),Le.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),Ut(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:mt,elementsCount:s.getCurrentElements.length})}catch(Ot){throw console.error("Erreur lors du chargement du plan:",Ot),hn.measure("loadPlan:errorRecovery",()=>{V.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")},"MapView"),Ot}},"MapView")}async function Z(){var mt;if(!V.value||!D.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}F.value=!0,I.value="saving";try{const Ge=[],Ot=new Set(s.getCurrentElements.filter(Wt=>Wt.id!==void 0).map(Wt=>Wt.id)),Pn=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from(Ot),currentElements:s.getCurrentElements}),D.value.eachLayer(Wt=>{var Ln,mr,at,Cn,xr,Di,Fr,Er,lr,Hr,ir,Br,jr,rn,Ri,yi,pi,Zr,Or;console.log("[savePlan] Traitement de la couche",{type:(Ln=Wt.properties)==null?void 0:Ln.type,name:(mr=Wt.properties)==null?void 0:mr.name,isPolygon:Wt instanceof Rt.Polygon,properties:Wt.properties});let mn,It;const Kt={color:Wt.options.color||"#2b6451",weight:Wt.options.weight||3,opacity:Wt.options.opacity||1,fillColor:Wt.options.fillColor||"#2b6451",fillOpacity:Wt.options.fillOpacity||.2,dashArray:Wt.options.dashArray||""};if(Wt instanceof pa){mn="Rectangle";const Ir=Wt.getBounds();It={bounds:{southWest:[Ir.getSouthWest().lng,Ir.getSouthWest().lat],northEast:[Ir.getNorthEast().lng,Ir.getNorthEast().lat]},style:Kt,name:((at=Wt.properties)==null?void 0:at.name)||"",rotation:Wt.getRotation(),width:Wt.getDimensions().width,height:Wt.getDimensions().height,center:[Wt.getCenter().lng,Wt.getCenter().lat]}}else if(Wt instanceof Rt.Circle)mn="Circle",It={center:[Wt.getLatLng().lng,Wt.getLatLng().lat],radius:Wt.getRadius(),name:((Cn=Wt.properties)==null?void 0:Cn.name)||"",style:Kt};else if(Wt instanceof Rt.Rectangle){mn="Rectangle";const Ir=Wt.getBounds();It={bounds:{southWest:[Ir.getSouthWest().lng,Ir.getSouthWest().lat],northEast:[Ir.getNorthEast().lng,Ir.getNorthEast().lat]},name:((xr=Wt.properties)==null?void 0:xr.name)||"",style:Kt}}else if(Wt instanceof Rt.Polyline&&!(Wt instanceof Rt.Polygon))if(((Di=Wt.properties)==null?void 0:Di.type)==="ElevationLine"){mn="ElevationLine";const Ir=Wt.getLatLngs(),hr=((Fr=Wt.properties)==null?void 0:Fr.category)||"forages",Fi=((Er=Wt.properties)==null?void 0:Er.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catgorie:",hr,"Niveau d'accs:",Fi),It={points:Ir.map(Ss=>[Ss.lng,Ss.lat]),style:{...Kt,color:((lr=Wt.properties.style)==null?void 0:lr.color)||"#FF4500",weight:((Hr=Wt.properties.style)==null?void 0:Hr.weight)||4,opacity:((ir=Wt.properties.style)==null?void 0:ir.opacity)||.8,_accessLevel:Fi,accessLevel:Fi},name:((Br=Wt.properties)==null?void 0:Br.name)||"",category:hr,accessLevel:Fi,elevationData:Wt.properties.elevationData,samplePointStyle:Wt.properties.samplePointStyle,minMaxPointStyle:Wt.properties.minMaxPointStyle,minElevation:Wt.properties.minElevation,maxElevation:Wt.properties.maxElevation,elevationGain:Wt.properties.elevationGain,elevationLoss:Wt.properties.elevationLoss,averageSlope:Wt.properties.averageSlope,maxSlope:Wt.properties.maxSlope}}else{mn="Line";const Ir=Wt.getLatLngs(),hr=((jr=Wt.properties)==null?void 0:jr.category)||"forages",Fi=((rn=Wt.properties)==null?void 0:rn.accessLevel)||"visitor";console.log("[savePlan] Line - Catgorie:",hr,"Niveau d'accs:",Fi),It={points:Ir.map(Ss=>[Ss.lng,Ss.lat]),name:((Ri=Wt.properties)==null?void 0:Ri.name)||"",category:hr,accessLevel:Fi,style:{...Kt,_accessLevel:Fi,accessLevel:Fi}}}else if(Wt instanceof Rt.Polygon&&!(Wt instanceof Rt.Rectangle)){mn="Polygon";const Ir=Wt.getLatLngs()[0],hr=((yi=Wt.properties)==null?void 0:yi.category)||"forages",Fi=((pi=Wt.properties)==null?void 0:pi.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catgorie:",hr,"Niveau d'accs:",Fi),It={points:Ir.map(Ss=>[Ss.lng,Ss.lat]),name:((Zr=Wt.properties)==null?void 0:Zr.name)||"",category:hr,accessLevel:Fi,style:{...Kt,_accessLevel:Fi,accessLevel:Fi}}}else if(((Or=Wt.properties)==null?void 0:Or.type)==="Note"){console.log("[savePlan] Traitement d'une GeoNote");const Ir=Wt;if(Ir.toBackendFormat){Ir.properties.category||(Ir.properties.category="forages",console.log("[savePlan] Catgorie par dfaut ajoute:",Ir.properties.category)),Ir.properties.accessLevel||(Ir.properties.accessLevel="private",console.log("[savePlan] Niveau d'accs par dfaut ajout:",Ir.properties.accessLevel));const hr=Ir.toBackendFormat(Ir._dbId);mn=hr.type_forme,It=hr.data,Ir._dbId&&typeof Ir._dbId=="number"&&Pn.add(Ir._dbId),console.log("[savePlan] Donnes de la note prpares pour la sauvegarde:",{id:Ir._dbId,type:mn,category:It.category,accessLevel:It.accessLevel})}}if(mn&&It){let Ir=Wt._elementId;Wt._dbId&&(Ir=Wt._dbId,typeof Ir=="number"&&Pn.add(Ir)),Ge.push({id:Ir,type_forme:mn,data:It})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:Ge.length,elements:Ge.map(Wt=>({type:Wt.type_forme,hasPoints:"points"in Wt.data,hasStyle:"style"in Wt.data}))});const tr=Array.from(Ot).filter(Wt=>!Pn.has(Wt));console.log("[savePlan] lments supprims:",{existingIds:Array.from(Ot),currentLayerIds:Array.from(Pn),elementsToDelete:tr}),s.elements=Ge.filter(Wt=>!Wt.id||!tr.includes(Wt.id));const Zn=await s.saveToPlan(V.value.id,{elementsToDelete:tr});if(Zn&&((mt=V.value)!=null&&mt.id)){const Wt=V.value.id;V.value={...V.value,...Zn},i.updatePlanDetails(Wt,Zn)}I.value="success",setTimeout(()=>{I.value=null},3e3)}catch(Ge){console.error("Erreur lors de la sauvegarde du plan:",Ge),I.value=null}finally{F.value=!1}}mc(()=>{j.user||Ke(),i.clearCurrentPlan(),s.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function de(mt){if(console.log("[MapView][updateShapeProperties] Mise  jour des proprits:",mt),T(mt),mt.category&&g.value&&g.value._dbId){const Ge=g.value._dbId,Ot=s.elements.find(Pn=>Pn.id===Ge);if(Ot){console.log(`[MapView][updateShapeProperties] Mise  jour de la catgorie dans le store: ${mt.category} pour l'lment ${Ge}`);const Pn=Ot;Pn.data||(Pn.data={}),Pn.data.category=mt.category,s.$patch({unsavedChanges:!0})}}}function ve(mt){try{const Ge=new Date(mt);return isNaN(Ge.getTime())?(console.error("Date invalide reue:",mt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Ge)}catch(Ge){return console.error("Erreur lors du formatage de la date:",Ge),"Date invalide"}}const pe=()=>{D.value&&O()},ze=()=>{g.value&&D.value&&(_(""),D.value.removeLayer(g.value),g.value=null)};async function Qe(mt){console.log(`onPlanCreated - Tentative de chargement du plan ${mt}`),await i.fetchPlans();const Ge=i.getPlanById(mt);Ge?(console.log(`Plan ${mt} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",mt.toString()),V.value=Ge,i.setCurrentPlan(Ge),s.setCurrentPlan(Ge.id),ue.value=!1,Ut(),console.log(`Plan ${mt} charg avec succs`)):console.error(`Plan ${mt} introuvable aprs cration! Vrifiez les permissions.`)}Co(te,async mt=>{var Ge;if(mt&&((Ge=j.user)==null?void 0:Ge.user_type)==="admin"){We.value=!0;try{const Ot=await j.fetchSalarieVisiteurs(mt.id);U.value=Array.isArray(Ot)?Ot:[Ot]}catch(Ot){console.error("[MapView][watch selectedSalarie] Error:",Ot),U.value=[]}finally{We.value=!1}}});function Ke(){localStorage.removeItem("lastPlanId")}function He(mt,Ge="m"){return Ge==="m"?`${(mt/1e4).toFixed(2)} ha`:Ge==="m"?mt>=1e3?`${(mt/1e3).toFixed(2)} km`:`${mt.toFixed(2)} m`:`${mt.toFixed(2)} ${Ge}`}const Xe=Ft(!1);function ot(mt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimtrique"}[mt]||mt}async function kt(){var Ge,Ot,Pn,tr,Zn,Wt,mn,It,Kt,Ln;if(!V.value||!y.value||!D.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const mt=V.value;try{console.log("[generateSynthesis] Dbut de la gnration"),console.log("[generateSynthesis] Plan courant complet:",mt),await Z();let Hr=mt;if(!mt.salarie_details&&!mt.entreprise_details&&!mt.client_details){console.log("[generateSynthesis] Dtails manquants, tentative de rcupration...");try{const hr=await Un.get(`/plans/${mt.id}/`);hr.status===200&&(console.log("[generateSynthesis] Plan mis  jour:",hr.data),V.value={...mt,...hr.data},Hr=hr.data,i.updatePlanDetails(mt.id,hr.data))}catch(hr){console.error("[generateSynthesis] Erreur lors de la rcupration des dtails:",hr)}}await new Promise(hr=>setTimeout(hr,1e3)),Xe.value=!0;const ir=Hr.salarie_details,Br=Hr.client_details,jr=(ir==null?void 0:ir.entreprise_details)||Hr.entreprise_details;console.log("[generateSynthesis] Dtails du plan utilis:",Hr),console.log("[generateSynthesis] Dtails des utilisateurs:",{salarie:ir?{id:ir.id,nom:`${ir.first_name} ${ir.last_name}`,company:ir.company_name,logo:ir.logo}:null,entreprise:jr?{id:jr.id,nom:`${jr.first_name} ${jr.last_name}`,company:jr.company_name,logo:jr.logo}:null,client:Br?{id:Br.id,nom:`${Br.first_name} ${Br.last_name}`,company:Br.company_name}:null}),g.value&&($(),g.value=null);const rn=new Ar("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Ri=new Image;Ri.src=s1,await new Promise(hr=>{Ri.onload=()=>{console.log("[generateSynthesis] Logo application charg"),hr()},Ri.onerror=Fi=>{console.error("[generateSynthesis] Erreur chargement logo application:",Fi),hr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",jr==null?void 0:jr.logo);let yi=null;jr!=null&&jr.logo&&(yi=new Image,yi.src=jr.logo,await new Promise(hr=>{yi?(yi.onload=()=>{console.log("[generateSynthesis] Logo entreprise charg avec succs"),hr()},yi.onerror=Fi=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Fi),hr()}):hr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",ir==null?void 0:ir.logo);let pi=null;ir!=null&&ir.logo&&(pi=new Image,pi.src=ir.logo,await new Promise(hr=>{pi?(pi.onload=()=>{console.log("[generateSynthesis] Logo salarie charg avec succs"),hr()},pi.onerror=Fi=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Fi),hr()}):hr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:yi!==null,logoSalarie:pi!==null}),yi!==null&&rn.addImage(yi,"JPEG",148.5-40-30,20,40,40),rn.addImage(Ri,"JPEG",148.5-40/2,20,40,40),pi!==null&&rn.addImage(pi,"JPEG",148.5+30,20,40,40),rn.setFontSize(24),rn.setTextColor(0),rn.text(mt.nom||"Sans titre",297/2,100,{align:"center"});let Zr=120;if(jr&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Entreprise:",20,Zr),rn.setFont("helvetica","normal"),rn.text(`${jr.first_name} ${jr.last_name}${jr.company_name?` (${jr.company_name})`:""}`,20,Zr+6),Zr+=15),ir&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Salarie:",20,Zr),rn.setFont("helvetica","normal"),rn.text(`${ir.first_name} ${ir.last_name}${ir.company_name?` (${ir.company_name})`:""}`,20,Zr+6),Zr+=15),Br&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Client:",20,Zr),rn.setFont("helvetica","normal"),rn.text(`${Br.first_name} ${Br.last_name}${Br.company_name?` (${Br.company_name})`:""}`,20,Zr+6),Zr+=15),mt.description){rn.setFont("helvetica","bold"),rn.text("Description:",20,Zr),rn.setFont("helvetica","normal");const hr=rn.splitTextToSize(mt.description,150);rn.text(hr,20,Zr+6),Zr+=8*hr.length+10}Zr=Math.min(Zr,180),rn.setFontSize(10),rn.setTextColor(100),rn.text(`Date de cration: ${ve(mt.date_creation)}`,20,190),rn.text(`Dernire modification: ${ve(mt.date_modification)}`,277,190,{align:"right"});const Or=[];D.value.eachLayer(hr=>Or.push(hr));const Ir=Rt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(y.value);await new Promise(hr=>setTimeout(hr,3e3));for(let hr=0;hr<Or.length;hr++){rn.addPage(),rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.rect(0,0,297,25,"F"),rn.setFontSize(10),rn.setTextColor(50,50,50),rn.setFont("helvetica","bold"),rn.text(mt.nom||"Sans titre",20,12);let Cs=297-20-(15*(1+(yi!==null?1:0)+(pi!==null?1:0))+5*(1+(yi!==null?1:0)));yi!==null&&(rn.addImage(yi,"JPEG",Cs,5,15,15),Cs+=20),rn.addImage(Ri,"JPEG",Cs,5,15,15),Cs+=20,pi!==null&&rn.addImage(pi,"JPEG",Cs,5,15,15),rn.setDrawColor(200,200,200),rn.setLineWidth(.5),rn.line(0,25,297,25);const oi=Or[hr],Fn=oi.properties;if(Fn){rn.setTextColor(0),rn.setFontSize(14),rn.setFont("helvetica","bold");const Po=Fn.name||ot(Fn.type);let ui="";if(Fn.type!=="TextRectangle"){const qn=K(Or,oi);ui=qn>0?` (surface totale d'irrigation : ${He(qn,"m")})`:""}const fr=`${Po}${ui}`;rn.text(fr,20,35)}if(Fn&&Fn.type==="ElevationLine")try{const Po=((Ge=oi.getBounds)==null?void 0:Ge.call(oi))||((Ot=oi.getLatLng)==null?void 0:Ot.call(oi));Po&&y.value.fitBounds(Po instanceof Rt.LatLng?Rt.latLngBounds([Po]):Po,{padding:[50,50]});try{const _n=((Pn=oi.getBounds)==null?void 0:Pn.call(oi))||((tr=oi.getLatLng)==null?void 0:tr.call(oi));if(!_n||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const tn=_n instanceof Rt.LatLng?Rt.latLngBounds([_n]):_n;tn&&tn.isValid&&tn.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(tn,{padding:[50,50],animate:!1})}}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",_n)}await new Promise(_n=>setTimeout(_n,2e3)),y.value.invalidateSize();try{y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())?y.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",_n)}await new Promise(_n=>{const tn=()=>{var Pi;const si=(Pi=y.value)==null?void 0:Pi.getContainer();if(!si){_n();return}const co=si.querySelectorAll(".leaflet-tile-loaded");si.querySelectorAll(".leaflet-tile-loading").length===0&&co.length>0?_n():setTimeout(tn,100)};tn()});const ui=await Ir.takeScreen("image"),fr=await new Promise((_n,tn)=>{const si=new Image;si.onload=()=>_n(si),si.onerror=co=>tn(co),si.src=ui}),qn=40,bo=237/2,wo=Math.min(70,fr.height*bo/fr.width);if(rn.addImage(fr,"PNG",20,qn,bo,wo),Fn.elevationData&&Fn.elevationData.length>0){const _n=document.createElement("canvas");_n.width=800,_n.height=400;const tn=_n.getContext("2d");if(tn){const si=Fn.elevationData,co=Fn.minElevation,xo=Fn.maxElevation,fs=(xo-co)*.05,Qo=co-fs,Ro=xo+fs,hi=40,Bs=_n.width-2*hi,Fo=_n.height-2*hi,Qi=Yr=>hi+Yr/si[si.length-1].distance*Bs,Lo=Yr=>hi+Fo-(Yr-Qo)/(Ro-Qo)*Fo;tn.fillStyle="#f8fafc",tn.fillRect(0,0,_n.width,_n.height),tn.fillStyle="#334155",tn.font="bold 20px Arial",tn.textAlign="center",tn.fillText("Profil altimtrique",_n.width/2,25),tn.strokeStyle="#e2e8f0",tn.lineWidth=1,tn.beginPath(),tn.moveTo(hi,hi),tn.lineTo(hi,Fo+hi),tn.lineTo(Bs+hi,Fo+hi),tn.strokeStyle="#94a3b8",tn.stroke();const Vs=5;for(let Yr=0;Yr<=Vs;Yr++){const Tr=Qo+Yr/Vs*(Ro-Qo),jo=Lo(Tr);tn.beginPath(),tn.strokeStyle="#e2e8f0",tn.moveTo(hi,jo),tn.lineTo(Bs+hi,jo),tn.stroke(),tn.beginPath(),tn.strokeStyle="#94a3b8",tn.moveTo(hi-5,jo),tn.lineTo(hi,jo),tn.stroke(),tn.fillStyle="#64748b",tn.font="12px Arial",tn.textAlign="right",tn.fillText(`${Math.round(Tr)}m`,hi-8,jo+4)}const va=5,eo=si[si.length-1].distance;for(let Yr=0;Yr<=va;Yr++){const Tr=Yr/va*eo,jo=Qi(Tr);tn.beginPath(),tn.strokeStyle="#e2e8f0",tn.moveTo(jo,hi),tn.lineTo(jo,Fo+hi),tn.stroke(),tn.beginPath(),tn.strokeStyle="#94a3b8",tn.moveTo(jo,Fo+hi),tn.lineTo(jo,Fo+hi+5),tn.stroke(),tn.fillStyle="#64748b",tn.font="12px Arial",tn.textAlign="center",tn.fillText(`${Math.round(Tr)}m`,jo,Fo+hi+16)}const rl=tn.createLinearGradient(0,hi,0,Fo+hi);rl.addColorStop(0,"rgba(255, 69, 0, 0.8)"),rl.addColorStop(1,"rgba(255, 69, 0, 0.2)"),tn.beginPath(),tn.moveTo(Qi(si[0].distance),Lo(si[0].elevation)),si.forEach((Yr,Tr)=>{Tr>0&&tn.lineTo(Qi(Yr.distance),Lo(Yr.elevation))}),tn.strokeStyle="#FF4500",tn.lineWidth=2,tn.stroke(),tn.lineTo(Qi(si[si.length-1].distance),Lo(Qo)),tn.lineTo(Qi(si[0].distance),Lo(Qo)),tn.closePath(),tn.fillStyle=rl,tn.fill(),si.forEach(Yr=>{tn.beginPath(),tn.arc(Qi(Yr.distance),Lo(Yr.elevation),3,0,Math.PI*2),tn.fillStyle="#FF4500",tn.fill(),tn.strokeStyle="white",tn.lineWidth=1,tn.stroke()});let ya=0,pr=0;for(let Yr=0;Yr<si.length;Yr++)si[Yr].elevation===co&&(ya=Yr),si[Yr].elevation===xo&&(pr=Yr);tn.beginPath(),tn.arc(Qi(si[pr].distance),Lo(si[pr].elevation),6,0,Math.PI*2),tn.fillStyle="#059669",tn.fill(),tn.strokeStyle="white",tn.lineWidth=2,tn.stroke(),tn.beginPath(),tn.arc(Qi(si[ya].distance),Lo(si[ya].elevation),6,0,Math.PI*2),tn.fillStyle="#DC2626",tn.fill(),tn.strokeStyle="white",tn.lineWidth=2,tn.stroke(),tn.font="12px Arial",tn.fillStyle="#059669",tn.textAlign="left",tn.fillText(`Point haut: ${He(xo,"m")}`,hi,Fo+hi+35),tn.fillStyle="#DC2626",tn.fillText(`Point bas: ${He(co,"m")}`,hi+200,Fo+hi+35);const br=_n.toDataURL("image/png");rn.addImage(br,"PNG",20+bo+20,qn,bo,wo)}}const Lr=qn+wo+15;rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.roundedRect(20,Lr,257,50,3,3,"FD"),rn.setFont("helvetica","bold"),rn.setFontSize(12),rn.setTextColor(51,65,85),rn.text("Caractristiques",30,Lr+10);const Us=[{label:"Distance totale",value:He(Fn.length||0)},{label:"Dnivel positif",value:He(Fn.elevationGain||0,"m")},{label:"Dnivel ngatif",value:He(Fn.elevationLoss||0,"m")}],Hn=[{label:"Pente moyenne",value:`${(Fn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(Fn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${He(Fn.minElevation||0,"m")} / ${He(Fn.maxElevation||0,"m")}`}];let _r=Lr+20;rn.setFont("helvetica","normal"),rn.setFontSize(10),Us.forEach(_n=>{rn.setTextColor(100,116,139),rn.text(_n.label,30,_r),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(_n.value,110,_r),rn.setFont("helvetica","normal"),_r+=9}),_r=Lr+20;const Kr=297/2;Hn.forEach(_n=>{rn.setTextColor(100,116,139),rn.text(_n.label,Kr,_r),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(_n.value,Kr+80,_r),rn.setFont("helvetica","normal"),_r+=9})}catch(Po){console.error("[generateSynthesis] Erreur traitement profil altimtrique:",Po)}else{const Po=((Zn=oi.getBounds)==null?void 0:Zn.call(oi))||((Wt=oi.getLatLng)==null?void 0:Wt.call(oi));Po&&y.value.fitBounds(Po instanceof Rt.LatLng?Rt.latLngBounds([Po]):Po,{padding:[50,50]});try{const ui=((mn=oi.getBounds)==null?void 0:mn.call(oi))||((It=oi.getLatLng)==null?void 0:It.call(oi));if(!ui||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const fr=ui instanceof Rt.LatLng?Rt.latLngBounds([ui]):ui;fr&&fr.isValid&&fr.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(fr,{padding:[50,50],animate:!1})}}catch(ui){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",ui)}await new Promise(ui=>setTimeout(ui,2e3)),y.value.invalidateSize(),await new Promise(ui=>{const fr=()=>{var Lr;const qn=(Lr=y.value)==null?void 0:Lr.getContainer();if(!qn){ui();return}const bo=qn.querySelectorAll(".leaflet-tile-loaded");qn.querySelectorAll(".leaflet-tile-loading").length===0&&bo.length>0?ui():setTimeout(fr,100)};fr()});try{const ui=await Ir.takeScreen("image"),fr=await new Promise((Lr,Us)=>{const Hn=new Image;Hn.onload=()=>Lr(Hn),Hn.onerror=_r=>Us(_r),Hn.src=ui}),qn=45,bo=297*.6-30;let wo=fr.height*bo/fr.width;if(wo>210*.9&&(wo=210*.9),rn.addImage(fr,"PNG",20,qn,bo,wo),Fn){let Lr=function(tn,si,co,xo,Pi){rn.setTextColor(100,116,139),rn.setFont("helvetica","normal"),rn.text(tn,co+10,xo),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(si,co+Pi-10,xo,{align:"right"})},Hn=0;if(Fn.type==="Circle")Hn=4;else if(Fn.type==="Rectangle")Hn=4;else if(Fn.type==="Line")Hn=1,(Kt=Fn.dimensions)!=null&&Kt.width&&Hn++,Fn.surfaceInfluence&&Hn++;else if(Fn.type==="Semicircle")Hn=6;else if(Fn.type==="Polygon")Hn=2;else if(Fn.type==="CircleWithSections"&&(Hn=3,Fn.sections&&Fn.sections.length>0)){const tn=Math.ceil(Fn.sections.length/3);Hn+=tn*3}const _r=Math.max(15+Hn*12+30,60),Kr=297-188.2-20;rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.roundedRect(188.2,qn,Kr,_r,3,3,"FD"),rn.setFont("helvetica","bold"),rn.setFontSize(12),rn.setTextColor(51,65,85),rn.text("Caractristiques",188.2+10,qn+15);let _n=qn+30;rn.setFontSize(10),Fn.type==="Circle"?(Lr("Rayon",He(Fn.radius),188.2,_n,Kr),_n+=12,Lr("Diamtre",He(Fn.radius*2),188.2,_n,Kr),_n+=12,Lr("Surface",He(Fn.surface,"m"),188.2,_n,Kr),_n+=12,Lr("Primtre",He(Fn.perimeter),188.2,_n,Kr)):Fn.type==="Rectangle"?(Lr("Largeur",He(Fn.width),188.2,_n,Kr),_n+=12,Lr("Hauteur",He(Fn.height),188.2,_n,Kr),_n+=12,Lr("Surface",He(Fn.surface,"m"),188.2,_n,Kr),_n+=12,Lr("Primtre",He(Fn.perimeter),188.2,_n,Kr)):Fn.type==="Line"?(Lr("Longueur",He(Fn.length),188.2,_n,Kr),_n+=12,(Ln=Fn.dimensions)!=null&&Ln.width&&(Lr("Largeur d'influence",He(Fn.dimensions.width),188.2,_n,Kr),_n+=12),Fn.surfaceInfluence&&Lr("Surface d'influence",He(Fn.surfaceInfluence,"m"),188.2,_n,Kr)):Fn.type==="Semicircle"?(Lr("Rayon",He(Fn.radius),188.2,_n,Kr),_n+=12,Lr("Diamtre",He(Fn.radius*2),188.2,_n,Kr),_n+=12,Lr("Surface",He(Fn.surface,"m"),188.2,_n,Kr),_n+=12,Lr("Primtre",He(Fn.perimeter),188.2,_n,Kr),_n+=12,Lr("Longueur d'arc",He(Fn.arcLength),188.2,_n,Kr),_n+=12,Lr("Angle d'ouverture",`${Fn.openingAngle.toFixed(1)}`,188.2,_n,Kr)):Fn.type==="Polygon"?(Lr("Surface",He(Fn.surface,"m"),188.2,_n,Kr),_n+=12,Lr("Primtre",He(Fn.perimeter),188.2,_n,Kr)):Fn.type==="CircleWithSections"&&(Lr("Rayon",He(Fn.radius),188.2,_n,Kr),_n+=12,Lr("Surface totale",He(Fn.surface,"m"),188.2,_n,Kr),_n+=12,Lr("Primtre",He(Fn.perimeter),188.2,_n,Kr),_n+=20,Fn.sections&&Fn.sections.length>0&&(_n=yr(Fn.sections,rn,188.2,_n,Kr)))}}catch(ui){console.error(`[generateSynthesis] Erreur capture forme ${hr+1}:`,ui)}}}y.value.removeControl(Ir),rn.save(`synthese_${mt.nom}.pdf`)}catch(mr){console.error("[generateSynthesis] Erreur:",mr),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{Xe.value=!1}}const Ct=fx.debounce(()=>{const mt=hn.startMeasure("invalidateMapSize","MapView");if(!y.value){mt();return}Xs(()=>{hn.measure("invalidateMapSize:nextTick",()=>{var Ge;try{if(y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())){if(y.value.invalidateSize({animate:!1}),(Ge=D.value)!=null&&Ge.getLayers().length)try{O()}catch(Ot){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ot)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ot){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ot)}mt()},"MapView")})},250);function Ut(){Ct()}Co(V,(mt,Ge)=>{mt&&mt.id!==(Ge==null?void 0:Ge.id)&&Xs(()=>{Ut()})});const Gt=Ft(null),cn=Ft(!1),pn=Ft([]),et=gr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Gt.value,salaries:H.value,salariesLength:H.value.length}),!Gt.value)return[];const mt=H.value.filter(Ge=>{var tr,Zn,Wt;const Ot=Ge.entreprise,Pn=typeof Ot=="object"&&Ot!==null?Ot.id:Ot;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Ge,salarieEntreprise:Ot,salarieEntrepriseId:Pn,selectedEntrepriseId:(tr=Gt.value)==null?void 0:tr.id,matches:Pn===((Zn=Gt.value)==null?void 0:Zn.id)}),Pn===((Wt=Gt.value)==null?void 0:Wt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",mt),mt});function it(mt){if(!mt)return"";const Ge=mt.first_name||"",Ot=mt.last_name?mt.last_name.toUpperCase():"",Pn=mt.company_name||mt.role||"";return`${Ge} ${Ot} (${Pn})`}async function nt(){cn.value=!0;try{const mt=await Un.get("/users/",{params:{role:"ENTREPRISE"}});pn.value=mt.data}catch(mt){console.error("[MapView] Error loading entreprises:",mt),pn.value=[]}finally{cn.value=!1}}async function Vt(mt){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",mt),Gt.value=mt,xe.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:mt.id});const Ge=await Un.get("/users/",{params:{role:"SALARIE",entreprise:mt.id}});console.log("[MapView][selectEntreprise] Rponse reue:",Ge.data),H.value=Ge.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",H.value)}catch(Ge){console.error("[MapView] Error loading salaries for entreprise:",Ge),H.value=[]}finally{xe.value=!1}}function Qt(){Gt.value=null,te.value=null,me.value=null,H.value=[],U.value=[],R.value=[]}function On(){te.value=null,me.value=null,U.value=[],R.value=[]}function wn(){me.value=null,R.value=[]}async function Tn(mt){var Ge,Ot,Pn,tr,Zn,Wt;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:mt.id,username:mt.username,company:mt.company_name,role:mt.role}),console.log("Contexte utilisateur:",{userType:(Ge=j.user)==null?void 0:Ge.user_type,userId:(Ot=j.user)==null?void 0:Ot.id,userRole:(Pn=j.user)==null?void 0:Pn.role,selectedEntrepriseId:(tr=Gt.value)==null?void 0:tr.id}),te.value=mt,We.value=!0;try{const mn={role:"VISITEUR",salarie:mt.id};j.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(Zn=j.user)==null?void 0:Zn.id),mn.entreprise=(Wt=j.user)==null?void 0:Wt.id):Gt.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",Gt.value.id),mn.entreprise=Gt.value.id),console.log("Paramtres de la requte:",mn);const It=await Un.get("/users/",{params:mn});console.log("Rponse reue du serveur:",{status:It.status,dataLength:Array.isArray(It.data)?It.data.length:"non-array",data:It.data}),Array.isArray(It.data)?(U.value=It.data,console.log(`${It.data.length} visiteurs chargs`),It.data.forEach((Kt,Ln)=>{console.log(`Visiteur ${Ln+1}:`,{id:Kt.id,username:Kt.username,company:Kt.company_name,salarie:Kt.salarie})})):(console.warn("Format de rponse inattendu:",It.data),U.value=[]),U.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(mn){if(console.error("ERREUR lors du chargement des visiteurs:",mn),mn&&typeof mn=="object"&&"response"in mn){const It=mn;console.error("Dtails de l'erreur:",{status:It.response.status,data:It.response.data})}U.value=[]}finally{We.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}function ar(){W.value=!1,Y.value=null}function xn(mt){console.log("[MapView][handleFilterChange] Nouveaux filtres reus:",JSON.stringify(mt,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise  jour des filtres dans le store"),s.updateFilters(mt),console.log("[MapView][handleFilterChange] lments dans le store:",{count:s.elements.length,ids:s.elements.map(Ge=>Ge.id)}),console.log("[MapView][handleFilterChange] Mise  jour de l'affichage de la carte"),Mn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise  jour force de l'affichage"),Mn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres termin")}function Mn(){if(!D.value)return;const mt={accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise  jour de l'affichage avec filtres:",JSON.stringify(mt,null,2));const Ge={count:s.elements.length,elements:s.elements.map(at=>({id:at.id,type_forme:at.type_forme}))};console.log("[MapView][updateMapDisplay] lments dans le store:",JSON.stringify(Ge,null,2));const Ot=s.getFilteredElements;console.log("[MapView][updateMapDisplay] lments filtrs:",{total:s.elements.length,filtered:Ot.length,filteredIds:Ot.map(at=>at.id)});const Pn=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Pn.length);const tr=Pn.map(at=>({_leaflet_id:at._leaflet_id,_dbId:at._dbId,hasProperties:!!at.properties,propertyType:at.properties?at.properties.type:null,category:at.properties?at.properties.category:null}));console.log("[MapView][updateMapDisplay] Dtails des couches:",JSON.stringify(tr,null,2)),console.log("[MapView][updateMapDisplay] tat des filtres pour les catgories:",{forages:s.filters.categories.forages,clients:s.filters.categories.clients,entrepots:s.filters.categories.entrepots,livraisons:s.filters.categories.livraisons,cultures:s.filters.categories.cultures,parcelles:s.filters.categories.parcelles});const Zn=new Map;f.value.forEach(at=>{at.layer&&at.id&&Zn.set(at.id,at.layer)});const Wt=new Map;Pn.forEach(at=>{at._dbId&&Wt.set(at,at._dbId)});const mn=new Set(Ot.map(at=>at.id));console.log("[MapView][updateMapDisplay] Dbut du traitement des couches");const It=Array.from(mn);console.log("[MapView][updateMapDisplay] IDs des lments filtrs:",JSON.stringify(It));let Kt=0,Ln=0,mr=0;Pn.forEach(at=>{var yi,pi;const Cn=at._dbId,xr=at._leaflet_id;if(!Cn){if(!at.properties){mr++,console.log(`[MapView][updateMapDisplay] Couche ${xr} sans dbId et sans proprits, ignore`);return}at._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${xr} sans dbId, ID temporaire assign: ${at._dbId}`)}const Di=at.properties||{},Fr=Di.type||at.type_forme||"";let Er=Di.category;if(at._dbId){const Zr=s.elements.find(Or=>Or.id===at._dbId);if(Zr){const Or=Zr.data;Or&&Or.category&&(Er!==Or.category&&(console.log(`[MapView][updateMapDisplay] Catgorie diffrente dtecte - Proprits: ${Er}, Store: ${Or.category} pour la couche ${at._dbId}`),Er=Or.category),at.properties||(at.properties={}),at.properties.category=Er)}}Er||(Er="default");const lr=Di.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${xr} (dbId: ${at._dbId}): type=${Fr}, category=${Er}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(s.filters));let Hr=!1;Fr?Hr=Fr in s.filters.shapeTypes&&s.filters.shapeTypes[Fr]===!0:Hr=s.filters.shapeTypes.Polygon===!0;let ir=!1;Er?Er in s.filters.categories?(ir=s.filters.categories[Er]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${Er}: ${ir}`)):(ir=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${Er} non trouve dans les filtres, utilisation de 'forages': ${ir}`)):(ir=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie non spcifie, utilisation de 'forages': ${ir}`));let Br=!1;const jr={company:s.filters.accessLevels.company===!0,employee:s.filters.accessLevels.employee===!0,visitor:s.filters.accessLevels.visitor===!0};let rn="visitor";jr.company?rn="company":jr.employee?rn="employee":jr.visitor&&(rn="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur: ${rn}`),rn==="company"?Br=!0:rn==="employee"?Br=lr==="employee"||lr==="visitor":rn==="visitor"&&(Br=lr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche: ${lr}, visible: ${Br}`);const Ri=Hr&&ir&&Br;console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${xr}: typeVisible=${Hr}, categoryVisible=${ir}, accessLevelVisible=${Br}, isVisible=${Ri}`),console.log(`[MapView][updateMapDisplay] Dtails de la couche ${xr}: type=${Fr}, category=${Er}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:s.filters.accessLevels,categories:s.filters.categories,shapeTypes:s.filters.shapeTypes},null,2)),Ri?D.value.hasLayer(at)?(Kt++,console.log(`[MapView][updateMapDisplay] Couche ${at._dbId} (${Fr}) dj visible avec catgorie ${((pi=at.properties)==null?void 0:pi.category)||"non dfinie"}`)):(Er&&Er!=="default"&&(!at.properties||!at.properties.category)&&(at.properties||(at.properties={}),at.properties.category=Er,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant ajout: ${Er} pour la couche ${at._dbId}`)),D.value.addLayer(at),Kt++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${at._dbId} (${Fr}) avec catgorie ${((yi=at.properties)==null?void 0:yi.category)||"non dfinie"}`)):D.value.hasLayer(at)?(D.value.removeLayer(at),Ln++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${at._dbId} (${Fr}) - Filtres non respects`)):(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${at._dbId} (${Fr}) dj masque`))}),console.log("[MapView][updateMapDisplay] Dbut de la restauration des couches filtres"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",f.value.length),f.value.forEach(at=>{var pi;if(!at.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignore");return}const Cn=at.layer,xr=Cn._leaflet_id,Di=Cn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${xr} (dbId: ${Di})`),D.value.hasLayer(Cn)){console.log(`[MapView][updateMapDisplay] La couche ${xr} est dj dans le featureGroup, ignore`);return}const Fr=Cn.properties||{},Er=Fr.type||Cn.type_forme||"";let lr=null;if(Cn._dbId){const Zr=s.elements.find(Or=>Or.id===Cn._dbId);if(Zr){const Or=Zr.data;Or&&Or.category&&(lr=Or.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis le store: ${lr} pour la couche ${Cn._dbId}`))}}!lr&&Fr.category&&(lr=Fr.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis les proprits: ${lr} pour la couche ${xr}`)),lr||(lr="default");const Hr=Fr.accessLevel||"visitor";if(Cn.properties||(Cn.properties={}),lr&&lr!=="default"&&(Cn.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie/restaure: ${lr} pour la couche ${Cn._dbId}`),Cn._dbId)){const Zr=s.elements.find(Or=>Or.id===Cn._dbId);if(Zr){const Or=Zr;Or.data||(Or.data={}),Or.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store: ${lr} pour l'lment ${Cn._dbId}`),Or.data.category=lr,s.$patch({unsavedChanges:!0}))}}Cn.properties.accessLevel||(Cn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Proprits de la couche ${xr}: type=${Er}, category=${lr}, accessLevel=${Hr}`);let ir=!1;Er?ir=Er in s.filters.shapeTypes&&s.filters.shapeTypes[Er]===!0:ir=s.filters.shapeTypes.Polygon===!0;let Br=!1;lr?lr in s.filters.categories?(Br=s.filters.categories[lr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${lr}: ${Br}`)):(Br=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${lr} non trouve, utilisation de 'forages': ${Br}`)):(Br=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catgorie, utilisation de 'forages': ${Br}`));let jr=!1;const rn={company:s.filters.accessLevels.company===!0,employee:s.filters.accessLevels.employee===!0,visitor:s.filters.accessLevels.visitor===!0};let Ri="visitor";rn.company?Ri="company":rn.employee?Ri="employee":rn.visitor&&(Ri="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur (2me tape): ${Ri}`),Ri==="company"?jr=!0:Ri==="employee"?jr=Hr==="employee"||Hr==="visitor":Ri==="visitor"&&(jr=Hr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche (2me tape): ${Hr}, visible: ${jr}`);const yi=ir&&Br&&jr;if(console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${xr}: typeVisible=${ir}, categoryVisible=${Br}, accessLevelVisible=${jr}, isVisible=${yi}`),yi){if(lr&&lr!=="default"&&(Cn.properties||(Cn.properties={}),Cn.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant restauration: ${lr} pour la couche ${xr}`),Cn._dbId)){const Zr=s.elements.find(Or=>Or.id===Cn._dbId);if(Zr){const Or=Zr;Or.data||(Or.data={}),Or.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store avant restauration: ${lr} pour l'lment ${Cn._dbId}`),Or.data.category=lr,s.$patch({unsavedChanges:!0}))}}D.value.addLayer(Cn),Kt++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${xr} (${Er}) avec catgorie ${((pi=Cn.properties)==null?void 0:pi.category)||"non dfinie"} - Filtres respects`)}else console.log(`[MapView][updateMapDisplay] La couche ${xr} (${Er}) reste masque - Filtres non respects`)}),console.log(`[MapView][updateMapDisplay] Restauration termine: ${Kt} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Kt} couches visibles, ${Ln} couches masques, ${mr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise  jour termine")}function En(mt){if(D.value){const Ot=D.value.getLayers().find(Pn=>Pn._leaflet_id===mt.id);Ot&&(Ot.properties.name=mt.title,Ot.properties.description=mt.description,Ot.properties.columnId=mt.columnId,Ot.properties.accessLevel=mt.accessLevel,Ot.properties.category||(Ot.properties.category="forages"),Ot.setNoteStyle({color:mt.style.color,fillColor:mt.style.fillColor,weight:mt.style.weight,fillOpacity:mt.style.fillOpacity,radius:mt.style.radius}),Ot.closePopup(),Ot.unbindPopup(),Ot.bindPopup(Ot.createPopupContent()),console.log("[handleNoteSave] Note mise  jour:",{name:Ot.properties.name,category:Ot.properties.category,accessLevel:Ot.properties.accessLevel}))}u.success("Note enregistre avec succs")}async function cr(mt){var Ge;me.value=mt,N.value=!0;try{const Ot={visiteur:mt.id};j.isEntreprise?Ot.entreprise=(Ge=j.user)==null?void 0:Ge.id:Gt.value&&(Ot.entreprise=Gt.value.id),te.value&&(Ot.salarie=te.value.id);const Pn=await Un.get("/plans/",{params:Ot});R.value=Pn.data}catch(Ot){console.error("[MapView] Error loading client plans:",Ot),R.value=[]}finally{N.value=!1}}function yr(mt,Ge,Ot,Pn,tr){if(!mt||mt.length===0)return Pn;const Zn=[...mt].sort((Cn,xr)=>(xr.surface||0)-(Cn.surface||0)),Wt=tr,mn=7,It=6,Kt=2,Ln=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],mr=mn+It*Zn.length;Ge.setFillColor(248,250,252),Ge.setDrawColor(226,232,240),Ge.roundedRect(Ot,Pn,Wt,mr+Kt*2,2,2,"FD"),Ge.setFillColor(241,245,249),Ge.rect(Ot+Kt,Pn+Kt,Wt-Kt*2,mn,"F"),Ge.setFont("helvetica","bold"),Ge.setFontSize(7),Ge.setTextColor(51,65,85);let at=Ot+Kt;return Ln.forEach(Cn=>{const xr=Cn.width*(Wt-Kt*2);Cn.align==="right"?Ge.text(Cn.header,at+xr-Kt,Pn+Kt+5,{align:"right"}):Cn.align==="center"?Ge.text(Cn.header,at+xr/2,Pn+Kt+5,{align:"center"}):Ge.text(Cn.header,at+Kt/2,Pn+Kt+5),at+=xr}),Ge.setFont("helvetica","normal"),Ge.setFontSize(6.5),Ge.setTextColor(71,85,105),Zn.forEach((Cn,xr)=>{const Di=Pn+mn+Kt+xr*It;xr%2===0&&(Ge.setFillColor(250,252,254),Ge.rect(Ot+Kt,Di,Wt-Kt*2,It,"F"));let Fr=Ot+Kt;const Er=Cn.name||`Section ${xr+1}`;Ge.text(Er,Fr+Kt/2,Di+4),Fr+=Ln[0].width*(Wt-Kt*2);const lr=He(Cn.surface||0,"m");Ge.text(lr,Fr+Ln[1].width*(Wt-Kt*2)-Kt,Di+4,{align:"right"}),Fr+=Ln[1].width*(Wt-Kt*2);const Hr=Cn.startAngle===0&&Cn.endAngle===360?"Complet":`${Cn.startAngle}-${Cn.endAngle}`;Ge.text(Hr,Fr+Ln[2].width*(Wt-Kt*2)-Kt,Di+4,{align:"right"}),Fr+=Ln[2].width*(Wt-Kt*2);const ir=He(Cn.radius||0);Ge.text(ir,Fr+Ln[3].width*(Wt-Kt*2)-Kt,Di+4,{align:"right"}),Fr+=Ln[3].width*(Wt-Kt*2);const Br=Cn.startAngle===0&&Cn.endAngle===360?"C":"P";Ge.text(Br,Fr+Ln[4].width*(Wt-Kt*2)/2,Di+4,{align:"center"})}),Ge.setDrawColor(226,232,240),Ge.setLineWidth(.05),Ge.line(Ot+Kt,Pn+mn+Kt,Ot+Wt-Kt,Pn+mn+Kt),Pn+mr+Kt*2}return(mt,Ge)=>{var Ot,Pn,tr,Zn,Wt,mn;return $e(),qe(Rn,null,[P("div",VF,[P("div",HF,[Xe.value?($e(),qe("div",GF,Ge[8]||(Ge[8]=[uc('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):dn("",!0),V.value?dn("",!0):($e(),qe("div",qF,[P("div",WF,[Ge[11]||(Ge[11]=uc('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+s1+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),P("div",ZF,[P("button",{onClick:Ge[0]||(Ge[0]=It=>ue.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ge[9]||(Ge[9]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ei(" Crer un nouveau plan ")])),P("button",{onClick:Ge[1]||(Ge[1]=It=>Le.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ge[10]||(Ge[10]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Ei(" Charger un plan existant ")]))])])])),In(P("div",KF,[($e(),$a(Mg,{to:"body"},[V.value&&!Xe.value?($e(),qe("div",YF,[fi(lI,{"last-save":(Ot=V.value)!=null&&Ot.date_modification?new Date(V.value.date_modification):void 0,"plan-name":(Pn=V.value)==null?void 0:Pn.nom,"plan-description":(tr=V.value)==null?void 0:tr.description,"save-status":I.value,onChangeMapType:Wn(ae),onCreateNewPlan:Ge[2]||(Ge[2]=It=>ue.value=!0),onLoadPlan:Ge[3]||(Ge[3]=It=>Le.value=!0),onSavePlan:Z,onAdjustView:pe,onGenerateSummary:kt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):dn("",!0)])),P("div",JF,[r.value&&V.value&&!Xe.value?($e(),qe("div",{key:0,onClick:le,class:"md:hidden fixed inset-0 bg-black/30 z-[1999] transition-opacity duration-300"})):dn("",!0),V.value&&!Xe.value?($e(),qe("div",{key:1,onClick:le,class:"md:hidden fixed left-0 right-0 z-[2500] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"}},Ge[12]||(Ge[12]=[uc('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):dn("",!0),P("div",XF,[P("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 z-[1000]"},null,512)]),V.value&&!Xe.value?($e(),qe("div",{key:2,class:zi([r.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 md:border-l border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none overflow-y-auto"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[P("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200"},[P("div",{class:"flex items-center"},[P("div",{onClick:le,class:"w-10 h-1.5 bg-gray-300 rounded-full cursor-pointer mr-3"})]),P("button",{onClick:le,class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},Ge[13]||(Ge[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),fi(PO,{"current-tool":Wn(d),"selected-shape":ce.value,"all-layers":((Zn=Wn(D))==null?void 0:Zn.getLayers())||[],onToolChange:Wn(_),onStyleUpdate:Wn(E),onPropertiesUpdate:de,onDeleteShape:ze,onFilterChange:xn},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):dn("",!0)]),Xe.value?($e(),qe("div",QF,Ge[14]||(Ge[14]=[uc('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):dn("",!0)],512),[[G0,V.value]]),($e(),$a(Mg,{to:"body"},[fi(px,{ref_key:"newPlanModalRef",ref:ee,modelValue:ue.value,"onUpdate:modelValue":Ge[4]||(Ge[4]=It=>ue.value=It),onCreated:Qe,onSalarieSelected:Ge[5]||(Ge[5]=It=>te.value=It),onVisiteurSelected:Ge[6]||(Ge[6]=It=>re.value=It)},null,8,["modelValue"])])),($e(),$a(Mg,{to:"body"},[Le.value?($e(),qe("div",e9,[P("div",t9,[P("div",n9,[Ge[16]||(Ge[16]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),P("button",{onClick:Ge[7]||(Ge[7]=It=>Le.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Ge[15]||(Ge[15]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",r9,[Wn(j).isAdmin?($e(),qe("div",i9,[Gt.value?te.value?me.value?($e(),qe("div",x9,[P("div",L9,[P("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ge[31]||(Ge[31]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des clients ")])),Ge[32]||(Ge[32]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",S9,Zt(it(me.value)),1)]),Ge[34]||(Ge[34]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",C9,[N.value?($e(),qe(Rn,{key:0},Rr(3,It=>P("div",{key:It,class:"animate-pulse"},Ge[33]||(Ge[33]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Rr(R.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Ve(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",P9,Zt(It.nom),1),P("div",M9,Zt(It.description),1),P("div",A9," Modifi le "+Zt(ve(It.date_modification)),1)],8,E9))),128))])])):($e(),qe("div",g9,[P("div",m9,[P("button",{onClick:On,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ge[25]||(Ge[25]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des salaries ")])),Ge[26]||(Ge[26]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",v9,Zt(it(te.value)),1)]),Ge[30]||(Ge[30]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),P("div",y9,[We.value?($e(),qe(Rn,{key:0},Rr(3,It=>P("div",{key:It,class:"animate-pulse"},Ge[27]||(Ge[27]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),qe(Rn,{key:1},[fe.value.length===0?($e(),qe("div",_9,Ge[28]||(Ge[28]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):($e(!0),qe(Rn,{key:1},Rr(fe.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>cr(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",w9,Zt(it(It)),1)]),Ge[29]||(Ge[29]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,b9))),128))],64))])])):($e(),qe("div",u9,[P("div",c9,[P("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ge[20]||(Ge[20]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des entreprises ")])),Ge[21]||(Ge[21]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",f9,Zt(it(Gt.value)),1)]),Ge[24]||(Ge[24]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),P("div",h9,[xe.value?($e(),qe(Rn,{key:0},Rr(3,It=>P("div",{key:It,class:"animate-pulse"},Ge[22]||(Ge[22]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Rr(et.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Tn(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",p9,Zt(it(It)),1)]),Ge[23]||(Ge[23]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,d9))),128))])])):($e(),qe("div",o9,[Ge[19]||(Ge[19]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),P("div",s9,[cn.value?($e(),qe(Rn,{key:0},Rr(3,It=>P("div",{key:It,class:"animate-pulse"},Ge[17]||(Ge[17]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Rr(pn.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Vt(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",l9,Zt(it(It)),1)]),Ge[18]||(Ge[18]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,a9))),128))])]))])):Wn(j).isSalarie?($e(),qe("div",k9,[me.value?($e(),qe("div",I9,[P("div",R9,[P("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ge[39]||(Ge[39]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des clients ")])),Ge[40]||(Ge[40]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",F9,Zt(it(me.value)),1)]),Ge[42]||(Ge[42]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",j9,[N.value?($e(),qe(Rn,{key:0},Rr(3,It=>P("div",{key:It,class:"animate-pulse"},Ge[41]||(Ge[41]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Rr(R.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Ve(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",$9,Zt(It.nom),1),P("div",U9,Zt(It.description),1),P("div",V9," Modifi le "+Zt(ve(It.date_modification)),1)],8,z9))),128))])])):($e(),qe("div",T9,[Ge[38]||(Ge[38]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),P("div",N9,[We.value?($e(),qe(Rn,{key:0},Rr(3,It=>P("div",{key:It,class:"animate-pulse"},Ge[35]||(Ge[35]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),qe(Rn,{key:1},[fe.value.length===0?($e(),qe("div",D9,Ge[36]||(Ge[36]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):($e(!0),qe(Rn,{key:1},Rr(fe.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>cr(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",O9,Zt(it(It)),1)]),Ge[37]||(Ge[37]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,B9))),128))],64))])]))])):Wn(j).isEntreprise?($e(),qe("div",H9,Zt(Wn(j).isEntreprise?"...":""),1)):($e(),qe("div",G9,[Wn(i).plans.length===0?($e(),qe("div",q9,Ge[43]||(Ge[43]=[P("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):($e(),qe("div",W9,[($e(!0),qe(Rn,null,Rr(Wn(i).plans,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Ve(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",K9,Zt(It.nom),1),P("div",Y9,Zt(It.description),1),P("div",J9," Modifi le "+Zt(ve(It.date_modification)),1)],8,Z9))),128))]))]))])])])):dn("",!0)]))])]),W.value?($e(),$a(hx,{key:0,note:Y.value,"is-new-note":!((Wt=Y.value)!=null&&Wt.id),location:(mn=Y.value)==null?void 0:mn.location,onClose:ar,onSave:En},null,8,["note","is-new-note","location"])):dn("",!0)],64)}}}),X9={class:"fixed inset-0 z-[3001] overflow-y-auto"},Q9={class:"flex items-center justify-center min-h-screen w-full p-0"},ej={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},tj={class:"p-4 md:p-6"},nj={class:"flex justify-between items-center mb-4 border-b pb-4"},rj={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},ij={class:"mt-4"},oj={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},sj={class:"flex"},aj={class:"ml-3"},lj={class:"text-sm font-medium text-red-800"},uj={key:0},cj={key:1},fj=["value"],hj={key:2},dj={key:3},pj=["value"],gj={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},mj={key:0,class:"mt-2 text-sm text-red-600"},vj={key:0,class:"mt-2 text-sm text-red-600"},yj={key:4},_j={class:"flex items-center"},bj={key:5},wj={key:6},xj={key:0,class:"mt-2 text-sm text-red-600"},Lj={class:"flex justify-end space-x-3"},Sj=["disabled"],Cj={key:0,class:"mr-2"},Ej=cs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:n}){const t=e,r=n,i=Ft(!1),s=Ft(""),o=Ft(""),u=Ft(""),f=Ft(""),d=Ft(""),g=Kl({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:t.isEntreprise?"SALARIE":t.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0});$s(()=>{var x;(x=t.user)!=null&&x.id?(g.id=t.user.id,g.first_name=t.user.first_name||"",g.last_name=t.user.last_name||"",g.username=t.user.username||"",g.email=t.user.email||"",g.company_name=t.user.company_name||"",g.role=t.user.role||"VISITEUR",g.is_active=t.user.is_active??!0,t.user.salarie?typeof t.user.salarie=="object"?g.salarie=t.user.salarie.id:g.salarie=t.user.salarie:t.user.salarie_id?g.salarie=t.user.salarie_id:t.currentSalarie&&(g.salarie=parseInt(t.currentSalarie)),t.user.entreprise?typeof t.user.entreprise=="object"?g.entreprise=t.user.entreprise.id:g.entreprise=t.user.entreprise:t.user.entreprise_id?g.entreprise=t.user.entreprise_id:t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise))):(t.currentSalarie&&(g.salarie=parseInt(t.currentSalarie)),t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise)),t.isEntreprise?g.role="SALARIE":t.isAdmin||(g.role="VISITEUR"))}),vp(()=>{g.role==="ADMIN"||g.role==="ENTREPRISE"?(g.salarie=null,g.entreprise=null):g.role==="SALARIE"&&(g.salarie=null,t.isEntreprise&&t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise)))}),vp(()=>{s.value="",o.value="",u.value="",f.value="",t.apiErrors&&t.apiErrors.length>0&&t.apiErrors.forEach(x=>{switch(x.field){case"email":s.value=x.message;break;case"username":o.value=x.message;break;case"password":u.value=x.message;break;case"non_field_error":default:f.value=x.message;break}})});async function y(){s.value="",o.value="",u.value="",f.value="";let x=!0;if(g.id||(g.password!==d.value?(u.value="Les mots de passe ne correspondent pas",x=!1):g.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractres",x=!1)),!!x){i.value=!0;try{const _={...g};g.id&&delete _.password,t.isEntreprise&&["SALARIE","VISITEUR"].includes(g.role)&&(_.entreprise_id=t.currentEntreprise?parseInt(t.currentEntreprise):void 0),_.salarie&&(_.salarie_id=_.salarie,delete _.salarie),t.currentSalarie&&g.role==="VISITEUR"&&(_.salarie_id=parseInt(t.currentSalarie)),await r("save",_),r("refresh")}catch(_){console.error("Erreur locale:",_)}finally{i.value=!1}}}return(x,_)=>($e(),qe("div",X9,[P("div",Q9,[_[35]||(_[35]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",ej,[P("div",null,[P("div",tj,[P("div",nj,[P("h3",rj,Zt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),P("button",{type:"button",onClick:_[0]||(_[0]=E=>x.$emit("close")),class:"text-gray-400 hover:text-gray-500"},_[14]||(_[14]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",ij,[f.value?($e(),qe("div",oj,[P("div",sj,[_[15]||(_[15]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",aj,[P("h3",lj,Zt(f.value),1)])])])):dn("",!0),P("form",{onSubmit:Lf(y,["prevent"]),class:"space-y-6"},[e.isAdmin?($e(),qe("div",uj,[_[17]||(_[17]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),In(P("select",{id:"role","onUpdate:modelValue":_[1]||(_[1]=E=>g.role=E),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[16]||(_[16]=[P("option",{value:"ADMIN"},"Administrateur",-1),P("option",{value:"ENTREPRISE"},"Entreprise",-1),P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[lo,g.role]])])):dn("",!0),e.isAdmin&&g.role==="SALARIE"?($e(),qe("div",cj,[_[19]||(_[19]=P("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(P("select",{id:"entreprise","onUpdate:modelValue":_[2]||(_[2]=E=>g.entreprise=E),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[_[18]||(_[18]=P("option",{value:null},"-- Slectionner une entreprise --",-1)),($e(!0),qe(Rn,null,Rr(e.entreprises,E=>($e(),qe("option",{key:E.id,value:E.id},Zt(E.first_name)+" "+Zt(E.last_name)+" ("+Zt(E.company_name||"Entreprise")+") ",9,fj))),128))],512),[[lo,g.entreprise]])])):dn("",!0),e.isEntreprise&&!g.id?($e(),qe("div",hj,[_[21]||(_[21]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),In(P("select",{id:"role","onUpdate:modelValue":_[3]||(_[3]=E=>g.role=E),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[20]||(_[20]=[P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[lo,g.role]])])):dn("",!0),(e.isAdmin||e.isEntreprise)&&g.role==="VISITEUR"&&!e.currentSalarie?($e(),qe("div",dj,[_[23]||(_[23]=P("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),In(P("select",{id:"salarie","onUpdate:modelValue":_[4]||(_[4]=E=>g.salarie=E),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[_[22]||(_[22]=P("option",{value:null},"-- Slectionner un salarie --",-1)),($e(!0),qe(Rn,null,Rr(e.salaries,E=>($e(),qe("option",{key:E.id,value:E.id},Zt(E.first_name)+" "+Zt(E.last_name)+" ("+Zt(E.company_name||"Salarie")+") ",9,pj))),128))],512),[[lo,g.salarie]])])):dn("",!0),P("div",gj,[P("div",null,[_[24]||(_[24]=P("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),In(P("input",{type:"text",id:"first_name","onUpdate:modelValue":_[5]||(_[5]=E=>g.first_name=E),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.first_name]])]),P("div",null,[_[25]||(_[25]=P("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),In(P("input",{type:"text",id:"last_name","onUpdate:modelValue":_[6]||(_[6]=E=>g.last_name=E),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.last_name]])])]),P("div",null,[_[26]||(_[26]=P("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),In(P("input",{type:"email",id:"email","onUpdate:modelValue":_[7]||(_[7]=E=>g.email=E),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.email]]),s.value?($e(),qe("div",mj,Zt(s.value),1)):dn("",!0)]),P("div",null,[_[27]||(_[27]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),In(P("input",{type:"text",id:"username","onUpdate:modelValue":_[8]||(_[8]=E=>g.username=E),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.username]]),o.value?($e(),qe("div",vj,Zt(o.value),1)):dn("",!0)]),P("div",null,[_[28]||(_[28]=P("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(P("input",{type:"text",id:"company_name","onUpdate:modelValue":_[9]||(_[9]=E=>g.company_name=E),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.company_name]])]),g.role==="ENTREPRISE"||g.role==="SALARIE"?($e(),qe("div",yj,[_[30]||(_[30]=P("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),P("div",_j,[In(P("input",{type:"number",id:"storage_quota","onUpdate:modelValue":_[10]||(_[10]=E=>g.storage_quota=E),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.storage_quota]]),_[29]||(_[29]=P("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),_[31]||(_[31]=P("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):dn("",!0),g.id?dn("",!0):($e(),qe("div",bj,[_[32]||(_[32]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),In(P("input",{type:"password",id:"password","onUpdate:modelValue":_[11]||(_[11]=E=>g.password=E),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,g.password]])])),g.id?dn("",!0):($e(),qe("div",wj,[_[33]||(_[33]=P("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),In(P("input",{type:"password",id:"password_confirm","onUpdate:modelValue":_[12]||(_[12]=E=>d.value=E),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ni,d.value]]),u.value?($e(),qe("div",xj,Zt(u.value),1)):dn("",!0)])),P("div",Lj,[P("button",{type:"button",onClick:_[13]||(_[13]=E=>x.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),P("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?($e(),qe("span",Cj,_[34]||(_[34]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):dn("",!0),Ei(" "+Zt(g.id?"Enregistrer":"Crer"),1)],8,Sj)])],32)])])])])])]))}}),Pj={class:"fixed inset-0 z-[3001] overflow-y-auto"},Mj={class:"flex items-center justify-center min-h-screen w-full"},Aj={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},kj={class:"p-4 md:p-6"},Tj={class:"flex items-start"},Nj={class:"ml-4 flex-1"},Dj={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Bj={class:"mt-2"},Oj={class:"text-sm text-gray-500"},Ij={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},Ix=cs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(n,t)=>($e(),qe("div",Pj,[P("div",Mj,[t[3]||(t[3]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",Aj,[P("div",kj,[P("div",Tj,[t[2]||(t[2]=P("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[P("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),P("div",Nj,[P("h3",Dj,Zt(e.title),1),P("div",Bj,[P("p",Oj,Zt(e.message),1)])])]),P("div",Ij,[P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=r=>n.$emit("confirm"))}," Confirmer "),P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=r=>n.$emit("cancel"))}," Annuler ")])])])])]))}}),Rj={class:"h-full bg-gray-50"},Fj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},jj={class:"flex justify-between items-center mb-8"},zj={class:"text-3xl font-extrabold text-gray-900"},$j={key:0},Uj={key:1},Vj={key:2},Hj={key:0},Gj={key:1},qj={key:2},Wj={class:"bg-white shadow rounded-lg mb-6 p-4"},Zj={class:"space-y-4"},Kj={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Yj={key:0},Jj={key:0,value:"ADMIN"},Xj={key:1,value:"ENTREPRISE"},Qj={key:1},ez=["value"],tz={key:2},nz=["value"],rz={class:"w-full"},iz={class:"bg-white shadow rounded-lg"},oz={class:"overflow-x-auto"},sz={class:"min-w-full divide-y divide-gray-200"},az={class:"bg-gray-50"},lz={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},uz={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},cz={class:"bg-white divide-y divide-gray-200"},fz={key:0,class:"animate-pulse"},hz={key:1},dz={class:"px-6 py-4 whitespace-nowrap"},pz={class:"flex items-center"},gz={class:"flex-shrink-0 h-10 w-10"},mz={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},vz={class:"text-primary-600 font-medium"},yz={class:"ml-4"},_z={class:"text-sm font-medium text-gray-900"},bz={class:"text-sm text-gray-500"},wz={class:"px-6 py-4 whitespace-nowrap"},xz={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lz={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Sz={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Cz={class:"px-6 py-4 whitespace-nowrap"},Ez={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Pz=["onClick"],Mz=["onClick"],Az={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},kz=cs({__name:"UserListView",setup(e){const n=ma(),t=dc(),r=Ft([]),i=Ft([]),s=Ft([]),o=Ft(!1),u=Ft(!1),f=Ft(null),d=Ft(null),g=Ft(!0),y=Ft([]),x=Kl({role:"",search:"",salarie:"",entreprise:""}),_=gr(()=>n.isAdmin),E=gr(()=>n.isEntreprise),T=gr(()=>n.isSalarie),D=gr(()=>_.value?r.value.filter(H=>H.role==="SALARIE"):E.value?r.value.filter(H=>{var U,R;return H.role==="SALARIE"&&((U=H.entreprise)==null?void 0:U.id)===((R=n.user)==null?void 0:R.id)}):[]),O=gr(()=>{let H=r.value;if(E.value&&(H=H.filter(U=>{var R,te,re,me,xe;return U.role==="SALARIE"?((R=U.entreprise)==null?void 0:R.id)===((te=n.user)==null?void 0:te.id):U.role==="VISITEUR"?((me=(re=U.salarie)==null?void 0:re.entreprise)==null?void 0:me.id)===((xe=n.user)==null?void 0:xe.id):!1})),T.value&&(H=H.filter(U=>{var R,te;return U.role==="VISITEUR"&&(U.salarie_id===((R=n.user)==null?void 0:R.id)||U.salarie&&U.salarie.id===((te=n.user)==null?void 0:te.id))})),(_.value||E.value)&&(x.role&&(H=H.filter(U=>U.role===x.role)),x.salarie&&(H=H.filter(U=>{var te;const R=((te=U.salarie)==null?void 0:te.id)||U.salarie_id;return(R==null?void 0:R.toString())===x.salarie.toString()})),x.entreprise&&_.value&&(H=H.filter(U=>{var R,te,re,me,xe;return U.role==="SALARIE"?((te=(R=U.entreprise)==null?void 0:R.id)==null?void 0:te.toString())===x.entreprise.toString():U.role==="VISITEUR"?((xe=(me=(re=U.salarie)==null?void 0:re.entreprise)==null?void 0:me.id)==null?void 0:xe.toString())===x.entreprise.toString():!1}))),x.search){const U=x.search.toLowerCase();H=H.filter(R=>{var te,re,me,xe;return((te=R.username)==null?void 0:te.toLowerCase().includes(U))||((re=R.email)==null?void 0:re.toLowerCase().includes(U))||((me=R.first_name)==null?void 0:me.toLowerCase().includes(U))||((xe=R.last_name)==null?void 0:xe.toLowerCase().includes(U))||R.company_name&&R.company_name.toLowerCase().includes(U)})}return H});$s(async()=>{await $(),await K()});async function $(){var H,U,R;g.value=!0;try{if(_.value)r.value=await n.fetchUsers();else if(E.value){const[te,re]=await Promise.all([Ig({role:"SALARIE",entrepriseId:(H=n.user)==null?void 0:H.id}),Ig({role:"VISITEUR",entrepriseId:(U=n.user)==null?void 0:U.id})]);r.value=[...te,...re]}else T.value&&(r.value=await Ig({role:"VISITEUR",salarieId:(R=n.user)==null?void 0:R.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(te){console.error("Erreur lors de la rcupration des utilisateurs:",te),t.error("Erreur lors de la rcupration des utilisateurs")}finally{g.value=!1}}async function K(){try{_.value?await Promise.all([X(),ue()]):E.value&&await ae()}catch(H){console.error("Erreur lors de la rcupration des dpendances:",H)}}async function X(){var H;try{_.value?i.value=await n.fetchUsersByRole({role:"SALARIE"}):E.value&&(i.value=await n.fetchEntrepriseSalaries((H=n.user)==null?void 0:H.id))}catch(U){console.error("Erreur lors de la rcupration des salaries:",U)}}async function ae(){var H,U;if(!(!E.value||!((H=n.user)!=null&&H.id)))try{i.value=await n.fetchEntrepriseSalaries((U=n.user)==null?void 0:U.id)}catch(R){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",R)}}async function ue(){try{s.value=await n.fetchEnterprises()}catch(H){console.error("Erreur lors de la rcupration des entreprises:",H)}}function Le(){f.value=null,o.value=!0}function W(H){f.value={...H},o.value=!0}function V(){o.value=!1,f.value=null,y.value=[]}async function Y(H){var R,te,re,me,xe,We;y.value=[];const U=!!H.id;try{const N={...H};_.value?(N.entreprise&&typeof N.entreprise=="object"?N.entreprise_id=N.entreprise.id:typeof N.entreprise=="number"&&(N.entreprise_id=N.entreprise),N.salarie&&typeof N.salarie=="object"?N.salarie_id=N.salarie.id:typeof N.salarie=="number"&&(N.salarie_id=N.salarie)):E.value?(N.entreprise_id=(R=n.user)==null?void 0:R.id,N.role==="VISITEUR"&&(N.salarie&&typeof N.salarie=="object"?N.salarie_id=N.salarie.id:typeof N.salarie=="number"&&(N.salarie_id=N.salarie))):T.value&&(N.role="VISITEUR",N.salarie_id=(te=n.user)==null?void 0:te.id),N.role==="SALARIE"?((re=N.entreprise)!=null&&re.id?(N.entreprise_id=N.entreprise.id,delete N.entreprise):typeof N.entreprise=="number"&&(N.entreprise_id=N.entreprise,delete N.entreprise),delete N.salarie):N.role==="VISITEUR"&&((me=N.salarie)!=null&&me.id?(N.salarie_id=N.salarie.id,delete N.salarie):typeof N.salarie=="number"&&(N.salarie_id=N.salarie,delete N.salarie),delete N.entreprise,delete N.entreprise_id),U?(await n.updateUser(H.id,N),t.success("Utilisateur modifi avec succs")):(await n.createUser(N),t.success("Utilisateur cr avec succs")),await Promise.all([$(),K()]),V()}catch(N){console.error("Error saving user:",((xe=N.response)==null?void 0:xe.data)||N),y.value=tT(N),t.error("Erreur lors de la sauvegarde de l'utilisateur");const ee=((We=N.response)==null?void 0:We.data)||{};let fe="";throw typeof ee=="object"&&(fe=Object.entries(ee).map(([ce,ye])=>Array.isArray(ye)?`${ce}: ${ye[0]}`:`${ce}: ${ye}`).filter(ce=>ce).join(`
`)),fe||(fe="Une erreur est survenue lors de la sauvegarde"),new Error(fe)}}function F(H){d.value=H,u.value=!0}async function I(){if(d.value)try{await n.deleteUser(d.value.id),t.success("Utilisateur supprim avec succs"),await Promise.all([$(),K()]),u.value=!1,d.value=null}catch(H){throw console.error("Erreur lors de la suppression de l'utilisateur:",H),t.error("Erreur lors de la suppression de l'utilisateur"),H}}function j(H){var U,R,te,re,me,xe,We,N;return _.value?!0:E.value?H.role==="SALARIE"?((U=H.entreprise)==null?void 0:U.id)===((R=n.user)==null?void 0:R.id):H.role==="VISITEUR"?((re=(te=H.salarie)==null?void 0:te.entreprise)==null?void 0:re.id)===((me=n.user)==null?void 0:me.id):!1:T.value?H.role==="VISITEUR"&&(H.salarie_id===((xe=n.user)==null?void 0:xe.id)||((We=H.salarie)==null?void 0:We.id)===((N=n.user)==null?void 0:N.id)):!1}return(H,U)=>{var R,te,re,me;return $e(),qe("div",Rj,[P("div",Fj,[P("div",jj,[P("h1",zj,[_.value?($e(),qe("span",$j,"Gestion des utilisateurs")):E.value?($e(),qe("span",Uj,"Gestion des salaries et visiteurs")):T.value?($e(),qe("span",Vj,"Gestion des visiteurs")):dn("",!0)]),P("button",{onClick:Le,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[U[5]||(U[5]=P("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_.value?($e(),qe("span",Hj,"Nouvel utilisateur")):E.value?($e(),qe("span",Gj,"Nouveau salarie/visiteur")):T.value?($e(),qe("span",qj,"Nouvel visiteur")):dn("",!0)])]),P("div",Wj,[P("div",Zj,[P("div",Kj,[_.value||E.value?($e(),qe("div",Yj,[U[9]||(U[9]=P("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),In(P("select",{id:"role-filter","onUpdate:modelValue":U[0]||(U[0]=xe=>x.role=xe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[6]||(U[6]=P("option",{value:""},"Tous les rles",-1)),_.value?($e(),qe("option",Jj,"Administrateur")):dn("",!0),_.value?($e(),qe("option",Xj,"Entreprise")):dn("",!0),U[7]||(U[7]=P("option",{value:"SALARIE"},"Salarie",-1)),U[8]||(U[8]=P("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[lo,x.role]])])):dn("",!0),_.value?($e(),qe("div",Qj,[U[11]||(U[11]=P("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(P("select",{id:"entreprise-filter","onUpdate:modelValue":U[1]||(U[1]=xe=>x.entreprise=xe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[10]||(U[10]=P("option",{value:""},"Toutes les entreprises",-1)),($e(!0),qe(Rn,null,Rr(s.value,xe=>($e(),qe("option",{key:xe.id,value:xe.id},Zt(Wn(Vl)(xe)),9,ez))),128))],512),[[lo,x.entreprise]])])):dn("",!0),_.value||E.value?($e(),qe("div",tz,[U[13]||(U[13]=P("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),In(P("select",{id:"salarie-filter","onUpdate:modelValue":U[2]||(U[2]=xe=>x.salarie=xe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[12]||(U[12]=P("option",{value:""},"Tous les salaries",-1)),($e(!0),qe(Rn,null,Rr(D.value,xe=>($e(),qe("option",{key:xe.id,value:xe.id},Zt(Wn(Vl)(xe)),9,nz))),128))],512),[[lo,x.salarie]])])):dn("",!0)]),P("div",rz,[U[14]||(U[14]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),In(P("input",{type:"text",id:"search","onUpdate:modelValue":U[3]||(U[3]=xe=>x.search=xe),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ni,x.search]])])])]),P("div",iz,[P("div",oz,[P("table",sz,[P("thead",az,[P("tr",null,[U[15]||(U[15]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),U[16]||(U[16]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),U[17]||(U[17]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value||E.value?($e(),qe("th",lz," Entreprise ")):dn("",!0),_.value||E.value?($e(),qe("th",uz," Salarie ")):dn("",!0),U[18]||(U[18]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),U[19]||(U[19]=P("th",{scope:"col",class:"relative px-6 py-3"},[P("span",{class:"sr-only"},"Actions")],-1))])]),P("tbody",cz,[g.value?($e(),qe("tr",fz,U[20]||(U[20]=[P("td",{colspan:"7",class:"py-4 px-6"},[P("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):O.value.length===0?($e(),qe("tr",hz,U[21]||(U[21]=[P("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):dn("",!0),($e(!0),qe(Rn,null,Rr(O.value,xe=>{var We;return $e(),qe("tr",{key:xe.id},[P("td",dz,[P("div",pz,[P("div",gz,[P("div",mz,[P("span",vz,Zt(Wn(rT)(xe.first_name,xe.last_name)),1)])]),P("div",yz,[P("div",_z,Zt(Wn(Vl)(xe)),1),P("div",bz,Zt(xe.username),1)])])]),P("td",wz,[P("span",{class:zi(Wn(sT)())},Zt(Wn(oT)(xe.role)),3)]),P("td",xz,Zt(xe.email),1),_.value||E.value?($e(),qe("td",Lz,[xe.role==="ENTREPRISE"?($e(),qe(Rn,{key:0},[Ei(" - ")],64)):xe.role==="SALARIE"?($e(),qe(Rn,{key:1},[Ei(Zt(xe.entreprise?Wn(Vl)(xe.entreprise):"Non assign"),1)],64)):xe.role==="VISITEUR"?($e(),qe(Rn,{key:2},[Ei(Zt((We=xe.salarie)!=null&&We.entreprise?Wn(Vl)(xe.salarie.entreprise):"Non assign"),1)],64)):($e(),qe(Rn,{key:3},[Ei(" - ")],64))])):dn("",!0),_.value||E.value?($e(),qe("td",Sz,[xe.role==="ENTREPRISE"||xe.role==="ADMIN"?($e(),qe(Rn,{key:0},[Ei(" - ")],64)):xe.role==="SALARIE"?($e(),qe(Rn,{key:1},[Ei(" - ")],64)):($e(),qe(Rn,{key:2},[Ei(Zt(xe.salarie?Wn(Vl)(xe.salarie):"Non assign"),1)],64))])):dn("",!0),P("td",Cz,[P("span",{class:zi(Wn(aT)(xe.is_active))},Zt(xe.is_active?"Actif":"Inactif"),3)]),P("td",Ez,[P("button",{onClick:N=>W(xe),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Pz),j(xe)?($e(),qe("button",{key:0,onClick:N=>F(xe),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Mz)):dn("",!0)])])}),128))])])])])]),o.value?($e(),qe("div",Az,[fi(Ej,{user:f.value,salaries:i.value,entreprises:s.value,"is-admin":_.value,"is-entreprise":E.value,"current-salarie":T.value?(te=(R=Wn(n).user)==null?void 0:R.id)==null?void 0:te.toString():void 0,"current-entreprise":E.value?(me=(re=Wn(n).user)==null?void 0:re.id)==null?void 0:me.toString():void 0,"api-errors":y.value,onClose:V,onSave:Y},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):dn("",!0),u.value?($e(),$a(Ix,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:I,onCancel:U[4]||(U[4]=xe=>u.value=!1)})):dn("",!0)])}}}),Tz={class:"h-full bg-gray-50"},Nz={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Dz={class:"sm:flex sm:items-center"},Bz={class:"sm:flex-auto"},Oz={class:"text-2xl font-semibold text-gray-900"},Iz={class:"mt-2 text-sm text-gray-700"},Rz={key:0,class:"mt-8"},Fz={class:"mb-6"},jz=["value"],zz={class:"mb-6"},$z={value:null},Uz=["value"],Vz={key:0,class:"mb-6"},Hz={value:null},Gz=["value"],qz={key:1,class:"mt-8"},Wz={class:"mb-6"},Zz=["value"],Kz={class:"mt-8"},Yz={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},Jz={class:"overflow-x-auto"},Xz={class:"min-w-full divide-y divide-gray-300"},Qz={class:"bg-gray-50"},e$={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},t$={class:"ml-2 flex-none rounded"},n$={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},r$={class:"ml-2 flex-none rounded"},i$={class:"divide-y divide-gray-200 bg-white"},o$={key:0},s$={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},a$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},l$={class:"px-3 py-4 text-sm text-gray-900"},u$={key:0,class:"flex items-center"},c$={class:"h-8 w-8 flex-shrink-0"},f$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},h$={class:"text-primary-700 font-medium text-sm"},d$={class:"ml-3"},p$={class:"font-medium"},g$={key:1,class:"text-gray-500"},m$={class:"px-3 py-4 text-sm text-gray-900"},v$={key:0,class:"flex items-center"},y$={class:"h-8 w-8 flex-shrink-0"},_$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},b$={class:"text-primary-700 font-medium text-sm"},w$={class:"ml-3"},x$={class:"font-medium"},L$={key:1,class:"text-gray-500"},S$={class:"px-3 py-4 text-sm text-gray-900"},C$={key:0,class:"flex items-center"},E$={class:"h-8 w-8 flex-shrink-0"},P$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},M$={class:"text-primary-700 font-medium text-sm"},A$={class:"ml-3"},k$={class:"font-medium"},T$={key:1,class:"text-gray-500"},N$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},D$={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},B$=["onClick"],O$=["onClick"],I$=["onClick"],R$={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},F$={class:"bg-white rounded-lg p-6 max-w-md w-full"},j$={class:"flex justify-between items-center mb-4"},z$=["disabled"],$$=["disabled"],U$={key:0,class:"space-y-4"},V$={key:0},H$=["disabled"],G$=["value"],q$=["disabled"],W$=["value"],Z$={key:0,class:"mt-1 text-sm text-gray-500"},K$=["disabled"],Y$=["value"],J$={key:0,class:"mt-1 text-sm text-gray-500"},X$={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},Q$={class:"flex"},eU={class:"ml-3"},tU={class:"text-sm font-medium text-red-800"},nU={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},rU=["disabled"],iU={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oU=cs({__name:"PlansView",setup(e){const n=Np(),t=py(),r=ma(),i=Ft([]),s=Ft([]),o=Ft([]),u=Ft([]),f=Ft(!1),d=Ft(!1),g=Ft(!1),y=Ft(null),x=Ft({nom:"",description:"",client:null}),_=Ft({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),E=Ft(!1),T=Ft(null),D=Ft(null),O=Ft(null),$=Ft("date_modification"),K=Ft("desc"),X=Ft(null),ae=gr(()=>D.value?u.value.filter(k=>typeof k.salarie=="object"&&k.salarie?k.salarie.id===D.value:k.salarie===D.value||k.salarie_id===D.value):u.value),ue=gr(()=>{let k=i.value;console.log(`
[PlansView] Filtering plans:`,k.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),r.isAdmin?(X.value&&(k=k.filter(ke=>{var Pe;return typeof ke.entreprise=="object"?((Pe=ke.entreprise)==null?void 0:Pe.id)===X.value:ke.entreprise===X.value})),D.value&&(k=k.filter(ke=>{var Pe;return typeof ke.salarie=="object"?((Pe=ke.salarie)==null?void 0:Pe.id)===D.value:ke.salarie===D.value}),O.value&&(k=k.filter(ke=>{var Pe;return typeof ke.visiteur=="object"?((Pe=ke.visiteur)==null?void 0:Pe.id)===O.value:ke.visiteur===O.value})))):r.isSalarie&&(k=k.filter(ke=>{var Pe,Ve,Z;return typeof ke.salarie=="object"?((Pe=ke.salarie)==null?void 0:Pe.id)===((Ve=r.user)==null?void 0:Ve.id):ke.salarie===((Z=r.user)==null?void 0:Z.id)}),O.value&&(k=k.filter(ke=>{var Pe;return typeof ke.visiteur=="object"?((Pe=ke.visiteur)==null?void 0:Pe.id)===O.value:ke.visiteur===O.value})));const le=[...k].sort((ke,Pe)=>{if($.value==="nom")return K.value==="asc"?ke.nom.localeCompare(Pe.nom):Pe.nom.localeCompare(ke.nom);{const Ve=new Date(ke[$.value]).getTime(),Z=new Date(Pe[$.value]).getTime();return K.value==="asc"?Ve-Z:Z-Ve}});return console.log("[PlansView] Final filtered and sorted plans:",le.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),le}),Le=gr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(k=>{var le,ke,Pe;return typeof k.salarie=="object"?((le=k.salarie)==null?void 0:le.id)===((ke=r.user)==null?void 0:ke.id):k.salarie===((Pe=r.user)==null?void 0:Pe.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(k=>{var Pe,Ve,Z,de;const le=k.createur.id===((Pe=r.user)==null?void 0:Pe.id);let ke=!1;return typeof k.visiteur=="object"?ke=((Ve=k.visiteur)==null?void 0:Ve.id)===((Z=r.user)==null?void 0:Z.id):ke=k.visiteur===((de=r.user)==null?void 0:de.id),ke||le})}),W=gr(()=>X.value?s.value.filter(k=>{var le;return typeof k.entreprise=="object"?((le=k.entreprise)==null?void 0:le.id)===X.value:k.entreprise_id===X.value}):s.value),V=gr(()=>_.value.entreprise?s.value.filter(k=>{var le;return typeof k.entreprise=="object"?((le=k.entreprise)==null?void 0:le.id)===_.value.entreprise:k.entreprise_id===_.value.entreprise}):[]),Y=gr(()=>!_.value.entreprise||!_.value.salarie?[]:u.value.filter(k=>typeof k.salarie=="object"&&k.salarie?k.salarie.id===_.value.salarie:k.salarie===_.value.salarie||k.salarie_id===_.value.salarie));$s(async()=>{var k;await F(),r.isAdmin?await I():r.isSalarie&&await H(((k=r.user)==null?void 0:k.id)||0)});async function F(){try{const k=await t.fetchPlansWithDetails();i.value=k.data}catch(k){console.error("Erreur lors du chargement des plans:",k)}}async function I(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(k){console.error("Erreur lors du chargement des entreprises:",k)}}async function j(k){try{if(console.log("Chargement des salaries pour l'entreprise:",k),k===void 0){const le=await r.fetchUsersByRole({role:"SALARIE"});s.value=le}else s.value=await r.fetchEntrepriseSalaries(k);console.log("Salaries chargs:",s.value)}catch(le){console.error("Erreur lors du chargement des salaries:",le)}}async function H(k){try{console.log("Chargement des visiteurs pour le salarie:",k);const le=await Ig({role:"VISITEUR",salarieId:k});u.value=le.map(ke=>({...ke,salarie_id:k})),console.log("Visiteurs chargs:",u.value)}catch(le){console.error("Erreur lors du chargement des visiteurs:",le)}}function U(){f.value=!0,x.value={nom:"",description:"",client:null}}async function R(k){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:k.id,nom:k.nom,entreprise:k.entreprise,salarie:k.salarie,visiteur:k.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),t.setCurrentPlan(k),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",k.id),localStorage.setItem("lastPlanId",k.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await n.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(le){console.error("[PlansView][editPlan] ERREUR:",le),le instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",le.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function te(k){k!=null&&k.id&&(y.value=k,g.value=!0)}async function re(){var k,le;if((k=y.value)!=null&&k.id)try{await t.deletePlan(y.value.id),await F(),((le=t.currentPlan)==null?void 0:le.id)===y.value.id&&t.clearCurrentPlan()}catch(ke){console.error("Erreur lors de la suppression du plan:",ke),alert("Une erreur est survenue lors de la suppression du plan")}finally{g.value=!1,y.value=null}}function me(){g.value=!1,y.value=null}function xe(k){return new Date(k).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function We(k){if(!k)return"";const le=k.first_name||"",ke=k.last_name||"";return(le.charAt(0)+ke.charAt(0)).toUpperCase()}async function N(k){E.value=!0,T.value=null;try{r.isAdmin&&!o.value.length&&await I();const le=typeof k.entreprise=="object"&&k.entreprise?k.entreprise.id:k.entreprise,ke=typeof k.salarie=="object"&&k.salarie?k.salarie.id:k.salarie,Pe=typeof k.visiteur=="object"&&k.visiteur?k.visiteur.id:k.visiteur;_.value={id:k.id,nom:k.nom,description:k.description,entreprise:le||null,salarie:ke||null,visiteur:Pe||null},le&&await j(le),ke&&await H(ke),d.value=!0}catch(le){console.error("Erreur lors de l'ouverture du modal:",le),T.value="Erreur lors du chargement des donnes"}finally{E.value=!1}}async function ee(){var k,le,ke,Pe,Ve;T.value=null,E.value=!0;try{if(!_.value.nom.trim())throw new Error("Le nom du plan est requis");if(_.value.visiteur&&!_.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(_.value.salarie&&!_.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:_.value.id,nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});const Z=await t.updatePlanDetails(_.value.id,{nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});console.log("Rponse de la mise  jour:",Z),Z&&(d.value=!1,await F())}catch(Z){if(console.error("Erreur lors de la mise  jour du plan:",Z),(le=(k=Z.response)==null?void 0:k.data)!=null&&le.detail)T.value=Z.response.data.detail;else if((Pe=(ke=Z.response)==null?void 0:ke.data)!=null&&Pe.non_field_errors)T.value=Z.response.data.non_field_errors[0];else if((Ve=Z.response)!=null&&Ve.data){const de=Object.entries(Z.response.data).map(([ve,pe])=>`${ve}: ${Array.isArray(pe)?pe[0]:pe}`);T.value=de.join(`
`)}else T.value=Z.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{E.value=!1}}Co(()=>X.value,async k=>{D.value=null,O.value=null,k?await j(k):await j()}),Co(()=>D.value,async k=>{O.value=null,k&&await H(k)}),Co(()=>_.value.entreprise,async k=>{k===null?(_.value.salarie=null,_.value.visiteur=null):await j(k)}),Co(()=>_.value.salarie,async k=>{_.value.visiteur=null,k&&await H(k)});function fe(k){var Ve,Z,de;const le=r.user;if(!le)return!1;if(le.user_type==="admin")return!0;if(le.user_type==="entreprise")return typeof k.entreprise=="object"?((Ve=k.entreprise)==null?void 0:Ve.id)===le.id:k.entreprise===le.id;if(le.user_type==="salarie")return typeof k.salarie=="object"?((Z=k.salarie)==null?void 0:Z.id)===le.id:k.salarie===le.id;const ke=k.createur.id===le.id;let Pe=!1;return typeof k.visiteur=="object"?Pe=((de=k.visiteur)==null?void 0:de.id)===le.id:Pe=k.visiteur===le.id,Pe||ke}async function ce(k){await F(),localStorage.setItem("lastPlanId",k.toString()),console.log(`Plan ${k} cr et dfini comme plan actif`),n.push("/")}function ye(k){$.value===k?K.value=K.value==="asc"?"desc":"asc":($.value=k,K.value="desc")}function se(k){return k?Vl(k):""}return(k,le)=>{var ke;return $e(),qe("div",Tz,[P("div",Nz,[P("div",Dz,[P("div",Bz,[P("h1",Oz,Zt(Le.value.title),1),P("p",Iz,Zt(Le.value.description),1)]),P("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[P("button",{onClick:U,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Wn(r).isAdmin?($e(),qe("div",Rz,[P("div",Fz,[le[15]||(le[15]=P("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),In(P("select",{id:"entreprise-filter","onUpdate:modelValue":le[0]||(le[0]=Pe=>X.value=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[le[14]||(le[14]=P("option",{value:null},"Toutes les entreprises",-1)),($e(!0),qe(Rn,null,Rr(o.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,jz))),128))],512),[[lo,X.value]])]),P("div",zz,[le[16]||(le[16]=P("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),In(P("select",{id:"salarie-filter","onUpdate:modelValue":le[1]||(le[1]=Pe=>D.value=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[P("option",$z,Zt(W.value.length?"Tous les salaries":"Aucun salarie disponible"),1),($e(!0),qe(Rn,null,Rr(W.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,Uz))),128))],512),[[lo,D.value]])]),D.value?($e(),qe("div",Vz,[le[17]||(le[17]=P("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),In(P("select",{id:"visiteur-filter","onUpdate:modelValue":le[2]||(le[2]=Pe=>O.value=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[P("option",Hz,Zt(ae.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),($e(!0),qe(Rn,null,Rr(ae.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,Gz))),128))],512),[[lo,O.value]])])):dn("",!0)])):Wn(r).isSalarie?($e(),qe("div",qz,[P("div",Wz,[le[19]||(le[19]=P("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),In(P("select",{id:"visiteur-filter","onUpdate:modelValue":le[3]||(le[3]=Pe=>O.value=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[le[18]||(le[18]=P("option",{value:null},"Tous les visiteurs",-1)),($e(!0),qe(Rn,null,Rr(u.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,Zz))),128))],512),[[lo,O.value]])])])):dn("",!0),P("div",Kz,[P("div",Yz,[P("div",Jz,[P("table",Xz,[P("thead",Qz,[P("tr",null,[P("th",e$,[P("button",{onClick:le[4]||(le[4]=Pe=>ye("nom")),class:"group inline-flex items-center"},[le[21]||(le[21]=Ei(" Nom ")),P("span",t$,[($e(),qe("svg",{class:zi(["h-5 w-5",{"text-gray-900":$.value==="nom","text-gray-400":$.value!=="nom","rotate-180":$.value==="nom"&&K.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},le[20]||(le[20]=[P("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),le[24]||(le[24]=P("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),le[25]||(le[25]=P("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),le[26]||(le[26]=P("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),le[27]||(le[27]=P("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),P("th",n$,[P("button",{onClick:le[5]||(le[5]=Pe=>ye("date_modification")),class:"group inline-flex items-center"},[le[23]||(le[23]=Ei(" Dernire modification ")),P("span",r$,[($e(),qe("svg",{class:zi(["h-5 w-5",{"text-gray-900":$.value==="date_modification","text-gray-400":$.value!=="date_modification","rotate-180":$.value==="date_modification"&&K.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},le[22]||(le[22]=[P("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),le[28]||(le[28]=P("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[P("span",{class:"sr-only"},"Actions")],-1))])]),P("tbody",i$,[ue.value.length===0?($e(),qe("tr",o$,le[29]||(le[29]=[P("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):dn("",!0),($e(!0),qe(Rn,null,Rr(ue.value,Pe=>($e(),qe("tr",{key:Pe.id,class:"hover:bg-gray-50"},[P("td",s$,Zt(Pe.nom),1),P("td",a$,Zt(Pe.description||"-"),1),P("td",l$,[Pe.entreprise&&typeof Pe.entreprise=="object"?($e(),qe("div",u$,[P("div",c$,[P("div",f$,[P("span",h$,Zt(We(Pe.entreprise)),1)])]),P("div",d$,[P("div",p$,Zt(Wn(Vl)(Pe.entreprise)),1)])])):($e(),qe("div",g$," Non assign "))]),P("td",m$,[Pe.salarie&&typeof Pe.salarie=="object"?($e(),qe("div",v$,[P("div",y$,[P("div",_$,[P("span",b$,Zt(We(Pe.salarie)),1)])]),P("div",w$,[P("div",x$,Zt(Wn(Vl)(Pe.salarie)),1)])])):($e(),qe("div",L$," Non assign "))]),P("td",S$,[Pe.visiteur&&typeof Pe.visiteur=="object"?($e(),qe("div",C$,[P("div",E$,[P("div",P$,[P("span",M$,Zt(We(Pe.visiteur)),1)])]),P("div",A$,[P("div",k$,Zt(Wn(Vl)(Pe.visiteur)),1)])])):($e(),qe("div",T$," Non assign "))]),P("td",N$,Zt(xe(Pe.date_modification)),1),P("td",D$,[P("button",{onClick:Ve=>R(Pe),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,B$),P("button",{onClick:Ve=>N(Pe),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,O$),fe(Pe)?($e(),qe("button",{key:0,onClick:Ve=>te(Pe),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,I$)):dn("",!0)])]))),128))])])])])]),fi(px,{modelValue:f.value,"onUpdate:modelValue":le[6]||(le[6]=Pe=>f.value=Pe),salaries:s.value,clients:u.value,onCreated:ce},null,8,["modelValue","salaries","clients"]),d.value?($e(),qe("div",R$,[P("div",F$,[P("div",j$,[le[31]||(le[31]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),P("button",{onClick:le[7]||(le[7]=Pe=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},le[30]||(le[30]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("form",{onSubmit:Lf(ee,["prevent"]),class:"space-y-4"},[P("div",null,[le[32]||(le[32]=P("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),In(P("input",{type:"text",id:"edit-nom","onUpdate:modelValue":le[8]||(le[8]=Pe=>_.value.nom=Pe),disabled:E.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,z$),[[ni,_.value.nom]])]),P("div",null,[le[33]||(le[33]=P("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),In(P("textarea",{id:"edit-description","onUpdate:modelValue":le[9]||(le[9]=Pe=>_.value.description=Pe),disabled:E.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,$$),[[ni,_.value.description]])]),Wn(r).isAdmin||((ke=Wn(r).user)==null?void 0:ke.user_type)==="entreprise"?($e(),qe("div",U$,[Wn(r).isAdmin?($e(),qe("div",V$,[le[35]||(le[35]=P("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),In(P("select",{id:"edit-entreprise","onUpdate:modelValue":le[10]||(le[10]=Pe=>_.value.entreprise=Pe),disabled:E.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[le[34]||(le[34]=P("option",{value:null},"Slectionner une entreprise",-1)),($e(!0),qe(Rn,null,Rr(o.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,G$))),128))],8,H$),[[lo,_.value.entreprise]])])):dn("",!0),P("div",null,[le[37]||(le[37]=P("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),In(P("select",{id:"edit-salarie","onUpdate:modelValue":le[11]||(le[11]=Pe=>_.value.salarie=Pe),disabled:Wn(r).isAdmin&&!_.value.entreprise||E.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[le[36]||(le[36]=P("option",{value:null},"Slectionner un salarie",-1)),($e(!0),qe(Rn,null,Rr(V.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,W$))),128))],8,q$),[[lo,_.value.salarie]]),Wn(r).isAdmin&&!_.value.entreprise?($e(),qe("p",Z$," Veuillez d'abord slectionner une entreprise ")):dn("",!0)]),P("div",null,[le[39]||(le[39]=P("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),In(P("select",{id:"edit-visiteur","onUpdate:modelValue":le[12]||(le[12]=Pe=>_.value.visiteur=Pe),disabled:!_.value.salarie||E.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[le[38]||(le[38]=P("option",{value:null},"Slectionner un visiteur",-1)),($e(!0),qe(Rn,null,Rr(Y.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Zt(se(Pe)),9,Y$))),128))],8,K$),[[lo,_.value.visiteur]]),_.value.salarie?dn("",!0):($e(),qe("p",J$," Veuillez d'abord slectionner un salarie "))])])):dn("",!0),T.value?($e(),qe("div",X$,[P("div",Q$,[le[40]||(le[40]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",eU,[P("p",tU,Zt(T.value),1)])])])):dn("",!0),P("div",nU,[P("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:le[13]||(le[13]=Pe=>d.value=!1)}," Annuler "),P("button",{type:"submit",disabled:E.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[E.value?($e(),qe("svg",iU,le[41]||(le[41]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dn("",!0),Ei(" "+Zt(E.value?"Enregistrement...":"Enregistrer"),1)],8,rU)])],32)])])):dn("",!0),g.value?($e(),$a(Ix,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:re,onCancel:me})):dn("",!0)])])}}});var Rx={exports:{}};const sU=Y5(g6);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ub(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function yc(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ub(Object(t),!0).forEach(function(r){aU(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ub(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Hg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hg=function(n){return typeof n}:Hg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hg(e)}function aU(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function vu(){return vu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vu.apply(this,arguments)}function lU(e,n){if(e==null)return{};var t={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}function uU(e,n){if(e==null)return{};var t=lU(e,n),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function cU(e){return fU(e)||hU(e)||dU(e)||pU()}function fU(e){if(Array.isArray(e))return P1(e)}function hU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dU(e,n){if(e){if(typeof e=="string")return P1(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P1(e,n)}}function P1(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function pU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gU="1.14.0";function zc(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Gc=zc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ip=zc(/Edge/i),Vb=zc(/firefox/i),ip=zc(/safari/i)&&!zc(/chrome/i)&&!zc(/android/i),Fx=zc(/iP(ad|od|hone)/i),mU=zc(/chrome/i)&&zc(/android/i),jx={capture:!1,passive:!1};function Ci(e,n,t){e.addEventListener(n,t,!Gc&&jx)}function vi(e,n,t){e.removeEventListener(n,t,!Gc&&jx)}function x0(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function vU(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ru(e,n,t,r){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&x0(e,n):x0(e,n))||r&&e===t)return e;if(e===t)break}while(e=vU(e))}return null}var Hb=/\s+/g;function Jo(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var r=(" "+e.className+" ").replace(Hb," ").replace(" "+n+" "," ");e.className=(r+(t?" "+n:"")).replace(Hb," ")}}function rr(e,n,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in r)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),r[n]=t+(typeof t=="string"?"":"px")}}function nh(e,n){var t="";if(typeof e=="string")t=e;else do{var r=rr(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!n&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function zx(e,n,t){if(e){var r=e.getElementsByTagName(n),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function gc(){var e=document.scrollingElement;return e||document.documentElement}function Io(e,n,t,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,u,f,d,g,y;if(e!==window&&e.parentNode&&e!==gc()?(s=e.getBoundingClientRect(),o=s.top,u=s.left,f=s.bottom,d=s.right,g=s.height,y=s.width):(o=0,u=0,f=window.innerHeight,d=window.innerWidth,g=window.innerHeight,y=window.innerWidth),(n||t)&&e!==window&&(i=i||e.parentNode,!Gc))do if(i&&i.getBoundingClientRect&&(rr(i,"transform")!=="none"||t&&rr(i,"position")!=="static")){var x=i.getBoundingClientRect();o-=x.top+parseInt(rr(i,"border-top-width")),u-=x.left+parseInt(rr(i,"border-left-width")),f=o+s.height,d=u+s.width;break}while(i=i.parentNode);if(r&&e!==window){var _=nh(i||e),E=_&&_.a,T=_&&_.d;_&&(o/=T,u/=E,y/=E,g/=T,f=o+g,d=u+y)}return{top:o,left:u,bottom:f,right:d,width:y,height:g}}}function Gb(e,n,t){for(var r=mf(e,!0),i=Io(e)[n];r;){var s=Io(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===gc())break;r=mf(r,!1)}return!1}function ad(e,n,t,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Nr.ghost&&(r||o[s]!==Nr.dragged)&&Ru(o[s],t.draggable,e,!1)){if(i===n)return o[s];i++}s++}return null}function yy(e,n){for(var t=e.lastElementChild;t&&(t===Nr.ghost||rr(t,"display")==="none"||n&&!x0(t,n));)t=t.previousElementSibling;return t||null}function us(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Nr.clone&&(!n||x0(e,n))&&t++;return t}function qb(e){var n=0,t=0,r=gc();if(e)do{var i=nh(e),s=i.a,o=i.d;n+=e.scrollLeft*s,t+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[n,t]}function yU(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===e[t][r])return Number(t)}return-1}function mf(e,n){if(!e||!e.getBoundingClientRect)return gc();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=rr(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return gc();if(r||n)return t;r=!0}}while(t=t.parentNode);return gc()}function _U(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function gv(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var op;function $x(e,n){return function(){if(!op){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),op=setTimeout(function(){op=void 0},n)}}}function bU(){clearTimeout(op),op=void 0}function Ux(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function _y(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Wb(e,n){rr(e,"position","absolute"),rr(e,"top",n.top),rr(e,"left",n.left),rr(e,"width",n.width),rr(e,"height",n.height)}function mv(e){rr(e,"position",""),rr(e,"top",""),rr(e,"left",""),rr(e,"width",""),rr(e,"height","")}var ja="Sortable"+new Date().getTime();function wU(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(rr(i,"display")==="none"||i===Nr.ghost)){e.push({target:i,rect:Io(i)});var s=yc({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=nh(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(yU(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(n),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(u){var f=0,d=u.target,g=d.fromRect,y=Io(d),x=d.prevFromRect,_=d.prevToRect,E=u.rect,T=nh(d,!0);T&&(y.top-=T.f,y.left-=T.e),d.toRect=y,d.thisAnimationDuration&&gv(x,y)&&!gv(g,y)&&(E.top-y.top)/(E.left-y.left)===(g.top-y.top)/(g.left-y.left)&&(f=LU(E,x,_,i.options)),gv(y,g)||(d.prevFromRect=g,d.prevToRect=y,f||(f=i.options.animation),i.animate(d,E,y,f)),f&&(s=!0,o=Math.max(o,f),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},f),d.thisAnimationDuration=f)}),clearTimeout(n),s?n=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){rr(r,"transition",""),rr(r,"transform","");var u=nh(this.el),f=u&&u.a,d=u&&u.d,g=(i.left-s.left)/(f||1),y=(i.top-s.top)/(d||1);r.animatingX=!!g,r.animatingY=!!y,rr(r,"transform","translate3d("+g+"px,"+y+"px,0)"),this.forRepaintDummy=xU(r),rr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),rr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){rr(r,"transition",""),rr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function xU(e){return e.offsetWidth}function LU(e,n,t,r){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*r.animation}var Th=[],vv={initializeByDefault:!0},Rp={mount:function(n){for(var t in vv)vv.hasOwnProperty(t)&&!(t in n)&&(n[t]=vv[t]);Th.forEach(function(r){if(r.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),Th.push(n)},pluginEvent:function(n,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=n+"Global";Th.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](yc({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][n]&&t[o.pluginName][n](yc({sortable:t},r)))})},initializePlugins:function(n,t,r,i){Th.forEach(function(u){var f=u.pluginName;if(!(!n.options[f]&&!u.initializeByDefault)){var d=new u(n,t,n.options);d.sortable=n,d.options=n.options,n[f]=d,vu(r,d.defaults)}});for(var s in n.options)if(n.options.hasOwnProperty(s)){var o=this.modifyOption(n,s,n.options[s]);typeof o<"u"&&(n.options[s]=o)}},getEventProperties:function(n,t){var r={};return Th.forEach(function(i){typeof i.eventProperties=="function"&&vu(r,i.eventProperties.call(t[i.pluginName],n))}),r},modifyOption:function(n,t,r){var i;return Th.forEach(function(s){n[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(n[s.pluginName],r))}),i}};function $d(e){var n=e.sortable,t=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,u=e.fromEl,f=e.oldIndex,d=e.newIndex,g=e.oldDraggableIndex,y=e.newDraggableIndex,x=e.originalEvent,_=e.putSortable,E=e.extraEventProperties;if(n=n||t&&t[ja],!!n){var T,D=n.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Gc&&!Ip?T=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(r,!0,!0)),T.to=o||t,T.from=u||t,T.item=i||t,T.clone=s,T.oldIndex=f,T.newIndex=d,T.oldDraggableIndex=g,T.newDraggableIndex=y,T.originalEvent=x,T.pullMode=_?_.lastPutMode:void 0;var $=yc(yc({},E),Rp.getEventProperties(r,n));for(var K in $)T[K]=$[K];t&&t.dispatchEvent(T),D[O]&&D[O].call(n,T)}}var SU=["evt"],yl=function(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=uU(r,SU);Rp.pluginEvent.bind(Nr)(n,t,yc({dragEl:Bn,parentEl:ss,ghostEl:ri,rootEl:Oo,nextEl:qf,lastDownEl:Gg,cloneEl:as,cloneHidden:df,dragStarted:Ud,putSortable:da,activeSortable:Nr.active,originalEvent:i,oldIndex:Vh,oldDraggableIndex:sp,newIndex:Ul,newDraggableIndex:hf,hideGhostForTarget:qx,unhideGhostForTarget:Wx,cloneNowHidden:function(){df=!0},cloneNowShown:function(){df=!1},dispatchSortableEvent:function(u){Ja({sortable:t,name:u,originalEvent:i})}},s))};function Ja(e){$d(yc({putSortable:da,cloneEl:as,targetEl:Bn,rootEl:Oo,oldIndex:Vh,oldDraggableIndex:sp,newIndex:Ul,newDraggableIndex:hf},e))}var Bn,ss,ri,Oo,qf,Gg,as,df,Vh,Ul,sp,hf,xg,da,zh=!1,L0=!1,S0=[],Vf,Du,yv,_v,Zb,Kb,Ud,Nh,ap,lp=!1,Lg=!1,qg,Ba,bv=[],M1=!1,C0=[],am=typeof document<"u",Sg=Fx,Yb=Ip||Gc?"cssFloat":"float",CU=am&&!mU&&!Fx&&"draggable"in document.createElement("div"),Vx=function(){if(am){if(Gc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Hx=function(n,t){var r=rr(n),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=ad(n,0,t),o=ad(n,1,t),u=s&&rr(s),f=o&&rr(o),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Io(s).width,g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Io(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return o&&(f.clear==="both"||f.clear===y)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Yb]==="none"||o&&r[Yb]==="none"&&d+g>i)?"vertical":"horizontal"},EU=function(n,t,r){var i=r?n.left:n.top,s=r?n.right:n.bottom,o=r?n.width:n.height,u=r?t.left:t.top,f=r?t.right:t.bottom,d=r?t.width:t.height;return i===u||s===f||i+o/2===u+d/2},PU=function(n,t){var r;return S0.some(function(i){var s=i[ja].options.emptyInsertThreshold;if(!(!s||yy(i))){var o=Io(i),u=n>=o.left-s&&n<=o.right+s,f=t>=o.top-s&&t<=o.bottom+s;if(u&&f)return r=i}}),r},Gx=function(n){function t(s,o){return function(u,f,d,g){var y=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(s==null&&(o||y))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(u,f,d,g),o)(u,f,d,g);var x=(o?u:f).options.group.name;return s===!0||typeof s=="string"&&s===x||s.join&&s.indexOf(x)>-1}}var r={},i=n.group;(!i||Hg(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,n.group=r},qx=function(){!Vx&&ri&&rr(ri,"display","none")},Wx=function(){!Vx&&ri&&rr(ri,"display","")};am&&document.addEventListener("click",function(e){if(L0)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),L0=!1,!1},!0);var Hf=function(n){if(Bn){n=n.touches?n.touches[0]:n;var t=PU(n.clientX,n.clientY);if(t){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[ja]._onDragOver(r)}}},MU=function(n){Bn&&Bn.parentNode[ja]._isOutsideThisEl(n.target)};function Nr(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=vu({},n),e[ja]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Hx(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,u){o.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Nr.supportPointer!==!1&&"PointerEvent"in window&&!ip,emptyInsertThreshold:5};Rp.initializePlugins(this,e,t);for(var r in t)!(r in n)&&(n[r]=t[r]);Gx(n);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=n.forceFallback?!1:CU,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Ci(e,"pointerdown",this._onTapStart):(Ci(e,"mousedown",this._onTapStart),Ci(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ci(e,"dragover",this),Ci(e,"dragenter",this)),S0.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),vu(this,wU())}Nr.prototype={constructor:Nr,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(Nh=null)},_getDirection:function(n,t){return typeof this.options.direction=="function"?this.options.direction.call(this,n,t,Bn):this.options.direction},_onTapStart:function(n){if(n.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=n.type,u=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,f=(u||n).target,d=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||f,g=i.filter;if(IU(r),!Bn&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ip&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Ru(f,i.draggable,r,!1),!(f&&f.animated)&&Gg!==f)){if(Vh=us(f),sp=us(f,i.draggable),typeof g=="function"){if(g.call(this,n,f,this)){Ja({sortable:t,rootEl:d,name:"filter",targetEl:f,toEl:r,fromEl:r}),yl("filter",t,{evt:n}),s&&n.cancelable&&n.preventDefault();return}}else if(g&&(g=g.split(",").some(function(y){if(y=Ru(d,y.trim(),r,!1),y)return Ja({sortable:t,rootEl:y,name:"filter",targetEl:f,fromEl:r,toEl:r}),yl("filter",t,{evt:n}),!0}),g)){s&&n.cancelable&&n.preventDefault();return}i.handle&&!Ru(d,i.handle,r,!1)||this._prepareDragStart(n,u,f)}}},_prepareDragStart:function(n,t,r){var i=this,s=i.el,o=i.options,u=s.ownerDocument,f;if(r&&!Bn&&r.parentNode===s){var d=Io(r);if(Oo=s,Bn=r,ss=Bn.parentNode,qf=Bn.nextSibling,Gg=r,xg=o.group,Nr.dragged=Bn,Vf={target:Bn,clientX:(t||n).clientX,clientY:(t||n).clientY},Zb=Vf.clientX-d.left,Kb=Vf.clientY-d.top,this._lastX=(t||n).clientX,this._lastY=(t||n).clientY,Bn.style["will-change"]="all",f=function(){if(yl("delayEnded",i,{evt:n}),Nr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Vb&&i.nativeDraggable&&(Bn.draggable=!0),i._triggerDragStart(n,t),Ja({sortable:i,name:"choose",originalEvent:n}),Jo(Bn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(g){zx(Bn,g.trim(),wv)}),Ci(u,"dragover",Hf),Ci(u,"mousemove",Hf),Ci(u,"touchmove",Hf),Ci(u,"mouseup",i._onDrop),Ci(u,"touchend",i._onDrop),Ci(u,"touchcancel",i._onDrop),Vb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),yl("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ip||Gc))){if(Nr.eventCanceled){this._onDrop();return}Ci(u,"mouseup",i._disableDelayedDrag),Ci(u,"touchend",i._disableDelayedDrag),Ci(u,"touchcancel",i._disableDelayedDrag),Ci(u,"mousemove",i._delayedDragTouchMoveHandler),Ci(u,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ci(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(f,o.delay)}else f()}},_delayedDragTouchMoveHandler:function(n){var t=n.touches?n.touches[0]:n;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&wv(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;vi(n,"mouseup",this._disableDelayedDrag),vi(n,"touchend",this._disableDelayedDrag),vi(n,"touchcancel",this._disableDelayedDrag),vi(n,"mousemove",this._delayedDragTouchMoveHandler),vi(n,"touchmove",this._delayedDragTouchMoveHandler),vi(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,t){t=t||n.pointerType=="touch"&&n,!this.nativeDraggable||t?this.options.supportPointer?Ci(document,"pointermove",this._onTouchMove):t?Ci(document,"touchmove",this._onTouchMove):Ci(document,"mousemove",this._onTouchMove):(Ci(Bn,"dragend",this),Ci(Oo,"dragstart",this._onDragStart));try{document.selection?Wg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,t){if(zh=!1,Oo&&Bn){yl("dragStarted",this,{evt:t}),this.nativeDraggable&&Ci(document,"dragover",MU);var r=this.options;!n&&Jo(Bn,r.dragClass,!1),Jo(Bn,r.ghostClass,!0),Nr.active=this,n&&this._appendGhost(),Ja({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Du){this._lastX=Du.clientX,this._lastY=Du.clientY,qx();for(var n=document.elementFromPoint(Du.clientX,Du.clientY),t=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(Du.clientX,Du.clientY),n!==t);)t=n;if(Bn.parentNode[ja]._isOutsideThisEl(n),t)do{if(t[ja]){var r=void 0;if(r=t[ja]._onDragOver({clientX:Du.clientX,clientY:Du.clientY,target:n,rootEl:t}),r&&!this.options.dragoverBubble)break}n=t}while(t=t.parentNode);Wx()}},_onTouchMove:function(n){if(Vf){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=n.touches?n.touches[0]:n,o=ri&&nh(ri,!0),u=ri&&o&&o.a,f=ri&&o&&o.d,d=Sg&&Ba&&qb(Ba),g=(s.clientX-Vf.clientX+i.x)/(u||1)+(d?d[0]-bv[0]:0)/(u||1),y=(s.clientY-Vf.clientY+i.y)/(f||1)+(d?d[1]-bv[1]:0)/(f||1);if(!Nr.active&&!zh){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(n,!0)}if(ri){o?(o.e+=g-(yv||0),o.f+=y-(_v||0)):o={a:1,b:0,c:0,d:1,e:g,f:y};var x="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");rr(ri,"webkitTransform",x),rr(ri,"mozTransform",x),rr(ri,"msTransform",x),rr(ri,"transform",x),yv=g,_v=y,Du=s}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!ri){var n=this.options.fallbackOnBody?document.body:Oo,t=Io(Bn,!0,Sg,!0,n),r=this.options;if(Sg){for(Ba=n;rr(Ba,"position")==="static"&&rr(Ba,"transform")==="none"&&Ba!==document;)Ba=Ba.parentNode;Ba!==document.body&&Ba!==document.documentElement?(Ba===document&&(Ba=gc()),t.top+=Ba.scrollTop,t.left+=Ba.scrollLeft):Ba=gc(),bv=qb(Ba)}ri=Bn.cloneNode(!0),Jo(ri,r.ghostClass,!1),Jo(ri,r.fallbackClass,!0),Jo(ri,r.dragClass,!0),rr(ri,"transition",""),rr(ri,"transform",""),rr(ri,"box-sizing","border-box"),rr(ri,"margin",0),rr(ri,"top",t.top),rr(ri,"left",t.left),rr(ri,"width",t.width),rr(ri,"height",t.height),rr(ri,"opacity","0.8"),rr(ri,"position",Sg?"absolute":"fixed"),rr(ri,"zIndex","100000"),rr(ri,"pointerEvents","none"),Nr.ghost=ri,n.appendChild(ri),rr(ri,"transform-origin",Zb/parseInt(ri.style.width)*100+"% "+Kb/parseInt(ri.style.height)*100+"%")}},_onDragStart:function(n,t){var r=this,i=n.dataTransfer,s=r.options;if(yl("dragStart",this,{evt:n}),Nr.eventCanceled){this._onDrop();return}yl("setupClone",this),Nr.eventCanceled||(as=_y(Bn),as.draggable=!1,as.style["will-change"]="",this._hideClone(),Jo(as,this.options.chosenClass,!1),Nr.clone=as),r.cloneId=Wg(function(){yl("clone",r),!Nr.eventCanceled&&(r.options.removeCloneOnHide||Oo.insertBefore(as,Bn),r._hideClone(),Ja({sortable:r,name:"clone"}))}),!t&&Jo(Bn,s.dragClass,!0),t?(L0=!0,r._loopId=setInterval(r._emulateDragOver,50)):(vi(document,"mouseup",r._onDrop),vi(document,"touchend",r._onDrop),vi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Bn)),Ci(document,"drop",r),rr(Bn,"transform","translateZ(0)")),zh=!0,r._dragStartId=Wg(r._dragStarted.bind(r,t,n)),Ci(document,"selectstart",r),Ud=!0,ip&&rr(document.body,"user-select","none")},_onDragOver:function(n){var t=this.el,r=n.target,i,s,o,u=this.options,f=u.group,d=Nr.active,g=xg===f,y=u.sort,x=da||d,_,E=this,T=!1;if(M1)return;function D(re,me){yl(re,E,yc({evt:n,isOwner:g,axis:_?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:y,fromSortable:x,target:r,completed:$,onMove:function(We,N){return Cg(Oo,t,Bn,i,We,Io(We),n,N)},changed:K},me))}function O(){D("dragOverAnimationCapture"),E.captureAnimationState(),E!==x&&x.captureAnimationState()}function $(re){return D("dragOverCompleted",{insertion:re}),re&&(g?d._hideClone():d._showClone(E),E!==x&&(Jo(Bn,da?da.options.ghostClass:d.options.ghostClass,!1),Jo(Bn,u.ghostClass,!0)),da!==E&&E!==Nr.active?da=E:E===Nr.active&&da&&(da=null),x===E&&(E._ignoreWhileAnimating=r),E.animateAll(function(){D("dragOverAnimationComplete"),E._ignoreWhileAnimating=null}),E!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(r===Bn&&!Bn.animated||r===t&&!r.animated)&&(Nh=null),!u.dragoverBubble&&!n.rootEl&&r!==document&&(Bn.parentNode[ja]._isOutsideThisEl(n.target),!re&&Hf(n)),!u.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),T=!0}function K(){Ul=us(Bn),hf=us(Bn,u.draggable),Ja({sortable:E,name:"change",toEl:t,newIndex:Ul,newDraggableIndex:hf,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),r=Ru(r,u.draggable,t,!0),D("dragOver"),Nr.eventCanceled)return T;if(Bn.contains(n.target)||r.animated&&r.animatingX&&r.animatingY||E._ignoreWhileAnimating===r)return $(!1);if(L0=!1,d&&!u.disabled&&(g?y||(o=ss!==Oo):da===this||(this.lastPutMode=xg.checkPull(this,d,Bn,n))&&f.checkPut(this,d,Bn,n))){if(_=this._getDirection(n,r)==="vertical",i=Io(Bn),D("dragOverValid"),Nr.eventCanceled)return T;if(o)return ss=Oo,O(),this._hideClone(),D("revert"),Nr.eventCanceled||(qf?Oo.insertBefore(Bn,qf):Oo.appendChild(Bn)),$(!0);var X=yy(t,u.draggable);if(!X||NU(n,_,this)&&!X.animated){if(X===Bn)return $(!1);if(X&&t===n.target&&(r=X),r&&(s=Io(r)),Cg(Oo,t,Bn,i,r,s,n,!!r)!==!1)return O(),t.appendChild(Bn),ss=t,K(),$(!0)}else if(X&&TU(n,_,this)){var ae=ad(t,0,u,!0);if(ae===Bn)return $(!1);if(r=ae,s=Io(r),Cg(Oo,t,Bn,i,r,s,n,!1)!==!1)return O(),t.insertBefore(Bn,ae),ss=t,K(),$(!0)}else if(r.parentNode===t){s=Io(r);var ue=0,Le,W=Bn.parentNode!==t,V=!EU(Bn.animated&&Bn.toRect||i,r.animated&&r.toRect||s,_),Y=_?"top":"left",F=Gb(r,"top","top")||Gb(Bn,"top","top"),I=F?F.scrollTop:void 0;Nh!==r&&(Le=s[Y],lp=!1,Lg=!V&&u.invertSwap||W),ue=DU(n,r,s,_,V?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Lg,Nh===r);var j;if(ue!==0){var H=us(Bn);do H-=ue,j=ss.children[H];while(j&&(rr(j,"display")==="none"||j===ri))}if(ue===0||j===r)return $(!1);Nh=r,ap=ue;var U=r.nextElementSibling,R=!1;R=ue===1;var te=Cg(Oo,t,Bn,i,r,s,n,R);if(te!==!1)return(te===1||te===-1)&&(R=te===1),M1=!0,setTimeout(kU,30),O(),R&&!U?t.appendChild(Bn):r.parentNode.insertBefore(Bn,R?U:r),F&&Ux(F,0,I-F.scrollTop),ss=Bn.parentNode,Le!==void 0&&!Lg&&(qg=Math.abs(Le-Io(r)[Y])),K(),$(!0)}if(t.contains(Bn))return $(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){vi(document,"mousemove",this._onTouchMove),vi(document,"touchmove",this._onTouchMove),vi(document,"pointermove",this._onTouchMove),vi(document,"dragover",Hf),vi(document,"mousemove",Hf),vi(document,"touchmove",Hf)},_offUpEvents:function(){var n=this.el.ownerDocument;vi(n,"mouseup",this._onDrop),vi(n,"touchend",this._onDrop),vi(n,"pointerup",this._onDrop),vi(n,"touchcancel",this._onDrop),vi(document,"selectstart",this)},_onDrop:function(n){var t=this.el,r=this.options;if(Ul=us(Bn),hf=us(Bn,r.draggable),yl("drop",this,{evt:n}),ss=Bn&&Bn.parentNode,Ul=us(Bn),hf=us(Bn,r.draggable),Nr.eventCanceled){this._nulling();return}zh=!1,Lg=!1,lp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),A1(this.cloneId),A1(this._dragStartId),this.nativeDraggable&&(vi(document,"drop",this),vi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ip&&rr(document.body,"user-select",""),rr(Bn,"transform",""),n&&(Ud&&(n.cancelable&&n.preventDefault(),!r.dropBubble&&n.stopPropagation()),ri&&ri.parentNode&&ri.parentNode.removeChild(ri),(Oo===ss||da&&da.lastPutMode!=="clone")&&as&&as.parentNode&&as.parentNode.removeChild(as),Bn&&(this.nativeDraggable&&vi(Bn,"dragend",this),wv(Bn),Bn.style["will-change"]="",Ud&&!zh&&Jo(Bn,da?da.options.ghostClass:this.options.ghostClass,!1),Jo(Bn,this.options.chosenClass,!1),Ja({sortable:this,name:"unchoose",toEl:ss,newIndex:null,newDraggableIndex:null,originalEvent:n}),Oo!==ss?(Ul>=0&&(Ja({rootEl:ss,name:"add",toEl:ss,fromEl:Oo,originalEvent:n}),Ja({sortable:this,name:"remove",toEl:ss,originalEvent:n}),Ja({rootEl:ss,name:"sort",toEl:ss,fromEl:Oo,originalEvent:n}),Ja({sortable:this,name:"sort",toEl:ss,originalEvent:n})),da&&da.save()):Ul!==Vh&&Ul>=0&&(Ja({sortable:this,name:"update",toEl:ss,originalEvent:n}),Ja({sortable:this,name:"sort",toEl:ss,originalEvent:n})),Nr.active&&((Ul==null||Ul===-1)&&(Ul=Vh,hf=sp),Ja({sortable:this,name:"end",toEl:ss,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){yl("nulling",this),Oo=Bn=ss=ri=qf=as=Gg=df=Vf=Du=Ud=Ul=hf=Vh=sp=Nh=ap=da=xg=Nr.dragged=Nr.ghost=Nr.clone=Nr.active=null,C0.forEach(function(n){n.checked=!0}),C0.length=yv=_v=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(n),AU(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],Ru(t,o.draggable,this.el,!1)&&n.push(t.getAttribute(o.dataIdAttr)||OU(t));return n},sort:function(n,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var u=i.children[o];Ru(u,this.options.draggable,i,!1)&&(r[s]=u)},this),t&&this.captureAnimationState(),n.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,t){return Ru(n,t||this.options.draggable,this.el,!1)},option:function(n,t){var r=this.options;if(t===void 0)return r[n];var i=Rp.modifyOption(this,n,t);typeof i<"u"?r[n]=i:r[n]=t,n==="group"&&Gx(r)},destroy:function(){yl("destroy",this);var n=this.el;n[ja]=null,vi(n,"mousedown",this._onTapStart),vi(n,"touchstart",this._onTapStart),vi(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(vi(n,"dragover",this),vi(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),S0.splice(S0.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!df){if(yl("hideClone",this),Nr.eventCanceled)return;rr(as,"display","none"),this.options.removeCloneOnHide&&as.parentNode&&as.parentNode.removeChild(as),df=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(df){if(yl("showClone",this),Nr.eventCanceled)return;Bn.parentNode==Oo&&!this.options.group.revertClone?Oo.insertBefore(as,Bn):qf?Oo.insertBefore(as,qf):Oo.appendChild(as),this.options.group.revertClone&&this.animate(Bn,as),rr(as,"display",""),df=!1}}};function AU(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Cg(e,n,t,r,i,s,o,u){var f,d=e[ja],g=d.options.onMove,y;return window.CustomEvent&&!Gc&&!Ip?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=n,f.from=e,f.dragged=t,f.draggedRect=r,f.related=i||n,f.relatedRect=s||Io(n),f.willInsertAfter=u,f.originalEvent=o,e.dispatchEvent(f),g&&(y=g.call(d,f,o)),y}function wv(e){e.draggable=!1}function kU(){M1=!1}function TU(e,n,t){var r=Io(ad(t.el,0,t.options,!0)),i=10;return n?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function NU(e,n,t){var r=Io(yy(t.el,t.options.draggable)),i=10;return n?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function DU(e,n,t,r,i,s,o,u){var f=r?e.clientY:e.clientX,d=r?t.height:t.width,g=r?t.top:t.left,y=r?t.bottom:t.right,x=!1;if(!o){if(u&&qg<d*i){if(!lp&&(ap===1?f>g+d*s/2:f<y-d*s/2)&&(lp=!0),lp)x=!0;else if(ap===1?f<g+qg:f>y-qg)return-ap}else if(f>g+d*(1-i)/2&&f<y-d*(1-i)/2)return BU(n)}return x=x||o,x&&(f<g+d*s/2||f>y-d*s/2)?f>g+d/2?1:-1:0}function BU(e){return us(Bn)<us(e)?1:-1}function OU(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,r=0;t--;)r+=n.charCodeAt(t);return r.toString(36)}function IU(e){C0.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var r=n[t];r.checked&&C0.push(r)}}function Wg(e){return setTimeout(e,0)}function A1(e){return clearTimeout(e)}am&&Ci(document,"touchmove",function(e){(Nr.active||zh)&&e.cancelable&&e.preventDefault()});Nr.utils={on:Ci,off:vi,css:rr,find:zx,is:function(n,t){return!!Ru(n,t,n,!1)},extend:_U,throttle:$x,closest:Ru,toggleClass:Jo,clone:_y,index:us,nextTick:Wg,cancelNextTick:A1,detectDirection:Hx,getChild:ad};Nr.get=function(e){return e[ja]};Nr.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Nr.utils=yc(yc({},Nr.utils),r.utils)),Rp.mount(r)})};Nr.create=function(e,n){return new Nr(e,n)};Nr.version=gU;var Ts=[],Vd,k1,T1=!1,xv,Lv,E0,Hd;function RU(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Ci(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ci(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ci(document,"touchmove",this._handleFallbackAutoScroll):Ci(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?vi(document,"dragover",this._handleAutoScroll):(vi(document,"pointermove",this._handleFallbackAutoScroll),vi(document,"touchmove",this._handleFallbackAutoScroll),vi(document,"mousemove",this._handleFallbackAutoScroll)),Jb(),Zg(),bU()},nulling:function(){E0=k1=Vd=T1=Hd=xv=Lv=null,Ts.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,u=document.elementFromPoint(s,o);if(E0=t,r||this.options.forceAutoScrollFallback||Ip||Gc||ip){Sv(t,this.options,u,r);var f=mf(u,!0);T1&&(!Hd||s!==xv||o!==Lv)&&(Hd&&Jb(),Hd=setInterval(function(){var d=mf(document.elementFromPoint(s,o),!0);d!==f&&(f=d,Zg()),Sv(t,i.options,d,r)},10),xv=s,Lv=o)}else{if(!this.options.bubbleScroll||mf(u,!0)===gc()){Zg();return}Sv(t,this.options,mf(u,!1),!1)}}},vu(e,{pluginName:"scroll",initializeByDefault:!0})}function Zg(){Ts.forEach(function(e){clearInterval(e.pid)}),Ts=[]}function Jb(){clearInterval(Hd)}var Sv=$x(function(e,n,t,r){if(n.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=n.scrollSensitivity,u=n.scrollSpeed,f=gc(),d=!1,g;k1!==t&&(k1=t,Zg(),Vd=n.scroll,g=n.scrollFn,Vd===!0&&(Vd=mf(t,!0)));var y=0,x=Vd;do{var _=x,E=Io(_),T=E.top,D=E.bottom,O=E.left,$=E.right,K=E.width,X=E.height,ae=void 0,ue=void 0,Le=_.scrollWidth,W=_.scrollHeight,V=rr(_),Y=_.scrollLeft,F=_.scrollTop;_===f?(ae=K<Le&&(V.overflowX==="auto"||V.overflowX==="scroll"||V.overflowX==="visible"),ue=X<W&&(V.overflowY==="auto"||V.overflowY==="scroll"||V.overflowY==="visible")):(ae=K<Le&&(V.overflowX==="auto"||V.overflowX==="scroll"),ue=X<W&&(V.overflowY==="auto"||V.overflowY==="scroll"));var I=ae&&(Math.abs($-i)<=o&&Y+K<Le)-(Math.abs(O-i)<=o&&!!Y),j=ue&&(Math.abs(D-s)<=o&&F+X<W)-(Math.abs(T-s)<=o&&!!F);if(!Ts[y])for(var H=0;H<=y;H++)Ts[H]||(Ts[H]={});(Ts[y].vx!=I||Ts[y].vy!=j||Ts[y].el!==_)&&(Ts[y].el=_,Ts[y].vx=I,Ts[y].vy=j,clearInterval(Ts[y].pid),(I!=0||j!=0)&&(d=!0,Ts[y].pid=setInterval((function(){r&&this.layer===0&&Nr.active._onTouchMove(E0);var U=Ts[this.layer].vy?Ts[this.layer].vy*u:0,R=Ts[this.layer].vx?Ts[this.layer].vx*u:0;typeof g=="function"&&g.call(Nr.dragged.parentNode[ja],R,U,e,E0,Ts[this.layer].el)!=="continue"||Ux(Ts[this.layer].el,R,U)}).bind({layer:y}),24))),y++}while(n.bubbleScroll&&x!==f&&(x=mf(x,!1)));T1=d}},30),Zx=function(n){var t=n.originalEvent,r=n.putSortable,i=n.dragEl,s=n.activeSortable,o=n.dispatchSortableEvent,u=n.hideGhostForTarget,f=n.unhideGhostForTarget;if(t){var d=r||s;u();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,y=document.elementFromPoint(g.clientX,g.clientY);f(),d&&!d.el.contains(y)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function by(){}by.prototype={startIndex:null,dragStart:function(n){var t=n.oldDraggableIndex;this.startIndex=t},onSpill:function(n){var t=n.dragEl,r=n.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=ad(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Zx};vu(by,{pluginName:"revertOnSpill"});function wy(){}wy.prototype={onSpill:function(n){var t=n.dragEl,r=n.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Zx};vu(wy,{pluginName:"removeOnSpill"});var lu;function FU(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){var r=t.dragEl;lu=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,u=t.changed,f=t.cancel;if(o.options.swap){var d=this.sortable.el,g=this.options;if(i&&i!==d){var y=lu;s(i)!==!1?(Jo(i,g.swapClass,!0),lu=i):lu=null,y&&y!==lu&&Jo(y,g.swapClass,!1)}u(),r(!0),f()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,u=this.options;lu&&Jo(lu,u.swapClass,!1),lu&&(u.swap||i&&i.options.swap)&&s!==lu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),jU(s,lu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){lu=null}},vu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lu}}})}function jU(e,n){var t=e.parentNode,r=n.parentNode,i,s;!t||!r||t.isEqualNode(n)||r.isEqualNode(e)||(i=us(e),s=us(n),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(n,t.children[i]),r.insertBefore(e,r.children[s]))}var qr=[],$l=[],Nd,Bu,Dd=!1,_l=!1,Dh=!1,mo,Bd,Eg;function zU(){function e(n){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));n.options.supportPointer?Ci(document,"pointerup",this._deselectMultiDrag):(Ci(document,"mouseup",this._deselectMultiDrag),Ci(document,"touchend",this._deselectMultiDrag)),Ci(document,"keydown",this._checkKeyDown),Ci(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";qr.length&&Bu===n?qr.forEach(function(u,f){o+=(f?", ":"")+u.textContent}):o=s.textContent,i.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;mo=r},delayEnded:function(){this.isMultiDrag=~qr.indexOf(mo)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<qr.length;s++)$l.push(_y(qr[s])),$l[s].sortableIndex=qr[s].sortableIndex,$l[s].draggable=!1,$l[s].style["will-change"]="",Jo($l[s],this.options.selectedClass,!1),qr[s]===mo&&Jo($l[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||qr.length&&Bu===r&&(Xb(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(Xb(!1,i),$l.forEach(function(o){rr(o,"display","")}),r(),Eg=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&($l.forEach(function(o){rr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Eg=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Bu&&Bu.multiDrag._deselectMultiDrag(),qr.forEach(function(r){r.sortableIndex=us(r)}),qr=qr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Dh=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){qr.forEach(function(o){o!==mo&&rr(o,"position","absolute")});var s=Io(mo,!1,!0,!0);qr.forEach(function(o){o!==mo&&Wb(o,s)}),_l=!0,Dd=!0}i.animateAll(function(){_l=!1,Dd=!1,r.options.animation&&qr.forEach(function(o){mv(o)}),r.options.sort&&Pg()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;_l&&~qr.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;qr.length>1&&(qr.forEach(function(u){s.addAnimationState({target:u,rect:_l?Io(u):o}),mv(u),u.fromRect=o,r.removeAnimationState(u)}),_l=!1,$U(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,u=t.parentEl,f=t.putSortable,d=this.options;if(s){if(i&&o._hideClone(),Dd=!1,d.animation&&qr.length>1&&(_l||!i&&!o.options.sort&&!f)){var g=Io(mo,!1,!0,!0);qr.forEach(function(x){x!==mo&&(Wb(x,g),u.appendChild(x))}),_l=!0}if(!i)if(_l||Pg(),qr.length>1){var y=Eg;o._showClone(r),o.options.animation&&!Eg&&y&&$l.forEach(function(x){o.addAnimationState({target:x,rect:Bd}),x.fromRect=Bd,x.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(qr.forEach(function(u){u.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Bd=vu({},r);var o=nh(mo,!0);Bd.top-=o.f,Bd.left-=o.e}},dragOverAnimationComplete:function(){_l&&(_l=!1,Pg())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,u=t.dispatchSortableEvent,f=t.oldIndex,d=t.putSortable,g=d||this.sortable;if(r){var y=this.options,x=s.children;if(!Dh)if(y.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Jo(mo,y.selectedClass,!~qr.indexOf(mo)),~qr.indexOf(mo))qr.splice(qr.indexOf(mo),1),Nd=null,$d({sortable:o,rootEl:i,name:"deselect",targetEl:mo});else{if(qr.push(mo),$d({sortable:o,rootEl:i,name:"select",targetEl:mo}),r.shiftKey&&Nd&&o.el.contains(Nd)){var _=us(Nd),E=us(mo);if(~_&&~E&&_!==E){var T,D;for(E>_?(D=_,T=E):(D=E,T=_+1);D<T;D++)~qr.indexOf(x[D])||(Jo(x[D],y.selectedClass,!0),qr.push(x[D]),$d({sortable:o,rootEl:i,name:"select",targetEl:x[D]}))}}else Nd=mo;Bu=g}if(Dh&&this.isMultiDrag){if(_l=!1,(s[ja].options.sort||s!==i)&&qr.length>1){var O=Io(mo),$=us(mo,":not(."+this.options.selectedClass+")");if(!Dd&&y.animation&&(mo.thisAnimationDuration=null),g.captureAnimationState(),!Dd&&(y.animation&&(mo.fromRect=O,qr.forEach(function(X){if(X.thisAnimationDuration=null,X!==mo){var ae=_l?Io(X):O;X.fromRect=ae,g.addAnimationState({target:X,rect:ae})}})),Pg(),qr.forEach(function(X){x[$]?s.insertBefore(X,x[$]):s.appendChild(X),$++}),f===us(mo))){var K=!1;qr.forEach(function(X){if(X.sortableIndex!==us(X)){K=!0;return}}),K&&u("update")}qr.forEach(function(X){mv(X)}),g.animateAll()}Bu=g}(i===s||d&&d.lastPutMode!=="clone")&&$l.forEach(function(X){X.parentNode&&X.parentNode.removeChild(X)})}},nullingGlobal:function(){this.isMultiDrag=Dh=!1,$l.length=0},destroyGlobal:function(){this._deselectMultiDrag(),vi(document,"pointerup",this._deselectMultiDrag),vi(document,"mouseup",this._deselectMultiDrag),vi(document,"touchend",this._deselectMultiDrag),vi(document,"keydown",this._checkKeyDown),vi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof Dh<"u"&&Dh)&&Bu===this.sortable&&!(t&&Ru(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;qr.length;){var r=qr[0];Jo(r,this.options.selectedClass,!1),qr.shift(),$d({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},vu(e,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[ja];!r||!r.options.multiDrag||~qr.indexOf(t)||(Bu&&Bu!==r&&(Bu.multiDrag._deselectMultiDrag(),Bu=r),Jo(t,r.options.selectedClass,!0),qr.push(t))},deselect:function(t){var r=t.parentNode[ja],i=qr.indexOf(t);!r||!r.options.multiDrag||!~i||(Jo(t,r.options.selectedClass,!1),qr.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return qr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;_l&&s!==mo?o=-1:_l?o=us(s,":not(."+t.options.selectedClass+")"):o=us(s),i.push({multiDragElement:s,index:o})}),{items:cU(qr),clones:[].concat($l),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function $U(e,n){qr.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function Xb(e,n){$l.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function Pg(){qr.forEach(function(e){e!==mo&&e.parentNode&&e.parentNode.removeChild(e)})}Nr.mount(new RU);Nr.mount(wy,by);const UU=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:zU,Sortable:Nr,Swap:FU,default:Nr},Symbol.toStringTag,{value:"Module"})),VU=Y5(UU);(function(e,n){(function(r,i){e.exports=i(sU,VU)})(typeof self<"u"?self:ea,function(t,r){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var f=s[u]={i:u,l:!1,exports:{}};return i[u].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=i,o.c=s,o.d=function(u,f,d){o.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,f){if(f&1&&(u=o(u)),f&8||f&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),f&2&&typeof u!="string")for(var g in u)o.d(d,g,(function(y){return u[y]}).bind(null,g));return d},o.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(f,"a",f),f},o.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var u=o("b622"),f=u("toStringTag"),d={};d[f]="z",i.exports=String(d)==="[object z]"},"0366":function(i,s,o){var u=o("1c0b");i.exports=function(f,d,g){if(u(f),d===void 0)return f;switch(g){case 0:return function(){return f.call(d)};case 1:return function(y){return f.call(d,y)};case 2:return function(y,x){return f.call(d,y,x)};case 3:return function(y,x,_){return f.call(d,y,x,_)}}return function(){return f.apply(d,arguments)}}},"057f":function(i,s,o){var u=o("fc6a"),f=o("241c").f,d={}.toString,g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(x){try{return f(x)}catch{return g.slice()}};i.exports.f=function(_){return g&&d.call(_)=="[object Window]"?y(_):f(u(_))}},"06cf":function(i,s,o){var u=o("83ab"),f=o("d1e7"),d=o("5c6c"),g=o("fc6a"),y=o("c04e"),x=o("5135"),_=o("0cfb"),E=Object.getOwnPropertyDescriptor;s.f=u?E:function(D,O){if(D=g(D),O=y(O,!0),_)try{return E(D,O)}catch{}if(x(D,O))return d(!f.f.call(D,O),D[O])}},"0cfb":function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("cc12");i.exports=!u&&!f(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var u=o("23e7"),f=o("d58f").left,d=o("a640"),g=o("ae40"),y=d("reduce"),x=g("reduce",{1:0});u({target:"Array",proto:!0,forced:!y||!x},{reduce:function(E){return f(this,E,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var u=o("c6b6"),f=o("9263");i.exports=function(d,g){var y=d.exec;if(typeof y=="function"){var x=y.call(d,g);if(typeof x!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return x}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(d,g)}},"159b":function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("17c2"),g=o("9112");for(var y in f){var x=u[y],_=x&&x.prototype;if(_&&_.forEach!==d)try{g(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(i,s,o){var u=o("b727").forEach,f=o("a640"),d=o("ae40"),g=f("forEach"),y=d("forEach");i.exports=!g||!y?function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var u=o("d066");i.exports=u("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var u=o("b622"),f=u("iterator"),d=!1;try{var g=0,y={next:function(){return{done:!!g++}},return:function(){d=!0}};y[f]=function(){return this},Array.from(y,function(){throw 2})}catch{}i.exports=function(x,_){if(!_&&!d)return!1;var E=!1;try{var T={};T[f]=function(){return{next:function(){return{done:E=!0}}}},x(T)}catch{}return E}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var u=o("d039"),f=o("b622"),d=o("2d00"),g=f("species");i.exports=function(y){return d>=51||!u(function(){var x=[],_=x.constructor={};return _[g]=function(){return{foo:1}},x[y](Boolean).foo!==1})}},"23cb":function(i,s,o){var u=o("a691"),f=Math.max,d=Math.min;i.exports=function(g,y){var x=u(g);return x<0?f(x+y,0):d(x,y)}},"23e7":function(i,s,o){var u=o("da84"),f=o("06cf").f,d=o("9112"),g=o("6eeb"),y=o("ce4e"),x=o("e893"),_=o("94ca");i.exports=function(E,T){var D=E.target,O=E.global,$=E.stat,K,X,ae,ue,Le,W;if(O?X=u:$?X=u[D]||y(D,{}):X=(u[D]||{}).prototype,X)for(ae in T){if(Le=T[ae],E.noTargetGet?(W=f(X,ae),ue=W&&W.value):ue=X[ae],K=_(O?ae:D+($?".":"#")+ae,E.forced),!K&&ue!==void 0){if(typeof Le==typeof ue)continue;x(Le,ue)}(E.sham||ue&&ue.sham)&&d(Le,"sham",!0),g(X,ae,Le,E)}}},"241c":function(i,s,o){var u=o("ca84"),f=o("7839"),d=f.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(y){return u(y,d)}},"25f0":function(i,s,o){var u=o("6eeb"),f=o("825a"),d=o("d039"),g=o("ad6d"),y="toString",x=RegExp.prototype,_=x[y],E=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),T=_.name!=y;(E||T)&&u(RegExp.prototype,y,function(){var O=f(this),$=String(O.source),K=O.flags,X=String(K===void 0&&O instanceof RegExp&&!("flags"in x)?g.call(O):K);return"/"+$+"/"+X},{unsafe:!0})},"2ca0":function(i,s,o){var u=o("23e7"),f=o("06cf").f,d=o("50c4"),g=o("5a34"),y=o("1d80"),x=o("ab13"),_=o("c430"),E="".startsWith,T=Math.min,D=x("startsWith"),O=!_&&!D&&!!function(){var $=f(String.prototype,"startsWith");return $&&!$.writable}();u({target:"String",proto:!0,forced:!O&&!D},{startsWith:function(K){var X=String(y(this));g(K);var ae=d(T(arguments.length>1?arguments[1]:void 0,X.length)),ue=String(K);return E?E.call(X,ue,ae):X.slice(ae,ae+ue.length)===ue}})},"2d00":function(i,s,o){var u=o("da84"),f=o("342f"),d=u.process,g=d&&d.versions,y=g&&g.v8,x,_;y?(x=y.split("."),_=x[0]+x[1]):f&&(x=f.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=f.match(/Chrome\/(\d+)/),x&&(_=x[1]))),i.exports=_&&+_},"342f":function(i,s,o){var u=o("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,s,o){var u=o("f5df"),f=o("3f8c"),d=o("b622"),g=d("iterator");i.exports=function(y){if(y!=null)return y[g]||y["@@iterator"]||f[u(y)]}},"37e8":function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("825a"),g=o("df75");i.exports=u?Object.defineProperties:function(x,_){d(x);for(var E=g(_),T=E.length,D=0,O;T>D;)f.f(x,O=E[D++],_[O]);return x}},"3bbe":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(i,s,o){var u=o("6547").charAt,f=o("69f3"),d=o("7dd0"),g="String Iterator",y=f.set,x=f.getterFor(g);d(String,"String",function(_){y(this,{type:g,string:String(_),index:0})},function(){var E=x(this),T=E.string,D=E.index,O;return D>=T.length?{value:void 0,done:!0}:(O=u(T,D),E.index+=O.length,{value:O,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var u=o("23e7"),f=o("17c2");u({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(i,s,o){var u=o("da84");i.exports=u},"44ad":function(i,s,o){var u=o("d039"),f=o("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(g){return f(g)=="String"?d.call(g,""):Object(g)}:Object},"44d2":function(i,s,o){var u=o("b622"),f=o("7c73"),d=o("9bf2"),g=u("unscopables"),y=Array.prototype;y[g]==null&&d.f(y,g,{configurable:!0,value:f(null)}),i.exports=function(x){y[g][x]=!0}},"44e7":function(i,s,o){var u=o("861d"),f=o("c6b6"),d=o("b622"),g=d("match");i.exports=function(y){var x;return u(y)&&((x=y[g])!==void 0?!!x:f(y)=="RegExp")}},4930:function(i,s,o){var u=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,s,o){var u=o("fc6a"),f=o("50c4"),d=o("23cb"),g=function(y){return function(x,_,E){var T=u(x),D=f(T.length),O=d(E,D),$;if(y&&_!=_){for(;D>O;)if($=T[O++],$!=$)return!0}else for(;D>O;O++)if((y||O in T)&&T[O]===_)return y||O||0;return!y&&-1}};i.exports={includes:g(!0),indexOf:g(!1)}},"4de4":function(i,s,o){var u=o("23e7"),f=o("b727").filter,d=o("1dde"),g=o("ae40"),y=d("filter"),x=g("filter");u({target:"Array",proto:!0,forced:!y||!x},{filter:function(E){return f(this,E,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var u=o("0366"),f=o("7b0b"),d=o("9bdd"),g=o("e95a"),y=o("50c4"),x=o("8418"),_=o("35a1");i.exports=function(T){var D=f(T),O=typeof this=="function"?this:Array,$=arguments.length,K=$>1?arguments[1]:void 0,X=K!==void 0,ae=_(D),ue=0,Le,W,V,Y,F,I;if(X&&(K=u(K,$>2?arguments[2]:void 0,2)),ae!=null&&!(O==Array&&g(ae)))for(Y=ae.call(D),F=Y.next,W=new O;!(V=F.call(Y)).done;ue++)I=X?d(Y,K,[V.value,ue],!0):V.value,x(W,ue,I);else for(Le=y(D.length),W=new O(Le);Le>ue;ue++)I=X?K(D[ue],ue):D[ue],x(W,ue,I);return W.length=ue,W}},"4fad":function(i,s,o){var u=o("23e7"),f=o("6f53").entries;u({target:"Object",stat:!0},{entries:function(g){return f(g)}})},"50c4":function(i,s,o){var u=o("a691"),f=Math.min;i.exports=function(d){return d>0?f(u(d),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(u,f){return o.call(u,f)}},5319:function(i,s,o){var u=o("d784"),f=o("825a"),d=o("7b0b"),g=o("50c4"),y=o("a691"),x=o("1d80"),_=o("8aa5"),E=o("14c3"),T=Math.max,D=Math.min,O=Math.floor,$=/\$([$&'`]|\d\d?|<[^>]*>)/g,K=/\$([$&'`]|\d\d?)/g,X=function(ae){return ae===void 0?ae:String(ae)};u("replace",2,function(ae,ue,Le,W){var V=W.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Y=W.REPLACE_KEEPS_$0,F=V?"$":"$0";return[function(H,U){var R=x(this),te=H==null?void 0:H[ae];return te!==void 0?te.call(H,R,U):ue.call(String(R),H,U)},function(j,H){if(!V&&Y||typeof H=="string"&&H.indexOf(F)===-1){var U=Le(ue,j,this,H);if(U.done)return U.value}var R=f(j),te=String(this),re=typeof H=="function";re||(H=String(H));var me=R.global;if(me){var xe=R.unicode;R.lastIndex=0}for(var We=[];;){var N=E(R,te);if(N===null||(We.push(N),!me))break;var ee=String(N[0]);ee===""&&(R.lastIndex=_(te,g(R.lastIndex),xe))}for(var fe="",ce=0,ye=0;ye<We.length;ye++){N=We[ye];for(var se=String(N[0]),k=T(D(y(N.index),te.length),0),le=[],ke=1;ke<N.length;ke++)le.push(X(N[ke]));var Pe=N.groups;if(re){var Ve=[se].concat(le,k,te);Pe!==void 0&&Ve.push(Pe);var Z=String(H.apply(void 0,Ve))}else Z=I(se,te,k,le,Pe,H);k>=ce&&(fe+=te.slice(ce,k)+Z,ce=k+se.length)}return fe+te.slice(ce)}];function I(j,H,U,R,te,re){var me=U+j.length,xe=R.length,We=K;return te!==void 0&&(te=d(te),We=$),ue.call(re,We,function(N,ee){var fe;switch(ee.charAt(0)){case"$":return"$";case"&":return j;case"`":return H.slice(0,U);case"'":return H.slice(me);case"<":fe=te[ee.slice(1,-1)];break;default:var ce=+ee;if(ce===0)return N;if(ce>xe){var ye=O(ce/10);return ye===0?N:ye<=xe?R[ye-1]===void 0?ee.charAt(1):R[ye-1]+ee.charAt(1):N}fe=R[ce-1]}return fe===void 0?"":fe})}})},5692:function(i,s,o){var u=o("c430"),f=o("c6cd");(i.exports=function(d,g){return f[d]||(f[d]=g!==void 0?g:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var u=o("d066"),f=o("241c"),d=o("7418"),g=o("825a");i.exports=u("Reflect","ownKeys")||function(x){var _=f.f(g(x)),E=d.f;return E?_.concat(E(x)):_}},"5a34":function(i,s,o){var u=o("44e7");i.exports=function(f){if(u(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(i,s){i.exports=function(o,u){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:u}}},"5db7":function(i,s,o){var u=o("23e7"),f=o("a2bf"),d=o("7b0b"),g=o("50c4"),y=o("1c0b"),x=o("65f0");u({target:"Array",proto:!0},{flatMap:function(E){var T=d(this),D=g(T.length),O;return y(E),O=x(T,0),O.length=f(O,T,T,D,0,1,E,arguments.length>1?arguments[1]:void 0),O}})},6547:function(i,s,o){var u=o("a691"),f=o("1d80"),d=function(g){return function(y,x){var _=String(f(y)),E=u(x),T=_.length,D,O;return E<0||E>=T?g?"":void 0:(D=_.charCodeAt(E),D<55296||D>56319||E+1===T||(O=_.charCodeAt(E+1))<56320||O>57343?g?_.charAt(E):D:g?_.slice(E,E+2):(D-55296<<10)+(O-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,s,o){var u=o("861d"),f=o("e8b5"),d=o("b622"),g=d("species");i.exports=function(y,x){var _;return f(y)&&(_=y.constructor,typeof _=="function"&&(_===Array||f(_.prototype))?_=void 0:u(_)&&(_=_[g],_===null&&(_=void 0))),new(_===void 0?Array:_)(x===0?0:x)}},"69f3":function(i,s,o){var u=o("7f9a"),f=o("da84"),d=o("861d"),g=o("9112"),y=o("5135"),x=o("f772"),_=o("d012"),E=f.WeakMap,T,D,O,$=function(V){return O(V)?D(V):T(V,{})},K=function(V){return function(Y){var F;if(!d(Y)||(F=D(Y)).type!==V)throw TypeError("Incompatible receiver, "+V+" required");return F}};if(u){var X=new E,ae=X.get,ue=X.has,Le=X.set;T=function(V,Y){return Le.call(X,V,Y),Y},D=function(V){return ae.call(X,V)||{}},O=function(V){return ue.call(X,V)}}else{var W=x("state");_[W]=!0,T=function(V,Y){return g(V,W,Y),Y},D=function(V){return y(V,W)?V[W]:{}},O=function(V){return y(V,W)}}i.exports={set:T,get:D,has:O,enforce:$,getterFor:K}},"6eeb":function(i,s,o){var u=o("da84"),f=o("9112"),d=o("5135"),g=o("ce4e"),y=o("8925"),x=o("69f3"),_=x.get,E=x.enforce,T=String(String).split("String");(i.exports=function(D,O,$,K){var X=K?!!K.unsafe:!1,ae=K?!!K.enumerable:!1,ue=K?!!K.noTargetGet:!1;if(typeof $=="function"&&(typeof O=="string"&&!d($,"name")&&f($,"name",O),E($).source=T.join(typeof O=="string"?O:"")),D===u){ae?D[O]=$:g(O,$);return}else X?!ue&&D[O]&&(ae=!0):delete D[O];ae?D[O]=$:f(D,O,$)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||y(this)})},"6f53":function(i,s,o){var u=o("83ab"),f=o("df75"),d=o("fc6a"),g=o("d1e7").f,y=function(x){return function(_){for(var E=d(_),T=f(E),D=T.length,O=0,$=[],K;D>O;)K=T[O++],(!u||g.call(E,K))&&$.push(x?[K,E[K]]:E[K]);return $}};i.exports={entries:y(!0),values:y(!1)}},"73d9":function(i,s,o){var u=o("44d2");u("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var u=o("428f"),f=o("5135"),d=o("e538"),g=o("9bf2").f;i.exports=function(y){var x=u.Symbol||(u.Symbol={});f(x,y)||g(x,y,{value:d.f(y)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var u=o("1d80");i.exports=function(f){return Object(u(f))}},"7c73":function(i,s,o){var u=o("825a"),f=o("37e8"),d=o("7839"),g=o("d012"),y=o("1be4"),x=o("cc12"),_=o("f772"),E=">",T="<",D="prototype",O="script",$=_("IE_PROTO"),K=function(){},X=function(V){return T+O+E+V+T+"/"+O+E},ae=function(V){V.write(X("")),V.close();var Y=V.parentWindow.Object;return V=null,Y},ue=function(){var V=x("iframe"),Y="java"+O+":",F;return V.style.display="none",y.appendChild(V),V.src=String(Y),F=V.contentWindow.document,F.open(),F.write(X("document.F=Object")),F.close(),F.F},Le,W=function(){try{Le=document.domain&&new ActiveXObject("htmlfile")}catch{}W=Le?ae(Le):ue();for(var V=d.length;V--;)delete W[D][d[V]];return W()};g[$]=!0,i.exports=Object.create||function(Y,F){var I;return Y!==null?(K[D]=u(Y),I=new K,K[D]=null,I[$]=Y):I=W(),F===void 0?I:f(I,F)}},"7dd0":function(i,s,o){var u=o("23e7"),f=o("9ed3"),d=o("e163"),g=o("d2bb"),y=o("d44e"),x=o("9112"),_=o("6eeb"),E=o("b622"),T=o("c430"),D=o("3f8c"),O=o("ae93"),$=O.IteratorPrototype,K=O.BUGGY_SAFARI_ITERATORS,X=E("iterator"),ae="keys",ue="values",Le="entries",W=function(){return this};i.exports=function(V,Y,F,I,j,H,U){f(F,Y,I);var R=function(ye){if(ye===j&&We)return We;if(!K&&ye in me)return me[ye];switch(ye){case ae:return function(){return new F(this,ye)};case ue:return function(){return new F(this,ye)};case Le:return function(){return new F(this,ye)}}return function(){return new F(this)}},te=Y+" Iterator",re=!1,me=V.prototype,xe=me[X]||me["@@iterator"]||j&&me[j],We=!K&&xe||R(j),N=Y=="Array"&&me.entries||xe,ee,fe,ce;if(N&&(ee=d(N.call(new V)),$!==Object.prototype&&ee.next&&(!T&&d(ee)!==$&&(g?g(ee,$):typeof ee[X]!="function"&&x(ee,X,W)),y(ee,te,!0,!0),T&&(D[te]=W))),j==ue&&xe&&xe.name!==ue&&(re=!0,We=function(){return xe.call(this)}),(!T||U)&&me[X]!==We&&x(me,X,We),D[Y]=We,j)if(fe={values:R(ue),keys:H?We:R(ae),entries:R(Le)},U)for(ce in fe)(K||re||!(ce in me))&&_(me,ce,fe[ce]);else u({target:Y,proto:!0,forced:K||re},fe);return fe}},"7f9a":function(i,s,o){var u=o("da84"),f=o("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(f(d))},"825a":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(i,s,o){var u=o("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var u=o("c04e"),f=o("9bf2"),d=o("5c6c");i.exports=function(g,y,x){var _=u(y);_ in g?f.f(g,_,d(0,x)):g[_]=x}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var u,f,d;(function(g,y){f=[],u=y,d=typeof u=="function"?u.apply(s,f):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function g(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==g&&document.currentScript)return document.currentScript;try{throw new Error}catch(Le){var x=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,E=x.exec(Le.stack)||_.exec(Le.stack),T=E&&E[1]||!1,D=E&&E[2]||!1,O=document.location.href.replace(document.location.hash,""),$,K,X,ae=document.getElementsByTagName("script");T===O&&($=document.documentElement.outerHTML,K=new RegExp("(?:[^\\n]+?\\n){0,"+(D-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),X=$.replace(K,"$1").trim());for(var ue=0;ue<ae.length;ue++)if(ae[ue].readyState==="interactive"||ae[ue].src===T||T===O&&ae[ue].innerHTML&&ae[ue].innerHTML.trim()===X)return ae[ue];return null}}return g})},8925:function(i,s,o){var u=o("c6cd"),f=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return f.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,s,o){var u=o("6547").charAt;i.exports=function(f,d,g){return d+(g?u(f,d).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,u=Math.random();i.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++o+u).toString(36)}},9112:function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("5c6c");i.exports=u?function(g,y,x){return f.f(g,y,d(1,x))}:function(g,y,x){return g[y]=x,g}},9263:function(i,s,o){var u=o("ad6d"),f=o("9f7f"),d=RegExp.prototype.exec,g=String.prototype.replace,y=d,x=function(){var D=/a/,O=/b*/g;return d.call(D,"a"),d.call(O,"a"),D.lastIndex!==0||O.lastIndex!==0}(),_=f.UNSUPPORTED_Y||f.BROKEN_CARET,E=/()??/.exec("")[1]!==void 0,T=x||E||_;T&&(y=function(O){var $=this,K,X,ae,ue,Le=_&&$.sticky,W=u.call($),V=$.source,Y=0,F=O;return Le&&(W=W.replace("y",""),W.indexOf("g")===-1&&(W+="g"),F=String(O).slice($.lastIndex),$.lastIndex>0&&(!$.multiline||$.multiline&&O[$.lastIndex-1]!==`
`)&&(V="(?: "+V+")",F=" "+F,Y++),X=new RegExp("^(?:"+V+")",W)),E&&(X=new RegExp("^"+V+"$(?!\\s)",W)),x&&(K=$.lastIndex),ae=d.call(Le?X:$,F),Le?ae?(ae.input=ae.input.slice(Y),ae[0]=ae[0].slice(Y),ae.index=$.lastIndex,$.lastIndex+=ae[0].length):$.lastIndex=0:x&&ae&&($.lastIndex=$.global?ae.index+ae[0].length:K),E&&ae&&ae.length>1&&g.call(ae[0],X,function(){for(ue=1;ue<arguments.length-2;ue++)arguments[ue]===void 0&&(ae[ue]=void 0)}),ae}),i.exports=y},"94ca":function(i,s,o){var u=o("d039"),f=/#|\.prototype\./,d=function(E,T){var D=y[g(E)];return D==_?!0:D==x?!1:typeof T=="function"?u(T):!!T},g=d.normalize=function(E){return String(E).replace(f,".").toLowerCase()},y=d.data={},x=d.NATIVE="N",_=d.POLYFILL="P";i.exports=d},"99af":function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("e8b5"),g=o("861d"),y=o("7b0b"),x=o("50c4"),_=o("8418"),E=o("65f0"),T=o("1dde"),D=o("b622"),O=o("2d00"),$=D("isConcatSpreadable"),K=9007199254740991,X="Maximum allowed index exceeded",ae=O>=51||!f(function(){var V=[];return V[$]=!1,V.concat()[0]!==V}),ue=T("concat"),Le=function(V){if(!g(V))return!1;var Y=V[$];return Y!==void 0?!!Y:d(V)},W=!ae||!ue;u({target:"Array",proto:!0,forced:W},{concat:function(Y){var F=y(this),I=E(F,0),j=0,H,U,R,te,re;for(H=-1,R=arguments.length;H<R;H++)if(re=H===-1?F:arguments[H],Le(re)){if(te=x(re.length),j+te>K)throw TypeError(X);for(U=0;U<te;U++,j++)U in re&&_(I,j,re[U])}else{if(j>=K)throw TypeError(X);_(I,j++,re)}return I.length=j,I}})},"9bdd":function(i,s,o){var u=o("825a");i.exports=function(f,d,g,y){try{return y?d(u(g)[0],g[1]):d(g)}catch(_){var x=f.return;throw x!==void 0&&u(x.call(f)),_}}},"9bf2":function(i,s,o){var u=o("83ab"),f=o("0cfb"),d=o("825a"),g=o("c04e"),y=Object.defineProperty;s.f=u?y:function(_,E,T){if(d(_),E=g(E,!0),d(T),f)try{return y(_,E,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported");return"value"in T&&(_[E]=T.value),_}},"9ed3":function(i,s,o){var u=o("ae93").IteratorPrototype,f=o("7c73"),d=o("5c6c"),g=o("d44e"),y=o("3f8c"),x=function(){return this};i.exports=function(_,E,T){var D=E+" Iterator";return _.prototype=f(u,{next:d(1,T)}),g(_,D,!1,!0),y[D]=x,_}},"9f7f":function(i,s,o){var u=o("d039");function f(d,g){return RegExp(d,g)}s.UNSUPPORTED_Y=u(function(){var d=f("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),s.BROKEN_CARET=u(function(){var d=f("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,s,o){var u=o("e8b5"),f=o("50c4"),d=o("0366"),g=function(y,x,_,E,T,D,O,$){for(var K=T,X=0,ae=O?d(O,$,3):!1,ue;X<E;){if(X in _){if(ue=ae?ae(_[X],X,x):_[X],D>0&&u(ue))K=g(y,x,ue,f(ue.length),K,D-1)-1;else{if(K>=9007199254740991)throw TypeError("Exceed the acceptable array length");y[K]=ue}K++}X++}return K};i.exports=g},a352:function(i,s){i.exports=r},a434:function(i,s,o){var u=o("23e7"),f=o("23cb"),d=o("a691"),g=o("50c4"),y=o("7b0b"),x=o("65f0"),_=o("8418"),E=o("1dde"),T=o("ae40"),D=E("splice"),O=T("splice",{ACCESSORS:!0,0:0,1:2}),$=Math.max,K=Math.min,X=9007199254740991,ae="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!D||!O},{splice:function(Le,W){var V=y(this),Y=g(V.length),F=f(Le,Y),I=arguments.length,j,H,U,R,te,re;if(I===0?j=H=0:I===1?(j=0,H=Y-F):(j=I-2,H=K($(d(W),0),Y-F)),Y+j-H>X)throw TypeError(ae);for(U=x(V,H),R=0;R<H;R++)te=F+R,te in V&&_(U,R,V[te]);if(U.length=H,j<H){for(R=F;R<Y-H;R++)te=R+H,re=R+j,te in V?V[re]=V[te]:delete V[re];for(R=Y;R>Y-H+j;R--)delete V[R-1]}else if(j>H)for(R=Y-H;R>F;R--)te=R+H-1,re=R+j-1,te in V?V[re]=V[te]:delete V[re];for(R=0;R<j;R++)V[R+F]=arguments[R+2];return V.length=Y-H+j,U}})},a4d3:function(i,s,o){var u=o("23e7"),f=o("da84"),d=o("d066"),g=o("c430"),y=o("83ab"),x=o("4930"),_=o("fdbf"),E=o("d039"),T=o("5135"),D=o("e8b5"),O=o("861d"),$=o("825a"),K=o("7b0b"),X=o("fc6a"),ae=o("c04e"),ue=o("5c6c"),Le=o("7c73"),W=o("df75"),V=o("241c"),Y=o("057f"),F=o("7418"),I=o("06cf"),j=o("9bf2"),H=o("d1e7"),U=o("9112"),R=o("6eeb"),te=o("5692"),re=o("f772"),me=o("d012"),xe=o("90e3"),We=o("b622"),N=o("e538"),ee=o("746f"),fe=o("d44e"),ce=o("69f3"),ye=o("b727").forEach,se=re("hidden"),k="Symbol",le="prototype",ke=We("toPrimitive"),Pe=ce.set,Ve=ce.getterFor(k),Z=Object[le],de=f.Symbol,ve=d("JSON","stringify"),pe=I.f,ze=j.f,Qe=Y.f,Ke=H.f,He=te("symbols"),Xe=te("op-symbols"),ot=te("string-to-symbol-registry"),kt=te("symbol-to-string-registry"),Ct=te("wks"),Ut=f.QObject,Gt=!Ut||!Ut[le]||!Ut[le].findChild,cn=y&&E(function(){return Le(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(xn,Mn,En){var cr=pe(Z,Mn);cr&&delete Z[Mn],ze(xn,Mn,En),cr&&xn!==Z&&ze(Z,Mn,cr)}:ze,pn=function(xn,Mn){var En=He[xn]=Le(de[le]);return Pe(En,{type:k,tag:xn,description:Mn}),y||(En.description=Mn),En},et=_?function(xn){return typeof xn=="symbol"}:function(xn){return Object(xn)instanceof de},it=function(Mn,En,cr){Mn===Z&&it(Xe,En,cr),$(Mn);var yr=ae(En,!0);return $(cr),T(He,yr)?(cr.enumerable?(T(Mn,se)&&Mn[se][yr]&&(Mn[se][yr]=!1),cr=Le(cr,{enumerable:ue(0,!1)})):(T(Mn,se)||ze(Mn,se,ue(1,{})),Mn[se][yr]=!0),cn(Mn,yr,cr)):ze(Mn,yr,cr)},nt=function(Mn,En){$(Mn);var cr=X(En),yr=W(cr).concat(Tn(cr));return ye(yr,function(mt){(!y||Qt.call(cr,mt))&&it(Mn,mt,cr[mt])}),Mn},Vt=function(Mn,En){return En===void 0?Le(Mn):nt(Le(Mn),En)},Qt=function(Mn){var En=ae(Mn,!0),cr=Ke.call(this,En);return this===Z&&T(He,En)&&!T(Xe,En)?!1:cr||!T(this,En)||!T(He,En)||T(this,se)&&this[se][En]?cr:!0},On=function(Mn,En){var cr=X(Mn),yr=ae(En,!0);if(!(cr===Z&&T(He,yr)&&!T(Xe,yr))){var mt=pe(cr,yr);return mt&&T(He,yr)&&!(T(cr,se)&&cr[se][yr])&&(mt.enumerable=!0),mt}},wn=function(Mn){var En=Qe(X(Mn)),cr=[];return ye(En,function(yr){!T(He,yr)&&!T(me,yr)&&cr.push(yr)}),cr},Tn=function(Mn){var En=Mn===Z,cr=Qe(En?Xe:X(Mn)),yr=[];return ye(cr,function(mt){T(He,mt)&&(!En||T(Z,mt))&&yr.push(He[mt])}),yr};if(x||(de=function(){if(this instanceof de)throw TypeError("Symbol is not a constructor");var Mn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),En=xe(Mn),cr=function(yr){this===Z&&cr.call(Xe,yr),T(this,se)&&T(this[se],En)&&(this[se][En]=!1),cn(this,En,ue(1,yr))};return y&&Gt&&cn(Z,En,{configurable:!0,set:cr}),pn(En,Mn)},R(de[le],"toString",function(){return Ve(this).tag}),R(de,"withoutSetter",function(xn){return pn(xe(xn),xn)}),H.f=Qt,j.f=it,I.f=On,V.f=Y.f=wn,F.f=Tn,N.f=function(xn){return pn(We(xn),xn)},y&&(ze(de[le],"description",{configurable:!0,get:function(){return Ve(this).description}}),g||R(Z,"propertyIsEnumerable",Qt,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!x,sham:!x},{Symbol:de}),ye(W(Ct),function(xn){ee(xn)}),u({target:k,stat:!0,forced:!x},{for:function(xn){var Mn=String(xn);if(T(ot,Mn))return ot[Mn];var En=de(Mn);return ot[Mn]=En,kt[En]=Mn,En},keyFor:function(Mn){if(!et(Mn))throw TypeError(Mn+" is not a symbol");if(T(kt,Mn))return kt[Mn]},useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),u({target:"Object",stat:!0,forced:!x,sham:!y},{create:Vt,defineProperty:it,defineProperties:nt,getOwnPropertyDescriptor:On}),u({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:wn,getOwnPropertySymbols:Tn}),u({target:"Object",stat:!0,forced:E(function(){F.f(1)})},{getOwnPropertySymbols:function(Mn){return F.f(K(Mn))}}),ve){var ar=!x||E(function(){var xn=de();return ve([xn])!="[null]"||ve({a:xn})!="{}"||ve(Object(xn))!="{}"});u({target:"JSON",stat:!0,forced:ar},{stringify:function(Mn,En,cr){for(var yr=[Mn],mt=1,Ge;arguments.length>mt;)yr.push(arguments[mt++]);if(Ge=En,!(!O(En)&&Mn===void 0||et(Mn)))return D(En)||(En=function(Ot,Pn){if(typeof Ge=="function"&&(Pn=Ge.call(this,Ot,Pn)),!et(Pn))return Pn}),yr[1]=En,ve.apply(null,yr)}})}de[le][ke]||U(de[le],ke,de[le].valueOf),fe(de,k),me[se]=!0},a630:function(i,s,o){var u=o("23e7"),f=o("4df4"),d=o("1c7e"),g=!d(function(y){Array.from(y)});u({target:"Array",stat:!0,forced:g},{from:f})},a640:function(i,s,o){var u=o("d039");i.exports=function(f,d){var g=[][f];return!!g&&u(function(){g.call(null,d||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,u=Math.floor;i.exports=function(f){return isNaN(f=+f)?0:(f>0?u:o)(f)}},ab13:function(i,s,o){var u=o("b622"),f=u("match");i.exports=function(d){var g=/./;try{"/./"[d](g)}catch{try{return g[f]=!1,"/./"[d](g)}catch{}}return!1}},ac1f:function(i,s,o){var u=o("23e7"),f=o("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(i,s,o){var u=o("825a");i.exports=function(){var f=u(this),d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),f.dotAll&&(d+="s"),f.unicode&&(d+="u"),f.sticky&&(d+="y"),d}},ae40:function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("5135"),g=Object.defineProperty,y={},x=function(_){throw _};i.exports=function(_,E){if(d(y,_))return y[_];E||(E={});var T=[][_],D=d(E,"ACCESSORS")?E.ACCESSORS:!1,O=d(E,0)?E[0]:x,$=d(E,1)?E[1]:void 0;return y[_]=!!T&&!f(function(){if(D&&!u)return!0;var K={length:-1};D?g(K,1,{enumerable:!0,get:x}):K[1]=1,T.call(K,O,$)})}},ae93:function(i,s,o){var u=o("e163"),f=o("9112"),d=o("5135"),g=o("b622"),y=o("c430"),x=g("iterator"),_=!1,E=function(){return this},T,D,O;[].keys&&(O=[].keys(),"next"in O?(D=u(u(O)),D!==Object.prototype&&(T=D)):_=!0),T==null&&(T={}),!y&&!d(T,x)&&f(T,x,E),i.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:_}},b041:function(i,s,o){var u=o("00ee"),f=o("f5df");i.exports=u?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(i,s,o){var u=o("83ab"),f=o("9bf2").f,d=Function.prototype,g=d.toString,y=/^\s*function ([^ (]*)/,x="name";u&&!(x in d)&&f(d,x,{configurable:!0,get:function(){try{return g.call(this).match(y)[1]}catch{return""}}})},b622:function(i,s,o){var u=o("da84"),f=o("5692"),d=o("5135"),g=o("90e3"),y=o("4930"),x=o("fdbf"),_=f("wks"),E=u.Symbol,T=x?E:E&&E.withoutSetter||g;i.exports=function(D){return d(_,D)||(y&&d(E,D)?_[D]=E[D]:_[D]=T("Symbol."+D)),_[D]}},b64b:function(i,s,o){var u=o("23e7"),f=o("7b0b"),d=o("df75"),g=o("d039"),y=g(function(){d(1)});u({target:"Object",stat:!0,forced:y},{keys:function(_){return d(f(_))}})},b727:function(i,s,o){var u=o("0366"),f=o("44ad"),d=o("7b0b"),g=o("50c4"),y=o("65f0"),x=[].push,_=function(E){var T=E==1,D=E==2,O=E==3,$=E==4,K=E==6,X=E==5||K;return function(ae,ue,Le,W){for(var V=d(ae),Y=f(V),F=u(ue,Le,3),I=g(Y.length),j=0,H=W||y,U=T?H(ae,I):D?H(ae,0):void 0,R,te;I>j;j++)if((X||j in Y)&&(R=Y[j],te=F(R,j,V),E)){if(T)U[j]=te;else if(te)switch(E){case 3:return!0;case 5:return R;case 6:return j;case 2:x.call(U,R)}else if($)return!1}return K?-1:O||$?$:U}};i.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(i,s,o){var u=o("861d");i.exports=function(f,d){if(!u(f))return f;var g,y;if(d&&typeof(g=f.toString)=="function"&&!u(y=g.call(f))||typeof(g=f.valueOf)=="function"&&!u(y=g.call(f))||!d&&typeof(g=f.toString)=="function"&&!u(y=g.call(f)))return y;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(u){return o.call(u).slice(8,-1)}},c6cd:function(i,s,o){var u=o("da84"),f=o("ce4e"),d="__core-js_shared__",g=u[d]||f(d,{});i.exports=g},c740:function(i,s,o){var u=o("23e7"),f=o("b727").findIndex,d=o("44d2"),g=o("ae40"),y="findIndex",x=!0,_=g(y);y in[]&&Array(1)[y](function(){x=!1}),u({target:"Array",proto:!0,forced:x||!_},{findIndex:function(T){return f(this,T,arguments.length>1?arguments[1]:void 0)}}),d(y)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var u=o("23e7"),f=o("4d64").indexOf,d=o("a640"),g=o("ae40"),y=[].indexOf,x=!!y&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),E=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:x||!_||!E},{indexOf:function(D){return x?y.apply(this,arguments)||0:f(this,D,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var u=o("5135"),f=o("fc6a"),d=o("4d64").indexOf,g=o("d012");i.exports=function(y,x){var _=f(y),E=0,T=[],D;for(D in _)!u(g,D)&&u(_,D)&&T.push(D);for(;x.length>E;)u(_,D=x[E++])&&(~d(T,D)||T.push(D));return T}},caad:function(i,s,o){var u=o("23e7"),f=o("4d64").includes,d=o("44d2"),g=o("ae40"),y=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!y},{includes:function(_){return f(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,s,o){var u=o("da84"),f=o("861d"),d=u.document,g=f(d)&&f(d.createElement);i.exports=function(y){return g?d.createElement(y):{}}},ce4e:function(i,s,o){var u=o("da84"),f=o("9112");i.exports=function(d,g){try{f(u,d,g)}catch{u[d]=g}return g}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var u=o("428f"),f=o("da84"),d=function(g){return typeof g=="function"?g:void 0};i.exports=function(g,y){return arguments.length<2?d(u[g])||d(f[g]):u[g]&&u[g][y]||f[g]&&f[g][y]}},d1e7:function(i,s,o){var u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d=f&&!u.call({1:2},1);s.f=d?function(y){var x=f(this,y);return!!x&&x.enumerable}:u},d28b:function(i,s,o){var u=o("746f");u("iterator")},d2bb:function(i,s,o){var u=o("825a"),f=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,g={},y;try{y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,y.call(g,[]),d=g instanceof Array}catch{}return function(_,E){return u(_),f(E),d?y.call(_,E):_.__proto__=E,_}}():void 0)},d3b7:function(i,s,o){var u=o("00ee"),f=o("6eeb"),d=o("b041");u||f(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,s,o){var u=o("9bf2").f,f=o("5135"),d=o("b622"),g=d("toStringTag");i.exports=function(y,x,_){y&&!f(y=_?y:y.prototype,g)&&u(y,g,{configurable:!0,value:x})}},d58f:function(i,s,o){var u=o("1c0b"),f=o("7b0b"),d=o("44ad"),g=o("50c4"),y=function(x){return function(_,E,T,D){u(E);var O=f(_),$=d(O),K=g(O.length),X=x?K-1:0,ae=x?-1:1;if(T<2)for(;;){if(X in $){D=$[X],X+=ae;break}if(X+=ae,x?X<0:K<=X)throw TypeError("Reduce of empty array with no initial value")}for(;x?X>=0:K>X;X+=ae)X in $&&(D=E(D,$[X],X,O));return D}};i.exports={left:y(!1),right:y(!0)}},d784:function(i,s,o){o("ac1f");var u=o("6eeb"),f=o("d039"),d=o("b622"),g=o("9263"),y=o("9112"),x=d("species"),_=!f(function(){var $=/./;return $.exec=function(){var K=[];return K.groups={a:"7"},K},"".replace($,"$<a>")!=="7"}),E=function(){return"a".replace(/./,"$0")==="$0"}(),T=d("replace"),D=function(){return/./[T]?/./[T]("a","$0")==="":!1}(),O=!f(function(){var $=/(?:)/,K=$.exec;$.exec=function(){return K.apply(this,arguments)};var X="ab".split($);return X.length!==2||X[0]!=="a"||X[1]!=="b"});i.exports=function($,K,X,ae){var ue=d($),Le=!f(function(){var j={};return j[ue]=function(){return 7},""[$](j)!=7}),W=Le&&!f(function(){var j=!1,H=/a/;return $==="split"&&(H={},H.constructor={},H.constructor[x]=function(){return H},H.flags="",H[ue]=/./[ue]),H.exec=function(){return j=!0,null},H[ue](""),!j});if(!Le||!W||$==="replace"&&!(_&&E&&!D)||$==="split"&&!O){var V=/./[ue],Y=X(ue,""[$],function(j,H,U,R,te){return H.exec===g?Le&&!te?{done:!0,value:V.call(H,U,R)}:{done:!0,value:j.call(U,H,R)}:{done:!1}},{REPLACE_KEEPS_$0:E,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:D}),F=Y[0],I=Y[1];u(String.prototype,$,F),u(RegExp.prototype,ue,K==2?function(j,H){return I.call(j,this,H)}:function(j){return I.call(j,this)})}ae&&y(RegExp.prototype[ue],"sham",!0)}},d81d:function(i,s,o){var u=o("23e7"),f=o("b727").map,d=o("1dde"),g=o("ae40"),y=d("map"),x=g("map");u({target:"Array",proto:!0,forced:!y||!x},{map:function(E){return f(this,E,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(u){var f=function(d){return d&&d.Math==Math&&d};i.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof u=="object"&&u)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("56ef"),g=o("fc6a"),y=o("06cf"),x=o("8418");u({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(E){for(var T=g(E),D=y.f,O=d(T),$={},K=0,X,ae;O.length>K;)ae=D(T,X=O[K++]),ae!==void 0&&x($,X,ae);return $}})},dbf1:function(i,s,o){(function(u){o.d(s,"a",function(){return d});function f(){return typeof window<"u"?window.console:u.console}var d=f()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("e260"),g=o("9112"),y=o("b622"),x=y("iterator"),_=y("toStringTag"),E=d.values;for(var T in f){var D=u[T],O=D&&D.prototype;if(O){if(O[x]!==E)try{g(O,x,E)}catch{O[x]=E}if(O[_]||g(O,_,T),f[T]){for(var $ in d)if(O[$]!==d[$])try{g(O,$,d[$])}catch{O[$]=d[$]}}}}},df75:function(i,s,o){var u=o("ca84"),f=o("7839");i.exports=Object.keys||function(g){return u(g,f)}},e01a:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("da84"),g=o("5135"),y=o("861d"),x=o("9bf2").f,_=o("e893"),E=d.Symbol;if(f&&typeof E=="function"&&(!("description"in E.prototype)||E().description!==void 0)){var T={},D=function(){var ue=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Le=this instanceof D?new E(ue):ue===void 0?E():E(ue);return ue===""&&(T[Le]=!0),Le};_(D,E);var O=D.prototype=E.prototype;O.constructor=D;var $=O.toString,K=String(E("test"))=="Symbol(test)",X=/^Symbol\((.*)\)[^)]+$/;x(O,"description",{configurable:!0,get:function(){var ue=y(this)?this.valueOf():this,Le=$.call(ue);if(g(T,ue))return"";var W=K?Le.slice(7,-1):Le.replace(X,"$1");return W===""?void 0:W}}),u({global:!0,forced:!0},{Symbol:D})}},e163:function(i,s,o){var u=o("5135"),f=o("7b0b"),d=o("f772"),g=o("e177"),y=d("IE_PROTO"),x=Object.prototype;i.exports=g?Object.getPrototypeOf:function(_){return _=f(_),u(_,y)?_[y]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?x:null}},e177:function(i,s,o){var u=o("d039");i.exports=!u(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(i,s,o){var u=o("fc6a"),f=o("44d2"),d=o("3f8c"),g=o("69f3"),y=o("7dd0"),x="Array Iterator",_=g.set,E=g.getterFor(x);i.exports=y(Array,"Array",function(T,D){_(this,{type:x,target:u(T),index:0,kind:D})},function(){var T=E(this),D=T.target,O=T.kind,$=T.index++;return!D||$>=D.length?(T.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:$,done:!1}:O=="values"?{value:D[$],done:!1}:{value:[$,D[$]],done:!1}},"values"),d.Arguments=d.Array,f("keys"),f("values"),f("entries")},e439:function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("fc6a"),g=o("06cf").f,y=o("83ab"),x=f(function(){g(1)}),_=!y||x;u({target:"Object",stat:!0,forced:_,sham:!y},{getOwnPropertyDescriptor:function(T,D){return g(d(T),D)}})},e538:function(i,s,o){var u=o("b622");s.f=u},e893:function(i,s,o){var u=o("5135"),f=o("56ef"),d=o("06cf"),g=o("9bf2");i.exports=function(y,x){for(var _=f(x),E=g.f,T=d.f,D=0;D<_.length;D++){var O=_[D];u(y,O)||E(y,O,T(x,O))}}},e8b5:function(i,s,o){var u=o("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,s,o){var u=o("b622"),f=o("3f8c"),d=u("iterator"),g=Array.prototype;i.exports=function(y){return y!==void 0&&(f.Array===y||g[d]===y)}},f5df:function(i,s,o){var u=o("00ee"),f=o("c6b6"),d=o("b622"),g=d("toStringTag"),y=f(function(){return arguments}())=="Arguments",x=function(_,E){try{return _[E]}catch{}};i.exports=u?f:function(_){var E,T,D;return _===void 0?"Undefined":_===null?"Null":typeof(T=x(E=Object(_),g))=="string"?T:y?f(E):(D=f(E))=="Object"&&typeof E.callee=="function"?"Arguments":D}},f772:function(i,s,o){var u=o("5692"),f=o("90e3"),d=u("keys");i.exports=function(g){return d[g]||(d[g]=f(g))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var u=window.document.currentScript;{var f=o("8875");u=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(o.p=d[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function g(et,it,nt){return it in et?Object.defineProperty(et,it,{value:nt,enumerable:!0,configurable:!0,writable:!0}):et[it]=nt,et}function y(et,it){var nt=Object.keys(et);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(et);it&&(Vt=Vt.filter(function(Qt){return Object.getOwnPropertyDescriptor(et,Qt).enumerable})),nt.push.apply(nt,Vt)}return nt}function x(et){for(var it=1;it<arguments.length;it++){var nt=arguments[it]!=null?arguments[it]:{};it%2?y(Object(nt),!0).forEach(function(Vt){g(et,Vt,nt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(nt)):y(Object(nt)).forEach(function(Vt){Object.defineProperty(et,Vt,Object.getOwnPropertyDescriptor(nt,Vt))})}return et}function _(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function E(et,it){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var nt=[],Vt=!0,Qt=!1,On=void 0;try{for(var wn=et[Symbol.iterator](),Tn;!(Vt=(Tn=wn.next()).done)&&(nt.push(Tn.value),!(it&&nt.length===it));Vt=!0);}catch(ar){Qt=!0,On=ar}finally{try{!Vt&&wn.return!=null&&wn.return()}finally{if(Qt)throw On}}return nt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function T(et,it){(it==null||it>et.length)&&(it=et.length);for(var nt=0,Vt=new Array(it);nt<it;nt++)Vt[nt]=et[nt];return Vt}function D(et,it){if(et){if(typeof et=="string")return T(et,it);var nt=Object.prototype.toString.call(et).slice(8,-1);if(nt==="Object"&&et.constructor&&(nt=et.constructor.name),nt==="Map"||nt==="Set")return Array.from(et);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return T(et,it)}}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(et,it){return _(et)||E(et,it)||D(et,it)||O()}function K(et){if(Array.isArray(et))return T(et)}function X(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(et){return K(et)||X(et)||D(et)||ae()}var Le=o("a352"),W=o.n(Le);function V(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function Y(et,it,nt){var Vt=nt===0?et.children[0]:et.children[nt-1].nextSibling;et.insertBefore(it,Vt)}var F=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function I(et){var it=Object.create(null);return function(Vt){var Qt=it[Vt];return Qt||(it[Vt]=et(Vt))}}var j=/-(\w)/g,H=I(function(et){return et.replace(j,function(it,nt){return nt.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],R=["Choose","Unchoose","Sort","Filter","Clone"],te=["Move"],re=[te,U,R].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),me={manage:te,manageAndEmit:U,emit:R};function xe(et){return re.indexOf(et)!==-1}o("caad"),o("2ca0");var We=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function N(et){return We.includes(et)}function ee(et){return["transition-group","TransitionGroup"].includes(et)}function fe(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function ce(et){return et.reduce(function(it,nt){var Vt=$(nt,2),Qt=Vt[0],On=Vt[1];return it[Qt]=On,it},{})}function ye(et){var it=et.$attrs,nt=et.componentData,Vt=nt===void 0?{}:nt,Qt=ce(Object.entries(it).filter(function(On){var wn=$(On,2),Tn=wn[0];return wn[1],fe(Tn)}));return x(x({},Qt),Vt)}function se(et){var it=et.$attrs,nt=et.callBackBuilder,Vt=ce(k(it));Object.entries(nt).forEach(function(On){var wn=$(On,2),Tn=wn[0],ar=wn[1];me[Tn].forEach(function(xn){Vt["on".concat(xn)]=ar(xn)})});var Qt="[data-draggable]".concat(Vt.draggable||"");return x(x({},Vt),{},{draggable:Qt})}function k(et){return Object.entries(et).filter(function(it){var nt=$(it,2),Vt=nt[0];return nt[1],!fe(Vt)}).map(function(it){var nt=$(it,2),Vt=nt[0],Qt=nt[1];return[H(Vt),Qt]}).filter(function(it){var nt=$(it,2),Vt=nt[0];return nt[1],!xe(Vt)})}o("c740");function le(et,it){if(!(et instanceof it))throw new TypeError("Cannot call a class as a function")}function ke(et,it){for(var nt=0;nt<it.length;nt++){var Vt=it[nt];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(et,Vt.key,Vt)}}function Pe(et,it,nt){return it&&ke(et.prototype,it),et}var Ve=function(it){var nt=it.el;return nt},Z=function(it,nt){return it.__draggable_context=nt},de=function(it){return it.__draggable_context},ve=function(){function et(it){var nt=it.nodes,Vt=nt.header,Qt=nt.default,On=nt.footer,wn=it.root,Tn=it.realList;le(this,et),this.defaultNodes=Qt,this.children=[].concat(ue(Vt),ue(Qt),ue(On)),this.externalComponent=wn.externalComponent,this.rootTransition=wn.transition,this.tag=wn.tag,this.realList=Tn}return Pe(et,[{key:"render",value:function(nt,Vt){var Qt=this.tag,On=this.children,wn=this._isRootComponent,Tn=wn?{default:function(){return On}}:On;return nt(Qt,Vt,Tn)}},{key:"updated",value:function(){var nt=this.defaultNodes,Vt=this.realList;nt.forEach(function(Qt,On){Z(Ve(Qt),{element:Vt[On],index:On})})}},{key:"getUnderlyingVm",value:function(nt){return de(nt)}},{key:"getVmIndexFromDomIndex",value:function(nt,Vt){var Qt=this.defaultNodes,On=Qt.length,wn=Vt.children,Tn=wn.item(nt);if(Tn===null)return On;var ar=de(Tn);if(ar)return ar.index;if(On===0)return 0;var xn=Ve(Qt[0]),Mn=ue(wn).findIndex(function(En){return En===xn});return nt<Mn?0:On}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),pe=o("8bbf");function ze(et,it){var nt=et[it];return nt?nt():[]}function Qe(et){var it=et.$slots,nt=et.realList,Vt=et.getKey,Qt=nt||[],On=["header","footer"].map(function(En){return ze(it,En)}),wn=$(On,2),Tn=wn[0],ar=wn[1],xn=it.item;if(!xn)throw new Error("draggable element must have an item slot");var Mn=Qt.flatMap(function(En,cr){return xn({element:En,index:cr}).map(function(yr){return yr.key=Vt(En),yr.props=x(x({},yr.props||{}),{},{"data-draggable":!0}),yr})});if(Mn.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:Tn,footer:ar,default:Mn}}function Ke(et){var it=ee(et),nt=!N(et)&&!it;return{transition:it,externalComponent:nt,tag:nt?Object(pe.resolveComponent)(et):it?pe.TransitionGroup:et}}function He(et){var it=et.$slots,nt=et.tag,Vt=et.realList,Qt=et.getKey,On=Qe({$slots:it,realList:Vt,getKey:Qt}),wn=Ke(nt);return new ve({nodes:On,root:wn,realList:Vt})}function Xe(et,it){var nt=this;Object(pe.nextTick)(function(){return nt.$emit(et.toLowerCase(),it)})}function ot(et){var it=this;return function(nt,Vt){if(it.realList!==null)return it["onDrag".concat(et)](nt,Vt)}}function kt(et){var it=this,nt=ot.call(this,et);return function(Vt,Qt){nt.call(it,Vt,Qt),Xe.call(it,et,Vt)}}var Ct=null,Ut={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(it){return it}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Gt=["update:modelValue","change"].concat(ue([].concat(ue(me.manageAndEmit),ue(me.emit)).map(function(et){return et.toLowerCase()}))),cn=Object(pe.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ut,emits:Gt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var it=this.$slots,nt=this.$attrs,Vt=this.tag,Qt=this.componentData,On=this.realList,wn=this.getKey,Tn=He({$slots:it,tag:Vt,realList:On,getKey:wn});this.componentStructure=Tn;var ar=ye({$attrs:nt,componentData:Qt});return Tn.render(pe.h,ar)}catch(xn){return this.error=!0,Object(pe.h)("pre",{style:{color:"red"}},xn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&F.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var it=this;if(!this.error){var nt=this.$attrs,Vt=this.$el,Qt=this.componentStructure;Qt.updated();var On=se({$attrs:nt,callBackBuilder:{manageAndEmit:function(ar){return kt.call(it,ar)},emit:function(ar){return Xe.bind(it,ar)},manage:function(ar){return ot.call(it,ar)}}}),wn=Vt.nodeType===1?Vt:Vt.parentElement;this._sortable=new W.a(wn,On),this.targetDomElement=wn,wn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var it=this.list;return it||this.modelValue},getKey:function(){var it=this.itemKey;return typeof it=="function"?it:function(nt){return nt[it]}}},watch:{$attrs:{handler:function(it){var nt=this._sortable;nt&&k(it).forEach(function(Vt){var Qt=$(Vt,2),On=Qt[0],wn=Qt[1];nt.option(On,wn)})},deep:!0}},methods:{getUnderlyingVm:function(it){return this.componentStructure.getUnderlyingVm(it)||null},getUnderlyingPotencialDraggableComponent:function(it){return it.__draggable_component__},emitChanges:function(it){var nt=this;Object(pe.nextTick)(function(){return nt.$emit("change",it)})},alterList:function(it){if(this.list){it(this.list);return}var nt=ue(this.modelValue);it(nt),this.$emit("update:modelValue",nt)},spliceList:function(){var it=arguments,nt=function(Qt){return Qt.splice.apply(Qt,ue(it))};this.alterList(nt)},updatePosition:function(it,nt){var Vt=function(On){return On.splice(nt,0,On.splice(it,1)[0])};this.alterList(Vt)},getRelatedContextFromMoveEvent:function(it){var nt=it.to,Vt=it.related,Qt=this.getUnderlyingPotencialDraggableComponent(nt);if(!Qt)return{component:Qt};var On=Qt.realList,wn={list:On,component:Qt};if(nt!==Vt&&On){var Tn=Qt.getUnderlyingVm(Vt)||{};return x(x({},Tn),wn)}return wn},getVmIndexFromDomIndex:function(it){return this.componentStructure.getVmIndexFromDomIndex(it,this.targetDomElement)},onDragStart:function(it){this.context=this.getUnderlyingVm(it.item),it.item._underlying_vm_=this.clone(this.context.element),Ct=it.item},onDragAdd:function(it){var nt=it.item._underlying_vm_;if(nt!==void 0){V(it.item);var Vt=this.getVmIndexFromDomIndex(it.newIndex);this.spliceList(Vt,0,nt);var Qt={element:nt,newIndex:Vt};this.emitChanges({added:Qt})}},onDragRemove:function(it){if(Y(this.$el,it.item,it.oldIndex),it.pullMode==="clone"){V(it.clone);return}var nt=this.context,Vt=nt.index,Qt=nt.element;this.spliceList(Vt,1);var On={element:Qt,oldIndex:Vt};this.emitChanges({removed:On})},onDragUpdate:function(it){V(it.item),Y(it.from,it.item,it.oldIndex);var nt=this.context.index,Vt=this.getVmIndexFromDomIndex(it.newIndex);this.updatePosition(nt,Vt);var Qt={element:this.context.element,oldIndex:nt,newIndex:Vt};this.emitChanges({moved:Qt})},computeFutureIndex:function(it,nt){if(!it.element)return 0;var Vt=ue(nt.to.children).filter(function(Tn){return Tn.style.display!=="none"}),Qt=Vt.indexOf(nt.related),On=it.component.getVmIndexFromDomIndex(Qt),wn=Vt.indexOf(Ct)!==-1;return wn||!nt.willInsertAfter?On:On+1},onDragMove:function(it,nt){var Vt=this.move,Qt=this.realList;if(!Vt||!Qt)return!0;var On=this.getRelatedContextFromMoveEvent(it),wn=this.computeFutureIndex(On,it),Tn=x(x({},this.context),{},{futureIndex:wn}),ar=x(x({},it),{},{relatedContext:On,draggedContext:Tn});return Vt(ar,nt)},onDragEnd:function(){Ct=null}}}),pn=cn;s.default=pn},fb6a:function(i,s,o){var u=o("23e7"),f=o("861d"),d=o("e8b5"),g=o("23cb"),y=o("50c4"),x=o("fc6a"),_=o("8418"),E=o("b622"),T=o("1dde"),D=o("ae40"),O=T("slice"),$=D("slice",{ACCESSORS:!0,0:0,1:2}),K=E("species"),X=[].slice,ae=Math.max;u({target:"Array",proto:!0,forced:!O||!$},{slice:function(Le,W){var V=x(this),Y=y(V.length),F=g(Le,Y),I=g(W===void 0?Y:W,Y),j,H,U;if(d(V)&&(j=V.constructor,typeof j=="function"&&(j===Array||d(j.prototype))?j=void 0:f(j)&&(j=j[K],j===null&&(j=void 0)),j===Array||j===void 0))return X.call(V,F,I);for(H=new(j===void 0?Array:j)(ae(I-F,0)),U=0;F<I;F++,U++)F in V&&_(H,U,V[F]);return H.length=U,H}})},fc6a:function(i,s,o){var u=o("44ad"),f=o("1d80");i.exports=function(d){return u(f(d))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var u=o("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Rx);var HU=Rx.exports;const Qb=fy(HU),GU={class:"h-full bg-gray-50"},qU={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},WU={class:"mt-6 bg-white shadow rounded-lg p-4"},ZU={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},KU=["value"],YU={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},JU={key:1,class:"mt-6 overflow-x-auto pb-4"},XU={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},QU={class:"w-80 flex-shrink-0"},eV={class:"bg-white rounded-lg shadow overflow-hidden"},tV={class:"flex items-center"},nV={class:"flex items-center"},rV={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},iV={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},oV={class:"min-h-[100px] draggable-container"},sV={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},aV={class:"p-3 flex items-center justify-between note-drag-handle cursor-move no-select"},lV={class:"flex items-center"},uV={class:"text-sm font-medium text-gray-900 truncate"},cV={class:"px-3 py-2"},fV={class:"text-sm text-gray-500 line-clamp-2"},hV={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},dV={class:"text-xs text-gray-500"},pV={class:"flex space-x-1"},gV=["onClick"],mV=["onClick"],vV=["onClick"],yV=["onClick"],_V={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},bV={class:"flex items-center justify-center min-h-screen w-full"},wV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},xV={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},LV=cs({__name:"NotesView",setup(e){const n=Np(),t=dc(),r=Dp(),i=Op(),s=Ft(!0),o=Ft(!1),u=Ft(!1),f=Ft(null),d=Ft(null),g=Ft("info"),y=Ft(null),x=gr({get:()=>{const U=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes tries:",U),U},set:U=>{console.log("[NotesView][columnsForDrag] Mise  jour de l'ordre des colonnes:",U);const R=U.map(te=>te.id.toString());r.reorderColumns(R)}}),_=[{id:yo.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:yo.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:yo.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:yo.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],E=Kl({search:"",date:"",accessLevel:""}),T=gr(()=>{let U=r.getAccessibleNotes;if(E.search){const R=E.search.toLowerCase();U=U.filter(te=>te.title.toLowerCase().includes(R)||te.description.toLowerCase().includes(R))}if(E.accessLevel&&(U=U.filter(R=>R.accessLevel===E.accessLevel)),E.date){const R=new Date;R.setHours(0,0,0,0);const te=new Date(R);te.setDate(R.getDate()-R.getDay());const re=new Date(R.getFullYear(),R.getMonth(),1);U=U.filter(me=>{const xe=new Date(me.createdAt);return E.date==="today"?xe>=R:E.date==="week"?xe>=te:E.date==="month"?xe>=re:!0})}return U}),D=gr(()=>U=>{const R=r.getNotesByColumn(U);return console.log(`[NotesView][getNotesByColumn] Notes pour la colonne ${U}:`,R),R});function O(U){return r.getAccessLevelLabel(U)}function $(U){switch(U){case yo.PRIVATE:return"#9CA3AF";case yo.COMPANY:return"#EF4444";case yo.EMPLOYEE:return"#F59E0B";case yo.VISITOR:return"#10B981";default:return"#6B7280"}}async function K(){console.log(`
[NotesView][loadInitialData] Dbut du chargement des donnes`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes charges:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const U=await lc.getNotes();console.log("[NotesView][loadInitialData] Notes reues:",U.data),r.notes=U.data,console.log("[NotesView][loadInitialData] Notes charges dans le store")}catch(U){console.error("[NotesView][loadInitialData] Erreur:",U),t.error("Erreur lors du chargement des donnes")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement termin")}}$s(async()=>{console.log("[NotesView] Composant mont, chargement des donnes..."),await K(),console.log("[NotesView] Donnes charges, colonnes disponibles:",r.columns)});function X(U){const R=new Date(U);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(R)}function ae(){n.push({path:"/",query:{tool:"Note"}})}function ue(U){n.push({path:"/",query:{lat:U.location[0].toString(),lng:U.location[1].toString(),noteId:U.id.toString()}})}function Le(U){const R=U.location[0],te=U.location[1],re=`https://www.google.com/maps/dir/?api=1&destination=${R},${te}`;window.open(re,"_blank")}function W(U){d.value=JSON.parse(JSON.stringify(U)),g.value="info",u.value=!0}async function V(){if(u.value=!1,y.value&&d.value)try{const U={location:d.value.location,name:d.value.title,description:d.value.description,columnId:d.value.columnId,accessLevel:d.value.accessLevel,style:d.value.style,comments:d.value.comments||[],photos:d.value.photos||[],order:d.value.order,createdAt:d.value.createdAt,updatedAt:new Date().toISOString()},R=i.elements.findIndex(te=>{var re;return te.type_forme==="Note"&&te.id===((re=d.value)==null?void 0:re.id)});R!==-1?i.elements[R].data=U:i.elements.push({id:d.value.id,type_forme:"Note",data:U}),await i.saveToPlan(y.value),t.success("Note sauvegarde et plan mis  jour avec succs")}catch(U){console.error("Erreur lors de la sauvegarde de la note:",U),t.error("Erreur lors de la sauvegarde de la note")}}function Y(U){f.value=U,o.value=!0}async function F(){if(f.value)try{await lc.deleteNote(f.value.id),r.removeNote(f.value.id),t.success("Note supprime avec succs")}catch(U){console.error("Erreur lors de la suppression de la note:",U),t.error("Erreur lors de la suppression de la note")}finally{o.value=!1,f.value=null}}function I(){t.success("Ordre des colonnes mis  jour")}async function j(U,R){console.log("Drag change event:",U);try{if(U.added){const{element:te}=U.added;r.moveNote(te.id,R);const me=D.value(R).map(We=>We.id);r.reorderNotes(R,me);const xe=r.getColumnById(R);t.success(`Note dplace vers ${(xe==null?void 0:xe.title)||"une autre colonne"}`),await H(te.id,{columnId:R})}if(U.moved){const te=D.value(R),re=te.map(me=>me.id);if(r.reorderNotes(R,re),t.success("Ordre des notes mis  jour"),y.value)for(const[me,xe]of te.entries())await H(xe.id,{order:me})}U.removed}catch(te){console.error("Erreur lors du drag and drop:",te),t.error("Une erreur est survenue lors du dplacement de la note")}}async function H(U,R){try{const te=r.notes.find(re=>re.id===U);if(!te)return;await lc.updateNote(U,{...te,...R,updatedAt:new Date().toISOString()})}catch(te){throw console.error("Erreur lors de la mise  jour de la note dans le backend:",te),te}}return(U,R)=>{var te,re;return $e(),qe("div",GU,[P("div",qU,[P("div",{class:"sm:flex sm:items-center"},[R[6]||(R[6]=P("div",{class:"sm:flex-auto"},[P("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),P("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),P("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[P("button",{onClick:ae,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Crer une note ")])]),P("div",WU,[P("div",ZU,[P("div",null,[R[7]||(R[7]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),In(P("input",{type:"text",id:"search","onUpdate:modelValue":R[0]||(R[0]=me=>E.search=me),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ni,E.search]])]),P("div",null,[R[9]||(R[9]=P("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),In(P("select",{id:"date","onUpdate:modelValue":R[1]||(R[1]=me=>E.date=me),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},R[8]||(R[8]=[P("option",{value:""},"Toutes les dates",-1),P("option",{value:"today"},"Aujourd'hui",-1),P("option",{value:"week"},"Cette semaine",-1),P("option",{value:"month"},"Ce mois",-1)]),512),[[lo,E.date]])]),P("div",null,[R[11]||(R[11]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),In(P("select",{id:"accessLevel","onUpdate:modelValue":R[2]||(R[2]=me=>E.accessLevel=me),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[R[10]||(R[10]=P("option",{value:""},"Tous les niveaux",-1)),($e(),qe(Rn,null,Rr(_,me=>P("option",{key:me.id,value:me.id},Zt(me.title),9,KU)),64))],512),[[lo,E.accessLevel]])])])]),s.value?($e(),qe("div",YU,R[12]||(R[12]=[P("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),P("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):($e(),qe("div",JU,[T.value.length===0&&x.value.length===0?($e(),qe("div",XU,R[13]||(R[13]=[P("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouve",-1)]))):dn("",!0),fi(Wn(Qb),{modelValue:x.value,"onUpdate:modelValue":R[3]||(R[3]=me=>x.value=me),class:"flex space-x-4 min-w-max","item-key":"id",handle:".column-drag-handle",onEnd:I,animation:150},{item:Hl(({element:me})=>[P("div",QU,[P("div",eV,[P("div",{class:"p-3 flex items-center justify-between column-drag-handle cursor-move no-select",style:pu({backgroundColor:me.color+"20",borderBottom:"2px solid "+me.color})},[P("div",tV,[R[14]||(R[14]=P("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),P("h3",{class:"text-sm font-semibold",style:pu({color:me.color})},Zt(me.title),5)]),P("div",nV,[P("span",rV,Zt(D.value(me.id).length),1)])],4),P("div",iV,[P("div",oV,[fi(Wn(Qb),{list:D.value(me.id),class:"space-y-2",group:"notes","item-key":"id",handle:".note-drag-handle",onChange:xe=>j(xe,me.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging"},Jw({item:Hl(({element:xe})=>[P("div",sV,[P("div",aV,[P("div",lV,[R[15]||(R[15]=P("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),P("h4",uV,Zt(xe.title),1)]),P("div",null,[P("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:pu({backgroundColor:$(xe.accessLevel)+"20",color:$(xe.accessLevel)})},Zt(O(xe.accessLevel)),5)])]),P("div",cV,[P("p",fV,Zt(xe.description),1)]),P("div",hV,[P("span",dV,Zt(X(xe.updatedAt)),1),P("div",pV,[P("button",{onClick:We=>Le(xe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},R[16]||(R[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,gV),P("button",{onClick:We=>ue(xe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},R[17]||(R[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,mV),P("button",{onClick:We=>W(xe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},R[18]||(R[18]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,vV),P("button",{onClick:We=>Y(xe),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},R[19]||(R[19]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,yV)])])])]),_:2},[D.value(me.id).length===0?{name:"footer",fn:Hl(()=>[R[20]||(R[20]=P("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1))]),key:"0"}:void 0]),1032,["list","onChange"])])])])])]),_:1},8,["modelValue"])]))]),o.value?($e(),qe("div",_V,[P("div",bV,[R[22]||(R[22]=P("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),P("div",wV,[R[21]||(R[21]=uc('<div class="p-4 md:p-6" data-v-946171ed><div class="flex items-start" data-v-946171ed><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-946171ed><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-946171ed><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-946171ed></path></svg></div><div class="ml-4 flex-1" data-v-946171ed><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-946171ed> Supprimer la note </h3><div class="mt-2" data-v-946171ed><p class="text-sm text-gray-500" data-v-946171ed> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),P("div",xV,[P("button",{onClick:F,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),P("button",{onClick:R[4]||(R[4]=me=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):dn("",!0),u.value?($e(),$a(hx,{key:1,note:d.value,"is-new-note":!((te=d.value)!=null&&te.id),location:(re=d.value)==null?void 0:re.location,onClose:R[5]||(R[5]=me=>u.value=!1),onSave:V},null,8,["note","is-new-note","location"])):dn("",!0)])}}}),SV=rm(LV,[["__scopeId","data-v-946171ed"]]),Kx=l8({history:jT("/"),routes:[{path:"/",name:"home",component:$b,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:oU,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:kz,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Yf(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:_D,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Yf(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Yf(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:eD,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:SV,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:$b,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Yf(()=>import("./NotFoundView.js"),[])}]});Kx.beforeEach(async(e,n,t)=>{var u,f;const r=ma();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,s=(u=r.user)==null?void 0:u.must_change_password,o=(f=r.user)==null?void 0:f.user_type;if(e.meta.requiresAuth&&!i){t("/login");return}if(i&&s&&e.name!=="changePassword"){t({name:"changePassword"});return}if(e.name==="changePassword"&&!s){t({name:"home"});return}if(e.meta.allowedRoles&&o&&!e.meta.allowedRoles.includes(o)){t({name:"home"});return}if(e.meta.requiresGuest&&i){t({name:"home"});return}t()});const xy=u0(NN),Yx=m6();xy.use(Yx);xy.use(Kx);const CV=ma(Yx);window.INITIAL_STATE&&CV.initialize(window.INITIAL_STATE);xy.mount("#app");export{Ji as _,Kl as a,P as b,qe as c,cs as d,dn as e,Wn as f,Ei as g,In as h,$e as i,uc as j,fi as k,Hl as l,Kw as m,zi as n,$s as o,GV as p,Np as q,Ft as r,ea as s,Zt as t,ma as u,ni as v,Lf as w,fy as x};

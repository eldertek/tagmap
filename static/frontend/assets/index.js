var SD=Object.defineProperty;var CD=(t,e,n)=>e in t?SD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xe=(t,e,n)=>CD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const wi={},hp=[],$u=()=>{},ED=()=>!1,Em=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),r_=t=>t.startsWith("onUpdate:"),os=Object.assign,i_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},PD=Object.prototype.hasOwnProperty,Ri=(t,e)=>PD.call(t,e),Xn=Array.isArray,fp=t=>Bp(t)==="[object Map]",xf=t=>Bp(t)==="[object Set]",Cx=t=>Bp(t)==="[object Date]",MD=t=>Bp(t)==="[object RegExp]",Lr=t=>typeof t=="function",ms=t=>typeof t=="string",wc=t=>typeof t=="symbol",Zi=t=>t!==null&&typeof t=="object",s_=t=>(Zi(t)||Lr(t))&&Lr(t.then)&&Lr(t.catch),CL=Object.prototype.toString,Bp=t=>CL.call(t),kD=t=>Bp(t).slice(8,-1),hy=t=>Bp(t)==="[object Object]",o_=t=>ms(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,pp=dy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fy=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},AD=/-(\w)/g,Ma=fy(t=>t.replace(AD,(e,n)=>n?n.toUpperCase():"")),TD=/\B([A-Z])/g,Ul=fy(t=>t.replace(TD,"-$1").toLowerCase()),Pm=fy(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ng=fy(t=>t?`on${Pm(t)}`:""),_l=(t,e)=>!Object.is(t,e),gp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},EL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Lv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Sv=t=>{const e=ms(t)?Number(t):NaN;return isNaN(e)?t:e};let Ex;const py=()=>Ex||(Ex=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),DD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",ND=dy(DD);function ql(t){if(Xn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=ms(r)?RD(r):ql(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(ms(t)||Zi(t))return t}const OD=/;(?![^(]*\))/g,ID=/:([^]+)/,BD=/\/\*[^]*?\*\//g;function RD(t){const e={};return t.replace(BD,"").split(OD).forEach(n=>{if(n){const r=n.split(ID);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function gi(t){let e="";if(ms(t))e=t;else if(Xn(t))for(let n=0;n<t.length;n++){const r=gi(t[n]);r&&(e+=r+" ")}else if(Zi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function FD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ms(e)&&(t.class=gi(e)),n&&(t.style=ql(n)),t}const jD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zD=dy(jD);function PL(t){return!!t||t===""}function $D(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=_h(t[r],e[r]);return n}function _h(t,e){if(t===e)return!0;let n=Cx(t),r=Cx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=wc(t),r=wc(e),n||r)return t===e;if(n=Xn(t),r=Xn(e),n||r)return n&&r?$D(t,e):!1;if(n=Zi(t),r=Zi(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!_h(t[o],e[o]))return!1}}return String(t)===String(e)}function gy(t,e){return t.findIndex(n=>_h(n,e))}const ML=t=>!!(t&&t.__v_isRef===!0),kt=t=>ms(t)?t:t==null?"":Xn(t)||Zi(t)&&(t.toString===CL||!Lr(t.toString))?ML(t)?kt(t.value):JSON.stringify(t,kL,2):String(t),kL=(t,e)=>ML(e)?kL(t,e.value):fp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[P1(r,s)+" =>"]=i,n),{})}:xf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>P1(n))}:wc(e)?P1(e):Zi(e)&&!Xn(e)&&!hy(e)?String(e):e,P1=(t,e="")=>{var n;return wc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bl;class a_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bl,!e&&bl&&(this.index=(bl.scopes||(bl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=bl;try{return bl=this,e()}finally{bl=n}}}on(){bl=this}off(){bl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function l_(t){return new a_(t)}function u_(){return bl}function AL(t,e=!1){bl&&bl.cleanups.push(t)}let ps;const M1=new WeakSet;class rm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bl&&bl.active&&bl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,M1.has(this)&&(M1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||DL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Px(this),NL(this);const e=ps,n=bc;ps=this,bc=!0;try{return this.fn()}finally{OL(this),ps=e,bc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)h_(e);this.deps=this.depsTail=void 0,Px(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?M1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){N2(this)&&this.run()}get dirty(){return N2(this)}}let TL=0,Og,Ig;function DL(t,e=!1){if(t.flags|=8,e){t.next=Ig,Ig=t;return}t.next=Og,Og=t}function c_(){TL++}function d_(){if(--TL>0)return;if(Ig){let e=Ig;for(Ig=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Og;){let e=Og;for(Og=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function NL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function OL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),h_(r),VD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function N2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(IL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function IL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===im))return;t.globalVersion=im;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!N2(t)){t.flags&=-3;return}const n=ps,r=bc;ps=t,bc=!0;try{NL(t);const i=t.fn(t._value);(e.version===0||_l(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ps=n,bc=r,OL(t),t.flags&=-3}}function h_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)h_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function VD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function UD(t,e){t.effect instanceof rm&&(t=t.effect.fn);const n=new rm(t);e&&os(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function HD(t){t.effect.stop()}let bc=!0;const BL=[];function Ph(){BL.push(bc),bc=!1}function Mh(){const t=BL.pop();bc=t===void 0?!0:t}function Px(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ps;ps=void 0;try{e()}finally{ps=n}}}let im=0;class GD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class my{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ps||!bc||ps===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ps)n=this.activeLink=new GD(ps,this),ps.deps?(n.prevDep=ps.depsTail,ps.depsTail.nextDep=n,ps.depsTail=n):ps.deps=ps.depsTail=n,RL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ps.depsTail,n.nextDep=void 0,ps.depsTail.nextDep=n,ps.depsTail=n,ps.deps===n&&(ps.deps=r)}return n}trigger(e){this.version++,im++,this.notify(e)}notify(e){c_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{d_()}}}function RL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)RL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Cv=new WeakMap,lf=Symbol(""),O2=Symbol(""),sm=Symbol("");function Ka(t,e,n){if(bc&&ps){let r=Cv.get(t);r||Cv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new my),i.map=r,i.key=n),i.track()}}function Ed(t,e,n,r,i,s){const o=Cv.get(t);if(!o){im++;return}const a=l=>{l&&l.trigger()};if(c_(),e==="clear")o.forEach(a);else{const l=Xn(t),c=l&&o_(n);if(l&&n==="length"){const h=Number(r);o.forEach((p,v)=>{(v==="length"||v===sm||!wc(v)&&v>=h)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(sm)),e){case"add":l?c&&a(o.get("length")):(a(o.get(lf)),fp(t)&&a(o.get(O2)));break;case"delete":l||(a(o.get(lf)),fp(t)&&a(o.get(O2)));break;case"set":fp(t)&&a(o.get(lf));break}}d_()}function WD(t,e){const n=Cv.get(t);return n&&n.get(e)}function Hf(t){const e=_i(t);return e===t?e:(Ka(e,"iterate",sm),yu(t)?e:e.map(Za))}function vy(t){return Ka(t=_i(t),"iterate",sm),t}const qD={__proto__:null,[Symbol.iterator](){return k1(this,Symbol.iterator,Za)},concat(...t){return Hf(this).concat(...t.map(e=>Xn(e)?Hf(e):e))},entries(){return k1(this,"entries",t=>(t[1]=Za(t[1]),t))},every(t,e){return vd(this,"every",t,e,void 0,arguments)},filter(t,e){return vd(this,"filter",t,e,n=>n.map(Za),arguments)},find(t,e){return vd(this,"find",t,e,Za,arguments)},findIndex(t,e){return vd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return vd(this,"findLast",t,e,Za,arguments)},findLastIndex(t,e){return vd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return vd(this,"forEach",t,e,void 0,arguments)},includes(...t){return A1(this,"includes",t)},indexOf(...t){return A1(this,"indexOf",t)},join(t){return Hf(this).join(t)},lastIndexOf(...t){return A1(this,"lastIndexOf",t)},map(t,e){return vd(this,"map",t,e,void 0,arguments)},pop(){return Zp(this,"pop")},push(...t){return Zp(this,"push",t)},reduce(t,...e){return Mx(this,"reduce",t,e)},reduceRight(t,...e){return Mx(this,"reduceRight",t,e)},shift(){return Zp(this,"shift")},some(t,e){return vd(this,"some",t,e,void 0,arguments)},splice(...t){return Zp(this,"splice",t)},toReversed(){return Hf(this).toReversed()},toSorted(t){return Hf(this).toSorted(t)},toSpliced(...t){return Hf(this).toSpliced(...t)},unshift(...t){return Zp(this,"unshift",t)},values(){return k1(this,"values",Za)}};function k1(t,e,n){const r=vy(t),i=r[e]();return r!==t&&!yu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const YD=Array.prototype;function vd(t,e,n,r,i,s){const o=vy(t),a=o!==t&&!yu(t),l=o[e];if(l!==YD[e]){const p=l.apply(t,s);return a?Za(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,Za(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const h=l.call(o,c,r);return a&&i?i(h):h}function Mx(t,e,n,r){const i=vy(t);let s=n;return i!==t&&(yu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Za(a),l,t)}),i[e](s,...r)}function A1(t,e,n){const r=_i(t);Ka(r,"iterate",sm);const i=r[e](...n);return(i===-1||i===!1)&&_y(n[0])?(n[0]=_i(n[0]),r[e](...n)):i}function Zp(t,e,n=[]){Ph(),c_();const r=_i(t)[e].apply(t,n);return d_(),Mh(),r}const KD=dy("__proto__,__v_isRef,__isVue"),FL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(wc));function ZD(t){wc(t)||(t=String(t));const e=_i(this);return Ka(e,"has",t),e.hasOwnProperty(t)}class jL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?GL:HL:s?UL:VL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Xn(e);if(!i){let l;if(o&&(l=qD[n]))return l;if(n==="hasOwnProperty")return ZD}const a=Reflect.get(e,n,eo(e)?e:r);return(wc(n)?FL.has(n):KD(n))||(i||Ka(e,"get",n),s)?a:eo(a)?o&&o_(n)?a:a.value:Zi(a)?i?hc(a):Zl(a):a}}class zL extends jL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=wh(s);if(!yu(r)&&!wh(r)&&(s=_i(s),r=_i(r)),!Xn(e)&&eo(s)&&!eo(r))return l?!1:(s.value=r,!0)}const o=Xn(e)&&o_(n)?Number(n)<e.length:Ri(e,n),a=Reflect.set(e,n,r,eo(e)?e:i);return e===_i(i)&&(o?_l(r,s)&&Ed(e,"set",n,r):Ed(e,"add",n,r)),a}deleteProperty(e,n){const r=Ri(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ed(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!wc(n)||!FL.has(n))&&Ka(e,"has",n),r}ownKeys(e){return Ka(e,"iterate",Xn(e)?"length":lf),Reflect.ownKeys(e)}}class $L extends jL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const XD=new zL,JD=new $L,QD=new zL(!0),e8=new $L(!0),I2=t=>t,l0=t=>Reflect.getPrototypeOf(t);function t8(t,e,n){return function(...r){const i=this.__v_raw,s=_i(i),o=fp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),h=n?I2:e?B2:Za;return!e&&Ka(s,"iterate",l?O2:lf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[h(p[0]),h(p[1])]:h(p),done:v}},[Symbol.iterator](){return this}}}}function u0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function n8(t,e){const n={get(i){const s=this.__v_raw,o=_i(s),a=_i(i);t||(_l(i,a)&&Ka(o,"get",i),Ka(o,"get",a));const{has:l}=l0(o),c=e?I2:t?B2:Za;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ka(_i(i),"iterate",lf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=_i(s),a=_i(i);return t||(_l(i,a)&&Ka(o,"has",i),Ka(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=_i(a),c=e?I2:t?B2:Za;return!t&&Ka(l,"iterate",lf),a.forEach((h,p)=>i.call(s,c(h),c(p),o))}};return os(n,t?{add:u0("add"),set:u0("set"),delete:u0("delete"),clear:u0("clear")}:{add(i){!e&&!yu(i)&&!wh(i)&&(i=_i(i));const s=_i(this);return l0(s).has.call(s,i)||(s.add(i),Ed(s,"add",i,i)),this},set(i,s){!e&&!yu(s)&&!wh(s)&&(s=_i(s));const o=_i(this),{has:a,get:l}=l0(o);let c=a.call(o,i);c||(i=_i(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?_l(s,h)&&Ed(o,"set",i,s):Ed(o,"add",i,s),this},delete(i){const s=_i(this),{has:o,get:a}=l0(s);let l=o.call(s,i);l||(i=_i(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ed(s,"delete",i,void 0),c},clear(){const i=_i(this),s=i.size!==0,o=i.clear();return s&&Ed(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=t8(i,t,e)}),n}function yy(t,e){const n=n8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ri(n,i)&&i in r?n:r,i,s)}const r8={get:yy(!1,!1)},i8={get:yy(!1,!0)},s8={get:yy(!0,!1)},o8={get:yy(!0,!0)},VL=new WeakMap,UL=new WeakMap,HL=new WeakMap,GL=new WeakMap;function a8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function l8(t){return t.__v_skip||!Object.isExtensible(t)?0:a8(kD(t))}function Zl(t){return wh(t)?t:by(t,!1,XD,r8,VL)}function f_(t){return by(t,!1,QD,i8,UL)}function hc(t){return by(t,!0,JD,s8,HL)}function u8(t){return by(t,!0,e8,o8,GL)}function by(t,e,n,r,i){if(!Zi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=l8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zc(t){return wh(t)?Zc(t.__v_raw):!!(t&&t.__v_isReactive)}function wh(t){return!!(t&&t.__v_isReadonly)}function yu(t){return!!(t&&t.__v_isShallow)}function _y(t){return t?!!t.__v_raw:!1}function _i(t){const e=t&&t.__v_raw;return e?_i(e):t}function wy(t){return!Ri(t,"__v_skip")&&Object.isExtensible(t)&&EL(t,"__v_skip",!0),t}const Za=t=>Zi(t)?Zl(t):t,B2=t=>Zi(t)?hc(t):t;function eo(t){return t?t.__v_isRef===!0:!1}function Lt(t){return WL(t,!1)}function p_(t){return WL(t,!0)}function WL(t,e){return eo(t)?t:new c8(t,e)}class c8{constructor(e,n){this.dep=new my,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:_i(e),this._value=n?e:Za(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||yu(e)||wh(e);e=r?e:_i(e),_l(e,n)&&(this._rawValue=e,this._value=r?e:Za(e),this.dep.trigger())}}function d8(t){t.dep&&t.dep.trigger()}function Bn(t){return eo(t)?t.value:t}function h8(t){return Lr(t)?t():Bn(t)}const f8={get:(t,e,n)=>e==="__v_raw"?t:Bn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return eo(i)&&!eo(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function g_(t){return Zc(t)?t:new Proxy(t,f8)}class p8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new my,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function qL(t){return new p8(t)}function YL(t){const e=Xn(t)?new Array(t.length):{};for(const n in t)e[n]=KL(t,n);return e}class g8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return WD(_i(this._object),this._key)}}class m8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function v8(t,e,n){return eo(t)?t:Lr(t)?new m8(t):Zi(t)&&arguments.length>1?KL(t,e,n):Lt(t)}function KL(t,e,n){const r=t[e];return eo(r)?r:new g8(t,e,n)}class y8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new my(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=im-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ps!==this)return DL(this,!0),!0}get value(){const e=this.dep.track();return IL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function b8(t,e,n=!1){let r,i;return Lr(t)?r=t:(r=t.get,i=t.set),new y8(r,i,n)}const _8={GET:"get",HAS:"has",ITERATE:"iterate"},w8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},c0={},Ev=new WeakMap;let nh;function x8(){return nh}function ZL(t,e=!1,n=nh){if(n){let r=Ev.get(n);r||Ev.set(n,r=[]),r.push(t)}}function L8(t,e,n=wi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=Y=>i?Y:yu(Y)||i===!1||i===0?Pd(Y,1):Pd(Y);let h,p,v,m,x=!1,E=!1;if(eo(t)?(p=()=>t.value,x=yu(t)):Zc(t)?(p=()=>c(t),x=!0):Xn(t)?(E=!0,x=t.some(Y=>Zc(Y)||yu(Y)),p=()=>t.map(Y=>{if(eo(Y))return Y.value;if(Zc(Y))return c(Y);if(Lr(Y))return l?l(Y,2):Y()})):Lr(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){Ph();try{v()}finally{Mh()}}const Y=nh;nh=h;try{return l?l(t,3,[m]):t(m)}finally{nh=Y}}:p=$u,e&&i){const Y=p,ne=i===!0?1/0:i;p=()=>Pd(Y(),ne)}const k=u_(),T=()=>{h.stop(),k&&k.active&&i_(k.effects,h)};if(s&&e){const Y=e;e=(...ne)=>{Y(...ne),T()}}let A=E?new Array(t.length).fill(c0):c0;const z=Y=>{if(!(!(h.flags&1)||!h.dirty&&!Y))if(e){const ne=h.run();if(i||x||(E?ne.some((ge,pe)=>_l(ge,A[pe])):_l(ne,A))){v&&v();const ge=nh;nh=h;try{const pe=[ne,A===c0?void 0:E&&A[0]===c0?[]:A,m];l?l(e,3,pe):e(...pe),A=ne}finally{nh=ge}}}else h.run()};return a&&a(z),h=new rm(p),h.scheduler=o?()=>o(z,!1):z,m=Y=>ZL(Y,!1,h),v=h.onStop=()=>{const Y=Ev.get(h);if(Y){if(l)l(Y,4);else for(const ne of Y)ne();Ev.delete(h)}},e?r?z(!0):A=h.run():o?o(z.bind(null,!0),!0):h.run(),T.pause=h.pause.bind(h),T.resume=h.resume.bind(h),T.stop=T,T}function Pd(t,e=1/0,n){if(e<=0||!Zi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,eo(t))Pd(t.value,e,n);else if(Xn(t))for(let r=0;r<t.length;r++)Pd(t[r],e,n);else if(xf(t)||fp(t))t.forEach(r=>{Pd(r,e,n)});else if(hy(t)){for(const r in t)Pd(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pd(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const XL=[];function S8(t){XL.push(t)}function C8(){XL.pop()}function E8(t,e){}const P8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},M8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Rp(t,e,n,r){try{return r?t(...r):t()}catch(i){Lf(i,e,n)}}function Uu(t,e,n,r){if(Lr(t)){const i=Rp(t,e,n,r);return i&&s_(i)&&i.catch(s=>{Lf(s,e,n)}),i}if(Xn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Uu(t[s],e,n,r));return i}}function Lf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||wi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,l,c)===!1)return}a=a.parent}if(s){Ph(),Rp(s,null,10,[t,l,c]),Mh();return}}k8(t,n,i,r,o)}function k8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const wl=[];let $c=-1;const mp=[];let rh=null,tp=0;const JL=Promise.resolve();let Pv=null;function Ko(t){const e=Pv||JL;return t?e.then(this?t.bind(this):t):e}function A8(t){let e=$c+1,n=wl.length;for(;e<n;){const r=e+n>>>1,i=wl[r],s=am(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function m_(t){if(!(t.flags&1)){const e=am(t),n=wl[wl.length-1];!n||!(t.flags&2)&&e>=am(n)?wl.push(t):wl.splice(A8(e),0,t),t.flags|=1,QL()}}function QL(){Pv||(Pv=JL.then(eS))}function om(t){Xn(t)?mp.push(...t):rh&&t.id===-1?rh.splice(tp+1,0,t):t.flags&1||(mp.push(t),t.flags|=1),QL()}function kx(t,e,n=$c+1){for(;n<wl.length;n++){const r=wl[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;wl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Mv(t){if(mp.length){const e=[...new Set(mp)].sort((n,r)=>am(n)-am(r));if(mp.length=0,rh){rh.push(...e);return}for(rh=e,tp=0;tp<rh.length;tp++){const n=rh[tp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rh=null,tp=0}}const am=t=>t.id==null?t.flags&2?-1:1/0:t.id;function eS(t){try{for($c=0;$c<wl.length;$c++){const e=wl[$c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Rp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$c<wl.length;$c++){const e=wl[$c];e&&(e.flags&=-2)}$c=-1,wl.length=0,Mv(),Pv=null,(wl.length||mp.length)&&eS()}}let np,d0=[];function tS(t,e){var n,r;np=t,np?(np.enabled=!0,d0.forEach(({event:i,args:s})=>np.emit(i,...s)),d0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{tS(s,e)}),setTimeout(()=>{np||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,d0=[])},3e3)):d0=[]}let Xo=null,xy=null;function lm(t){const e=Xo;return Xo=t,xy=t&&t.type.__scopeId||null,e}function T8(t){xy=t}function D8(){xy=null}const N8=t=>zu;function zu(t,e=Xo,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&H2(-1);const s=lm(e);let o;try{o=t(...i)}finally{lm(s),r._d&&H2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Sn(t,e){if(Xo===null)return t;const n=Am(Xo),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=wi]=e[i];s&&(Lr(s)&&(s={mounted:s,updated:s}),s.deep&&Pd(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Uc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ph(),Uu(l,n,8,[t.el,a,t,e]),Mh())}}const nS=Symbol("_vte"),rS=t=>t.__isTeleport,Bg=t=>t&&(t.disabled||t.disabled===""),Ax=t=>t&&(t.defer||t.defer===""),Tx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Dx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,R2=(t,e)=>{const n=t&&t.to;return ms(n)?e?e(n):null:n},iS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:h,pc:p,pbc:v,o:{insert:m,querySelector:x,createText:E,createComment:k}}=c,T=Bg(e.props);let{shapeFlag:A,children:z,dynamicChildren:Y}=e;if(t==null){const ne=e.el=E(""),ge=e.anchor=E("");m(ne,n,r),m(ge,n,r);const pe=(j,J)=>{A&16&&(i&&i.isCE&&(i.ce._teleportTarget=j),h(z,j,J,i,s,o,a,l))},O=()=>{const j=e.target=R2(e.props,x),J=sS(j,e,E,m);j&&(o!=="svg"&&Tx(j)?o="svg":o!=="mathml"&&Dx(j)&&(o="mathml"),T||(pe(j,J),Y0(e,!1)))};T&&(pe(n,ge),Y0(e,!0)),Ax(e.props)?Yo(()=>{O(),e.el.__isMounted=!0},s):O()}else{if(Ax(e.props)&&!t.el.__isMounted){Yo(()=>{iS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const ne=e.anchor=t.anchor,ge=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,O=Bg(t.props),j=O?n:ge,J=O?ne:pe;if(o==="svg"||Tx(ge)?o="svg":(o==="mathml"||Dx(ge))&&(o="mathml"),Y?(v(t.dynamicChildren,Y,j,i,s,o,a),E_(t,e,!0)):l||p(t,e,j,J,i,s,o,a,!1),T)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):h0(e,n,ne,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const V=e.target=R2(e.props,x);V&&h0(e,V,null,c,0)}else O&&h0(e,ge,pe,c,1);Y0(e,T)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:h,target:p,props:v}=t;if(p&&(i(c),i(h)),s&&i(l),o&16){const m=s||!Bg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,m,!!E.dynamicChildren)}}},move:h0,hydrate:O8};function h0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:h}=t,p=s===2;if(p&&r(o,e,n),(!p||Bg(h))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function O8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:h}},p){const v=e.target=R2(e.props,l);if(v){const m=Bg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||sS(v,e,h,c),p(x&&o(x),e,v,n,r,i,s)}Y0(e,m)}return e.anchor&&o(e.anchor)}const rp=iS;function Y0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function sS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[nS]=s,t&&(r(i,t),r(s,t)),s}const ih=Symbol("_leaveCb"),f0=Symbol("_enterCb");function v_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return no(()=>{t.isMounted=!0}),kh(()=>{t.isUnmounting=!0}),t}const Nu=[Function,Array],y_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Nu,onEnter:Nu,onAfterEnter:Nu,onEnterCancelled:Nu,onBeforeLeave:Nu,onLeave:Nu,onAfterLeave:Nu,onLeaveCancelled:Nu,onBeforeAppear:Nu,onAppear:Nu,onAfterAppear:Nu,onAppearCancelled:Nu},oS=t=>{const e=t.subTree;return e.component?oS(e.component):e},I8={name:"BaseTransition",props:y_,setup(t,{slots:e}){const n=Wu(),r=v_();return()=>{const i=e.default&&Ly(e.default(),!0);if(!i||!i.length)return;const s=aS(i),o=_i(t),{mode:a}=o;if(r.isLeaving)return T1(s);const l=Nx(s);if(!l)return T1(s);let c=Lp(l,o,r,n,p=>c=p);l.type!==Uo&&Id(l,c);let h=n.subTree&&Nx(n.subTree);if(h&&h.type!==Uo&&!mc(l,h)&&oS(n).type!==Uo){let p=Lp(h,o,r,n);if(Id(h,p),a==="out-in"&&l.type!==Uo)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,h=void 0},T1(s);a==="in-out"&&l.type!==Uo?p.delayLeave=(v,m,x)=>{const E=uS(r,h);E[String(h.key)]=h,v[ih]=()=>{m(),v[ih]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function aS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Uo){e=n;break}}return e}const lS=I8;function uS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Lp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:k,onAppear:T,onAfterAppear:A,onAppearCancelled:z}=e,Y=String(t.key),ne=uS(n,t),ge=(j,J)=>{j&&Uu(j,r,9,J)},pe=(j,J)=>{const V=J[1];ge(j,J),Xn(j)?j.every(B=>B.length<=1)&&V():j.length<=1&&V()},O={mode:o,persisted:a,beforeEnter(j){let J=l;if(!n.isMounted)if(s)J=k||l;else return;j[ih]&&j[ih](!0);const V=ne[Y];V&&mc(t,V)&&V.el[ih]&&V.el[ih](),ge(J,[j])},enter(j){let J=c,V=h,B=p;if(!n.isMounted)if(s)J=T||c,V=A||h,B=z||p;else return;let H=!1;const $=j[f0]=R=>{H||(H=!0,R?ge(B,[j]):ge(V,[j]),O.delayedLeave&&O.delayedLeave(),j[f0]=void 0)};J?pe(J,[j,$]):$()},leave(j,J){const V=String(t.key);if(j[f0]&&j[f0](!0),n.isUnmounting)return J();ge(v,[j]);let B=!1;const H=j[ih]=$=>{B||(B=!0,J(),$?ge(E,[j]):ge(x,[j]),j[ih]=void 0,ne[V]===t&&delete ne[V])};ne[V]=t,m?pe(m,[j,H]):H()},clone(j){const J=Lp(j,e,n,r,i);return i&&i(J),J}};return O}function T1(t){if(Mm(t))return t=ed(t),t.children=null,t}function Nx(t){if(!Mm(t))return rS(t.type)&&t.children?aS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Lr(n.default))return n.default()}}function Id(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Id(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ly(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===bn?(o.patchFlag&128&&i++,r=r.concat(Ly(o.children,e,a))):(e||o.type!==Uo)&&r.push(a!=null?ed(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ss(t,e){return Lr(t)?os({name:t.name},e,{setup:t}):t}function B8(){const t=Wu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function b_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function R8(t){const e=Wu(),n=p_(null);if(e){const i=e.refs===wi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function um(t,e,n,r,i=!1){if(Xn(t)){t.forEach((x,E)=>um(x,e&&(Xn(e)?e[E]:e),n,r,i));return}if(mh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&um(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Am(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,h=a.refs===wi?a.refs={}:a.refs,p=a.setupState,v=_i(p),m=p===wi?()=>!1:x=>Ri(v,x);if(c!=null&&c!==l&&(ms(c)?(h[c]=null,m(c)&&(p[c]=null)):eo(c)&&(c.value=null)),Lr(l))Rp(l,a,12,[o,h]);else{const x=ms(l),E=eo(l);if(x||E){const k=()=>{if(t.f){const T=x?m(l)?p[l]:h[l]:l.value;i?Xn(T)&&i_(T,s):Xn(T)?T.includes(s)||T.push(s):x?(h[l]=[s],m(l)&&(p[l]=h[l])):(l.value=[s],t.k&&(h[t.k]=l.value))}else x?(h[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(h[t.k]=o))};o?(k.id=-1,Yo(k,n)):k()}}}let Ox=!1;const Gf=()=>{Ox||(console.error("Hydration completed but contains mismatches."),Ox=!0)},F8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",j8=t=>t.namespaceURI.includes("MathML"),p0=t=>{if(t.nodeType===1){if(F8(t))return"svg";if(j8(t))return"mathml"}},up=t=>t.nodeType===8;function z8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,h=(z,Y)=>{if(!Y.hasChildNodes()){n(null,z,Y),Mv(),Y._vnode=z;return}p(Y.firstChild,z,null,null,null),Mv(),Y._vnode=z},p=(z,Y,ne,ge,pe,O=!1)=>{O=O||!!Y.dynamicChildren;const j=up(z)&&z.data==="[",J=()=>E(z,Y,ne,ge,pe,j),{type:V,ref:B,shapeFlag:H,patchFlag:$}=Y;let R=z.nodeType;Y.el=z,$===-2&&(O=!1,Y.dynamicChildren=null);let I=null;switch(V){case vh:R!==3?Y.children===""?(l(Y.el=i(""),o(z),z),I=z):I=J():(z.data!==Y.children&&(Gf(),z.data=Y.children),I=s(z));break;case Uo:A(z)?(I=s(z),T(Y.el=z.content.firstChild,z,ne)):R!==8||j?I=J():I=s(z);break;case cf:if(j&&(z=s(z),R=z.nodeType),R===1||R===3){I=z;const X=!Y.children.length;for(let K=0;K<Y.staticCount;K++)X&&(Y.children+=I.nodeType===1?I.outerHTML:I.data),K===Y.staticCount-1&&(Y.anchor=I),I=s(I);return j?s(I):I}else J();break;case bn:j?I=x(z,Y,ne,ge,pe,O):I=J();break;default:if(H&1)(R!==1||Y.type.toLowerCase()!==z.tagName.toLowerCase())&&!A(z)?I=J():I=v(z,Y,ne,ge,pe,O);else if(H&6){Y.slotScopeIds=pe;const X=o(z);if(j?I=k(z):up(z)&&z.data==="teleport start"?I=k(z,z.data,"teleport end"):I=s(z),e(Y,X,null,ne,ge,p0(X),O),mh(Y)&&!Y.type.__asyncResolved){let K;j?(K=ti(bn),K.anchor=I?I.previousSibling:X.lastChild):K=z.nodeType===3?Gr(""):ti("div"),K.el=z,Y.component.subTree=K}}else H&64?R!==8?I=J():I=Y.type.hydrate(z,Y,ne,ge,pe,O,t,m):H&128&&(I=Y.type.hydrate(z,Y,ne,ge,p0(o(z)),pe,O,t,p))}return B!=null&&um(B,null,ge,Y),I},v=(z,Y,ne,ge,pe,O)=>{O=O||!!Y.dynamicChildren;const{type:j,props:J,patchFlag:V,shapeFlag:B,dirs:H,transition:$}=Y,R=j==="input"||j==="option";if(R||V!==-1){H&&Uc(Y,null,ne,"created");let I=!1;if(A(z)){I=BS(null,$)&&ne&&ne.vnode.props&&ne.vnode.props.appear;const K=z.content.firstChild;I&&$.beforeEnter(K),T(K,z,ne),Y.el=z=K}if(B&16&&!(J&&(J.innerHTML||J.textContent))){let K=m(z.firstChild,Y,z,ne,ge,pe,O);for(;K;){g0(z,1)||Gf();const _e=K;K=K.nextSibling,a(_e)}}else if(B&8){let K=Y.children;K[0]===`
`&&(z.tagName==="PRE"||z.tagName==="TEXTAREA")&&(K=K.slice(1)),z.textContent!==K&&(g0(z,0)||Gf(),z.textContent=Y.children)}if(J){if(R||!O||V&48){const K=z.tagName.includes("-");for(const _e in J)(R&&(_e.endsWith("value")||_e==="indeterminate")||Em(_e)&&!pp(_e)||_e[0]==="."||K)&&r(z,_e,null,J[_e],void 0,ne)}else if(J.onClick)r(z,"onClick",null,J.onClick,void 0,ne);else if(V&4&&Zc(J.style))for(const K in J.style)J.style[K]}let X;(X=J&&J.onVnodeBeforeMount)&&$l(X,ne,Y),H&&Uc(Y,null,ne,"beforeMount"),((X=J&&J.onVnodeMounted)||H||I)&&GS(()=>{X&&$l(X,ne,Y),I&&$.enter(z),H&&Uc(Y,null,ne,"mounted")},ge)}return z.nextSibling},m=(z,Y,ne,ge,pe,O,j)=>{j=j||!!Y.dynamicChildren;const J=Y.children,V=J.length;for(let B=0;B<V;B++){const H=j?J[B]:J[B]=Vl(J[B]),$=H.type===vh;z?($&&!j&&B+1<V&&Vl(J[B+1]).type===vh&&(l(i(z.data.slice(H.children.length)),ne,s(z)),z.data=H.children),z=p(z,H,ge,pe,O,j)):$&&!H.children?l(H.el=i(""),ne):(g0(ne,1)||Gf(),n(null,H,ne,null,ge,pe,p0(ne),O))}return z},x=(z,Y,ne,ge,pe,O)=>{const{slotScopeIds:j}=Y;j&&(pe=pe?pe.concat(j):j);const J=o(z),V=m(s(z),Y,J,ne,ge,pe,O);return V&&up(V)&&V.data==="]"?s(Y.anchor=V):(Gf(),l(Y.anchor=c("]"),J,V),V)},E=(z,Y,ne,ge,pe,O)=>{if(g0(z.parentElement,1)||Gf(),Y.el=null,O){const V=k(z);for(;;){const B=s(z);if(B&&B!==V)a(B);else break}}const j=s(z),J=o(z);return a(z),n(null,Y,J,j,ne,ge,p0(J),pe),ne&&(ne.vnode.el=Y.el,Py(ne,Y.el)),j},k=(z,Y="[",ne="]")=>{let ge=0;for(;z;)if(z=s(z),z&&up(z)&&(z.data===Y&&ge++,z.data===ne)){if(ge===0)return s(z);ge--}return z},T=(z,Y,ne)=>{const ge=Y.parentNode;ge&&ge.replaceChild(z,Y);let pe=ne;for(;pe;)pe.vnode.el===Y&&(pe.vnode.el=pe.subTree.el=z),pe=pe.parent},A=z=>z.nodeType===1&&z.tagName==="TEMPLATE";return[h,p]}const Ix="data-allow-mismatch",$8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function g0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ix);)t=t.parentElement;const n=t&&t.getAttribute(Ix);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes($8[e])}}const V8=py().requestIdleCallback||(t=>setTimeout(t,1)),U8=py().cancelIdleCallback||(t=>clearTimeout(t)),H8=(t=1e4)=>e=>{const n=V8(e,{timeout:t});return()=>U8(n)};function G8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const W8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(G8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},q8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},Y8=(t=[])=>(e,n)=>{ms(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function K8(t,e){if(up(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(up(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const mh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Z8(t){Lr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,h,p=0;const v=()=>(p++,c=null,m()),m=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,T)=>{l(E,()=>k(v()),()=>T(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),h=E,E)))};return Ss({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(x,E,k){const T=s?()=>{const A=s(k,z=>K8(x,z));A&&(E.bum||(E.bum=[])).push(A)}:k;h?T():m().then(()=>!E.isUnmounted&&T())},get __asyncResolved(){return h},setup(){const x=Zo;if(b_(x),h)return()=>D1(h,x);const E=z=>{c=null,Lf(z,x,13,!r)};if(a&&x.suspense||Sp)return m().then(z=>()=>D1(z,x)).catch(z=>(E(z),()=>r?ti(r,{error:z}):null));const k=Lt(!1),T=Lt(),A=Lt(!!i);return i&&setTimeout(()=>{A.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!T.value){const z=new Error(`Async component timed out after ${o}ms.`);E(z),T.value=z}},o),m().then(()=>{k.value=!0,x.parent&&Mm(x.parent.vnode)&&x.parent.update()}).catch(z=>{E(z),T.value=z}),()=>{if(k.value&&h)return D1(h,x);if(T.value&&r)return ti(r,{error:T.value});if(n&&!A.value)return ti(n)}}})}function D1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=ti(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const Mm=t=>t.type.__isKeepAlive,X8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Wu(),r=n.ctx;if(!r.renderer)return()=>{const A=e.default&&e.default();return A&&A.length===1?A[0]:A};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:h,o:{createElement:p}}}=r,v=p("div");r.activate=(A,z,Y,ne,ge)=>{const pe=A.component;c(A,z,Y,0,a),l(pe.vnode,A,z,Y,pe,a,ne,A.slotScopeIds,ge),Yo(()=>{pe.isDeactivated=!1,pe.a&&gp(pe.a);const O=A.props&&A.props.onVnodeMounted;O&&$l(O,pe.parent,A)},a)},r.deactivate=A=>{const z=A.component;Av(z.m),Av(z.a),c(A,v,null,1,a),Yo(()=>{z.da&&gp(z.da);const Y=A.props&&A.props.onVnodeUnmounted;Y&&$l(Y,z.parent,A),z.isDeactivated=!0},a)};function m(A){N1(A),h(A,n,a,!0)}function x(A){i.forEach((z,Y)=>{const ne=K2(z.type);ne&&!A(ne)&&E(Y)})}function E(A){const z=i.get(A);z&&(!o||!mc(z,o))?m(z):o&&N1(o),i.delete(A),s.delete(A)}fi(()=>[t.include,t.exclude],([A,z])=>{A&&x(Y=>vg(A,Y)),z&&x(Y=>!vg(z,Y))},{flush:"post",deep:!0});let k=null;const T=()=>{k!=null&&(Tv(n.subTree.type)?Yo(()=>{i.set(k,m0(n.subTree))},n.subTree.suspense):i.set(k,m0(n.subTree)))};return no(T),Cy(T),kh(()=>{i.forEach(A=>{const{subTree:z,suspense:Y}=n,ne=m0(z);if(A.type===ne.type&&A.key===ne.key){N1(ne);const ge=ne.component.da;ge&&Yo(ge,Y);return}m(A)})}),()=>{if(k=null,!e.default)return o=null;const A=e.default(),z=A[0];if(A.length>1)return o=null,A;if(!Bd(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return o=null,z;let Y=m0(z);if(Y.type===Uo)return o=null,Y;const ne=Y.type,ge=K2(mh(Y)?Y.type.__asyncResolved||{}:ne),{include:pe,exclude:O,max:j}=t;if(pe&&(!ge||!vg(pe,ge))||O&&ge&&vg(O,ge))return Y.shapeFlag&=-257,o=Y,z;const J=Y.key==null?ne:Y.key,V=i.get(J);return Y.el&&(Y=ed(Y),z.shapeFlag&128&&(z.ssContent=Y)),k=J,V?(Y.el=V.el,Y.component=V.component,Y.transition&&Id(Y,Y.transition),Y.shapeFlag|=512,s.delete(J),s.add(J)):(s.add(J),j&&s.size>parseInt(j,10)&&E(s.values().next().value)),Y.shapeFlag|=256,o=Y,Tv(z.type)?z:Y}}},J8=X8;function vg(t,e){return Xn(t)?t.some(n=>vg(n,e)):ms(t)?t.split(",").includes(e):MD(t)?(t.lastIndex=0,t.test(e)):!1}function cS(t,e){hS(t,"a",e)}function dS(t,e){hS(t,"da",e)}function hS(t,e,n=Zo){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Sy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Mm(i.parent.vnode)&&Q8(r,e,n,i),i=i.parent}}function Q8(t,e,n,r){const i=Sy(e,t,r,!0);Hu(()=>{i_(r[e],i)},n)}function N1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function m0(t){return t.shapeFlag&128?t.ssContent:t}function Sy(t,e,n=Zo,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Ph();const a=vf(n),l=Uu(e,n,t,o);return a(),Mh(),l});return r?i.unshift(s):i.push(s),s}}const Fd=t=>(e,n=Zo)=>{(!Sp||t==="sp")&&Sy(t,(...r)=>e(...r),n)},fS=Fd("bm"),no=Fd("m"),__=Fd("bu"),Cy=Fd("u"),kh=Fd("bum"),Hu=Fd("um"),pS=Fd("sp"),gS=Fd("rtg"),mS=Fd("rtc");function vS(t,e=Zo){Sy("ec",t,e)}const w_="components",eN="directives";function yS(t,e){return x_(w_,t,!0,e)||t}const bS=Symbol.for("v-ndc");function tN(t){return ms(t)?x_(w_,t,!1)||t:t||bS}function nN(t){return x_(eN,t)}function x_(t,e,n=!0,r=!1){const i=Xo||Zo;if(i){const s=i.type;if(t===w_){const a=K2(s,!1);if(a&&(a===e||a===Ma(e)||a===Pm(Ma(e))))return s}const o=Bx(i[t]||s[t],e)||Bx(i.appContext[t],e);return!o&&r?s:o}}function Bx(t,e){return t&&(t[e]||t[Ma(e)]||t[Pm(Ma(e))])}function Hn(t,e,n,r){let i;const s=n&&n[r],o=Xn(t);if(o||ms(t)){const a=o&&Zc(t);let l=!1;a&&(l=!yu(t),t=vy(t)),i=new Array(t.length);for(let c=0,h=t.length;c<h;c++)i[c]=e(l?Za(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Zi(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=e(t[h],h,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function rN(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Xn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function iN(t,e,n={},r,i){if(Xo.ce||Xo.parent&&mh(Xo.parent)&&Xo.parent.ce)return e!=="default"&&(n.name=e),Ne(),Vo(bn,null,[ti("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ne();const o=s&&L_(s(n)),a=n.key||o&&o.key,l=Vo(bn,{key:(a&&!wc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function L_(t){return t.some(e=>Bd(e)?!(e.type===Uo||e.type===bn&&!L_(e.children)):!0)?t:null}function sN(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ng(r)]=t[r];return n}const F2=t=>t?JS(t)?Am(t):F2(t.parent):null,Rg=os(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>F2(t.parent),$root:t=>F2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>S_(t),$forceUpdate:t=>t.f||(t.f=()=>{m_(t.update)}),$nextTick:t=>t.n||(t.n=Ko.bind(t.proxy)),$watch:t=>IN.bind(t)}),O1=(t,e)=>t!==wi&&!t.__isScriptSetup&&Ri(t,e),j2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(O1(r,e))return o[e]=1,r[e];if(i!==wi&&Ri(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Ri(c,e))return o[e]=3,s[e];if(n!==wi&&Ri(n,e))return o[e]=4,n[e];z2&&(o[e]=0)}}const h=Rg[e];let p,v;if(h)return e==="$attrs"&&Ka(t.attrs,"get",""),h(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==wi&&Ri(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,Ri(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return O1(i,e)?(i[e]=n,!0):r!==wi&&Ri(r,e)?(r[e]=n,!0):Ri(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==wi&&Ri(t,o)||O1(e,o)||(a=s[0])&&Ri(a,o)||Ri(r,o)||Ri(Rg,o)||Ri(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ri(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},oN=os({},j2,{get(t,e){if(e!==Symbol.unscopables)return j2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!ND(e)}});function aN(){return null}function lN(){return null}function uN(t){}function cN(t){}function dN(){return null}function hN(){}function fN(t,e){return null}function pN(){return _S().slots}function gN(){return _S().attrs}function _S(){const t=Wu();return t.setupContext||(t.setupContext=tC(t))}function cm(t){return Xn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function mN(t,e){const n=cm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Xn(i)||Lr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function vN(t,e){return!t||!e?t||e:Xn(t)&&Xn(e)?t.concat(e):os({},cm(t),cm(e))}function yN(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function bN(t){const e=Wu();let n=t();return W2(),s_(n)&&(n=n.catch(r=>{throw vf(e),r})),[n,()=>vf(e)]}let z2=!0;function _N(t){const e=S_(t),n=t.proxy,r=t.ctx;z2=!1,e.beforeCreate&&Rx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:p,mounted:v,beforeUpdate:m,updated:x,activated:E,deactivated:k,beforeDestroy:T,beforeUnmount:A,destroyed:z,unmounted:Y,render:ne,renderTracked:ge,renderTriggered:pe,errorCaptured:O,serverPrefetch:j,expose:J,inheritAttrs:V,components:B,directives:H,filters:$}=e;if(c&&wN(c,r,null),o)for(const X in o){const K=o[X];Lr(K)&&(r[X]=K.bind(n))}if(i){const X=i.call(n,n);Zi(X)&&(t.data=Zl(X))}if(z2=!0,s)for(const X in s){const K=s[X],_e=Lr(K)?K.bind(n,n):Lr(K.get)?K.get.bind(n,n):$u,ve=!Lr(K)&&Lr(K.set)?K.set.bind(n):$u,Ge=Un({get:_e,set:ve});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:se=>Ge.value=se})}if(a)for(const X in a)wS(a[X],r,n,X);if(l){const X=Lr(l)?l.call(n):l;Reflect.ownKeys(X).forEach(K=>{Fg(K,X[K])})}h&&Rx(h,t,"c");function I(X,K){Xn(K)?K.forEach(_e=>X(_e.bind(n))):K&&X(K.bind(n))}if(I(fS,p),I(no,v),I(__,m),I(Cy,x),I(cS,E),I(dS,k),I(vS,O),I(mS,ge),I(gS,pe),I(kh,A),I(Hu,Y),I(pS,j),Xn(J))if(J.length){const X=t.exposed||(t.exposed={});J.forEach(K=>{Object.defineProperty(X,K,{get:()=>n[K],set:_e=>n[K]=_e})})}else t.exposed||(t.exposed={});ne&&t.render===$u&&(t.render=ne),V!=null&&(t.inheritAttrs=V),B&&(t.components=B),H&&(t.directives=H),j&&b_(t)}function wN(t,e,n=$u){Xn(t)&&(t=$2(t));for(const r in t){const i=t[r];let s;Zi(i)?"default"in i?s=bu(i.from||r,i.default,!0):s=bu(i.from||r):s=bu(i),eo(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Rx(t,e,n){Uu(Xn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function wS(t,e,n,r){let i=r.includes(".")?$S(n,r):()=>n[r];if(ms(t)){const s=e[t];Lr(s)&&fi(i,s)}else if(Lr(t))fi(i,t.bind(n));else if(Zi(t))if(Xn(t))t.forEach(s=>wS(s,e,n,r));else{const s=Lr(t.handler)?t.handler.bind(n):e[t.handler];Lr(s)&&fi(i,s,t)}}function S_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>kv(l,c,o,!0)),kv(l,e,o)),Zi(e)&&s.set(e,l),l}function kv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&kv(t,s,n,!0),i&&i.forEach(o=>kv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=xN[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const xN={data:Fx,props:jx,emits:jx,methods:yg,computed:yg,beforeCreate:gl,created:gl,beforeMount:gl,mounted:gl,beforeUpdate:gl,updated:gl,beforeDestroy:gl,beforeUnmount:gl,destroyed:gl,unmounted:gl,activated:gl,deactivated:gl,errorCaptured:gl,serverPrefetch:gl,components:yg,directives:yg,watch:SN,provide:Fx,inject:LN};function Fx(t,e){return e?t?function(){return os(Lr(t)?t.call(this,this):t,Lr(e)?e.call(this,this):e)}:e:t}function LN(t,e){return yg($2(t),$2(e))}function $2(t){if(Xn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function gl(t,e){return t?[...new Set([].concat(t,e))]:e}function yg(t,e){return t?os(Object.create(null),t,e):e}function jx(t,e){return t?Xn(t)&&Xn(e)?[...new Set([...t,...e])]:os(Object.create(null),cm(t),cm(e??{})):e}function SN(t,e){if(!t)return e;if(!e)return t;const n=os(Object.create(null),t);for(const r in e)n[r]=gl(t[r],e[r]);return n}function xS(){return{app:null,config:{isNativeTag:ED,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CN=0;function EN(t,e){return function(r,i=null){Lr(r)||(r=os({},r)),i!=null&&!Zi(i)&&(i=null);const s=xS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:CN++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:rC,get config(){return s.config},set config(h){},use(h,...p){return o.has(h)||(h&&Lr(h.install)?(o.add(h),h.install(c,...p)):Lr(h)&&(o.add(h),h(c,...p))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,p){return p?(s.components[h]=p,c):s.components[h]},directive(h,p){return p?(s.directives[h]=p,c):s.directives[h]},mount(h,p,v){if(!l){const m=c._ceVNode||ti(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,h):t(m,h,v),l=!0,c._container=h,h.__vue_app__=c,Am(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Uu(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,p){return s.provides[h]=p,c},runWithContext(h){const p=uf;uf=c;try{return h()}finally{uf=p}}};return c}}let uf=null;function Fg(t,e){if(Zo){let n=Zo.provides;const r=Zo.parent&&Zo.parent.provides;r===n&&(n=Zo.provides=Object.create(r)),n[t]=e}}function bu(t,e,n=!1){const r=Zo||Xo;if(r||uf){const i=uf?uf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Lr(e)?e.call(r&&r.proxy):e}}function LS(){return!!(Zo||Xo||uf)}const SS={},CS=()=>Object.create(SS),ES=t=>Object.getPrototypeOf(t)===SS;function PN(t,e,n,r=!1){const i={},s=CS();t.propsDefaults=Object.create(null),PS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:f_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function MN(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=_i(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let v=h[p];if(Ey(t.emitsOptions,v))continue;const m=e[v];if(l)if(Ri(s,v))m!==s[v]&&(s[v]=m,c=!0);else{const x=Ma(v);i[x]=V2(l,a,x,m,t,!1)}else m!==s[v]&&(s[v]=m,c=!0)}}}else{PS(t,e,i,s)&&(c=!0);let h;for(const p in a)(!e||!Ri(e,p)&&((h=Ul(p))===p||!Ri(e,h)))&&(l?n&&(n[p]!==void 0||n[h]!==void 0)&&(i[p]=V2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Ri(e,p))&&(delete s[p],c=!0)}c&&Ed(t.attrs,"set","")}function PS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(pp(l))continue;const c=e[l];let h;i&&Ri(i,h=Ma(l))?!s||!s.includes(h)?n[h]=c:(a||(a={}))[h]=c:Ey(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=_i(n),c=a||wi;for(let h=0;h<s.length;h++){const p=s[h];n[p]=V2(i,l,p,c[p],t,!Ri(c,p))}}return o}function V2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ri(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Lr(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const h=vf(i);r=c[n]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ul(n))&&(r=!0))}return r}const kN=new WeakMap;function MS(t,e,n=!1){const r=n?kN:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Lr(t)){const h=p=>{l=!0;const[v,m]=MS(p,e,!0);os(o,v),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!l)return Zi(t)&&r.set(t,hp),hp;if(Xn(s))for(let h=0;h<s.length;h++){const p=Ma(s[h]);zx(p)&&(o[p]=wi)}else if(s)for(const h in s){const p=Ma(h);if(zx(p)){const v=s[h],m=o[p]=Xn(v)||Lr(v)?{type:v}:os({},v),x=m.type;let E=!1,k=!0;if(Xn(x))for(let T=0;T<x.length;++T){const A=x[T],z=Lr(A)&&A.name;if(z==="Boolean"){E=!0;break}else z==="String"&&(k=!1)}else E=Lr(x)&&x.name==="Boolean";m[0]=E,m[1]=k,(E||Ri(m,"default"))&&a.push(p)}}const c=[o,a];return Zi(t)&&r.set(t,c),c}function zx(t){return t[0]!=="$"&&!pp(t)}const kS=t=>t[0]==="_"||t==="$stable",C_=t=>Xn(t)?t.map(Vl):[Vl(t)],AN=(t,e,n)=>{if(e._n)return e;const r=zu((...i)=>C_(e(...i)),n);return r._c=!1,r},AS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(kS(i))continue;const s=t[i];if(Lr(s))e[i]=AN(i,s,r);else if(s!=null){const o=C_(s);e[i]=()=>o}}},TS=(t,e)=>{const n=C_(e);t.slots.default=()=>n},DS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},TN=(t,e,n)=>{const r=t.slots=CS();if(t.vnode.shapeFlag&32){const i=e._;i?(DS(r,e,n),n&&EL(r,"_",i,!0)):AS(e,r)}else e&&TS(t,e)},DN=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=wi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:DS(i,e,n):(s=!e.$stable,AS(e,i)),o=e}else e&&(TS(t,e),o={default:1});if(s)for(const a in i)!kS(a)&&o[a]==null&&delete i[a]},Yo=GS;function NS(t){return IS(t)}function OS(t){return IS(t,z8)}function IS(t,e){const n=py();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:p,nextSibling:v,setScopeId:m=$u,insertStaticContent:x}=t,E=(fe,ee,oe,le=null,ze=null,$e=null,Je=void 0,Me=null,me=!!ee.dynamicChildren)=>{if(fe===ee)return;fe&&!mc(fe,ee)&&(le=ye(fe),se(fe,ze,$e,!0),fe=null),ee.patchFlag===-2&&(me=!1,ee.dynamicChildren=null);const{type:qe,ref:ct,shapeFlag:ft}=ee;switch(qe){case vh:k(fe,ee,oe,le);break;case Uo:T(fe,ee,oe,le);break;case cf:fe==null&&A(ee,oe,le,Je);break;case bn:B(fe,ee,oe,le,ze,$e,Je,Me,me);break;default:ft&1?ne(fe,ee,oe,le,ze,$e,Je,Me,me):ft&6?H(fe,ee,oe,le,ze,$e,Je,Me,me):(ft&64||ft&128)&&qe.process(fe,ee,oe,le,ze,$e,Je,Me,me,Ae)}ct!=null&&ze&&um(ct,fe&&fe.ref,$e,ee||fe,!ee)},k=(fe,ee,oe,le)=>{if(fe==null)r(ee.el=a(ee.children),oe,le);else{const ze=ee.el=fe.el;ee.children!==fe.children&&c(ze,ee.children)}},T=(fe,ee,oe,le)=>{fe==null?r(ee.el=l(ee.children||""),oe,le):ee.el=fe.el},A=(fe,ee,oe,le)=>{[fe.el,fe.anchor]=x(fe.children,ee,oe,le,fe.el,fe.anchor)},z=({el:fe,anchor:ee},oe,le)=>{let ze;for(;fe&&fe!==ee;)ze=v(fe),r(fe,oe,le),fe=ze;r(ee,oe,le)},Y=({el:fe,anchor:ee})=>{let oe;for(;fe&&fe!==ee;)oe=v(fe),i(fe),fe=oe;i(ee)},ne=(fe,ee,oe,le,ze,$e,Je,Me,me)=>{ee.type==="svg"?Je="svg":ee.type==="math"&&(Je="mathml"),fe==null?ge(ee,oe,le,ze,$e,Je,Me,me):j(fe,ee,ze,$e,Je,Me,me)},ge=(fe,ee,oe,le,ze,$e,Je,Me)=>{let me,qe;const{props:ct,shapeFlag:ft,transition:Mt,dirs:it}=fe;if(me=fe.el=o(fe.type,$e,ct&&ct.is,ct),ft&8?h(me,fe.children):ft&16&&O(fe.children,me,null,le,ze,I1(fe,$e),Je,Me),it&&Uc(fe,null,le,"created"),pe(me,fe,fe.scopeId,Je,le),ct){for(const hn in ct)hn!=="value"&&!pp(hn)&&s(me,hn,null,ct[hn],$e,le);"value"in ct&&s(me,"value",null,ct.value,$e),(qe=ct.onVnodeBeforeMount)&&$l(qe,le,fe)}it&&Uc(fe,null,le,"beforeMount");const jt=BS(ze,Mt);jt&&Mt.beforeEnter(me),r(me,ee,oe),((qe=ct&&ct.onVnodeMounted)||jt||it)&&Yo(()=>{qe&&$l(qe,le,fe),jt&&Mt.enter(me),it&&Uc(fe,null,le,"mounted")},ze)},pe=(fe,ee,oe,le,ze)=>{if(oe&&m(fe,oe),le)for(let $e=0;$e<le.length;$e++)m(fe,le[$e]);if(ze){let $e=ze.subTree;if(ee===$e||Tv($e.type)&&($e.ssContent===ee||$e.ssFallback===ee)){const Je=ze.vnode;pe(fe,Je,Je.scopeId,Je.slotScopeIds,ze.parent)}}},O=(fe,ee,oe,le,ze,$e,Je,Me,me=0)=>{for(let qe=me;qe<fe.length;qe++){const ct=fe[qe]=Me?sh(fe[qe]):Vl(fe[qe]);E(null,ct,ee,oe,le,ze,$e,Je,Me)}},j=(fe,ee,oe,le,ze,$e,Je)=>{const Me=ee.el=fe.el;let{patchFlag:me,dynamicChildren:qe,dirs:ct}=ee;me|=fe.patchFlag&16;const ft=fe.props||wi,Mt=ee.props||wi;let it;if(oe&&$h(oe,!1),(it=Mt.onVnodeBeforeUpdate)&&$l(it,oe,ee,fe),ct&&Uc(ee,fe,oe,"beforeUpdate"),oe&&$h(oe,!0),(ft.innerHTML&&Mt.innerHTML==null||ft.textContent&&Mt.textContent==null)&&h(Me,""),qe?J(fe.dynamicChildren,qe,Me,oe,le,I1(ee,ze),$e):Je||K(fe,ee,Me,null,oe,le,I1(ee,ze),$e,!1),me>0){if(me&16)V(Me,ft,Mt,oe,ze);else if(me&2&&ft.class!==Mt.class&&s(Me,"class",null,Mt.class,ze),me&4&&s(Me,"style",ft.style,Mt.style,ze),me&8){const jt=ee.dynamicProps;for(let hn=0;hn<jt.length;hn++){const Ze=jt[hn],lt=ft[Ze],rt=Mt[Ze];(rt!==lt||Ze==="value")&&s(Me,Ze,lt,rt,ze,oe)}}me&1&&fe.children!==ee.children&&h(Me,ee.children)}else!Je&&qe==null&&V(Me,ft,Mt,oe,ze);((it=Mt.onVnodeUpdated)||ct)&&Yo(()=>{it&&$l(it,oe,ee,fe),ct&&Uc(ee,fe,oe,"updated")},le)},J=(fe,ee,oe,le,ze,$e,Je)=>{for(let Me=0;Me<ee.length;Me++){const me=fe[Me],qe=ee[Me],ct=me.el&&(me.type===bn||!mc(me,qe)||me.shapeFlag&70)?p(me.el):oe;E(me,qe,ct,null,le,ze,$e,Je,!0)}},V=(fe,ee,oe,le,ze)=>{if(ee!==oe){if(ee!==wi)for(const $e in ee)!pp($e)&&!($e in oe)&&s(fe,$e,ee[$e],null,ze,le);for(const $e in oe){if(pp($e))continue;const Je=oe[$e],Me=ee[$e];Je!==Me&&$e!=="value"&&s(fe,$e,Me,Je,ze,le)}"value"in oe&&s(fe,"value",ee.value,oe.value,ze)}},B=(fe,ee,oe,le,ze,$e,Je,Me,me)=>{const qe=ee.el=fe?fe.el:a(""),ct=ee.anchor=fe?fe.anchor:a("");let{patchFlag:ft,dynamicChildren:Mt,slotScopeIds:it}=ee;it&&(Me=Me?Me.concat(it):it),fe==null?(r(qe,oe,le),r(ct,oe,le),O(ee.children||[],oe,ct,ze,$e,Je,Me,me)):ft>0&&ft&64&&Mt&&fe.dynamicChildren?(J(fe.dynamicChildren,Mt,oe,ze,$e,Je,Me),(ee.key!=null||ze&&ee===ze.subTree)&&E_(fe,ee,!0)):K(fe,ee,oe,ct,ze,$e,Je,Me,me)},H=(fe,ee,oe,le,ze,$e,Je,Me,me)=>{ee.slotScopeIds=Me,fe==null?ee.shapeFlag&512?ze.ctx.activate(ee,oe,le,Je,me):$(ee,oe,le,ze,$e,Je,me):R(fe,ee,me)},$=(fe,ee,oe,le,ze,$e,Je)=>{const Me=fe.component=XS(fe,le,ze);if(Mm(fe)&&(Me.ctx.renderer=Ae),QS(Me,!1,Je),Me.asyncDep){if(ze&&ze.registerDep(Me,I,Je),!fe.el){const me=Me.subTree=ti(Uo);T(null,me,ee,oe)}}else I(Me,fe,ee,oe,ze,$e,Je)},R=(fe,ee,oe)=>{const le=ee.component=fe.component;if($N(fe,ee,oe))if(le.asyncDep&&!le.asyncResolved){X(le,ee,oe);return}else le.next=ee,le.update();else ee.el=fe.el,le.vnode=ee},I=(fe,ee,oe,le,ze,$e,Je)=>{const Me=()=>{if(fe.isMounted){let{next:ft,bu:Mt,u:it,parent:jt,vnode:hn}=fe;{const Qt=RS(fe);if(Qt){ft&&(ft.el=hn.el,X(fe,ft,Je)),Qt.asyncDep.then(()=>{fe.isUnmounted||Me()});return}}let Ze=ft,lt;$h(fe,!1),ft?(ft.el=hn.el,X(fe,ft,Je)):ft=hn,Mt&&gp(Mt),(lt=ft.props&&ft.props.onVnodeBeforeUpdate)&&$l(lt,jt,ft,hn),$h(fe,!0);const rt=K0(fe),$t=fe.subTree;fe.subTree=rt,E($t,rt,p($t.el),ye($t),fe,ze,$e),ft.el=rt.el,Ze===null&&Py(fe,rt.el),it&&Yo(it,ze),(lt=ft.props&&ft.props.onVnodeUpdated)&&Yo(()=>$l(lt,jt,ft,hn),ze)}else{let ft;const{el:Mt,props:it}=ee,{bm:jt,m:hn,parent:Ze,root:lt,type:rt}=fe,$t=mh(ee);if($h(fe,!1),jt&&gp(jt),!$t&&(ft=it&&it.onVnodeBeforeMount)&&$l(ft,Ze,ee),$h(fe,!0),Mt&&Ke){const Qt=()=>{fe.subTree=K0(fe),Ke(Mt,fe.subTree,fe,ze,null)};$t&&rt.__asyncHydrate?rt.__asyncHydrate(Mt,fe,Qt):Qt()}else{lt.ce&&lt.ce._injectChildStyle(rt);const Qt=fe.subTree=K0(fe);E(null,Qt,oe,le,fe,ze,$e),ee.el=Qt.el}if(hn&&Yo(hn,ze),!$t&&(ft=it&&it.onVnodeMounted)){const Qt=ee;Yo(()=>$l(ft,Ze,Qt),ze)}(ee.shapeFlag&256||Ze&&mh(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&fe.a&&Yo(fe.a,ze),fe.isMounted=!0,ee=oe=le=null}};fe.scope.on();const me=fe.effect=new rm(Me);fe.scope.off();const qe=fe.update=me.run.bind(me),ct=fe.job=me.runIfDirty.bind(me);ct.i=fe,ct.id=fe.uid,me.scheduler=()=>m_(ct),$h(fe,!0),qe()},X=(fe,ee,oe)=>{ee.component=fe;const le=fe.vnode.props;fe.vnode=ee,fe.next=null,MN(fe,ee.props,le,oe),DN(fe,ee.children,oe),Ph(),kx(fe),Mh()},K=(fe,ee,oe,le,ze,$e,Je,Me,me=!1)=>{const qe=fe&&fe.children,ct=fe?fe.shapeFlag:0,ft=ee.children,{patchFlag:Mt,shapeFlag:it}=ee;if(Mt>0){if(Mt&128){ve(qe,ft,oe,le,ze,$e,Je,Me,me);return}else if(Mt&256){_e(qe,ft,oe,le,ze,$e,Je,Me,me);return}}it&8?(ct&16&&de(qe,ze,$e),ft!==qe&&h(oe,ft)):ct&16?it&16?ve(qe,ft,oe,le,ze,$e,Je,Me,me):de(qe,ze,$e,!0):(ct&8&&h(oe,""),it&16&&O(ft,oe,le,ze,$e,Je,Me,me))},_e=(fe,ee,oe,le,ze,$e,Je,Me,me)=>{fe=fe||hp,ee=ee||hp;const qe=fe.length,ct=ee.length,ft=Math.min(qe,ct);let Mt;for(Mt=0;Mt<ft;Mt++){const it=ee[Mt]=me?sh(ee[Mt]):Vl(ee[Mt]);E(fe[Mt],it,oe,null,ze,$e,Je,Me,me)}qe>ct?de(fe,ze,$e,!0,!1,ft):O(ee,oe,le,ze,$e,Je,Me,me,ft)},ve=(fe,ee,oe,le,ze,$e,Je,Me,me)=>{let qe=0;const ct=ee.length;let ft=fe.length-1,Mt=ct-1;for(;qe<=ft&&qe<=Mt;){const it=fe[qe],jt=ee[qe]=me?sh(ee[qe]):Vl(ee[qe]);if(mc(it,jt))E(it,jt,oe,null,ze,$e,Je,Me,me);else break;qe++}for(;qe<=ft&&qe<=Mt;){const it=fe[ft],jt=ee[Mt]=me?sh(ee[Mt]):Vl(ee[Mt]);if(mc(it,jt))E(it,jt,oe,null,ze,$e,Je,Me,me);else break;ft--,Mt--}if(qe>ft){if(qe<=Mt){const it=Mt+1,jt=it<ct?ee[it].el:le;for(;qe<=Mt;)E(null,ee[qe]=me?sh(ee[qe]):Vl(ee[qe]),oe,jt,ze,$e,Je,Me,me),qe++}}else if(qe>Mt)for(;qe<=ft;)se(fe[qe],ze,$e,!0),qe++;else{const it=qe,jt=qe,hn=new Map;for(qe=jt;qe<=Mt;qe++){const xn=ee[qe]=me?sh(ee[qe]):Vl(ee[qe]);xn.key!=null&&hn.set(xn.key,qe)}let Ze,lt=0;const rt=Mt-jt+1;let $t=!1,Qt=0;const Pn=new Array(rt);for(qe=0;qe<rt;qe++)Pn[qe]=0;for(qe=it;qe<=ft;qe++){const xn=fe[qe];if(lt>=rt){se(xn,ze,$e,!0);continue}let $n;if(xn.key!=null)$n=hn.get(xn.key);else for(Ze=jt;Ze<=Mt;Ze++)if(Pn[Ze-jt]===0&&mc(xn,ee[Ze])){$n=Ze;break}$n===void 0?se(xn,ze,$e,!0):(Pn[$n-jt]=qe+1,$n>=Qt?Qt=$n:$t=!0,E(xn,ee[$n],oe,null,ze,$e,Je,Me,me),lt++)}const wn=$t?NN(Pn):hp;for(Ze=wn.length-1,qe=rt-1;qe>=0;qe--){const xn=jt+qe,$n=ee[xn],en=xn+1<ct?ee[xn+1].el:le;Pn[qe]===0?E(null,$n,oe,en,ze,$e,Je,Me,me):$t&&(Ze<0||qe!==wn[Ze]?Ge($n,oe,en,2):Ze--)}}},Ge=(fe,ee,oe,le,ze=null)=>{const{el:$e,type:Je,transition:Me,children:me,shapeFlag:qe}=fe;if(qe&6){Ge(fe.component.subTree,ee,oe,le);return}if(qe&128){fe.suspense.move(ee,oe,le);return}if(qe&64){Je.move(fe,ee,oe,Ae);return}if(Je===bn){r($e,ee,oe);for(let ft=0;ft<me.length;ft++)Ge(me[ft],ee,oe,le);r(fe.anchor,ee,oe);return}if(Je===cf){z(fe,ee,oe);return}if(le!==2&&qe&1&&Me)if(le===0)Me.beforeEnter($e),r($e,ee,oe),Yo(()=>Me.enter($e),ze);else{const{leave:ft,delayLeave:Mt,afterLeave:it}=Me,jt=()=>r($e,ee,oe),hn=()=>{ft($e,()=>{jt(),it&&it()})};Mt?Mt($e,jt,hn):hn()}else r($e,ee,oe)},se=(fe,ee,oe,le=!1,ze=!1)=>{const{type:$e,props:Je,ref:Me,children:me,dynamicChildren:qe,shapeFlag:ct,patchFlag:ft,dirs:Mt,cacheIndex:it}=fe;if(ft===-2&&(ze=!1),Me!=null&&um(Me,null,oe,fe,!0),it!=null&&(ee.renderCache[it]=void 0),ct&256){ee.ctx.deactivate(fe);return}const jt=ct&1&&Mt,hn=!mh(fe);let Ze;if(hn&&(Ze=Je&&Je.onVnodeBeforeUnmount)&&$l(Ze,ee,fe),ct&6)ie(fe.component,oe,le);else{if(ct&128){fe.suspense.unmount(oe,le);return}jt&&Uc(fe,null,ee,"beforeUnmount"),ct&64?fe.type.remove(fe,ee,oe,Ae,le):qe&&!qe.hasOnce&&($e!==bn||ft>0&&ft&64)?de(qe,ee,oe,!1,!0):($e===bn&&ft&384||!ze&&ct&16)&&de(me,ee,oe),le&&q(fe)}(hn&&(Ze=Je&&Je.onVnodeUnmounted)||jt)&&Yo(()=>{Ze&&$l(Ze,ee,fe),jt&&Uc(fe,null,ee,"unmounted")},oe)},q=fe=>{const{type:ee,el:oe,anchor:le,transition:ze}=fe;if(ee===bn){Z(oe,le);return}if(ee===cf){Y(fe);return}const $e=()=>{i(oe),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(fe.shapeFlag&1&&ze&&!ze.persisted){const{leave:Je,delayLeave:Me}=ze,me=()=>Je(oe,$e);Me?Me(fe.el,$e,me):me()}else $e()},Z=(fe,ee)=>{let oe;for(;fe!==ee;)oe=v(fe),i(fe),fe=oe;i(ee)},ie=(fe,ee,oe)=>{const{bum:le,scope:ze,job:$e,subTree:Je,um:Me,m:me,a:qe}=fe;Av(me),Av(qe),le&&gp(le),ze.stop(),$e&&($e.flags|=8,se(Je,fe,ee,oe)),Me&&Yo(Me,ee),Yo(()=>{fe.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&fe.asyncDep&&!fe.asyncResolved&&fe.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},de=(fe,ee,oe,le=!1,ze=!1,$e=0)=>{for(let Je=$e;Je<fe.length;Je++)se(fe[Je],ee,oe,le,ze)},ye=fe=>{if(fe.shapeFlag&6)return ye(fe.component.subTree);if(fe.shapeFlag&128)return fe.suspense.next();const ee=v(fe.anchor||fe.el),oe=ee&&ee[nS];return oe?v(oe):ee};let he=!1;const Q=(fe,ee,oe)=>{fe==null?ee._vnode&&se(ee._vnode,null,null,!0):E(ee._vnode||null,fe,ee,null,null,null,oe),ee._vnode=fe,he||(he=!0,kx(),Mv(),he=!1)},Ae={p:E,um:se,m:Ge,r:q,mt:$,mc:O,pc:K,pbc:J,n:ye,o:t};let De,Ke;return e&&([De,Ke]=e(Ae)),{render:Q,hydrate:De,createApp:EN(Q,De)}}function I1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $h({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function BS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function E_(t,e,n=!1){const r=t.children,i=e.children;if(Xn(r)&&Xn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=sh(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&E_(o,a)),a.type===vh&&(a.el=o.el)}}function NN(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function RS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:RS(e)}function Av(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const FS=Symbol.for("v-scx"),jS=()=>bu(FS);function dm(t,e){return km(t,null,e)}function ON(t,e){return km(t,null,{flush:"post"})}function zS(t,e){return km(t,null,{flush:"sync"})}function fi(t,e,n){return km(t,e,n)}function km(t,e,n=wi){const{immediate:r,deep:i,flush:s,once:o}=n,a=os({},n),l=e&&r||!e&&s!=="post";let c;if(Sp){if(s==="sync"){const m=jS();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=$u,m.resume=$u,m.pause=$u,m}}const h=Zo;a.call=(m,x,E)=>Uu(m,h,x,E);let p=!1;s==="post"?a.scheduler=m=>{Yo(m,h&&h.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,x)=>{x?m():m_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const v=L8(t,e,a);return Sp&&(c?c.push(v):l&&v()),v}function IN(t,e,n){const r=this.proxy,i=ms(t)?t.includes(".")?$S(r,t):()=>r[t]:t.bind(r,r);let s;Lr(e)?s=e:(s=e.handler,n=e);const o=vf(this),a=km(i,s.bind(r),n);return o(),a}function $S(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function BN(t,e,n=wi){const r=Wu(),i=Ma(e),s=Ul(e),o=VS(t,i),a=qL((l,c)=>{let h,p=wi,v;return zS(()=>{const m=t[i];_l(h,m)&&(h=m,c())}),{get(){return l(),n.get?n.get(h):h},set(m){const x=n.set?n.set(m):m;if(!_l(x,h)&&!(p!==wi&&_l(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(h=m,c()),r.emit(`update:${e}`,x),_l(m,x)&&_l(m,p)&&!_l(x,v)&&c(),p=m,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||wi:a,done:!1}:{done:!0}}}},a}const VS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ma(e)}Modifiers`]||t[`${Ul(e)}Modifiers`];function RN(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||wi;let i=n;const s=e.startsWith("update:"),o=s&&VS(r,e.slice(7));o&&(o.trim&&(i=n.map(h=>ms(h)?h.trim():h)),o.number&&(i=n.map(Lv)));let a,l=r[a=Ng(e)]||r[a=Ng(Ma(e))];!l&&s&&(l=r[a=Ng(Ul(e))]),l&&Uu(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Uu(c,t,6,i)}}function US(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Lr(t)){const l=c=>{const h=US(c,e,!0);h&&(a=!0,os(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Zi(t)&&r.set(t,null),null):(Xn(s)?s.forEach(l=>o[l]=null):os(o,s),Zi(t)&&r.set(t,o),o)}function Ey(t,e){return!t||!Em(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ri(t,e[0].toLowerCase()+e.slice(1))||Ri(t,Ul(e))||Ri(t,e))}function K0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:p,data:v,setupState:m,ctx:x,inheritAttrs:E}=t,k=lm(t);let T,A;try{if(n.shapeFlag&4){const Y=i||r,ne=Y;T=Vl(c.call(ne,Y,h,p,m,v,x)),A=a}else{const Y=e;T=Vl(Y.length>1?Y(p,{attrs:a,slots:o,emit:l}):Y(p,null)),A=e.props?a:jN(a)}}catch(Y){jg.length=0,Lf(Y,t,1),T=ti(Uo)}let z=T;if(A&&E!==!1){const Y=Object.keys(A),{shapeFlag:ne}=z;Y.length&&ne&7&&(s&&Y.some(r_)&&(A=zN(A,s)),z=ed(z,A,!1,!0))}return n.dirs&&(z=ed(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Id(z,n.transition),T=z,lm(k),T}function FN(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Bd(i)){if(i.type!==Uo||i.children==="v-if"){if(n)return;n=i}}else return}return n}const jN=t=>{let e;for(const n in t)(n==="class"||n==="style"||Em(n))&&((e||(e={}))[n]=t[n]);return e},zN=(t,e)=>{const n={};for(const r in t)(!r_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function $N(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$x(r,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const v=h[p];if(o[v]!==r[v]&&!Ey(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$x(r,o,c):!0:!!o;return!1}function $x(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Ey(n,s))return!0}return!1}function Py({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Tv=t=>t.__isSuspense;let U2=0;const VN={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)HN(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}GN(t,e,n,r,i,o,a,l,c)}},hydrate:WN,normalize:qN},UN=VN;function hm(t,e){const n=t.props&&t.props[e];Lr(n)&&n()}function HN(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:h}}=l,p=h("div"),v=t.suspense=HS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(hm(t,"onPending"),hm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),vp(v,t.ssFallback)):v.resolve(!1,!0)}function GN(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:h}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:k,isHydrating:T}=p;if(E)p.pendingBranch=v,mc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(T||(l(x,m,n,r,i,null,s,o,a),vp(p,m)))):(p.pendingId=U2++,T?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,m,n,r,i,null,s,o,a),vp(p,m))):x&&mc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&mc(v,x))l(x,v,n,r,i,p,s,o,a),vp(p,v);else if(hm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=U2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:A,pendingId:z}=p;A>0?setTimeout(()=>{p.pendingId===z&&p.fallback(m)},A):A===0&&p.fallback(m)}}function HS(t,e,n,r,i,s,o,a,l,c,h=!1){const{p,m:v,um:m,n:x,o:{parentNode:E,remove:k}}=c;let T;const A=YN(t);A&&e&&e.pendingBranch&&(T=e.pendingId,e.deps++);const z=t.props?Sv(t.props.timeout):void 0,Y=s,ne={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:U2++,timeout:typeof z=="number"?z:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(ge=!1,pe=!1){const{vnode:O,activeBranch:j,pendingBranch:J,pendingId:V,effects:B,parentComponent:H,container:$}=ne;let R=!1;ne.isHydrating?ne.isHydrating=!1:ge||(R=j&&J.transition&&J.transition.mode==="out-in",R&&(j.transition.afterLeave=()=>{V===ne.pendingId&&(v(J,$,s===Y?x(j):s,0),om(B))}),j&&(E(j.el)===$&&(s=x(j)),m(j,H,ne,!0)),R||v(J,$,s,0)),vp(ne,J),ne.pendingBranch=null,ne.isInFallback=!1;let I=ne.parent,X=!1;for(;I;){if(I.pendingBranch){I.effects.push(...B),X=!0;break}I=I.parent}!X&&!R&&om(B),ne.effects=[],A&&e&&e.pendingBranch&&T===e.pendingId&&(e.deps--,e.deps===0&&!pe&&e.resolve()),hm(O,"onResolve")},fallback(ge){if(!ne.pendingBranch)return;const{vnode:pe,activeBranch:O,parentComponent:j,container:J,namespace:V}=ne;hm(pe,"onFallback");const B=x(O),H=()=>{ne.isInFallback&&(p(null,ge,J,B,j,null,V,a,l),vp(ne,ge))},$=ge.transition&&ge.transition.mode==="out-in";$&&(O.transition.afterLeave=H),ne.isInFallback=!0,m(O,j,null,!0),$||H()},move(ge,pe,O){ne.activeBranch&&v(ne.activeBranch,ge,pe,O),ne.container=ge},next(){return ne.activeBranch&&x(ne.activeBranch)},registerDep(ge,pe,O){const j=!!ne.pendingBranch;j&&ne.deps++;const J=ge.vnode.el;ge.asyncDep.catch(V=>{Lf(V,ge,0)}).then(V=>{if(ge.isUnmounted||ne.isUnmounted||ne.pendingId!==ge.suspenseId)return;ge.asyncResolved=!0;const{vnode:B}=ge;q2(ge,V,!1),J&&(B.el=J);const H=!J&&ge.subTree.el;pe(ge,B,E(J||ge.subTree.el),J?null:x(ge.subTree),ne,o,O),H&&k(H),Py(ge,B.el),j&&--ne.deps===0&&ne.resolve()})},unmount(ge,pe){ne.isUnmounted=!0,ne.activeBranch&&m(ne.activeBranch,n,ge,pe),ne.pendingBranch&&m(ne.pendingBranch,n,ge,pe)}};return ne}function WN(t,e,n,r,i,s,o,a,l){const c=e.suspense=HS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),h=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),h}function qN(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Vx(r?n.default:n),t.ssFallback=r?Vx(n.fallback):ti(Uo)}function Vx(t){let e;if(Lr(t)){const n=mf&&t._c;n&&(t._d=!1,Ne()),t=t(),n&&(t._d=!0,e=el,WS())}return Xn(t)&&(t=FN(t)),t=Vl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function GS(t,e){e&&e.pendingBranch?Xn(t)?e.effects.push(...t):e.effects.push(t):om(t)}function vp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Py(r,i))}function YN(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const bn=Symbol.for("v-fgt"),vh=Symbol.for("v-txt"),Uo=Symbol.for("v-cmt"),cf=Symbol.for("v-stc"),jg=[];let el=null;function Ne(t=!1){jg.push(el=t?null:[])}function WS(){jg.pop(),el=jg[jg.length-1]||null}let mf=1;function H2(t,e=!1){mf+=t,t<0&&el&&e&&(el.hasOnce=!0)}function qS(t){return t.dynamicChildren=mf>0?el||hp:null,WS(),mf>0&&el&&el.push(t),t}function Be(t,e,n,r,i,s){return qS(S(t,e,n,r,i,s,!0))}function Vo(t,e,n,r,i){return qS(ti(t,e,n,r,i,!0))}function Bd(t){return t?t.__v_isVNode===!0:!1}function mc(t,e){return t.type===e.type&&t.key===e.key}function KN(t){}const YS=({key:t})=>t??null,Z0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ms(t)||eo(t)||Lr(t)?{i:Xo,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,s=t===bn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&YS(e),ref:e&&Z0(e),scopeId:xy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Xo};return a?(P_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=ms(n)?8:16),mf>0&&!o&&el&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&el.push(l),l}const ti=ZN;function ZN(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===bS)&&(t=Uo),Bd(t)){const a=ed(t,e,!0);return n&&P_(a,n),mf>0&&!s&&el&&(a.shapeFlag&6?el[el.indexOf(t)]=a:el.push(a)),a.patchFlag=-2,a}if(rO(t)&&(t=t.__vccOpts),e){e=KS(e);let{class:a,style:l}=e;a&&!ms(a)&&(e.class=gi(a)),Zi(l)&&(_y(l)&&!Xn(l)&&(l=os({},l)),e.style=ql(l))}const o=ms(t)?1:Tv(t)?128:rS(t)?64:Zi(t)?4:Lr(t)?2:0;return S(t,e,n,r,i,o,s,!0)}function KS(t){return t?_y(t)||ES(t)?os({},t):t:null}function ed(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?ZS(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&YS(c),ref:e&&e.ref?n&&s?Xn(s)?s.concat(Z0(e)):[s,Z0(e)]:Z0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==bn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ed(t.ssContent),ssFallback:t.ssFallback&&ed(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Id(h,l.clone(h)),h}function Gr(t=" ",e=0){return ti(vh,null,t,e)}function Gl(t,e){const n=ti(cf,null,t);return n.staticCount=e,n}function Zt(t="",e=!1){return e?(Ne(),Vo(Uo,null,t)):ti(Uo,null,t)}function Vl(t){return t==null||typeof t=="boolean"?ti(Uo):Xn(t)?ti(bn,null,t.slice()):Bd(t)?sh(t):ti(vh,null,String(t))}function sh(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ed(t)}function P_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Xn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),P_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!ES(e)?e._ctx=Xo:i===3&&Xo&&(Xo.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Lr(e)?(e={default:e,_ctx:Xo},n=32):(e=String(e),r&64?(n=16,e=[Gr(e)]):n=8);t.children=e,t.shapeFlag|=n}function ZS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=gi([e.class,r.class]));else if(i==="style")e.style=ql([e.style,r.style]);else if(Em(i)){const s=e[i],o=r[i];o&&s!==o&&!(Xn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function $l(t,e,n,r=null){Uu(t,e,7,[n,r])}const XN=xS();let JN=0;function XS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||XN,s={uid:JN++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new a_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:MS(r,i),emitsOptions:US(r,i),emit:null,emitted:null,propsDefaults:wi,inheritAttrs:r.inheritAttrs,ctx:wi,data:wi,props:wi,attrs:wi,slots:wi,refs:wi,setupState:wi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=RN.bind(null,s),t.ce&&t.ce(s),s}let Zo=null;const Wu=()=>Zo||Xo;let Dv,G2;{const t=py(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Dv=e("__VUE_INSTANCE_SETTERS__",n=>Zo=n),G2=e("__VUE_SSR_SETTERS__",n=>Sp=n)}const vf=t=>{const e=Zo;return Dv(t),t.scope.on(),()=>{t.scope.off(),Dv(e)}},W2=()=>{Zo&&Zo.scope.off(),Dv(null)};function JS(t){return t.vnode.shapeFlag&4}let Sp=!1;function QS(t,e=!1,n=!1){e&&G2(e);const{props:r,children:i}=t.vnode,s=JS(t);PN(t,r,s,e),TN(t,i,n);const o=s?QN(t,e):void 0;return e&&G2(!1),o}function QN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,j2);const{setup:r}=n;if(r){Ph();const i=t.setupContext=r.length>1?tC(t):null,s=vf(t),o=Rp(r,t,0,[t.props,i]),a=s_(o);if(Mh(),s(),(a||t.sp)&&!mh(t)&&b_(t),a){if(o.then(W2,W2),e)return o.then(l=>{q2(t,l,e)}).catch(l=>{Lf(l,t,0)});t.asyncDep=o}else q2(t,o,e)}else eC(t,e)}function q2(t,e,n){Lr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Zi(e)&&(t.setupState=g_(e)),eC(t,n)}let Nv,Y2;function eO(t){Nv=t,Y2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,oN))}}const tO=()=>!Nv;function eC(t,e,n){const r=t.type;if(!t.render){if(!e&&Nv&&!r.render){const i=r.template||S_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=os(os({isCustomElement:s,delimiters:a},o),l);r.render=Nv(i,c)}}t.render=r.render||$u,Y2&&Y2(t)}{const i=vf(t);Ph();try{_N(t)}finally{Mh(),i()}}}const nO={get(t,e){return Ka(t,"get",""),t[e]}};function tC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,nO),slots:t.slots,emit:t.emit,expose:e}}function Am(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(g_(wy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Rg)return Rg[n](t)},has(e,n){return n in e||n in Rg}})):t.proxy}function K2(t,e=!0){return Lr(t)?t.displayName||t.name:t.name||e&&t.__name}function rO(t){return Lr(t)&&"__vccOpts"in t}const Un=(t,e)=>b8(t,e,Sp);function My(t,e,n){const r=arguments.length;return r===2?Zi(e)&&!Xn(e)?Bd(e)?ti(t,null,[e]):ti(t,e):ti(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bd(n)&&(n=[n]),ti(t,e,n))}function iO(){}function sO(t,e,n,r){const i=n[r];if(i&&nC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function nC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(_l(n[r],e[r]))return!1;return mf>0&&el&&el.push(t),!0}const rC="3.5.13",oO=$u,aO=M8,lO=np,uO=tS,cO={createComponentInstance:XS,setupComponent:QS,renderComponentRoot:K0,setCurrentRenderingInstance:lm,isVNode:Bd,normalizeVNode:Vl,getComponentPublicInstance:Am,ensureValidVNode:L_,pushWarningContext:S8,popWarningContext:C8},dO=cO,hO=null,fO=null,pO=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Z2;const Ux=typeof window<"u"&&window.trustedTypes;if(Ux)try{Z2=Ux.createPolicy("vue",{createHTML:t=>t})}catch{}const iC=Z2?t=>Z2.createHTML(t):t=>t,gO="http://www.w3.org/2000/svg",mO="http://www.w3.org/1998/Math/MathML",Sd=typeof document<"u"?document:null,Hx=Sd&&Sd.createElement("template"),vO={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Sd.createElementNS(gO,t):e==="mathml"?Sd.createElementNS(mO,t):n?Sd.createElement(t,{is:n}):Sd.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Sd.createTextNode(t),createComment:t=>Sd.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Sd.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Hx.innerHTML=iC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Hx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Yd="transition",Xp="animation",Cp=Symbol("_vtc"),sC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},oC=os({},y_,sC),yO=t=>(t.displayName="Transition",t.props=oC,t),X2=yO((t,{slots:e})=>My(lS,aC(t),e)),Vh=(t,e=[])=>{Xn(t)?t.forEach(n=>n(...e)):t&&t(...e)},Gx=t=>t?Xn(t)?t.some(e=>e.length>1):t.length>1:!1;function aC(t){const e={};for(const B in t)B in sC||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,x=bO(i),E=x&&x[0],k=x&&x[1],{onBeforeEnter:T,onEnter:A,onEnterCancelled:z,onLeave:Y,onLeaveCancelled:ne,onBeforeAppear:ge=T,onAppear:pe=A,onAppearCancelled:O=z}=e,j=(B,H,$,R)=>{B._enterCancelled=R,eh(B,H?h:a),eh(B,H?c:o),$&&$()},J=(B,H)=>{B._isLeaving=!1,eh(B,p),eh(B,m),eh(B,v),H&&H()},V=B=>(H,$)=>{const R=B?pe:A,I=()=>j(H,B,$);Vh(R,[H,I]),Wx(()=>{eh(H,B?l:s),Fc(H,B?h:a),Gx(R)||qx(H,r,E,I)})};return os(e,{onBeforeEnter(B){Vh(T,[B]),Fc(B,s),Fc(B,o)},onBeforeAppear(B){Vh(ge,[B]),Fc(B,l),Fc(B,c)},onEnter:V(!1),onAppear:V(!0),onLeave(B,H){B._isLeaving=!0;const $=()=>J(B,H);Fc(B,p),B._enterCancelled?(Fc(B,v),J2()):(J2(),Fc(B,v)),Wx(()=>{B._isLeaving&&(eh(B,p),Fc(B,m),Gx(Y)||qx(B,r,k,$))}),Vh(Y,[B,$])},onEnterCancelled(B){j(B,!1,void 0,!0),Vh(z,[B])},onAppearCancelled(B){j(B,!0,void 0,!0),Vh(O,[B])},onLeaveCancelled(B){J(B),Vh(ne,[B])}})}function bO(t){if(t==null)return null;if(Zi(t))return[B1(t.enter),B1(t.leave)];{const e=B1(t);return[e,e]}}function B1(t){return Sv(t)}function Fc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Cp]||(t[Cp]=new Set)).add(e)}function eh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Cp];n&&(n.delete(e),n.size||(t[Cp]=void 0))}function Wx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _O=0;function qx(t,e,n,r){const i=t._endId=++_O,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=lC(t,e);if(!o)return r();const c=o+"end";let h=0;const p=()=>{t.removeEventListener(c,v),s()},v=m=>{m.target===t&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},a+1),t.addEventListener(c,v)}function lC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Yd}Delay`),s=r(`${Yd}Duration`),o=Yx(i,s),a=r(`${Xp}Delay`),l=r(`${Xp}Duration`),c=Yx(a,l);let h=null,p=0,v=0;e===Yd?o>0&&(h=Yd,p=o,v=s.length):e===Xp?c>0&&(h=Xp,p=c,v=l.length):(p=Math.max(o,c),h=p>0?o>c?Yd:Xp:null,v=h?h===Yd?s.length:l.length:0);const m=h===Yd&&/\b(transform|all)(,|$)/.test(r(`${Yd}Property`).toString());return{type:h,timeout:p,propCount:v,hasTransform:m}}function Yx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Kx(n)+Kx(t[r])))}function Kx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function J2(){return document.body.offsetHeight}function wO(t,e,n){const r=t[Cp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ov=Symbol("_vod"),uC=Symbol("_vsh"),ky={beforeMount(t,{value:e},{transition:n}){t[Ov]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Jp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Jp(t,!0),r.enter(t)):r.leave(t,()=>{Jp(t,!1)}):Jp(t,e))},beforeUnmount(t,{value:e}){Jp(t,e)}};function Jp(t,e){t.style.display=e?t[Ov]:"none",t[uC]=!e}function xO(){ky.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const cC=Symbol("");function LO(t){const e=Wu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Iv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Iv(e.ce,i):Q2(e.subTree,i),n(i)};__(()=>{om(r)}),no(()=>{fi(r,$u,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Hu(()=>i.disconnect())})}function Q2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Q2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Iv(t.el,e);else if(t.type===bn)t.children.forEach(n=>Q2(n,e));else if(t.type===cf){let{el:n,anchor:r}=t;for(;n&&(Iv(n,e),n!==r);)n=n.nextSibling}}function Iv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[cC]=r}}const SO=/(^|;)\s*display\s*:/;function CO(t,e,n){const r=t.style,i=ms(n);let s=!1;if(n&&!i){if(e)if(ms(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&X0(r,a,"")}else for(const o in e)n[o]==null&&X0(r,o,"");for(const o in n)o==="display"&&(s=!0),X0(r,o,n[o])}else if(i){if(e!==n){const o=r[cC];o&&(n+=";"+o),r.cssText=n,s=SO.test(n)}}else e&&t.removeAttribute("style");Ov in t&&(t[Ov]=s?r.display:"",t[uC]&&(r.display="none"))}const Zx=/\s*!important$/;function X0(t,e,n){if(Xn(n))n.forEach(r=>X0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=EO(t,e);Zx.test(n)?t.setProperty(Ul(r),n.replace(Zx,""),"important"):t[r]=n}}const Xx=["Webkit","Moz","ms"],R1={};function EO(t,e){const n=R1[e];if(n)return n;let r=Ma(e);if(r!=="filter"&&r in t)return R1[e]=r;r=Pm(r);for(let i=0;i<Xx.length;i++){const s=Xx[i]+r;if(s in t)return R1[e]=s}return e}const Jx="http://www.w3.org/1999/xlink";function Qx(t,e,n,r,i,s=zD(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Jx,e.slice(6,e.length)):t.setAttributeNS(Jx,e,n):n==null||s&&!PL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":wc(n)?String(n):n)}function e4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?iC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=PL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Md(t,e,n,r){t.addEventListener(e,n,r)}function PO(t,e,n,r){t.removeEventListener(e,n,r)}const t4=Symbol("_vei");function MO(t,e,n,r,i=null){const s=t[t4]||(t[t4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=kO(e);if(r){const c=s[e]=DO(r,i);Md(t,a,c,l)}else o&&(PO(t,a,o,l),s[e]=void 0)}}const n4=/(?:Once|Passive|Capture)$/;function kO(t){let e;if(n4.test(t)){e={};let r;for(;r=t.match(n4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ul(t.slice(2)),e]}let F1=0;const AO=Promise.resolve(),TO=()=>F1||(AO.then(()=>F1=0),F1=Date.now());function DO(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Uu(NO(r,n.value),e,5,[r])};return n.value=t,n.attached=TO(),n}function NO(t,e){if(Xn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const r4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,OO=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?wO(t,r,o):e==="style"?CO(t,n,r):Em(e)?r_(e)||MO(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):IO(t,e,r,o))?(e4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Qx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ms(r))?e4(t,Ma(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Qx(t,e,r,o))};function IO(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&r4(e)&&Lr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return r4(e)&&ms(n)?!1:e in t}const i4={};/*! #__NO_SIDE_EFFECTS__ */function dC(t,e,n){const r=Ss(t,e);hy(r)&&os(r,e);class i extends Ay{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const BO=(t,e)=>dC(t,e,wC),RO=typeof HTMLElement<"u"?HTMLElement:class{};class Ay extends RO{constructor(e,n={},r=Rv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Rv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ay){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,Ko(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!Xn(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Sv(this._props[l])),(a||(a=Object.create(null)))[Ma(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ri(this,r)||Object.defineProperty(this,r,{get:()=>Bn(n[r])})}_resolveProps(e){const{props:n}=e,r=Xn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Ma))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):i4;const i=Ma(e);n&&this._numberProps&&this._numberProps[i]&&(r=Sv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===i4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Ul(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ul(e),n+""):n||this.removeAttribute(Ul(e)),s&&s.observe(this,{attributes:!0})}}_update(){_C(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=ti(this._def,os(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,hy(o[0])?os({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Ul(s)!==s&&i(Ul(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",h=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=h.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function hC(t){const e=Wu(),n=e&&e.ce;return n||null}function FO(){const t=hC();return t&&t.shadowRoot}function jO(t="$style"){{const e=Wu();if(!e)return wi;const n=e.type.__cssModules;if(!n)return wi;const r=n[t];return r||wi}}const fC=new WeakMap,pC=new WeakMap,Bv=Symbol("_moveCb"),s4=Symbol("_enterCb"),zO=t=>(delete t.props.mode,t),$O=zO({name:"TransitionGroup",props:os({},oC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Wu(),r=v_();let i,s;return Cy(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!WO(i[0].el,n.vnode.el,o))return;i.forEach(UO),i.forEach(HO);const a=i.filter(GO);J2(),a.forEach(l=>{const c=l.el,h=c.style;Fc(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=c[Bv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Bv]=null,eh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=_i(t),a=aC(o);let l=o.tag||bn;if(i=[],s)for(let c=0;c<s.length;c++){const h=s[c];h.el&&h.el instanceof Element&&(i.push(h),Id(h,Lp(h,a,r,n)),fC.set(h,h.el.getBoundingClientRect()))}s=e.default?Ly(e.default()):[];for(let c=0;c<s.length;c++){const h=s[c];h.key!=null&&Id(h,Lp(h,a,r,n))}return ti(l,null,s)}}}),VO=$O;function UO(t){const e=t.el;e[Bv]&&e[Bv](),e[s4]&&e[s4]()}function HO(t){pC.set(t,t.el.getBoundingClientRect())}function GO(t){const e=fC.get(t),n=pC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function WO(t,e,n){const r=t.cloneNode(),i=t[Cp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=lC(r);return s.removeChild(r),o}const xh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Xn(e)?n=>gp(e,n):e};function qO(t){t.target.composing=!0}function o4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vu=Symbol("_assign"),Pr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Vu]=xh(i);const s=r||i.props&&i.props.type==="number";Md(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Lv(a)),t[Vu](a)}),n&&Md(t,"change",()=>{t.value=t.value.trim()}),e||(Md(t,"compositionstart",qO),Md(t,"compositionend",o4),Md(t,"change",o4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Vu]=xh(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Lv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},yl={deep:!0,created(t,e,n){t[Vu]=xh(n),Md(t,"change",()=>{const r=t._modelValue,i=Ep(t),s=t.checked,o=t[Vu];if(Xn(r)){const a=gy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(xf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(gC(t,s))})},mounted:a4,beforeUpdate(t,e,n){t[Vu]=xh(n),a4(t,e,n)}};function a4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Xn(e))i=gy(e,r.props.value)>-1;else if(xf(e))i=e.has(r.props.value);else{if(e===n)return;i=_h(e,gC(t,!0))}t.checked!==i&&(t.checked=i)}const M_={created(t,{value:e},n){t.checked=_h(e,n.props.value),t[Vu]=xh(n),Md(t,"change",()=>{t[Vu](Ep(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Vu]=xh(r),e!==n&&(t.checked=_h(e,r.props.value))}},Ai={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=xf(e);Md(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Lv(Ep(o)):Ep(o));t[Vu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,Ko(()=>{t._assigning=!1})}),t[Vu]=xh(r)},mounted(t,{value:e}){l4(t,e)},beforeUpdate(t,e,n){t[Vu]=xh(n)},updated(t,{value:e}){t._assigning||l4(t,e)}};function l4(t,e){const n=t.multiple,r=Xn(e);if(!(n&&!r&&!xf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Ep(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=gy(e,a)>-1}else o.selected=e.has(a);else if(_h(Ep(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ep(t){return"_value"in t?t._value:t.value}function gC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const k_={created(t,e,n){v0(t,e,n,null,"created")},mounted(t,e,n){v0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){v0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){v0(t,e,n,r,"updated")}};function mC(t,e){switch(t){case"SELECT":return Ai;case"TEXTAREA":return Pr;default:switch(e){case"checkbox":return yl;case"radio":return M_;default:return Pr}}}function v0(t,e,n,r,i){const o=mC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function YO(){Pr.getSSRProps=({value:t})=>({value:t}),M_.getSSRProps=({value:t},e)=>{if(e.props&&_h(e.props.value,t))return{checked:!0}},yl.getSSRProps=({value:t},e)=>{if(Xn(t)){if(e.props&&gy(t,e.props.value)>-1)return{checked:!0}}else if(xf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},k_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=mC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const KO=["ctrl","shift","alt","meta"],ZO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>KO.some(n=>t[`${n}Key`]&&!e.includes(n))},Wl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=ZO[e[o]];if(a&&a(i,e))return}return t(i,...s)})},XO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JO=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Ul(i.key);if(e.some(o=>o===s||XO[o]===s))return t(i)})},vC=os({patchProp:OO},vO);let zg,u4=!1;function yC(){return zg||(zg=NS(vC))}function bC(){return zg=u4?zg:OS(vC),u4=!0,zg}const _C=(...t)=>{yC().render(...t)},QO=(...t)=>{bC().hydrate(...t)},Rv=(...t)=>{const e=yC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LC(r);if(!i)return;const s=e._component;!Lr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,xC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},wC=(...t)=>{const e=bC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LC(r);if(i)return n(i,!0,xC(i))},e};function xC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LC(t){return ms(t)?document.querySelector(t):t}let c4=!1;const eI=()=>{c4||(c4=!0,YO(),xO())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tI=()=>{},nI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:lS,BaseTransitionPropsValidators:y_,Comment:Uo,DeprecationTypes:pO,EffectScope:a_,ErrorCodes:P8,ErrorTypeStrings:aO,Fragment:bn,KeepAlive:J8,ReactiveEffect:rm,Static:cf,Suspense:UN,Teleport:rp,Text:vh,TrackOpTypes:_8,Transition:X2,TransitionGroup:VO,TriggerOpTypes:w8,VueElement:Ay,assertNumber:E8,callWithAsyncErrorHandling:Uu,callWithErrorHandling:Rp,camelize:Ma,capitalize:Pm,cloneVNode:ed,compatUtils:fO,compile:tI,computed:Un,createApp:Rv,createBlock:Vo,createCommentVNode:Zt,createElementBlock:Be,createElementVNode:S,createHydrationRenderer:OS,createPropsRestProxy:yN,createRenderer:NS,createSSRApp:wC,createSlots:rN,createStaticVNode:Gl,createTextVNode:Gr,createVNode:ti,customRef:qL,defineAsyncComponent:Z8,defineComponent:Ss,defineCustomElement:dC,defineEmits:lN,defineExpose:uN,defineModel:hN,defineOptions:cN,defineProps:aN,defineSSRCustomElement:BO,defineSlots:dN,devtools:lO,effect:UD,effectScope:l_,getCurrentInstance:Wu,getCurrentScope:u_,getCurrentWatcher:x8,getTransitionRawChildren:Ly,guardReactiveProps:KS,h:My,handleError:Lf,hasInjectionContext:LS,hydrate:QO,hydrateOnIdle:H8,hydrateOnInteraction:Y8,hydrateOnMediaQuery:q8,hydrateOnVisible:W8,initCustomFormatter:iO,initDirectivesForSSR:eI,inject:bu,isMemoSame:nC,isProxy:_y,isReactive:Zc,isReadonly:wh,isRef:eo,isRuntimeOnly:tO,isShallow:yu,isVNode:Bd,markRaw:wy,mergeDefaults:mN,mergeModels:vN,mergeProps:ZS,nextTick:Ko,normalizeClass:gi,normalizeProps:FD,normalizeStyle:ql,onActivated:cS,onBeforeMount:fS,onBeforeUnmount:kh,onBeforeUpdate:__,onDeactivated:dS,onErrorCaptured:vS,onMounted:no,onRenderTracked:mS,onRenderTriggered:gS,onScopeDispose:AL,onServerPrefetch:pS,onUnmounted:Hu,onUpdated:Cy,onWatcherCleanup:ZL,openBlock:Ne,popScopeId:D8,provide:Fg,proxyRefs:g_,pushScopeId:T8,queuePostFlushCb:om,reactive:Zl,readonly:hc,ref:Lt,registerRuntimeCompiler:eO,render:_C,renderList:Hn,renderSlot:iN,resolveComponent:yS,resolveDirective:nN,resolveDynamicComponent:tN,resolveFilter:hO,resolveTransitionHooks:Lp,setBlockTracking:H2,setDevtoolsHook:uO,setTransitionHooks:Id,shallowReactive:f_,shallowReadonly:u8,shallowRef:p_,ssrContextKey:FS,ssrUtils:dO,stop:HD,toDisplayString:kt,toHandlerKey:Ng,toHandlers:sN,toRaw:_i,toRef:v8,toRefs:YL,toValue:h8,transformVNodeArgs:KN,triggerRef:d8,unref:Bn,useAttrs:gN,useCssModule:jO,useCssVars:LO,useHost:hC,useId:B8,useModel:BN,useSSRContext:jS,useShadowRoot:FO,useSlots:pN,useTemplateRef:R8,useTransitionState:v_,vModelCheckbox:yl,vModelDynamic:k_,vModelRadio:M_,vModelSelect:Ai,vModelText:Pr,vShow:ky,version:rC,warn:oO,watch:fi,watchEffect:dm,watchPostEffect:ON,watchSyncEffect:zS,withAsyncContext:bN,withCtx:zu,withDefaults:fN,withDirectives:Sn,withKeys:JO,withMemo:sO,withModifiers:Wl,withScopeId:N8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let SC;const Ty=t=>SC=t,CC=Symbol();function eb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var $g;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})($g||($g={}));function rI(){const t=l_(!0),e=t.run(()=>Lt({}));let n=[],r=[];const i=wy({install(s){Ty(i),i._a=s,s.provide(CC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const EC=()=>{};function d4(t,e,n,r=EC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&u_()&&AL(i),i}function Wf(t,...e){t.slice().forEach(n=>{n(...e)})}const iI=t=>t(),h4=Symbol(),j1=Symbol();function tb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];eb(i)&&eb(r)&&t.hasOwnProperty(n)&&!eo(r)&&!Zc(r)?t[n]=tb(i,r):t[n]=r}return t}const sI=Symbol();function oI(t){return!eb(t)||!t.hasOwnProperty(sI)}const{assign:th}=Object;function aI(t){return!!(eo(t)&&t.effect)}function lI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const h=YL(n.state.value[t]);return th(h,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=wy(Un(()=>{Ty(n);const m=n._s.get(t);return o[v].call(m,m)})),p),{}))}return l=PC(t,c,e,n,r,!0),l}function PC(t,e,n={},r,i,s){let o;const a=th({actions:{}},n),l={deep:!0};let c,h,p=[],v=[],m;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),Lt({});let E;function k(O){let j;c=h=!1,typeof O=="function"?(O(r.state.value[t]),j={type:$g.patchFunction,storeId:t,events:m}):(tb(r.state.value[t],O),j={type:$g.patchObject,payload:O,storeId:t,events:m});const J=E=Symbol();Ko().then(()=>{E===J&&(c=!0)}),h=!0,Wf(p,j,r.state.value[t])}const T=s?function(){const{state:j}=n,J=j?j():{};this.$patch(V=>{th(V,J)})}:EC;function A(){o.stop(),p=[],v=[],r._s.delete(t)}const z=(O,j="")=>{if(h4 in O)return O[j1]=j,O;const J=function(){Ty(r);const V=Array.from(arguments),B=[],H=[];function $(X){B.push(X)}function R(X){H.push(X)}Wf(v,{args:V,name:J[j1],store:ne,after:$,onError:R});let I;try{I=O.apply(this&&this.$id===t?this:ne,V)}catch(X){throw Wf(H,X),X}return I instanceof Promise?I.then(X=>(Wf(B,X),X)).catch(X=>(Wf(H,X),Promise.reject(X))):(Wf(B,I),I)};return J[h4]=!0,J[j1]=j,J},Y={_p:r,$id:t,$onAction:d4.bind(null,v),$patch:k,$reset:T,$subscribe(O,j={}){const J=d4(p,O,j.detached,()=>V()),V=o.run(()=>fi(()=>r.state.value[t],B=>{(j.flush==="sync"?h:c)&&O({storeId:t,type:$g.direct,events:m},B)},th({},l,j)));return J},$dispose:A},ne=Zl(Y);r._s.set(t,ne);const pe=(r._a&&r._a.runWithContext||iI)(()=>r._e.run(()=>(o=l_()).run(()=>e({action:z}))));for(const O in pe){const j=pe[O];if(eo(j)&&!aI(j)||Zc(j))s||(x&&oI(j)&&(eo(j)?j.value=x[O]:tb(j,x[O])),r.state.value[t][O]=j);else if(typeof j=="function"){const J=z(j,O);pe[O]=J,a.actions[O]=j}}return th(ne,pe),th(_i(ne),pe),Object.defineProperty(ne,"$state",{get:()=>r.state.value[t],set:O=>{k(j=>{th(j,O)})}}),r._p.forEach(O=>{th(ne,o.run(()=>O({store:ne,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(ne.$state,x),c=!0,h=!0,ne}/*! #__NO_SIDE_EFFECTS__ */function Fp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=LS();return a=a||(c?bu(CC,null):null),a&&Ty(a),a=SC,a._s.has(r)||(s?PC(r,e,i,a):lI(r,i,a)),a._s.get(r)}return o.$id=r,o}function MC(t,e){return function(){return t.apply(e,arguments)}}const{toString:uI}=Object.prototype,{getPrototypeOf:A_}=Object,Dy=(t=>e=>{const n=uI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Sc=t=>(t=t.toLowerCase(),e=>Dy(e)===t),Ny=t=>e=>typeof e===t,{isArray:jp}=Array,fm=Ny("undefined");function cI(t){return t!==null&&!fm(t)&&t.constructor!==null&&!fm(t.constructor)&&_u(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kC=Sc("ArrayBuffer");function dI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kC(t.buffer),e}const hI=Ny("string"),_u=Ny("function"),AC=Ny("number"),Oy=t=>t!==null&&typeof t=="object",fI=t=>t===!0||t===!1,J0=t=>{if(Dy(t)!=="object")return!1;const e=A_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pI=Sc("Date"),gI=Sc("File"),mI=Sc("Blob"),vI=Sc("FileList"),yI=t=>Oy(t)&&_u(t.pipe),bI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||_u(t.append)&&((e=Dy(t))==="formdata"||e==="object"&&_u(t.toString)&&t.toString()==="[object FormData]"))},_I=Sc("URLSearchParams"),[wI,xI,LI,SI]=["ReadableStream","Request","Response","Headers"].map(Sc),CI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),jp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function TC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const sf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DC=t=>!fm(t)&&t!==sf;function nb(){const{caseless:t}=DC(this)&&this||{},e={},n=(r,i)=>{const s=t&&TC(e,i)||i;J0(e[s])&&J0(r)?e[s]=nb(e[s],r):J0(r)?e[s]=nb({},r):jp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Tm(arguments[r],n);return e}const EI=(t,e,n,{allOwnKeys:r}={})=>(Tm(e,(i,s)=>{n&&_u(i)?t[s]=MC(i,n):t[s]=i},{allOwnKeys:r}),t),PI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),MI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&A_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},AI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},TI=t=>{if(!t)return null;if(jp(t))return t;let e=t.length;if(!AC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},DI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&A_(Uint8Array)),NI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},OI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},II=Sc("HTMLFormElement"),BI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),f4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),RI=Sc("RegExp"),NC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Tm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},FI=t=>{NC(t,(e,n)=>{if(_u(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(_u(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return jp(t)?r(t):r(String(t).split(e)),n},zI=()=>{},$I=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function VI(t){return!!(t&&_u(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const UI=t=>{const e=new Array(10),n=(r,i)=>{if(Oy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=jp(r)?[]:{};return Tm(r,(o,a)=>{const l=n(o,i+1);!fm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},HI=Sc("AsyncFunction"),GI=t=>t&&(Oy(t)||_u(t))&&_u(t.then)&&_u(t.catch),OC=((t,e)=>t?setImmediate:e?((n,r)=>(sf.addEventListener("message",({source:i,data:s})=>{i===sf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),sf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",_u(sf.postMessage)),WI=typeof queueMicrotask<"u"?queueMicrotask.bind(sf):typeof process<"u"&&process.nextTick||OC,Jt={isArray:jp,isArrayBuffer:kC,isBuffer:cI,isFormData:bI,isArrayBufferView:dI,isString:hI,isNumber:AC,isBoolean:fI,isObject:Oy,isPlainObject:J0,isReadableStream:wI,isRequest:xI,isResponse:LI,isHeaders:SI,isUndefined:fm,isDate:pI,isFile:gI,isBlob:mI,isRegExp:RI,isFunction:_u,isStream:yI,isURLSearchParams:_I,isTypedArray:DI,isFileList:vI,forEach:Tm,merge:nb,extend:EI,trim:CI,stripBOM:PI,inherits:MI,toFlatObject:kI,kindOf:Dy,kindOfTest:Sc,endsWith:AI,toArray:TI,forEachEntry:NI,matchAll:OI,isHTMLForm:II,hasOwnProperty:f4,hasOwnProp:f4,reduceDescriptors:NC,freezeMethods:FI,toObjectSet:jI,toCamelCase:BI,noop:zI,toFiniteNumber:$I,findKey:TC,global:sf,isContextDefined:DC,isSpecCompliantForm:VI,toJSONObject:UI,isAsyncFn:HI,isThenable:GI,setImmediate:OC,asap:WI};function Yr(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Jt.inherits(Yr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Jt.toJSONObject(this.config),code:this.code,status:this.status}}});const IC=Yr.prototype,BC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{BC[t]={value:t}});Object.defineProperties(Yr,BC);Object.defineProperty(IC,"isAxiosError",{value:!0});Yr.from=(t,e,n,r,i,s)=>{const o=Object.create(IC);return Jt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Yr.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const qI=null;function rb(t){return Jt.isPlainObject(t)||Jt.isArray(t)}function RC(t){return Jt.endsWith(t,"[]")?t.slice(0,-2):t}function p4(t,e,n){return t?t.concat(e).map(function(i,s){return i=RC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function YI(t){return Jt.isArray(t)&&!t.some(rb)}const KI=Jt.toFlatObject(Jt,{},null,function(e){return/^is[A-Z]/.test(e)});function Iy(t,e,n){if(!Jt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Jt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!Jt.isUndefined(k[E])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Jt.isSpecCompliantForm(e);if(!Jt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Jt.isDate(x))return x.toISOString();if(!l&&Jt.isBlob(x))throw new Yr("Blob is not supported. Use a Buffer instead.");return Jt.isArrayBuffer(x)||Jt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,E,k){let T=x;if(x&&!k&&typeof x=="object"){if(Jt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Jt.isArray(x)&&YI(x)||(Jt.isFileList(x)||Jt.endsWith(E,"[]"))&&(T=Jt.toArray(x)))return E=RC(E),T.forEach(function(z,Y){!(Jt.isUndefined(z)||z===null)&&e.append(o===!0?p4([E],Y,s):o===null?E:E+"[]",c(z))}),!1}return rb(x)?!0:(e.append(p4(k,E,s),c(x)),!1)}const p=[],v=Object.assign(KI,{defaultVisitor:h,convertValue:c,isVisitable:rb});function m(x,E){if(!Jt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Jt.forEach(x,function(T,A){(!(Jt.isUndefined(T)||T===null)&&i.call(e,T,Jt.isString(A)?A.trim():A,E,v))===!0&&m(T,E?E.concat(A):[A])}),p.pop()}}if(!Jt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function g4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function T_(t,e){this._pairs=[],t&&Iy(t,this,e)}const FC=T_.prototype;FC.append=function(e,n){this._pairs.push([e,n])};FC.toString=function(e){const n=e?function(r){return e.call(this,r,g4)}:g4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ZI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jC(t,e,n){if(!e)return t;const r=n&&n.encode||ZI;Jt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Jt.isURLSearchParams(e)?e.toString():new T_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class m4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Jt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const zC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XI=typeof URLSearchParams<"u"?URLSearchParams:T_,JI=typeof FormData<"u"?FormData:null,QI=typeof Blob<"u"?Blob:null,e7={isBrowser:!0,classes:{URLSearchParams:XI,FormData:JI,Blob:QI},protocols:["http","https","file","blob","url","data"]},D_=typeof window<"u"&&typeof document<"u",ib=typeof navigator=="object"&&navigator||void 0,t7=D_&&(!ib||["ReactNative","NativeScript","NS"].indexOf(ib.product)<0),n7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r7=D_&&window.location.href||"http://localhost",i7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:D_,hasStandardBrowserEnv:t7,hasStandardBrowserWebWorkerEnv:n7,navigator:ib,origin:r7},Symbol.toStringTag,{value:"Module"})),Xa={...i7,...e7};function s7(t,e){return Iy(t,new Xa.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Xa.isNode&&Jt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function o7(t){return Jt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function a7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function $C(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Jt.isArray(i)?i.length:o,l?(Jt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Jt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Jt.isArray(i[o])&&(i[o]=a7(i[o])),!a)}if(Jt.isFormData(t)&&Jt.isFunction(t.entries)){const n={};return Jt.forEachEntry(t,(r,i)=>{e(o7(r),i,n,0)}),n}return null}function l7(t,e,n){if(Jt.isString(t))try{return(e||JSON.parse)(t),Jt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Dm={transitional:zC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Jt.isObject(e);if(s&&Jt.isHTMLForm(e)&&(e=new FormData(e)),Jt.isFormData(e))return i?JSON.stringify($C(e)):e;if(Jt.isArrayBuffer(e)||Jt.isBuffer(e)||Jt.isStream(e)||Jt.isFile(e)||Jt.isBlob(e)||Jt.isReadableStream(e))return e;if(Jt.isArrayBufferView(e))return e.buffer;if(Jt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return s7(e,this.formSerializer).toString();if((a=Jt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Iy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),l7(e)):e}],transformResponse:[function(e){const n=this.transitional||Dm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Jt.isResponse(e)||Jt.isReadableStream(e))return e;if(e&&Jt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Yr.from(a,Yr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xa.classes.FormData,Blob:Xa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Jt.forEach(["delete","get","head","post","put","patch"],t=>{Dm.headers[t]={}});const u7=Jt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&u7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},v4=Symbol("internals");function Qp(t){return t&&String(t).trim().toLowerCase()}function Q0(t){return t===!1||t==null?t:Jt.isArray(t)?t.map(Q0):String(t)}function d7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const h7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function z1(t,e,n,r,i){if(Jt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Jt.isString(e)){if(Jt.isString(r))return e.indexOf(r)!==-1;if(Jt.isRegExp(r))return r.test(e)}}function f7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function p7(t,e){const n=Jt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Yl=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=Qp(l);if(!h)throw new Error("header name must be a non-empty string");const p=Jt.findKey(i,h);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=Q0(a))}const o=(a,l)=>Jt.forEach(a,(c,h)=>s(c,h,l));if(Jt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Jt.isString(e)&&(e=e.trim())&&!h7(e))o(c7(e),n);else if(Jt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Qp(e),e){const r=Jt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return d7(i);if(Jt.isFunction(n))return n.call(this,i,r);if(Jt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qp(e),e){const r=Jt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||z1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Qp(o),o){const a=Jt.findKey(r,o);a&&(!n||z1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Jt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||z1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Jt.forEach(this,(i,s)=>{const o=Jt.findKey(r,s);if(o){n[o]=Q0(i),delete n[s];return}const a=e?f7(s):String(s).trim();a!==s&&delete n[s],n[a]=Q0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Jt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Jt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[v4]=this[v4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Qp(o);r[a]||(p7(i,o),r[a]=!0)}return Jt.isArray(e)?e.forEach(s):s(e),this}};Yl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Jt.reduceDescriptors(Yl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Jt.freezeMethods(Yl);function $1(t,e){const n=this||Dm,r=e||n,i=Yl.from(r.headers);let s=r.data;return Jt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function VC(t){return!!(t&&t.__CANCEL__)}function zp(t,e,n){Yr.call(this,t??"canceled",Yr.ERR_CANCELED,e,n),this.name="CanceledError"}Jt.inherits(zp,Yr,{__CANCEL__:!0});function UC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Yr("Request failed with status code "+n.status,[Yr.ERR_BAD_REQUEST,Yr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function g7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function m7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=h&&c-h;return m?Math.round(v*1e3/m):void 0}}function v7(t,e){let n=0,r=1e3/e,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const h=Date.now(),p=h-n;p>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Fv=(t,e,n=3)=>{let r=0;const i=m7(50,250);return v7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},y4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},b4=t=>(...e)=>Jt.asap(()=>t(...e)),y7=Xa.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Xa.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Xa.origin),Xa.navigator&&/(msie|trident)/i.test(Xa.navigator.userAgent)):()=>!0,b7=Xa.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Jt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Jt.isString(r)&&o.push("path="+r),Jt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function w7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function HC(t,e,n){let r=!_7(e);return t&&(r||n==!1)?w7(t,e):e}const _4=t=>t instanceof Yl?{...t}:t;function yf(t,e){e=e||{};const n={};function r(c,h,p,v){return Jt.isPlainObject(c)&&Jt.isPlainObject(h)?Jt.merge.call({caseless:v},c,h):Jt.isPlainObject(h)?Jt.merge({},h):Jt.isArray(h)?h.slice():h}function i(c,h,p,v){if(Jt.isUndefined(h)){if(!Jt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,h,p,v)}function s(c,h){if(!Jt.isUndefined(h))return r(void 0,h)}function o(c,h){if(Jt.isUndefined(h)){if(!Jt.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,p){if(p in e)return r(c,h);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,p)=>i(_4(c),_4(h),p,!0)};return Jt.forEach(Object.keys(Object.assign({},t,e)),function(h){const p=l[h]||i,v=p(t[h],e[h],h);Jt.isUndefined(v)&&p!==a||(n[h]=v)}),n}const GC=t=>{const e=yf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Yl.from(o),e.url=jC(HC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Jt.isFormData(n)){if(Xa.hasStandardBrowserEnv||Xa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Xa.hasStandardBrowserEnv&&(r&&Jt.isFunction(r)&&(r=r(e)),r||r!==!1&&y7(e.url))){const c=i&&s&&b7.read(s);c&&o.set(i,c)}return e},x7=typeof XMLHttpRequest<"u",L7=x7&&function(t){return new Promise(function(n,r){const i=GC(t);let s=i.data;const o=Yl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,p,v,m,x;function E(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function T(){if(!k)return;const z=Yl.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ne={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:z,config:t,request:k};UC(function(pe){n(pe),E()},function(pe){r(pe),E()},ne),k=null}"onloadend"in k?k.onloadend=T:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(T)},k.onabort=function(){k&&(r(new Yr("Request aborted",Yr.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new Yr("Network Error",Yr.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let Y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ne=i.transitional||zC;i.timeoutErrorMessage&&(Y=i.timeoutErrorMessage),r(new Yr(Y,ne.clarifyTimeoutError?Yr.ETIMEDOUT:Yr.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Jt.forEach(o.toJSON(),function(Y,ne){k.setRequestHeader(ne,Y)}),Jt.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([v,x]=Fv(c,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,m]=Fv(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=z=>{k&&(r(!z||z.type?new zp(null,t,k):z),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const A=g7(i.url);if(A&&Xa.protocols.indexOf(A)===-1){r(new Yr("Unsupported protocol "+A+":",Yr.ERR_BAD_REQUEST,t));return}k.send(s||null)})},S7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof Yr?h:new zp(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new Yr(`timeout ${e} of ms exceeded`,Yr.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Jt.asap(a),l}},C7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},E7=async function*(t,e){for await(const n of P7(t))yield*C7(n,e)},P7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},w4=(t,e,n,r)=>{const i=E7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let p=h.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},By=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",WC=By&&typeof ReadableStream=="function",M7=By&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),qC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},k7=WC&&qC(()=>{let t=!1;const e=new Request(Xa.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),x4=64*1024,sb=WC&&qC(()=>Jt.isReadableStream(new Response("").body)),jv={stream:sb&&(t=>t.body)};By&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!jv[e]&&(jv[e]=Jt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Yr(`Response type '${e}' is not supported`,Yr.ERR_NOT_SUPPORT,r)})})})(new Response);const A7=async t=>{if(t==null)return 0;if(Jt.isBlob(t))return t.size;if(Jt.isSpecCompliantForm(t))return(await new Request(Xa.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Jt.isArrayBufferView(t)||Jt.isArrayBuffer(t))return t.byteLength;if(Jt.isURLSearchParams(t)&&(t=t+""),Jt.isString(t))return(await M7(t)).byteLength},T7=async(t,e)=>{const n=Jt.toFiniteNumber(t.getContentLength());return n??A7(e)},D7=By&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:p="same-origin",fetchOptions:v}=GC(t);c=c?(c+"").toLowerCase():"text";let m=S7([i,s&&s.toAbortSignal()],o),x;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let k;try{if(l&&k7&&n!=="get"&&n!=="head"&&(k=await T7(h,r))!==0){let ne=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Jt.isFormData(r)&&(ge=ne.headers.get("content-type"))&&h.setContentType(ge),ne.body){const[pe,O]=y4(k,Fv(b4(l)));r=w4(ne.body,x4,pe,O)}}Jt.isString(p)||(p=p?"include":"omit");const T="credentials"in Request.prototype;x=new Request(e,{...v,signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:T?p:void 0});let A=await fetch(x);const z=sb&&(c==="stream"||c==="response");if(sb&&(a||z&&E)){const ne={};["status","statusText","headers"].forEach(j=>{ne[j]=A[j]});const ge=Jt.toFiniteNumber(A.headers.get("content-length")),[pe,O]=a&&y4(ge,Fv(b4(a),!0))||[];A=new Response(w4(A.body,x4,pe,()=>{O&&O(),E&&E()}),ne)}c=c||"text";let Y=await jv[Jt.findKey(jv,c)||"text"](A,t);return!z&&E&&E(),await new Promise((ne,ge)=>{UC(ne,ge,{data:Y,headers:Yl.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:x})})}catch(T){throw E&&E(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new Yr("Network Error",Yr.ERR_NETWORK,t,x),{cause:T.cause||T}):Yr.from(T,T&&T.code,t,x)}}),ob={http:qI,xhr:L7,fetch:D7};Jt.forEach(ob,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const L4=t=>`- ${t}`,N7=t=>Jt.isFunction(t)||t===null||t===!1,YC={getAdapter:t=>{t=Jt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!N7(n)&&(r=ob[(o=String(n)).toLowerCase()],r===void 0))throw new Yr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(L4).join(`
`):" "+L4(s[0]):"as no adapter specified";throw new Yr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:ob};function V1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zp(null,t)}function S4(t){return V1(t),t.headers=Yl.from(t.headers),t.data=$1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YC.getAdapter(t.adapter||Dm.adapter)(t).then(function(r){return V1(t),r.data=$1.call(t,t.transformResponse,r),r.headers=Yl.from(r.headers),r},function(r){return VC(r)||(V1(t),r&&r.response&&(r.response.data=$1.call(t,t.transformResponse,r.response),r.response.headers=Yl.from(r.response.headers))),Promise.reject(r)})}const KC="1.8.4",Ry={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ry[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const C4={};Ry.transitional=function(e,n,r){function i(s,o){return"[Axios v"+KC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Yr(i(o," has been removed"+(n?" in "+n:"")),Yr.ERR_DEPRECATED);return n&&!C4[o]&&(C4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Ry.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function O7(t,e,n){if(typeof t!="object")throw new Yr("options must be an object",Yr.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Yr("option "+s+" must be "+l,Yr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Yr("Unknown option "+s,Yr.ERR_BAD_OPTION)}}const ev={assertOptions:O7,validators:Ry},Bc=ev.validators;let df=class{constructor(e){this.defaults=e,this.interceptors={request:new m4,response:new m4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=yf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ev.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),i!=null&&(Jt.isFunction(i)?n.paramsSerializer={serialize:i}:ev.assertOptions(i,{encode:Bc.function,serialize:Bc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ev.assertOptions(n,{baseUrl:Bc.spelling("baseURL"),withXsrfToken:Bc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Jt.merge(s.common,s[n.method]);s&&Jt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=Yl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let h,p=0,v;if(!l){const x=[S4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,h=Promise.resolve(n);p<v;)h=h.then(x[p++],x[p++]);return h}v=a.length;let m=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{m=x(m)}catch(k){E.call(this,k);break}}try{h=S4.call(this,m)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)h=h.then(c[p++],c[p++]);return h}getUri(e){e=yf(this.defaults,e);const n=HC(e.baseURL,e.url,e.allowAbsoluteUrls);return jC(n,e.params,e.paramsSerializer)}};Jt.forEach(["delete","get","head","options"],function(e){df.prototype[e]=function(n,r){return this.request(yf(r||{},{method:e,url:n,data:(r||{}).data}))}});Jt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(yf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}df.prototype[e]=n(),df.prototype[e+"Form"]=n(!0)});let I7=class ZC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new zp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new ZC(function(i){e=i}),cancel:e}}};function B7(t){return function(n){return t.apply(null,n)}}function R7(t){return Jt.isObject(t)&&t.isAxiosError===!0}const ab={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ab).forEach(([t,e])=>{ab[e]=t});function XC(t){const e=new df(t),n=MC(df.prototype.request,e);return Jt.extend(n,df.prototype,e,{allOwnKeys:!0}),Jt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return XC(yf(t,i))},n}const Oo=XC(Dm);Oo.Axios=df;Oo.CanceledError=zp;Oo.CancelToken=I7;Oo.isCancel=VC;Oo.VERSION=KC;Oo.toFormData=Iy;Oo.AxiosError=Yr;Oo.Cancel=Oo.CanceledError;Oo.all=function(e){return Promise.all(e)};Oo.spread=B7;Oo.isAxiosError=R7;Oo.mergeConfig=yf;Oo.AxiosHeaders=Yl;Oo.formToJSON=t=>$C(Jt.isHTMLForm(t)?new FormData(t):t);Oo.getAdapter=YC.getAdapter;Oo.HttpStatusCode=ab;Oo.default=Oo;const{Axios:joe,AxiosError:zoe,CanceledError:$oe,isCancel:Voe,CancelToken:Uoe,VERSION:Hoe,all:Goe,Cancel:Woe,isAxiosError:qoe,spread:Yoe,toFormData:Koe,AxiosHeaders:Zoe,HttpStatusCode:Xoe,formToJSON:Joe,getAdapter:Qoe,mergeConfig:eae}=Oo,pn=Zl({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let yh=null,of=null;const F7=1e3;function Fy(){if(pn.isEnabled){pn.isRecording=!0,pn.startTime=performance.now(),pn.frameCount=0,pn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(yh=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{pn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:xc()})})}),yh.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tches non support",t)}j7(),N_()}}function zv(){pn.isRecording=!1,yh&&(yh.disconnect(),yh=null),tE()}function lb(){yh&&(yh.disconnect(),yh=null),tE(),pn.measures=[],pn.longTasks=[],pn.memorySnapshots=[],pn.operationHistory=[],pn.frameCount=0,pn.framesPerSecond=0,pn.lastFpsUpdate=0,pn.isEnabled&&Fy()}function JC(t,e,n){if(!pn.isEnabled||!pn.isRecording)return()=>{};const r=performance.now(),i=pn.currentOperation;return pn.currentOperation=t,pn.operationStack.push(t),()=>{const s=performance.now()-r;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:t,startTime:r,duration:s,component:e||xc(),info:n,parentOperation:i||void 0}),s>10&&pn.operationHistory.push({operation:t,component:e||xc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function QC(t,e,n,r){if(!pn.isEnabled||!pn.isRecording)return e();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=t,pn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:t,startTime:i,duration:o,component:n||xc(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:t,component:n||xc()||"unknown",durationMs:o,timestamp:Date.now()})}}function eE(t,e,n,r){if(!pn.isEnabled||!pn.isRecording)return e();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=t,pn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:t,startTime:i,duration:o,component:n||xc(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:t,component:n||xc()||"unknown",durationMs:o,timestamp:Date.now()})}}function N_(){!pn.isEnabled||!pn.isRecording||(performance.memory?pn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):pn.memorySnapshots.push({timestamp:performance.now()}))}function j7(){of!==null&&cancelAnimationFrame(of),pn.frameCount=0,pn.lastFpsUpdate=performance.now();function t(){pn.frameCount++;const e=performance.now();e-pn.lastFpsUpdate>=F7&&(pn.framesPerSecond=Math.round(pn.frameCount*1e3/(e-pn.lastFpsUpdate)),pn.frameCount=0,pn.lastFpsUpdate=e),pn.isRecording&&(of=requestAnimationFrame(t))}of=requestAnimationFrame(t)}function tE(){of!==null&&(cancelAnimationFrame(of),of=null)}function xc(){return""}function ub(t){pn.isEnabled=t,t&&!pn.isRecording?Fy():!t&&pn.isRecording&&zv()}function nE(t,e,n){return(...r)=>{if(!pn.isEnabled||!pn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;pn.measures.push({name:e,startTime:i,duration:s,component:n||xc(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:e,component:n||xc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function rE(t,e,n){return async(...r)=>{if(!pn.isEnabled||!pn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;pn.measures.push({name:e,startTime:i,duration:s,component:n||xc(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:e,component:n||xc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function z7(t,e){const n=pn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function cb(t,e){const n=t||pn.startTime,r=e||performance.now(),i=z7(n,r),s=r-n,o=new Map;function a(c){const h=o.get(c.operation)||{duration:0,component:c.component};h.duration+=c.duration,o.set(c.operation,h),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:h,component:p}])=>({operation:c,duration:h,component:p,impact:h/s*100})).sort((c,h)=>h.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function $p(){const t=Lt(!1);no(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,ub(r),lb()}catch(n){console.warn("Erreur lors de la vrification du paramtre perf:",n),t.value=!1,ub(!1)}}),Hu(()=>{pn.isRecording&&zv()});const e=(n,r)=>{if(!pn.isEnabled||!pn.isRecording)return null;const i=pn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=pn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=pn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=pn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:hc(Lt(pn.isEnabled)),isQueryParamEnabled:hc(t),isRecording:hc(Lt(pn.isRecording)),measures:hc(Lt(pn.measures)),longTasks:hc(Lt(pn.longTasks)),memorySnapshots:hc(Lt(pn.memorySnapshots)),framesPerSecond:hc(Lt(pn.framesPerSecond)),operationHistory:hc(Lt(pn.operationHistory)),startRecording:Fy,stopRecording:zv,clearRecording:lb,startMeasure:JC,measure:eE,measureAsync:QC,captureMemorySnapshot:N_,createPerformanceTracker:nE,createAsyncPerformanceTracker:rE,getOperationDetails:e,getSlowOperations:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!pn.isEnabled||!pn.isRecording)return null;const n=cb();return{totalMeasures:pn.measures.length,totalLongTasks:pn.longTasks.length,slowestOperations:[...pn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:pn.framesPerSecond,memoryUsage:pn.memorySnapshots.length>0?pn.memorySnapshots[pn.memorySnapshots.length-1]:null,operationsByComponent:$7(pn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:pn.isRecording?performance.now()-pn.startTime:null}},analyzeCriticalPaths:cb}}function $7(t){if(!pn.isEnabled||!pn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const En={startRecording:Fy,stopRecording:zv,clearRecording:lb,startMeasure:JC,measure:eE,measureAsync:QC,captureMemorySnapshot:N_,createPerformanceTracker:nE,createAsyncPerformanceTracker:rE,setEnabled:ub,analyzeCriticalPaths:cb},Dn=Oo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Nr=$p();function iE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Dn.interceptors.request.use(async t=>{const e=Nr.startMeasure("api_request_interceptor","ApiService");try{const n=iE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Dn.interceptors.response.use(t=>t,async t=>{var r,i;const e=Nr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=to();try{await Nr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=iE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Dn(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function V7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function tv(t){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",e);try{const n=await Ya.getUsers(e);return console.log(`[fetchUsersByHierarchy] Rsultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",n),n}}const Ya={async getUsers(t={}){const e=Nr.startMeasure("get_users","UserService");try{return await Nr.measureAsync("get_users_request",()=>Dn.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await Dn.get(`/users/${t}/`)},async createUser(t){return await Dn.post("/users/",t)},async updateUser(t,e){return await Dn.patch(`/users/${t}/`,e)},async deleteUser(t){return await Dn.delete(`/users/${t}/`)},async getEntreprises(){return await Dn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Dn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Dn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Dn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Nr.startMeasure("get_users_hierarchy","UserService");try{const n=Nr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Nr.measureAsync("get_users_hierarchy_request",()=>Dn.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await Dn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Dn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Dn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Dn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Nr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Nr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Nr.measureAsync("upload_logo_request",()=>Dn.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function U1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} choue, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const y0={async getPlans(){const t=Nr.startMeasure("get_plans","IrrigationService");try{return await Nr.measureAsync("get_plans_request",()=>Dn.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Nr.startMeasure("create_plan","IrrigationService");try{const n=Nr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Nr.measureAsync("create_plan_request",()=>Dn.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Nr.startMeasure("update_plan","IrrigationService");try{return await Nr.measureAsync("update_plan_request",()=>Dn.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Nr.startMeasure("delete_plan","IrrigationService");try{return await Nr.measureAsync("delete_plan_request",()=>Dn.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await Dn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Dn.post("/plans/",t)},async getEntreprisePlans(t){return await Dn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Dn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Dn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Dn.post("/plans/",n)}},da={async getNotes(t={}){const e=Nr.startMeasure("get_notes","NoteService");try{return await Nr.measureAsync("get_notes_request",()=>Dn.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Nr.startMeasure("get_notes_by_plan","NoteService");try{return await Nr.measureAsync("get_notes_by_plan_request",()=>Dn.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Nr.startMeasure("get_note","NoteService");try{return await Nr.measureAsync("get_note_request",()=>Dn.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Nr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Nr.measureAsync("create_note_request",()=>Dn.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise  jour de la note:",{noteId:t,noteData:e});const n=Nr.startMeasure("update_note","NoteService");try{const r=e.backendId||t,i={...e};i.location&&Object.keys(i.location).length===0&&delete i.location,e.column!==void 0?i.column=e.column:e.columnId!==void 0&&(i.column=e.columnId),delete i.columnId,delete i.column_id,delete i.column_details,delete i.backendId,delete i.leafletId,console.log("[noteService][updateNote] Donnes formates:",i),console.log(`[noteService][updateNote] Utilisation de l'ID backend ${r} pour la mise  jour`);const s=await Nr.measureAsync("update_note_request",()=>Dn.patch(`/notes/${r}/`,i),"NoteService");return console.log("[noteService][updateNote] Rponse du serveur:",s.data),s}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",r),r}finally{n()}},async deleteNote(t){const e=Nr.startMeasure("delete_note","NoteService");try{return await Nr.measureAsync("delete_note_request",()=>Dn.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await Dn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await Dn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Dn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Dn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Dn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Dn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Dn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Dn.delete(`/notes/${t}/photos/${e}/`)}},H1={async getDevices(t={}){const e=Nr.startMeasure("get_weather_devices","WeatherService");try{return await U1(()=>Dn.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Nr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await U1(()=>Dn.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Nr.startMeasure("get_history_data","WeatherService");try{return await U1(()=>Dn.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},b0={async getFilters(){const t=Nr.startMeasure("get_map_filters","MapFilterService");try{return await Nr.measureAsync("get_map_filters_request",()=>Dn.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Nr.startMeasure("get_map_filter","MapFilterService");try{return await Nr.measureAsync("get_map_filter_request",()=>Dn.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Nr.startMeasure("create_map_filter","MapFilterService");try{return await Nr.measureAsync("create_map_filter_request",()=>Dn.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Nr.startMeasure("update_map_filter","MapFilterService");try{return await Nr.measureAsync("update_map_filter_request",()=>Dn.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Nr.startMeasure("delete_map_filter","MapFilterService");try{return await Nr.measureAsync("delete_map_filter_request",()=>Dn.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};Dn.defaults.baseURL="/api";Dn.defaults.headers.common["Content-Type"]="application/json";Dn.defaults.withCredentials=!0;function pm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Dn.interceptors.request.use(t=>{const e=pm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Dn.interceptors.response.use(t=>t,async t=>{var r,i;const e=to(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!pm("access_token"))throw new Error("No token available");await e.refreshToken();const o=pm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Dn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function U7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function mu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function H7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const G7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function W7(t){return G7[t]||t}function q7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Y7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function K7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Ya.getUsers(i)).data}const to=Fp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!pm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Dn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Dn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Dn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Dn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!pm("refresh_token"))throw new Error("No refresh token available");const r=await Dn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return U7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await Ya.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la rcupration des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await Ya.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await Ya.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await Ya.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Ya.createUser(t)).data}catch(e){throw this.error="Erreur lors de la cration de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await Ya.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise  jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await Ya.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Dn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Dn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise  jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Dn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Dn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await Ya.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du tlversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await K7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await Ya.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await Ya.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ip=typeof document<"u";function sE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Z7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&sE(t.default)}const Vi=Object.assign;function G1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Lc(i)?i.map(t):t(i)}return n}const Vg=()=>{},Lc=Array.isArray,oE=/#/g,X7=/&/g,J7=/\//g,Q7=/=/g,eB=/\?/g,aE=/\+/g,tB=/%5B/g,nB=/%5D/g,lE=/%5E/g,rB=/%60/g,uE=/%7B/g,iB=/%7C/g,cE=/%7D/g,sB=/%20/g;function O_(t){return encodeURI(""+t).replace(iB,"|").replace(tB,"[").replace(nB,"]")}function oB(t){return O_(t).replace(uE,"{").replace(cE,"}").replace(lE,"^")}function db(t){return O_(t).replace(aE,"%2B").replace(sB,"+").replace(oE,"%23").replace(X7,"%26").replace(rB,"`").replace(uE,"{").replace(cE,"}").replace(lE,"^")}function aB(t){return db(t).replace(Q7,"%3D")}function lB(t){return O_(t).replace(oE,"%23").replace(eB,"%3F")}function uB(t){return t==null?"":lB(t).replace(J7,"%2F")}function gm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const cB=/\/$/,dB=t=>t.replace(cB,"");function W1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=gB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:gm(o)}}function hB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function E4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Pp(e.matched[r],n.matched[i])&&dE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Pp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pB(t[n],e[n]))return!1;return!0}function pB(t,e){return Lc(t)?P4(t,e):Lc(e)?P4(e,t):t===e}function P4(t,e){return Lc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function gB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Kd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mm;(function(t){t.pop="pop",t.push="push"})(mm||(mm={}));var Ug;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ug||(Ug={}));function mB(t){if(!t)if(ip){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dB(t)}const vB=/^[^#]+#/;function yB(t,e){return t.replace(vB,"#")+e}function bB(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const jy=()=>({left:window.scrollX,top:window.scrollY});function _B(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=bB(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function M4(t,e){return(history.state?history.state.position-e:-1)+t}const hb=new Map;function wB(t,e){hb.set(t,e)}function xB(t){const e=hb.get(t);return hb.delete(t),e}let LB=()=>location.protocol+"//"+location.host;function hE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),E4(l,"")}return E4(n,t)+r+i}function SB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=hE(t,location),x=n.value,E=e.value;let k=0;if(v){if(n.value=m,e.value=v,o&&o===x){o=null;return}k=E?v.position-E.position:0}else r(m);i.forEach(T=>{T(n.value,x,{delta:k,type:mm.pop,direction:k?k>0?Ug.forward:Ug.back:Ug.unknown})})};function l(){o=n.value}function c(v){i.push(v);const m=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(m),m}function h(){const{history:v}=window;v.state&&v.replaceState(Vi({},v.state,{scroll:jy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function k4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?jy():null}}function CB(t){const{history:e,location:n}=window,r={value:hE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:LB()+t+l;try{e[h?"replaceState":"pushState"](c,"",v),i.value=c}catch(m){console.error(m),n[h?"replace":"assign"](v)}}function o(l,c){const h=Vi({},e.state,k4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,h,!0),r.value=l}function a(l,c){const h=Vi({},i.value,e.state,{forward:l,scroll:jy()});s(h.current,h,!0);const p=Vi({},k4(r.value,l,null),{position:h.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function EB(t){t=mB(t);const e=CB(t),n=SB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Vi({location:"",base:t,go:r,createHref:yB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function PB(t){return typeof t=="string"||t&&typeof t=="object"}function fE(t){return typeof t=="string"||typeof t=="symbol"}const pE=Symbol("");var A4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(A4||(A4={}));function Mp(t,e){return Vi(new Error,{type:t,[pE]:!0},e)}function yd(t,e){return t instanceof Error&&pE in t&&(e==null||!!(t.type&e))}const T4="[^/]+?",MB={sensitive:!1,strict:!1,start:!0,end:!0},kB=/[.+*?^${}()[\]/\\]/g;function AB(t,e){const n=Vi({},MB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let m=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(kB,"\\$&"),m+=40;else if(v.type===1){const{value:x,repeatable:E,optional:k,regexp:T}=v;s.push({name:x,repeatable:E,optional:k});const A=T||T4;if(A!==T4){m+=10;try{new RegExp(`(${A})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${x}" (${A}): `+Y.message)}}let z=E?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;p||(z=k&&c.length<2?`(?:/${z})`:"/"+z),k&&(z+="?"),i+=z,m+=20,k&&(m+=-8),E&&(m+=-20),A===".*"&&(m+=-50)}h.push(m)}r.push(h)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const h=c.match(o),p={};if(!h)return null;for(let v=1;v<h.length;v++){const m=h[v]||"",x=s[v-1];p[x.name]=m&&x.repeatable?m.split("/"):m}return p}function l(c){let h="",p=!1;for(const v of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const m of v)if(m.type===0)h+=m.value;else if(m.type===1){const{value:x,repeatable:E,optional:k}=m,T=x in c?c[x]:"";if(Lc(T)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const A=Lc(T)?T.join("/"):T;if(!A)if(k)v.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);h+=A}}return h||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function TB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function gE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=TB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(D4(r))return 1;if(D4(i))return-1}return i.length-r.length}function D4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const DB={type:0,value:""},NB=/[a-zA-Z0-9_]/;function OB(t){if(!t)return[[]];if(t==="/")return[[DB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",h="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:NB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function IB(t,e,n){const r=AB(OB(t.path),n),i=Vi(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function BB(t,e){const n=[],r=new Map;e=B4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const x=!m,E=O4(p);E.aliasOf=m&&m.record;const k=B4(e,p),T=[E];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const ne of Y)T.push(O4(Vi({},E,{components:m?m.record.components:E.components,path:ne,aliasOf:m?m.record:E})))}let A,z;for(const Y of T){const{path:ne}=Y;if(v&&ne[0]!=="/"){const ge=v.record.path,pe=ge[ge.length-1]==="/"?"":"/";Y.path=v.record.path+(ne&&pe+ne)}if(A=IB(Y,v,k),m?m.alias.push(A):(z=z||A,z!==A&&z.alias.push(A),x&&p.name&&!I4(A)&&o(p.name)),mE(A)&&l(A),E.children){const ge=E.children;for(let pe=0;pe<ge.length;pe++)s(ge[pe],A,m&&m.children[pe])}m=m||A}return z?()=>{o(z)}:Vg}function o(p){if(fE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=jB(p,n);n.splice(v,0,p),p.record.name&&!I4(p)&&r.set(p.record.name,p)}function c(p,v){let m,x={},E,k;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw Mp(1,{location:p});k=m.record.name,x=Vi(N4(v.params,m.keys.filter(z=>!z.optional).concat(m.parent?m.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&N4(p.params,m.keys.map(z=>z.name))),E=m.stringify(x)}else if(p.path!=null)E=p.path,m=n.find(z=>z.re.test(E)),m&&(x=m.parse(E),k=m.record.name);else{if(m=v.name?r.get(v.name):n.find(z=>z.re.test(v.path)),!m)throw Mp(1,{location:p,currentLocation:v});k=m.record.name,x=Vi({},v.params,p.params),E=m.stringify(x)}const T=[];let A=m;for(;A;)T.unshift(A.record),A=A.parent;return{name:k,path:E,params:x,matched:T,meta:FB(T)}}t.forEach(p=>s(p));function h(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function N4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function O4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function I4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function FB(t){return t.reduce((e,n)=>Vi(e,n.meta),{})}function B4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function jB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;gE(t,e[s])<0?r=s:n=s+1}const i=zB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function zB(t){let e=t;for(;e=e.parent;)if(mE(e)&&gE(t,e)===0)return e}function mE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function $B(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(aE," "),o=s.indexOf("="),a=gm(o<0?s:s.slice(0,o)),l=o<0?null:gm(s.slice(o+1));if(a in e){let c=e[a];Lc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function R4(t){let e="";for(let n in t){const r=t[n];if(n=aB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Lc(r)?r.map(s=>s&&db(s)):[r&&db(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function VB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Lc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const UB=Symbol(""),F4=Symbol(""),zy=Symbol(""),I_=Symbol(""),fb=Symbol("");function eg(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function oh(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(Mp(4,{from:n,to:e})):v instanceof Error?l(v):PB(v)?l(Mp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},h=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(h);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function q1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(sE(l)){const h=(l.__vccOpts||l)[e];h&&s.push(oh(h,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=Z7(h)?h.default:h;o.mods[a]=h,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&oh(m,n,r,o,a,i)()}))}}return s}function j4(t){const e=bu(zy),n=bu(I_),r=Un(()=>{const l=Bn(t.to);return e.resolve(l)}),i=Un(()=>{const{matched:l}=r.value,{length:c}=l,h=l[c-1],p=n.matched;if(!h||!p.length)return-1;const v=p.findIndex(Pp.bind(null,h));if(v>-1)return v;const m=z4(l[c-2]);return c>1&&z4(h)===m&&p[p.length-1].path!==m?p.findIndex(Pp.bind(null,l[c-2])):v}),s=Un(()=>i.value>-1&&qB(n.params,r.value.params)),o=Un(()=>i.value>-1&&i.value===n.matched.length-1&&dE(n.params,r.value.params));function a(l={}){if(WB(l)){const c=e[Bn(t.replace)?"replace":"push"](Bn(t.to)).catch(Vg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Un(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function HB(t){return t.length===1?t[0]:t}const GB=Ss({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:j4,setup(t,{slots:e}){const n=Zl(j4(t)),{options:r}=bu(zy),i=Un(()=>({[$4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[$4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&HB(e.default(n));return t.custom?s:My("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),bg=GB;function WB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Lc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function z4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $4=(t,e,n)=>t??e??n,YB=Ss({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=bu(fb),i=Un(()=>t.route||r.value),s=bu(F4,0),o=Un(()=>{let c=Bn(s);const{matched:h}=i.value;let p;for(;(p=h[c])&&!p.components;)c++;return c}),a=Un(()=>i.value.matched[o.value]);Fg(F4,Un(()=>o.value+1)),Fg(UB,a),Fg(fb,i);const l=Lt();return fi(()=>[l.value,a.value,t.name],([c,h,p],[v,m,x])=>{h&&(h.instances[p]=c,m&&m!==h&&c&&c===v&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!Pp(h,m)||!v)&&(h.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,h=t.name,p=a.value,v=p&&p.components[h];if(!v)return V4(n.default,{Component:v,route:c});const m=p.props[h],x=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=My(v,Vi({},x,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(p.instances[h]=null)},ref:l}));return V4(n.default,{Component:k,route:c})||k}}});function V4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const vE=YB;function KB(t){const e=BB(t.routes,t),n=t.parseQuery||$B,r=t.stringifyQuery||R4,i=t.history,s=eg(),o=eg(),a=eg(),l=p_(Kd);let c=Kd;ip&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=G1.bind(null,ye=>""+ye),p=G1.bind(null,uB),v=G1.bind(null,gm);function m(ye,he){let Q,Ae;return fE(ye)?(Q=e.getRecordMatcher(ye),Ae=he):Ae=ye,e.addRoute(Ae,Q)}function x(ye){const he=e.getRecordMatcher(ye);he&&e.removeRoute(he)}function E(){return e.getRoutes().map(ye=>ye.record)}function k(ye){return!!e.getRecordMatcher(ye)}function T(ye,he){if(he=Vi({},he||l.value),typeof ye=="string"){const ee=W1(n,ye,he.path),oe=e.resolve({path:ee.path},he),le=i.createHref(ee.fullPath);return Vi(ee,oe,{params:v(oe.params),hash:gm(ee.hash),redirectedFrom:void 0,href:le})}let Q;if(ye.path!=null)Q=Vi({},ye,{path:W1(n,ye.path,he.path).path});else{const ee=Vi({},ye.params);for(const oe in ee)ee[oe]==null&&delete ee[oe];Q=Vi({},ye,{params:p(ee)}),he.params=p(he.params)}const Ae=e.resolve(Q,he),De=ye.hash||"";Ae.params=h(v(Ae.params));const Ke=hB(r,Vi({},ye,{hash:oB(De),path:Ae.path})),fe=i.createHref(Ke);return Vi({fullPath:Ke,hash:De,query:r===R4?VB(ye.query):ye.query||{}},Ae,{redirectedFrom:void 0,href:fe})}function A(ye){return typeof ye=="string"?W1(n,ye,l.value.path):Vi({},ye)}function z(ye,he){if(c!==ye)return Mp(8,{from:he,to:ye})}function Y(ye){return pe(ye)}function ne(ye){return Y(Vi(A(ye),{replace:!0}))}function ge(ye){const he=ye.matched[ye.matched.length-1];if(he&&he.redirect){const{redirect:Q}=he;let Ae=typeof Q=="function"?Q(ye):Q;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=A(Ae):{path:Ae},Ae.params={}),Vi({query:ye.query,hash:ye.hash,params:Ae.path!=null?{}:ye.params},Ae)}}function pe(ye,he){const Q=c=T(ye),Ae=l.value,De=ye.state,Ke=ye.force,fe=ye.replace===!0,ee=ge(Q);if(ee)return pe(Vi(A(ee),{state:typeof ee=="object"?Vi({},De,ee.state):De,force:Ke,replace:fe}),he||Q);const oe=Q;oe.redirectedFrom=he;let le;return!Ke&&fB(r,Ae,Q)&&(le=Mp(16,{to:oe,from:Ae}),Ge(Ae,Ae,!0,!1)),(le?Promise.resolve(le):J(oe,Ae)).catch(ze=>yd(ze)?yd(ze,2)?ze:ve(ze):K(ze,oe,Ae)).then(ze=>{if(ze){if(yd(ze,2))return pe(Vi({replace:fe},A(ze.to),{state:typeof ze.to=="object"?Vi({},De,ze.to.state):De,force:Ke}),he||oe)}else ze=B(oe,Ae,!0,fe,De);return V(oe,Ae,ze),ze})}function O(ye,he){const Q=z(ye,he);return Q?Promise.reject(Q):Promise.resolve()}function j(ye){const he=Z.values().next().value;return he&&typeof he.runWithContext=="function"?he.runWithContext(ye):ye()}function J(ye,he){let Q;const[Ae,De,Ke]=ZB(ye,he);Q=q1(Ae.reverse(),"beforeRouteLeave",ye,he);for(const ee of Ae)ee.leaveGuards.forEach(oe=>{Q.push(oh(oe,ye,he))});const fe=O.bind(null,ye,he);return Q.push(fe),de(Q).then(()=>{Q=[];for(const ee of s.list())Q.push(oh(ee,ye,he));return Q.push(fe),de(Q)}).then(()=>{Q=q1(De,"beforeRouteUpdate",ye,he);for(const ee of De)ee.updateGuards.forEach(oe=>{Q.push(oh(oe,ye,he))});return Q.push(fe),de(Q)}).then(()=>{Q=[];for(const ee of Ke)if(ee.beforeEnter)if(Lc(ee.beforeEnter))for(const oe of ee.beforeEnter)Q.push(oh(oe,ye,he));else Q.push(oh(ee.beforeEnter,ye,he));return Q.push(fe),de(Q)}).then(()=>(ye.matched.forEach(ee=>ee.enterCallbacks={}),Q=q1(Ke,"beforeRouteEnter",ye,he,j),Q.push(fe),de(Q))).then(()=>{Q=[];for(const ee of o.list())Q.push(oh(ee,ye,he));return Q.push(fe),de(Q)}).catch(ee=>yd(ee,8)?ee:Promise.reject(ee))}function V(ye,he,Q){a.list().forEach(Ae=>j(()=>Ae(ye,he,Q)))}function B(ye,he,Q,Ae,De){const Ke=z(ye,he);if(Ke)return Ke;const fe=he===Kd,ee=ip?history.state:{};Q&&(Ae||fe?i.replace(ye.fullPath,Vi({scroll:fe&&ee&&ee.scroll},De)):i.push(ye.fullPath,De)),l.value=ye,Ge(ye,he,Q,fe),ve()}let H;function $(){H||(H=i.listen((ye,he,Q)=>{if(!ie.listening)return;const Ae=T(ye),De=ge(Ae);if(De){pe(Vi(De,{replace:!0,force:!0}),Ae).catch(Vg);return}c=Ae;const Ke=l.value;ip&&wB(M4(Ke.fullPath,Q.delta),jy()),J(Ae,Ke).catch(fe=>yd(fe,12)?fe:yd(fe,2)?(pe(Vi(A(fe.to),{force:!0}),Ae).then(ee=>{yd(ee,20)&&!Q.delta&&Q.type===mm.pop&&i.go(-1,!1)}).catch(Vg),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),K(fe,Ae,Ke))).then(fe=>{fe=fe||B(Ae,Ke,!1),fe&&(Q.delta&&!yd(fe,8)?i.go(-Q.delta,!1):Q.type===mm.pop&&yd(fe,20)&&i.go(-1,!1)),V(Ae,Ke,fe)}).catch(Vg)}))}let R=eg(),I=eg(),X;function K(ye,he,Q){ve(ye);const Ae=I.list();return Ae.length?Ae.forEach(De=>De(ye,he,Q)):console.error(ye),Promise.reject(ye)}function _e(){return X&&l.value!==Kd?Promise.resolve():new Promise((ye,he)=>{R.add([ye,he])})}function ve(ye){return X||(X=!ye,$(),R.list().forEach(([he,Q])=>ye?Q(ye):he()),R.reset()),ye}function Ge(ye,he,Q,Ae){const{scrollBehavior:De}=t;if(!ip||!De)return Promise.resolve();const Ke=!Q&&xB(M4(ye.fullPath,0))||(Ae||!Q)&&history.state&&history.state.scroll||null;return Ko().then(()=>De(ye,he,Ke)).then(fe=>fe&&_B(fe)).catch(fe=>K(fe,ye,he))}const se=ye=>i.go(ye);let q;const Z=new Set,ie={currentRoute:l,listening:!0,addRoute:m,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:T,options:t,push:Y,replace:ne,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:I.add,isReady:_e,install(ye){const he=this;ye.component("RouterLink",bg),ye.component("RouterView",vE),ye.config.globalProperties.$router=he,Object.defineProperty(ye.config.globalProperties,"$route",{enumerable:!0,get:()=>Bn(l)}),ip&&!q&&l.value===Kd&&(q=!0,Y(i.location).catch(De=>{}));const Q={};for(const De in Kd)Object.defineProperty(Q,De,{get:()=>l.value[De],enumerable:!0});ye.provide(zy,he),ye.provide(I_,f_(Q)),ye.provide(fb,l);const Ae=ye.unmount;Z.add(ye),ye.unmount=function(){Z.delete(ye),Z.size<1&&(c=Kd,H&&H(),H=null,l.value=Kd,q=!1,X=!1),Ae()}}};function de(ye){return ye.reduce((he,Q)=>he.then(()=>j(Q)),Promise.resolve())}return ie}function ZB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Pp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Pp(c,l))||i.push(l))}return[n,r,i]}function Nm(){return bu(zy)}function XB(t){return bu(I_)}const Kl=Fp("notification",()=>{const t=Lt([]),e=Lt(0),n=Lt(null),r=Un(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const x=++e.value,E=Date.now(),k={id:x,type:p,message:v,duration:m,timestamp:E};return t.value.push(k),n.value=x,m>0&&setTimeout(()=>{c(x)},m),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(m=>m.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function h(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:h,success:s,error:o,info:a,warning:l}}),JB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:Kl},Symbol.toStringTag,{value:"Module"}));var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function QB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var bE=QB,eR=typeof ha=="object"&&ha&&ha.Object===Object&&ha,tR=eR,nR=tR,rR=typeof self=="object"&&self&&self.Object===Object&&self,iR=nR||rR||Function("return this")(),_E=iR,sR=_E,oR=function(){return sR.Date.now()},aR=oR,lR=/\s/;function uR(t){for(var e=t.length;e--&&lR.test(t.charAt(e)););return e}var cR=uR,dR=cR,hR=/^\s+/;function fR(t){return t&&t.slice(0,dR(t)+1).replace(hR,"")}var pR=fR,gR=_E,mR=gR.Symbol,wE=mR,U4=wE,xE=Object.prototype,vR=xE.hasOwnProperty,yR=xE.toString,tg=U4?U4.toStringTag:void 0;function bR(t){var e=vR.call(t,tg),n=t[tg];try{t[tg]=void 0;var r=!0}catch{}var i=yR.call(t);return r&&(e?t[tg]=n:delete t[tg]),i}var _R=bR,wR=Object.prototype,xR=wR.toString;function LR(t){return xR.call(t)}var SR=LR,H4=wE,CR=_R,ER=SR,PR="[object Null]",MR="[object Undefined]",G4=H4?H4.toStringTag:void 0;function kR(t){return t==null?t===void 0?MR:PR:G4&&G4 in Object(t)?CR(t):ER(t)}var AR=kR;function TR(t){return t!=null&&typeof t=="object"}var DR=TR,NR=AR,OR=DR,IR="[object Symbol]";function BR(t){return typeof t=="symbol"||OR(t)&&NR(t)==IR}var RR=BR,FR=pR,W4=bE,jR=RR,q4=NaN,zR=/^[-+]0x[0-9a-f]+$/i,$R=/^0b[01]+$/i,VR=/^0o[0-7]+$/i,UR=parseInt;function HR(t){if(typeof t=="number")return t;if(jR(t))return q4;if(W4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=W4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=FR(t);var n=$R.test(t);return n||VR.test(t)?UR(t.slice(2),n?2:8):zR.test(t)?q4:+t}var GR=HR,WR=bE,Y1=aR,Y4=GR,qR="Expected a function",YR=Math.max,KR=Math.min;function ZR(t,e,n){var r,i,s,o,a,l,c=0,h=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(qR);e=Y4(e)||0,WR(n)&&(h=!!n.leading,p="maxWait"in n,s=p?YR(Y4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function m(ge){var pe=r,O=i;return r=i=void 0,c=ge,o=t.apply(O,pe),o}function x(ge){return c=ge,a=setTimeout(T,e),h?m(ge):o}function E(ge){var pe=ge-l,O=ge-c,j=e-pe;return p?KR(j,s-O):j}function k(ge){var pe=ge-l,O=ge-c;return l===void 0||pe>=e||pe<0||p&&O>=s}function T(){var ge=Y1();if(k(ge))return A(ge);a=setTimeout(T,E(ge))}function A(ge){return a=void 0,v&&r?m(ge):(r=i=void 0,o)}function z(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function Y(){return a===void 0?o:A(Y1())}function ne(){var ge=Y1(),pe=k(ge);if(r=arguments,i=this,l=ge,pe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(T,e),m(l)}return a===void 0&&(a=setTimeout(T,e)),o}return ne.cancel=z,ne.flush=Y,ne}var XR=ZR;const JR=B_(XR),QR={class:"relative w-full"},eF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},tF=["onClick"],K4=Ss({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Lt(""),r=Lt([]),i=e,s=JR(async l=>{if(l.length<3){r.value=[];return}try{const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=h}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ne(),Be("div",QR,[Sn(S("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Pr,n.value]]),r.value.length>0?(Ne(),Be("div",eF,[(Ne(!0),Be(bn,null,Hn(r.value,h=>(Ne(),Be("div",{key:h.place_id,onClick:p=>a(h),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(h.display_name),9,tF))),128))])):Zt("",!0)]))}}),nF={class:"perf-title"},rF={class:"perf-basic-stats"},iF={class:"perf-stat"},sF={class:"perf-stat"},oF={class:"perf-expand-btn"},aF={key:0,class:"perf-content"},lF={class:"perf-section"},uF={class:"perf-metrics"},cF={class:"perf-metric"},dF={class:"perf-metric-value"},hF={class:"perf-metric"},fF={class:"perf-metric-value"},pF={class:"perf-metric"},gF={class:"perf-metric-value"},mF={class:"perf-metric"},vF={class:"perf-metric-value"},yF={class:"perf-section"},bF={class:"perf-metrics"},_F={key:0,class:"perf-metric"},wF={class:"perf-metric-value"},xF={key:1,class:"perf-metric"},LF={class:"perf-metric-value"},SF={key:2,class:"perf-metric"},CF={class:"perf-metric-value"},EF={class:"perf-section"},PF={class:"perf-table"},MF={class:"perf-table-cell"},kF={class:"perf-table-cell"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF=["onClick"],NF={key:0,class:"perf-empty"},OF=Ss({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=Lt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:h,startRecording:p,stopRecording:v,clearRecording:m,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:T}=$p(),A=Un(()=>{const B=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:B.totalMeasures,totalLongTasks:B.totalLongTasks,averageDuration:B.slowestOperations.length>0?B.slowestOperations.reduce((H,$)=>H+$.duration,0)/B.slowestOperations.length:0,fps:B.averageFps,slowestOperations:B.slowestOperations,memoryUsage:B.memoryUsage}}),z=Un(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(H=>({operation:H.name,component:H.component||"unknown",durationMs:H.duration,timestamp:H.startTime}))),Y=Lt(null);no(()=>{i.value&&(Y.value=window.setInterval(()=>{x()},1e3))}),Hu(()=>{Y.value!==null&&clearInterval(Y.value)});function ne(B){return B===void 0?"N/A":B<1024?B+" B":B<1024*1024?(B/1024).toFixed(2)+" KB":B<1024*1024*1024?(B/(1024*1024)).toFixed(2)+" MB":(B/(1024*1024*1024)).toFixed(2)+" GB"}function ge(B){return B.toFixed(2)}const pe=()=>{x()};function O(){const B=k(),H="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(B,null,2)),$=document.createElement("a");$.setAttribute("href",H),$.setAttribute("download","performance_report.json"),document.body.appendChild($),$.click(),$.remove()}function j(){m(),pe()}function J(){const B=k();navigator.clipboard.writeText(JSON.stringify(B,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch(H=>{console.error("Erreur lors de la copie des donnes",H),alert("Erreur lors de la copie des donnes")})}async function V(B){const H=T(B.operation,B.timestamp);if(!H){alert("Impossible de trouver les dtails de cette opration");return}const $={operation:{...H.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(H.operation.startTime).toISOString()},context:{...H.context,relatedOperations:H.context.relatedOperations.map(R=>({...R,startTime:`+${R.startTime.toFixed(2)}ms`})),longTasks:H.context.longTasks.map(R=>({...R,startTime:`+${R.startTime.toFixed(2)}ms`})),memorySnapshots:H.context.memorySnapshots.map(R=>({...R,timestamp:`+${R.timestamp.toFixed(2)}ms`,usedJSHeapSize:R.usedJSHeapSize?ne(R.usedJSHeapSize):"N/A",totalJSHeapSize:R.totalJSHeapSize?ne(R.totalJSHeapSize):"N/A"}))},summary:{...H.summary,memoryDelta:ne(H.summary.memoryDelta),maxLongTaskDuration:`${H.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify($,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(R){console.error("Erreur lors de la copie des dtails",R),alert("Erreur lors de la copie des dtails")}}return(B,H)=>{var $,R,I,X,K,_e;return Bn(i)?(Ne(),Be("div",{key:0,class:gi(["performance-panel",`position-${Bn(n)}`,{expanded:r.value}])},[S("div",{class:"perf-header",onClick:H[0]||(H[0]=ve=>r.value=!r.value)},[S("div",nF,[S("div",{class:gi(["perf-indicator",{active:Bn(s)}])},null,2),H[1]||(H[1]=S("span",null,"Performance",-1))]),S("div",rF,[S("span",iF,kt(A.value.fps)+" FPS",1),S("span",sF,kt(ge(A.value.averageDuration))+"ms",1)]),S("button",oF,kt(r.value?"":""),1)]),r.value?(Ne(),Be("div",aF,[S("div",lF,[H[6]||(H[6]=S("h3",null,"Mtriques gnrales",-1)),S("div",uF,[S("div",cF,[H[2]||(H[2]=S("span",{class:"perf-metric-label"},"Mesures",-1)),S("span",dF,kt(A.value.totalMeasures),1)]),S("div",hF,[H[3]||(H[3]=S("span",{class:"perf-metric-label"},"Tches longues",-1)),S("span",fF,kt(A.value.totalLongTasks),1)]),S("div",pF,[H[4]||(H[4]=S("span",{class:"perf-metric-label"},"Dure moyenne",-1)),S("span",gF,kt(ge(A.value.averageDuration))+"ms",1)]),S("div",mF,[H[5]||(H[5]=S("span",{class:"perf-metric-label"},"FPS",-1)),S("span",vF,kt(A.value.fps),1)])])]),S("div",yF,[H[10]||(H[10]=S("h3",null,"Mmoire",-1)),S("div",bF,[(($=A.value.memoryUsage)==null?void 0:$.usedJSHeapSize)!==void 0?(Ne(),Be("div",_F,[H[7]||(H[7]=S("span",{class:"perf-metric-label"},"Utilise",-1)),S("span",wF,kt(ne((R=A.value.memoryUsage)==null?void 0:R.usedJSHeapSize)),1)])):Zt("",!0),((I=A.value.memoryUsage)==null?void 0:I.totalJSHeapSize)!==void 0?(Ne(),Be("div",xF,[H[8]||(H[8]=S("span",{class:"perf-metric-label"},"Totale",-1)),S("span",LF,kt(ne((X=A.value.memoryUsage)==null?void 0:X.totalJSHeapSize)),1)])):Zt("",!0),((K=A.value.memoryUsage)==null?void 0:K.jsHeapSizeLimit)!==void 0?(Ne(),Be("div",SF,[H[9]||(H[9]=S("span",{class:"perf-metric-label"},"Limite",-1)),S("span",CF,kt(ne((_e=A.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):Zt("",!0)])]),S("div",EF,[H[13]||(H[13]=S("h3",null,"Oprations les plus lentes",-1)),S("div",PF,[H[12]||(H[12]=Gl('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Ne(!0),Be(bn,null,Hn(z.value,ve=>(Ne(),Be("div",{class:"perf-table-row",key:ve.timestamp},[S("div",MF,kt(ve.operation),1),S("div",kF,kt(ve.component),1),S("div",AF,kt(ge(ve.durationMs))+"ms",1),S("div",TF,[S("button",{onClick:Ge=>V(ve),class:"perf-action-button",title:"Copier les dtails"},H[11]||(H[11]=[S("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,DF)])]))),128)),z.value.length===0?(Ne(),Be("div",NF," Aucune opration enregistre ")):Zt("",!0)])]),S("div",{class:"perf-actions"},[S("button",{onClick:j,class:"perf-button"}," Rinitialiser "),S("button",{onClick:O,class:"perf-button"}," Tlcharger "),S("button",{onClick:J,class:"perf-button"}," Copier ")])])):Zt("",!0)],2)):Zt("",!0)}}}),rd=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},IF=rd(OF,[["__scopeId","data-v-fefe39b0"]]),BF={key:0,class:"pwa-update-notification"},RF=Ss({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=Lt(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ne(),Be("div",BF,[S("div",{class:"pwa-update-content"},[o[0]||(o[0]=S("p",null,"Une nouvelle version est disponible",-1)),S("div",{class:"pwa-update-actions"},[S("button",{onClick:r,class:"pwa-update-button"},"Mettre  jour"),S("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Zt("",!0)}}),FF=rd(RF,[["__scopeId","data-v-aa687693"]]),jF="/static/frontend/img/icons/android-chrome-192x192.png",zF={class:"prompt-content"},$F={class:"prompt-body"},VF={key:0,class:"install-instructions ios"},UF={key:1,class:"install-instructions android"},HF={key:2,class:"install-instructions desktop"},GF={key:3,class:"install-instructions desktop"},WF=Ss({__name:"PWAInstallPrompt",setup(t){const e=Lt(!1),n=Lt(!1),r=Lt(null);Lt(null);const i=Lt(!1),s=Lt(!1),o=Lt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(m)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installe avec succs",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},h=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};no(()=>{c()}),kh(()=>{h()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation accepte"),e.value=!1):console.log("Installation refuse")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,x)=>e.value?(Ne(),Be("div",{key:0,class:gi(["pwa-install-prompt",{fullscreen:n.value}])},[S("div",zF,[S("div",{class:"prompt-header"},[x[1]||(x[1]=S("div",{class:"app-info"},[S("img",{src:jF,alt:"TagMap Logo",class:"app-logo"}),S("div",{class:"app-details"},[S("h2",null,"Installer TagMap"),S("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),S("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[S("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),S("div",$F,[i.value?(Ne(),Be("div",VF,x[2]||(x[2]=[Gl('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites dfiler et appuyez sur <strong data-v-48772823>Sur l&#39;cran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut  droite</p></div></div>',4)]))):s.value?(Ne(),Be("div",UF,[x[3]||(x[3]=S("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ne(),Be("div",HF,[x[5]||(x[5]=S("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ne(),Be("div",GF,x[7]||(x[7]=[Gl('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icne d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),S("div",{class:"prompt-footer"},[x[8]||(x[8]=Gl('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Scuris</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),S("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Zt("",!0)}}),qF=rd(WF,[["__scopeId","data-v-48772823"]]),YF={class:"h-screen flex flex-col"},KF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},ZF={class:"mx-auto px-4 sm:px-6 lg:px-8"},XF={class:"flex h-16 items-center justify-between"},JF={class:"flex items-center"},QF={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},t9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},n9={class:"hidden md:flex md:ml-6 space-x-8"},r9={key:0,class:"flex-1 mx-2"},i9={class:"hidden md:block"},s9={class:"md:hidden"},o9={key:1,class:"flex-1"},a9={class:"flex items-center space-x-2 md:space-x-4"},l9={class:"relative"},u9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},c9={class:"flex items-center justify-between w-full"},d9={class:"flex items-center space-x-3"},h9={class:"max-h-72 overflow-y-auto"},f9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},p9={class:"flex items-start"},g9={class:"flex-shrink-0 mr-3"},m9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},v9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},y9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={class:"flex-1"},w9={class:"text-sm md:text-sm text-gray-800"},x9=["onClick"],L9={class:"relative"},S9={class:"hidden md:flex flex-col items-end"},C9={class:"text-sm font-medium text-gray-700"},E9={key:0,class:"text-xs text-gray-500"},P9=["src","alt"],M9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},k9={class:"text-sm font-semibold text-gray-700"},A9={class:"text-xs text-gray-500"},T9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},D9={class:"space-y-1 px-2 pb-3 pt-2"},N9=Ss({__name:"App",setup(t){const e=Nm(),n=to(),r=Kl(),i=Lt(!1),s=Lt(!1),o=Lt(!1),a=Lt(!1),l=Lt(null),c=Lt(!1),h=Lt(!1),p=Lt(null),v=Lt("13px"),m=Lt("65px"),x=Lt(null),E=Lt(null),k=Lt(!1);function T(){h.value=window.innerWidth<768}no(()=>{T(),window.addEventListener("resize",T),window.addEventListener("resize",A),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),kh(()=>{window.removeEventListener("resize",T),window.removeEventListener("resize",A),window.removeEventListener("pwa-update-available",()=>{})});function A(){if(!p.value)return;const R=p.value.getBoundingClientRect();v.value=`${R.top+window.scrollY+5}px`;const I=R.left+R.width/2;m.value=`${window.innerWidth-I-22}px`}const z=Un(()=>{const R=n.user;if(!R)return"";const I=`${R.first_name} ${R.last_name.toUpperCase()}`;return R.company_name?`${I} (${R.company_name})`:I}),Y=Un(()=>{var I;switch((I=n.user)==null?void 0:I.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),ne=Un(()=>{var R;return((R=n.user)==null?void 0:R.user_type)==="admin"}),ge=Un(()=>n.isAuthenticated),pe=[{name:"Carte",to:"/"},{name:"Mto",to:"/meteo"},{name:"Notes",to:"/notes"}],O=Un(()=>{var I;if(!ge.value)return[];const R=[...pe];return(ne.value||((I=n.user)==null?void 0:I.user_type)==="entreprise")&&R.push({name:"Utilisateurs",to:"/users"}),R}),j=Un(()=>ge.value?[{name:"Mon profil",to:"/profile"}]:[]);async function J(){try{await n.logout(),e.push("/login")}catch(R){console.error("Erreur lors de la dconnexion:",R)}}function V(R){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:R.lat,lng:R.lng,zoom:16}}))}no(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const I=localStorage.getItem("lastPlanId");I&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:I}}))}else console.log("No token found")}catch(R){console.error("Auth check error:",R),e.push("/login")}});const B=Un(()=>{const R="TagMap";if(!ge.value)return`${R} - Connexion`;const I=e.currentRoute.value,K={home:"Carte",meteo:"Mto",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[I.name]||"";return K?`${R} - ${K}`:R});fi(B,R=>{document.title=R},{immediate:!0});const H=Un(()=>r.notifications.length);function $(){r.clearAll(),o.value=!1}return dm(()=>{if(r.lastAddedId!==null){const R=r.notifications.find(I=>I.id===r.lastAddedId);R&&Ko(()=>{A(),a.value=!0,l.value={id:R.id,message:R.message,type:R.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var I;((I=l.value)==null?void 0:I.id)===R.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(R,I)=>{var X;return Ne(),Be("div",YF,[ge.value?(Ne(),Be("header",KF,[S("nav",ZF,[S("div",XF,[S("div",JF,[S("button",{onClick:I[0]||(I[0]=K=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[I[7]||(I[7]=S("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ne(),Be("svg",QF,[s.value?(Ne(),Be("path",t9)):(Ne(),Be("path",e9))]))]),ti(Bn(bg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:zu(()=>I[8]||(I[8]=[S("span",{class:"md:inline hidden"},"TagMap",-1),S("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),S("div",n9,[(Ne(!0),Be(bn,null,Hn(O.value,K=>(Ne(),Vo(Bn(bg),{key:K.name,to:K.to,class:gi(["text-sm font-medium transition-colors duration-200",[R.$route.path===K.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:zu(()=>[Gr(kt(K.name),1)]),_:2},1032,["to","class"]))),128))])]),R.$route.path==="/"?(Ne(),Be("div",r9,[S("div",i9,[ti(K4,{onSelectLocation:V})]),S("div",s9,[ti(K4,{onSelectLocation:V,class:"max-w-full"})])])):(Ne(),Be("div",o9)),S("div",a9,[S("div",l9,[S("button",{ref_key:"bellButtonRef",ref:p,onClick:I[1]||(I[1]=K=>o.value=!o.value),class:gi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},I[9]||(I[9]=[S("span",{class:"sr-only"},"Voir les notifications",-1),S("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ne(),Be("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:ql(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",u9,[S("div",c9,[I[11]||(I[11]=S("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),S("div",d9,[H.value>0?(Ne(),Be("button",{key:0,onClick:$,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Zt("",!0),S("button",{onClick:I[2]||(I[2]=K=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},I[10]||(I[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),S("div",h9,[H.value===0?(Ne(),Be("div",f9," Aucune notification ")):Zt("",!0),(Ne(!0),Be(bn,null,Hn(Bn(r).notifications,K=>(Ne(),Be("div",{key:K.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[S("div",p9,[S("div",g9,[K.type==="success"?(Ne(),Be("svg",m9,I[12]||(I[12]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):K.type==="error"?(Ne(),Be("svg",v9,I[13]||(I[13]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):K.type==="warning"?(Ne(),Be("svg",y9,I[14]||(I[14]=[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ne(),Be("svg",b9,I[15]||(I[15]=[S("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),S("div",_9,[S("p",w9,kt(K.message),1),S("button",{onClick:_e=>Bn(r).removeNotification(K.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,x9)])])]))),128))])],4)):Zt("",!0)]),S("div",L9,[S("button",{onClick:I[3]||(I[3]=K=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[S("div",S9,[S("span",C9,kt(z.value),1),Y.value?(Ne(),Be("span",E9,kt(Y.value),1)):Zt("",!0)]),S("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((X=Bn(n).user)==null?void 0:X.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(z.value),alt:z.value},null,8,P9)]),i.value?(Ne(),Be("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:ql(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",M9,[S("div",null,[S("div",k9,kt(z.value),1),S("div",A9,kt(Y.value),1)]),S("button",{onClick:I[4]||(I[4]=K=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},I[16]||(I[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ne(!0),Be(bn,null,Hn(j.value,K=>(Ne(),Vo(Bn(bg),{key:K.name,to:K.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:I[5]||(I[5]=_e=>i.value=!1)},{default:zu(()=>[Gr(kt(K.name),1)]),_:2},1032,["to"]))),128)),S("button",{onClick:J,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):Zt("",!0)])])]),s.value?(Ne(),Be("div",T9,[S("div",D9,[(Ne(!0),Be(bn,null,Hn(O.value,K=>(Ne(),Vo(Bn(bg),{key:K.name,to:K.to,class:gi(["block px-3 py-2 rounded-md text-base font-medium",[R.$route.path===K.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:I[6]||(I[6]=_e=>s.value=!1)},{default:zu(()=>[Gr(kt(K.name),1)]),_:2},1032,["to","class"]))),128))])])):Zt("",!0)])])):Zt("",!0),S("main",{class:gi([R.$route.path==="/"&&!h.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[ti(Bn(vE))],2),ti(IF,{position:"bottom-left"}),ti(FF,{ref_key:"pwaUpdateNotification",ref:x},null,512),ti(qF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),O9="modulepreload",I9=function(t){return"/static/frontend/"+t},Z4={},kd=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=I9(l),l in Z4)return;Z4[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":O9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},B9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},R9={class:"max-w-md w-full space-y-8"},F9={class:"space-y-4"},j9={class:"mt-1"},z9={class:"mt-1"},$9={class:"mt-1"},V9={key:0,class:"rounded-md bg-red-50 p-4"},U9={class:"flex"},H9={class:"ml-3"},G9={class:"text-sm font-medium text-red-800"},W9={key:1,class:"rounded-md bg-yellow-50 p-4"},q9={class:"flex"},Y9={class:"ml-3"},K9={class:"mt-2 text-sm text-yellow-700"},Z9={class:"list-disc pl-5 space-y-1"},X9=["disabled"],J9={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Q9={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ej={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tj=Ss({__name:"ChangePasswordForm",setup(t){const e=Nm(),n=to(),r=Zl({oldPassword:"",newPassword:"",confirmPassword:""}),i=Lt(!1),s=Lt("");no(()=>{var c,h;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(h=n.user)==null?void 0:h.must_change_password})});const o=Un(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Un(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,h,p,v,m,x,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(T){console.error("Password change failed:",T),(p=(h=T.response)==null?void 0:h.data)!=null&&p.detail?s.value=T.response.data.detail:(m=(v=T.response)==null?void 0:v.data)!=null&&m.old_password?s.value=T.response.data.old_password[0]:(E=(x=T.response)==null?void 0:x.data)!=null&&E.password?s.value=T.response.data.password[0]:((k=T.response)==null?void 0:k.status)===401?(s.value="Session expire, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,h)=>(Ne(),Be("div",B9,[S("div",R9,[h[12]||(h[12]=S("div",null,[S("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),S("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),S("form",{class:"mt-8 space-y-6",onSubmit:Wl(l,["prevent"])},[S("div",F9,[S("div",null,[h[3]||(h[3]=S("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),S("div",j9,[Sn(S("input",{id:"old-password","onUpdate:modelValue":h[0]||(h[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Pr,r.oldPassword]])])]),S("div",null,[h[4]||(h[4]=S("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),S("div",z9,[Sn(S("input",{id:"new-password","onUpdate:modelValue":h[1]||(h[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Pr,r.newPassword]])]),h[5]||(h[5]=S("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),S("div",null,[h[6]||(h[6]=S("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),S("div",$9,[Sn(S("input",{id:"confirm-password","onUpdate:modelValue":h[2]||(h[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Pr,r.confirmPassword]])])])]),s.value?(Ne(),Be("div",V9,[S("div",U9,[h[7]||(h[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",H9,[S("h3",G9,kt(s.value),1)])])])):Zt("",!0),o.value.length>0?(Ne(),Be("div",W9,[S("div",q9,[h[9]||(h[9]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),S("div",Y9,[h[8]||(h[8]=S("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),S("div",K9,[S("ul",Z9,[(Ne(!0),Be(bn,null,Hn(o.value,(p,v)=>(Ne(),Be("li",{key:v},kt(p),1))),128))])])])])])):Zt("",!0),S("div",null,[S("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[S("span",J9,[i.value?(Ne(),Be("svg",ej,h[11]||(h[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),Be("svg",Q9,h[10]||(h[10]=[S("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Gr(" "+kt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,X9)])],32)])]))}}),nj="/static/frontend/assets/background.svg",rj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},ij={class:"container mx-auto relative z-10"},sj={class:"sm:mx-auto sm:w-full sm:max-w-md"},oj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},aj={key:0,class:"rounded-md bg-red-50 p-4"},lj={class:"flex"},uj={class:"ml-3"},cj={class:"text-sm font-medium text-red-800"},dj={class:"mt-1"},hj={class:"mt-1 relative"},fj=["type"],pj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mj={class:"flex items-center justify-between"},vj={class:"flex items-center"},yj={class:"text-sm"},bj=["disabled"],_j={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xj={class:"mt-12"},Lj={class:"flex flex-wrap justify-center gap-2 mb-8"},Sj=["onClick"],Cj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ej={class:"flex items-center mb-4"},Pj={class:"text-2xl mr-2"},Mj={class:"text-xl font-semibold text-gray-900"},kj={class:"text-gray-600 text-sm"},Aj={key:0,class:"flex justify-center mt-8 gap-2"},Tj=["onClick"],K1=6,Dj=Ss({__name:"LoginView",setup(t){const e=Nm(),n=to(),r=Lt(!1),i=Lt(null),s=Lt(!1),o=Lt("Tous"),a=Lt(1),l=Zl({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],h=Un(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Un(()=>{let x=o.value==="Tous"?c:c.filter(T=>T.sector===o.value);const E=(a.value-1)*K1,k=E+K1;return x.slice(E,k)}),v=Un(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/K1)});no(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var x,E,k,T,A,z,Y,ne,ge;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(pe){console.error("Login error:",pe),((E=pe==null?void 0:pe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((k=pe==null?void 0:pe.response)==null?void 0:k.status)===401||((T=pe==null?void 0:pe.response)==null?void 0:T.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(z=(A=pe==null?void 0:pe.response)==null?void 0:A.data)!=null&&z.detail?i.value=pe.response.data.detail:(ge=(ne=(Y=pe==null?void 0:pe.response)==null?void 0:Y.data)==null?void 0:ne.non_field_errors)!=null&&ge[0]?i.value=pe.response.data.non_field_errors[0]:(pe==null?void 0:pe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(x,E)=>{const k=yS("router-link");return Ne(),Be("div",rj,[S("div",{class:"fixed inset-0 z-0",style:ql({backgroundImage:`url(${Bn(nj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=S("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),S("div",ij,[S("div",sj,[S("div",oj,[E[12]||(E[12]=S("div",{class:"text-center mb-8"},[S("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),S("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),S("form",{class:"space-y-6",onSubmit:Wl(m,["prevent"])},[i.value?(Ne(),Be("div",aj,[S("div",lj,[E[4]||(E[4]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",uj,[S("h3",cj,kt(i.value),1)])])])):Zt("",!0),S("div",null,[E[5]||(E[5]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),S("div",dj,[Sn(S("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=T=>l.username=T),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Pr,l.username]])])]),S("div",null,[E[8]||(E[8]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),S("div",hj,[Sn(S("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=T=>l.password=T),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,fj),[[k_,l.password]]),S("button",{type:"button",onClick:E[2]||(E[2]=T=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ne(),Be("svg",pj,E[6]||(E[6]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ne(),Be("svg",gj,E[7]||(E[7]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),S("div",mj,[S("div",vj,[Sn(S("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=T=>l.rememberMe=T),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[yl,l.rememberMe]]),E[9]||(E[9]=S("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),S("div",yj,[ti(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:zu(()=>E[10]||(E[10]=[Gr(" Mot de passe oubli ? ")])),_:1})])]),S("div",null,[S("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ne(),Be("svg",_j,E[11]||(E[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),Gr(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,bj)])],32)])]),S("div",wj,[E[14]||(E[14]=Gl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station mto</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accs Scuris</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),S("div",xj,[E[13]||(E[13]=S("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),S("div",Lj,[(Ne(!0),Be(bn,null,Hn(h.value,T=>(Ne(),Be("button",{key:T,onClick:A=>o.value=T,class:gi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===T?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(T),11,Sj))),128))]),S("div",Cj,[(Ne(!0),Be(bn,null,Hn(p.value,T=>(Ne(),Be("div",{key:T.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[S("div",Ej,[S("span",Pj,kt(T.icon),1),S("span",Mj,kt(T.type),1)]),S("p",kj,kt(T.text),1)]))),128))]),v.value>1?(Ne(),Be("div",Aj,[(Ne(!0),Be(bn,null,Hn(v.value,T=>(Ne(),Be("button",{key:T,onClick:A=>a.value=T,class:gi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===T?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(T),11,Tj))),128))])):Zt("",!0)])]),E[15]||(E[15]=S("div",{class:"h-16"},null,-1))])])}}}),Nj=rd(Dj,[["__scopeId","data-v-9ff7ee32"]]),Oj="/static/frontend/assets/logo.svg";var pb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(ha,function(n){var r="1.9.4";function i(u){var y,P,G,ue;for(P=1,G=arguments.length;P<G;P++){ue=arguments[P];for(y in ue)u[y]=ue[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var G=P.call(arguments,2);return function(){return u.apply(y,G.length?G.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var G,ue,Ee,ut;return ut=function(){G=!1,ue&&(Ee.apply(P,ue),ue=!1)},Ee=function(){G?ue=arguments:(u.apply(P,arguments),setTimeout(ut,y),G=!0)},Ee}function h(u,y,P){var G=y[1],ue=y[0],Ee=G-ue;return u===G&&P?u:((u-ue)%Ee+Ee)%Ee+ue}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return m(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function k(u,y,P){var G=[];for(var ue in u)G.push(encodeURIComponent(P?ue.toUpperCase():ue)+"="+encodeURIComponent(u[ue]));return(!y||y.indexOf("?")===-1?"?":"&")+G.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function A(u,y){return u.replace(T,function(P,G){var ue=y[G];if(ue===void 0)throw new Error("No value provided for variable "+P);return typeof ue=="function"&&(ue=ue(y)),ue})}var z=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function Y(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var ne="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var pe=0;function O(u){var y=+new Date,P=Math.max(0,16-(y-pe));return pe=y+P,window.setTimeout(u,P)}var j=window.requestAnimationFrame||ge("RequestAnimationFrame")||O,J=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function V(u,y,P){if(P&&j===O)u.call(y);else return j.call(window,o(u,y))}function B(u){u&&J.call(window,u)}var H={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:h,falseFn:p,formatNum:v,trim:m,splitWords:x,setOptions:E,getParamString:k,template:A,isArray:z,indexOf:Y,emptyImageUrl:ne,requestFn:j,cancelFn:J,requestAnimFrame:V,cancelAnimFrame:B};function $(){}$.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,G=s(P);G.constructor=y,y.prototype=G;for(var ue in this)Object.prototype.hasOwnProperty.call(this,ue)&&ue!=="prototype"&&ue!=="__super__"&&(y[ue]=this[ue]);return u.statics&&i(y,u.statics),u.includes&&(R(u.includes),i.apply(null,[G].concat(u.includes))),i(G,u),delete G.statics,delete G.includes,G.options&&(G.options=P.options?s(P.options):{},i(G.options,u.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ee=0,ut=G._initHooks.length;Ee<ut;Ee++)G._initHooks[Ee].call(this)}},y},$.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},$.mergeOptions=function(u){return i(this.prototype.options,u),this},$.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function R(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=z(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var I={on:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y);else{u=x(u);for(var ue=0,Ee=u.length;ue<Ee;ue++)this._on(u[ue],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var G in u)this._off(G,u[G],y);else{u=x(u);for(var ue=arguments.length===1,Ee=0,ut=u.length;Ee<ut;Ee++)ue?this._off(u[Ee]):this._off(u[Ee],y,P)}return this},_on:function(u,y,P,G){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var ue={fn:y,ctx:P};G&&(ue.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ue)}},_off:function(u,y,P){var G,ue,Ee;if(this._events&&(G=this._events[u],!!G)){if(arguments.length===1){if(this._firingCount)for(ue=0,Ee=G.length;ue<Ee;ue++)G[ue].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ut=this._listens(u,y,P);if(ut!==!1){var Nt=G[ut];this._firingCount&&(Nt.fn=p,this._events[u]=G=G.slice()),G.splice(ut,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var G=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ue=this._events[u];if(ue){this._firingCount=this._firingCount+1||1;for(var Ee=0,ut=ue.length;Ee<ut;Ee++){var Nt=ue[Ee],Gt=Nt.fn;Nt.once&&this.off(u,Gt,Nt.ctx),Gt.call(Nt.ctx||this,G)}this._firingCount--}}return P&&this._propagateEvent(G),this},listens:function(u,y,P,G){typeof u!="string"&&console.warn('"string" type argument expected');var ue=y;typeof y!="function"&&(G=!!y,ue=void 0,P=void 0);var Ee=this._events&&this._events[u];if(Ee&&Ee.length&&this._listens(u,ue,P)!==!1)return!0;if(G){for(var ut in this._eventParents)if(this._eventParents[ut].listens(u,y,P,G))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var G=this._events[u]||[];if(!y)return!!G.length;P===this&&(P=void 0);for(var ue=0,Ee=G.length;ue<Ee;ue++)if(G[ue].fn===y&&G[ue].ctx===P)return ue;return!1},once:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y,!0);else{u=x(u);for(var ue=0,Ee=u.length;ue<Ee;ue++)this._on(u[ue],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var X=$.extend(I);function K(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(u){return this.clone()._add(ve(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(ve(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new K(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new K(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=ve(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=ve(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=ve(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ve(u,y,P){return u instanceof K?u:z(u)?new K(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new K(u.x,u.y):new K(u,y,P)}function Ge(u,y){if(u)for(var P=y?[u,y]:u,G=0,ue=P.length;G<ue;G++)this.extend(P[G])}Ge.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof K||typeof u[0]=="number"||"x"in u)y=P=ve(u);else if(u=se(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof K?u=ve(u):u=se(u),u instanceof Ge?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=se(u);var y=this.min,P=this.max,G=u.min,ue=u.max,Ee=ue.x>=y.x&&G.x<=P.x,ut=ue.y>=y.y&&G.y<=P.y;return Ee&&ut},overlaps:function(u){u=se(u);var y=this.min,P=this.max,G=u.min,ue=u.max,Ee=ue.x>y.x&&G.x<P.x,ut=ue.y>y.y&&G.y<P.y;return Ee&&ut},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,G=Math.abs(y.x-P.x)*u,ue=Math.abs(y.y-P.y)*u;return se(ve(y.x-G,y.y-ue),ve(P.x+G,P.y+ue))},equals:function(u){return u?(u=se(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function se(u,y){return!u||u instanceof Ge?u:new Ge(u,y)}function q(u,y){if(u)for(var P=y?[u,y]:u,G=0,ue=P.length;G<ue;G++)this.extend(P[G])}q.prototype={extend:function(u){var y=this._southWest,P=this._northEast,G,ue;if(u instanceof ie)G=u,ue=u;else if(u instanceof q){if(G=u._southWest,ue=u._northEast,!G||!ue)return this}else return u?this.extend(de(u)||Z(u)):this;return!y&&!P?(this._southWest=new ie(G.lat,G.lng),this._northEast=new ie(ue.lat,ue.lng)):(y.lat=Math.min(G.lat,y.lat),y.lng=Math.min(G.lng,y.lng),P.lat=Math.max(ue.lat,P.lat),P.lng=Math.max(ue.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,G=Math.abs(y.lat-P.lat)*u,ue=Math.abs(y.lng-P.lng)*u;return new q(new ie(y.lat-G,y.lng-ue),new ie(P.lat+G,P.lng+ue))},getCenter:function(){return new ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof ie||"lat"in u?u=de(u):u=Z(u);var y=this._southWest,P=this._northEast,G,ue;return u instanceof q?(G=u.getSouthWest(),ue=u.getNorthEast()):G=ue=u,G.lat>=y.lat&&ue.lat<=P.lat&&G.lng>=y.lng&&ue.lng<=P.lng},intersects:function(u){u=Z(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ue=u.getNorthEast(),Ee=ue.lat>=y.lat&&G.lat<=P.lat,ut=ue.lng>=y.lng&&G.lng<=P.lng;return Ee&&ut},overlaps:function(u){u=Z(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ue=u.getNorthEast(),Ee=ue.lat>y.lat&&G.lat<P.lat,ut=ue.lng>y.lng&&G.lng<P.lng;return Ee&&ut},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=Z(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(u,y){return u instanceof q?u:new q(u,y)}function ie(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}ie.prototype={equals:function(u,y){if(!u)return!1;u=de(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return he.distance(this,de(u))},wrap:function(){return he.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return Z([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new ie(this.lat,this.lng,this.alt)}};function de(u,y,P){return u instanceof ie?u:z(u)&&typeof u[0]!="object"?u.length===3?new ie(u[0],u[1],u[2]):u.length===2?new ie(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new ie(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new ie(u,y,P)}var ye={latLngToPoint:function(u,y){var P=this.projection.project(u),G=this.scale(y);return this.transformation._transform(P,G)},pointToLatLng:function(u,y){var P=this.scale(y),G=this.transformation.untransform(u,P);return this.projection.unproject(G)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),G=this.transformation.transform(y.min,P),ue=this.transformation.transform(y.max,P);return new Ge(G,ue)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,G=u.alt;return new ie(P,y,G)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),G=y.lat-P.lat,ue=y.lng-P.lng;if(G===0&&ue===0)return u;var Ee=u.getSouthWest(),ut=u.getNorthEast(),Nt=new ie(Ee.lat-G,Ee.lng-ue),Gt=new ie(ut.lat-G,ut.lng-ue);return new q(Nt,Gt)}},he=i({},ye,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,G=u.lat*P,ue=y.lat*P,Ee=Math.sin((y.lat-u.lat)*P/2),ut=Math.sin((y.lng-u.lng)*P/2),Nt=Ee*Ee+Math.cos(G)*Math.cos(ue)*ut*ut,Gt=2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt));return this.R*Gt}}),Q=6378137,Ae={R:Q,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,G=Math.max(Math.min(P,u.lat),-P),ue=Math.sin(G*y);return new K(this.R*u.lng*y,this.R*Math.log((1+ue)/(1-ue))/2)},unproject:function(u){var y=180/Math.PI;return new ie((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=Q*Math.PI;return new Ge([-u,-u],[u,u])}()};function De(u,y,P,G){if(z(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=G}De.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new K((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function Ke(u,y,P,G){return new De(u,y,P,G)}var fe=i({},he,{code:"EPSG:3857",projection:Ae,transformation:function(){var u=.5/(Math.PI*Ae.R);return Ke(u,.5,-u,.5)}()}),ee=i({},fe,{code:"EPSG:900913"});function oe(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function le(u,y){var P="",G,ue,Ee,ut,Nt,Gt;for(G=0,Ee=u.length;G<Ee;G++){for(Nt=u[G],ue=0,ut=Nt.length;ue<ut;ue++)Gt=Nt[ue],P+=(ue?"L":"M")+Gt.x+" "+Gt.y;P+=y?qt.svg?"z":"x":""}return P||"M0 0"}var ze=document.documentElement.style,$e="ActiveXObject"in window,Je=$e&&!document.addEventListener,Me="msLaunchUri"in navigator&&!("documentMode"in document),me=tn("webkit"),qe=tn("android"),ct=tn("android 2")||tn("android 3"),ft=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Mt=qe&&tn("Google")&&ft<537&&!("AudioNode"in window),it=!!window.opera,jt=!Me&&tn("chrome"),hn=tn("gecko")&&!me&&!it&&!$e,Ze=!jt&&tn("safari"),lt=tn("phantom"),rt="OTransition"in ze,$t=navigator.platform.indexOf("Win")===0,Qt=$e&&"transition"in ze,Pn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ct,wn="MozPerspective"in ze,xn=!window.L_DISABLE_3D&&(Qt||Pn||wn)&&!rt&&!lt,$n=typeof orientation<"u"||tn("mobile"),en=$n&&me,_n=$n&&Pn,Cn=!window.PointerEvent&&window.MSPointerEvent,qn=!!(window.PointerEvent||Cn),nr="ontouchstart"in window||!!window.TouchEvent,rr=!window.L_NO_TOUCH&&(nr||qn),Jn=$n&&it,Mr=$n&&hn,as=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ji=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),ro=function(){return!!document.createElement("canvas").getContext}(),Cs=!!(document.createElementNS&&oe("svg").createSVGRect),ot=!!Cs&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),nt=!Cs&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),Ht=navigator.platform.indexOf("Mac")===0,kn=navigator.platform.indexOf("Linux")===0;function tn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var qt={ie:$e,ielt9:Je,edge:Me,webkit:me,android:qe,android23:ct,androidStock:Mt,opera:it,chrome:jt,gecko:hn,safari:Ze,phantom:lt,opera12:rt,win:$t,ie3d:Qt,webkit3d:Pn,gecko3d:wn,any3d:xn,mobile:$n,mobileWebkit:en,mobileWebkit3d:_n,msPointer:Cn,pointer:qn,touch:rr,touchNative:nr,mobileOpera:Jn,mobileGecko:Mr,retina:as,passiveEvents:ji,canvas:ro,svg:Cs,vml:nt,inlineSvg:ot,mac:Ht,linux:kn},Wt=qt.msPointer?"MSPointerDown":"pointerdown",ir=qt.msPointer?"MSPointerMove":"pointermove",St=qt.msPointer?"MSPointerUp":"pointerup",gn=qt.msPointer?"MSPointerCancel":"pointercancel",Qn={touchstart:Wt,touchmove:ir,touchend:St,touchcancel:gn},ar={touchstart:Ui,touchmove:Xi,touchend:Xi,touchcancel:Xi},ur={},vn=!1;function cn(u,y,P){return y==="touchstart"&&cr(),ar[y]?(P=ar[y].bind(this,P),u.addEventListener(Qn[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function ri(u,y,P){if(!Qn[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Qn[y],P,!1)}function Li(u){ur[u.pointerId]=u}function zi(u){ur[u.pointerId]&&(ur[u.pointerId]=u)}function Fr(u){delete ur[u.pointerId]}function cr(){vn||(document.addEventListener(Wt,Li,!0),document.addEventListener(ir,zi,!0),document.addEventListener(St,Fr,!0),document.addEventListener(gn,Fr,!0),vn=!0)}function Xi(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in ur)y.touches.push(ur[P]);y.changedTouches=[y],u(y)}}function Ui(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&vr(y),Xi(u,y)}function Hi(u){var y={},P,G;for(G in u)P=u[G],y[G]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var ls=200;function vs(u,y){u.addEventListener("dblclick",y);var P=0,G;function ue(Ee){if(Ee.detail!==1){G=Ee.detail;return}if(!(Ee.pointerType==="mouse"||Ee.sourceCapabilities&&!Ee.sourceCapabilities.firesTouchEvents)){var ut=ll(Ee);if(!(ut.some(function(Gt){return Gt instanceof HTMLLabelElement&&Gt.attributes.for})&&!ut.some(function(Gt){return Gt instanceof HTMLInputElement||Gt instanceof HTMLSelectElement}))){var Nt=Date.now();Nt-P<=ls?(G++,G===2&&y(Hi(Ee))):G=1,P=Nt}}}return u.addEventListener("click",ue),{dblclick:y,simDblclick:ue}}function Es(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var Rs=xl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fs=xl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ji=Fs==="webkitTransition"||Fs==="OTransition"?Fs+"End":"transitionend";function Wr(u){return typeof u=="string"?document.getElementById(u):u}function ys(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(u,null);P=G?G[y]:null}return P==="auto"?null:P}function jr(u,y,P){var G=document.createElement(u);return G.className=y||"",P&&P.appendChild(G),G}function fr(u){var y=u.parentNode;y&&y.removeChild(u)}function dr(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Ti(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function Si(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function io(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=js(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function br(u,y){if(u.classList!==void 0)for(var P=x(y),G=0,ue=P.length;G<ue;G++)u.classList.add(P[G]);else if(!io(u,y)){var Ee=js(u);rl(u,(Ee?Ee+" ":"")+y)}}function Qr(u,y){u.classList!==void 0?u.classList.remove(y):rl(u,m((" "+js(u)+" ").replace(" "+y+" "," ")))}function rl(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function js(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function zs(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&qu(u,y)}function qu(u,y){var P=!1,G="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(G)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+G+"(opacity="+y+")"}function xl(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function ka(u,y,P){var G=y||new K(0,0);u.style[Rs]=(qt.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(P?" scale("+P+")":"")}function Gi(u,y){u._leaflet_pos=y,qt.any3d?ka(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Qo(u){return u._leaflet_pos||new K(0,0)}var il,Io,wu;if("onselectstart"in document)il=function(){_r(window,"selectstart",vr)},Io=function(){Zr(window,"selectstart",vr)};else{var sl=xl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);il=function(){if(sl){var u=document.documentElement.style;wu=u[sl],u[sl]="none"}},Io=function(){sl&&(document.documentElement.style[sl]=wu,wu=void 0)}}function Yu(){_r(window,"dragstart",vr)}function ea(){Zr(window,"dragstart",vr)}var Aa,ol;function Jl(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(bs(),Aa=u,ol=u.style.outlineStyle,u.style.outlineStyle="none",_r(window,"keydown",bs))}function bs(){Aa&&(Aa.style.outlineStyle=ol,Aa=void 0,ol=void 0,Zr(window,"keydown",bs))}function Pc(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function xu(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var gr={__proto__:null,TRANSFORM:Rs,TRANSITION:Fs,TRANSITION_END:Ji,get:Wr,getStyle:ys,create:jr,remove:fr,empty:dr,toFront:Ti,toBack:Si,hasClass:io,addClass:br,removeClass:Qr,setClass:rl,getClass:js,setOpacity:zs,testProp:xl,setTransform:ka,setPosition:Gi,getPosition:Qo,get disableTextSelection(){return il},get enableTextSelection(){return Io},disableImageDrag:Yu,enableImageDrag:ea,preventOutline:Jl,restoreOutline:bs,getSizedParentNode:Pc,getScale:xu};function _r(u,y,P,G){if(y&&typeof y=="object")for(var ue in y)Sl(u,ue,y[ue],P);else{y=x(y);for(var Ee=0,ut=y.length;Ee<ut;Ee++)Sl(u,y[Ee],P,G)}return this}var ta="_leaflet_events";function Zr(u,y,P,G){if(arguments.length===1)Ku(u),delete u[ta];else if(y&&typeof y=="object")for(var ue in y)na(u,ue,y[ue],P);else if(y=x(y),arguments.length===2)Ku(u,function(Nt){return Y(y,Nt)!==-1});else for(var Ee=0,ut=y.length;Ee<ut;Ee++)na(u,y[Ee],P,G);return this}function Ku(u,y){for(var P in u[ta]){var G=P.split(/\d/)[0];(!y||y(G))&&na(u,G,null,null,P)}}var Ll={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Sl(u,y,P,G){var ue=y+l(P)+(G?"_"+l(G):"");if(u[ta]&&u[ta][ue])return this;var Ee=function(Nt){return P.call(G||u,Nt||window.event)},ut=Ee;!qt.touchNative&&qt.pointer&&y.indexOf("touch")===0?Ee=cn(u,y,Ee):qt.touch&&y==="dblclick"?Ee=vs(u,Ee):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(Ll[y]||y,Ee,qt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Ee=function(Nt){Nt=Nt||window.event,Cl(u,Nt)&&ut(Nt)},u.addEventListener(Ll[y],Ee,!1)):u.addEventListener(y,ut,!1):u.attachEvent("on"+y,Ee),u[ta]=u[ta]||{},u[ta][ue]=Ee}function na(u,y,P,G,ue){ue=ue||y+l(P)+(G?"_"+l(G):"");var Ee=u[ta]&&u[ta][ue];if(!Ee)return this;!qt.touchNative&&qt.pointer&&y.indexOf("touch")===0?ri(u,y,Ee):qt.touch&&y==="dblclick"?Es(u,Ee):"removeEventListener"in u?u.removeEventListener(Ll[y]||y,Ee,!1):u.detachEvent("on"+y,Ee),u[ta][ue]=null}function al(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Zu(u){return Sl(u,"wheel",al),this}function Ql(u){return _r(u,"mousedown touchstart dblclick contextmenu",al),u._leaflet_disable_click=!0,this}function vr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Or(u){return vr(u),al(u),this}function ll(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function Mc(u,y){if(!y)return new K(u.clientX,u.clientY);var P=xu(y),G=P.boundingClientRect;return new K((u.clientX-G.left)/P.x-y.clientLeft,(u.clientY-G.top)/P.y-y.clientTop)}var eu=qt.linux&&qt.chrome?window.devicePixelRatio:qt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lu(u){return qt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/eu:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Cl(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var tu={__proto__:null,on:_r,off:Zr,stopPropagation:al,disableScrollPropagation:Zu,disableClickPropagation:Ql,preventDefault:vr,stop:Or,getPropagationPath:ll,getMousePosition:Mc,getWheelDelta:Lu,isExternalTarget:Cl,addListener:_r,removeListener:Zr},Su=X.extend({run:function(u,y,P,G){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=Qo(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),Gi(this._el,P),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),zr=X.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(de(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fs&&qt.any3d&&!qt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_r(this._proxy,Ji,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(de(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var G=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var G=this.getZoomScale(y),ue=this.getSize().divideBy(2),Ee=u instanceof K?u:this.latLngToContainerPoint(u),ut=Ee.subtract(ue).multiplyBy(1-1/G),Nt=this.containerPointToLatLng(ue.add(ut));return this.setView(Nt,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():Z(u);var P=ve(y.paddingTopLeft||y.padding||[0,0]),G=ve(y.paddingBottomRight||y.padding||[0,0]),ue=this.getBoundsZoom(u,!1,P.add(G));if(ue=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ue):ue,ue===1/0)return{center:u.getCenter(),zoom:ue};var Ee=G.subtract(P).divideBy(2),ut=this.project(u.getSouthWest(),ue),Nt=this.project(u.getNorthEast(),ue),Gt=this.unproject(ut.add(Nt).divideBy(2).add(Ee),ue);return{center:Gt,zoom:ue}},fitBounds:function(u,y){if(u=Z(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=ve(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Su,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){br(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!qt.any3d)return this.setView(u,y,P);this._stop();var G=this.project(this.getCenter()),ue=this.project(u),Ee=this.getSize(),ut=this._zoom;u=de(u),y=y===void 0?ut:y;var Nt=Math.max(Ee.x,Ee.y),Gt=Nt*this.getZoomScale(ut,y),an=ue.distanceTo(G)||1,On=1.42,Yn=On*On;function kr(ii){var Ys=ii?-1:1,Ie=ii?Gt:Nt,So=Gt*Gt-Nt*Nt+Ys*Yn*Yn*an*an,Qu=2*Ie*Yn*an,Ns=So/Qu,Dr=Math.sqrt(Ns*Ns+1)-Ns,$d=Dr<1e-9?-18:Math.log(Dr);return $d}function hs(ii){return(Math.exp(ii)-Math.exp(-ii))/2}function Wi(ii){return(Math.exp(ii)+Math.exp(-ii))/2}function Ds(ii){return hs(ii)/Wi(ii)}var Ii=kr(0);function Lo(ii){return Nt*(Wi(Ii)/Wi(Ii+On*ii))}function od(ii){return Nt*(Wi(Ii)*Ds(Ii+On*ii)-hs(Ii))/Yn}function La(ii){return 1-Math.pow(1-ii,1.5)}var la=Date.now(),Wo=(kr(1)-Ii)/On,Th=P.duration?1e3*P.duration:1e3*Wo*.8;function Pu(){var ii=(Date.now()-la)/Th,Ys=La(ii)*Wo;ii<=1?(this._flyToFrame=V(Pu,this),this._move(this.unproject(G.add(ue.subtract(G).multiplyBy(od(Ys)/an)),ut),this.getScaleZoom(Nt/Lo(Ys),ut),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Pu.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=Z(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),G=this._limitCenter(P,this._zoom,Z(u));return P.equals(G)||this.panTo(G,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=ve(y.paddingTopLeft||y.padding||[0,0]),G=ve(y.paddingBottomRight||y.padding||[0,0]),ue=this.project(this.getCenter()),Ee=this.project(u),ut=this.getPixelBounds(),Nt=se([ut.min.add(P),ut.max.subtract(G)]),Gt=Nt.getSize();if(!Nt.contains(Ee)){this._enforcingBounds=!0;var an=Ee.subtract(Nt.getCenter()),On=Nt.extend(Ee).getSize().subtract(Gt);ue.x+=an.x<0?-On.x:On.x,ue.y+=an.y<0?-On.y:On.y,this.panTo(this.unproject(ue),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),G=y.divideBy(2).round(),ue=P.divideBy(2).round(),Ee=G.subtract(ue);return!Ee.x&&!Ee.y?this:(u.animate&&u.pan?this.panBy(Ee):(u.pan&&this._rawPanBy(Ee),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,G=new ie(y,P),ue=G.toBounds(u.coords.accuracy*2),Ee=this._locateOptions;if(Ee.setView){var ut=this.getBoundsZoom(ue);this.setView(G,Ee.maxZoom?Math.min(ut,Ee.maxZoom):ut)}var Nt={latlng:G,bounds:ue,timestamp:u.timestamp};for(var Gt in u.coords)typeof u.coords[Gt]=="number"&&(Nt[Gt]=u.coords[Gt]);this.fire("locationfound",Nt)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)fr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),G=jr("div",P,y||this._mapPane);return u&&(this._panes[u]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new q(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=Z(u),P=ve(P||[0,0]);var G=this.getZoom()||0,ue=this.getMinZoom(),Ee=this.getMaxZoom(),ut=u.getNorthWest(),Nt=u.getSouthEast(),Gt=this.getSize().subtract(P),an=se(this.project(Nt,G),this.project(ut,G)).getSize(),On=qt.any3d?this.options.zoomSnap:1,Yn=Gt.x/an.x,kr=Gt.y/an.y,hs=y?Math.max(Yn,kr):Math.min(Yn,kr);return G=this.getScaleZoom(hs,G),On&&(G=Math.round(G/(On/100))*(On/100),G=y?Math.ceil(G/On)*On:Math.floor(G/On)*On),Math.max(ue,Math.min(Ee,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new Ge(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var G=P.zoom(u*P.scale(y));return isNaN(G)?1/0:G},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(de(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(ve(u),y)},layerPointToLatLng:function(u){var y=ve(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(de(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(de(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(Z(u))},distance:function(u,y){return this.options.crs.distance(de(u),de(y))},containerPointToLayerPoint:function(u){return ve(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return ve(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(ve(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(u)))},mouseEventToContainerPoint:function(u){return Mc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Wr(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_r(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&qt.any3d,br(u,"leaflet-container"+(qt.touch?" leaflet-touch":"")+(qt.retina?" leaflet-retina":"")+(qt.ielt9?" leaflet-oldie":"")+(qt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=ys(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Gi(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(br(u.markerPane,"leaflet-zoom-hide"),br(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){Gi(this._mapPane,new K(0,0));var G=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ue=this._zoom!==y;this._moveStart(ue,P)._move(u,y)._moveEnd(ue),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,G){y===void 0&&(y=this._zoom);var ue=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),G?P&&P.pinch&&this.fire("zoom",P):((ue||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Gi(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Zr:_r;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),qt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],G,ue=y==="mouseout"||y==="mouseover",Ee=u.target||u.srcElement,ut=!1;Ee;){if(G=this._targets[l(Ee)],G&&(y==="click"||y==="preclick")&&this._draggableMoved(G)){ut=!0;break}if(G&&G.listens(y,!0)&&(ue&&!Cl(Ee,u)||(P.push(G),ue))||Ee===this._container)break;Ee=Ee.parentNode}return!P.length&&!ut&&!ue&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&Jl(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var G=i({},u);G.type="preclick",this._fireDOMEvent(G,G.type,P)}var ue=this._findEventTargets(u,y);if(P){for(var Ee=[],ut=0;ut<P.length;ut++)P[ut].listens(y,!0)&&Ee.push(P[ut]);ue=Ee.concat(ue)}if(ue.length){y==="contextmenu"&&vr(u);var Nt=ue[0],Gt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var an=Nt.getLatLng&&(!Nt._radius||Nt._radius<=10);Gt.containerPoint=an?this.latLngToContainerPoint(Nt.getLatLng()):this.mouseEventToContainerPoint(u),Gt.layerPoint=this.containerPointToLayerPoint(Gt.containerPoint),Gt.latlng=an?Nt.getLatLng():this.layerPointToLatLng(Gt.layerPoint)}for(ut=0;ut<ue.length;ut++)if(ue[ut].fire(y,Gt,!0),Gt.originalEvent._stopped||ue[ut].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Qo(this._mapPane)||new K(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(G)},_latLngBoundsToNewLayerBounds:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return se([this.project(u.getSouthWest(),y)._subtract(G),this.project(u.getNorthWest(),y)._subtract(G),this.project(u.getSouthEast(),y)._subtract(G),this.project(u.getNorthEast(),y)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var G=this.project(u,y),ue=this.getSize().divideBy(2),Ee=new Ge(G.subtract(ue),G.add(ue)),ut=this._getBoundsOffset(Ee,P,y);return Math.abs(ut.x)<=1&&Math.abs(ut.y)<=1?u:this.unproject(G.add(ut),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),G=new Ge(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(G,y))},_getBoundsOffset:function(u,y,P){var G=se(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),ue=G.min.subtract(u.min),Ee=G.max.subtract(u.max),ut=this._rebound(ue.x,-Ee.x),Nt=this._rebound(ue.y,-Ee.y);return new K(ut,Nt)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),G=qt.any3d?this.options.zoomSnap:1;return G&&(u=Math.round(u/G)*G),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=jr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=Rs,G=this._proxy.style[P];ka(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),G===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();ka(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(y),ue=this._getCenterOffset(u)._divideBy(1-1/G);return P.animate!==!0&&!this.getSize().contains(ue)?!1:(V(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,G){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,br(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qi(u,y){return new zr(u,y)}var sr=$.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),G=u._controlCorners[P];return br(y,"leaflet-control"),P.indexOf("bottom")!==-1?G.insertBefore(y,G.firstChild):G.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),es=function(u){return new sr(u)};zr.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=jr("div",y+"control-container",this._container);function G(ue,Ee){var ut=y+ue+" "+y+Ee;u[ue+Ee]=jr("div",ut,P)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)fr(this._controlCorners[u]);fr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var El=sr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,G){return P<G?-1:G<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in u)this._addLayer(u[G],G);for(G in y)this._addLayer(y[G],G,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return sr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){br(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(br(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Qr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=jr("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Ql(y),Zu(y);var G=this._section=jr("section",u+"-list");P&&(this._map.on("click",this.collapse,this),_r(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ue=this._layersLink=jr("a",u+"-toggle",y);ue.href="#",ue.title="Layers",ue.setAttribute("role","button"),_r(ue,{keydown:function(Ee){Ee.keyCode===13&&this._expandSafely()},click:function(Ee){vr(Ee),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=jr("div",u+"-base",G),this._separator=jr("div",u+"-separator",G),this._overlaysList=jr("div",u+"-overlays",G),y.appendChild(G)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(G,ue){return this.options.sortFunction(G.layer,ue.layer,G.name,ue.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dr(this._baseLayersList),dr(this._overlaysList),this._layerControlInputs=[];var u,y,P,G,ue=0;for(P=0;P<this._layers.length;P++)G=this._layers[P],this._addItem(G),y=y||G.overlay,u=u||!G.overlay,ue+=G.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ue>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=P,G.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),G;u.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=P):G=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(G),G.layerId=l(u.layer),_r(G,"click",this._onInputClick,this);var ue=document.createElement("span");ue.innerHTML=" "+u.name;var Ee=document.createElement("span");y.appendChild(Ee),Ee.appendChild(G),Ee.appendChild(ue);var ut=u.overlay?this._overlaysList:this._baseLayersList;return ut.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,G=[],ue=[];this._handlingClick=!0;for(var Ee=u.length-1;Ee>=0;Ee--)y=u[Ee],P=this._getLayer(y.layerId).layer,y.checked?G.push(P):y.checked||ue.push(P);for(Ee=0;Ee<ue.length;Ee++)this._map.hasLayer(ue[Ee])&&this._map.removeLayer(ue[Ee]);for(Ee=0;Ee<G.length;Ee++)this._map.hasLayer(G[Ee])||this._map.addLayer(G[Ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,G=this._map.getZoom(),ue=u.length-1;ue>=0;ue--)y=u[ue],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&G<P.options.minZoom||P.options.maxZoom!==void 0&&G>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,_r(u,"click",vr),this.expand();var y=this;setTimeout(function(){Zr(u,"click",vr),y._preventClick=!1})}}),Ta=function(u,y,P){return new El(u,y,P)},Di=sr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=jr("div",y+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,G,ue){var Ee=jr("a",P,G);return Ee.innerHTML=u,Ee.href="#",Ee.title=y,Ee.setAttribute("role","button"),Ee.setAttribute("aria-label",y),Ql(Ee),_r(Ee,"click",Or),_r(Ee,"click",ue,this),_r(Ee,"click",this._refocusOnMap,this),Ee},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";Qr(this._zoomInButton,y),Qr(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(br(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(br(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});zr.mergeOptions({zoomControl:!0}),zr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var Cu=function(u){return new Di(u)},pa=sr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=jr("div",y),G=this.options;return this._addScales(G,y+"-line",P),u.on(G.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=jr("div",y,P)),u.imperial&&(this._iScale=jr("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,G,ue;y>5280?(P=y/5280,G=this._getRoundNum(P),this._updateScale(this._iScale,G+" mi",G/P)):(ue=this._getRoundNum(y),this._updateScale(this._iScale,ue+" ft",ue/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),nu=function(u){return new pa(u)},ru='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ho=sr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(qt.inlineSvg?ru+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=jr("div","leaflet-control-attribution"),Ql(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});zr.mergeOptions({attributionControl:!0}),zr.addInitHook(function(){this.options.attributionControl&&new Ho().addTo(this)});var iu=function(u){return new Ho(u)};sr.Layers=El,sr.Zoom=Di,sr.Scale=pa,sr.Attribution=Ho,es.layers=Ta,es.zoom=Cu,es.scale=nu,es.attribution=iu;var ai=$.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ai.addTo=function(u,y){return u.addHandler(y,this),this};var kc={Events:I},Ps=qt.touch?"touchstart mousedown":"mousedown",ra=X.extend({options:{clickTolerance:3},initialize:function(u,y,P,G){E(this,G),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(_r(this._dragStartTarget,Ps,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ra._dragging===this&&this.finishDrag(!0),Zr(this._dragStartTarget,Ps,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!io(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ra._dragging===this&&this.finishDrag();return}if(!(ra._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ra._dragging=this,this._preventOutline&&Jl(this._element),Yu(),il(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=Pc(this._element);this._startPoint=new K(y.clientX,y.clientY),this._startPos=Qo(this._element),this._parentScale=xu(P);var G=u.type==="mousedown";_r(document,G?"mousemove":"touchmove",this._onMove,this),_r(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new K(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,vr(u),this._moved||(this.fire("dragstart"),this._moved=!0,br(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),br(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Gi(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Qr(document.body,"leaflet-dragging"),this._lastTarget&&(Qr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Zr(document,"mousemove touchmove",this._onMove,this),Zr(document,"mouseup touchend touchcancel",this._onUp,this),ea(),Io();var y=this._moved&&this._moving;this._moving=!1,ra._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function su(u,y,P){var G,ue=[1,4,2,8],Ee,ut,Nt,Gt,an,On,Yn,kr;for(Ee=0,On=u.length;Ee<On;Ee++)u[Ee]._code=Vt(u[Ee],y);for(Nt=0;Nt<4;Nt++){for(Yn=ue[Nt],G=[],Ee=0,On=u.length,ut=On-1;Ee<On;ut=Ee++)Gt=u[Ee],an=u[ut],Gt._code&Yn?an._code&Yn||(kr=Pt(an,Gt,Yn,y,P),kr._code=Vt(kr,y),G.push(kr)):(an._code&Yn&&(kr=Pt(an,Gt,Yn,y,P),kr._code=Vt(kr,y),G.push(kr)),G.push(Gt));u=G}return u}function ia(u,y){var P,G,ue,Ee,ut,Nt,Gt,an,On;if(!u||u.length===0)throw new Error("latlngs not passed");Rn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Yn=de([0,0]),kr=Z(u),hs=kr.getNorthWest().distanceTo(kr.getSouthWest())*kr.getNorthEast().distanceTo(kr.getNorthWest());hs<1700&&(Yn=Pl(u));var Wi=u.length,Ds=[];for(P=0;P<Wi;P++){var Ii=de(u[P]);Ds.push(y.project(de([Ii.lat-Yn.lat,Ii.lng-Yn.lng])))}for(Nt=Gt=an=0,P=0,G=Wi-1;P<Wi;G=P++)ue=Ds[P],Ee=Ds[G],ut=ue.y*Ee.x-Ee.y*ue.x,Gt+=(ue.x+Ee.x)*ut,an+=(ue.y+Ee.y)*ut,Nt+=ut*3;Nt===0?On=Ds[0]:On=[Gt/Nt,an/Nt];var Lo=y.unproject(ve(On));return de([Lo.lat+Yn.lat,Lo.lng+Yn.lng])}function Pl(u){for(var y=0,P=0,G=0,ue=0;ue<u.length;ue++){var Ee=de(u[ue]);y+=Ee.lat,P+=Ee.lng,G++}return de([y/G,P/G])}var Ml={__proto__:null,clipPolygon:su,polygonCenter:ia,centroid:Pl};function li(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=xe(u,P),u=ts(u,P),u}function Bo(u,y,P){return Math.sqrt(Nn(u,y,P,!0))}function Da(u,y,P){return Nn(u,y,P)}function ts(u,y){var P=u.length,G=typeof Uint8Array<"u"?Uint8Array:Array,ue=new G(P);ue[0]=ue[P-1]=1,F(u,ue,y,0,P-1);var Ee,ut=[];for(Ee=0;Ee<P;Ee++)ue[Ee]&&ut.push(u[Ee]);return ut}function F(u,y,P,G,ue){var Ee=0,ut,Nt,Gt;for(Nt=G+1;Nt<=ue-1;Nt++)Gt=Nn(u[Nt],u[G],u[ue],!0),Gt>Ee&&(ut=Nt,Ee=Gt);Ee>P&&(y[ut]=1,F(u,y,P,G,ut),F(u,y,P,ut,ue))}function xe(u,y){for(var P=[u[0]],G=1,ue=0,Ee=u.length;G<Ee;G++)dn(u[G],u[ue])>y&&(P.push(u[G]),ue=G);return ue<Ee-1&&P.push(u[Ee-1]),P}var Qe;function pt(u,y,P,G,ue){var Ee=G?Qe:Vt(u,P),ut=Vt(y,P),Nt,Gt,an;for(Qe=ut;;){if(!(Ee|ut))return[u,y];if(Ee&ut)return!1;Nt=Ee||ut,Gt=Pt(u,y,Nt,P,ue),an=Vt(Gt,P),Nt===Ee?(u=Gt,Ee=an):(y=Gt,ut=an)}}function Pt(u,y,P,G,ue){var Ee=y.x-u.x,ut=y.y-u.y,Nt=G.min,Gt=G.max,an,On;return P&8?(an=u.x+Ee*(Gt.y-u.y)/ut,On=Gt.y):P&4?(an=u.x+Ee*(Nt.y-u.y)/ut,On=Nt.y):P&2?(an=Gt.x,On=u.y+ut*(Gt.x-u.x)/Ee):P&1&&(an=Nt.x,On=u.y+ut*(Nt.x-u.x)/Ee),new K(an,On,ue)}function Vt(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function dn(u,y){var P=y.x-u.x,G=y.y-u.y;return P*P+G*G}function Nn(u,y,P,G){var ue=y.x,Ee=y.y,ut=P.x-ue,Nt=P.y-Ee,Gt=ut*ut+Nt*Nt,an;return Gt>0&&(an=((u.x-ue)*ut+(u.y-Ee)*Nt)/Gt,an>1?(ue=P.x,Ee=P.y):an>0&&(ue+=ut*an,Ee+=Nt*an)),ut=u.x-ue,Nt=u.y-Ee,G?ut*ut+Nt*Nt:new K(ue,Ee)}function Rn(u){return!z(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function er(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rn(u)}function pr(u,y){var P,G,ue,Ee,ut,Nt,Gt,an;if(!u||u.length===0)throw new Error("latlngs not passed");Rn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var On=de([0,0]),Yn=Z(u),kr=Yn.getNorthWest().distanceTo(Yn.getSouthWest())*Yn.getNorthEast().distanceTo(Yn.getNorthWest());kr<1700&&(On=Pl(u));var hs=u.length,Wi=[];for(P=0;P<hs;P++){var Ds=de(u[P]);Wi.push(y.project(de([Ds.lat-On.lat,Ds.lng-On.lng])))}for(P=0,G=0;P<hs-1;P++)G+=Wi[P].distanceTo(Wi[P+1])/2;if(G===0)an=Wi[0];else for(P=0,Ee=0;P<hs-1;P++)if(ut=Wi[P],Nt=Wi[P+1],ue=ut.distanceTo(Nt),Ee+=ue,Ee>G){Gt=(Ee-G)/ue,an=[Nt.x-Gt*(Nt.x-ut.x),Nt.y-Gt*(Nt.y-ut.y)];break}var Ii=y.unproject(ve(an));return de([Ii.lat+On.lat,Ii.lng+On.lng])}var Ar={__proto__:null,simplify:li,pointToSegmentDistance:Bo,closestPointOnSegment:Da,clipSegment:pt,_getEdgeIntersection:Pt,_getBitCode:Vt,_sqClosestPointOnSegment:Nn,isFlat:Rn,_flat:er,polylineCenter:pr},Mi={project:function(u){return new K(u.lng,u.lat)},unproject:function(u){return new ie(u.y,u.x)},bounds:new Ge([-180,-90],[180,90])},ni={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ge([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,G=u.lat*y,ue=this.R_MINOR/P,Ee=Math.sqrt(1-ue*ue),ut=Ee*Math.sin(G),Nt=Math.tan(Math.PI/4-G/2)/Math.pow((1-ut)/(1+ut),Ee/2);return G=-P*Math.log(Math.max(Nt,1e-10)),new K(u.lng*y*P,G)},unproject:function(u){for(var y=180/Math.PI,P=this.R,G=this.R_MINOR/P,ue=Math.sqrt(1-G*G),Ee=Math.exp(-u.y/P),ut=Math.PI/2-2*Math.atan(Ee),Nt=0,Gt=.1,an;Nt<15&&Math.abs(Gt)>1e-7;Nt++)an=ue*Math.sin(ut),an=Math.pow((1-an)/(1+an),ue/2),Gt=Math.PI/2-2*Math.atan(Ee*an)-ut,ut+=Gt;return new ie(ut*y,u.x*y/P)}},ui={__proto__:null,LonLat:Mi,Mercator:ni,SphericalMercator:Ae},ns=i({},he,{code:"EPSG:3395",projection:ni,transformation:function(){var u=.5/(Math.PI*ni.R);return Ke(u,.5,-u,.5)}()}),us=i({},he,{code:"EPSG:4326",projection:Mi,transformation:Ke(1/180,1,-1/180,.5)}),Ro=i({},ye,{projection:Mi,transformation:Ke(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,G=y.lat-u.lat;return Math.sqrt(P*P+G*G)},infinite:!0});ye.Earth=he,ye.EPSG3395=ns,ye.EPSG3857=fe,ye.EPSG900913=ee,ye.EPSG4326=us,ye.Simple=Ro;var Tr=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});zr.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?z(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var G in this._zoomBoundLayers){var ue=this._zoomBoundLayers[G].options;u=ue.minZoom===void 0?u:Math.min(u,ue.minZoom),y=ue.maxZoom===void 0?y:Math.max(y,ue.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $s=Tr.extend({initialize:function(u,y){E(this,y),this._layers={};var P,G;if(u)for(P=0,G=u.length;P<G;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,G;for(P in this._layers)G=this._layers[P],G[u]&&G[u].apply(G,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),kl=function(u,y){return new $s(u,y)},so=$s.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),$s.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),$s.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new q;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Eu=function(u,y){return new so(u,y)},ga=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(G,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(u,y){var P=this.options,G=P[y+"Size"];typeof G=="number"&&(G=[G,G]);var ue=ve(G),Ee=ve(y==="shadow"&&P.shadowAnchor||P.iconAnchor||ue&&ue.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Ee&&(u.style.marginLeft=-Ee.x+"px",u.style.marginTop=-Ee.y+"px"),ue&&(u.style.width=ue.x+"px",u.style.height=ue.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return qt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Xu(u){return new ga(u)}var ul=ga.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof ul.imagePath!="string"&&(ul.imagePath=this._detectIconPath()),(this.options.imagePath||ul.imagePath)+ga.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,G,ue){var Ee=G.exec(P);return Ee&&Ee[ue]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=jr("div","leaflet-default-icon-path",document.body),y=ys(u,"background-image")||ys(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),cl=ai.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ra(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),br(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,G=this._marker.options.autoPanSpeed,ue=this._marker.options.autoPanPadding,Ee=Qo(y._icon),ut=P.getPixelBounds(),Nt=P.getPixelOrigin(),Gt=se(ut.min._subtract(Nt).add(ue),ut.max._subtract(Nt).subtract(ue));if(!Gt.contains(Ee)){var an=ve((Math.max(Gt.max.x,Ee.x)-Gt.max.x)/(ut.max.x-Gt.max.x)-(Math.min(Gt.min.x,Ee.x)-Gt.min.x)/(ut.min.x-Gt.min.x),(Math.max(Gt.max.y,Ee.y)-Gt.max.y)/(ut.max.y-Gt.max.y)-(Math.min(Gt.min.y,Ee.y)-Gt.min.y)/(ut.min.y-Gt.min.y)).multiplyBy(G);P.panBy(an,{animate:!1}),this._draggable._newPos._add(an),this._draggable._startPos._add(an),Gi(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=V(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,G=Qo(y._icon),ue=y._map.layerPointToLatLng(G);P&&Gi(P,G),y._latlng=ue,u.latlng=ue,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),cs=Tr.extend({options:{icon:new ul,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=de(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=de(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),G=!1;P!==this._icon&&(this._icon&&this._removeIcon(),G=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),br(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_r(P,"focus",this._panOnFocus,this);var ue=u.icon.createShadow(this._shadow),Ee=!1;ue!==this._shadow&&(this._removeShadow(),Ee=!0),ue&&(br(ue,y),ue.alt=""),this._shadow=ue,u.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),ue&&Ee&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zr(this._icon,"focus",this._panOnFocus,this),fr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Gi(this._icon,u),this._shadow&&Gi(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(br(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),cl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&zs(this._icon,u),this._shadow&&zs(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?ve(y.iconSize):ve(0,0),G=y.iconAnchor?ve(y.iconAnchor):ve(0,0);u.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:P.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ma(u,y){return new cs(u,y)}var Fo=Tr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_o=Fo.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=de(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=de(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Fo.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),G=[u+P,y+P];this._pxBounds=new Ge(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Al(u,y){return new _o(u,y)}var Vs=_o.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=de(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Fo.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,G=P.options.crs;if(G.distance===he.distance){var ue=Math.PI/180,Ee=this._mRadius/he.R/ue,ut=P.project([y+Ee,u]),Nt=P.project([y-Ee,u]),Gt=ut.add(Nt).divideBy(2),an=P.unproject(Gt).lat,On=Math.acos((Math.cos(Ee*ue)-Math.sin(y*ue)*Math.sin(an*ue))/(Math.cos(y*ue)*Math.cos(an*ue)))/ue;(isNaN(On)||On===0)&&(On=Ee/Math.cos(Math.PI/180*y)),this._point=Gt.subtract(P.getPixelOrigin()),this._radius=isNaN(On)?0:Gt.x-P.project([an,u-On]).x,this._radiusY=Gt.y-ut.y}else{var Yn=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(Yn).x}this._updateBounds()}});function oo(u,y,P){return new Vs(u,y,P)}var ao=Fo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,G=Nn,ue,Ee,ut=0,Nt=this._parts.length;ut<Nt;ut++)for(var Gt=this._parts[ut],an=1,On=Gt.length;an<On;an++){ue=Gt[an-1],Ee=Gt[an];var Yn=G(u,ue,Ee,!0);Yn<y&&(y=Yn,P=G(u,ue,Ee))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=de(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new q,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Rn(u),G=0,ue=u.length;G<ue;G++)P?(y[G]=de(u[G]),this._bounds.extend(y[G])):y[G]=this._convertLatLngs(u[G]);return y},_project:function(){var u=new Ge;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new K(u,u);this._rawPxBounds&&(this._pxBounds=new Ge([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var G=u[0]instanceof ie,ue=u.length,Ee,ut;if(G){for(ut=[],Ee=0;Ee<ue;Ee++)ut[Ee]=this._map.latLngToLayerPoint(u[Ee]),P.extend(ut[Ee]);y.push(ut)}else for(Ee=0;Ee<ue;Ee++)this._projectLatlngs(u[Ee],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,G,ue,Ee,ut,Nt,Gt;for(P=0,ue=0,Ee=this._rings.length;P<Ee;P++)for(Gt=this._rings[P],G=0,ut=Gt.length;G<ut-1;G++)Nt=pt(Gt[G],Gt[G+1],u,G,!0),Nt&&(y[ue]=y[ue]||[],y[ue].push(Nt[0]),(Nt[1]!==Gt[G+1]||G===ut-2)&&(y[ue].push(Nt[1]),ue++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,G=u.length;P<G;P++)u[P]=li(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,G,ue,Ee,ut,Nt,Gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Ee=this._parts.length;P<Ee;P++)for(Nt=this._parts[P],G=0,ut=Nt.length,ue=ut-1;G<ut;ue=G++)if(!(!y&&G===0)&&Bo(u,Nt[ue],Nt[G])<=Gt)return!0;return!1}});function Ac(u,y){return new ao(u,y)}ao._flat=er;var _s=ao.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ia(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=ao.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof ie&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){ao.prototype._setLatLngs.call(this,u),Rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new K(y,y);if(u=new Ge(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,ue=this._rings.length,Ee;G<ue;G++)Ee=su(this._rings[G],u,!0),Ee.length&&this._parts.push(Ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,G,ue,Ee,ut,Nt,Gt,an;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Ee=0,Gt=this._parts.length;Ee<Gt;Ee++)for(P=this._parts[Ee],ut=0,an=P.length,Nt=an-1;ut<an;Nt=ut++)G=P[ut],ue=P[Nt],G.y>u.y!=ue.y>u.y&&u.x<(ue.x-G.x)*(u.y-G.y)/(ue.y-G.y)+G.x&&(y=!y);return y||ao.prototype._containsPoint.call(this,u,!0)}});function Na(u,y){return new _s(u,y)}var Us=so.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=z(u)?u:u.features,P,G,ue;if(y){for(P=0,G=y.length;P<G;P++)ue=y[P],(ue.geometries||ue.geometry||ue.features||ue.coordinates)&&this.addData(ue);return this}var Ee=this.options;if(Ee.filter&&!Ee.filter(u))return this;var ut=Hs(u,Ee);return ut?(ut.feature=Ws(u),ut.defaultOptions=ut.options,this.resetStyle(ut),Ee.onEachFeature&&Ee.onEachFeature(u,ut),this.addLayer(ut)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function Hs(u,y){var P=u.type==="Feature"?u.geometry:u,G=P?P.coordinates:null,ue=[],Ee=y&&y.pointToLayer,ut=y&&y.coordsToLatLng||Ia,Nt,Gt,an,On;if(!G&&!P)return null;switch(P.type){case"Point":return Nt=ut(G),Oa(Ee,u,Nt,y);case"MultiPoint":for(an=0,On=G.length;an<On;an++)Nt=ut(G[an]),ue.push(Oa(Ee,u,Nt,y));return new so(ue);case"LineString":case"MultiLineString":return Gt=Gs(G,P.type==="LineString"?0:1,ut),new ao(Gt,y);case"Polygon":case"MultiPolygon":return Gt=Gs(G,P.type==="Polygon"?1:2,ut),new _s(Gt,y);case"GeometryCollection":for(an=0,On=P.geometries.length;an<On;an++){var Yn=Hs({geometry:P.geometries[an],type:"Feature",properties:u.properties},y);Yn&&ue.push(Yn)}return new so(ue);case"FeatureCollection":for(an=0,On=P.features.length;an<On;an++){var kr=Hs(P.features[an],y);kr&&ue.push(kr)}return new so(ue);default:throw new Error("Invalid GeoJSON object.")}}function Oa(u,y,P,G){return u?u(y,P):new cs(P,G&&G.markersInheritOptions&&G)}function Ia(u){return new ie(u[1],u[0],u[2])}function Gs(u,y,P){for(var G=[],ue=0,Ee=u.length,ut;ue<Ee;ue++)ut=y?Gs(u[ue],y-1,P):(P||Ia)(u[ue]),G.push(ut);return G}function Ms(u,y){return u=de(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function va(u,y,P,G){for(var ue=[],Ee=0,ut=u.length;Ee<ut;Ee++)ue.push(y?va(u[Ee],Rn(u[Ee])?0:y-1,P,G):Ms(u[Ee],G));return!y&&P&&ue.length>0&&ue.push(ue[0].slice()),ue}function jo(u,y){return u.feature?i({},u.feature,{geometry:y}):Ws(y)}function Ws(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var xt={toGeoJSON:function(u){return jo(this,{type:"Point",coordinates:Ms(this.getLatLng(),u)})}};cs.include(xt),Vs.include(xt),_o.include(xt),ao.include({toGeoJSON:function(u){var y=!Rn(this._latlngs),P=va(this._latlngs,y?1:0,!1,u);return jo(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),_s.include({toGeoJSON:function(u){var y=!Rn(this._latlngs),P=y&&!Rn(this._latlngs[0]),G=va(this._latlngs,P?2:y?1:0,!0,u);return y||(G=[G]),jo(this,{type:(P?"Multi":"")+"Polygon",coordinates:G})}}),$s.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),jo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",G=[];return this.eachLayer(function(ue){if(ue.toGeoJSON){var Ee=ue.toGeoJSON(u);if(P)G.push(Ee.geometry);else{var ut=Ws(Ee);ut.type==="FeatureCollection"?G.push.apply(G,ut.features):G.push(ut)}}}),P?jo(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function Kt(u,y){return new Us(u,y)}var Ot=Kt,An=Tr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=Z(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(br(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Ti(this._image),this},bringToBack:function(){return this._map&&Si(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=Z(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:jr("img");if(br(y,"leaflet-image-layer"),this._zoomAnimated&&br(y,"leaflet-zoom-animated"),this.options.className&&br(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;ka(this._image,P,y)},_reset:function(){var u=this._image,y=new Ge(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();Gi(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){zs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Gn=function(u,y,P){return new An(u,y,P)},mr=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:jr("video");if(br(y,"leaflet-image-layer"),this._zoomAnimated&&br(y,"leaflet-zoom-animated"),this.options.className&&br(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),G=[],ue=0;ue<P.length;ue++)G.push(P[ue].src);this._url=P.length>0?G:[y.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Ee=0;Ee<this._url.length;Ee++){var ut=jr("source");ut.src=this._url[Ee],y.appendChild(ut)}}});function Ni(u,y,P){return new mr(u,y,P)}var ci=An.extend({_initImage:function(){var u=this._image=this._url;br(u,"leaflet-image-layer"),this._zoomAnimated&&br(u,"leaflet-zoom-animated"),this.options.className&&br(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function ou(u,y,P){return new ci(u,y,P)}var lo=Tr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof ie||z(u))?(this._latlng=de(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&zs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&zs(this._container,1),this.bringToFront(),this.options.interactive&&(br(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(zs(this._container,0),this._removeTimeout=setTimeout(o(fr,void 0,this._container),200)):fr(this._container),this.options.interactive&&(Qr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=de(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ti(this._container),this},bringToBack:function(){return this._map&&Si(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof so){y=null;var P=this._source._layers;for(var G in P)if(P[G]._map){y=P[G];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=ve(this.options.offset),P=this._getAnchor();this._zoomAnimated?Gi(this._container,u.add(P)):y=y.add(u).add(P);var G=this._containerBottom=-y.y,ue=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=G+"px",this._container.style.left=ue+"px"}},_getAnchor:function(){return[0,0]}});zr.include({_initOverlay:function(u,y,P,G){var ue=y;return ue instanceof u||(ue=new u(G).setContent(y)),P&&ue.setLatLng(P),ue}}),Tr.include({_initOverlay:function(u,y,P,G){var ue=P;return ue instanceof u?(E(ue,G),ue._source=this):(ue=y&&!G?y:new u(G,this),ue.setContent(P)),ue}});var Oi=lo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,lo.prototype.openOn.call(this,u)},onAdd:function(u){lo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fo||this._source.on("preclick",al))},onRemove:function(u){lo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fo||this._source.off("preclick",al))},getEvents:function(){var u=lo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=jr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=jr("div",u+"-content-wrapper",y);if(this._contentNode=jr("div",u+"-content",P),Ql(y),Zu(this._contentNode),_r(y,"contextmenu",al),this._tipContainer=jr("div",u+"-tip-container",y),this._tip=jr("div",u+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=jr("a",u+"-close-button",y);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',_r(G,"click",function(ue){vr(ue),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var G=u.offsetHeight,ue=this.options.maxHeight,Ee="leaflet-popup-scrolled";ue&&G>ue?(y.height=ue+"px",br(u,Ee)):Qr(u,Ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();Gi(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(ys(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,G=this._containerWidth,ue=new K(this._containerLeft,-P-this._containerBottom);ue._add(Qo(this._container));var Ee=u.layerPointToContainerPoint(ue),ut=ve(this.options.autoPanPadding),Nt=ve(this.options.autoPanPaddingTopLeft||ut),Gt=ve(this.options.autoPanPaddingBottomRight||ut),an=u.getSize(),On=0,Yn=0;Ee.x+G+Gt.x>an.x&&(On=Ee.x+G-an.x+Gt.x),Ee.x-On-Nt.x<0&&(On=Ee.x-Nt.x),Ee.y+P+Gt.y>an.y&&(Yn=Ee.y+P-an.y+Gt.y),Ee.y-Yn-Nt.y<0&&(Yn=Ee.y-Nt.y),(On||Yn)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([On,Yn]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ya=function(u,y){return new Oi(u,y)};zr.mergeOptions({closePopupOnClick:!0}),zr.include({openPopup:function(u,y,P){return this._initOverlay(Oi,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Tr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Oi,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof so||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Or(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Fo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Ba=lo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){lo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){lo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=lo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,G=this._map,ue=this._container,Ee=G.latLngToContainerPoint(G.getCenter()),ut=G.layerPointToContainerPoint(u),Nt=this.options.direction,Gt=ue.offsetWidth,an=ue.offsetHeight,On=ve(this.options.offset),Yn=this._getAnchor();Nt==="top"?(y=Gt/2,P=an):Nt==="bottom"?(y=Gt/2,P=0):Nt==="center"?(y=Gt/2,P=an/2):Nt==="right"?(y=0,P=an/2):Nt==="left"?(y=Gt,P=an/2):ut.x<Ee.x?(Nt="right",y=0,P=an/2):(Nt="left",y=Gt+(On.x+Yn.x)*2,P=an/2),u=u.subtract(ve(y,P,!0)).add(On).add(Yn),Qr(ue,"leaflet-tooltip-right"),Qr(ue,"leaflet-tooltip-left"),Qr(ue,"leaflet-tooltip-top"),Qr(ue,"leaflet-tooltip-bottom"),br(ue,"leaflet-tooltip-"+Nt),Gi(ue,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&zs(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ba=function(u,y){return new Ba(u,y)};zr.include({openTooltip:function(u,y,P){return this._initOverlay(Ba,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Tr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ba,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof so||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(_r(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),_r(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,G;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),G=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(y)}});var _a=ga.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(dr(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var G=ve(P.bgPos);y.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function wa(u){return new _a(u)}ga.Default=ul;var $r=Tr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:qt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),fr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Si(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof K?u:new K(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),G=0,ue=y.length,Ee;G<ue;G++)Ee=y[G].style.zIndex,y[G]!==this._container&&Ee&&(P=u(P,+Ee));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!qt.ielt9){zs(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var G in this._tiles){var ue=this._tiles[G];if(!(!ue.current||!ue.loaded)){var Ee=Math.min(1,(u-ue.loaded)/200);zs(ue.el,Ee),Ee<1?y=!0:(ue.active?P=!0:this._onOpaqueTile(ue),ue.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(B(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=jr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(fr(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var G=this._levels[u],ue=this._map;return G||(G=this._levels[u]={},G.el=jr("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=y,G.origin=ue.project(ue.unproject(ue.getPixelOrigin()),u).round(),G.zoom=u,this._setZoomTransform(G,ue.getCenter(),ue.getZoom()),p(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var G=y.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)fr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,G){var ue=Math.floor(u/2),Ee=Math.floor(y/2),ut=P-1,Nt=new K(+ue,+Ee);Nt.z=+ut;var Gt=this._tileCoordsToKey(Nt),an=this._tiles[Gt];return an&&an.active?(an.retain=!0,!0):(an&&an.loaded&&(an.retain=!0),ut>G?this._retainParent(ue,Ee,ut,G):!1)},_retainChildren:function(u,y,P,G){for(var ue=2*u;ue<2*u+2;ue++)for(var Ee=2*y;Ee<2*y+2;Ee++){var ut=new K(ue,Ee);ut.z=P+1;var Nt=this._tileCoordsToKey(ut),Gt=this._tiles[Nt];if(Gt&&Gt.active){Gt.retain=!0;continue}else Gt&&Gt.loaded&&(Gt.retain=!0);P+1<G&&this._retainChildren(ue,Ee,P+1,G)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,G){var ue=Math.round(y);this.options.maxZoom!==void 0&&ue>this.options.maxZoom||this.options.minZoom!==void 0&&ue<this.options.minZoom?ue=void 0:ue=this._clampZoom(ue);var Ee=this.options.updateWhenZooming&&ue!==this._tileZoom;(!G||Ee)&&(this._tileZoom=ue,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ue!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var G=this._map.getZoomScale(P,u.zoom),ue=u.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(y,P)).round();qt.any3d?ka(u.el,ue,G):Gi(u.el,ue)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),G=this._tileZoom,ue=this._map.getPixelWorldBounds(this._tileZoom);ue&&(this._globalTileRange=this._pxBoundsToTileRange(ue)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],G).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],G).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],G).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],G).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),G=y.getZoomScale(P,this._tileZoom),ue=y.project(u,this._tileZoom).floor(),Ee=y.getSize().divideBy(G*2);return new Ge(ue.subtract(Ee),ue.add(Ee))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(u),ue=this._pxBoundsToTileRange(G),Ee=ue.getCenter(),ut=[],Nt=this.options.keepBuffer,Gt=new Ge(ue.getBottomLeft().subtract([Nt,-Nt]),ue.getTopRight().add([Nt,-Nt]));if(!(isFinite(ue.min.x)&&isFinite(ue.min.y)&&isFinite(ue.max.x)&&isFinite(ue.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var an in this._tiles){var On=this._tiles[an].coords;(On.z!==this._tileZoom||!Gt.contains(new K(On.x,On.y)))&&(this._tiles[an].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var Yn=ue.min.y;Yn<=ue.max.y;Yn++)for(var kr=ue.min.x;kr<=ue.max.x;kr++){var hs=new K(kr,Yn);if(hs.z=this._tileZoom,!!this._isValidTile(hs)){var Wi=this._tiles[this._tileCoordsToKey(hs)];Wi?Wi.current=!0:ut.push(hs)}}if(ut.sort(function(Ii,Lo){return Ii.distanceTo(Ee)-Lo.distanceTo(Ee)}),ut.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ds=document.createDocumentFragment();for(kr=0;kr<ut.length;kr++)this._addTile(ut[kr],Ds);this._level.el.appendChild(Ds)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(u);return Z(this.options.bounds).overlaps(G)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),G=u.scaleBy(P),ue=G.add(P),Ee=y.unproject(G,u.z),ut=y.unproject(ue,u.z);return[Ee,ut]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new q(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new K(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(fr(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){br(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,qt.ielt9&&this.options.opacity<1&&zs(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),G=this._tileCoordsToKey(u),ue=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ue),this.createTile.length<2&&V(o(this._tileReady,this,u,null,ue)),Gi(ue,P),this._tiles[G]={el:ue,coords:u,current:!0},y.appendChild(ue),this.fire("tileloadstart",{tile:ue,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var G=this._tileCoordsToKey(u);P=this._tiles[G],P&&(P.loaded=+new Date,this._map._fadeAnimated?(zs(P.el,0),B(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(br(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),qt.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new K(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new Ge(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function sa(u){return new $r(u)}var ks=$r.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&qt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return _r(P,"load",o(this._tileOnLoad,this,y,P)),_r(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:qt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return A(this._url,i(y,this.options))},_tileOnLoad:function(u,y){qt.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var G=this.options.errorTileUrl;G&&y.getAttribute("src")!==G&&(y.src=G),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,G=this.options.zoomOffset;return P&&(u=y-u),u+G},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=ne;var P=this._tiles[u].coords;fr(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",ne),$r.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===ne))return $r.prototype._tileReady.call(this,u,y,P)}});function di(u,y){return new ks(u,y)}var vi=ks.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var G in y)G in this.options||(P[G]=y[G]);y=E(this,y);var ue=y.detectRetina&&qt.retina?2:1,Ee=this.getTileSize();P.width=Ee.x*ue,P.height=Ee.y*ue,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,ks.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,G=se(P.project(y[0]),P.project(y[1])),ue=G.min,Ee=G.max,ut=(this._wmsVersion>=1.3&&this._crs===us?[ue.y,ue.x,Ee.y,Ee.x]:[ue.x,ue.y,Ee.x,Ee.y]).join(","),Nt=ks.prototype.getTileUrl.call(this,u);return Nt+k(this.wmsParams,Nt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ut},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function rs(u,y){return new vi(u,y)}ks.WMS=vi,di.wms=rs;var Ci=Tr.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),br(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),ue=this._map.project(this._center,y),Ee=G.multiplyBy(-P).add(ue).subtract(this._map._getNewPixelOrigin(u,y));qt.any3d?ka(this._container,Ee,P):Gi(this._container,Ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new Ge(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zo=Ci.extend({options:{tolerance:0},getEvents:function(){var u=Ci.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");_r(u,"mousemove",this._onMouseMove,this),_r(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_r(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,fr(this._container),Zr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),G=qt.retina?2:1;Gi(y,u.min),y.width=G*P.x,y.height=G*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",qt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,G=y.prev;P?P.prev=G:this._drawLast=G,G?G.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],G,ue;for(ue=0;ue<y.length;ue++){if(G=Number(y[ue]),isNaN(G))return;P.push(G)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ge,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)u=G.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,G,ue,Ee,ut=u._parts,Nt=ut.length,Gt=this._ctx;if(Nt){for(Gt.beginPath(),P=0;P<Nt;P++){for(G=0,ue=ut[P].length;G<ue;G++)Ee=ut[P][G],Gt[G?"lineTo":"moveTo"](Ee.x,Ee.y);y&&Gt.closePath()}this._fillStroke(Gt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,G=Math.max(Math.round(u._radius),1),ue=(Math.max(Math.round(u._radiusY),1)||G)/G;ue!==1&&(P.save(),P.scale(1,ue)),P.beginPath(),P.arc(y.x,y.y/ue,G,0,Math.PI*2,!1),ue!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,G,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(G=P);this._fireEvent(G?[G]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(Qr(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,G,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(G=P);G!==this._hoveredLayer&&(this._handleMouseOut(u),G&&(br(this._container,"leaflet-interactive"),this._fireEvent([G],u,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(P)P.prev=G;else return;G?G.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(G)G.next=P;else return;P?P.prev=G:G&&(this._drawLast=G),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function wo(u){return qt.canvas?new zo(u):null}var Go=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ju={_initContainer:function(){this._container=jr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ci.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=Go("shape");br(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=Go("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;fr(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,G=u.options,ue=u._container;ue.stroked=!!G.stroke,ue.filled=!!G.fill,G.stroke?(y||(y=u._stroke=Go("stroke")),ue.appendChild(y),y.weight=G.weight+"px",y.color=G.color,y.opacity=G.opacity,G.dashArray?y.dashStyle=z(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=G.lineCap.replace("butt","flat"),y.joinstyle=G.lineJoin):y&&(ue.removeChild(y),u._stroke=null),G.fill?(P||(P=u._fill=Go("fill")),ue.appendChild(P),P.color=G.fillColor||G.color,P.opacity=G.fillOpacity):P&&(ue.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),G=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+G+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){Ti(u._container)},_bringToBack:function(u){Si(u._container)}},xa=qt.vml?Go:oe,ds=Ci.extend({_initContainer:function(){this._container=xa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fr(this._container),Zr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),Gi(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=xa("path");u.options.className&&br(y,u.options.className),u.options.interactive&&br(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){fr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,le(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),G=Math.max(Math.round(u._radiusY),1)||P,ue="a"+P+","+G+" 0 1,0 ",Ee=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+ue+P*2+",0 "+ue+-P*2+",0 ";this._setPath(u,Ee)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){Ti(u._path)},_bringToBack:function(u){Si(u._path)}});qt.vml&&ds.include(Ju);function xi(u){return qt.svg||qt.vml?new ds(u):null}zr.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&wo(u)||xi(u)}});var qs=_s.extend({initialize:function(u,y){_s.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=Z(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function xo(u,y){return new qs(u,y)}ds.create=xa,ds.pointsToPath=le,Us.geometryToLayer=Hs,Us.coordsToLatLng=Ia,Us.coordsToLatLngs=Gs,Us.latLngToCoords=Ms,Us.latLngsToCoords=va,Us.getFeature=jo,Us.asFeature=Ws,zr.mergeOptions({boxZoom:!0});var hr=ai.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){_r(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Zr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),il(),Yu(),this._startPoint=this._map.mouseEventToContainerPoint(u),_r(document,{contextmenu:Or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=jr("div","leaflet-zoom-box",this._container),br(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new Ge(this._point,this._startPoint),P=y.getSize();Gi(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(fr(this._box),Qr(this._container,"leaflet-crosshair")),Io(),ea(),Zr(document,{contextmenu:Or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});zr.addInitHook("addHandler","boxZoom",hr),zr.mergeOptions({doubleClickZoom:!0});var Ra=ai.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),G=y.options.zoomDelta,ue=u.originalEvent.shiftKey?P-G:P+G;y.options.doubleClickZoom==="center"?y.setZoom(ue):y.setZoomAround(u.containerPoint,ue)}});zr.addInitHook("addHandler","doubleClickZoom",Ra),zr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fa=ai.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ra(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}br(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qr(this._map._container,"leaflet-grab"),Qr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=Z(this._map.options.maxBounds);this._offsetLimit=se(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,G=this._draggable._newPos.x,ue=(G-y+P)%u+y-P,Ee=(G+y+P)%u-y-P,ut=Math.abs(ue+P)<Math.abs(Ee+P)?ue:Ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ut},_onDragEnd:function(u){var y=this._map,P=y.options,G=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),G)y.fire("moveend");else{this._prunePositions(+new Date);var ue=this._lastPos.subtract(this._positions[0]),Ee=(this._lastTime-this._times[0])/1e3,ut=P.easeLinearity,Nt=ue.multiplyBy(ut/Ee),Gt=Nt.distanceTo([0,0]),an=Math.min(P.inertiaMaxSpeed,Gt),On=Nt.multiplyBy(an/Gt),Yn=an/(P.inertiaDeceleration*ut),kr=On.multiplyBy(-Yn/2).round();!kr.x&&!kr.y?y.fire("moveend"):(kr=y._limitOffset(kr,y.options.maxBounds),V(function(){y.panBy(kr,{duration:Yn,easeLinearity:ut,noMoveStart:!0,animate:!0})}))}}});zr.addInitHook("addHandler","dragging",Fa),zr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var oa=ai.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),_r(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Zr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,G=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(G,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,G,ue;for(G=0,ue=P.left.length;G<ue;G++)y[P.left[G]]=[-1*u,0];for(G=0,ue=P.right.length;G<ue;G++)y[P.right[G]]=[u,0];for(G=0,ue=P.down.length;G<ue;G++)y[P.down[G]]=[0,u];for(G=0,ue=P.up.length;G<ue;G++)y[P.up[G]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,G,ue;for(G=0,ue=P.zoomIn.length;G<ue;G++)y[P.zoomIn[G]]=u;for(G=0,ue=P.zoomOut.length;G<ue;G++)y[P.zoomOut[G]]=-u},_addHooks:function(){_r(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Zr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,G;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(G=this._panKeys[y],u.shiftKey&&(G=ve(G).multiplyBy(3)),P.options.maxBounds&&(G=P._limitOffset(ve(G),P.options.maxBounds)),P.options.worldCopyJump){var ue=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(G)));P.panTo(ue)}else P.panBy(G)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Or(u)}}});zr.addInitHook("addHandler","keyboard",oa),zr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var uo=ai.extend({addHooks:function(){_r(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Zr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Lu(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var G=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),G),Or(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ue=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,Ee=P?Math.ceil(ue/P)*P:ue,ut=u._limitZoom(y+(this._delta>0?Ee:-Ee))-y;this._delta=0,this._startTime=null,ut&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+ut):u.setZoomAround(this._lastMousePos,y+ut))}});zr.addInitHook("addHandler","scrollWheelZoom",uo);var sd=600;zr.mergeOptions({tapHold:qt.touchNative&&qt.safari&&qt.mobile,tapTolerance:15});var As=ai.extend({addHooks:function(){_r(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Zr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new K(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(_r(document,"touchend",vr),_r(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),sd),_r(document,"touchend touchcancel contextmenu",this._cancel,this),_r(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Zr(document,"touchend",vr),Zr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Zr(document,"touchend touchcancel contextmenu",this._cancel,this),Zr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new K(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});zr.addInitHook("addHandler","tapHold",As),zr.mergeOptions({touchZoom:qt.touch,bounceAtZoomLimits:!0});var Ts=ai.extend({addHooks:function(){br(this._map._container,"leaflet-touch-zoom"),_r(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qr(this._map._container,"leaflet-touch-zoom"),Zr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(G)._divideBy(2))),this._startDist=P.distanceTo(G),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),_r(document,"touchmove",this._onTouchMove,this),_r(document,"touchend touchcancel",this._onTouchEnd,this),vr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]),ue=P.distanceTo(G)/this._startDist;if(this._zoom=y.getScaleZoom(ue,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ue<1||this._zoom>y.getMaxZoom()&&ue>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ue===1)return}else{var Ee=P._add(G)._divideBy(2)._subtract(this._centerPoint);if(ue===1&&Ee.x===0&&Ee.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Ee),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ut=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(ut,this,!0),vr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Zr(document,"touchmove",this._onTouchMove,this),Zr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});zr.addInitHook("addHandler","touchZoom",Ts),zr.BoxZoom=hr,zr.DoubleClickZoom=Ra,zr.Drag=Fa,zr.Keyboard=oa,zr.ScrollWheelZoom=uo,zr.TapHold=As,zr.TouchZoom=Ts,n.Bounds=Ge,n.Browser=qt,n.CRS=ye,n.Canvas=zo,n.Circle=Vs,n.CircleMarker=_o,n.Class=$,n.Control=sr,n.DivIcon=_a,n.DivOverlay=lo,n.DomEvent=tu,n.DomUtil=gr,n.Draggable=ra,n.Evented=X,n.FeatureGroup=so,n.GeoJSON=Us,n.GridLayer=$r,n.Handler=ai,n.Icon=ga,n.ImageOverlay=An,n.LatLng=ie,n.LatLngBounds=q,n.Layer=Tr,n.LayerGroup=$s,n.LineUtil=Ar,n.Map=zr,n.Marker=cs,n.Mixin=kc,n.Path=Fo,n.Point=K,n.PolyUtil=Ml,n.Polygon=_s,n.Polyline=ao,n.Popup=Oi,n.PosAnimation=Su,n.Projection=ui,n.Rectangle=qs,n.Renderer=Ci,n.SVG=ds,n.SVGOverlay=ci,n.TileLayer=ks,n.Tooltip=Ba,n.Transformation=De,n.Util=H,n.VideoOverlay=mr,n.bind=o,n.bounds=se,n.canvas=wo,n.circle=oo,n.circleMarker=Al,n.control=es,n.divIcon=wa,n.extend=i,n.featureGroup=Eu,n.geoJSON=Kt,n.geoJson=Ot,n.gridLayer=sa,n.icon=Xu,n.imageOverlay=Gn,n.latLng=de,n.latLngBounds=Z,n.layerGroup=kl,n.map=Qi,n.marker=ma,n.point=ve,n.polygon=Na,n.polyline=Ac,n.popup=ya,n.rectangle=xo,n.setOptions=E,n.stamp=l,n.svg=xi,n.svgOverlay=ou,n.tileLayer=di,n.tooltip=ba,n.transformation=Ke,n.version=r,n.videoOverlay=Ni;var aa=window.L;n.noConflict=function(){return window.L=aa,this},window.L=n})})(pb,pb.exports);var Ut=pb.exports;const Vn=B_(Ut);var X4={exports:{}};(function(t,e){(function(n,r){r(e)})(ha,function(n){var r=typeof window<"u"?window:typeof ha<"u"?ha:typeof self<"u"?self:{};function i(c,h){return c(h={exports:{}},h.exports),h.exports}var s=i(function(c,h){(function(p){const v={escape:function(R){return R.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(R){return R=m(R).toLowerCase(),function(){var I="application/font-woff",X="image/jpeg";return{woff:I,woff2:I,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:X,jpeg:X,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[R]||""},dataAsUrl:function(R,I){return`data:${I};base64,`+R},isDataUrl:function(R){return R.search(/^(data:)/)!==-1},canvasToBlob:function(R){return R.toBlob?new Promise(function(X){R.toBlob(X)}):(I=R,new Promise(function(X){const K=pe(I.toDataURL().split(",")[1]);var _e=K.length;const ve=new Uint8Array(_e);for(let Ge=0;Ge<_e;Ge++)ve[Ge]=K.charCodeAt(Ge);X(new Blob([ve],{type:"image/png"}))}));var I},resolveUrl:function(R,I){const X=document.implementation.createHTMLDocument(),K=X.createElement("base"),_e=(X.head.appendChild(K),X.createElement("a"));return X.body.appendChild(_e),K.href=I,_e.href=R,_e.href},getAndEncode:function(R){let I=ne.impl.urlCache.find(function(X){return X.url===R});return I||(I={url:R,promise:null},ne.impl.urlCache.push(I)),I.promise===null&&(ne.impl.options.cacheBust&&(R+=(/\?/.test(R)?"&":"?")+new Date().getTime()),I.promise=new Promise(function(X){const K=ne.impl.options.httpTimeout,_e=new XMLHttpRequest;let ve;var Ge;function se(q){console.error(q),X("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)ve?X(ve):se(`cannot fetch resource: ${R}, status: `+_e.status);else{const q=new FileReader;q.onloadend=function(){var Z=q.result.split(/,/)[1];X(Z)},q.readAsDataURL(_e.response)}},_e.ontimeout=function(){ve?X(ve):se(`timeout of ${K}ms occured while fetching resource: `+R)},_e.responseType="blob",_e.timeout=K,ne.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",R,!0),_e.send(),ne.impl.options.imagePlaceholder&&(Ge=ne.impl.options.imagePlaceholder.split(/,/))&&Ge[1]&&(ve=Ge[1])})),I.promise},uid:function(){let R=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+R++}}(),delay:function(R){return function(I){return new Promise(function(X){setTimeout(function(){X(I)},R)})}},asArray:function(R){const I=[],X=R.length;for(let K=0;K<X;K++)I.push(R[K]);return I},escapeXhtml:function(R){return R.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(R){return R!=="data:,"?new Promise(function(I,X){const K=new Image;ne.impl.options.useCredentials&&(K.crossOrigin="use-credentials"),K.onload=function(){I(K)},K.onerror=X,K.src=R}):Promise.resolve()},width:function(R){var I=x(R,"border-left-width"),X=x(R,"border-right-width");return R.scrollWidth+I+X},height:function(R){var I=x(R,"border-top-width"),X=x(R,"border-bottom-width");return R.scrollHeight+I+X}};function m(R){return(R=/\.([^\.\/]*?)(\?|$)/g.exec(R))?R[1]:""}function x(R,I){const X=ge(R).getPropertyValue(I);return parseFloat(X.replace("px",""))}const E=function(){const R=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,ve,Ge){return I(_e)?Promise.resolve(_e).then(X).then(function(se){let q=Promise.resolve(_e);return se.forEach(function(Z){q=q.then(function(ie){return K(ie,Z,ve,Ge)})}),q}):Promise.resolve(_e)},shouldProcess:I,impl:{readUrls:X,inline:K}};function I(_e){return _e.search(R)!==-1}function X(_e){const ve=[];for(var Ge;(Ge=R.exec(_e))!==null;)ve.push(Ge[1]);return ve.filter(function(se){return!v.isDataUrl(se)})}function K(_e,ve,Ge,se){return Promise.resolve(ve).then(function(q){return Ge?v.resolveUrl(q,Ge):q}).then(se||v.getAndEncode).then(function(q){return v.dataAsUrl(q,v.mimeType(ve))}).then(function(q){return _e.replace((Z=ve,new RegExp(`(url\\(['"]?)(${v.escape(Z)})(['"]?\\))`,"g")),`$1${q}$3`);var Z})}}(),k={resolveAll:function(){return T().then(function(R){return Promise.all(R.map(function(I){return I.resolve()}))}).then(function(R){return R.join(`
`)})},impl:{readAll:T}};function T(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(I){const X=[];return I.forEach(function(K){if(Object.getPrototypeOf(K).hasOwnProperty("cssRules"))try{v.asArray(K.cssRules||[]).forEach(X.push.bind(X))}catch(_e){console.log("Error while reading CSS rules from "+K.href,_e.toString())}}),X}).then(function(I){return I.filter(function(X){return X.type===CSSRule.FONT_FACE_RULE}).filter(function(X){return E.shouldProcess(X.style.getPropertyValue("src"))})}).then(function(I){return I.map(R)});function R(I){return{resolve:function(){var X=(I.parentStyleSheet||{}).href;return E.inlineAll(I.cssText,X)},src:function(){return I.style.getPropertyValue("src")}}}}const A={inlineAll:function R(I){return I instanceof Element?function(X){const K=X.style.getPropertyValue("background");return K?E.inlineAll(K).then(function(_e){X.style.setProperty("background",_e,K)}).then(function(){return X}):Promise.resolve(X)}(I).then(function(){return I instanceof HTMLImageElement?z(I).inline():Promise.all(v.asArray(I.childNodes).map(function(X){return R(X)}))}):Promise.resolve(I)},impl:{newImage:z}};function z(R){return{inline:function(I){return v.isDataUrl(R.src)?Promise.resolve():Promise.resolve(R.src).then(I||v.getAndEncode).then(function(X){return v.dataAsUrl(X,v.mimeType(R.src))}).then(function(X){return new Promise(function(K){R.onload=K,R.onerror=K,R.src=X})})}}}const Y={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ne={toSvg:O,toPng:function(R,I){return(I=I||{}).raster=!0,j(R,I).then(function(X){return X.toDataURL()})},toJpeg:function(R,I){return(I=I||{}).raster=!0,j(R,I).then(function(X){return X.toDataURL("image/jpeg",I.quality||1)})},toBlob:function(R,I){return(I=I||{}).raster=!0,j(R,I).then(v.canvasToBlob)},toPixelData:function(R,I){return(I=I||{}).raster=!0,j(R,I).then(function(X){return X.getContext("2d").getImageData(0,0,v.width(R),v.height(R)).data})},toCanvas:function(R,I){return(I=I||{}).raster=!0,j(R,I||{})},impl:{fontFaces:k,images:A,util:v,inliner:E,urlCache:[],options:{}}},ge=(c.exports=ne,p.getComputedStyle||window.getComputedStyle),pe=p.atob||window.atob;function O(R,I){var X=I=I||{};return X.imagePlaceholder===void 0?ne.impl.options.imagePlaceholder=Y.imagePlaceholder:ne.impl.options.imagePlaceholder=X.imagePlaceholder,X.cacheBust===void 0?ne.impl.options.cacheBust=Y.cacheBust:ne.impl.options.cacheBust=X.cacheBust,X.useCredentials===void 0?ne.impl.options.useCredentials=Y.useCredentials:ne.impl.options.useCredentials=X.useCredentials,Promise.resolve(R).then(function(K){return function _e(ve,Ge,se,q,Z=null){return se||!Ge||Ge(ve)?Promise.resolve(ve).then(function(ie){return ie instanceof HTMLCanvasElement?v.makeImage(ie.toDataURL()):ie.nodeName==="IFRAME"?html2canvas(ie.contentDocument.body).then(de=>de.toDataURL()).then(v.makeImage):ie.cloneNode(!1)}).then(function(ie){return function(de,ye){const he=de.childNodes;return he.length===0?Promise.resolve(ye):function(Q,Ae){const De=ge(de);let Ke=Promise.resolve();return Ae.forEach(function(fe){Ke=Ke.then(function(){return _e(fe,Ge,!1,q,De)}).then(function(ee){ee&&Q.appendChild(ee)})}),Ke}(ye,v.asArray(he)).then(function(){return ye})}(ve,ie)}).then(function(ie){return function(de,ye,he){return ye instanceof Element?Promise.resolve().then(function(){(function(Q,Ae){const De=ge(Q);De.cssText?(Ae.style.cssText=De.cssText,function(Ke,fe){fe.font=Ke.font,fe.fontFamily=Ke.fontFamily,fe.fontFeatureSettings=Ke.fontFeatureSettings,fe.fontKerning=Ke.fontKerning,fe.fontSize=Ke.fontSize,fe.fontStretch=Ke.fontStretch,fe.fontStyle=Ke.fontStyle,fe.fontVariant=Ke.fontVariant,fe.fontVariantCaps=Ke.fontVariantCaps,fe.fontVariantEastAsian=Ke.fontVariantEastAsian,fe.fontVariantLigatures=Ke.fontVariantLigatures,fe.fontVariantNumeric=Ke.fontVariantNumeric,fe.fontVariationSettings=Ke.fontVariationSettings,fe.fontWeight=Ke.fontWeight}(De,Ae.style)):(he?function(Ke,fe,ee,oe){const le=ee.style,ze=Ke.style;for(var $e of fe){var Je=fe.getPropertyValue($e),Me=ze.getPropertyValue($e),me=(ze.setProperty($e,oe?"initial":"unset"),fe.getPropertyValue($e));me!==Je?le.setProperty($e,Je):le.removeProperty($e),ze.setProperty($e,Me)}}(Q,De,Ae,se):function(Ke,fe,ee){const oe=function(ze){if($[ze])return $[ze];H||((H=document.createElement("iframe")).style.visibility="hidden",H.style.position="fixed",document.body.appendChild(H),H.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const $e=document.createElement(ze),Je=(H.contentWindow.document.body.appendChild($e),$e.textContent=".",H.contentWindow.getComputedStyle($e)),Me={};return v.asArray(Je).forEach(function(me){Me[me]=me==="width"||me==="height"?"auto":Je.getPropertyValue(me)}),H.contentWindow.document.body.removeChild($e),$[ze]=Me}(ee.tagName),le=ee.style;v.asArray(Ke).forEach(function(ze){var $e=Ke.getPropertyValue(ze);($e!==oe[ze]||fe&&$e!==fe.getPropertyValue(ze))&&le.setProperty(ze,$e,Ke.getPropertyPriority(ze))})}(De,Z,Ae),se&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ke=>Ae.style.removeProperty(Ke)),["left","right","top","bottom"].forEach(Ke=>{Ae.style.getPropertyValue(Ke)&&Ae.style.setProperty(Ke,"0px")})))})(de,ye)}).then(function(){[":before",":after"].forEach(function(Q){(function(Ae){const De=ge(de,Ae),Ke=De.getPropertyValue("content");if(Ke!==""&&Ke!=="none"){const fe=v.uid(),ee=ye.getAttribute("class"),oe=(ee&&ye.setAttribute("class",ee+" "+fe),document.createElement("style"));oe.appendChild(function(){const le=`.${fe}:`+Ae,ze=(De.cssText?function(){return`${De.cssText} content: ${De.getPropertyValue("content")};`}:function(){return v.asArray(De).map(function($e){return $e+": "+De.getPropertyValue($e)+(De.getPropertyPriority($e)?" !important":"")}).join("; ")+";"})();return document.createTextNode(le+`{${ze}}`)}()),ye.appendChild(oe)}})(Q)})}).then(function(){de instanceof HTMLTextAreaElement&&(ye.innerHTML=de.value),de instanceof HTMLInputElement&&ye.setAttribute("value",de.value)}).then(function(){ye instanceof SVGElement&&(ye.setAttribute("xmlns","http://www.w3.org/2000/svg"),ye instanceof SVGRectElement&&["width","height"].forEach(function(Q){const Ae=ye.getAttribute(Q);Ae&&ye.style.setProperty(Q,Ae)}))}).then(function(){return ye}):ye}(ve,ie,q)}):Promise.resolve()}(K,I.filter,!0,!I.raster)}).then(J).then(V).then(function(K){I.bgcolor&&(K.style.backgroundColor=I.bgcolor),I.width&&(K.style.width=I.width+"px"),I.height&&(K.style.height=I.height+"px"),I.style&&Object.keys(I.style).forEach(function(ve){K.style[ve]=I.style[ve]});let _e=null;return typeof I.onclone=="function"&&(_e=I.onclone(K)),Promise.resolve(_e).then(function(){return K})}).then(function(K){return K=K,_e=I.width||v.width(R),ve=I.height||v.height(R),Promise.resolve(K).then(function(Ge){return Ge.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ge)}).then(v.escapeXhtml).then(function(Ge){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ge}</foreignObject>`}).then(function(Ge){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${ve}">${Ge}</svg>`}).then(function(Ge){return"data:image/svg+xml;charset=utf-8,"+Ge});var _e,ve}).then(function(K){return ne.impl.urlCache=[],K})}function j(R,I){return O(R,I).then(v.makeImage).then(v.delay(0)).then(function(X){var K=typeof I.scale!="number"?1:I.scale;const _e=function(Ge,se){const q=document.createElement("canvas");if(q.width=(I.width||v.width(Ge))*se,q.height=(I.height||v.height(Ge))*se,I.bgcolor){const Z=q.getContext("2d");Z.fillStyle=I.bgcolor,Z.fillRect(0,0,q.width,q.height)}return q}(R,K),ve=_e.getContext("2d");return ve.mozImageSmoothingEnabled=!1,ve.msImageSmoothingEnabled=!1,ve.imageSmoothingEnabled=!1,X&&(ve.scale(K,K),ve.drawImage(X,0,0)),H&&(document.body.removeChild(H),H=null,B&&clearTimeout(B),B=setTimeout(()=>{B=null,$={}},2e4)),_e})}function J(R){return k.resolveAll().then(function(I){const X=document.createElement("style");return R.appendChild(X),X.appendChild(document.createTextNode(I)),R})}function V(R){return A.inlineAll(R).then(function(){return R})}let B=null,H=null,$={}})(r)}),o=i(function(c,h){(function(){function p(k,T,A){var z=new XMLHttpRequest;z.open("GET",k),z.responseType="blob",z.onload=function(){E(z.response,T,A)},z.onerror=function(){console.error("could not download file")},z.send()}function v(k){var T=new XMLHttpRequest;T.open("HEAD",k,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function m(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(T)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(k,T,A){var z=x.URL||x.webkitURL,Y=document.createElement("a");T=T||k.name||"download",Y.download=T,Y.rel="noopener",typeof k=="string"?(Y.href=k,Y.origin===location.origin?m(Y):v(Y.href)?p(k,T,A):m(Y,Y.target="_blank")):(Y.href=z.createObjectURL(k),setTimeout(function(){z.revokeObjectURL(Y.href)},4e4),setTimeout(function(){m(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(k,T,A){if(T=T||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(Y,ne){return ne===void 0?ne={autoBom:!1}:typeof ne!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ne={autoBom:!ne}),ne.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\uFEFF",Y],{type:Y.type}):Y}(k,A),T);else if(v(k))p(k,T,A);else{var z=document.createElement("a");z.href=k,z.target="_blank",setTimeout(function(){m(z)})}}:function(k,T,A,z){if((z=z||open("","_blank"))&&(z.document.title=z.document.body.innerText="downloading..."),typeof k=="string")return p(k,T,A);var Y=k.type==="application/octet-stream",ne=/constructor/i.test(x.HTMLElement)||x.safari,ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((ge||Y&&ne)&&typeof FileReader=="object"){var pe=new FileReader;pe.onloadend=function(){var J=pe.result;J=ge?J:J.replace(/^data:[^;]*;/,"data:attachment/file;"),z?z.location.href=J:location=J,z=null},pe.readAsDataURL(k)}else{var O=x.URL||x.webkitURL,j=O.createObjectURL(k);z?z.location=j:location.href=j,z=null,setTimeout(function(){O.revokeObjectURL(j)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var h=c.node,p=c.error;return console.warn("Map node is very big "+h.scrollWidth+"x"+h.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return h==="image"?c._canvasToImage(x,v):h==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),m=!0,x=!1,E=void 0;try{for(var k,T=v[Symbol.iterator]();!(m=(k=T.next()).done);m=!0)k.value.style.opacity=h===!1?0:1}catch(A){x=!0,E=A}finally{try{!m&&T.return&&T.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,h){var p=h.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,h){var p=h.mimeType;return new Promise(function(v,m){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,h){var p=h.captionOffset,v=h.caption,m=h.captionFontSize,x=h.captionFont,E=h.captionColor,k=h.captionBgColor,T=this._node,A=T.screenHeight,z=T.screenWidth,Y=document.createElement("canvas");Y.width=z,Y.height=A;for(var ne=Y.getContext("2d"),ge=ne.createImageData(z,A),pe=0;pe<c.length;++pe)ge.data[pe]=c[pe];ne.putImageData(ge,0,0),ge=null;var O=document.createElement("canvas"),j=O.getContext("2d"),J=0,V=0,B=A,H=z;if(this.options.cropImageByInnerWH===!0){for(var $=[],R=0,I=0;I<A;++I){R=0;for(var X=0;X<z;++X)c[4*I*z+4*X+4]===0&&R++;R===z&&$.push(I)}var K=this._getMinAndMaxOnValuesBreak($);J=K.min;for(var _e=z,ve=K.max,Ge=[],se=0,q=V;q<_e;++q){se=0;for(var Z=0;Z<A;++Z)c[4*Z*z+4*q+4]===0&&se++;se===A&&Ge.push(q)}var ie=this._getMinAndMaxOnValuesBreak(Ge);V=ie.min,_e=ie.max,(V===0&&_e===0||_e===null)&&(_e=z),(J===0&&ve===0||ve===null)&&(ve=A),this.options.debugMode===!0&&(console.log("emptyYLine",$),console.log("minMaxY",K),console.log("emptyXLine",Ge),console.log("minMaxX",ie),console.log("debugX",{}),console.log("debugY",{})),J===0&&ve===A&&V===0&&_e===z||(J+=this.options.onCropBorderSize,ve-=this.options.onCropBorderSize,V+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),B=ve-J,H=_e-V,O.width=H,O.height=B}else O.width=H,O.height=B;var de=null;return v&&(de=typeof v=="function"?v.call(this):v),de!==null&&(O.height=O.height+(p+m+p),j.beginPath(),j.rect(0,0,O.width,O.height),j.fillStyle=k,j.fill(),j.save()),j.drawImage(Y,V,J,H,B,0,0,H,B),de!==null&&(j.font=m+"px "+x,j.fillStyle=E,j.fillText(de,p,B+p+m)),Promise.resolve(O)},_getMinAndMaxOnValuesBreak:function(c){for(var h=0,p=0,v=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],v=!0;break}h=c[m]}return v===!1&&c[0]>1?(h=0,p=c[0]):v===!1&&(h=c[c.length-1]||0,p=null),{min:h,max:p}},_getPixelData:function(c){var h=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),h._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=this._map.getContainer();return this._node={node:h,screenHeight:h.scrollHeight,screenWidth:h.scrollWidth},s.toPixelData(h,c)},_getPixelDataOfBigMap:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,h).then(function(x){return m(),x}).catch(function(x){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:h}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,h=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),h.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(h){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(h,p+".png")}).catch(function(h){c._map.fire("simpleMapScreenshoter.error",{e:h})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(h){var p=setInterval(function(){c._interaction||(h(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(X4,X4.exports);var vl=63710088e-1,LE={centimeters:vl*100,centimetres:vl*100,degrees:360/(2*Math.PI),feet:vl*3.28084,inches:vl*39.37,kilometers:vl/1e3,kilometres:vl/1e3,meters:vl,metres:vl,miles:vl/1609.344,millimeters:vl*1e3,millimetres:vl*1e3,nauticalmiles:vl/1852,radians:1,yards:vl*1.0936};function kp(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function $v(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!J4(t[0])||!J4(t[1]))throw new Error("coordinates must contain numbers");return kp({type:"Point",coordinates:t},e,n)}function ju(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return kp({type:"Polygon",coordinates:t},e,n)}function pc(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return kp({type:"LineString",coordinates:t},e,n)}function Ij(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Bj(t,e,n={}){return kp({type:"MultiPolygon",coordinates:t},e,n)}function Rj(t,e="kilometers"){const n=LE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Fj(t,e="kilometers"){const n=LE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function gb(t){return t%(2*Math.PI)*180/Math.PI}function vc(t){return t%360*Math.PI/180}function J4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Q4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function jj(t){return t.type==="Feature"?t.geometry:t}function SE(t,e,n={}){if(n.final===!0)return zj(t,e);const r=Q4(t),i=Q4(e),s=vc(r[0]),o=vc(i[0]),a=vc(r[1]),l=vc(i[1]),c=Math.sin(o-s)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return gb(Math.atan2(c,h))}function zj(t,e){let n=SE(e,t);return n=(n+180)%360,n}function $j(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function R_(t,e,n,r={}){const i=$j(t),s=vc(i[0]),o=vc(i[1]),a=vc(n),l=Fj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),h=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=gb(h),v=gb(c);return $v([p,v],r.properties)}var e5=R_;function t5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function F_(t,e,n={}){var r=t5(t),i=t5(e),s=vc(i[1]-r[1]),o=vc(i[0]-r[0]),a=vc(r[1]),l=vc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Rj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var Z1=F_;function Vj(t,e,n={}){const i=jj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=SE(i[o],i[o-1])-180;return R_(i[o],a,l,n)}else return $v(i[o])}else s+=F_(i[o],i[o+1],n);return $v(i[i.length-1])}var n5=Vj;function Uj(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},h=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Hj(t,e,n){var r=n;return Uj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function CE(t){return Hj(t,(e,n)=>e+Gj(n),0)}function Gj(t){let e=0,n;switch(t.type){case"Polygon":return r5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=r5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function r5(t){let e=0;if(t&&t.length>0){e+=Math.abs(i5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(i5(t[n]))}return e}var Wj=vl*vl/2,X1=Math.PI/180;function i5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*X1,l=s[1]*X1,c=o[0]*X1;n+=(c-a)*Math.sin(l),r++}return n*Wj}var Rc=CE;function EE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,h=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",k=x?t.features.length:1,T=0;T<k;T++){c=x?t.features[T].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var A=0;A<a;A++){var z=0,Y=0;if(o=v?c.geometries[A]:c,o!==null){l=o.coordinates;var ne=o.type;switch(h=ne==="Polygon"||ne==="MultiPolygon"?1:0,ne){case null:break;case"Point":if(e(l,p,T,z,Y)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,T,z,Y)===!1)return!1;p++,ne==="MultiPoint"&&z++}ne==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,T,z,Y)===!1)return!1;p++}ne==="MultiLineString"&&z++,ne==="Polygon"&&Y++}ne==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,T,z,Y)===!1)return!1;p++}Y++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(EE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function qj(t,e={}){let n=0,r=0,i=0;return EE(t,function(s){n+=s[0],r+=s[1],i++}),$v([n/i,r/i],e.properties)}var Hg=qj;function Yj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(R_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),ju([s],i)}var Kj=Yj,Zj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,J1=Math.ceil,Ru=Math.floor,zl="[BigNumber Error] ",s5=zl+"Number primitive has more than 15 significant digits: ",ac=1e14,Hr=14,o5=9007199254740991,Q1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zd=1e7,du=1e9;function PE(t){var e,n,r,i=A.prototype={constructor:A,toString:null,valueOf:null},s=new A(1),o=20,a=4,l=-7,c=21,h=-1e7,p=1e7,v=!1,m=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",T=!0;function A(O,j){var J,V,B,H,$,R,I,X,K=this;if(!(K instanceof A))return new A(O,j);if(j==null){if(O&&O._isBigNumber===!0){K.s=O.s,!O.c||O.e>p?K.c=K.e=null:O.e<h?K.c=[K.e=0]:(K.e=O.e,K.c=O.c.slice());return}if((R=typeof O=="number")&&O*0==0){if(K.s=1/O<0?(O=-O,-1):1,O===~~O){for(H=0,$=O;$>=10;$/=10,H++);H>p?K.c=K.e=null:(K.e=H,K.c=[O]);return}X=String(O)}else{if(!Zj.test(X=String(O)))return r(K,X,R);K.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}(H=X.indexOf("."))>-1&&(X=X.replace(".","")),($=X.search(/e/i))>0?(H<0&&(H=$),H+=+X.slice($+1),X=X.substring(0,$)):H<0&&(H=X.length)}else{if(Xs(j,2,k.length,"Base"),j==10&&T)return K=new A(O),ge(K,o+K.e+1,a);if(X=String(O),R=typeof O=="number"){if(O*0!=0)return r(K,X,R,j);if(K.s=1/O<0?(X=X.slice(1),-1):1,A.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(s5+O)}else K.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(J=k.slice(0,j),H=$=0,I=X.length;$<I;$++)if(J.indexOf(V=X.charAt($))<0){if(V=="."){if($>H){H=I;continue}}else if(!B&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){B=!0,$=-1,H=0;continue}return r(K,String(O),R,j)}R=!1,X=n(X,j,10,K.s),(H=X.indexOf("."))>-1?X=X.replace(".",""):H=X.length}for($=0;X.charCodeAt($)===48;$++);for(I=X.length;X.charCodeAt(--I)===48;);if(X=X.slice($,++I)){if(I-=$,R&&A.DEBUG&&I>15&&(O>o5||O!==Ru(O)))throw Error(s5+K.s*O);if((H=H-$-1)>p)K.c=K.e=null;else if(H<h)K.c=[K.e=0];else{if(K.e=H,K.c=[],$=(H+1)%Hr,H<0&&($+=Hr),$<I){for($&&K.c.push(+X.slice(0,$)),I-=Hr;$<I;)K.c.push(+X.slice($,$+=Hr));$=Hr-(X=X.slice($)).length}else $-=I;for(;$--;X+="0");K.c.push(+X)}}else K.c=[K.e=0]}A.clone=PE,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(O){var j,J;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(j="DECIMAL_PLACES")&&(J=O[j],Xs(J,0,du,j),o=J),O.hasOwnProperty(j="ROUNDING_MODE")&&(J=O[j],Xs(J,0,8,j),a=J),O.hasOwnProperty(j="EXPONENTIAL_AT")&&(J=O[j],J&&J.pop?(Xs(J[0],-1e9,0,j),Xs(J[1],0,du,j),l=J[0],c=J[1]):(Xs(J,-1e9,du,j),l=-(c=J<0?-J:J))),O.hasOwnProperty(j="RANGE"))if(J=O[j],J&&J.pop)Xs(J[0],-1e9,-1,j),Xs(J[1],1,du,j),h=J[0],p=J[1];else if(Xs(J,-1e9,du,j),J)h=-(p=J<0?-J:J);else throw Error(zl+j+" cannot be zero: "+J);if(O.hasOwnProperty(j="CRYPTO"))if(J=O[j],J===!!J)if(J)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=J;else throw v=!J,Error(zl+"crypto unavailable");else v=J;else throw Error(zl+j+" not true or false: "+J);if(O.hasOwnProperty(j="MODULO_MODE")&&(J=O[j],Xs(J,0,9,j),m=J),O.hasOwnProperty(j="POW_PRECISION")&&(J=O[j],Xs(J,0,du,j),x=J),O.hasOwnProperty(j="FORMAT"))if(J=O[j],typeof J=="object")E=J;else throw Error(zl+j+" not an object: "+J);if(O.hasOwnProperty(j="ALPHABET"))if(J=O[j],typeof J=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(J))T=J.slice(0,10)=="0123456789",k=J;else throw Error(zl+j+" invalid: "+J)}else throw Error(zl+"Object expected: "+O);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[h,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:x,FORMAT:E,ALPHABET:k}},A.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!A.DEBUG)return!0;var j,J,V=O.c,B=O.e,H=O.s;e:if({}.toString.call(V)=="[object Array]"){if((H===1||H===-1)&&B>=-1e9&&B<=du&&B===Ru(B)){if(V[0]===0){if(B===0&&V.length===1)return!0;break e}if(j=(B+1)%Hr,j<1&&(j+=Hr),String(V[0]).length==j){for(j=0;j<V.length;j++)if(J=V[j],J<0||J>=ac||J!==Ru(J))break e;if(J!==0)return!0}}}else if(V===null&&B===null&&(H===null||H===1||H===-1))return!0;throw Error(zl+"Invalid BigNumber: "+O)},A.maximum=A.max=function(){return Y(arguments,-1)},A.minimum=A.min=function(){return Y(arguments,1)},A.random=function(){var O=9007199254740992,j=Math.random()*O&2097151?function(){return Ru(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(J){var V,B,H,$,R,I=0,X=[],K=new A(s);if(J==null?J=o:Xs(J,0,du),$=J1(J/Hr),v)if(crypto.getRandomValues){for(V=crypto.getRandomValues(new Uint32Array($*=2));I<$;)R=V[I]*131072+(V[I+1]>>>11),R>=9e15?(B=crypto.getRandomValues(new Uint32Array(2)),V[I]=B[0],V[I+1]=B[1]):(X.push(R%1e14),I+=2);I=$/2}else if(crypto.randomBytes){for(V=crypto.randomBytes($*=7);I<$;)R=(V[I]&31)*281474976710656+V[I+1]*1099511627776+V[I+2]*4294967296+V[I+3]*16777216+(V[I+4]<<16)+(V[I+5]<<8)+V[I+6],R>=9e15?crypto.randomBytes(7).copy(V,I):(X.push(R%1e14),I+=7);I=$/7}else throw v=!1,Error(zl+"crypto unavailable");if(!v)for(;I<$;)R=j(),R<9e15&&(X[I++]=R%1e14);for($=X[--I],J%=Hr,$&&J&&(R=Q1[Hr-J],X[I]=Ru($/R)*R);X[I]===0;X.pop(),I--);if(I<0)X=[H=0];else{for(H=-1;X[0]===0;X.splice(0,1),H-=Hr);for(I=1,R=X[0];R>=10;R/=10,I++);I<Hr&&(H-=Hr-I)}return K.e=H,K.c=X,K}}(),A.sum=function(){for(var O=1,j=arguments,J=new A(j[0]);O<j.length;)J=J.plus(j[O++]);return J},n=function(){var O="0123456789";function j(J,V,B,H){for(var $,R=[0],I,X=0,K=J.length;X<K;){for(I=R.length;I--;R[I]*=V);for(R[0]+=H.indexOf(J.charAt(X++)),$=0;$<R.length;$++)R[$]>B-1&&(R[$+1]==null&&(R[$+1]=0),R[$+1]+=R[$]/B|0,R[$]%=B)}return R.reverse()}return function(J,V,B,H,$){var R,I,X,K,_e,ve,Ge,se,q=J.indexOf("."),Z=o,ie=a;for(q>=0&&(K=x,x=0,J=J.replace(".",""),se=new A(V),ve=se.pow(J.length-q),x=K,se.c=j(bd(Ou(ve.c),ve.e,"0"),10,B,O),se.e=se.c.length),Ge=j(J,V,B,$?(R=k,O):(R=O,k)),X=K=Ge.length;Ge[--K]==0;Ge.pop());if(!Ge[0])return R.charAt(0);if(q<0?--X:(ve.c=Ge,ve.e=X,ve.s=H,ve=e(ve,se,Z,ie,B),Ge=ve.c,_e=ve.r,X=ve.e),I=X+Z+1,q=Ge[I],K=B/2,_e=_e||I<0||Ge[I+1]!=null,_e=ie<4?(q!=null||_e)&&(ie==0||ie==(ve.s<0?3:2)):q>K||q==K&&(ie==4||_e||ie==6&&Ge[I-1]&1||ie==(ve.s<0?8:7)),I<1||!Ge[0])J=_e?bd(R.charAt(1),-Z,R.charAt(0)):R.charAt(0);else{if(Ge.length=I,_e)for(--B;++Ge[--I]>B;)Ge[I]=0,I||(++X,Ge=[1].concat(Ge));for(K=Ge.length;!Ge[--K];);for(q=0,J="";q<=K;J+=R.charAt(Ge[q++]));J=bd(J,X,R.charAt(0))}return J}}(),e=function(){function O(V,B,H){var $,R,I,X,K=0,_e=V.length,ve=B%Zd,Ge=B/Zd|0;for(V=V.slice();_e--;)I=V[_e]%Zd,X=V[_e]/Zd|0,$=Ge*I+X*ve,R=ve*I+$%Zd*Zd+K,K=(R/H|0)+($/Zd|0)+Ge*X,V[_e]=R%H;return K&&(V=[K].concat(V)),V}function j(V,B,H,$){var R,I;if(H!=$)I=H>$?1:-1;else for(R=I=0;R<H;R++)if(V[R]!=B[R]){I=V[R]>B[R]?1:-1;break}return I}function J(V,B,H,$){for(var R=0;H--;)V[H]-=R,R=V[H]<B[H]?1:0,V[H]=R*$+V[H]-B[H];for(;!V[0]&&V.length>1;V.splice(0,1));}return function(V,B,H,$,R){var I,X,K,_e,ve,Ge,se,q,Z,ie,de,ye,he,Q,Ae,De,Ke,fe=V.s==B.s?1:-1,ee=V.c,oe=B.c;if(!ee||!ee[0]||!oe||!oe[0])return new A(!V.s||!B.s||(ee?oe&&ee[0]==oe[0]:!oe)?NaN:ee&&ee[0]==0||!oe?fe*0:fe/0);for(q=new A(fe),Z=q.c=[],X=V.e-B.e,fe=H+X+1,R||(R=ac,X=Fu(V.e/Hr)-Fu(B.e/Hr),fe=fe/Hr|0),K=0;oe[K]==(ee[K]||0);K++);if(oe[K]>(ee[K]||0)&&X--,fe<0)Z.push(1),_e=!0;else{for(Q=ee.length,De=oe.length,K=0,fe+=2,ve=Ru(R/(oe[0]+1)),ve>1&&(oe=O(oe,ve,R),ee=O(ee,ve,R),De=oe.length,Q=ee.length),he=De,ie=ee.slice(0,De),de=ie.length;de<De;ie[de++]=0);Ke=oe.slice(),Ke=[0].concat(Ke),Ae=oe[0],oe[1]>=R/2&&Ae++;do{if(ve=0,I=j(oe,ie,De,de),I<0){if(ye=ie[0],De!=de&&(ye=ye*R+(ie[1]||0)),ve=Ru(ye/Ae),ve>1)for(ve>=R&&(ve=R-1),Ge=O(oe,ve,R),se=Ge.length,de=ie.length;j(Ge,ie,se,de)==1;)ve--,J(Ge,De<se?Ke:oe,se,R),se=Ge.length,I=1;else ve==0&&(I=ve=1),Ge=oe.slice(),se=Ge.length;if(se<de&&(Ge=[0].concat(Ge)),J(ie,Ge,de,R),de=ie.length,I==-1)for(;j(oe,ie,De,de)<1;)ve++,J(ie,De<de?Ke:oe,de,R),de=ie.length}else I===0&&(ve++,ie=[0]);Z[K++]=ve,ie[0]?ie[de++]=ee[he]||0:(ie=[ee[he]],de=1)}while((he++<Q||ie[0]!=null)&&fe--);_e=ie[0]!=null,Z[0]||Z.splice(0,1)}if(R==ac){for(K=1,fe=Z[0];fe>=10;fe/=10,K++);ge(q,H+(q.e=K+X*Hr-1)+1,$,_e)}else q.e=X,q.r=+_e;return q}}();function z(O,j,J,V){var B,H,$,R,I;if(J==null?J=a:Xs(J,0,8),!O.c)return O.toString();if(B=O.c[0],$=O.e,j==null)I=Ou(O.c),I=V==1||V==2&&($<=l||$>=c)?w0(I,$):bd(I,$,"0");else if(O=ge(new A(O),j,J),H=O.e,I=Ou(O.c),R=I.length,V==1||V==2&&(j<=H||H<=l)){for(;R<j;I+="0",R++);I=w0(I,H)}else if(j-=$,I=bd(I,H,"0"),H+1>R){if(--j>0)for(I+=".";j--;I+="0");}else if(j+=H-R,j>0)for(H+1==R&&(I+=".");j--;I+="0");return O.s<0&&B?"-"+I:I}function Y(O,j){for(var J,V,B=1,H=new A(O[0]);B<O.length;B++)V=new A(O[B]),(!V.s||(J=Uh(H,V))===j||J===0&&H.s===j)&&(H=V);return H}function ne(O,j,J){for(var V=1,B=j.length;!j[--B];j.pop());for(B=j[0];B>=10;B/=10,V++);return(J=V+J*Hr-1)>p?O.c=O.e=null:J<h?O.c=[O.e=0]:(O.e=J,O.c=j),O}r=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,J=/^\.([^.]+)$/,V=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(H,$,R,I){var X,K=R?$:$.replace(B,"");if(V.test(K))H.s=isNaN(K)?null:K<0?-1:1;else{if(!R&&(K=K.replace(O,function(_e,ve,Ge){return X=(Ge=Ge.toLowerCase())=="x"?16:Ge=="b"?2:8,!I||I==X?ve:_e}),I&&(X=I,K=K.replace(j,"$1").replace(J,"0.$1")),$!=K))return new A(K,X);if(A.DEBUG)throw Error(zl+"Not a"+(I?" base "+I:"")+" number: "+$);H.s=null}H.c=H.e=null}}();function ge(O,j,J,V){var B,H,$,R,I,X,K,_e=O.c,ve=Q1;if(_e){e:{for(B=1,R=_e[0];R>=10;R/=10,B++);if(H=j-B,H<0)H+=Hr,$=j,I=_e[X=0],K=Ru(I/ve[B-$-1]%10);else if(X=J1((H+1)/Hr),X>=_e.length)if(V){for(;_e.length<=X;_e.push(0));I=K=0,B=1,H%=Hr,$=H-Hr+1}else break e;else{for(I=R=_e[X],B=1;R>=10;R/=10,B++);H%=Hr,$=H-Hr+B,K=$<0?0:Ru(I/ve[B-$-1]%10)}if(V=V||j<0||_e[X+1]!=null||($<0?I:I%ve[B-$-1]),V=J<4?(K||V)&&(J==0||J==(O.s<0?3:2)):K>5||K==5&&(J==4||V||J==6&&(H>0?$>0?I/ve[B-$]:0:_e[X-1])%10&1||J==(O.s<0?8:7)),j<1||!_e[0])return _e.length=0,V?(j-=O.e+1,_e[0]=ve[(Hr-j%Hr)%Hr],O.e=-j||0):_e[0]=O.e=0,O;if(H==0?(_e.length=X,R=1,X--):(_e.length=X+1,R=ve[Hr-H],_e[X]=$>0?Ru(I/ve[B-$]%ve[$])*R:0),V)for(;;)if(X==0){for(H=1,$=_e[0];$>=10;$/=10,H++);for($=_e[0]+=R,R=1;$>=10;$/=10,R++);H!=R&&(O.e++,_e[0]==ac&&(_e[0]=1));break}else{if(_e[X]+=R,_e[X]!=ac)break;_e[X--]=0,R=1}for(H=_e.length;_e[--H]===0;_e.pop());}O.e>p?O.c=O.e=null:O.e<h&&(O.c=[O.e=0])}return O}function pe(O){var j,J=O.e;return J===null?O.toString():(j=Ou(O.c),j=J<=l||J>=c?w0(j,J):bd(j,J,"0"),O.s<0?"-"+j:j)}return i.absoluteValue=i.abs=function(){var O=new A(this);return O.s<0&&(O.s=1),O},i.comparedTo=function(O,j){return Uh(this,new A(O,j))},i.decimalPlaces=i.dp=function(O,j){var J,V,B,H=this;if(O!=null)return Xs(O,0,du),j==null?j=a:Xs(j,0,8),ge(new A(H),O+H.e+1,j);if(!(J=H.c))return null;if(V=((B=J.length-1)-Fu(this.e/Hr))*Hr,B=J[B])for(;B%10==0;B/=10,V--);return V<0&&(V=0),V},i.dividedBy=i.div=function(O,j){return e(this,new A(O,j),o,a)},i.dividedToIntegerBy=i.idiv=function(O,j){return e(this,new A(O,j),0,1)},i.exponentiatedBy=i.pow=function(O,j){var J,V,B,H,$,R,I,X,K,_e=this;if(O=new A(O),O.c&&!O.isInteger())throw Error(zl+"Exponent not an integer: "+pe(O));if(j!=null&&(j=new A(j)),R=O.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!O.c||!O.c[0])return K=new A(Math.pow(+pe(_e),R?O.s*(2-_0(O)):+pe(O))),j?K.mod(j):K;if(I=O.s<0,j){if(j.c?!j.c[0]:!j.s)return new A(NaN);V=!I&&_e.isInteger()&&j.isInteger(),V&&(_e=_e.mod(j))}else{if(O.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||R&&_e.c[1]>=24e7:_e.c[0]<8e13||R&&_e.c[0]<=9999975e7)))return H=_e.s<0&&_0(O)?-0:0,_e.e>-1&&(H=1/H),new A(I?1/H:H);x&&(H=J1(x/Hr+2))}for(R?(J=new A(.5),I&&(O.s=1),X=_0(O)):(B=Math.abs(+pe(O)),X=B%2),K=new A(s);;){if(X){if(K=K.times(_e),!K.c)break;H?K.c.length>H&&(K.c.length=H):V&&(K=K.mod(j))}if(B){if(B=Ru(B/2),B===0)break;X=B%2}else if(O=O.times(J),ge(O,O.e+1,1),O.e>14)X=_0(O);else{if(B=+pe(O),B===0)break;X=B%2}_e=_e.times(_e),H?_e.c&&_e.c.length>H&&(_e.c.length=H):V&&(_e=_e.mod(j))}return V?K:(I&&(K=s.div(K)),j?K.mod(j):H?ge(K,x,a,$):K)},i.integerValue=function(O){var j=new A(this);return O==null?O=a:Xs(O,0,8),ge(j,j.e+1,O)},i.isEqualTo=i.eq=function(O,j){return Uh(this,new A(O,j))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(O,j){return Uh(this,new A(O,j))>0},i.isGreaterThanOrEqualTo=i.gte=function(O,j){return(j=Uh(this,new A(O,j)))===1||j===0},i.isInteger=function(){return!!this.c&&Fu(this.e/Hr)>this.c.length-2},i.isLessThan=i.lt=function(O,j){return Uh(this,new A(O,j))<0},i.isLessThanOrEqualTo=i.lte=function(O,j){return(j=Uh(this,new A(O,j)))===-1||j===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(O,j){var J,V,B,H,$=this,R=$.s;if(O=new A(O,j),j=O.s,!R||!j)return new A(NaN);if(R!=j)return O.s=-j,$.plus(O);var I=$.e/Hr,X=O.e/Hr,K=$.c,_e=O.c;if(!I||!X){if(!K||!_e)return K?(O.s=-j,O):new A(_e?$:NaN);if(!K[0]||!_e[0])return _e[0]?(O.s=-j,O):new A(K[0]?$:a==3?-0:0)}if(I=Fu(I),X=Fu(X),K=K.slice(),R=I-X){for((H=R<0)?(R=-R,B=K):(X=I,B=_e),B.reverse(),j=R;j--;B.push(0));B.reverse()}else for(V=(H=(R=K.length)<(j=_e.length))?R:j,R=j=0;j<V;j++)if(K[j]!=_e[j]){H=K[j]<_e[j];break}if(H&&(B=K,K=_e,_e=B,O.s=-O.s),j=(V=_e.length)-(J=K.length),j>0)for(;j--;K[J++]=0);for(j=ac-1;V>R;){if(K[--V]<_e[V]){for(J=V;J&&!K[--J];K[J]=j);--K[J],K[V]+=ac}K[V]-=_e[V]}for(;K[0]==0;K.splice(0,1),--X);return K[0]?ne(O,K,X):(O.s=a==3?-1:1,O.c=[O.e=0],O)},i.modulo=i.mod=function(O,j){var J,V,B=this;return O=new A(O,j),!B.c||!O.s||O.c&&!O.c[0]?new A(NaN):!O.c||B.c&&!B.c[0]?new A(B):(m==9?(V=O.s,O.s=1,J=e(B,O,0,3),O.s=V,J.s*=V):J=e(B,O,0,m),O=B.minus(J.times(O)),!O.c[0]&&m==1&&(O.s=B.s),O)},i.multipliedBy=i.times=function(O,j){var J,V,B,H,$,R,I,X,K,_e,ve,Ge,se,q,Z,ie=this,de=ie.c,ye=(O=new A(O,j)).c;if(!de||!ye||!de[0]||!ye[0])return!ie.s||!O.s||de&&!de[0]&&!ye||ye&&!ye[0]&&!de?O.c=O.e=O.s=null:(O.s*=ie.s,!de||!ye?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(V=Fu(ie.e/Hr)+Fu(O.e/Hr),O.s*=ie.s,I=de.length,_e=ye.length,I<_e&&(se=de,de=ye,ye=se,B=I,I=_e,_e=B),B=I+_e,se=[];B--;se.push(0));for(q=ac,Z=Zd,B=_e;--B>=0;){for(J=0,ve=ye[B]%Z,Ge=ye[B]/Z|0,$=I,H=B+$;H>B;)X=de[--$]%Z,K=de[$]/Z|0,R=Ge*X+K*ve,X=ve*X+R%Z*Z+se[H]+J,J=(X/q|0)+(R/Z|0)+Ge*K,se[H--]=X%q;se[H]=J}return J?++V:se.splice(0,1),ne(O,se,V)},i.negated=function(){var O=new A(this);return O.s=-O.s||null,O},i.plus=function(O,j){var J,V=this,B=V.s;if(O=new A(O,j),j=O.s,!B||!j)return new A(NaN);if(B!=j)return O.s=-j,V.minus(O);var H=V.e/Hr,$=O.e/Hr,R=V.c,I=O.c;if(!H||!$){if(!R||!I)return new A(B/0);if(!R[0]||!I[0])return I[0]?O:new A(R[0]?V:B*0)}if(H=Fu(H),$=Fu($),R=R.slice(),B=H-$){for(B>0?($=H,J=I):(B=-B,J=R),J.reverse();B--;J.push(0));J.reverse()}for(B=R.length,j=I.length,B-j<0&&(J=I,I=R,R=J,j=B),B=0;j;)B=(R[--j]=R[j]+I[j]+B)/ac|0,R[j]=ac===R[j]?0:R[j]%ac;return B&&(R=[B].concat(R),++$),ne(O,R,$)},i.precision=i.sd=function(O,j){var J,V,B,H=this;if(O!=null&&O!==!!O)return Xs(O,1,du),j==null?j=a:Xs(j,0,8),ge(new A(H),O,j);if(!(J=H.c))return null;if(B=J.length-1,V=B*Hr+1,B=J[B]){for(;B%10==0;B/=10,V--);for(B=J[0];B>=10;B/=10,V++);}return O&&H.e+1>V&&(V=H.e+1),V},i.shiftedBy=function(O){return Xs(O,-9007199254740991,o5),this.times("1e"+O)},i.squareRoot=i.sqrt=function(){var O,j,J,V,B,H=this,$=H.c,R=H.s,I=H.e,X=o+4,K=new A("0.5");if(R!==1||!$||!$[0])return new A(!R||R<0&&(!$||$[0])?NaN:$?H:1/0);if(R=Math.sqrt(+pe(H)),R==0||R==1/0?(j=Ou($),(j.length+I)%2==0&&(j+="0"),R=Math.sqrt(+j),I=Fu((I+1)/2)-(I<0||I%2),R==1/0?j="5e"+I:(j=R.toExponential(),j=j.slice(0,j.indexOf("e")+1)+I),J=new A(j)):J=new A(R+""),J.c[0]){for(I=J.e,R=I+X,R<3&&(R=0);;)if(B=J,J=K.times(B.plus(e(H,B,X,1))),Ou(B.c).slice(0,R)===(j=Ou(J.c)).slice(0,R))if(J.e<I&&--R,j=j.slice(R-3,R+1),j=="9999"||!V&&j=="4999"){if(!V&&(ge(B,B.e+o+2,0),B.times(B).eq(H))){J=B;break}X+=4,R+=4,V=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(ge(J,J.e+o+2,1),O=!J.times(J).eq(H));break}}return ge(J,J.e+o+1,a,O)},i.toExponential=function(O,j){return O!=null&&(Xs(O,0,du),O++),z(this,O,j,1)},i.toFixed=function(O,j){return O!=null&&(Xs(O,0,du),O=O+this.e+1),z(this,O,j)},i.toFormat=function(O,j,J){var V,B=this;if(J==null)O!=null&&j&&typeof j=="object"?(J=j,j=null):O&&typeof O=="object"?(J=O,O=j=null):J=E;else if(typeof J!="object")throw Error(zl+"Argument not an object: "+J);if(V=B.toFixed(O,j),B.c){var H,$=V.split("."),R=+J.groupSize,I=+J.secondaryGroupSize,X=J.groupSeparator||"",K=$[0],_e=$[1],ve=B.s<0,Ge=ve?K.slice(1):K,se=Ge.length;if(I&&(H=R,R=I,I=H,se-=H),R>0&&se>0){for(H=se%R||R,K=Ge.substr(0,H);H<se;H+=R)K+=X+Ge.substr(H,R);I>0&&(K+=X+Ge.slice(H)),ve&&(K="-"+K)}V=_e?K+(J.decimalSeparator||"")+((I=+J.fractionGroupSize)?_e.replace(new RegExp("\\d{"+I+"}\\B","g"),"$&"+(J.fractionGroupSeparator||"")):_e):K}return(J.prefix||"")+V+(J.suffix||"")},i.toFraction=function(O){var j,J,V,B,H,$,R,I,X,K,_e,ve,Ge=this,se=Ge.c;if(O!=null&&(R=new A(O),!R.isInteger()&&(R.c||R.s!==1)||R.lt(s)))throw Error(zl+"Argument "+(R.isInteger()?"out of range: ":"not an integer: ")+pe(R));if(!se)return new A(Ge);for(j=new A(s),X=J=new A(s),V=I=new A(s),ve=Ou(se),H=j.e=ve.length-Ge.e-1,j.c[0]=Q1[($=H%Hr)<0?Hr+$:$],O=!O||R.comparedTo(j)>0?H>0?j:X:R,$=p,p=1/0,R=new A(ve),I.c[0]=0;K=e(R,j,0,1),B=J.plus(K.times(V)),B.comparedTo(O)!=1;)J=V,V=B,X=I.plus(K.times(B=X)),I=B,j=R.minus(K.times(B=j)),R=B;return B=e(O.minus(J),V,0,1),I=I.plus(B.times(X)),J=J.plus(B.times(V)),I.s=X.s=Ge.s,H=H*2,_e=e(X,V,H,a).minus(Ge).abs().comparedTo(e(I,J,H,a).minus(Ge).abs())<1?[X,V]:[I,J],p=$,_e},i.toNumber=function(){return+pe(this)},i.toPrecision=function(O,j){return O!=null&&Xs(O,1,du),z(this,O,j,2)},i.toString=function(O){var j,J=this,V=J.s,B=J.e;return B===null?V?(j="Infinity",V<0&&(j="-"+j)):j="NaN":(O==null?j=B<=l||B>=c?w0(Ou(J.c),B):bd(Ou(J.c),B,"0"):O===10&&T?(J=ge(new A(J),o+B+1,a),j=bd(Ou(J.c),J.e,"0")):(Xs(O,2,k.length,"Base"),j=n(bd(Ou(J.c),B,"0"),10,O,V,!0)),V<0&&J.c[0]&&(j="-"+j)),j},i.valueOf=i.toJSON=function(){return pe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&A.set(t),A}function Fu(t){var e=t|0;return t>0||t===e?e:e-1}function Ou(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=Hr-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Uh(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function Xs(t,e,n,r){if(t<e||t>n||t!==Ru(t))throw Error(zl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _0(t){var e=t.c.length-1;return Fu(t.e/Hr)==e&&t.c[e]%2!=0}function w0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function bd(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Yc=PE(),Xj=class{constructor(t){Xe(this,"key");Xe(this,"left",null);Xe(this,"right",null);this.key=t}},ng=class extends Xj{constructor(t){super(t)}},Jj=class{constructor(){Xe(this,"size",0);Xe(this,"modificationCount",0);Xe(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},LL,SL,Vv=class _g extends Jj{constructor(n,r){super();Xe(this,"root",null);Xe(this,"compare");Xe(this,"validKey");Xe(this,LL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new ng(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new ng(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new _g(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new _g(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new _g(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new _g(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new ng(a.key);o.left=c,r(a,c)}if(l!=null){const c=new ng(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new ng(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new ez(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(SL=Symbol.iterator,LL=Symbol.toStringTag,SL)](){return new Qj(this.wrap())}},ME=class{constructor(t){Xe(this,"tree");Xe(this,"path",new Array);Xe(this,"modificationCount",null);Xe(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},Qj=class extends ME{getValue(t){return t.key}},ez=class extends ME{getValue(t){return[t.key,t.key]}},kE=t=>()=>t,mb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):kE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function tz(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):kE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var nz=t=>t,rz=t=>{if(t){const e=new Vv(mb(t)),n=new Vv(mb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Yc(0),y:new Yc(0)}),i}return nz},vb=t=>({set:e=>{Rd=vb(e)},reset:()=>vb(t),compare:mb(t),snap:rz(t),orient:tz(t)}),Rd=vb(),rg=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),yb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},nv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),AE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Uv=t=>AE(t,t).sqrt(),iz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return nv(i,r).div(Uv(i)).div(Uv(r))},sz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return AE(i,r).div(Uv(i)).div(Uv(r))},a5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},l5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},oz=(t,e,n,r)=>{if(e.x.isZero())return l5(n,r,t.x);if(r.x.isZero())return l5(t,e,n.x);if(e.y.isZero())return a5(n,r,t.y);if(r.y.isZero())return a5(t,e,n.y);const i=nv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=nv(s,e).div(i),a=nv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),h=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),m=h.plus(p).div(2);return{x:v,y:m}},Hc=class TE{constructor(e,n){Xe(this,"point");Xe(this,"isLeft");Xe(this,"segment");Xe(this,"otherSE");Xe(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=TE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Hv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:iz(this.point,e.point,s.point),cosine:sz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},az=class bb{constructor(e){Xe(this,"events");Xe(this,"poly");Xe(this,"_isExteriorRing");Xe(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],h=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==h;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,k=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],k=c.splice(E.index);k.unshift(k[0].otherSE),n.push(new bb(k.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new bb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,h=this.events.length-1;c<h;c++){const p=this.events[c].point,v=this.events[c+1].point;Rd.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Rd.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Hc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},u5=class{constructor(t){Xe(this,"exteriorRing");Xe(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},lz=class{constructor(t){Xe(this,"rings");Xe(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new u5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new u5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},uz=class{constructor(t,e=Hv.compare){Xe(this,"queue");Xe(this,"tree");Xe(this,"segments");this.queue=t,this.tree=new Vv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Hc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},cz=class{constructor(){Xe(this,"type");Xe(this,"numMultiPolys")}run(t,e,n){wg.type=t;const r=[new d5(e,!0)];for(let c=0,h=n.length;c<h;c++)r.push(new d5(n[c],!1));if(wg.numMultiPolys=r.length,wg.type==="difference"){const c=r[0];let h=1;for(;h<r.length;)yb(r[h].bbox,c.bbox)!==null?h++:r.splice(h,1)}if(wg.type==="intersection")for(let c=0,h=r.length;c<h;c++){const p=r[c];for(let v=c+1,m=r.length;v<m;v++)if(yb(p.bbox,r[v].bbox)===null)return[]}const i=new Vv(Hc.compare);for(let c=0,h=r.length;c<h;c++){const p=r[c].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new uz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let h=0,p=c.length;h<p;h++){const v=c[h];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Rd.reset();const a=az.factory(s.segments);return new lz(a).getGeom()}},wg=new cz,_b=wg,dz=0,Hv=class rv{constructor(e,n,r,i){Xe(this,"id");Xe(this,"leftSE");Xe(this,"rightSE");Xe(this,"rings");Xe(this,"windings");Xe(this,"ringOut");Xe(this,"consumedBy");Xe(this,"prev");Xe(this,"_prevInResult");Xe(this,"_beforeState");Xe(this,"_afterState");Xe(this,"_isInResult");this.id=++dz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,h=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(h))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(h))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),m=h.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(x))return 1;if(p.isLessThan(v)&&m.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(h)?-1:c.isGreaterThan(h)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Hc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Hc(i,!0),c=new Hc(s,!1);return new rv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Rd.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=yb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=rg(n,a)&&this.comparePoint(a)===0,h=rg(r,s)&&e.comparePoint(s)===0,p=rg(n,l)&&this.comparePoint(l)===0,v=rg(r,o)&&e.comparePoint(o)===0;if(h&&c)return v&&!p?o:!v&&p?l:null;if(h)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=oz(s,this.vector(),a,e.vector());return m===null||!rg(i,m)?null:Rd.snap(m)}split(e){const n=[],r=e.events!==void 0,i=new Hc(e,!0),s=new Hc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new rv(i,o,this.rings.slice(),this.windings.slice());return Hc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=rv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],h=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(h)):r[p]+=h}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],h=c.poly;if(o.indexOf(h)===-1)if(c.isExterior)s.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(_b.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===_b.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},c5=class{constructor(t,e,n){Xe(this,"poly");Xe(this,"isExterior");Xe(this,"segments");Xe(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Rd.snap({x:new Yc(t[0][0]),y:new Yc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Rd.snap({x:new Yc(t[s][0]),y:new Yc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Hv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Hv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},hz=class{constructor(t,e){Xe(this,"multiPoly");Xe(this,"exteriorRing");Xe(this,"interiorRings");Xe(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new c5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new c5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},d5=class{constructor(t,e){Xe(this,"isSubject");Xe(this,"polys");Xe(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Yc(Number.POSITIVE_INFINITY),y:new Yc(Number.POSITIVE_INFINITY)},ur:{x:new Yc(Number.NEGATIVE_INFINITY),y:new Yc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new hz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},fz=(t,...e)=>_b.run("intersection",t,e);Rd.set;function pz(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},h=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function gz(t,e={}){const n=[];if(pz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=fz(n[0],...n.slice(1));return r.length===0?null:r.length===1?ju(r[0],e.properties):Bj(r,e.properties)}var mz=gz;function DE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,h=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",k=x?t.features.length:1,T=0;T<k;T++){c=x?t.features[T].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var A=0;A<a;A++){var z=0,Y=0;if(o=v?c.geometries[A]:c,o!==null){l=o.coordinates;var ne=o.type;switch(h=0,ne){case null:break;case"Point":if(e(l,p,T,z,Y)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,T,z,Y)===!1)return!1;p++,ne==="MultiPoint"&&z++}ne==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,T,z,Y)===!1)return!1;p++}ne==="MultiLineString"&&z++,ne==="Polygon"&&Y++}ne==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,T,z,Y)===!1)return!1;p++}Y++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(DE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function vz(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},h=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function yz(t,e){vz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(kp(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var h=n.coordinates[c],p={type:l,coordinates:h};if(e(kp(p,i),r,c)===!1)return!1}})}function bz(t,e){yz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,h=0;if(DE(n,function(p,v,m,x,E){if(a===void 0||r>l||x>c||E>h){a=p,l=r,c=x,h=E,s=0;return}var k=pc([a,p],n.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function _z(t,e,n){var r=n,i=!1;return bz(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Gv(t,e={}){return _z(t,(n,r)=>{const i=r.geometry.coordinates;return n+F_(i[0],i[1],e)},0)}var Hh=Gv;class uh extends Vn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Xe(this,"properties");this.properties=En.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){En.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(T=>[T.lng,T.lat]);l.push(l[0]);const c=ju([l]),h=CE(c),p=Gv(pc([...l]),{units:"meters"}),v=Hg(c),m=Vn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(T=>({lat:T.lat,lng:T.lng})),surface:h,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){En.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return En.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return En.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return En.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){En.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){En.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return En.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Vn.latLng(s.lat+n.lat,s.lng+n.lng));return Vn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return En.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Vn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Vn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=ju([i]),o=Hg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calcul invalide");return Vn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Vn.LatLng(0,0)):new Vn.LatLng(i/o,s/o)}})}getSegmentLengths(){return En.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class qo extends Vn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Xe(this,"properties");Xe(this,"cachedProperties",{});Xe(this,"needsUpdate",!0);this.properties=En.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){En.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=pc(r),h=Gv(c,{units:"meters"});let p;if(n.length===2)p=Vn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const k=n5(c,h/2,{units:"meters"});p=Vn.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:h,coordinates:n.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:h*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=h,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){En.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return En.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){En.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return En.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return En.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Vn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){En.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){En.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Vn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return En.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Vn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return En.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Vn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=pc(r),s=Gv(i,{units:"meters"}),o=n5(i,s/2,{units:"meters"}),a=Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Vn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return En.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return En.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return En.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return En.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}var Wv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Wv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",p=1,v=2,m=4,x=1,E=2,k=1,T=2,A=4,z=8,Y=16,ne=32,ge=64,pe=128,O=256,j=512,J=30,V="...",B=800,H=16,$=1,R=2,I=3,X=1/0,K=9007199254740991,_e=17976931348623157e292,ve=NaN,Ge=4294967295,se=Ge-1,q=Ge>>>1,Z=[["ary",pe],["bind",k],["bindKey",T],["curry",z],["curryRight",Y],["flip",j],["partial",ne],["partialRight",ge],["rearg",O]],ie="[object Arguments]",de="[object Array]",ye="[object AsyncFunction]",he="[object Boolean]",Q="[object Date]",Ae="[object DOMException]",De="[object Error]",Ke="[object Function]",fe="[object GeneratorFunction]",ee="[object Map]",oe="[object Number]",le="[object Null]",ze="[object Object]",$e="[object Promise]",Je="[object Proxy]",Me="[object RegExp]",me="[object Set]",qe="[object String]",ct="[object Symbol]",ft="[object Undefined]",Mt="[object WeakMap]",it="[object WeakSet]",jt="[object ArrayBuffer]",hn="[object DataView]",Ze="[object Float32Array]",lt="[object Float64Array]",rt="[object Int8Array]",$t="[object Int16Array]",Qt="[object Int32Array]",Pn="[object Uint8Array]",wn="[object Uint8ClampedArray]",xn="[object Uint16Array]",$n="[object Uint32Array]",en=/\b__p \+= '';/g,_n=/\b(__p \+=) '' \+/g,Cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qn=/&(?:amp|lt|gt|quot|#39);/g,nr=/[&<>"']/g,rr=RegExp(qn.source),Jn=RegExp(nr.source),Mr=/<%-([\s\S]+?)%>/g,as=/<%([\s\S]+?)%>/g,ji=/<%=([\s\S]+?)%>/g,ro=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cs=/^\w*$/,ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,Ht=RegExp(nt.source),kn=/^\s+/,tn=/\s/,qt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wt=/\{\n\/\* \[wrapped with (.+)\] \*/,ir=/,? & /,St=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gn=/[()=,{}\[\]\/\s]/,Qn=/\\(\\)?/g,ar=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ur=/\w*$/,vn=/^[-+]0x[0-9a-f]+$/i,cn=/^0b[01]+$/i,ri=/^\[object .+?Constructor\]$/,Li=/^0o[0-7]+$/i,zi=/^(?:0|[1-9]\d*)$/,Fr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cr=/($^)/,Xi=/['\n\r\u2028\u2029\\]/g,Ui="\\ud800-\\udfff",Hi="\\u0300-\\u036f",ls="\\ufe20-\\ufe2f",vs="\\u20d0-\\u20ff",Es=Hi+ls+vs,Rs="\\u2700-\\u27bf",Fs="a-z\\xdf-\\xf6\\xf8-\\xff",Ji="\\xac\\xb1\\xd7\\xf7",Wr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ys="\\u2000-\\u206f",jr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",dr="\\ufe0e\\ufe0f",Ti=Ji+Wr+ys+jr,Si="[']",io="["+Ui+"]",br="["+Ti+"]",Qr="["+Es+"]",rl="\\d+",js="["+Rs+"]",zs="["+Fs+"]",qu="[^"+Ui+Ti+rl+Rs+Fs+fr+"]",xl="\\ud83c[\\udffb-\\udfff]",ka="(?:"+Qr+"|"+xl+")",Gi="[^"+Ui+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",il="[\\ud800-\\udbff][\\udc00-\\udfff]",Io="["+fr+"]",wu="\\u200d",sl="(?:"+zs+"|"+qu+")",Yu="(?:"+Io+"|"+qu+")",ea="(?:"+Si+"(?:d|ll|m|re|s|t|ve))?",Aa="(?:"+Si+"(?:D|LL|M|RE|S|T|VE))?",ol=ka+"?",Jl="["+dr+"]?",bs="(?:"+wu+"(?:"+[Gi,Qo,il].join("|")+")"+Jl+ol+")*",Pc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gr=Jl+ol+bs,_r="(?:"+[js,Qo,il].join("|")+")"+gr,ta="(?:"+[Gi+Qr+"?",Qr,Qo,il,io].join("|")+")",Zr=RegExp(Si,"g"),Ku=RegExp(Qr,"g"),Ll=RegExp(xl+"(?="+xl+")|"+ta+gr,"g"),Sl=RegExp([Io+"?"+zs+"+"+ea+"(?="+[br,Io,"$"].join("|")+")",Yu+"+"+Aa+"(?="+[br,Io+sl,"$"].join("|")+")",Io+"?"+sl+"+"+ea,Io+"+"+Aa,xu,Pc,rl,_r].join("|"),"g"),na=RegExp("["+wu+Ui+Es+dr+"]"),al=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ql=-1,vr={};vr[Ze]=vr[lt]=vr[rt]=vr[$t]=vr[Qt]=vr[Pn]=vr[wn]=vr[xn]=vr[$n]=!0,vr[ie]=vr[de]=vr[jt]=vr[he]=vr[hn]=vr[Q]=vr[De]=vr[Ke]=vr[ee]=vr[oe]=vr[ze]=vr[Me]=vr[me]=vr[qe]=vr[Mt]=!1;var Or={};Or[ie]=Or[de]=Or[jt]=Or[hn]=Or[he]=Or[Q]=Or[Ze]=Or[lt]=Or[rt]=Or[$t]=Or[Qt]=Or[ee]=Or[oe]=Or[ze]=Or[Me]=Or[me]=Or[qe]=Or[ct]=Or[Pn]=Or[wn]=Or[xn]=Or[$n]=!0,Or[De]=Or[Ke]=Or[Mt]=!1;var ll={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Lu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cl=parseFloat,tu=parseInt,Su=typeof ha=="object"&&ha&&ha.Object===Object&&ha,zr=typeof self=="object"&&self&&self.Object===Object&&self,Qi=Su||zr||Function("return this")(),sr=e&&!e.nodeType&&e,es=sr&&!0&&t&&!t.nodeType&&t,El=es&&es.exports===sr,Ta=El&&Su.process,Di=function(){try{var xt=es&&es.require&&es.require("util").types;return xt||Ta&&Ta.binding&&Ta.binding("util")}catch{}}(),Cu=Di&&Di.isArrayBuffer,pa=Di&&Di.isDate,nu=Di&&Di.isMap,ru=Di&&Di.isRegExp,Ho=Di&&Di.isSet,iu=Di&&Di.isTypedArray;function ai(xt,Kt,Ot){switch(Ot.length){case 0:return xt.call(Kt);case 1:return xt.call(Kt,Ot[0]);case 2:return xt.call(Kt,Ot[0],Ot[1]);case 3:return xt.call(Kt,Ot[0],Ot[1],Ot[2])}return xt.apply(Kt,Ot)}function kc(xt,Kt,Ot,An){for(var Gn=-1,mr=xt==null?0:xt.length;++Gn<mr;){var Ni=xt[Gn];Kt(An,Ni,Ot(Ni),xt)}return An}function Ps(xt,Kt){for(var Ot=-1,An=xt==null?0:xt.length;++Ot<An&&Kt(xt[Ot],Ot,xt)!==!1;);return xt}function ra(xt,Kt){for(var Ot=xt==null?0:xt.length;Ot--&&Kt(xt[Ot],Ot,xt)!==!1;);return xt}function su(xt,Kt){for(var Ot=-1,An=xt==null?0:xt.length;++Ot<An;)if(!Kt(xt[Ot],Ot,xt))return!1;return!0}function ia(xt,Kt){for(var Ot=-1,An=xt==null?0:xt.length,Gn=0,mr=[];++Ot<An;){var Ni=xt[Ot];Kt(Ni,Ot,xt)&&(mr[Gn++]=Ni)}return mr}function Pl(xt,Kt){var Ot=xt==null?0:xt.length;return!!Ot&&dn(xt,Kt,0)>-1}function Ml(xt,Kt,Ot){for(var An=-1,Gn=xt==null?0:xt.length;++An<Gn;)if(Ot(Kt,xt[An]))return!0;return!1}function li(xt,Kt){for(var Ot=-1,An=xt==null?0:xt.length,Gn=Array(An);++Ot<An;)Gn[Ot]=Kt(xt[Ot],Ot,xt);return Gn}function Bo(xt,Kt){for(var Ot=-1,An=Kt.length,Gn=xt.length;++Ot<An;)xt[Gn+Ot]=Kt[Ot];return xt}function Da(xt,Kt,Ot,An){var Gn=-1,mr=xt==null?0:xt.length;for(An&&mr&&(Ot=xt[++Gn]);++Gn<mr;)Ot=Kt(Ot,xt[Gn],Gn,xt);return Ot}function ts(xt,Kt,Ot,An){var Gn=xt==null?0:xt.length;for(An&&Gn&&(Ot=xt[--Gn]);Gn--;)Ot=Kt(Ot,xt[Gn],Gn,xt);return Ot}function F(xt,Kt){for(var Ot=-1,An=xt==null?0:xt.length;++Ot<An;)if(Kt(xt[Ot],Ot,xt))return!0;return!1}var xe=pr("length");function Qe(xt){return xt.split("")}function pt(xt){return xt.match(St)||[]}function Pt(xt,Kt,Ot){var An;return Ot(xt,function(Gn,mr,Ni){if(Kt(Gn,mr,Ni))return An=mr,!1}),An}function Vt(xt,Kt,Ot,An){for(var Gn=xt.length,mr=Ot+(An?1:-1);An?mr--:++mr<Gn;)if(Kt(xt[mr],mr,xt))return mr;return-1}function dn(xt,Kt,Ot){return Kt===Kt?_s(xt,Kt,Ot):Vt(xt,Rn,Ot)}function Nn(xt,Kt,Ot,An){for(var Gn=Ot-1,mr=xt.length;++Gn<mr;)if(An(xt[Gn],Kt))return Gn;return-1}function Rn(xt){return xt!==xt}function er(xt,Kt){var Ot=xt==null?0:xt.length;return Ot?ui(xt,Kt)/Ot:ve}function pr(xt){return function(Kt){return Kt==null?n:Kt[xt]}}function Ar(xt){return function(Kt){return xt==null?n:xt[Kt]}}function Mi(xt,Kt,Ot,An,Gn){return Gn(xt,function(mr,Ni,ci){Ot=An?(An=!1,mr):Kt(Ot,mr,Ni,ci)}),Ot}function ni(xt,Kt){var Ot=xt.length;for(xt.sort(Kt);Ot--;)xt[Ot]=xt[Ot].value;return xt}function ui(xt,Kt){for(var Ot,An=-1,Gn=xt.length;++An<Gn;){var mr=Kt(xt[An]);mr!==n&&(Ot=Ot===n?mr:Ot+mr)}return Ot}function ns(xt,Kt){for(var Ot=-1,An=Array(xt);++Ot<xt;)An[Ot]=Kt(Ot);return An}function us(xt,Kt){return li(Kt,function(Ot){return[Ot,xt[Ot]]})}function Ro(xt){return xt&&xt.slice(0,Oa(xt)+1).replace(kn,"")}function Tr(xt){return function(Kt){return xt(Kt)}}function $s(xt,Kt){return li(Kt,function(Ot){return xt[Ot]})}function kl(xt,Kt){return xt.has(Kt)}function so(xt,Kt){for(var Ot=-1,An=xt.length;++Ot<An&&dn(Kt,xt[Ot],0)>-1;);return Ot}function Eu(xt,Kt){for(var Ot=xt.length;Ot--&&dn(Kt,xt[Ot],0)>-1;);return Ot}function ga(xt,Kt){for(var Ot=xt.length,An=0;Ot--;)xt[Ot]===Kt&&++An;return An}var Xu=Ar(ll),ul=Ar(Mc);function cl(xt){return"\\"+Lu[xt]}function cs(xt,Kt){return xt==null?n:xt[Kt]}function ma(xt){return na.test(xt)}function Fo(xt){return al.test(xt)}function _o(xt){for(var Kt,Ot=[];!(Kt=xt.next()).done;)Ot.push(Kt.value);return Ot}function Al(xt){var Kt=-1,Ot=Array(xt.size);return xt.forEach(function(An,Gn){Ot[++Kt]=[Gn,An]}),Ot}function Vs(xt,Kt){return function(Ot){return xt(Kt(Ot))}}function oo(xt,Kt){for(var Ot=-1,An=xt.length,Gn=0,mr=[];++Ot<An;){var Ni=xt[Ot];(Ni===Kt||Ni===h)&&(xt[Ot]=h,mr[Gn++]=Ot)}return mr}function ao(xt){var Kt=-1,Ot=Array(xt.size);return xt.forEach(function(An){Ot[++Kt]=An}),Ot}function Ac(xt){var Kt=-1,Ot=Array(xt.size);return xt.forEach(function(An){Ot[++Kt]=[An,An]}),Ot}function _s(xt,Kt,Ot){for(var An=Ot-1,Gn=xt.length;++An<Gn;)if(xt[An]===Kt)return An;return-1}function Na(xt,Kt,Ot){for(var An=Ot+1;An--;)if(xt[An]===Kt)return An;return An}function Us(xt){return ma(xt)?Gs(xt):xe(xt)}function Hs(xt){return ma(xt)?Ms(xt):Qe(xt)}function Oa(xt){for(var Kt=xt.length;Kt--&&tn.test(xt.charAt(Kt)););return Kt}var Ia=Ar(eu);function Gs(xt){for(var Kt=Ll.lastIndex=0;Ll.test(xt);)++Kt;return Kt}function Ms(xt){return xt.match(Ll)||[]}function va(xt){return xt.match(Sl)||[]}var jo=function xt(Kt){Kt=Kt==null?Qi:Ws.defaults(Qi.Object(),Kt,Ws.pick(Qi,Zu));var Ot=Kt.Array,An=Kt.Date,Gn=Kt.Error,mr=Kt.Function,Ni=Kt.Math,ci=Kt.Object,ou=Kt.RegExp,lo=Kt.String,Oi=Kt.TypeError,ya=Ot.prototype,Ba=mr.prototype,ba=ci.prototype,_a=Kt["__core-js_shared__"],wa=Ba.toString,$r=ba.hasOwnProperty,sa=0,ks=function(){var f=/[^.]+$/.exec(_a&&_a.keys&&_a.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),di=ba.toString,vi=wa.call(ci),rs=Qi._,Ci=ou("^"+wa.call($r).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zo=El?Kt.Buffer:n,wo=Kt.Symbol,Go=Kt.Uint8Array,Ju=zo?zo.allocUnsafe:n,xa=Vs(ci.getPrototypeOf,ci),ds=ci.create,xi=ba.propertyIsEnumerable,qs=ya.splice,xo=wo?wo.isConcatSpreadable:n,hr=wo?wo.iterator:n,Ra=wo?wo.toStringTag:n,Fa=function(){try{var f=Fh(ci,"defineProperty");return f({},"",{}),f}catch{}}(),oa=Kt.clearTimeout!==Qi.clearTimeout&&Kt.clearTimeout,uo=An&&An.now!==Qi.Date.now&&An.now,sd=Kt.setTimeout!==Qi.setTimeout&&Kt.setTimeout,As=Ni.ceil,Ts=Ni.floor,aa=ci.getOwnPropertySymbols,u=zo?zo.isBuffer:n,y=Kt.isFinite,P=ya.join,G=Vs(ci.keys,ci),ue=Ni.max,Ee=Ni.min,ut=An.now,Nt=Kt.parseInt,Gt=Ni.random,an=ya.reverse,On=Fh(Kt,"DataView"),Yn=Fh(Kt,"Map"),kr=Fh(Kt,"Promise"),hs=Fh(Kt,"Set"),Wi=Fh(Kt,"WeakMap"),Ds=Fh(ci,"create"),Ii=Wi&&new Wi,Lo={},od=jh(On),La=jh(Yn),la=jh(kr),Wo=jh(hs),Th=jh(Wi),Pu=wo?wo.prototype:n,ii=Pu?Pu.valueOf:n,Ys=Pu?Pu.toString:n;function Ie(f){if(co(f)&&!Ur(f)&&!(f instanceof Dr)){if(f instanceof Ns)return f;if($r.call(f,"__wrapped__"))return Hw(f)}return new Ns(f)}var So=function(){function f(){}return function(b){if(!Zs(b))return{};if(ds)return ds(b);f.prototype=b;var N=new f;return f.prototype=n,N}}();function Qu(){}function Ns(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ie.templateSettings={escape:Mr,evaluate:as,interpolate:ji,variable:"",imports:{_:Ie}},Ie.prototype=Qu.prototype,Ie.prototype.constructor=Ie,Ns.prototype=So(Qu.prototype),Ns.prototype.constructor=Ns;function Dr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function $d(){var f=new Dr(this.__wrapped__);return f.__actions__=Dl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Dl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Dl(this.__views__),f}function Mf(){if(this.__filtered__){var f=new Dr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Vd(){var f=this.__wrapped__.value(),b=this.__dir__,N=Ur(f),re=b<0,Se=N?f.length:0,Ve=XM(0,Se,this.__views__),at=Ve.start,bt=Ve.end,Dt=bt-at,ln=re?bt:at-1,un=this.__iteratees__,mn=un.length,jn=0,or=Ee(Dt,this.__takeCount__);if(!N||!re&&Se==Dt&&or==Dt)return Mu(f,this.__actions__);var wr=[];e:for(;Dt--&&jn<or;){ln+=b;for(var ei=-1,xr=f[ln];++ei<mn;){var hi=un[ei],bi=hi.iteratee,uu=hi.type,pl=bi(xr);if(uu==R)xr=pl;else if(!pl){if(uu==$)continue e;break e}}wr[jn++]=xr}return wr}Dr.prototype=So(Qu.prototype),Dr.prototype.constructor=Dr;function dl(f){var b=-1,N=f==null?0:f.length;for(this.clear();++b<N;){var re=f[b];this.set(re[0],re[1])}}function ad(){this.__data__=Ds?Ds(null):{},this.size=0}function Dh(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Vp(f){var b=this.__data__;if(Ds){var N=b[f];return N===l?n:N}return $r.call(b,f)?b[f]:n}function Tc(f){var b=this.__data__;return Ds?b[f]!==n:$r.call(b,f)}function Ud(f,b){var N=this.__data__;return this.size+=this.has(f)?0:1,N[f]=Ds&&b===n?l:b,this}dl.prototype.clear=ad,dl.prototype.delete=Dh,dl.prototype.get=Vp,dl.prototype.has=Tc,dl.prototype.set=Ud;function au(f){var b=-1,N=f==null?0:f.length;for(this.clear();++b<N;){var re=f[b];this.set(re[0],re[1])}}function Up(){this.__data__=[],this.size=0}function Hd(f){var b=this.__data__,N=wt(b,f);if(N<0)return!1;var re=b.length-1;return N==re?b.pop():qs.call(b,N,1),--this.size,!0}function Gd(f){var b=this.__data__,N=wt(b,f);return N<0?n:b[N][1]}function kf(f){return wt(this.__data__,f)>-1}function Af(f,b){var N=this.__data__,re=wt(N,f);return re<0?(++this.size,N.push([f,b])):N[re][1]=b,this}au.prototype.clear=Up,au.prototype.delete=Hd,au.prototype.get=Gd,au.prototype.has=kf,au.prototype.set=Af;function ja(f){var b=-1,N=f==null?0:f.length;for(this.clear();++b<N;){var re=f[b];this.set(re[0],re[1])}}function Tf(){this.size=0,this.__data__={hash:new dl,map:new(Yn||au),string:new dl}}function Df(f){var b=Jm(this,f).delete(f);return this.size-=b?1:0,b}function Nf(f){return Jm(this,f).get(f)}function w(f){return Jm(this,f).has(f)}function D(f,b){var N=Jm(this,f),re=N.size;return N.set(f,b),this.size+=N.size==re?0:1,this}ja.prototype.clear=Tf,ja.prototype.delete=Df,ja.prototype.get=Nf,ja.prototype.has=w,ja.prototype.set=D;function W(f){var b=-1,N=f==null?0:f.length;for(this.__data__=new ja;++b<N;)this.add(f[b])}function ce(f){return this.__data__.set(f,l),this}function Le(f){return this.__data__.has(f)}W.prototype.add=W.prototype.push=ce,W.prototype.has=Le;function Pe(f){var b=this.__data__=new au(f);this.size=b.size}function Te(){this.__data__=new au,this.size=0}function Oe(f){var b=this.__data__,N=b.delete(f);return this.size=b.size,N}function Re(f){return this.__data__.get(f)}function Ye(f){return this.__data__.has(f)}function mt(f,b){var N=this.__data__;if(N instanceof au){var re=N.__data__;if(!Yn||re.length<i-1)return re.push([f,b]),this.size=++N.size,this;N=this.__data__=new ja(re)}return N.set(f,b),this.size=N.size,this}Pe.prototype.clear=Te,Pe.prototype.delete=Oe,Pe.prototype.get=Re,Pe.prototype.has=Ye,Pe.prototype.set=mt;function Rt(f,b){var N=Ur(f),re=!N&&zh(f),Se=!N&&!re&&qd(f),Ve=!N&&!re&&!Se&&Vf(f),at=N||re||Se||Ve,bt=at?ns(f.length,lo):[],Dt=bt.length;for(var ln in f)(b||$r.call(f,ln))&&!(at&&(ln=="length"||Se&&(ln=="offset"||ln=="parent")||Ve&&(ln=="buffer"||ln=="byteLength"||ln=="byteOffset")||fd(ln,Dt)))&&bt.push(ln);return bt}function Ft(f){var b=f.length;return b?f[Ih(0,b-1)]:n}function Et(f,b){return Qm(Dl(f),Kn(b,0,f.length))}function Xt(f){return Qm(Dl(f))}function Yt(f,b,N){(N!==n&&!sc(f[b],N)||N===n&&!(b in f))&&Tn(f,b,N)}function vt(f,b,N){var re=f[b];(!($r.call(f,b)&&sc(re,N))||N===n&&!(b in f))&&Tn(f,b,N)}function wt(f,b){for(var N=f.length;N--;)if(sc(f[N][0],b))return N;return-1}function rn(f,b,N,re){return U(f,function(Se,Ve,at){b(re,Se,N(Se),at)}),re}function fn(f,b){return f&&Oc(b,ua(b),f)}function sn(f,b){return f&&Oc(b,Ol(b),f)}function Tn(f,b,N){b=="__proto__"&&Fa?Fa(f,b,{configurable:!0,enumerable:!0,value:N,writable:!0}):f[b]=N}function Mn(f,b){for(var N=-1,re=b.length,Se=Ot(re),Ve=f==null;++N<re;)Se[N]=Ve?n:y1(f,b[N]);return Se}function Kn(f,b,N){return f===f&&(N!==n&&(f=f<=N?f:N),b!==n&&(f=f>=b?f:b)),f}function d(f,b,N,re,Se,Ve){var at,bt=b&p,Dt=b&v,ln=b&m;if(N&&(at=Se?N(f,re,Se,Ve):N(f)),at!==n)return at;if(!Zs(f))return f;var un=Ur(f);if(un){if(at=QM(f),!bt)return Dl(f,at)}else{var mn=$a(f),jn=mn==Ke||mn==fe;if(qd(f))return mw(f,bt);if(mn==ze||mn==ie||jn&&!Se){if(at=Dt||jn?{}:Iw(f),!bt)return Dt?VM(f,sn(at,f)):$M(f,fn(at,f))}else{if(!Or[mn])return Se?f:{};at=ek(f,mn,bt)}}Ve||(Ve=new Pe);var or=Ve.get(f);if(or)return or;Ve.set(f,at),cx(f)?f.forEach(function(xr){at.add(d(xr,b,N,xr,f,Ve))}):lx(f)&&f.forEach(function(xr,hi){at.set(hi,d(xr,b,N,hi,f,Ve))});var wr=ln?Dt?i1:r1:Dt?Ol:ua,ei=un?n:wr(f);return Ps(ei||f,function(xr,hi){ei&&(hi=xr,xr=f[hi]),vt(at,hi,d(xr,b,N,hi,f,Ve))}),at}function g(f){var b=ua(f);return function(N){return _(N,f,b)}}function _(f,b,N){var re=N.length;if(f==null)return!re;for(f=ci(f);re--;){var Se=N[re],Ve=b[Se],at=f[Se];if(at===n&&!(Se in f)||!Ve(at))return!1}return!0}function C(f,b,N){if(typeof f!="function")throw new Oi(o);return Yp(function(){f.apply(n,N)},b)}function M(f,b,N,re){var Se=-1,Ve=Pl,at=!0,bt=f.length,Dt=[],ln=b.length;if(!bt)return Dt;N&&(b=li(b,Tr(N))),re?(Ve=Ml,at=!1):b.length>=i&&(Ve=kl,at=!1,b=new W(b));e:for(;++Se<bt;){var un=f[Se],mn=N==null?un:N(un);if(un=re||un!==0?un:0,at&&mn===mn){for(var jn=ln;jn--;)if(b[jn]===mn)continue e;Dt.push(un)}else Ve(b,mn,re)||Dt.push(un)}return Dt}var U=ww(nn),te=ww(yn,!0);function ae(f,b){var N=!0;return U(f,function(re,Se,Ve){return N=!!b(re,Se,Ve),N}),N}function be(f,b,N){for(var re=-1,Se=f.length;++re<Se;){var Ve=f[re],at=b(Ve);if(at!=null&&(bt===n?at===at&&!lu(at):N(at,bt)))var bt=at,Dt=Ve}return Dt}function Ce(f,b,N,re){var Se=f.length;for(N=Jr(N),N<0&&(N=-N>Se?0:Se+N),re=re===n||re>Se?Se:Jr(re),re<0&&(re+=Se),re=N>re?0:hx(re);N<re;)f[N++]=b;return f}function tt(f,b){var N=[];return U(f,function(re,Se,Ve){b(re,Se,Ve)&&N.push(re)}),N}function We(f,b,N,re,Se){var Ve=-1,at=f.length;for(N||(N=nk),Se||(Se=[]);++Ve<at;){var bt=f[Ve];b>0&&N(bt)?b>1?We(bt,b-1,N,re,Se):Bo(Se,bt):re||(Se[Se.length]=bt)}return Se}var _t=xw(),It=xw(!0);function nn(f,b){return f&&_t(f,b,ua)}function yn(f,b){return f&&It(f,b,ua)}function Ln(f,b){return ia(b,function(N){return pd(f[N])})}function lr(f,b){b=ic(b,f);for(var N=0,re=b.length;f!=null&&N<re;)f=f[Ic(b[N++])];return N&&N==re?f:n}function et(f,b,N){var re=b(f);return Ur(f)?re:Bo(re,N(f))}function st(f){return f==null?f===n?ft:le:Ra&&Ra in ci(f)?ZM(f):uk(f)}function gt(f,b){return f>b}function zt(f,b){return f!=null&&$r.call(f,b)}function Ct(f,b){return f!=null&&b in ci(f)}function Bt(f,b,N){return f>=Ee(b,N)&&f<ue(b,N)}function we(f,b,N){for(var re=N?Ml:Pl,Se=f[0].length,Ve=f.length,at=Ve,bt=Ot(Ve),Dt=1/0,ln=[];at--;){var un=f[at];at&&b&&(un=li(un,Tr(b))),Dt=Ee(un.length,Dt),bt[at]=!N&&(b||Se>=120&&un.length>=120)?new W(at&&un):n}un=f[0];var mn=-1,jn=bt[0];e:for(;++mn<Se&&ln.length<Dt;){var or=un[mn],wr=b?b(or):or;if(or=N||or!==0?or:0,!(jn?kl(jn,wr):re(ln,wr,N))){for(at=Ve;--at;){var ei=bt[at];if(!(ei?kl(ei,wr):re(f[at],wr,N)))continue e}jn&&jn.push(wr),ln.push(or)}}return ln}function ke(f,b,N,re){return nn(f,function(Se,Ve,at){b(re,N(Se),Ve,at)}),re}function je(f,b,N){b=ic(b,f),f=jw(f,b);var re=f==null?f:f[Ic(Tu(b))];return re==null?n:ai(re,f,N)}function Fe(f){return co(f)&&st(f)==ie}function Ue(f){return co(f)&&st(f)==jt}function He(f){return co(f)&&st(f)==Q}function dt(f,b,N,re,Se){return f===b?!0:f==null||b==null||!co(f)&&!co(b)?f!==f&&b!==b:ht(f,b,N,re,dt,Se)}function ht(f,b,N,re,Se,Ve){var at=Ur(f),bt=Ur(b),Dt=at?de:$a(f),ln=bt?de:$a(b);Dt=Dt==ie?ze:Dt,ln=ln==ie?ze:ln;var un=Dt==ze,mn=ln==ze,jn=Dt==ln;if(jn&&qd(f)){if(!qd(b))return!1;at=!0,un=!1}if(jn&&!un)return Ve||(Ve=new Pe),at||Vf(f)?Dw(f,b,N,re,Se,Ve):YM(f,b,Dt,N,re,Se,Ve);if(!(N&x)){var or=un&&$r.call(f,"__wrapped__"),wr=mn&&$r.call(b,"__wrapped__");if(or||wr){var ei=or?f.value():f,xr=wr?b.value():b;return Ve||(Ve=new Pe),Se(ei,xr,N,re,Ve)}}return jn?(Ve||(Ve=new Pe),KM(f,b,N,re,Se,Ve)):!1}function yt(f){return co(f)&&$a(f)==ee}function At(f,b,N,re){var Se=N.length,Ve=Se,at=!re;if(f==null)return!Ve;for(f=ci(f);Se--;){var bt=N[Se];if(at&&bt[2]?bt[1]!==f[bt[0]]:!(bt[0]in f))return!1}for(;++Se<Ve;){bt=N[Se];var Dt=bt[0],ln=f[Dt],un=bt[1];if(at&&bt[2]){if(ln===n&&!(Dt in f))return!1}else{var mn=new Pe;if(re)var jn=re(ln,un,Dt,f,b,mn);if(!(jn===n?dt(un,ln,x|E,re,mn):jn))return!1}}return!0}function Tt(f){if(!Zs(f)||ik(f))return!1;var b=pd(f)?Ci:ri;return b.test(jh(f))}function on(f){return co(f)&&st(f)==Me}function Fn(f){return co(f)&&$a(f)==me}function zn(f){return co(f)&&s0(f.length)&&!!vr[st(f)]}function Zn(f){return typeof f=="function"?f:f==null?Il:typeof f=="object"?Ur(f)?ec(f[0],f[1]):Co(f):Lx(f)}function si(f){if(!qp(f))return G(f);var b=[];for(var N in ci(f))$r.call(f,N)&&N!="constructor"&&b.push(N);return b}function yi(f){if(!Zs(f))return lk(f);var b=qp(f),N=[];for(var re in f)re=="constructor"&&(b||!$r.call(f,re))||N.push(re);return N}function Vr(f,b){return f<b}function Ei(f,b){var N=-1,re=Nl(f)?Ot(f.length):[];return U(f,function(Se,Ve,at){re[++N]=b(Se,Ve,at)}),re}function Co(f){var b=o1(f);return b.length==1&&b[0][2]?Rw(b[0][0],b[0][1]):function(N){return N===f||At(N,f,b)}}function ec(f,b){return l1(f)&&Bw(b)?Rw(Ic(f),b):function(N){var re=y1(N,f);return re===n&&re===b?b1(N,f):dt(b,re,x|E)}}function Sa(f,b,N,re,Se){f!==b&&_t(b,function(Ve,at){if(Se||(Se=new Pe),Zs(Ve))Nh(f,b,at,N,Sa,re,Se);else{var bt=re?re(c1(f,at),Ve,at+"",f,b,Se):n;bt===n&&(bt=Ve),Yt(f,at,bt)}},Ol)}function Nh(f,b,N,re,Se,Ve,at){var bt=c1(f,N),Dt=c1(b,N),ln=at.get(Dt);if(ln){Yt(f,N,ln);return}var un=Ve?Ve(bt,Dt,N+"",f,b,at):n,mn=un===n;if(mn){var jn=Ur(Dt),or=!jn&&qd(Dt),wr=!jn&&!or&&Vf(Dt);un=Dt,jn||or||wr?Ur(bt)?un=bt:Eo(bt)?un=Dl(bt):or?(mn=!1,un=mw(Dt,!0)):wr?(mn=!1,un=vw(Dt,!0)):un=[]:Kp(Dt)||zh(Dt)?(un=bt,zh(bt)?un=fx(bt):(!Zs(bt)||pd(bt))&&(un=Iw(Dt))):mn=!1}mn&&(at.set(Dt,un),Se(un,Dt,re,Ve,at),at.delete(Dt)),Yt(f,N,un)}function hl(f,b){var N=f.length;if(N)return b+=b<0?N:0,fd(b,N)?f[b]:n}function Dc(f,b,N){b.length?b=li(b,function(Ve){return Ur(Ve)?function(at){return lr(at,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[Il];var re=-1;b=li(b,Tr(yr()));var Se=Ei(f,function(Ve,at,bt){var Dt=li(b,function(ln){return ln(Ve)});return{criteria:Dt,index:++re,value:Ve}});return ni(Se,function(Ve,at){return zM(Ve,at,N)})}function Ca(f,b){return Ks(f,b,function(N,re){return b1(f,re)})}function Ks(f,b,N){for(var re=-1,Se=b.length,Ve={};++re<Se;){var at=b[re],bt=lr(f,at);N(bt,at)&&ld(Ve,ic(at,f),bt)}return Ve}function is(f){return function(b){return lr(b,f)}}function Of(f,b,N,re){var Se=re?Nn:dn,Ve=-1,at=b.length,bt=f;for(f===b&&(b=Dl(b)),N&&(bt=li(f,Tr(N)));++Ve<at;)for(var Dt=0,ln=b[Ve],un=N?N(ln):ln;(Dt=Se(bt,un,Dt,re))>-1;)bt!==f&&qs.call(bt,Dt,1),qs.call(f,Dt,1);return f}function Oh(f,b){for(var N=f?b.length:0,re=N-1;N--;){var Se=b[N];if(N==re||Se!==Ve){var Ve=Se;fd(Se)?qs.call(f,Se,1):ud(f,Se)}}return f}function Ih(f,b){return f+Ts(Gt()*(b-f+1))}function Bh(f,b,N,re){for(var Se=-1,Ve=ue(As((b-f)/(N||1)),0),at=Ot(Ve);Ve--;)at[re?Ve:++Se]=f,f+=N;return at}function If(f,b){var N="";if(!f||b<1||b>K)return N;do b%2&&(N+=f),b=Ts(b/2),b&&(f+=f);while(b);return N}function Xr(f,b){return d1(Fw(f,b,Il),f+"")}function Bf(f){return Ft(Uf(f))}function $m(f,b){var N=Uf(f);return Qm(N,Kn(b,0,N.length))}function ld(f,b,N,re){if(!Zs(f))return f;b=ic(b,f);for(var Se=-1,Ve=b.length,at=Ve-1,bt=f;bt!=null&&++Se<Ve;){var Dt=Ic(b[Se]),ln=N;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return f;if(Se!=at){var un=bt[Dt];ln=re?re(un,Dt,bt):n,ln===n&&(ln=Zs(un)?un:fd(b[Se+1])?[]:{})}vt(bt,Dt,ln),bt=bt[Dt]}return f}var tc=Ii?function(f,b){return Ii.set(f,b),f}:Il,Vm=Fa?function(f,b){return Fa(f,"toString",{configurable:!0,enumerable:!1,value:w1(b),writable:!0})}:Il;function Um(f){return Qm(Uf(f))}function Tl(f,b,N){var re=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),N=N>Se?Se:N,N<0&&(N+=Se),Se=b>N?0:N-b>>>0,b>>>=0;for(var Ve=Ot(Se);++re<Se;)Ve[re]=f[re+b];return Ve}function Hm(f,b){var N;return U(f,function(re,Se,Ve){return N=b(re,Se,Ve),!N}),!!N}function nc(f,b,N){var re=0,Se=f==null?re:f.length;if(typeof b=="number"&&b===b&&Se<=q){for(;re<Se;){var Ve=re+Se>>>1,at=f[Ve];at!==null&&!lu(at)&&(N?at<=b:at<b)?re=Ve+1:Se=Ve}return Se}return Hp(f,b,Il,N)}function Hp(f,b,N,re){var Se=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=N(b);for(var at=b!==b,bt=b===null,Dt=lu(b),ln=b===n;Se<Ve;){var un=Ts((Se+Ve)/2),mn=N(f[un]),jn=mn!==n,or=mn===null,wr=mn===mn,ei=lu(mn);if(at)var xr=re||wr;else ln?xr=wr&&(re||jn):bt?xr=wr&&jn&&(re||!or):Dt?xr=wr&&jn&&!or&&(re||!ei):or||ei?xr=!1:xr=re?mn<=b:mn<b;xr?Se=un+1:Ve=un}return Ee(Ve,se)}function Gp(f,b){for(var N=-1,re=f.length,Se=0,Ve=[];++N<re;){var at=f[N],bt=b?b(at):at;if(!N||!sc(bt,Dt)){var Dt=bt;Ve[Se++]=at===0?0:at}}return Ve}function Gm(f){return typeof f=="number"?f:lu(f)?ve:+f}function za(f){if(typeof f=="string")return f;if(Ur(f))return li(f,za)+"";if(lu(f))return Ys?Ys.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Nc(f,b,N){var re=-1,Se=Pl,Ve=f.length,at=!0,bt=[],Dt=bt;if(N)at=!1,Se=Ml;else if(Ve>=i){var ln=b?null:WM(f);if(ln)return ao(ln);at=!1,Se=kl,Dt=new W}else Dt=b?[]:bt;e:for(;++re<Ve;){var un=f[re],mn=b?b(un):un;if(un=N||un!==0?un:0,at&&mn===mn){for(var jn=Dt.length;jn--;)if(Dt[jn]===mn)continue e;b&&Dt.push(mn),bt.push(un)}else Se(Dt,mn,N)||(Dt!==bt&&Dt.push(mn),bt.push(un))}return bt}function ud(f,b){return b=ic(b,f),f=jw(f,b),f==null||delete f[Ic(Tu(b))]}function Rf(f,b,N,re){return ld(f,b,N(lr(f,b)),re)}function cd(f,b,N,re){for(var Se=f.length,Ve=re?Se:-1;(re?Ve--:++Ve<Se)&&b(f[Ve],Ve,f););return N?Tl(f,re?0:Ve,re?Ve+1:Se):Tl(f,re?Ve+1:0,re?Se:Ve)}function Mu(f,b){var N=f;return N instanceof Dr&&(N=N.value()),Da(b,function(re,Se){return Se.func.apply(Se.thisArg,Bo([re],Se.args))},N)}function ku(f,b,N){var re=f.length;if(re<2)return re?Nc(f[0]):[];for(var Se=-1,Ve=Ot(re);++Se<re;)for(var at=f[Se],bt=-1;++bt<re;)bt!=Se&&(Ve[Se]=M(Ve[Se]||at,f[bt],b,N));return Nc(We(Ve,1),b,N)}function rc(f,b,N){for(var re=-1,Se=f.length,Ve=b.length,at={};++re<Se;){var bt=re<Ve?b[re]:n;N(at,f[re],bt)}return at}function Wd(f){return Eo(f)?f:[]}function Rh(f){return typeof f=="function"?f:Il}function ic(f,b){return Ur(f)?f:l1(f,b)?[f]:Uw($i(f))}var Qy=Xr;function Au(f,b,N){var re=f.length;return N=N===n?re:N,!b&&N>=re?f:Tl(f,b,N)}var Ff=oa||function(f){return Qi.clearTimeout(f)};function mw(f,b){if(b)return f.slice();var N=f.length,re=Ju?Ju(N):new f.constructor(N);return f.copy(re),re}function e1(f){var b=new f.constructor(f.byteLength);return new Go(b).set(new Go(f)),b}function RM(f,b){var N=b?e1(f.buffer):f.buffer;return new f.constructor(N,f.byteOffset,f.byteLength)}function FM(f){var b=new f.constructor(f.source,ur.exec(f));return b.lastIndex=f.lastIndex,b}function jM(f){return ii?ci(ii.call(f)):{}}function vw(f,b){var N=b?e1(f.buffer):f.buffer;return new f.constructor(N,f.byteOffset,f.length)}function yw(f,b){if(f!==b){var N=f!==n,re=f===null,Se=f===f,Ve=lu(f),at=b!==n,bt=b===null,Dt=b===b,ln=lu(b);if(!bt&&!ln&&!Ve&&f>b||Ve&&at&&Dt&&!bt&&!ln||re&&at&&Dt||!N&&Dt||!Se)return 1;if(!re&&!Ve&&!ln&&f<b||ln&&N&&Se&&!re&&!Ve||bt&&N&&Se||!at&&Se||!Dt)return-1}return 0}function zM(f,b,N){for(var re=-1,Se=f.criteria,Ve=b.criteria,at=Se.length,bt=N.length;++re<at;){var Dt=yw(Se[re],Ve[re]);if(Dt){if(re>=bt)return Dt;var ln=N[re];return Dt*(ln=="desc"?-1:1)}}return f.index-b.index}function bw(f,b,N,re){for(var Se=-1,Ve=f.length,at=N.length,bt=-1,Dt=b.length,ln=ue(Ve-at,0),un=Ot(Dt+ln),mn=!re;++bt<Dt;)un[bt]=b[bt];for(;++Se<at;)(mn||Se<Ve)&&(un[N[Se]]=f[Se]);for(;ln--;)un[bt++]=f[Se++];return un}function _w(f,b,N,re){for(var Se=-1,Ve=f.length,at=-1,bt=N.length,Dt=-1,ln=b.length,un=ue(Ve-bt,0),mn=Ot(un+ln),jn=!re;++Se<un;)mn[Se]=f[Se];for(var or=Se;++Dt<ln;)mn[or+Dt]=b[Dt];for(;++at<bt;)(jn||Se<Ve)&&(mn[or+N[at]]=f[Se++]);return mn}function Dl(f,b){var N=-1,re=f.length;for(b||(b=Ot(re));++N<re;)b[N]=f[N];return b}function Oc(f,b,N,re){var Se=!N;N||(N={});for(var Ve=-1,at=b.length;++Ve<at;){var bt=b[Ve],Dt=re?re(N[bt],f[bt],bt,N,f):n;Dt===n&&(Dt=f[bt]),Se?Tn(N,bt,Dt):vt(N,bt,Dt)}return N}function $M(f,b){return Oc(f,a1(f),b)}function VM(f,b){return Oc(f,Nw(f),b)}function Wm(f,b){return function(N,re){var Se=Ur(N)?kc:rn,Ve=b?b():{};return Se(N,f,yr(re,2),Ve)}}function jf(f){return Xr(function(b,N){var re=-1,Se=N.length,Ve=Se>1?N[Se-1]:n,at=Se>2?N[2]:n;for(Ve=f.length>3&&typeof Ve=="function"?(Se--,Ve):n,at&&fl(N[0],N[1],at)&&(Ve=Se<3?n:Ve,Se=1),b=ci(b);++re<Se;){var bt=N[re];bt&&f(b,bt,re,Ve)}return b})}function ww(f,b){return function(N,re){if(N==null)return N;if(!Nl(N))return f(N,re);for(var Se=N.length,Ve=b?Se:-1,at=ci(N);(b?Ve--:++Ve<Se)&&re(at[Ve],Ve,at)!==!1;);return N}}function xw(f){return function(b,N,re){for(var Se=-1,Ve=ci(b),at=re(b),bt=at.length;bt--;){var Dt=at[f?bt:++Se];if(N(Ve[Dt],Dt,Ve)===!1)break}return b}}function UM(f,b,N){var re=b&k,Se=Wp(f);function Ve(){var at=this&&this!==Qi&&this instanceof Ve?Se:f;return at.apply(re?N:this,arguments)}return Ve}function Lw(f){return function(b){b=$i(b);var N=ma(b)?Hs(b):n,re=N?N[0]:b.charAt(0),Se=N?Au(N,1).join(""):b.slice(1);return re[f]()+Se}}function zf(f){return function(b){return Da(wx(_x(b).replace(Zr,"")),f,"")}}function Wp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var N=So(f.prototype),re=f.apply(N,b);return Zs(re)?re:N}}function HM(f,b,N){var re=Wp(f);function Se(){for(var Ve=arguments.length,at=Ot(Ve),bt=Ve,Dt=$f(Se);bt--;)at[bt]=arguments[bt];var ln=Ve<3&&at[0]!==Dt&&at[Ve-1]!==Dt?[]:oo(at,Dt);if(Ve-=ln.length,Ve<N)return Mw(f,b,qm,Se.placeholder,n,at,ln,n,n,N-Ve);var un=this&&this!==Qi&&this instanceof Se?re:f;return ai(un,this,at)}return Se}function Sw(f){return function(b,N,re){var Se=ci(b);if(!Nl(b)){var Ve=yr(N,3);b=ua(b),N=function(bt){return Ve(Se[bt],bt,Se)}}var at=f(b,N,re);return at>-1?Se[Ve?b[at]:at]:n}}function Cw(f){return hd(function(b){var N=b.length,re=N,Se=Ns.prototype.thru;for(f&&b.reverse();re--;){var Ve=b[re];if(typeof Ve!="function")throw new Oi(o);if(Se&&!at&&Xm(Ve)=="wrapper")var at=new Ns([],!0)}for(re=at?re:N;++re<N;){Ve=b[re];var bt=Xm(Ve),Dt=bt=="wrapper"?s1(Ve):n;Dt&&u1(Dt[0])&&Dt[1]==(pe|z|ne|O)&&!Dt[4].length&&Dt[9]==1?at=at[Xm(Dt[0])].apply(at,Dt[3]):at=Ve.length==1&&u1(Ve)?at[bt]():at.thru(Ve)}return function(){var ln=arguments,un=ln[0];if(at&&ln.length==1&&Ur(un))return at.plant(un).value();for(var mn=0,jn=N?b[mn].apply(this,ln):un;++mn<N;)jn=b[mn].call(this,jn);return jn}})}function qm(f,b,N,re,Se,Ve,at,bt,Dt,ln){var un=b&pe,mn=b&k,jn=b&T,or=b&(z|Y),wr=b&j,ei=jn?n:Wp(f);function xr(){for(var hi=arguments.length,bi=Ot(hi),uu=hi;uu--;)bi[uu]=arguments[uu];if(or)var pl=$f(xr),cu=ga(bi,pl);if(re&&(bi=bw(bi,re,Se,or)),Ve&&(bi=_w(bi,Ve,at,or)),hi-=cu,or&&hi<ln){var Po=oo(bi,pl);return Mw(f,b,qm,xr.placeholder,N,bi,Po,bt,Dt,ln-hi)}var oc=mn?N:this,md=jn?oc[f]:f;return hi=bi.length,bt?bi=ck(bi,bt):wr&&hi>1&&bi.reverse(),un&&Dt<hi&&(bi.length=Dt),this&&this!==Qi&&this instanceof xr&&(md=ei||Wp(md)),md.apply(oc,bi)}return xr}function Ew(f,b){return function(N,re){return ke(N,f,b(re),{})}}function Ym(f,b){return function(N,re){var Se;if(N===n&&re===n)return b;if(N!==n&&(Se=N),re!==n){if(Se===n)return re;typeof N=="string"||typeof re=="string"?(N=za(N),re=za(re)):(N=Gm(N),re=Gm(re)),Se=f(N,re)}return Se}}function t1(f){return hd(function(b){return b=li(b,Tr(yr())),Xr(function(N){var re=this;return f(b,function(Se){return ai(Se,re,N)})})})}function Km(f,b){b=b===n?" ":za(b);var N=b.length;if(N<2)return N?If(b,f):b;var re=If(b,As(f/Us(b)));return ma(b)?Au(Hs(re),0,f).join(""):re.slice(0,f)}function GM(f,b,N,re){var Se=b&k,Ve=Wp(f);function at(){for(var bt=-1,Dt=arguments.length,ln=-1,un=re.length,mn=Ot(un+Dt),jn=this&&this!==Qi&&this instanceof at?Ve:f;++ln<un;)mn[ln]=re[ln];for(;Dt--;)mn[ln++]=arguments[++bt];return ai(jn,Se?N:this,mn)}return at}function Pw(f){return function(b,N,re){return re&&typeof re!="number"&&fl(b,N,re)&&(N=re=n),b=gd(b),N===n?(N=b,b=0):N=gd(N),re=re===n?b<N?1:-1:gd(re),Bh(b,N,re,f)}}function Zm(f){return function(b,N){return typeof b=="string"&&typeof N=="string"||(b=Du(b),N=Du(N)),f(b,N)}}function Mw(f,b,N,re,Se,Ve,at,bt,Dt,ln){var un=b&z,mn=un?at:n,jn=un?n:at,or=un?Ve:n,wr=un?n:Ve;b|=un?ne:ge,b&=~(un?ge:ne),b&A||(b&=-4);var ei=[f,b,Se,or,mn,wr,jn,bt,Dt,ln],xr=N.apply(n,ei);return u1(f)&&zw(xr,ei),xr.placeholder=re,$w(xr,f,b)}function n1(f){var b=Ni[f];return function(N,re){if(N=Du(N),re=re==null?0:Ee(Jr(re),292),re&&y(N)){var Se=($i(N)+"e").split("e"),Ve=b(Se[0]+"e"+(+Se[1]+re));return Se=($i(Ve)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-re))}return b(N)}}var WM=hs&&1/ao(new hs([,-0]))[1]==X?function(f){return new hs(f)}:S1;function kw(f){return function(b){var N=$a(b);return N==ee?Al(b):N==me?Ac(b):us(b,f(b))}}function dd(f,b,N,re,Se,Ve,at,bt){var Dt=b&T;if(!Dt&&typeof f!="function")throw new Oi(o);var ln=re?re.length:0;if(ln||(b&=-97,re=Se=n),at=at===n?at:ue(Jr(at),0),bt=bt===n?bt:Jr(bt),ln-=Se?Se.length:0,b&ge){var un=re,mn=Se;re=Se=n}var jn=Dt?n:s1(f),or=[f,b,N,re,Se,un,mn,Ve,at,bt];if(jn&&ak(or,jn),f=or[0],b=or[1],N=or[2],re=or[3],Se=or[4],bt=or[9]=or[9]===n?Dt?0:f.length:ue(or[9]-ln,0),!bt&&b&(z|Y)&&(b&=-25),!b||b==k)var wr=UM(f,b,N);else b==z||b==Y?wr=HM(f,b,bt):(b==ne||b==(k|ne))&&!Se.length?wr=GM(f,b,N,re):wr=qm.apply(n,or);var ei=jn?tc:zw;return $w(ei(wr,or),f,b)}function Aw(f,b,N,re){return f===n||sc(f,ba[N])&&!$r.call(re,N)?b:f}function Tw(f,b,N,re,Se,Ve){return Zs(f)&&Zs(b)&&(Ve.set(b,f),Sa(f,b,n,Tw,Ve),Ve.delete(b)),f}function qM(f){return Kp(f)?n:f}function Dw(f,b,N,re,Se,Ve){var at=N&x,bt=f.length,Dt=b.length;if(bt!=Dt&&!(at&&Dt>bt))return!1;var ln=Ve.get(f),un=Ve.get(b);if(ln&&un)return ln==b&&un==f;var mn=-1,jn=!0,or=N&E?new W:n;for(Ve.set(f,b),Ve.set(b,f);++mn<bt;){var wr=f[mn],ei=b[mn];if(re)var xr=at?re(ei,wr,mn,b,f,Ve):re(wr,ei,mn,f,b,Ve);if(xr!==n){if(xr)continue;jn=!1;break}if(or){if(!F(b,function(hi,bi){if(!kl(or,bi)&&(wr===hi||Se(wr,hi,N,re,Ve)))return or.push(bi)})){jn=!1;break}}else if(!(wr===ei||Se(wr,ei,N,re,Ve))){jn=!1;break}}return Ve.delete(f),Ve.delete(b),jn}function YM(f,b,N,re,Se,Ve,at){switch(N){case hn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case jt:return!(f.byteLength!=b.byteLength||!Ve(new Go(f),new Go(b)));case he:case Q:case oe:return sc(+f,+b);case De:return f.name==b.name&&f.message==b.message;case Me:case qe:return f==b+"";case ee:var bt=Al;case me:var Dt=re&x;if(bt||(bt=ao),f.size!=b.size&&!Dt)return!1;var ln=at.get(f);if(ln)return ln==b;re|=E,at.set(f,b);var un=Dw(bt(f),bt(b),re,Se,Ve,at);return at.delete(f),un;case ct:if(ii)return ii.call(f)==ii.call(b)}return!1}function KM(f,b,N,re,Se,Ve){var at=N&x,bt=r1(f),Dt=bt.length,ln=r1(b),un=ln.length;if(Dt!=un&&!at)return!1;for(var mn=Dt;mn--;){var jn=bt[mn];if(!(at?jn in b:$r.call(b,jn)))return!1}var or=Ve.get(f),wr=Ve.get(b);if(or&&wr)return or==b&&wr==f;var ei=!0;Ve.set(f,b),Ve.set(b,f);for(var xr=at;++mn<Dt;){jn=bt[mn];var hi=f[jn],bi=b[jn];if(re)var uu=at?re(bi,hi,jn,b,f,Ve):re(hi,bi,jn,f,b,Ve);if(!(uu===n?hi===bi||Se(hi,bi,N,re,Ve):uu)){ei=!1;break}xr||(xr=jn=="constructor")}if(ei&&!xr){var pl=f.constructor,cu=b.constructor;pl!=cu&&"constructor"in f&&"constructor"in b&&!(typeof pl=="function"&&pl instanceof pl&&typeof cu=="function"&&cu instanceof cu)&&(ei=!1)}return Ve.delete(f),Ve.delete(b),ei}function hd(f){return d1(Fw(f,n,qw),f+"")}function r1(f){return et(f,ua,a1)}function i1(f){return et(f,Ol,Nw)}var s1=Ii?function(f){return Ii.get(f)}:S1;function Xm(f){for(var b=f.name+"",N=Lo[b],re=$r.call(Lo,b)?N.length:0;re--;){var Se=N[re],Ve=Se.func;if(Ve==null||Ve==f)return Se.name}return b}function $f(f){var b=$r.call(Ie,"placeholder")?Ie:f;return b.placeholder}function yr(){var f=Ie.iteratee||x1;return f=f===x1?Zn:f,arguments.length?f(arguments[0],arguments[1]):f}function Jm(f,b){var N=f.__data__;return rk(b)?N[typeof b=="string"?"string":"hash"]:N.map}function o1(f){for(var b=ua(f),N=b.length;N--;){var re=b[N],Se=f[re];b[N]=[re,Se,Bw(Se)]}return b}function Fh(f,b){var N=cs(f,b);return Tt(N)?N:n}function ZM(f){var b=$r.call(f,Ra),N=f[Ra];try{f[Ra]=n;var re=!0}catch{}var Se=di.call(f);return re&&(b?f[Ra]=N:delete f[Ra]),Se}var a1=aa?function(f){return f==null?[]:(f=ci(f),ia(aa(f),function(b){return xi.call(f,b)}))}:C1,Nw=aa?function(f){for(var b=[];f;)Bo(b,a1(f)),f=xa(f);return b}:C1,$a=st;(On&&$a(new On(new ArrayBuffer(1)))!=hn||Yn&&$a(new Yn)!=ee||kr&&$a(kr.resolve())!=$e||hs&&$a(new hs)!=me||Wi&&$a(new Wi)!=Mt)&&($a=function(f){var b=st(f),N=b==ze?f.constructor:n,re=N?jh(N):"";if(re)switch(re){case od:return hn;case La:return ee;case la:return $e;case Wo:return me;case Th:return Mt}return b});function XM(f,b,N){for(var re=-1,Se=N.length;++re<Se;){var Ve=N[re],at=Ve.size;switch(Ve.type){case"drop":f+=at;break;case"dropRight":b-=at;break;case"take":b=Ee(b,f+at);break;case"takeRight":f=ue(f,b-at);break}}return{start:f,end:b}}function JM(f){var b=f.match(Wt);return b?b[1].split(ir):[]}function Ow(f,b,N){b=ic(b,f);for(var re=-1,Se=b.length,Ve=!1;++re<Se;){var at=Ic(b[re]);if(!(Ve=f!=null&&N(f,at)))break;f=f[at]}return Ve||++re!=Se?Ve:(Se=f==null?0:f.length,!!Se&&s0(Se)&&fd(at,Se)&&(Ur(f)||zh(f)))}function QM(f){var b=f.length,N=new f.constructor(b);return b&&typeof f[0]=="string"&&$r.call(f,"index")&&(N.index=f.index,N.input=f.input),N}function Iw(f){return typeof f.constructor=="function"&&!qp(f)?So(xa(f)):{}}function ek(f,b,N){var re=f.constructor;switch(b){case jt:return e1(f);case he:case Q:return new re(+f);case hn:return RM(f,N);case Ze:case lt:case rt:case $t:case Qt:case Pn:case wn:case xn:case $n:return vw(f,N);case ee:return new re;case oe:case qe:return new re(f);case Me:return FM(f);case me:return new re;case ct:return jM(f)}}function tk(f,b){var N=b.length;if(!N)return f;var re=N-1;return b[re]=(N>1?"& ":"")+b[re],b=b.join(N>2?", ":" "),f.replace(qt,`{
/* [wrapped with `+b+`] */
`)}function nk(f){return Ur(f)||zh(f)||!!(xo&&f&&f[xo])}function fd(f,b){var N=typeof f;return b=b??K,!!b&&(N=="number"||N!="symbol"&&zi.test(f))&&f>-1&&f%1==0&&f<b}function fl(f,b,N){if(!Zs(N))return!1;var re=typeof b;return(re=="number"?Nl(N)&&fd(b,N.length):re=="string"&&b in N)?sc(N[b],f):!1}function l1(f,b){if(Ur(f))return!1;var N=typeof f;return N=="number"||N=="symbol"||N=="boolean"||f==null||lu(f)?!0:Cs.test(f)||!ro.test(f)||b!=null&&f in ci(b)}function rk(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function u1(f){var b=Xm(f),N=Ie[b];if(typeof N!="function"||!(b in Dr.prototype))return!1;if(f===N)return!0;var re=s1(N);return!!re&&f===re[0]}function ik(f){return!!ks&&ks in f}var sk=_a?pd:E1;function qp(f){var b=f&&f.constructor,N=typeof b=="function"&&b.prototype||ba;return f===N}function Bw(f){return f===f&&!Zs(f)}function Rw(f,b){return function(N){return N==null?!1:N[f]===b&&(b!==n||f in ci(N))}}function ok(f){var b=r0(f,function(re){return N.size===c&&N.clear(),re}),N=b.cache;return b}function ak(f,b){var N=f[1],re=b[1],Se=N|re,Ve=Se<(k|T|pe),at=re==pe&&N==z||re==pe&&N==O&&f[7].length<=b[8]||re==(pe|O)&&b[7].length<=b[8]&&N==z;if(!(Ve||at))return f;re&k&&(f[2]=b[2],Se|=N&k?0:A);var bt=b[3];if(bt){var Dt=f[3];f[3]=Dt?bw(Dt,bt,b[4]):bt,f[4]=Dt?oo(f[3],h):b[4]}return bt=b[5],bt&&(Dt=f[5],f[5]=Dt?_w(Dt,bt,b[6]):bt,f[6]=Dt?oo(f[5],h):b[6]),bt=b[7],bt&&(f[7]=bt),re&pe&&(f[8]=f[8]==null?b[8]:Ee(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function lk(f){var b=[];if(f!=null)for(var N in ci(f))b.push(N);return b}function uk(f){return di.call(f)}function Fw(f,b,N){return b=ue(b===n?f.length-1:b,0),function(){for(var re=arguments,Se=-1,Ve=ue(re.length-b,0),at=Ot(Ve);++Se<Ve;)at[Se]=re[b+Se];Se=-1;for(var bt=Ot(b+1);++Se<b;)bt[Se]=re[Se];return bt[b]=N(at),ai(f,this,bt)}}function jw(f,b){return b.length<2?f:lr(f,Tl(b,0,-1))}function ck(f,b){for(var N=f.length,re=Ee(b.length,N),Se=Dl(f);re--;){var Ve=b[re];f[re]=fd(Ve,N)?Se[Ve]:n}return f}function c1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var zw=Vw(tc),Yp=sd||function(f,b){return Qi.setTimeout(f,b)},d1=Vw(Vm);function $w(f,b,N){var re=b+"";return d1(f,tk(re,dk(JM(re),N)))}function Vw(f){var b=0,N=0;return function(){var re=ut(),Se=H-(re-N);if(N=re,Se>0){if(++b>=B)return arguments[0]}else b=0;return f.apply(n,arguments)}}function Qm(f,b){var N=-1,re=f.length,Se=re-1;for(b=b===n?re:b;++N<b;){var Ve=Ih(N,Se),at=f[Ve];f[Ve]=f[N],f[N]=at}return f.length=b,f}var Uw=ok(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(ot,function(N,re,Se,Ve){b.push(Se?Ve.replace(Qn,"$1"):re||N)}),b});function Ic(f){if(typeof f=="string"||lu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function jh(f){if(f!=null){try{return wa.call(f)}catch{}try{return f+""}catch{}}return""}function dk(f,b){return Ps(Z,function(N){var re="_."+N[0];b&N[1]&&!Pl(f,re)&&f.push(re)}),f.sort()}function Hw(f){if(f instanceof Dr)return f.clone();var b=new Ns(f.__wrapped__,f.__chain__);return b.__actions__=Dl(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function hk(f,b,N){(N?fl(f,b,N):b===n)?b=1:b=ue(Jr(b),0);var re=f==null?0:f.length;if(!re||b<1)return[];for(var Se=0,Ve=0,at=Ot(As(re/b));Se<re;)at[Ve++]=Tl(f,Se,Se+=b);return at}function fk(f){for(var b=-1,N=f==null?0:f.length,re=0,Se=[];++b<N;){var Ve=f[b];Ve&&(Se[re++]=Ve)}return Se}function pk(){var f=arguments.length;if(!f)return[];for(var b=Ot(f-1),N=arguments[0],re=f;re--;)b[re-1]=arguments[re];return Bo(Ur(N)?Dl(N):[N],We(b,1))}var gk=Xr(function(f,b){return Eo(f)?M(f,We(b,1,Eo,!0)):[]}),mk=Xr(function(f,b){var N=Tu(b);return Eo(N)&&(N=n),Eo(f)?M(f,We(b,1,Eo,!0),yr(N,2)):[]}),vk=Xr(function(f,b){var N=Tu(b);return Eo(N)&&(N=n),Eo(f)?M(f,We(b,1,Eo,!0),n,N):[]});function yk(f,b,N){var re=f==null?0:f.length;return re?(b=N||b===n?1:Jr(b),Tl(f,b<0?0:b,re)):[]}function bk(f,b,N){var re=f==null?0:f.length;return re?(b=N||b===n?1:Jr(b),b=re-b,Tl(f,0,b<0?0:b)):[]}function _k(f,b){return f&&f.length?cd(f,yr(b,3),!0,!0):[]}function wk(f,b){return f&&f.length?cd(f,yr(b,3),!0):[]}function xk(f,b,N,re){var Se=f==null?0:f.length;return Se?(N&&typeof N!="number"&&fl(f,b,N)&&(N=0,re=Se),Ce(f,b,N,re)):[]}function Gw(f,b,N){var re=f==null?0:f.length;if(!re)return-1;var Se=N==null?0:Jr(N);return Se<0&&(Se=ue(re+Se,0)),Vt(f,yr(b,3),Se)}function Ww(f,b,N){var re=f==null?0:f.length;if(!re)return-1;var Se=re-1;return N!==n&&(Se=Jr(N),Se=N<0?ue(re+Se,0):Ee(Se,re-1)),Vt(f,yr(b,3),Se,!0)}function qw(f){var b=f==null?0:f.length;return b?We(f,1):[]}function Lk(f){var b=f==null?0:f.length;return b?We(f,X):[]}function Sk(f,b){var N=f==null?0:f.length;return N?(b=b===n?1:Jr(b),We(f,b)):[]}function Ck(f){for(var b=-1,N=f==null?0:f.length,re={};++b<N;){var Se=f[b];re[Se[0]]=Se[1]}return re}function Yw(f){return f&&f.length?f[0]:n}function Ek(f,b,N){var re=f==null?0:f.length;if(!re)return-1;var Se=N==null?0:Jr(N);return Se<0&&(Se=ue(re+Se,0)),dn(f,b,Se)}function Pk(f){var b=f==null?0:f.length;return b?Tl(f,0,-1):[]}var Mk=Xr(function(f){var b=li(f,Wd);return b.length&&b[0]===f[0]?we(b):[]}),kk=Xr(function(f){var b=Tu(f),N=li(f,Wd);return b===Tu(N)?b=n:N.pop(),N.length&&N[0]===f[0]?we(N,yr(b,2)):[]}),Ak=Xr(function(f){var b=Tu(f),N=li(f,Wd);return b=typeof b=="function"?b:n,b&&N.pop(),N.length&&N[0]===f[0]?we(N,n,b):[]});function Tk(f,b){return f==null?"":P.call(f,b)}function Tu(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Dk(f,b,N){var re=f==null?0:f.length;if(!re)return-1;var Se=re;return N!==n&&(Se=Jr(N),Se=Se<0?ue(re+Se,0):Ee(Se,re-1)),b===b?Na(f,b,Se):Vt(f,Rn,Se,!0)}function Nk(f,b){return f&&f.length?hl(f,Jr(b)):n}var Ok=Xr(Kw);function Kw(f,b){return f&&f.length&&b&&b.length?Of(f,b):f}function Ik(f,b,N){return f&&f.length&&b&&b.length?Of(f,b,yr(N,2)):f}function Bk(f,b,N){return f&&f.length&&b&&b.length?Of(f,b,n,N):f}var Rk=hd(function(f,b){var N=f==null?0:f.length,re=Mn(f,b);return Oh(f,li(b,function(Se){return fd(Se,N)?+Se:Se}).sort(yw)),re});function Fk(f,b){var N=[];if(!(f&&f.length))return N;var re=-1,Se=[],Ve=f.length;for(b=yr(b,3);++re<Ve;){var at=f[re];b(at,re,f)&&(N.push(at),Se.push(re))}return Oh(f,Se),N}function h1(f){return f==null?f:an.call(f)}function jk(f,b,N){var re=f==null?0:f.length;return re?(N&&typeof N!="number"&&fl(f,b,N)?(b=0,N=re):(b=b==null?0:Jr(b),N=N===n?re:Jr(N)),Tl(f,b,N)):[]}function zk(f,b){return nc(f,b)}function $k(f,b,N){return Hp(f,b,yr(N,2))}function Vk(f,b){var N=f==null?0:f.length;if(N){var re=nc(f,b);if(re<N&&sc(f[re],b))return re}return-1}function Uk(f,b){return nc(f,b,!0)}function Hk(f,b,N){return Hp(f,b,yr(N,2),!0)}function Gk(f,b){var N=f==null?0:f.length;if(N){var re=nc(f,b,!0)-1;if(sc(f[re],b))return re}return-1}function Wk(f){return f&&f.length?Gp(f):[]}function qk(f,b){return f&&f.length?Gp(f,yr(b,2)):[]}function Yk(f){var b=f==null?0:f.length;return b?Tl(f,1,b):[]}function Kk(f,b,N){return f&&f.length?(b=N||b===n?1:Jr(b),Tl(f,0,b<0?0:b)):[]}function Zk(f,b,N){var re=f==null?0:f.length;return re?(b=N||b===n?1:Jr(b),b=re-b,Tl(f,b<0?0:b,re)):[]}function Xk(f,b){return f&&f.length?cd(f,yr(b,3),!1,!0):[]}function Jk(f,b){return f&&f.length?cd(f,yr(b,3)):[]}var Qk=Xr(function(f){return Nc(We(f,1,Eo,!0))}),eA=Xr(function(f){var b=Tu(f);return Eo(b)&&(b=n),Nc(We(f,1,Eo,!0),yr(b,2))}),tA=Xr(function(f){var b=Tu(f);return b=typeof b=="function"?b:n,Nc(We(f,1,Eo,!0),n,b)});function nA(f){return f&&f.length?Nc(f):[]}function rA(f,b){return f&&f.length?Nc(f,yr(b,2)):[]}function iA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Nc(f,n,b):[]}function f1(f){if(!(f&&f.length))return[];var b=0;return f=ia(f,function(N){if(Eo(N))return b=ue(N.length,b),!0}),ns(b,function(N){return li(f,pr(N))})}function Zw(f,b){if(!(f&&f.length))return[];var N=f1(f);return b==null?N:li(N,function(re){return ai(b,n,re)})}var sA=Xr(function(f,b){return Eo(f)?M(f,b):[]}),oA=Xr(function(f){return ku(ia(f,Eo))}),aA=Xr(function(f){var b=Tu(f);return Eo(b)&&(b=n),ku(ia(f,Eo),yr(b,2))}),lA=Xr(function(f){var b=Tu(f);return b=typeof b=="function"?b:n,ku(ia(f,Eo),n,b)}),uA=Xr(f1);function cA(f,b){return rc(f||[],b||[],vt)}function dA(f,b){return rc(f||[],b||[],ld)}var hA=Xr(function(f){var b=f.length,N=b>1?f[b-1]:n;return N=typeof N=="function"?(f.pop(),N):n,Zw(f,N)});function Xw(f){var b=Ie(f);return b.__chain__=!0,b}function fA(f,b){return b(f),f}function e0(f,b){return b(f)}var pA=hd(function(f){var b=f.length,N=b?f[0]:0,re=this.__wrapped__,Se=function(Ve){return Mn(Ve,f)};return b>1||this.__actions__.length||!(re instanceof Dr)||!fd(N)?this.thru(Se):(re=re.slice(N,+N+(b?1:0)),re.__actions__.push({func:e0,args:[Se],thisArg:n}),new Ns(re,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function gA(){return Xw(this)}function mA(){return new Ns(this.value(),this.__chain__)}function vA(){this.__values__===n&&(this.__values__=dx(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function yA(){return this}function bA(f){for(var b,N=this;N instanceof Qu;){var re=Hw(N);re.__index__=0,re.__values__=n,b?Se.__wrapped__=re:b=re;var Se=re;N=N.__wrapped__}return Se.__wrapped__=f,b}function _A(){var f=this.__wrapped__;if(f instanceof Dr){var b=f;return this.__actions__.length&&(b=new Dr(this)),b=b.reverse(),b.__actions__.push({func:e0,args:[h1],thisArg:n}),new Ns(b,this.__chain__)}return this.thru(h1)}function wA(){return Mu(this.__wrapped__,this.__actions__)}var xA=Wm(function(f,b,N){$r.call(f,N)?++f[N]:Tn(f,N,1)});function LA(f,b,N){var re=Ur(f)?su:ae;return N&&fl(f,b,N)&&(b=n),re(f,yr(b,3))}function SA(f,b){var N=Ur(f)?ia:tt;return N(f,yr(b,3))}var CA=Sw(Gw),EA=Sw(Ww);function PA(f,b){return We(t0(f,b),1)}function MA(f,b){return We(t0(f,b),X)}function kA(f,b,N){return N=N===n?1:Jr(N),We(t0(f,b),N)}function Jw(f,b){var N=Ur(f)?Ps:U;return N(f,yr(b,3))}function Qw(f,b){var N=Ur(f)?ra:te;return N(f,yr(b,3))}var AA=Wm(function(f,b,N){$r.call(f,N)?f[N].push(b):Tn(f,N,[b])});function TA(f,b,N,re){f=Nl(f)?f:Uf(f),N=N&&!re?Jr(N):0;var Se=f.length;return N<0&&(N=ue(Se+N,0)),o0(f)?N<=Se&&f.indexOf(b,N)>-1:!!Se&&dn(f,b,N)>-1}var DA=Xr(function(f,b,N){var re=-1,Se=typeof b=="function",Ve=Nl(f)?Ot(f.length):[];return U(f,function(at){Ve[++re]=Se?ai(b,at,N):je(at,b,N)}),Ve}),NA=Wm(function(f,b,N){Tn(f,N,b)});function t0(f,b){var N=Ur(f)?li:Ei;return N(f,yr(b,3))}function OA(f,b,N,re){return f==null?[]:(Ur(b)||(b=b==null?[]:[b]),N=re?n:N,Ur(N)||(N=N==null?[]:[N]),Dc(f,b,N))}var IA=Wm(function(f,b,N){f[N?0:1].push(b)},function(){return[[],[]]});function BA(f,b,N){var re=Ur(f)?Da:Mi,Se=arguments.length<3;return re(f,yr(b,4),N,Se,U)}function RA(f,b,N){var re=Ur(f)?ts:Mi,Se=arguments.length<3;return re(f,yr(b,4),N,Se,te)}function FA(f,b){var N=Ur(f)?ia:tt;return N(f,i0(yr(b,3)))}function jA(f){var b=Ur(f)?Ft:Bf;return b(f)}function zA(f,b,N){(N?fl(f,b,N):b===n)?b=1:b=Jr(b);var re=Ur(f)?Et:$m;return re(f,b)}function $A(f){var b=Ur(f)?Xt:Um;return b(f)}function VA(f){if(f==null)return 0;if(Nl(f))return o0(f)?Us(f):f.length;var b=$a(f);return b==ee||b==me?f.size:si(f).length}function UA(f,b,N){var re=Ur(f)?F:Hm;return N&&fl(f,b,N)&&(b=n),re(f,yr(b,3))}var HA=Xr(function(f,b){if(f==null)return[];var N=b.length;return N>1&&fl(f,b[0],b[1])?b=[]:N>2&&fl(b[0],b[1],b[2])&&(b=[b[0]]),Dc(f,We(b,1),[])}),n0=uo||function(){return Qi.Date.now()};function GA(f,b){if(typeof b!="function")throw new Oi(o);return f=Jr(f),function(){if(--f<1)return b.apply(this,arguments)}}function ex(f,b,N){return b=N?n:b,b=f&&b==null?f.length:b,dd(f,pe,n,n,n,n,b)}function tx(f,b){var N;if(typeof b!="function")throw new Oi(o);return f=Jr(f),function(){return--f>0&&(N=b.apply(this,arguments)),f<=1&&(b=n),N}}var p1=Xr(function(f,b,N){var re=k;if(N.length){var Se=oo(N,$f(p1));re|=ne}return dd(f,re,b,N,Se)}),nx=Xr(function(f,b,N){var re=k|T;if(N.length){var Se=oo(N,$f(nx));re|=ne}return dd(b,re,f,N,Se)});function rx(f,b,N){b=N?n:b;var re=dd(f,z,n,n,n,n,n,b);return re.placeholder=rx.placeholder,re}function ix(f,b,N){b=N?n:b;var re=dd(f,Y,n,n,n,n,n,b);return re.placeholder=ix.placeholder,re}function sx(f,b,N){var re,Se,Ve,at,bt,Dt,ln=0,un=!1,mn=!1,jn=!0;if(typeof f!="function")throw new Oi(o);b=Du(b)||0,Zs(N)&&(un=!!N.leading,mn="maxWait"in N,Ve=mn?ue(Du(N.maxWait)||0,b):Ve,jn="trailing"in N?!!N.trailing:jn);function or(Po){var oc=re,md=Se;return re=Se=n,ln=Po,at=f.apply(md,oc),at}function wr(Po){return ln=Po,bt=Yp(hi,b),un?or(Po):at}function ei(Po){var oc=Po-Dt,md=Po-ln,Sx=b-oc;return mn?Ee(Sx,Ve-md):Sx}function xr(Po){var oc=Po-Dt,md=Po-ln;return Dt===n||oc>=b||oc<0||mn&&md>=Ve}function hi(){var Po=n0();if(xr(Po))return bi(Po);bt=Yp(hi,ei(Po))}function bi(Po){return bt=n,jn&&re?or(Po):(re=Se=n,at)}function uu(){bt!==n&&Ff(bt),ln=0,re=Dt=Se=bt=n}function pl(){return bt===n?at:bi(n0())}function cu(){var Po=n0(),oc=xr(Po);if(re=arguments,Se=this,Dt=Po,oc){if(bt===n)return wr(Dt);if(mn)return Ff(bt),bt=Yp(hi,b),or(Dt)}return bt===n&&(bt=Yp(hi,b)),at}return cu.cancel=uu,cu.flush=pl,cu}var WA=Xr(function(f,b){return C(f,1,b)}),qA=Xr(function(f,b,N){return C(f,Du(b)||0,N)});function YA(f){return dd(f,j)}function r0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Oi(o);var N=function(){var re=arguments,Se=b?b.apply(this,re):re[0],Ve=N.cache;if(Ve.has(Se))return Ve.get(Se);var at=f.apply(this,re);return N.cache=Ve.set(Se,at)||Ve,at};return N.cache=new(r0.Cache||ja),N}r0.Cache=ja;function i0(f){if(typeof f!="function")throw new Oi(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function KA(f){return tx(2,f)}var ZA=Qy(function(f,b){b=b.length==1&&Ur(b[0])?li(b[0],Tr(yr())):li(We(b,1),Tr(yr()));var N=b.length;return Xr(function(re){for(var Se=-1,Ve=Ee(re.length,N);++Se<Ve;)re[Se]=b[Se].call(this,re[Se]);return ai(f,this,re)})}),g1=Xr(function(f,b){var N=oo(b,$f(g1));return dd(f,ne,n,b,N)}),ox=Xr(function(f,b){var N=oo(b,$f(ox));return dd(f,ge,n,b,N)}),XA=hd(function(f,b){return dd(f,O,n,n,n,b)});function JA(f,b){if(typeof f!="function")throw new Oi(o);return b=b===n?b:Jr(b),Xr(f,b)}function QA(f,b){if(typeof f!="function")throw new Oi(o);return b=b==null?0:ue(Jr(b),0),Xr(function(N){var re=N[b],Se=Au(N,0,b);return re&&Bo(Se,re),ai(f,this,Se)})}function e6(f,b,N){var re=!0,Se=!0;if(typeof f!="function")throw new Oi(o);return Zs(N)&&(re="leading"in N?!!N.leading:re,Se="trailing"in N?!!N.trailing:Se),sx(f,b,{leading:re,maxWait:b,trailing:Se})}function t6(f){return ex(f,1)}function n6(f,b){return g1(Rh(b),f)}function r6(){if(!arguments.length)return[];var f=arguments[0];return Ur(f)?f:[f]}function i6(f){return d(f,m)}function s6(f,b){return b=typeof b=="function"?b:n,d(f,m,b)}function o6(f){return d(f,p|m)}function a6(f,b){return b=typeof b=="function"?b:n,d(f,p|m,b)}function l6(f,b){return b==null||_(f,b,ua(b))}function sc(f,b){return f===b||f!==f&&b!==b}var u6=Zm(gt),c6=Zm(function(f,b){return f>=b}),zh=Fe(function(){return arguments}())?Fe:function(f){return co(f)&&$r.call(f,"callee")&&!xi.call(f,"callee")},Ur=Ot.isArray,d6=Cu?Tr(Cu):Ue;function Nl(f){return f!=null&&s0(f.length)&&!pd(f)}function Eo(f){return co(f)&&Nl(f)}function h6(f){return f===!0||f===!1||co(f)&&st(f)==he}var qd=u||E1,f6=pa?Tr(pa):He;function p6(f){return co(f)&&f.nodeType===1&&!Kp(f)}function g6(f){if(f==null)return!0;if(Nl(f)&&(Ur(f)||typeof f=="string"||typeof f.splice=="function"||qd(f)||Vf(f)||zh(f)))return!f.length;var b=$a(f);if(b==ee||b==me)return!f.size;if(qp(f))return!si(f).length;for(var N in f)if($r.call(f,N))return!1;return!0}function m6(f,b){return dt(f,b)}function v6(f,b,N){N=typeof N=="function"?N:n;var re=N?N(f,b):n;return re===n?dt(f,b,n,N):!!re}function m1(f){if(!co(f))return!1;var b=st(f);return b==De||b==Ae||typeof f.message=="string"&&typeof f.name=="string"&&!Kp(f)}function y6(f){return typeof f=="number"&&y(f)}function pd(f){if(!Zs(f))return!1;var b=st(f);return b==Ke||b==fe||b==ye||b==Je}function ax(f){return typeof f=="number"&&f==Jr(f)}function s0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=K}function Zs(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function co(f){return f!=null&&typeof f=="object"}var lx=nu?Tr(nu):yt;function b6(f,b){return f===b||At(f,b,o1(b))}function _6(f,b,N){return N=typeof N=="function"?N:n,At(f,b,o1(b),N)}function w6(f){return ux(f)&&f!=+f}function x6(f){if(sk(f))throw new Gn(s);return Tt(f)}function L6(f){return f===null}function S6(f){return f==null}function ux(f){return typeof f=="number"||co(f)&&st(f)==oe}function Kp(f){if(!co(f)||st(f)!=ze)return!1;var b=xa(f);if(b===null)return!0;var N=$r.call(b,"constructor")&&b.constructor;return typeof N=="function"&&N instanceof N&&wa.call(N)==vi}var v1=ru?Tr(ru):on;function C6(f){return ax(f)&&f>=-9007199254740991&&f<=K}var cx=Ho?Tr(Ho):Fn;function o0(f){return typeof f=="string"||!Ur(f)&&co(f)&&st(f)==qe}function lu(f){return typeof f=="symbol"||co(f)&&st(f)==ct}var Vf=iu?Tr(iu):zn;function E6(f){return f===n}function P6(f){return co(f)&&$a(f)==Mt}function M6(f){return co(f)&&st(f)==it}var k6=Zm(Vr),A6=Zm(function(f,b){return f<=b});function dx(f){if(!f)return[];if(Nl(f))return o0(f)?Hs(f):Dl(f);if(hr&&f[hr])return _o(f[hr]());var b=$a(f),N=b==ee?Al:b==me?ao:Uf;return N(f)}function gd(f){if(!f)return f===0?f:0;if(f=Du(f),f===X||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function Jr(f){var b=gd(f),N=b%1;return b===b?N?b-N:b:0}function hx(f){return f?Kn(Jr(f),0,Ge):0}function Du(f){if(typeof f=="number")return f;if(lu(f))return ve;if(Zs(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=Zs(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Ro(f);var N=cn.test(f);return N||Li.test(f)?tu(f.slice(2),N?2:8):vn.test(f)?ve:+f}function fx(f){return Oc(f,Ol(f))}function T6(f){return f?Kn(Jr(f),-9007199254740991,K):f===0?f:0}function $i(f){return f==null?"":za(f)}var D6=jf(function(f,b){if(qp(b)||Nl(b)){Oc(b,ua(b),f);return}for(var N in b)$r.call(b,N)&&vt(f,N,b[N])}),px=jf(function(f,b){Oc(b,Ol(b),f)}),a0=jf(function(f,b,N,re){Oc(b,Ol(b),f,re)}),N6=jf(function(f,b,N,re){Oc(b,ua(b),f,re)}),O6=hd(Mn);function I6(f,b){var N=So(f);return b==null?N:fn(N,b)}var B6=Xr(function(f,b){f=ci(f);var N=-1,re=b.length,Se=re>2?b[2]:n;for(Se&&fl(b[0],b[1],Se)&&(re=1);++N<re;)for(var Ve=b[N],at=Ol(Ve),bt=-1,Dt=at.length;++bt<Dt;){var ln=at[bt],un=f[ln];(un===n||sc(un,ba[ln])&&!$r.call(f,ln))&&(f[ln]=Ve[ln])}return f}),R6=Xr(function(f){return f.push(n,Tw),ai(gx,n,f)});function F6(f,b){return Pt(f,yr(b,3),nn)}function j6(f,b){return Pt(f,yr(b,3),yn)}function z6(f,b){return f==null?f:_t(f,yr(b,3),Ol)}function $6(f,b){return f==null?f:It(f,yr(b,3),Ol)}function V6(f,b){return f&&nn(f,yr(b,3))}function U6(f,b){return f&&yn(f,yr(b,3))}function H6(f){return f==null?[]:Ln(f,ua(f))}function G6(f){return f==null?[]:Ln(f,Ol(f))}function y1(f,b,N){var re=f==null?n:lr(f,b);return re===n?N:re}function W6(f,b){return f!=null&&Ow(f,b,zt)}function b1(f,b){return f!=null&&Ow(f,b,Ct)}var q6=Ew(function(f,b,N){b!=null&&typeof b.toString!="function"&&(b=di.call(b)),f[b]=N},w1(Il)),Y6=Ew(function(f,b,N){b!=null&&typeof b.toString!="function"&&(b=di.call(b)),$r.call(f,b)?f[b].push(N):f[b]=[N]},yr),K6=Xr(je);function ua(f){return Nl(f)?Rt(f):si(f)}function Ol(f){return Nl(f)?Rt(f,!0):yi(f)}function Z6(f,b){var N={};return b=yr(b,3),nn(f,function(re,Se,Ve){Tn(N,b(re,Se,Ve),re)}),N}function X6(f,b){var N={};return b=yr(b,3),nn(f,function(re,Se,Ve){Tn(N,Se,b(re,Se,Ve))}),N}var J6=jf(function(f,b,N){Sa(f,b,N)}),gx=jf(function(f,b,N,re){Sa(f,b,N,re)}),Q6=hd(function(f,b){var N={};if(f==null)return N;var re=!1;b=li(b,function(Ve){return Ve=ic(Ve,f),re||(re=Ve.length>1),Ve}),Oc(f,i1(f),N),re&&(N=d(N,p|v|m,qM));for(var Se=b.length;Se--;)ud(N,b[Se]);return N});function eT(f,b){return mx(f,i0(yr(b)))}var tT=hd(function(f,b){return f==null?{}:Ca(f,b)});function mx(f,b){if(f==null)return{};var N=li(i1(f),function(re){return[re]});return b=yr(b),Ks(f,N,function(re,Se){return b(re,Se[0])})}function nT(f,b,N){b=ic(b,f);var re=-1,Se=b.length;for(Se||(Se=1,f=n);++re<Se;){var Ve=f==null?n:f[Ic(b[re])];Ve===n&&(re=Se,Ve=N),f=pd(Ve)?Ve.call(f):Ve}return f}function rT(f,b,N){return f==null?f:ld(f,b,N)}function iT(f,b,N,re){return re=typeof re=="function"?re:n,f==null?f:ld(f,b,N,re)}var vx=kw(ua),yx=kw(Ol);function sT(f,b,N){var re=Ur(f),Se=re||qd(f)||Vf(f);if(b=yr(b,4),N==null){var Ve=f&&f.constructor;Se?N=re?new Ve:[]:Zs(f)?N=pd(Ve)?So(xa(f)):{}:N={}}return(Se?Ps:nn)(f,function(at,bt,Dt){return b(N,at,bt,Dt)}),N}function oT(f,b){return f==null?!0:ud(f,b)}function aT(f,b,N){return f==null?f:Rf(f,b,Rh(N))}function lT(f,b,N,re){return re=typeof re=="function"?re:n,f==null?f:Rf(f,b,Rh(N),re)}function Uf(f){return f==null?[]:$s(f,ua(f))}function uT(f){return f==null?[]:$s(f,Ol(f))}function cT(f,b,N){return N===n&&(N=b,b=n),N!==n&&(N=Du(N),N=N===N?N:0),b!==n&&(b=Du(b),b=b===b?b:0),Kn(Du(f),b,N)}function dT(f,b,N){return b=gd(b),N===n?(N=b,b=0):N=gd(N),f=Du(f),Bt(f,b,N)}function hT(f,b,N){if(N&&typeof N!="boolean"&&fl(f,b,N)&&(b=N=n),N===n&&(typeof b=="boolean"?(N=b,b=n):typeof f=="boolean"&&(N=f,f=n)),f===n&&b===n?(f=0,b=1):(f=gd(f),b===n?(b=f,f=0):b=gd(b)),f>b){var re=f;f=b,b=re}if(N||f%1||b%1){var Se=Gt();return Ee(f+Se*(b-f+Cl("1e-"+((Se+"").length-1))),b)}return Ih(f,b)}var fT=zf(function(f,b,N){return b=b.toLowerCase(),f+(N?bx(b):b)});function bx(f){return _1($i(f).toLowerCase())}function _x(f){return f=$i(f),f&&f.replace(Fr,Xu).replace(Ku,"")}function pT(f,b,N){f=$i(f),b=za(b);var re=f.length;N=N===n?re:Kn(Jr(N),0,re);var Se=N;return N-=b.length,N>=0&&f.slice(N,Se)==b}function gT(f){return f=$i(f),f&&Jn.test(f)?f.replace(nr,ul):f}function mT(f){return f=$i(f),f&&Ht.test(f)?f.replace(nt,"\\$&"):f}var vT=zf(function(f,b,N){return f+(N?"-":"")+b.toLowerCase()}),yT=zf(function(f,b,N){return f+(N?" ":"")+b.toLowerCase()}),bT=Lw("toLowerCase");function _T(f,b,N){f=$i(f),b=Jr(b);var re=b?Us(f):0;if(!b||re>=b)return f;var Se=(b-re)/2;return Km(Ts(Se),N)+f+Km(As(Se),N)}function wT(f,b,N){f=$i(f),b=Jr(b);var re=b?Us(f):0;return b&&re<b?f+Km(b-re,N):f}function xT(f,b,N){f=$i(f),b=Jr(b);var re=b?Us(f):0;return b&&re<b?Km(b-re,N)+f:f}function LT(f,b,N){return N||b==null?b=0:b&&(b=+b),Nt($i(f).replace(kn,""),b||0)}function ST(f,b,N){return(N?fl(f,b,N):b===n)?b=1:b=Jr(b),If($i(f),b)}function CT(){var f=arguments,b=$i(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var ET=zf(function(f,b,N){return f+(N?"_":"")+b.toLowerCase()});function PT(f,b,N){return N&&typeof N!="number"&&fl(f,b,N)&&(b=N=n),N=N===n?Ge:N>>>0,N?(f=$i(f),f&&(typeof b=="string"||b!=null&&!v1(b))&&(b=za(b),!b&&ma(f))?Au(Hs(f),0,N):f.split(b,N)):[]}var MT=zf(function(f,b,N){return f+(N?" ":"")+_1(b)});function kT(f,b,N){return f=$i(f),N=N==null?0:Kn(Jr(N),0,f.length),b=za(b),f.slice(N,N+b.length)==b}function AT(f,b,N){var re=Ie.templateSettings;N&&fl(f,b,N)&&(b=n),f=$i(f),b=a0({},b,re,Aw);var Se=a0({},b.imports,re.imports,Aw),Ve=ua(Se),at=$s(Se,Ve),bt,Dt,ln=0,un=b.interpolate||cr,mn="__p += '",jn=ou((b.escape||cr).source+"|"+un.source+"|"+(un===ji?ar:cr).source+"|"+(b.evaluate||cr).source+"|$","g"),or="//# sourceURL="+($r.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ql+"]")+`
`;f.replace(jn,function(xr,hi,bi,uu,pl,cu){return bi||(bi=uu),mn+=f.slice(ln,cu).replace(Xi,cl),hi&&(bt=!0,mn+=`' +
__e(`+hi+`) +
'`),pl&&(Dt=!0,mn+=`';
`+pl+`;
__p += '`),bi&&(mn+=`' +
((__t = (`+bi+`)) == null ? '' : __t) +
'`),ln=cu+xr.length,xr}),mn+=`';
`;var wr=$r.call(b,"variable")&&b.variable;if(!wr)mn=`with (obj) {
`+mn+`
}
`;else if(gn.test(wr))throw new Gn(a);mn=(Dt?mn.replace(en,""):mn).replace(_n,"$1").replace(Cn,"$1;"),mn="function("+(wr||"obj")+`) {
`+(wr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(bt?", __e = _.escape":"")+(Dt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mn+`return __p
}`;var ei=xx(function(){return mr(Ve,or+"return "+mn).apply(n,at)});if(ei.source=mn,m1(ei))throw ei;return ei}function TT(f){return $i(f).toLowerCase()}function DT(f){return $i(f).toUpperCase()}function NT(f,b,N){if(f=$i(f),f&&(N||b===n))return Ro(f);if(!f||!(b=za(b)))return f;var re=Hs(f),Se=Hs(b),Ve=so(re,Se),at=Eu(re,Se)+1;return Au(re,Ve,at).join("")}function OT(f,b,N){if(f=$i(f),f&&(N||b===n))return f.slice(0,Oa(f)+1);if(!f||!(b=za(b)))return f;var re=Hs(f),Se=Eu(re,Hs(b))+1;return Au(re,0,Se).join("")}function IT(f,b,N){if(f=$i(f),f&&(N||b===n))return f.replace(kn,"");if(!f||!(b=za(b)))return f;var re=Hs(f),Se=so(re,Hs(b));return Au(re,Se).join("")}function BT(f,b){var N=J,re=V;if(Zs(b)){var Se="separator"in b?b.separator:Se;N="length"in b?Jr(b.length):N,re="omission"in b?za(b.omission):re}f=$i(f);var Ve=f.length;if(ma(f)){var at=Hs(f);Ve=at.length}if(N>=Ve)return f;var bt=N-Us(re);if(bt<1)return re;var Dt=at?Au(at,0,bt).join(""):f.slice(0,bt);if(Se===n)return Dt+re;if(at&&(bt+=Dt.length-bt),v1(Se)){if(f.slice(bt).search(Se)){var ln,un=Dt;for(Se.global||(Se=ou(Se.source,$i(ur.exec(Se))+"g")),Se.lastIndex=0;ln=Se.exec(un);)var mn=ln.index;Dt=Dt.slice(0,mn===n?bt:mn)}}else if(f.indexOf(za(Se),bt)!=bt){var jn=Dt.lastIndexOf(Se);jn>-1&&(Dt=Dt.slice(0,jn))}return Dt+re}function RT(f){return f=$i(f),f&&rr.test(f)?f.replace(qn,Ia):f}var FT=zf(function(f,b,N){return f+(N?" ":"")+b.toUpperCase()}),_1=Lw("toUpperCase");function wx(f,b,N){return f=$i(f),b=N?n:b,b===n?Fo(f)?va(f):pt(f):f.match(b)||[]}var xx=Xr(function(f,b){try{return ai(f,n,b)}catch(N){return m1(N)?N:new Gn(N)}}),jT=hd(function(f,b){return Ps(b,function(N){N=Ic(N),Tn(f,N,p1(f[N],f))}),f});function zT(f){var b=f==null?0:f.length,N=yr();return f=b?li(f,function(re){if(typeof re[1]!="function")throw new Oi(o);return[N(re[0]),re[1]]}):[],Xr(function(re){for(var Se=-1;++Se<b;){var Ve=f[Se];if(ai(Ve[0],this,re))return ai(Ve[1],this,re)}})}function $T(f){return g(d(f,p))}function w1(f){return function(){return f}}function VT(f,b){return f==null||f!==f?b:f}var UT=Cw(),HT=Cw(!0);function Il(f){return f}function x1(f){return Zn(typeof f=="function"?f:d(f,p))}function GT(f){return Co(d(f,p))}function WT(f,b){return ec(f,d(b,p))}var qT=Xr(function(f,b){return function(N){return je(N,f,b)}}),YT=Xr(function(f,b){return function(N){return je(f,N,b)}});function L1(f,b,N){var re=ua(b),Se=Ln(b,re);N==null&&!(Zs(b)&&(Se.length||!re.length))&&(N=b,b=f,f=this,Se=Ln(b,ua(b)));var Ve=!(Zs(N)&&"chain"in N)||!!N.chain,at=pd(f);return Ps(Se,function(bt){var Dt=b[bt];f[bt]=Dt,at&&(f.prototype[bt]=function(){var ln=this.__chain__;if(Ve||ln){var un=f(this.__wrapped__),mn=un.__actions__=Dl(this.__actions__);return mn.push({func:Dt,args:arguments,thisArg:f}),un.__chain__=ln,un}return Dt.apply(f,Bo([this.value()],arguments))})}),f}function KT(){return Qi._===this&&(Qi._=rs),this}function S1(){}function ZT(f){return f=Jr(f),Xr(function(b){return hl(b,f)})}var XT=t1(li),JT=t1(su),QT=t1(F);function Lx(f){return l1(f)?pr(Ic(f)):is(f)}function eD(f){return function(b){return f==null?n:lr(f,b)}}var tD=Pw(),nD=Pw(!0);function C1(){return[]}function E1(){return!1}function rD(){return{}}function iD(){return""}function sD(){return!0}function oD(f,b){if(f=Jr(f),f<1||f>K)return[];var N=Ge,re=Ee(f,Ge);b=yr(b),f-=Ge;for(var Se=ns(re,b);++N<f;)b(N);return Se}function aD(f){return Ur(f)?li(f,Ic):lu(f)?[f]:Dl(Uw($i(f)))}function lD(f){var b=++sa;return $i(f)+b}var uD=Ym(function(f,b){return f+b},0),cD=n1("ceil"),dD=Ym(function(f,b){return f/b},1),hD=n1("floor");function fD(f){return f&&f.length?be(f,Il,gt):n}function pD(f,b){return f&&f.length?be(f,yr(b,2),gt):n}function gD(f){return er(f,Il)}function mD(f,b){return er(f,yr(b,2))}function vD(f){return f&&f.length?be(f,Il,Vr):n}function yD(f,b){return f&&f.length?be(f,yr(b,2),Vr):n}var bD=Ym(function(f,b){return f*b},1),_D=n1("round"),wD=Ym(function(f,b){return f-b},0);function xD(f){return f&&f.length?ui(f,Il):0}function LD(f,b){return f&&f.length?ui(f,yr(b,2)):0}return Ie.after=GA,Ie.ary=ex,Ie.assign=D6,Ie.assignIn=px,Ie.assignInWith=a0,Ie.assignWith=N6,Ie.at=O6,Ie.before=tx,Ie.bind=p1,Ie.bindAll=jT,Ie.bindKey=nx,Ie.castArray=r6,Ie.chain=Xw,Ie.chunk=hk,Ie.compact=fk,Ie.concat=pk,Ie.cond=zT,Ie.conforms=$T,Ie.constant=w1,Ie.countBy=xA,Ie.create=I6,Ie.curry=rx,Ie.curryRight=ix,Ie.debounce=sx,Ie.defaults=B6,Ie.defaultsDeep=R6,Ie.defer=WA,Ie.delay=qA,Ie.difference=gk,Ie.differenceBy=mk,Ie.differenceWith=vk,Ie.drop=yk,Ie.dropRight=bk,Ie.dropRightWhile=_k,Ie.dropWhile=wk,Ie.fill=xk,Ie.filter=SA,Ie.flatMap=PA,Ie.flatMapDeep=MA,Ie.flatMapDepth=kA,Ie.flatten=qw,Ie.flattenDeep=Lk,Ie.flattenDepth=Sk,Ie.flip=YA,Ie.flow=UT,Ie.flowRight=HT,Ie.fromPairs=Ck,Ie.functions=H6,Ie.functionsIn=G6,Ie.groupBy=AA,Ie.initial=Pk,Ie.intersection=Mk,Ie.intersectionBy=kk,Ie.intersectionWith=Ak,Ie.invert=q6,Ie.invertBy=Y6,Ie.invokeMap=DA,Ie.iteratee=x1,Ie.keyBy=NA,Ie.keys=ua,Ie.keysIn=Ol,Ie.map=t0,Ie.mapKeys=Z6,Ie.mapValues=X6,Ie.matches=GT,Ie.matchesProperty=WT,Ie.memoize=r0,Ie.merge=J6,Ie.mergeWith=gx,Ie.method=qT,Ie.methodOf=YT,Ie.mixin=L1,Ie.negate=i0,Ie.nthArg=ZT,Ie.omit=Q6,Ie.omitBy=eT,Ie.once=KA,Ie.orderBy=OA,Ie.over=XT,Ie.overArgs=ZA,Ie.overEvery=JT,Ie.overSome=QT,Ie.partial=g1,Ie.partialRight=ox,Ie.partition=IA,Ie.pick=tT,Ie.pickBy=mx,Ie.property=Lx,Ie.propertyOf=eD,Ie.pull=Ok,Ie.pullAll=Kw,Ie.pullAllBy=Ik,Ie.pullAllWith=Bk,Ie.pullAt=Rk,Ie.range=tD,Ie.rangeRight=nD,Ie.rearg=XA,Ie.reject=FA,Ie.remove=Fk,Ie.rest=JA,Ie.reverse=h1,Ie.sampleSize=zA,Ie.set=rT,Ie.setWith=iT,Ie.shuffle=$A,Ie.slice=jk,Ie.sortBy=HA,Ie.sortedUniq=Wk,Ie.sortedUniqBy=qk,Ie.split=PT,Ie.spread=QA,Ie.tail=Yk,Ie.take=Kk,Ie.takeRight=Zk,Ie.takeRightWhile=Xk,Ie.takeWhile=Jk,Ie.tap=fA,Ie.throttle=e6,Ie.thru=e0,Ie.toArray=dx,Ie.toPairs=vx,Ie.toPairsIn=yx,Ie.toPath=aD,Ie.toPlainObject=fx,Ie.transform=sT,Ie.unary=t6,Ie.union=Qk,Ie.unionBy=eA,Ie.unionWith=tA,Ie.uniq=nA,Ie.uniqBy=rA,Ie.uniqWith=iA,Ie.unset=oT,Ie.unzip=f1,Ie.unzipWith=Zw,Ie.update=aT,Ie.updateWith=lT,Ie.values=Uf,Ie.valuesIn=uT,Ie.without=sA,Ie.words=wx,Ie.wrap=n6,Ie.xor=oA,Ie.xorBy=aA,Ie.xorWith=lA,Ie.zip=uA,Ie.zipObject=cA,Ie.zipObjectDeep=dA,Ie.zipWith=hA,Ie.entries=vx,Ie.entriesIn=yx,Ie.extend=px,Ie.extendWith=a0,L1(Ie,Ie),Ie.add=uD,Ie.attempt=xx,Ie.camelCase=fT,Ie.capitalize=bx,Ie.ceil=cD,Ie.clamp=cT,Ie.clone=i6,Ie.cloneDeep=o6,Ie.cloneDeepWith=a6,Ie.cloneWith=s6,Ie.conformsTo=l6,Ie.deburr=_x,Ie.defaultTo=VT,Ie.divide=dD,Ie.endsWith=pT,Ie.eq=sc,Ie.escape=gT,Ie.escapeRegExp=mT,Ie.every=LA,Ie.find=CA,Ie.findIndex=Gw,Ie.findKey=F6,Ie.findLast=EA,Ie.findLastIndex=Ww,Ie.findLastKey=j6,Ie.floor=hD,Ie.forEach=Jw,Ie.forEachRight=Qw,Ie.forIn=z6,Ie.forInRight=$6,Ie.forOwn=V6,Ie.forOwnRight=U6,Ie.get=y1,Ie.gt=u6,Ie.gte=c6,Ie.has=W6,Ie.hasIn=b1,Ie.head=Yw,Ie.identity=Il,Ie.includes=TA,Ie.indexOf=Ek,Ie.inRange=dT,Ie.invoke=K6,Ie.isArguments=zh,Ie.isArray=Ur,Ie.isArrayBuffer=d6,Ie.isArrayLike=Nl,Ie.isArrayLikeObject=Eo,Ie.isBoolean=h6,Ie.isBuffer=qd,Ie.isDate=f6,Ie.isElement=p6,Ie.isEmpty=g6,Ie.isEqual=m6,Ie.isEqualWith=v6,Ie.isError=m1,Ie.isFinite=y6,Ie.isFunction=pd,Ie.isInteger=ax,Ie.isLength=s0,Ie.isMap=lx,Ie.isMatch=b6,Ie.isMatchWith=_6,Ie.isNaN=w6,Ie.isNative=x6,Ie.isNil=S6,Ie.isNull=L6,Ie.isNumber=ux,Ie.isObject=Zs,Ie.isObjectLike=co,Ie.isPlainObject=Kp,Ie.isRegExp=v1,Ie.isSafeInteger=C6,Ie.isSet=cx,Ie.isString=o0,Ie.isSymbol=lu,Ie.isTypedArray=Vf,Ie.isUndefined=E6,Ie.isWeakMap=P6,Ie.isWeakSet=M6,Ie.join=Tk,Ie.kebabCase=vT,Ie.last=Tu,Ie.lastIndexOf=Dk,Ie.lowerCase=yT,Ie.lowerFirst=bT,Ie.lt=k6,Ie.lte=A6,Ie.max=fD,Ie.maxBy=pD,Ie.mean=gD,Ie.meanBy=mD,Ie.min=vD,Ie.minBy=yD,Ie.stubArray=C1,Ie.stubFalse=E1,Ie.stubObject=rD,Ie.stubString=iD,Ie.stubTrue=sD,Ie.multiply=bD,Ie.nth=Nk,Ie.noConflict=KT,Ie.noop=S1,Ie.now=n0,Ie.pad=_T,Ie.padEnd=wT,Ie.padStart=xT,Ie.parseInt=LT,Ie.random=hT,Ie.reduce=BA,Ie.reduceRight=RA,Ie.repeat=ST,Ie.replace=CT,Ie.result=nT,Ie.round=_D,Ie.runInContext=xt,Ie.sample=jA,Ie.size=VA,Ie.snakeCase=ET,Ie.some=UA,Ie.sortedIndex=zk,Ie.sortedIndexBy=$k,Ie.sortedIndexOf=Vk,Ie.sortedLastIndex=Uk,Ie.sortedLastIndexBy=Hk,Ie.sortedLastIndexOf=Gk,Ie.startCase=MT,Ie.startsWith=kT,Ie.subtract=wD,Ie.sum=xD,Ie.sumBy=LD,Ie.template=AT,Ie.times=oD,Ie.toFinite=gd,Ie.toInteger=Jr,Ie.toLength=hx,Ie.toLower=TT,Ie.toNumber=Du,Ie.toSafeInteger=T6,Ie.toString=$i,Ie.toUpper=DT,Ie.trim=NT,Ie.trimEnd=OT,Ie.trimStart=IT,Ie.truncate=BT,Ie.unescape=RT,Ie.uniqueId=lD,Ie.upperCase=FT,Ie.upperFirst=_1,Ie.each=Jw,Ie.eachRight=Qw,Ie.first=Yw,L1(Ie,function(){var f={};return nn(Ie,function(b,N){$r.call(Ie.prototype,N)||(f[N]=b)}),f}(),{chain:!1}),Ie.VERSION=r,Ps(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Ie[f].placeholder=Ie}),Ps(["drop","take"],function(f,b){Dr.prototype[f]=function(N){N=N===n?1:ue(Jr(N),0);var re=this.__filtered__&&!b?new Dr(this):this.clone();return re.__filtered__?re.__takeCount__=Ee(N,re.__takeCount__):re.__views__.push({size:Ee(N,Ge),type:f+(re.__dir__<0?"Right":"")}),re},Dr.prototype[f+"Right"]=function(N){return this.reverse()[f](N).reverse()}}),Ps(["filter","map","takeWhile"],function(f,b){var N=b+1,re=N==$||N==I;Dr.prototype[f]=function(Se){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:yr(Se,3),type:N}),Ve.__filtered__=Ve.__filtered__||re,Ve}}),Ps(["head","last"],function(f,b){var N="take"+(b?"Right":"");Dr.prototype[f]=function(){return this[N](1).value()[0]}}),Ps(["initial","tail"],function(f,b){var N="drop"+(b?"":"Right");Dr.prototype[f]=function(){return this.__filtered__?new Dr(this):this[N](1)}}),Dr.prototype.compact=function(){return this.filter(Il)},Dr.prototype.find=function(f){return this.filter(f).head()},Dr.prototype.findLast=function(f){return this.reverse().find(f)},Dr.prototype.invokeMap=Xr(function(f,b){return typeof f=="function"?new Dr(this):this.map(function(N){return je(N,f,b)})}),Dr.prototype.reject=function(f){return this.filter(i0(yr(f)))},Dr.prototype.slice=function(f,b){f=Jr(f);var N=this;return N.__filtered__&&(f>0||b<0)?new Dr(N):(f<0?N=N.takeRight(-f):f&&(N=N.drop(f)),b!==n&&(b=Jr(b),N=b<0?N.dropRight(-b):N.take(b-f)),N)},Dr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Dr.prototype.toArray=function(){return this.take(Ge)},nn(Dr.prototype,function(f,b){var N=/^(?:filter|find|map|reject)|While$/.test(b),re=/^(?:head|last)$/.test(b),Se=Ie[re?"take"+(b=="last"?"Right":""):b],Ve=re||/^find/.test(b);Se&&(Ie.prototype[b]=function(){var at=this.__wrapped__,bt=re?[1]:arguments,Dt=at instanceof Dr,ln=bt[0],un=Dt||Ur(at),mn=function(hi){var bi=Se.apply(Ie,Bo([hi],bt));return re&&jn?bi[0]:bi};un&&N&&typeof ln=="function"&&ln.length!=1&&(Dt=un=!1);var jn=this.__chain__,or=!!this.__actions__.length,wr=Ve&&!jn,ei=Dt&&!or;if(!Ve&&un){at=ei?at:new Dr(this);var xr=f.apply(at,bt);return xr.__actions__.push({func:e0,args:[mn],thisArg:n}),new Ns(xr,jn)}return wr&&ei?f.apply(this,bt):(xr=this.thru(mn),wr?re?xr.value()[0]:xr.value():xr)})}),Ps(["pop","push","shift","sort","splice","unshift"],function(f){var b=ya[f],N=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",re=/^(?:pop|shift)$/.test(f);Ie.prototype[f]=function(){var Se=arguments;if(re&&!this.__chain__){var Ve=this.value();return b.apply(Ur(Ve)?Ve:[],Se)}return this[N](function(at){return b.apply(Ur(at)?at:[],Se)})}}),nn(Dr.prototype,function(f,b){var N=Ie[b];if(N){var re=N.name+"";$r.call(Lo,re)||(Lo[re]=[]),Lo[re].push({name:b,func:N})}}),Lo[qm(n,T).name]=[{name:"wrapper",func:n}],Dr.prototype.clone=$d,Dr.prototype.reverse=Mf,Dr.prototype.value=Vd,Ie.prototype.at=pA,Ie.prototype.chain=gA,Ie.prototype.commit=mA,Ie.prototype.next=vA,Ie.prototype.plant=bA,Ie.prototype.reverse=_A,Ie.prototype.toJSON=Ie.prototype.valueOf=Ie.prototype.value=wA,Ie.prototype.first=Ie.prototype.head,hr&&(Ie.prototype[hr]=yA),Ie},Ws=jo();es?((es.exports=Ws)._=Ws,sr._=Ws):Qi._=Ws}).call(ha)})(Wv,Wv.exports);var NE=Wv.exports;class Pa extends Vn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Xe(this,"_width");Xe(this,"_height");Xe(this,"_center");Xe(this,"_rotation");Xe(this,"_isMapReady",!1);Xe(this,"properties");Xe(this,"_helperPoints",{corners:[],midPoints:[]});Xe(this,"_throttledUpdateProperties");const i=n instanceof Vn.LatLngBounds?n:Vn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=En.measure("Rectangle.constructor.calculateWidth",()=>{const a=Z1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=En.measure("Rectangle.constructor.calculateHeight",()=>{const a=Z1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=En.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=En.measure("Rectangle.constructor.initThrottle",()=>NE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){En.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=e5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=e5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Vn.latLng(this._center.lat+o/2,this._center.lng-a/2),Vn.latLng(this._center.lat+o/2,this._center.lng+a/2),Vn.latLng(this._center.lat-o/2,this._center.lng+a/2),Vn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),h=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),m=Math.sin(p),E=h.map(k=>{const T=k.x-c.x,A=k.y-c.y;return Vn.point(c.x+(T*v-A*m),c.y+(T*m+A*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return En.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Vn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=Z1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):a})}getRotatedCorners(){return En.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return En.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Vn.latLng(this._center.lat+s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+i),Vn.latLng(this._center.lat-s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return En.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Vn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return En.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){En.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return En.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){En.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){En.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return En.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){En.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){En.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),h=Math.sin(l),p=o*c-a*h,v=o*h+a*c,m=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,k=Math.max(Math.abs(p*2)/m,1),T=Math.max(Math.abs(v*2)/m,1),A=k*m/2,z=T*m/2,Y=x*A*c-E*z*h,ne=x*A*h+E*z*c,ge=Vn.point(s.x-Y,s.y-ne),pe=this._map.containerPointToLatLng(ge),J=[Vn.point(ge.x-A,ge.y+z),Vn.point(ge.x+A,ge.y+z),Vn.point(ge.x+A,ge.y-z),Vn.point(ge.x-A,ge.y-z)].map(V=>{const B=V.x-ge.x,H=V.y-ge.y;return Vn.point(ge.x+(B*c-H*h),ge.y+(B*h+H*c))}).map(V=>this._map.containerPointToLatLng(V));this._width=k,this._height=T,this._center=pe,this.setLatLngs(J),this.fire("coordinates:updated",{corners:J,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){En.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),h=Math.sin(l),p=o*c-a*h,v=o*h+a*c,m=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/m:this._width=Math.abs(p*2)/m,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){En.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){En.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){En.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return En.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){En.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Vn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Vn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){En.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){En.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return En.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){En.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return En.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,h=r[o].lat;l>n.lat!=h>n.lat&&n.lng<(c-a)*(n.lat-l)/(h-l)+a&&(i=!i)}return i})}}var ki=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(ki||{});const bf=Fp("notes",()=>{const t=Lt([]),e=Lt([]),n=Un(()=>V=>t.value.find(B=>B.id===V)),r=Un(()=>V=>{const B=t.value.find(H=>H.id===V);return B?B.color:"#6B7280"}),i=Un(()=>V=>e.value.filter(B=>B.columnId===V).sort((B,H)=>B.order-H.order)),s=Un(()=>t.value.find(V=>V.isDefault)||t.value[0]),o=Un(()=>[...t.value].sort((V,B)=>V.order-B.order)),a=Un(()=>V=>{const B=to();if(!B.user)return!1;if(B.isAdmin)return!0;switch(V.accessLevel){case"private":return!0;case"company":return B.isAdmin||B.isEntreprise;case"employee":return B.isAdmin||B.isEntreprise||B.isSalarie;case"visitor":return B.isAdmin||B.isEntreprise||B.isSalarie||B.isVisiteur;default:return!1}}),l=Un(()=>e.value.filter(V=>a.value(V))),c=Un(()=>V=>l.value.filter(B=>B.columnId===V).sort((B,H)=>B.order-H.order));async function h(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const V=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=V,console.log("[NotesStore][loadColumns] Colonnes fixes initialises:",t.value)}catch(V){throw console.error("[NotesStore][loadColumns] Erreur:",V),V}}async function p(V){console.log(`
[NotesStore][addColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function v(V,B){console.log(`
[NotesStore][updateColumn] Mise  jour locale de la colonne:`,V,B);try{const H=t.value.findIndex($=>$.id===V);H!==-1&&(t.value[H]={...t.value[H],...B},console.log("[NotesStore][updateColumn] tat des colonnes aprs mise  jour:",t.value))}catch(H){throw console.error("[NotesStore][updateColumn] Erreur:",H),H}}async function m(V){console.log(`
[NotesStore][removeColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function x(V){console.log(`
[NotesStore][reorderColumns] FONCTION DSACTIVE - Le dplacement des colonnes n'est plus possible`)}function E(V){if(!V)return"private";switch(V.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accs inconnu: ${V}, utilisation de PRIVATE par dfaut`),"private"}}function k(V){var K;if(!V.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const B=new Date().toISOString(),H=e.value.filter(_e=>_e.columnId===V.columnId),$=H.length>0?Math.max(...H.map(_e=>_e.order))+1:0,R=E(V.access_level);console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",V.id,"et niveau d'accs:",R);const I=to(),X=V.enterprise_id||(!I.isAdmin&&((K=I.user)!=null&&K.enterprise_id)?I.user.enterprise_id:null);return e.value.push({...V,id:V.id,order:$,accessLevel:R,createdAt:B,updatedAt:B,comments:[],photos:[],enterprise_id:X}),V.id}function T(V,B){console.log(`
[NotesStore][updateNote] Mise  jour de la note:`,V,B);try{const H=e.value.findIndex($=>$.id===V);H!==-1&&(B.color&&(B.style={...e.value[H].style,color:B.color,fillColor:B.color}),B.access_level&&(B.accessLevel=E(B.access_level),delete B.access_level),e.value[H]={...e.value[H],...B},console.log("[NotesStore][updateNote] Note mise  jour:",e.value[H]))}catch(H){throw console.error("[NotesStore][updateNote] Erreur:",H),H}}function A(V){e.value.findIndex(H=>H.id===V)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",V),e.value=e.value.filter(H=>H.id!==V)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",V)}function z(V,B){const H=e.value.findIndex($=>$.id===V);if(H!==-1){const $=e.value[H];if($.columnId!==B){const I=e.value.filter(_e=>_e.columnId===B),X=I.length>0?Math.max(...I.map(_e=>_e.order))+1:0,K={...$,columnId:B,order:X,updatedAt:new Date().toISOString()};e.value[H]=K}else e.value[H]={...e.value[H],updatedAt:new Date().toISOString()}}}function Y(V,B){B.forEach((H,$)=>{const R=e.value.findIndex(I=>I.id===H&&I.columnId===V);R!==-1&&(e.value[R]={...e.value[R],order:$,updatedAt:new Date().toISOString()})})}function ne(V){switch(V){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ge(V,B){try{const H=to();if(!H.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!H.isEntreprise&&!H.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(ve=>ve.id===V))throw new Error(`La note avec l'ID ${V} n'existe pas`);const I=(await da.addComment(V,B)).data,X=e.value.findIndex(ve=>ve.id===V);if(X===-1)return;const K=e.value[X];K.comments||(K.comments=[]);const _e={id:I.id,text:I.text,createdAt:I.created_at,userId:I.user,userName:I.user_name,userRole:I.user_role};return K.comments.push(_e),K.updatedAt=new Date().toISOString(),e.value[X]={...K},_e.id}catch(H){throw console.error("Erreur lors de l'ajout du commentaire:",H),H}}async function pe(V,B){try{const H=e.value.findIndex(I=>I.id===V);if(H===-1)throw new Error(`La note avec l'ID ${V} n'existe pas`);const $=e.value[H];if(!$.comments||$.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!$.comments.some(I=>I.id===B))throw new Error(`Le commentaire avec l'ID ${B} n'existe pas`);await da.deleteComment(V,B),$.comments=$.comments.filter(I=>I.id!==B),$.updatedAt=new Date().toISOString(),e.value[H]={...$}}catch(H){throw console.error("Erreur lors de la suppression du commentaire:",H),H}}async function O(V,B){try{if(B.id&&B.image){const H=e.value.findIndex(I=>I.id===V);if(H===-1)return;const $=e.value[H];$.photos||($.photos=[]);const R={id:B.id,url:B.image,caption:B.caption,createdAt:B.created_at};return $.photos.push(R),$.updatedAt=new Date().toISOString(),e.value[H]={...$},R.id}else{const H=new FormData;H.append("image",B.url),B.caption&&H.append("caption",B.caption);const R=(await da.addPhoto(V,H)).data,I=e.value.findIndex(_e=>_e.id===V);if(I===-1)return;const X=e.value[I];X.photos||(X.photos=[]);const K={id:R.id,url:R.image,caption:R.caption,createdAt:R.created_at};return X.photos.push(K),X.updatedAt=new Date().toISOString(),e.value[I]={...X},K.id}}catch(H){throw console.error("Erreur lors de l'ajout de la photo:",H),H}}async function j(V,B){try{await da.deletePhoto(V,B);const H=e.value.findIndex(I=>I.id===V);if(H===-1){console.error("[NotesStore] Note non trouve pour la suppression de la photo");return}e.value[H].photos||(e.value[H].photos=[]);const $=e.value[H],R=($.photos||[]).filter(I=>I.id!==B);e.value[H]={...$,photos:R,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprime avec succs, photos restantes:",R.length)}catch(H){throw console.error("Erreur lors de la suppression de la photo:",H),H}}async function J(V,B,H){try{await da.updatePhoto(V,B,{caption:H});const $=e.value.findIndex(X=>X.id===V);if($===-1||!e.value[$].photos)return;const R=e.value[$],I=R.photos.findIndex(X=>X.id===B);if(I===-1)return;R.photos[I].caption=H,R.updatedAt=new Date().toISOString(),e.value[$]={...R}}catch($){throw console.error("Erreur lors de la mise  jour de la lgende:",$),$}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:ne,loadColumns:h,addColumn:p,updateColumn:v,removeColumn:m,reorderColumns:x,addNote:k,updateNote:T,removeNote:A,moveNote:z,reorderNotes:Y,addComment:ge,removeComment:pe,addPhoto:O,removePhoto:j,updatePhoto:J}});class Ad extends Ut.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=Ut.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Xe(this,"properties");Xe(this,"_planSaved",!1);Xe(this,"_isMoving",!1);Xe(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||ki.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},console.log("[GeoNote][constructor] Note cre avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle()})}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] vnement reu pour noteId:",c,"Comparaison avec ID backend:",h),c===h&&(console.log("[GeoNote][updateStyle] Correspondance trouve, mise  jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][update] vnement reu pour noteId:",c,"Comparaison avec ID backend:",h),c===h&&(console.log("[GeoNote][update] Correspondance trouve, mise  jour des proprits:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Proprits mises  jour:",this.properties))}),console.log("[GeoNote][constructor] Note cre:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case ki.PRIVATE:return"Priv";case ki.COMPANY:return"Entreprise";case ki.EMPLOYEE:return"Salaris";case ki.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case ki.PRIVATE:return"#9CA3AF";case ki.COMPANY:return"#EF4444";case ki.EMPLOYEE:return"#F59E0B";case ki.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Ut.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,r=this._leaflet_id;console.log(`[GeoNote][editNote] dition de note - ID backend: ${n}, ID properties: ${this.properties.id}, ID Leaflet: ${r}`);const i={id:r,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] dition de note avec columnId:",i.columnId),console.log("[GeoNote] mission de l'vnement note:edit avec",i);const s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}openInGoogleMaps(){const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=ki.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur rcupre depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par dfaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilise:",r);const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis  jour:",this.properties.style)}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise  jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise  jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'lment"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise  jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accs mis  jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catgorie mise  jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise  jour du popup")}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",Ut.DomUtil.setTransform(n,new Ut.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());Ut.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise  jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignore: proprits manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());Ut.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la rcupration:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)}),console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom active")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=Ut.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icne mise  jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise  jour de l'icne:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,h,p,v;console.log("[GeoNote][updateFromBackendData] Dbut de la mise  jour avec les donnes:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les donnes reues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style aprs traitement initial:",r);const i=((h=n.style)==null?void 0:h._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||ki.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accs rcupr:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catgorie rcupre:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise  jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise  jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,h,p,v,m,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const k=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnes GeoJSON reues:",k),r=[k[1],k[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Cration d'une note  partir des donnes:",n),console.log("[GeoNote][fromBackendData] Position utilise:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||ki.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accs rcupr:",i,"Style:",n.style);const s=((h=n.style)==null?void 0:h.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catgorie rcupre:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Cration de note avec columnId:",o);const a=new Ad(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),console.log("[GeoNote][fromBackendData] Note cre:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c,h,p,v,m;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let x=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(x.startsWith("rgb")){const A=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(A){const z=A.getAttribute("fill");z&&(x=z,console.log("[GeoNote][saveNote] Couleur rcupre depuis SVG pour remplacer RGB:",x))}}const E={...this.properties.style,color:x,fillColor:x,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",E);const k={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:E,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)k.enterprise_id=this.properties.enterprise_id;else{const A=to();!A.isAdmin&&((c=A.user)!=null&&c.enterprise_id)&&(k.enterprise_id=A.user.enterprise_id)}n&&(k.plan=n),console.log("[GeoNote][saveNote] Donnes  envoyer:",k),console.log("[GeoNote][saveNote] Couleur dans les donnes envoyes:",{styleColor:k.style.color,styleFillColor:k.style.fillColor});let T;return this._dbId?(T=(await da.updateNote(this._dbId,k)).data,console.log("[GeoNote][saveNote] Note mise  jour avec succs:",T),console.log("[GeoNote][saveNote] Couleur dans la rponse du backend (update):",{styleColor:(h=T.style)==null?void 0:h.color,styleFillColor:(p=T.style)==null?void 0:p.fillColor,styleObject:T.style})):(T=(await da.createNote(k)).data,console.log("[GeoNote][saveNote] Note cre avec succs:",T),console.log("[GeoNote][saveNote] Couleur dans la rponse du backend (create):",{styleColor:(v=T.style)==null?void 0:v.color,styleFillColor:(m=T.style)==null?void 0:m.fillColor,styleObject:T.style}),this._dbId=T.id,bf().addNote({...T,id:T.id,columnId:T.column,accessLevel:T.access_level})),this._planSaved=!0,T.id}catch(x){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",x),Kl().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n)return;const r=this._map.latLngToLayerPoint(this.getLatLng());Ut.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise  jour de la position:",n)}}}function wz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function xz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function h5(t){var e,n,r,i,s,o,a,l,c,h,p,v,m,x,E,k,T,A,z,Y,ne,ge;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const pe=t.getLatLng();return{type_forme:"Note",data:{points:[[pe.lng,pe.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((h=t.properties.style)==null?void 0:h.name)||""}}}}if(t instanceof uh||((p=t.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(j=>[j.lng,j.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=t.properties.style)==null?void 0:m.weight)||3,opacity:((x=t.properties.style)==null?void 0:x.opacity)||1,fillColor:((E=t.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((k=t.properties.style)==null?void 0:k.fillOpacity)||.2,name:((T=t.properties.style)==null?void 0:T.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof qo||((A=t.properties)==null?void 0:A.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(j=>[j.lng,j.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((z=t.properties.style)==null?void 0:z.color)||"#2b6451",weight:((Y=t.properties.style)==null?void 0:Y.weight)||3,opacity:((ne=t.properties.style)==null?void 0:ne.opacity)||1,name:((ge=t.properties.style)==null?void 0:ge.name)||""}}};throw new Error("Type de forme non reconnu")}function Lz(t){var e,n,r,i,s,o,a,l,c,h,p,v,m,x,E,k,T,A,z,Y,ne,ge,pe,O,j,J,V,B,H,$,R,I,X,K,_e;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:t}),t.type_forme){case"Polygon":{const ve=t.data;if(!wz(ve))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const Ge=ve.points.map(Z=>Vn.latLng(Z[1],Z[0])),se=((e=ve.style)==null?void 0:e._accessLevel)||((n=ve.style)==null?void 0:n.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accs rcupr:",se,"Style:",ve.style),ve.accessLevel=se;const q=new uh([Ge],{color:((r=ve.style)==null?void 0:r.color)||"#2b6451",weight:((i=ve.style)==null?void 0:i.weight)||3,opacity:((s=ve.style)==null?void 0:s.opacity)||1,fillColor:((o=ve.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ve.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ve.style)==null?void 0:l.dashArray)||"",name:((c=ve.style)==null?void 0:c.name)||"",category:ve.category||"forages",accessLevel:se});return q.updateProperties(),q}case"Line":{const ve=t.data;if(!xz(ve))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const Ge=ve.points.map(Z=>Vn.latLng(Z[1],Z[0])),se=((h=ve.style)==null?void 0:h._accessLevel)||((p=ve.style)==null?void 0:p.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accs rcupr:",se,"Style:",ve.style),ve.accessLevel=se;const q=new qo(Ge,{...ve.style||{},name:((v=ve.style)==null?void 0:v.name)||"",category:ve.category||"forages",accessLevel:se});return q.updateProperties(),q}case"Rectangle":{const ve=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ve,bounds:ve.bounds,width:ve.width,height:ve.height,rotation:ve.rotation}),!ve.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const Ge=new Vn.LatLngBounds(Vn.latLng(ve.bounds.southWest[1],ve.bounds.southWest[0]),Vn.latLng(ve.bounds.northEast[1],ve.bounds.northEast[0])),se=new Pa(Ge,{color:((m=ve.style)==null?void 0:m.color)||"#2b6451",weight:((x=ve.style)==null?void 0:x.weight)||3,opacity:((E=ve.style)==null?void 0:E.opacity)||1,fillColor:((k=ve.style)==null?void 0:k.fillColor)||"#2b6451",fillOpacity:((T=ve.style)==null?void 0:T.fillOpacity)||.2,dashArray:((A=ve.style)==null?void 0:A.dashArray)||"",name:((z=ve.style)==null?void 0:z.name)||"",width:ve.width,height:ve.height});return ve.rotation&&se.setRotation(ve.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:se.getBounds(),dimensions:se.getDimensions(),properties:se.properties}),se}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:t.id,data:t.data,hasName:((ne=(Y=t.data)==null?void 0:Y.style)==null?void 0:ne.name)!==void 0,name:(pe=(ge=t.data)==null?void 0:ge.style)==null?void 0:pe.name});const ve=t.data;if(!ve.center||!ve.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const Ge=Vn.circle([ve.center[1],ve.center[0]],{color:((O=ve.style)==null?void 0:O.color)||"#2b6451",weight:((j=ve.style)==null?void 0:j.weight)||3,opacity:((J=ve.style)==null?void 0:J.opacity)||1,fillColor:((V=ve.style)==null?void 0:V.fillColor)||"#2b6451",fillOpacity:((B=ve.style)==null?void 0:B.fillOpacity)||.2,dashArray:((H=ve.style)==null?void 0:H.dashArray)||"",radius:ve.radius});return Ge.properties={type:"Circle",radius:ve.radius,diameter:ve.radius*2,surface:Math.PI*ve.radius*ve.radius,perimeter:2*Math.PI*ve.radius,style:{...ve.style||{},name:(($=ve.style)==null?void 0:$.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof ve.center,center:ve.center,radius:ve.radius,style:Ge.properties.style,name:Ge.properties.style.name}),Ge}case"Note":{console.log("[DrawingStore] Traitement d'une Note  partir de l'API",{id:t.id,data:t.data});const ve=t.data;if(!ve.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const Ge={location:ve.location,name:ve.name||"Note golocalise",description:ve.description||"",columnId:ve.columnId||"en-cours",accessLevel:ve.accessLevel||"private",category:ve.category||"forages",style:{color:((R=ve.style)==null?void 0:R.color)||"#2b6451",weight:((I=ve.style)==null?void 0:I.weight)||2,fillColor:((X=ve.style)==null?void 0:X.fillColor)||"#2b6451",fillOpacity:((K=ve.style)==null?void 0:K.fillOpacity)||.8,radius:((_e=ve.style)==null?void 0:_e.radius)||12},comments:ve.comments||[],photos:ve.photos||[],order:ve.order||0,createdAt:ve.createdAt||new Date().toISOString(),updatedAt:ve.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Donnes prpares pour la note:",Ge);const se=Ad.fromBackendData(Ge);return se._dbId=t.id,console.log("[DrawingStore] Note cre:",{id:t.id,location:Ge.location,name:Ge.name,type:se.properties.type}),se}catch(Ge){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",Ge),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",t.type_forme),null}}const Ap=Fp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:$p()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun lment dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Dbut du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] lments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vrification de l'lment ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par catgorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] lment ${n.id} visible: type=${n.type_forme}, catgorie=${i}, accs=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par niveau d'accs: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Rsultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:t,isLeafletLayer:t instanceof Vn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Vn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>h5(t),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} dj charg avec ${this.elements.length} lments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Dn.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Lz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),h5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Dn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] lments aprs filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),OE=Fp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:$p()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=Kl();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>b0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>b0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre cr avec succs:",n.data),n.data}catch(n){throw this.error="Erreur lors de la cration du filtre",console.error("[MapFilterStore] Erreur lors de la cration du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>b0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis  jour avec succs:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise  jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise  jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>b0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprim avec succs:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),$y=Fp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:$p()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=to();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Dn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=to();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Dn.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await y0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=Kl();try{const i=to();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>y0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await y0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Dn.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=Kl();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),Dn.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Dn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la rcupration de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Dn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=Kl();try{const r=this.plans.find(i=>i.id===t);await y0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Sz={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Cz={class:"flex-1 overflow-y-auto"},Ez={class:"border-b border-gray-200"},Pz={class:"flex -mb-px"},Mz={class:"flex-1 overflow-hidden flex flex-col"},kz={key:0,class:"p-3 overflow-y-auto flex-1"},Az={class:"grid grid-cols-3 gap-1.5 mb-4"},Tz=["onClick","title"],Dz=["innerHTML"],Nz={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},Oz={key:2,class:"my-4 border-t border-gray-200"},Iz={key:3,class:"mt-4"},Bz={key:0,class:"mb-4"},Rz={class:"mb-4"},Fz=["value"],jz={class:"mb-4"},zz={class:"grid grid-cols-1 gap-4"},$z={key:0,class:"space-y-1"},Vz={class:"flex justify-between items-center"},Uz={class:"text-sm font-medium text-gray-500"},Hz={class:"flex justify-between items-center"},Gz={class:"text-sm font-medium text-gray-500"},Wz={class:"text-sm font-medium text-gray-500"},qz={class:"flex flex-col space-y-2 w-full"},Yz={class:"flex justify-between items-center"},Kz={class:"text-sm font-medium text-gray-500 ml-2"},Zz={class:"flex justify-between items-center"},Xz={class:"text-sm font-medium text-gray-500 ml-2"},Jz={class:"flex justify-between items-center"},Qz={class:"text-sm font-medium text-gray-500 ml-2"},e$={class:"flex justify-between items-center"},t$={class:"text-sm font-medium text-gray-500 ml-2"},n$={class:"flex justify-between items-center"},r$={class:"text-sm font-medium text-gray-500 ml-2"},i$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},s$={ref:"elevationCanvas"},o$={key:1,class:"p-3 overflow-y-auto flex-1"},a$={class:"grid grid-cols-6 gap-2 mb-4"},l$=["onClick","title"],u$={key:0,class:"space-y-4"},c$={class:"flex items-center gap-4"},d$={class:"flex items-center gap-2"},h$={class:"flex items-center gap-4"},f$=["value"],p$={key:0,class:"flex items-center gap-4"},g$={class:"flex items-center gap-2"},m$={key:1,class:"space-y-4"},v$={class:"flex items-center gap-4"},y$={class:"flex items-center gap-2"},b$={class:"flex items-center gap-4"},_$={class:"flex items-center gap-2"},w$={key:2,class:"filters-tab"},x$={class:"filters-content"},L$={class:"space-y-2"},S$={class:"space-y-2 mt-4"},C$={class:"space-y-1"},E$={class:"flex items-center"},P$={class:"flex items-center"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={class:"flex items-center"},T$={class:"flex items-center"},D$={key:0,class:"flex items-center"},N$=["onUpdate:modelValue"],O$={class:"ml-2 text-sm text-gray-700"},I$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},B$={class:"flex space-x-2"},R$=["disabled"],F$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},j$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},z$={class:"space-y-2 mt-4"},$$={class:"space-y-1"},V$={class:"flex items-center"},U$={class:"flex items-center"},H$={class:"flex items-center"},G$={class:"flex items-center"},W$={key:0,class:"p-3 border-t border-gray-200"},q$={class:"mt-3"},Y$={class:"mb-4"},K$={class:"grid grid-cols-2 gap-2"},Z$={class:"grid grid-cols-2 gap-2"},X$=Ss({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Ap(),i=to(),s=Un(()=>i.isAdmin),o=Un(()=>i.isEntreprise),a=OE(),l=$y(),c=Zl({name:""}),h=Lt(!1),p=Lt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note golocalise"}],m=Me=>{switch(Me){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},x=Lt("tools");fi(()=>n.selectedTool,(Me,me)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Me,oldTool:me})}),fi(x,(Me,me)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Me,oldTab:me}),Me==="filters"&&me!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage  l'onglet filtres"),console.log("[DrawingTools][watch activeTab] tat actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] tat actuel des filtres locaux:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Dslection de la forme actuelle lors du passage  l'onglet filtres"),le("tool-selected","")),setTimeout(()=>{he()},0)),me==="filters"&&Me!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] tat des filtres locaux avant application:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),he())});const E=Lt({samplePoints:!0,circleSections:!0}),k=Lt("#2b6451"),T=Lt(2),A=Lt("solid"),z=Lt("#2b6451"),Y=Lt(.2),ne=Lt(!0),ge=Lt(""),pe=Lt("default"),O=Lt("visitor"),j=Lt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),J=Lt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),V=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],B=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],H=Lt("company"),$=Zl({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),R=Me=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accs: ${Me}`),H.value=Me,Me==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):Me==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):Me==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),he()},I=Me=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accs: ${Me}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Dslection de la forme actuelle"),le("tool-selected","")),R(Me)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const X=Un(()=>n.selectedShape&&n.selectedShape.properties||null),K=Me=>{E.value[Me]=!E.value[Me]},_e=Me=>{k.value=Me,z.value=Me,ve({strokeColor:Me,fillColor:Me})},ve=Me=>{n.selectedShape&&le("style-update",Me)},Ge=()=>{n.selectedShape&&le("properties-update",{name:ge.value})},se=()=>{n.selectedShape&&le("properties-update",{category:pe.value})},q=()=>{n.selectedShape&&le("properties-update",{accessLevel:O.value})},Z=()=>{var Me;!n.selectedShape||((Me=X.value)==null?void 0:Me.type)!=="ElevationLine"||le("style-update",{samplePointStyle:j.value})},ie=()=>{var Me;!n.selectedShape||((Me=X.value)==null?void 0:Me.type)!=="ElevationLine"||le("style-update",{minMaxPointStyle:J.value})},de=()=>{console.log("[DrawingTools][resetFilters] Dbut de la rinitialisation des filtres"),console.log("[DrawingTools][resetFilters] tat actuel des filtres:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2));const Me={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres  appliquer:",JSON.stringify(Me,null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres locaux"),$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.ElevationLine=!0,$.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux aprs mise  jour:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres dans le store"),r.updateFilters(Me),console.log("[DrawingTools][resetFilters] mission de l'event filter-change"),le("filter-change",Me),console.log("[DrawingTools][resetFilters] Mise  jour force de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres rinitialiss avec succs")},ye=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Dbut de la rinitialisation des filtres avec dslection"),fe(),de(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres rinitialiss et forme dslectionne avec succs")},he=()=>{const Me={...$.accessLevels},me={...$.categories},qe={...$.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Me,categories:me,shapeTypes:qe},null,2));const ct={accessLevels:Me,categories:me,shapeTypes:qe};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(ct,null,2)),r.updateFilters(ct),console.log("[DrawingTools][applyFilters] mission de l'event filter-change"),le("filter-change",ct),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise  jour force de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:ct}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqus avec succs")},Q=Me=>`${Math.round(Me)} m`,Ae=Me=>Me>=1e4?`${(Me/1e4).toFixed(2)} ha`:`${Math.round(Me)} m`,De=Me=>`${Me.toFixed(1)}%`,Ke=Me=>p.value.includes(Me)?Me:Me.split("_").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" "),fe=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Dslection de la forme actuelle"),le("tool-selected",""))};async function ee(){var Me,me;if(!(!c.name||h.value)){h.value=!0;try{const qe=c.name.toLowerCase().replace(/\s+/g,"_"),ct=l.currentPlan;let ft=null;if(ct!=null&&ct.entreprise_id?ft=ct.entreprise_id:ct!=null&&ct.entreprise&&typeof ct.entreprise=="object"&&"id"in ct.entreprise?ft=ct.entreprise.id:(Me=i.user)!=null&&Me.enterprise_id?ft=i.user.enterprise_id:i.isEntreprise&&((me=i.user)!=null&&me.id)&&(ft=i.user.id),!ft){console.error("[DrawingTools] Impossible de crer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Cration d'un filtre pour l'entreprise:",ft);const Mt=await a.createFilter({name:c.name,category:qe,entreprise:ft});console.log("[DrawingTools] Filtre cr avec succs:",Mt),$.categories[qe]||(console.log(`[DrawingTools] Ajout de la catgorie ${qe} aux filtres locaux`),$.categories[qe]=!0),console.log(`[DrawingTools] Mise  jour du DrawingStore avec la catgorie ${qe}`);const it={...r.filters.categories};it[qe]=!0,r.updateFilters({categories:it}),console.log("[DrawingTools] mission de l'vnement filter-change"),le("filter-change",$),c.name=""}catch(qe){console.error("[DrawingTools] Erreur lors de la cration du filtre:",qe)}finally{h.value=!1}}}const oe=()=>{fe(),x.value="filters"},le=e;dm(()=>{var Me,me,qe,ct,ft,Mt,it;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise  jour des proprits pour la forme slectionne:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Me=n.selectedShape.layer)==null?void 0:Me._leaflet_id});const jt=n.selectedShape.options||{};k.value=jt.color||"#2b6451",T.value=jt.weight||3,A.value=jt.dashArray?"dashed":"solid",z.value=jt.fillColor||"#2b6451",Y.value=jt.fillOpacity||.2;const hn=n.selectedShape.type||((me=n.selectedShape.properties)==null?void 0:me.type)||"";ne.value=hn!=="Line",console.log("[DrawingTools][watchEffect] Type de forme dtect:",hn),ge.value=((qe=n.selectedShape.properties)==null?void 0:qe.name)||"",pe.value=((ct=n.selectedShape.properties)==null?void 0:ct.category)||"forages",O.value=((ft=n.selectedShape.properties)==null?void 0:ft.accessLevel)||"visitor",hn==="ElevationLine"&&((Mt=n.selectedShape.properties)!=null&&Mt.samplePointStyle&&(j.value={...n.selectedShape.properties.samplePointStyle}),(it=n.selectedShape.properties)!=null&&it.minMaxPointStyle&&(J.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Proprits mises  jour avec succs")}}),no(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Me=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Me.accessLevels},categories:{...Me.categories},shapeTypes:{...Me.shapeTypes}},null,2)),$.accessLevels.company=Me.accessLevels.company,$.accessLevels.employee=Me.accessLevels.employee,$.accessLevels.visitor=Me.accessLevels.visitor,$.categories.forages=Me.categories.forages,$.categories.clients=Me.categories.clients,$.categories.entrepots=Me.categories.entrepots,$.categories.livraisons=Me.categories.livraisons,$.categories.cultures=Me.categories.cultures,$.categories.parcelles=Me.categories.parcelles,$.shapeTypes.Polygon=Me.shapeTypes.Polygon,$.shapeTypes.Line=Me.shapeTypes.Line,$.shapeTypes.ElevationLine=Me.shapeTypes.ElevationLine,$.shapeTypes.Note=Me.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnaliss"),await a.fetchFilters();const me=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catgories personnalises trouves:",me);const qe=[];me.forEach(ct=>{!p.value.includes(ct)&&!$.categories[ct]&&(console.log(`[DrawingTools][onMounted] Ajout de la catgorie personnalise: ${ct}`),$.categories[ct]=!0,qe.push(ct))}),qe.length>0&&(console.log("[DrawingTools][onMounted] Mise  jour du store avec les catgories personnalises:",qe),r.updateFilters({categories:$.categories}),le("filter-change",$))}catch(me){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnaliss:",me)}console.log("[DrawingTools][onMounted] Filtres locaux aprs initialisation:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2))}),fi($,(Me,me)=>{console.log("[DrawingTools][watch filters] Changement dtect:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Me.accessLevels,categories:Me.categories,shapeTypes:Me.shapeTypes}),oldFilters:JSON.stringify({accessLevels:me.accessLevels,categories:me.categories,shapeTypes:me.shapeTypes})});const qe=Object.keys(Me.accessLevels).filter(it=>me.accessLevels[it]!==Me.accessLevels[it]),ct=Object.keys(Me.categories).filter(it=>me.categories[it]!==Me.categories[it]),ft=Object.keys(Me.shapeTypes).filter(it=>me.shapeTypes[it]!==Me.shapeTypes[it]),Mt=qe.length>0||ct.length>0||ft.length>0;console.log("[DrawingTools][watch filters] Diffrences dtectes:",{accessLevelsDiff:qe,categoriesDiff:ct,shapeTypesDiff:ft,hasChanges:Mt}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),he()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const ze=Me=>{console.log("[DrawingTools][handleToolClick] Outil cliqu:",Me,"Outil actuel:",n.selectedTool),le("tool-selected",n.selectedTool===Me?"":Me),window.innerWidth<768&&le("update:show",!1)},$e=()=>{var Me;if(console.log("[DrawingTools][editGeoNote] dition de la GeoNote"),le("update:show",!1),n.selectedShape&&((Me=n.selectedShape.properties)==null?void 0:Me.type)==="Note"){const me=n.selectedShape.layer;me&&typeof me.editNote=="function"?(me.editNote(),console.log("[DrawingTools][editGeoNote] Mthode editNote appele avec succs")):console.error("[DrawingTools][editGeoNote] La mthode editNote n'est pas disponible sur la couche")}},Je=()=>{var Me;if(console.log("[DrawingTools][openGeoNoteRoute] Ouverture de l'itinraire pour la GeoNote"),le("update:show",!1),n.selectedShape&&((Me=n.selectedShape.properties)==null?void 0:Me.type)==="Note"){const me=n.selectedShape.layer;me&&typeof me.openInGoogleMaps=="function"?(me.openInGoogleMaps(),console.log("[DrawingTools][openGeoNoteRoute] Mthode openInGoogleMaps appele avec succs")):console.error("[DrawingTools][openGeoNoteRoute] La mthode openInGoogleMaps n'est pas disponible sur la couche")}};return(Me,me)=>{var qe,ct,ft,Mt;return Ne(),Be("div",{class:gi(["drawing-tools-panel",{open:t.show}])},[S("div",Sz,[me[47]||(me[47]=S("div",{class:"flex items-center"},[S("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),S("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),S("button",{onClick:me[0]||(me[0]=it=>Me.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},me[46]||(me[46]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",Cz,[S("div",Ez,[S("nav",Pz,[S("button",{onClick:me[1]||(me[1]=it=>x.value="tools"),class:gi([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},me[48]||(me[48]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),S("span",null,"Outils",-1)]),2),t.selectedShape&&((qe=t.selectedShape.properties)==null?void 0:qe.type)!=="Note"?(Ne(),Be("button",{key:0,onClick:me[2]||(me[2]=it=>x.value="style"),class:gi([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},me[49]||(me[49]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),S("span",null,"Style",-1)]),2)):Zt("",!0),S("button",{onClick:oe,class:gi([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},me[50]||(me[50]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),S("span",null,"Filtres",-1)]),2)])]),S("div",Mz,[x.value==="tools"?(Ne(),Be("div",kz,[S("div",Az,[(Ne(!0),Be(bn,null,Hn(v.filter(it=>it.type!=="delete"),it=>(Ne(),Be("button",{key:it.type,class:gi(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===it.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==it.type}]),onClick:jt=>ze(it.type),title:it.label},[S("span",{class:"icon",innerHTML:m(it.type)},null,8,Dz)],10,Tz))),128))]),t.selectedShape&&X.value&&X.value.type==="Note"?(Ne(),Be("div",Nz,[S("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:$e,title:"diter la note"},me[51]||(me[51]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),S("span",{class:"text-sm"},"diter",-1)])),S("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:Je,title:"Obtenir l'itinraire"},me[52]||(me[52]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),S("span",{class:"text-sm"},"Itinraire",-1)]))])):Zt("",!0),t.selectedShape?(Ne(),Be("button",{key:1,class:gi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:me[3]||(me[3]=it=>Me.$emit("delete-shape")),title:"Supprimer la forme"},me[53]||(me[53]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S("span",{class:"text-sm"},"Supprimer",-1)]),2)):Zt("",!0),t.selectedShape&&X.value?(Ne(),Be("div",Oz)):Zt("",!0),t.selectedShape&&X.value?(Ne(),Be("div",Iz,[X.value.type!=="Note"?(Ne(),Be("div",Bz,[me[54]||(me[54]=S("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Sn(S("input",{type:"text",id:"shapeName","onUpdate:modelValue":me[4]||(me[4]=it=>ge.value=it),onChange:Ge,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Pr,ge.value]])])):Zt("",!0),S("div",Rz,[me[57]||(me[57]=S("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),Sn(S("select",{id:"shapeCategory","onUpdate:modelValue":me[5]||(me[5]=it=>pe.value=it),onChange:se,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[me[55]||(me[55]=Gl('<option value="forages" data-v-60c2cd5f>Forages</option><option value="clients" data-v-60c2cd5f>Clients</option><option value="entrepots" data-v-60c2cd5f>Entrepts</option><option value="livraisons" data-v-60c2cd5f>Lieux de livraison</option><option value="cultures" data-v-60c2cd5f>Cultures</option><option value="parcelles" data-v-60c2cd5f>Noms des parcelles</option>',6)),(Ne(!0),Be(bn,null,Hn($.categories,(it,jt)=>(Ne(),Be(bn,{key:jt},[p.value.includes(String(jt))?Zt("",!0):(Ne(),Be("option",{key:0,value:String(jt)},kt(Ke(String(jt))),9,Fz))],64))),128)),me[56]||(me[56]=S("option",{value:"default"},"Autre",-1))],544),[[Ai,pe.value]])]),S("div",jz,[me[59]||(me[59]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),me[60]||(me[60]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),Sn(S("select",{id:"accessLevel","onUpdate:modelValue":me[6]||(me[6]=it=>O.value=it),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},me[58]||(me[58]=[S("option",{value:"company"},"Entreprise uniquement",-1),S("option",{value:"employee"},"Entreprise et salaris",-1),S("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[Ai,O.value]])]),S("div",zz,[X.value.type==="Polygon"?(Ne(),Be("div",$z,[S("div",Vz,[me[61]||(me[61]=S("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),S("span",Uz,kt(Ae(X.value.surface||0)),1)]),S("div",Hz,[me[62]||(me[62]=S("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),S("span",Gz,kt(Q(X.value.perimeter||0)),1)])])):X.value.type==="Line"?(Ne(),Be(bn,{key:1},[me[63]||(me[63]=S("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),S("span",Wz,kt(Q(X.value.length||0)),1)],64)):X.value.type==="ElevationLine"?(Ne(),Be(bn,{key:2},[S("div",qz,[S("div",Yz,[me[64]||(me[64]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),S("span",Kz,kt(Q(X.value.length||0)),1)]),S("div",Zz,[me[65]||(me[65]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),S("span",Xz,kt(Q(X.value.elevationGain||0)),1)]),S("div",Jz,[me[66]||(me[66]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),S("span",Qz,kt(Q(X.value.elevationLoss||0)),1)]),S("div",e$,[me[67]||(me[67]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),S("span",t$,kt(De(X.value.averageSlope||0)),1)]),S("div",n$,[me[68]||(me[68]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),S("span",r$,kt(De(X.value.maxSlope||0)),1)])]),S("div",i$,[S("canvas",s$,null,512)],512)],64)):Zt("",!0)])])):Zt("",!0)])):Zt("",!0),x.value==="style"&&t.selectedShape&&((ct=t.selectedShape.properties)==null?void 0:ct.type)!=="Note"?(Ne(),Be("div",o$,[S("div",a$,[(Ne(),Be(bn,null,Hn(V,it=>S("button",{key:it,class:"w-8 h-8 rounded-full",style:ql({backgroundColor:it}),onClick:jt=>_e(it),title:it},null,12,l$)),64))]),((ft=X.value)==null?void 0:ft.type)!=="TextRectangle"?(Ne(),Be("div",u$,[S("div",c$,[me[69]||(me[69]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",d$,[Sn(S("input",{type:"color","onUpdate:modelValue":me[7]||(me[7]=it=>k.value=it),class:"w-16 h-8 rounded border",onChange:me[8]||(me[8]=it=>ve({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Pr,k.value]]),Sn(S("input",{type:"range","onUpdate:modelValue":me[9]||(me[9]=it=>T.value=it),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:me[10]||(me[10]=it=>ve({strokeWidth:T.value})),title:"paisseur du contour"},null,544),[[Pr,T.value]])])]),S("div",h$,[me[70]||(me[70]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Sn(S("select",{"onUpdate:modelValue":me[11]||(me[11]=it=>A.value=it),class:"w-full rounded border",onChange:me[12]||(me[12]=it=>ve({strokeStyle:A.value}))},[(Ne(),Be(bn,null,Hn(B,it=>S("option",{key:it.value,value:it.value},kt(it.label),9,f$)),64))],544),[[Ai,A.value]])]),ne.value?(Ne(),Be("div",p$,[me[71]||(me[71]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",g$,[Sn(S("input",{type:"color","onUpdate:modelValue":me[13]||(me[13]=it=>z.value=it),class:"w-16 h-8 rounded border",onChange:me[14]||(me[14]=it=>ve({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[Pr,z.value]]),Sn(S("input",{type:"range","onUpdate:modelValue":me[15]||(me[15]=it=>Y.value=it),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:me[16]||(me[16]=it=>ve({fillOpacity:Y.value})),title:"Opacit du remplissage"},null,544),[[Pr,Y.value]])])])):Zt("",!0)])):Zt("",!0),((Mt=X.value)==null?void 0:Mt.type)==="TextRectangle"?(Ne(),Be("div",m$,[S("div",v$,[me[72]||(me[72]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",y$,[Sn(S("input",{type:"color","onUpdate:modelValue":me[17]||(me[17]=it=>k.value=it),class:"w-16 h-8 rounded border",onChange:me[18]||(me[18]=it=>ve({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Pr,k.value]]),Sn(S("input",{type:"range","onUpdate:modelValue":me[19]||(me[19]=it=>T.value=it),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:me[20]||(me[20]=it=>ve({strokeWidth:T.value})),title:"paisseur du contour"},null,544),[[Pr,T.value]])])]),S("div",b$,[me[73]||(me[73]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",_$,[Sn(S("input",{type:"color","onUpdate:modelValue":me[21]||(me[21]=it=>z.value=it),class:"w-16 h-8 rounded border",onChange:me[22]||(me[22]=it=>ve({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[Pr,z.value]]),Sn(S("input",{type:"range","onUpdate:modelValue":me[23]||(me[23]=it=>Y.value=it),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:me[24]||(me[24]=it=>ve({fillOpacity:Y.value})),title:"Opacit du remplissage"},null,544),[[Pr,Y.value]])])])])):Zt("",!0)])):Zt("",!0),x.value==="filters"?(Ne(),Be("div",w$,[S("div",x$,[S("div",L$,[me[76]||(me[76]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),me[77]||(me[77]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),S("div",null,[Sn(S("select",{"onUpdate:modelValue":me[25]||(me[25]=it=>H.value=it),onChange:me[26]||(me[26]=it=>I(H.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},me[74]||(me[74]=[S("option",{value:"company"},"Entreprise (accs  tout)",-1),S("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),S("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[Ai,H.value]]),me[75]||(me[75]=S("div",{class:"mt-2 text-xs text-gray-500"},[S("p",null,[S("strong",null,"Entreprise"),Gr(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),S("p",null,[S("strong",null,"Salaris"),Gr(" : Vous verrez les lments pour salaris et visiteurs")]),S("p",null,[S("strong",null,"Visiteurs"),Gr(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),S("div",S$,[me[86]||(me[86]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catgories",-1)),S("div",C$,[S("label",E$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[27]||(me[27]=it=>$.categories.forages=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.categories.forages]]),me[78]||(me[78]=S("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),S("label",P$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[28]||(me[28]=it=>$.categories.clients=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.categories.clients]]),me[79]||(me[79]=S("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),S("label",M$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[29]||(me[29]=it=>$.categories.entrepots=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.categories.entrepots]]),me[80]||(me[80]=S("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),S("label",k$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[30]||(me[30]=it=>$.categories.livraisons=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.categories.livraisons]]),me[81]||(me[81]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),S("label",A$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[31]||(me[31]=it=>$.categories.cultures=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.categories.cultures]]),me[82]||(me[82]=S("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),S("label",T$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[32]||(me[32]=it=>$.categories.parcelles=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.categories.parcelles]]),me[83]||(me[83]=S("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ne(!0),Be(bn,null,Hn($.categories,(it,jt)=>(Ne(),Be(bn,{key:jt},[p.value.includes(String(jt))?Zt("",!0):(Ne(),Be("label",D$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":hn=>$.categories[jt]=hn,onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,N$),[[yl,$.categories[jt]]]),S("span",O$,kt(jt),1)]))],64))),128)),s.value||o.value?(Ne(),Be("div",I$,[S("div",B$,[Sn(S("input",{type:"text","onUpdate:modelValue":me[33]||(me[33]=it=>c.name=it),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[Pr,c.name]]),S("button",{onClick:ee,disabled:!c.name||h.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(Ne(),Be("svg",j$,me[85]||(me[85]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),Be("svg",F$,me[84]||(me[84]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,R$)])])):Zt("",!0)])]),S("div",z$,[me[91]||(me[91]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),S("div",$$,[S("label",V$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[34]||(me[34]=it=>$.shapeTypes.Polygon=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.shapeTypes.Polygon]]),me[87]||(me[87]=S("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),S("label",U$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[35]||(me[35]=it=>$.shapeTypes.Line=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.shapeTypes.Line]]),me[88]||(me[88]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),S("label",H$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[36]||(me[36]=it=>$.shapeTypes.ElevationLine=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.shapeTypes.ElevationLine]]),me[89]||(me[89]=S("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimtriques",-1))]),S("label",G$,[Sn(S("input",{type:"checkbox","onUpdate:modelValue":me[37]||(me[37]=it=>$.shapeTypes.Note=it),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[yl,$.shapeTypes.Note]]),me[90]||(me[90]=S("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),S("div",{class:"pt-4 mb-4"},[S("button",{onClick:ye,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])])):Zt("",!0)])]),t.selectedShape&&X.value&&X.value.type==="ElevationLine"?(Ne(),Be("div",W$,[S("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:me[38]||(me[38]=it=>K("samplePoints"))},[me[93]||(me[93]=S("span",null,"Points d'chantillonnage",-1)),(Ne(),Be("svg",{class:gi(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me[92]||(me[92]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Sn(S("div",q$,[S("div",Y$,[me[98]||(me[98]=S("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),S("div",K$,[S("div",null,[me[94]||(me[94]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),Sn(S("input",{type:"number","onUpdate:modelValue":me[39]||(me[39]=it=>j.value.radius=it),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[Pr,j.value.radius]])]),S("div",null,[me[95]||(me[95]=S("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Sn(S("input",{type:"color","onUpdate:modelValue":me[40]||(me[40]=it=>j.value.color=it),class:"w-full h-8 px-1 border rounded",onChange:Z},null,544),[[Pr,j.value.color]])]),S("div",null,[me[96]||(me[96]=S("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Sn(S("input",{type:"range","onUpdate:modelValue":me[41]||(me[41]=it=>j.value.fillOpacity=it),min:"0",max:"1",step:"0.1",class:"w-full",onChange:Z},null,544),[[Pr,j.value.fillOpacity]])]),S("div",null,[me[97]||(me[97]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Sn(S("input",{type:"number","onUpdate:modelValue":me[42]||(me[42]=it=>j.value.weight=it),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[Pr,j.value.weight]])])])]),S("div",null,[me[102]||(me[102]=S("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),S("div",Z$,[S("div",null,[me[99]||(me[99]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),Sn(S("input",{type:"number","onUpdate:modelValue":me[43]||(me[43]=it=>J.value.radius=it),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ie},null,544),[[Pr,J.value.radius]])]),S("div",null,[me[100]||(me[100]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Sn(S("input",{type:"number","onUpdate:modelValue":me[44]||(me[44]=it=>J.value.weight=it),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ie},null,544),[[Pr,J.value.weight]])]),S("div",null,[me[101]||(me[101]=S("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Sn(S("input",{type:"range","onUpdate:modelValue":me[45]||(me[45]=it=>J.value.fillOpacity=it),min:"0",max:"1",step:"0.1",class:"w-full",onChange:ie},null,544),[[Pr,J.value.fillOpacity]])])])])],512),[[ky,!E.value.samplePoints]])])):Zt("",!0)],2)}}}),f5=rd(X$,[["__scopeId","data-v-60c2cd5f"]]),J$={class:"map-toolbar w-full"},Q$={class:"hidden md:flex items-center space-x-2"},eV={class:"dropdown"},tV={class:"dropdown-menu"},nV=["onClick"],rV={key:0,class:"border-l pl-2 flex-1"},iV={class:"flex items-center"},sV={class:"plan-info"},oV={class:"plan-name"},aV={key:0,class:"plan-description"},lV={class:"border-l pl-2 ml-auto"},uV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},cV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},dV={key:"saving"},hV={key:"success",class:"save-success-text"},fV={key:"default"},pV={class:"md:hidden"},gV={class:"flex justify-between items-center"},mV={key:0,class:"truncate mx-2 text-sm font-medium"},vV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},yV={class:"flex justify-between items-center mb-3 border-b pb-2"},bV={class:"flex flex-col space-y-4"},_V={key:0,class:"flex flex-col pb-3 border-b"},wV={class:"text-sm font-semibold text-gray-800"},xV={key:0,class:"text-xs text-gray-600 mt-1"},LV={class:"flex flex-col"},SV={class:"grid grid-cols-3 gap-2"},CV=["onClick"],EV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},PV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},MV={key:"saving"},kV={key:"success",class:"save-success-text"},AV={key:"default"},TV=Ss({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(t,{emit:e}){const n=e,r=t,i=Lt("Hybride"),s=Lt(!1),o=E=>{const k=E.currentTarget,T=k.nextElementSibling;if(T&&T.classList.contains("dropdown-menu")){const A=k.getBoundingClientRect();T.style.top=`${A.bottom}px`,T.style.left=`${A.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Un(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=E=>{i.value=E,n("change-map-type",E),x()},h=()=>{n("create-new-plan"),x()},p=()=>{n("load-plan"),x()},v=()=>{n("save-plan"),x()},m=()=>{n("adjust-view"),x()},x=()=>{s.value=!1};return(E,k)=>(Ne(),Be("div",J$,[S("div",Q$,[S("div",eV,[S("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[k[2]||(k[2]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),S("span",null,kt(a[i.value]),1)],32),S("div",tV,[(Ne(),Be(bn,null,Hn(a,(T,A)=>S("button",{key:A,class:gi(["dropdown-item",{active:A===i.value}]),onClick:z=>c(A)},kt(T),11,nV)),64))])]),E.planName?(Ne(),Be("div",rV,[S("div",iV,[S("div",sV,[S("h2",oV,kt(E.planName),1),E.planDescription?(Ne(),Be("p",aV,kt(E.planDescription),1)):Zt("",!0)])])])):Zt("",!0),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:h,class:"btn-toolbar",title:"Nouveau plan"},k[3]||(k[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),S("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},k[4]||(k[4]=[Gl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-7c773898><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-7c773898></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-7c773898></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-7c773898></path></svg><span class="hidden lg:inline ml-1" data-v-7c773898>Charger</span>',2)])),S("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},k[5]||(k[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:m,class:"btn-toolbar",title:"Ajuster la vue"},k[6]||(k[6]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),S("div",lV,[S("div",{class:gi(["text-xs hidden lg:flex items-center",{"text-gray-500":!E.saveStatus,"text-primary-600 font-medium":E.saveStatus==="success","text-blue-600 font-medium":E.saveStatus==="saving"}])},[E.saveStatus==="saving"?(Ne(),Be("svg",uV,k[7]||(k[7]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),E.saveStatus==="success"?(Ne(),Be("svg",cV,k[8]||(k[8]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Zt("",!0),ti(X2,{name:"fade-slide",mode:"out-in"},{default:zu(()=>[E.saveStatus==="saving"?(Ne(),Be("span",dV," Sauvegarde en cours... ")):E.saveStatus==="success"?(Ne(),Be("span",hV," Sauvegarde russie ! ")):(Ne(),Be("span",fV," Dernire modification : "+kt(l.value),1))]),_:1})],2)])]),S("div",pV,[S("div",gV,[S("button",{onClick:k[0]||(k[0]=T=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},k[9]||(k[9]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),E.planName?(Ne(),Be("div",mV,kt(E.planName),1)):Zt("",!0),S("div",{class:"flex space-x-2"},[S("button",{onClick:h,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},k[10]||(k[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),S("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},k[11]||(k[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),S("button",{onClick:m,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},k[12]||(k[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Ne(),Be("div",vV,[S("div",yV,[k[14]||(k[14]=S("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),S("button",{onClick:k[1]||(k[1]=T=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},k[13]||(k[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",bV,[E.planName?(Ne(),Be("div",_V,[S("h3",wV,kt(E.planName),1),E.planDescription?(Ne(),Be("p",xV,kt(E.planDescription),1)):Zt("",!0)])):Zt("",!0),S("div",LV,[k[15]||(k[15]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),S("div",SV,[(Ne(),Be(bn,null,Hn(a,(T,A)=>S("button",{key:A,class:gi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":A===i.value}]),onClick:z=>c(A)},kt(T),11,CV)),64))])]),S("div",{class:"flex flex-col"},[k[18]||(k[18]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),S("div",{class:"grid grid-cols-2 gap-2"},[S("button",{onClick:h,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},k[16]||(k[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Gr(" Nouveau ")])),S("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},k[17]||(k[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),S("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),S("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Gr(" Charger ")]))])]),S("div",{class:gi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!E.saveStatus,"text-primary-600 font-medium":E.saveStatus==="success","text-blue-600 font-medium":E.saveStatus==="saving"}])},[E.saveStatus==="saving"?(Ne(),Be("svg",EV,k[19]||(k[19]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),E.saveStatus==="success"?(Ne(),Be("svg",PV,k[20]||(k[20]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Zt("",!0),ti(X2,{name:"fade-slide",mode:"out-in"},{default:zu(()=>[E.saveStatus==="saving"?(Ne(),Be("span",MV," Sauvegarde en cours... ")):E.saveStatus==="success"?(Ne(),Be("span",kV," Sauvegarde russie ! ")):(Ne(),Be("span",AV," Dernire modification : "+kt(l.value),1))]),_:1})],2)])])):Zt("",!0)])]))}}),DV=rd(TV,[["__scopeId","data-v-7c773898"]]),NV={class:"comment-thread"},OV={key:0,class:"space-y-3 mb-4"},IV={class:"flex justify-between items-start"},BV={class:"flex items-center"},RV={class:"font-medium text-sm text-gray-900"},FV={class:"flex items-center"},jV={class:"text-xs text-gray-500"},zV=["onClick"],$V={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},VV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},UV={key:2,class:"mt-3"},HV={class:"flex justify-end mt-2"},GV=["disabled"],WV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},qV=Ss({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reus initialement:",n.comments),fi(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis  jour:",E)},{deep:!0});const r=e,i=to(),s=bf(),o=Kl(),a=Lt(""),l=Un(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function h(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajout avec succs"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const T=k.response.data;T.note?o.error(`Erreur: ${T.note[0]}`):T.user?o.error(`Erreur: ${T.user[0]}`):T.text?o.error(`Erreur: ${T.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprim"),r("comment-deleted")}catch(T){if(console.error("Erreur lors de la suppression du commentaire:",T),(k=T.response)!=null&&k.data){const A=T.response.data;A.detail?o.error(`Erreur: ${A.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(Ne(),Be("div",NV,[E.comments&&E.comments.length>0?(Ne(),Be("div",OV,[(Ne(!0),Be(bn,null,Hn(E.comments,T=>(Ne(),Be("div",{key:T.id,class:"bg-gray-50 rounded-lg p-3"},[S("div",IV,[S("div",BV,[S("div",RV,kt(T.userName),1),S("span",{class:gi(["ml-2 text-xs px-2 py-0.5 rounded-full",m(T.userRole)])},kt(x(T.userRole)),3)]),S("div",FV,[S("span",jV,kt(v(T.createdAt)),1),c(T)?(Ne(),Be("button",{key:0,onClick:Wl(A=>p(T.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,zV)):Zt("",!0)])]),S("p",$V,kt(T.text),1)]))),128))])):(Ne(),Be("div",VV," Aucun commentaire pour le moment ")),l.value?(Ne(),Be("div",UV,[Sn(S("textarea",{"onUpdate:modelValue":k[0]||(k[0]=T=>a.value=T),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Pr,a.value]]),S("div",HV,[S("button",{type:"button",onClick:Wl(h,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,GV)])])):(Ne(),Be("div",WV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),YV={class:"photo-gallery"},KV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},ZV=["src","onClick"],XV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},JV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},QV=["onClick"],eU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},tU={class:"flex space-x-2 mt-3"},nU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},rU={class:"relative bg-gray-900",style:{height:"300px"}},iU=["src"],sU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},oU={key:1,class:"flex space-x-3"},aU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},lU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},uU=["src"],cU=Ss({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=bf(),s=Kl(),o=Lt(null),a=Lt(null),l=Lt(null);let c=null;const h=Lt(!1),p=Lt(!1),v=Lt(null),m=Lt(null);function x(pe){v.value=pe,h.value=!0}async function E(pe){var O;if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,pe),s.success("Photo supprime"),r("photo-deleted"),h.value&&((O=v.value)==null?void 0:O.id)===pe&&(h.value=!1,v.value=null)}catch(j){console.error("Erreur lors de la suppression de la photo:",j),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function T(pe){const O=pe.target;if(!O.files||O.files.length===0)return;const j=O.files[0];if(!j.type.startsWith("image/")){s.error("Le fichier doit tre une image");return}if(j.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const J=await A(j);await i.addPhoto(n.noteId,{url:J}),O.value="",s.success("Photo ajoute"),r("photo-added")}catch(J){console.error("Erreur lors de l'ajout de la photo:",J),s.error("Erreur lors de l'ajout de la photo")}}function A(pe){return new Promise((O,j)=>{const J=new FileReader;J.onload=()=>O(J.result),J.onerror=j,J.readAsDataURL(pe)})}fi(p,async pe=>{if(pe){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de camra non supporte sur ce navigateur");const O={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(O),o.value&&(o.value.srcObject=c,await new Promise(j=>{o.value.onloadedmetadata=()=>{o.value.play().then(j)}}))}catch(O){console.error("Erreur lors de l'accs  la camra:",O);let j="Impossible d'accder  la camra";O.name==="NotAllowedError"?j="L'accs  la camra a t refus. Veuillez vrifier vos permissions.":O.name==="NotFoundError"?j="Aucune camra n'a t trouve sur votre appareil.":O.name==="NotSupportedError"&&(j="Votre navigateur ne supporte pas l'accs  la camra."),s.error(j),p.value=!1}}else c&&(c.getTracks().forEach(O=>O.stop()),c=null)});function z(){if(!o.value||!a.value)return;const pe=o.value,O=a.value;O.width=pe.videoWidth,O.height=pe.videoHeight;const j=O.getContext("2d");j&&(j.drawImage(pe,0,0,O.width,O.height),m.value=O.toDataURL("image/jpeg"))}function Y(){m.value=null}async function ne(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoute"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function ge(){p.value=!1}return Hu(()=>{c&&(c.getTracks().forEach(pe=>pe.stop()),c=null)}),(pe,O)=>(Ne(),Be("div",YV,[pe.photos&&pe.photos.length>0?(Ne(),Be("div",KV,[(Ne(!0),Be(bn,null,Hn(pe.photos,j=>(Ne(),Be("div",{key:j.id,class:"relative group"},[S("img",{src:j.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:J=>x(j)},null,8,ZV),S("div",XV,[S("div",JV,[S("button",{onClick:Wl(J=>E(j.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},O[2]||(O[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,QV)])])]))),128))])):(Ne(),Be("div",eU," Aucune photo pour le moment ")),S("div",tU,[S("button",{type:"button",onClick:O[0]||(O[0]=j=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[3]||(O[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Gr(" Prendre une photo ")])),S("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},O[4]||(O[4]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),Gr(" Tlverser ")])),S("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:T},null,544)]),p.value?(Ne(),Be("div",nU,[S("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[O[6]||(O[6]=S("h3",{class:"text-sm font-medium text-gray-700"},"Mode camra",-1)),S("button",{type:"button",onClick:ge,class:"text-gray-400 hover:text-gray-500"},O[5]||(O[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",rU,[m.value?(Ne(),Be("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,iU)):(Ne(),Be("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),S("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),S("div",sU,[m.value?(Ne(),Be("div",oU,[S("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),S("button",{type:"button",onClick:ne,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ne(),Be("button",{key:0,type:"button",onClick:z,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[7]||(O[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Zt("",!0),h.value?(Ne(),Be("div",aU,[S("div",lU,[S("button",{type:"button",onClick:O[1]||(O[1]=j=>h.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},O[8]||(O[8]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Ne(),Be("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,uU)):Zt("",!0)])])):Zt("",!0)]))}}),dU=rd(cU,[["__scopeId","data-v-f87156b4"]]),hU={class:"modal-header"},fU={class:"modal-title"},pU={class:"modal-tabs"},gU={key:0,class:"badge"},mU={key:0,class:"badge"},vU={class:"modal-content"},yU={key:0,class:"tab-content"},bU={class:"form-group"},_U={class:"form-group"},wU={key:0,class:"location-indicator"},xU={class:"form-group"},LU=["value"],SU={key:1,class:"form-group"},CU=["value"],EU={class:"form-group"},PU=["value"],MU={class:"form-group"},kU={class:"color-picker"},AU=["onClick"],TU={key:1,class:"tab-content"},DU={key:2,class:"tab-content"},NU=Ss({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=bf(),s=Kl(),o=to(),a=Lt("info"),l=Lt([]),c=Lt(null),h=window.console;fi(a,async R=>{h.log("[NoteEditModal] Onglet actif chang:",R),R==="comments"&&n.note&&n.note.id&&(h.log("[NoteEditModal] Onglet Commentaires slectionn, commentaires actuels:",p.value.comments),await x(n.note.id)),R==="photos"&&n.note&&n.note.id&&(h.log("[NoteEditModal] Onglet Photos slectionn, photos actuelles:",p.value.photos),await E(n.note.id))});const p=Lt({title:"",description:"",columnId:"",accessLevel:ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function v(R){return Array.isArray(R)?R:typeof R=="object"&&"type"in R&&"coordinates"in R?[R.coordinates[1],R.coordinates[0]]:(h.error("[NoteEditModal] Format de localisation non reconnu:",R),[0,0])}function m(R){if(!R)return new Date().toISOString();try{const I=new Date(R);return isNaN(I.getTime())?(h.warn("[NoteEditModal] Date invalide:",R),new Date().toISOString()):I.toISOString()}catch(I){return h.error("[NoteEditModal] Erreur lors de la cration de la date:",I),new Date().toISOString()}}async function x(R){try{h.log(`[NoteEditModal] Chargement des commentaires pour la note ${R}`);const I=await da.getComments(R);h.log("[NoteEditModal] Commentaires reus:",I.data);const X=I.data.map(K=>({id:K.id,text:K.text,createdAt:K.created_at,userId:K.user,userName:K.user_name,userRole:K.user_role}));return h.log("[NoteEditModal] Commentaires transforms:",X),n.note&&(i.updateNote(n.note.id,{comments:X}),p.value.comments=X,h.log("[NoteEditModal] Commentaires mis  jour dans le store et localement"),h.log("[NoteEditModal] editingNote.comments aprs mise  jour:",p.value.comments)),X}catch(I){return h.error("[NoteEditModal] Erreur lors du chargement des commentaires:",I),s.error("Erreur lors du chargement des commentaires"),[]}}async function E(R){try{h.log(`[NoteEditModal] Chargement des photos pour la note ${R}`);const I=await da.getPhotos(R);h.log("[NoteEditModal] Photos reues:",I.data);const X=I.data.map(K=>({id:K.id,url:K.image,createdAt:K.created_at,caption:K.caption}));return n.note&&(i.updateNote(n.note.id,{photos:X}),p.value.photos=X,h.log("[NoteEditModal] Photos mises  jour dans le store et localement")),X}catch(I){return h.error("[NoteEditModal] Erreur lors du chargement des photos:",I),s.error("Erreur lors du chargement des photos"),[]}}async function k(){if(o.isAdmin)try{const R=await Ya.getEntreprises();l.value=R.data,h.log("[NoteEditModal] Entreprises charges:",l.value)}catch(R){h.error("[NoteEditModal] Erreur lors du chargement des entreprises:",R),s.error("Erreur lors du chargement des entreprises")}}no(async()=>{var R,I,X;if(h.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),h.log("[NoteEditModal] Colonnes charges:",i.columns),await k(),n.note){h.log("[NoteEditModal] dition d'une note existante:",n.note);const K=JSON.parse(JSON.stringify(n.note));K.createdAt=m(K.createdAt),K.updatedAt=m(K.updatedAt),p.value=K,o.isAdmin&&K.enterprise_id&&(c.value=K.enterprise_id),n.note.id&&(h.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([x(n.note.id),E(n.note.id)]),h.log("[NoteEditModal] Aprs chargement - Commentaires:",((R=p.value.comments)==null?void 0:R.length)||0),h.log("[NoteEditModal] Aprs chargement - Photos:",((I=p.value.photos)==null?void 0:I.length)||0),setTimeout(()=>{h.log("[NoteEditModal] Compteurs aprs timeout - Commentaires:",A.value),h.log("[NoteEditModal] Compteurs aprs timeout - Photos:",z.value)},0))}else if(n.isNewNote){if(h.log("[NoteEditModal] Cration d'une nouvelle note"),p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:ki.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((X=o.user)!=null&&X.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){h.log("[NoteEditModal] Ajout de la localisation:",n.location);const K=v(n.location);p.value.location=K}h.log("[NoteEditModal] Niveau d'accs initial:",p.value.accessLevel)}else h.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");h.log("[NoteEditModal] editingNote.value aprs initialisation:",p.value)});const T=Un(()=>i.getSortedColumns),A=Un(()=>{var I;const R=((I=p.value.comments)==null?void 0:I.length)||0;return h.log("[NoteEditModal] Computed commentsCount recalcul:",R),R}),z=Un(()=>{var I;const R=((I=p.value.photos)==null?void 0:I.length)||0;return h.log("[NoteEditModal] Computed photosCount recalcul:",R),R}),Y=[{id:ki.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:ki.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:ki.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:ki.VISITOR,title:"Visiteurs",description:"Visible par tous"}],ne=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],ge=R=>{var I;if(p.value.style?(p.value.style.color=R,p.value.style.fillColor=R):p.value.style={color:R,weight:2,opacity:1,fillColor:R,fillOpacity:.6,radius:8},p.value.color=R,(I=n.note)!=null&&I.id){h.log("[NoteEditModal] mission de l'vnement de mise  jour de couleur:",R);const X=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:R,fillColor:R}}});window.dispatchEvent(X);const K=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(K)}},pe=()=>{var R,I,X,K,_e,ve,Ge,se,q,Z,ie;p.value={title:((R=n.note)==null?void 0:R.title)||"",description:((I=n.note)==null?void 0:I.description)||"",columnId:((X=n.note)==null?void 0:X.columnId)||"",accessLevel:((K=n.note)==null?void 0:K.accessLevel)||"private",style:((_e=n.note)==null?void 0:_e.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((ve=n.note)==null?void 0:ve.location)||null,comments:((Ge=n.note)==null?void 0:Ge.comments)||[],photos:((se=n.note)==null?void 0:se.photos)||[],enterprise_id:((q=n.note)==null?void 0:q.enterprise_id)||null},o.isAdmin&&((Z=n.note)!=null&&Z.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((ie=o.user)!=null&&ie.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};no(()=>{pe()}),fi(()=>n.note,()=>{pe()},{deep:!0});function O(){r("close")}async function j(){h.log("[NoteEditModal] Commentaire ajout, le modal reste ouvert"),n.note&&n.note.id&&await x(n.note.id)}async function J(){h.log("[NoteEditModal] Photo ajoute, le modal reste ouvert"),n.note&&n.note.id&&await E(n.note.id)}async function V(){h.log("[NoteEditModal] Commentaire supprim, mise  jour de la liste"),n.note&&n.note.id&&await x(n.note.id)}async function B(){h.log("[NoteEditModal] Photo supprime, mise  jour de la liste"),n.note&&n.note.id&&await E(n.note.id)}async function H(){var R,I;try{const X=p.value.style.color;p.value.style={...p.value.style,color:X,fillColor:X,weight:2,opacity:1,fillOpacity:.6,radius:8};const K={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:X,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};!o.isAdmin&&((R=o.user)!=null&&R.enterprise_id)&&(K.enterprise_id=o.user.enterprise_id),p.value.location&&(K.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location),h.log("[NoteEditModal] Donnes de note  sauvegarder:",K);let _e;if((I=n.note)!=null&&I.id){const ve=n.note.backendId||n.note.id;h.log(`[NoteEditModal] Mise  jour de la note avec ID backend: ${ve}`),K.backendId=n.note.backendId,_e=(await da.updateNote(ve,K)).data,i.updateNote(ve,{...p.value,..._e,accessLevel:p.value.accessLevel,style:p.value.style,color:X,updatedAt:new Date().toISOString()});const se=n.note.leafletId||n.note.id,q=new CustomEvent("geonote:update",{detail:{noteId:se,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:X}}});window.dispatchEvent(q),s.success("Note mise  jour avec succs")}else{if(_e=(await da.createNote(K)).data,!_e.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const Ge=i.getDefaultColumn,se={...K,id:_e.id,columnId:K.columnId||Ge.id,accessLevel:p.value.accessLevel,style:K.style,color:X};h.log("[NoteEditModal] Note  ajouter au store avec ID backend:",_e.id),i.addNote(se),s.success("Note cre avec succs")}_e&&(!_e.comments&&p.value.comments&&(_e.comments=p.value.comments),!_e.photos&&p.value.photos&&(_e.photos=p.value.photos),_e.color=X,_e.style={..._e.style,color:X,fillColor:X}),r("save",_e),r("close")}catch(X){h.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",X),s.error("Erreur lors de la sauvegarde de la note")}}function $(R){R.stopPropagation()}return(R,I)=>{var X;return Ne(),Be("div",{class:"modal-overlay",onClick:$},[S("div",{class:"modal-container",onClick:I[8]||(I[8]=Wl(()=>{},["stop"]))},[S("form",{onSubmit:Wl(H,["prevent"]),class:"modal-form"},[S("div",hU,[S("h3",fU,kt((X=R.note)!=null&&X.id?"Modifier la note":"Nouvelle note"),1),S("button",{type:"button",onClick:O,class:"close-button"},I[9]||(I[9]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",pU,[S("button",{type:"button",onClick:I[0]||(I[0]=K=>a.value="info"),class:gi(["tab-button",{active:a.value==="info"}])}," Informations ",2),S("button",{type:"button",onClick:I[1]||(I[1]=K=>a.value="comments"),class:gi(["tab-button",{active:a.value==="comments"}])},[I[10]||(I[10]=Gr(" Commentaires ")),A.value>0?(Ne(),Be("span",gU,kt(A.value),1)):Zt("",!0)],2),S("button",{type:"button",onClick:I[2]||(I[2]=K=>a.value="photos"),class:gi(["tab-button",{active:a.value==="photos"}])},[I[11]||(I[11]=Gr(" Photos ")),z.value>0?(Ne(),Be("span",mU,kt(z.value),1)):Zt("",!0)],2)]),S("div",vU,[a.value==="info"?(Ne(),Be("div",yU,[S("div",bU,[I[12]||(I[12]=S("label",{for:"title"},"Titre",-1)),Sn(S("input",{type:"text",id:"title","onUpdate:modelValue":I[3]||(I[3]=K=>p.value.title=K),required:""},null,512),[[Pr,p.value.title]])]),S("div",_U,[I[13]||(I[13]=S("label",{for:"description"},"Description",-1)),Sn(S("textarea",{id:"description","onUpdate:modelValue":I[4]||(I[4]=K=>p.value.description=K),rows:"3"},null,512),[[Pr,p.value.description]])]),p.value.location?(Ne(),Be("div",wU,I[14]||(I[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),S("span",null,"Note golocalise",-1)]))):Zt("",!0),S("div",xU,[I[15]||(I[15]=S("label",{for:"column"},"tat",-1)),Sn(S("select",{id:"column","onUpdate:modelValue":I[5]||(I[5]=K=>p.value.columnId=K)},[(Ne(!0),Be(bn,null,Hn(T.value,K=>(Ne(),Be("option",{key:K.id,value:K.id},kt(K.title),9,LU))),128))],512),[[Ai,p.value.columnId]])]),Bn(o).isAdmin?(Ne(),Be("div",SU,[I[17]||(I[17]=S("label",{for:"enterprise"},"Entreprise",-1)),Sn(S("select",{id:"enterprise","onUpdate:modelValue":I[6]||(I[6]=K=>c.value=K)},[I[16]||(I[16]=S("option",{value:null},"Slectionner une entreprise",-1)),(Ne(!0),Be(bn,null,Hn(l.value,K=>(Ne(),Be("option",{key:K.id,value:K.id},kt(K.company_name||`${K.first_name} ${K.last_name}`),9,CU))),128))],512),[[Ai,c.value]])])):Zt("",!0),S("div",EU,[I[18]||(I[18]=S("label",{for:"accessLevel"},"Niveau d'accs",-1)),Sn(S("select",{id:"accessLevel","onUpdate:modelValue":I[7]||(I[7]=K=>p.value.accessLevel=K)},[(Ne(),Be(bn,null,Hn(Y,K=>S("option",{key:K.id,value:K.id},kt(K.title)+" - "+kt(K.description),9,PU)),64))],512),[[Ai,p.value.accessLevel]])]),S("div",MU,[I[19]||(I[19]=S("label",null,"Couleur",-1)),S("div",kU,[(Ne(),Be(bn,null,Hn(ne,K=>S("div",{key:K,class:gi(["color-option",{selected:p.value.style.color===K}]),style:ql({backgroundColor:K}),onClick:_e=>ge(K)},null,14,AU)),64))])])])):a.value==="comments"?(Ne(),Be("div",TU,[R.note?(Ne(),Vo(qV,{key:0,noteId:R.note.id,comments:p.value.comments||[],onCommentAdded:j,onCommentDeleted:V},null,8,["noteId","comments"])):Zt("",!0)])):a.value==="photos"?(Ne(),Be("div",DU,[R.note?(Ne(),Vo(dU,{key:0,noteId:R.note.id,photos:p.value.photos||[],onPhotoAdded:J,onPhotoDeleted:B},null,8,["noteId","photos"])):Zt("",!0)])):Zt("",!0)]),S("div",{class:"modal-footer"},[I[20]||(I[20]=S("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),S("button",{type:"button",onClick:O,class:"secondary-button"},"Annuler")])],32)])])}}}),IE=rd(NU,[["__scopeId","data-v-a26dd91d"]]);(()=>{var Mn,Kn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(d,g)=>()=>(g||d((g={exports:{}}).exports,g),g.exports),a=(d,g,_,C)=>{if(g&&typeof g=="object"||typeof g=="function")for(let M of r(g))!s.call(d,M)&&M!==_&&e(d,M,{get:()=>g[M],enumerable:!(C=n(g,M))||C.enumerable});return d},l=(d,g,_)=>(_=d!=null?t(i(d)):{},a(g||!d||!d.__esModule?e(_,"default",{value:d,enumerable:!0}):_,d)),c=o((d,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),h=o((d,g)=>{function _(C,M){return C===M||C!==C&&M!==M}g.exports=_}),p=o((d,g)=>{var _=h();function C(M,U){for(var te=M.length;te--;)if(_(M[te][0],U))return te;return-1}g.exports=C}),v=o((d,g)=>{var _=p(),C=Array.prototype,M=C.splice;function U(te){var ae=this.__data__,be=_(ae,te);if(be<0)return!1;var Ce=ae.length-1;return be==Ce?ae.pop():M.call(ae,be,1),--this.size,!0}g.exports=U}),m=o((d,g)=>{var _=p();function C(M){var U=this.__data__,te=_(U,M);return te<0?void 0:U[te][1]}g.exports=C}),x=o((d,g)=>{var _=p();function C(M){return _(this.__data__,M)>-1}g.exports=C}),E=o((d,g)=>{var _=p();function C(M,U){var te=this.__data__,ae=_(te,M);return ae<0?(++this.size,te.push([M,U])):te[ae][1]=U,this}g.exports=C}),k=o((d,g)=>{var _=c(),C=v(),M=m(),U=x(),te=E();function ae(be){var Ce=-1,tt=be==null?0:be.length;for(this.clear();++Ce<tt;){var We=be[Ce];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=C,ae.prototype.get=M,ae.prototype.has=U,ae.prototype.set=te,g.exports=ae}),T=o((d,g)=>{var _=k();function C(){this.__data__=new _,this.size=0}g.exports=C}),A=o((d,g)=>{function _(C){var M=this.__data__,U=M.delete(C);return this.size=M.size,U}g.exports=_}),z=o((d,g)=>{function _(C){return this.__data__.get(C)}g.exports=_}),Y=o((d,g)=>{function _(C){return this.__data__.has(C)}g.exports=_}),ne=o((d,g)=>{var _=typeof ha=="object"&&ha&&ha.Object===Object&&ha;g.exports=_}),ge=o((d,g)=>{var _=ne(),C=typeof self=="object"&&self&&self.Object===Object&&self,M=_||C||Function("return this")();g.exports=M}),pe=o((d,g)=>{var _=ge(),C=_.Symbol;g.exports=C}),O=o((d,g)=>{var _=pe(),C=Object.prototype,M=C.hasOwnProperty,U=C.toString,te=_?_.toStringTag:void 0;function ae(be){var Ce=M.call(be,te),tt=be[te];try{be[te]=void 0;var We=!0}catch{}var _t=U.call(be);return We&&(Ce?be[te]=tt:delete be[te]),_t}g.exports=ae}),j=o((d,g)=>{var _=Object.prototype,C=_.toString;function M(U){return C.call(U)}g.exports=M}),J=o((d,g)=>{var _=pe(),C=O(),M=j(),U="[object Null]",te="[object Undefined]",ae=_?_.toStringTag:void 0;function be(Ce){return Ce==null?Ce===void 0?te:U:ae&&ae in Object(Ce)?C(Ce):M(Ce)}g.exports=be}),V=o((d,g)=>{function _(C){var M=typeof C;return C!=null&&(M=="object"||M=="function")}g.exports=_}),B=o((d,g)=>{var _=J(),C=V(),M="[object AsyncFunction]",U="[object Function]",te="[object GeneratorFunction]",ae="[object Proxy]";function be(Ce){if(!C(Ce))return!1;var tt=_(Ce);return tt==U||tt==te||tt==M||tt==ae}g.exports=be}),H=o((d,g)=>{var _=ge(),C=_["__core-js_shared__"];g.exports=C}),$=o((d,g)=>{var _=H(),C=function(){var U=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return U?"Symbol(src)_1."+U:""}();function M(U){return!!C&&C in U}g.exports=M}),R=o((d,g)=>{var _=Function.prototype,C=_.toString;function M(U){if(U!=null){try{return C.call(U)}catch{}try{return U+""}catch{}}return""}g.exports=M}),I=o((d,g)=>{var _=B(),C=$(),M=V(),U=R(),te=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,be=Function.prototype,Ce=Object.prototype,tt=be.toString,We=Ce.hasOwnProperty,_t=RegExp("^"+tt.call(We).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(nn){if(!M(nn)||C(nn))return!1;var yn=_(nn)?_t:ae;return yn.test(U(nn))}g.exports=It}),X=o((d,g)=>{function _(C,M){return C==null?void 0:C[M]}g.exports=_}),K=o((d,g)=>{var _=I(),C=X();function M(U,te){var ae=C(U,te);return _(ae)?ae:void 0}g.exports=M}),_e=o((d,g)=>{var _=K(),C=ge(),M=_(C,"Map");g.exports=M}),ve=o((d,g)=>{var _=K(),C=_(Object,"create");g.exports=C}),Ge=o((d,g)=>{var _=ve();function C(){this.__data__=_?_(null):{},this.size=0}g.exports=C}),se=o((d,g)=>{function _(C){var M=this.has(C)&&delete this.__data__[C];return this.size-=M?1:0,M}g.exports=_}),q=o((d,g)=>{var _=ve(),C="__lodash_hash_undefined__",M=Object.prototype,U=M.hasOwnProperty;function te(ae){var be=this.__data__;if(_){var Ce=be[ae];return Ce===C?void 0:Ce}return U.call(be,ae)?be[ae]:void 0}g.exports=te}),Z=o((d,g)=>{var _=ve(),C=Object.prototype,M=C.hasOwnProperty;function U(te){var ae=this.__data__;return _?ae[te]!==void 0:M.call(ae,te)}g.exports=U}),ie=o((d,g)=>{var _=ve(),C="__lodash_hash_undefined__";function M(U,te){var ae=this.__data__;return this.size+=this.has(U)?0:1,ae[U]=_&&te===void 0?C:te,this}g.exports=M}),de=o((d,g)=>{var _=Ge(),C=se(),M=q(),U=Z(),te=ie();function ae(be){var Ce=-1,tt=be==null?0:be.length;for(this.clear();++Ce<tt;){var We=be[Ce];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=C,ae.prototype.get=M,ae.prototype.has=U,ae.prototype.set=te,g.exports=ae}),ye=o((d,g)=>{var _=de(),C=k(),M=_e();function U(){this.size=0,this.__data__={hash:new _,map:new(M||C),string:new _}}g.exports=U}),he=o((d,g)=>{function _(C){var M=typeof C;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?C!=="__proto__":C===null}g.exports=_}),Q=o((d,g)=>{var _=he();function C(M,U){var te=M.__data__;return _(U)?te[typeof U=="string"?"string":"hash"]:te.map}g.exports=C}),Ae=o((d,g)=>{var _=Q();function C(M){var U=_(this,M).delete(M);return this.size-=U?1:0,U}g.exports=C}),De=o((d,g)=>{var _=Q();function C(M){return _(this,M).get(M)}g.exports=C}),Ke=o((d,g)=>{var _=Q();function C(M){return _(this,M).has(M)}g.exports=C}),fe=o((d,g)=>{var _=Q();function C(M,U){var te=_(this,M),ae=te.size;return te.set(M,U),this.size+=te.size==ae?0:1,this}g.exports=C}),ee=o((d,g)=>{var _=ye(),C=Ae(),M=De(),U=Ke(),te=fe();function ae(be){var Ce=-1,tt=be==null?0:be.length;for(this.clear();++Ce<tt;){var We=be[Ce];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=C,ae.prototype.get=M,ae.prototype.has=U,ae.prototype.set=te,g.exports=ae}),oe=o((d,g)=>{var _=k(),C=_e(),M=ee(),U=200;function te(ae,be){var Ce=this.__data__;if(Ce instanceof _){var tt=Ce.__data__;if(!C||tt.length<U-1)return tt.push([ae,be]),this.size=++Ce.size,this;Ce=this.__data__=new M(tt)}return Ce.set(ae,be),this.size=Ce.size,this}g.exports=te}),le=o((d,g)=>{var _=k(),C=T(),M=A(),U=z(),te=Y(),ae=oe();function be(Ce){var tt=this.__data__=new _(Ce);this.size=tt.size}be.prototype.clear=C,be.prototype.delete=M,be.prototype.get=U,be.prototype.has=te,be.prototype.set=ae,g.exports=be}),ze=o((d,g)=>{var _=K(),C=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();g.exports=C}),$e=o((d,g)=>{var _=ze();function C(M,U,te){U=="__proto__"&&_?_(M,U,{configurable:!0,enumerable:!0,value:te,writable:!0}):M[U]=te}g.exports=C}),Je=o((d,g)=>{var _=$e(),C=h();function M(U,te,ae){(ae!==void 0&&!C(U[te],ae)||ae===void 0&&!(te in U))&&_(U,te,ae)}g.exports=M}),Me=o((d,g)=>{function _(C){return function(M,U,te){for(var ae=-1,be=Object(M),Ce=te(M),tt=Ce.length;tt--;){var We=Ce[C?tt:++ae];if(U(be[We],We,be)===!1)break}return M}}g.exports=_}),me=o((d,g)=>{var _=Me(),C=_();g.exports=C}),qe=o((d,g)=>{var _=ge(),C=typeof d=="object"&&d&&!d.nodeType&&d,M=C&&typeof g=="object"&&g&&!g.nodeType&&g,U=M&&M.exports===C,te=U?_.Buffer:void 0,ae=te?te.allocUnsafe:void 0;function be(Ce,tt){if(tt)return Ce.slice();var We=Ce.length,_t=ae?ae(We):new Ce.constructor(We);return Ce.copy(_t),_t}g.exports=be}),ct=o((d,g)=>{var _=ge(),C=_.Uint8Array;g.exports=C}),ft=o((d,g)=>{var _=ct();function C(M){var U=new M.constructor(M.byteLength);return new _(U).set(new _(M)),U}g.exports=C}),Mt=o((d,g)=>{var _=ft();function C(M,U){var te=U?_(M.buffer):M.buffer;return new M.constructor(te,M.byteOffset,M.length)}g.exports=C}),it=o((d,g)=>{function _(C,M){var U=-1,te=C.length;for(M||(M=Array(te));++U<te;)M[U]=C[U];return M}g.exports=_}),jt=o((d,g)=>{var _=V(),C=Object.create,M=function(){function U(){}return function(te){if(!_(te))return{};if(C)return C(te);U.prototype=te;var ae=new U;return U.prototype=void 0,ae}}();g.exports=M}),hn=o((d,g)=>{function _(C,M){return function(U){return C(M(U))}}g.exports=_}),Ze=o((d,g)=>{var _=hn(),C=_(Object.getPrototypeOf,Object);g.exports=C}),lt=o((d,g)=>{var _=Object.prototype;function C(M){var U=M&&M.constructor,te=typeof U=="function"&&U.prototype||_;return M===te}g.exports=C}),rt=o((d,g)=>{var _=jt(),C=Ze(),M=lt();function U(te){return typeof te.constructor=="function"&&!M(te)?_(C(te)):{}}g.exports=U}),$t=o((d,g)=>{function _(C){return C!=null&&typeof C=="object"}g.exports=_}),Qt=o((d,g)=>{var _=J(),C=$t(),M="[object Arguments]";function U(te){return C(te)&&_(te)==M}g.exports=U}),Pn=o((d,g)=>{var _=Qt(),C=$t(),M=Object.prototype,U=M.hasOwnProperty,te=M.propertyIsEnumerable,ae=_(function(){return arguments}())?_:function(be){return C(be)&&U.call(be,"callee")&&!te.call(be,"callee")};g.exports=ae}),wn=o((d,g)=>{var _=Array.isArray;g.exports=_}),xn=o((d,g)=>{var _=9007199254740991;function C(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}g.exports=C}),$n=o((d,g)=>{var _=B(),C=xn();function M(U){return U!=null&&C(U.length)&&!_(U)}g.exports=M}),en=o((d,g)=>{var _=$n(),C=$t();function M(U){return C(U)&&_(U)}g.exports=M}),_n=o((d,g)=>{function _(){return!1}g.exports=_}),Cn=o((d,g)=>{var _=ge(),C=_n(),M=typeof d=="object"&&d&&!d.nodeType&&d,U=M&&typeof g=="object"&&g&&!g.nodeType&&g,te=U&&U.exports===M,ae=te?_.Buffer:void 0,be=ae?ae.isBuffer:void 0,Ce=be||C;g.exports=Ce}),qn=o((d,g)=>{var _=J(),C=Ze(),M=$t(),U="[object Object]",te=Function.prototype,ae=Object.prototype,be=te.toString,Ce=ae.hasOwnProperty,tt=be.call(Object);function We(_t){if(!M(_t)||_(_t)!=U)return!1;var It=C(_t);if(It===null)return!0;var nn=Ce.call(It,"constructor")&&It.constructor;return typeof nn=="function"&&nn instanceof nn&&be.call(nn)==tt}g.exports=We}),nr=o((d,g)=>{var _=J(),C=xn(),M=$t(),U="[object Arguments]",te="[object Array]",ae="[object Boolean]",be="[object Date]",Ce="[object Error]",tt="[object Function]",We="[object Map]",_t="[object Number]",It="[object Object]",nn="[object RegExp]",yn="[object Set]",Ln="[object String]",lr="[object WeakMap]",et="[object ArrayBuffer]",st="[object DataView]",gt="[object Float32Array]",zt="[object Float64Array]",Ct="[object Int8Array]",Bt="[object Int16Array]",we="[object Int32Array]",ke="[object Uint8Array]",je="[object Uint8ClampedArray]",Fe="[object Uint16Array]",Ue="[object Uint32Array]",He={};He[gt]=He[zt]=He[Ct]=He[Bt]=He[we]=He[ke]=He[je]=He[Fe]=He[Ue]=!0,He[U]=He[te]=He[et]=He[ae]=He[st]=He[be]=He[Ce]=He[tt]=He[We]=He[_t]=He[It]=He[nn]=He[yn]=He[Ln]=He[lr]=!1;function dt(ht){return M(ht)&&C(ht.length)&&!!He[_(ht)]}g.exports=dt}),rr=o((d,g)=>{function _(C){return function(M){return C(M)}}g.exports=_}),Jn=o((d,g)=>{var _=ne(),C=typeof d=="object"&&d&&!d.nodeType&&d,M=C&&typeof g=="object"&&g&&!g.nodeType&&g,U=M&&M.exports===C,te=U&&_.process,ae=function(){try{var be=M&&M.require&&M.require("util").types;return be||te&&te.binding&&te.binding("util")}catch{}}();g.exports=ae}),Mr=o((d,g)=>{var _=nr(),C=rr(),M=Jn(),U=M&&M.isTypedArray,te=U?C(U):_;g.exports=te}),as=o((d,g)=>{function _(C,M){if(!(M==="constructor"&&typeof C[M]=="function")&&M!="__proto__")return C[M]}g.exports=_}),ji=o((d,g)=>{var _=$e(),C=h(),M=Object.prototype,U=M.hasOwnProperty;function te(ae,be,Ce){var tt=ae[be];(!(U.call(ae,be)&&C(tt,Ce))||Ce===void 0&&!(be in ae))&&_(ae,be,Ce)}g.exports=te}),ro=o((d,g)=>{var _=ji(),C=$e();function M(U,te,ae,be){var Ce=!ae;ae||(ae={});for(var tt=-1,We=te.length;++tt<We;){var _t=te[tt],It=be?be(ae[_t],U[_t],_t,ae,U):void 0;It===void 0&&(It=U[_t]),Ce?C(ae,_t,It):_(ae,_t,It)}return ae}g.exports=M}),Cs=o((d,g)=>{function _(C,M){for(var U=-1,te=Array(C);++U<C;)te[U]=M(U);return te}g.exports=_}),ot=o((d,g)=>{var _=9007199254740991,C=/^(?:0|[1-9]\d*)$/;function M(U,te){var ae=typeof U;return te=te??_,!!te&&(ae=="number"||ae!="symbol"&&C.test(U))&&U>-1&&U%1==0&&U<te}g.exports=M}),nt=o((d,g)=>{var _=Cs(),C=Pn(),M=wn(),U=Cn(),te=ot(),ae=Mr(),be=Object.prototype,Ce=be.hasOwnProperty;function tt(We,_t){var It=M(We),nn=!It&&C(We),yn=!It&&!nn&&U(We),Ln=!It&&!nn&&!yn&&ae(We),lr=It||nn||yn||Ln,et=lr?_(We.length,String):[],st=et.length;for(var gt in We)(_t||Ce.call(We,gt))&&!(lr&&(gt=="length"||yn&&(gt=="offset"||gt=="parent")||Ln&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||te(gt,st)))&&et.push(gt);return et}g.exports=tt}),Ht=o((d,g)=>{function _(C){var M=[];if(C!=null)for(var U in Object(C))M.push(U);return M}g.exports=_}),kn=o((d,g)=>{var _=V(),C=lt(),M=Ht(),U=Object.prototype,te=U.hasOwnProperty;function ae(be){if(!_(be))return M(be);var Ce=C(be),tt=[];for(var We in be)We=="constructor"&&(Ce||!te.call(be,We))||tt.push(We);return tt}g.exports=ae}),tn=o((d,g)=>{var _=nt(),C=kn(),M=$n();function U(te){return M(te)?_(te,!0):C(te)}g.exports=U}),qt=o((d,g)=>{var _=ro(),C=tn();function M(U){return _(U,C(U))}g.exports=M}),Wt=o((d,g)=>{var _=Je(),C=qe(),M=Mt(),U=it(),te=rt(),ae=Pn(),be=wn(),Ce=en(),tt=Cn(),We=B(),_t=V(),It=qn(),nn=Mr(),yn=as(),Ln=qt();function lr(et,st,gt,zt,Ct,Bt,we){var ke=yn(et,gt),je=yn(st,gt),Fe=we.get(je);if(Fe){_(et,gt,Fe);return}var Ue=Bt?Bt(ke,je,gt+"",et,st,we):void 0,He=Ue===void 0;if(He){var dt=be(je),ht=!dt&&tt(je),yt=!dt&&!ht&&nn(je);Ue=je,dt||ht||yt?be(ke)?Ue=ke:Ce(ke)?Ue=U(ke):ht?(He=!1,Ue=C(je,!0)):yt?(He=!1,Ue=M(je,!0)):Ue=[]:It(je)||ae(je)?(Ue=ke,ae(ke)?Ue=Ln(ke):(!_t(ke)||We(ke))&&(Ue=te(je))):He=!1}He&&(we.set(je,Ue),Ct(Ue,je,zt,Bt,we),we.delete(je)),_(et,gt,Ue)}g.exports=lr}),ir=o((d,g)=>{var _=le(),C=Je(),M=me(),U=Wt(),te=V(),ae=tn(),be=as();function Ce(tt,We,_t,It,nn){tt!==We&&M(We,function(yn,Ln){if(nn||(nn=new _),te(yn))U(tt,We,Ln,_t,Ce,It,nn);else{var lr=It?It(be(tt,Ln),yn,Ln+"",tt,We,nn):void 0;lr===void 0&&(lr=yn),C(tt,Ln,lr)}},ae)}g.exports=Ce}),St=o((d,g)=>{function _(C){return C}g.exports=_}),gn=o((d,g)=>{function _(C,M,U){switch(U.length){case 0:return C.call(M);case 1:return C.call(M,U[0]);case 2:return C.call(M,U[0],U[1]);case 3:return C.call(M,U[0],U[1],U[2])}return C.apply(M,U)}g.exports=_}),Qn=o((d,g)=>{var _=gn(),C=Math.max;function M(U,te,ae){return te=C(te===void 0?U.length-1:te,0),function(){for(var be=arguments,Ce=-1,tt=C(be.length-te,0),We=Array(tt);++Ce<tt;)We[Ce]=be[te+Ce];Ce=-1;for(var _t=Array(te+1);++Ce<te;)_t[Ce]=be[Ce];return _t[te]=ae(We),_(U,this,_t)}}g.exports=M}),ar=o((d,g)=>{function _(C){return function(){return C}}g.exports=_}),ur=o((d,g)=>{var _=ar(),C=ze(),M=St(),U=C?function(te,ae){return C(te,"toString",{configurable:!0,enumerable:!1,value:_(ae),writable:!0})}:M;g.exports=U}),vn=o((d,g)=>{var _=800,C=16,M=Date.now;function U(te){var ae=0,be=0;return function(){var Ce=M(),tt=C-(Ce-be);if(be=Ce,tt>0){if(++ae>=_)return arguments[0]}else ae=0;return te.apply(void 0,arguments)}}g.exports=U}),cn=o((d,g)=>{var _=ur(),C=vn(),M=C(_);g.exports=M}),ri=o((d,g)=>{var _=St(),C=Qn(),M=cn();function U(te,ae){return M(C(te,ae,_),te+"")}g.exports=U}),Li=o((d,g)=>{var _=h(),C=$n(),M=ot(),U=V();function te(ae,be,Ce){if(!U(Ce))return!1;var tt=typeof be;return(tt=="number"?C(Ce)&&M(be,Ce.length):tt=="string"&&be in Ce)?_(Ce[be],ae):!1}g.exports=te}),zi=o((d,g)=>{var _=ri(),C=Li();function M(U){return _(function(te,ae){var be=-1,Ce=ae.length,tt=Ce>1?ae[Ce-1]:void 0,We=Ce>2?ae[2]:void 0;for(tt=U.length>3&&typeof tt=="function"?(Ce--,tt):void 0,We&&C(ae[0],ae[1],We)&&(tt=Ce<3?void 0:tt,Ce=1),te=Object(te);++be<Ce;){var _t=ae[be];_t&&U(te,_t,be,tt)}return te})}g.exports=M}),Fr=o((d,g)=>{var _=ir(),C=zi(),M=C(function(U,te,ae){_(U,te,ae)});g.exports=M}),cr=o((d,g)=>{var _=J(),C=$t(),M="[object Symbol]";function U(te){return typeof te=="symbol"||C(te)&&_(te)==M}g.exports=U}),Xi=o((d,g)=>{var _=wn(),C=cr(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/;function te(ae,be){if(_(ae))return!1;var Ce=typeof ae;return Ce=="number"||Ce=="symbol"||Ce=="boolean"||ae==null||C(ae)?!0:U.test(ae)||!M.test(ae)||be!=null&&ae in Object(be)}g.exports=te}),Ui=o((d,g)=>{var _=ee(),C="Expected a function";function M(U,te){if(typeof U!="function"||te!=null&&typeof te!="function")throw new TypeError(C);var ae=function(){var be=arguments,Ce=te?te.apply(this,be):be[0],tt=ae.cache;if(tt.has(Ce))return tt.get(Ce);var We=U.apply(this,be);return ae.cache=tt.set(Ce,We)||tt,We};return ae.cache=new(M.Cache||_),ae}M.Cache=_,g.exports=M}),Hi=o((d,g)=>{var _=Ui(),C=500;function M(U){var te=_(U,function(be){return ae.size===C&&ae.clear(),be}),ae=te.cache;return te}g.exports=M}),ls=o((d,g)=>{var _=Hi(),C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,U=_(function(te){var ae=[];return te.charCodeAt(0)===46&&ae.push(""),te.replace(C,function(be,Ce,tt,We){ae.push(tt?We.replace(M,"$1"):Ce||be)}),ae});g.exports=U}),vs=o((d,g)=>{function _(C,M){for(var U=-1,te=C==null?0:C.length,ae=Array(te);++U<te;)ae[U]=M(C[U],U,C);return ae}g.exports=_}),Es=o((d,g)=>{var _=pe(),C=vs(),M=wn(),U=cr(),te=_?_.prototype:void 0,ae=te?te.toString:void 0;function be(Ce){if(typeof Ce=="string")return Ce;if(M(Ce))return C(Ce,be)+"";if(U(Ce))return ae?ae.call(Ce):"";var tt=Ce+"";return tt=="0"&&1/Ce==-1/0?"-0":tt}g.exports=be}),Rs=o((d,g)=>{var _=Es();function C(M){return M==null?"":_(M)}g.exports=C}),Fs=o((d,g)=>{var _=wn(),C=Xi(),M=ls(),U=Rs();function te(ae,be){return _(ae)?ae:C(ae,be)?[ae]:M(U(ae))}g.exports=te}),Ji=o((d,g)=>{var _=cr();function C(M){if(typeof M=="string"||_(M))return M;var U=M+"";return U=="0"&&1/M==-1/0?"-0":U}g.exports=C}),Wr=o((d,g)=>{var _=Fs(),C=Ji();function M(U,te){te=_(te,U);for(var ae=0,be=te.length;U!=null&&ae<be;)U=U[C(te[ae++])];return ae&&ae==be?U:void 0}g.exports=M}),ys=o((d,g)=>{var _=Wr();function C(M,U,te){var ae=M==null?void 0:_(M,U);return ae===void 0?te:ae}g.exports=C}),jr=o((d,g)=>{(function(_,C){typeof d=="object"&&typeof g<"u"?g.exports=C():(_=_||self).RBush=C()})(d,function(){function _(et,st,gt,zt,Ct){(function Bt(we,ke,je,Fe,Ue){for(;Fe>je;){if(Fe-je>600){var He=Fe-je+1,dt=ke-je+1,ht=Math.log(He),yt=.5*Math.exp(2*ht/3),At=.5*Math.sqrt(ht*yt*(He-yt)/He)*(dt-He/2<0?-1:1),Tt=Math.max(je,Math.floor(ke-dt*yt/He+At)),on=Math.min(Fe,Math.floor(ke+(He-dt)*yt/He+At));Bt(we,ke,Tt,on,Ue)}var Fn=we[ke],zn=je,Zn=Fe;for(C(we,je,ke),Ue(we[Fe],Fn)>0&&C(we,je,Fe);zn<Zn;){for(C(we,zn,Zn),zn++,Zn--;Ue(we[zn],Fn)<0;)zn++;for(;Ue(we[Zn],Fn)>0;)Zn--}Ue(we[je],Fn)===0?C(we,je,Zn):C(we,++Zn,Fe),Zn<=ke&&(je=Zn+1),ke<=Zn&&(Fe=Zn-1)}})(et,st,gt||0,zt||et.length-1,Ct||M)}function C(et,st,gt){var zt=et[st];et[st]=et[gt],et[gt]=zt}function M(et,st){return et<st?-1:et>st?1:0}var U=function(et){et===void 0&&(et=9),this._maxEntries=Math.max(4,et),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function te(et,st,gt){if(!gt)return st.indexOf(et);for(var zt=0;zt<st.length;zt++)if(gt(et,st[zt]))return zt;return-1}function ae(et,st){be(et,0,et.children.length,st,et)}function be(et,st,gt,zt,Ct){Ct||(Ct=Ln(null)),Ct.minX=1/0,Ct.minY=1/0,Ct.maxX=-1/0,Ct.maxY=-1/0;for(var Bt=st;Bt<gt;Bt++){var we=et.children[Bt];Ce(Ct,et.leaf?zt(we):we)}return Ct}function Ce(et,st){return et.minX=Math.min(et.minX,st.minX),et.minY=Math.min(et.minY,st.minY),et.maxX=Math.max(et.maxX,st.maxX),et.maxY=Math.max(et.maxY,st.maxY),et}function tt(et,st){return et.minX-st.minX}function We(et,st){return et.minY-st.minY}function _t(et){return(et.maxX-et.minX)*(et.maxY-et.minY)}function It(et){return et.maxX-et.minX+(et.maxY-et.minY)}function nn(et,st){return et.minX<=st.minX&&et.minY<=st.minY&&st.maxX<=et.maxX&&st.maxY<=et.maxY}function yn(et,st){return st.minX<=et.maxX&&st.minY<=et.maxY&&st.maxX>=et.minX&&st.maxY>=et.minY}function Ln(et){return{children:et,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lr(et,st,gt,zt,Ct){for(var Bt=[st,gt];Bt.length;)if(!((gt=Bt.pop())-(st=Bt.pop())<=zt)){var we=st+Math.ceil((gt-st)/zt/2)*zt;_(et,we,st,gt,Ct),Bt.push(st,we,we,gt)}}return U.prototype.all=function(){return this._all(this.data,[])},U.prototype.search=function(et){var st=this.data,gt=[];if(!yn(et,st))return gt;for(var zt=this.toBBox,Ct=[];st;){for(var Bt=0;Bt<st.children.length;Bt++){var we=st.children[Bt],ke=st.leaf?zt(we):we;yn(et,ke)&&(st.leaf?gt.push(we):nn(et,ke)?this._all(we,gt):Ct.push(we))}st=Ct.pop()}return gt},U.prototype.collides=function(et){var st=this.data;if(!yn(et,st))return!1;for(var gt=[];st;){for(var zt=0;zt<st.children.length;zt++){var Ct=st.children[zt],Bt=st.leaf?this.toBBox(Ct):Ct;if(yn(et,Bt)){if(st.leaf||nn(et,Bt))return!0;gt.push(Ct)}}st=gt.pop()}return!1},U.prototype.load=function(et){if(!et||!et.length)return this;if(et.length<this._minEntries){for(var st=0;st<et.length;st++)this.insert(et[st]);return this}var gt=this._build(et.slice(),0,et.length-1,0);if(this.data.children.length)if(this.data.height===gt.height)this._splitRoot(this.data,gt);else{if(this.data.height<gt.height){var zt=this.data;this.data=gt,gt=zt}this._insert(gt,this.data.height-gt.height-1,!0)}else this.data=gt;return this},U.prototype.insert=function(et){return et&&this._insert(et,this.data.height-1),this},U.prototype.clear=function(){return this.data=Ln([]),this},U.prototype.remove=function(et,st){if(!et)return this;for(var gt,zt,Ct,Bt=this.data,we=this.toBBox(et),ke=[],je=[];Bt||ke.length;){if(Bt||(Bt=ke.pop(),zt=ke[ke.length-1],gt=je.pop(),Ct=!0),Bt.leaf){var Fe=te(et,Bt.children,st);if(Fe!==-1)return Bt.children.splice(Fe,1),ke.push(Bt),this._condense(ke),this}Ct||Bt.leaf||!nn(Bt,we)?zt?(gt++,Bt=zt.children[gt],Ct=!1):Bt=null:(ke.push(Bt),je.push(gt),gt=0,zt=Bt,Bt=Bt.children[0])}return this},U.prototype.toBBox=function(et){return et},U.prototype.compareMinX=function(et,st){return et.minX-st.minX},U.prototype.compareMinY=function(et,st){return et.minY-st.minY},U.prototype.toJSON=function(){return this.data},U.prototype.fromJSON=function(et){return this.data=et,this},U.prototype._all=function(et,st){for(var gt=[];et;)et.leaf?st.push.apply(st,et.children):gt.push.apply(gt,et.children),et=gt.pop();return st},U.prototype._build=function(et,st,gt,zt){var Ct,Bt=gt-st+1,we=this._maxEntries;if(Bt<=we)return ae(Ct=Ln(et.slice(st,gt+1)),this.toBBox),Ct;zt||(zt=Math.ceil(Math.log(Bt)/Math.log(we)),we=Math.ceil(Bt/Math.pow(we,zt-1))),(Ct=Ln([])).leaf=!1,Ct.height=zt;var ke=Math.ceil(Bt/we),je=ke*Math.ceil(Math.sqrt(we));lr(et,st,gt,je,this.compareMinX);for(var Fe=st;Fe<=gt;Fe+=je){var Ue=Math.min(Fe+je-1,gt);lr(et,Fe,Ue,ke,this.compareMinY);for(var He=Fe;He<=Ue;He+=ke){var dt=Math.min(He+ke-1,Ue);Ct.children.push(this._build(et,He,dt,zt-1))}}return ae(Ct,this.toBBox),Ct},U.prototype._chooseSubtree=function(et,st,gt,zt){for(;zt.push(st),!st.leaf&&zt.length-1!==gt;){for(var Ct=1/0,Bt=1/0,we=void 0,ke=0;ke<st.children.length;ke++){var je=st.children[ke],Fe=_t(je),Ue=(He=et,dt=je,(Math.max(dt.maxX,He.maxX)-Math.min(dt.minX,He.minX))*(Math.max(dt.maxY,He.maxY)-Math.min(dt.minY,He.minY))-Fe);Ue<Bt?(Bt=Ue,Ct=Fe<Ct?Fe:Ct,we=je):Ue===Bt&&Fe<Ct&&(Ct=Fe,we=je)}st=we||st.children[0]}var He,dt;return st},U.prototype._insert=function(et,st,gt){var zt=gt?et:this.toBBox(et),Ct=[],Bt=this._chooseSubtree(zt,this.data,st,Ct);for(Bt.children.push(et),Ce(Bt,zt);st>=0&&Ct[st].children.length>this._maxEntries;)this._split(Ct,st),st--;this._adjustParentBBoxes(zt,Ct,st)},U.prototype._split=function(et,st){var gt=et[st],zt=gt.children.length,Ct=this._minEntries;this._chooseSplitAxis(gt,Ct,zt);var Bt=this._chooseSplitIndex(gt,Ct,zt),we=Ln(gt.children.splice(Bt,gt.children.length-Bt));we.height=gt.height,we.leaf=gt.leaf,ae(gt,this.toBBox),ae(we,this.toBBox),st?et[st-1].children.push(we):this._splitRoot(gt,we)},U.prototype._splitRoot=function(et,st){this.data=Ln([et,st]),this.data.height=et.height+1,this.data.leaf=!1,ae(this.data,this.toBBox)},U.prototype._chooseSplitIndex=function(et,st,gt){for(var zt,Ct,Bt,we,ke,je,Fe,Ue=1/0,He=1/0,dt=st;dt<=gt-st;dt++){var ht=be(et,0,dt,this.toBBox),yt=be(et,dt,gt,this.toBBox),At=(Ct=ht,Bt=yt,we=void 0,ke=void 0,je=void 0,Fe=void 0,we=Math.max(Ct.minX,Bt.minX),ke=Math.max(Ct.minY,Bt.minY),je=Math.min(Ct.maxX,Bt.maxX),Fe=Math.min(Ct.maxY,Bt.maxY),Math.max(0,je-we)*Math.max(0,Fe-ke)),Tt=_t(ht)+_t(yt);At<Ue?(Ue=At,zt=dt,He=Tt<He?Tt:He):At===Ue&&Tt<He&&(He=Tt,zt=dt)}return zt||gt-st},U.prototype._chooseSplitAxis=function(et,st,gt){var zt=et.leaf?this.compareMinX:tt,Ct=et.leaf?this.compareMinY:We;this._allDistMargin(et,st,gt,zt)<this._allDistMargin(et,st,gt,Ct)&&et.children.sort(zt)},U.prototype._allDistMargin=function(et,st,gt,zt){et.children.sort(zt);for(var Ct=this.toBBox,Bt=be(et,0,st,Ct),we=be(et,gt-st,gt,Ct),ke=It(Bt)+It(we),je=st;je<gt-st;je++){var Fe=et.children[je];Ce(Bt,et.leaf?Ct(Fe):Fe),ke+=It(Bt)}for(var Ue=gt-st-1;Ue>=st;Ue--){var He=et.children[Ue];Ce(we,et.leaf?Ct(He):He),ke+=It(we)}return ke},U.prototype._adjustParentBBoxes=function(et,st,gt){for(var zt=gt;zt>=0;zt--)Ce(st[zt],et)},U.prototype._condense=function(et){for(var st=et.length-1,gt=void 0;st>=0;st--)et[st].children.length===0?st>0?(gt=et[st-1].children).splice(gt.indexOf(et[st]),1):this.clear():ae(et[st],this.toBBox)},U})}),fr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0}),d.earthRadius=63710088e-1,d.factors={centimeters:d.earthRadius*100,centimetres:d.earthRadius*100,degrees:d.earthRadius/111325,feet:d.earthRadius*3.28084,inches:d.earthRadius*39.37,kilometers:d.earthRadius/1e3,kilometres:d.earthRadius/1e3,meters:d.earthRadius,metres:d.earthRadius,miles:d.earthRadius/1609.344,millimeters:d.earthRadius*1e3,millimetres:d.earthRadius*1e3,nauticalmiles:d.earthRadius/1852,radians:1,yards:d.earthRadius*1.0936},d.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/d.earthRadius,yards:1.0936133},d.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Fe,Ue,He){He===void 0&&(He={});var dt={type:"Feature"};return(He.id===0||He.id)&&(dt.id=He.id),He.bbox&&(dt.bbox=He.bbox),dt.properties=Ue||{},dt.geometry=Fe,dt}d.feature=g;function _(Fe,Ue,He){switch(Fe){case"Point":return C(Ue).geometry;case"LineString":return ae(Ue).geometry;case"Polygon":return U(Ue).geometry;case"MultiPoint":return We(Ue).geometry;case"MultiLineString":return tt(Ue).geometry;case"MultiPolygon":return _t(Ue).geometry;default:throw new Error(Fe+" is invalid")}}d.geometry=_;function C(Fe,Ue,He){if(He===void 0&&(He={}),!Fe)throw new Error("coordinates is required");if(!Array.isArray(Fe))throw new Error("coordinates must be an Array");if(Fe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bt(Fe[0])||!Bt(Fe[1]))throw new Error("coordinates must contain numbers");var dt={type:"Point",coordinates:Fe};return g(dt,Ue,He)}d.point=C;function M(Fe,Ue,He){return He===void 0&&(He={}),Ce(Fe.map(function(dt){return C(dt,Ue)}),He)}d.points=M;function U(Fe,Ue,He){He===void 0&&(He={});for(var dt=0,ht=Fe;dt<ht.length;dt++){var yt=ht[dt];if(yt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var At=0;At<yt[yt.length-1].length;At++)if(yt[yt.length-1][At]!==yt[0][At])throw new Error("First and last Position are not equivalent.")}var Tt={type:"Polygon",coordinates:Fe};return g(Tt,Ue,He)}d.polygon=U;function te(Fe,Ue,He){return He===void 0&&(He={}),Ce(Fe.map(function(dt){return U(dt,Ue)}),He)}d.polygons=te;function ae(Fe,Ue,He){if(He===void 0&&(He={}),Fe.length<2)throw new Error("coordinates must be an array of two or more positions");var dt={type:"LineString",coordinates:Fe};return g(dt,Ue,He)}d.lineString=ae;function be(Fe,Ue,He){return He===void 0&&(He={}),Ce(Fe.map(function(dt){return ae(dt,Ue)}),He)}d.lineStrings=be;function Ce(Fe,Ue){Ue===void 0&&(Ue={});var He={type:"FeatureCollection"};return Ue.id&&(He.id=Ue.id),Ue.bbox&&(He.bbox=Ue.bbox),He.features=Fe,He}d.featureCollection=Ce;function tt(Fe,Ue,He){He===void 0&&(He={});var dt={type:"MultiLineString",coordinates:Fe};return g(dt,Ue,He)}d.multiLineString=tt;function We(Fe,Ue,He){He===void 0&&(He={});var dt={type:"MultiPoint",coordinates:Fe};return g(dt,Ue,He)}d.multiPoint=We;function _t(Fe,Ue,He){He===void 0&&(He={});var dt={type:"MultiPolygon",coordinates:Fe};return g(dt,Ue,He)}d.multiPolygon=_t;function It(Fe,Ue,He){He===void 0&&(He={});var dt={type:"GeometryCollection",geometries:Fe};return g(dt,Ue,He)}d.geometryCollection=It;function nn(Fe,Ue){if(Ue===void 0&&(Ue=0),Ue&&!(Ue>=0))throw new Error("precision must be a positive number");var He=Math.pow(10,Ue||0);return Math.round(Fe*He)/He}d.round=nn;function yn(Fe,Ue){Ue===void 0&&(Ue="kilometers");var He=d.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Fe*He}d.radiansToLength=yn;function Ln(Fe,Ue){Ue===void 0&&(Ue="kilometers");var He=d.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Fe/He}d.lengthToRadians=Ln;function lr(Fe,Ue){return st(Ln(Fe,Ue))}d.lengthToDegrees=lr;function et(Fe){var Ue=Fe%360;return Ue<0&&(Ue+=360),Ue}d.bearingToAzimuth=et;function st(Fe){var Ue=Fe%(2*Math.PI);return Ue*180/Math.PI}d.radiansToDegrees=st;function gt(Fe){var Ue=Fe%360;return Ue*Math.PI/180}d.degreesToRadians=gt;function zt(Fe,Ue,He){if(Ue===void 0&&(Ue="kilometers"),He===void 0&&(He="kilometers"),!(Fe>=0))throw new Error("length must be a positive number");return yn(Ln(Fe,Ue),He)}d.convertLength=zt;function Ct(Fe,Ue,He){if(Ue===void 0&&(Ue="meters"),He===void 0&&(He="kilometers"),!(Fe>=0))throw new Error("area must be a positive number");var dt=d.areaFactors[Ue];if(!dt)throw new Error("invalid original units");var ht=d.areaFactors[He];if(!ht)throw new Error("invalid final units");return Fe/dt*ht}d.convertArea=Ct;function Bt(Fe){return!isNaN(Fe)&&Fe!==null&&!Array.isArray(Fe)}d.isNumber=Bt;function we(Fe){return!!Fe&&Fe.constructor===Object}d.isObject=we;function ke(Fe){if(!Fe)throw new Error("bbox is required");if(!Array.isArray(Fe))throw new Error("bbox must be an Array");if(Fe.length!==4&&Fe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Fe.forEach(function(Ue){if(!Bt(Ue))throw new Error("bbox must only contain numbers")})}d.validateBBox=ke;function je(Fe){if(!Fe)throw new Error("id is required");if(["string","number"].indexOf(typeof Fe)===-1)throw new Error("id must be a number or a string")}d.validateId=je}),dr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var g=fr();function _(st,gt,zt){if(st!==null)for(var Ct,Bt,we,ke,je,Fe,Ue,He=0,dt=0,ht,yt=st.type,At=yt==="FeatureCollection",Tt=yt==="Feature",on=At?st.features.length:1,Fn=0;Fn<on;Fn++){Ue=At?st.features[Fn].geometry:Tt?st.geometry:st,ht=Ue?Ue.type==="GeometryCollection":!1,je=ht?Ue.geometries.length:1;for(var zn=0;zn<je;zn++){var Zn=0,si=0;if(ke=ht?Ue.geometries[zn]:Ue,ke!==null){Fe=ke.coordinates;var yi=ke.type;switch(He=zt&&(yi==="Polygon"||yi==="MultiPolygon")?1:0,yi){case null:break;case"Point":if(gt(Fe,dt,Fn,Zn,si)===!1)return!1;dt++,Zn++;break;case"LineString":case"MultiPoint":for(Ct=0;Ct<Fe.length;Ct++){if(gt(Fe[Ct],dt,Fn,Zn,si)===!1)return!1;dt++,yi==="MultiPoint"&&Zn++}yi==="LineString"&&Zn++;break;case"Polygon":case"MultiLineString":for(Ct=0;Ct<Fe.length;Ct++){for(Bt=0;Bt<Fe[Ct].length-He;Bt++){if(gt(Fe[Ct][Bt],dt,Fn,Zn,si)===!1)return!1;dt++}yi==="MultiLineString"&&Zn++,yi==="Polygon"&&si++}yi==="Polygon"&&Zn++;break;case"MultiPolygon":for(Ct=0;Ct<Fe.length;Ct++){for(si=0,Bt=0;Bt<Fe[Ct].length;Bt++){for(we=0;we<Fe[Ct][Bt].length-He;we++){if(gt(Fe[Ct][Bt][we],dt,Fn,Zn,si)===!1)return!1;dt++}si++}Zn++}break;case"GeometryCollection":for(Ct=0;Ct<ke.geometries.length;Ct++)if(_(ke.geometries[Ct],gt,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function C(st,gt,zt,Ct){var Bt=zt;return _(st,function(we,ke,je,Fe,Ue){ke===0&&zt===void 0?Bt=we:Bt=gt(Bt,we,ke,je,Fe,Ue)},Ct),Bt}function M(st,gt){var zt;switch(st.type){case"FeatureCollection":for(zt=0;zt<st.features.length&&gt(st.features[zt].properties,zt)!==!1;zt++);break;case"Feature":gt(st.properties,0);break}}function U(st,gt,zt){var Ct=zt;return M(st,function(Bt,we){we===0&&zt===void 0?Ct=Bt:Ct=gt(Ct,Bt,we)}),Ct}function te(st,gt){if(st.type==="Feature")gt(st,0);else if(st.type==="FeatureCollection")for(var zt=0;zt<st.features.length&&gt(st.features[zt],zt)!==!1;zt++);}function ae(st,gt,zt){var Ct=zt;return te(st,function(Bt,we){we===0&&zt===void 0?Ct=Bt:Ct=gt(Ct,Bt,we)}),Ct}function be(st){var gt=[];return _(st,function(zt){gt.push(zt)}),gt}function Ce(st,gt){var zt,Ct,Bt,we,ke,je,Fe,Ue,He,dt,ht=0,yt=st.type==="FeatureCollection",At=st.type==="Feature",Tt=yt?st.features.length:1;for(zt=0;zt<Tt;zt++){for(je=yt?st.features[zt].geometry:At?st.geometry:st,Ue=yt?st.features[zt].properties:At?st.properties:{},He=yt?st.features[zt].bbox:At?st.bbox:void 0,dt=yt?st.features[zt].id:At?st.id:void 0,Fe=je?je.type==="GeometryCollection":!1,ke=Fe?je.geometries.length:1,Bt=0;Bt<ke;Bt++){if(we=Fe?je.geometries[Bt]:je,we===null){if(gt(null,ht,Ue,He,dt)===!1)return!1;continue}switch(we.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(gt(we,ht,Ue,He,dt)===!1)return!1;break}case"GeometryCollection":{for(Ct=0;Ct<we.geometries.length;Ct++)if(gt(we.geometries[Ct],ht,Ue,He,dt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function tt(st,gt,zt){var Ct=zt;return Ce(st,function(Bt,we,ke,je,Fe){we===0&&zt===void 0?Ct=Bt:Ct=gt(Ct,Bt,we,ke,je,Fe)}),Ct}function We(st,gt){Ce(st,function(zt,Ct,Bt,we,ke){var je=zt===null?null:zt.type;switch(je){case null:case"Point":case"LineString":case"Polygon":return gt(g.feature(zt,Bt,{bbox:we,id:ke}),Ct,0)===!1?!1:void 0}var Fe;switch(je){case"MultiPoint":Fe="Point";break;case"MultiLineString":Fe="LineString";break;case"MultiPolygon":Fe="Polygon";break}for(var Ue=0;Ue<zt.coordinates.length;Ue++){var He=zt.coordinates[Ue],dt={type:Fe,coordinates:He};if(gt(g.feature(dt,Bt),Ct,Ue)===!1)return!1}})}function _t(st,gt,zt){var Ct=zt;return We(st,function(Bt,we,ke){we===0&&ke===0&&zt===void 0?Ct=Bt:Ct=gt(Ct,Bt,we,ke)}),Ct}function It(st,gt){We(st,function(zt,Ct,Bt){var we=0;if(zt.geometry){var ke=zt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var je,Fe=0,Ue=0,He=0;if(_(zt,function(dt,ht,yt,At,Tt){if(je===void 0||Ct>Fe||At>Ue||Tt>He){je=dt,Fe=Ct,Ue=At,He=Tt,we=0;return}var on=g.lineString([je,dt],zt.properties);if(gt(on,Ct,Bt,Tt,we)===!1)return!1;we++,je=dt})===!1)return!1}}})}function nn(st,gt,zt){var Ct=zt,Bt=!1;return It(st,function(we,ke,je,Fe,Ue){Bt===!1&&zt===void 0?Ct=we:Ct=gt(Ct,we,ke,je,Fe,Ue),Bt=!0}),Ct}function yn(st,gt){if(!st)throw new Error("geojson is required");We(st,function(zt,Ct,Bt){if(zt.geometry!==null){var we=zt.geometry.type,ke=zt.geometry.coordinates;switch(we){case"LineString":if(gt(zt,Ct,Bt,0,0)===!1)return!1;break;case"Polygon":for(var je=0;je<ke.length;je++)if(gt(g.lineString(ke[je],zt.properties),Ct,Bt,je)===!1)return!1;break}}})}function Ln(st,gt,zt){var Ct=zt;return yn(st,function(Bt,we,ke,je){we===0&&zt===void 0?Ct=Bt:Ct=gt(Ct,Bt,we,ke,je)}),Ct}function lr(st,gt){if(gt=gt||{},!g.isObject(gt))throw new Error("options is invalid");var zt=gt.featureIndex||0,Ct=gt.multiFeatureIndex||0,Bt=gt.geometryIndex||0,we=gt.segmentIndex||0,ke=gt.properties,je;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,je=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,je=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":je=st;break;default:throw new Error("geojson is invalid")}if(je===null)return null;var Fe=je.coordinates;switch(je.type){case"Point":case"MultiPoint":return null;case"LineString":return we<0&&(we=Fe.length+we-1),g.lineString([Fe[we],Fe[we+1]],ke,gt);case"Polygon":return Bt<0&&(Bt=Fe.length+Bt),we<0&&(we=Fe[Bt].length+we-1),g.lineString([Fe[Bt][we],Fe[Bt][we+1]],ke,gt);case"MultiLineString":return Ct<0&&(Ct=Fe.length+Ct),we<0&&(we=Fe[Ct].length+we-1),g.lineString([Fe[Ct][we],Fe[Ct][we+1]],ke,gt);case"MultiPolygon":return Ct<0&&(Ct=Fe.length+Ct),Bt<0&&(Bt=Fe[Ct].length+Bt),we<0&&(we=Fe[Ct][Bt].length-we-1),g.lineString([Fe[Ct][Bt][we],Fe[Ct][Bt][we+1]],ke,gt)}throw new Error("geojson is invalid")}function et(st,gt){if(gt=gt||{},!g.isObject(gt))throw new Error("options is invalid");var zt=gt.featureIndex||0,Ct=gt.multiFeatureIndex||0,Bt=gt.geometryIndex||0,we=gt.coordIndex||0,ke=gt.properties,je;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,je=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,je=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":je=st;break;default:throw new Error("geojson is invalid")}if(je===null)return null;var Fe=je.coordinates;switch(je.type){case"Point":return g.point(Fe,ke,gt);case"MultiPoint":return Ct<0&&(Ct=Fe.length+Ct),g.point(Fe[Ct],ke,gt);case"LineString":return we<0&&(we=Fe.length+we),g.point(Fe[we],ke,gt);case"Polygon":return Bt<0&&(Bt=Fe.length+Bt),we<0&&(we=Fe[Bt].length+we),g.point(Fe[Bt][we],ke,gt);case"MultiLineString":return Ct<0&&(Ct=Fe.length+Ct),we<0&&(we=Fe[Ct].length+we),g.point(Fe[Ct][we],ke,gt);case"MultiPolygon":return Ct<0&&(Ct=Fe.length+Ct),Bt<0&&(Bt=Fe[Ct].length+Bt),we<0&&(we=Fe[Ct][Bt].length-we),g.point(Fe[Ct][Bt][we],ke,gt)}throw new Error("geojson is invalid")}d.coordAll=be,d.coordEach=_,d.coordReduce=C,d.featureEach=te,d.featureReduce=ae,d.findPoint=et,d.findSegment=lr,d.flattenEach=We,d.flattenReduce=_t,d.geomEach=Ce,d.geomReduce=tt,d.lineEach=yn,d.lineReduce=Ln,d.propEach=M,d.propReduce=U,d.segmentEach=It,d.segmentReduce=nn}),Ti=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var g=dr();function _(C){var M=[1/0,1/0,-1/0,-1/0];return g.coordEach(C,function(U){M[0]>U[0]&&(M[0]=U[0]),M[1]>U[1]&&(M[1]=U[1]),M[2]<U[0]&&(M[2]=U[0]),M[3]<U[1]&&(M[3]=U[1])}),M}_.default=_,d.default=_}),Si=o((d,g)=>{var _=jr(),C=fr(),M=dr(),U=Ti().default,te=M.featureEach;M.coordEach,C.polygon;var ae=C.featureCollection;function be(Ce){var tt=new _(Ce);return tt.insert=function(We){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:U(We),_.prototype.insert.call(this,We)},tt.load=function(We){var _t=[];return Array.isArray(We)?We.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:U(It),_t.push(It)}):te(We,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:U(It),_t.push(It)}),_.prototype.load.call(this,_t)},tt.remove=function(We,_t){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:U(We),_.prototype.remove.call(this,We,_t)},tt.clear=function(){return _.prototype.clear.call(this)},tt.search=function(We){var _t=_.prototype.search.call(this,this.toBBox(We));return ae(_t)},tt.collides=function(We){return _.prototype.collides.call(this,this.toBBox(We))},tt.all=function(){var We=_.prototype.all.call(this);return ae(We)},tt.toJSON=function(){return _.prototype.toJSON.call(this)},tt.fromJSON=function(We){return _.prototype.fromJSON.call(this,We)},tt.toBBox=function(We){var _t;if(We.bbox)_t=We.bbox;else if(Array.isArray(We)&&We.length===4)_t=We;else if(Array.isArray(We)&&We.length===6)_t=[We[0],We[1],We[3],We[4]];else if(We.type==="Feature")_t=U(We);else if(We.type==="FeatureCollection")_t=U(We);else throw new Error("invalid geojson");return{minX:_t[0],minY:_t[1],maxX:_t[2],maxY:_t[3]}},tt}g.exports=be,g.exports.default=be});Array.prototype.findIndex=Array.prototype.findIndex||function(d){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,C=arguments[1],M=0;M<_;M++)if(d.call(C,g[M],M,g))return M;return-1},Array.prototype.find=Array.prototype.find||function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,C=arguments[1],M=0;M<_;M++){var U=g[M];if(d.call(C,U,M,g))return U}},typeof Object.assign!="function"&&(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");d=Object(d);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(d[C]=_[C])}return d}),function(d){d.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(d,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),C=_.length>>>0;if(C===0)return!1;var M=g|0,U=Math.max(M>=0?M:C-Math.abs(M),0);function te(ae,be){return ae===be||typeof ae=="number"&&typeof be=="number"&&isNaN(ae)&&isNaN(be)}for(;U<C;){if(te(_[U],d))return!0;U++}return!1}});var io={version:"2.18.3"},br=l(Fr()),Qr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},rl={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},js={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},zs={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},qu={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},xl={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},ka={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Gi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Qo={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},il={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Io={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},wu={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},sl={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Yu={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},ea={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Aa={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},ol={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Jl={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},bs={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},Pc={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},xu={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},gr={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},_r={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},ta={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Zr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Ku={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Ll={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Sl=sl,na={en:Qr,de:rl,it:js,id:zs,ro:qu,ru:xl,es:ka,nl:Gi,fr:Qo,pt:Sl,pt_br:wu,pt_pt:sl,zh:il,zh_tw:Io,pl:Yu,sv:ea,el:Aa,hu:ol,da:Jl,no:bs,fa:Pc,ua:xu,tr:gr,cz:_r,ja:ta,fi:Zr,ko:Ku,ky:Ll},al={_globalEditModeEnabled:!1,enableGlobalEditMode(d){let g={...d};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(d=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(d)},handleLayerAdditionInGlobalEditMode(){let d=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in d){let _=d[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:d}){this._addedLayersEdit[L.stamp(d)]=d},_isRelevantForEdit(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowEditing}},Zu=al,Ql={_globalDragModeEnabled:!1,enableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},d.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,d.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let d=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in d){let _=d[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:d}){this._addedLayersDrag[L.stamp(d)]=d},_isRelevantForDrag(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.draggable}},vr=Ql,Or={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(d=>{this._isRelevantForRemoval(d)&&(d.pm.enabled()&&d.pm.disable(),d.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(d=>{d.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(d){let g=d.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let d=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in d){let _=d[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:d}){this._addedLayersRemoval[L.stamp(d)]=d}},ll=Or,Mc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{this._isRelevantForRotate(d)&&d.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{d.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(d){return d.pm&&d instanceof L.Polyline&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let d=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in d){let _=d[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:d}){this._addedLayersRotate[L.stamp(d)]=d}},eu=Mc,Lu=l(Fr()),Cl={_fireDrawStart(d="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},d,g)},_fireDrawEnd(d="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},d,g)},_fireCreate(d,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:d,layer:d},g,_)},_fireCenterPlaced(d="Draw",g={}){let _=d==="Draw"?this._layer:void 0,C=d!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:C,latlng:this._layer.getLatLng()},d,g)},_fireCut(d,g,_,C="Draw",M={}){this.__fire(d,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},C,M)},_fireEdit(d=this._layer,g="Edit",_={}){this.__fire(d,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(d="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},d,g)},_fireDisable(d="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},d,g)},_fireUpdate(d="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},d,g)},_fireMarkerDragStart(d,g=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g},_,C)},_fireMarkerDrag(d,g=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g},_,C)},_fireMarkerDragEnd(d,g=void 0,_=void 0,C="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g,intersectionReset:_},C,M)},_fireDragStart(d="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},d,g)},_fireDrag(d,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...d,shape:this.getShape()},g,_)},_fireDragEnd(d="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},d,g)},_fireDragEnable(d="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},d,g)},_fireDragDisable(d="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},d,g)},_fireRemove(d,g=d,_="Edit",C={}){this.__fire(d,"pm:remove",{layer:g,shape:this.getShape()},_,C)},_fireVertexAdded(d,g,_,C="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:d,indexPath:g,latlng:_,shape:this.getShape()},C,M)},_fireVertexRemoved(d,g,_="Edit",C={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:d,indexPath:g,shape:this.getShape()},_,C)},_fireVertexClick(d,g,_="Edit",C={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:d,indexPath:g,shape:this.getShape()},_,C)},_fireIntersect(d,g=this._layer,_="Edit",C={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:d,shape:this.getShape()},_,C)},_fireLayerReset(d,g,_="Edit",C={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:d,indexPath:g,shape:this.getShape()},_,C)},_fireChange(d,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:d,shape:this.getShape()},g,_)},_fireTextChange(d,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:d,shape:this.getShape()},g,_)},_fireTextFocus(d="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},d,g)},_fireTextBlur(d="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},d,g)},_fireSnapDrag(d,g,_="Snapping",C={}){this.__fire(d,"pm:snapdrag",g,_,C)},_fireSnap(d,g,_="Snapping",C={}){this.__fire(d,"pm:snap",g,_,C)},_fireUnsnap(d,g,_="Snapping",C={}){this.__fire(d,"pm:unsnap",g,_,C)},_fireRotationEnable(d,g,_="Rotation",C={}){this.__fire(d,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,C)},_fireRotationDisable(d,g="Rotation",_={}){this.__fire(d,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(d,g,_="Rotation",C={}){this.__fire(d,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,C)},_fireRotation(d,g,_,C=this._rotationLayer,M="Rotation",U={}){this.__fire(d,"pm:rotate",{layer:C,helpLayer:this._layer,startAngle:this._startAngle,angle:C.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:C.getLatLngs()},M,U)},_fireRotationEnd(d,g,_,C="Rotation",M={}){this.__fire(d,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},C,M)},_fireActionClick(d,g,_,C="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:d.text,action:d,btnName:g,button:_},C,M)},_fireButtonClick(d,g,_="Toolbar",C={}){this.__fire(this._map,"pm:buttonclick",{btnName:d,button:g},_,C)},_fireLangChange(d,g,_,C,M="Global",U={}){this.__fire(this.map,"pm:langchange",{oldLang:d,activeLang:g,fallback:_,translations:C},M,U)},_fireGlobalDragModeToggled(d,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:d,map:this.map},g,_)},_fireGlobalEditModeToggled(d,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:d,map:this.map},g,_)},_fireGlobalRemovalModeToggled(d,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:d,map:this.map},g,_)},_fireGlobalCutModeToggled(d="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},d,g)},_fireGlobalDrawModeToggled(d="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},d,g)},_fireGlobalRotateModeToggled(d="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},d,g)},_fireRemoveLayerGroup(d,g=d,_="Edit",C={}){this.__fire(d,"pm:remove",{layer:g,shape:void 0},_,C)},_fireKeyeventEvent(d,g,_,C="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:d,eventType:g,focusOn:_},C,M)},__fire(d,g,_,C,M={}){_=(0,Lu.default)(_,M,{source:C}),L.PM.Utils._fireEvent(d,g,_)}},tu=Cl,Su=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(d){this.map=d,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),d.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(d){let g="document";this.map.getContainer().contains(d.target)&&(g="map");let _={event:d,eventType:d.type,focusOn:g};this._lastEvents[d.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(d,d.type,g)},_onBlur(d){d.altKey=!1;let g={event:d,eventType:d.type,focusOn:"document"};this._lastEvents[d.type]=g,this._lastEvents.current=g},getLastKeyEvent(d="current"){return this._lastEvents[d]},isShiftKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.shiftKey},isAltKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.altKey},isCtrlKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.ctrlKey},isMetaKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.metaKey},getPressedKey(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.key}}),zr=Su,Qi=l(ys());function sr(d){let g=L.PM.activeLang;return(0,Qi.default)(na[g],d)||(0,Qi.default)(na.en,d)||d}function es(d){for(let g=0;g<d.length;g+=1){let _=d[g];if(Array.isArray(_)){if(es(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function El(d){return d.reduce((g,_)=>{if(_.length!==0){let C=Array.isArray(_)?El(_):_;Array.isArray(C)?C.length!==0&&g.push(C):g.push(C)}return g},[])}function Ta(d,g,_){let C={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:U,f:te}=C,ae=d.lng,be=d.lat,Ce=_,tt=Math.PI,We=g*tt/180,_t=Math.sin(We),It=Math.cos(We),nn=(1-te)*Math.tan(be*tt/180),yn=1/Math.sqrt(1+nn*nn),Ln=nn*yn,lr=Math.atan2(nn,It),et=yn*_t,st=1-et*et,gt=st*(M*M-U*U)/(U*U),zt=1+gt/16384*(4096+gt*(-768+gt*(320-175*gt))),Ct=gt/1024*(256+gt*(-128+gt*(74-47*gt))),Bt=Ce/(U*zt),we=2*Math.PI,ke,je,Fe;for(;Math.abs(Bt-we)>1e-12;){ke=Math.cos(2*lr+Bt),je=Math.sin(Bt),Fe=Math.cos(Bt);let on=Ct*je*(ke+Ct/4*(Fe*(-1+2*ke*ke)-Ct/6*ke*(-3+4*je*je)*(-3+4*ke*ke)));we=Bt,Bt=Ce/(U*zt)+on}let Ue=Ln*je-yn*Fe*It,He=Math.atan2(Ln*Fe+yn*je*It,(1-te)*Math.sqrt(et*et+Ue*Ue)),dt=Math.atan2(je*_t,yn*Fe-Ln*je*It),ht=te/16*st*(4+te*(4-3*st)),yt=dt-(1-ht)*te*et*(Bt+ht*je*(ke+ht*Fe*(-1+2*ke*ke))),At=ae+yt*180/tt,Tt=He*180/tt;return L.latLng(At,Tt)}function Di(d,g,_,C,M=!0){let U,te,ae,be=[];for(let Ce=0;Ce<_;Ce+=1){if(M)U=Ce*360/_+C,te=Ta(d,U,g),ae=L.latLng(te.lng,te.lat);else{let tt=d.lat+Math.cos(2*Ce*Math.PI/_)*g,We=d.lng+Math.sin(2*Ce*Math.PI/_)*g;ae=L.latLng(tt,We)}be.push(ae)}return be}function Cu(d,g,_){g=(g+360)%360;let C=Math.PI/180,M=180/Math.PI,{R:U}=L.CRS.Earth,te=d.lng*C,ae=d.lat*C,be=g*C,Ce=Math.sin(ae),tt=Math.cos(ae),We=Math.cos(_/U),_t=Math.sin(_/U),It=Math.asin(Ce*We+tt*_t*Math.cos(be)),nn=te+Math.atan2(Math.sin(be)*_t*tt,We-Ce*Math.sin(It));nn*=M;let yn=nn-360,Ln=nn<-180?nn+360:nn;return nn=nn>180?yn:Ln,L.latLng([It*M,nn])}function pa(d,g,_){let C=d.latLngToContainerPoint(g),M=d.latLngToContainerPoint(_),U=Math.atan2(M.y-C.y,M.x-C.x)*180/Math.PI+90;return U+=U<0?360:0,U}function nu(d,g,_,C){let M=pa(d,g,_);return Cu(g,M,C)}function ru(d,g,_="asc"){if(!g||Object.keys(g).length===0)return(be,Ce)=>be-Ce;let C=Object.keys(g),M,U=C.length-1,te={};for(;U>=0;)M=C[U],te[M.toLowerCase()]=g[M],U-=1;function ae(be){if(be instanceof L.Marker)return"Marker";if(be instanceof L.Circle)return"Circle";if(be instanceof L.CircleMarker)return"CircleMarker";if(be instanceof L.Rectangle)return"Rectangle";if(be instanceof L.Polygon)return"Polygon";if(be instanceof L.Polyline)return"Line"}return(be,Ce)=>{let tt,We;if(tt=ae(be.layer).toLowerCase(),We=ae(Ce.layer).toLowerCase(),!tt||!We)return 0;let _t=tt in te?te[tt]:Number.MAX_SAFE_INTEGER,It=We in te?te[We]:Number.MAX_SAFE_INTEGER,nn=0;return _t<It?nn=-1:_t>It&&(nn=1),_==="desc"?nn*-1:nn}}function Ho(d,g=d.getLatLngs()){return d instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function iu(d,g){var _,C,M,U;if((C=(_=g.options.crs)==null?void 0:_.projection)!=null&&C.MAX_LATITUDE){let te=(U=(M=g.options.crs)==null?void 0:M.projection)==null?void 0:U.MAX_LATITUDE;d.lat=Math.max(Math.min(te,d.lat),-te)}return d}function ai(d){return d.options.renderer||d._map&&(d._map._getPaneRenderer(d.options.pane)||d._map.options.renderer||d._map._renderer)||d._renderer}var kc=L.Class.extend({includes:[Zu,vr,ll,eu,tu],initialize(d){this.map=d,this.Draw=new L.PM.Draw(d),this.Toolbar=new L.PM.Toolbar(d),this.Keyboard=zr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(d)},setLang(d="en",g,_="en"){if(d=d.trim().toLowerCase(),!/^[a-z]{2}$/.test(d)){let M=d.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let U=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let te of U)if(na[te]){d=te;break}}}let C=L.PM.activeLang;g&&(na[d]=(0,br.default)(na[_],g)),L.PM.activeLang=d,this.map.pm.Toolbar.reinit(),this._fireLangChange(C,d,_,na[d])},addControls(d){this.Toolbar.addControls(d)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(d="Polygon",g){d==="Poly"&&(d="Polygon"),this.Draw.enable(d,g)},disableDraw(d="Polygon"){d==="Poly"&&(d="Polygon"),this.Draw.disable(d)},setPathOptions(d,g={}){let _=g.ignoreShapes||[],C=g.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(d,C)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(d){let g=(0,br.default)(this.globalOptions,d);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let C=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),C=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),C&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.enabled()&&d.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(d){return this.Draw.Cut.enable(d)},toggleGlobalCutMode(d){return this.Draw.Cut.toggle(d)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(d=!1){let g=L.PM.Utils.findLayers(this.map);if(!d)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(C=>{_.addLayer(C)}),_},getGeomanDrawLayers(d=!1){let g=L.PM.Utils.findLayers(this.map).filter(C=>C._drawnByGeoman===!0);if(!d)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(C=>{_.addLayer(C)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(d){this._touchEventCounter===0&&(L.DomEvent.on(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(d){this._touchEventCounter===1&&(L.DomEvent.off(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(d){ai(this.map)._onMouseMove(this._createMouseEvent("mousemove",d))},_canvasTouchClick(d){let g="";d.type==="touchstart"||d.type==="pointerdown"?g="mousedown":(d.type==="touchend"||d.type==="pointerup"||d.type==="touchcancel"||d.type==="pointercancel")&&(g="mouseup"),g&&ai(this.map)._onClick(this._createMouseEvent(g,d))},_createMouseEvent(d,g){let _,C=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(d,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:C.detail,screenX:C.screenX,screenY:C.screenY,clientX:C.clientX,clientY:C.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(d,g.bubbles,g.cancelable,g.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),Ps=kc,ra=L.Control.extend({includes:[tu],options:{position:"topleft",disableByOtherButtons:!0},initialize(d){this._button=L.Util.extend({},this.options,d)},onAdd(d){return this._map=d,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let d=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),d?d.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(d){return typeof d=="boolean"?this._button.toggleStatus=d:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(d){d&&d.preventDefault(),!this._button.disabled&&(this._button.onClick(d,{button:this,event:d}),this._clicked(d),this._button.afterClick(d,{button:this,event:d}))},_makeButton(d){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);d.title&&_.setAttribute("title",d.title);let C=L.DomUtil.create("a","leaflet-buttons-control-button",_);C.setAttribute("role","button"),C.setAttribute("tabindex","0"),C.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),U=d.actions,te={cancel:{text:sr("actions.cancel"),title:sr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:sr("actions.finish"),title:sr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:sr("actions.removeLastVertex"),title:sr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[d.jsClass]._removeLastVertex()}},finish:{text:sr("actions.finish"),title:sr("actions.finish"),onClick(be){this._map.pm.Draw[d.jsClass]._finishShape(be)}}};d._preparedActions=U.map(be=>{let Ce=typeof be=="string"?be:be.name,tt;if(te[Ce])tt=te[Ce];else if(be.text)tt=be;else return tt;let We=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ce}`,M);if(We.setAttribute("role","button"),We.setAttribute("tabindex","0"),We.href="#",tt.title&&(We.title=tt.title),We.innerHTML=tt.text,L.DomEvent.disableClickPropagation(We),L.DomEvent.on(We,"click",L.DomEvent.stop),tt._node=We,!d.disabled&&tt.onClick){let _t=It=>{It.preventDefault();let nn="",{buttons:yn}=this._map.pm.Toolbar;for(let Ln in yn)if(yn[Ln]._button===d){nn=Ln;break}this._fireActionClick(tt,nn,d)};L.DomEvent.addListener(We,"click",_t,this),L.DomEvent.addListener(We,"click",tt.onClick,this),L.DomEvent.addListener(We,"click",()=>this._updateActiveAction(d))}return tt}),this._updateActiveAction(d),d.toggleStatus&&L.DomUtil.addClass(_,"active");let ae=L.DomUtil.create("div","control-icon",C);return d.iconUrl&&ae.setAttribute("src",d.iconUrl),d.className&&L.DomUtil.addClass(ae,d.className),L.DomEvent.disableClickPropagation(C),L.DomEvent.on(C,"click",L.DomEvent.stop),d.disabled||(L.DomEvent.addListener(C,"click",this._onBtnClick,this),L.DomEvent.addListener(C,"click",this._triggerClick,this)),d.disabled&&(L.DomUtil.addClass(C,"pm-disabled"),C.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let d="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){d=_;break}this._fireButtonClick(d,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let d="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,d),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,d),g.setAttribute("aria-disabled","false"))},_updateActiveAction(d){var g;(g=d._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),su=ra;L.Control.PMButton=su;var ia=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(d){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(d)},reinit(){let d=this.isVisible;this.removeControls(),this._defineButtons(),d&&this.addControls()},init(d){this.map=d,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(d){let g=`${d}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${d} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(d=this.options){typeof d.editPolygon<"u"&&(d.editMode=d.editPolygon),typeof d.deleteLayer<"u"&&(d.removalMode=d.deleteLayer),L.Util.setOptions(this,d),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let d=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in d){let C=d[_];L.Util.setOptions(C,{className:g.geomanIcons[_]})}},removeControls(){let d=this.getButtons();for(let g in d)d[g].remove();this.isVisible=!1},toggleControls(d=this.options){this.isVisible?this.removeControls():this.addControls(d)},_addButton(d,g){return this.buttons[d]=g,this.options[d]=!!this.options[d]||!1,this.buttons[d]},triggerClickOnToggledButtons(d){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==d&&_.toggled()&&_._triggerClick()}},toggleButton(d,g,_=!0){d==="editPolygon"&&(d="editMode"),d==="deleteLayer"&&(d="removalMode");let C=d;return _&&this.triggerClickOnToggledButtons(this.buttons[C]),this.buttons[C]?this.buttons[C].toggle(g):!1},_defineButtons(){let d={className:"control-icon leaflet-pm-icon-marker",title:sr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:sr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:sr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},C={title:sr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:sr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},U={title:sr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},te={title:sr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ae={title:sr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},be={title:sr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ce={title:sr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},tt={title:sr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},We={className:"control-icon leaflet-pm-icon-text",title:sr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(d)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(U)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(C)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(We)),this._addButton("editMode",new L.Control.PMButton(te)),this._addButton("dragMode",new L.Control.PMButton(ae)),this._addButton("cutPolygon",new L.Control.PMButton(be)),this._addButton("removalMode",new L.Control.PMButton(Ce)),this._addButton("rotateMode",new L.Control.PMButton(tt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let d=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(d).filter(_=>!d[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(d).filter(_=>d[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(d).filter(_=>d[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(d).filter(_=>d[_]._button.tool==="custom")));for(let _ in d)if(this.options[_]&&g.indexOf(_)===-1){let C=d[_]._button.tool;C||(C="draw"),d[_].setPosition(this._getBtnPosition(C)),d[_].addTo(this.map)}},_getBtnPosition(d){return this.options.positions&&this.options.positions[d]?this.options.positions[d]:this.options.position},setBlockPosition(d,g){this.options.positions[d]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(d,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(d);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let C=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let M=this.createCustomControl(g);return{drawInstance:C,control:M}},createCustomControl(d){if(!d.name)throw new TypeError("Button has no name");if(this.buttons[d.name])throw new TypeError("Button with this name already exists");d.onClick||(d.onClick=()=>{}),d.afterClick||(d.afterClick=()=>{}),d.toggle!==!1&&(d.toggle=!0),d.block&&(d.block=d.block.toLowerCase()),(!d.block||d.block==="draw")&&(d.block=""),d.className?d.className.indexOf("control-icon")===-1&&(d.className=`control-icon ${d.className}`):d.className="control-icon";let g={tool:d.block,className:d.className,title:d.title||"",jsClass:d.name,onClick:d.onClick,afterClick:d.afterClick,doToggle:d.toggle,toggleStatus:!1,disableOtherButtons:d.disableOtherButtons??!0,disableByOtherButtons:d.disableByOtherButtons??!0,cssToggle:d.toggle,position:this.options.position,actions:d.actions||[],disabled:!!d.disabled};this.options[d.name]!==!1&&(this.options[d.name]=!0);let _=this._addButton(d.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(d){return!!this.getButton(d)},getButton(d){return this.getButtons()[d]},getButtonsInBlock(d){let g={};if(d)for(let _ in this.getButtons()){let C=this.getButtons()[_];(C._button.tool===d||d==="draw"&&!C._button.tool)&&(g[_]=C)}return g},changeControlOrder(d=[]){let g=this._shapeMapping(),_=[];d.forEach(U=>{g[U]?_.push(g[U]):_.push(U)});let C=this.getButtons(),M={};_.forEach(U=>{C[U]&&(M[U]=C[U])}),Object.keys(C).filter(U=>!C[U]._button.tool||C[U]._button.tool==="draw").forEach(U=>{_.indexOf(U)===-1&&(M[U]=C[U])}),Object.keys(C).filter(U=>C[U]._button.tool==="edit").forEach(U=>{_.indexOf(U)===-1&&(M[U]=C[U])}),Object.keys(C).filter(U=>C[U]._button.tool==="options").forEach(U=>{_.indexOf(U)===-1&&(M[U]=C[U])}),Object.keys(C).filter(U=>C[U]._button.tool==="custom").forEach(U=>{_.indexOf(U)===-1&&(M[U]=C[U])}),Object.keys(C).forEach(U=>{_.indexOf(U)===-1&&(M[U]=C[U])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let d=this.getButtons(),g=[];for(let _ in d)g.push(_);return g},changeActionsOfControl(d,g){let _=this._btnNameMapping(d);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(d,g){let _=this._btnNameMapping(d);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(d){let g=this._shapeMapping();return g[d]?g[d]:d}}),Pl=ia,Ml=l(Fr()),li={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(d){d.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(d){if(d){let g=d.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(d){var ae,be,Ce;let g=d.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ae=d==null?void 0:d.originalEvent)==null?void 0:ae.altKey)||((Ce=(be=this._map)==null?void 0:be.pm)==null?void 0:Ce.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let C=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;C?M=_.latlng:M=this._checkPrioritiySnapping(_);let U=this.options.snapDistance,te={marker:g,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(te.marker,te),this._fireSnapDrag(this._layer,te),_.distance<U){g._orgLatLng=g.getLatLng(),g.setLatLng(M),g._snapped=!0,g._snapInfo=te;let tt=()=>{this._snapLatLng=M,this._fireSnap(g,te),this._fireSnap(this._layer,te)},We=this._snapLatLng||{},_t=M||{};(We.lat!==_t.lat||We.lng!==_t.lng)&&tt()}else this._snapLatLng&&(this._unsnap(te),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(te.marker,te),this._fireUnsnap(this._layer,te));return!0},_createSnapList(){let d=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(C=>{if((C instanceof L.Polyline||C instanceof L.Marker||C instanceof L.CircleMarker||C instanceof L.ImageOverlay)&&C.options.snapIgnore!==!0){if(C.options.snapIgnore===void 0&&(!L.PM.optIn&&C.options.pmIgnore===!0||L.PM.optIn&&C.options.pmIgnore!==!1))return;(C instanceof L.Circle||C instanceof L.CircleMarker)&&C.pm&&C.pm._hiddenPolyCircle?d.push(C.pm._hiddenPolyCircle):C instanceof L.ImageOverlay&&(C=L.rectangle(C.getBounds())),d.push(C);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,g.push(M),(C instanceof L.Circle||C instanceof L.CircleMarker)&&g.push(M)}}),d=d.filter(C=>this._layer!==C),d=d.filter(C=>C._latlng||C._latlngs&&es(C._latlngs)),d=d.filter(C=>!C._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,g.push(C)}),this._snapList=d.concat(this._otherSnapLayers)):this._snapList=d,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:d}){if(!d._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===d._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(d,g){return this._calcClosestLayers(d,g,1)[0]},_calcClosestLayers(d,g,_=1){let C=[],M={};g.forEach((te,ae)=>{var Ce;if(te._parentCopy&&te._parentCopy===this._layer||((Ce=te.getLatLngs)==null?void 0:Ce.call(te).flat(5).length)<2)return;let be=this._calcLayerDistances(d,te);if(be.distance=Math.floor(be.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ae]){let tt=L.polyline([],{color:"red",pmIgnore:!0});tt._pmTempLayer=!0,this.debugIndicatorLines[ae]=tt}this.debugIndicatorLines[ae].setLatLngs([d,be.latlng])}_===1&&(M.distance===void 0||be.distance-5<=M.distance)?(be.distance+5<M.distance&&(C=[]),M=be,M.layer=te,C.push(M)):_!==1&&(M={},M=be,M.layer=te,C.push(M))}),_!==1&&(C=C.sort((te,ae)=>te.distance-ae.distance)),_===-1&&(_=C.length);let U=this._getClosestLayerByPriority(C,_);return L.Util.isArray(U)?U:[U]},_calcLayerDistances(d,g){let _=this._map,C=g instanceof L.Marker||g instanceof L.CircleMarker,M=g instanceof L.Polygon,U=d;if(C){let te=g.getLatLng();return{latlng:{...te},distance:this._getDistance(_,te,U)}}return this._calcLatLngDistances(U,g.getLatLngs(),_,M)},_calcLatLngDistances(d,g,_,C=!1){let M,U,te,ae=be=>{be.forEach((Ce,tt)=>{if(Array.isArray(Ce)){ae(Ce);return}if(this.options.snapSegment){let We=Ce,_t;C?_t=tt+1===be.length?0:tt+1:_t=tt+1===be.length?void 0:tt+1;let It=be[_t];if(It){let nn=this._getDistanceToSegment(_,d,We,It);(U===void 0||nn<U)&&(U=nn,te=[We,It])}}else{let We=this._getDistance(_,d,Ce);(U===void 0||We<U)&&(U=We,M=Ce)}})};return ae(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,d,te[0],te[1])},segment:te,distance:U}:{latlng:M,distance:U}},_getClosestLayerByPriority(d,g=1){d=d.sort((te,ae)=>te._leaflet_id-ae._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],C=this._map.pm.globalOptions.snappingOrder||[],M=0,U={};return C.concat(_).forEach(te=>{U[te]||(M+=1,U[te]=M)}),d.sort(ru("instanceofShape",U)),g===1?d[0]||{}:d.slice(0,g)},_checkPrioritiySnapping(d){let g=this._map,_=d.segment[0],C=d.segment[1],M=d.latlng,U=M;if(this.options.snapVertex){let te=this._getDistance(g,_,M),ae=this._getDistance(g,C,M),be=te<ae?_:C,Ce=te<ae?te:ae;if(this.options.snapMiddle){let We=L.PM.Utils.calcMiddleLatLng(g,_,C),_t=this._getDistance(g,We,M);_t<te&&_t<ae&&(be=We,Ce=_t)}let tt=this.options.snapDistance;Ce<tt&&(U=be)}return{...U}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(d,g,_,C){let M=d.getMaxZoom();M===1/0&&(M=d.getZoom());let U=d.project(g,M),te=d.project(_,M),ae=d.project(C,M),be=L.LineUtil.closestPointOnSegment(U,te,ae);return d.unproject(be,M)},_getDistanceToSegment(d,g,_,C){let M=d.latLngToContainerPoint(g),U=d.latLngToContainerPoint(_),te=d.latLngToContainerPoint(C);return L.LineUtil.pointToSegmentDistance(M,U,te)},_getDistance(d,g,_){return d.latLngToContainerPoint(g).distanceTo(d.latLngToContainerPoint(_))}},Bo=li,Da=L.Class.extend({includes:[Bo,tu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(d){L.Util.setOptions(this,d),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(d){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=d,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(d,g=!1){g?this.options.pathOptions=(0,Ml.default)(this.options.pathOptions,d):this.options.pathOptions=d},getShapes(){return this.shapes},getShape(){return this._shape},enable(d,g){if(!d)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[d].enable(g)},disable(){this.shapes.forEach(d=>{this[d].disable()})},addControls(){this.shapes.forEach(d=>{this[d].addButton()})},getActiveShape(){let d;return this.shapes.forEach(g=>{this[g]._enabled&&(d=g)}),d},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let d=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||d.push(g))}),this._enabled?d.forEach(g=>{L.PM.Utils.disablePopup(g)}):d.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(d,g){let _=this._getShapeFromBtnName(g);if(this[d])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[d]=new L.PM.Draw[_](this._map),this[d].toolbarButtonName=d,this[d]._shape=d,this.shapes.push(d),this[g]&&this[d].setOptions(this[g].options),this[d].setOptions(this[d].options),this[d]},_getShapeFromBtnName(d){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[d]?g[d]:this[d]?this[d]._shape:d},_finishLayer(d){d.pm&&(d.pm.setOptions(this.options),d.pm._shape=this._shape,d.pm._map=this._map),this._addDrawnLayerProp(d)},_addDrawnLayerProp(d){d._drawnByGeoman=!0},_setPane(d,g){g==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ts=Da;ts.Marker=ts.extend({initialize(d){this._map=d,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},isRelevantMarker(d){return d instanceof L.Marker&&d.pm&&!d._pmTempLayer&&!d.pm._initTextMarker},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let g=d;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(d){if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var d,g;(d=this.options.markerStyle)!=null&&d.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var F=63710088e-1,xe={centimeters:F*100,centimetres:F*100,degrees:F/111325,feet:F*3.28084,inches:F*39.37,kilometers:F/1e3,kilometres:F/1e3,meters:F,metres:F,miles:F/1609.344,millimeters:F*1e3,millimetres:F*1e3,nauticalmiles:F/1852,radians:1,yards:F*1.0936};function Qe(d,g,_){_===void 0&&(_={});var C={type:"Feature"};return(_.id===0||_.id)&&(C.id=_.id),_.bbox&&(C.bbox=_.bbox),C.properties=g||{},C.geometry=d,C}function pt(d,g,_){if(_===void 0&&(_={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pr(d[0])||!pr(d[1]))throw new Error("coordinates must contain numbers");var C={type:"Point",coordinates:d};return Qe(C,g,_)}function Pt(d,g,_){if(_===void 0&&(_={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var C={type:"LineString",coordinates:d};return Qe(C,g,_)}function Vt(d,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=d,_}function dn(d,g){g===void 0&&(g="kilometers");var _=xe[g];if(!_)throw new Error(g+" units is invalid");return d*_}function Nn(d,g){g===void 0&&(g="kilometers");var _=xe[g];if(!_)throw new Error(g+" units is invalid");return d/_}function Rn(d){var g=d%(2*Math.PI);return g*180/Math.PI}function er(d){var g=d%360;return g*Math.PI/180}function pr(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function Ar(d){var g,_,C={type:"FeatureCollection",features:[]};if(d.type==="Feature"?_=d.geometry:_=d,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(M){g.forEach(function(U){for(var te=0;te<M.length-1;te++)for(var ae=te;ae<U.length-1;ae++)if(!(M===U&&(Math.abs(te-ae)===1||te===0&&ae===M.length-2&&M[te][0]===M[M.length-1][0]&&M[te][1]===M[M.length-1][1]))){var be=Mi(M[te][0],M[te][1],M[te+1][0],M[te+1][1],U[ae][0],U[ae][1],U[ae+1][0],U[ae+1][1]);be&&C.features.push(pt([be[0],be[1]]))}})}),C}function Mi(d,g,_,C,M,U,te,ae){var be,Ce,tt,We,_t,It={x:null,y:null,onLine1:!1,onLine2:!1};return be=(ae-U)*(_-d)-(te-M)*(C-g),be===0?It.x!==null&&It.y!==null?It:!1:(Ce=g-U,tt=d-M,We=(te-M)*Ce-(ae-U)*tt,_t=(_-d)*Ce-(C-g)*tt,Ce=We/be,tt=_t/be,It.x=d+Ce*(_-d),It.y=g+Ce*(C-g),Ce>=0&&Ce<=1&&(It.onLine1=!0),tt>=0&&tt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}ts.Line=ts.extend({initialize(d){this._map=d,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintLine(){let d=this._layer.getLatLngs();if(d.length>0){let g=d[d.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Ar(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(d,g){let _=L.polyline(this._layer.getLatLngs());d&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let C=Ar(_.toGeoJSON(15));this._doesSelfIntersect=C.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(C,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(d){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,d.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),C=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(C)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let M=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(M,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(d)},_setHintLineAfterNewVertex(d){this._hintline.setLatLngs([d,d])},_removeLastVertex(){let d=this._markers;if(d.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=d[d.length-1],{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(d,_);d.pop(),this._layerGroup.removeLayer(_);let M=d[d.length-1],U=g.indexOf(M.getLatLng());g=g.slice(0,U+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,C,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=1)return;let g=L.polyline(d,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(d){let g=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),g="";d<=1?g=sr("tooltips.continueLine"):g=sr("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(d){this._fireChange(d,"Draw")},setStyle(){var d,g;(d=this._layer)==null||d.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),ts.Polygon=ts.Line.extend({initialize(d){this._map=d,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(d){L.PM.Draw.Line.prototype.enable.call(this,d),this._layer.pm._shape="Polygon"},_createMarker(d){let g=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),g="";d<=2?g=sr("tooltips.continueLine"):g=sr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let g=L.polygon(d,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),ts.Rectangle=ts.extend({initialize(d){this._map=d,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(d){if(L.Util.setOptions(this,d),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeStartingMarkers(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(sr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let d=this._startMarker.getLatLng();d&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([d,d]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let d=iu(this._startMarker.getLatLng(),this._map),g=iu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(d,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let C=[];_.forEach(M=>{!M.equals(d,1e-8)&&!M.equals(g,1e-8)&&C.push(M)}),C.forEach((M,U)=>{try{this._styleMarkers[U].setLatLng(M)}catch{}})}},_findCorners(){let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.options.rectangleAngle||0,this._map)},_finishShape(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let C=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let U=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);C.setLatLngs(U),C.pm&&C.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),this._fireCreate(C);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var d;(d=this._layer)==null||d.setStyle(this.options.pathOptions)}}),ts.CircleMarker=ts.extend({initialize(d){this._map=d,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(d){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()})},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeCenterMarker(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let d=this._centerMarker.getLatLng();d&&(this._layer.setLatLng(d),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(sr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let d=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([d,g])},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(d){return d instanceof L.CircleMarker&&!(d instanceof L.Circle)&&d.pm&&!d._pmTempLayer},_createMarker(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!d.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(d){d.pm&&this.options.markerEditable&&d.pm.enable()},_finishShape(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let te=this._hintMarker.getLatLng();_=this._distanceCalculation(g,te),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let C={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(g,C);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let U=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(U))},_getNewDestinationOfHintMarker(){let d=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return d;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,d);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?d=nu(this._map,g,d,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(d=nu(this._map,g,d,this._getMaxDistanceInMeter()))}return d},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let d=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let d={};L.extend(d,this.options.templineStyle),this.options[this._editableOption]&&(d.radius=0),(g=this._layer)==null||g.setStyle(d),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(d,g){return this._map.project(d).distanceTo(this._map.project(g))}}),ts.Circle=ts.CircleMarker.extend({initialize(d){this._map=d,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(d,g){return this._map.distance(d,g)}});function ni(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ui(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ns(d){return d.type==="Feature"?d.geometry:d}function us(d,g){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}function Ro(d,g,_){if(d!==null)for(var C,M,U,te,ae,be,Ce,tt=0,We=0,_t,It=d.type,nn=It==="FeatureCollection",yn=It==="Feature",Ln=nn?d.features.length:1,lr=0;lr<Ln;lr++){Ce=nn?d.features[lr].geometry:yn?d.geometry:d,_t=Ce?Ce.type==="GeometryCollection":!1,ae=_t?Ce.geometries.length:1;for(var et=0;et<ae;et++){var st=0,gt=0;if(te=_t?Ce.geometries[et]:Ce,te!==null){be=te.coordinates;var zt=te.type;switch(tt=0,zt){case null:break;case"Point":if(g(be,We,lr,st,gt)===!1)return!1;We++,st++;break;case"LineString":case"MultiPoint":for(C=0;C<be.length;C++){if(g(be[C],We,lr,st,gt)===!1)return!1;We++,zt==="MultiPoint"&&st++}zt==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(C=0;C<be.length;C++){for(M=0;M<be[C].length-tt;M++){if(g(be[C][M],We,lr,st,gt)===!1)return!1;We++}zt==="MultiLineString"&&st++,zt==="Polygon"&&gt++}zt==="Polygon"&&st++;break;case"MultiPolygon":for(C=0;C<be.length;C++){for(gt=0,M=0;M<be[C].length;M++){for(U=0;U<be[C][M].length-tt;U++){if(g(be[C][M][U],We,lr,st,gt)===!1)return!1;We++}gt++}st++}break;case"GeometryCollection":for(C=0;C<te.geometries.length;C++)if(Ro(te.geometries[C],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tr(d,g){if(d.type==="Feature")g(d,0);else if(d.type==="FeatureCollection")for(var _=0;_<d.features.length&&g(d.features[_],_)!==!1;_++);}function $s(d,g,_){var C=_;return Tr(d,function(M,U){U===0&&_===void 0?C=M:C=g(C,M,U)}),C}function kl(d,g){var _,C,M,U,te,ae,be,Ce,tt,We,_t=0,It=d.type==="FeatureCollection",nn=d.type==="Feature",yn=It?d.features.length:1;for(_=0;_<yn;_++){for(ae=It?d.features[_].geometry:nn?d.geometry:d,Ce=It?d.features[_].properties:nn?d.properties:{},tt=It?d.features[_].bbox:nn?d.bbox:void 0,We=It?d.features[_].id:nn?d.id:void 0,be=ae?ae.type==="GeometryCollection":!1,te=be?ae.geometries.length:1,M=0;M<te;M++){if(U=be?ae.geometries[M]:ae,U===null){if(g(null,_t,Ce,tt,We)===!1)return!1;continue}switch(U.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(U,_t,Ce,tt,We)===!1)return!1;break}case"GeometryCollection":{for(C=0;C<U.geometries.length;C++)if(g(U.geometries[C],_t,Ce,tt,We)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_t++}}function so(d,g){kl(d,function(_,C,M,U,te){var ae=_===null?null:_.type;switch(ae){case null:case"Point":case"LineString":case"Polygon":return g(Qe(_,M,{bbox:U,id:te}),C,0)===!1?!1:void 0}var be;switch(ae){case"MultiPoint":be="Point";break;case"MultiLineString":be="LineString";break;case"MultiPolygon":be="Polygon";break}for(var Ce=0;Ce<_.coordinates.length;Ce++){var tt=_.coordinates[Ce],We={type:be,coordinates:tt};if(g(Qe(We,M),C,Ce)===!1)return!1}})}function Eu(d){if(!d)throw new Error("geojson is required");var g=[];return so(d,function(_){ga(_,g)}),Vt(g)}function ga(d,g){var _=[],C=d.geometry;if(C!==null){switch(C.type){case"Polygon":_=ui(C);break;case"LineString":_=[ui(C)]}_.forEach(function(M){var U=Xu(M,d.properties);U.forEach(function(te){te.id=g.length,g.push(te)})})}}function Xu(d,g){var _=[];return d.reduce(function(C,M){var U=Pt([C,M],g);return U.bbox=ul(C,M),_.push(U),M}),_}function ul(d,g){var _=d[0],C=d[1],M=g[0],U=g[1],te=_<M?_:M,ae=C<U?C:U,be=_>M?_:M,Ce=C>U?C:U;return[te,ae,be,Ce]}var cl=Eu,cs=l(Si(),1);function ma(d,g){var _={},C=[];if(d.type==="LineString"&&(d=Qe(d)),g.type==="LineString"&&(g=Qe(g)),d.type==="Feature"&&g.type==="Feature"&&d.geometry!==null&&g.geometry!==null&&d.geometry.type==="LineString"&&g.geometry.type==="LineString"&&d.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var M=Fo(d,g);return M&&C.push(M),Vt(C)}var U=(0,cs.default)();return U.load(cl(g)),Tr(cl(d),function(te){Tr(U.search(te),function(ae){var be=Fo(te,ae);if(be){var Ce=ui(be).join(",");_[Ce]||(_[Ce]=!0,C.push(be))}})}),Vt(C)}function Fo(d,g){var _=ui(d),C=ui(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(C.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],U=_[0][1],te=_[1][0],ae=_[1][1],be=C[0][0],Ce=C[0][1],tt=C[1][0],We=C[1][1],_t=(We-Ce)*(te-M)-(tt-be)*(ae-U),It=(tt-be)*(U-Ce)-(We-Ce)*(M-be),nn=(te-M)*(U-Ce)-(ae-U)*(M-be);if(_t===0)return null;var yn=It/_t,Ln=nn/_t;if(yn>=0&&yn<=1&&Ln>=0&&Ln<=1){var lr=M+yn*(te-M),et=U+yn*(ae-U);return pt([lr,et])}return null}var _o=ma,Al=l(Si(),1);function Vs(d,g,_){_===void 0&&(_={});var C=ni(d),M=ni(g),U=er(M[1]-C[1]),te=er(M[0]-C[0]),ae=er(C[1]),be=er(M[1]),Ce=Math.pow(Math.sin(U/2),2)+Math.pow(Math.sin(te/2),2)*Math.cos(ae)*Math.cos(be);return dn(2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce)),_.units)}var oo=Vs;function ao(d){var g=d[0],_=d[1],C=d[2],M=d[3],U=oo(d.slice(0,2),[C,_]),te=oo(d.slice(0,2),[g,M]);if(U>=te){var ae=(_+M)/2;return[g,ae-(C-g)/2,C,ae+(C-g)/2]}else{var be=(g+C)/2;return[be-(M-_)/2,_,be+(M-_)/2,M]}}var Ac=ao;function _s(d){var g=[1/0,1/0,-1/0,-1/0];return Ro(d,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}_s.default=_s;var Na=_s;function Us(d,g){g===void 0&&(g={});var _=g.precision,C=g.coordinates,M=g.mutate;if(_=_==null||isNaN(_)?6:_,C=C==null||isNaN(C)?3:C,!d)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof C!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(d=JSON.parse(JSON.stringify(d)));var U=Math.pow(10,_);return Ro(d,function(te){Hs(te,U,C)}),d}function Hs(d,g,_){d.length>_&&d.splice(_,d.length);for(var C=0;C<d.length;C++)d[C]=Math.round(d[C]*g)/g;return d}var Oa=Us;function Ia(d,g,_){if(_===void 0&&(_={}),_.final===!0)return Gs(d,g);var C=ni(d),M=ni(g),U=er(C[0]),te=er(M[0]),ae=er(C[1]),be=er(M[1]),Ce=Math.sin(te-U)*Math.cos(be),tt=Math.cos(ae)*Math.sin(be)-Math.sin(ae)*Math.cos(be)*Math.cos(te-U);return Rn(Math.atan2(Ce,tt))}function Gs(d,g){var _=Ia(g,d);return _=(_+180)%360,_}function Ms(d,g,_,C){C===void 0&&(C={});var M=ni(d),U=er(M[0]),te=er(M[1]),ae=er(_),be=Nn(g,C.units),Ce=Math.asin(Math.sin(te)*Math.cos(be)+Math.cos(te)*Math.sin(be)*Math.cos(ae)),tt=U+Math.atan2(Math.sin(ae)*Math.sin(be)*Math.cos(te),Math.cos(be)-Math.sin(te)*Math.sin(Ce)),We=Rn(tt),_t=Rn(Ce);return pt([We,_t],C.properties)}function va(d,g,_){_===void 0&&(_={});var C=pt([1/0,1/0],{dist:1/0}),M=0;return so(d,function(U){for(var te=ui(U),ae=0;ae<te.length-1;ae++){var be=pt(te[ae]);be.properties.dist=oo(g,be,_);var Ce=pt(te[ae+1]);Ce.properties.dist=oo(g,Ce,_);var tt=oo(be,Ce,_),We=Math.max(be.properties.dist,Ce.properties.dist),_t=Ia(be,Ce),It=Ms(g,We,_t+90,_),nn=Ms(g,We,_t-90,_),yn=_o(Pt([It.geometry.coordinates,nn.geometry.coordinates]),Pt([be.geometry.coordinates,Ce.geometry.coordinates])),Ln=null;yn.features.length>0&&(Ln=yn.features[0],Ln.properties.dist=oo(g,Ln,_),Ln.properties.location=M+oo(be,Ln,_)),be.properties.dist<C.properties.dist&&(C=be,C.properties.index=ae,C.properties.location=M),Ce.properties.dist<C.properties.dist&&(C=Ce,C.properties.index=ae+1,C.properties.location=M+tt),Ln&&Ln.properties.dist<C.properties.dist&&(C=Ln,C.properties.index=ae),M+=tt}}),C}var jo=va;function Ws(d,g){if(!d)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=us(d),C=us(g);if(_!=="LineString")throw new Error("line must be LineString");if(C==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(C==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=Oa(g,{precision:7});switch(C){case"Point":return Kt(d,M);case"MultiPoint":return xt(d,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return xt(d,_o(d,M))}}function xt(d,g){var _=[],C=(0,Al.default)();return so(g,function(M){if(_.forEach(function(ae,be){ae.id=be}),!_.length)_=Kt(d,M).features,_.forEach(function(ae){ae.bbox||(ae.bbox=Ac(Na(ae)))}),C.load(Vt(_));else{var U=C.search(M);if(U.features.length){var te=Ot(M,U);_=_.filter(function(ae){return ae.id!==te.id}),C.remove(te),Tr(Kt(te,M),function(ae){_.push(ae),C.insert(ae)})}}}),Vt(_)}function Kt(d,g){var _=[],C=ui(d)[0],M=ui(d)[d.geometry.coordinates.length-1];if(An(C,ni(g))||An(M,ni(g)))return Vt([d]);var U=(0,Al.default)(),te=cl(d);U.load(te);var ae=U.search(g);if(!ae.features.length)return Vt([d]);var be=Ot(g,ae),Ce=[C],tt=$s(te,function(We,_t,It){var nn=ui(_t)[1],yn=ni(g);return It===be.id?(We.push(yn),_.push(Pt(We)),An(yn,nn)?[yn]:[yn,nn]):(We.push(nn),We)},Ce);return tt.length>1&&_.push(Pt(tt)),Vt(_)}function Ot(d,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,C=1/0;return Tr(g,function(M){var U=jo(M,d),te=U.properties.dist;te<C&&(_=M,C=te)}),_}function An(d,g){return d[0]===g[0]&&d[1]===g[1]}var Gn=Ws;function mr(d,g,_){if(_===void 0&&(_={}),!d)throw new Error("point is required");if(!g)throw new Error("polygon is required");var C=ni(d),M=ns(g),U=M.type,te=g.bbox,ae=M.coordinates;if(te&&ci(C,te)===!1)return!1;U==="Polygon"&&(ae=[ae]);for(var be=!1,Ce=0;Ce<ae.length&&!be;Ce++)if(Ni(C,ae[Ce][0],_.ignoreBoundary)){for(var tt=!1,We=1;We<ae[Ce].length&&!tt;)Ni(C,ae[Ce][We],!_.ignoreBoundary)&&(tt=!0),We++;tt||(be=!0)}return be}function Ni(d,g,_){var C=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var M=0,U=g.length-1;M<g.length;U=M++){var te=g[M][0],ae=g[M][1],be=g[U][0],Ce=g[U][1],tt=d[1]*(te-be)+ae*(be-d[0])+Ce*(d[0]-te)===0&&(te-d[0])*(be-d[0])<=0&&(ae-d[1])*(Ce-d[1])<=0;if(tt)return!_;var We=ae>d[1]!=Ce>d[1]&&d[0]<(be-te)*(d[1]-ae)/(Ce-ae)+te;We&&(C=!C)}return C}function ci(d,g){return g[0]<=d[0]&&g[1]<=d[1]&&g[2]>=d[0]&&g[3]>=d[1]}function ou(d,g,_){_===void 0&&(_={});for(var C=ni(d),M=ui(g),U=0;U<M.length-1;U++){var te=!1;if(_.ignoreEndVertices&&(U===0&&(te="start"),U===M.length-2&&(te="end"),U===0&&U+1===M.length-1&&(te="both")),lo(M[U],M[U+1],C,te,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function lo(d,g,_,C,M){var U=_[0],te=_[1],ae=d[0],be=d[1],Ce=g[0],tt=g[1],We=_[0]-ae,_t=_[1]-be,It=Ce-ae,nn=tt-be,yn=We*nn-_t*It;if(M!==null){if(Math.abs(yn)>M)return!1}else if(yn!==0)return!1;if(C){if(C==="start")return Math.abs(It)>=Math.abs(nn)?It>0?ae<U&&U<=Ce:Ce<=U&&U<ae:nn>0?be<te&&te<=tt:tt<=te&&te<be;if(C==="end")return Math.abs(It)>=Math.abs(nn)?It>0?ae<=U&&U<Ce:Ce<U&&U<=ae:nn>0?be<=te&&te<tt:tt<te&&te<=be;if(C==="both")return Math.abs(It)>=Math.abs(nn)?It>0?ae<U&&U<Ce:Ce<U&&U<ae:nn>0?be<te&&te<tt:tt<te&&te<be}else return Math.abs(It)>=Math.abs(nn)?It>0?ae<=U&&U<=Ce:Ce<=U&&U<=ae:nn>0?be<=te&&te<=tt:tt<=te&&te<=be;return!1}var Oi=ou;function ya(d,g){var _=ns(d),C=ns(g),M=_.type,U=C.type,te=_.coordinates,ae=C.coordinates;switch(M){case"Point":switch(U){case"Point":return vi(te,ae);default:throw new Error("feature2 "+U+" geometry not supported")}case"MultiPoint":switch(U){case"Point":return Ba(_,C);case"MultiPoint":return ba(_,C);default:throw new Error("feature2 "+U+" geometry not supported")}case"LineString":switch(U){case"Point":return Oi(C,_,{ignoreEndVertices:!0});case"LineString":return $r(_,C);case"MultiPoint":return _a(_,C);default:throw new Error("feature2 "+U+" geometry not supported")}case"Polygon":switch(U){case"Point":return mr(C,_,{ignoreBoundary:!0});case"LineString":return sa(_,C);case"Polygon":return ks(_,C);case"MultiPoint":return wa(_,C);default:throw new Error("feature2 "+U+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Ba(d,g){var _,C=!1;for(_=0;_<d.coordinates.length;_++)if(vi(d.coordinates[_],g.coordinates)){C=!0;break}return C}function ba(d,g){for(var _=0,C=g.coordinates;_<C.length;_++){for(var M=C[_],U=!1,te=0,ae=d.coordinates;te<ae.length;te++){var be=ae[te];if(vi(M,be)){U=!0;break}}if(!U)return!1}return!0}function _a(d,g){for(var _=!1,C=0,M=g.coordinates;C<M.length;C++){var U=M[C];if(Oi(U,d,{ignoreEndVertices:!0})&&(_=!0),!Oi(U,d))return!1}return!!_}function wa(d,g){for(var _=0,C=g.coordinates;_<C.length;_++){var M=C[_];if(!mr(M,d,{ignoreBoundary:!0}))return!1}return!0}function $r(d,g){for(var _=!1,C=0,M=g.coordinates;C<M.length;C++){var U=M[C];if(Oi({type:"Point",coordinates:U},d,{ignoreEndVertices:!0})&&(_=!0),!Oi({type:"Point",coordinates:U},d,{ignoreEndVertices:!1}))return!1}return _}function sa(d,g){var _=!1,C=0,M=Na(d),U=Na(g);if(!di(M,U))return!1;for(C;C<g.coordinates.length-1;C++){var te=rs(g.coordinates[C],g.coordinates[C+1]);if(mr({type:"Point",coordinates:te},d,{ignoreBoundary:!0})){_=!0;break}}return _}function ks(d,g){if(d.type==="Feature"&&d.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=Na(d),C=Na(g);if(!di(_,C))return!1;for(var M=ns(g).coordinates,U=0,te=M;U<te.length;U++)for(var ae=te[U],be=0,Ce=ae;be<Ce.length;be++){var tt=Ce[be];if(!mr(tt,d))return!1}return!0}function di(d,g){return!(d[0]>g[0]||d[2]<g[2]||d[1]>g[1]||d[3]<g[3])}function vi(d,g){return d[0]===g[0]&&d[1]===g[1]}function rs(d,g){return[(d[0]+g[0])/2,(d[1]+g[1])/2]}var Ci=l(ys()),zo=d=>()=>d,wo=d=>{let g=d?(_,C)=>C.minus(_).abs().isLessThanOrEqualTo(d):zo(!1);return(_,C)=>g(_,C)?0:_.comparedTo(C)};function Go(d){let g=d?(_,C,M,U,te)=>_.exponentiatedBy(2).isLessThanOrEqualTo(U.minus(C).exponentiatedBy(2).plus(te.minus(M).exponentiatedBy(2)).times(d)):zo(!1);return(_,C,M)=>{let U=_.x,te=_.y,ae=M.x,be=M.y,Ce=te.minus(be).times(C.x.minus(ae)).minus(U.minus(ae).times(C.y.minus(be)));return g(Ce,U,te,ae,be)?0:Ce.comparedTo(0)}}var Ju=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,xa=Math.ceil,ds=Math.floor,xi="[BigNumber Error] ",qs=xi+"Number primitive has more than 15 significant digits: ",xo=1e14,hr=14,Ra=9007199254740991,Fa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],oa=1e7,uo=1e9;function sd(d){var g,_,C,M=et.prototype={constructor:et,toString:null,valueOf:null},U=new et(1),te=20,ae=4,be=-7,Ce=21,tt=-1e7,We=1e7,_t=!1,It=1,nn=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ln="0123456789abcdefghijklmnopqrstuvwxyz",lr=!0;function et(we,ke){var je,Fe,Ue,He,dt,ht,yt,At,Tt=this;if(!(Tt instanceof et))return new et(we,ke);if(ke==null){if(we&&we._isBigNumber===!0){Tt.s=we.s,!we.c||we.e>We?Tt.c=Tt.e=null:we.e<tt?Tt.c=[Tt.e=0]:(Tt.e=we.e,Tt.c=we.c.slice());return}if((ht=typeof we=="number")&&we*0==0){if(Tt.s=1/we<0?(we=-we,-1):1,we===~~we){for(He=0,dt=we;dt>=10;dt/=10,He++);He>We?Tt.c=Tt.e=null:(Tt.e=He,Tt.c=[we]);return}At=String(we)}else{if(!Ju.test(At=String(we)))return C(Tt,At,ht);Tt.s=At.charCodeAt(0)==45?(At=At.slice(1),-1):1}(He=At.indexOf("."))>-1&&(At=At.replace(".","")),(dt=At.search(/e/i))>0?(He<0&&(He=dt),He+=+At.slice(dt+1),At=At.substring(0,dt)):He<0&&(He=At.length)}else{if(u(ke,2,Ln.length,"Base"),ke==10&&lr)return Tt=new et(we),Ct(Tt,te+Tt.e+1,ae);if(At=String(we),ht=typeof we=="number"){if(we*0!=0)return C(Tt,At,ht,ke);if(Tt.s=1/we<0?(At=At.slice(1),-1):1,et.DEBUG&&At.replace(/^0\.0*|\./,"").length>15)throw Error(qs+we)}else Tt.s=At.charCodeAt(0)===45?(At=At.slice(1),-1):1;for(je=Ln.slice(0,ke),He=dt=0,yt=At.length;dt<yt;dt++)if(je.indexOf(Fe=At.charAt(dt))<0){if(Fe=="."){if(dt>He){He=yt;continue}}else if(!Ue&&(At==At.toUpperCase()&&(At=At.toLowerCase())||At==At.toLowerCase()&&(At=At.toUpperCase()))){Ue=!0,dt=-1,He=0;continue}return C(Tt,String(we),ht,ke)}ht=!1,At=_(At,ke,10,Tt.s),(He=At.indexOf("."))>-1?At=At.replace(".",""):He=At.length}for(dt=0;At.charCodeAt(dt)===48;dt++);for(yt=At.length;At.charCodeAt(--yt)===48;);if(At=At.slice(dt,++yt)){if(yt-=dt,ht&&et.DEBUG&&yt>15&&(we>Ra||we!==ds(we)))throw Error(qs+Tt.s*we);if((He=He-dt-1)>We)Tt.c=Tt.e=null;else if(He<tt)Tt.c=[Tt.e=0];else{if(Tt.e=He,Tt.c=[],dt=(He+1)%hr,He<0&&(dt+=hr),dt<yt){for(dt&&Tt.c.push(+At.slice(0,dt)),yt-=hr;dt<yt;)Tt.c.push(+At.slice(dt,dt+=hr));dt=hr-(At=At.slice(dt)).length}else dt-=yt;for(;dt--;At+="0");Tt.c.push(+At)}}else Tt.c=[Tt.e=0]}et.clone=sd,et.ROUND_UP=0,et.ROUND_DOWN=1,et.ROUND_CEIL=2,et.ROUND_FLOOR=3,et.ROUND_HALF_UP=4,et.ROUND_HALF_DOWN=5,et.ROUND_HALF_EVEN=6,et.ROUND_HALF_CEIL=7,et.ROUND_HALF_FLOOR=8,et.EUCLID=9,et.config=et.set=function(we){var ke,je;if(we!=null)if(typeof we=="object"){if(we.hasOwnProperty(ke="DECIMAL_PLACES")&&(je=we[ke],u(je,0,uo,ke),te=je),we.hasOwnProperty(ke="ROUNDING_MODE")&&(je=we[ke],u(je,0,8,ke),ae=je),we.hasOwnProperty(ke="EXPONENTIAL_AT")&&(je=we[ke],je&&je.pop?(u(je[0],-1e9,0,ke),u(je[1],0,uo,ke),be=je[0],Ce=je[1]):(u(je,-1e9,uo,ke),be=-(Ce=je<0?-je:je))),we.hasOwnProperty(ke="RANGE"))if(je=we[ke],je&&je.pop)u(je[0],-1e9,-1,ke),u(je[1],1,uo,ke),tt=je[0],We=je[1];else if(u(je,-1e9,uo,ke),je)tt=-(We=je<0?-je:je);else throw Error(xi+ke+" cannot be zero: "+je);if(we.hasOwnProperty(ke="CRYPTO"))if(je=we[ke],je===!!je)if(je)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_t=je;else throw _t=!je,Error(xi+"crypto unavailable");else _t=je;else throw Error(xi+ke+" not true or false: "+je);if(we.hasOwnProperty(ke="MODULO_MODE")&&(je=we[ke],u(je,0,9,ke),It=je),we.hasOwnProperty(ke="POW_PRECISION")&&(je=we[ke],u(je,0,uo,ke),nn=je),we.hasOwnProperty(ke="FORMAT"))if(je=we[ke],typeof je=="object")yn=je;else throw Error(xi+ke+" not an object: "+je);if(we.hasOwnProperty(ke="ALPHABET"))if(je=we[ke],typeof je=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(je))lr=je.slice(0,10)=="0123456789",Ln=je;else throw Error(xi+ke+" invalid: "+je)}else throw Error(xi+"Object expected: "+we);return{DECIMAL_PLACES:te,ROUNDING_MODE:ae,EXPONENTIAL_AT:[be,Ce],RANGE:[tt,We],CRYPTO:_t,MODULO_MODE:It,POW_PRECISION:nn,FORMAT:yn,ALPHABET:Ln}},et.isBigNumber=function(we){if(!we||we._isBigNumber!==!0)return!1;if(!et.DEBUG)return!0;var ke,je,Fe=we.c,Ue=we.e,He=we.s;e:if({}.toString.call(Fe)=="[object Array]"){if((He===1||He===-1)&&Ue>=-1e9&&Ue<=uo&&Ue===ds(Ue)){if(Fe[0]===0){if(Ue===0&&Fe.length===1)return!0;break e}if(ke=(Ue+1)%hr,ke<1&&(ke+=hr),String(Fe[0]).length==ke){for(ke=0;ke<Fe.length;ke++)if(je=Fe[ke],je<0||je>=xo||je!==ds(je))break e;if(je!==0)return!0}}}else if(Fe===null&&Ue===null&&(He===null||He===1||He===-1))return!0;throw Error(xi+"Invalid BigNumber: "+we)},et.maximum=et.max=function(){return gt(arguments,-1)},et.minimum=et.min=function(){return gt(arguments,1)},et.random=function(){var we=9007199254740992,ke=Math.random()*we&2097151?function(){return ds(Math.random()*we)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(je){var Fe,Ue,He,dt,ht,yt=0,At=[],Tt=new et(U);if(je==null?je=te:u(je,0,uo),dt=xa(je/hr),_t)if(crypto.getRandomValues){for(Fe=crypto.getRandomValues(new Uint32Array(dt*=2));yt<dt;)ht=Fe[yt]*131072+(Fe[yt+1]>>>11),ht>=9e15?(Ue=crypto.getRandomValues(new Uint32Array(2)),Fe[yt]=Ue[0],Fe[yt+1]=Ue[1]):(At.push(ht%1e14),yt+=2);yt=dt/2}else if(crypto.randomBytes){for(Fe=crypto.randomBytes(dt*=7);yt<dt;)ht=(Fe[yt]&31)*281474976710656+Fe[yt+1]*1099511627776+Fe[yt+2]*4294967296+Fe[yt+3]*16777216+(Fe[yt+4]<<16)+(Fe[yt+5]<<8)+Fe[yt+6],ht>=9e15?crypto.randomBytes(7).copy(Fe,yt):(At.push(ht%1e14),yt+=7);yt=dt/7}else throw _t=!1,Error(xi+"crypto unavailable");if(!_t)for(;yt<dt;)ht=ke(),ht<9e15&&(At[yt++]=ht%1e14);for(dt=At[--yt],je%=hr,dt&&je&&(ht=Fa[hr-je],At[yt]=ds(dt/ht)*ht);At[yt]===0;At.pop(),yt--);if(yt<0)At=[He=0];else{for(He=-1;At[0]===0;At.splice(0,1),He-=hr);for(yt=1,ht=At[0];ht>=10;ht/=10,yt++);yt<hr&&(He-=hr-yt)}return Tt.e=He,Tt.c=At,Tt}}(),et.sum=function(){for(var we=1,ke=arguments,je=new et(ke[0]);we<ke.length;)je=je.plus(ke[we++]);return je},_=function(){var we="0123456789";function ke(je,Fe,Ue,He){for(var dt,ht=[0],yt,At=0,Tt=je.length;At<Tt;){for(yt=ht.length;yt--;ht[yt]*=Fe);for(ht[0]+=He.indexOf(je.charAt(At++)),dt=0;dt<ht.length;dt++)ht[dt]>Ue-1&&(ht[dt+1]==null&&(ht[dt+1]=0),ht[dt+1]+=ht[dt]/Ue|0,ht[dt]%=Ue)}return ht.reverse()}return function(je,Fe,Ue,He,dt){var ht,yt,At,Tt,on,Fn,zn,Zn,si=je.indexOf("."),yi=te,Vr=ae;for(si>=0&&(Tt=nn,nn=0,je=je.replace(".",""),Zn=new et(Fe),Fn=Zn.pow(je.length-si),nn=Tt,Zn.c=ke(G(Ts(Fn.c),Fn.e,"0"),10,Ue,we),Zn.e=Zn.c.length),zn=ke(je,Fe,Ue,dt?(ht=Ln,we):(ht=we,Ln)),At=Tt=zn.length;zn[--Tt]==0;zn.pop());if(!zn[0])return ht.charAt(0);if(si<0?--At:(Fn.c=zn,Fn.e=At,Fn.s=He,Fn=g(Fn,Zn,yi,Vr,Ue),zn=Fn.c,on=Fn.r,At=Fn.e),yt=At+yi+1,si=zn[yt],Tt=Ue/2,on=on||yt<0||zn[yt+1]!=null,on=Vr<4?(si!=null||on)&&(Vr==0||Vr==(Fn.s<0?3:2)):si>Tt||si==Tt&&(Vr==4||on||Vr==6&&zn[yt-1]&1||Vr==(Fn.s<0?8:7)),yt<1||!zn[0])je=on?G(ht.charAt(1),-yi,ht.charAt(0)):ht.charAt(0);else{if(zn.length=yt,on)for(--Ue;++zn[--yt]>Ue;)zn[yt]=0,yt||(++At,zn=[1].concat(zn));for(Tt=zn.length;!zn[--Tt];);for(si=0,je="";si<=Tt;je+=ht.charAt(zn[si++]));je=G(je,At,ht.charAt(0))}return je}}(),g=function(){function we(Fe,Ue,He){var dt,ht,yt,At,Tt=0,on=Fe.length,Fn=Ue%oa,zn=Ue/oa|0;for(Fe=Fe.slice();on--;)yt=Fe[on]%oa,At=Fe[on]/oa|0,dt=zn*yt+At*Fn,ht=Fn*yt+dt%oa*oa+Tt,Tt=(ht/He|0)+(dt/oa|0)+zn*At,Fe[on]=ht%He;return Tt&&(Fe=[Tt].concat(Fe)),Fe}function ke(Fe,Ue,He,dt){var ht,yt;if(He!=dt)yt=He>dt?1:-1;else for(ht=yt=0;ht<He;ht++)if(Fe[ht]!=Ue[ht]){yt=Fe[ht]>Ue[ht]?1:-1;break}return yt}function je(Fe,Ue,He,dt){for(var ht=0;He--;)Fe[He]-=ht,ht=Fe[He]<Ue[He]?1:0,Fe[He]=ht*dt+Fe[He]-Ue[He];for(;!Fe[0]&&Fe.length>1;Fe.splice(0,1));}return function(Fe,Ue,He,dt,ht){var yt,At,Tt,on,Fn,zn,Zn,si,yi,Vr,Ei,Co,ec,Sa,Nh,hl,Dc,Ca=Fe.s==Ue.s?1:-1,Ks=Fe.c,is=Ue.c;if(!Ks||!Ks[0]||!is||!is[0])return new et(!Fe.s||!Ue.s||(Ks?is&&Ks[0]==is[0]:!is)?NaN:Ks&&Ks[0]==0||!is?Ca*0:Ca/0);for(si=new et(Ca),yi=si.c=[],At=Fe.e-Ue.e,Ca=He+At+1,ht||(ht=xo,At=As(Fe.e/hr)-As(Ue.e/hr),Ca=Ca/hr|0),Tt=0;is[Tt]==(Ks[Tt]||0);Tt++);if(is[Tt]>(Ks[Tt]||0)&&At--,Ca<0)yi.push(1),on=!0;else{for(Sa=Ks.length,hl=is.length,Tt=0,Ca+=2,Fn=ds(ht/(is[0]+1)),Fn>1&&(is=we(is,Fn,ht),Ks=we(Ks,Fn,ht),hl=is.length,Sa=Ks.length),ec=hl,Vr=Ks.slice(0,hl),Ei=Vr.length;Ei<hl;Vr[Ei++]=0);Dc=is.slice(),Dc=[0].concat(Dc),Nh=is[0],is[1]>=ht/2&&Nh++;do{if(Fn=0,yt=ke(is,Vr,hl,Ei),yt<0){if(Co=Vr[0],hl!=Ei&&(Co=Co*ht+(Vr[1]||0)),Fn=ds(Co/Nh),Fn>1)for(Fn>=ht&&(Fn=ht-1),zn=we(is,Fn,ht),Zn=zn.length,Ei=Vr.length;ke(zn,Vr,Zn,Ei)==1;)Fn--,je(zn,hl<Zn?Dc:is,Zn,ht),Zn=zn.length,yt=1;else Fn==0&&(yt=Fn=1),zn=is.slice(),Zn=zn.length;if(Zn<Ei&&(zn=[0].concat(zn)),je(Vr,zn,Ei,ht),Ei=Vr.length,yt==-1)for(;ke(is,Vr,hl,Ei)<1;)Fn++,je(Vr,hl<Ei?Dc:is,Ei,ht),Ei=Vr.length}else yt===0&&(Fn++,Vr=[0]);yi[Tt++]=Fn,Vr[0]?Vr[Ei++]=Ks[ec]||0:(Vr=[Ks[ec]],Ei=1)}while((ec++<Sa||Vr[0]!=null)&&Ca--);on=Vr[0]!=null,yi[0]||yi.splice(0,1)}if(ht==xo){for(Tt=1,Ca=yi[0];Ca>=10;Ca/=10,Tt++);Ct(si,He+(si.e=Tt+At*hr-1)+1,dt,on)}else si.e=At,si.r=+on;return si}}();function st(we,ke,je,Fe){var Ue,He,dt,ht,yt;if(je==null?je=ae:u(je,0,8),!we.c)return we.toString();if(Ue=we.c[0],dt=we.e,ke==null)yt=Ts(we.c),yt=Fe==1||Fe==2&&(dt<=be||dt>=Ce)?P(yt,dt):G(yt,dt,"0");else if(we=Ct(new et(we),ke,je),He=we.e,yt=Ts(we.c),ht=yt.length,Fe==1||Fe==2&&(ke<=He||He<=be)){for(;ht<ke;yt+="0",ht++);yt=P(yt,He)}else if(ke-=dt,yt=G(yt,He,"0"),He+1>ht){if(--ke>0)for(yt+=".";ke--;yt+="0");}else if(ke+=He-ht,ke>0)for(He+1==ht&&(yt+=".");ke--;yt+="0");return we.s<0&&Ue?"-"+yt:yt}function gt(we,ke){for(var je,Fe,Ue=1,He=new et(we[0]);Ue<we.length;Ue++)Fe=new et(we[Ue]),(!Fe.s||(je=aa(He,Fe))===ke||je===0&&He.s===ke)&&(He=Fe);return He}function zt(we,ke,je){for(var Fe=1,Ue=ke.length;!ke[--Ue];ke.pop());for(Ue=ke[0];Ue>=10;Ue/=10,Fe++);return(je=Fe+je*hr-1)>We?we.c=we.e=null:je<tt?we.c=[we.e=0]:(we.e=je,we.c=ke),we}C=function(){var we=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,je=/^\.([^.]+)$/,Fe=/^-?(Infinity|NaN)$/,Ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(He,dt,ht,yt){var At,Tt=ht?dt:dt.replace(Ue,"");if(Fe.test(Tt))He.s=isNaN(Tt)?null:Tt<0?-1:1;else{if(!ht&&(Tt=Tt.replace(we,function(on,Fn,zn){return At=(zn=zn.toLowerCase())=="x"?16:zn=="b"?2:8,!yt||yt==At?Fn:on}),yt&&(At=yt,Tt=Tt.replace(ke,"$1").replace(je,"0.$1")),dt!=Tt))return new et(Tt,At);if(et.DEBUG)throw Error(xi+"Not a"+(yt?" base "+yt:"")+" number: "+dt);He.s=null}He.c=He.e=null}}();function Ct(we,ke,je,Fe){var Ue,He,dt,ht,yt,At,Tt,on=we.c,Fn=Fa;if(on){e:{for(Ue=1,ht=on[0];ht>=10;ht/=10,Ue++);if(He=ke-Ue,He<0)He+=hr,dt=ke,yt=on[At=0],Tt=ds(yt/Fn[Ue-dt-1]%10);else if(At=xa((He+1)/hr),At>=on.length)if(Fe){for(;on.length<=At;on.push(0));yt=Tt=0,Ue=1,He%=hr,dt=He-hr+1}else break e;else{for(yt=ht=on[At],Ue=1;ht>=10;ht/=10,Ue++);He%=hr,dt=He-hr+Ue,Tt=dt<0?0:ds(yt/Fn[Ue-dt-1]%10)}if(Fe=Fe||ke<0||on[At+1]!=null||(dt<0?yt:yt%Fn[Ue-dt-1]),Fe=je<4?(Tt||Fe)&&(je==0||je==(we.s<0?3:2)):Tt>5||Tt==5&&(je==4||Fe||je==6&&(He>0?dt>0?yt/Fn[Ue-dt]:0:on[At-1])%10&1||je==(we.s<0?8:7)),ke<1||!on[0])return on.length=0,Fe?(ke-=we.e+1,on[0]=Fn[(hr-ke%hr)%hr],we.e=-ke||0):on[0]=we.e=0,we;if(He==0?(on.length=At,ht=1,At--):(on.length=At+1,ht=Fn[hr-He],on[At]=dt>0?ds(yt/Fn[Ue-dt]%Fn[dt])*ht:0),Fe)for(;;)if(At==0){for(He=1,dt=on[0];dt>=10;dt/=10,He++);for(dt=on[0]+=ht,ht=1;dt>=10;dt/=10,ht++);He!=ht&&(we.e++,on[0]==xo&&(on[0]=1));break}else{if(on[At]+=ht,on[At]!=xo)break;on[At--]=0,ht=1}for(He=on.length;on[--He]===0;on.pop());}we.e>We?we.c=we.e=null:we.e<tt&&(we.c=[we.e=0])}return we}function Bt(we){var ke,je=we.e;return je===null?we.toString():(ke=Ts(we.c),ke=je<=be||je>=Ce?P(ke,je):G(ke,je,"0"),we.s<0?"-"+ke:ke)}return M.absoluteValue=M.abs=function(){var we=new et(this);return we.s<0&&(we.s=1),we},M.comparedTo=function(we,ke){return aa(this,new et(we,ke))},M.decimalPlaces=M.dp=function(we,ke){var je,Fe,Ue,He=this;if(we!=null)return u(we,0,uo),ke==null?ke=ae:u(ke,0,8),Ct(new et(He),we+He.e+1,ke);if(!(je=He.c))return null;if(Fe=((Ue=je.length-1)-As(this.e/hr))*hr,Ue=je[Ue])for(;Ue%10==0;Ue/=10,Fe--);return Fe<0&&(Fe=0),Fe},M.dividedBy=M.div=function(we,ke){return g(this,new et(we,ke),te,ae)},M.dividedToIntegerBy=M.idiv=function(we,ke){return g(this,new et(we,ke),0,1)},M.exponentiatedBy=M.pow=function(we,ke){var je,Fe,Ue,He,dt,ht,yt,At,Tt,on=this;if(we=new et(we),we.c&&!we.isInteger())throw Error(xi+"Exponent not an integer: "+Bt(we));if(ke!=null&&(ke=new et(ke)),ht=we.e>14,!on.c||!on.c[0]||on.c[0]==1&&!on.e&&on.c.length==1||!we.c||!we.c[0])return Tt=new et(Math.pow(+Bt(on),ht?we.s*(2-y(we)):+Bt(we))),ke?Tt.mod(ke):Tt;if(yt=we.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new et(NaN);Fe=!yt&&on.isInteger()&&ke.isInteger(),Fe&&(on=on.mod(ke))}else{if(we.e>9&&(on.e>0||on.e<-1||(on.e==0?on.c[0]>1||ht&&on.c[1]>=24e7:on.c[0]<8e13||ht&&on.c[0]<=9999975e7)))return He=on.s<0&&y(we)?-0:0,on.e>-1&&(He=1/He),new et(yt?1/He:He);nn&&(He=xa(nn/hr+2))}for(ht?(je=new et(.5),yt&&(we.s=1),At=y(we)):(Ue=Math.abs(+Bt(we)),At=Ue%2),Tt=new et(U);;){if(At){if(Tt=Tt.times(on),!Tt.c)break;He?Tt.c.length>He&&(Tt.c.length=He):Fe&&(Tt=Tt.mod(ke))}if(Ue){if(Ue=ds(Ue/2),Ue===0)break;At=Ue%2}else if(we=we.times(je),Ct(we,we.e+1,1),we.e>14)At=y(we);else{if(Ue=+Bt(we),Ue===0)break;At=Ue%2}on=on.times(on),He?on.c&&on.c.length>He&&(on.c.length=He):Fe&&(on=on.mod(ke))}return Fe?Tt:(yt&&(Tt=U.div(Tt)),ke?Tt.mod(ke):He?Ct(Tt,nn,ae,dt):Tt)},M.integerValue=function(we){var ke=new et(this);return we==null?we=ae:u(we,0,8),Ct(ke,ke.e+1,we)},M.isEqualTo=M.eq=function(we,ke){return aa(this,new et(we,ke))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(we,ke){return aa(this,new et(we,ke))>0},M.isGreaterThanOrEqualTo=M.gte=function(we,ke){return(ke=aa(this,new et(we,ke)))===1||ke===0},M.isInteger=function(){return!!this.c&&As(this.e/hr)>this.c.length-2},M.isLessThan=M.lt=function(we,ke){return aa(this,new et(we,ke))<0},M.isLessThanOrEqualTo=M.lte=function(we,ke){return(ke=aa(this,new et(we,ke)))===-1||ke===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(we,ke){var je,Fe,Ue,He,dt=this,ht=dt.s;if(we=new et(we,ke),ke=we.s,!ht||!ke)return new et(NaN);if(ht!=ke)return we.s=-ke,dt.plus(we);var yt=dt.e/hr,At=we.e/hr,Tt=dt.c,on=we.c;if(!yt||!At){if(!Tt||!on)return Tt?(we.s=-ke,we):new et(on?dt:NaN);if(!Tt[0]||!on[0])return on[0]?(we.s=-ke,we):new et(Tt[0]?dt:ae==3?-0:0)}if(yt=As(yt),At=As(At),Tt=Tt.slice(),ht=yt-At){for((He=ht<0)?(ht=-ht,Ue=Tt):(At=yt,Ue=on),Ue.reverse(),ke=ht;ke--;Ue.push(0));Ue.reverse()}else for(Fe=(He=(ht=Tt.length)<(ke=on.length))?ht:ke,ht=ke=0;ke<Fe;ke++)if(Tt[ke]!=on[ke]){He=Tt[ke]<on[ke];break}if(He&&(Ue=Tt,Tt=on,on=Ue,we.s=-we.s),ke=(Fe=on.length)-(je=Tt.length),ke>0)for(;ke--;Tt[je++]=0);for(ke=xo-1;Fe>ht;){if(Tt[--Fe]<on[Fe]){for(je=Fe;je&&!Tt[--je];Tt[je]=ke);--Tt[je],Tt[Fe]+=xo}Tt[Fe]-=on[Fe]}for(;Tt[0]==0;Tt.splice(0,1),--At);return Tt[0]?zt(we,Tt,At):(we.s=ae==3?-1:1,we.c=[we.e=0],we)},M.modulo=M.mod=function(we,ke){var je,Fe,Ue=this;return we=new et(we,ke),!Ue.c||!we.s||we.c&&!we.c[0]?new et(NaN):!we.c||Ue.c&&!Ue.c[0]?new et(Ue):(It==9?(Fe=we.s,we.s=1,je=g(Ue,we,0,3),we.s=Fe,je.s*=Fe):je=g(Ue,we,0,It),we=Ue.minus(je.times(we)),!we.c[0]&&It==1&&(we.s=Ue.s),we)},M.multipliedBy=M.times=function(we,ke){var je,Fe,Ue,He,dt,ht,yt,At,Tt,on,Fn,zn,Zn,si,yi,Vr=this,Ei=Vr.c,Co=(we=new et(we,ke)).c;if(!Ei||!Co||!Ei[0]||!Co[0])return!Vr.s||!we.s||Ei&&!Ei[0]&&!Co||Co&&!Co[0]&&!Ei?we.c=we.e=we.s=null:(we.s*=Vr.s,!Ei||!Co?we.c=we.e=null:(we.c=[0],we.e=0)),we;for(Fe=As(Vr.e/hr)+As(we.e/hr),we.s*=Vr.s,yt=Ei.length,on=Co.length,yt<on&&(Zn=Ei,Ei=Co,Co=Zn,Ue=yt,yt=on,on=Ue),Ue=yt+on,Zn=[];Ue--;Zn.push(0));for(si=xo,yi=oa,Ue=on;--Ue>=0;){for(je=0,Fn=Co[Ue]%yi,zn=Co[Ue]/yi|0,dt=yt,He=Ue+dt;He>Ue;)At=Ei[--dt]%yi,Tt=Ei[dt]/yi|0,ht=zn*At+Tt*Fn,At=Fn*At+ht%yi*yi+Zn[He]+je,je=(At/si|0)+(ht/yi|0)+zn*Tt,Zn[He--]=At%si;Zn[He]=je}return je?++Fe:Zn.splice(0,1),zt(we,Zn,Fe)},M.negated=function(){var we=new et(this);return we.s=-we.s||null,we},M.plus=function(we,ke){var je,Fe=this,Ue=Fe.s;if(we=new et(we,ke),ke=we.s,!Ue||!ke)return new et(NaN);if(Ue!=ke)return we.s=-ke,Fe.minus(we);var He=Fe.e/hr,dt=we.e/hr,ht=Fe.c,yt=we.c;if(!He||!dt){if(!ht||!yt)return new et(Ue/0);if(!ht[0]||!yt[0])return yt[0]?we:new et(ht[0]?Fe:Ue*0)}if(He=As(He),dt=As(dt),ht=ht.slice(),Ue=He-dt){for(Ue>0?(dt=He,je=yt):(Ue=-Ue,je=ht),je.reverse();Ue--;je.push(0));je.reverse()}for(Ue=ht.length,ke=yt.length,Ue-ke<0&&(je=yt,yt=ht,ht=je,ke=Ue),Ue=0;ke;)Ue=(ht[--ke]=ht[ke]+yt[ke]+Ue)/xo|0,ht[ke]=xo===ht[ke]?0:ht[ke]%xo;return Ue&&(ht=[Ue].concat(ht),++dt),zt(we,ht,dt)},M.precision=M.sd=function(we,ke){var je,Fe,Ue,He=this;if(we!=null&&we!==!!we)return u(we,1,uo),ke==null?ke=ae:u(ke,0,8),Ct(new et(He),we,ke);if(!(je=He.c))return null;if(Ue=je.length-1,Fe=Ue*hr+1,Ue=je[Ue]){for(;Ue%10==0;Ue/=10,Fe--);for(Ue=je[0];Ue>=10;Ue/=10,Fe++);}return we&&He.e+1>Fe&&(Fe=He.e+1),Fe},M.shiftedBy=function(we){return u(we,-9007199254740991,Ra),this.times("1e"+we)},M.squareRoot=M.sqrt=function(){var we,ke,je,Fe,Ue,He=this,dt=He.c,ht=He.s,yt=He.e,At=te+4,Tt=new et("0.5");if(ht!==1||!dt||!dt[0])return new et(!ht||ht<0&&(!dt||dt[0])?NaN:dt?He:1/0);if(ht=Math.sqrt(+Bt(He)),ht==0||ht==1/0?(ke=Ts(dt),(ke.length+yt)%2==0&&(ke+="0"),ht=Math.sqrt(+ke),yt=As((yt+1)/2)-(yt<0||yt%2),ht==1/0?ke="5e"+yt:(ke=ht.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+yt),je=new et(ke)):je=new et(ht+""),je.c[0]){for(yt=je.e,ht=yt+At,ht<3&&(ht=0);;)if(Ue=je,je=Tt.times(Ue.plus(g(He,Ue,At,1))),Ts(Ue.c).slice(0,ht)===(ke=Ts(je.c)).slice(0,ht))if(je.e<yt&&--ht,ke=ke.slice(ht-3,ht+1),ke=="9999"||!Fe&&ke=="4999"){if(!Fe&&(Ct(Ue,Ue.e+te+2,0),Ue.times(Ue).eq(He))){je=Ue;break}At+=4,ht+=4,Fe=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(Ct(je,je.e+te+2,1),we=!je.times(je).eq(He));break}}return Ct(je,je.e+te+1,ae,we)},M.toExponential=function(we,ke){return we!=null&&(u(we,0,uo),we++),st(this,we,ke,1)},M.toFixed=function(we,ke){return we!=null&&(u(we,0,uo),we=we+this.e+1),st(this,we,ke)},M.toFormat=function(we,ke,je){var Fe,Ue=this;if(je==null)we!=null&&ke&&typeof ke=="object"?(je=ke,ke=null):we&&typeof we=="object"?(je=we,we=ke=null):je=yn;else if(typeof je!="object")throw Error(xi+"Argument not an object: "+je);if(Fe=Ue.toFixed(we,ke),Ue.c){var He,dt=Fe.split("."),ht=+je.groupSize,yt=+je.secondaryGroupSize,At=je.groupSeparator||"",Tt=dt[0],on=dt[1],Fn=Ue.s<0,zn=Fn?Tt.slice(1):Tt,Zn=zn.length;if(yt&&(He=ht,ht=yt,yt=He,Zn-=He),ht>0&&Zn>0){for(He=Zn%ht||ht,Tt=zn.substr(0,He);He<Zn;He+=ht)Tt+=At+zn.substr(He,ht);yt>0&&(Tt+=At+zn.slice(He)),Fn&&(Tt="-"+Tt)}Fe=on?Tt+(je.decimalSeparator||"")+((yt=+je.fractionGroupSize)?on.replace(new RegExp("\\d{"+yt+"}\\B","g"),"$&"+(je.fractionGroupSeparator||"")):on):Tt}return(je.prefix||"")+Fe+(je.suffix||"")},M.toFraction=function(we){var ke,je,Fe,Ue,He,dt,ht,yt,At,Tt,on,Fn,zn=this,Zn=zn.c;if(we!=null&&(ht=new et(we),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(U)))throw Error(xi+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Bt(ht));if(!Zn)return new et(zn);for(ke=new et(U),At=je=new et(U),Fe=yt=new et(U),Fn=Ts(Zn),He=ke.e=Fn.length-zn.e-1,ke.c[0]=Fa[(dt=He%hr)<0?hr+dt:dt],we=!we||ht.comparedTo(ke)>0?He>0?ke:At:ht,dt=We,We=1/0,ht=new et(Fn),yt.c[0]=0;Tt=g(ht,ke,0,1),Ue=je.plus(Tt.times(Fe)),Ue.comparedTo(we)!=1;)je=Fe,Fe=Ue,At=yt.plus(Tt.times(Ue=At)),yt=Ue,ke=ht.minus(Tt.times(Ue=ke)),ht=Ue;return Ue=g(we.minus(je),Fe,0,1),yt=yt.plus(Ue.times(At)),je=je.plus(Ue.times(Fe)),yt.s=At.s=zn.s,He=He*2,on=g(At,Fe,He,ae).minus(zn).abs().comparedTo(g(yt,je,He,ae).minus(zn).abs())<1?[At,Fe]:[yt,je],We=dt,on},M.toNumber=function(){return+Bt(this)},M.toPrecision=function(we,ke){return we!=null&&u(we,1,uo),st(this,we,ke,2)},M.toString=function(we){var ke,je=this,Fe=je.s,Ue=je.e;return Ue===null?Fe?(ke="Infinity",Fe<0&&(ke="-"+ke)):ke="NaN":(we==null?ke=Ue<=be||Ue>=Ce?P(Ts(je.c),Ue):G(Ts(je.c),Ue,"0"):we===10&&lr?(je=Ct(new et(je),te+Ue+1,ae),ke=G(Ts(je.c),je.e,"0")):(u(we,2,Ln.length,"Base"),ke=_(G(Ts(je.c),Ue,"0"),10,we,Fe,!0)),Fe<0&&je.c[0]&&(ke="-"+ke)),ke},M.valueOf=M.toJSON=function(){return Bt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,d!=null&&et.set(d),et}function As(d){var g=d|0;return d>0||d===g?g:g-1}function Ts(d){for(var g,_,C=1,M=d.length,U=d[0]+"";C<M;){for(g=d[C++]+"",_=hr-g.length;_--;g="0"+g);U+=g}for(M=U.length;U.charCodeAt(--M)===48;);return U.slice(0,M+1||1)}function aa(d,g){var _,C,M=d.c,U=g.c,te=d.s,ae=g.s,be=d.e,Ce=g.e;if(!te||!ae)return null;if(_=M&&!M[0],C=U&&!U[0],_||C)return _?C?0:-ae:te;if(te!=ae)return te;if(_=te<0,C=be==Ce,!M||!U)return C?0:!M^_?1:-1;if(!C)return be>Ce^_?1:-1;for(ae=(be=M.length)<(Ce=U.length)?be:Ce,te=0;te<ae;te++)if(M[te]!=U[te])return M[te]>U[te]^_?1:-1;return be==Ce?0:be>Ce^_?1:-1}function u(d,g,_,C){if(d<g||d>_||d!==ds(d))throw Error(xi+(C||"Argument")+(typeof d=="number"?d<g||d>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function y(d){var g=d.c.length-1;return As(d.e/hr)==g&&d.c[g]%2!=0}function P(d,g){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(g<0?"e":"e+")+g}function G(d,g,_){var C,M;if(g<0){for(M=_+".";++g;M+=_);d=M+d}else if(C=d.length,++g>C){for(M=_,g-=C;--g;M+=_);d+=M}else g<C&&(d=d.slice(0,g)+"."+d.slice(g));return d}var ue=sd(),Ee=ue,ut=class{constructor(d){Xe(this,"key");Xe(this,"left",null);Xe(this,"right",null);this.key=d}},Nt=class extends ut{constructor(d){super(d)}},Gt=class{constructor(){Xe(this,"size",0);Xe(this,"modificationCount",0);Xe(this,"splayCount",0)}splay(d){let g=this.root;if(g==null)return this.compare(d,d),-1;let _=null,C=null,M=null,U=null,te=g,ae=this.compare,be;for(;;)if(be=ae(te.key,d),be>0){let Ce=te.left;if(Ce==null||(be=ae(Ce.key,d),be>0&&(te.left=Ce.right,Ce.right=te,te=Ce,Ce=te.left,Ce==null)))break;_==null?C=te:_.left=te,_=te,te=Ce}else if(be<0){let Ce=te.right;if(Ce==null||(be=ae(Ce.key,d),be<0&&(te.right=Ce.left,Ce.left=te,te=Ce,Ce=te.right,Ce==null)))break;M==null?U=te:M.right=te,M=te,te=Ce}else break;return M!=null&&(M.right=te.left,te.left=U),_!=null&&(_.left=te.right,te.right=C),this.root!==te&&(this.root=te,this.splayCount++),be}splayMin(d){let g=d,_=g.left;for(;_!=null;){let C=_;g.left=C.right,C.right=g,g=C,_=g.left}return g}splayMax(d){let g=d,_=g.right;for(;_!=null;){let C=_;g.right=C.left,C.left=g,g=C,_=g.right}return g}_delete(d){if(this.root==null||this.splay(d)!=0)return null;let g=this.root,_=g,C=g.left;if(this.size--,C==null)this.root=g.right;else{let M=g.right;g=this.splayMax(C),g.right=M,this.root=g}return this.modificationCount++,_}addNewRoot(d,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=d;return}g<0?(d.left=_,d.right=_.right,_.right=null):(d.right=_,d.left=_.left,_.left=null),this.root=d}_first(){let d=this.root;return d==null?null:(this.root=this.splayMin(d),this.root)}_last(){let d=this.root;return d==null?null:(this.root=this.splayMax(d),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(d){return this.validKey(d)&&this.splay(d)==0}defaultCompare(){return(d,g)=>d<g?-1:d>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:d=>{this.root=d},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:d=>{this.splayCount=d},splay:d=>this.splay(d),has:d=>this.has(d)}}},an=class xg extends Gt{constructor(_,C){super();Xe(this,"root",null);Xe(this,"compare");Xe(this,"validKey");Xe(this,Mn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=C??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let C of _)this.delete(C)}forEach(_){let C=this[Symbol.iterator](),M;for(;M=C.next(),!M.done;)_(M.value,M.value,this)}add(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Nt(_),C),this}addAndReturn(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Nt(_),C),this.root.key}addAll(_){for(let C of _)this.add(C)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let C=this.root.left;if(C==null)return null;let M=C.right;for(;M!=null;)C=M,M=C.right;return C.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let C=this.root.right;if(C==null)return null;let M=C.left;for(;M!=null;)C=M,M=C.left;return C.key}retainAll(_){let C=new xg(this.compare,this.validKey),M=this.modificationCount;for(let U of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(U)&&this.splay(U)==0&&C.add(this.root.key)}C.size!=this.size&&(this.root=C.root,this.size=C.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let C=new xg(this.compare,this.validKey);for(let M of this)_.has(M)&&C.add(M);return C}difference(_){let C=new xg(this.compare,this.validKey);for(let M of this)_.has(M)||C.add(M);return C}union(_){let C=this.clone();return C.addAll(_),C}clone(){let _=new xg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function C(U,te){let ae,be;do{if(ae=U.left,be=U.right,ae!=null){let Ce=new Nt(ae.key);te.left=Ce,C(ae,Ce)}if(be!=null){let Ce=new Nt(be.key);te.right=Ce,U=be,te=Ce}}while(be!=null)}let M=new Nt(_.key);return C(_,M),M}toSet(){return this.clone()}entries(){return new kr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Kn=Symbol.iterator,Mn=Symbol.toStringTag,Kn)](){return new Yn(this.wrap())}},On=class{constructor(d){Xe(this,"tree");Xe(this,"path",new Array);Xe(this,"modificationCount",null);Xe(this,"splayCount");this.tree=d,this.splayCount=d.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let d=this.path[this.path.length-1];return this.getValue(d)}rebuildPath(d){this.path.splice(0,this.path.length),this.tree.splay(d),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(d){for(;d!=null;)this.path.push(d),d=d.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let d=this.path[this.path.length-1],g=d.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===d;)d=this.path.pop();return this.path.length>0}},Yn=class extends On{getValue(d){return d.key}},kr=class extends On{getValue(d){return[d.key,d.key]}},hs=d=>d,Wi=d=>{if(d){let g=new an(wo(d)),_=new an(wo(d)),C=(U,te)=>te.addAndReturn(U),M=U=>({x:C(U.x,g),y:C(U.y,_)});return M({x:new Ee(0),y:new Ee(0)}),M}return hs},Ds=d=>({set:g=>{Ii=Ds(g)},reset:()=>Ds(d),compare:wo(d),snap:Wi(d),orient:Go(d)}),Ii=Ds(),Lo=(d,g)=>d.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(d.ur.x)&&d.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(d.ur.y),od=(d,g)=>{if(g.ur.x.isLessThan(d.ll.x)||d.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(d.ll.y)||d.ur.y.isLessThan(g.ll.y))return null;let _=d.ll.x.isLessThan(g.ll.x)?g.ll.x:d.ll.x,C=d.ur.x.isLessThan(g.ur.x)?d.ur.x:g.ur.x,M=d.ll.y.isLessThan(g.ll.y)?g.ll.y:d.ll.y,U=d.ur.y.isLessThan(g.ur.y)?d.ur.y:g.ur.y;return{ll:{x:_,y:M},ur:{x:C,y:U}}},La=(d,g)=>d.x.times(g.y).minus(d.y.times(g.x)),la=(d,g)=>d.x.times(g.x).plus(d.y.times(g.y)),Wo=d=>la(d,d).sqrt(),Th=(d,g,_)=>{let C={x:g.x.minus(d.x),y:g.y.minus(d.y)},M={x:_.x.minus(d.x),y:_.y.minus(d.y)};return La(M,C).div(Wo(M)).div(Wo(C))},Pu=(d,g,_)=>{let C={x:g.x.minus(d.x),y:g.y.minus(d.y)},M={x:_.x.minus(d.x),y:_.y.minus(d.y)};return la(M,C).div(Wo(M)).div(Wo(C))},ii=(d,g,_)=>g.y.isZero()?null:{x:d.x.plus(g.x.div(g.y).times(_.minus(d.y))),y:_},Ys=(d,g,_)=>g.x.isZero()?null:{x:_,y:d.y.plus(g.y.div(g.x).times(_.minus(d.x)))},Ie=(d,g,_,C)=>{if(g.x.isZero())return Ys(_,C,d.x);if(C.x.isZero())return Ys(d,g,_.x);if(g.y.isZero())return ii(_,C,d.y);if(C.y.isZero())return ii(d,g,_.y);let M=La(g,C);if(M.isZero())return null;let U={x:_.x.minus(d.x),y:_.y.minus(d.y)},te=La(U,g).div(M),ae=La(U,C).div(M),be=d.x.plus(ae.times(g.x)),Ce=_.x.plus(te.times(C.x)),tt=d.y.plus(ae.times(g.y)),We=_.y.plus(te.times(C.y)),_t=be.plus(Ce).div(2),It=tt.plus(We).div(2);return{x:_t,y:It}},So=class BE{constructor(g,_){Xe(this,"point");Xe(this,"isLeft");Xe(this,"segment");Xe(this,"otherSE");Xe(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let C=BE.comparePoints(g.point,_.point);return C!==0?C:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:Ns.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let C=0,M=_.length;C<M;C++){let U=_[C];this.point.events.push(U),U.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let C=this.point.events[_];if(C.segment.consumedBy===void 0)for(let M=_+1;M<g;M++){let U=this.point.events[M];U.consumedBy===void 0&&C.otherSE.point.events===U.otherSE.point.events&&C.segment.consume(U.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,C=this.point.events.length;_<C;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&g.push(M)}return g}getLeftmostComparator(g){let _=new Map,C=M=>{let U=M.otherSE;_.set(M,{sine:Th(this.point,g.point,U.point),cosine:Pu(this.point,g.point,U.point)})};return(M,U)=>{_.has(M)||C(M),_.has(U)||C(U);let{sine:te,cosine:ae}=_.get(M),{sine:be,cosine:Ce}=_.get(U);return te.isGreaterThanOrEqualTo(0)&&be.isGreaterThanOrEqualTo(0)?ae.isLessThan(Ce)?1:ae.isGreaterThan(Ce)?-1:0:te.isLessThan(0)&&be.isLessThan(0)?ae.isLessThan(Ce)?-1:ae.isGreaterThan(Ce)?1:0:be.isLessThan(te)?-1:be.isGreaterThan(te)?1:0}}},Qu=0,Ns=class iv{constructor(g,_,C,M){Xe(this,"id");Xe(this,"leftSE");Xe(this,"rightSE");Xe(this,"rings");Xe(this,"windings");Xe(this,"ringOut");Xe(this,"consumedBy");Xe(this,"prev");Xe(this,"_prevInResult");Xe(this,"_beforeState");Xe(this,"_afterState");Xe(this,"_isInResult");this.id=++Qu,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=C,this.windings=M}static compare(g,_){let C=g.leftSE.point.x,M=_.leftSE.point.x,U=g.rightSE.point.x,te=_.rightSE.point.x;if(te.isLessThan(C))return 1;if(U.isLessThan(M))return-1;let ae=g.leftSE.point.y,be=_.leftSE.point.y,Ce=g.rightSE.point.y,tt=_.rightSE.point.y;if(C.isLessThan(M)){if(be.isLessThan(ae)&&be.isLessThan(Ce))return 1;if(be.isGreaterThan(ae)&&be.isGreaterThan(Ce))return-1;let We=g.comparePoint(_.leftSE.point);if(We<0)return 1;if(We>0)return-1;let _t=_.comparePoint(g.rightSE.point);return _t!==0?_t:-1}if(C.isGreaterThan(M)){if(ae.isLessThan(be)&&ae.isLessThan(tt))return-1;if(ae.isGreaterThan(be)&&ae.isGreaterThan(tt))return 1;let We=_.comparePoint(g.leftSE.point);if(We!==0)return We;let _t=g.comparePoint(_.rightSE.point);return _t<0?1:_t>0?-1:1}if(ae.isLessThan(be))return-1;if(ae.isGreaterThan(be))return 1;if(U.isLessThan(te)){let We=_.comparePoint(g.rightSE.point);if(We!==0)return We}if(U.isGreaterThan(te)){let We=g.comparePoint(_.rightSE.point);if(We<0)return 1;if(We>0)return-1}if(!U.eq(te)){let We=Ce.minus(ae),_t=U.minus(C),It=tt.minus(be),nn=te.minus(M);if(We.isGreaterThan(_t)&&It.isLessThan(nn))return 1;if(We.isLessThan(_t)&&It.isGreaterThan(nn))return-1}return U.isGreaterThan(te)?1:U.isLessThan(te)||Ce.isLessThan(tt)?-1:Ce.isGreaterThan(tt)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,C){let M,U,te,ae=So.comparePoints(g,_);if(ae<0)M=g,U=_,te=1;else if(ae>0)M=_,U=g,te=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let be=new So(M,!0),Ce=new So(U,!1);return new iv(be,Ce,[C],[te])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return Ii.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),C=g.bbox(),M=od(_,C);if(M===null)return null;let U=this.leftSE.point,te=this.rightSE.point,ae=g.leftSE.point,be=g.rightSE.point,Ce=Lo(_,ae)&&this.comparePoint(ae)===0,tt=Lo(C,U)&&g.comparePoint(U)===0,We=Lo(_,be)&&this.comparePoint(be)===0,_t=Lo(C,te)&&g.comparePoint(te)===0;if(tt&&Ce)return _t&&!We?te:!_t&&We?be:null;if(tt)return We&&U.x.eq(be.x)&&U.y.eq(be.y)?null:U;if(Ce)return _t&&te.x.eq(ae.x)&&te.y.eq(ae.y)?null:ae;if(_t&&We)return null;if(_t)return te;if(We)return be;let It=Ie(U,this.vector(),ae,g.vector());return It===null||!Lo(M,It)?null:Ii.snap(It)}split(g){let _=[],C=g.events!==void 0,M=new So(g,!0),U=new So(g,!1),te=this.rightSE;this.replaceRightSE(U),_.push(U),_.push(M);let ae=new iv(M,te,this.rings.slice(),this.windings.slice());return So.comparePoints(ae.leftSE.point,ae.rightSE.point)>0&&ae.swapEvents(),So.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),C&&(M.checkForConsuming(),U.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,C=this.windings.length;_<C;_++)this.windings[_]*=-1}consume(g){let _=this,C=g;for(;_.consumedBy;)_=_.consumedBy;for(;C.consumedBy;)C=C.consumedBy;let M=iv.compare(_,C);if(M!==0){if(M>0){let U=_;_=C,C=U}if(_.prev===C){let U=_;_=C,C=U}for(let U=0,te=C.rings.length;U<te;U++){let ae=C.rings[U],be=C.windings[U],Ce=_.rings.indexOf(ae);Ce===-1?(_.rings.push(ae),_.windings.push(be)):_.windings[Ce]+=be}C.rings=null,C.windings=null,C.consumedBy=_,C.leftSE.consumedBy=_.leftSE,C.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,C=this._afterState.windings,M=this._afterState.multiPolys;for(let ae=0,be=this.rings.length;ae<be;ae++){let Ce=this.rings[ae],tt=this.windings[ae],We=_.indexOf(Ce);We===-1?(_.push(Ce),C.push(tt)):C[We]+=tt}let U=[],te=[];for(let ae=0,be=_.length;ae<be;ae++){if(C[ae]===0)continue;let Ce=_[ae],tt=Ce.poly;if(te.indexOf(tt)===-1)if(Ce.isExterior)U.push(tt);else{te.indexOf(tt)===-1&&te.push(tt);let We=U.indexOf(Ce.poly);We!==-1&&U.splice(We,1)}}for(let ae=0,be=U.length;ae<be;ae++){let Ce=U[ae].multiPoly;M.indexOf(Ce)===-1&&M.push(Ce)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Ud.type){case"union":{let C=g.length===0,M=_.length===0;this._isInResult=C!==M;break}case"intersection":{let C,M;g.length<_.length?(C=g.length,M=_.length):(C=_.length,M=g.length),this._isInResult=M===Ud.numMultiPolys&&C<M;break}case"xor":{let C=Math.abs(g.length-_.length);this._isInResult=C%2===1;break}case"difference":{let C=M=>M.length===1&&M[0].isSubject;this._isInResult=C(g)!==C(_);break}}return this._isInResult}},Dr=class{constructor(d,g,_){Xe(this,"poly");Xe(this,"isExterior");Xe(this,"segments");Xe(this,"bbox");if(!Array.isArray(d)||d.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof d[0][0]!="number"||typeof d[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let C=Ii.snap({x:new Ee(d[0][0]),y:new Ee(d[0][1])});this.bbox={ll:{x:C.x,y:C.y},ur:{x:C.x,y:C.y}};let M=C;for(let U=1,te=d.length;U<te;U++){if(typeof d[U][0]!="number"||typeof d[U][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ae=Ii.snap({x:new Ee(d[U][0]),y:new Ee(d[U][1])});ae.x.eq(M.x)&&ae.y.eq(M.y)||(this.segments.push(Ns.fromRing(M,ae,this)),ae.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ae.x),ae.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ae.y),ae.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ae.x),ae.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ae.y),M=ae)}(!C.x.eq(M.x)||!C.y.eq(M.y))&&this.segments.push(Ns.fromRing(M,C,this))}getSweepEvents(){let d=[];for(let g=0,_=this.segments.length;g<_;g++){let C=this.segments[g];d.push(C.leftSE),d.push(C.rightSE)}return d}},$d=class{constructor(d,g){Xe(this,"multiPoly");Xe(this,"exteriorRing");Xe(this,"interiorRings");Xe(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Dr(d[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,C=d.length;_<C;_++){let M=new Dr(d[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=g}getSweepEvents(){let d=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let C=this.interiorRings[g].getSweepEvents();for(let M=0,U=C.length;M<U;M++)d.push(C[M])}return d}},Mf=class{constructor(d,g){Xe(this,"isSubject");Xe(this,"polys");Xe(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof d[0][0][0]=="number"&&(d=[d])}catch{}this.polys=[],this.bbox={ll:{x:new Ee(Number.POSITIVE_INFINITY),y:new Ee(Number.POSITIVE_INFINITY)},ur:{x:new Ee(Number.NEGATIVE_INFINITY),y:new Ee(Number.NEGATIVE_INFINITY)}};for(let _=0,C=d.length;_<C;_++){let M=new $d(d[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=g}getSweepEvents(){let d=[];for(let g=0,_=this.polys.length;g<_;g++){let C=this.polys[g].getSweepEvents();for(let M=0,U=C.length;M<U;M++)d.push(C[M])}return d}},Vd=class wb{constructor(g){Xe(this,"events");Xe(this,"poly");Xe(this,"_isExteriorRing");Xe(this,"_enclosingRing");this.events=g;for(let _=0,C=g.length;_<C;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let C=0,M=g.length;C<M;C++){let U=g[C];if(!U.isInResult()||U.ringOut)continue;let te=null,ae=U.leftSE,be=U.rightSE,Ce=[ae],tt=ae.point,We=[];for(;te=ae,ae=be,Ce.push(ae),ae.point!==tt;)for(;;){let _t=ae.getAvailableLinkedEvents();if(_t.length===0){let yn=Ce[0].point,Ln=Ce[Ce.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${Ln.x}, ${Ln.y}].`)}if(_t.length===1){be=_t[0].otherSE;break}let It=null;for(let yn=0,Ln=We.length;yn<Ln;yn++)if(We[yn].point===ae.point){It=yn;break}if(It!==null){let yn=We.splice(It)[0],Ln=Ce.splice(yn.index);Ln.unshift(Ln[0].otherSE),_.push(new wb(Ln.reverse()));continue}We.push({index:Ce.length,point:ae.point});let nn=ae.getLeftmostComparator(te);be=_t.sort(nn)[0].otherSE;break}_.push(new wb(Ce))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ce=1,tt=this.events.length-1;Ce<tt;Ce++){let We=this.events[Ce].point,_t=this.events[Ce+1].point;Ii.orient(We,g,_t)!==0&&(_.push(We),g=We)}if(_.length===1)return null;let C=_[0],M=_[1];Ii.orient(C,g,M)===0&&_.shift(),_.push(_[0]);let U=this.isExteriorRing()?1:-1,te=this.isExteriorRing()?0:_.length-1,ae=this.isExteriorRing()?_.length:-1,be=[];for(let Ce=te;Ce!=ae;Ce+=U)be.push([_[Ce].x.toNumber(),_[Ce].y.toNumber()]);return be}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,U;let g=this.events[0];for(let te=1,ae=this.events.length;te<ae;te++){let be=this.events[te];So.compare(g,be)>0&&(g=be)}let _=g.segment.prevInResult(),C=_?_.prevInResult():null;for(;;){if(!_)return null;if(!C)return _.ringOut;if(C.ringOut!==_.ringOut)return((M=C.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:(U=_.ringOut)==null?void 0:U.enclosingRing();_=C.prevInResult(),C=_?_.prevInResult():null}}},dl=class{constructor(d){Xe(this,"exteriorRing");Xe(this,"interiorRings");this.exteriorRing=d,d.poly=this,this.interiorRings=[]}addInterior(d){this.interiorRings.push(d),d.poly=this}getGeom(){let d=this.exteriorRing.getGeom();if(d===null)return null;let g=[d];for(let _=0,C=this.interiorRings.length;_<C;_++){let M=this.interiorRings[_].getGeom();M!==null&&g.push(M)}return g}},ad=class{constructor(d){Xe(this,"rings");Xe(this,"polys");this.rings=d,this.polys=this._composePolys(d)}getGeom(){let d=[];for(let g=0,_=this.polys.length;g<_;g++){let C=this.polys[g].getGeom();C!==null&&d.push(C)}return d}_composePolys(d){var _;let g=[];for(let C=0,M=d.length;C<M;C++){let U=d[C];if(!U.poly)if(U.isExteriorRing())g.push(new dl(U));else{let te=U.enclosingRing();te!=null&&te.poly||g.push(new dl(te)),(_=te==null?void 0:te.poly)==null||_.addInterior(U)}}return g}},Dh=class{constructor(d,g=Ns.compare){Xe(this,"queue");Xe(this,"tree");Xe(this,"segments");this.queue=d,this.tree=new an(g),this.segments=[]}process(d){let g=d.segment,_=[];if(d.consumedBy)return d.isLeft?this.queue.delete(d.otherSE):this.tree.delete(g),_;d.isLeft&&this.tree.add(g);let C=g,M=g;do C=this.tree.lastBefore(C);while(C!=null&&C.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(d.isLeft){let U=null;if(C){let ae=C.getIntersection(g);if(ae!==null&&(g.isAnEndpoint(ae)||(U=ae),!C.isAnEndpoint(ae))){let be=this._splitSafely(C,ae);for(let Ce=0,tt=be.length;Ce<tt;Ce++)_.push(be[Ce])}}let te=null;if(M){let ae=M.getIntersection(g);if(ae!==null&&(g.isAnEndpoint(ae)||(te=ae),!M.isAnEndpoint(ae))){let be=this._splitSafely(M,ae);for(let Ce=0,tt=be.length;Ce<tt;Ce++)_.push(be[Ce])}}if(U!==null||te!==null){let ae=null;U===null?ae=te:te===null?ae=U:ae=So.comparePoints(U,te)<=0?U:te,this.queue.delete(g.rightSE),_.push(g.rightSE);let be=g.split(ae);for(let Ce=0,tt=be.length;Ce<tt;Ce++)_.push(be[Ce])}_.length>0?(this.tree.delete(g),_.push(d)):(this.segments.push(g),g.prev=C)}else{if(C&&M){let U=C.getIntersection(M);if(U!==null){if(!C.isAnEndpoint(U)){let te=this._splitSafely(C,U);for(let ae=0,be=te.length;ae<be;ae++)_.push(te[ae])}if(!M.isAnEndpoint(U)){let te=this._splitSafely(M,U);for(let ae=0,be=te.length;ae<be;ae++)_.push(te[ae])}}}this.tree.delete(g)}return _}_splitSafely(d,g){this.tree.delete(d);let _=d.rightSE;this.queue.delete(_);let C=d.split(g);return C.push(_),d.consumedBy===void 0&&this.tree.add(d),C}},Vp=class{constructor(){Xe(this,"type");Xe(this,"numMultiPolys")}run(d,g,_){Tc.type=d;let C=[new Mf(g,!0)];for(let be=0,Ce=_.length;be<Ce;be++)C.push(new Mf(_[be],!1));if(Tc.numMultiPolys=C.length,Tc.type==="difference"){let be=C[0],Ce=1;for(;Ce<C.length;)od(C[Ce].bbox,be.bbox)!==null?Ce++:C.splice(Ce,1)}if(Tc.type==="intersection")for(let be=0,Ce=C.length;be<Ce;be++){let tt=C[be];for(let We=be+1,_t=C.length;We<_t;We++)if(od(tt.bbox,C[We].bbox)===null)return[]}let M=new an(So.compare);for(let be=0,Ce=C.length;be<Ce;be++){let tt=C[be].getSweepEvents();for(let We=0,_t=tt.length;We<_t;We++)M.add(tt[We])}let U=new Dh(M),te=null;for(M.size!=0&&(te=M.first(),M.delete(te));te;){let be=U.process(te);for(let Ce=0,tt=be.length;Ce<tt;Ce++){let We=be[Ce];We.consumedBy===void 0&&M.add(We)}M.size!=0?(te=M.first(),M.delete(te)):te=null}Ii.reset();let ae=Vd.factory(U.segments);return new ad(ae).getGeom()}},Tc=new Vp,Ud=Tc,au=(d,...g)=>Ud.run("intersection",d,g),Up=(d,...g)=>Ud.run("difference",d,g);Ii.set;function Hd(d){let g={type:"Feature"};return g.geometry=d,g}function Gd(d){return d.type==="Feature"?d.geometry:d}function kf(d){return d&&d.geometry&&d.geometry.coordinates?d.geometry.coordinates:d}function Af(d){return Hd({type:"LineString",coordinates:d})}function ja(d){return Hd({type:"MultiLineString",coordinates:d})}function Tf(d){return Hd({type:"Polygon",coordinates:d})}function Df(d){return Hd({type:"MultiPolygon",coordinates:d})}function Nf(d,g){let _=Gd(d),C=Gd(g),M=au(_.coordinates,C.coordinates);return M.length===0?null:M.length===1?Tf(M[0]):Df(M)}function w(d,g){let _=Gd(d),C=Gd(g),M=Up(_.coordinates,C.coordinates);return M.length===0?null:M.length===1?Tf(M[0]):Df(M)}function D(d){return Array.isArray(d)?1+D(d[0]):-1}function W(d){d instanceof L.Polyline&&(d=d.toGeoJSON(15));let g=kf(d),_=D(g),C=[];return _>1?g.forEach(M=>{C.push(Af(M))}):C.push(d),C}function ce(d){let g=[];return d.eachLayer(_=>{g.push(kf(_.toGeoJSON(15)))}),ja(g)}ts.Cut=ts.Polygon.extend({initialize(d){this._map=d,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let g=L.polygon(d,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:C,originalLayer:M})=>{this._fireCut(M,C,M),this._fireCut(this._map,C,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(d){let g=this._map._layers,_=d._latlngInfos||[];Object.keys(g).map(C=>g[C]).filter(C=>C.pm).filter(C=>!C._pmTempLayer).filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1).filter(C=>C instanceof L.Polyline).filter(C=>C!==d).filter(C=>C.pm.options.allowCutting).filter(C=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(C)>-1:!0).filter(C=>!this._layerGroup.hasLayer(C)).filter(C=>{try{let M=!!_o(d.toGeoJSON(15),C.toGeoJSON(15)).features.length>0;return M||C instanceof L.Polyline&&!(C instanceof L.Polygon)?M:!!Nf(d.toGeoJSON(15),C.toGeoJSON(15))}catch{return C instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(C=>{let M;if(C instanceof L.Polygon){M=L.polygon(C.getLatLngs());let be=M.getLatLngs();_.forEach(Ce=>{if(Ce&&Ce.snapInfo){let{latlng:tt}=Ce,We=this._calcClosestLayer(tt,[M]);if(We&&We.segment&&We.distance<this.options.snapDistance){let{segment:_t}=We;if(_t&&_t.length===2){let{indexPath:It,parentPath:nn,newIndex:yn}=L.PM.Utils._getIndexFromSegment(be,_t);(It.length>1?(0,Ci.default)(be,nn):be).splice(yn,0,tt)}}}})}else M=C;let U=this._cutLayer(d,M),te=L.geoJSON(U,C.options);te.getLayers().length===1&&([te]=te.getLayers()),this._setPane(te,"layerPane");let ae=te.addTo(this._map.pm._getContainingLayer());if(ae.pm.enable(C.pm.options),ae.pm.disable(),C._pmTempLayer=!0,d._pmTempLayer=!0,C.remove(),C.removeFrom(this._map.pm._getContainingLayer()),d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),ae.getLayers&&ae.getLayers().length===0&&this._map.pm.removeLayer({target:ae}),ae instanceof L.LayerGroup?(ae.eachLayer(be=>{this._addDrawnLayerProp(be)}),this._addDrawnLayerProp(ae)):this._addDrawnLayerProp(ae),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let be=this.options.layersToCut.indexOf(C);be>-1&&this.options.layersToCut.splice(be,1)}this._editedLayers.push({layer:ae,originalLayer:C})})},_cutLayer(d,g){let _=L.geoJSON(),C;if(g instanceof L.Polygon)C=w(g.toGeoJSON(15),d.toGeoJSON(15));else{let M=W(g);M.forEach(U=>{let te=Gn(U,d.toGeoJSON(15)),ae;te&&te.features.length>0?ae=L.geoJSON(te):ae=L.geoJSON(U),ae.getLayers().forEach(be=>{ya(d.toGeoJSON(15),be.toGeoJSON(15))||be.addTo(_)})}),M.length>1?C=ce(_):C=_.toGeoJSON(15)}return C},_change:L.Util.falseFn}),ts.Text=ts.extend({initialize(d){this._map=d,this._shape="Text",this.toolbarButtonName="drawText"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var d;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(d=this._hintMarker)==null||d.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let g=d;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(d){var M,U,te,ae;if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let be=this.options.textOptions.className.split(" ");this.textArea.classList.add(...be)}let _=this._createTextIcon(this.textArea),C=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(C,"markerPane"),this._finishLayer(C),C.pm||(C.options.draggable=!1),C.addTo(this._map.pm._getContainingLayer()),C.pm){C.pm.textArea=this.textArea,L.setOptions(C.pm,{removeIfEmpty:((U=this.options.textOptions)==null?void 0:U.removeIfEmpty)??!0});let be=((te=this.options.textOptions)==null?void 0:te.focusAfterDraw)??!0;C.pm._createTextMarker(be),(ae=this.options.textOptions)!=null&&ae.text&&C.pm.setText(this.options.textOptions.text)}this._fireCreate(C),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(d){this.enable(),this._hintMarker.setLatLng(d.latlng)},_createTextArea(){let d=document.createElement("textarea");return d.readOnly=!0,d.classList.add("pm-textarea","pm-disabled"),d},_createTextIcon(d){return L.divIcon({className:"pm-text-marker",html:d})}});var Le={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ai(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let d=this._getDOMElem();d&&(ai(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(d)):L.DomEvent.on(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ai(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let d=this._getDOMElem();d&&(ai(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(d)):L.DomEvent.off(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(d){let g=d.touches?d.touches[0]:d,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(d){let g=d.touches?d.touches[0]:d,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(d){let g={originalEvent:d.touches?d.touches[0]:d,target:this._layer};return d.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(d),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(d){if(d.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(d);let g=d._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",d);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let C="resizeableCircleMarker";this._layer instanceof L.Circle&&(C="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[C]||this._initSnappableMarkersDrag():this._layer.pm.options[C]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=d.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(d){this._overwriteEventIfItComesFromMarker(d);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",d),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=d.latlng),this._onLayerDrag(d),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(d){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",d),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(d){let{latlng:g}=d,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},C=M=>M.map(U=>{if(Array.isArray(U))return C(U);let te={lat:U.lat+_.lat,lng:U.lng+_.lng};return(U.alt||U.alt===0)&&(te.alt=U.alt),te});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=C([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let U=C([M]);this._layer.setLatLng(U[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=C([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=C(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,d.layer=this._layer,this._fireDrag(d)},addDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.addClass(d,"leaflet-pm-draggable")},removeDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_getDOMElem(){let d=null;return this._layer._path?d=this._layer._path:this._layer._renderer&&this._layer._renderer._container?d=this._layer._renderer._container:this._layer._image?d=this._layer._image:this._layer._icon&&(d=this._layer._icon),d},_overwriteEventIfItComesFromMarker(d){d.target.getLatLng&&(!d.target._radius||d.target._radius<=10)&&(d.containerPoint=this._map.mouseEventToContainerPoint(d.originalEvent),d.latlng=this._map.containerPointToLatLng(d.containerPoint))},_syncLayers(d,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(C=>{C instanceof L.LayerGroup&&(_=_.concat(C.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let C in this._parentLayerGroup){let M=this._parentLayerGroup[C];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(C=>!!C.pm).filter(C=>!!C.pm.options.draggable),_.forEach(C=>{C!==this._layer&&C.pm[d]&&(C._snapped=!1,C.pm[d](g))})),_.length>0}return!1},_stopDOMImageDrag(d){return d.preventDefault(),!1}},Pe=Le,Te=l(ys());function Oe(d,g,_,C){return _.unproject(g.transform(_.project(d,C)),C)}function Re(d,g,_){let C=_.getMaxZoom();if(C===1/0&&(C=_.getZoom()),L.Util.isArray(d)){let M=[];return d.forEach(U=>{M.push(Re(U,g,_))}),M}return d instanceof L.LatLng?Oe(d,g,_,C):null}function Ye(d,g){g instanceof L.Layer&&(g=g.getLatLng());let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.project(g,_)}function mt(d,g){let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.unproject(g,_)}var Rt={_onRotateStart(d){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ye(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ye(this._map,d.target.getLatLng()),this._initialRotateLatLng=Ho(this._layer),this._startAngle=this.getAngle();let g=Ho(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(d){let g=Ye(this._map,d.target.getLatLng()),_=this._rotationStartPoint,C=this._rotationOriginPoint,M=Math.atan2(g.y-C.y,g.x-C.x)-Math.atan2(_.y-C.y,_.x-C.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let U=this;function te(tt,We=[],_t=-1){if(_t>-1&&We.push(_t),L.Util.isArray(tt[0]))tt.forEach((It,nn)=>te(It,We.slice(),nn));else{let It=We.length>0?(0,Te.default)(U._markers,We):U._markers[0];tt.forEach((nn,yn)=>{It[yn].setLatLng(nn)})}}te(this._layer.getLatLngs());let ae=Ho(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let be=M*180/Math.PI;be=be<0?be+360:be;let Ce=be+this._startAngle;this._setAngle(Ce),this._rotationLayer.pm._setAngle(Ce),this._fireRotation(this._rotationLayer,be,ae),this._fireRotation(this._map,be,ae),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let d=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Ho(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ho(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,d,g),this._fireRotationEnd(this._map,d,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(d,g,_,C,M){let U=Ye(M,_);return this._matrix=C.clone().rotate(d,U).flip(),Re(g,this._matrix,M)},_setAngle(d){d=d<0?d+360:d,this._angle=d%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let d=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=d.getCenter();return d.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(pa(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),d),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ho(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(d){let g=this.getAngle(),_=this._layer.getLatLngs(),C=d*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(C,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+d),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(C,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-g;M=M<0?M+360:M,this._startAngle=g,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(d){let g=d-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(d){this._setAngle(d)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(d){this._rotationCenter=d,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(d)}},Ft=Rt,Et=L.Class.extend({includes:[Pe,Bo,Ft,tu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(d){L.Util.setOptions(this,d)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(d,g){g==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(d,g){let _=g.target,C={layer:this._layer,marker:_,event:g},M="";return d==="move"?M="moveVertexValidation":d==="add"?M="addVertexValidation":d==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](C)?(d==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(d){return d._cancelDragEventChain?(d._latlng=d._cancelDragEventChain,d.update(),!1):!0},_vertexValidationDragEnd(d){return d._cancelDragEventChain?(d._cancelDragEventChain=null,!1):!0}}),Xt=Et;Xt.LayerGroup=L.Class.extend({initialize(d){this._layerGroup=d,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(C=>this._initLayer(C));let g=C=>{if(C.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(U=>!U.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in U.pm._parentLayerGroup));M.forEach(U=>{this._initLayer(U)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",C=>{this._removeLayerFromGroup(C.target)},this);let _=C=>{C.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(d,g)):_.pm.enable(d)})},disable(d=[]){d.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?d.indexOf(g._leaflet_id)===-1&&(d.push(g._leaflet_id),g.pm.disable(d)):g.pm.disable()})},enabled(d=[]){return d.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?d.indexOf(g._leaflet_id)===-1?(d.push(g._leaflet_id),g.pm.enabled(d)):!1:g.pm.enabled())},toggleEdit(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(d,g)):_.pm.toggleEdit(d)})},_initLayer(d){let g=L.Util.stamp(this._layerGroup);d.pm._parentLayerGroup||(d.pm._parentLayerGroup={}),d.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(d){if(d.pm&&d.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete d.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(d=>d.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var d;return this._map||((d=this._layers.find(g=>!!g._map))==null?void 0:d._map)||null},getLayers(d=!1,g=!0,_=!0,C=[]){let M=[];return d?this._layerGroup.getLayers().forEach(U=>{M.push(U),U instanceof L.LayerGroup&&C.indexOf(U._leaflet_id)===-1&&(C.push(U._leaflet_id),M=M.concat(U.pm.getLayers(!0,!0,!0,C)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter(U=>!(U instanceof L.LayerGroup))),g&&(M=M.filter(U=>!!U.pm),M=M.filter(U=>!U._pmTempLayer),M=M.filter(U=>!L.PM.optIn&&!U.options.pmIgnore||L.PM.optIn&&U.options.pmIgnore===!1)),M},setOptions(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=d,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(d,g)):_.pm.setOptions(d))})}}),Xt.Marker=Xt.extend({_shape:"Marker",initialize(d){this._layer=d,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(d={draggable:!0}){if(L.Util.setOptions(this,d),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(d){let g=d.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)}});var Yt=l(ys()),vt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let d=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=d.filter((g,_,C)=>C.indexOf(g)===_)},_removeFromCache(d){let g=this.markerCache.indexOf(d);g>-1&&this.markerCache.splice(g,1)},renderLimits(d){this.markerCache.forEach(g=>{d.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:d={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(d)];this.renderLimits(g)},_filterClosestMarkers(d){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((C,M)=>{let U=C._latlng.distanceTo(d),te=M._latlng.distanceTo(d);return U-te}),g.filter((C,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(d){this._preventRenderMarkers=!!d}},wt=vt;Xt.Line=Xt.extend({includes:[wt],_shape:"Line",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(d){return this.enabled()?this.disable():this.enable(d),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let d=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(d),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=C=>{if(Array.isArray(C[0]))return C.map(_,this);let M=C.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&C.map((U,te)=>{let ae=this.isPolygon()?(te+1)%C.length:te+1;return this._createMiddleMarker(M[te],M[ae])}),M};this._markers=_(g),this.filterMarkerGroup(),d.addLayer(this._markerGroup)},_createMarker(d){let g=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(d,g){if(!d||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,d.getLatLng(),g.getLatLng()),C=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return C.setIcon(M),C.leftM=d,C.rightM=g,d._middleMarkerNext=C,g._middleMarkerPrev=C,C.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),C.on("movestart",this._onMiddleMarkerMoveStart,this),C},_onMiddleMarkerClick(d){let g=d.target;if(!this._vertexValidation("add",d))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(d){let g=d.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",d)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(d){let g=d.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(d){let g=d.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(d,g,_){d.off("movestart",this._onMiddleMarkerMoveStart,this),d.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let C=d.getLatLng(),M=this._layer._latlngs;delete d.leftM,delete d.rightM;let{indexPath:U,index:te,parentPath:ae}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),be=U.length>1?(0,Yt.default)(M,ae):M,Ce=U.length>1?(0,Yt.default)(this._markers,ae):this._markers;be.splice(te+1,0,C),Ce.splice(te+1,0,d),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,d),this._createMiddleMarker(d,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(d,L.PM.Utils.findDeepMarkerIndex(this._markers,d).indexPath,C),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Ar(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(d){let g=this._layer,_,C;if(this.options.allowSelfIntersection?_=!1:(C=Ar(this._layer.toGeoJSON(15)),_=C.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;d?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(C)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(d,g){d.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(d){let g=d.target;if(!this._vertexValidation("remove",d))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ho(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:C,index:M,parentPath:U}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!C)return;let te=C.length>1?(0,Yt.default)(_,U):_,ae=C.length>1?(0,Yt.default)(this._markers,U):this._markers,be=U[U.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!be&&(te.length<=2||this.isPolygon()&&te.length<=3)){this._flashLayer();return}te.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&te.length<=2&&te.splice(0,te.length);let Ce=!1;if(te.length<=1&&(te.splice(0,te.length),U.length>1&&C.length>1&&(_=El(_)),this._layer.setLatLngs(_),this._initMarkers(),Ce=!0),es(_)||this._layer.remove(),_=El(_),this._layer.setLatLngs(_),this._markers=El(this._markers),!Ce&&(ae=C.length>1?(0,Yt.default)(this._markers,U):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),ae)){let tt,We;if(this.isPolygon()?(tt=(M+1)%ae.length,We=(M+(ae.length-1))%ae.length):(We=M-1<0?void 0:M-1,tt=M+1>=ae.length?void 0:M+1),tt!==We){let _t=ae[We],It=ae[tt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(_t,It)}ae.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,C),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(d){let g=this._layer.getLatLngs(),_=d.getLatLng(),{indexPath:C,index:M,parentPath:U}=L.PM.Utils.findDeepMarkerIndex(this._markers,d);(C.length>1?(0,Yt.default)(g,U):g).splice(M,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(d){let{indexPath:g,index:_,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,d),M=g.length>1?(0,Yt.default)(this._markers,C):this._markers,U=(_+1)%M.length,te=(_+(M.length-1))%M.length,ae=M[te],be=M[U];return{prevMarker:ae,nextMarker:be}},_checkMarkerAllowedToDrag(d){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(d),C=L.polyline([g.getLatLng(),d.getLatLng()]),M=L.polyline([d.getLatLng(),_.getLatLng()]),U=_o(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,te=_o(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return d.getLatLng()===this._markers[0][0].getLatLng()?te+=1:d.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(U+=1),!(U<=2&&te<=2)},_onMarkerDragStart(d){let g=d.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",d))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(d,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ho(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(d){let g=d.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:C,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let U=_.length>1?(0,Yt.default)(this._markers,M):this._markers,te=(C+1)%U.length,ae=(C+(U.length-1))%U.length,be=g.getLatLng(),Ce=U[ae].getLatLng(),tt=U[te].getLatLng();if(g._middleMarkerNext){let We=L.PM.Utils.calcMiddleLatLng(this._map,be,tt);g._middleMarkerNext.setLatLng(We)}if(g._middleMarkerPrev){let We=L.PM.Utils.calcMiddleLatLng(this._map,be,Ce);g._middleMarkerPrev.setLatLng(We)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let g=d.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),C=!this.options.allowSelfIntersection&&this.hasSelfIntersection();C&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(C=!1);let M=!this.options.allowSelfIntersection&&C;if(this._fireMarkerDragEnd(d,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(d,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(d){let g=d.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(d,_)}}),Xt.Polygon=Xt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(d){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(d),C=L.polyline([g.getLatLng(),d.getLatLng()]),M=L.polyline([d.getLatLng(),_.getLatLng()]),U=_o(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,te=_o(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(U<=2&&te<=2)}}),Xt.Rectangle=Xt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let d=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,d.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,C)=>{let M=this._cornerMarkers.find(U=>U._index===C);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(d,g){let _=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=d,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(d=>{d.on("dragstart",this._onMarkerDragStart,this),d.on("drag",this._onMarkerDrag,this),d.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||d.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(d){if(!this._vertexValidation("move",d))return;let g=d.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(M=>M._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(d,C)},_onMarkerDrag(d){let g=d.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let g=d.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(C=>{delete C._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(d,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(d){L.extend(d._origLatLng,d._latlng);let g=L.PM.Utils._getRotatedRectangle(d.getLatLng(),d._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(d),this._layer.redraw()},_adjustAllMarkers(d){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,C)=>{this._cornerMarkers[C].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(C=>d.getLatLng().equals(C));_>-1?(this._cornerMarkers[(d._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(d._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(d._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(C=>{C.setLatLng(g[C._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(pa(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.getAngle(),this._map||this)}}),Xt.CircleMarker=Xt.extend({_shape:"CircleMarker",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let d=this._map;this._helperLayers&&(this._helperLayers.removeFrom(d),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(d);let g=this._layer.getLatLng(),_=this._layer._radius,C=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(d,g){let _=this._map.project(d),C=L.point(_.x+g,_.y);return this._map.unproject(C)},_createHintLine(d,g){let _=d.getLatLng(),C=g.getLatLng();this._hintline=L.polyline([_,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(d){let g=this._createMarker(d);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(d){let g=this._createMarker(d);return g.on("drag",this._resizeCircle,this),g},_createMarker(d){let g=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=d,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(d){if(d.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,C=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=C,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let d=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(d,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(d),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([d,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(d){this._vertexValidation("move",d)&&this._fireMarkerDragStart(d)},_onMarkerDrag(d){let g=d.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(d)},_onMarkerDragEnd(d){this._extedingMarkerDragEnd();let g=d.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(d))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let d=this._layer._map||this._map;if(d){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),d,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let C=d&&d.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!C).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!C),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=nu(this._map,d,g,this._getMinDistanceInMeter(d)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=nu(this._map,d,g,this._getMaxDistanceInMeter(d))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(d,g){return this._map.project(d).distanceTo(this._map.project(g))},_getMinDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,d)},_getMaxDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,d)},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Xt.Circle=Xt.CircleMarker.extend({_shape:"Circle",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(d){L.PM.Edit.CircleMarker.prototype.enable.call(this,d||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let d=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(d,g){return this._map.distance(d,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Xt.ImageOverlay=Xt.extend({_shape:"ImageOverlay",initialize(d){this._layer=d,this._enabled=!1},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},enabled(){return this._enabled},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let d=this._layer.getBounds(),g=d.getNorthWest(),_=d.getNorthEast(),C=d.getSouthEast(),M=d.getSouthWest();return[g,_,C,M]}}),Xt.Text=Xt.extend({_shape:"Text",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let d=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),d.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let d=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${d}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(d){d.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(d={}){let g=this._hasFocus;this._hasFocus=d.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(d){d&&(this.textArea.value=d),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let d=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(d),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(d=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),d===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(d){d.preventDefault()}});var rn=function(d,g,_,C,M,U){this._matrix=[d,g,_,C,M,U]};rn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),rn.prototype={transform(d){return this._transform(d.clone())},_transform(d){let g=this._matrix,{x:_,y:C}=d;return d.x=g[0]*_+g[1]*C+g[4],d.y=g[2]*_+g[3]*C+g[5],d},untransform(d){let g=this._matrix;return new L.Point((d.x/g[0]-g[4])/g[0],(d.y/g[2]-g[5])/g[2])},clone(){let d=this._matrix;return new L.PM.Matrix(d[0],d[1],d[2],d[3],d[4],d[5])},translate(d){if(d===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof d=="number"?(g=d,_=d):(g=d.x,_=d.y),this._add(1,0,0,1,g,_)},scale(d,g){if(d===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,C;return g=g||L.point(0,0),typeof d=="number"?(_=d,C=d):(_=d.x,C=d.y),this._add(_,0,0,C,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(d,g){let _=Math.cos(d),C=Math.sin(d);return g=g||new L.Point(0,0),this._add(_,C,-C,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(d,g,_,C,M,U){let te=[[],[],[]],ae=this._matrix,be=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]],Ce=[[d,_,M],[g,C,U],[0,0,1]],tt;d&&d instanceof L.PM.Matrix&&(ae=d._matrix,Ce=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]]);for(let We=0;We<3;We+=1)for(let _t=0;_t<3;_t+=1){tt=0;for(let It=0;It<3;It+=1)tt+=be[We][It]*Ce[It][_t];te[We][_t]=tt}return this._matrix=[te[0][0],te[1][0],te[0][1],te[1][1],te[0][2],te[1][2]],this}};var fn=rn,sn={calcMiddleLatLng(d,g,_){let C=d.project(g),M=d.project(_);return d.unproject(C._add(M)._divideBy(2))},findLayers(d){let g=[];return d.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(d,g=60,_=!0){let C=d.getLatLng(),M=d.getRadius(),U=Di(C,M,g,0,_),te=[];for(let ae=0;ae<U.length;ae+=1){let be=[U[ae].lat,U[ae].lng];te.push(be)}return L.polygon(te,d.options)},disablePopup(d){d.getPopup()&&(d._tempPopupCopy=d.getPopup(),d.unbindPopup())},enablePopup(d){d._tempPopupCopy&&(d.bindPopup(d._tempPopupCopy),delete d._tempPopupCopy)},_fireEvent(d,g,_,C=!1){d.fire(g,_,C);let{groups:M}=this.getAllParentGroups(d);M.forEach(U=>{U.fire(g,_,C)})},getAllParentGroups(d){let g=[],_=[],C=M=>{for(let U in M._eventParents)if(g.indexOf(U)===-1){g.push(U);let te=M._eventParents[U];_.push(te),C(te)}};return!d._pmLastGroupFetch||!d._pmLastGroupFetch.time||new Date().getTime()-d._pmLastGroupFetch.time>1e3?(C(d),d._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:d._pmLastGroupFetch.groups,groupIds:d._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Di,getTranslation:sr,findDeepCoordIndex(d,g,_=!0){let C,M=te=>(ae,be)=>{let Ce=te.concat(be);if(_){if(ae.lat&&ae.lat===g.lat&&ae.lng===g.lng)return C=Ce,!0}else if(ae.lat&&L.latLng(ae).equals(g))return C=Ce,!0;return Array.isArray(ae)&&ae.some(M(Ce))};d.some(M([]));let U={};return C&&(U={indexPath:C,index:C[C.length-1],parentPath:C.slice(0,C.length-1)}),U},findDeepMarkerIndex(d,g){let _,C=U=>(te,ae)=>{let be=U.concat(ae);return te._leaflet_id===g._leaflet_id?(_=be,!0):Array.isArray(te)&&te.some(C(be))};d.some(C([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(d,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(d,g[0]),C=this.findDeepCoordIndex(d,g[1]),M=Math.max(_.index,C.index);return(_.index===0||C.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:C,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(d,g,_,C){let M=Ye(C,d),U=Ye(C,g),te=_*Math.PI/180,ae=Math.cos(te),be=Math.sin(te),Ce=(U.x-M.x)*ae+(U.y-M.y)*be,tt=(U.y-M.y)*ae-(U.x-M.x)*be,We=Ce*ae+M.x,_t=Ce*be+M.y,It=-tt*be+M.x,nn=tt*ae+M.y,yn=mt(C,M),Ln=mt(C,{x:We,y:_t}),lr=mt(C,U),et=mt(C,{x:It,y:nn});return[yn,Ln,lr,et]},pxRadiusToMeterRadius(d,g,_){let C=g.project(_),M=L.point(C.x+d,C.y);return g.distance(g.unproject(M),_)}},Tn=sn;L.PM=L.PM||{version:io.version,Map:Ps,Toolbar:Pl,Draw:ts,Edit:Xt,Utils:Tn,Matrix:fn,activeLang:"en",optIn:!1,initialize(d){this.addInitHooks(d)},setOptIn(d){this.optIn=!!d},addInitHooks(){function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(C);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function U(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(U);function te(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(te);function ae(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ae);function be(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(be)},reInitLayer(d){d instanceof L.LayerGroup&&d.eachLayer(g=>{this.reInitLayer(g)}),d.pm||L.PM.optIn&&d.options.pmIgnore!==!1||d.options.pmIgnore||(d instanceof L.Map?d.pm=new L.PM.Map(d):d instanceof L.Marker?d.options.textMarker?(d.pm=new L.PM.Edit.Text(d),d.pm._initTextMarker(),d.pm._createTextMarker(!1)):d.pm=new L.PM.Edit.Marker(d):d instanceof L.Circle?d.pm=new L.PM.Edit.Circle(d):d instanceof L.CircleMarker?d.pm=new L.PM.Edit.CircleMarker(d):d instanceof L.Rectangle?d.pm=new L.PM.Edit.Rectangle(d):d instanceof L.Polygon?d.pm=new L.PM.Edit.Polygon(d):d instanceof L.Polyline?d.pm=new L.PM.Edit.Line(d):d instanceof L.LayerGroup?d.pm=new L.PM.Edit.LayerGroup(d):d instanceof L.ImageOverlay&&(d.pm=new L.PM.Edit.ImageOverlay(d)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(d){let g=this._map.mouseEventToLayerPoint(d),_,C;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(g)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(_))&&(C=_);C&&(L.DomEvent.fakeStop(d),this._fireEvent([C],d))}}),L.PM.initialize()})();class sp extends Vn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Xe(this,"properties");Xe(this,"angleCache",new Map);Xe(this,"lastCenter");Xe(this,"lastCenterCosLat");Xe(this,"_pendingNameUpdate",!1);Xe(this,"_nameUpdateTimeout",null);En.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){En.measure("Circle.updateProperties",()=>{var a,l,c,h;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((h=this.options)==null?void 0:h.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){En.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return En.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return En.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return En.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return En.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Vn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return En.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return En.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){En.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const qv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},p5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=qv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${qv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Bl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Ut.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function g5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const Bi=(t,e="m",n="")=>{let r,i;return e==="m"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},OU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),IU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},Gh=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function BU(){const t=Lt(null),e=Lt(null),n=Lt(null),r=Lt(null),i=Lt(""),s=Lt(null),o=Lt(!1),a=Lt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(q=>q.remove()),document.querySelectorAll(".drawing-help-message").forEach(q=>q.remove())}),Hu(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(q,Z="Double-cliquez pour diter")=>{const ie={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},de=(ze,$e)=>{var qe;const Je=((qe=t.value)==null?void 0:qe.getZoom())||14,Me=q.lat,me=g5($e.physicalSize,Me,Je);return`<div class="text-container" style="width:${me}px;height:${me}px;transform:rotate(${$e.rotation}deg)">
        <div class="text-annotation" style="font-size:${me*.2}px;color:${$e.color};background-color:${qv($e.backgroundColor,$e.backgroundOpacity)};border:${$e.hasBorder?$e.borderWidth+" solid "+qv($e.borderColor,$e.borderOpacity):"none"};padding:${$e.padding};border-radius:${$e.borderRadius}">${ze}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ye=()=>{if(!t.value)return;const ze=Q.getIcon(),$e={html:de(Q.properties.text,Q.properties.style),className:ze.options.className};Q.setIcon(Ut.divIcon($e))},he=Ut.divIcon({html:de(Z,ie),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),Q=Ut.marker(q,{icon:he,draggable:!1,pmIgnore:!0});Q.properties={type:"text",text:Z,style:{...ie}},t.value&&(t.value.on("zoomend",ye),Q.on("remove",()=>{var ze;(ze=t.value)==null||ze.off("zoomend",ye)})),ye();let Ae=!1,De=!1,Ke=0,fe=0;const ee=ze=>{if(!t.value)return;const $e=ze.target;if($e.classList.contains("rotate")){Ae=!0;const Je=Q.getLatLng(),Me=t.value.mouseEventToLatLng(ze);Ke=Math.atan2(Me.lat-Je.lat,Me.lng-Je.lng)*180/Math.PI,fe=Q.properties.style.rotation||0}else $e.classList.contains("move")&&(De=!0);document.addEventListener("mousemove",oe),document.addEventListener("mouseup",le)},oe=ze=>{if(!(!De||!t.value)){if(Ae){const $e=Q.getLatLng(),Je=t.value.mouseEventToLatLng(ze),Me=Math.atan2(Je.lat-$e.lat,Je.lng-$e.lng)*180/Math.PI,me=(fe+(Me-Ke))%360;Q.properties.style.rotation=me;const qe=Q.getIcon(),ct={html:de(Q.properties.text,Q.properties.style),className:qe.options.className};Q.setIcon(Ut.divIcon(ct))}else if(De){const $e=OU(ze),Je=t.value.mouseEventToLatLng($e);Q.setLatLng(Je)}}},le=()=>{Ae=!1,De=!1,document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",le)};return Q.on("add",()=>{const ze=Q.getElement();ze&&ze.querySelectorAll(".control-button").forEach(Je=>{Je.addEventListener("mousedown",ee)})}),Q.on("remove",()=>{const ze=Q.getElement();ze&&ze.querySelectorAll(".control-button").forEach(Je=>{Je.removeEventListener("mousedown",ee)})}),Q.on("dblclick",ze=>{var ct;Ut.DomEvent.stopPropagation(ze);const $e=(ct=Q.getElement())==null?void 0:ct.querySelector(".text-annotation");if(!$e)return;$e.contentEditable="true",$e.focus(),$e.classList.add("editing");const Je=window.getSelection(),Me=document.createRange();Me.selectNodeContents($e),Je==null||Je.removeAllRanges(),Je==null||Je.addRange(Me);const me=()=>{$e.contentEditable="false",$e.classList.remove("editing");const ft=$e.innerText.trim();if(ft){Q.properties.text=ft;const Mt=Q.getIcon(),it={html:de(ft,Q.properties.style),className:Mt.options.className};Q.setIcon(Ut.divIcon(it))}$e.removeEventListener("blur",me),$e.removeEventListener("keydown",qe)},qe=ft=>{ft.key==="Enter"&&!ft.shiftKey&&(ft.preventDefault(),me())};$e.addEventListener("blur",me),$e.addEventListener("keydown",qe)}),Q},c=(q,Z)=>{const ie=Ut.DomUtil.create("div","measure-tooltip");if(ie.innerHTML=Z,ie.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ie),t.value){const de=t.value.latLngToContainerPoint(q);ie.style.left=`${de.x+10}px`,ie.style.top=`${de.y-25}px`}return ie},h=Gh((q,Z,ie)=>{if(q&&(q.innerHTML=ie,t.value)){const de=t.value.latLngToContainerPoint(Z);q.style.left=`${de.x+10}px`,q.style.top=`${de.y-25}px`}},100),p=(q,Z,ie)=>{q.on("mouseover",()=>{const de=c(q.getLatLng(),ie());q.measureDiv=de}),q.on("mousemove",de=>{q.measureDiv&&t.value&&h(q.measureDiv,de.latlng,ie())}),q.on("mouseout",()=>{q.measureDiv&&(q.measureDiv.remove(),q.measureDiv=void 0)})};let v=[];const m=()=>{var q;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(q=r.value)==null||q.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(Z=>Z.remove()),e.value&&e.value.getLayers().forEach(Z=>{Z instanceof Pa&&Z.clearHelperPoints()})},x=(q,Z="#2563EB")=>{const ie=Ut.circleMarker(q,{radius:6,color:Z,fillColor:Z,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(ie),ie},E=(q,Z)=>{var de,ye,he,Q,Ae,De;console.log("Input layer:",{type:Z,instanceof:{Circle:q instanceof Ut.Circle,Rectangle:q instanceof Ut.Rectangle,Polygon:q instanceof Ut.Polygon,Polyline:q instanceof Ut.Polyline,Line:q instanceof qo},options:q.options});const ie={type:Z,style:q.options||{}};try{if(q instanceof Ut.Circle){const Ke=q.getRadius();ie.radius=Ke,ie.diameter=Ke*2,ie.surface=Math.PI*Math.pow(Ke,2),ie.perimeter=2*Math.PI*Ke,ie.center=q.getLatLng()}else if(q instanceof Ut.Rectangle){const Ke=q.getBounds(),fe=Ke.getNorthEast(),ee=Ke.getSouthWest(),oe=pc([[ee.lng,ee.lat],[fe.lng,ee.lat]]),le=pc([[ee.lng,ee.lat],[ee.lng,fe.lat]]),ze=Hh(oe,{units:"meters"}),$e=Hh(le,{units:"meters"});ie.width=ze,ie.height=$e,ie.surface=ze*$e,ie.perimeter=2*(ze+$e),ie.dimensions={width:ze,height:$e}}else if(q instanceof Ut.Polygon)try{const fe=q.getLatLngs()[0].map(oe=>[oe.lng,oe.lat]);fe.push(fe[0]);const ee=ju([fe]);ie.surface=Rc(ee),ie.perimeter=Hh(pc(fe),{units:"meters"})}catch(Ke){console.error("Erreur lors du calcul des proprits du polygone",Ke)}else if(q instanceof Ut.Polyline&&!(q instanceof Ut.Polygon))try{const Ke=q.getLatLngs();let fe=0;for(let ee=1;ee<Ke.length;ee++)fe+=Ke[ee].distanceTo(Ke[ee-1]);ie.length=fe}catch(Ke){console.error("Erreur lors du calcul de la longueur de la ligne",Ke)}ie.style={...ie.style,color:((de=q.options)==null?void 0:de.color)||"#3388ff",weight:((ye=q.options)==null?void 0:ye.weight)||3,opacity:((he=q.options)==null?void 0:he.opacity)||1,fillColor:((Q=q.options)==null?void 0:Q.fillColor)||"#3388ff",fillOpacity:((Ae=q.options)==null?void 0:Ae.fillOpacity)||.2,dashArray:((De=q.options)==null?void 0:De.dashArray)||""}}catch(Ke){console.error("Error calculating shape properties:",Ke)}return ie},k=(q,Z=2)=>{var Q;if(!t.value){console.warn("Map is not available for text size update");return}const ie=t.value.getZoom(),de=q.getLatLng().lat,ye=g5(Z,de,ie),he=(Q=q.getElement())==null?void 0:Q.querySelector(".text-annotation");he&&(q.properties.style.fontSize=`${ye}px`,q.properties.physicalWidth=Z,q.properties.physicalHeight=Z,p5(he,q.properties.style))},T=(q,Z,ie)=>{const de=Ut.map(q).setView(Z,ie);t.value=de,Ut.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(de);const ye=new Ut.FeatureGroup;return ye.addTo(de),e.value=ye,n.value=Ut.featureGroup().addTo(de),r.value=Ut.featureGroup().addTo(de),de.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ye,snapLayers:[ye,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),de.on("pm:drawstart",he=>{o.value=!0,he.shape==="Circle"&&i.value==="Semicircle"&&(de.getContainer().style.cursor="crosshair")}),de.on("pm:drawend",()=>{o.value=!1,de.getContainer().style.cursor="",s.value&&Bl("Cliquez sur la forme pour afficher les points de contrle")}),de.on("pm:create",Ge),ye.on("click",he=>{var Ae,De,Ke,fe,ee,oe,le,ze,$e,Je,Me,me,qe,ct,ft;Ut.DomEvent.stopPropagation(he);const Q=he.layer;if(Q.name&&!((Ae=Q.properties)!=null&&Ae.name)?(Q.properties||(Q.properties={}),Q.properties.name=Q.name):(De=Q.properties)!=null&&De.name&&!Q.name&&(Q.name=Q.properties.name),console.log("[featureGroup click] tat du nom:",{directName:Q.name,propertiesName:(Ke=Q.properties)==null?void 0:Ke.name,fullProperties:Q.properties}),(fe=r.value)==null||fe.clearLayers(),m(),s.value=Q,Q instanceof sp)j(Q);else if(Q instanceof Ut.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(Q,"name"),directName:Q.name,propertiesName:(ee=Q.properties)==null?void 0:ee.name,styleNameBeforeTransfer:(le=(oe=Q.properties)==null?void 0:oe.style)==null?void 0:le.name,nameIsEnumerable:Object.keys(Q).includes("name"),allProperties:Object.keys(Q.properties||{}),_dbId:Q._dbId});const Mt=Q.name,it=(ze=Q.properties)==null?void 0:ze.name,jt=(Je=($e=Q.properties)==null?void 0:$e.style)==null?void 0:Je.name,hn=Q._dbId,Ze=new sp(Q.getLatLng(),{...Q.options,radius:Q.getRadius()});Q.properties?Ze.properties={...Q.properties||{}}:Ze.updateProperties();const lt=Mt||it||jt;lt&&(Ze.properties.name=lt,Ze.properties.style||(Ze.properties.style={}),Ze.properties.style.name=lt,Ze.name=lt),hn&&(Ze._dbId=hn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:Ze.name,propertiesName:Ze.properties.name,stylePropertyName:(Me=Ze.properties.style)==null?void 0:Me.name,allProperties:Object.keys(Ze.properties||{})}),(me=e.value)==null||me.removeLayer(Q),(qe=e.value)==null||qe.addLayer(Ze),s.value=Ze,j(Ze)}else if(Q instanceof Pa)J(Q);else if(Q instanceof Ut.Rectangle){const Mt=new Pa(Q.getBounds(),{...Q.options});Mt.updateProperties(),(ct=e.value)==null||ct.removeLayer(Q),(ft=e.value)==null||ft.addLayer(Mt),s.value=Mt,J(Mt)}else Q instanceof Ut.Polygon?B(Q):Q instanceof qo||Q instanceof Ut.Polyline?V(Q):Q instanceof Ad&&H(Q)}),de.on("pm:edit",he=>{var Ae,De,Ke;console.log("[pm:edit] Dbut",{layer:he.layer,currentProperties:he.layer.properties});const Q=he.layer;if(Q){const fe=((Ae=Q.properties)==null?void 0:Ae.type)||"unknown";if(pe(Q,fe),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:Q.properties,selectedShape:s.value}),Q instanceof sp)j(Q);else if(Q instanceof Pa)J(Q);else if(Q instanceof Ut.Rectangle){const ee=new Pa(Q.getBounds(),{...Q.options});ee.updateProperties(),(De=e.value)==null||De.removeLayer(Q),(Ke=e.value)==null||Ke.addLayer(ee),s.value=ee,J(ee)}else Q instanceof Ut.Polygon?B(Q):Q instanceof qo?(Q.updateProperties(),pe(Q,"Line"),V(Q)):Q instanceof Ut.Polyline?V(Q):Q instanceof Ad&&(Q.updateProperties(),H(Q))}}),de.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),Bl("Dplacez la forme  l'endroit souhait")}),de.on("pm:dragend",he=>{var Ae,De,Ke;console.log("[pm:dragend] Dbut",{layer:he.layer,currentProperties:he.layer.properties});const Q=he.layer;if(Q){const fe=((Ae=Q.properties)==null?void 0:Ae.type)||"unknown";if(Q instanceof Ut.Rectangle&&!(Q instanceof Pa)){const ee=new Pa(Q.getBounds(),{...Q.options});ee.updateProperties(),(De=e.value)==null||De.removeLayer(Q),(Ke=e.value)==null||Ke.addLayer(ee),s.value=ee,J(ee)}else Q instanceof qo?(Q.updateProperties(),pe(Q,"Line"),V(Q)):pe(Q,fe);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:Q.properties,selectedShape:s.value})}setTimeout(()=>{Bl("Cliquez sur la forme pour afficher les points de contrle")},100)}),de.on("pm:remove",()=>{var he;(he=document.querySelector(".drawing-help-message"))==null||he.remove()}),de.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),Bl("Utilisez les points de contrle pour modifier la forme")}),de.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove())}),de.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()))}),de},A=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const q=e.value.getBounds();if(q.isValid()){const Z={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(q,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=Z.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=Z.zoomAnimation,t.value.options.markerZoomAnimation=Z.markerZoomAnimation}catch(ie){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ie)}},500)}catch(ie){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ie)}},500)}}catch(q){if(console.warn("[useMapDrawing] Error adjusting view:",q),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(Z){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",Z)}}},z=q=>{var ie;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(de=>de.remove());try{const de=t.value.pm;de.globalEditModeEnabled()&&de.disableGlobalEditMode(),de.globalRemovalModeEnabled()&&de.disableGlobalRemovalMode(),de.disableDraw(),m(),(ie=r.value)==null||ie.clearLayers()}catch(de){console.error("Error disabling modes:",de)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:q}})),i.value=q,!q){m();return}let Z=q;switch(q){case"Note":Z="GeoNote";break;case"Polygon":Z="Polygon";break;case"Line":Z="Line";break;case"ElevationLine":Z="ElevationLine";break;default:Z=q}q=Z,se(),setTimeout(()=>{var de,ye,he,Q,Ae,De,Ke,fe,ee,oe,le,ze,$e;try{switch(q){case"Polygon":Bl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(de=t.value)==null||de.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ye=t.value)==null||ye.off("pm:create"),(he=t.value)==null||he.on("pm:create",Me=>{var me,qe,ct;if(Me.shape==="Polygon"&&Me.layer){const ft=Me.layer.getLatLngs()[0];(me=t.value)==null||me.removeLayer(Me.layer),(qe=e.value)!=null&&qe.hasLayer(Me.layer)&&e.value.removeLayer(Me.layer);const Mt=new uh(ft,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(Mt),s.value=Mt,Mt.updateProperties()),(ct=t.value)==null||ct.pm.disableDraw(),se()}});break;case"Circle":e.value&&e.value.getLayers().filter(me=>me instanceof Pa).forEach(me=>{me.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Bl("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Bl("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(Q=t.value)==null||Q.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Bl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Ae=t.value)==null||Ae.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Bl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(De=t.value)==null||De.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Ke=t.value)==null||Ke.off("pm:create"),(fe=t.value)==null||fe.on("pm:create",Me=>{var me,qe,ct;if(Me.shape==="Line"&&Me.layer){const ft=Me.layer.getLatLngs();(me=t.value)==null||me.removeLayer(Me.layer),(qe=e.value)!=null&&qe.hasLayer(Me.layer)&&e.value.removeLayer(Me.layer);const Mt=new qo(ft,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(Mt),s.value=Mt,Mt.updateProperties()),(ct=t.value)==null||ct.pm.disableDraw(),se()}});break;case"Text":if(Bl("Cliquez pour ajouter du texte, double-cliquez pour diter"),t.value){const Me=me=>{if(!t.value||!e.value)return;const qe=l(me.latlng);e.value.addLayer(qe),s.value=qe,t.value.off("click",Me),z("")};t.value.on("click",Me)}break;case"GeoNote":if(Bl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),t.value){const Me=async qe=>{if(!t.value||!e.value)return null;try{const ct=Ap(),ft=new Ad(qe,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});e.value.addLayer(ft),s.value=ft,ft.updateProperties();try{const Mt=ct.currentMapId||void 0,it=await ft.saveNote(Mt);console.log(`[useMapDrawing] Note sauvegarde avec succs, ID backend: ${it}`);const jt=ft._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${jt}, ID backend: ${it}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:ft,leafletId:jt,backendId:it}})),ft.openPopup(),ft}catch(Mt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",Mt),kd(async()=>{const{useNotificationStore:it}=await Promise.resolve().then(()=>JB);return{useNotificationStore:it}},void 0).then(({useNotificationStore:it})=>{it().error("Erreur lors de la cration de la note")}),null}}catch(ct){return console.error("[useMapDrawing] Erreur lors de la cration de la note:",ct),null}},me=async qe=>{Ut.DomEvent.stopPropagation(qe),Ut.DomEvent.preventDefault(qe);const ct=await Me(qe.latlng);ct&&(t.value.off("click",me),e.value&&e.value.getLayers().forEach(ft=>{if(ft.off&&typeof ft.off=="function")try{ft.off("click")}catch(Mt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Mt)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:ct,leafletId:ct._leaflet_id}})))};if(t.value.on("click",me),e.value){const qe=async ft=>{Ut.DomEvent.stopPropagation(ft),Ut.DomEvent.preventDefault(ft),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const Mt=await Me(ft.latlng);return Mt&&(t.value.off("click",me),e.value&&e.value.getLayers().forEach(it=>{if(it.off&&typeof it.off=="function")try{it.off("click")}catch(jt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",jt)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Mt,leafletId:Mt._leaflet_id}}))),!1};e.value.getLayers().forEach(ft=>{ft.on("click",qe)});const ct=()=>{e.value&&e.value.getLayers().forEach(ft=>{if(ft.off&&typeof ft.off=="function")try{ft.off("click")}catch(Mt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Mt)}}),window.removeEventListener("tool:changed",ct),console.log("[useMapDrawing] Nettoyage des gestionnaires d'vnements pour les formes existantes")};window.addEventListener("tool:changed",ct)}}break;case"delete":Bl("Cliquez sur une forme pour la supprimer"),(ee=t.value)==null||ee.pm.enableGlobalRemovalMode();break;case"ElevationLine":Bl("Cliquez et maintenez pour tracer le profil altimtrique"),(oe=t.value)==null||oe.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(le=t.value)==null||le.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(ze=t.value)==null||ze.off("pm:create"),($e=t.value)==null||$e.on("pm:create",async Me=>{var me,qe,ct;if(Me.shape==="Line"&&Me.layer){const ft=Me.layer.getLatLngs();(me=t.value)==null||me.removeLayer(Me.layer),(qe=e.value)!=null&&qe.hasLayer(Me.layer)&&e.value.removeLayer(Me.layer),(ct=t.value)==null||ct.pm.disableDraw(),i.value="",se()}});break}}catch(Je){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Je)}},100)},Y=q=>{var ie;if(!s.value)return;const Z=s.value;if(Z.properties=Z.properties||{},Z.properties.style=Z.properties.style||{},Z.properties.style={...Z.properties.style,...q},Z.properties.type==="text"){const de=Z.properties._textLayer,ye=(ie=de==null?void 0:de.getElement())==null?void 0:ie.querySelector(".text-annotation");ye&&p5(ye,Z.properties.style);const he={color:q.borderColor||Z.properties.style.borderColor,weight:parseInt(q.borderWidth||Z.properties.style.borderWidth),opacity:q.borderOpacity??Z.properties.style.borderOpacity};"setStyle"in Z&&Z.setStyle(he)}else if(Z.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const de={};q.fillColor&&(de.fillColor=q.fillColor),q.fillOpacity!==void 0&&(de.fillOpacity=q.fillOpacity),q.strokeColor&&(de.color=q.strokeColor),q.strokeOpacity!==void 0&&(de.opacity=q.strokeOpacity),q.strokeWidth!==void 0&&(de.weight=q.strokeWidth),q.dashArray&&(de.dashArray=q.dashArray),"setStyle"in Z&&Z.setStyle(de)}},ne=q=>{var Q,Ae,De,Ke,fe;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:q,layerType:(Q=s.value.properties)==null?void 0:Q.type,beforeName:s.value.name,beforePropertiesName:(Ae=s.value.properties)==null?void 0:Ae.name,beforeCategory:(De=s.value.properties)==null?void 0:De.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const Z=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${Z}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const ie=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise  jour: ${ie}`);const de=s.value.properties.category;console.log(`[useMapDrawing] Catgorie existante: ${de}`);const ye="category"in q&&q.category!==de;if(Object.keys(q).forEach(ee=>{ee==="type"&&ie?console.log(`[useMapDrawing] Prservation du type original: ${ie}`):s.value.properties[ee]=q[ee],ee==="name"&&(console.log(`[useMapDrawing] Setting name "${q[ee]}" directly on layer`),s.value.name=q[ee]),ee==="category"&&console.log(`[useMapDrawing] Mise  jour de la catgorie: ${de} -> ${q[ee]}`)}),ie&&(s.value.properties.type=ie),de&&!ye&&(console.log(`[useMapDrawing] Restauration de la catgorie originale: ${de}`),s.value.properties.category=de),s.value._dbId&&ye){const ee=Ap(),oe=ee.elements.find(le=>le.id===s.value._dbId);if(oe){console.log(`[useMapDrawing] Mise  jour de la catgorie dans le store: ${s.value.properties.category} pour l'lment ${s.value._dbId}`);const le=oe;le.data||(le.data={}),le.data.category=s.value.properties.category,ee.$patch({unsavedChanges:!0})}}const he=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ye}});if(window.dispatchEvent(he),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Ke=s.value.properties)==null?void 0:Ke.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((fe=s.value.properties)==null?void 0:fe.type)==="Circle"){const ee=s.value,oe=ee.getRadius();ee.properties.radius=oe,ee.properties.diameter=oe*2,ee.properties.surface=Math.PI*oe*oe,ee.properties.perimeter=2*Math.PI*oe,q.name&&(console.log(`[useMapDrawing] Ensuring circle name "${q.name}" is set in multiple places`),ee.properties.name=q.name,ee.properties.style.name=q.name,ee.name=q.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:ee.name,circlePropertiesName:ee.properties.name,nameIsEnumerable:Object.keys(ee).includes("name"),propertiesNameIsEnumerable:Object.keys(ee.properties).includes("name")}))}},ge=q=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:q.properties,selectedShapeRef:s.value}),s.value=null,Ko(()=>{s.value=q,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},pe=(q,Z)=>{console.log("[updateLayerProperties] Dbut",{layer:q,shapeType:Z,currentProperties:q.properties}),IU((de,ye)=>{const he=E(de,ye);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:he}),de.properties={...he},ge(de),de.fire("properties:updated",{shape:de,properties:de.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:de.properties,selectedShape:s.value})},100)(q,Z)},O=(q,Z)=>Ut.latLng((q.lat+Z.lat)/2,(q.lng+Z.lng)/2),j=q=>{if(!t.value||!e.value)return;m();const Z=q.getLatLng(),ie=q.getRadius(),de=x(Z,"#059669");v.push(de),p(de,q,()=>[Bi(ie,"m","Rayon"),Bi(ie*2,"m","Diamtre"),Bi(Math.PI*Math.pow(ie,2),"m","Surface")].join("<br>"));const ye=[],he=[0,45,90,135,180,225,270,315];he.forEach(Q=>{const Ae=q.calculatePointOnCircle(Q),De=x(Ae,"#2563EB");ye.push(De),v.push(De),p(De,q,()=>Bi(ie,"m","Rayon")),De.on("mousedown",Ke=>{if(!t.value)return;Ut.DomEvent.stopPropagation(Ke),t.value.dragging.disable();let fe=!0;const ee=le=>{fe&&(q.resizeFromControlPoint(le.latlng),ye.forEach((ze,$e)=>{const Je=q.calculatePointOnCircle(he[$e]);ze.setLatLng(Je)}),de.setLatLng(q.getLatLng()),De.measureDiv&&(De.measureDiv.innerHTML=Bi(q.getRadius(),"m","Rayon")))},oe=()=>{fe=!1,t.value&&(t.value.off("mousemove",ee),document.removeEventListener("mouseup",oe),t.value.dragging.enable(),q.updateProperties(),s.value=null,Ko(()=>{s.value=q}),pe(q,"Circle"))};t.value.on("mousemove",ee),document.addEventListener("mouseup",oe)})}),de.on("mousedown",Q=>{if(!t.value)return;Ut.DomEvent.stopPropagation(Q),t.value.dragging.disable();let Ae=!0;const De=q.getLatLng(),Ke=Q.latlng,fe=oe=>{if(!Ae)return;const le=oe.latlng.lng-Ke.lng,ze=oe.latlng.lat-Ke.lat,$e=Ut.latLng(De.lat+ze,De.lng+le);Ut.Circle.prototype.setLatLng.call(q,$e),de.setLatLng($e),ye.forEach((Je,Me)=>{const me=q.calculatePointOnCircle(he[Me]);Je.setLatLng(me)}),de.measureDiv&&(de.measureDiv.innerHTML=[Bi(q.getRadius(),"m","Rayon"),Bi(q.getRadius()*2,"m","Diamtre"),Bi(Math.PI*Math.pow(q.getRadius(),2),"m","Surface")].join("<br>"))},ee=()=>{Ae=!1,t.value&&(t.value.off("mousemove",fe),document.removeEventListener("mouseup",ee),t.value.dragging.enable(),q.updateProperties(),s.value=null,Ko(()=>{s.value=q}),pe(q,"Circle"))};t.value.on("mousemove",fe),document.addEventListener("mouseup",ee)}),q.on("circle:resized",()=>{pe(q,"Circle")}),s.value=q},J=q=>{var fe;if(!t.value||!e.value)return;if(!(q instanceof Pa)){console.warn("La couche n'est pas une instance de Rectangle");return}const Z=q;m();const ie=Z.getCenter(),de=Z.getRotatedCorners(),ye=Z.getMidPoints(),he=x(ie,"#059669");v.push(he),p(he,Z,()=>{const{width:ee,height:oe}=Z.getDimensions(),le=ee*oe,ze=Z.getRotation();return[Bi(ee,"m","Largeur"),Bi(oe,"m","Hauteur"),Bi(le,"m","Surface"),`Rotation: ${ze.toFixed(1)}`].join("<br>")});const Q=x(Ut.latLng(ie.lat+(de[0].lat-ie.lat)*1.2,ie.lng+(de[0].lng-ie.lng)*1.2),"#F97316");v.push(Q);const Ae=Ut.polyline([ie,Q.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(fe=n.value)==null||fe.addLayer(Ae);const De=de.map(ee=>{const oe=x(ee,"#DC2626");return v.push(oe),p(oe,Z,()=>{const{width:le,height:ze}=Z.getDimensions();return[Bi(le,"m","Largeur"),Bi(ze,"m","Hauteur")].join("<br>")}),oe}),Ke=ye.map((ee,oe)=>{const le=x(ee,"#2b6451");return v.push(le),p(le,Z,()=>{const{width:ze,height:$e}=Z.getDimensions(),Je=oe%2===0?ze:$e;return[Bi(Je,"m","Longueur du ct"),Bi(Je/2,"m","Distance au coin")].join("<br>")}),le});he.on("mousedown",ee=>{if(!t.value)return;Ut.DomEvent.stopPropagation(ee),t.value.dragging.disable();let oe=!0;const le=$e=>{if(!oe)return;Z.moveFromCenter($e.latlng);const Je=Z.getRotatedCorners(),Me=Z.getMidPoints();De.forEach((qe,ct)=>qe.setLatLng(Je[ct])),Ke.forEach((qe,ct)=>qe.setLatLng(Me[ct])),he.setLatLng($e.latlng);const me=Ut.latLng($e.latlng.lat+(Je[0].lat-$e.latlng.lat)*1.2,$e.latlng.lng+(Je[0].lng-$e.latlng.lng)*1.2);Q.setLatLng(me),Ae.setLatLngs([$e.latlng,me])},ze=()=>{oe=!1,t.value&&(t.value.off("mousemove",le),document.removeEventListener("mouseup",ze),t.value.dragging.enable(),Z.updateProperties(),s.value=null,Ko(()=>{s.value=Z}))};t.value.on("mousemove",le),document.addEventListener("mouseup",ze)}),Q.on("mousedown",ee=>{if(!t.value)return;Ut.DomEvent.stopPropagation(ee),t.value.dragging.disable();let oe=!1;const le=ee.latlng,ze=Z.getRotation(),$e=Z.getCenter(),Je=le.lng-$e.lng,Me=le.lat-$e.lat,me=Math.atan2(Me,Je)*180/Math.PI;v.forEach(ft=>{ft!==Q&&(ft.setStyle({opacity:0,fillOpacity:0}),ft.measureDiv&&(ft.measureDiv.style.display="none"))});const qe=Gh(ft=>{oe||(oe=!0);const Mt=ft.latlng.lng-$e.lng,it=ft.latlng.lat-$e.lat;let hn=Math.atan2(it,Mt)*180/Math.PI-me,Ze=(ze+hn)%360;Ze<0&&(Ze+=360),Z.setRotation(Ze,!1),Q.setLatLng(ft.latlng),Ae.setLatLngs([$e,ft.latlng])},16),ct=()=>{t.value&&(t.value.off("mousemove",qe),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),oe&&Z.finalizeRotation(),s.value=null,Ko(()=>{s.value=Z,m(),J(Z)}))};t.value.on("mousemove",qe),document.addEventListener("mouseup",ct)}),Z.on("coordinates:updated",ee=>{const{corners:oe,center:le}=ee,ze=Z.getMidPoints();De.forEach((Je,Me)=>Je.setLatLng(oe[Me])),Ke.forEach((Je,Me)=>Je.setLatLng(ze[Me])),he.setLatLng(le);const $e=Ut.latLng(le.lat+(oe[0].lat-le.lat)*1.2,le.lng+(oe[0].lng-le.lng)*1.2);Q.setLatLng($e),Ae.setLatLngs([le,$e])})},V=q=>{if(!t.value||!e.value)return;m();const Z=q.getLatLngs();if(!Z||Z.length===0){console.warn("Pas de points pour la ligne");return}let ie=null;if(q instanceof qo){const de=q.getCenter();ie=x(de,"#059669"),v.push(ie),p(ie,q,()=>{const ye=q.getLength()||0;return Bi(ye,"m","Longueur totale")}),ie.on("mousedown",ye=>{if(!t.value)return;Ut.DomEvent.stopPropagation(ye),t.value.dragging.disable();let he=!0;const Q=q.getLatLngs().map(ee=>Ut.latLng(ee.lat,ee.lng)),Ae=ye.latlng;q instanceof qo&&(q.off("move:end"),q.off("vertex:moved"),q.off("latlngs:updated"),q.off("properties:updated")),v.forEach((ee,oe)=>{oe>0&&(ee.setStyle({opacity:0,fillOpacity:0}),ee.measureDiv&&(ee.measureDiv.style.display="none"))});const Ke=Gh(ee=>{if(!he)return;const oe=ee.latlng.lng-Ae.lng,le=ee.latlng.lat-Ae.lat,ze=Q.map($e=>Ut.latLng($e.lat+le,$e.lng+oe));Ut.Polyline.prototype.setLatLngs.call(q,ze),ie==null||ie.setLatLng(ee.latlng)},16),fe=()=>{if(he=!1,!!t.value){if(t.value.off("mousemove",Ke),document.removeEventListener("mouseup",fe),t.value.dragging.enable(),q instanceof qo){const ee=()=>{m(),V(q)};q.on("move:end",ee),q.on("vertex:moved",ee),q.on("latlngs:updated",ee),q.on("properties:updated",ee),q.updateProperties(),pe(q,"Line")}m(),V(q)}};t.value.on("mousemove",Ke),document.addEventListener("mouseup",fe)})}if(Z.forEach((de,ye)=>{const he=x(de,"#DC2626");v.push(he),p(he,q,()=>{if(q instanceof qo){const Q=q.getLength()||0,Ae=q.getLengthToVertex(ye);return[Bi(Ae,"m","Distance depuis le dbut"),Bi(Q,"m","Longueur totale")].join("<br>")}return""}),he.on("mousedown",Q=>{if(!t.value)return;Ut.DomEvent.stopPropagation(Q),t.value.dragging.disable();let Ae=!0;q instanceof qo&&(q.off("move:end"),q.off("vertex:moved"),q.off("latlngs:updated"),q.off("properties:updated")),v.forEach((fe,ee)=>{ee!==ye+1&&(fe.setStyle({opacity:0,fillOpacity:0}),fe.measureDiv&&(fe.measureDiv.style.display="none"))});const De=Gh(fe=>{if(!Ae)return;const ee=q.getLatLngs();ee[ye]=fe.latlng,Ut.Polyline.prototype.setLatLngs.call(q,ee),he.setLatLng(fe.latlng)},16),Ke=()=>{if(Ae=!1,!!t.value){if(t.value.off("mousemove",De),document.removeEventListener("mouseup",Ke),t.value.dragging.enable(),q instanceof qo){const fe=()=>{m(),V(q)};q.on("move:end",fe),q.on("vertex:moved",fe),q.on("latlngs:updated",fe),q.on("properties:updated",fe),q.updateProperties(),pe(q,"Line")}m(),V(q)}};t.value.on("mousemove",De),document.addEventListener("mouseup",Ke)})}),Z.length>=2)for(let de=0;de<Z.length-1;de++){const ye=Z[de],he=Z[de+1],Q=Ut.latLng((ye.lat+he.lat)/2,(ye.lng+he.lng)/2),Ae=x(Q,"#2b6451");v.push(Ae),p(Ae,q,()=>{if(q instanceof qo){const De=q.getSegmentLengthAt(de),Ke=q.getLength()||0,fe=q.getLengthToVertex(de)+De/2;return[Bi(De,"m","Longueur du segment"),Bi(De/2,"m","Demi-segment"),Bi(fe,"m","Distance depuis le dbut"),Bi(Ke,"m","Longueur totale")].join("<br>")}return""})}if(q instanceof qo){const de=()=>{m(),V(q)};q.on("move:start",()=>{v.forEach((ye,he)=>{he>0&&(ye.setStyle({opacity:0,fillOpacity:0}),ye.measureDiv&&(ye.measureDiv.style.display="none"))})}),q.on("move:end",de),q.on("vertex:moved",de),q.on("latlngs:updated",de),q.on("properties:updated",de),v.cleanup=()=>{q.off("move:start",()=>{}),q.off("move:end",de),q.off("vertex:moved",de),q.off("latlngs:updated",de),q.off("properties:updated",de)}}},B=q=>{if(!t.value||!e.value)return;m();const Z=q.getLatLngs()[0],ie=Z.map(Ke=>[Ke.lng,Ke.lat]);ie.push(ie[0]);const de=ju([ie]),ye=Rc(de),he=Z.reduce((Ke,fe,ee)=>{const oe=Z[(ee+1)%Z.length];return Ke+fe.distanceTo(oe)},0);let Q;if(typeof q.getCenter=="function")try{Q=q.getCenter()}catch(Ke){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",Ke);const fe=Hg(de);Q=Ut.latLng(fe.geometry.coordinates[1],fe.geometry.coordinates[0])}else{const Ke=Hg(de);Q=Ut.latLng(Ke.geometry.coordinates[1],Ke.geometry.coordinates[0])}const Ae=x(Q,"#059669");v.push(Ae),p(Ae,q,()=>[Bi(he,"m","Primtre"),Bi(ye,"m","Surface")].join("<br>")),Ae.on("mousedown",Ke=>{if(!t.value)return;Ut.DomEvent.stopPropagation(Ke),t.value.dragging.disable();let fe=!0;const ee=Ke.latlng,oe=[...Z];v.forEach((Je,Me)=>{Me>0&&Je.setStyle({opacity:0,fillOpacity:0})});const le=Gh(Je=>{if(!fe)return;const Me=Je.latlng.lng-ee.lng,me=Je.latlng.lat-ee.lat,qe=oe.map(ct=>Ut.latLng(ct.lat+me,ct.lng+Me));Ut.Polygon.prototype.setLatLngs.call(q,[qe]),Ae.setLatLng(Je.latlng)},16),ze=Je=>{fe&&le(Je)},$e=()=>{if(fe=!1,!!t.value){if(t.value.off("mousemove",ze),document.removeEventListener("mouseup",$e),t.value.dragging.enable(),q.properties){const Je=q.getLatLngs()[0],Me=Je.map(qe=>[qe.lng,qe.lat]);Me.push(Me[0]);const me=ju([Me]);q.properties.area=Rc(me),q.properties.perimeter=Je.reduce((qe,ct,ft)=>{const Mt=Je[(ft+1)%Je.length];return qe+ct.distanceTo(Mt)},0),q.properties.surface=q.properties.area}m(),B(q),s.value=null,Ko(()=>{s.value=q})}};t.value.on("mousemove",ze),document.addEventListener("mouseup",$e)}),Z.forEach((Ke,fe)=>{const ee=x(Ke,"#DC2626");v.push(ee),p(ee,q,()=>{const oe=Z[(fe-1+Z.length)%Z.length],le=Z[(fe+1)%Z.length],ze=Ke.distanceTo(oe),$e=Ke.distanceTo(le);return[Bi(ze,"m","Distance au point prcdent"),Bi($e,"m","Distance au point suivant"),Bi(he,"m","Primtre total"),Bi(ye,"m","Surface")].join("<br>")}),ee.on("mousedown",oe=>{if(Ut.DomEvent.stopPropagation(oe),!t.value)return;t.value.dragging.disable();let le=!0;Ae&&(Ae.setStyle({opacity:0,fillOpacity:0}),Ae.measureDiv&&(Ae.measureDiv.style.display="none"));const ze=Gh(Me=>{if(!le)return;Z[fe]=Me.latlng,Ut.Polygon.prototype.setLatLngs.call(q,[Z]),ee.setLatLng(Me.latlng);const me=v.slice(Z.length+1),qe=(fe-1+Z.length)%Z.length,ct=me[qe];if(ct){const Mt=Z[qe],it=Z[fe],jt=Ut.latLng((Mt.lat+it.lat)/2,(Mt.lng+it.lng)/2);ct.setLatLng(jt)}const ft=me[fe];if(ft){const Mt=Z[fe],it=Z[(fe+1)%Z.length],jt=Ut.latLng((Mt.lat+it.lat)/2,(Mt.lng+it.lng)/2);ft.setLatLng(jt)}},16),$e=Me=>{le&&ze(Me)},Je=()=>{if(le=!1,!!t.value){if(t.value.off("mousemove",$e),document.removeEventListener("mouseup",Je),t.value.dragging.enable(),q.properties){const Me=q.getLatLngs()[0].map(qe=>[qe.lng,qe.lat]);Me.push(Me[0]);const me=ju([Me]);q.properties.area=Rc(me),q.properties.perimeter=Z.reduce((qe,ct,ft)=>{const Mt=Z[(ft+1)%Z.length];return qe+ct.distanceTo(Mt)},0),q.properties.surface=q.properties.area}m(),B(q),s.value=null,Ko(()=>{s.value=q})}};t.value.on("mousemove",$e),document.addEventListener("mouseup",Je)})}),(()=>{const Ke=q.getLatLngs()[0];v.slice(Ke.length+1).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,Ke.length+1);const fe=new Array(Ke.length);for(let ee=0;ee<Ke.length;ee++){const oe=Ke[ee],le=Ke[(ee+1)%Ke.length];fe[ee]=O(oe,le)}fe.forEach((ee,oe)=>{const le=x(ee,"#2b6451");v.push(le),p(le,q,()=>{const ze=Ke[oe],$e=Ke[(oe+1)%Ke.length],Je=ze.distanceTo($e);return[Bi(Je,"m","Longueur du segment"),Bi(he,"m","Primtre total"),Bi(ye,"m","Surface")].join("<br>")}),le.on("mousedown",ze=>{if(!t.value)return;Ut.DomEvent.stopPropagation(ze),t.value.dragging.disable();let $e=!0;const Je=oe;Ae&&(Ae.setStyle({opacity:0,fillOpacity:0}),Ae.measureDiv&&(Ae.measureDiv.style.display="none"));const Me=[...q.getLatLngs()[0]];Me.splice((Je+1)%Me.length,0,ee),q.setLatLngs([Me]),m(),B(q);const me=Je+1,qe=1+me,ct=me<v.length-1?v[qe]:null;if(ct){const ft=it=>{if(!$e)return;const jt=q.getLatLngs()[0];jt[me]=it.latlng,q.setLatLngs([jt]),ct.setLatLng(it.latlng);const hn=v.slice(1+jt.length),Ze=(me-1+jt.length)%jt.length,lt=me;if(hn[Ze]){const rt=jt[Ze],$t=jt[me],Qt=Ut.latLng((rt.lat+$t.lat)/2,(rt.lng+$t.lng)/2);hn[Ze].setLatLng(Qt)}if(hn[lt]){const rt=jt[me],$t=jt[(me+1)%jt.length],Qt=Ut.latLng((rt.lat+$t.lat)/2,(rt.lng+$t.lng)/2);hn[lt].setLatLng(Qt)}},Mt=()=>{if($e=!1,!!t.value){if(t.value.off("mousemove",ft),document.removeEventListener("mouseup",Mt),t.value.dragging.enable(),q.properties){const it=q.getLatLngs()[0].map(hn=>[hn.lng,hn.lat]);it.push(it[0]);const jt=ju([it]);q.properties.area=Rc(jt),q.properties.perimeter=q.getLatLngs()[0].reduce((hn,Ze,lt,rt)=>{const $t=rt[(lt+1)%rt.length];return hn+Ze.distanceTo($t)},0)}m(),B(q),s.value=null,Ko(()=>{s.value=q})}};t.value.on("mousemove",ft),document.addEventListener("mouseup",Mt)}else t.value.dragging.enable(),m(),B(q)})})})()},H=q=>{if(!t.value||!e.value)return;m();const Z=q.getLatLng(),ie=x(Z,"#059669");v.push(ie),p(ie,q,()=>`Position: ${Z.lat.toFixed(6)}, ${Z.lng.toFixed(6)}`),ie.on("mousedown",de=>{if(!t.value)return;Ut.DomEvent.stopPropagation(de),t.value.dragging.disable(),q.startMoving();let ye=!0;const Q=Gh(De=>{ye&&(ie.setLatLng(De.latlng),q.setLatLng(De.latlng))},16),Ae=()=>{t.value&&(t.value.off("mousemove",Q),document.removeEventListener("mouseup",Ae),t.value.dragging.enable(),ye=!1,q.finishMoving(),q.updateProperties(),s.value=null,Ko(()=>{s.value=q,m(),H(q)}))};t.value.on("mousemove",Q),document.addEventListener("mouseup",Ae)}),s.value=q},$=q=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:q.constructor.name,properties:q.properties}),r.value.clearLayers();try{if(q instanceof Pa)q.generateHelperPoints(t.value);else if(q instanceof sp){if("getLatLng"in q&&typeof q.getLatLng=="function"){const Z=q.getLatLng();if(Z){const ie=Ut.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ie)}}}else if(q instanceof Ad){const Z=q.getLatLng();if(Z){const ie=Ut.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ie)}}else if(q instanceof uh||q instanceof Ut.Polygon){let Z=[];if("getLatLngs"in q){const de=q.getLatLngs();if(Array.isArray(de)&&de.length>0){const ye=de[0];Array.isArray(ye)?Z=ye:ye instanceof Ut.LatLng&&(Z=de)}}let ie=null;if(q instanceof uh&&typeof q.getCenter=="function")ie=q.getCenter();else if(Z.length>0){const de=Z.map(Q=>[Q.lng,Q.lat]);de.push(de[0]);const ye=ju([de]),he=Hg(ye);ie=Ut.latLng(he.geometry.coordinates[1],he.geometry.coordinates[0])}if(ie){const de=Ut.circleMarker(ie,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(de)}Z.forEach(de=>{if(de){const ye=Ut.circleMarker(de,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ye)}});for(let de=0;de<Z.length;de++){const ye=Z[de],he=Z[(de+1)%Z.length];if(ye&&he){const Q=Ut.latLng((ye.lat+he.lat)/2,(ye.lng+he.lng)/2),Ae=Ut.circleMarker(Q,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Ae)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(Z){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",Z)}}},R=q=>{console.log("Nombre total de couches:",q.length);const Z=q.filter(Q=>{var Ke;if(!Q)return!1;let Ae=0,De={width:0,height:0};if(Q instanceof Ut.Circle){Ae=Math.PI*Math.pow(Q.getRadius(),2);const fe=Q.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${Ae.toFixed(2)} m`),console.log(`- Rayon: ${fe.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(Q instanceof Pa||Q instanceof Ut.Rectangle){const fe=Q.getBounds(),ee=fe.getSouthWest(),oe=fe.getNorthEast(),le=pc([[ee.lng,ee.lat],[oe.lng,ee.lat]]),ze=pc([[ee.lng,ee.lat],[ee.lng,oe.lat]]);De.width=Hh(le,{units:"meters"}),De.height=Hh(ze,{units:"meters"}),Ae=De.width*De.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${Ae.toFixed(2)} m`),console.log(`- Largeur: ${De.width.toFixed(2)} m`),console.log(`- Hauteur: ${De.height.toFixed(2)} m`)}else if(((Ke=Q.properties)==null?void 0:Ke.type)==="Semicircle"){const fe=Q.getStartAngle(),ee=Q.getStopAngle(),oe=(ee-fe+360)%360,le=Q.getRadius();Ae=Math.PI*Math.pow(le,2)*oe/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${Ae.toFixed(2)} m`),console.log(`- Rayon: ${le.toFixed(2)} m`),console.log(`- Angle de dbut: ${fe.toFixed(2)}`),console.log(`- Angle de fin: ${ee.toFixed(2)}`),console.log(`- Angle d'ouverture: ${oe.toFixed(2)}`)}return Ae>0});if(Z.length===0)return 0;const ie=new Set,de=[];for(const Q of Z)if(!ie.has(Q)){const Ae=K(Z,Q);Ae.length>0&&(de.push(Ae),Ae.forEach(De=>ie.add(De)))}console.log(`
Nombre de groupes de formes connectes: ${de.length}`);const ye=de.map((Q,Ae)=>{console.log(`
Calcul pour le groupe ${Ae+1} (${Q.length} formes):`);const De=Q.map(le=>{var ze,$e,Je;try{let Me;if(le instanceof Ut.Circle){const me=le.getLatLng(),qe=le.getRadius();Me=Kj([me.lng,me.lat],qe/1e3,{units:"kilometers",steps:256});const ct=Rc(Me),ft=((ze=le.properties)==null?void 0:ze.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${qe.toFixed(2)}m`),console.log(`- Surface proprit: ${ft.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${ct.toFixed(2)}m`),Me}else if(le instanceof Pa||le instanceof Ut.Rectangle){const me=le.getBounds(),qe=me.getSouthWest(),ct=me.getNorthEast(),ft=Ut.latLng(ct.lat,qe.lng),Mt=Ut.latLng(qe.lat,ct.lng),it=[[qe.lng,qe.lat],[Mt.lng,Mt.lat],[ct.lng,ct.lat],[ft.lng,ft.lat],[qe.lng,qe.lat]];Me=ju([it]);const jt=Rc(Me),hn=pc([[qe.lng,qe.lat],[ct.lng,qe.lat]]),Ze=pc([[qe.lng,qe.lat],[qe.lng,ct.lat]]),lt=Hh(hn,{units:"meters"}),rt=Hh(Ze,{units:"meters"}),$t=lt*rt;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${lt.toFixed(2)}m`),console.log(`- Hauteur: ${rt.toFixed(2)}m`),console.log(`- Surface thorique: ${$t.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${jt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs($t-jt).toFixed(2)}m (${(Math.abs($t-jt)/$t*100).toFixed(2)}%)`),Me}else if((($e=le.properties)==null?void 0:$e.type)==="Semicircle"){const me=le.getCenter(),qe=le.getRadius(),ct=le.getStartAngle(),ft=le.getStopAngle(),Mt=[],it=64;Mt.push([me.lng,me.lat]);for(let Ze=0;Ze<=it;Ze++){const rt=(ct+(ft-ct+360)%360*Ze/it)*Math.PI/180,$t=qe*Math.cos(rt),Pn=qe*Math.sin(rt)/111319.9,wn=$t/(111319.9*Math.cos(me.lat*Math.PI/180));Mt.push([me.lng+wn,me.lat+Pn])}Mt.push([me.lng,me.lat]),Me=ju([Mt]);const jt=Rc(Me),hn=((Je=le.properties)==null?void 0:Je.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${qe.toFixed(2)}m`),console.log(`- Surface proprit: ${hn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${jt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(hn-jt).toFixed(2)}m (${(Math.abs(hn-jt)/hn*100).toFixed(2)}%)`),Me}return null}catch(Me){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Me),null}}).filter(le=>le!==null);if(De.length===0)return 0;const Ke=De.map(le=>{const ze=Rc(le);return console.log(`Surface individuelle: ${ze.toFixed(2)}m`),ze});let fe=0;for(let le=0;le<De.length;le++)for(let ze=le+1;ze<De.length;ze++)try{const $e=Ij([De[le],De[ze]]),Je=mz($e);if(Je){const Me=Rc(Je);fe+=Me,console.log(`Intersection entre formes ${le+1} et ${ze+1}: ${Me.toFixed(2)}m`)}}catch($e){console.error(`Erreur lors du calcul d'intersection entre les formes ${le+1} et ${ze+1}:`,$e)}const ee=Ke.reduce((le,ze)=>le+ze,0),oe=ee-fe;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Ae+1}:`),console.log(`- Surface totale (somme): ${ee.toFixed(2)}m`),console.log(`- Surface d'intersection: ${fe.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${oe.toFixed(2)}m`),oe}),he=Math.max(...ye);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${he.toFixed(2)}m`),he},I=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},X=(q,Z)=>{if(!t.value)return;I();const ie=Z?K(q,Z):q;if(a.value||(a.value=Ut.layerGroup().addTo(t.value)),ie.forEach(de=>{var he;const ye=(he=de.properties)==null?void 0:he.type;if(ye==="Circle"||ye==="Semicircle"){const Q=de.getLatLng(),Ae=de.getRadius(),De=Ut.circle(Q,{radius:Ae,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ut.canvas({padding:.5})}),Ke=Ut.circle(Q,{radius:Ae,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ut.canvas({padding:.5})});a.value&&(a.value.addLayer(Ke),a.value.addLayer(De))}else if(ye==="Rectangle"||ye==="Polygon"){const Q=de.getLatLngs(),Ae=Ut.polygon(Q,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ut.canvas({padding:.5})}),De=Ut.polygon(Q,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ut.canvas({padding:.5})});a.value&&(a.value.addLayer(De),a.value.addLayer(Ae))}}),Z&&ie.length>1&&t.value){const de=Ut.latLngBounds([]);ie.forEach(Q=>{Q.getBounds?de.extend(Q.getBounds()):Q.getLatLng&&de.extend(Q.getLatLng())});const ye=de.getCenter(),he=Ut.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(ye);a.value&&a.value.addLayer(Ut.marker(ye,{opacity:0,interactive:!1}).bindTooltip(he).openTooltip())}},K=(q,Z)=>{if(!Z)return[];const ie=new Set,de=[Z],ye=[Z];for(Z._leaflet_id!==void 0&&ie.add(Z._leaflet_id);de.length>0;){const he=de.shift();for(const Q of q){if(Q===he||ie.has(Q._leaflet_id))continue;_e(he,Q)&&(ye.push(Q),de.push(Q),ie.add(Q._leaflet_id))}}return ye},_e=(q,Z)=>{let ie=null,de=null;if(q.getBounds&&typeof q.getBounds=="function")ie=q.getBounds();else if(q.getLatLng&&q.getRadius){const ye=q.getLatLng(),he=q.getRadius();ie=Ut.latLngBounds([ye.lat-he/111e3,ye.lng-he/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+he/111e3,ye.lng+he/(111e3*Math.cos(ye.lat*Math.PI/180))])}if(Z.getBounds&&typeof Z.getBounds=="function")de=Z.getBounds();else if(Z.getLatLng&&Z.getRadius){const ye=Z.getLatLng(),he=Z.getRadius();de=Ut.latLngBounds([ye.lat-he/111e3,ye.lng-he/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+he/111e3,ye.lng+he/(111e3*Math.cos(ye.lat*Math.PI/180))])}return!(!ie||!de||!ie.intersects(de))},ve=(q,Z)=>{var de;const ie=K(q,Z);return ie.length===1&&(de=Z.properties)!=null&&de.surface?Z.properties.surface:R(ie)},Ge=q=>{var de,ye,he,Q,Ae,De,Ke,fe,ee;const Z=q.layer;(de=e.value)==null||de.addLayer(Z);let ie="unknown";if(Z instanceof Ut.Circle?ie=i.value==="Semicircle"?"Semicircle":"Circle":Z instanceof Ut.Rectangle?ie="Rectangle":Z instanceof Ut.Polygon?ie="Polygon":Z instanceof Ut.Polyline&&!(Z instanceof Ut.Polygon)&&(ie="Line"),Z.properties=E(Z,ie),Z.properties||(Z.properties={}),Z.properties.category||(Z.properties.category="forages"),Z.properties.accessLevel||(Z.properties.accessLevel="visitor"),Z._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=Z,console.log("[useMapDrawing] Input layer:",{type:ie,instanceof:{Circle:Z instanceof Ut.Circle,Rectangle:Z instanceof Ut.Rectangle,Polygon:Z instanceof Ut.Polygon,Polyline:Z instanceof Ut.Polyline},options:Z.options,properties:Z.properties,_dbId:Z._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:Z,type:ie,properties:Z.properties}})),Z.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ie,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&$(Z)}),Z.on("mouseout",()=>{var oe;console.log("[mouseout] Sortie de la forme",{type:ie,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&((oe=r.value)==null||oe.clearLayers())}),ie==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(ie==="Circle"){(ye=e.value)==null||ye.removeLayer(Z);const oe=new sp(Z.getLatLng(),{radius:Z.getRadius(),...Z.options});oe.properties={...E(oe,"Circle"),type:"Circle"},Object.defineProperty(oe,"name",{value:oe.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(oe,"name"),directName:oe.name,propertiesName:oe.properties.name,nameIsEnumerable:Object.keys(oe).includes("name"),allProperties:Object.keys(oe.properties),allKeys:Object.keys(oe)}),(he=e.value)==null||he.addLayer(oe),s.value=oe,j(oe)}else if(ie==="Rectangle"){(Q=e.value)==null||Q.removeLayer(Z);const oe=new Pa(Z.getBounds(),{...Z.options});oe.updateProperties(),(Ae=e.value)==null||Ae.addLayer(oe),s.value=oe,J(oe)}else if(Z instanceof Ut.Polygon){const oe=Z.getLatLngs()[0],le=new uh([oe],{...Z.options});le.updateProperties(),(De=e.value)==null||De.removeLayer(Z),(Ke=e.value)==null||Ke.addLayer(le),s.value=le,B(le)}else if(Z instanceof qo)V(Z);else if(Z instanceof Ut.Polyline&&!(Z instanceof Ut.Polygon)){const oe=Z.getLatLngs(),le=new qo(oe,{...Z.options});le.updateProperties(),(fe=e.value)==null||fe.removeLayer(Z),(ee=e.value)==null||ee.addLayer(le),s.value=le,V(le)}Bl("Cliquez sur la forme pour afficher les points de contrle")},se=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",Ge))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:T,setDrawingTool:z,updateShapeStyle:Y,updateShapeProperties:ne,updateTextFixedSize:k,adjustView:A,clearActiveControlPoints:m,calculateTotalCoverageArea:R,showCoverageOverlay:X,hideCoverageOverlay:I,calculateConnectedCoverageArea:ve,getConnectedShapes:K}}function RU(){const{isEnabled:t,startMeasure:e}=$p(),n=Lt(null),r=Lt(""),i=Lt("Hybride"),s=Lt(null),o={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Ut.latLngBounds(Ut.latLng(41.333,-5.566),Ut.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},a=e("createBaseMaps","useMapState"),l={Hybride:Ut.layerGroup([Ut.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{...o,attribution:" OpenStreetMap contributors",opacity:.6,subdomains:["a","b","c"],crossOrigin:!0}),Ut.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{...o,attribution:" Esri",maxNativeZoom:20,opacity:.6})]),Cadastre:Ut.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Cadastre - Carte  IGN/Geoportail",maxNativeZoom:18}),IGN:Ut.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Carte IGN  IGN/Geoportail",maxNativeZoom:18})};a();const c=En.createPerformanceTracker(m=>{En.measure("initMap:setOptions",()=>{n.value=m,m.options.zoomSnap=.5,m.options.zoomDelta=.5,m.options.wheelPxPerZoomLevel=120,m.options.zoomAnimation=!0,m.options.fadeAnimation=!0,m.options.markerZoomAnimation=!0,m.options.preferCanvas=!0,m.options.renderer=Ut.canvas(),m.options.minZoom=2,m.options.maxZoom=19,m.options.scrollWheelZoom=!0,m.options.doubleClickZoom=!0;const x=Ut.latLngBounds(Ut.latLng(-90,-180),Ut.latLng(90,180));m.setMaxBounds(x),m.options.maxBoundsViscosity=1,m.options.trackResize=!0;let E=null;m.getZoom(),m.on("zoomstart",()=>{m.getZoom(),m.options.zoomAnimation=!1,m.options.markerZoomAnimation=!1}),m.on("zoomend",()=>{E&&clearTimeout(E),E=setTimeout(()=>{setTimeout(()=>{m.options.zoomAnimation=!0,m.options.markerZoomAnimation=!0,m.invalidateSize({animate:!1,pan:!1});const T=m.getBounds(),A=m.options.maxBounds;A&&!T.intersects(A)&&m.panInsideBounds(A,{animate:!1}),m.eachLayer(z=>{z.properties&&z.properties.type==="Note"&&typeof z.updatePosition=="function"&&z.updatePosition()})},250)},250)});const k=m._zoomAnimation;k&&(m._zoomAnimation=function(T){try{this._animatingZoom||k.call(this,T)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),m.on("zoomanim",T=>{m.eachLayer(A=>{A.properties&&A.properties.type==="Note"&&typeof A.updatePositionDuringZoom=="function"&&A.updatePositionDuringZoom(T)})})},"useMapState"),En.measure("initMap:addInitialLayer",()=>{m&&m.whenReady(()=>{const x=i.value;if(l[x]){if(console.log(`Initialisation de la couche de base: ${x}`),s.value&&m.hasLayer(s.value))try{m.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(E){console.warn("Erreur lors de la suppression de la couche active prcdente:",E)}s.value=l[x];try{s.value.addTo(m),console.log(`Couche ${x} ajoute  la carte`)}catch(E){console.error(`Erreur lors de l'ajout de la couche ${x}:`,E)}}else console.warn(`Couche de base non disponible: ${x}`)})},"useMapState"),m.on("baselayerchange",x=>{const E=e("baselayerchange","useMapState",{layer:x.name});i.value=x.name,s.value=x.layer,E()}),t.value&&(m.on("movestart",()=>{e("mapMove","useMapState",{startCenter:m.getCenter()})}),m.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:m.getCenter()})(),m.eachLayer(E=>{E.properties&&E.properties.type==="Note"&&typeof E.updatePosition=="function"&&E.updatePosition()})}),m.on("tileloadstart",()=>{e("tileLoad","useMapState")}),m.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),h=En.createAsyncPerformanceTracker(async m=>{if(!n.value||!l[m]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===m)return;console.log(`Changement de carte: ${i.value} -> ${m}`);const x=n.value,E=x.getCenter(),k=x.getZoom();x.options.zoomAnimation=!1,x.options.fadeAnimation=!1,x.options.markerZoomAnimation=!1;const T=l[m];if(s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(A){console.warn("Erreur lors de la suppression de la couche active:",A)}try{T instanceof Ut.LayerGroup,T.addTo(x),console.log(`Nouvelle couche ${m} ajoute`)}catch(A){console.error("Erreur lors de l'ajout de la nouvelle couche:",A);try{x.hasLayer(T)&&x.removeLayer(T),T.addTo(x),console.log(`Rcupration: couche ${m} rajoute`)}catch(z){throw console.error("chec de la rcupration:",z),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=T,i.value=m;try{x.setView(E,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${E}, zoom=${k}`)}catch(A){console.warn("Erreur lors de la rinitialisation de la vue:",A)}try{x.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{x.eachLayer(A=>{A.properties&&A.properties.type==="Note"&&typeof A.updatePosition=="function"&&A.updatePosition()})},100)}catch(A){console.warn("Erreur lors du rafrachissement de la carte:",A)}setTimeout(()=>{x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(x){if(console.error("Erreur lors du changement de carte de base:",x),n.value)try{const E=n.value;E.eachLayer(T=>{(T instanceof Ut.TileLayer||T instanceof Ut.LayerGroup)&&E.removeLayer(T)});const k=l[m];k.addTo(E),s.value=k,i.value=m,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(E){console.error("Erreur lors de la rcupration aprs chec:",E)}}},"changeBaseMap","useMapState"),p=En.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const m=await En.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),x=await En.measureAsync("searchLocation:parseResponse",async()=>await m.json(),"useMapState");x&&x.length>0&&En.measure("searchLocation:updateView",()=>{const{lat:E,lon:k}=x[0];n.value.setView([E,k],13,{animate:!0})},"useMapState")}catch(m){console.error("Erreur lors de la recherche de localisation:",m)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:l,initMap:c,searchLocation:p,changeBaseMap:h,cleanup:()=>{const m=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),m()},isPerformanceEnabled:t}}const FU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},jU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},zU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},$U={key:0,class:"mb-4"},VU={key:0,class:"animate-pulse"},UU=["value"],HU={key:1,class:"mb-4"},GU={key:0,class:"animate-pulse"},WU=["disabled"],qU={value:null},YU=["value"],KU={key:2,class:"mb-4"},ZU={key:0,class:"animate-pulse"},XU=["disabled"],JU={value:null},QU=["value"],eH={class:"mb-4"},tH={class:"mb-6"},nH={class:"flex justify-end space-x-3"},rH=["disabled"],iH={key:0},sH={key:1},RE=Ss({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(H){return H?typeof H=="object"?H.id:H:null}function i(H){if(H===null)throw new Error("Invalid ID");return H}const s=t,o=n,a=to(),l=$y(),c=Ap(),h=Lt(!1),p=Lt(null),v=Lt([]),m=Lt([]),x=Lt([]),E=Lt(null),k=Lt(null),T=Lt(!1),A=Lt(!1),z=Lt(!1),Y=Lt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),ne=Un(()=>{var H,$,R;return((H=a.user)==null?void 0:H.user_type)==="admin"?Y.value.nom.trim()&&Y.value.entreprise&&Y.value.salarie:(($=a.user)==null?void 0:$.user_type)==="entreprise"?Y.value.nom.trim()&&Y.value.salarie:(((R=a.user)==null?void 0:R.user_type)==="salarie",Y.value.nom.trim())});fi(()=>Y.value.entreprise,async H=>{if(!s.modelValue)return;Y.value.salarie=null,Y.value.visiteur=null,m.value=[];const $=r(H);console.log("[NewPlanModal] Entreprise slectionne:",$),$?await ge($):v.value=[]}),fi(()=>Y.value.salarie,async H=>{if(!s.modelValue)return;Y.value.visiteur=null;const $=r(H);$?await pe($):m.value=[]}),fi(()=>s.modelValue,H=>{var $,R,I;H?(($=a.user)==null?void 0:$.user_type)==="admin"?V():((R=a.user)==null?void 0:R.user_type)==="entreprise"?ge(a.user.id):((I=a.user)==null?void 0:I.user_type)==="salarie"&&pe(a.user.id):(Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],v.value=[],x.value=[],p.value=null)});async function ge(H){T.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",H);const $=await Ya.getUsers({role:"SALARIE",entreprise:H});console.log("[NewPlanModal] Rponse salaries:",$.data),v.value=$.data}catch($){console.error("[NewPlanModal] Error loading salaries:",$),v.value=[]}finally{T.value=!1}}async function pe(H){A.value=!0;try{const $=await Ya.getUsers({role:"VISITEUR",salarie:H});m.value=$.data}catch($){console.error("[NewPlanModal] Error loading visiteurs:",$),m.value=[]}finally{A.value=!1}}async function O(H){s.modelValue&&(E.value=H,Y.value.salarie=H.id,await pe(H.id),o("salarieSelected",H))}function j(H){s.modelValue&&(k.value=H,Y.value.visiteur=H.id,o("visiteurSelected",H))}function J(){o("update:modelValue",!1),Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],p.value=null}async function V(){z.value=!0;try{const H=await a.fetchEnterprises();x.value=H}catch(H){console.error("[NewPlanModal] Error loading entreprises:",H),x.value=[]}finally{z.value=!1}}async function B(){var H,$;p.value=null,h.value=!0;try{const R={nom:Y.value.nom.trim(),description:Y.value.description.trim()},I=a.user;if(!I)throw new Error("User not found");if(I.user_type==="admin"){if(!Y.value.entreprise||!Y.value.salarie)throw new Error("Missing required fields");R.entreprise=i(r(Y.value.entreprise)),R.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(R.visiteur=Y.value.visiteur)}else if(I.user_type==="entreprise"){if(!Y.value.salarie)throw new Error("Missing required fields");R.entreprise=I.id,R.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(R.visiteur=Y.value.visiteur)}else if(I.user_type==="salarie"){if(!I.entreprise)throw new Error("Missing required fields");R.entreprise=I.entreprise.id,R.salarie=I.id,Y.value.visiteur&&(R.visiteur=Y.value.visiteur)}else if(I.user_type==="visiteur"){if(!I.entreprise||!I.salarie)throw new Error("Missing required fields");R.entreprise=I.entreprise.id,R.salarie=I.salarie.id,R.visiteur=I.id}console.log("Donnes du plan  crer:",R),l.clearCurrentPlan(),c.setCurrentPlan(null);const X=await l.createPlan(R);o("created",X.id),J()}catch(R){console.error("[NewPlanModal] Error creating plan:",R),console.error("Response data:",(H=R.response)==null?void 0:H.data);let I="Une erreur est survenue lors de la cration du plan";($=R.response)!=null&&$.data&&(typeof R.response.data=="object"?I=Object.entries(R.response.data).map(([X,K])=>Array.isArray(K)?`${X}: ${K.join(", ")}`:`${X}: ${K}`).join(`
`):typeof R.response.data=="string"&&(I=R.response.data)),p.value=I}finally{h.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:k,loadSalaries:ge,loadVisiteurs:pe,selectSalarie:O,selectVisiteur:j}),(H,$)=>{var R,I,X,K;return H.modelValue?(Ne(),Be("div",FU,[S("div",jU,[S("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[$[6]||($[6]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),S("button",{onClick:J,class:"text-gray-400 hover:text-gray-500"},$[5]||($[5]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",zU,[Bn(a).isAdmin?(Ne(),Be("div",$U,[$[9]||($[9]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),z.value?(Ne(),Be("div",VU,$[7]||($[7]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Sn((Ne(),Be("select",{key:1,"onUpdate:modelValue":$[0]||($[0]=_e=>Y.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[$[8]||($[8]=S("option",{value:null},"Slectionnez une entreprise",-1)),(Ne(!0),Be(bn,null,Hn(x.value,_e=>(Ne(),Be("option",{key:_e.id,value:_e.id},kt(Bn(mu)(_e)),9,UU))),128))],512)),[[Ai,Y.value.entreprise]])])):Zt("",!0),((R=Bn(a).user)==null?void 0:R.user_type)==="admin"||((I=Bn(a).user)==null?void 0:I.user_type)==="entreprise"?(Ne(),Be("div",HU,[$[11]||($[11]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),T.value?(Ne(),Be("div",GU,$[10]||($[10]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Sn((Ne(),Be("select",{key:1,id:"edit-salarie","onUpdate:modelValue":$[1]||($[1]=_e=>Y.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Bn(a).isAdmin&&!Y.value.entreprise},[S("option",qU,kt(v.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Ne(!0),Be(bn,null,Hn(v.value,_e=>(Ne(),Be("option",{key:_e.id,value:_e.id},kt(Bn(mu)(_e)),9,YU))),128))],8,WU)),[[Ai,Y.value.salarie]])])):Zt("",!0),((X=Bn(a).user)==null?void 0:X.user_type)!=="visiteur"?(Ne(),Be("div",KU,[$[13]||($[13]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),A.value?(Ne(),Be("div",ZU,$[12]||($[12]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Sn((Ne(),Be("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":$[2]||($[2]=_e=>Y.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((K=Bn(a).user)==null?void 0:K.user_type)!=="salarie"&&!Y.value.salarie},[S("option",JU,kt(m.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Ne(!0),Be(bn,null,Hn(m.value,_e=>(Ne(),Be("option",{key:_e.id,value:_e.id},kt(Bn(mu)(_e)),9,QU))),128))],8,XU)),[[Ai,Y.value.visiteur]])])):Zt("",!0),S("div",eH,[$[14]||($[14]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Sn(S("input",{id:"edit-nom","onUpdate:modelValue":$[3]||($[3]=_e=>Y.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Pr,Y.value.nom]])]),S("div",tH,[$[15]||($[15]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Sn(S("textarea",{id:"edit-description","onUpdate:modelValue":$[4]||($[4]=_e=>Y.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Pr,Y.value.description]])]),S("div",nH,[S("button",{onClick:J,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),S("button",{onClick:B,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!ne.value||h.value},[h.value?(Ne(),Be("span",iH,"Cration en cours...")):(Ne(),Be("span",sH,"Crer"))],8,rH)])])])])):Zt("",!0)}}});function Ki(t){"@babel/helpers - typeof";return Ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(t)}var Ja=Uint8Array,vu=Uint16Array,j_=Int32Array,Vy=new Ja([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Uy=new Ja([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xb=new Ja([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FE=function(t,e){for(var n=new vu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new j_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},jE=FE(Vy,2),zE=jE.b,Lb=jE.r;zE[28]=258,Lb[258]=28;var $E=FE(Uy,0),oH=$E.b,m5=$E.r,Sb=new vu(32768);for(var ws=0;ws<32768;++ws){var Xd=(ws&43690)>>1|(ws&21845)<<1;Xd=(Xd&52428)>>2|(Xd&13107)<<2,Xd=(Xd&61680)>>4|(Xd&3855)<<4,Sb[ws]=((Xd&65280)>>8|(Xd&255)<<8)>>1}var Xc=function(t,e,n){for(var r=t.length,i=0,s=new vu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new vu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new vu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],p=o[t[i]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)a[Sb[p]>>l]=c}else for(a=new vu(r),i=0;i<r;++i)t[i]&&(a[i]=Sb[o[t[i]-1]++]>>15-t[i]);return a},Lh=new Ja(288);for(var ws=0;ws<144;++ws)Lh[ws]=8;for(var ws=144;ws<256;++ws)Lh[ws]=9;for(var ws=256;ws<280;++ws)Lh[ws]=7;for(var ws=280;ws<288;++ws)Lh[ws]=8;var vm=new Ja(32);for(var ws=0;ws<32;++ws)vm[ws]=5;var aH=Xc(Lh,9,0),lH=Xc(Lh,9,1),uH=Xc(vm,5,0),cH=Xc(vm,5,1),e2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},lc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},t2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},z_=function(t){return(t+7)/8|0},VE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ja(t.subarray(e,n))},dH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fc=function(t,e,n){var r=new Error(e||dH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,fc),!n)throw r;return r},hH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Ja(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Ja(i*3));var c=function(De){var Ke=n.length;if(De>Ke){var fe=new Ja(Math.max(Ke*2,De));fe.set(n),n=fe}},h=e.f||0,p=e.p||0,v=e.b||0,m=e.l,x=e.d,E=e.m,k=e.n,T=i*8;do{if(!m){h=lc(t,p,1);var A=lc(t,p+1,3);if(p+=3,A)if(A==1)m=lH,x=cH,E=9,k=5;else if(A==2){var ge=lc(t,p,31)+257,pe=lc(t,p+10,15)+4,O=ge+lc(t,p+5,31)+1;p+=14;for(var j=new Ja(O),J=new Ja(19),V=0;V<pe;++V)J[xb[V]]=lc(t,p+V*3,7);p+=pe*3;for(var B=e2(J),H=(1<<B)-1,$=Xc(J,B,1),V=0;V<O;){var R=$[lc(t,p,H)];p+=R&15;var z=R>>4;if(z<16)j[V++]=z;else{var I=0,X=0;for(z==16?(X=3+lc(t,p,3),p+=2,I=j[V-1]):z==17?(X=3+lc(t,p,7),p+=3):z==18&&(X=11+lc(t,p,127),p+=7);X--;)j[V++]=I}}var K=j.subarray(0,ge),_e=j.subarray(ge);E=e2(K),k=e2(_e),m=Xc(K,E,1),x=Xc(_e,k,1)}else fc(1);else{var z=z_(p)+4,Y=t[z-4]|t[z-3]<<8,ne=z+Y;if(ne>i){l&&fc(0);break}a&&c(v+Y),n.set(t.subarray(z,ne),v),e.b=v+=Y,e.p=p=ne*8,e.f=h;continue}if(p>T){l&&fc(0);break}}a&&c(v+131072);for(var ve=(1<<E)-1,Ge=(1<<k)-1,se=p;;se=p){var I=m[t2(t,p)&ve],q=I>>4;if(p+=I&15,p>T){l&&fc(0);break}if(I||fc(2),q<256)n[v++]=q;else if(q==256){se=p,m=null;break}else{var Z=q-254;if(q>264){var V=q-257,ie=Vy[V];Z=lc(t,p,(1<<ie)-1)+zE[V],p+=ie}var de=x[t2(t,p)&Ge],ye=de>>4;de||fc(3),p+=de&15;var _e=oH[ye];if(ye>3){var ie=Uy[ye];_e+=t2(t,p)&(1<<ie)-1,p+=ie}if(p>T){l&&fc(0);break}a&&c(v+131072);var he=v+Z;if(v<_e){var Q=s-_e,Ae=Math.min(_e,he);for(Q+v<0&&fc(3);v<Ae;++v)n[v]=r[Q+v]}for(;v<he;++v)n[v]=n[v-_e]}}e.l=m,e.p=se,e.b=v,e.f=h,m&&(h=1,e.m=E,e.d=x,e.n=k)}while(!h);return v!=n.length&&o?VE(n,0,v):n.subarray(0,v)},_d=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},ig=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},n2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:HE,l:0};if(i==1){var o=new Ja(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(ne,ge){return ne.f-ge.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,h=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=h&&n[c].f<n[p].f?c++:p++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new vu(v+1),x=Cb(n[h-1],m,0);if(x>e){var r=0,E=0,k=x-e,T=1<<k;for(s.sort(function(ge,pe){return m[pe.s]-m[ge.s]||ge.f-pe.f});r<i;++r){var A=s[r].s;if(m[A]>e)E+=T-(1<<x-m[A]),m[A]=e;else break}for(E>>=k;E>0;){var z=s[r].s;m[z]<e?E-=1<<e-m[z]++-1:++r}for(;r>=0&&E;--r){var Y=s[r].s;m[Y]==e&&(--m[Y],++E)}x=e}return{t:new Ja(m),l:x}},Cb=function(t,e,n){return t.s==-1?Math.max(Cb(t.l,e,n+1),Cb(t.r,e,n+1)):e[t.s]=n},v5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new vu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},sg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},UE=function(t,e,n){var r=n.length,i=z_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},y5=function(t,e,n,r,i,s,o,a,l,c,h){_d(e,h++,n),++i[256];for(var p=n2(i,15),v=p.t,m=p.l,x=n2(s,15),E=x.t,k=x.l,T=v5(v),A=T.c,z=T.n,Y=v5(E),ne=Y.c,ge=Y.n,pe=new vu(19),O=0;O<A.length;++O)++pe[A[O]&31];for(var O=0;O<ne.length;++O)++pe[ne[O]&31];for(var j=n2(pe,7),J=j.t,V=j.l,B=19;B>4&&!J[xb[B-1]];--B);var H=c+5<<3,$=sg(i,Lh)+sg(s,vm)+o,R=sg(i,v)+sg(s,E)+o+14+3*B+sg(pe,J)+2*pe[16]+3*pe[17]+7*pe[18];if(l>=0&&H<=$&&H<=R)return UE(e,h,t.subarray(l,l+c));var I,X,K,_e;if(_d(e,h,1+(R<$)),h+=2,R<$){I=Xc(v,m,0),X=v,K=Xc(E,k,0),_e=E;var ve=Xc(J,V,0);_d(e,h,z-257),_d(e,h+5,ge-1),_d(e,h+10,B-4),h+=14;for(var O=0;O<B;++O)_d(e,h+3*O,J[xb[O]]);h+=3*B;for(var Ge=[A,ne],se=0;se<2;++se)for(var q=Ge[se],O=0;O<q.length;++O){var Z=q[O]&31;_d(e,h,ve[Z]),h+=J[Z],Z>15&&(_d(e,h,q[O]>>5&127),h+=q[O]>>12)}}else I=aH,X=Lh,K=uH,_e=vm;for(var O=0;O<a;++O){var ie=r[O];if(ie>255){var Z=ie>>18&31;ig(e,h,I[Z+257]),h+=X[Z+257],Z>7&&(_d(e,h,ie>>23&31),h+=Vy[Z]);var de=ie&31;ig(e,h,K[de]),h+=_e[de],de>3&&(ig(e,h,ie>>5&8191),h+=Uy[de])}else ig(e,h,I[ie]),h+=X[ie]}return ig(e,h,I[256]),h+X[256]},fH=new j_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HE=new Ja(0),pH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Ja(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=fH[e-1],v=p>>13,m=p&8191,x=(1<<n)-1,E=s.p||new vu(32768),k=s.h||new vu(x+1),T=Math.ceil(n/3),A=2*T,z=function(ee){return(t[ee]^t[ee+1]<<T^t[ee+2]<<A)&x},Y=new j_(25e3),ne=new vu(288),ge=new vu(32),pe=0,O=0,j=s.i||0,J=0,V=s.w||0,B=0;j+2<o;++j){var H=z(j),$=j&32767,R=k[H];if(E[$]=R,k[H]=$,V<=j){var I=o-j;if((pe>7e3||J>24576)&&(I>423||!c)){h=y5(t,l,0,Y,ne,ge,O,J,B,j-B,h),J=pe=O=0,B=j;for(var X=0;X<286;++X)ne[X]=0;for(var X=0;X<30;++X)ge[X]=0}var K=2,_e=0,ve=m,Ge=$-R&32767;if(I>2&&H==z(j-Ge))for(var se=Math.min(v,I)-1,q=Math.min(32767,j),Z=Math.min(258,I);Ge<=q&&--ve&&$!=R;){if(t[j+K]==t[j+K-Ge]){for(var ie=0;ie<Z&&t[j+ie]==t[j+ie-Ge];++ie);if(ie>K){if(K=ie,_e=Ge,ie>se)break;for(var de=Math.min(Ge,ie-2),ye=0,X=0;X<de;++X){var he=j-Ge+X&32767,Q=E[he],Ae=he-Q&32767;Ae>ye&&(ye=Ae,R=he)}}}$=R,R=E[$],Ge+=$-R&32767}if(_e){Y[J++]=268435456|Lb[K]<<18|m5[_e];var De=Lb[K]&31,Ke=m5[_e]&31;O+=Vy[De]+Uy[Ke],++ne[257+De],++ge[Ke],V=j+K,++pe}else Y[J++]=t[j],++ne[t[j]]}}for(j=Math.max(j,V);j<o;++j)Y[J++]=t[j],++ne[t[j]];h=y5(t,l,c,Y,ne,ge,O,J,B,j-B,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=k,s.p=E,s.i=j,s.w=V)}else{for(var j=s.w||0;j<o+c;j+=65535){var fe=j+65535;fe>=o&&(l[h/8|0]=c,fe=o),h=UE(l,h+1,t.subarray(j,fe))}s.i=o}return VE(a,0,r+z_(h)+i)},GE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},gH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ja(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return pH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},WE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},mH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=GE();i.p(e.dictionary),WE(t,2,i.d())}},vH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&fc(6,"invalid zlib data"),(t[1]>>5&1)==1&&fc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Eb(t,e){e||(e={});var n=GE();n.p(t);var r=gH(t,e,e.dictionary?6:2,4);return mH(r,e),WE(r,r.length-4,n.d()),r}function yH(t,e){return hH(t.subarray(vH(t),-4),{i:2},e,e)}var bH=typeof TextDecoder<"u"&&new TextDecoder,_H=0;try{bH.decode(HE,{stream:!0}),_H=1}catch{}var Er=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function r2(){Er.console&&typeof Er.console.log=="function"&&Er.console.log.apply(Er.console,arguments)}var ss={log:r2,warn:function(t){Er.console&&(typeof Er.console.warn=="function"?Er.console.warn.apply(Er.console,arguments):r2.call(null,arguments))},error:function(t){Er.console&&(typeof Er.console.error=="function"?Er.console.error.apply(Er.console,arguments):r2(t))}};function i2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Jh(r.response,e,n)},r.onerror=function(){ss.error("could not download file")},r.send()}function b5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function x0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gg,Pb,Jh=Er.saveAs||((typeof window>"u"?"undefined":Ki(window))!=="object"||window!==Er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Er.URL||Er.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?b5(i.href)?i2(t,e,n):x0(i,i.target="_blank"):x0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){x0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(b5(t))i2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){x0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ki(s)!=="object"&&(ss.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return i2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Er.HTMLElement)||Er.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ki(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=Er.URL||Er.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function s2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Va(n,r,i,s,e[0],7,-680876936),s=Va(s,n,r,i,e[1],12,-389564586),i=Va(i,s,n,r,e[2],17,606105819),r=Va(r,i,s,n,e[3],22,-1044525330),n=Va(n,r,i,s,e[4],7,-176418897),s=Va(s,n,r,i,e[5],12,1200080426),i=Va(i,s,n,r,e[6],17,-1473231341),r=Va(r,i,s,n,e[7],22,-45705983),n=Va(n,r,i,s,e[8],7,1770035416),s=Va(s,n,r,i,e[9],12,-1958414417),i=Va(i,s,n,r,e[10],17,-42063),r=Va(r,i,s,n,e[11],22,-1990404162),n=Va(n,r,i,s,e[12],7,1804603682),s=Va(s,n,r,i,e[13],12,-40341101),i=Va(i,s,n,r,e[14],17,-1502002290),n=Ua(n,r=Va(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ua(s,n,r,i,e[6],9,-1069501632),i=Ua(i,s,n,r,e[11],14,643717713),r=Ua(r,i,s,n,e[0],20,-373897302),n=Ua(n,r,i,s,e[5],5,-701558691),s=Ua(s,n,r,i,e[10],9,38016083),i=Ua(i,s,n,r,e[15],14,-660478335),r=Ua(r,i,s,n,e[4],20,-405537848),n=Ua(n,r,i,s,e[9],5,568446438),s=Ua(s,n,r,i,e[14],9,-1019803690),i=Ua(i,s,n,r,e[3],14,-187363961),r=Ua(r,i,s,n,e[8],20,1163531501),n=Ua(n,r,i,s,e[13],5,-1444681467),s=Ua(s,n,r,i,e[2],9,-51403784),i=Ua(i,s,n,r,e[7],14,1735328473),n=Ha(n,r=Ua(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ha(s,n,r,i,e[8],11,-2022574463),i=Ha(i,s,n,r,e[11],16,1839030562),r=Ha(r,i,s,n,e[14],23,-35309556),n=Ha(n,r,i,s,e[1],4,-1530992060),s=Ha(s,n,r,i,e[4],11,1272893353),i=Ha(i,s,n,r,e[7],16,-155497632),r=Ha(r,i,s,n,e[10],23,-1094730640),n=Ha(n,r,i,s,e[13],4,681279174),s=Ha(s,n,r,i,e[0],11,-358537222),i=Ha(i,s,n,r,e[3],16,-722521979),r=Ha(r,i,s,n,e[6],23,76029189),n=Ha(n,r,i,s,e[9],4,-640364487),s=Ha(s,n,r,i,e[12],11,-421815835),i=Ha(i,s,n,r,e[15],16,530742520),n=Ga(n,r=Ha(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ga(s,n,r,i,e[7],10,1126891415),i=Ga(i,s,n,r,e[14],15,-1416354905),r=Ga(r,i,s,n,e[5],21,-57434055),n=Ga(n,r,i,s,e[12],6,1700485571),s=Ga(s,n,r,i,e[3],10,-1894986606),i=Ga(i,s,n,r,e[10],15,-1051523),r=Ga(r,i,s,n,e[1],21,-2054922799),n=Ga(n,r,i,s,e[8],6,1873313359),s=Ga(s,n,r,i,e[15],10,-30611744),i=Ga(i,s,n,r,e[6],15,-1560198380),r=Ga(r,i,s,n,e[13],21,1309151649),n=Ga(n,r,i,s,e[4],6,-145523070),s=Ga(s,n,r,i,e[11],10,-1120210379),i=Ga(i,s,n,r,e[2],15,718787259),r=Ga(r,i,s,n,e[9],21,-343485551),t[0]=ch(n,t[0]),t[1]=ch(r,t[1]),t[2]=ch(i,t[2]),t[3]=ch(s,t[3])}function Hy(t,e,n,r,i,s){return e=ch(ch(e,t),ch(r,s)),ch(e<<i|e>>>32-i,n)}function Va(t,e,n,r,i,s,o){return Hy(e&n|~e&r,t,e,i,s,o)}function Ua(t,e,n,r,i,s,o){return Hy(e&r|n&~r,t,e,i,s,o)}function Ha(t,e,n,r,i,s,o){return Hy(e^n^r,t,e,i,s,o)}function Ga(t,e,n,r,i,s,o){return Hy(n^(e|~r),t,e,i,s,o)}function YE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)s2(r,wH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(s2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,s2(r,i),r}function wH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gg=Er.atob.bind(Er),Pb=Er.btoa.bind(Er);var _5="0123456789abcdef".split("");function xH(t){for(var e="",n=0;n<4;n++)e+=_5[t>>8*n+4&15]+_5[t>>8*n&15];return e}function LH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Mb(t){return YE(t).map(LH).join("")}var SH=function(t){for(var e=0;e<t.length;e++)t[e]=xH(t[e]);return t.join("")}(YE("hello"))!="5d41402abc4b2a76b9719d911017c592";function ch(t,e){if(SH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function kb(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,r=a}else a=r;var p=e.length,v=0,m=0,x="";for(l=0;l<p;l++)m=(m+(h=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=h,o=a[(a[v]+a[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var w5={print:4,modify:8,copy:16,"annot-forms":32};function op(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(w5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=w5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Mb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=kb(this.encryptionKey,this.padding)}function ap(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function x5(t){if(Ki(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Er.console&&ss.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yv(t){if(!(this instanceof Yv))return new Yv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function KE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function rf(t,e,n,r,i){if(!(this instanceof rf))return new rf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,KE.call(this,r,i)}function cp(t,e,n,r,i){if(!(this instanceof cp))return new cp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,KE.call(this,r,i)}function Cr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",h=null;Ki(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=x5;var x="1.3",E=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(F){x=F};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var T=m.__private__.getPageFormat=function(F){return k[F]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},z=A.COMPAT;function Y(){this.saveGraphicsState(),le(new ot(rt,0,0,-rt,0,Da()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),c="n",z=A.ADVANCED}function ne(){this.restoreGraphicsState(),c="S",z=A.COMPAT}var ge=m.__private__.combineFontStyleAndFontWeight=function(F,xe){if(F=="bold"&&xe=="normal"||F=="bold"&&xe==400||F=="normal"&&xe=="italic"||F=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(F=xe==400||xe==="normal"?F==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||F!=="normal"?(xe==700?"bold":xe)+""+F:"bold"),F};m.advancedAPI=function(F){var xe=z===A.COMPAT;return xe&&Y.call(this),typeof F!="function"||(F(this),xe&&ne.call(this)),this},m.compatAPI=function(F){var xe=z===A.ADVANCED;return xe&&ne.call(this),typeof F!="function"||(F(this),xe&&Y.call(this)),this},m.isAdvancedAPI=function(){return z===A.ADVANCED};var pe,O=function(F){if(z!==A.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=m.roundToPrecision=m.__private__.roundToPrecision=function(F,xe){var Qe=e||xe;if(isNaN(F)||isNaN(Qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(Qe).replace(/0+$/,"")};pe=m.hpf=m.__private__.hpf=typeof l=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,l)}:l==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,16)};var J=m.f2=m.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return j(F,2)},V=m.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return j(F,3)},B=m.scale=m.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return z===A.COMPAT?F*rt:z===A.ADVANCED?F:void 0},H=function(F){return z===A.COMPAT?Da()-F:z===A.ADVANCED?F:void 0},$=function(F){return B(H(F))};m.__private__.setPrecision=m.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(e=parseInt(F,10))};var R,I="00000000000000000000000000000000",X=m.__private__.getFileId=function(){return I},K=m.__private__.setFileId=function(F){return I=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():I.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(bs=new op(h.userPermissions,h.userPassword,h.ownerPassword,I)),I};m.setFileId=function(F){return K(F),this},m.getFileId=function(){return X()};var _e=m.__private__.convertDateToPDFDate=function(F){var xe=F.getTimezoneOffset(),Qe=xe<0?"+":"-",pt=Math.floor(Math.abs(xe/60)),Pt=Math.abs(xe%60),Vt=[Qe,Z(pt),"'",Z(Pt),"'"].join("");return["D:",F.getFullYear(),Z(F.getMonth()+1),Z(F.getDate()),Z(F.getHours()),Z(F.getMinutes()),Z(F.getSeconds()),Vt].join("")},ve=m.__private__.convertPDFDateToDate=function(F){var xe=parseInt(F.substr(2,4),10),Qe=parseInt(F.substr(6,2),10)-1,pt=parseInt(F.substr(8,2),10),Pt=parseInt(F.substr(10,2),10),Vt=parseInt(F.substr(12,2),10),dn=parseInt(F.substr(14,2),10);return new Date(xe,Qe,pt,Pt,Vt,dn,0)},Ge=m.__private__.setCreationDate=function(F){var xe;if(F===void 0&&(F=new Date),F instanceof Date)xe=_e(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=F}return R=xe},se=m.__private__.getCreationDate=function(F){var xe=R;return F==="jsDate"&&(xe=ve(R)),xe};m.setCreationDate=function(F){return Ge(F),this},m.getCreationDate=function(F){return se(F)};var q,Z=m.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},ie=m.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},de=0,ye=[],he=[],Q=0,Ae=[],De=[],Ke=!1,fe=he,ee=function(){de=0,Q=0,he=[],ye=[],Ae=[],St=qt(),gn=qt()};m.__private__.setCustomOutputDestination=function(F){Ke=!0,fe=F};var oe=function(F){Ke||(fe=F)};m.__private__.resetCustomOutputDestination=function(){Ke=!1,fe=he};var le=m.__private__.out=function(F){return F=F.toString(),Q+=F.length+1,fe.push(F),fe},ze=m.__private__.write=function(F){return le(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},$e=m.__private__.getArrayBuffer=function(F){for(var xe=F.length,Qe=new ArrayBuffer(xe),pt=new Uint8Array(Qe);xe--;)pt[xe]=F.charCodeAt(xe);return Qe},Je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Je};var Me=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(F){return Me=z===A.ADVANCED?F/rt:F,this};var me,qe=m.__private__.getFontSize=m.getFontSize=function(){return z===A.COMPAT?Me:Me*rt},ct=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(F){return ct=F,this},m.__private__.getR2L=m.getR2L=function(){return ct};var ft,Mt=m.__private__.setZoomMode=function(F){var xe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))me=F;else if(isNaN(F)){if(xe.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');me=F}else me=parseInt(F,10)};m.__private__.getZoomMode=function(){return me};var it,jt=m.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');ft=F};m.__private__.getPageMode=function(){return ft};var hn=m.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');it=F};m.__private__.getLayoutMode=function(){return it},m.__private__.setDisplayMode=m.setDisplayMode=function(F,xe,Qe){return Mt(F),hn(xe),jt(Qe),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(F){if(Object.keys(Ze).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[F]},m.__private__.getDocumentProperties=function(){return Ze},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(F){for(var xe in Ze)Ze.hasOwnProperty(xe)&&F[xe]&&(Ze[xe]=F[xe]);return this},m.__private__.setDocumentProperty=function(F,xe){if(Object.keys(Ze).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[F]=xe};var lt,rt,$t,Qt,Pn,wn={},xn={},$n=[],en={},_n={},Cn={},qn={},nr=null,rr=0,Jn=[],Mr=new x5(m),as=t.hotfixes||[],ji={},ro={},Cs=[],ot=function F(xe,Qe,pt,Pt,Vt,dn){if(!(this instanceof F))return new F(xe,Qe,pt,Pt,Vt,dn);isNaN(xe)&&(xe=1),isNaN(Qe)&&(Qe=0),isNaN(pt)&&(pt=0),isNaN(Pt)&&(Pt=1),isNaN(Vt)&&(Vt=0),isNaN(dn)&&(dn=0),this._matrix=[xe,Qe,pt,Pt,Vt,dn]};Object.defineProperty(ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ot.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pe).join(F)},ot.prototype.multiply=function(F){var xe=F.sx*this.sx+F.shy*this.shx,Qe=F.sx*this.shy+F.shy*this.sy,pt=F.shx*this.sx+F.sy*this.shx,Pt=F.shx*this.shy+F.sy*this.sy,Vt=F.tx*this.sx+F.ty*this.shx+this.tx,dn=F.tx*this.shy+F.ty*this.sy+this.ty;return new ot(xe,Qe,pt,Pt,Vt,dn)},ot.prototype.decompose=function(){var F=this.sx,xe=this.shy,Qe=this.shx,pt=this.sy,Pt=this.tx,Vt=this.ty,dn=Math.sqrt(F*F+xe*xe),Nn=(F/=dn)*Qe+(xe/=dn)*pt;Qe-=F*Nn,pt-=xe*Nn;var Rn=Math.sqrt(Qe*Qe+pt*pt);return Nn/=Rn,F*(pt/=Rn)<xe*(Qe/=Rn)&&(F=-F,xe=-xe,Nn=-Nn,dn=-dn),{scale:new ot(dn,0,0,Rn,0,0),translate:new ot(1,0,0,1,Pt,Vt),rotate:new ot(F,xe,-xe,F,0,0),skew:new ot(1,0,Nn,1,0,0)}},ot.prototype.toString=function(F){return this.join(" ")},ot.prototype.inversed=function(){var F=this.sx,xe=this.shy,Qe=this.shx,pt=this.sy,Pt=this.tx,Vt=this.ty,dn=1/(F*pt-xe*Qe),Nn=pt*dn,Rn=-xe*dn,er=-Qe*dn,pr=F*dn;return new ot(Nn,Rn,er,pr,-Nn*Pt-er*Vt,-Rn*Pt-pr*Vt)},ot.prototype.applyToPoint=function(F){var xe=F.x*this.sx+F.y*this.shx+this.tx,Qe=F.x*this.shy+F.y*this.sy+this.ty;return new Ps(xe,Qe)},ot.prototype.applyToRectangle=function(F){var xe=this.applyToPoint(F),Qe=this.applyToPoint(new Ps(F.x+F.w,F.y+F.h));return new ra(xe.x,xe.y,Qe.x-xe.x,Qe.y-xe.y)},ot.prototype.clone=function(){var F=this.sx,xe=this.shy,Qe=this.shx,pt=this.sy,Pt=this.tx,Vt=this.ty;return new ot(F,xe,Qe,pt,Pt,Vt)},m.Matrix=ot;var nt=m.matrixMult=function(F,xe){return xe.multiply(F)},Ht=new ot(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ht;var kn=function(F,xe){if(!_n[F]){var Qe=(xe instanceof rf?"Sh":"P")+(Object.keys(en).length+1).toString(10);xe.id=Qe,_n[F]=Qe,en[Qe]=xe,Mr.publish("addPattern",xe)}};m.ShadingPattern=rf,m.TilingPattern=cp,m.addShadingPattern=function(F,xe){return O("addShadingPattern()"),kn(F,xe),this},m.beginTilingPattern=function(F){O("beginTilingPattern()"),ia(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},m.endTilingPattern=function(F,xe){O("endTilingPattern()"),xe.stream=De[q].join(`
`),kn(F,xe),Mr.publish("endTilingPattern",xe),Cs.pop().restore()};var tn=m.__private__.newObject=function(){var F=qt();return Wt(F,!0),F},qt=m.__private__.newObjectDeferred=function(){return de++,ye[de]=function(){return Q},de},Wt=function(F,xe){return xe=typeof xe=="boolean"&&xe,ye[F]=Q,xe&&le(F+" 0 obj"),F},ir=m.__private__.newAdditionalObject=function(){var F={objId:qt(),content:""};return Ae.push(F),F},St=qt(),gn=qt(),Qn=m.__private__.decodeColorString=function(F){var xe=F.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length===5&&(xe[4]==="k"||xe[4]==="K")&&(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var Qe=parseFloat(xe[0]);xe=[Qe,Qe,Qe,"r"]}for(var pt="#",Pt=0;Pt<3;Pt++)pt+=("0"+Math.floor(255*parseFloat(xe[Pt])).toString(16)).slice(-2);return pt},ar=m.__private__.encodeColorString=function(F){var xe;typeof F=="string"&&(F={ch1:F});var Qe=F.ch1,pt=F.ch2,Pt=F.ch3,Vt=F.ch4,dn=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Qe=="string"&&Qe.charAt(0)!=="#"){var Nn=new qE(Qe);if(Nn.ok)Qe=Nn.toHex();else if(!/^\d*\.?\d*$/.test(Qe))throw new Error('Invalid color "'+Qe+'" passed to jsPDF.encodeColorString.')}if(typeof Qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Qe)&&(Qe="#"+Qe[1]+Qe[1]+Qe[2]+Qe[2]+Qe[3]+Qe[3]),typeof Qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Qe)){var Rn=parseInt(Qe.substr(1),16);Qe=Rn>>16&255,pt=Rn>>8&255,Pt=255&Rn}if(pt===void 0||Vt===void 0&&Qe===pt&&pt===Pt)if(typeof Qe=="string")xe=Qe+" "+dn[0];else switch(F.precision){case 2:xe=J(Qe/255)+" "+dn[0];break;case 3:default:xe=V(Qe/255)+" "+dn[0]}else if(Vt===void 0||Ki(Vt)==="object"){if(Vt&&!isNaN(Vt.a)&&Vt.a===0)return xe=["1.","1.","1.",dn[1]].join(" ");if(typeof Qe=="string")xe=[Qe,pt,Pt,dn[1]].join(" ");else switch(F.precision){case 2:xe=[J(Qe/255),J(pt/255),J(Pt/255),dn[1]].join(" ");break;default:case 3:xe=[V(Qe/255),V(pt/255),V(Pt/255),dn[1]].join(" ")}}else if(typeof Qe=="string")xe=[Qe,pt,Pt,Vt,dn[2]].join(" ");else switch(F.precision){case 2:xe=[J(Qe),J(pt),J(Pt),J(Vt),dn[2]].join(" ");break;case 3:default:xe=[V(Qe),V(pt),V(Pt),V(Vt),dn[2]].join(" ")}return xe},ur=m.__private__.getFilters=function(){return o},vn=m.__private__.putStream=function(F){var xe=(F=F||{}).data||"",Qe=F.filters||ur(),pt=F.alreadyAppliedFilters||[],Pt=F.addLength1||!1,Vt=xe.length,dn=F.objectId,Nn=function(ns){return ns};if(h!==null&&dn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Nn=bs.encryptor(dn,0));var Rn={};Qe===!0&&(Qe=["FlateEncode"]);var er=F.additionalKeyValues||[],pr=(Rn=Cr.API.processDataByFilters!==void 0?Cr.API.processDataByFilters(xe,Qe):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(pt)?pt.join(" "):pt.toString());if(Rn.data.length!==0&&(er.push({key:"Length",value:Rn.data.length}),Pt===!0&&er.push({key:"Length1",value:Vt})),pr.length!=0)if(pr.split("/").length-1==1)er.push({key:"Filter",value:pr});else{er.push({key:"Filter",value:"["+pr+"]"});for(var Ar=0;Ar<er.length;Ar+=1)if(er[Ar].key==="DecodeParms"){for(var Mi=[],ni=0;ni<Rn.reverseChain.split("/").length-1;ni+=1)Mi.push("null");Mi.push(er[Ar].value),er[Ar].value="["+Mi.join(" ")+"]"}}le("<<");for(var ui=0;ui<er.length;ui++)le("/"+er[ui].key+" "+er[ui].value);le(">>"),Rn.data.length!==0&&(le("stream"),le(Nn(Rn.data)),le("endstream"))},cn=m.__private__.putPage=function(F){var xe=F.number,Qe=F.data,pt=F.objId,Pt=F.contentsObjId;Wt(pt,!0),le("<</Type /Page"),le("/Parent "+F.rootDictionaryObjId+" 0 R"),le("/Resources "+F.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(pe(F.mediaBox.bottomLeftX))+" "+parseFloat(pe(F.mediaBox.bottomLeftY))+" "+pe(F.mediaBox.topRightX)+" "+pe(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&le("/CropBox ["+pe(F.cropBox.bottomLeftX)+" "+pe(F.cropBox.bottomLeftY)+" "+pe(F.cropBox.topRightX)+" "+pe(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&le("/BleedBox ["+pe(F.bleedBox.bottomLeftX)+" "+pe(F.bleedBox.bottomLeftY)+" "+pe(F.bleedBox.topRightX)+" "+pe(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&le("/TrimBox ["+pe(F.trimBox.bottomLeftX)+" "+pe(F.trimBox.bottomLeftY)+" "+pe(F.trimBox.topRightX)+" "+pe(F.trimBox.topRightY)+"]"),F.artBox!==null&&le("/ArtBox ["+pe(F.artBox.bottomLeftX)+" "+pe(F.artBox.bottomLeftY)+" "+pe(F.artBox.topRightX)+" "+pe(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&le("/UserUnit "+F.userUnit),Mr.publish("putPage",{objId:pt,pageContext:Jn[xe],pageNumber:xe,page:Qe}),le("/Contents "+Pt+" 0 R"),le(">>"),le("endobj");var Vt=Qe.join(`
`);return z===A.ADVANCED&&(Vt+=`
Q`),Wt(Pt,!0),vn({data:Vt,filters:ur(),objectId:Pt}),le("endobj"),pt},ri=m.__private__.putPages=function(){var F,xe,Qe=[];for(F=1;F<=rr;F++)Jn[F].objId=qt(),Jn[F].contentsObjId=qt();for(F=1;F<=rr;F++)Qe.push(cn({number:F,data:De[F],objId:Jn[F].objId,contentsObjId:Jn[F].contentsObjId,mediaBox:Jn[F].mediaBox,cropBox:Jn[F].cropBox,bleedBox:Jn[F].bleedBox,trimBox:Jn[F].trimBox,artBox:Jn[F].artBox,userUnit:Jn[F].userUnit,rootDictionaryObjId:St,resourceDictionaryObjId:gn}));Wt(St,!0),le("<</Type /Pages");var pt="/Kids [";for(xe=0;xe<rr;xe++)pt+=Qe[xe]+" 0 R ";le(pt+"]"),le("/Count "+rr),le(">>"),le("endobj"),Mr.publish("postPutPages")},Li=function(F){Mr.publish("putFont",{font:F,out:le,newObject:tn,putStream:vn}),F.isAlreadyPutted!==!0&&(F.objectNumber=tn(),le("<<"),le("/Type /Font"),le("/BaseFont /"+ap(F.postScriptName)),le("/Subtype /Type1"),typeof F.encoding=="string"&&le("/Encoding /"+F.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},zi=function(){for(var F in wn)wn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&Li(wn[F])},Fr=function(F){F.objectNumber=tn();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[pe(F.x),pe(F.y),pe(F.x+F.width),pe(F.y+F.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var Qe=F.pages[1].join(`
`);vn({data:Qe,additionalKeyValues:xe,objectId:F.objectNumber}),le("endobj")},cr=function(){for(var F in ji)ji.hasOwnProperty(F)&&Fr(ji[F])},Xi=function(F,xe){var Qe,pt=[],Pt=1/(xe-1);for(Qe=0;Qe<1;Qe+=Pt)pt.push(Qe);if(pt.push(1),F[0].offset!=0){var Vt={offset:0,color:F[0].color};F.unshift(Vt)}if(F[F.length-1].offset!=1){var dn={offset:1,color:F[F.length-1].color};F.push(dn)}for(var Nn="",Rn=0,er=0;er<pt.length;er++){for(Qe=pt[er];Qe>F[Rn+1].offset;)Rn++;var pr=F[Rn].offset,Ar=(Qe-pr)/(F[Rn+1].offset-pr),Mi=F[Rn].color,ni=F[Rn+1].color;Nn+=ie(Math.round((1-Ar)*Mi[0]+Ar*ni[0]).toString(16))+ie(Math.round((1-Ar)*Mi[1]+Ar*ni[1]).toString(16))+ie(Math.round((1-Ar)*Mi[2]+Ar*ni[2]).toString(16))}return Nn.trim()},Ui=function(F,xe){xe||(xe=21);var Qe=tn(),pt=Xi(F.colors,xe),Pt=[];Pt.push({key:"FunctionType",value:"0"}),Pt.push({key:"Domain",value:"[0.0 1.0]"}),Pt.push({key:"Size",value:"["+xe+"]"}),Pt.push({key:"BitsPerSample",value:"8"}),Pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vn({data:pt,additionalKeyValues:Pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Qe}),le("endobj"),F.objectNumber=tn(),le("<< /ShadingType "+F.type),le("/ColorSpace /DeviceRGB");var Vt="/Coords ["+pe(parseFloat(F.coords[0]))+" "+pe(parseFloat(F.coords[1]))+" ";F.type===2?Vt+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3])):Vt+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3]))+" "+pe(parseFloat(F.coords[4]))+" "+pe(parseFloat(F.coords[5])),le(Vt+="]"),F.matrix&&le("/Matrix ["+F.matrix.toString()+"]"),le("/Function "+Qe+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},Hi=function(F,xe){var Qe=qt(),pt=tn();xe.push({resourcesOid:Qe,objectOid:pt}),F.objectNumber=pt;var Pt=[];Pt.push({key:"Type",value:"/Pattern"}),Pt.push({key:"PatternType",value:"1"}),Pt.push({key:"PaintType",value:"1"}),Pt.push({key:"TilingType",value:"1"}),Pt.push({key:"BBox",value:"["+F.boundingBox.map(pe).join(" ")+"]"}),Pt.push({key:"XStep",value:pe(F.xStep)}),Pt.push({key:"YStep",value:pe(F.yStep)}),Pt.push({key:"Resources",value:Qe+" 0 R"}),F.matrix&&Pt.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),vn({data:F.stream,additionalKeyValues:Pt,objectId:F.objectNumber}),le("endobj")},ls=function(F){var xe;for(xe in en)en.hasOwnProperty(xe)&&(en[xe]instanceof rf?Ui(en[xe]):en[xe]instanceof cp&&Hi(en[xe],F))},vs=function(F){for(var xe in F.objectNumber=tn(),le("<<"),F)switch(xe){case"opacity":le("/ca "+J(F[xe]));break;case"stroke-opacity":le("/CA "+J(F[xe]))}le(">>"),le("endobj")},Es=function(){var F;for(F in Cn)Cn.hasOwnProperty(F)&&vs(Cn[F])},Rs=function(){for(var F in le("/XObject <<"),ji)ji.hasOwnProperty(F)&&ji[F].objectNumber>=0&&le("/"+F+" "+ji[F].objectNumber+" 0 R");Mr.publish("putXobjectDict"),le(">>")},Fs=function(){bs.oid=tn(),le("<<"),le("/Filter /Standard"),le("/V "+bs.v),le("/R "+bs.r),le("/U <"+bs.toHexString(bs.U)+">"),le("/O <"+bs.toHexString(bs.O)+">"),le("/P "+bs.P),le(">>"),le("endobj")},Ji=function(){for(var F in le("/Font <<"),wn)wn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&le("/"+F+" "+wn[F].objectNumber+" 0 R");le(">>")},Wr=function(){if(Object.keys(en).length>0){for(var F in le("/Shading <<"),en)en.hasOwnProperty(F)&&en[F]instanceof rf&&en[F].objectNumber>=0&&le("/"+F+" "+en[F].objectNumber+" 0 R");Mr.publish("putShadingPatternDict"),le(">>")}},ys=function(F){if(Object.keys(en).length>0){for(var xe in le("/Pattern <<"),en)en.hasOwnProperty(xe)&&en[xe]instanceof m.TilingPattern&&en[xe].objectNumber>=0&&en[xe].objectNumber<F&&le("/"+xe+" "+en[xe].objectNumber+" 0 R");Mr.publish("putTilingPatternDict"),le(">>")}},jr=function(){if(Object.keys(Cn).length>0){var F;for(F in le("/ExtGState <<"),Cn)Cn.hasOwnProperty(F)&&Cn[F].objectNumber>=0&&le("/"+F+" "+Cn[F].objectNumber+" 0 R");Mr.publish("putGStateDict"),le(">>")}},fr=function(F){Wt(F.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ji(),Wr(),ys(F.objectOid),jr(),Rs(),le(">>"),le("endobj")},dr=function(){var F=[];zi(),Es(),cr(),ls(F),Mr.publish("putResources"),F.forEach(fr),fr({resourcesOid:gn,objectOid:Number.MAX_SAFE_INTEGER}),Mr.publish("postPutResources")},Ti=function(){Mr.publish("putAdditionalObjects");for(var F=0;F<Ae.length;F++){var xe=Ae[F];Wt(xe.objId,!0),le(xe.content),le("endobj")}Mr.publish("postPutAdditionalObjects")},Si=function(F){xn[F.fontName]=xn[F.fontName]||{},xn[F.fontName][F.fontStyle]=F.id},io=function(F,xe,Qe,pt,Pt){var Vt={id:"F"+(Object.keys(wn).length+1).toString(10),postScriptName:F,fontName:xe,fontStyle:Qe,encoding:pt,isStandardFont:Pt||!1,metadata:{}};return Mr.publish("addFont",{font:Vt,instance:this}),wn[Vt.id]=Vt,Si(Vt),Vt.id},br=function(F){for(var xe=0,Qe=Je.length;xe<Qe;xe++){var pt=io.call(this,F[xe][0],F[xe][1],F[xe][2],Je[xe][3],!0);p===!1&&(v[pt]=!0);var Pt=F[xe][0].split("-");Si({id:pt,fontName:Pt[0],fontStyle:Pt[1]||""})}Mr.publish("addFonts",{fonts:wn,dictionary:xn})},Qr=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(pt){var xe=pt.stack||"";~xe.indexOf(" at ")&&(xe=xe.split(" at ")[1]);var Qe="Error in function "+xe.split(`
`)[0].split("<")[0]+": "+pt.message;if(!Er.console)throw new Error(Qe);Er.console.error(Qe,pt),Er.alert&&alert(Qe)}},F.foo.bar=F,F.foo},rl=function(F,xe){var Qe,pt,Pt,Vt,dn,Nn,Rn,er,pr;if(Pt=(xe=xe||{}).sourceEncoding||"Unicode",dn=xe.outputEncoding,(xe.autoencode||dn)&&wn[lt].metadata&&wn[lt].metadata[Pt]&&wn[lt].metadata[Pt].encoding&&(Vt=wn[lt].metadata[Pt].encoding,!dn&&wn[lt].encoding&&(dn=wn[lt].encoding),!dn&&Vt.codePages&&(dn=Vt.codePages[0]),typeof dn=="string"&&(dn=Vt[dn]),dn)){for(Rn=!1,Nn=[],Qe=0,pt=F.length;Qe<pt;Qe++)(er=dn[F.charCodeAt(Qe)])?Nn.push(String.fromCharCode(er)):Nn.push(F[Qe]),Nn[Qe].charCodeAt(0)>>8&&(Rn=!0);F=Nn.join("")}for(Qe=F.length;Rn===void 0&&Qe!==0;)F.charCodeAt(Qe-1)>>8&&(Rn=!0),Qe--;if(!Rn)return F;for(Nn=xe.noBOM?[]:[254,255],Qe=0,pt=F.length;Qe<pt;Qe++){if((pr=(er=F.charCodeAt(Qe))>>8)>>8)throw new Error("Character at position "+Qe+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nn.push(pr),Nn.push(er-(pr<<8))}return String.fromCharCode.apply(void 0,Nn)},js=m.__private__.pdfEscape=m.pdfEscape=function(F,xe){return rl(F,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zs=m.__private__.beginPage=function(F){De[++rr]=[],Jn[rr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},ka(rr),oe(De[q])},qu=function(F,xe){var Qe,pt,Pt;switch(n=xe||n,typeof F=="string"&&(Qe=T(F.toLowerCase()),Array.isArray(Qe)&&(pt=Qe[0],Pt=Qe[1])),Array.isArray(F)&&(pt=F[0]*rt,Pt=F[1]*rt),isNaN(pt)&&(pt=i[0],Pt=i[1]),(pt>14400||Pt>14400)&&(ss.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pt=Math.min(14400,pt),Pt=Math.min(14400,Pt)),i=[pt,Pt],n.substr(0,1)){case"l":Pt>pt&&(i=[Pt,pt]);break;case"p":pt>Pt&&(i=[Pt,pt])}zs(i),tu(Lu),le(Di),iu!==0&&le(iu+" J"),ai!==0&&le(ai+" j"),Mr.publish("addPage",{pageNumber:rr})},xl=function(F){F>0&&F<=rr&&(De.splice(F,1),Jn.splice(F,1),rr--,q>rr&&(q=rr),this.setPage(q))},ka=function(F){F>0&&F<=rr&&(q=F)},Gi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return De.length-1},Qo=function(F,xe,Qe){var pt,Pt=void 0;return Qe=Qe||{},F=F!==void 0?F:wn[lt].fontName,xe=xe!==void 0?xe:wn[lt].fontStyle,pt=F.toLowerCase(),xn[pt]!==void 0&&xn[pt][xe]!==void 0?Pt=xn[pt][xe]:xn[F]!==void 0&&xn[F][xe]!==void 0?Pt=xn[F][xe]:Qe.disableWarning===!1&&ss.warn("Unable to look up font label for font '"+F+"', '"+xe+"'. Refer to getFontList() for available fonts."),Pt||Qe.noFallback||(Pt=xn.times[xe])==null&&(Pt=xn.times.normal),Pt},il=m.__private__.putInfo=function(){var F=tn(),xe=function(pt){return pt};for(var Qe in h!==null&&(xe=bs.encryptor(F,0)),le("<<"),le("/Producer ("+js(xe("jsPDF "+Cr.version))+")"),Ze)Ze.hasOwnProperty(Qe)&&Ze[Qe]&&le("/"+Qe.substr(0,1).toUpperCase()+Qe.substr(1)+" ("+js(xe(Ze[Qe]))+")");le("/CreationDate ("+js(xe(R))+")"),le(">>"),le("endobj")},Io=m.__private__.putCatalog=function(F){var xe=(F=F||{}).rootDictionaryObjId||St;switch(tn(),le("<<"),le("/Type /Catalog"),le("/Pages "+xe+" 0 R"),me||(me="fullwidth"),me){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Qe=""+me;Qe.substr(Qe.length-1)==="%"&&(me=parseInt(me)/100),typeof me=="number"&&le("/OpenAction [3 0 R /XYZ null null "+J(me)+"]")}switch(it||(it="continuous"),it){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}ft&&le("/PageMode /"+ft),Mr.publish("putCatalog"),le(">>"),le("endobj")},wu=m.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(de+1)),le("/Root "+de+" 0 R"),le("/Info "+(de-1)+" 0 R"),h!==null&&le("/Encrypt "+bs.oid+" 0 R"),le("/ID [ <"+I+"> <"+I+"> ]"),le(">>")},sl=m.__private__.putHeader=function(){le("%PDF-"+x),le("%")},Yu=m.__private__.putXRef=function(){var F="0000000000";le("xref"),le("0 "+(de+1)),le("0000000000 65535 f ");for(var xe=1;xe<=de;xe++)typeof ye[xe]=="function"?le((F+ye[xe]()).slice(-10)+" 00000 n "):ye[xe]!==void 0?le((F+ye[xe]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},ea=m.__private__.buildDocument=function(){ee(),oe(he),Mr.publish("buildDocument"),sl(),ri(),Ti(),dr(),h!==null&&Fs(),il(),Io();var F=Q;return Yu(),wu(),le("startxref"),le(""+F),le("%%EOF"),oe(De[q]),he.join(`
`)},Aa=m.__private__.getBlob=function(F){return new Blob([$e(F)],{type:"application/pdf"})},ol=m.output=m.__private__.output=Qr(function(F,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",F){case void 0:return ea();case"save":m.save(xe.filename);break;case"arraybuffer":return $e(ea());case"blob":return Aa(ea());case"bloburi":case"bloburl":if(Er.URL!==void 0&&typeof Er.URL.createObjectURL=="function")return Er.URL&&Er.URL.createObjectURL(Aa(ea()))||void 0;ss.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Qe="",pt=ea();try{Qe=Pb(pt)}catch{Qe=Pb(unescape(encodeURIComponent(pt)))}return"data:application/pdf;filename="+xe.filename+";base64,"+Qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(Pt=xe.pdfObjectUrl,Vt="");var dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pt+'"'+Vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",Nn=Er.open();return Nn!==null&&Nn.document.write(dn),Nn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',er=Er.open();if(er!==null){er.document.write(Rn);var pr=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=xe.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pr.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',Mi=Er.open();if(Mi!==null&&(Mi.document.write(Ar),Mi.document.title=xe.filename),Mi||typeof safari>"u")return Mi;break;case"datauri":case"dataurl":return Er.document.location.href=this.output("datauristring",xe);default:return null}}),Jl=function(F){return Array.isArray(as)===!0&&as.indexOf(F)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=Jl("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var bs=null;Ge(),K();var Pc=function(F){return h!==null?bs.encryptor(F,0):function(xe){return xe}},xu=m.__private__.getPageInfo=m.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jn[F].objId,pageNumber:F,pageContext:Jn[F]}},gr=m.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in Jn)if(Jn[xe].objId===F)break;return xu(xe)},_r=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Jn[q].objId,pageNumber:q,pageContext:Jn[q]}};m.addPage=function(){return qu.apply(this,arguments),this},m.setPage=function(){return ka.apply(this,arguments),oe.call(this,De[q]),this},m.insertPage=function(F){return this.addPage(),this.movePage(q,F),this},m.movePage=function(F,xe){var Qe,pt;if(F>xe){Qe=De[F],pt=Jn[F];for(var Pt=F;Pt>xe;Pt--)De[Pt]=De[Pt-1],Jn[Pt]=Jn[Pt-1];De[xe]=Qe,Jn[xe]=pt,this.setPage(xe)}else if(F<xe){Qe=De[F],pt=Jn[F];for(var Vt=F;Vt<xe;Vt++)De[Vt]=De[Vt+1],Jn[Vt]=Jn[Vt+1];De[xe]=Qe,Jn[xe]=pt,this.setPage(xe)}return this},m.deletePage=function(){return xl.apply(this,arguments),this},m.__private__.text=m.text=function(F,xe,Qe,pt,Pt){var Vt,dn,Nn,Rn,er,pr,Ar,Mi,ni,ui=(pt=pt||{}).scope||this;if(typeof F=="number"&&typeof xe=="number"&&(typeof Qe=="string"||Array.isArray(Qe))){var ns=Qe;Qe=xe,xe=F,F=ns}if(arguments[3]instanceof ot?(O("The transform parameter of text() with a Matrix value"),ni=Pt):(Nn=arguments[4],Rn=arguments[5],Ki(Ar=arguments[3])==="object"&&Ar!==null||(typeof Nn=="string"&&(Rn=Nn,Nn=null),typeof Ar=="string"&&(Rn=Ar,Ar=null),typeof Ar=="number"&&(Nn=Ar,Ar=null),pt={flags:Ar,angle:Nn,align:Rn})),isNaN(xe)||isNaN(Qe)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return ui;var us="",Ro=!1,Tr=typeof pt.lineHeightFactor=="number"?pt.lineHeightFactor:eu,$s=ui.internal.scaleFactor;function kl(di){return di=di.split("	").join(Array(pt.TabLen||9).join(" ")),js(di,Ar)}function so(di){for(var vi,rs=di.concat(),Ci=[],zo=rs.length;zo--;)typeof(vi=rs.shift())=="string"?Ci.push(vi):Array.isArray(di)&&(vi.length===1||vi[1]===void 0&&vi[2]===void 0)?Ci.push(vi[0]):Ci.push([vi[0],vi[1],vi[2]]);return Ci}function Eu(di,vi){var rs;if(typeof di=="string")rs=vi(di)[0];else if(Array.isArray(di)){for(var Ci,zo,wo=di.concat(),Go=[],Ju=wo.length;Ju--;)typeof(Ci=wo.shift())=="string"?Go.push(vi(Ci)[0]):Array.isArray(Ci)&&typeof Ci[0]=="string"&&(zo=vi(Ci[0],Ci[1],Ci[2]),Go.push([zo[0],zo[1],zo[2]]));rs=Go}return rs}var ga=!1,Xu=!0;if(typeof F=="string")ga=!0;else if(Array.isArray(F)){var ul=F.concat();dn=[];for(var cl,cs=ul.length;cs--;)(typeof(cl=ul.shift())!="string"||Array.isArray(cl)&&typeof cl[0]!="string")&&(Xu=!1);ga=Xu}if(ga===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var ma=Me/ui.internal.scaleFactor,Fo=ma*(Tr-1);switch(pt.baseline){case"bottom":Qe-=Fo;break;case"top":Qe+=ma-Fo;break;case"hanging":Qe+=ma-2*Fo;break;case"middle":Qe+=ma/2-Fo}if((pr=pt.maxWidth||0)>0&&(typeof F=="string"?F=ui.splitTextToSize(F,pr):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(di,vi){return di.concat(ui.splitTextToSize(vi,pr))},[]))),Vt={text:F,x:xe,y:Qe,options:pt,mutex:{pdfEscape:js,activeFontKey:lt,fonts:wn,activeFontSize:Me}},Mr.publish("preProcessText",Vt),F=Vt.text,Nn=(pt=Vt.options).angle,!(ni instanceof ot)&&Nn&&typeof Nn=="number"){Nn*=Math.PI/180,pt.rotationDirection===0&&(Nn=-Nn),z===A.ADVANCED&&(Nn=-Nn);var _o=Math.cos(Nn),Al=Math.sin(Nn);ni=new ot(_o,Al,-Al,_o,0,0)}else Nn&&Nn instanceof ot&&(ni=Nn);z!==A.ADVANCED||ni||(ni=Ht),(er=pt.charSpace||ru)!==void 0&&(us+=pe(B(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mi=pt.horizontalScale)!==void 0&&(us+=pe(100*Mi)+` Tz
`),pt.lang;var Vs=-1,oo=pt.renderingMode!==void 0?pt.renderingMode:pt.stroke,ao=ui.internal.getCurrentPageInfo().pageContext;switch(oo){case 0:case!1:case"fill":Vs=0;break;case 1:case!0:case"stroke":Vs=1;break;case 2:case"fillThenStroke":Vs=2;break;case 3:case"invisible":Vs=3;break;case 4:case"fillAndAddForClipping":Vs=4;break;case 5:case"strokeAndAddPathForClipping":Vs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vs=6;break;case 7:case"addToPathForClipping":Vs=7}var Ac=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;Vs!==-1?us+=Vs+` Tr
`:Ac!==-1&&(us+=`0 Tr
`),Vs!==-1&&(ao.usedRenderingMode=Vs),Rn=pt.align||"left";var _s,Na=Me*Tr,Us=ui.internal.pageSize.getWidth(),Hs=wn[lt];er=pt.charSpace||ru,pr=pt.maxWidth||0,Ar=Object.assign({autoencode:!0,noBOM:!0},pt.flags);var Oa=[],Ia=function(di){return ui.getStringUnitWidth(di,{font:Hs,charSpace:er,fontSize:Me,doKerning:!1})*Me/$s};if(Object.prototype.toString.call(F)==="[object Array]"){var Gs;dn=so(F),Rn!=="left"&&(_s=dn.map(Ia));var Ms,va=0;if(Rn==="right"){xe-=_s[0],F=[],cs=dn.length;for(var jo=0;jo<cs;jo++)jo===0?(Ms=sr(xe),Gs=es(Qe)):(Ms=B(va-_s[jo]),Gs=-Na),F.push([dn[jo],Ms,Gs]),va=_s[jo]}else if(Rn==="center"){xe-=_s[0]/2,F=[],cs=dn.length;for(var Ws=0;Ws<cs;Ws++)Ws===0?(Ms=sr(xe),Gs=es(Qe)):(Ms=B((va-_s[Ws])/2),Gs=-Na),F.push([dn[Ws],Ms,Gs]),va=_s[Ws]}else if(Rn==="left"){F=[],cs=dn.length;for(var xt=0;xt<cs;xt++)F.push(dn[xt])}else if(Rn==="justify"&&Hs.encoding==="Identity-H"){F=[],cs=dn.length,pr=pr!==0?pr:Us;for(var Kt=0,Ot=0;Ot<cs;Ot++)if(Gs=Ot===0?es(Qe):-Na,Ms=Ot===0?sr(xe):Kt,Ot<cs-1){var An=B((pr-_s[Ot])/(dn[Ot].split(" ").length-1)),Gn=dn[Ot].split(" ");F.push([Gn[0]+" ",Ms,Gs]),Kt=0;for(var mr=1;mr<Gn.length;mr++){var Ni=(Ia(Gn[mr-1]+" "+Gn[mr])-Ia(Gn[mr]))*$s+An;mr==Gn.length-1?F.push([Gn[mr],Ni,0]):F.push([Gn[mr]+" ",Ni,0]),Kt-=Ni}}else F.push([dn[Ot],Ms,Gs]);F.push(["",Kt,0])}else{if(Rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],cs=dn.length,pr=pr!==0?pr:Us,Ot=0;Ot<cs;Ot++)Gs=Ot===0?es(Qe):-Na,Ms=Ot===0?sr(xe):0,Ot<cs-1?Oa.push(pe(B((pr-_s[Ot])/(dn[Ot].split(" ").length-1)))):Oa.push(0),F.push([dn[Ot],Ms,Gs])}}var ci=typeof pt.R2L=="boolean"?pt.R2L:ct;ci===!0&&(F=Eu(F,function(di,vi,rs){return[di.split("").reverse().join(""),vi,rs]})),Vt={text:F,x:xe,y:Qe,options:pt,mutex:{pdfEscape:js,activeFontKey:lt,fonts:wn,activeFontSize:Me}},Mr.publish("postProcessText",Vt),F=Vt.text,Ro=Vt.mutex.isHex||!1;var ou=wn[lt].encoding;ou!=="WinAnsiEncoding"&&ou!=="StandardEncoding"||(F=Eu(F,function(di,vi,rs){return[kl(di),vi,rs]})),dn=so(F),F=[];for(var lo,Oi,ya,Ba=0,ba=1,_a=Array.isArray(dn[0])?ba:Ba,wa="",$r=function(di,vi,rs){var Ci="";return rs instanceof ot?(rs=typeof pt.angle=="number"?nt(rs,new ot(1,0,0,1,di,vi)):nt(new ot(1,0,0,1,di,vi),rs),z===A.ADVANCED&&(rs=nt(new ot(1,0,0,-1,0,0),rs)),Ci=rs.join(" ")+` Tm
`):Ci=pe(di)+" "+pe(vi)+` Td
`,Ci},sa=0;sa<dn.length;sa++){switch(wa="",_a){case ba:ya=(Ro?"<":"(")+dn[sa][0]+(Ro?">":")"),lo=parseFloat(dn[sa][1]),Oi=parseFloat(dn[sa][2]);break;case Ba:ya=(Ro?"<":"(")+dn[sa]+(Ro?">":")"),lo=sr(xe),Oi=es(Qe)}Oa!==void 0&&Oa[sa]!==void 0&&(wa=Oa[sa]+` Tw
`),sa===0?F.push(wa+$r(lo,Oi,ni)+ya):_a===Ba?F.push(wa+ya):_a===ba&&F.push(wa+$r(lo,Oi,ni)+ya)}F=_a===Ba?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var ks=`BT
/`;return ks+=lt+" "+Me+` Tf
`,ks+=pe(Me*Tr)+` TL
`,ks+=pa+`
`,ks+=us,ks+=F,le(ks+="ET"),v[lt]=!0,ui};var ta=m.__private__.clip=m.clip=function(F){return le(F==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ta("evenodd")},m.__private__.discardPath=m.discardPath=function(){return le("n"),this};var Zr=m.__private__.isValidStyle=function(F){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(xe=!0),xe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(F){return Zr(F)&&(c=F),this};var Ku=m.__private__.getStyle=m.getStyle=function(F){var xe=c;switch(F){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=F}return xe},Ll=m.close=function(){return le("h"),this};m.stroke=function(){return le("S"),this},m.fill=function(F){return Sl("f",F),this},m.fillEvenOdd=function(F){return Sl("f*",F),this},m.fillStroke=function(F){return Sl("B",F),this},m.fillStrokeEvenOdd=function(F){return Sl("B*",F),this};var Sl=function(F,xe){Ki(xe)==="object"?Zu(xe,F):le(F)},na=function(F){F===null||z===A.ADVANCED&&F===void 0||(F=Ku(F),le(F))};function al(F,xe,Qe,pt,Pt){var Vt=new cp(xe||this.boundingBox,Qe||this.xStep,pt||this.yStep,this.gState,Pt||this.matrix);Vt.stream=this.stream;var dn=F+"$$"+this.cloneIndex+++"$$";return kn(dn,Vt),Vt}var Zu=function(F,xe){var Qe=_n[F.key],pt=en[Qe];if(pt instanceof rf)le("q"),le(Ql(xe)),pt.gState&&m.setGState(pt.gState),le(F.matrix.toString()+" cm"),le("/"+Qe+" sh"),le("Q");else if(pt instanceof cp){var Pt=new ot(1,0,0,-1,0,Da());F.matrix&&(Pt=Pt.multiply(F.matrix||Ht),Qe=al.call(pt,F.key,F.boundingBox,F.xStep,F.yStep,Pt).id),le("q"),le("/Pattern cs"),le("/"+Qe+" scn"),pt.gState&&m.setGState(pt.gState),le(xe),le("Q")}},Ql=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vr=m.moveTo=function(F,xe){return le(pe(B(F))+" "+pe($(xe))+" m"),this},Or=m.lineTo=function(F,xe){return le(pe(B(F))+" "+pe($(xe))+" l"),this},ll=m.curveTo=function(F,xe,Qe,pt,Pt,Vt){return le([pe(B(F)),pe($(xe)),pe(B(Qe)),pe($(pt)),pe(B(Pt)),pe($(Vt)),"c"].join(" ")),this};m.__private__.line=m.line=function(F,xe,Qe,pt,Pt){if(isNaN(F)||isNaN(xe)||isNaN(Qe)||isNaN(pt)||!Zr(Pt))throw new Error("Invalid arguments passed to jsPDF.line");return z===A.COMPAT?this.lines([[Qe-F,pt-xe]],F,xe,[1,1],Pt||"S"):this.lines([[Qe-F,pt-xe]],F,xe,[1,1]).stroke()},m.__private__.lines=m.lines=function(F,xe,Qe,pt,Pt,Vt){var dn,Nn,Rn,er,pr,Ar,Mi,ni,ui,ns,us,Ro;if(typeof F=="number"&&(Ro=Qe,Qe=xe,xe=F,F=Ro),pt=pt||[1,1],Vt=Vt||!1,isNaN(xe)||isNaN(Qe)||!Array.isArray(F)||!Array.isArray(pt)||!Zr(Pt)||typeof Vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vr(xe,Qe),dn=pt[0],Nn=pt[1],er=F.length,ns=xe,us=Qe,Rn=0;Rn<er;Rn++)(pr=F[Rn]).length===2?(ns=pr[0]*dn+ns,us=pr[1]*Nn+us,Or(ns,us)):(Ar=pr[0]*dn+ns,Mi=pr[1]*Nn+us,ni=pr[2]*dn+ns,ui=pr[3]*Nn+us,ns=pr[4]*dn+ns,us=pr[5]*Nn+us,ll(Ar,Mi,ni,ui,ns,us));return Vt&&Ll(),na(Pt),this},m.path=function(F){for(var xe=0;xe<F.length;xe++){var Qe=F[xe],pt=Qe.c;switch(Qe.op){case"m":vr(pt[0],pt[1]);break;case"l":Or(pt[0],pt[1]);break;case"c":ll.apply(this,pt);break;case"h":Ll()}}return this},m.__private__.rect=m.rect=function(F,xe,Qe,pt,Pt){if(isNaN(F)||isNaN(xe)||isNaN(Qe)||isNaN(pt)||!Zr(Pt))throw new Error("Invalid arguments passed to jsPDF.rect");return z===A.COMPAT&&(pt=-pt),le([pe(B(F)),pe($(xe)),pe(B(Qe)),pe(B(pt)),"re"].join(" ")),na(Pt),this},m.__private__.triangle=m.triangle=function(F,xe,Qe,pt,Pt,Vt,dn){if(isNaN(F)||isNaN(xe)||isNaN(Qe)||isNaN(pt)||isNaN(Pt)||isNaN(Vt)||!Zr(dn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Qe-F,pt-xe],[Pt-Qe,Vt-pt],[F-Pt,xe-Vt]],F,xe,[1,1],dn,!0),this},m.__private__.roundedRect=m.roundedRect=function(F,xe,Qe,pt,Pt,Vt,dn){if(isNaN(F)||isNaN(xe)||isNaN(Qe)||isNaN(pt)||isNaN(Pt)||isNaN(Vt)||!Zr(dn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nn=4/3*(Math.SQRT2-1);return Pt=Math.min(Pt,.5*Qe),Vt=Math.min(Vt,.5*pt),this.lines([[Qe-2*Pt,0],[Pt*Nn,0,Pt,Vt-Vt*Nn,Pt,Vt],[0,pt-2*Vt],[0,Vt*Nn,-Pt*Nn,Vt,-Pt,Vt],[2*Pt-Qe,0],[-Pt*Nn,0,-Pt,-Vt*Nn,-Pt,-Vt],[0,2*Vt-pt],[0,-Vt*Nn,Pt*Nn,-Vt,Pt,-Vt]],F+Pt,xe,[1,1],dn,!0),this},m.__private__.ellipse=m.ellipse=function(F,xe,Qe,pt,Pt){if(isNaN(F)||isNaN(xe)||isNaN(Qe)||isNaN(pt)||!Zr(Pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Vt=4/3*(Math.SQRT2-1)*Qe,dn=4/3*(Math.SQRT2-1)*pt;return vr(F+Qe,xe),ll(F+Qe,xe-dn,F+Vt,xe-pt,F,xe-pt),ll(F-Vt,xe-pt,F-Qe,xe-dn,F-Qe,xe),ll(F-Qe,xe+dn,F-Vt,xe+pt,F,xe+pt),ll(F+Vt,xe+pt,F+Qe,xe+dn,F+Qe,xe),na(Pt),this},m.__private__.circle=m.circle=function(F,xe,Qe,pt){if(isNaN(F)||isNaN(xe)||isNaN(Qe)||!Zr(pt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,xe,Qe,Qe,pt)},m.setFont=function(F,xe,Qe){return Qe&&(xe=ge(xe,Qe)),lt=Qo(F,xe,{disableWarning:!1}),this};var Mc=m.__private__.getFont=m.getFont=function(){return wn[Qo.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var F,xe,Qe={};for(F in xn)if(xn.hasOwnProperty(F))for(xe in Qe[F]=[],xn[F])xn[F].hasOwnProperty(xe)&&Qe[F].push(xe);return Qe},m.addFont=function(F,xe,Qe,pt,Pt){var Vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Vt.indexOf(arguments[3])!==-1?Pt=arguments[3]:arguments[3]&&Vt.indexOf(arguments[3])==-1&&(Qe=ge(Qe,pt)),Pt=Pt||"Identity-H",io.call(this,F,xe,Qe,Pt)};var eu,Lu=t.lineWidth||.200025,Cl=m.__private__.getLineWidth=m.getLineWidth=function(){return Lu},tu=m.__private__.setLineWidth=m.setLineWidth=function(F){return Lu=F,le(pe(B(F))+" w"),this};m.__private__.setLineDash=Cr.API.setLineDash=Cr.API.setLineDashPattern=function(F,xe){if(F=F||[],xe=xe||0,isNaN(xe)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(Qe){return pe(B(Qe))}).join(" "),xe=pe(B(xe)),le("["+F+"] "+xe+" d"),this};var Su=m.__private__.getLineHeight=m.getLineHeight=function(){return Me*eu};m.__private__.getLineHeight=m.getLineHeight=function(){return Me*eu};var zr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(eu=F),this},Qi=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return eu};zr(t.lineHeight);var sr=m.__private__.getHorizontalCoordinate=function(F){return B(F)},es=m.__private__.getVerticalCoordinate=function(F){return z===A.ADVANCED?F:Jn[q].mediaBox.topRightY-Jn[q].mediaBox.bottomLeftY-B(F)},El=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(F){return pe(sr(F))},Ta=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(F){return pe(es(F))},Di=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Qn(Di)},m.__private__.setStrokeColor=m.setDrawColor=function(F,xe,Qe,pt){return Di=ar({ch1:F,ch2:xe,ch3:Qe,ch4:pt,pdfColorType:"draw",precision:2}),le(Di),this};var Cu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Qn(Cu)},m.__private__.setFillColor=m.setFillColor=function(F,xe,Qe,pt){return Cu=ar({ch1:F,ch2:xe,ch3:Qe,ch4:pt,pdfColorType:"fill",precision:2}),le(Cu),this};var pa=t.textColor||"0 g",nu=m.__private__.getTextColor=m.getTextColor=function(){return Qn(pa)};m.__private__.setTextColor=m.setTextColor=function(F,xe,Qe,pt){return pa=ar({ch1:F,ch2:xe,ch3:Qe,ch4:pt,pdfColorType:"text",precision:3}),this};var ru=t.charSpace,Ho=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ru||0)};m.__private__.setCharSpace=m.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ru=F,this};var iu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(F){var xe=m.CapJoinStyles[F];if(xe===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return iu=xe,le(xe+" J"),this};var ai=0;m.__private__.setLineJoin=m.setLineJoin=function(F){var xe=m.CapJoinStyles[F];if(xe===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ai=xe,le(xe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(pe(B(F))+" M"),this},m.GState=Yv,m.setGState=function(F){(F=typeof F=="string"?Cn[qn[F]]:kc(null,F)).equals(nr)||(le("/"+F.id+" gs"),nr=F)};var kc=function(F,xe){if(!F||!qn[F]){var Qe=!1;for(var pt in Cn)if(Cn.hasOwnProperty(pt)&&Cn[pt].equals(xe)){Qe=!0;break}if(Qe)xe=Cn[pt];else{var Pt="GS"+(Object.keys(Cn).length+1).toString(10);Cn[Pt]=xe,xe.id=Pt}return F&&(qn[F]=xe.id),Mr.publish("addGState",xe),xe}};m.addGState=function(F,xe){return kc(F,xe),this},m.saveGraphicsState=function(){return le("q"),$n.push({key:lt,size:Me,color:pa}),this},m.restoreGraphicsState=function(){le("Q");var F=$n.pop();return lt=F.key,Me=F.size,pa=F.color,nr=null,this},m.setCurrentTransformationMatrix=function(F){return le(F.toString()+" cm"),this},m.comment=function(F){return le("#"+F),this};var Ps=function(F,xe){var Qe=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Qe},set:function(Vt){isNaN(Vt)||(Qe=parseFloat(Vt))}});var pt=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pt},set:function(Vt){isNaN(Vt)||(pt=parseFloat(Vt))}});var Pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pt},set:function(Vt){Pt=Vt.toString()}}),this},ra=function(F,xe,Qe,pt){Ps.call(this,F,xe),this.type="rect";var Pt=Qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pt},set:function(dn){isNaN(dn)||(Pt=parseFloat(dn))}});var Vt=pt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Vt},set:function(dn){isNaN(dn)||(Vt=parseFloat(dn))}}),this},su=function(){this.page=rr,this.currentPage=q,this.pages=De.slice(0),this.pagesContext=Jn.slice(0),this.x=$t,this.y=Qt,this.matrix=Pn,this.width=li(q),this.height=Da(q),this.outputDestination=fe,this.id="",this.objectNumber=-1};su.prototype.restore=function(){rr=this.page,q=this.currentPage,Jn=this.pagesContext,De=this.pages,$t=this.x,Qt=this.y,Pn=this.matrix,Bo(q,this.width),ts(q,this.height),fe=this.outputDestination};var ia=function(F,xe,Qe,pt,Pt){Cs.push(new su),rr=q=0,De=[],$t=F,Qt=xe,Pn=Pt,zs([Qe,pt])},Pl=function(F){if(ro[F])Cs.pop().restore();else{var xe=new su,Qe="Xo"+(Object.keys(ji).length+1).toString(10);xe.id=Qe,ro[F]=Qe,ji[Qe]=xe,Mr.publish("addFormObject",xe),Cs.pop().restore()}};for(var Ml in m.beginFormObject=function(F,xe,Qe,pt,Pt){return ia(F,xe,Qe,pt,Pt),this},m.endFormObject=function(F){return Pl(F),this},m.doFormObject=function(F,xe){var Qe=ji[ro[F]];return le("q"),le(xe.toString()+" cm"),le("/"+Qe.id+" Do"),le("Q"),this},m.getFormObject=function(F){var xe=ji[ro[F]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},m.save=function(F,xe){return F=F||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(Jh(Aa(ea()),F),typeof Jh.unload=="function"&&Er.setTimeout&&setTimeout(Jh.unload,911),this):new Promise(function(Qe,pt){try{var Pt=Jh(Aa(ea()),F);typeof Jh.unload=="function"&&Er.setTimeout&&setTimeout(Jh.unload,911),Qe(Pt)}catch(Vt){pt(Vt.message)}})},Cr.API)Cr.API.hasOwnProperty(Ml)&&(Ml==="events"&&Cr.API.events.length?function(F,xe){var Qe,pt,Pt;for(Pt=xe.length-1;Pt!==-1;Pt--)Qe=xe[Pt][0],pt=xe[Pt][1],F.subscribe.apply(F,[Qe].concat(typeof pt=="function"?[pt]:pt))}(Mr,Cr.API.events):m[Ml]=Cr.API[Ml]);var li=m.getPageWidth=function(F){return(Jn[F=F||q].mediaBox.topRightX-Jn[F].mediaBox.bottomLeftX)/rt},Bo=m.setPageWidth=function(F,xe){Jn[F].mediaBox.topRightX=xe*rt+Jn[F].mediaBox.bottomLeftX},Da=m.getPageHeight=function(F){return(Jn[F=F||q].mediaBox.topRightY-Jn[F].mediaBox.bottomLeftY)/rt},ts=m.setPageHeight=function(F,xe){Jn[F].mediaBox.topRightY=xe*rt+Jn[F].mediaBox.bottomLeftY};return m.internal={pdfEscape:js,getStyle:Ku,getFont:Mc,getFontSize:qe,getCharSpace:Ho,getTextColor:nu,getLineHeight:Su,getLineHeightFactor:Qi,getLineWidth:Cl,write:ze,getHorizontalCoordinate:sr,getVerticalCoordinate:es,getCoordinateString:El,getVerticalCoordinateString:Ta,collections:{},newObject:tn,newAdditionalObject:ir,newObjectDeferred:qt,newObjectDeferredBegin:Wt,getFilters:ur,putStream:vn,events:Mr,scaleFactor:rt,pageSize:{getWidth:function(){return li(q)},setWidth:function(F){Bo(q,F)},getHeight:function(){return Da(q)},setHeight:function(F){ts(q,F)}},encryptionOptions:h,encryption:bs,getEncryptor:Pc,output:ol,getNumberOfPages:Gi,pages:De,out:le,f2:J,f3:V,getPageInfo:xu,getPageInfoByObjId:gr,getCurrentPageInfo:_r,getPDFVersion:E,Point:Ps,Rectangle:ra,Matrix:ot,hasHotfix:Jl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return li(q)},set:function(F){Bo(q,F)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Da(q)},set:function(F){ts(q,F)},enumerable:!0,configurable:!0}),br.call(m,Je),lt="F1",qu(i,n),Mr.publish("initialized"),m}op.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},op.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},op.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},op.prototype.processOwnerPassword=function(t,e){return kb(Mb(e).substr(0,5),t)},op.prototype.encryptor=function(t,e){var n=Mb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return kb(n,r)}},Yv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ki(t)!==Ki(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Cr.API={events:[]},Cr.version="2.5.2";var po=Cr.API,$_=1,Sf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Br=function(t){return t.toFixed(2)},Jd=function(t){return t.toFixed(5)};po.__acroform__={};var Xl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},L5=function(t){return t*$_},jc=function(t){var e=new XE,n=Wn.internal.getHeight(t)||0,r=Wn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Br(r)),Number(Br(n))],e},CH=po.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},EH=po.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},PH=po.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Mo=po.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return PH(t,e-1)},ko=po.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return CH(t,e-1)},Ao=po.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return EH(t,e-1)},MH=po.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Br(l.lowerLeft_X)),Number(Br(l.lowerLeft_Y)),Number(Br(l.upperRight_X)),Number(Br(l.upperRight_Y))]},kH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ab(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Br(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ab=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(V){return V.split(`
`)}):i.map(function(V){return[V]});var s=n,o=Wn.internal.getHeight(t)||0;o=o<0?-o:o;var a=Wn.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(V,B,H){if(V+1<i.length){var $=B+" "+i[V+1][0];return L0($,t,H).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,h,p=L0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,m=v+=2,x=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+L0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var T="",A=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var Y=!1;if(i[z].length!==1&&k!==i[z].length-1){if((p+2)*(A+2)+2>o)continue e;T+=i[z][k],Y=!0,E=z,z--}else{T=(T+=i[z][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var ne=parseInt(z),ge=l(ne,T,s),pe=z>=i.length-1;if(ge&&!pe){T+=" ",k=0;continue}if(ge||pe){if(pe)E=ne;else if(t.multiline&&(p+2)*(A+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(A+2)+2>o)continue e;E=ne}}for(var O="",j=x;j<=E;j++){var J=i[j];if(t.multiline){if(j===E){O+=J[k]+" ",k=(k+1)%J.length;continue}if(j===x){O+=J[J.length-1]+" ";continue}}O+=J[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,h=L0(O,t,s).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=Br(c)+" "+Br(m)+` Td
`,e+="("+Sf(O)+`) Tj
`,e+=-Br(c)+` 0 Td
`,m=-(s+2),h=0,x=Y?E:E+1,A++,T=""}break}return r.text=e,r.fontSize=s,r},L0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},AH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},DH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ki(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},NH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Cc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(AH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new JE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&TH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=MH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Wn.createDefaultAppearanceStream(a),Ki(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=kH(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&DH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},ZE=po.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ki(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Sf(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},o2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Sf(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:ZE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var XE=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Xl(XE,Kc);var JE=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Sf(n(t))+")"}},set:function(n){t=n}})};Xl(JE,Kc);var Cc=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Mo(e,3)},set:function(T){T?this.F=ko(e,3):this.F=Ao(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');n=T}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(T){r=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(T){r[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(T){r[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(T){r[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(T){r[3]=T}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Kv)return;s="FieldObject"+t.FieldNum++}var T=function(A){return A};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Sf(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(T){a=T}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/$_:c},set:function(T){c=T}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(T){h=T}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Kv||this instanceof hf))return o2(p,this.objId,this.scope)},set:function(T){T=T.toString(),p=T}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ca?v:o2(v,this.objId,this.scope)},set:function(T){T=T.toString(),v=this instanceof ca?T:T.substr(0,1)==="("?qf(T.substr(1,T.length-2)):qf(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ca?qf(v.substr(1,v.length-1)):v},set:function(T){T=T.toString(),v=this instanceof ca?"/"+T:T}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ca?m:o2(m,this.objId,this.scope)},set:function(T){T=T.toString(),m=this instanceof ca?T:T.substr(0,1)==="("?qf(T.substr(1,T.length-2)):qf(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ca?qf(m.substr(1,m.length-1)):m},set:function(T){T=T.toString(),m=this instanceof ca?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(T){T=!!T,E=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(T){x=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,1)},set:function(T){T?this.Ff=ko(this.Ff,1):this.Ff=Ao(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,2)},set:function(T){T?this.Ff=ko(this.Ff,2):this.Ff=Ao(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,3)},set:function(T){T?this.Ff=ko(this.Ff,3):this.Ff=Ao(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};Xl(Cc,Kc);var yp=function(){Cc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,18)},set:function(n){n?this.Ff=ko(this.Ff,18):this.Ff=Ao(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ko(this.Ff,19):this.Ff=Ao(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,20)},set:function(n){n?(this.Ff=ko(this.Ff,20),e.sort()):this.Ff=Ao(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,22)},set:function(n){n?this.Ff=ko(this.Ff,22):this.Ff=Ao(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,23)},set:function(n){n?this.Ff=ko(this.Ff,23):this.Ff=Ao(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,27)},set:function(n){n?this.Ff=ko(this.Ff,27):this.Ff=Ao(this.Ff,27)}}),this.hasAppearanceStream=!1};Xl(yp,Cc);var bp=function(){yp.call(this),this.fontName="helvetica",this.combo=!1};Xl(bp,yp);var _p=function(){bp.call(this),this.combo=!0};Xl(_p,bp);var sv=function(){_p.call(this),this.edit=!0};Xl(sv,_p);var ca=function(){Cc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,15)},set:function(n){n?this.Ff=ko(this.Ff,15):this.Ff=Ao(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,16)},set:function(n){n?this.Ff=ko(this.Ff,16):this.Ff=Ao(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,17)},set:function(n){n?this.Ff=ko(this.Ff,17):this.Ff=Ao(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,26)},set:function(n){n?this.Ff=ko(this.Ff,26):this.Ff=Ao(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Sf(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ki(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Xl(ca,Cc);var ov=function(){ca.call(this),this.pushButton=!0};Xl(ov,ca);var wp=function(){ca.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xl(wp,ca);var Kv=function(){var t,e;Cc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Sf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ki(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Wn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xl(Kv,Cc),wp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},wp.prototype.createOption=function(t){var e=new Kv;return e.Parent=this,e.optionName=t,this.Kids.push(e),OH.call(this.scope,e),e};var av=function(){ca.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Wn.CheckBox.createAppearanceStream()};Xl(av,ca);var hf=function(){Cc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,13)},set:function(e){e?this.Ff=ko(this.Ff,13):this.Ff=Ao(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,21)},set:function(e){e?this.Ff=ko(this.Ff,21):this.Ff=Ao(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,23)},set:function(e){e?this.Ff=ko(this.Ff,23):this.Ff=Ao(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,24)},set:function(e){e?this.Ff=ko(this.Ff,24):this.Ff=Ao(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,25)},set:function(e){e?this.Ff=ko(this.Ff,25):this.Ff=Ao(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,26)},set:function(e){e?this.Ff=ko(this.Ff,26):this.Ff=Ao(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xl(hf,Cc);var lv=function(){hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Mo(this.Ff,14)},set:function(t){t?this.Ff=ko(this.Ff,14):this.Ff=Ao(this.Ff,14)}}),this.password=!0};Xl(lv,hf);var Wn={CheckBox:{createAppearanceStream:function(){return{N:{On:Wn.CheckBox.YesNormal},D:{On:Wn.CheckBox.YesPushDown,Off:Wn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ab(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Br(Wn.internal.getWidth(t))+" "+Br(Wn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Br(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Wn.internal.getHeight(t),o=Wn.internal.getWidth(t),a=Ab(t,t.caption);return i.push("1 g"),i.push("0 0 "+Br(o)+" "+Br(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Br(o-1)+" "+Br(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Br(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Br(Wn.internal.getWidth(t))+" "+Br(Wn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Wn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Wn.RadioButton.Circle.YesNormal,e.D[t]=Wn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Wn.internal.getWidth(t)<=Wn.internal.getHeight(t)?Wn.internal.getWidth(t)/4:Wn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Wn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Jd(Wn.internal.getWidth(t)/2)+" "+Jd(Wn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Wn.internal.getWidth(t)<=Wn.internal.getHeight(t)?Wn.internal.getWidth(t)/4:Wn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Wn.internal.Bezier_C).toFixed(5)),o=Number((r*Wn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jd(Wn.internal.getWidth(t)/2)+" "+Jd(Wn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Jd(Wn.internal.getWidth(t)/2)+" "+Jd(Wn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Wn.internal.getWidth(t)<=Wn.internal.getHeight(t)?Wn.internal.getWidth(t)/4:Wn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Wn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jd(Wn.internal.getWidth(t)/2)+" "+Jd(Wn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Wn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Wn.RadioButton.Cross.YesNormal,e.D[t]=Wn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Wn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Br(Wn.internal.getWidth(t)-2)+" "+Br(Wn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Br(r.x1.x)+" "+Br(r.x1.y)+" m"),n.push(Br(r.x2.x)+" "+Br(r.x2.y)+" l"),n.push(Br(r.x4.x)+" "+Br(r.x4.y)+" m"),n.push(Br(r.x3.x)+" "+Br(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=Wn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Br(Wn.internal.getWidth(t))+" "+Br(Wn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Br(Wn.internal.getWidth(t)-2)+" "+Br(Wn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Br(n.x1.x)+" "+Br(n.x1.y)+" m"),r.push(Br(n.x2.x)+" "+Br(n.x2.y)+" l"),r.push(Br(n.x4.x)+" "+Br(n.x4.y)+" m"),r.push(Br(n.x3.x)+" "+Br(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Br(Wn.internal.getWidth(t))+" "+Br(Wn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Wn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Wn.internal.getWidth(t),n=Wn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Wn.internal.getWidth=function(t){var e=0;return Ki(t)==="object"&&(e=L5(t.Rect[2])),e},Wn.internal.getHeight=function(t){var e=0;return Ki(t)==="object"&&(e=L5(t.Rect[3])),e};var OH=po.addField=function(t){if(NH(this,t),!(t instanceof Cc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};po.AcroFormChoiceField=yp,po.AcroFormListBox=bp,po.AcroFormComboBox=_p,po.AcroFormEditBox=sv,po.AcroFormButton=ca,po.AcroFormPushButton=ov,po.AcroFormRadioButton=wp,po.AcroFormCheckBox=av,po.AcroFormTextField=hf,po.AcroFormPasswordField=lv,po.AcroFormAppearance=Wn,po.AcroForm={ChoiceField:yp,ListBox:bp,ComboBox:_p,EditBox:sv,Button:ca,PushButton:ov,RadioButton:wp,CheckBox:av,TextField:hf,PasswordField:lv,Appearance:Wn},Cr.AcroForm={ChoiceField:yp,ListBox:bp,ComboBox:_p,EditBox:sv,Button:ca,PushButton:ov,RadioButton:wp,CheckBox:av,TextField:hf,PasswordField:lv,Appearance:Wn};Cr.AcroForm;function QE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(V,B){var H,$,R,I,X,K=e;if((B=B||e)==="RGBA"||V.data!==void 0&&V.data instanceof Uint8ClampedArray&&"height"in V&&"width"in V)return"RGBA";if(ge(V))for(X in n)for(R=n[X],H=0;H<R.length;H+=1){for(I=!0,$=0;$<R[H].length;$+=1)if(R[H][$]!==void 0&&R[H][$]!==V[$]){I=!1;break}if(I===!0){K=X;break}}else for(X in n)for(R=n[X],H=0;H<R.length;H+=1){for(I=!0,$=0;$<R[H].length;$+=1)if(R[H][$]!==void 0&&R[H][$]!==V.charCodeAt($)){I=!1;break}if(I===!0){K=X;break}}return K===e&&B!==e&&(K=B),K},i=function V(B){for(var H=this.internal.write,$=this.internal.putStream,R=(0,this.internal.getFilters)();R.indexOf("FlateEncode")!==-1;)R.splice(R.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var I=[];if(I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Image"}),I.push({key:"Width",value:B.width}),I.push({key:"Height",value:B.height}),B.colorSpace===k.INDEXED?I.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(I.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===k.DEVICE_CMYK&&I.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),I.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&I.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)){for(var X="",K=0,_e=B.transparency.length;K<_e;K++)X+=B.transparency[K]+" "+B.transparency[K]+" ";I.push({key:"Mask",value:"["+X+"]"})}B.sMask!==void 0&&I.push({key:"SMask",value:B.objectId+1+" 0 R"});var ve=B.filter!==void 0?["/"+B.filter]:void 0;if($({data:B.data,additionalKeyValues:I,alreadyAppliedFilters:ve,objectId:B.objectId}),H("endobj"),"sMask"in B&&B.sMask!==void 0){var Ge="/Predictor "+B.predictor+" /Colors 1 /BitsPerComponent "+B.bitsPerComponent+" /Columns "+B.width,se={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:B.bitsPerComponent,decodeParameters:Ge,data:B.sMask};"filter"in B&&(se.filter=B.filter),V.call(this,se)}if(B.colorSpace===k.INDEXED){var q=this.internal.newObject();$({data:O(new Uint8Array(B.palette)),objectId:q}),H("endobj")}},s=function(){var V=this.internal.collections.addImage_images;for(var B in V)i.call(this,V[B])},o=function(){var V,B=this.internal.collections.addImage_images,H=this.internal.write;for(var $ in B)H("/I"+(V=B[$]).index,V.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var V=this.internal.collections.addImage_images;return a.call(this),V},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(V){return typeof t["process"+V.toUpperCase()]=="function"},p=function(V){return Ki(V)==="object"&&V.nodeType===1},v=function(V,B){if(V.nodeName==="IMG"&&V.hasAttribute("src")){var H=""+V.getAttribute("src");if(H.indexOf("data:image/")===0)return Gg(unescape(H).split("base64,").pop());var $=t.loadFile(H,!0);if($!==void 0)return $}if(V.nodeName==="CANVAS"){if(V.width===0||V.height===0)throw new Error("Given canvas must have data. Canvas width: "+V.width+", height: "+V.height);var R;switch(B){case"PNG":R="image/png";break;case"WEBP":R="image/webp";break;case"JPEG":case"JPG":default:R="image/jpeg"}return Gg(V.toDataURL(R,1).split("base64,").pop())}},m=function(V){var B=this.internal.collections.addImage_images;if(B){for(var H in B)if(V===B[H].alias)return B[H]}},x=function(V,B,H){return V||B||(V=-96,B=-96),V<0&&(V=-1*H.width*72/V/this.internal.scaleFactor),B<0&&(B=-1*H.height*72/B/this.internal.scaleFactor),V===0&&(V=B*H.width/H.height),B===0&&(B=V*H.height/H.width),[V,B]},E=function(V,B,H,$,R,I){var X=x.call(this,H,$,R),K=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,ve=l.call(this);if(H=X[0],$=X[1],ve[R.index]=R,I){I*=Math.PI/180;var Ge=Math.cos(I),se=Math.sin(I),q=function(ie){return ie.toFixed(4)},Z=[q(Ge),q(se),q(-1*se),q(Ge),0,0,"cm"]}this.internal.write("q"),I?(this.internal.write([1,"0","0",1,K(V),_e(B+$),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([K(H),"0","0",K($),"0","0","cm"].join(" "))):this.internal.write([K(H),"0","0",K($),K(V),_e(B+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+R.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=t.__addimage__.sHashCode=function(V){var B,H,$=0;if(typeof V=="string")for(H=V.length,B=0;B<H;B++)$=($<<5)-$+V.charCodeAt(B),$|=0;else if(ge(V))for(H=V.byteLength/2,B=0;B<H;B++)$=($<<5)-$+V[B],$|=0;return $},z=t.__addimage__.validateStringAsBase64=function(V){(V=V||"").toString().trim();var B=!0;return V.length===0&&(B=!1),V.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(V.substr(0,V.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(V.substr(-2))===!1&&(B=!1),B},Y=t.__addimage__.extractImageFromDataUrl=function(V){var B=(V=V||"").split("base64,"),H=null;if(B.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(B[0]);Array.isArray($)&&(H={mimeType:$[1],charset:$[2],data:B[1]})}return H},ne=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(V){return ne()&&V instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(V){return ne()&&typeof Uint32Array<"u"&&(V instanceof Int8Array||V instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&V instanceof Uint8ClampedArray||V instanceof Int16Array||V instanceof Uint16Array||V instanceof Int32Array||V instanceof Uint32Array||V instanceof Float32Array||V instanceof Float64Array)},pe=t.__addimage__.binaryStringToUint8Array=function(V){for(var B=V.length,H=new Uint8Array(B),$=0;$<B;$++)H[$]=V.charCodeAt($);return H},O=t.__addimage__.arrayBufferToBinaryString=function(V){for(var B="",H=ge(V)?V:new Uint8Array(V),$=0;$<H.length;$+=8192)B+=String.fromCharCode.apply(null,H.subarray($,$+8192));return B};t.addImage=function(){var V,B,H,$,R,I,X,K,_e;if(typeof arguments[1]=="number"?(B=e,H=arguments[1],$=arguments[2],R=arguments[3],I=arguments[4],X=arguments[5],K=arguments[6],_e=arguments[7]):(B=arguments[1],H=arguments[2],$=arguments[3],R=arguments[4],I=arguments[5],X=arguments[6],K=arguments[7],_e=arguments[8]),Ki(V=arguments[0])==="object"&&!p(V)&&"imageData"in V){var ve=V;V=ve.imageData,B=ve.format||B||e,H=ve.x||H||0,$=ve.y||$||0,R=ve.w||ve.width||R,I=ve.h||ve.height||I,X=ve.alias||X,K=ve.compression||K,_e=ve.rotation||ve.angle||_e}var Ge=this.internal.getFilters();if(K===void 0&&Ge.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(H)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var se=j.call(this,V,B,X,K);return E.call(this,H,$,R,I,se,_e),this};var j=function(V,B,H,$){var R,I,X;if(typeof V=="string"&&r(V)===e){V=unescape(V);var K=J(V,!1);(K!==""||(K=t.loadFile(V,!0))!==void 0)&&(V=K)}if(p(V)&&(V=v(V,B)),B=r(V,B),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((X=H)==null||X.length===0)&&(H=function(_e){return typeof _e=="string"||ge(_e)?A(_e):ge(_e.data)?A(_e.data):null}(V)),(R=m.call(this,H))||(ne()&&(V instanceof Uint8Array||B==="RGBA"||(I=V,V=pe(V))),R=this["process"+B.toUpperCase()](V,c.call(this),H,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:T.NONE}($),I)),!R)throw new Error("An unknown error occurred whilst processing the image.");return R},J=t.__addimage__.convertBase64ToBinaryString=function(V,B){var H;B=typeof B!="boolean"||B;var $,R="";if(typeof V=="string"){$=(H=Y(V))!==null?H.data:V;try{R=Gg($)}catch(I){if(B)throw z($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+I.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return R};t.getImageProperties=function(V){var B,H,$="";if(p(V)&&(V=v(V)),typeof V=="string"&&r(V)===e&&(($=J(V,!1))===""&&($=t.loadFile(V)||""),V=$),H=r(V),!h(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!ne()||V instanceof Uint8Array||(V=pe(V)),!(B=this["process"+H.toUpperCase()](V)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=H,B}})(Cr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Cr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,h=!1,p=0;p<c.length&&!h;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(E.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(T(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(T(A))+") >>",E.content=s;var z=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ne=this.annotations._nameMap[r.options.name];r.options.pageNumber=ne.page,r.options.top=ne.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Cr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var k=0,T=n,A="",z=0;for(k=0;k<E.length;k+=1)T[E.charCodeAt(k)]!==void 0?(z++,typeof(T=T[E.charCodeAt(k)])=="number"&&(A+=String.fromCharCode(T),T=n,z=0),k===E.length-1&&(T=n,A+=E.charAt(k-(z-1)),k-=z-1,z=0)):(T=n,A+=E.charAt(k-z),k-=z,z=0);return A};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,k,T){return o(E)?s(E)===!1?-1:!c(E)||!o(k)&&!o(T)||!o(T)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:h(E)&&o(k)&&!a(k)&&o(T)&&c(T)?3:a(E)||!o(T)?1:2:-1},m=function(E){var k=0,T=0,A=0,z="",Y="",ne="",ge=(E=E||"").split("\\s+"),pe=[];for(k=0;k<ge.length;k+=1){for(pe.push(""),T=0;T<ge[k].length;T+=1)z=ge[k][T],Y=ge[k][T-1],ne=ge[k][T+1],o(z)?(A=v(z,Y,ne),pe[k]+=A!==-1?String.fromCharCode(e[z.charCodeAt(0)][A]):z):pe[k]+=z;pe[k]=p(pe[k])}return pe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var A=0;for(T=[],A=0;A<k.length;A+=1)Array.isArray(k[A])?T.push([m(k[A][0]),k[A][1],k[A][2]]):T.push([m(k[A])]);E=T}else E=m(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Cr.API),Cr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Cr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,m=0,x=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var T=c.maxWidth;T>0?typeof l=="string"?l=this.splitTextToSize(l,T):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(z,Y){return z.concat(k.splitTextToSize(Y,T))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)m<(E=this.getStringUnitWidth(l[A],{font:p})*h)&&(m=E);return m!==0&&(x=l.length),{w:m/=v,h:Math.max((x*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,p,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,x,E,k,T=[],A=[],z=[],Y={},ne={},ge=[],pe=[],O=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,J=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,V=v.margins||Object.assign({width:this.getPageWidth()},e),B=typeof v.padding=="number"?v.padding:3,H=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=V,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=$,this.setFontSize(J),p==null)A=T=Object.keys(h[0]),z=T.map(function(){return"left"});else if(Array.isArray(p)&&Ki(p[0])==="object")for(T=p.map(function(ve){return ve.name}),A=p.map(function(ve){return ve.prompt||ve.name||""}),z=p.map(function(ve){return ve.align||"left"}),m=0;m<p.length;m+=1)ne[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(A=T=p,z=T.map(function(){return"left"}));if(O||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<T.length;m+=1){for(Y[k=T[m]]=h.map(function(ve){return ve[k]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(A[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=Y[k],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)ge.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[k]=Math.max.apply(null,ge)+B+B,ge=[]}if(j){var R={};for(m=0;m<T.length;m+=1)R[T[m]]={},R[T[m]].text=A[m],R[T[m]].align=z[m];var I=a.call(this,R,ne);pe=T.map(function(ve){return new s(l,c,ne[ve],I,R[ve].text,void 0,R[ve].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var X=p.reduce(function(ve,Ge){return ve[Ge.name]=Ge.align,ve},{});for(m=0;m<h.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:h[m]},this);var K=a.call(this,h[m],ne);for(E=0;E<T.length;E+=1){var _e=h[m][T[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:_e},this),o.call(this,new s(l,c,ne[T[E]],K,_e,m+2,X[T[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+h+h},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Cr.API);var eP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tb=QE(tP),nP=[100,200,300,400,500,600,700,800,900],IH=QE(nP);function Db(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return eP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Tb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function S5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var BH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},C5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function E5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function RH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},BH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Db(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+E5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var h=Tb[l],p=h<=Tb.normal?-1:1,v=S5(c,tP,h,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var h=eP[l],p=0;p<h.length;++p)if(c[h[p]])return c[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=IH[l],p=S5(c,nP,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+E5(s)+"'.");return o}function P5(t){return t.trimLeft()}function FH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function jH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var S0,M5,k5,a2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,h=function(se){return se=se||{},this.isStrokeTransparent=se.isStrokeTransparent||!1,this.strokeOpacity=se.strokeOpacity||1,this.strokeStyle=se.strokeStyle||"#000000",this.fillStyle=se.fillStyle||"#000000",this.isFillTransparent=se.isFillTransparent||!1,this.fillOpacity=se.fillOpacity||1,this.font=se.font||"10px sans-serif",this.textBaseline=se.textBaseline||"alphabetic",this.textAlign=se.textAlign||"left",this.lineWidth=se.lineWidth||1,this.lineJoin=se.lineJoin||"miter",this.lineCap=se.lineCap||"butt",this.path=se.path||[],this.transform=se.transform!==void 0?se.transform.clone():new l,this.globalCompositeOperation=se.globalCompositeOperation||"normal",this.globalAlpha=se.globalAlpha||1,this.clip_path=se.clip_path||[],this.currentPoint=se.currentPoint||new o,this.miterLimit=se.miterLimit||10,this.lastPoint=se.lastPoint||new o,this.lineDashOffset=se.lineDashOffset||0,this.lineDash=se.lineDash||[],this.margin=se.margin||[0,0,0,0],this.prevPageLastElemOffset=se.prevPageLastElemOffset||0,this.ignoreClearRect=typeof se.ignoreClearRect!="boolean"||se.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var p=function(se){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=se;Object.defineProperty(this,"pdf",{get:function(){return q}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(oe){Z=!!oe}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(oe){ie=!!oe}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(oe){isNaN(oe)||(de=oe)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(oe){isNaN(oe)||(ye=oe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(oe){var le;typeof oe=="number"?le=[oe,oe,oe,oe]:((le=new Array(4))[0]=oe[0],le[1]=oe.length>=2?oe[1]:le[0],le[2]=oe.length>=3?oe[2]:le[0],le[3]=oe.length>=4?oe[3]:le[1]),c.margin=le}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(oe){he=oe}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(oe){Q=oe}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(oe){Ae=oe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(oe){oe instanceof h&&(c=oe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(oe){c.path=oe}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(oe){De=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var le;le=v(oe),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var le=v(oe);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var Ke=null;function fe(oe,le){if(Ke===null){var ze=function($e){var Je=[];return Object.keys($e).forEach(function(Me){$e[Me].forEach(function(me){var qe=null;switch(me){case"bold":qe={family:Me,weight:"bold"};break;case"italic":qe={family:Me,style:"italic"};break;case"bolditalic":qe={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":qe={family:Me}}qe!==null&&(qe.ref={name:Me,style:me},Je.push(qe))})}),Je}(oe.getFontList());Ke=function($e){for(var Je={},Me=0;Me<$e.length;++Me){var me=Db($e[Me]),qe=me.family,ct=me.stretch,ft=me.style,Mt=me.weight;Je[qe]=Je[qe]||{},Je[qe][ct]=Je[qe][ct]||{},Je[qe][ct][ft]=Je[qe][ct][ft]||{},Je[qe][ct][ft][Mt]=me}return Je}(ze.concat(le))}return Ke}var ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return ee},set:function(oe){Ke=null,ee=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var le;if(this.ctx.font=oe,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var ze=le[1],$e=(le[2],le[3]),Je=le[4],Me=(le[5],le[6]),me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Je)[2];Je=Math.floor(me==="px"?parseFloat(Je)*this.pdf.internal.scaleFactor:me==="em"?parseFloat(Je)*this.pdf.getFontSize():parseFloat(Je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Je);var qe=function(Ze){var lt,rt,$t=[],Qt=Ze.trim();if(Qt==="")return a2;if(Qt in C5)return[C5[Qt]];for(;Qt!=="";){switch(rt=null,lt=(Qt=P5(Qt)).charAt(0)){case'"':case"'":rt=FH(Qt.substring(1),lt);break;default:rt=jH(Qt)}if(rt===null||($t.push(rt[0]),(Qt=P5(rt[1]))!==""&&Qt.charAt(0)!==","))return a2;Qt=Qt.replace(/^,/,"")}return $t}(Me);if(this.fontFaces){var ct=RH(fe(this.pdf,this.fontFaces),qe.map(function(Ze){return{family:Ze,stretch:"normal",weight:$e,style:ze}}));this.pdf.setFont(ct.ref.name,ct.ref.style)}else{var ft="";($e==="bold"||parseInt($e,10)>=700||ze==="bold")&&(ft="bold"),ze==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var Mt="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jt=0;jt<qe.length;jt++){if(this.pdf.internal.getFont(qe[jt],ft,{noFallback:!0,disableWarning:!0})!==void 0){Mt=qe[jt];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(qe[jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Mt=qe[jt],ft="bold";else if(this.pdf.internal.getFont(qe[jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Mt=qe[jt],ft="normal";break}}if(Mt===""){for(var hn=0;hn<qe.length;hn++)if(it[qe[hn]]){Mt=it[qe[hn]];break}}Mt=Mt===""?"Times":Mt,this.pdf.setFont(Mt,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,Ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,Ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};p.prototype.setLineDash=function(se){this.lineDash=se},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Y.call(this,"fill",!1)},p.prototype.stroke=function(){Y.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(se,q){if(isNaN(se)||isNaN(q))throw ss.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(se,q));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(se,q)},p.prototype.closePath=function(){var se=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ki(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){se=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.lineTo=function(se,q){if(isNaN(se)||isNaN(q))throw ss.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(se,q));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},p.prototype.quadraticCurveTo=function(se,q,Z,ie){if(isNaN(Z)||isNaN(ie)||isNaN(se)||isNaN(q))throw ss.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new o(Z,ie)),ye=this.ctx.transform.applyToPoint(new o(se,q));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},p.prototype.bezierCurveTo=function(se,q,Z,ie,de,ye){if(isNaN(de)||isNaN(ye)||isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie))throw ss.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(de,ye)),Q=this.ctx.transform.applyToPoint(new o(se,q)),Ae=this.ctx.transform.applyToPoint(new o(Z,ie));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:Ae.x,y2:Ae.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.arc=function(se,q,Z,ie,de,ye){if(isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie)||isNaN(de))throw ss.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(se,q));se=he.x,q=he.y;var Q=this.ctx.transform.applyToPoint(new o(0,Z)),Ae=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(Q.x-Ae.x,2)+Math.pow(Q.y-Ae.y,2))}Math.abs(de-ie)>=2*Math.PI&&(ie=0,de=2*Math.PI),this.path.push({type:"arc",x:se,y:q,radius:Z,startAngle:ie,endAngle:de,counterclockwise:ye})},p.prototype.arcTo=function(se,q,Z,ie,de){throw new Error("arcTo not implemented.")},p.prototype.rect=function(se,q,Z,ie){if(isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie))throw ss.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(se,q),this.lineTo(se+Z,q),this.lineTo(se+Z,q+ie),this.lineTo(se,q+ie),this.lineTo(se,q),this.lineTo(se+Z,q),this.lineTo(se,q)},p.prototype.fillRect=function(se,q,Z,ie){if(isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie))throw ss.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(se,q,Z,ie),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},p.prototype.strokeRect=function(se,q,Z,ie){if(isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie))throw ss.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(se,q,Z,ie),this.stroke())},p.prototype.clearRect=function(se,q,Z,ie){if(isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie))throw ss.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(se,q,Z,ie))},p.prototype.save=function(se){se=typeof se!="boolean"||se;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),se){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},p.prototype.restore=function(se){se=typeof se!="boolean"||se;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),se&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(se){var q,Z,ie,de;if(se.isCanvasGradient===!0&&(se=se.getColor()),!se)return{r:0,g:0,b:0,a:0,style:se};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(se))q=0,Z=0,ie=0,de=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(se);if(ye!==null)q=parseInt(ye[1]),Z=parseInt(ye[2]),ie=parseInt(ye[3]),de=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(se))!==null)q=parseInt(ye[1]),Z=parseInt(ye[2]),ie=parseInt(ye[3]),de=parseFloat(ye[4]);else{if(de=1,typeof se=="string"&&se.charAt(0)!=="#"){var he=new qE(se);se=he.ok?he.toHex():"#000000"}se.length===4?(q=se.substring(1,2),q+=q,Z=se.substring(2,3),Z+=Z,ie=se.substring(3,4),ie+=ie):(q=se.substring(1,3),Z=se.substring(3,5),ie=se.substring(5,7)),q=parseInt(q,16),Z=parseInt(Z,16),ie=parseInt(ie,16)}}return{r:q,g:Z,b:ie,a:de,style:se}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(se,q,Z,ie){if(isNaN(q)||isNaN(Z)||typeof se!="string")throw ss.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!m.call(this)){var de=K(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;B.call(this,{text:se,x:q,y:Z,scale:ye,angle:de,align:this.textAlign,maxWidth:ie})}},p.prototype.strokeText=function(se,q,Z,ie){if(isNaN(q)||isNaN(Z)||typeof se!="string")throw ss.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ie=isNaN(ie)?void 0:ie;var de=K(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;B.call(this,{text:se,x:q,y:Z,scale:ye,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:ie})}},p.prototype.measureText=function(se){if(typeof se!="string")throw ss.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Z=this.pdf.internal.scaleFactor,ie=q.internal.getFontSize(),de=q.getStringUnitWidth(se)*ie/q.internal.scaleFactor,ye=function(he){var Q=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this};return new ye({width:de*=Math.round(96*Z/72*1e4)/1e4})},p.prototype.scale=function(se,q){if(isNaN(se)||isNaN(q))throw ss.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(se,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.rotate=function(se){if(isNaN(se))throw ss.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(se),Math.sin(se),-Math.sin(se),Math.cos(se),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},p.prototype.translate=function(se,q){if(isNaN(se)||isNaN(q))throw ss.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,se,q);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.transform=function(se,q,Z,ie,de,ye){if(isNaN(se)||isNaN(q)||isNaN(Z)||isNaN(ie)||isNaN(de)||isNaN(ye))throw ss.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(se,q,Z,ie,de,ye);this.ctx.transform=this.ctx.transform.multiply(he)},p.prototype.setTransform=function(se,q,Z,ie,de,ye){se=isNaN(se)?1:se,q=isNaN(q)?0:q,Z=isNaN(Z)?0:Z,ie=isNaN(ie)?1:ie,de=isNaN(de)?0:de,ye=isNaN(ye)?0:ye,this.ctx.transform=new l(se,q,Z,ie,de,ye)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(se,q,Z,ie,de,ye,he,Q,Ae){var De=this.pdf.getImageProperties(se),Ke=1,fe=1,ee=1,oe=1;ie!==void 0&&Q!==void 0&&(ee=Q/ie,oe=Ae/de,Ke=De.width/ie*Q/ie,fe=De.height/de*Ae/de),ye===void 0&&(ye=q,he=Z,q=0,Z=0),ie!==void 0&&Q===void 0&&(Q=ie,Ae=de),ie===void 0&&Q===void 0&&(Q=De.width,Ae=De.height);for(var le,ze=this.ctx.transform.decompose(),$e=K(ze.rotate.shx),Je=new l,Me=(Je=(Je=(Je=Je.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new a(ye-q*ee,he-Z*oe,ie*Ke,de*fe)),me=k.call(this,Me),qe=[],ct=0;ct<me.length;ct+=1)qe.indexOf(me[ct])===-1&&qe.push(me[ct]);if(z(qe),this.autoPaging)for(var ft=qe[0],Mt=qe[qe.length-1],it=ft;it<Mt+1;it++){this.pdf.setPage(it);var jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],hn=it===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=it===1?0:Ze+(it-2)*lt;if(this.ctx.clip_path.length!==0){var $t=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(le,this.posX+this.margin[3],-rt+hn+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=$t}var Qt=JSON.parse(JSON.stringify(Me));Qt=A([Qt],this.posX+this.margin[3],-rt+hn+this.ctx.prevPageLastElemOffset)[0];var Pn=(it>ft||it<Mt)&&E.call(this);Pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,lt,null).clip().discardPath()),this.pdf.addImage(se,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,$e),Pn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(se,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,$e)};var k=function(se,q,Z){var ie=[];q=q||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(se.type){default:case"mt":case"lt":ie.push(Math.floor((se.y+de)/Z)+1);break;case"arc":ie.push(Math.floor((se.y+de-se.radius)/Z)+1),ie.push(Math.floor((se.y+de+se.radius)/Z)+1);break;case"qct":var ye=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,se.x1,se.y1,se.x,se.y);ie.push(Math.floor((ye.y+de)/Z)+1),ie.push(Math.floor((ye.y+ye.h+de)/Z)+1);break;case"bct":var he=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,se.x1,se.y1,se.x2,se.y2,se.x,se.y);ie.push(Math.floor((he.y+de)/Z)+1),ie.push(Math.floor((he.y+he.h+de)/Z)+1);break;case"rect":ie.push(Math.floor((se.y+de)/Z)+1),ie.push(Math.floor((se.y+se.h+de)/Z)+1)}for(var Q=0;Q<ie.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Q];)T.call(this);return ie},T=function(){var se=this.fillStyle,q=this.strokeStyle,Z=this.font,ie=this.lineCap,de=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=se,this.strokeStyle=q,this.font=Z,this.lineCap=ie,this.lineWidth=de,this.lineJoin=ye},A=function(se,q,Z){for(var ie=0;ie<se.length;ie++)switch(se[ie].type){case"bct":se[ie].x2+=q,se[ie].y2+=Z;case"qct":se[ie].x1+=q,se[ie].y1+=Z;case"mt":case"lt":case"arc":default:se[ie].x+=q,se[ie].y+=Z}return se},z=function(se){return se.sort(function(q,Z){return q-Z})},Y=function(se,q){for(var Z,ie,de=this.fillStyle,ye=this.strokeStyle,he=this.lineCap,Q=this.lineWidth,Ae=Math.abs(Q*this.ctx.transform.scaleX),De=this.lineJoin,Ke=JSON.parse(JSON.stringify(this.path)),fe=JSON.parse(JSON.stringify(this.path)),ee=[],oe=0;oe<fe.length;oe++)if(fe[oe].x!==void 0)for(var le=k.call(this,fe[oe]),ze=0;ze<le.length;ze+=1)ee.indexOf(le[ze])===-1&&ee.push(le[ze]);for(var $e=0;$e<ee.length;$e++)for(;this.pdf.internal.getNumberOfPages()<ee[$e];)T.call(this);if(z(ee),this.autoPaging)for(var Je=ee[0],Me=ee[ee.length-1],me=Je;me<Me+1;me++){this.pdf.setPage(me),this.fillStyle=de,this.strokeStyle=ye,this.lineCap=he,this.lineWidth=Ae,this.lineJoin=De;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=me===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=me===1?0:ft+(me-2)*Mt;if(this.ctx.clip_path.length!==0){var jt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Z,this.posX+this.margin[3],-it+ct+this.ctx.prevPageLastElemOffset),ne.call(this,se,!0),this.path=jt}if(ie=JSON.parse(JSON.stringify(Ke)),this.path=A(ie,this.posX+this.margin[3],-it+ct+this.ctx.prevPageLastElemOffset),q===!1||me===0){var hn=(me>Je||me<Me)&&E.call(this);hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Mt,null).clip().discardPath()),ne.call(this,se,q),hn&&this.pdf.restoreGraphicsState()}this.lineWidth=Q}else this.lineWidth=Ae,ne.call(this,se,q),this.lineWidth=Q;this.path=Ke},ne=function(se,q){if((se!=="stroke"||q||!x.call(this))&&(se==="stroke"||q||!m.call(this))){for(var Z,ie,de=[],ye=this.path,he=0;he<ye.length;he++){var Q=ye[he];switch(Q.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Q,deltas:[],abs:[]});break;case"lt":var Ae=de.length;if(ye[he-1]&&!isNaN(ye[he-1].x)&&(Z=[Q.x-ye[he-1].x,Q.y-ye[he-1].y],Ae>0)){for(;Ae>=0;Ae--)if(de[Ae-1].close!==!0&&de[Ae-1].begin!==!0){de[Ae-1].deltas.push(Z),de[Ae-1].abs.push(Q);break}}break;case"bct":Z=[Q.x1-ye[he-1].x,Q.y1-ye[he-1].y,Q.x2-ye[he-1].x,Q.y2-ye[he-1].y,Q.x-ye[he-1].x,Q.y-ye[he-1].y],de[de.length-1].deltas.push(Z);break;case"qct":var De=ye[he-1].x+2/3*(Q.x1-ye[he-1].x),Ke=ye[he-1].y+2/3*(Q.y1-ye[he-1].y),fe=Q.x+2/3*(Q.x1-Q.x),ee=Q.y+2/3*(Q.y1-Q.y),oe=Q.x,le=Q.y;Z=[De-ye[he-1].x,Ke-ye[he-1].y,fe-ye[he-1].x,ee-ye[he-1].y,oe-ye[he-1].x,le-ye[he-1].y],de[de.length-1].deltas.push(Z);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Q)}}ie=q?null:se==="stroke"?"stroke":"fill";for(var ze=!1,$e=0;$e<de.length;$e++)if(de[$e].arc)for(var Je=de[$e].abs,Me=0;Me<Je.length;Me++){var me=Je[Me];me.type==="arc"?O.call(this,me.x,me.y,me.radius,me.startAngle,me.endAngle,me.counterclockwise,void 0,q,!ze):H.call(this,me.x,me.y),ze=!0}else if(de[$e].close===!0)this.pdf.internal.out("h"),ze=!1;else if(de[$e].begin!==!0){var qe=de[$e].start.x,ct=de[$e].start.y;$.call(this,de[$e].deltas,qe,ct),ze=!0}ie&&j.call(this,ie),q&&J.call(this)}},ge=function(se){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return se-Z;case"top":return se+q-Z;case"hanging":return se+q-2*Z;case"middle":return se+q/2-Z;case"ideographic":return se;case"alphabetic":default:return se}},pe=function(se){return se+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var se=function(){};return se.colorStops=[],se.addColorStop=function(q,Z){this.colorStops.push([q,Z])},se.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},se.isCanvasGradient=!0,se},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(se,q,Z,ie,de,ye,he,Q,Ae){for(var De=I.call(this,Z,ie,de,ye),Ke=0;Ke<De.length;Ke++){var fe=De[Ke];Ke===0&&(Ae?V.call(this,fe.x1+se,fe.y1+q):H.call(this,fe.x1+se,fe.y1+q)),R.call(this,se,q,fe.x2,fe.y2,fe.x3,fe.y3,fe.x4,fe.y4)}Q?J.call(this):j.call(this,he)},j=function(se){switch(se){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},V=function(se,q){this.pdf.internal.out(n(se)+" "+r(q)+" m")},B=function(se){var q;switch(se.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Z=this.pdf.getTextDimensions(se.text),ie=ge.call(this,se.y),de=pe.call(this,ie)-Z.h,ye=this.ctx.transform.applyToPoint(new o(se.x,ie)),he=this.ctx.transform.decompose(),Q=new l;Q=(Q=(Q=Q.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Ae,De,Ke,fe=this.ctx.transform.applyToRectangle(new a(se.x,ie,Z.w,Z.h)),ee=Q.applyToRectangle(new a(se.x,de,Z.w,Z.h)),oe=k.call(this,ee),le=[],ze=0;ze<oe.length;ze+=1)le.indexOf(oe[ze])===-1&&le.push(oe[ze]);if(z(le),this.autoPaging)for(var $e=le[0],Je=le[le.length-1],Me=$e;Me<Je+1;Me++){this.pdf.setPage(Me);var me=Me===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],ft=ct-this.margin[0],Mt=this.pdf.internal.pageSize.width-this.margin[1],it=Mt-this.margin[3],jt=Me===1?0:qe+(Me-2)*ft;if(this.ctx.clip_path.length!==0){var hn=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Ae,this.posX+this.margin[3],-1*jt+me),ne.call(this,"fill",!0),this.path=hn}var Ze=A([JSON.parse(JSON.stringify(ee))],this.posX+this.margin[3],-jt+me+this.ctx.prevPageLastElemOffset)[0];se.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*se.scale),Ke=this.lineWidth,this.lineWidth=Ke*se.scale);var lt=this.autoPaging!=="text";if(lt||Ze.y+Ze.h<=ct){if(lt||Ze.y>=me&&Ze.x<=Mt){var rt=lt?se.text:this.pdf.splitTextToSize(se.text,se.maxWidth||Mt-Ze.x)[0],$t=A([JSON.parse(JSON.stringify(fe))],this.posX+this.margin[3],-jt+me+this.ctx.prevPageLastElemOffset)[0],Qt=lt&&(Me>$e||Me<Je)&&E.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,ft,null).clip().discardPath()),this.pdf.text(rt,$t.x,$t.y,{angle:se.angle,align:q,renderingMode:se.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else Ze.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-Ze.y);se.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Ke)}else se.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*se.scale),Ke=this.lineWidth,this.lineWidth=Ke*se.scale),this.pdf.text(se.text,ye.x+this.posX,ye.y+this.posY,{angle:se.angle,align:q,renderingMode:se.renderingMode,maxWidth:se.maxWidth}),se.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Ke)},H=function(se,q,Z,ie){Z=Z||0,ie=ie||0,this.pdf.internal.out(n(se+Z)+" "+r(q+ie)+" l")},$=function(se,q,Z){return this.pdf.lines(se,q,Z,null,null)},R=function(se,q,Z,ie,de,ye,he,Q){this.pdf.internal.out([e(i(Z+se)),e(s(ie+q)),e(i(de+se)),e(s(ye+q)),e(i(he+se)),e(s(Q+q)),"c"].join(" "))},I=function(se,q,Z,ie){for(var de=2*Math.PI,ye=Math.PI/2;q>Z;)q-=de;var he=Math.abs(Z-q);he<de&&ie&&(he=de-he);for(var Q=[],Ae=ie?-1:1,De=q;he>1e-5;){var Ke=De+Ae*Math.min(he,ye);Q.push(X.call(this,se,De,Ke)),he-=Math.abs(Ke-De),De=Ke}return Q},X=function(se,q,Z){var ie=(Z-q)/2,de=se*Math.cos(ie),ye=se*Math.sin(ie),he=de,Q=-ye,Ae=he*he+Q*Q,De=Ae+he*de+Q*ye,Ke=4/3*(Math.sqrt(2*Ae*De)-De)/(he*ye-Q*de),fe=he-Ke*Q,ee=Q+Ke*he,oe=fe,le=-ee,ze=ie+q,$e=Math.cos(ze),Je=Math.sin(ze);return{x1:se*Math.cos(q),y1:se*Math.sin(q),x2:fe*$e-ee*Je,y2:fe*Je+ee*$e,x3:oe*$e-le*Je,y3:oe*Je+le*$e,x4:se*Math.cos(Z),y4:se*Math.sin(Z)}},K=function(se){return 180*se/Math.PI},_e=function(se,q,Z,ie,de,ye){var he=se+.5*(Z-se),Q=q+.5*(ie-q),Ae=de+.5*(Z-de),De=ye+.5*(ie-ye),Ke=Math.min(se,de,he,Ae),fe=Math.max(se,de,he,Ae),ee=Math.min(q,ye,Q,De),oe=Math.max(q,ye,Q,De);return new a(Ke,ee,fe-Ke,oe-ee)},ve=function(se,q,Z,ie,de,ye,he,Q){var Ae,De,Ke,fe,ee,oe,le,ze,$e,Je,Me,me,qe,ct,ft=Z-se,Mt=ie-q,it=de-Z,jt=ye-ie,hn=he-de,Ze=Q-ye;for(De=0;De<41;De++)$e=(le=(Ke=se+(Ae=De/40)*ft)+Ae*((ee=Z+Ae*it)-Ke))+Ae*(ee+Ae*(de+Ae*hn-ee)-le),Je=(ze=(fe=q+Ae*Mt)+Ae*((oe=ie+Ae*jt)-fe))+Ae*(oe+Ae*(ye+Ae*Ze-oe)-ze),De==0?(Me=$e,me=Je,qe=$e,ct=Je):(Me=Math.min(Me,$e),me=Math.min(me,Je),qe=Math.max(qe,$e),ct=Math.max(ct,Je));return new a(Math.round(Me),Math.round(me),Math.round(qe-Me),Math.round(ct-me))},Ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var se,q,Z=(se=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:se,lineDashOffset:q}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Cr.API),function(t){var e=function(s){var o,a,l,c,h,p,v,m,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(E=h%85))/85)-(x=h%85))/85)-(m=h%85))/85)-(v=h%85))/85)%85,a.push(p+33,v+33,m+33,x+33,E+33)):a.push(122);return function(k,T){for(var A=T;A>0;A--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,h,p=String,v="length",m=255,x="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],c=0,h=(s+=o="uuuuu"[E](s[v]%5||5))[v];h>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(T,A){for(var z=A;z>0;z--)T.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Eb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Cr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var p=new XMLHttpRequest,v=0,m=function(x){var E=x.length,k=[],T=String.fromCharCode;for(v=0;v<E;v+=1)k.push(T(255&x.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Cr.API),function(t){function e(){return(Er.html2canvas?Promise.resolve(Er.html2canvas):kd(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Er.DOMPurify?Promise.resolve(Er.DOMPurify):kd(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ki(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,h){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var m=c[v],x=m.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Cr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(c,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Cr.getPageSize=function(o,a,l){if(Ki(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var m,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/h,E=v[p][0]/h;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(m=E,E=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(m=E,E=x,x=m)}return{width:E,height:x,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Db):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Cr.API),Cr.API.addJS=function(t){return k5=t,this.internal.events.subscribe("postPutResources",function(){S0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(S0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),M5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){S0!==void 0&&M5!==void 0&&this.internal.out("/Names <</JavaScript "+S0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var p=n.internal.newObject();h.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Cr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},k=4;k<x;k+=2){if(k+=m,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}m=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return h}}(Cr.API);var Yf,C0,A5,T5,D5,zH=function(){var t,e,n;function r(s){var o,a,l,c,h,p,v,m,x,E,k,T,A,z;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var Y,ne;for(ne=[],Y=0;Y<4;++Y)ne.push(String.fromCharCode(this.data[this.pos++]));return ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*h/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,T=0;0<=o?T<o:T>o;0<=o?++T:--T)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(A=0;0<=E?A<E:A>E;0<=E?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,k.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(z=this.colorType)===4||z===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,v,m,x){var E,k,T,A,z,Y,ne,ge,pe,O,j,J,V,B,H,$,R,I,X,K,_e,ve=Math.ceil((c.width-p)/m),Ge=Math.ceil((c.height-v)/x),se=c.width==ve&&c.height==Ge;for(B=o*ve,J=se?a:new Uint8Array(B*Ge),Y=s.length,V=0,k=0;V<Ge&&l<Y;){switch(s[l++]){case 0:for(A=R=0;R<B;A=R+=1)J[k++]=s[l++];break;case 1:for(A=I=0;I<B;A=I+=1)E=s[l++],z=A<o?0:J[k-o],J[k++]=(E+z)%256;break;case 2:for(A=X=0;X<B;A=X+=1)E=s[l++],T=(A-A%o)/o,H=V&&J[(V-1)*B+T*o+A%o],J[k++]=(H+E)%256;break;case 3:for(A=K=0;K<B;A=K+=1)E=s[l++],T=(A-A%o)/o,z=A<o?0:J[k-o],H=V&&J[(V-1)*B+T*o+A%o],J[k++]=(E+Math.floor((z+H)/2))%256;break;case 4:for(A=_e=0;_e<B;A=_e+=1)E=s[l++],T=(A-A%o)/o,z=A<o?0:J[k-o],V===0?H=$=0:(H=J[(V-1)*B+T*o+A%o],$=T&&J[(V-1)*B+(T-1)*o+A%o]),ne=z+H-$,ge=Math.abs(ne-z),O=Math.abs(ne-H),j=Math.abs(ne-$),pe=ge<=O&&ge<=j?z:O<=j?H:$,J[k++]=(E+pe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!se){var q=((v+V*x)*c.width+p)*o,Z=V*B;for(A=0;A<ve;A+=1){for(var ie=0;ie<o;ie+=1)a[q++]=J[Z++];q+=(m-1)*o}}V++}}return s=yH(s),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,h,p,v,m;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=h[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,h,p,v,m,x,E,k,T;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,h=v=0,l===1)for(;h<x;)m=E?4*o[h/4]:v,k=p[m++],c[h++]=k,c[h++]=k,c[h++]=k,c[h++]=a?p[m++]:255,v=m;else for(;h<x;)m=E?4*o[h/4]:v,c[h++]=p[m++],c[h++]=p[m++],c[h++]=p[m++],c[h++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Er)==="[object Window]"){try{e=Er.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,h,p,v,m;if(this.animation){for(m=[],a=h=0,p=(v=this.animation.frames).length;h<p;a=++h)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,h,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,h=p.numPlays,(o=function(){var m,x;if(m=a++%c,x=l[m],v.renderFrame(s,m),c>1&&a/c<h)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function $H(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,h=[],p=0,v=null,m=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((V=t[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((V=t[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,Y=t[e++],ne=Y>>6&1,ge=1<<(7&Y)+1,pe=a,O=l,j=!1;Y>>7&&(j=!0,pe=e,O=ge,e+=3*ge);var J=e;for(e++;;){var V;if(!((V=t[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}h.push({x:k,y:T,width:A,height:z,has_local_palette:j,palette_offset:pe,palette_size:O,data_offset:J,data_length:e-J,transparent_index:v,interlaced:!!ne,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return x},this.frameInfo=function(B){if(B<0||B>=h.length)throw new Error("Frame index out of range.");return h[B]},this.decodeAndBlitFrameBGRA=function(B,H){var $=this.frameInfo(B),R=$.width*$.height,I=new Uint8Array(R);N5(t,$.data_offset,I,R);var X=$.palette_offset,K=$.transparent_index;K===null&&(K=256);var _e=$.width,ve=n-_e,Ge=_e,se=4*($.y*n+$.x),q=4*(($.y+$.height)*n+$.x),Z=se,ie=4*ve;$.interlaced===!0&&(ie+=4*n*7);for(var de=8,ye=0,he=I.length;ye<he;++ye){var Q=I[ye];if(Ge===0&&(Ge=_e,(Z+=ie)>=q&&(ie=4*ve+4*n*(de-1),Z=se+(_e+ve)*(de<<1),de>>=1)),Q===K)Z+=4;else{var Ae=t[X+3*Q],De=t[X+3*Q+1],Ke=t[X+3*Q+2];H[Z++]=Ke,H[Z++]=De,H[Z++]=Ae,H[Z++]=255}--Ge}},this.decodeAndBlitFrameRGBA=function(B,H){var $=this.frameInfo(B),R=$.width*$.height,I=new Uint8Array(R);N5(t,$.data_offset,I,R);var X=$.palette_offset,K=$.transparent_index;K===null&&(K=256);var _e=$.width,ve=n-_e,Ge=_e,se=4*($.y*n+$.x),q=4*(($.y+$.height)*n+$.x),Z=se,ie=4*ve;$.interlaced===!0&&(ie+=4*n*7);for(var de=8,ye=0,he=I.length;ye<he;++ye){var Q=I[ye];if(Ge===0&&(Ge=_e,(Z+=ie)>=q&&(ie=4*ve+4*n*(de-1),Z=se+(_e+ve)*(de<<1),de>>=1)),Q===K)Z+=4;else{var Ae=t[X+3*Q],De=t[X+3*Q+1],Ke=t[X+3*Q+2];H[Z++]=Ae,H[Z++]=De,H[Z++]=Ke,H[Z++]=255}--Ge}}}function N5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,h=0,p=0,v=0,m=t[e++],x=new Int32Array(4096),E=null;;){for(;h<16&&m!==0;)p|=t[e++]<<h,h+=8,m===1?m=t[e++]:--m;if(h<l)break;var k=p&c;if(p>>=l,h-=l,k!==s){if(k===o)break;for(var T=k<a?k:E,A=0,z=T;z>s;)z=x[z]>>8,++A;var Y=z;if(v+A+(T!==k?1:0)>r)return void ss.log("Warning, gif stream longer than expected.");n[v++]=Y;var ne=v+=A;for(T!==k&&(n[v++]=Y),z=T;A--;)z=x[z],n[--ne]=255&z,z>>=8;E!==null&&a<4096&&(x[a++]=E<<8|Y,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=k}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&ss.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function l2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),x=new Array(64),E=[],k=0,T=7,A=new Array(64),z=new Array(64),Y=new Array(64),ne=new Array(256),ge=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(se,q){for(var Z=0,ie=0,de=new Array,ye=1;ye<=16;ye++){for(var he=1;he<=se[ye];he++)de[q[ie]]=[],de[q[ie]][0]=Z,de[q[ie]][1]=ye,ie++,Z++;Z*=2}return de}function X(se){for(var q=se[0],Z=se[1]-1;Z>=0;)q&1<<Z&&(k|=1<<T),Z--,--T<0&&(k==255?(K(255),K(0)):K(k),T=7,k=0)}function K(se){E.push(se)}function _e(se){K(se>>8&255),K(255&se)}function ve(se,q,Z,ie,de){for(var ye,he=de[0],Q=de[240],Ae=function(Je,Me){var me,qe,ct,ft,Mt,it,jt,hn,Ze,lt,rt=0;for(Ze=0;Ze<8;++Ze){me=Je[rt],qe=Je[rt+1],ct=Je[rt+2],ft=Je[rt+3],Mt=Je[rt+4],it=Je[rt+5],jt=Je[rt+6];var $t=me+(hn=Je[rt+7]),Qt=me-hn,Pn=qe+jt,wn=qe-jt,xn=ct+it,$n=ct-it,en=ft+Mt,_n=ft-Mt,Cn=$t+en,qn=$t-en,nr=Pn+xn,rr=Pn-xn;Je[rt]=Cn+nr,Je[rt+4]=Cn-nr;var Jn=.707106781*(rr+qn);Je[rt+2]=qn+Jn,Je[rt+6]=qn-Jn;var Mr=.382683433*((Cn=_n+$n)-(rr=wn+Qt)),as=.5411961*Cn+Mr,ji=1.306562965*rr+Mr,ro=.707106781*(nr=$n+wn),Cs=Qt+ro,ot=Qt-ro;Je[rt+5]=ot+as,Je[rt+3]=ot-as,Je[rt+1]=Cs+ji,Je[rt+7]=Cs-ji,rt+=8}for(rt=0,Ze=0;Ze<8;++Ze){me=Je[rt],qe=Je[rt+8],ct=Je[rt+16],ft=Je[rt+24],Mt=Je[rt+32],it=Je[rt+40],jt=Je[rt+48];var nt=me+(hn=Je[rt+56]),Ht=me-hn,kn=qe+jt,tn=qe-jt,qt=ct+it,Wt=ct-it,ir=ft+Mt,St=ft-Mt,gn=nt+ir,Qn=nt-ir,ar=kn+qt,ur=kn-qt;Je[rt]=gn+ar,Je[rt+32]=gn-ar;var vn=.707106781*(ur+Qn);Je[rt+16]=Qn+vn,Je[rt+48]=Qn-vn;var cn=.382683433*((gn=St+Wt)-(ur=tn+Ht)),ri=.5411961*gn+cn,Li=1.306562965*ur+cn,zi=.707106781*(ar=Wt+tn),Fr=Ht+zi,cr=Ht-zi;Je[rt+40]=cr+ri,Je[rt+24]=cr-ri,Je[rt+8]=Fr+Li,Je[rt+56]=Fr-Li,rt++}for(Ze=0;Ze<64;++Ze)lt=Je[Ze]*Me[Ze],m[Ze]=lt>0?lt+.5|0:lt-.5|0;return m}(se,q),De=0;De<64;++De)x[pe[De]]=Ae[De];var Ke=x[0]-Z;Z=x[0],Ke==0?X(ie[0]):(X(ie[v[ye=32767+Ke]]),X(p[ye]));for(var fe=63;fe>0&&x[fe]==0;)fe--;if(fe==0)return X(he),Z;for(var ee,oe=1;oe<=fe;){for(var le=oe;x[oe]==0&&oe<=fe;)++oe;var ze=oe-le;if(ze>=16){ee=ze>>4;for(var $e=1;$e<=ee;++$e)X(Q);ze&=15}ye=32767+x[oe],X(de[(ze<<4)+v[ye]]),X(p[ye]),oe++}return fe!=63&&X(he),Z}function Ge(se){se=Math.min(Math.max(se,1),100),s!=se&&(function(q){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var de=o((Z[ie]*q+50)/100);de=Math.min(Math.max(de,1),255),a[pe[ie]]=de}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var Q=o((ye[he]*q+50)/100);Q=Math.min(Math.max(Q,1),255),l[pe[he]]=Q}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,Ke=0;Ke<8;Ke++)for(var fe=0;fe<8;fe++)c[De]=1/(a[pe[De]]*Ae[Ke]*Ae[fe]*8),h[De]=1/(l[pe[De]]*Ae[Ke]*Ae[fe]*8),De++}(se<50?Math.floor(5e3/se):Math.floor(200-2*se)),s=se)}this.encode=function(se,q){q&&Ge(q),E=new Array,k=0,T=7,_e(65496),_e(65504),_e(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),_e(1),_e(1),K(0),K(0),function(){_e(65499),_e(132),K(0);for(var qe=0;qe<64;qe++)K(a[qe]);K(1);for(var ct=0;ct<64;ct++)K(l[ct])}(),function(qe,ct){_e(65472),_e(17),K(8),_e(ct),_e(qe),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(se.width,se.height),function(){_e(65476),_e(418),K(0);for(var qe=0;qe<16;qe++)K(O[qe+1]);for(var ct=0;ct<=11;ct++)K(j[ct]);K(16);for(var ft=0;ft<16;ft++)K(J[ft+1]);for(var Mt=0;Mt<=161;Mt++)K(V[Mt]);K(1);for(var it=0;it<16;it++)K(B[it+1]);for(var jt=0;jt<=11;jt++)K(H[jt]);K(17);for(var hn=0;hn<16;hn++)K($[hn+1]);for(var Ze=0;Ze<=161;Ze++)K(R[Ze])}(),_e(65498),_e(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var Z=0,ie=0,de=0;k=0,T=7,this.encode.displayName="_encode_";for(var ye,he,Q,Ae,De,Ke,fe,ee,oe,le=se.data,ze=se.width,$e=se.height,Je=4*ze,Me=0;Me<$e;){for(ye=0;ye<Je;){for(De=Je*Me+ye,fe=-1,ee=0,oe=0;oe<64;oe++)Ke=De+(ee=oe>>3)*Je+(fe=4*(7&oe)),Me+ee>=$e&&(Ke-=Je*(Me+1+ee-$e)),ye+fe>=Je&&(Ke-=ye+fe-Je+4),he=le[Ke++],Q=le[Ke++],Ae=le[Ke++],A[oe]=(ge[he]+ge[Q+256>>0]+ge[Ae+512>>0]>>16)-128,z[oe]=(ge[he+768>>0]+ge[Q+1024>>0]+ge[Ae+1280>>0]>>16)-128,Y[oe]=(ge[he+1280>>0]+ge[Q+1536>>0]+ge[Ae+1792>>0]>>16)-128;Z=ve(A,c,Z,e,r),ie=ve(z,h,ie,n,i),de=ve(Y,h,de,n,i),ye+=32}Me+=8}if(T>=0){var me=[];me[1]=T+1,me[0]=(1<<T+1)-1,X(me)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var se=String.fromCharCode,q=0;q<256;q++)ne[q]=se(q)}(),e=I(O,j),n=I(B,H),r=I(J,V),i=I($,R),function(){for(var se=1,q=2,Z=1;Z<=15;Z++){for(var ie=se;ie<q;ie++)v[32767+ie]=Z,p[32767+ie]=[],p[32767+ie][1]=Z,p[32767+ie][0]=ie;for(var de=-(q-1);de<=-se;de++)v[32767+de]=Z,p[32767+de]=[],p[32767+de][1]=Z,p[32767+de][0]=q-1+de;se<<=1,q<<=1}}(),function(){for(var se=0;se<256;se++)ge[se]=19595*se,ge[se+256>>0]=38470*se,ge[se+512>>0]=7471*se+32768,ge[se+768>>0]=-11059*se,ge[se+1024>>0]=-21709*se,ge[se+1280>>0]=32768*se+8421375,ge[se+1536>>0]=-27439*se,ge[se+1792>>0]=-5329*se}(),Ge(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function uc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function O5(t){function e(O){if(!O)throw Error("assert :P")}function n(O,j,J){for(var V=0;4>V;V++)if(O[j+V]!=J.charCodeAt(V))return!0;return!1}function r(O,j,J,V,B){for(var H=0;H<B;H++)O[j+H]=J[V+H]}function i(O,j,J,V){for(var B=0;B<V;B++)O[j+B]=J}function s(O){return new Int32Array(O)}function o(O,j){for(var J=[],V=0;V<O;V++)J.push(new j);return J}function a(O,j){var J=[];return function V(B,H,$){for(var R=$[H],I=0;I<R&&(B.push($.length>H+1?[]:new j),!($.length<H+1));I++)V(B[I],H+1,$)}(J,0,O),J}var l=function(){var O=this;function j(w,D){for(var W=1<<D-1>>>0;w&W;)W>>>=1;return W?(w&W-1)+W:w}function J(w,D,W,ce,Le){e(!(ce%W));do w[D+(ce-=W)]=Le;while(0<ce)}function V(w,D,W,ce,Le){if(e(2328>=Le),512>=Le)var Pe=s(512);else if((Pe=s(Le))==null)return 0;return function(Te,Oe,Re,Ye,mt,Rt){var Ft,Et,Xt=Oe,Yt=1<<Re,vt=s(16),wt=s(16);for(e(mt!=0),e(Ye!=null),e(Te!=null),e(0<Re),Et=0;Et<mt;++Et){if(15<Ye[Et])return 0;++vt[Ye[Et]]}if(vt[0]==mt)return 0;for(wt[1]=0,Ft=1;15>Ft;++Ft){if(vt[Ft]>1<<Ft)return 0;wt[Ft+1]=wt[Ft]+vt[Ft]}for(Et=0;Et<mt;++Et)Ft=Ye[Et],0<Ye[Et]&&(Rt[wt[Ft]++]=Et);if(wt[15]==1)return(Ye=new B).g=0,Ye.value=Rt[0],J(Te,Xt,1,Yt,Ye),Yt;var rn,fn=-1,sn=Yt-1,Tn=0,Mn=1,Kn=1,d=1<<Re;for(Et=0,Ft=1,mt=2;Ft<=Re;++Ft,mt<<=1){if(Mn+=Kn<<=1,0>(Kn-=vt[Ft]))return 0;for(;0<vt[Ft];--vt[Ft])(Ye=new B).g=Ft,Ye.value=Rt[Et++],J(Te,Xt+Tn,mt,d,Ye),Tn=j(Tn,Ft)}for(Ft=Re+1,mt=2;15>=Ft;++Ft,mt<<=1){if(Mn+=Kn<<=1,0>(Kn-=vt[Ft]))return 0;for(;0<vt[Ft];--vt[Ft]){if(Ye=new B,(Tn&sn)!=fn){for(Xt+=d,rn=1<<(fn=Ft)-Re;15>fn&&!(0>=(rn-=vt[fn]));)++fn,rn<<=1;Yt+=d=1<<(rn=fn-Re),Te[Oe+(fn=Tn&sn)].g=rn+Re,Te[Oe+fn].value=Xt-Oe-fn}Ye.g=Ft-Re,Ye.value=Rt[Et++],J(Te,Xt+(Tn>>Re),mt,d,Ye),Tn=j(Tn,Ft)}}return Mn!=2*wt[15]-1?0:Yt}(w,D,W,ce,Le,Pe)}function B(){this.value=this.g=0}function H(){this.value=this.g=0}function $(){this.G=o(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(cs,H)}function R(w,D,W,ce){e(w!=null),e(D!=null),e(2147483648>ce),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=D,w.pa=W,w.Jd=D,w.Yc=W+ce,w.Zc=4<=ce?W+ce-4+1:W,ye(w)}function I(w,D){for(var W=0;0<D--;)W|=Q(w,128)<<D;return W}function X(w,D){var W=I(w,D);return he(w)?-W:W}function K(w,D,W,ce){var Le,Pe=0;for(e(w!=null),e(D!=null),e(4294967288>ce),w.Sb=ce,w.Ra=0,w.u=0,w.h=0,4<ce&&(ce=4),Le=0;Le<ce;++Le)Pe+=D[W+Le]<<8*Le;w.Ra=Pe,w.bb=ce,w.oa=D,w.pa=W}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<_o-8>>>0,++w.bb,w.u-=8;Z(w)&&(w.h=1,w.u=0)}function ve(w,D){if(e(0<=D),!w.h&&D<=Fo){var W=q(w)&ma[D];return w.u+=D,_e(w),W}return w.h=1,w.u=0}function Ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(w){return w.Ra>>>(w.u&_o-1)>>>0}function Z(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>_o}function ie(w,D){w.u=D,w.h=Z(w)}function de(w){w.u>=Al&&(e(w.u>=Al),_e(w))}function ye(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function he(w){return I(w,1)}function Q(w,D){var W=w.Ca;0>w.b&&ye(w);var ce=w.b,Le=W*D>>>8,Pe=(w.I>>>ce>Le)+0;for(Pe?(W-=Le,w.I-=Le+1<<ce>>>0):W=Le+1,ce=W,Le=0;256<=ce;)Le+=8,ce>>=8;return ce=7^Le+Vs[ce],w.b-=ce,w.Ca=(W<<ce)-1,Pe}function Ae(w,D,W){w[D+0]=W>>24&255,w[D+1]=W>>16&255,w[D+2]=W>>8&255,w[D+3]=W>>0&255}function De(w,D){return w[D+0]<<0|w[D+1]<<8}function Ke(w,D){return De(w,D)|w[D+2]<<16}function fe(w,D){return De(w,D)|De(w,D+2)<<16}function ee(w,D){var W=1<<D;return e(w!=null),e(0<D),w.X=s(W),w.X==null?0:(w.Mb=32-D,w.Xa=D,1)}function oe(w,D){e(w!=null),e(D!=null),e(w.Xa==D.Xa),r(D.X,0,w.X,0,1<<D.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function ze(w,D,W,ce){e(W!=null),e(ce!=null);var Le=W[0],Pe=ce[0];return Le==0&&(Le=(w*Pe+D/2)/D),Pe==0&&(Pe=(D*Le+w/2)/w),0>=Le||0>=Pe?0:(W[0]=Le,ce[0]=Pe,1)}function $e(w,D){return w+(1<<D)-1>>>D}function Je(w,D){return((4278255360&w)+(4278255360&D)>>>0&4278255360)+((16711935&w)+(16711935&D)>>>0&16711935)>>>0}function Me(w,D){O[D]=function(W,ce,Le,Pe,Te,Oe,Re){var Ye;for(Ye=0;Ye<Te;++Ye){var mt=O[w](Oe[Re+Ye-1],Le,Pe+Ye);Oe[Re+Ye]=Je(W[ce+Ye],mt)}}}function me(){this.ud=this.hd=this.jd=0}function qe(w,D){return((4278124286&(w^D))>>>1)+(w&D)>>>0}function ct(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function ft(w,D){return ct(w+(w-D+.5>>1))}function Mt(w,D,W){return Math.abs(D-W)-Math.abs(w-W)}function it(w,D,W,ce,Le,Pe,Te){for(ce=Pe[Te-1],W=0;W<Le;++W)Pe[Te+W]=ce=Je(w[D+W],ce)}function jt(w,D,W,ce,Le){var Pe;for(Pe=0;Pe<W;++Pe){var Te=w[D+Pe],Oe=Te>>8&255,Re=16711935&(Re=(Re=16711935&Te)+((Oe<<16)+Oe));ce[Le+Pe]=(4278255360&Te)+Re>>>0}}function hn(w,D){D.jd=w>>0&255,D.hd=w>>8&255,D.ud=w>>16&255}function Ze(w,D,W,ce,Le,Pe){var Te;for(Te=0;Te<ce;++Te){var Oe=D[W+Te],Re=Oe>>>8,Ye=Oe,mt=255&(mt=(mt=Oe>>>16)+((w.jd<<24>>24)*(Re<<24>>24)>>>5));Ye=255&(Ye=(Ye=Ye+((w.hd<<24>>24)*(Re<<24>>24)>>>5))+((w.ud<<24>>24)*(mt<<24>>24)>>>5)),Le[Pe+Te]=(4278255360&Oe)+(mt<<16)+Ye}}function lt(w,D,W,ce,Le){O[D]=function(Pe,Te,Oe,Re,Ye,mt,Rt,Ft,Et){for(Re=Rt;Re<Ft;++Re)for(Rt=0;Rt<Et;++Rt)Ye[mt++]=Le(Oe[ce(Pe[Te++])])},O[w]=function(Pe,Te,Oe,Re,Ye,mt,Rt){var Ft=8>>Pe.b,Et=Pe.Ea,Xt=Pe.K[0],Yt=Pe.w;if(8>Ft)for(Pe=(1<<Pe.b)-1,Yt=(1<<Ft)-1;Te<Oe;++Te){var vt,wt=0;for(vt=0;vt<Et;++vt)vt&Pe||(wt=ce(Re[Ye++])),mt[Rt++]=Le(Xt[wt&Yt]),wt>>=Ft}else O["VP8LMapColor"+W](Re,Ye,Xt,Yt,mt,Rt,Te,Oe,Et)}}function rt(w,D,W,ce,Le){for(W=D+W;D<W;){var Pe=w[D++];ce[Le++]=Pe>>16&255,ce[Le++]=Pe>>8&255,ce[Le++]=Pe>>0&255}}function $t(w,D,W,ce,Le){for(W=D+W;D<W;){var Pe=w[D++];ce[Le++]=Pe>>16&255,ce[Le++]=Pe>>8&255,ce[Le++]=Pe>>0&255,ce[Le++]=Pe>>24&255}}function Qt(w,D,W,ce,Le){for(W=D+W;D<W;){var Pe=(Te=w[D++])>>16&240|Te>>12&15,Te=Te>>0&240|Te>>28&15;ce[Le++]=Pe,ce[Le++]=Te}}function Pn(w,D,W,ce,Le){for(W=D+W;D<W;){var Pe=(Te=w[D++])>>16&248|Te>>13&7,Te=Te>>5&224|Te>>3&31;ce[Le++]=Pe,ce[Le++]=Te}}function wn(w,D,W,ce,Le){for(W=D+W;D<W;){var Pe=w[D++];ce[Le++]=Pe>>0&255,ce[Le++]=Pe>>8&255,ce[Le++]=Pe>>16&255}}function xn(w,D,W,ce,Le,Pe){if(Pe==0)for(W=D+W;D<W;)Ae(ce,((Pe=w[D++])[0]>>24|Pe[1]>>8&65280|Pe[2]<<8&16711680|Pe[3]<<24)>>>0),Le+=32;else r(ce,Le,w,D,W)}function $n(w,D){O[D][0]=O[w+"0"],O[D][1]=O[w+"1"],O[D][2]=O[w+"2"],O[D][3]=O[w+"3"],O[D][4]=O[w+"4"],O[D][5]=O[w+"5"],O[D][6]=O[w+"6"],O[D][7]=O[w+"7"],O[D][8]=O[w+"8"],O[D][9]=O[w+"9"],O[D][10]=O[w+"10"],O[D][11]=O[w+"11"],O[D][12]=O[w+"12"],O[D][13]=O[w+"13"],O[D][14]=O[w+"0"],O[D][15]=O[w+"0"]}function en(w){return w==As||w==Ts||w==aa||w==u}function _n(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _n,this.f.kb=new Cn,this.sd=null}function nr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Jn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Mr(w,D){var W=w.T,ce=D.ba.f.RGBA,Le=ce.eb,Pe=ce.fb+w.ka*ce.A,Te=Ys[D.ba.S],Oe=w.y,Re=w.O,Ye=w.f,mt=w.N,Rt=w.ea,Ft=w.W,Et=D.cc,Xt=D.dc,Yt=D.Mc,vt=D.Nc,wt=w.ka,rn=w.ka+w.T,fn=w.U,sn=fn+1>>1;for(wt==0?Te(Oe,Re,null,null,Ye,mt,Rt,Ft,Ye,mt,Rt,Ft,Le,Pe,null,null,fn):(Te(D.ec,D.fc,Oe,Re,Et,Xt,Yt,vt,Ye,mt,Rt,Ft,Le,Pe-ce.A,Le,Pe,fn),++W);wt+2<rn;wt+=2)Et=Ye,Xt=mt,Yt=Rt,vt=Ft,mt+=w.Rc,Ft+=w.Rc,Pe+=2*ce.A,Te(Oe,(Re+=2*w.fa)-w.fa,Oe,Re,Et,Xt,Yt,vt,Ye,mt,Rt,Ft,Le,Pe-ce.A,Le,Pe,fn);return Re+=w.fa,w.j+rn<w.o?(r(D.ec,D.fc,Oe,Re,fn),r(D.cc,D.dc,Ye,mt,sn),r(D.Mc,D.Nc,Rt,Ft,sn),W--):1&rn||Te(Oe,Re,null,null,Ye,mt,Rt,Ft,Ye,mt,Rt,Ft,Le,Pe+ce.A,null,null,fn),W}function as(w,D,W){var ce=w.F,Le=[w.J];if(ce!=null){var Pe=w.U,Te=D.ba.S,Oe=Te==oa||Te==aa;D=D.ba.f.RGBA;var Re=[0],Ye=w.ka;Re[0]=w.T,w.Kb&&(Ye==0?--Re[0]:(--Ye,Le[0]-=w.width),w.j+w.ka+w.T==w.o&&(Re[0]=w.o-w.j-Ye));var mt=D.eb;Ye=D.fb+Ye*D.A,w=vi(ce,Le[0],w.width,Pe,Re,mt,Ye+(Oe?0:3),D.A),e(W==Re),w&&en(Te)&&ks(mt,Ye,Oe,Pe,Re,D.A)}return 0}function ji(w){var D=w.ma,W=D.ba.S,ce=11>W,Le=W==hr||W==Fa||W==oa||W==uo||W==12||en(W);if(D.memory=null,D.Ib=null,D.Jb=null,D.Nd=null,!Xu(D.Oa,w,Le?11:12))return 0;if(Le&&en(W)&&dn(),w.da)alert("todo:use_scaling");else{if(ce){if(D.Ib=Jn,w.Kb){if(W=w.U+1>>1,D.memory=s(w.U+2*W),D.memory==null)return 0;D.ec=D.memory,D.fc=0,D.cc=D.ec,D.dc=D.fc+w.U,D.Mc=D.cc,D.Nc=D.dc+W,D.Ib=Mr,dn()}}else alert("todo:EmitYUV");Le&&(D.Jb=as,ce&&Pt())}if(ce&&!Tc){for(w=0;256>w;++w)Ud[w]=89858*(w-128)+dl>>Vd,Hd[w]=-22014*(w-128)+dl,Up[w]=-45773*(w-128),au[w]=113618*(w-128)+dl>>Vd;for(w=ad;w<Dh;++w)D=76283*(w-16)+dl>>Vd,Gd[w-ad]=Tr(D,255),kf[w-ad]=Tr(D+8>>4,15);Tc=1}return 1}function ro(w){var D=w.ma,W=w.U,ce=w.T;return e(!(1&w.ka)),0>=W||0>=ce?0:(W=D.Ib(w,D),D.Jb!=null&&D.Jb(w,D,W),D.Dc+=W,1)}function Cs(w){w.ma.memory=null}function ot(w,D,W,ce){return ve(w,8)!=47?0:(D[0]=ve(w,14)+1,W[0]=ve(w,14)+1,ce[0]=ve(w,1),ve(w,3)!=0?0:!w.h)}function nt(w,D){if(4>w)return w+1;var W=w-2>>1;return(2+(1&w)<<W)+ve(D,W)+1}function Ht(w,D){return 120<D?D-120:1<=(W=((W=ut[D-1])>>4)*w+(8-(15&W)))?W:1;var W}function kn(w,D,W){var ce=q(W),Le=w[D+=255&ce].g-8;return 0<Le&&(ie(W,W.u+8),ce=q(W),D+=w[D].value,D+=ce&(1<<Le)-1),ie(W,W.u+w[D].g),w[D].value}function tn(w,D,W){return W.g+=w.g,W.value+=w.value<<D>>>0,e(8>=W.g),w.g}function qt(w,D,W){var ce=w.xc;return e((D=ce==0?0:w.vc[w.md*(W>>ce)+(D>>ce)])<w.Wb),w.Ya[D]}function Wt(w,D,W,ce){var Le=w.ab,Pe=w.c*D,Te=w.C;D=Te+D;var Oe=W,Re=ce;for(ce=w.Ta,W=w.Ua;0<Le--;){var Ye=w.gc[Le],mt=Te,Rt=D,Ft=Oe,Et=Re,Xt=(Re=ce,Oe=W,Ye.Ea);switch(e(mt<Rt),e(Rt<=Ye.nc),Ye.hc){case 2:Ac(Ft,Et,(Rt-mt)*Xt,Re,Oe);break;case 0:var Yt=mt,vt=Rt,wt=Re,rn=Oe,fn=(d=Ye).Ea;Yt==0&&(oo(Ft,Et,null,null,1,wt,rn),it(Ft,Et+1,0,0,fn-1,wt,rn+1),Et+=fn,rn+=fn,++Yt);for(var sn=1<<d.b,Tn=sn-1,Mn=$e(fn,d.b),Kn=d.K,d=d.w+(Yt>>d.b)*Mn;Yt<vt;){var g=Kn,_=d,C=1;for(ao(Ft,Et,wt,rn-fn,1,wt,rn);C<fn;){var M=(C&~Tn)+sn;M>fn&&(M=fn),(0,Oa[g[_++]>>8&15])(Ft,Et+ +C,wt,rn+C-fn,M-C,wt,rn+C),C=M}Et+=fn,rn+=fn,++Yt&Tn||(d+=Mn)}Rt!=Ye.nc&&r(Re,Oe-Xt,Re,Oe+(Rt-mt-1)*Xt,Xt);break;case 1:for(Xt=Ft,vt=Et,fn=(Ft=Ye.Ea)-(rn=Ft&~(wt=(Et=1<<Ye.b)-1)),Yt=$e(Ft,Ye.b),sn=Ye.K,Ye=Ye.w+(mt>>Ye.b)*Yt;mt<Rt;){for(Tn=sn,Mn=Ye,Kn=new me,d=vt+rn,g=vt+Ft;vt<d;)hn(Tn[Mn++],Kn),Ia(Kn,Xt,vt,Et,Re,Oe),vt+=Et,Oe+=Et;vt<g&&(hn(Tn[Mn++],Kn),Ia(Kn,Xt,vt,fn,Re,Oe),vt+=fn,Oe+=fn),++mt&wt||(Ye+=Yt)}break;case 3:if(Ft==Re&&Et==Oe&&0<Ye.b){for(vt=Re,Ft=Xt=Oe+(Rt-mt)*Xt-(rn=(Rt-mt)*$e(Ye.Ea,Ye.b)),Et=Re,wt=Oe,Yt=[],rn=(fn=rn)-1;0<=rn;--rn)Yt[rn]=Et[wt+rn];for(rn=fn-1;0<=rn;--rn)vt[Ft+rn]=Yt[rn];_s(Ye,mt,Rt,Re,Xt,Re,Oe)}else _s(Ye,mt,Rt,Ft,Et,Re,Oe)}Oe=ce,Re=W}Re!=W&&r(ce,W,Oe,Re,Pe)}function ir(w,D){var W=w.V,ce=w.Ba+w.c*w.C,Le=D-w.C;if(e(D<=w.l.o),e(16>=Le),0<Le){var Pe=w.l,Te=w.Ta,Oe=w.Ua,Re=Pe.width;if(Wt(w,Le,W,ce),Le=Oe=[Oe],e((W=w.C)<(ce=D)),e(Pe.v<Pe.va),ce>Pe.o&&(ce=Pe.o),W<Pe.j){var Ye=Pe.j-W;W=Pe.j,Le[0]+=Ye*Re}if(W>=ce?W=0:(Le[0]+=4*Pe.v,Pe.ka=W-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=ce-W,W=1),W){if(Oe=Oe[0],11>(W=w.ca).S){var mt=W.f.RGBA,Rt=(ce=W.S,Le=Pe.U,Pe=Pe.T,Ye=mt.eb,mt.A),Ft=Pe;for(mt=mt.fb+w.Ma*mt.A;0<Ft--;){var Et=Te,Xt=Oe,Yt=Le,vt=Ye,wt=mt;switch(ce){case xo:Gs(Et,Xt,Yt,vt,wt);break;case hr:Ms(Et,Xt,Yt,vt,wt);break;case As:Ms(Et,Xt,Yt,vt,wt),ks(vt,wt,0,Yt,1,0);break;case Ra:Ws(Et,Xt,Yt,vt,wt);break;case Fa:xn(Et,Xt,Yt,vt,wt,1);break;case Ts:xn(Et,Xt,Yt,vt,wt,1),ks(vt,wt,0,Yt,1,0);break;case oa:xn(Et,Xt,Yt,vt,wt,0);break;case aa:xn(Et,Xt,Yt,vt,wt,0),ks(vt,wt,1,Yt,1,0);break;case uo:va(Et,Xt,Yt,vt,wt);break;case u:va(Et,Xt,Yt,vt,wt),di(vt,wt,Yt,1,0);break;case sd:jo(Et,Xt,Yt,vt,wt);break;default:e(0)}Oe+=Re,mt+=Rt}w.Ma+=Pe}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=W.height)}}w.C=D,e(w.C<=w.i)}function St(w){var D;if(0<w.ua)return 0;for(D=0;D<w.Wb;++D){var W=w.Ya[D].G,ce=w.Ya[D].H;if(0<W[1][ce[1]+0].g||0<W[2][ce[2]+0].g||0<W[3][ce[3]+0].g)return 0}return 1}function gn(w,D,W,ce,Le,Pe){if(w.Z!=0){var Te=w.qd,Oe=w.rd;for(e(ii[w.Z]!=null);D<W;++D)ii[w.Z](Te,Oe,ce,Le,ce,Le,Pe),Te=ce,Oe=Le,Le+=Pe;w.qd=Te,w.rd=Oe}}function Qn(w,D){var W=w.l.ma,ce=W.Z==0||W.Z==1?w.l.j:w.C;if(ce=w.C<ce?ce:w.C,e(D<=w.l.o),D>ce){var Le=w.l.width,Pe=W.ca,Te=W.tb+Le*ce,Oe=w.V,Re=w.Ba+w.c*ce,Ye=w.gc;e(w.ab==1),e(Ye[0].hc==3),Us(Ye[0],ce,D,Oe,Re,Pe,Te),gn(W,ce,D,Pe,Te,Le)}w.C=w.Ma=D}function ar(w,D,W,ce,Le,Pe,Te){var Oe=w.$/ce,Re=w.$%ce,Ye=w.m,mt=w.s,Rt=W+w.$,Ft=Rt;Le=W+ce*Le;var Et=W+ce*Pe,Xt=280+mt.ua,Yt=w.Pb?Oe:16777216,vt=0<mt.ua?mt.Wa:null,wt=mt.wc,rn=Rt<Et?qt(mt,Re,Oe):null;e(w.C<Pe),e(Et<=Le);var fn=!1;e:for(;;){for(;fn||Rt<Et;){var sn=0;if(Oe>=Yt){var Tn=Rt-W;e((Yt=w).Pb),Yt.wd=Yt.m,Yt.xd=Tn,0<Yt.s.ua&&oe(Yt.s.Wa,Yt.s.vb),Yt=Oe+Gt}if(Re&wt||(rn=qt(mt,Re,Oe)),e(rn!=null),rn.Qb&&(D[Rt]=rn.qb,fn=!0),!fn)if(de(Ye),rn.jc){sn=Ye,Tn=D;var Mn=Rt,Kn=rn.pd[q(sn)&cs-1];e(rn.jc),256>Kn.g?(ie(sn,sn.u+Kn.g),Tn[Mn]=Kn.value,sn=0):(ie(sn,sn.u+Kn.g-256),e(256<=Kn.value),sn=Kn.value),sn==0&&(fn=!0)}else sn=kn(rn.G[0],rn.H[0],Ye);if(Ye.h)break;if(fn||256>sn){if(!fn)if(rn.nd)D[Rt]=(rn.qb|sn<<8)>>>0;else{if(de(Ye),fn=kn(rn.G[1],rn.H[1],Ye),de(Ye),Tn=kn(rn.G[2],rn.H[2],Ye),Mn=kn(rn.G[3],rn.H[3],Ye),Ye.h)break;D[Rt]=(Mn<<24|fn<<16|sn<<8|Tn)>>>0}if(fn=!1,++Rt,++Re>=ce&&(Re=0,++Oe,Te!=null&&Oe<=Pe&&!(Oe%16)&&Te(w,Oe),vt!=null))for(;Ft<Rt;)sn=D[Ft++],vt.X[(506832829*sn&4294967295)>>>vt.Mb]=sn}else if(280>sn){if(sn=nt(sn-256,Ye),Tn=kn(rn.G[4],rn.H[4],Ye),de(Ye),Tn=Ht(ce,Tn=nt(Tn,Ye)),Ye.h)break;if(Rt-W<Tn||Le-Rt<sn)break e;for(Mn=0;Mn<sn;++Mn)D[Rt+Mn]=D[Rt+Mn-Tn];for(Rt+=sn,Re+=sn;Re>=ce;)Re-=ce,++Oe,Te!=null&&Oe<=Pe&&!(Oe%16)&&Te(w,Oe);if(e(Rt<=Le),Re&wt&&(rn=qt(mt,Re,Oe)),vt!=null)for(;Ft<Rt;)sn=D[Ft++],vt.X[(506832829*sn&4294967295)>>>vt.Mb]=sn}else{if(!(sn<Xt))break e;for(fn=sn-280,e(vt!=null);Ft<Rt;)sn=D[Ft++],vt.X[(506832829*sn&4294967295)>>>vt.Mb]=sn;sn=Rt,e(!(fn>>>(Tn=vt).Xa)),D[sn]=Tn.X[fn],fn=!0}fn||e(Ye.h==Z(Ye))}if(w.Pb&&Ye.h&&Rt<Le)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&oe(w.s.vb,w.s.Wa);else{if(Ye.h)break e;Te!=null&&Te(w,Oe>Pe?Pe:Oe),w.a=0,w.$=Rt-W}return 1}return w.a=3,0}function ur(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var D=w.Wa;D!=null&&(D.X=null),w.vb=null,e(w!=null)}function vn(){var w=new Pl;return w==null?null:(w.a=0,w.xb=Pu,$n("Predictor","VP8LPredictors"),$n("Predictor","VP8LPredictors_C"),$n("PredictorAdd","VP8LPredictorsAdd"),$n("PredictorAdd","VP8LPredictorsAdd_C"),Ac=jt,Ia=Ze,Gs=rt,Ms=$t,va=Qt,jo=Pn,Ws=wn,O.VP8LMapColor32b=Na,O.VP8LMapColor8b=Hs,w)}function cn(w,D,W,ce,Le){var Pe=1,Te=[w],Oe=[D],Re=ce.m,Ye=ce.s,mt=null,Rt=0;e:for(;;){if(W)for(;Pe&&ve(Re,1);){var Ft=Te,Et=Oe,Xt=ce,Yt=1,vt=Xt.m,wt=Xt.gc[Xt.ab],rn=ve(vt,2);if(Xt.Oc&1<<rn)Pe=0;else{switch(Xt.Oc|=1<<rn,wt.hc=rn,wt.Ea=Ft[0],wt.nc=Et[0],wt.K=[null],++Xt.ab,e(4>=Xt.ab),rn){case 0:case 1:wt.b=ve(vt,3)+2,Yt=cn($e(wt.Ea,wt.b),$e(wt.nc,wt.b),0,Xt,wt.K),wt.K=wt.K[0];break;case 3:var fn,sn=ve(vt,8)+1,Tn=16<sn?0:4<sn?1:2<sn?2:3;if(Ft[0]=$e(wt.Ea,Tn),wt.b=Tn,fn=Yt=cn(sn,1,0,Xt,wt.K)){var Mn,Kn=sn,d=wt,g=1<<(8>>d.b),_=s(g);if(_==null)fn=0;else{var C=d.K[0],M=d.w;for(_[0]=d.K[0][0],Mn=1;Mn<1*Kn;++Mn)_[Mn]=Je(C[M+Mn],_[Mn-1]);for(;Mn<4*g;++Mn)_[Mn]=0;d.K[0]=null,d.K[0]=_,fn=1}}Yt=fn;break;case 2:break;default:e(0)}Pe=Yt}}if(Te=Te[0],Oe=Oe[0],Pe&&ve(Re,1)&&!(Pe=1<=(Rt=ve(Re,4))&&11>=Rt)){ce.a=3;break e}var U;if(U=Pe)t:{var te,ae,be,Ce=ce,tt=Te,We=Oe,_t=Rt,It=W,nn=Ce.m,yn=Ce.s,Ln=[null],lr=1,et=0,st=Nt[_t];n:for(;;){if(It&&ve(nn,1)){var gt=ve(nn,3)+2,zt=$e(tt,gt),Ct=$e(We,gt),Bt=zt*Ct;if(!cn(zt,Ct,0,Ce,Ln))break n;for(Ln=Ln[0],yn.xc=gt,te=0;te<Bt;++te){var we=Ln[te]>>8&65535;Ln[te]=we,we>=lr&&(lr=we+1)}}if(nn.h)break n;for(ae=0;5>ae;++ae){var ke=G[ae];!ae&&0<_t&&(ke+=1<<_t),et<ke&&(et=ke)}var je=o(lr*st,B),Fe=lr,Ue=o(Fe,$);if(Ue==null)var He=null;else e(65536>=Fe),He=Ue;var dt=s(et);if(He==null||dt==null||je==null){Ce.a=1;break n}var ht=je;for(te=be=0;te<lr;++te){var yt=He[te],At=yt.G,Tt=yt.H,on=0,Fn=1,zn=0;for(ae=0;5>ae;++ae){ke=G[ae],At[ae]=ht,Tt[ae]=be,!ae&&0<_t&&(ke+=1<<_t);i:{var Zn,si=ke,yi=Ce,Vr=dt,Ei=ht,Co=be,ec=0,Sa=yi.m,Nh=ve(Sa,1);if(i(Vr,0,0,si),Nh){var hl=ve(Sa,1)+1,Dc=ve(Sa,1),Ca=ve(Sa,Dc==0?1:8);Vr[Ca]=1,hl==2&&(Vr[Ca=ve(Sa,8)]=1);var Ks=1}else{var is=s(19),Of=ve(Sa,4)+4;if(19<Of){yi.a=3;var Oh=0;break i}for(Zn=0;Zn<Of;++Zn)is[Ee[Zn]]=ve(Sa,3);var Ih=void 0,Bh=void 0,If=yi,Xr=is,Bf=si,$m=Vr,ld=0,tc=If.m,Vm=8,Um=o(128,B);r:for(;V(Um,0,7,Xr,19);){if(ve(tc,1)){var Tl=2+2*ve(tc,3);if((Ih=2+ve(tc,Tl))>Bf)break r}else Ih=Bf;for(Bh=0;Bh<Bf&&Ih--;){de(tc);var Hm=Um[0+(127&q(tc))];ie(tc,tc.u+Hm.g);var nc=Hm.value;if(16>nc)$m[Bh++]=nc,nc!=0&&(Vm=nc);else{var Hp=nc==16,Gp=nc-16,Gm=P[Gp],za=ve(tc,y[Gp])+Gm;if(Bh+za>Bf)break r;for(var Nc=Hp?Vm:0;0<za--;)$m[Bh++]=Nc}}ld=1;break r}ld||(If.a=3),Ks=ld}(Ks=Ks&&!Sa.h)&&(ec=V(Ei,Co,8,Vr,si)),Ks&&ec!=0?Oh=ec:(yi.a=3,Oh=0)}if(Oh==0)break n;if(Fn&&ue[ae]==1&&(Fn=ht[be].g==0),on+=ht[be].g,be+=Oh,3>=ae){var ud,Rf=dt[0];for(ud=1;ud<ke;++ud)dt[ud]>Rf&&(Rf=dt[ud]);zn+=Rf}}if(yt.nd=Fn,yt.Qb=0,Fn&&(yt.qb=(At[3][Tt[3]+0].value<<24|At[1][Tt[1]+0].value<<16|At[2][Tt[2]+0].value)>>>0,on==0&&256>At[0][Tt[0]+0].value&&(yt.Qb=1,yt.qb+=At[0][Tt[0]+0].value<<8)),yt.jc=!yt.Qb&&6>zn,yt.jc){var cd,Mu=yt;for(cd=0;cd<cs;++cd){var ku=cd,rc=Mu.pd[ku],Wd=Mu.G[0][Mu.H[0]+ku];256<=Wd.value?(rc.g=Wd.g+256,rc.value=Wd.value):(rc.g=0,rc.value=0,ku>>=tn(Wd,8,rc),ku>>=tn(Mu.G[1][Mu.H[1]+ku],16,rc),ku>>=tn(Mu.G[2][Mu.H[2]+ku],0,rc),tn(Mu.G[3][Mu.H[3]+ku],24,rc))}}}yn.vc=Ln,yn.Wb=lr,yn.Ya=He,yn.yc=je,U=1;break t}U=0}if(!(Pe=U)){ce.a=3;break e}if(0<Rt){if(Ye.ua=1<<Rt,!ee(Ye.Wa,Rt)){ce.a=1,Pe=0;break e}}else Ye.ua=0;var Rh=ce,ic=Te,Qy=Oe,Au=Rh.s,Ff=Au.xc;if(Rh.c=ic,Rh.i=Qy,Au.md=$e(ic,Ff),Au.wc=Ff==0?-1:(1<<Ff)-1,W){ce.xb=Th;break e}if((mt=s(Te*Oe))==null){ce.a=1,Pe=0;break e}Pe=(Pe=ar(ce,mt,0,Te,Oe,Oe,null))&&!Re.h;break e}return Pe?(Le!=null?Le[0]=mt:(e(mt==null),e(W)),ce.$=0,W||ur(Ye)):ur(Ye),Pe}function ri(w,D){var W=w.c*w.i,ce=W+D+16*D;return e(w.c<=D),w.V=s(ce),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+W+D,1)}function Li(w,D){var W=w.C,ce=D-W,Le=w.V,Pe=w.Ba+w.c*W;for(e(D<=w.l.o);0<ce;){var Te=16<ce?16:ce,Oe=w.l.ma,Re=w.l.width,Ye=Re*Te,mt=Oe.ca,Rt=Oe.tb+Re*W,Ft=w.Ta,Et=w.Ua;Wt(w,Te,Le,Pe),rs(Ft,Et,mt,Rt,Ye),gn(Oe,W,W+Te,mt,Rt,Re),ce-=Te,Le+=Te*w.c,W+=Te}e(W==D),w.C=w.Ma=D}function zi(){this.ub=this.yd=this.td=this.Rb=0}function Fr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function cr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Xi(){this.Yb=function(){var w=[];return function D(W,ce,Le){for(var Pe=Le[ce],Te=0;Te<Pe&&(W.push(Le.length>ce+1?[]:0),!(Le.length<ce+1));Te++)D(W[Te],ce+1,Le)}(w,0,[3,11]),w}()}function Ui(){this.jb=s(3),this.Wc=a([4,8],Xi),this.Xc=a([4,17],Xi)}function Hi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ls(){this.ld=this.La=this.dd=this.tc=0}function vs(){this.Na=this.la=0}function Es(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Fs(){this.uc=this.M=this.Nb=0,this.wa=Array(new ls),this.Y=0,this.ya=Array(new Rs),this.aa=0,this.l=new ys}function Ji(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Wr(){this.cb=this.a=0,this.sc="",this.m=new Ge,this.Od=new zi,this.Kc=new Fr,this.ed=new Hi,this.Qa=new cr,this.Ic=this.$c=this.Aa=0,this.D=new Fs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ge),this.ia=0,this.pb=o(4,Es),this.Pa=new Ui,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ji),this.Hd=0,this.rb=Array(new vs),this.sb=0,this.wa=Array(new ls),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rs),this.L=this.aa=0,this.gd=a([4,2],ls),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ys(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jr(){var w=new Wr;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Yn||(Yn=Si)),w}function fr(w,D,W){return w.a==0&&(w.a=D,w.sc=W,w.cb=0),0}function dr(w,D,W){return 3<=W&&w[D+0]==157&&w[D+1]==1&&w[D+2]==42}function Ti(w,D){if(w==null)return 0;if(w.a=0,w.sc="OK",D==null)return fr(w,2,"null VP8Io passed to VP8GetHeaders()");var W=D.data,ce=D.w,Le=D.ha;if(4>Le)return fr(w,7,"Truncated header.");var Pe=W[ce+0]|W[ce+1]<<8|W[ce+2]<<16,Te=w.Od;if(Te.Rb=!(1&Pe),Te.td=Pe>>1&7,Te.yd=Pe>>4&1,Te.ub=Pe>>5,3<Te.td)return fr(w,3,"Incorrect keyframe parameters.");if(!Te.yd)return fr(w,4,"Frame not displayable.");ce+=3,Le-=3;var Oe=w.Kc;if(Te.Rb){if(7>Le)return fr(w,7,"cannot parse picture header");if(!dr(W,ce,Le))return fr(w,3,"Bad code word");Oe.c=16383&(W[ce+4]<<8|W[ce+3]),Oe.Td=W[ce+4]>>6,Oe.i=16383&(W[ce+6]<<8|W[ce+5]),Oe.Ud=W[ce+6]>>6,ce+=7,Le-=7,w.za=Oe.c+15>>4,w.Ub=Oe.i+15>>4,D.width=Oe.c,D.height=Oe.i,D.Da=0,D.j=0,D.v=0,D.va=D.width,D.o=D.height,D.da=0,D.ib=D.width,D.hb=D.height,D.U=D.width,D.T=D.height,i((Pe=w.Pa).jb,0,255,Pe.jb.length),e((Pe=w.Qa)!=null),Pe.Cb=0,Pe.Bb=0,Pe.Fb=1,i(Pe.Zb,0,0,Pe.Zb.length),i(Pe.Lb,0,0,Pe.Lb)}if(Te.ub>Le)return fr(w,7,"bad partition length");R(Pe=w.m,W,ce,Te.ub),ce+=Te.ub,Le-=Te.ub,Te.Rb&&(Oe.Ld=he(Pe),Oe.Kd=he(Pe)),Oe=w.Qa;var Re,Ye=w.Pa;if(e(Pe!=null),e(Oe!=null),Oe.Cb=he(Pe),Oe.Cb){if(Oe.Bb=he(Pe),he(Pe)){for(Oe.Fb=he(Pe),Re=0;4>Re;++Re)Oe.Zb[Re]=he(Pe)?X(Pe,7):0;for(Re=0;4>Re;++Re)Oe.Lb[Re]=he(Pe)?X(Pe,6):0}if(Oe.Bb)for(Re=0;3>Re;++Re)Ye.jb[Re]=he(Pe)?I(Pe,8):255}else Oe.Bb=0;if(Pe.Ka)return fr(w,3,"cannot parse segment header");if((Oe=w.ed).zd=he(Pe),Oe.Tb=I(Pe,6),Oe.wb=I(Pe,3),Oe.Pc=he(Pe),Oe.Pc&&he(Pe)){for(Ye=0;4>Ye;++Ye)he(Pe)&&(Oe.vd[Ye]=X(Pe,6));for(Ye=0;4>Ye;++Ye)he(Pe)&&(Oe.od[Ye]=X(Pe,6))}if(w.L=Oe.Tb==0?0:Oe.zd?1:2,Pe.Ka)return fr(w,3,"cannot parse filter header");var mt=Le;if(Le=Re=ce,ce=Re+mt,Oe=mt,w.Xb=(1<<I(w.m,2))-1,mt<3*(Ye=w.Xb))W=7;else{for(Re+=3*Ye,Oe-=3*Ye,mt=0;mt<Ye;++mt){var Rt=W[Le+0]|W[Le+1]<<8|W[Le+2]<<16;Rt>Oe&&(Rt=Oe),R(w.Jc[+mt],W,Re,Rt),Re+=Rt,Oe-=Rt,Le+=3}R(w.Jc[+Ye],W,Re,Oe),W=Re<ce?0:5}if(W!=0)return fr(w,W,"cannot parse partitions");for(W=I(Re=w.m,7),Le=he(Re)?X(Re,4):0,ce=he(Re)?X(Re,4):0,Oe=he(Re)?X(Re,4):0,Ye=he(Re)?X(Re,4):0,Re=he(Re)?X(Re,4):0,mt=w.Qa,Rt=0;4>Rt;++Rt){if(mt.Cb){var Ft=mt.Zb[Rt];mt.Fb||(Ft+=W)}else{if(0<Rt){w.pb[Rt]=w.pb[0];continue}Ft=W}var Et=w.pb[Rt];Et.Sc[0]=an[Tr(Ft+Le,127)],Et.Sc[1]=On[Tr(Ft+0,127)],Et.Eb[0]=2*an[Tr(Ft+ce,127)],Et.Eb[1]=101581*On[Tr(Ft+Oe,127)]>>16,8>Et.Eb[1]&&(Et.Eb[1]=8),Et.Qc[0]=an[Tr(Ft+Ye,117)],Et.Qc[1]=On[Tr(Ft+Re,127)],Et.lc=Ft+Re}if(!Te.Rb)return fr(w,4,"Not a key frame.");for(he(Pe),Te=w.Pa,W=0;4>W;++W){for(Le=0;8>Le;++Le)for(ce=0;3>ce;++ce)for(Oe=0;11>Oe;++Oe)Ye=Q(Pe,Lo[W][Le][ce][Oe])?I(Pe,8):Ds[W][Le][ce][Oe],Te.Wc[W][Le].Yb[ce][Oe]=Ye;for(Le=0;17>Le;++Le)Te.Xc[W][Le]=Te.Wc[W][od[Le]]}return w.kc=he(Pe),w.kc&&(w.Bd=I(Pe,8)),w.cb=1}function Si(w,D,W,ce,Le,Pe,Te){var Oe=D[Le].Yb[W];for(W=0;16>Le;++Le){if(!Q(w,Oe[W+0]))return Le;for(;!Q(w,Oe[W+1]);)if(Oe=D[++Le].Yb[0],W=0,Le==16)return 16;var Re=D[Le+1].Yb;if(Q(w,Oe[W+2])){var Ye=w,mt=0;if(Q(Ye,(Ft=Oe)[(Rt=W)+3]))if(Q(Ye,Ft[Rt+6])){for(Oe=0,Rt=2*(mt=Q(Ye,Ft[Rt+8]))+(Ft=Q(Ye,Ft[Rt+9+mt])),mt=0,Ft=kr[Rt];Ft[Oe];++Oe)mt+=mt+Q(Ye,Ft[Oe]);mt+=3+(8<<Rt)}else Q(Ye,Ft[Rt+7])?(mt=7+2*Q(Ye,165),mt+=Q(Ye,145)):mt=5+Q(Ye,159);else mt=Q(Ye,Ft[Rt+4])?3+Q(Ye,Ft[Rt+5]):2;Oe=Re[2]}else mt=1,Oe=Re[1];Re=Te+hs[Le],0>(Ye=w).b&&ye(Ye);var Rt,Ft=Ye.b,Et=(Rt=Ye.Ca>>1)-(Ye.I>>Ft)>>31;--Ye.b,Ye.Ca+=Et,Ye.Ca|=1,Ye.I-=(Rt+1&Et)<<Ft,Pe[Re]=((mt^Et)-Et)*ce[(0<Le)+0]}return 16}function io(w){var D=w.rb[w.sb-1];D.la=0,D.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function br(w,D){if(w==null)return 0;if(D==null)return fr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Ti(w,D))return 0;if(e(w.cb),D.ac==null||D.ac(D)){D.ob&&(w.L=0);var W=ja[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=D.v-W>>4,w.zb=D.j-W>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=D.o+15+W>>4,w.Hb=D.va+15+W>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ce=w.ed;for(W=0;4>W;++W){var Le;if(w.Qa.Cb){var Pe=w.Qa.Lb[W];w.Qa.Fb||(Pe+=ce.Tb)}else Pe=ce.Tb;for(Le=0;1>=Le;++Le){var Te=w.gd[W][Le],Oe=Pe;if(ce.Pc&&(Oe+=ce.vd[0],Le&&(Oe+=ce.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Re=Oe;0<ce.wb&&(Re=4<ce.wb?Re>>2:Re>>1)>9-ce.wb&&(Re=9-ce.wb),1>Re&&(Re=1),Te.dd=Re,Te.tc=2*Oe+Re,Te.ld=40<=Oe?2:15<=Oe?1:0}else Te.tc=0;Te.La=Le}}}W=0}else fr(w,6,"Frame setup failed"),W=w.a;if(W=W==0){if(W){w.$c=0,0<w.Aa||(w.Ic=Df);e:{W=w.Ic,ce=4*(Re=w.za);var Ye=32*Re,mt=Re+1,Rt=0<w.L?Re*(0<w.Aa?2:1):0,Ft=(w.Aa==2?2:1)*Re;if((Te=ce+832+(Le=3*(16*W+ja[w.L])/2*Ye)+(Pe=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Te)W=0;else{if(Te>w.Vb){if(w.Vb=0,w.Ec=s(Te),w.Fc=0,w.Ec==null){W=fr(w,1,"no memory during frame initialization.");break e}w.Vb=Te}Te=w.Ec,Oe=w.Fc,w.Ac=Te,w.Bc=Oe,Oe+=ce,w.Gd=o(Ye,Ji),w.Hd=0,w.rb=o(mt+1,vs),w.sb=1,w.wa=Rt?o(Rt,ls):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Re),e(!0),w.oc=Te,w.pc=Oe,Oe+=832,w.ya=o(Ft,Rs),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Re),w.R=16*Re,w.B=8*Re,Re=(Ye=ja[w.L])*w.R,Ye=Ye/2*w.B,w.sa=Te,w.ta=Oe+Re,w.qa=w.sa,w.ra=w.ta+16*W*w.R+Ye,w.Ha=w.qa,w.Ia=w.ra+8*W*w.B+Ye,w.$c=0,Oe+=Le,w.mb=Pe?Te:null,w.nb=Pe?Oe:null,e(Oe+Pe<=w.Fc+w.Vb),io(w),i(w.Ac,w.Bc,0,ce),W=1}}if(W){if(D.ka=0,D.y=w.sa,D.O=w.ta,D.f=w.qa,D.N=w.ra,D.ea=w.Ha,D.Vd=w.Ia,D.fa=w.R,D.Rc=w.B,D.F=null,D.J=0,!Ju){for(W=-255;255>=W;++W)Ci[255+W]=0>W?-W:W;for(W=-1020;1020>=W;++W)zo[1020+W]=-128>W?-128:127<W?127:W;for(W=-112;112>=W;++W)wo[112+W]=-16>W?-16:15<W?15:W;for(W=-255;510>=W;++W)Go[255+W]=0>W?0:255<W?255:W;Ju=1}xt=il,Kt=xl,An=ka,Gn=Gi,mr=Qo,Ot=qu,Ni=Cu,ci=pa,ou=Ho,lo=iu,Oi=nu,ya=ru,Ba=ai,ba=kc,_a=Qi,wa=sr,$r=es,sa=El,la[0]=Zr,la[1]=wu,la[2]=_r,la[3]=ta,la[4]=Ku,la[5]=Sl,la[6]=Ll,la[7]=na,la[8]=Zu,la[9]=al,La[0]=Jl,La[1]=Yu,La[2]=ea,La[3]=Aa,La[4]=bs,La[5]=Pc,La[6]=xu,Wo[0]=ll,Wo[1]=sl,Wo[2]=Ql,Wo[3]=vr,Wo[4]=eu,Wo[5]=Mc,Wo[6]=Lu,W=1}else W=0}W&&(W=function(Et,Xt){for(Et.M=0;Et.M<Et.Va;++Et.M){var Yt,vt=Et.Jc[Et.M&Et.Xb],wt=Et.m,rn=Et;for(Yt=0;Yt<rn.za;++Yt){var fn=wt,sn=rn,Tn=sn.Ac,Mn=sn.Bc+4*Yt,Kn=sn.zc,d=sn.ya[sn.aa+Yt];if(sn.Qa.Bb?d.$b=Q(fn,sn.Pa.jb[0])?2+Q(fn,sn.Pa.jb[2]):Q(fn,sn.Pa.jb[1]):d.$b=0,sn.kc&&(d.Ad=Q(fn,sn.Bd)),d.Za=!Q(fn,145)+0,d.Za){var g=d.Ob,_=0;for(sn=0;4>sn;++sn){var C,M=Kn[0+sn];for(C=0;4>C;++C){M=Ii[Tn[Mn+C]][M];for(var U=Wi[Q(fn,M[0])];0<U;)U=Wi[2*U+Q(fn,M[U])];M=-U,Tn[Mn+C]=M}r(g,_,Tn,Mn,4),_+=4,Kn[0+sn]=M}}else M=Q(fn,156)?Q(fn,128)?1:3:Q(fn,163)?2:0,d.Ob[0]=M,i(Tn,Mn,M,4),i(Kn,0,M,4);d.Dd=Q(fn,142)?Q(fn,114)?Q(fn,183)?1:3:2:0}if(rn.m.Ka)return fr(Et,7,"Premature end-of-partition0 encountered.");for(;Et.ja<Et.za;++Et.ja){if(rn=vt,fn=(wt=Et).rb[wt.sb-1],Tn=wt.rb[wt.sb+wt.ja],Yt=wt.ya[wt.aa+wt.ja],Mn=wt.kc?Yt.Ad:0)fn.la=Tn.la=0,Yt.Za||(fn.Na=Tn.Na=0),Yt.Hc=0,Yt.Gc=0,Yt.ia=0;else{var te,ae;if(fn=Tn,Tn=rn,Mn=wt.Pa.Xc,Kn=wt.ya[wt.aa+wt.ja],d=wt.pb[Kn.$b],sn=Kn.ad,g=0,_=wt.rb[wt.sb-1],M=C=0,i(sn,g,0,384),Kn.Za)var be=0,Ce=Mn[3];else{U=s(16);var tt=fn.Na+_.Na;if(tt=Yn(Tn,Mn[1],tt,d.Eb,0,U,0),fn.Na=_.Na=(0<tt)+0,1<tt)xt(U,0,sn,g);else{var We=U[0]+3>>3;for(U=0;256>U;U+=16)sn[g+U]=We}be=1,Ce=Mn[0]}var _t=15&fn.la,It=15&_.la;for(U=0;4>U;++U){var nn=1&It;for(We=ae=0;4>We;++We)_t=_t>>1|(nn=(tt=Yn(Tn,Ce,tt=nn+(1&_t),d.Sc,be,sn,g))>be)<<7,ae=ae<<2|(3<tt?3:1<tt?2:sn[g+0]!=0),g+=16;_t>>=4,It=It>>1|nn<<7,C=(C<<8|ae)>>>0}for(Ce=_t,be=It>>4,te=0;4>te;te+=2){for(ae=0,_t=fn.la>>4+te,It=_.la>>4+te,U=0;2>U;++U){for(nn=1&It,We=0;2>We;++We)tt=nn+(1&_t),_t=_t>>1|(nn=0<(tt=Yn(Tn,Mn[2],tt,d.Qc,0,sn,g)))<<3,ae=ae<<2|(3<tt?3:1<tt?2:sn[g+0]!=0),g+=16;_t>>=2,It=It>>1|nn<<5}M|=ae<<4*te,Ce|=_t<<4<<te,be|=(240&It)<<te}fn.la=Ce,_.la=be,Kn.Hc=C,Kn.Gc=M,Kn.ia=43690&M?0:d.ia,Mn=!(C|M)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[Yt.$b][Yt.Za],wt.wa[wt.Y+wt.ja].La|=!Mn),rn.Ka)return fr(Et,7,"Premature end-of-file encountered.")}if(io(Et),wt=Xt,rn=1,Yt=(vt=Et).D,fn=0<vt.L&&vt.M>=vt.zb&&vt.M<=vt.Va,vt.Aa==0)e:{if(Yt.M=vt.M,Yt.uc=fn,Eu(vt,Yt),rn=1,Yt=(ae=vt.D).Nb,fn=(M=ja[vt.L])*vt.R,Tn=M/2*vt.B,U=16*Yt*vt.R,We=8*Yt*vt.B,Mn=vt.sa,Kn=vt.ta-fn+U,d=vt.qa,sn=vt.ra-Tn+We,g=vt.Ha,_=vt.Ia-Tn+We,It=(_t=ae.M)==0,C=_t>=vt.Va-1,vt.Aa==2&&Eu(vt,ae),ae.uc)for(nn=(tt=vt).D.M,e(tt.D.uc),ae=tt.yb;ae<tt.Hb;++ae){be=ae,Ce=nn;var yn=(Ln=(ke=tt).D).Nb;te=ke.R;var Ln=Ln.wa[Ln.Y+be],lr=ke.sa,et=ke.ta+16*yn*te+16*be,st=Ln.dd,gt=Ln.tc;if(gt!=0)if(e(3<=gt),ke.L==1)0<be&&wa(lr,et,te,gt+4),Ln.La&&sa(lr,et,te,gt),0<Ce&&_a(lr,et,te,gt+4),Ln.La&&$r(lr,et,te,gt);else{var zt=ke.B,Ct=ke.qa,Bt=ke.ra+8*yn*zt+8*be,we=ke.Ha,ke=ke.Ia+8*yn*zt+8*be;yn=Ln.ld,0<be&&(ci(lr,et,te,gt+4,st,yn),lo(Ct,Bt,we,ke,zt,gt+4,st,yn)),Ln.La&&(ya(lr,et,te,gt,st,yn),ba(Ct,Bt,we,ke,zt,gt,st,yn)),0<Ce&&(Ni(lr,et,te,gt+4,st,yn),ou(Ct,Bt,we,ke,zt,gt+4,st,yn)),Ln.La&&(Oi(lr,et,te,gt,st,yn),Ba(Ct,Bt,we,ke,zt,gt,st,yn))}}if(vt.ia&&alert("todo:DitherRow"),wt.put!=null){if(ae=16*_t,_t=16*(_t+1),It?(wt.y=vt.sa,wt.O=vt.ta+U,wt.f=vt.qa,wt.N=vt.ra+We,wt.ea=vt.Ha,wt.W=vt.Ia+We):(ae-=M,wt.y=Mn,wt.O=Kn,wt.f=d,wt.N=sn,wt.ea=g,wt.W=_),C||(_t-=M),_t>wt.o&&(_t=wt.o),wt.F=null,wt.J=null,vt.Fa!=null&&0<vt.Fa.length&&ae<_t&&(wt.J=ts(vt,wt,ae,_t-ae),wt.F=vt.mb,wt.F==null&&wt.F.length==0)){rn=fr(vt,3,"Could not decode alpha data.");break e}ae<wt.j&&(M=wt.j-ae,ae=wt.j,e(!(1&M)),wt.O+=vt.R*M,wt.N+=vt.B*(M>>1),wt.W+=vt.B*(M>>1),wt.F!=null&&(wt.J+=wt.width*M)),ae<_t&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=ae-wt.j,wt.U=wt.va-wt.v,wt.T=_t-ae,rn=wt.put(wt))}Yt+1!=vt.Ic||C||(r(vt.sa,vt.ta-fn,Mn,Kn+16*vt.R,fn),r(vt.qa,vt.ra-Tn,d,sn+8*vt.B,Tn),r(vt.Ha,vt.Ia-Tn,g,_+8*vt.B,Tn))}if(!rn)return fr(Et,6,"Output aborted.")}return 1}(w,D)),D.bc!=null&&D.bc(D),W&=1}return W?(w.cb=0,W):0}function Qr(w,D,W,ce,Le){Le=w[D+W+32*ce]+(Le>>3),w[D+W+32*ce]=-256&Le?0>Le?0:255:Le}function rl(w,D,W,ce,Le,Pe){Qr(w,D,0,W,ce+Le),Qr(w,D,1,W,ce+Pe),Qr(w,D,2,W,ce-Pe),Qr(w,D,3,W,ce-Le)}function js(w){return(20091*w>>16)+w}function zs(w,D,W,ce){var Le,Pe=0,Te=s(16);for(Le=0;4>Le;++Le){var Oe=w[D+0]+w[D+8],Re=w[D+0]-w[D+8],Ye=(35468*w[D+4]>>16)-js(w[D+12]),mt=js(w[D+4])+(35468*w[D+12]>>16);Te[Pe+0]=Oe+mt,Te[Pe+1]=Re+Ye,Te[Pe+2]=Re-Ye,Te[Pe+3]=Oe-mt,Pe+=4,D++}for(Le=Pe=0;4>Le;++Le)Oe=(w=Te[Pe+0]+4)+Te[Pe+8],Re=w-Te[Pe+8],Ye=(35468*Te[Pe+4]>>16)-js(Te[Pe+12]),Qr(W,ce,0,0,Oe+(mt=js(Te[Pe+4])+(35468*Te[Pe+12]>>16))),Qr(W,ce,1,0,Re+Ye),Qr(W,ce,2,0,Re-Ye),Qr(W,ce,3,0,Oe-mt),Pe++,ce+=32}function qu(w,D,W,ce){var Le=w[D+0]+4,Pe=35468*w[D+4]>>16,Te=js(w[D+4]),Oe=35468*w[D+1]>>16;rl(W,ce,0,Le+Te,w=js(w[D+1]),Oe),rl(W,ce,1,Le+Pe,w,Oe),rl(W,ce,2,Le-Pe,w,Oe),rl(W,ce,3,Le-Te,w,Oe)}function xl(w,D,W,ce,Le){zs(w,D,W,ce),Le&&zs(w,D+16,W,ce+4)}function ka(w,D,W,ce){Kt(w,D+0,W,ce,1),Kt(w,D+32,W,ce+128,1)}function Gi(w,D,W,ce){var Le;for(w=w[D+0]+4,Le=0;4>Le;++Le)for(D=0;4>D;++D)Qr(W,ce,D,Le,w)}function Qo(w,D,W,ce){w[D+0]&&Gn(w,D+0,W,ce),w[D+16]&&Gn(w,D+16,W,ce+4),w[D+32]&&Gn(w,D+32,W,ce+128),w[D+48]&&Gn(w,D+48,W,ce+128+4)}function il(w,D,W,ce){var Le,Pe=s(16);for(Le=0;4>Le;++Le){var Te=w[D+0+Le]+w[D+12+Le],Oe=w[D+4+Le]+w[D+8+Le],Re=w[D+4+Le]-w[D+8+Le],Ye=w[D+0+Le]-w[D+12+Le];Pe[0+Le]=Te+Oe,Pe[8+Le]=Te-Oe,Pe[4+Le]=Ye+Re,Pe[12+Le]=Ye-Re}for(Le=0;4>Le;++Le)Te=(w=Pe[0+4*Le]+3)+Pe[3+4*Le],Oe=Pe[1+4*Le]+Pe[2+4*Le],Re=Pe[1+4*Le]-Pe[2+4*Le],Ye=w-Pe[3+4*Le],W[ce+0]=Te+Oe>>3,W[ce+16]=Ye+Re>>3,W[ce+32]=Te-Oe>>3,W[ce+48]=Ye-Re>>3,ce+=64}function Io(w,D,W){var ce,Le=D-32,Pe=xi,Te=255-w[Le-1];for(ce=0;ce<W;++ce){var Oe,Re=Pe,Ye=Te+w[D-1];for(Oe=0;Oe<W;++Oe)w[D+Oe]=Re[Ye+w[Le+Oe]];D+=32}}function wu(w,D){Io(w,D,4)}function sl(w,D){Io(w,D,8)}function Yu(w,D){Io(w,D,16)}function ea(w,D){var W;for(W=0;16>W;++W)r(w,D+32*W,w,D-32,16)}function Aa(w,D){var W;for(W=16;0<W;--W)i(w,D,w[D-1],16),D+=32}function ol(w,D,W){var ce;for(ce=0;16>ce;++ce)i(D,W+32*ce,w,16)}function Jl(w,D){var W,ce=16;for(W=0;16>W;++W)ce+=w[D-1+32*W]+w[D+W-32];ol(ce>>5,w,D)}function bs(w,D){var W,ce=8;for(W=0;16>W;++W)ce+=w[D-1+32*W];ol(ce>>4,w,D)}function Pc(w,D){var W,ce=8;for(W=0;16>W;++W)ce+=w[D+W-32];ol(ce>>4,w,D)}function xu(w,D){ol(128,w,D)}function gr(w,D,W){return w+2*D+W+2>>2}function _r(w,D){var W,ce=D-32;for(ce=new Uint8Array([gr(w[ce-1],w[ce+0],w[ce+1]),gr(w[ce+0],w[ce+1],w[ce+2]),gr(w[ce+1],w[ce+2],w[ce+3]),gr(w[ce+2],w[ce+3],w[ce+4])]),W=0;4>W;++W)r(w,D+32*W,ce,0,ce.length)}function ta(w,D){var W=w[D-1],ce=w[D-1+32],Le=w[D-1+64],Pe=w[D-1+96];Ae(w,D+0,16843009*gr(w[D-1-32],W,ce)),Ae(w,D+32,16843009*gr(W,ce,Le)),Ae(w,D+64,16843009*gr(ce,Le,Pe)),Ae(w,D+96,16843009*gr(Le,Pe,Pe))}function Zr(w,D){var W,ce=4;for(W=0;4>W;++W)ce+=w[D+W-32]+w[D-1+32*W];for(ce>>=3,W=0;4>W;++W)i(w,D+32*W,ce,4)}function Ku(w,D){var W=w[D-1+0],ce=w[D-1+32],Le=w[D-1+64],Pe=w[D-1-32],Te=w[D+0-32],Oe=w[D+1-32],Re=w[D+2-32],Ye=w[D+3-32];w[D+0+96]=gr(ce,Le,w[D-1+96]),w[D+1+96]=w[D+0+64]=gr(W,ce,Le),w[D+2+96]=w[D+1+64]=w[D+0+32]=gr(Pe,W,ce),w[D+3+96]=w[D+2+64]=w[D+1+32]=w[D+0+0]=gr(Te,Pe,W),w[D+3+64]=w[D+2+32]=w[D+1+0]=gr(Oe,Te,Pe),w[D+3+32]=w[D+2+0]=gr(Re,Oe,Te),w[D+3+0]=gr(Ye,Re,Oe)}function Ll(w,D){var W=w[D+1-32],ce=w[D+2-32],Le=w[D+3-32],Pe=w[D+4-32],Te=w[D+5-32],Oe=w[D+6-32],Re=w[D+7-32];w[D+0+0]=gr(w[D+0-32],W,ce),w[D+1+0]=w[D+0+32]=gr(W,ce,Le),w[D+2+0]=w[D+1+32]=w[D+0+64]=gr(ce,Le,Pe),w[D+3+0]=w[D+2+32]=w[D+1+64]=w[D+0+96]=gr(Le,Pe,Te),w[D+3+32]=w[D+2+64]=w[D+1+96]=gr(Pe,Te,Oe),w[D+3+64]=w[D+2+96]=gr(Te,Oe,Re),w[D+3+96]=gr(Oe,Re,Re)}function Sl(w,D){var W=w[D-1+0],ce=w[D-1+32],Le=w[D-1+64],Pe=w[D-1-32],Te=w[D+0-32],Oe=w[D+1-32],Re=w[D+2-32],Ye=w[D+3-32];w[D+0+0]=w[D+1+64]=Pe+Te+1>>1,w[D+1+0]=w[D+2+64]=Te+Oe+1>>1,w[D+2+0]=w[D+3+64]=Oe+Re+1>>1,w[D+3+0]=Re+Ye+1>>1,w[D+0+96]=gr(Le,ce,W),w[D+0+64]=gr(ce,W,Pe),w[D+0+32]=w[D+1+96]=gr(W,Pe,Te),w[D+1+32]=w[D+2+96]=gr(Pe,Te,Oe),w[D+2+32]=w[D+3+96]=gr(Te,Oe,Re),w[D+3+32]=gr(Oe,Re,Ye)}function na(w,D){var W=w[D+0-32],ce=w[D+1-32],Le=w[D+2-32],Pe=w[D+3-32],Te=w[D+4-32],Oe=w[D+5-32],Re=w[D+6-32],Ye=w[D+7-32];w[D+0+0]=W+ce+1>>1,w[D+1+0]=w[D+0+64]=ce+Le+1>>1,w[D+2+0]=w[D+1+64]=Le+Pe+1>>1,w[D+3+0]=w[D+2+64]=Pe+Te+1>>1,w[D+0+32]=gr(W,ce,Le),w[D+1+32]=w[D+0+96]=gr(ce,Le,Pe),w[D+2+32]=w[D+1+96]=gr(Le,Pe,Te),w[D+3+32]=w[D+2+96]=gr(Pe,Te,Oe),w[D+3+64]=gr(Te,Oe,Re),w[D+3+96]=gr(Oe,Re,Ye)}function al(w,D){var W=w[D-1+0],ce=w[D-1+32],Le=w[D-1+64],Pe=w[D-1+96];w[D+0+0]=W+ce+1>>1,w[D+2+0]=w[D+0+32]=ce+Le+1>>1,w[D+2+32]=w[D+0+64]=Le+Pe+1>>1,w[D+1+0]=gr(W,ce,Le),w[D+3+0]=w[D+1+32]=gr(ce,Le,Pe),w[D+3+32]=w[D+1+64]=gr(Le,Pe,Pe),w[D+3+64]=w[D+2+64]=w[D+0+96]=w[D+1+96]=w[D+2+96]=w[D+3+96]=Pe}function Zu(w,D){var W=w[D-1+0],ce=w[D-1+32],Le=w[D-1+64],Pe=w[D-1+96],Te=w[D-1-32],Oe=w[D+0-32],Re=w[D+1-32],Ye=w[D+2-32];w[D+0+0]=w[D+2+32]=W+Te+1>>1,w[D+0+32]=w[D+2+64]=ce+W+1>>1,w[D+0+64]=w[D+2+96]=Le+ce+1>>1,w[D+0+96]=Pe+Le+1>>1,w[D+3+0]=gr(Oe,Re,Ye),w[D+2+0]=gr(Te,Oe,Re),w[D+1+0]=w[D+3+32]=gr(W,Te,Oe),w[D+1+32]=w[D+3+64]=gr(ce,W,Te),w[D+1+64]=w[D+3+96]=gr(Le,ce,W),w[D+1+96]=gr(Pe,Le,ce)}function Ql(w,D){var W;for(W=0;8>W;++W)r(w,D+32*W,w,D-32,8)}function vr(w,D){var W;for(W=0;8>W;++W)i(w,D,w[D-1],8),D+=32}function Or(w,D,W){var ce;for(ce=0;8>ce;++ce)i(D,W+32*ce,w,8)}function ll(w,D){var W,ce=8;for(W=0;8>W;++W)ce+=w[D+W-32]+w[D-1+32*W];Or(ce>>4,w,D)}function Mc(w,D){var W,ce=4;for(W=0;8>W;++W)ce+=w[D+W-32];Or(ce>>3,w,D)}function eu(w,D){var W,ce=4;for(W=0;8>W;++W)ce+=w[D-1+32*W];Or(ce>>3,w,D)}function Lu(w,D){Or(128,w,D)}function Cl(w,D,W){var ce=w[D-W],Le=w[D+0],Pe=3*(Le-ce)+xa[1020+w[D-2*W]-w[D+W]],Te=ds[112+(Pe+4>>3)];w[D-W]=xi[255+ce+ds[112+(Pe+3>>3)]],w[D+0]=xi[255+Le-Te]}function tu(w,D,W,ce){var Le=w[D+0],Pe=w[D+W];return qs[255+w[D-2*W]-w[D-W]]>ce||qs[255+Pe-Le]>ce}function Su(w,D,W,ce){return 4*qs[255+w[D-W]-w[D+0]]+qs[255+w[D-2*W]-w[D+W]]<=ce}function zr(w,D,W,ce,Le){var Pe=w[D-3*W],Te=w[D-2*W],Oe=w[D-W],Re=w[D+0],Ye=w[D+W],mt=w[D+2*W],Rt=w[D+3*W];return 4*qs[255+Oe-Re]+qs[255+Te-Ye]>ce?0:qs[255+w[D-4*W]-Pe]<=Le&&qs[255+Pe-Te]<=Le&&qs[255+Te-Oe]<=Le&&qs[255+Rt-mt]<=Le&&qs[255+mt-Ye]<=Le&&qs[255+Ye-Re]<=Le}function Qi(w,D,W,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)Su(w,D+ce,W,Le)&&Cl(w,D+ce,W)}function sr(w,D,W,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)Su(w,D+ce*W,1,Le)&&Cl(w,D+ce*W,1)}function es(w,D,W,ce){var Le;for(Le=3;0<Le;--Le)Qi(w,D+=4*W,W,ce)}function El(w,D,W,ce){var Le;for(Le=3;0<Le;--Le)sr(w,D+=4,W,ce)}function Ta(w,D,W,ce,Le,Pe,Te,Oe){for(Pe=2*Pe+1;0<Le--;){if(zr(w,D,W,Pe,Te))if(tu(w,D,W,Oe))Cl(w,D,W);else{var Re=w,Ye=D,mt=W,Rt=Re[Ye-2*mt],Ft=Re[Ye-mt],Et=Re[Ye+0],Xt=Re[Ye+mt],Yt=Re[Ye+2*mt],vt=27*(rn=xa[1020+3*(Et-Ft)+xa[1020+Rt-Xt]])+63>>7,wt=18*rn+63>>7,rn=9*rn+63>>7;Re[Ye-3*mt]=xi[255+Re[Ye-3*mt]+rn],Re[Ye-2*mt]=xi[255+Rt+wt],Re[Ye-mt]=xi[255+Ft+vt],Re[Ye+0]=xi[255+Et-vt],Re[Ye+mt]=xi[255+Xt-wt],Re[Ye+2*mt]=xi[255+Yt-rn]}D+=ce}}function Di(w,D,W,ce,Le,Pe,Te,Oe){for(Pe=2*Pe+1;0<Le--;){if(zr(w,D,W,Pe,Te))if(tu(w,D,W,Oe))Cl(w,D,W);else{var Re=w,Ye=D,mt=W,Rt=Re[Ye-mt],Ft=Re[Ye+0],Et=Re[Ye+mt],Xt=ds[112+((Yt=3*(Ft-Rt))+4>>3)],Yt=ds[112+(Yt+3>>3)],vt=Xt+1>>1;Re[Ye-2*mt]=xi[255+Re[Ye-2*mt]+vt],Re[Ye-mt]=xi[255+Rt+Yt],Re[Ye+0]=xi[255+Ft-Xt],Re[Ye+mt]=xi[255+Et-vt]}D+=ce}}function Cu(w,D,W,ce,Le,Pe){Ta(w,D,W,1,16,ce,Le,Pe)}function pa(w,D,W,ce,Le,Pe){Ta(w,D,1,W,16,ce,Le,Pe)}function nu(w,D,W,ce,Le,Pe){var Te;for(Te=3;0<Te;--Te)Di(w,D+=4*W,W,1,16,ce,Le,Pe)}function ru(w,D,W,ce,Le,Pe){var Te;for(Te=3;0<Te;--Te)Di(w,D+=4,1,W,16,ce,Le,Pe)}function Ho(w,D,W,ce,Le,Pe,Te,Oe){Ta(w,D,Le,1,8,Pe,Te,Oe),Ta(W,ce,Le,1,8,Pe,Te,Oe)}function iu(w,D,W,ce,Le,Pe,Te,Oe){Ta(w,D,1,Le,8,Pe,Te,Oe),Ta(W,ce,1,Le,8,Pe,Te,Oe)}function ai(w,D,W,ce,Le,Pe,Te,Oe){Di(w,D+4*Le,Le,1,8,Pe,Te,Oe),Di(W,ce+4*Le,Le,1,8,Pe,Te,Oe)}function kc(w,D,W,ce,Le,Pe,Te,Oe){Di(w,D+4,1,Le,8,Pe,Te,Oe),Di(W,ce+4,1,Le,8,Pe,Te,Oe)}function Ps(){this.ba=new qn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ra(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function su(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ia(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new B}function Pl(){this.xb=this.a=0,this.l=new ys,this.ca=new qn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new se,this.Pb=0,this.wd=new se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ia,this.ab=0,this.gc=o(4,su),this.Oc=0}function Ml(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ys,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function li(w,D,W,ce,Le,Pe,Te){for(w=w==null?0:w[D+0],D=0;D<Te;++D)Le[Pe+D]=w+W[ce+D]&255,w=Le[Pe+D]}function Bo(w,D,W,ce,Le,Pe,Te){var Oe;if(w==null)li(null,null,W,ce,Le,Pe,Te);else for(Oe=0;Oe<Te;++Oe)Le[Pe+Oe]=w[D+Oe]+W[ce+Oe]&255}function Da(w,D,W,ce,Le,Pe,Te){if(w==null)li(null,null,W,ce,Le,Pe,Te);else{var Oe,Re=w[D+0],Ye=Re,mt=Re;for(Oe=0;Oe<Te;++Oe)Ye=mt+(Re=w[D+Oe])-Ye,mt=W[ce+Oe]+(-256&Ye?0>Ye?0:255:Ye)&255,Ye=Re,Le[Pe+Oe]=mt}}function ts(w,D,W,ce){var Le=D.width,Pe=D.o;if(e(w!=null&&D!=null),0>W||0>=ce||W+ce>Pe)return null;if(!w.Cc){if(w.ga==null){var Te;if(w.ga=new Ml,(Te=w.ga==null)||(Te=D.width*D.o,e(w.Gb.length==0),w.Gb=s(Te),w.Uc=0,w.Gb==null?Te=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Te=1),Te=!Te),!Te){Te=w.ga;var Oe=w.Fa,Re=w.P,Ye=w.qc,mt=w.mb,Rt=w.nb,Ft=Re+1,Et=Ye-1,Xt=Te.l;if(e(Oe!=null&&mt!=null&&D!=null),ii[0]=null,ii[1]=li,ii[2]=Bo,ii[3]=Da,Te.ca=mt,Te.tb=Rt,Te.c=D.width,Te.i=D.height,e(0<Te.c&&0<Te.i),1>=Ye)D=0;else if(Te.$a=Oe[Re+0]>>0&3,Te.Z=Oe[Re+0]>>2&3,Te.Lc=Oe[Re+0]>>4&3,Re=Oe[Re+0]>>6&3,0>Te.$a||1<Te.$a||4<=Te.Z||1<Te.Lc||Re)D=0;else if(Xt.put=ro,Xt.ac=ji,Xt.bc=Cs,Xt.ma=Te,Xt.width=D.width,Xt.height=D.height,Xt.Da=D.Da,Xt.v=D.v,Xt.va=D.va,Xt.j=D.j,Xt.o=D.o,Te.$a)e:{e(Te.$a==1),D=vn();t:for(;;){if(D==null){D=0;break e}if(e(Te!=null),Te.mc=D,D.c=Te.c,D.i=Te.i,D.l=Te.l,D.l.ma=Te,D.l.width=Te.c,D.l.height=Te.i,D.a=0,K(D.m,Oe,Ft,Et),!cn(Te.c,Te.i,1,D,null)||(D.ab==1&&D.gc[0].hc==3&&St(D.s)?(Te.ic=1,Oe=D.c*D.i,D.Ta=null,D.Ua=0,D.V=s(Oe),D.Ba=0,D.V==null?(D.a=1,D=0):D=1):(Te.ic=0,D=ri(D,Te.c)),!D))break t;D=1;break e}Te.mc=null,D=0}else D=Et>=Te.c*Te.i;Te=!D}if(Te)return null;w.ga.Lc!=1?w.Ga=0:ce=Pe-W}e(w.ga!=null),e(W+ce<=Pe);e:{if(D=(Oe=w.ga).c,Pe=Oe.l.o,Oe.$a==0){if(Ft=w.rc,Et=w.Vc,Xt=w.Fa,Re=w.P+1+W*D,Ye=w.mb,mt=w.nb+W*D,e(Re<=w.P+w.qc),Oe.Z!=0)for(e(ii[Oe.Z]!=null),Te=0;Te<ce;++Te)ii[Oe.Z](Ft,Et,Xt,Re,Ye,mt,D),Ft=Ye,Et=mt,mt+=D,Re+=D;else for(Te=0;Te<ce;++Te)r(Ye,mt,Xt,Re,D),Ft=Ye,Et=mt,mt+=D,Re+=D;w.rc=Ft,w.Vc=Et}else{if(e(Oe.mc!=null),D=W+ce,e((Te=Oe.mc)!=null),e(D<=Te.i),Te.C>=D)D=1;else if(Oe.ic||Pt(),Oe.ic){Oe=Te.V,Ft=Te.Ba,Et=Te.c;var Yt=Te.i,vt=(Xt=1,Re=Te.$/Et,Ye=Te.$%Et,mt=Te.m,Rt=Te.s,Te.$),wt=Et*Yt,rn=Et*D,fn=Rt.wc,sn=vt<rn?qt(Rt,Ye,Re):null;e(vt<=wt),e(D<=Yt),e(St(Rt));t:for(;;){for(;!mt.h&&vt<rn;){if(Ye&fn||(sn=qt(Rt,Ye,Re)),e(sn!=null),de(mt),256>(Yt=kn(sn.G[0],sn.H[0],mt)))Oe[Ft+vt]=Yt,++vt,++Ye>=Et&&(Ye=0,++Re<=D&&!(Re%16)&&Qn(Te,Re));else{if(!(280>Yt)){Xt=0;break t}Yt=nt(Yt-256,mt);var Tn,Mn=kn(sn.G[4],sn.H[4],mt);if(de(mt),!(vt>=(Mn=Ht(Et,Mn=nt(Mn,mt)))&&wt-vt>=Yt)){Xt=0;break t}for(Tn=0;Tn<Yt;++Tn)Oe[Ft+vt+Tn]=Oe[Ft+vt+Tn-Mn];for(vt+=Yt,Ye+=Yt;Ye>=Et;)Ye-=Et,++Re<=D&&!(Re%16)&&Qn(Te,Re);vt<rn&&Ye&fn&&(sn=qt(Rt,Ye,Re))}e(mt.h==Z(mt))}Qn(Te,Re>D?D:Re);break t}!Xt||mt.h&&vt<wt?(Xt=0,Te.a=mt.h?5:3):Te.$=vt,D=Xt}else D=ar(Te,Te.V,Te.Ba,Te.c,Te.i,D,Li);if(!D){ce=0;break e}}W+ce>=Pe&&(w.Cc=1),ce=1}if(!ce)return null;if(w.Cc&&((ce=w.ga)!=null&&(ce.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+W*Le}function F(w,D,W,ce,Le,Pe){for(;0<Le--;){var Te,Oe=w,Re=D+(W?1:0),Ye=w,mt=D+(W?0:3);for(Te=0;Te<ce;++Te){var Rt=Ye[mt+4*Te];Rt!=255&&(Rt*=32897,Oe[Re+4*Te+0]=Oe[Re+4*Te+0]*Rt>>23,Oe[Re+4*Te+1]=Oe[Re+4*Te+1]*Rt>>23,Oe[Re+4*Te+2]=Oe[Re+4*Te+2]*Rt>>23)}D+=Pe}}function xe(w,D,W,ce,Le){for(;0<ce--;){var Pe;for(Pe=0;Pe<W;++Pe){var Te=w[D+2*Pe+0],Oe=15&(Ye=w[D+2*Pe+1]),Re=4369*Oe,Ye=(240&Ye|Ye>>4)*Re>>16;w[D+2*Pe+0]=(240&Te|Te>>4)*Re>>16&240|(15&Te|Te<<4)*Re>>16>>4&15,w[D+2*Pe+1]=240&Ye|Oe}D+=Le}}function Qe(w,D,W,ce,Le,Pe,Te,Oe){var Re,Ye,mt=255;for(Ye=0;Ye<Le;++Ye){for(Re=0;Re<ce;++Re){var Rt=w[D+Re];Pe[Te+4*Re]=Rt,mt&=Rt}D+=W,Te+=Oe}return mt!=255}function pt(w,D,W,ce,Le){var Pe;for(Pe=0;Pe<Le;++Pe)W[ce+Pe]=w[D+Pe]>>8}function Pt(){ks=F,di=xe,vi=Qe,rs=pt}function Vt(w,D,W){O[w]=function(ce,Le,Pe,Te,Oe,Re,Ye,mt,Rt,Ft,Et,Xt,Yt,vt,wt,rn,fn){var sn,Tn=fn-1>>1,Mn=Oe[Re+0]|Ye[mt+0]<<16,Kn=Rt[Ft+0]|Et[Xt+0]<<16;e(ce!=null);var d=3*Mn+Kn+131074>>2;for(D(ce[Le+0],255&d,d>>16,Yt,vt),Pe!=null&&(d=3*Kn+Mn+131074>>2,D(Pe[Te+0],255&d,d>>16,wt,rn)),sn=1;sn<=Tn;++sn){var g=Oe[Re+sn]|Ye[mt+sn]<<16,_=Rt[Ft+sn]|Et[Xt+sn]<<16,C=Mn+g+Kn+_+524296,M=C+2*(g+Kn)>>3;d=M+Mn>>1,Mn=(C=C+2*(Mn+_)>>3)+g>>1,D(ce[Le+2*sn-1],255&d,d>>16,Yt,vt+(2*sn-1)*W),D(ce[Le+2*sn-0],255&Mn,Mn>>16,Yt,vt+(2*sn-0)*W),Pe!=null&&(d=C+Kn>>1,Mn=M+_>>1,D(Pe[Te+2*sn-1],255&d,d>>16,wt,rn+(2*sn-1)*W),D(Pe[Te+2*sn+0],255&Mn,Mn>>16,wt,rn+(2*sn+0)*W)),Mn=g,Kn=_}1&fn||(d=3*Mn+Kn+131074>>2,D(ce[Le+fn-1],255&d,d>>16,Yt,vt+(fn-1)*W),Pe!=null&&(d=3*Kn+Mn+131074>>2,D(Pe[Te+fn-1],255&d,d>>16,wt,rn+(fn-1)*W)))}}function dn(){Ys[xo]=Ie,Ys[hr]=Qu,Ys[Ra]=So,Ys[Fa]=Ns,Ys[oa]=Dr,Ys[uo]=$d,Ys[sd]=Mf,Ys[As]=Qu,Ys[Ts]=Ns,Ys[aa]=Dr,Ys[u]=$d}function Nn(w){return w&-16384?0>w?0:255:w>>Vp}function Rn(w,D){return Nn((19077*w>>8)+(26149*D>>8)-14234)}function er(w,D,W){return Nn((19077*w>>8)-(6419*D>>8)-(13320*W>>8)+8708)}function pr(w,D){return Nn((19077*w>>8)+(33050*D>>8)-17685)}function Ar(w,D,W,ce,Le){ce[Le+0]=Rn(w,W),ce[Le+1]=er(w,D,W),ce[Le+2]=pr(w,D)}function Mi(w,D,W,ce,Le){ce[Le+0]=pr(w,D),ce[Le+1]=er(w,D,W),ce[Le+2]=Rn(w,W)}function ni(w,D,W,ce,Le){var Pe=er(w,D,W);D=Pe<<3&224|pr(w,D)>>3,ce[Le+0]=248&Rn(w,W)|Pe>>5,ce[Le+1]=D}function ui(w,D,W,ce,Le){var Pe=240&pr(w,D)|15;ce[Le+0]=240&Rn(w,W)|er(w,D,W)>>4,ce[Le+1]=Pe}function ns(w,D,W,ce,Le){ce[Le+0]=255,Ar(w,D,W,ce,Le+1)}function us(w,D,W,ce,Le){Mi(w,D,W,ce,Le),ce[Le+3]=255}function Ro(w,D,W,ce,Le){Ar(w,D,W,ce,Le),ce[Le+3]=255}function Tr(w,D){return 0>w?0:w>D?D:w}function $s(w,D,W){O[w]=function(ce,Le,Pe,Te,Oe,Re,Ye,mt,Rt){for(var Ft=mt+(-2&Rt)*W;mt!=Ft;)D(ce[Le+0],Pe[Te+0],Oe[Re+0],Ye,mt),D(ce[Le+1],Pe[Te+0],Oe[Re+0],Ye,mt+W),Le+=2,++Te,++Re,mt+=2*W;1&Rt&&D(ce[Le+0],Pe[Te+0],Oe[Re+0],Ye,mt)}}function kl(w,D,W){return W==0?w==0?D==0?6:5:D==0?4:0:W}function so(w,D,W,ce,Le){switch(w>>>30){case 3:Kt(D,W,ce,Le,0);break;case 2:Ot(D,W,ce,Le);break;case 1:Gn(D,W,ce,Le)}}function Eu(w,D){var W,ce,Le=D.M,Pe=D.Nb,Te=w.oc,Oe=w.pc+40,Re=w.oc,Ye=w.pc+584,mt=w.oc,Rt=w.pc+600;for(W=0;16>W;++W)Te[Oe+32*W-1]=129;for(W=0;8>W;++W)Re[Ye+32*W-1]=129,mt[Rt+32*W-1]=129;for(0<Le?Te[Oe-1-32]=Re[Ye-1-32]=mt[Rt-1-32]=129:(i(Te,Oe-32-1,127,21),i(Re,Ye-32-1,127,9),i(mt,Rt-32-1,127,9)),ce=0;ce<w.za;++ce){var Ft=D.ya[D.aa+ce];if(0<ce){for(W=-1;16>W;++W)r(Te,Oe+32*W-4,Te,Oe+32*W+12,4);for(W=-1;8>W;++W)r(Re,Ye+32*W-4,Re,Ye+32*W+4,4),r(mt,Rt+32*W-4,mt,Rt+32*W+4,4)}var Et=w.Gd,Xt=w.Hd+ce,Yt=Ft.ad,vt=Ft.Hc;if(0<Le&&(r(Te,Oe-32,Et[Xt].y,0,16),r(Re,Ye-32,Et[Xt].f,0,8),r(mt,Rt-32,Et[Xt].ea,0,8)),Ft.Za){var wt=Te,rn=Oe-32+16;for(0<Le&&(ce>=w.za-1?i(wt,rn,Et[Xt].y[15],4):r(wt,rn,Et[Xt+1].y,0,4)),W=0;4>W;W++)wt[rn+128+W]=wt[rn+256+W]=wt[rn+384+W]=wt[rn+0+W];for(W=0;16>W;++W,vt<<=2)wt=Te,rn=Oe+Af[W],la[Ft.Ob[W]](wt,rn),so(vt,Yt,16*+W,wt,rn)}else if(wt=kl(ce,Le,Ft.Ob[0]),La[wt](Te,Oe),vt!=0)for(W=0;16>W;++W,vt<<=2)so(vt,Yt,16*+W,Te,Oe+Af[W]);for(W=Ft.Gc,wt=kl(ce,Le,Ft.Dd),Wo[wt](Re,Ye),Wo[wt](mt,Rt),vt=Yt,wt=Re,rn=Ye,255&(Ft=W>>0)&&(170&Ft?An(vt,256,wt,rn):mr(vt,256,wt,rn)),Ft=mt,vt=Rt,255&(W>>=8)&&(170&W?An(Yt,320,Ft,vt):mr(Yt,320,Ft,vt)),Le<w.Ub-1&&(r(Et[Xt].y,0,Te,Oe+480,16),r(Et[Xt].f,0,Re,Ye+224,8),r(Et[Xt].ea,0,mt,Rt+224,8)),W=8*Pe*w.B,Et=w.sa,Xt=w.ta+16*ce+16*Pe*w.R,Yt=w.qa,Ft=w.ra+8*ce+W,vt=w.Ha,wt=w.Ia+8*ce+W,W=0;16>W;++W)r(Et,Xt+W*w.R,Te,Oe+32*W,16);for(W=0;8>W;++W)r(Yt,Ft+W*w.B,Re,Ye+32*W,8),r(vt,wt+W*w.B,mt,Rt+32*W,8)}}function ga(w,D,W,ce,Le,Pe,Te,Oe,Re){var Ye=[0],mt=[0],Rt=0,Ft=Re!=null?Re.kd:0,Et=Re??new ra;if(w==null||12>W)return 7;Et.data=w,Et.w=D,Et.ha=W,D=[D],W=[W],Et.gb=[Et.gb];e:{var Xt=D,Yt=W,vt=Et.gb;if(e(w!=null),e(Yt!=null),e(vt!=null),vt[0]=0,12<=Yt[0]&&!n(w,Xt[0],"RIFF")){if(n(w,Xt[0]+8,"WEBP")){vt=3;break e}var wt=fe(w,Xt[0]+4);if(12>wt||4294967286<wt){vt=3;break e}if(Ft&&wt>Yt[0]-8){vt=7;break e}vt[0]=wt,Xt[0]+=12,Yt[0]-=12}vt=0}if(vt!=0)return vt;for(wt=0<Et.gb[0],W=W[0];;){e:{var rn=w;Yt=D,vt=W;var fn=Ye,sn=mt,Tn=Xt=[0];if((d=Rt=[Rt])[0]=0,8>vt[0])vt=7;else{if(!n(rn,Yt[0],"VP8X")){if(fe(rn,Yt[0]+4)!=10){vt=3;break e}if(18>vt[0]){vt=7;break e}var Mn=fe(rn,Yt[0]+8),Kn=1+Ke(rn,Yt[0]+12);if(2147483648<=Kn*(rn=1+Ke(rn,Yt[0]+15))){vt=3;break e}Tn!=null&&(Tn[0]=Mn),fn!=null&&(fn[0]=Kn),sn!=null&&(sn[0]=rn),Yt[0]+=18,vt[0]-=18,d[0]=1}vt=0}}if(Rt=Rt[0],Xt=Xt[0],vt!=0)return vt;if(Yt=!!(2&Xt),!wt&&Rt)return 3;if(Pe!=null&&(Pe[0]=!!(16&Xt)),Te!=null&&(Te[0]=Yt),Oe!=null&&(Oe[0]=0),Te=Ye[0],Xt=mt[0],Rt&&Yt&&Re==null){vt=0;break}if(4>W){vt=7;break}if(wt&&Rt||!wt&&!Rt&&!n(w,D[0],"ALPH")){W=[W],Et.na=[Et.na],Et.P=[Et.P],Et.Sa=[Et.Sa];e:{Mn=w,vt=D,wt=W;var d=Et.gb;fn=Et.na,sn=Et.P,Tn=Et.Sa,Kn=22,e(Mn!=null),e(wt!=null),rn=vt[0];var g=wt[0];for(e(fn!=null),e(Tn!=null),fn[0]=null,sn[0]=null,Tn[0]=0;;){if(vt[0]=rn,wt[0]=g,8>g){vt=7;break e}var _=fe(Mn,rn+4);if(4294967286<_){vt=3;break e}var C=8+_+1&-2;if(Kn+=C,0<d&&Kn>d){vt=3;break e}if(!n(Mn,rn,"VP8 ")||!n(Mn,rn,"VP8L")){vt=0;break e}if(g[0]<C){vt=7;break e}n(Mn,rn,"ALPH")||(fn[0]=Mn,sn[0]=rn+8,Tn[0]=_),rn+=C,g-=C}}if(W=W[0],Et.na=Et.na[0],Et.P=Et.P[0],Et.Sa=Et.Sa[0],vt!=0)break}W=[W],Et.Ja=[Et.Ja],Et.xa=[Et.xa];e:if(d=w,vt=D,wt=W,fn=Et.gb[0],sn=Et.Ja,Tn=Et.xa,Mn=vt[0],rn=!n(d,Mn,"VP8 "),Kn=!n(d,Mn,"VP8L"),e(d!=null),e(wt!=null),e(sn!=null),e(Tn!=null),8>wt[0])vt=7;else{if(rn||Kn){if(d=fe(d,Mn+4),12<=fn&&d>fn-12){vt=3;break e}if(Ft&&d>wt[0]-8){vt=7;break e}sn[0]=d,vt[0]+=8,wt[0]-=8,Tn[0]=Kn}else Tn[0]=5<=wt[0]&&d[Mn+0]==47&&!(d[Mn+4]>>5),sn[0]=wt[0];vt=0}if(W=W[0],Et.Ja=Et.Ja[0],Et.xa=Et.xa[0],D=D[0],vt!=0)break;if(4294967286<Et.Ja)return 3;if(Oe==null||Yt||(Oe[0]=Et.xa?2:1),Te=[Te],Xt=[Xt],Et.xa){if(5>W){vt=7;break}Oe=Te,Ft=Xt,Yt=Pe,w==null||5>W?w=0:5<=W&&w[D+0]==47&&!(w[D+4]>>5)?(wt=[0],d=[0],fn=[0],K(sn=new se,w,D,W),ot(sn,wt,d,fn)?(Oe!=null&&(Oe[0]=wt[0]),Ft!=null&&(Ft[0]=d[0]),Yt!=null&&(Yt[0]=fn[0]),w=1):w=0):w=0}else{if(10>W){vt=7;break}Oe=Xt,w==null||10>W||!dr(w,D+3,W-3)?w=0:(Ft=w[D+0]|w[D+1]<<8|w[D+2]<<16,Yt=16383&(w[D+7]<<8|w[D+6]),w=16383&(w[D+9]<<8|w[D+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=Et.Ja||!Yt||!w?w=0:(Te&&(Te[0]=Yt),Oe&&(Oe[0]=w),w=1))}if(!w||(Te=Te[0],Xt=Xt[0],Rt&&(Ye[0]!=Te||mt[0]!=Xt)))return 3;Re!=null&&(Re[0]=Et,Re.offset=D-Re.w,e(4294967286>D-Re.w),e(Re.offset==Re.ha-W));break}return vt==0||vt==7&&Rt&&Re==null?(Pe!=null&&(Pe[0]|=Et.na!=null&&0<Et.na.length),ce!=null&&(ce[0]=Te),Le!=null&&(Le[0]=Xt),0):vt}function Xu(w,D,W){var ce=D.width,Le=D.height,Pe=0,Te=0,Oe=ce,Re=Le;if(D.Da=w!=null&&0<w.Da,D.Da&&(Oe=w.cd,Re=w.bd,Pe=w.v,Te=w.j,11>W||(Pe&=-2,Te&=-2),0>Pe||0>Te||0>=Oe||0>=Re||Pe+Oe>ce||Te+Re>Le))return 0;if(D.v=Pe,D.j=Te,D.va=Pe+Oe,D.o=Te+Re,D.U=Oe,D.T=Re,D.da=w!=null&&0<w.da,D.da){if(!ze(Oe,Re,W=[w.ib],Pe=[w.hb]))return 0;D.ib=W[0],D.hb=Pe[0]}return D.ob=w!=null&&w.ob,D.Kb=w==null||!w.Sd,D.da&&(D.ob=D.ib<3*ce/4&&D.hb<3*Le/4,D.Kb=0),1}function ul(w){if(w==null)return 2;if(11>w.S){var D=w.f.RGBA;D.fb+=(w.height-1)*D.A,D.A=-D.A}else D=w.f.kb,w=w.height,D.O+=(w-1)*D.fa,D.fa=-D.fa,D.N+=(w-1>>1)*D.Ab,D.Ab=-D.Ab,D.W+=(w-1>>1)*D.Db,D.Db=-D.Db,D.F!=null&&(D.J+=(w-1)*D.lb,D.lb=-D.lb);return 0}function cl(w,D,W,ce){if(ce==null||0>=w||0>=D)return 2;if(W!=null){if(W.Da){var Le=W.cd,Pe=W.bd,Te=-2&W.v,Oe=-2&W.j;if(0>Te||0>Oe||0>=Le||0>=Pe||Te+Le>w||Oe+Pe>D)return 2;w=Le,D=Pe}if(W.da){if(!ze(w,D,Le=[W.ib],Pe=[W.hb]))return 2;w=Le[0],D=Pe[0]}}ce.width=w,ce.height=D;e:{var Re=ce.width,Ye=ce.height;if(w=ce.S,0>=Re||0>=Ye||!(w>=xo&&13>w))w=2;else{if(0>=ce.Rd&&ce.sd==null){Te=Pe=Le=D=0;var mt=(Oe=Re*Nf[w])*Ye;if(11>w||(Pe=(Ye+1)/2*(D=(Re+1)/2),w==12&&(Te=(Le=Re)*Ye)),(Ye=s(mt+2*Pe+Te))==null){w=1;break e}ce.sd=Ye,11>w?((Re=ce.f.RGBA).eb=Ye,Re.fb=0,Re.A=Oe,Re.size=mt):((Re=ce.f.kb).y=Ye,Re.O=0,Re.fa=Oe,Re.Fd=mt,Re.f=Ye,Re.N=0+mt,Re.Ab=D,Re.Cd=Pe,Re.ea=Ye,Re.W=0+mt+Pe,Re.Db=D,Re.Ed=Pe,w==12&&(Re.F=Ye,Re.J=0+mt+2*Pe),Re.Tc=Te,Re.lb=Le)}if(D=1,Le=ce.S,Pe=ce.width,Te=ce.height,Le>=xo&&13>Le)if(11>Le)w=ce.f.RGBA,D&=(Oe=Math.abs(w.A))*(Te-1)+Pe<=w.size,D&=Oe>=Pe*Nf[Le],D&=w.eb!=null;else{w=ce.f.kb,Oe=(Pe+1)/2,mt=(Te+1)/2,Re=Math.abs(w.fa),Ye=Math.abs(w.Ab);var Rt=Math.abs(w.Db),Ft=Math.abs(w.lb),Et=Ft*(Te-1)+Pe;D&=Re*(Te-1)+Pe<=w.Fd,D&=Ye*(mt-1)+Oe<=w.Cd,D=(D&=Rt*(mt-1)+Oe<=w.Ed)&Re>=Pe&Ye>=Oe&Rt>=Oe,D&=w.y!=null,D&=w.f!=null,D&=w.ea!=null,Le==12&&(D&=Ft>=Pe,D&=Et<=w.Tc,D&=w.F!=null)}else D=0;w=D?0:2}}return w!=0||W!=null&&W.fd&&(w=ul(ce)),w}var cs=64,ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fo=24,_o=32,Al=8,Vs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(w){return w},O.Predictor2=function(w,D,W){return D[W+0]},O.Predictor3=function(w,D,W){return D[W+1]},O.Predictor4=function(w,D,W){return D[W-1]},O.Predictor5=function(w,D,W){return qe(qe(w,D[W+1]),D[W+0])},O.Predictor6=function(w,D,W){return qe(w,D[W-1])},O.Predictor7=function(w,D,W){return qe(w,D[W+0])},O.Predictor8=function(w,D,W){return qe(D[W-1],D[W+0])},O.Predictor9=function(w,D,W){return qe(D[W+0],D[W+1])},O.Predictor10=function(w,D,W){return qe(qe(w,D[W-1]),qe(D[W+0],D[W+1]))},O.Predictor11=function(w,D,W){var ce=D[W+0];return 0>=Mt(ce>>24&255,w>>24&255,(D=D[W-1])>>24&255)+Mt(ce>>16&255,w>>16&255,D>>16&255)+Mt(ce>>8&255,w>>8&255,D>>8&255)+Mt(255&ce,255&w,255&D)?ce:w},O.Predictor12=function(w,D,W){var ce=D[W+0];return(ct((w>>24&255)+(ce>>24&255)-((D=D[W-1])>>24&255))<<24|ct((w>>16&255)+(ce>>16&255)-(D>>16&255))<<16|ct((w>>8&255)+(ce>>8&255)-(D>>8&255))<<8|ct((255&w)+(255&ce)-(255&D)))>>>0},O.Predictor13=function(w,D,W){var ce=D[W-1];return(ft((w=qe(w,D[W+0]))>>24&255,ce>>24&255)<<24|ft(w>>16&255,ce>>16&255)<<16|ft(w>>8&255,ce>>8&255)<<8|ft(w>>0&255,ce>>0&255))>>>0};var oo=O.PredictorAdd0;O.PredictorAdd1=it,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var ao=O.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ac,_s=O.ColorIndexInverseTransform,Na=O.MapARGB,Us=O.VP8LColorIndexInverseTransformAlpha,Hs=O.MapAlpha,Oa=O.VP8LPredictorsAdd=[];Oa.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Ia,Gs,Ms,va,jo,Ws,xt,Kt,Ot,An,Gn,mr,Ni,ci,ou,lo,Oi,ya,Ba,ba,_a,wa,$r,sa,ks,di,vi,rs,Ci=s(511),zo=s(2041),wo=s(225),Go=s(767),Ju=0,xa=zo,ds=wo,xi=Go,qs=Ci,xo=0,hr=1,Ra=2,Fa=3,oa=4,uo=5,sd=6,As=7,Ts=8,aa=9,u=10,y=[2,3,7],P=[3,3,11],G=[280,256,256,256,40],ue=[0,1,1,1,0],Ee=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ut=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gt=8,an=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],On=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Yn=null,kr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hs=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ds=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ii=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Lo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],od=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],La=[],la=[],Wo=[],Th=1,Pu=2,ii=[],Ys=[];Vt("UpsampleRgbLinePair",Ar,3),Vt("UpsampleBgrLinePair",Mi,3),Vt("UpsampleRgbaLinePair",Ro,4),Vt("UpsampleBgraLinePair",us,4),Vt("UpsampleArgbLinePair",ns,4),Vt("UpsampleRgba4444LinePair",ui,2),Vt("UpsampleRgb565LinePair",ni,2);var Ie=O.UpsampleRgbLinePair,So=O.UpsampleBgrLinePair,Qu=O.UpsampleRgbaLinePair,Ns=O.UpsampleBgraLinePair,Dr=O.UpsampleArgbLinePair,$d=O.UpsampleRgba4444LinePair,Mf=O.UpsampleRgb565LinePair,Vd=16,dl=1<<Vd-1,ad=-227,Dh=482,Vp=6,Tc=0,Ud=s(256),au=s(256),Up=s(256),Hd=s(256),Gd=s(Dh-ad),kf=s(Dh-ad);$s("YuvToRgbRow",Ar,3),$s("YuvToBgrRow",Mi,3),$s("YuvToRgbaRow",Ro,4),$s("YuvToBgraRow",us,4),$s("YuvToArgbRow",ns,4),$s("YuvToRgba4444Row",ui,2),$s("YuvToRgb565Row",ni,2);var Af=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ja=[0,2,8],Tf=[8,7,6,4,4,2,2,2,1,1,1,1],Df=1;this.WebPDecodeRGBA=function(w,D,W,ce,Le){var Pe=hr,Te=new Ps,Oe=new qn;Te.ba=Oe,Oe.S=Pe,Oe.width=[Oe.width],Oe.height=[Oe.height];var Re=Oe.width,Ye=Oe.height,mt=new nr;if(mt==null||w==null)var Rt=2;else e(mt!=null),Rt=ga(w,D,W,mt.width,mt.height,mt.Pd,mt.Qd,mt.format,null);if(Rt!=0?Re=0:(Re!=null&&(Re[0]=mt.width[0]),Ye!=null&&(Ye[0]=mt.height[0]),Re=1),Re){Oe.width=Oe.width[0],Oe.height=Oe.height[0],ce!=null&&(ce[0]=Oe.width),Le!=null&&(Le[0]=Oe.height);e:{if(ce=new ys,(Le=new ra).data=w,Le.w=D,Le.ha=W,Le.kd=1,D=[0],e(Le!=null),((w=ga(Le.data,Le.w,Le.ha,null,null,null,D,null,Le))==0||w==7)&&D[0]&&(w=4),(D=w)==0){if(e(Te!=null),ce.data=Le.data,ce.w=Le.w+Le.offset,ce.ha=Le.ha-Le.offset,ce.put=ro,ce.ac=ji,ce.bc=Cs,ce.ma=Te,Le.xa){if((w=vn())==null){Te=1;break e}if(function(Ft,Et){var Xt=[0],Yt=[0],vt=[0];t:for(;;){if(Ft==null)return 0;if(Et==null)return Ft.a=2,0;if(Ft.l=Et,Ft.a=0,K(Ft.m,Et.data,Et.w,Et.ha),!ot(Ft.m,Xt,Yt,vt)){Ft.a=3;break t}if(Ft.xb=Pu,Et.width=Xt[0],Et.height=Yt[0],!cn(Xt[0],Yt[0],1,Ft,null))break t;return 1}return e(Ft.a!=0),0}(w,ce)){if(ce=(D=cl(ce.width,ce.height,Te.Oa,Te.ba))==0){t:{ce=w;n:for(;;){if(ce==null){ce=0;break t}if(e(ce.s.yc!=null),e(ce.s.Ya!=null),e(0<ce.s.Wb),e((W=ce.l)!=null),e((Le=W.ma)!=null),ce.xb!=0){if(ce.ca=Le.ba,ce.tb=Le.tb,e(ce.ca!=null),!Xu(Le.Oa,W,Fa)){ce.a=2;break n}if(!ri(ce,W.width)||W.da)break n;if((W.da||en(ce.ca.S))&&Pt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&Pt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!ee(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break n}ce.xb=0}if(!ar(ce,ce.V,ce.Ba,ce.c,ce.i,W.o,ir))break n;Le.Dc=ce.Ma,ce=1;break t}e(ce.a!=0),ce=0}ce=!ce}ce&&(D=w.a)}else D=w.a}else{if((w=new jr)==null){Te=1;break e}if(w.Fa=Le.na,w.P=Le.P,w.qc=Le.Sa,Ti(w,ce)){if((D=cl(ce.width,ce.height,Te.Oa,Te.ba))==0){if(w.Aa=0,W=Te.Oa,e((Le=w)!=null),W!=null){if(0<(Re=0>(Re=W.Md)?0:100<Re?255:255*Re/100)){for(Ye=mt=0;4>Ye;++Ye)12>(Rt=Le.pb[Ye]).lc&&(Rt.ia=Re*Tf[0>Rt.lc?0:Rt.lc]>>3),mt|=Rt.ia;mt&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=W.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}br(w,ce)||(D=w.a)}}else D=w.a}D==0&&Te.Oa!=null&&Te.Oa.fd&&(D=ul(Te.ba))}Te=D}Pe=Te!=0?null:11>Pe?Oe.f.RGBA.eb:Oe.f.kb.y}else Pe=null;return Pe};var Nf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,j){for(var J="",V=0;V<4;V++)J+=String.fromCharCode(O[j++]);return J}function h(O,j){return(O[j+0]<<0|O[j+1]<<8|O[j+2]<<16)>>>0}function p(O,j){return(O[j+0]<<0|O[j+1]<<8|O[j+2]<<16|O[j+3]<<24)>>>0}new l;var v=[0],m=[0],x=[],E=new l,k=t,T=function(O,j){var J={},V=0,B=!1,H=0,$=0;if(J.frames=[],!function(q,Z,ie,de){for(var ye=0;ye<de;ye++)if(q[Z+ye]!=ie.charCodeAt(ye))return!0;return!1}(O,j,"RIFF",4)){var R,I;for(p(O,j+=4),j+=8;j<O.length;){var X=c(O,j),K=p(O,j+=4);j+=4;var _e=K+(1&K);switch(X){case"VP8 ":case"VP8L":J.frames[V]===void 0&&(J.frames[V]={}),(se=J.frames[V]).src_off=B?$:j-8,se.src_size=H+K+8,V++,B&&(B=!1,H=0,$=0);break;case"VP8X":(se=J.header={}).feature_flags=O[j];var ve=j+4;se.canvas_width=1+h(O,ve),ve+=3,se.canvas_height=1+h(O,ve),ve+=3;break;case"ALPH":B=!0,H=_e+8,$=j-8;break;case"ANIM":(se=J.header).bgcolor=p(O,j),ve=j+4,se.loop_count=(R=O)[(I=ve)+0]<<0|R[I+1]<<8,ve+=2;break;case"ANMF":var Ge,se;(se=J.frames[V]={}).offset_x=2*h(O,j),j+=3,se.offset_y=2*h(O,j),j+=3,se.width=1+h(O,j),j+=3,se.height=1+h(O,j),j+=3,se.duration=h(O,j),j+=3,Ge=O[j++],se.dispose=1&Ge,se.blend=Ge>>1&1}X!="ANMF"&&(j+=_e)}return J}}(k,0);T.response=k,T.rgbaoutput=!0,T.dataurl=!1;var A=T.header?T.header:null,z=T.frames?T.frames:null;if(A){A.loop_counter=A.loop_count,v=[A.canvas_height],m=[A.canvas_width];for(var Y=0;Y<z.length&&z[Y].blend!=0;Y++);}var ne=z[0],ge=E.WebPDecodeRGBA(k,ne.src_off,ne.src_size,m,v);ne.rgba=ge,ne.imgwidth=m[0],ne.imgheight=v[0];for(var pe=0;pe<m[0]*v[0]*4;pe++)x[pe]=ge[pe];return this.width=m,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof Eb=="function"},n=function(v,m,x,E){var k=4,T=o;switch(E){case t.image_compression.FAST:k=1,T=s;break;case t.image_compression.MEDIUM:k=6,T=a;break;case t.image_compression.SLOW:k=9,T=l}v=r(v,m,x,T);var A=Eb(v,{level:k});return t.__addimage__.arrayBufferToBinaryString(A)},r=function(v,m,x,E){for(var k,T,A,z=v.length/m,Y=new Uint8Array(v.length+z),ne=h(),ge=0;ge<z;ge+=1){if(A=ge*m,k=v.subarray(A,A+m),E)Y.set(E(k,x,T),A+ge);else{for(var pe,O=ne.length,j=[];pe<O;pe+=1)j[pe]=ne[pe](k,x,T);var J=p(j.concat());Y.set(j[J],A+ge)}T=k}return Y},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var x,E=[],k=v.length;E[0]=1;for(var T=0;T<k;T+=1)x=v[T-m]||0,E[T+1]=v[T]-x+256&255;return E},o=function(v,m,x){var E,k=[],T=v.length;k[0]=2;for(var A=0;A<T;A+=1)E=x&&x[A]||0,k[A+1]=v[A]-E+256&255;return k},a=function(v,m,x){var E,k,T=[],A=v.length;T[0]=3;for(var z=0;z<A;z+=1)E=v[z-m]||0,k=x&&x[z]||0,T[z+1]=v[z]+256-(E+k>>>1)&255;return T},l=function(v,m,x){var E,k,T,A,z=[],Y=v.length;z[0]=4;for(var ne=0;ne<Y;ne+=1)E=v[ne-m]||0,k=x&&x[ne]||0,T=x&&x[ne-m]||0,A=c(E,k,T),z[ne+1]=v[ne]-A+256&255;return z},c=function(v,m,x){if(v===m&&m===x)return v;var E=Math.abs(m-x),k=Math.abs(v-x),T=Math.abs(v+m-x-x);return E<=k&&E<=T?v:k<=T?m:x},h=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(x){return x.reduce(function(E,k){return E+Math.abs(k)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(v,m,x,E){var k,T,A,z,Y,ne,ge,pe,O,j,J,V,B,H,$,R=this.decode.FLATE_DECODE,I="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(A=new zH(v)).imgData,T=A.bits,k=A.colorSpace,Y=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){O=(pe=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,J=new Uint8Array(O*A.colors),j=new Uint8Array(O);var X,K=A.pixelBitlength-A.bits;for(H=0,$=0;H<O;H++){for(B=pe[H],X=0;X<K;)J[$++]=B>>>X&255,X+=A.bits;j[H]=B>>>X&255}}if(A.bits===16){O=(pe=new Uint32Array(A.decodePixels().buffer)).length,J=new Uint8Array(O*(32/A.pixelBitlength)*A.colors),j=new Uint8Array(O*(32/A.pixelBitlength)),V=A.colors>1,H=0,$=0;for(var _e=0;H<O;)B=pe[H++],J[$++]=B>>>0&255,V&&(J[$++]=B>>>16&255,B=pe[H++],J[$++]=B>>>0&255),j[_e++]=B>>>16&255;T=8}E!==t.image_compression.NONE&&e()?(v=n(J,A.width*A.colors,A.colors,E),ge=n(j,A.width,1,E)):(v=J,ge=j,R=void 0)}if(A.colorType===3&&(k=this.color_spaces.INDEXED,ne=A.palette,A.transparency.indexed)){var ve=A.transparency.indexed,Ge=0;for(H=0,O=ve.length;H<O;++H)Ge+=ve[H];if((Ge/=255)===O-1&&ve.indexOf(0)!==-1)z=[ve.indexOf(0)];else if(Ge!==O){for(pe=A.decodePixels(),j=new Uint8Array(pe.length),H=0,O=pe.length;H<O;H++)j[H]=ve[pe[H]];ge=n(j,A.width,1)}}var se=function(q){var Z;switch(q){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(E);return R===this.decode.FLATE_DECODE&&(I="/Predictor "+se+" "),I+="/Colors "+Y+" /BitsPerComponent "+T+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:x,data:v,index:m,filter:R,decodeParameters:I,transparency:z,palette:ne,sMask:ge,predictor:se,width:A.width,height:A.height,bitsPerComponent:T,colorSpace:k}}}})(Cr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new $H(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new l2(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(Cr.API),uc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},uc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ss.log("bit decode error:"+n)}},uc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},uc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},uc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},uc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=t}},uc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},uc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},uc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},uc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new uc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new l2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Cr.API),O5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new O5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new l2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Cr.API),Cr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var h=r[c],p=r[c+1],v=r[c+2],m=r[c+3];s[a++]=h,s[a++]=p,s[a++]=v,o[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Cr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yf=Cr.API,C0=Yf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,m=t.length,x=0,E=a[0]||l,k=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Ki(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/h:0,k.push((a[r]||E)/l+v)),x=r;return k},A5=Yf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Yf.processArabic&&(t=Yf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:C0.apply(this,arguments).reduce(function(s,o){return s+o},0)},T5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},D5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,h=[],p=[h],v=n.textIndent||0,m=0,x=0,E=t.split(" "),k=C0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var T=Array(l).join(" "),A=[];E.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?A=A.concat(Y.map(function(ne,ge){return(ge&&ne.length?`
`:"")+ne})):A.push(Y[0])}),E=A,l=A5.apply(this,[T,n])}for(s=0,o=E.length;s<o;s++){var z=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),z=1),v+m+(x=(i=C0.apply(this,[r,n])).reduce(function(Y,ne){return Y+ne},0))>e||z){if(x>e){for(a=T5.apply(this,[r,i,e-(v+m),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(Y,ne){return Y+ne},0)}else h=[r];p.push(h),v=x+l,m=k}else h.push(r),v+=m+x,m=k}return c=l?function(Y,ne){return(ne?T:"")+Y.join(" ")}:function(Y){return Y.join(" ")},p.map(c)},Yf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(D5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,m,x,E,k=["{"];for(var T in p){if(v=p[T],isNaN(parseInt(T,10))?m="'"+T+"'":(T=parseInt(T,10),m=(m=s(T).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(Ki(v)!=="object")throw new Error("Don't know what to do with value type "+Ki(v)+".");x=o(v)}k.push(m+x)}return k.push("}"),k.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,x,E,k={},T=1,A=k,z=[],Y="",ne="",ge=p.length-1,pe=1;pe<ge;pe+=1)(E=p[pe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(z.push([A,x]),A={},x=void 0):E=="}"?((m=z.pop())[0][m[1]]=A,x=void 0,A=m[0]):E=="-"?T=-1:x===void 0?n.hasOwnProperty(E)?(Y+=n[E],x=parseInt(Y,16)*T,T=1,Y=""):Y+=E:n.hasOwnProperty(E)?(ne+=n[E],A[x]=parseInt(ne,16)*T,T=1,x=void 0,ne=""):ne+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,m=h.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Cr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Gg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Cr),function(t){function e(){return(Er.canvg?Promise.resolve(Er.canvg):kd(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Cr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw ss.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw ss.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Cr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Cr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,p=0;function v(x,E){var k,T=!1;for(k=0;k<x.length;k+=1)x[k]===E&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Ki(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Cr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,c,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,x){return m-x})).length;p<v;p++)o=a[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",x=0;x<v.length;x++)m+=String.fromCharCode(v[x]);var E=c();h({data:m,addLength1:!0,objectId:E}),l("endobj");var k=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var T=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ap(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ap(a.fontName)),l("/FontDescriptor "+T+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+ap(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var x=c();h({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+ap(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var T=0;T<a.metadata.hmtx.widths.length;T++)a.metadata.hmtx.widths[T]=parseInt(a.metadata.hmtx.widths[T]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+ap(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,h=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,x=p.fonts,E=m,k="",T=0,A="",z=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:p};for(A=a,E=m,Array.isArray(a)&&(A=a[0]),T=0;T<A.length;T+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[A[T].charCodeAt(0)]),o||A[T].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?k+=A[T]:k+="";var Y="";return parseInt(E.slice(1))<14||z==="WinAnsiEncoding"?Y=v(k,E).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(Y=n(k,x[E])),p.isHex=!0,{text:Y,x:l,y:c,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Cr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Cr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,h,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,z=0;this.__bidiEngine__={};var Y=function(V){var B=V.charCodeAt(),H=B>>8,$=E[H];return $!==void 0?p[256*$+(255&B)]:H===252||H===253?"AL":T.test(H)?"L":H===8?"R":"N"},ne=function(V){for(var B,H=0;H<V.length;H++){if((B=Y(V.charAt(H)))==="L")return!1;if(B==="R")return!0}return!1},ge=function(V,B,H,$){var R,I,X,K,_e=B[$];switch(_e){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(_e="AN");break;case"AL":A=!0,_e="R";break;case"WS":_e="N";break;case"CS":$<1||$+1>=B.length||(R=H[$-1])!=="EN"&&R!=="AN"||(I=B[$+1])!=="EN"&&I!=="AN"?_e="N":A&&(I="AN"),_e=I===R?I:"N";break;case"ES":_e=(R=$>0?H[$-1]:"B")==="EN"&&$+1<B.length&&B[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&H[$-1]==="EN"){_e="EN";break}if(A){_e="N";break}for(X=$+1,K=B.length;X<K&&B[X]==="ET";)X++;_e=X<K&&B[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(K=B.length,X=$+1;X<K&&B[X]==="NSM";)X++;if(X<K){var ve=V[$],Ge=ve>=1425&&ve<=2303||ve===64286;if(R=B[X],Ge&&(R==="R"||R==="AL")){_e="R";break}}}_e=$<1||(R=B[$-1])==="B"?"N":H[$-1];break;case"B":A=!1,i=!0,_e=z;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":_e="N"}return _e},pe=function(V,B,H){var $=V.split("");return H&&O($,H,{hiLevel:z}),$.reverse(),B&&B.reverse(),$.join("")},O=function(V,B,H){var $,R,I,X,K,_e=-1,ve=V.length,Ge=0,se=[],q=z?m:v,Z=[];for(A=!1,i=!1,s=!1,R=0;R<ve;R++)Z[R]=Y(V[R]);for(I=0;I<ve;I++){if(K=Ge,se[I]=ge(V,Z,se,I),$=240&(Ge=q[K][x[se[I]]]),Ge&=15,B[I]=X=q[Ge][5],$>0)if($===16){for(R=_e;R<I;R++)B[R]=1;_e=-1}else _e=-1;if(q[Ge][6])_e===-1&&(_e=I);else if(_e>-1){for(R=_e;R<I;R++)B[R]=X;_e=-1}Z[I]==="B"&&(B[I]=0),H.hiLevel|=X}s&&function(ie,de,ye){for(var he=0;he<ye;he++)if(ie[he]==="S"){de[he]=z;for(var Q=he-1;Q>=0&&ie[Q]==="WS";Q--)de[Q]=z}}(Z,B,ve)},j=function(V,B,H,$,R){if(!(R.hiLevel<V)){if(V===1&&z===1&&!i)return B.reverse(),void(H&&H.reverse());for(var I,X,K,_e,ve=B.length,Ge=0;Ge<ve;){if($[Ge]>=V){for(K=Ge+1;K<ve&&$[K]>=V;)K++;for(_e=Ge,X=K-1;_e<X;_e++,X--)I=B[_e],B[_e]=B[X],B[X]=I,H&&(I=H[_e],H[_e]=H[X],H[X]=I);Ge=K}Ge++}}},J=function(V,B,H){var $=V.split(""),R={hiLevel:z};return H||(H=[]),O($,H,R),function(I,X,K){if(K.hiLevel!==0&&h)for(var _e,ve=0;ve<I.length;ve++)X[ve]===1&&(_e=k.indexOf(I[ve]))>=0&&(I[ve]=k[_e+1])}($,H,R),j(2,$,B,H,R),j(1,$,B,H,R),$.join("")};return this.__bidiEngine__.doBidiReorder=function(V,B,H){if(function(R,I){if(I)for(var X=0;X<R.length;X++)I[X]=X;a===void 0&&(a=ne(R)),c===void 0&&(c=ne(R))}(V,B),o||!l||c)if(o&&l&&a^c)z=a?1:0,V=pe(V,B,H);else if(!o&&l&&c)z=a?1:0,V=J(V,B,H),V=pe(V,B);else if(!o||a||l||c){if(o&&!l&&a^c)V=pe(V,B),a?(z=0,V=J(V,B,H)):(z=1,V=J(V,B,H),V=pe(V,B));else if(o&&a&&!l&&c)z=1,V=J(V,B,H),V=pe(V,B);else if(!o&&!l&&a^c){var $=h;a?(z=1,V=J(V,B,H),z=0,h=!1,V=J(V,B,H),h=$):(z=0,V=J(V,B,H),V=pe(V,B),z=1,h=!1,V=J(V,B,H),h=$,V=pe(V,B))}}else z=0,V=J(V,B,H);else z=a?1:0,V=J(V,B,H);return V},this.__bidiEngine__.setOptions=function(V){V&&(o=V.isInputVisual,l=V.isOutputVisual,a=V.isInputRtl,c=V.isOutputRtl,h=V.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Cr),Cr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new nG(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new VH(this.contents),this.head=new HH(this),this.name=new KH(this),this.cmap=new rP(this),this.toUnicode={},this.hhea=new GH(this),this.maxp=new ZH(this),this.hmtx=new XH(this),this.post=new qH(this),this.os2=new WH(this),this.loca=new tG(this),this.glyf=new JH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ec,Sh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),VH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,h,p,v,m,x,E;for(E in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),h=16*m-p,(i=new Sh).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*m,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=iP.call(n);n.length%4;)n.push(0);for(s=new Sh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),UH={}.hasOwnProperty,id=function(t,e){for(var n in e)UH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ec=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var HH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Sh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),I5=function(){function t(e,n){var r,i,s,o,a,l,c,h,p,v,m,x,E,k,T,A,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),e.pos+=2,E=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),c=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),h=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,ne;for(ne=[],l=Y=0;0<=i?Y<i:Y>i;l=0<=i?++Y:--Y)ne.push(e.readUInt16());return ne}(),l=T=0,z=s.length;T<z;l=++T)for(k=s[l],r=A=x=E[l];x<=k?A<=k:A>=k;r=x<=k?++A:--A)h[l]===0?o=r+c[l]:(o=a[h[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,h,p,v,m,x,E,k,T,A,z,Y,ne,ge,pe,O,j,J,V,B,H,$,R,I,X,K,_e,ve,Ge,se,q,Z,ie,de,ye,he,Q,Ae,De,Ke;switch($=new Sh,o=Object.keys(e).sort(function(fe,ee){return fe-ee}),n){case"macroman":for(E=0,k=function(){var fe=[];for(x=0;x<256;++x)fe.push(0);return fe}(),A={0:0},s={},R=0,_e=o.length;R<_e;R++)A[Q=e[i=o[R]]]==null&&(A[Q]=++E),s[i]={old:e[i],new:A[e[i]]},k[i]=A[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(k),{charMap:s,subtable:$.data,maxGlyphID:E+1};case"unicode":for(B=[],p=[],z=0,A={},r={},T=c=null,I=0,ve=o.length;I<ve;I++)A[ne=e[i=o[I]]]==null&&(A[ne]=++z),r[i]={old:ne,new:A[ne]},a=A[ne]-i,T!=null&&a===c||(T&&p.push(T),B.push(i),c=a),T=i;for(T&&p.push(T),p.push(65535),B.push(65535),J=2*(j=B.length),O=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(O/2)/Math.LN2,pe=2*j-O,l=[],ge=[],m=[],x=X=0,Ge=B.length;X<Ge;x=++X){if(V=B[x],h=p[x],V===65535){l.push(0),ge.push(0);break}if(V-(H=r[V].new)>=32768)for(l.push(0),ge.push(2*(m.length+j-x)),i=K=V;V<=h?K<=h:K>=h;i=V<=h?++K:--K)m.push(r[i].new);else l.push(H-V),ge.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*j+2*m.length),$.writeUInt16(0),$.writeUInt16(J),$.writeUInt16(O),$.writeUInt16(v),$.writeUInt16(pe),ye=0,se=p.length;ye<se;ye++)i=p[ye],$.writeUInt16(i);for($.writeUInt16(0),he=0,q=B.length;he<q;he++)i=B[he],$.writeUInt16(i);for(Ae=0,Z=l.length;Ae<Z;Ae++)a=l[Ae],$.writeUInt16(a);for(De=0,ie=ge.length;De<ie;De++)Y=ge[De],$.writeUInt16(Y);for(Ke=0,de=m.length;Ke<de;Ke++)E=m[Ke],$.writeUInt16(E);return{charMap:r,subtable:$.data,maxGlyphID:z+1}}},t}(),rP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new I5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=I5.encode(n,r),(s=new Sh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),GH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),WH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),qH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),YH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,h,p,v,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,h=n.readString(s.length),a=new YH(h,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ZH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(n.readInt16());return p}(),this.widths=(function(){var h,p,v,m;for(m=[],h=0,p=(v=this.metrics).length;h<p;h++)o=v[h],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),iP=[].slice,JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,h,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Sh(r.read(s))).readShort(),h=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new eG(l,h,v,c,p):new QH(l,a,h,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),QH=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),eG=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sh(iP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),tG=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Ec),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),nG=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,h,p,v,m,x,E,k,T;for(i in r=rP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},T=r.charMap)m[(l=T[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in m||(m[x]=v++);return h=function(A){var z,Y;for(z in Y={},A)Y[A[z]]=z;return Y}(m),p=Object.keys(h).sort(function(A,z){return A-z}),E=function(){var A,z,Y;for(Y=[],A=0,z=p.length;A<z;A++)a=p[A],Y.push(h[a]);return Y}(),s=this.font.glyf.encode(o,E,m),c=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();Cr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const rG={class:"h-full flex"},iG={class:"flex-1 relative"},sG={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},oG={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},aG={class:"text-center max-w-lg mx-auto p-8"},lG={class:"space-y-4"},uG={class:"map-parent"},cG={class:"map-content flex flex-col h-full"},dG={class:"flex-1 flex flex-col md:flex-row relative"},hG={class:"flex-1 relative"},fG={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},pG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},gG={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},mG={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},vG={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},yG={key:0,class:"space-y-4"},bG={key:0,class:"space-y-2"},_G={class:"grid grid-cols-1 gap-2"},wG=["onClick"],xG={class:"font-medium text-gray-900"},LG={key:1,class:"space-y-2"},SG={class:"flex items-center mb-4"},CG={class:"text-sm text-gray-600"},EG={class:"grid grid-cols-1 gap-2"},PG=["onClick"],MG={class:"font-medium text-gray-900"},kG={key:2,class:"space-y-2"},AG={class:"flex items-center mb-4"},TG={class:"text-sm text-gray-600"},DG={class:"grid grid-cols-1 gap-2"},NG={key:0,class:"text-center py-4"},OG=["onClick"],IG={class:"font-medium text-gray-900"},BG={key:3,class:"space-y-2"},RG={class:"flex items-center mb-4"},FG={class:"text-sm text-gray-600"},jG={class:"grid grid-cols-1 gap-2"},zG=["onClick"],$G={class:"font-medium text-gray-900"},VG={class:"text-sm text-gray-500"},UG={class:"text-xs text-gray-400 mt-1"},HG=["onClick"],GG={key:1,class:"space-y-4"},WG={key:0,class:"space-y-2"},qG={class:"grid grid-cols-1 gap-2"},YG={key:0,class:"text-center py-8"},KG=["onClick"],ZG={class:"font-medium text-gray-900"},XG={key:1,class:"space-y-2"},JG={class:"flex items-center mb-4"},QG={class:"text-sm text-gray-600"},eW={class:"grid grid-cols-1 gap-2"},tW=["onClick"],nW={class:"font-medium text-gray-900"},rW={class:"text-sm text-gray-500"},iW={class:"text-xs text-gray-400 mt-1"},sW=["onClick"],oW={key:2,class:"space-y-4"},aW={key:0,class:"space-y-2"},lW={class:"grid grid-cols-1 gap-2"},uW=["onClick"],cW={class:"font-medium text-gray-900"},dW={key:1,class:"space-y-2"},hW={class:"flex items-center mb-4"},fW={class:"text-sm text-gray-600"},pW={class:"grid grid-cols-1 gap-2"},gW={key:0,class:"text-center py-4"},mW=["onClick"],vW={class:"font-medium text-gray-900"},yW={key:2,class:"space-y-2"},bW={class:"flex items-center mb-4"},_W={class:"text-sm text-gray-600"},wW={class:"grid grid-cols-1 gap-2"},xW=["onClick"],LW={class:"font-medium text-gray-900"},SW={class:"text-sm text-gray-500"},CW={class:"text-xs text-gray-400 mt-1"},EW=["onClick"],PW={key:3,class:"space-y-4"},MW={key:0,class:"text-center py-8"},kW={key:1,class:"space-y-2"},AW=["onClick"],TW={class:"font-medium text-gray-900"},DW={class:"text-sm text-gray-500"},NW={class:"text-xs text-gray-400 mt-1"},OW=["onClick"],IW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},BW={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},RW={class:"text-center mb-4"},FW={class:"mt-2 text-gray-600"},B5=Ss({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=XB(),r=Lt(null),i=Lt(!1),s=$y(),o=Ap(),a=bf(),l=Kl(),c=Lt([]),h=Lt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:x,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:T,featureGroup:A,adjustView:z,clearActiveControlPoints:Y,isDrawing:ne}=BU(),{initMap:ge,changeBaseMap:pe}=RU(),O=Lt(!1),j=Lt(!1),J=Lt(!1),V=Lt(!1),B=Lt(null),H=Lt(null),$=Lt(null),R=Lt(!1),I=Lt(null),X=to(),K=Lt([]),_e=Lt([]),ve=Lt([]),Ge=Lt(null),se=Lt(null),q=Lt(null),Z=Lt(!1),ie=Lt(!1),de=Lt(!1),ye=Lt(null),he=Un(()=>{var ot,nt;return console.log("[MapView][filteredClients] Computing with:",{userType:(ot=X.user)==null?void 0:ot.user_type,selectedSalarie:Ge.value,salarieVisiteurs:_e.value,visiteurCount:((nt=_e.value)==null?void 0:nt.length)||0}),X.isSalarie||Ge.value?_e.value:[]}),Q=Un(()=>{var qt,Wt,ir;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(qt=v.value.properties)==null?void 0:qt.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const ot=v.value.properties||{};let nt="unknown";ot.type?nt=ot.type:v.value instanceof Ut.Circle?nt="Circle":v.value instanceof Pa||v.value instanceof Ut.Rectangle?nt="Rectangle":v.value instanceof uh||v.value instanceof Ut.Polygon?nt="Polygon":(v.value instanceof qo||v.value instanceof Ut.Polyline&&!(v.value instanceof Ut.Polygon))&&(nt="Line"),console.log(`[MapView][selectedShape] Type de forme dtect: ${nt}`),ot.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=nt);let Ht;if(ot.style&&ot.style.name)Ht=ot.style.name,console.log("[MapView][selectedShape] Using name from style:",Ht);else if(ot.name)Ht=ot.name,console.log("[MapView][selectedShape] Using name from properties:",Ht);else if(v.value.name)Ht=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ht);else{const St=Object.getOwnPropertyDescriptor(v.value,"name");St&&St.value&&(Ht=St.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ht));const gn=["_name","displayName","title"];for(const Qn of gn)if(v.value[Qn]){Ht=v.value[Qn],console.log(`[MapView][selectedShape] Found name in ${Qn}:`,Ht);break}}Ht&&(console.log(`[MapView][selectedShape] Ensuring name "${Ht}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=Ht,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=Ht,v.value.name=Ht,typeof v.value.setName=="function"&&(v.value.setName(Ht),console.log(`[MapView][selectedShape] Used setName method to set name "${Ht}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:nt,name:ot.name,foundName:Ht,hasNameProperty:"name"in ot,allPropertiesKeys:Object.keys(ot),layerId:v.value._leaflet_id,rawProperties:ot,layerName:v.value.name,layerPropertiesName:(Wt=v.value.properties)==null?void 0:Wt.name});const kn={...ot,type:nt,name:Ht||v.value.name||ot.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},tn={type:nt,properties:kn,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:tn.type,hasName:"name"in tn.properties,name:tn.properties.name,layerName:tn.layer.name,layerPropertiesName:(ir=tn.layer.properties)==null?void 0:ir.name}),tn});function Ae(ot){const nt=ot.getCenter(),Ht=ot.getZoom(),kn={lat:nt.lat,lng:nt.lng,zoom:Ht};document.cookie=`mapState=${JSON.stringify(kn)};max-age=2592000;path=/`}function De(){const nt=document.cookie.split(";").find(Ht=>Ht.trim().startsWith("mapState="));if(nt)try{return JSON.parse(nt.split("=")[1])}catch(Ht){return console.error("Erreur lors de la lecture du cookie de position:",Ht),null}return null}no(async()=>{var ot,nt;console.log("[MapView][onMounted] Initialisation du composant MapView"),window.addEventListener("resize",Cs),console.log("[MapView][onMounted] tat initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(X.isAdmin||X.isEntreprise)&&await $t(),X.isEntreprise){Z.value=!0;try{const St=await Dn.get("/users/",{params:{role:"SALARIE",entreprise:(ot=X.user)==null?void 0:ot.id}});K.value=St.data}catch(St){console.error("Error loading salaries:",St),K.value=[]}finally{Z.value=!1}}if(X.isSalarie){ie.value=!0;try{const St=await X.fetchSalarieVisiteurs(((nt=X.user)==null?void 0:nt.id)||0);_e.value=Array.isArray(St)?St:[St]}catch(St){console.error("Error loading clients:",St)}finally{ie.value=!1}}const Ht=De(),kn=Ht?[Ht.lat,Ht.lng]:[46.603354,1.888334],tn=(Ht==null?void 0:Ht.zoom)??6;if(r.value&&!m.value){const St=x(r.value,kn,tn);St.pm.setLang("fr"),St.pm.addControls({rotateMode:!1}),ge(St),St.on("moveend",()=>{Ae(St)}),window.addEventListener("map-set-location",gn=>{if(St&&gn.detail){const{lat:Qn,lng:ar,zoom:ur}=gn.detail;St.flyTo([Qn,ar],ur,{duration:1.5,easeLinearity:.25})}}),A.value&&(A.value.on("layeradd",gn=>{const Qn=gn.layer;Qn&&Qn._leaflet_id&&c.value.findIndex(ur=>ur.layer&&ur.layer._leaflet_id===Qn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Qn._leaflet_id}  shapes.value`),c.value.push({layer:Qn,id:Qn._dbId||Qn._leaflet_id}))}),A.value.on("layerremove",gn=>{const Qn=gn.layer;if(Qn&&Qn._leaflet_id)if(!Qn._dbId&&(!Qn.properties||Qn.properties&&!Qn.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Qn._leaflet_id} supprime dfinitivement`);const ur=c.value.findIndex(vn=>vn.layer&&vn.layer._leaflet_id===Qn._leaflet_id);ur!==-1&&c.value.splice(ur,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Qn._leaflet_id} supprime du featureGroup mais conserve dans shapes.value pour restauration ultrieure`)}))}if(h.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramtres d'URL:",h.value.planId),await le(h.value.planId);const St=document.querySelector(".map-parent");St instanceof HTMLElement&&(St.style.display="block"),h.value.lat&&h.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnes:",h.value.lat,h.value.lng),m.value.flyTo([h.value.lat,h.value.lng],16)),h.value.noteId&&A.value&&(console.log("[MapView][onMounted] Recherche de la note:",h.value.noteId),setTimeout(()=>{var Qn;const gn=((Qn=A.value)==null?void 0:Qn.getLayers())||[];for(const ar of gn)if(ar._dbId===h.value.noteId||ar.id===h.value.noteId){console.log("[MapView][onMounted] Note trouve:",ar),typeof ar.fire=="function"&&ar.fire("click");break}},1e3)),h.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",h.value.tool),E(h.value.tool))}catch(St){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",St),qt()}else qt();async function qt(){const St=localStorage.getItem("lastPlanId");if(St)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",St),await le(parseInt(St));const gn=document.querySelector(".map-parent");gn instanceof HTMLElement&&(gn.style.display="block")}catch(gn){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",gn),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ee(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan  charger"),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ee()}window.addEventListener("shape:created",St=>{const{shape:gn,type:Qn,properties:ar}=St.detail;console.log("[MapView] Nouvelle forme cre",{shape:gn,type:Qn,properties:ar}),o.addElement(gn),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] vnement geonote:savePlan reu - Sauvegarde automatique du plan"),ze()}),window.addEventListener("geonote:select",St=>{if(console.log("[MapView] vnement geonote:select reu",St.detail),St.detail&&St.detail.geoNote){const gn=St.detail.geoNote;v.value=gn,Ko(()=>{console.log("[MapView] Note golocalise slectionne:",gn)})}}),window.addEventListener("categoriesReactivated",St=>{console.log("[MapView][categoriesReactivated] vnement reu:",St.detail),rr()}),window.addEventListener("shapeTypesReactivated",St=>{console.log("[MapView][shapeTypesReactivated] vnement reu:",St.detail),rr()});const Wt=St=>{if(console.log("[MapView] dition de note via Leaflet",St),console.log("[MapView] Type de e:",typeof St,"Contenu de e:",JSON.stringify(St)),!St||!St.note){console.error("[MapView] Erreur: e.note est undefined ou null",St);return}const gn=St.note;console.log("[MapView] Note  diter:",gn),H.value={id:gn.id,title:gn.title||gn.name,description:gn.description,location:gn.location,columnId:gn.columnId||a.getDefaultColumn.id,accessLevel:gn.accessLevel,style:gn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:gn.createdAt||new Date().toISOString(),updatedAt:gn.updatedAt||new Date().toISOString(),comments:gn.comments||[],photos:gn.photos||[]},console.log("[MapView] editingMapNote.value aprs conversion:",H.value),J.value=!0,console.log("[MapView] showNoteEditModal.value:",J.value)},ir=St=>{if(console.log("[MapView] dition de note via vnement global",St),!St.detail||!St.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",St);return}const gn=St.detail.note;console.log("[MapView] Note  diter (global):",gn);let ar=St.detail.backendId||gn.backendId;if(!ar){const ur=c.value.find(vn=>vn.layer===St.detail.source);ar=ur?ur.id:gn.id}console.log("[MapView] ID backend de la note pour l'API:",ar,"Source:",St.detail.source?"Couche Leaflet":"Autre"),H.value={id:ar,leafletId:gn.id,title:gn.title||gn.name,description:gn.description,location:gn.location,columnId:gn.columnId||a.getDefaultColumn.id,accessLevel:gn.accessLevel,style:gn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:gn.createdAt||new Date().toISOString(),updatedAt:gn.updatedAt||new Date().toISOString(),comments:gn.comments||[],photos:gn.photos||[]},console.log("[MapView] Note prpare pour dition:",H.value),J.value=!0};window.addEventListener("geonote:edit",ir),A.value&&(A.value.off("note:edit"),A.value.on("note:edit",Wt))}catch(Ht){console.error("Error during component mount:",Ht),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ee(),localStorage.removeItem("lastPlanId")}}),fi(()=>o.hasUnsavedChanges,ot=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",ot),ot&&B.value&&s.markUnsavedChanges()}),fi(()=>s.plans,ot=>{console.log("[MapView][watch irrigationStore.plans] Mise  jour de la liste des plans:",ot.length),j.value&&(q.value||console.log("[MapView][watch irrigationStore.plans] Mise  jour de l'interface client"))},{deep:!0}),fi(()=>o.filters,(ot,nt)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres dtect:",JSON.stringify(ot,null,2)),nt){const Ht=JSON.stringify(nt.accessLevels)!==JSON.stringify(ot.accessLevels),kn=JSON.stringify(nt.categories)!==JSON.stringify(ot.categories),tn=JSON.stringify(nt.shapeTypes)!==JSON.stringify(ot.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements dtects:",{accessLevelsChanged:Ht,categoriesChanged:kn,shapeTypesChanged:tn}),Ht||kn||tn?(console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),rr()):console.log("[MapView][watch drawingStore.filters] Aucun changement rel, pas de mise  jour")}else console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),rr()},{deep:!0});const Ke=ot=>{console.log("[MapView][filtersChanged] vnement reu:",ot.detail),rr()};no(()=>{window.addEventListener("filtersChanged",Ke)}),Hu(()=>{window.removeEventListener("filtersChanged",Ke),console.log("[MapView][filtersChanged] vnement dsactiv")}),fi(()=>o.getFilteredElements,(ot,nt)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage, lments filtrs:",{nouveaux:ot.length,anciens:nt?nt.length:"aucun",ids:ot.map(Ht=>Ht.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage suite au changement d'elements filtrs"),rr()},{deep:!0}),fi(m,async ot=>{var nt;console.log(`
[MapView][watch map] Nouvelle carte:`,!!ot),ot&&s.currentPlan&&!((nt=A.value)!=null&&nt.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",s.currentPlan.id),ee(),await o.loadPlanElements(s.currentPlan.id))}),fi(()=>s.currentPlan,async(ot,nt)=>{var Ht,kn,tn;if((ot==null?void 0:ot.id)===(nt==null?void 0:nt.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",ot==null?void 0:ot.id);try{if(ot){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),B.value=ot;const qt=document.querySelector(".map-parent");qt instanceof HTMLElement&&(qt.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),B.value=null,ee();const qt=document.querySelector(".map-parent");qt instanceof HTMLElement&&(qt.style.display="none")}}catch(qt){console.error("[MapView][watch currentPlan] ERREUR:",qt),B.value=null,ee()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(Ht=B.value)==null?void 0:Ht.id,storePlanId:(kn=s.currentPlan)==null?void 0:kn.id,mapVisible:m.value!==null,mapParentDisplay:(tn=document.querySelector(".map-parent"))==null?void 0:tn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),kh(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",Cs),window.removeEventListener("shape:created",()=>{})});function fe(){i.value=!i.value}function ee(){A.value&&(A.value.eachLayer(ot=>{var nt;((nt=ot.properties)==null?void 0:nt.type)==="Note"&&typeof ot.resetPlanSaveState=="function"&&ot.resetPlanSaveState()}),A.value.clearLayers()),c.value=[],Y(),v.value=null,p.value=""}async function oe(ot){return await En.measureAsync("refreshMapWithPlan",async()=>{try{En.measure("refreshMapWithPlan:clearMap",()=>{ee()},"MapView"),await En.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(ot)},"MapView");const nt=En.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(ot),"MapView");nt?(En.measure("refreshMapWithPlan:updateCurrentPlan",()=>{B.value=nt,s.setCurrentPlan(nt),o.setCurrentPlan(nt.id),localStorage.setItem("lastPlanId",nt.id.toString())},"MapView"),await En.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes golocalises associes au plan:",ot);const kn=(await da.getNotesByPlan(ot)).data;console.log(`[MapView][refreshMapWithPlan] ${kn.length} notes golocalises rcupres`);const tn=bf();m.value&&A.value&&kn.forEach(qt=>{try{if(tn.addNote({...qt,id:qt.id,columnId:qt.column,accessLevel:qt.access_level}),qt.location&&qt.location.type==="Point"&&Array.isArray(qt.location.coordinates)&&qt.location.coordinates.length===2){const Wt=Ad.fromBackendData({name:qt.title,description:qt.description,location:qt.location,columnId:qt.column,accessLevel:qt.access_level,style:qt.style||{color:qt.color||"#3B82F6",weight:2,opacity:1,fillColor:qt.color||"#3B82F6",fillOpacity:.6,radius:8},category:qt.category||"forages",comments:qt.comments||[],photos:qt.photos||[]});Wt._dbId=qt.id,A.value.addLayer(Wt),c.value.push({id:qt.id,type:"Note",layer:Wt,properties:Wt.properties}),console.log("[MapView][refreshMapWithPlan] Note golocalise ajoute  la carte:",{id:qt.id,title:qt.title,location:qt.location})}}catch(Wt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note golocalise:",Wt)}})}catch(Ht){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes golocalises:",Ht)}},"MapView"),m.value&&A.value&&await En.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Wt=>{var ir;return{id:Wt.id,type:Wt.type_forme,hasName:Wt.data&&"name"in Wt.data,name:(ir=Wt.data)==null?void 0:ir.name}})});const Ht=o.getCurrentElements.reduce((Wt,ir)=>(Wt[ir.type_forme]||(Wt[ir.type_forme]=[]),Wt[ir.type_forme].push(ir),Wt),{}),kn=["Note","Polygon","Line","Circle","Rectangle"],tn=Object.keys(Ht).sort((Wt,ir)=>{const St=kn.indexOf(Wt),gn=kn.indexOf(ir);return(St===-1?999:St)-(gn===-1?999:gn)}),qt=Wt=>{switch(Wt){case"Note":return 20;case"Circle":return 15;case"Rectangle":return 15;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Wt of tn){const ir=Ht[Wt],St=qt(Wt);for(let gn=0;gn<ir.length;gn+=St){const Qn=ir.slice(gn,gn+St);await Promise.all(Qn.map(async ar=>{await En.measureAsync(`refreshMapWithPlan:createElement:${ar.type_forme}`,async()=>{var vn;if(!A.value||!ar.data)return;let ur=null;switch(ar.type_forme){case"Circle":{const cn=ar.data;cn.center&&cn.radius&&(ur=new sp(Ut.latLng(cn.center[1],cn.center[0]),{...cn.style,radius:cn.radius}),cn.name&&(ur.properties={type:"Circle",name:cn.name,style:cn.style,radius:cn.radius,diameter:cn.radius*2,surface:Math.PI*cn.radius*cn.radius,perimeter:2*Math.PI*cn.radius},ur.name=cn.name));break}case"Rectangle":{const cn=ar.data;if(cn.bounds){const ri=Ut.latLngBounds(Ut.latLng(cn.bounds.southWest[1],cn.bounds.southWest[0]),Ut.latLng(cn.bounds.northEast[1],cn.bounds.northEast[0]));ur=new Pa(ri,cn.style),cn.name&&(ur.properties={name:cn.name},ur.name=cn.name)}break}case"Polygon":{const cn=ar.data;if(cn.points&&cn.points.length>0){const ri=cn.points.map(Li=>Ut.latLng(Li[1],Li[0]));ur=new uh(ri,cn.style),cn.name&&(ur.properties={name:cn.name},ur.name=cn.name)}break}case"Line":{const cn=ar.data;if(cn.points&&cn.points.length>0){const ri=cn.points.map(Li=>Ut.latLng(Li[1],Li[0]));ur=new qo(ri,cn.style),cn.name&&(ur.properties={name:cn.name},ur.name=cn.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Cration d'une note:",ar.data);const cn=ar.data;if(cn.location&&Array.isArray(cn.location)&&cn.location.length===2||cn.location&&typeof cn.location=="object"&&cn.location.type==="Point"&&Array.isArray(cn.location.coordinates)&&cn.location.coordinates.length===2)try{cn.category||(cn.category="forages",console.log("[MapView][refreshMapWithPlan] Catgorie par dfaut ajoute:",cn.category)),cn.accessLevel||(cn.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accs par dfaut ajout:",cn.accessLevel));const Li=Ad.fromBackendData(cn);Li._dbId=ar.id,ur=Li,console.log("[MapView][refreshMapWithPlan] Note cre:",{id:ar.id,location:cn.location,name:cn.name,category:cn.category,accessLevel:cn.accessLevel,type:Li.properties.type})}catch(Li){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",Li)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",cn),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}ur&&(ur._dbId=ar.id,(vn=A.value)==null||vn.addLayer(ur),c.value.push({id:ar.id,type:ar.type_forme,layer:ur,properties:ur.properties}))},"MapView")})),await new Promise(ar=>requestAnimationFrame(()=>setTimeout(ar,0)))}}En.measure("refreshMapWithPlan:adjustView",()=>{setTimeout(()=>{z(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)},"MapView")},"MapView"),console.log(`Plan ${ot} charg avec succs avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${ot} introuvable aprs chargement`),j.value=!1}catch(nt){throw console.error("Erreur lors du rafrachissement de la carte:",nt),nt}},"MapView")}async function le(ot){return await En.measureAsync("loadPlan",async()=>{var nt;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",ot);try{const Ht=await En.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(ot),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!Ht),!Ht){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await En.measureAsync("loadPlan:apiCheck",async()=>{await Dn.get(`/plans/${ot}/`)},"MapView")}catch(kn){throw((nt=kn.response)==null?void 0:nt.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ee()),kn}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await En.measureAsync("loadPlan:refreshMap",async()=>{await oe(ot)},"MapView"),j.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),it(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:ot,elementsCount:o.getCurrentElements.length})}catch(Ht){throw console.error("Erreur lors du chargement du plan:",Ht),En.measure("loadPlan:errorRecovery",()=>{B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ee(),localStorage.removeItem("lastPlanId")},"MapView"),Ht}},"MapView")}async function ze(){var ot;if(!B.value||!A.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}R.value=!0,I.value="saving";try{const nt=[],Ht=new Set(o.getCurrentElements.filter(Wt=>Wt.id!==void 0).map(Wt=>Wt.id)),kn=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:A.value.getLayers().length,existingIds:Array.from(Ht),currentElements:o.getCurrentElements}),A.value.eachLayer(Wt=>{var Qn,ar,ur,vn,cn,ri,Li,zi,Fr,cr,Xi,Ui,Hi,ls,vs,Es,Rs,Fs,Ji,Wr,ys,jr,fr;console.log("[savePlan] Traitement de la couche",{type:(Qn=Wt.properties)==null?void 0:Qn.type,name:(ar=Wt.properties)==null?void 0:ar.name,isPolygon:Wt instanceof Ut.Polygon,properties:Wt.properties});let ir,St;const gn={color:Wt.options.color||"#2b6451",weight:Wt.options.weight||3,opacity:Wt.options.opacity||1,fillColor:Wt.options.fillColor||"#2b6451",fillOpacity:Wt.options.fillOpacity||.2,dashArray:Wt.options.dashArray||""};if(Wt instanceof Pa){ir="Rectangle";const dr=Wt.getBounds();St={bounds:{southWest:[dr.getSouthWest().lng,dr.getSouthWest().lat],northEast:[dr.getNorthEast().lng,dr.getNorthEast().lat]},style:gn,name:((ur=Wt.properties)==null?void 0:ur.name)||"",rotation:Wt.getRotation(),width:Wt.getDimensions().width,height:Wt.getDimensions().height,center:[Wt.getCenter().lng,Wt.getCenter().lat]}}else if(Wt instanceof Ut.Circle)ir="Circle",St={center:[Wt.getLatLng().lng,Wt.getLatLng().lat],radius:Wt.getRadius(),name:((vn=Wt.properties)==null?void 0:vn.name)||"",style:gn};else if(Wt instanceof Ut.Rectangle){ir="Rectangle";const dr=Wt.getBounds();St={bounds:{southWest:[dr.getSouthWest().lng,dr.getSouthWest().lat],northEast:[dr.getNorthEast().lng,dr.getNorthEast().lat]},name:((cn=Wt.properties)==null?void 0:cn.name)||"",style:gn}}else if(Wt instanceof Ut.Polyline&&!(Wt instanceof Ut.Polygon))if(((ri=Wt.properties)==null?void 0:ri.type)==="ElevationLine"){ir="ElevationLine";const dr=Wt.getLatLngs(),Ti=((Li=Wt.properties)==null?void 0:Li.category)||"forages",Si=((zi=Wt.properties)==null?void 0:zi.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catgorie:",Ti,"Niveau d'accs:",Si),St={points:dr.map(io=>[io.lng,io.lat]),style:{...gn,color:((Fr=Wt.properties.style)==null?void 0:Fr.color)||"#FF4500",weight:((cr=Wt.properties.style)==null?void 0:cr.weight)||4,opacity:((Xi=Wt.properties.style)==null?void 0:Xi.opacity)||.8,_accessLevel:Si,accessLevel:Si},name:((Ui=Wt.properties)==null?void 0:Ui.name)||"",category:Ti,accessLevel:Si,elevationData:Wt.properties.elevationData,samplePointStyle:Wt.properties.samplePointStyle,minMaxPointStyle:Wt.properties.minMaxPointStyle,minElevation:Wt.properties.minElevation,maxElevation:Wt.properties.maxElevation,elevationGain:Wt.properties.elevationGain,elevationLoss:Wt.properties.elevationLoss,averageSlope:Wt.properties.averageSlope,maxSlope:Wt.properties.maxSlope}}else{ir="Line";const dr=Wt.getLatLngs(),Ti=((Hi=Wt.properties)==null?void 0:Hi.category)||"forages",Si=((ls=Wt.properties)==null?void 0:ls.accessLevel)||"visitor";console.log("[savePlan] Line - Catgorie:",Ti,"Niveau d'accs:",Si),St={points:dr.map(io=>[io.lng,io.lat]),name:((vs=Wt.properties)==null?void 0:vs.name)||"",category:Ti,accessLevel:Si,style:{...gn,_accessLevel:Si,accessLevel:Si}}}else if(Wt instanceof Ut.Polygon&&!(Wt instanceof Ut.Rectangle)){ir="Polygon";const dr=Wt.getLatLngs()[0],Ti=((Es=Wt.properties)==null?void 0:Es.category)||"forages",Si=((Rs=Wt.properties)==null?void 0:Rs.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catgorie:",Ti,"Niveau d'accs:",Si),St={points:dr.map(io=>[io.lng,io.lat]),name:((Fs=Wt.properties)==null?void 0:Fs.name)||"",category:Ti,accessLevel:Si,style:{...gn,_accessLevel:Si,accessLevel:Si}}}else if(((Ji=Wt.properties)==null?void 0:Ji.type)==="Note"){console.log("[savePlan] Note golocalise dtecte - sauvegarde via API ddie");const dr=Wt;if(dr._dbId&&typeof dr._dbId=="number"&&kn.add(dr._dbId),typeof dr.saveNote=="function")try{if(dr.properties&&(dr.properties.style||(dr.properties.style={}),dr.properties.accessLevel&&(dr.properties.style._accessLevel=dr.properties.accessLevel,dr.properties.style.accessLevel=dr.properties.accessLevel),dr.properties.style.color)){const Ti=dr.properties.style.color;console.log("[savePlan] Prservation de la couleur existante:",Ti),dr.properties.style.color=Ti,dr.properties.style.fillColor=Ti}console.log("[savePlan] Sauvegarde de la note golocalise via API ddie",{category:(Wr=dr.properties)==null?void 0:Wr.category,accessLevel:(ys=dr.properties)==null?void 0:ys.accessLevel,styleAccessLevel:(fr=(jr=dr.properties)==null?void 0:jr.style)==null?void 0:fr.accessLevel}),B.value&&B.value.id?dr.saveNote(B.value.id):dr.saveNote()}catch(Ti){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",Ti)}else console.warn("[savePlan] La note ne possde pas de mthode saveNote");ir=void 0,St=void 0}if(ir&&St){let dr=Wt._elementId;Wt._dbId&&(dr=Wt._dbId,typeof dr=="number"&&kn.add(dr)),nt.push({id:dr,type_forme:ir,data:St})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:nt.length,elements:nt.map(Wt=>({type:Wt.type_forme,hasPoints:"points"in Wt.data,hasStyle:"style"in Wt.data}))});const tn=Array.from(Ht).filter(Wt=>!kn.has(Wt));console.log("[savePlan] lments supprims:",{existingIds:Array.from(Ht),currentLayerIds:Array.from(kn),elementsToDelete:tn}),o.elements=nt.filter(Wt=>!Wt.id||!tn.includes(Wt.id));const qt=await o.saveToPlan(B.value.id,{elementsToDelete:tn});if(qt&&((ot=B.value)!=null&&ot.id)){const Wt=B.value.id;B.value={...B.value,...qt},s.updatePlanDetails(Wt,qt)}I.value="success",A.value&&A.value.eachLayer(Wt=>{var ir;((ir=Wt.properties)==null?void 0:ir.type)==="Note"&&typeof Wt.resetPlanSaveState=="function"&&Wt.resetPlanSaveState()}),setTimeout(()=>{I.value=null},3e3)}catch(nt){console.error("Erreur lors de la sauvegarde du plan:",nt),I.value=null}finally{R.value=!1}}Hu(()=>{X.user||ct(),s.clearCurrentPlan(),o.clearCurrentPlan(),A.value&&A.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function $e(ot){var nt,Ht,kn;if(console.log("[MapView][updateShapeProperties] Mise  jour des proprits:",ot),T(ot),v.value&&((nt=v.value.properties)==null?void 0:nt.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note golocalise dtecte, sauvegarde via API ddie"),typeof v.value.saveNote=="function")try{if(ot.category&&(v.value.properties.category=ot.category),ot.accessLevel&&(v.value.properties.accessLevel=ot.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=ot.accessLevel,v.value.properties.style.accessLevel=ot.accessLevel),v.value.properties.style&&v.value.properties.style.color){const tn=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Prservation de la couleur existante:",tn),v.value.properties.style.color=tn,v.value.properties.style.fillColor=tn}console.log("[MapView][updateShapeProperties] Sauvegarde de la note golocalise via API ddie",{category:(Ht=v.value.properties)==null?void 0:Ht.category,accessLevel:(kn=v.value.properties)==null?void 0:kn.accessLevel,updatedProperties:ot}),B.value&&B.value.id?v.value.saveNote(B.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forage de la mise  jour du popup aprs la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(tn){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",tn)}else console.warn("[MapView][updateShapeProperties] La note ne possde pas de mthode saveNote");else if(ot.category&&v.value&&v.value._dbId){const tn=v.value._dbId,qt=o.elements.find(Wt=>Wt.id===tn);if(qt){console.log(`[MapView][updateShapeProperties] Mise  jour de la catgorie dans le store: ${ot.category} pour l'lment ${tn}`);const Wt=qt;Wt.data||(Wt.data={}),Wt.data.category=ot.category,o.$patch({unsavedChanges:!0})}}}function Je(ot){try{const nt=new Date(ot);return isNaN(nt.getTime())?(console.error("Date invalide reue:",ot),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(nt)}catch(nt){return console.error("Erreur lors du formatage de la date:",nt),"Date invalide"}}const Me=()=>{A.value&&z()},me=async()=>{var ot;if(v.value&&A.value){const nt=v.value._leaflet_id,Ht=v.value._dbId;if(((ot=v.value.properties)==null?void 0:ot.type)==="Note"&&Ht)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${Ht} du backend...`),await da.deleteNote(Ht),a.removeNote(Ht),console.log(`[MapView][deleteSelectedShape] Note ${Ht} supprime avec succs du backend et du store`),l.success("Note supprime avec succs")}catch(tn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Ht} du backend:`,tn),l.error("Erreur lors de la suppression de la note")}E(""),A.value.removeLayer(v.value),c.value=c.value.filter(tn=>tn.layer&&tn.layer._leaflet_id!==nt),console.log(`[MapView][deleteSelectedShape] Forme ${nt} (dbId: ${Ht}) supprime du featureGroup et de shapes.value`),v.value=null}};async function qe(ot){console.log(`onPlanCreated - Tentative de chargement du plan ${ot}`),await s.fetchPlans();const nt=s.getPlanById(ot);nt?(console.log(`Plan ${ot} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",ot.toString()),B.value=nt,s.setCurrentPlan(nt),o.setCurrentPlan(nt.id),O.value=!1,it(),console.log(`Plan ${ot} charg avec succs`)):console.error(`Plan ${ot} introuvable aprs cration! Vrifiez les permissions.`)}fi(Ge,async ot=>{var nt;if(ot&&((nt=X.user)==null?void 0:nt.user_type)==="admin"){ie.value=!0;try{const Ht=await X.fetchSalarieVisiteurs(ot.id);_e.value=Array.isArray(Ht)?Ht:[Ht]}catch(Ht){console.error("[MapView][watch selectedSalarie] Error:",Ht),_e.value=[]}finally{ie.value=!1}}});function ct(){localStorage.removeItem("lastPlanId")}const ft=Lt(!1),Mt=NE.debounce(()=>{const ot=En.startMeasure("invalidateMapSize","MapView");if(!m.value){ot();return}Ko(()=>{En.measure("invalidateMapSize:nextTick",()=>{var nt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(nt=A.value)!=null&&nt.getLayers().length)try{z()}catch(Ht){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ht)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ht){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ht)}ot()},"MapView")})},250);function it(){Mt()}fi(B,(ot,nt)=>{ot&&ot.id!==(nt==null?void 0:nt.id)&&Ko(()=>{it()})});const jt=Lt(null),hn=Lt(!1),Ze=Lt([]),lt=Un(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:jt.value,salaries:K.value,salariesLength:K.value.length}),!jt.value)return[];const ot=K.value.filter(nt=>{var tn,qt,Wt;const Ht=nt.entreprise,kn=typeof Ht=="object"&&Ht!==null?Ht.id:Ht;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:nt,salarieEntreprise:Ht,salarieEntrepriseId:kn,selectedEntrepriseId:(tn=jt.value)==null?void 0:tn.id,matches:kn===((qt=jt.value)==null?void 0:qt.id)}),kn===((Wt=jt.value)==null?void 0:Wt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",ot),ot});function rt(ot){if(!ot)return"";const nt=ot.first_name||"",Ht=ot.last_name?ot.last_name.toUpperCase():"",kn=ot.company_name||ot.role||"";return`${nt} ${Ht} (${kn})`}async function $t(){hn.value=!0;try{const ot=await Dn.get("/users/",{params:{role:"ENTREPRISE"}});Ze.value=ot.data}catch(ot){console.error("[MapView] Error loading entreprises:",ot),Ze.value=[]}finally{hn.value=!1}}async function Qt(ot){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",ot),jt.value=ot,Z.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:ot.id});const nt=await Dn.get("/users/",{params:{role:"SALARIE",entreprise:ot.id}});console.log("[MapView][selectEntreprise] Rponse reue:",nt.data),K.value=nt.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",K.value)}catch(nt){console.error("[MapView] Error loading salaries for entreprise:",nt),K.value=[]}finally{Z.value=!1}}function Pn(){jt.value=null,Ge.value=null,q.value=null,K.value=[],_e.value=[],ve.value=[]}function wn(){Ge.value=null,q.value=null,_e.value=[],ve.value=[]}function xn(){q.value=null,ve.value=[]}async function $n(ot){var nt,Ht,kn,tn,qt,Wt;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:ot.id,username:ot.username,company:ot.company_name,role:ot.role}),console.log("Contexte utilisateur:",{userType:(nt=X.user)==null?void 0:nt.user_type,userId:(Ht=X.user)==null?void 0:Ht.id,userRole:(kn=X.user)==null?void 0:kn.role,selectedEntrepriseId:(tn=jt.value)==null?void 0:tn.id}),Ge.value=ot,ie.value=!0;try{const ir={role:"VISITEUR",salarie:ot.id};X.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(qt=X.user)==null?void 0:qt.id),ir.entreprise=(Wt=X.user)==null?void 0:Wt.id):jt.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",jt.value.id),ir.entreprise=jt.value.id),console.log("Paramtres de la requte:",ir);const St=await Dn.get("/users/",{params:ir});console.log("Rponse reue du serveur:",{status:St.status,dataLength:Array.isArray(St.data)?St.data.length:"non-array",data:St.data}),Array.isArray(St.data)?(_e.value=St.data,console.log(`${St.data.length} visiteurs chargs`),St.data.forEach((gn,Qn)=>{console.log(`Visiteur ${Qn+1}:`,{id:gn.id,username:gn.username,company:gn.company_name,salarie:gn.salarie})})):(console.warn("Format de rponse inattendu:",St.data),_e.value=[]),_e.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(ir){if(console.error("ERREUR lors du chargement des visiteurs:",ir),ir&&typeof ir=="object"&&"response"in ir){const St=ir;console.error("Dtails de l'erreur:",{status:St.response.status,data:St.response.data})}_e.value=[]}finally{ie.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}function en(){J.value=!1,H.value=null}function _n(ot){$.value=ot,V.value=!0}async function Cn(){var ot,nt,Ht;if((ot=$.value)!=null&&ot.id)try{const kn=$.value.id,tn={selectedClient:q.value,selectedSalarie:Ge.value,isNoVisiteurView:q.value&&q.value.id===-1};if(await s.deletePlan(kn),V.value=!1,$.value=null,await new Promise(qt=>setTimeout(qt,50)),tn.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await as();else if(tn.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",tn.selectedClient.id);const qt={visiteur:tn.selectedClient.id};tn.selectedSalarie&&(qt.salarie=tn.selectedSalarie.id),X.isEntreprise?qt.entreprise=(nt=X.user)==null?void 0:nt.id:jt.value&&(qt.entreprise=jt.value.id);const Wt=await Dn.get("/plans/",{params:qt});ve.value=Wt.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((Ht=B.value)==null?void 0:Ht.id)===kn&&(B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ee(),localStorage.removeItem("lastPlanId"))}catch(kn){console.error("Erreur lors de la suppression du plan:",kn),alert("Une erreur est survenue lors de la suppression du plan"),V.value=!1,$.value=null}}function qn(){V.value=!1,$.value=null}function nr(ot){console.log("[MapView][handleFilterChange] Nouveaux filtres reus:",JSON.stringify(ot,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise  jour des filtres dans le store"),o.updateFilters(ot),console.log("[MapView][handleFilterChange] lments dans le store:",{count:o.elements.length,ids:o.elements.map(nt=>nt.id)}),console.log("[MapView][handleFilterChange] Mise  jour de l'affichage de la carte"),rr(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise  jour force de l'affichage"),rr()},100),console.log("[MapView][handleFilterChange] Traitement des filtres termin")}function rr(){if(!A.value)return;const ot=[];c.value.forEach((vn,cn)=>{vn.layer&&!vn.id&&(!vn.layer.properties||vn.layer.properties&&!vn.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage prventif de la couche temporaire ${vn.layer._leaflet_id}`),ot.push(cn))});for(let vn=ot.length-1;vn>=0;vn--)c.value.splice(ot[vn],1);const nt={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise  jour de l'affichage avec filtres:",JSON.stringify(nt,null,2));const Ht={count:o.elements.length,elements:o.elements.map(vn=>({id:vn.id,type_forme:vn.type_forme}))};console.log("[MapView][updateMapDisplay] lments dans le store:",JSON.stringify(Ht,null,2));const kn=o.getFilteredElements;console.log("[MapView][updateMapDisplay] lments filtrs:",{total:o.elements.length,filtered:kn.length,filteredIds:kn.map(vn=>vn.id)});const tn=A.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",tn.length);const qt=tn.map(vn=>({_leaflet_id:vn._leaflet_id,_dbId:vn._dbId,hasProperties:!!vn.properties,propertyType:vn.properties?vn.properties.type:null,category:vn.properties?vn.properties.category:null}));console.log("[MapView][updateMapDisplay] Dtails des couches:",JSON.stringify(qt,null,2)),console.log("[MapView][updateMapDisplay] tat des filtres pour les catgories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Wt=new Map;c.value.forEach(vn=>{vn.layer&&vn.id&&Wt.set(vn.id,vn.layer)});const ir=new Map;tn.forEach(vn=>{vn._dbId&&ir.set(vn,vn._dbId)});const St=new Set(kn.map(vn=>vn.id));console.log("[MapView][updateMapDisplay] Dbut du traitement des couches");const gn=Array.from(St);console.log("[MapView][updateMapDisplay] IDs des lments filtrs:",JSON.stringify(gn));let Qn=0,ar=0,ur=0;tn.forEach(vn=>{var Rs,Fs;const cn=vn._dbId,ri=vn._leaflet_id;if(!cn){if(!vn.properties){ur++,console.log(`[MapView][updateMapDisplay] Couche ${ri} sans dbId et sans proprits, ignore`);return}vn._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${ri} sans dbId, ID temporaire assign: ${vn._dbId}`)}const Li=vn.properties||{},zi=Li.type||vn.type_forme||"";let Fr=Li.category;if(vn._dbId){const Ji=o.elements.find(Wr=>Wr.id===vn._dbId);if(Ji){const Wr=Ji.data;Wr&&Wr.category&&(Fr!==Wr.category&&(console.log(`[MapView][updateMapDisplay] Catgorie diffrente dtecte - Proprits: ${Fr}, Store: ${Wr.category} pour la couche ${vn._dbId}`),Fr=Wr.category),vn.properties||(vn.properties={}),vn.properties.category=Fr)}}Fr||(Fr="default");const cr=Li.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${ri} (dbId: ${vn._dbId}): type=${zi}, category=${Fr}, accessLevel=${cr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let Xi=!1;zi?Xi=zi in o.filters.shapeTypes&&o.filters.shapeTypes[zi]===!0:Xi=o.filters.shapeTypes.Polygon===!0;let Ui=!1;Fr?Fr in o.filters.categories?(Ui=o.filters.categories[Fr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${Fr}: ${Ui}`)):(Ui=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${Fr} non trouve dans les filtres, utilisation de 'forages': ${Ui}`)):(Ui=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie non spcifie, utilisation de 'forages': ${Ui}`));let Hi=!1;const ls={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let vs="visitor";ls.company?vs="company":ls.employee?vs="employee":ls.visitor&&(vs="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur: ${vs}`),vs==="company"?Hi=!0:vs==="employee"?Hi=cr==="employee"||cr==="visitor":vs==="visitor"&&(Hi=cr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche: ${cr}, visible: ${Hi}`);const Es=Xi&&Ui&&Hi;console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${ri}: typeVisible=${Xi}, categoryVisible=${Ui}, accessLevelVisible=${Hi}, isVisible=${Es}`),console.log(`[MapView][updateMapDisplay] Dtails de la couche ${ri}: type=${zi}, category=${Fr}, accessLevel=${cr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),Es?A.value.hasLayer(vn)?(Qn++,console.log(`[MapView][updateMapDisplay] Couche ${vn._dbId} (${zi}) dj visible avec catgorie ${((Fs=vn.properties)==null?void 0:Fs.category)||"non dfinie"}`)):(Fr&&Fr!=="default"&&(!vn.properties||!vn.properties.category)&&(vn.properties||(vn.properties={}),vn.properties.category=Fr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant ajout: ${Fr} pour la couche ${vn._dbId}`)),A.value.addLayer(vn),Qn++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${vn._dbId} (${zi}) avec catgorie ${((Rs=vn.properties)==null?void 0:Rs.category)||"non dfinie"}`)):A.value.hasLayer(vn)?(A.value.removeLayer(vn),ar++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${vn._dbId} (${zi}) - Filtres non respects`)):(ar++,console.log(`[MapView][updateMapDisplay] Couche ${vn._dbId} (${zi}) dj masque`))}),console.log("[MapView][updateMapDisplay] Dbut de la restauration des couches filtres"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(vn=>{var Fs;if(!vn.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignore");return}const cn=vn.layer,ri=cn._leaflet_id,Li=cn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${ri} (dbId: ${Li})`),A.value.hasLayer(cn)){console.log(`[MapView][updateMapDisplay] La couche ${ri} est dj dans le featureGroup, ignore`);return}const zi=cn.properties||{},Fr=zi.type||cn.type_forme||"";let cr=null;if(cn._dbId){const Ji=o.elements.find(Wr=>Wr.id===cn._dbId);if(Ji){const Wr=Ji.data;Wr&&Wr.category&&(cr=Wr.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis le store: ${cr} pour la couche ${cn._dbId}`))}}!cr&&zi.category&&(cr=zi.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis les proprits: ${cr} pour la couche ${ri}`)),cr||(cr="default");const Xi=zi.accessLevel||"visitor";if(cn.properties||(cn.properties={}),cr&&cr!=="default"&&(cn.properties.category=cr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie/restaure: ${cr} pour la couche ${cn._dbId}`),cn._dbId)){const Ji=o.elements.find(Wr=>Wr.id===cn._dbId);if(Ji){const Wr=Ji;Wr.data||(Wr.data={}),Wr.data.category!==cr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store: ${cr} pour l'lment ${cn._dbId}`),Wr.data.category=cr,o.$patch({unsavedChanges:!0}))}}cn.properties.accessLevel||(cn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Proprits de la couche ${ri}: type=${Fr}, category=${cr}, accessLevel=${Xi}`);let Ui=!1;Fr?Ui=Fr in o.filters.shapeTypes&&o.filters.shapeTypes[Fr]===!0:Ui=o.filters.shapeTypes.Polygon===!0;let Hi=!1;if(cr)if(cr in o.filters.categories)Hi=o.filters.categories[cr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${cr}: ${Hi}`);else if(OE().getUniqueCategories.includes(cr)){console.log(`[MapView][updateMapDisplay] Catgorie personnalise ${cr} trouve dans mapFilterStore, ajout aux filtres`);const ys={...o.filters.categories};ys[cr]=!0,o.updateFilters({categories:ys}),Hi=!0}else Hi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${cr} non trouve, utilisation de 'forages': ${Hi}`);else Hi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catgorie, utilisation de 'forages': ${Hi}`);let ls=!1;const vs={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Es="visitor";vs.company?Es="company":vs.employee?Es="employee":vs.visitor&&(Es="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur (2me tape): ${Es}`),Es==="company"?ls=!0:Es==="employee"?ls=Xi==="employee"||Xi==="visitor":Es==="visitor"&&(ls=Xi==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche (2me tape): ${Xi}, visible: ${ls}`);const Rs=Ui&&Hi&&ls;if(console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${ri}: typeVisible=${Ui}, categoryVisible=${Hi}, accessLevelVisible=${ls}, isVisible=${Rs}`),Rs){if(cr&&cr!=="default"&&(cn.properties||(cn.properties={}),cn.properties.category=cr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant restauration: ${cr} pour la couche ${ri}`),cn._dbId)){const Ji=o.elements.find(Wr=>Wr.id===cn._dbId);if(Ji){const Wr=Ji;Wr.data||(Wr.data={}),Wr.data.category!==cr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store avant restauration: ${cr} pour l'lment ${cn._dbId}`),Wr.data.category=cr,o.$patch({unsavedChanges:!0}))}}A.value.addLayer(cn),Qn++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${ri} (${Fr}) avec catgorie ${((Fs=cn.properties)==null?void 0:Fs.category)||"non dfinie"} - Filtres respects`)}else console.log(`[MapView][updateMapDisplay] La couche ${ri} (${Fr}) reste masque - Filtres non respects`)}),console.log(`[MapView][updateMapDisplay] Restauration termine: ${Qn} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Qn} couches visibles, ${ar} couches masques, ${ur} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise  jour termine")}function Jn(ot){if(A.value){const Ht=A.value.getLayers().find(kn=>kn._leaflet_id===ot.id);Ht&&(Ht.properties.name=ot.title,Ht.properties.description=ot.description,Ht.properties.columnId=ot.columnId,Ht.properties.accessLevel=ot.accessLevel,Ht.properties.category||(Ht.properties.category="forages"),Ht.setNoteStyle({color:ot.style.color,fillColor:ot.style.fillColor,weight:ot.style.weight,fillOpacity:ot.style.fillOpacity,radius:ot.style.radius}),Ht.closePopup(),Ht.unbindPopup(),Ht.bindPopup(Ht.createPopupContent()),console.log("[handleNoteSave] Note mise  jour:",{name:Ht.properties.name,category:Ht.properties.category,accessLevel:Ht.properties.accessLevel,columnId:Ht.properties.columnId}),a.notes.find(tn=>tn.id===ot.id)?(a.updateNote(ot.id,{title:ot.title,description:ot.description,columnId:ot.columnId,accessLevel:ot.accessLevel,style:ot.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise  jour dans le store avec columnId:",ot.columnId)):(a.addNote({title:ot.title,description:ot.description,location:[ot.location[0],ot.location[1]],columnId:ot.columnId||"1",style:ot.style,accessLevel:ot.accessLevel}),console.log("[handleNoteSave] Note ajoute au store avec columnId:",ot.columnId||"1")))}l.success("Note enregistre avec succs")}async function Mr(ot){var nt;q.value=ot,de.value=!0;try{const Ht={visiteur:ot.id};X.isEntreprise?Ht.entreprise=(nt=X.user)==null?void 0:nt.id:jt.value&&(Ht.entreprise=jt.value.id),Ge.value&&(Ht.salarie=Ge.value.id);const kn=await Dn.get("/plans/",{params:Ht});ve.value=kn.data}catch(Ht){console.error("[MapView] Error loading client plans:",Ht),ve.value=[]}finally{de.value=!1}}async function as(){var nt;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const ot={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};q.value=ot,de.value=!0;try{const Ht={visiteur_null:!0};X.isEntreprise?Ht.entreprise=(nt=X.user)==null?void 0:nt.id:jt.value&&(Ht.entreprise=jt.value.id),Ge.value&&(Ht.salarie=Ge.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramtres de requte:",Ht);const kn=await Dn.get("/plans/",{params:Ht});console.log("[MapView][loadPlansWithoutVisiteur] Plans reus:",kn.data),ve.value=kn.data}catch(Ht){console.error("[MapView] Error loading plans without visiteur:",Ht),ve.value=[]}finally{de.value=!1}}async function ji(){var ot;if(Ge.value=null,q.value=null,ve.value=[],X.isEntreprise){Z.value=!0;try{const nt=await Dn.get("/users/",{params:{role:"SALARIE",entreprise:(ot=X.user)==null?void 0:ot.id}});K.value=nt.data,console.log("[MapView][openLoadPlanModal] Salaris chargs:",K.value.length)}catch(nt){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salaris:",nt),K.value=[]}finally{Z.value=!1}}j.value=!0}const ro=Lt(window.innerWidth<768);function Cs(){ro.value=window.innerWidth<768}return(ot,nt)=>{var Ht,kn,tn,qt,Wt,ir;return Ne(),Be(bn,null,[S("div",rG,[S("div",iG,[ft.value?(Ne(),Be("div",sG,nt[8]||(nt[8]=[Gl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Zt("",!0),B.value?Zt("",!0):(Ne(),Be("div",oG,[S("div",aG,[nt[11]||(nt[11]=Gl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+Oj+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),S("div",lG,[S("button",{onClick:nt[0]||(nt[0]=St=>O.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},nt[9]||(nt[9]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Gr(" Crer un nouveau plan ")])),S("button",{onClick:ji,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},nt[10]||(nt[10]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Gr(" Charger un plan existant ")]))])])])),Sn(S("div",uG,[S("div",cG,[B.value&&!ft.value?(Ne(),Vo(DV,{key:0,"last-save":(Ht=B.value)!=null&&Ht.date_modification?new Date(B.value.date_modification):void 0,"plan-name":(kn=B.value)==null?void 0:kn.nom,"plan-description":(tn=B.value)==null?void 0:tn.description,"save-status":I.value,onChangeMapType:Bn(pe),onCreateNewPlan:nt[1]||(nt[1]=St=>O.value=!0),onLoadPlan:ji,onSavePlan:ze,onAdjustView:Me,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Zt("",!0),S("div",dG,[i.value&&B.value&&!ft.value?(Ne(),Be("div",{key:0,onClick:fe,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Zt("",!0),S("div",hG,[S("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),B.value&&!ft.value?(Ne(),Be(bn,{key:1},[ro.value?(Ne(),Vo(rp,{key:0,to:"body"},[ti(f5,{show:i.value,"onUpdate:show":nt[2]||(nt[2]=St=>i.value=St),"selected-tool":Bn(p),"selected-shape":Q.value,"is-drawing":Bn(ne),onToolSelected:Bn(E),onFilterChange:nr,onDeleteShape:me,onPropertiesUpdate:$e,onStyleUpdate:Bn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Ne(),Vo(f5,{key:1,show:i.value,"onUpdate:show":nt[3]||(nt[3]=St=>i.value=St),"selected-tool":Bn(p),"selected-shape":Q.value,"is-drawing":Bn(ne),onToolSelected:Bn(E),onFilterChange:nr,onDeleteShape:me,onPropertiesUpdate:$e,onStyleUpdate:Bn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Zt("",!0),B.value&&!ft.value?(Ne(),Be("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:fe},nt[12]||(nt[12]=[Gl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Zt("",!0)])]),ft.value?(Ne(),Be("div",fG,nt[13]||(nt[13]=[Gl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Zt("",!0)],512),[[ky,B.value]]),(Ne(),Vo(rp,{to:"body"},[ti(RE,{ref_key:"newPlanModalRef",ref:ye,modelValue:O.value,"onUpdate:modelValue":nt[4]||(nt[4]=St=>O.value=St),onCreated:qe,onSalarieSelected:nt[5]||(nt[5]=St=>Ge.value=St),onVisiteurSelected:nt[6]||(nt[6]=St=>se.value=St)},null,8,["modelValue"])])),(Ne(),Vo(rp,{to:"body"},[j.value?(Ne(),Be("div",pG,[S("div",gG,[S("div",mG,[nt[15]||(nt[15]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),S("button",{onClick:nt[7]||(nt[7]=St=>j.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},nt[14]||(nt[14]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",vG,[Bn(X).isAdmin?(Ne(),Be("div",yG,[jt.value?Ge.value?q.value?(Ne(),Be("div",BG,[S("div",RG,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},nt[31]||(nt[31]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gr(" Retour  la liste des clients ")])),nt[32]||(nt[32]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",FG,kt(rt(q.value)),1)]),nt[34]||(nt[34]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",jG,[de.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[33]||(nt[33]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Be(bn,{key:1},Hn(ve.value,St=>(Ne(),Be("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:gn=>le(St.id),class:"w-full text-left"},[S("div",$G,kt(St.nom),1),S("div",VG,kt(St.description),1),S("div",UG," Modifi le "+kt(Je(St.date_modification)),1)],8,zG),Bn(X).isAdmin||Bn(X).isEntreprise?(Ne(),Be("button",{key:0,onClick:Wl(gn=>_n(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,HG)):Zt("",!0)]))),128))])])):(Ne(),Be("div",kG,[S("div",AG,[S("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},nt[24]||(nt[24]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gr(" Retour  la liste des salaries ")])),nt[25]||(nt[25]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",TG,kt(rt(Ge.value)),1)]),nt[30]||(nt[30]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",DG,[S("button",{onClick:as,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},nt[26]||(nt[26]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),ie.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[27]||(nt[27]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Be(bn,{key:1},[he.value.length===0?(Ne(),Be("div",NG,nt[28]||(nt[28]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),Be(bn,{key:1},Hn(he.value,St=>(Ne(),Be("button",{key:St.id,onClick:gn=>Mr(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",IG,kt(rt(St)),1)]),nt[29]||(nt[29]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,OG))),128))],64))])])):(Ne(),Be("div",LG,[S("div",SG,[S("button",{onClick:Pn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},nt[19]||(nt[19]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gr(" Retour  la liste des entreprises ")])),nt[20]||(nt[20]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",CG,kt(rt(jt.value)),1)]),nt[23]||(nt[23]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),S("div",EG,[Z.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[21]||(nt[21]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Be(bn,{key:1},Hn(lt.value,St=>(Ne(),Be("button",{key:St.id,onClick:gn=>$n(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",MG,kt(rt(St)),1)]),nt[22]||(nt[22]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,PG))),128))])])):(Ne(),Be("div",bG,[nt[18]||(nt[18]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),S("div",_G,[hn.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[16]||(nt[16]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Be(bn,{key:1},Hn(Ze.value,St=>(Ne(),Be("button",{key:St.id,onClick:gn=>Qt(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",xG,kt(rt(St)),1)]),nt[17]||(nt[17]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,wG))),128))])]))])):Bn(X).isSalarie?(Ne(),Be("div",GG,[q.value?(Ne(),Be("div",XG,[S("div",JG,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},nt[39]||(nt[39]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gr(" Retour  la liste des clients ")])),nt[40]||(nt[40]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",QG,kt(rt(q.value)),1)]),nt[42]||(nt[42]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",eW,[de.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[41]||(nt[41]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Be(bn,{key:1},Hn(ve.value,St=>(Ne(),Be("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:gn=>le(St.id),class:"w-full text-left"},[S("div",nW,kt(St.nom),1),S("div",rW,kt(St.description),1),S("div",iW," Modifi le "+kt(Je(St.date_modification)),1)],8,tW),Bn(X).isAdmin||Bn(X).isEntreprise?(Ne(),Be("button",{key:0,onClick:Wl(gn=>_n(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,sW)):Zt("",!0)]))),128))])])):(Ne(),Be("div",WG,[nt[38]||(nt[38]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",qG,[ie.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[35]||(nt[35]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Be(bn,{key:1},[he.value.length===0?(Ne(),Be("div",YG,nt[36]||(nt[36]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Ne(!0),Be(bn,{key:1},Hn(he.value,St=>(Ne(),Be("button",{key:St.id,onClick:gn=>Mr(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",ZG,kt(rt(St)),1)]),nt[37]||(nt[37]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,KG))),128))],64))])]))])):Bn(X).isEntreprise?(Ne(),Be("div",oW,[Ge.value?q.value?(Ne(),Be("div",yW,[S("div",bW,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},nt[53]||(nt[53]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gr(" Retour  la liste des visiteurs ")])),nt[54]||(nt[54]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",_W,kt(rt(q.value)),1)]),nt[56]||(nt[56]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",wW,[de.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[55]||(nt[55]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Be(bn,{key:1},Hn(ve.value,St=>(Ne(),Be("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:gn=>le(St.id),class:"w-full text-left"},[S("div",LW,kt(St.nom),1),S("div",SW,kt(St.description),1),S("div",CW," Modifi le "+kt(Je(St.date_modification)),1)],8,xW),Bn(X).isAdmin||Bn(X).isEntreprise?(Ne(),Be("button",{key:0,onClick:Wl(gn=>_n(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,EW)):Zt("",!0)]))),128))])])):(Ne(),Be("div",dW,[S("div",hW,[S("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},nt[46]||(nt[46]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gr(" Retour  la liste des salaris ")])),nt[47]||(nt[47]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",fW,kt(rt(Ge.value)),1)]),nt[52]||(nt[52]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",pW,[S("button",{onClick:as,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},nt[48]||(nt[48]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),ie.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[49]||(nt[49]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Be(bn,{key:1},[he.value.length===0?(Ne(),Be("div",gW,nt[50]||(nt[50]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salari",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),Be(bn,{key:1},Hn(he.value,St=>(Ne(),Be("button",{key:St.id,onClick:gn=>Mr(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",vW,kt(rt(St)),1)]),nt[51]||(nt[51]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,mW))),128))],64))])])):(Ne(),Be("div",aW,[nt[45]||(nt[45]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un salari",-1)),S("div",lW,[Z.value?(Ne(),Be(bn,{key:0},Hn(3,St=>S("div",{key:St,class:"animate-pulse"},nt[43]||(nt[43]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Be(bn,{key:1},Hn(K.value,St=>(Ne(),Be("button",{key:St.id,onClick:gn=>$n(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",cW,kt(rt(St)),1)]),nt[44]||(nt[44]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,uW))),128))])]))])):(Ne(),Be("div",PW,[Bn(s).plans.length===0?(Ne(),Be("div",MW,nt[57]||(nt[57]=[S("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ne(),Be("div",kW,[(Ne(!0),Be(bn,null,Hn(Bn(s).plans,St=>(Ne(),Be("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:gn=>le(St.id),class:"w-full text-left"},[S("div",TW,kt(St.nom),1),S("div",DW,kt(St.description),1),S("div",NW," Modifi le "+kt(Je(St.date_modification)),1)],8,AW),Bn(X).isAdmin||Bn(X).isEntreprise?(Ne(),Be("button",{key:0,onClick:Wl(gn=>_n(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,OW)):Zt("",!0)]))),128))]))]))])])])):Zt("",!0)])),(Ne(),Vo(rp,{to:"body"},[V.value?(Ne(),Be("div",IW,[S("div",BW,[S("div",RW,[nt[58]||(nt[58]=S("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),nt[59]||(nt[59]=S("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),S("p",FW,' tes-vous sr de vouloir supprimer le plan "'+kt((qt=$.value)==null?void 0:qt.nom)+'" ? Cette action est irrversible. ',1)]),S("div",{class:"flex justify-center space-x-4"},[S("button",{onClick:qn,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),S("button",{onClick:Cn,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Zt("",!0)]))])]),(Ne(),Vo(rp,{to:"body"},[J.value?(Ne(),Vo(IE,{key:0,note:H.value,"is-new-note":!((Wt=H.value)!=null&&Wt.id),location:(ir=H.value)==null?void 0:ir.location,onClose:en,onSave:Jn},null,8,["note","is-new-note","location"])):Zt("",!0)]))],64)}}}),jW={class:"fixed inset-0 z-[3001] overflow-y-auto"},zW={class:"flex items-center justify-center min-h-screen w-full p-0"},$W={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},VW={class:"p-4 md:p-6"},UW={class:"flex justify-between items-center mb-4 border-b pb-4"},HW={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},GW={class:"mt-4"},WW={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},qW={class:"flex"},YW={class:"ml-3"},KW={class:"text-sm font-medium text-red-800"},ZW={key:0},XW={key:1},JW=["value"],QW={key:2},eq={key:3},tq=["value"],nq={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},rq={key:0,class:"mt-2 text-sm text-red-600"},iq={key:0,class:"mt-2 text-sm text-red-600"},sq={key:4},oq={class:"flex items-center"},aq={key:5,class:"border-t pt-4 mt-4"},lq={class:"mb-4"},uq={class:"mb-4"},cq={key:6},dq={key:7},hq={key:0,class:"mt-2 text-sm text-red-600"},fq={class:"flex justify-end space-x-3"},pq=["disabled"],gq={key:0,class:"mr-2"},mq=Ss({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=Lt(!1),s=Lt(""),o=Lt(""),a=Lt(""),l=Lt(""),c=Lt(""),h=Zl({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});no(()=>{var v;(v=n.user)!=null&&v.id?(h.id=n.user.id,h.first_name=n.user.first_name||"",h.last_name=n.user.last_name||"",h.username=n.user.username||"",h.email=n.user.email||"",h.company_name=n.user.company_name||"",h.role=n.user.role||"VISITEUR",h.is_active=n.user.is_active??!0,h.ecowitt_api_key=n.user.ecowitt_api_key||"",h.ecowitt_application_key=n.user.ecowitt_application_key||"",h.storage_quota=n.user.storage_quota||50,h.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?h.salarie=n.user.salarie.id:h.salarie=n.user.salarie:n.user.salarie_id?h.salarie=n.user.salarie_id:n.currentSalarie&&(h.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?h.entreprise=n.user.entreprise.id:h.entreprise=n.user.entreprise:n.user.entreprise_id?h.entreprise=n.user.entreprise_id:n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(h.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?h.role="SALARIE":n.isAdmin||(h.role="VISITEUR"))}),dm(()=>{h.role==="ADMIN"||h.role==="ENTREPRISE"?(h.salarie=null,h.entreprise=null):h.role==="SALARIE"&&(h.salarie=null,n.isEntreprise&&n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise)))}),dm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(h.id||(h.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):h.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractres",v=!1)),!!v){i.value=!0;try{const m={...h};h.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(h.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&h.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(Ne(),Be("div",jW,[S("div",zW,[m[42]||(m[42]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",$W,[S("div",null,[S("div",VW,[S("div",UW,[S("h3",HW,kt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),S("button",{type:"button",onClick:m[0]||(m[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",GW,[l.value?(Ne(),Be("div",WW,[S("div",qW,[m[17]||(m[17]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",YW,[S("h3",KW,kt(l.value),1)])])])):Zt("",!0),S("form",{onSubmit:Wl(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ne(),Be("div",ZW,[m[19]||(m[19]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Sn(S("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=x=>h.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[S("option",{value:"ADMIN"},"Administrateur",-1),S("option",{value:"ENTREPRISE"},"Entreprise",-1),S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Ai,h.role]])])):Zt("",!0),t.isAdmin&&h.role==="SALARIE"?(Ne(),Be("div",XW,[m[21]||(m[21]=S("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Sn(S("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=x=>h.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=S("option",{value:null},"-- Slectionner une entreprise --",-1)),(Ne(!0),Be(bn,null,Hn(t.entreprises,x=>(Ne(),Be("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Entreprise")+") ",9,JW))),128))],512),[[Ai,h.entreprise]])])):Zt("",!0),t.isEntreprise&&!h.id?(Ne(),Be("div",QW,[m[23]||(m[23]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Sn(S("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=x=>h.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Ai,h.role]])])):Zt("",!0),(t.isAdmin||t.isEntreprise)&&h.role==="VISITEUR"&&!t.currentSalarie?(Ne(),Be("div",eq,[m[25]||(m[25]=S("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Sn(S("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=x=>h.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=S("option",{value:null},"-- Slectionner un salarie --",-1)),(Ne(!0),Be(bn,null,Hn(t.salaries,x=>(Ne(),Be("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Salarie")+") ",9,tq))),128))],512),[[Ai,h.salarie]])])):Zt("",!0),S("div",nq,[S("div",null,[m[26]||(m[26]=S("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Sn(S("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=x=>h.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.first_name]])]),S("div",null,[m[27]||(m[27]=S("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Sn(S("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=x=>h.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.last_name]])])]),S("div",null,[m[28]||(m[28]=S("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Sn(S("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=x=>h.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.email]]),s.value?(Ne(),Be("div",rq,kt(s.value),1)):Zt("",!0)]),S("div",null,[m[29]||(m[29]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Sn(S("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=x=>h.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.username]]),o.value?(Ne(),Be("div",iq,kt(o.value),1)):Zt("",!0)]),S("div",null,[m[30]||(m[30]=S("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Sn(S("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=x=>h.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.company_name]])]),h.role==="ENTREPRISE"||h.role==="SALARIE"?(Ne(),Be("div",sq,[m[32]||(m[32]=S("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),S("div",oq,[Sn(S("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=x=>h.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.storage_quota]]),m[31]||(m[31]=S("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[33]||(m[33]=S("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Zt("",!0),h.role==="ENTREPRISE"?(Ne(),Be("div",aq,[m[38]||(m[38]=S("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),S("div",lq,[m[34]||(m[34]=S("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Cl API Ecowitt",-1)),Sn(S("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=x=>h.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl API Ecowitt"},null,512),[[Pr,h.ecowitt_api_key]]),m[35]||(m[35]=S("p",{class:"mt-1 text-sm text-gray-500"},"Cl API pour accder aux services mto Ecowitt",-1))]),S("div",uq,[m[36]||(m[36]=S("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Cl d'application Ecowitt",-1)),Sn(S("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=x=>h.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl d'application Ecowitt"},null,512),[[Pr,h.ecowitt_application_key]]),m[37]||(m[37]=S("p",{class:"mt-1 text-sm text-gray-500"},"Cl d'application pour accder aux services mto Ecowitt",-1))])])):Zt("",!0),h.id?Zt("",!0):(Ne(),Be("div",cq,[m[39]||(m[39]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Sn(S("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=x=>h.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,h.password]])])),h.id?Zt("",!0):(Ne(),Be("div",dq,[m[40]||(m[40]=S("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Sn(S("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Pr,c.value]]),a.value?(Ne(),Be("div",hq,kt(a.value),1)):Zt("",!0)])),S("div",fq,[S("button",{type:"button",onClick:m[15]||(m[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),S("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ne(),Be("span",gq,m[41]||(m[41]=[S("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Zt("",!0),Gr(" "+kt(h.id?"Enregistrer":"Crer"),1)],8,pq)])],32)])])])])])]))}}),vq={class:"fixed inset-0 z-[3001] overflow-y-auto"},yq={class:"flex items-center justify-center min-h-screen w-full"},bq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},_q={class:"p-4 md:p-6"},wq={class:"flex items-start"},xq={class:"ml-4 flex-1"},Lq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Sq={class:"mt-2"},Cq={class:"text-sm text-gray-500"},Eq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},sP=Ss({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ne(),Be("div",vq,[S("div",yq,[n[3]||(n[3]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",bq,[S("div",_q,[S("div",wq,[n[2]||(n[2]=S("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[S("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),S("div",xq,[S("h3",Lq,kt(t.title),1),S("div",Sq,[S("p",Cq,kt(t.message),1)])])]),S("div",Eq,[S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),Pq={class:"h-full bg-gray-50"},Mq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},kq={class:"flex justify-between items-center mb-8"},Aq={class:"text-3xl font-extrabold text-gray-900"},Tq={key:0},Dq={key:1},Nq={key:2},Oq={key:0},Iq={key:1},Bq={key:2},Rq={class:"bg-white shadow rounded-lg mb-6 p-4"},Fq={class:"space-y-4"},jq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zq={key:0},$q={key:0,value:"ADMIN"},Vq={key:1,value:"ENTREPRISE"},Uq={key:1},Hq=["value"],Gq={key:2},Wq=["value"],qq={class:"w-full"},Yq={class:"bg-white shadow rounded-lg"},Kq={class:"overflow-x-auto"},Zq={class:"min-w-full divide-y divide-gray-200"},Xq={class:"bg-gray-50"},Jq={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Qq={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},eY={class:"bg-white divide-y divide-gray-200"},tY={key:0,class:"animate-pulse"},nY={key:1},rY={class:"px-6 py-4 whitespace-nowrap"},iY={class:"flex items-center"},sY={class:"flex-shrink-0 h-10 w-10"},oY={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},aY={class:"text-primary-600 font-medium"},lY={class:"ml-4"},uY={class:"text-sm font-medium text-gray-900"},cY={class:"text-sm text-gray-500"},dY={class:"px-6 py-4 whitespace-nowrap"},hY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pY={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gY={class:"px-6 py-4 whitespace-nowrap"},mY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},vY=["onClick"],yY=["onClick"],bY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},_Y=Ss({__name:"UserListView",setup(t){const e=to(),n=Kl(),r=Lt([]),i=Lt([]),s=Lt([]),o=Lt(!1),a=Lt(!1),l=Lt(null),c=Lt(null),h=Lt(!0),p=Lt([]),v=Zl({role:"",search:"",salarie:"",entreprise:""}),m=Un(()=>e.isAdmin),x=Un(()=>e.isEntreprise),E=Un(()=>e.isSalarie),k=Un(()=>m.value?r.value.filter($=>$.role==="SALARIE"):x.value?r.value.filter($=>{var R,I;return $.role==="SALARIE"&&((R=$.entreprise)==null?void 0:R.id)===((I=e.user)==null?void 0:I.id)}):[]),T=Un(()=>{let $=r.value;if(x.value&&($=$.filter(R=>{var I,X,K,_e,ve;return R.role==="SALARIE"?((I=R.entreprise)==null?void 0:I.id)===((X=e.user)==null?void 0:X.id):R.role==="VISITEUR"?((_e=(K=R.salarie)==null?void 0:K.entreprise)==null?void 0:_e.id)===((ve=e.user)==null?void 0:ve.id):!1})),E.value&&($=$.filter(R=>{var I,X;return R.role==="VISITEUR"&&(R.salarie_id===((I=e.user)==null?void 0:I.id)||R.salarie&&R.salarie.id===((X=e.user)==null?void 0:X.id))})),(m.value||x.value)&&(v.role&&($=$.filter(R=>R.role===v.role)),v.salarie&&($=$.filter(R=>{var X;const I=((X=R.salarie)==null?void 0:X.id)||R.salarie_id;return(I==null?void 0:I.toString())===v.salarie.toString()})),v.entreprise&&m.value&&($=$.filter(R=>{var I,X,K,_e,ve;return R.role==="SALARIE"?((X=(I=R.entreprise)==null?void 0:I.id)==null?void 0:X.toString())===v.entreprise.toString():R.role==="VISITEUR"?((ve=(_e=(K=R.salarie)==null?void 0:K.entreprise)==null?void 0:_e.id)==null?void 0:ve.toString())===v.entreprise.toString():!1}))),v.search){const R=v.search.toLowerCase();$=$.filter(I=>{var X,K,_e,ve;return((X=I.username)==null?void 0:X.toLowerCase().includes(R))||((K=I.email)==null?void 0:K.toLowerCase().includes(R))||((_e=I.first_name)==null?void 0:_e.toLowerCase().includes(R))||((ve=I.last_name)==null?void 0:ve.toLowerCase().includes(R))||I.company_name&&I.company_name.toLowerCase().includes(R)})}return $});no(async()=>{await A(),await z()});async function A(){var $,R,I;h.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(x.value){const[X,K]=await Promise.all([tv({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),tv({role:"VISITEUR",entrepriseId:(R=e.user)==null?void 0:R.id})]);r.value=[...X,...K]}else E.value&&(r.value=await tv({role:"VISITEUR",salarieId:(I=e.user)==null?void 0:I.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(X){console.error("Erreur lors de la rcupration des utilisateurs:",X),n.error("Erreur lors de la rcupration des utilisateurs")}finally{h.value=!1}}async function z(){try{m.value?await Promise.all([Y(),ge()]):x.value&&await ne()}catch($){console.error("Erreur lors de la rcupration des dpendances:",$)}}async function Y(){var $;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries(($=e.user)==null?void 0:$.id))}catch(R){console.error("Erreur lors de la rcupration des salaries:",R)}}async function ne(){var $,R;if(!(!x.value||!(($=e.user)!=null&&$.id)))try{i.value=await e.fetchEntrepriseSalaries((R=e.user)==null?void 0:R.id)}catch(I){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",I)}}async function ge(){try{s.value=await e.fetchEnterprises()}catch($){console.error("Erreur lors de la rcupration des entreprises:",$)}}function pe(){l.value=null,o.value=!0}function O($){l.value={...$},o.value=!0}function j(){o.value=!1,l.value=null,p.value=[]}async function J($){var I,X,K,_e,ve,Ge;p.value=[];const R=!!$.id;try{const se={...$};m.value?(se.entreprise&&typeof se.entreprise=="object"?se.entreprise_id=se.entreprise.id:typeof se.entreprise=="number"&&(se.entreprise_id=se.entreprise),se.salarie&&typeof se.salarie=="object"?se.salarie_id=se.salarie.id:typeof se.salarie=="number"&&(se.salarie_id=se.salarie)):x.value?(se.entreprise_id=(I=e.user)==null?void 0:I.id,se.role==="VISITEUR"&&(se.salarie&&typeof se.salarie=="object"?se.salarie_id=se.salarie.id:typeof se.salarie=="number"&&(se.salarie_id=se.salarie))):E.value&&(se.role="VISITEUR",se.salarie_id=(X=e.user)==null?void 0:X.id),se.role==="SALARIE"?((K=se.entreprise)!=null&&K.id?(se.entreprise_id=se.entreprise.id,delete se.entreprise):typeof se.entreprise=="number"&&(se.entreprise_id=se.entreprise,delete se.entreprise),delete se.salarie):se.role==="VISITEUR"&&((_e=se.salarie)!=null&&_e.id?(se.salarie_id=se.salarie.id,delete se.salarie):typeof se.salarie=="number"&&(se.salarie_id=se.salarie,delete se.salarie),delete se.entreprise,delete se.entreprise_id),R?(await e.updateUser($.id,se),n.success("Utilisateur modifi avec succs")):(await e.createUser(se),n.success("Utilisateur cr avec succs")),await Promise.all([A(),z()]),j()}catch(se){console.error("Error saving user:",((ve=se.response)==null?void 0:ve.data)||se),p.value=V7(se),n.error("Erreur lors de la sauvegarde de l'utilisateur");const q=((Ge=se.response)==null?void 0:Ge.data)||{};let Z="";throw typeof q=="object"&&(Z=Object.entries(q).map(([ie,de])=>Array.isArray(de)?`${ie}: ${de[0]}`:`${ie}: ${de}`).filter(ie=>ie).join(`
`)),Z||(Z="Une erreur est survenue lors de la sauvegarde"),new Error(Z)}}function V($){c.value=$,a.value=!0}async function B(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprim avec succs"),await Promise.all([A(),z()]),a.value=!1,c.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),n.error("Erreur lors de la suppression de l'utilisateur"),$}}function H($){var R,I,X,K,_e,ve,Ge,se;return m.value?!0:x.value?$.role==="SALARIE"?((R=$.entreprise)==null?void 0:R.id)===((I=e.user)==null?void 0:I.id):$.role==="VISITEUR"?((K=(X=$.salarie)==null?void 0:X.entreprise)==null?void 0:K.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?$.role==="VISITEUR"&&($.salarie_id===((ve=e.user)==null?void 0:ve.id)||((Ge=$.salarie)==null?void 0:Ge.id)===((se=e.user)==null?void 0:se.id)):!1}return($,R)=>{var I,X,K,_e;return Ne(),Be("div",Pq,[S("div",Mq,[S("div",kq,[S("h1",Aq,[m.value?(Ne(),Be("span",Tq,"Gestion des utilisateurs")):x.value?(Ne(),Be("span",Dq,"Gestion des salaries et visiteurs")):E.value?(Ne(),Be("span",Nq,"Gestion des visiteurs")):Zt("",!0)]),S("button",{onClick:pe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[R[5]||(R[5]=S("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Ne(),Be("span",Oq,"Nouvel utilisateur")):x.value?(Ne(),Be("span",Iq,"Nouveau salarie/visiteur")):E.value?(Ne(),Be("span",Bq,"Nouvel visiteur")):Zt("",!0)])]),S("div",Rq,[S("div",Fq,[S("div",jq,[m.value||x.value?(Ne(),Be("div",zq,[R[9]||(R[9]=S("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Sn(S("select",{id:"role-filter","onUpdate:modelValue":R[0]||(R[0]=ve=>v.role=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[R[6]||(R[6]=S("option",{value:""},"Tous les rles",-1)),m.value?(Ne(),Be("option",$q,"Administrateur")):Zt("",!0),m.value?(Ne(),Be("option",Vq,"Entreprise")):Zt("",!0),R[7]||(R[7]=S("option",{value:"SALARIE"},"Salarie",-1)),R[8]||(R[8]=S("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Ai,v.role]])])):Zt("",!0),m.value?(Ne(),Be("div",Uq,[R[11]||(R[11]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Sn(S("select",{id:"entreprise-filter","onUpdate:modelValue":R[1]||(R[1]=ve=>v.entreprise=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[R[10]||(R[10]=S("option",{value:""},"Toutes les entreprises",-1)),(Ne(!0),Be(bn,null,Hn(s.value,ve=>(Ne(),Be("option",{key:ve.id,value:ve.id},kt(Bn(mu)(ve)),9,Hq))),128))],512),[[Ai,v.entreprise]])])):Zt("",!0),m.value||x.value?(Ne(),Be("div",Gq,[R[13]||(R[13]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Sn(S("select",{id:"salarie-filter","onUpdate:modelValue":R[2]||(R[2]=ve=>v.salarie=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[R[12]||(R[12]=S("option",{value:""},"Tous les salaries",-1)),(Ne(!0),Be(bn,null,Hn(k.value,ve=>(Ne(),Be("option",{key:ve.id,value:ve.id},kt(Bn(mu)(ve)),9,Wq))),128))],512),[[Ai,v.salarie]])])):Zt("",!0)]),S("div",qq,[R[14]||(R[14]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Sn(S("input",{type:"text",id:"search","onUpdate:modelValue":R[3]||(R[3]=ve=>v.search=ve),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Pr,v.search]])])])]),S("div",Yq,[S("div",Kq,[S("table",Zq,[S("thead",Xq,[S("tr",null,[R[15]||(R[15]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),R[16]||(R[16]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),R[17]||(R[17]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||x.value?(Ne(),Be("th",Jq," Entreprise ")):Zt("",!0),m.value||x.value?(Ne(),Be("th",Qq," Salarie ")):Zt("",!0),R[18]||(R[18]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),R[19]||(R[19]=S("th",{scope:"col",class:"relative px-6 py-3"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",eY,[h.value?(Ne(),Be("tr",tY,R[20]||(R[20]=[S("td",{colspan:"7",class:"py-4 px-6"},[S("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):T.value.length===0?(Ne(),Be("tr",nY,R[21]||(R[21]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):Zt("",!0),(Ne(!0),Be(bn,null,Hn(T.value,ve=>{var Ge;return Ne(),Be("tr",{key:ve.id},[S("td",rY,[S("div",iY,[S("div",sY,[S("div",oY,[S("span",aY,kt(Bn(H7)(ve.first_name,ve.last_name)),1)])]),S("div",lY,[S("div",uY,kt(Bn(mu)(ve)),1),S("div",cY,kt(ve.username),1)])])]),S("td",dY,[S("span",{class:gi(Bn(q7)())},kt(Bn(W7)(ve.role)),3)]),S("td",hY,kt(ve.email),1),m.value||x.value?(Ne(),Be("td",fY,[ve.role==="ENTREPRISE"?(Ne(),Be(bn,{key:0},[Gr(" - ")],64)):ve.role==="SALARIE"?(Ne(),Be(bn,{key:1},[Gr(kt(ve.entreprise?Bn(mu)(ve.entreprise):"Non assign"),1)],64)):ve.role==="VISITEUR"?(Ne(),Be(bn,{key:2},[Gr(kt((Ge=ve.salarie)!=null&&Ge.entreprise?Bn(mu)(ve.salarie.entreprise):"Non assign"),1)],64)):(Ne(),Be(bn,{key:3},[Gr(" - ")],64))])):Zt("",!0),m.value||x.value?(Ne(),Be("td",pY,[ve.role==="ENTREPRISE"||ve.role==="ADMIN"?(Ne(),Be(bn,{key:0},[Gr(" - ")],64)):ve.role==="SALARIE"?(Ne(),Be(bn,{key:1},[Gr(" - ")],64)):(Ne(),Be(bn,{key:2},[Gr(kt(ve.salarie?Bn(mu)(ve.salarie):"Non assign"),1)],64))])):Zt("",!0),S("td",gY,[S("span",{class:gi(Bn(Y7)(ve.is_active))},kt(ve.is_active?"Actif":"Inactif"),3)]),S("td",mY,[S("button",{onClick:se=>O(ve),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,vY),H(ve)?(Ne(),Be("button",{key:0,onClick:se=>V(ve),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,yY)):Zt("",!0)])])}),128))])])])])]),o.value?(Ne(),Be("div",bY,[ti(mq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":x.value,"current-salarie":E.value?(X=(I=Bn(e).user)==null?void 0:I.id)==null?void 0:X.toString():void 0,"current-entreprise":x.value?(_e=(K=Bn(e).user)==null?void 0:K.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:j,onSave:J},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Zt("",!0),a.value?(Ne(),Vo(sP,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:B,onCancel:R[4]||(R[4]=ve=>a.value=!1)})):Zt("",!0)])}}}),wY={class:"h-full bg-gray-50"},xY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},LY={class:"sm:flex sm:items-center"},SY={class:"sm:flex-auto"},CY={class:"text-2xl font-semibold text-gray-900"},EY={class:"mt-2 text-sm text-gray-700"},PY={key:0,class:"mt-8"},MY={class:"mb-6"},kY=["value"],AY={class:"mb-6"},TY={value:null},DY=["value"],NY={key:0,class:"mb-6"},OY={value:null},IY=["value"],BY={key:1,class:"mt-8"},RY={class:"mb-6"},FY=["value"],jY={class:"mt-8"},zY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},$Y={class:"overflow-x-auto"},VY={class:"min-w-full divide-y divide-gray-300"},UY={class:"bg-gray-50"},HY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},GY={class:"ml-2 flex-none rounded"},WY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},qY={class:"ml-2 flex-none rounded"},YY={class:"divide-y divide-gray-200 bg-white"},KY={key:0},ZY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},XY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},JY={class:"px-3 py-4 text-sm text-gray-900"},QY={key:0,class:"flex items-center"},eK={class:"h-8 w-8 flex-shrink-0"},tK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},nK={class:"text-primary-700 font-medium text-sm"},rK={class:"ml-3"},iK={class:"font-medium"},sK={key:1,class:"text-gray-500"},oK={class:"px-3 py-4 text-sm text-gray-900"},aK={key:0,class:"flex items-center"},lK={class:"h-8 w-8 flex-shrink-0"},uK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},cK={class:"text-primary-700 font-medium text-sm"},dK={class:"ml-3"},hK={class:"font-medium"},fK={key:1,class:"text-gray-500"},pK={class:"px-3 py-4 text-sm text-gray-900"},gK={key:0,class:"flex items-center"},mK={class:"h-8 w-8 flex-shrink-0"},vK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},yK={class:"text-primary-700 font-medium text-sm"},bK={class:"ml-3"},_K={class:"font-medium"},wK={key:1,class:"text-gray-500"},xK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},LK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},SK=["onClick"],CK=["onClick"],EK=["onClick"],PK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},MK={class:"bg-white rounded-lg p-6 max-w-md w-full"},kK={class:"flex justify-between items-center mb-4"},AK=["disabled"],TK=["disabled"],DK={key:0,class:"space-y-4"},NK={key:0},OK=["disabled"],IK=["value"],BK=["disabled"],RK=["value"],FK={key:0,class:"mt-1 text-sm text-gray-500"},jK=["disabled"],zK=["value"],$K={key:0,class:"mt-1 text-sm text-gray-500"},VK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},UK={class:"flex"},HK={class:"ml-3"},GK={class:"text-sm font-medium text-red-800"},WK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},qK=["disabled"],YK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},KK=Ss({__name:"PlansView",setup(t){const e=Nm(),n=$y(),r=to(),i=Lt([]),s=Lt([]),o=Lt([]),a=Lt([]),l=Lt(!1),c=Lt(!1),h=Lt(!1),p=Lt(null),v=Lt({nom:"",description:"",client:null}),m=Lt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=Lt(!1),E=Lt(null),k=Lt(null),T=Lt(null),A=Lt("date_modification"),z=Lt("desc"),Y=Lt(null),ne=Un(()=>k.value?a.value.filter(he=>typeof he.salarie=="object"&&he.salarie?he.salarie.id===k.value:he.salarie===k.value||he.salarie_id===k.value):a.value),ge=Un(()=>{let he=i.value;console.log(`
[PlansView] Filtering plans:`,he.map(Ae=>({id:Ae.id,entreprise:Ae.entreprise,salarie:Ae.salarie,visiteur:Ae.visiteur}))),r.isAdmin?(Y.value&&(he=he.filter(Ae=>{var De;return typeof Ae.entreprise=="object"?((De=Ae.entreprise)==null?void 0:De.id)===Y.value:Ae.entreprise===Y.value})),k.value&&(he=he.filter(Ae=>{var De;return typeof Ae.salarie=="object"?((De=Ae.salarie)==null?void 0:De.id)===k.value:Ae.salarie===k.value}),T.value&&(he=he.filter(Ae=>{var De;return typeof Ae.visiteur=="object"?((De=Ae.visiteur)==null?void 0:De.id)===T.value:Ae.visiteur===T.value})))):r.isSalarie&&(he=he.filter(Ae=>{var De,Ke,fe;return typeof Ae.salarie=="object"?((De=Ae.salarie)==null?void 0:De.id)===((Ke=r.user)==null?void 0:Ke.id):Ae.salarie===((fe=r.user)==null?void 0:fe.id)}),T.value&&(he=he.filter(Ae=>{var De;return typeof Ae.visiteur=="object"?((De=Ae.visiteur)==null?void 0:De.id)===T.value:Ae.visiteur===T.value})));const Q=[...he].sort((Ae,De)=>{if(A.value==="nom")return z.value==="asc"?Ae.nom.localeCompare(De.nom):De.nom.localeCompare(Ae.nom);{const Ke=new Date(Ae[A.value]).getTime(),fe=new Date(De[A.value]).getTime();return z.value==="asc"?Ke-fe:fe-Ke}});return console.log("[PlansView] Final filtered and sorted plans:",Q.map(Ae=>({id:Ae.id,entreprise:Ae.entreprise,salarie:Ae.salarie,visiteur:Ae.visiteur}))),Q}),pe=Un(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(he=>{var Q,Ae,De;return typeof he.salarie=="object"?((Q=he.salarie)==null?void 0:Q.id)===((Ae=r.user)==null?void 0:Ae.id):he.salarie===((De=r.user)==null?void 0:De.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(he=>{var De,Ke,fe,ee;const Q=he.createur.id===((De=r.user)==null?void 0:De.id);let Ae=!1;return typeof he.visiteur=="object"?Ae=((Ke=he.visiteur)==null?void 0:Ke.id)===((fe=r.user)==null?void 0:fe.id):Ae=he.visiteur===((ee=r.user)==null?void 0:ee.id),Ae||Q})}),O=Un(()=>Y.value?s.value.filter(he=>{var Q;return typeof he.entreprise=="object"?((Q=he.entreprise)==null?void 0:Q.id)===Y.value:he.entreprise_id===Y.value}):s.value),j=Un(()=>m.value.entreprise?s.value.filter(he=>{var Q;return typeof he.entreprise=="object"?((Q=he.entreprise)==null?void 0:Q.id)===m.value.entreprise:he.entreprise_id===m.value.entreprise}):[]),J=Un(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(he=>typeof he.salarie=="object"&&he.salarie?he.salarie.id===m.value.salarie:he.salarie===m.value.salarie||he.salarie_id===m.value.salarie));no(async()=>{var he;await V(),r.isAdmin?await B():r.isSalarie&&await $(((he=r.user)==null?void 0:he.id)||0)});async function V(){try{const he=await n.fetchPlansWithDetails();i.value=he.data}catch(he){console.error("Erreur lors du chargement des plans:",he)}}async function B(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(he){console.error("Erreur lors du chargement des entreprises:",he)}}async function H(he){try{if(console.log("Chargement des salaries pour l'entreprise:",he),he===void 0){const Q=await r.fetchUsersByRole({role:"SALARIE"});s.value=Q}else s.value=await r.fetchEntrepriseSalaries(he);console.log("Salaries chargs:",s.value)}catch(Q){console.error("Erreur lors du chargement des salaries:",Q)}}async function $(he){try{console.log("Chargement des visiteurs pour le salarie:",he);const Q=await tv({role:"VISITEUR",salarieId:he});a.value=Q.map(Ae=>({...Ae,salarie_id:he})),console.log("Visiteurs chargs:",a.value)}catch(Q){console.error("Erreur lors du chargement des visiteurs:",Q)}}function R(){l.value=!0,v.value={nom:"",description:"",client:null}}async function I(he){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:he.id,nom:he.nom,entreprise:he.entreprise,salarie:he.salarie,visiteur:he.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),n.setCurrentPlan(he),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",he.id),localStorage.setItem("lastPlanId",he.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(Q){console.error("[PlansView][editPlan] ERREUR:",Q),Q instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",Q.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function X(he){he!=null&&he.id&&(p.value=he,h.value=!0)}async function K(){var he,Q;if((he=p.value)!=null&&he.id)try{await n.deletePlan(p.value.id),await V(),((Q=n.currentPlan)==null?void 0:Q.id)===p.value.id&&n.clearCurrentPlan()}catch(Ae){console.error("Erreur lors de la suppression du plan:",Ae),alert("Une erreur est survenue lors de la suppression du plan")}finally{h.value=!1,p.value=null}}function _e(){h.value=!1,p.value=null}function ve(he){return new Date(he).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ge(he){if(!he)return"";const Q=he.first_name||"",Ae=he.last_name||"";return(Q.charAt(0)+Ae.charAt(0)).toUpperCase()}async function se(he){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await B();const Q=typeof he.entreprise=="object"&&he.entreprise?he.entreprise.id:he.entreprise,Ae=typeof he.salarie=="object"&&he.salarie?he.salarie.id:he.salarie,De=typeof he.visiteur=="object"&&he.visiteur?he.visiteur.id:he.visiteur;m.value={id:he.id,nom:he.nom,description:he.description,entreprise:Q||null,salarie:Ae||null,visiteur:De||null},Q&&await H(Q),Ae&&await $(Ae),c.value=!0}catch(Q){console.error("Erreur lors de l'ouverture du modal:",Q),E.value="Erreur lors du chargement des donnes"}finally{x.value=!1}}async function q(){var he,Q,Ae,De,Ke;E.value=null,x.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const fe=await n.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Rponse de la mise  jour:",fe),fe&&(c.value=!1,await V())}catch(fe){if(console.error("Erreur lors de la mise  jour du plan:",fe),(Q=(he=fe.response)==null?void 0:he.data)!=null&&Q.detail)E.value=fe.response.data.detail;else if((De=(Ae=fe.response)==null?void 0:Ae.data)!=null&&De.non_field_errors)E.value=fe.response.data.non_field_errors[0];else if((Ke=fe.response)!=null&&Ke.data){const ee=Object.entries(fe.response.data).map(([oe,le])=>`${oe}: ${Array.isArray(le)?le[0]:le}`);E.value=ee.join(`
`)}else E.value=fe.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{x.value=!1}}fi(()=>Y.value,async he=>{k.value=null,T.value=null,he?await H(he):await H()}),fi(()=>k.value,async he=>{T.value=null,he&&await $(he)}),fi(()=>m.value.entreprise,async he=>{he===null?(m.value.salarie=null,m.value.visiteur=null):await H(he)}),fi(()=>m.value.salarie,async he=>{m.value.visiteur=null,he&&await $(he)});function Z(he){var Ke,fe,ee;const Q=r.user;if(!Q)return!1;if(Q.user_type==="admin")return!0;if(Q.user_type==="entreprise")return typeof he.entreprise=="object"?((Ke=he.entreprise)==null?void 0:Ke.id)===Q.id:he.entreprise===Q.id;if(Q.user_type==="salarie")return typeof he.salarie=="object"?((fe=he.salarie)==null?void 0:fe.id)===Q.id:he.salarie===Q.id;const Ae=he.createur.id===Q.id;let De=!1;return typeof he.visiteur=="object"?De=((ee=he.visiteur)==null?void 0:ee.id)===Q.id:De=he.visiteur===Q.id,De||Ae}async function ie(he){await V(),localStorage.setItem("lastPlanId",he.toString()),console.log(`Plan ${he} cr et dfini comme plan actif`),e.push("/")}function de(he){A.value===he?z.value=z.value==="asc"?"desc":"asc":(A.value=he,z.value="desc")}function ye(he){return he?mu(he):""}return(he,Q)=>{var Ae;return Ne(),Be("div",wY,[S("div",xY,[S("div",LY,[S("div",SY,[S("h1",CY,kt(pe.value.title),1),S("p",EY,kt(pe.value.description),1)]),S("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[S("button",{onClick:R,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Bn(r).isAdmin?(Ne(),Be("div",PY,[S("div",MY,[Q[15]||(Q[15]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Sn(S("select",{id:"entreprise-filter","onUpdate:modelValue":Q[0]||(Q[0]=De=>Y.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[14]||(Q[14]=S("option",{value:null},"Toutes les entreprises",-1)),(Ne(!0),Be(bn,null,Hn(o.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,kY))),128))],512),[[Ai,Y.value]])]),S("div",AY,[Q[16]||(Q[16]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Sn(S("select",{id:"salarie-filter","onUpdate:modelValue":Q[1]||(Q[1]=De=>k.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",TY,kt(O.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Ne(!0),Be(bn,null,Hn(O.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,DY))),128))],512),[[Ai,k.value]])]),k.value?(Ne(),Be("div",NY,[Q[17]||(Q[17]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Sn(S("select",{id:"visiteur-filter","onUpdate:modelValue":Q[2]||(Q[2]=De=>T.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",OY,kt(ne.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Ne(!0),Be(bn,null,Hn(ne.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,IY))),128))],512),[[Ai,T.value]])])):Zt("",!0)])):Bn(r).isSalarie?(Ne(),Be("div",BY,[S("div",RY,[Q[19]||(Q[19]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Sn(S("select",{id:"visiteur-filter","onUpdate:modelValue":Q[3]||(Q[3]=De=>T.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[18]||(Q[18]=S("option",{value:null},"Tous les visiteurs",-1)),(Ne(!0),Be(bn,null,Hn(a.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,FY))),128))],512),[[Ai,T.value]])])])):Zt("",!0),S("div",jY,[S("div",zY,[S("div",$Y,[S("table",VY,[S("thead",UY,[S("tr",null,[S("th",HY,[S("button",{onClick:Q[4]||(Q[4]=De=>de("nom")),class:"group inline-flex items-center"},[Q[21]||(Q[21]=Gr(" Nom ")),S("span",GY,[(Ne(),Be("svg",{class:gi(["h-5 w-5",{"text-gray-900":A.value==="nom","text-gray-400":A.value!=="nom","rotate-180":A.value==="nom"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[20]||(Q[20]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Q[24]||(Q[24]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Q[25]||(Q[25]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),Q[26]||(Q[26]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),Q[27]||(Q[27]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),S("th",WY,[S("button",{onClick:Q[5]||(Q[5]=De=>de("date_modification")),class:"group inline-flex items-center"},[Q[23]||(Q[23]=Gr(" Dernire modification ")),S("span",qY,[(Ne(),Be("svg",{class:gi(["h-5 w-5",{"text-gray-900":A.value==="date_modification","text-gray-400":A.value!=="date_modification","rotate-180":A.value==="date_modification"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[22]||(Q[22]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Q[28]||(Q[28]=S("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",YY,[ge.value.length===0?(Ne(),Be("tr",KY,Q[29]||(Q[29]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Zt("",!0),(Ne(!0),Be(bn,null,Hn(ge.value,De=>(Ne(),Be("tr",{key:De.id,class:"hover:bg-gray-50"},[S("td",ZY,kt(De.nom),1),S("td",XY,kt(De.description||"-"),1),S("td",JY,[De.entreprise&&typeof De.entreprise=="object"?(Ne(),Be("div",QY,[S("div",eK,[S("div",tK,[S("span",nK,kt(Ge(De.entreprise)),1)])]),S("div",rK,[S("div",iK,kt(Bn(mu)(De.entreprise)),1)])])):(Ne(),Be("div",sK," Non assign "))]),S("td",oK,[De.salarie&&typeof De.salarie=="object"?(Ne(),Be("div",aK,[S("div",lK,[S("div",uK,[S("span",cK,kt(Ge(De.salarie)),1)])]),S("div",dK,[S("div",hK,kt(Bn(mu)(De.salarie)),1)])])):(Ne(),Be("div",fK," Non assign "))]),S("td",pK,[De.visiteur&&typeof De.visiteur=="object"?(Ne(),Be("div",gK,[S("div",mK,[S("div",vK,[S("span",yK,kt(Ge(De.visiteur)),1)])]),S("div",bK,[S("div",_K,kt(Bn(mu)(De.visiteur)),1)])])):(Ne(),Be("div",wK," Non assign "))]),S("td",xK,kt(ve(De.date_modification)),1),S("td",LK,[S("button",{onClick:Ke=>I(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,SK),S("button",{onClick:Ke=>se(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,CK),Z(De)?(Ne(),Be("button",{key:0,onClick:Ke=>X(De),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,EK)):Zt("",!0)])]))),128))])])])])]),ti(RE,{modelValue:l.value,"onUpdate:modelValue":Q[6]||(Q[6]=De=>l.value=De),salaries:s.value,clients:a.value,onCreated:ie},null,8,["modelValue","salaries","clients"]),c.value?(Ne(),Be("div",PK,[S("div",MK,[S("div",kK,[Q[31]||(Q[31]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),S("button",{onClick:Q[7]||(Q[7]=De=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Q[30]||(Q[30]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("form",{onSubmit:Wl(q,["prevent"]),class:"space-y-4"},[S("div",null,[Q[32]||(Q[32]=S("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Sn(S("input",{type:"text",id:"edit-nom","onUpdate:modelValue":Q[8]||(Q[8]=De=>m.value.nom=De),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,AK),[[Pr,m.value.nom]])]),S("div",null,[Q[33]||(Q[33]=S("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Sn(S("textarea",{id:"edit-description","onUpdate:modelValue":Q[9]||(Q[9]=De=>m.value.description=De),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,TK),[[Pr,m.value.description]])]),Bn(r).isAdmin||((Ae=Bn(r).user)==null?void 0:Ae.user_type)==="entreprise"?(Ne(),Be("div",DK,[Bn(r).isAdmin?(Ne(),Be("div",NK,[Q[35]||(Q[35]=S("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Sn(S("select",{id:"edit-entreprise","onUpdate:modelValue":Q[10]||(Q[10]=De=>m.value.entreprise=De),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[Q[34]||(Q[34]=S("option",{value:null},"Slectionner une entreprise",-1)),(Ne(!0),Be(bn,null,Hn(o.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,IK))),128))],8,OK),[[Ai,m.value.entreprise]])])):Zt("",!0),S("div",null,[Q[37]||(Q[37]=S("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Sn(S("select",{id:"edit-salarie","onUpdate:modelValue":Q[11]||(Q[11]=De=>m.value.salarie=De),disabled:Bn(r).isAdmin&&!m.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[Q[36]||(Q[36]=S("option",{value:null},"Slectionner un salarie",-1)),(Ne(!0),Be(bn,null,Hn(j.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,RK))),128))],8,BK),[[Ai,m.value.salarie]]),Bn(r).isAdmin&&!m.value.entreprise?(Ne(),Be("p",FK," Veuillez d'abord slectionner une entreprise ")):Zt("",!0)]),S("div",null,[Q[39]||(Q[39]=S("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Sn(S("select",{id:"edit-visiteur","onUpdate:modelValue":Q[12]||(Q[12]=De=>m.value.visiteur=De),disabled:!m.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[Q[38]||(Q[38]=S("option",{value:null},"Slectionner un visiteur",-1)),(Ne(!0),Be(bn,null,Hn(J.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,zK))),128))],8,jK),[[Ai,m.value.visiteur]]),m.value.salarie?Zt("",!0):(Ne(),Be("p",$K," Veuillez d'abord slectionner un salarie "))])])):Zt("",!0),E.value?(Ne(),Be("div",VK,[S("div",UK,[Q[40]||(Q[40]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",HK,[S("p",GK,kt(E.value),1)])])])):Zt("",!0),S("div",WK,[S("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:Q[13]||(Q[13]=De=>c.value=!1)}," Annuler "),S("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Ne(),Be("svg",YK,Q[41]||(Q[41]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),Gr(" "+kt(x.value?"Enregistrement...":"Enregistrer"),1)],8,qK)])],32)])])):Zt("",!0),h.value?(Ne(),Vo(sP,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:K,onCancel:_e})):Zt("",!0)])])}}});var oP={exports:{}};const ZK=yE(nI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function R5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function td(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(n),!0).forEach(function(r){XK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uv=function(e){return typeof e}:uv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function XK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gu(){return Gu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gu.apply(this,arguments)}function JK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function QK(t,e){if(t==null)return{};var n=JK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eZ(t){return tZ(t)||nZ(t)||rZ(t)||iZ()}function tZ(t){if(Array.isArray(t))return Nb(t)}function nZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rZ(t,e){if(t){if(typeof t=="string")return Nb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(t,e)}}function Nb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sZ="1.14.0";function Od(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var jd=Od(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Om=Od(/Edge/i),F5=Od(/firefox/i),Wg=Od(/safari/i)&&!Od(/chrome/i)&&!Od(/android/i),aP=Od(/iP(ad|od|hone)/i),oZ=Od(/chrome/i)&&Od(/android/i),lP={capture:!1,passive:!1};function pi(t,e,n){t.addEventListener(e,n,!jd&&lP)}function oi(t,e,n){t.removeEventListener(e,n,!jd&&lP)}function Zv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function aZ(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function gc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Zv(t,e):Zv(t,e))||r&&t===n)return t;if(t===n)break}while(t=aZ(t))}return null}var j5=/\s+/g;function Js(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(j5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(j5," ")}}function tr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ff(t,e){var n="";if(typeof t=="string")n=t;else do{var r=tr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function uP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Jc(){var t=document.scrollingElement;return t||document.documentElement}function Is(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,h,p;if(t!==window&&t.parentNode&&t!==Jc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,h=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!jd))do if(i&&i.getBoundingClientRect&&(tr(i,"transform")!=="none"||n&&tr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(tr(i,"border-top-width")),a-=v.left+parseInt(tr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=ff(i||t),x=m&&m.a,E=m&&m.d;m&&(o/=E,a/=x,p/=x,h/=E,l=o+h,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:h}}}function z5(t,e,n){for(var r=dh(t,!0),i=Is(t)[e];r;){var s=Is(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Jc())break;r=dh(r,!1)}return!1}function Tp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Sr.ghost&&(r||o[s]!==Sr.dragged)&&gc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function V_(t,e){for(var n=t.lastElementChild;n&&(n===Sr.ghost||tr(n,"display")==="none"||e&&!Zv(n,e));)n=n.previousElementSibling;return n||null}function go(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Sr.clone&&(!e||Zv(t,e))&&n++;return n}function $5(t){var e=0,n=0,r=Jc();if(t)do{var i=ff(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function lZ(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dh(t,e){if(!t||!t.getBoundingClientRect)return Jc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=tr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Jc()}function uZ(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var qg;function cP(t,e){return function(){if(!qg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),qg=setTimeout(function(){qg=void 0},e)}}}function cZ(){clearTimeout(qg),qg=void 0}function dP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function U_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function V5(t,e){tr(t,"position","absolute"),tr(t,"top",e.top),tr(t,"left",e.left),tr(t,"width",e.width),tr(t,"height",e.height)}function c2(t){tr(t,"position",""),tr(t,"top",""),tr(t,"left",""),tr(t,"width",""),tr(t,"height","")}var Qa="Sortable"+new Date().getTime();function dZ(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(tr(i,"display")==="none"||i===Sr.ghost)){t.push({target:i,rect:Is(i)});var s=td({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ff(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(lZ(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,h=c.fromRect,p=Is(c),v=c.prevFromRect,m=c.prevToRect,x=a.rect,E=ff(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&u2(v,p)&&!u2(h,p)&&(x.top-p.top)/(x.left-p.left)===(h.top-p.top)/(h.left-p.left)&&(l=fZ(x,v,m,i.options)),u2(p,h)||(c.prevFromRect=h,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){tr(r,"transition",""),tr(r,"transform","");var a=ff(this.el),l=a&&a.a,c=a&&a.d,h=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!p,tr(r,"transform","translate3d("+h+"px,"+p+"px,0)"),this.forRepaintDummy=hZ(r),tr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),tr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){tr(r,"transition",""),tr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function hZ(t){return t.offsetWidth}function fZ(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Kf=[],d2={initializeByDefault:!0},Im={mount:function(e){for(var n in d2)d2.hasOwnProperty(n)&&!(n in e)&&(e[n]=d2[n]);Kf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Kf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Kf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](td({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](td({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Kf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Gu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Kf.forEach(function(i){typeof i.eventProperties=="function"&&Gu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Kf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Lg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,m=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[Qa],!!e){var E,k=e.options,T="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!jd&&!Om?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=h,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var A=td(td({},x),Im.getEventProperties(r,e));for(var z in A)E[z]=A[z];n&&n.dispatchEvent(E),k[T]&&k[T].call(e,E)}}var pZ=["evt"],Rl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=QK(r,pZ);Im.pluginEvent.bind(Sr)(e,n,td({dragEl:In,parentEl:ho,ghostEl:qr,rootEl:Os,nextEl:Qh,lastDownEl:cv,cloneEl:fo,cloneHidden:lh,dragStarted:Sg,putSortable:Ea,activeSortable:Sr.active,originalEvent:i,oldIndex:dp,oldDraggableIndex:Yg,newIndex:fu,newDraggableIndex:ah,hideGhostForTarget:gP,unhideGhostForTarget:mP,cloneNowHidden:function(){lh=!0},cloneNowShown:function(){lh=!1},dispatchSortableEvent:function(a){ml({sortable:n,name:a,originalEvent:i})}},s))};function ml(t){Lg(td({putSortable:Ea,cloneEl:fo,targetEl:In,rootEl:Os,oldIndex:dp,oldDraggableIndex:Yg,newIndex:fu,newDraggableIndex:ah},t))}var In,ho,qr,Os,Qh,cv,fo,lh,dp,fu,Yg,ah,E0,Ea,lp=!1,Xv=!1,Jv=[],Wh,cc,h2,f2,U5,H5,Sg,Zf,Kg,Zg=!1,P0=!1,dv,Wa,p2=[],Ob=!1,Qv=[],Gy=typeof document<"u",M0=aP,G5=Om||jd?"cssFloat":"float",gZ=Gy&&!oZ&&!aP&&"draggable"in document.createElement("div"),hP=function(){if(Gy){if(jd)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fP=function(e,n){var r=tr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Tp(e,0,n),o=Tp(e,1,n),a=s&&tr(s),l=o&&tr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Is(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Is(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[G5]==="none"||o&&r[G5]==="none"&&c+h>i)?"vertical":"horizontal"},mZ=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},vZ=function(e,n){var r;return Jv.some(function(i){var s=i[Qa].options.emptyInsertThreshold;if(!(!s||V_(i))){var o=Is(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},pP=function(e){function n(s,o){return function(a,l,c,h){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,h),o)(a,l,c,h);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||uv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},gP=function(){!hP&&qr&&tr(qr,"display","none")},mP=function(){!hP&&qr&&tr(qr,"display","")};Gy&&document.addEventListener("click",function(t){if(Xv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Xv=!1,!1},!0);var qh=function(e){if(In){e=e.touches?e.touches[0]:e;var n=vZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Qa]._onDragOver(r)}}},yZ=function(e){In&&In.parentNode[Qa]._isOutsideThisEl(e.target)};function Sr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Gu({},e),t[Qa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sr.supportPointer!==!1&&"PointerEvent"in window&&!Wg,emptyInsertThreshold:5};Im.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);pP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:gZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?pi(t,"pointerdown",this._onTapStart):(pi(t,"mousedown",this._onTapStart),pi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(pi(t,"dragover",this),pi(t,"dragenter",this)),Jv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Gu(this,dZ())}Sr.prototype={constructor:Sr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Zf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,In):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=i.filter;if(EZ(r),!In&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Wg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=gc(l,i.draggable,r,!1),!(l&&l.animated)&&cv!==l)){if(dp=go(l),Yg=go(l,i.draggable),typeof h=="function"){if(h.call(this,e,l,this)){ml({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Rl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(p){if(p=gc(c,p.trim(),r,!1),p)return ml({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Rl("filter",n,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!gc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!In&&r.parentNode===s){var c=Is(r);if(Os=s,In=r,ho=In.parentNode,Qh=In.nextSibling,cv=r,E0=o.group,Sr.dragged=In,Wh={target:In,clientX:(n||e).clientX,clientY:(n||e).clientY},U5=Wh.clientX-c.left,H5=Wh.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,In.style["will-change"]="all",l=function(){if(Rl("delayEnded",i,{evt:e}),Sr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!F5&&i.nativeDraggable&&(In.draggable=!0),i._triggerDragStart(e,n),ml({sortable:i,name:"choose",originalEvent:e}),Js(In,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){uP(In,h.trim(),g2)}),pi(a,"dragover",qh),pi(a,"mousemove",qh),pi(a,"touchmove",qh),pi(a,"mouseup",i._onDrop),pi(a,"touchend",i._onDrop),pi(a,"touchcancel",i._onDrop),F5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,In.draggable=!0),Rl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Om||jd))){if(Sr.eventCanceled){this._onDrop();return}pi(a,"mouseup",i._disableDelayedDrag),pi(a,"touchend",i._disableDelayedDrag),pi(a,"touchcancel",i._disableDelayedDrag),pi(a,"mousemove",i._delayedDragTouchMoveHandler),pi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&pi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){In&&g2(In),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;oi(e,"mouseup",this._disableDelayedDrag),oi(e,"touchend",this._disableDelayedDrag),oi(e,"touchcancel",this._disableDelayedDrag),oi(e,"mousemove",this._delayedDragTouchMoveHandler),oi(e,"touchmove",this._delayedDragTouchMoveHandler),oi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?pi(document,"pointermove",this._onTouchMove):n?pi(document,"touchmove",this._onTouchMove):pi(document,"mousemove",this._onTouchMove):(pi(In,"dragend",this),pi(Os,"dragstart",this._onDragStart));try{document.selection?hv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(lp=!1,Os&&In){Rl("dragStarted",this,{evt:n}),this.nativeDraggable&&pi(document,"dragover",yZ);var r=this.options;!e&&Js(In,r.dragClass,!1),Js(In,r.ghostClass,!0),Sr.active=this,e&&this._appendGhost(),ml({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(cc){this._lastX=cc.clientX,this._lastY=cc.clientY,gP();for(var e=document.elementFromPoint(cc.clientX,cc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(cc.clientX,cc.clientY),e!==n);)n=e;if(In.parentNode[Qa]._isOutsideThisEl(e),n)do{if(n[Qa]){var r=void 0;if(r=n[Qa]._onDragOver({clientX:cc.clientX,clientY:cc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);mP()}},_onTouchMove:function(e){if(Wh){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=qr&&ff(qr,!0),a=qr&&o&&o.a,l=qr&&o&&o.d,c=M0&&Wa&&$5(Wa),h=(s.clientX-Wh.clientX+i.x)/(a||1)+(c?c[0]-p2[0]:0)/(a||1),p=(s.clientY-Wh.clientY+i.y)/(l||1)+(c?c[1]-p2[1]:0)/(l||1);if(!Sr.active&&!lp){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(qr){o?(o.e+=h-(h2||0),o.f+=p-(f2||0)):o={a:1,b:0,c:0,d:1,e:h,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");tr(qr,"webkitTransform",v),tr(qr,"mozTransform",v),tr(qr,"msTransform",v),tr(qr,"transform",v),h2=h,f2=p,cc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!qr){var e=this.options.fallbackOnBody?document.body:Os,n=Is(In,!0,M0,!0,e),r=this.options;if(M0){for(Wa=e;tr(Wa,"position")==="static"&&tr(Wa,"transform")==="none"&&Wa!==document;)Wa=Wa.parentNode;Wa!==document.body&&Wa!==document.documentElement?(Wa===document&&(Wa=Jc()),n.top+=Wa.scrollTop,n.left+=Wa.scrollLeft):Wa=Jc(),p2=$5(Wa)}qr=In.cloneNode(!0),Js(qr,r.ghostClass,!1),Js(qr,r.fallbackClass,!0),Js(qr,r.dragClass,!0),tr(qr,"transition",""),tr(qr,"transform",""),tr(qr,"box-sizing","border-box"),tr(qr,"margin",0),tr(qr,"top",n.top),tr(qr,"left",n.left),tr(qr,"width",n.width),tr(qr,"height",n.height),tr(qr,"opacity","0.8"),tr(qr,"position",M0?"absolute":"fixed"),tr(qr,"zIndex","100000"),tr(qr,"pointerEvents","none"),Sr.ghost=qr,e.appendChild(qr),tr(qr,"transform-origin",U5/parseInt(qr.style.width)*100+"% "+H5/parseInt(qr.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Rl("dragStart",this,{evt:e}),Sr.eventCanceled){this._onDrop();return}Rl("setupClone",this),Sr.eventCanceled||(fo=U_(In),fo.draggable=!1,fo.style["will-change"]="",this._hideClone(),Js(fo,this.options.chosenClass,!1),Sr.clone=fo),r.cloneId=hv(function(){Rl("clone",r),!Sr.eventCanceled&&(r.options.removeCloneOnHide||Os.insertBefore(fo,In),r._hideClone(),ml({sortable:r,name:"clone"}))}),!n&&Js(In,s.dragClass,!0),n?(Xv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(oi(document,"mouseup",r._onDrop),oi(document,"touchend",r._onDrop),oi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,In)),pi(document,"drop",r),tr(In,"transform","translateZ(0)")),lp=!0,r._dragStartId=hv(r._dragStarted.bind(r,n,e)),pi(document,"selectstart",r),Sg=!0,Wg&&tr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Sr.active,h=E0===l,p=a.sort,v=Ea||c,m,x=this,E=!1;if(Ob)return;function k(K,_e){Rl(K,x,td({evt:e,isOwner:h,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:A,onMove:function(Ge,se){return k0(Os,n,In,i,Ge,Is(Ge),e,se)},changed:z},_e))}function T(){k("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function A(K){return k("dragOverCompleted",{insertion:K}),K&&(h?c._hideClone():c._showClone(x),x!==v&&(Js(In,Ea?Ea.options.ghostClass:c.options.ghostClass,!1),Js(In,a.ghostClass,!0)),Ea!==x&&x!==Sr.active?Ea=x:x===Sr.active&&Ea&&(Ea=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){k("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===In&&!In.animated||r===n&&!r.animated)&&(Zf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(In.parentNode[Qa]._isOutsideThisEl(e.target),!K&&qh(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function z(){fu=go(In),ah=go(In,a.draggable),ml({sortable:x,name:"change",toEl:n,newIndex:fu,newDraggableIndex:ah,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=gc(r,a.draggable,n,!0),k("dragOver"),Sr.eventCanceled)return E;if(In.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return A(!1);if(Xv=!1,c&&!a.disabled&&(h?p||(o=ho!==Os):Ea===this||(this.lastPutMode=E0.checkPull(this,c,In,e))&&l.checkPut(this,c,In,e))){if(m=this._getDirection(e,r)==="vertical",i=Is(In),k("dragOverValid"),Sr.eventCanceled)return E;if(o)return ho=Os,T(),this._hideClone(),k("revert"),Sr.eventCanceled||(Qh?Os.insertBefore(In,Qh):Os.appendChild(In)),A(!0);var Y=V_(n,a.draggable);if(!Y||xZ(e,m,this)&&!Y.animated){if(Y===In)return A(!1);if(Y&&n===e.target&&(r=Y),r&&(s=Is(r)),k0(Os,n,In,i,r,s,e,!!r)!==!1)return T(),n.appendChild(In),ho=n,z(),A(!0)}else if(Y&&wZ(e,m,this)){var ne=Tp(n,0,a,!0);if(ne===In)return A(!1);if(r=ne,s=Is(r),k0(Os,n,In,i,r,s,e,!1)!==!1)return T(),n.insertBefore(In,ne),ho=n,z(),A(!0)}else if(r.parentNode===n){s=Is(r);var ge=0,pe,O=In.parentNode!==n,j=!mZ(In.animated&&In.toRect||i,r.animated&&r.toRect||s,m),J=m?"top":"left",V=z5(r,"top","top")||z5(In,"top","top"),B=V?V.scrollTop:void 0;Zf!==r&&(pe=s[J],Zg=!1,P0=!j&&a.invertSwap||O),ge=LZ(e,r,s,m,j?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,P0,Zf===r);var H;if(ge!==0){var $=go(In);do $-=ge,H=ho.children[$];while(H&&(tr(H,"display")==="none"||H===qr))}if(ge===0||H===r)return A(!1);Zf=r,Kg=ge;var R=r.nextElementSibling,I=!1;I=ge===1;var X=k0(Os,n,In,i,r,s,e,I);if(X!==!1)return(X===1||X===-1)&&(I=X===1),Ob=!0,setTimeout(_Z,30),T(),I&&!R?n.appendChild(In):r.parentNode.insertBefore(In,I?R:r),V&&dP(V,0,B-V.scrollTop),ho=In.parentNode,pe!==void 0&&!P0&&(dv=Math.abs(pe-Is(r)[J])),z(),A(!0)}if(n.contains(In))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){oi(document,"mousemove",this._onTouchMove),oi(document,"touchmove",this._onTouchMove),oi(document,"pointermove",this._onTouchMove),oi(document,"dragover",qh),oi(document,"mousemove",qh),oi(document,"touchmove",qh)},_offUpEvents:function(){var e=this.el.ownerDocument;oi(e,"mouseup",this._onDrop),oi(e,"touchend",this._onDrop),oi(e,"pointerup",this._onDrop),oi(e,"touchcancel",this._onDrop),oi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(fu=go(In),ah=go(In,r.draggable),Rl("drop",this,{evt:e}),ho=In&&In.parentNode,fu=go(In),ah=go(In,r.draggable),Sr.eventCanceled){this._nulling();return}lp=!1,P0=!1,Zg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ib(this.cloneId),Ib(this._dragStartId),this.nativeDraggable&&(oi(document,"drop",this),oi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wg&&tr(document.body,"user-select",""),tr(In,"transform",""),e&&(Sg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),qr&&qr.parentNode&&qr.parentNode.removeChild(qr),(Os===ho||Ea&&Ea.lastPutMode!=="clone")&&fo&&fo.parentNode&&fo.parentNode.removeChild(fo),In&&(this.nativeDraggable&&oi(In,"dragend",this),g2(In),In.style["will-change"]="",Sg&&!lp&&Js(In,Ea?Ea.options.ghostClass:this.options.ghostClass,!1),Js(In,this.options.chosenClass,!1),ml({sortable:this,name:"unchoose",toEl:ho,newIndex:null,newDraggableIndex:null,originalEvent:e}),Os!==ho?(fu>=0&&(ml({rootEl:ho,name:"add",toEl:ho,fromEl:Os,originalEvent:e}),ml({sortable:this,name:"remove",toEl:ho,originalEvent:e}),ml({rootEl:ho,name:"sort",toEl:ho,fromEl:Os,originalEvent:e}),ml({sortable:this,name:"sort",toEl:ho,originalEvent:e})),Ea&&Ea.save()):fu!==dp&&fu>=0&&(ml({sortable:this,name:"update",toEl:ho,originalEvent:e}),ml({sortable:this,name:"sort",toEl:ho,originalEvent:e})),Sr.active&&((fu==null||fu===-1)&&(fu=dp,ah=Yg),ml({sortable:this,name:"end",toEl:ho,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Rl("nulling",this),Os=In=ho=qr=Qh=fo=cv=lh=Wh=cc=Sg=fu=ah=dp=Yg=Zf=Kg=Ea=E0=Sr.dragged=Sr.ghost=Sr.clone=Sr.active=null,Qv.forEach(function(e){e.checked=!0}),Qv.length=h2=f2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":In&&(this._onDragOver(e),bZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],gc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||CZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];gc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return gc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Im.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&pP(r)},destroy:function(){Rl("destroy",this);var e=this.el;e[Qa]=null,oi(e,"mousedown",this._onTapStart),oi(e,"touchstart",this._onTapStart),oi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(oi(e,"dragover",this),oi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jv.splice(Jv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!lh){if(Rl("hideClone",this),Sr.eventCanceled)return;tr(fo,"display","none"),this.options.removeCloneOnHide&&fo.parentNode&&fo.parentNode.removeChild(fo),lh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(lh){if(Rl("showClone",this),Sr.eventCanceled)return;In.parentNode==Os&&!this.options.group.revertClone?Os.insertBefore(fo,In):Qh?Os.insertBefore(fo,Qh):Os.appendChild(fo),this.options.group.revertClone&&this.animate(In,fo),tr(fo,"display",""),lh=!1}}};function bZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function k0(t,e,n,r,i,s,o,a){var l,c=t[Qa],h=c.options.onMove,p;return window.CustomEvent&&!jd&&!Om?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Is(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),h&&(p=h.call(c,l,o)),p}function g2(t){t.draggable=!1}function _Z(){Ob=!1}function wZ(t,e,n){var r=Is(Tp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function xZ(t,e,n){var r=Is(V_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function LZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,h=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&dv<c*i){if(!Zg&&(Kg===1?l>h+c*s/2:l<p-c*s/2)&&(Zg=!0),Zg)v=!0;else if(Kg===1?l<h+dv:l>p-dv)return-Kg}else if(l>h+c*(1-i)/2&&l<p-c*(1-i)/2)return SZ(e)}return v=v||o,v&&(l<h+c*s/2||l>p-c*s/2)?l>h+c/2?1:-1:0}function SZ(t){return go(In)<go(t)?1:-1}function CZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function EZ(t){Qv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Qv.push(r)}}function hv(t){return setTimeout(t,0)}function Ib(t){return clearTimeout(t)}Gy&&pi(document,"touchmove",function(t){(Sr.active||lp)&&t.cancelable&&t.preventDefault()});Sr.utils={on:pi,off:oi,css:tr,find:uP,is:function(e,n){return!!gc(e,n,e,!1)},extend:uZ,throttle:cP,closest:gc,toggleClass:Js,clone:U_,index:go,nextTick:hv,cancelNextTick:Ib,detectDirection:fP,getChild:Tp};Sr.get=function(t){return t[Qa]};Sr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Sr.utils=td(td({},Sr.utils),r.utils)),Im.mount(r)})};Sr.create=function(t,e){return new Sr(t,e)};Sr.version=sZ;var $o=[],Cg,Bb,Rb=!1,m2,v2,ey,Eg;function PZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?pi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?pi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?pi(document,"touchmove",this._handleFallbackAutoScroll):pi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):(oi(document,"pointermove",this._handleFallbackAutoScroll),oi(document,"touchmove",this._handleFallbackAutoScroll),oi(document,"mousemove",this._handleFallbackAutoScroll)),W5(),fv(),cZ()},nulling:function(){ey=Bb=Cg=Rb=Eg=m2=v2=null,$o.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ey=n,r||this.options.forceAutoScrollFallback||Om||jd||Wg){y2(n,this.options,a,r);var l=dh(a,!0);Rb&&(!Eg||s!==m2||o!==v2)&&(Eg&&W5(),Eg=setInterval(function(){var c=dh(document.elementFromPoint(s,o),!0);c!==l&&(l=c,fv()),y2(n,i.options,c,r)},10),m2=s,v2=o)}else{if(!this.options.bubbleScroll||dh(a,!0)===Jc()){fv();return}y2(n,this.options,dh(a,!1),!1)}}},Gu(t,{pluginName:"scroll",initializeByDefault:!0})}function fv(){$o.forEach(function(t){clearInterval(t.pid)}),$o=[]}function W5(){clearInterval(Eg)}var y2=cP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Jc(),c=!1,h;Bb!==n&&(Bb=n,fv(),Cg=e.scroll,h=e.scrollFn,Cg===!0&&(Cg=dh(n,!0)));var p=0,v=Cg;do{var m=v,x=Is(m),E=x.top,k=x.bottom,T=x.left,A=x.right,z=x.width,Y=x.height,ne=void 0,ge=void 0,pe=m.scrollWidth,O=m.scrollHeight,j=tr(m),J=m.scrollLeft,V=m.scrollTop;m===l?(ne=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),ge=Y<O&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(ne=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"),ge=Y<O&&(j.overflowY==="auto"||j.overflowY==="scroll"));var B=ne&&(Math.abs(A-i)<=o&&J+z<pe)-(Math.abs(T-i)<=o&&!!J),H=ge&&(Math.abs(k-s)<=o&&V+Y<O)-(Math.abs(E-s)<=o&&!!V);if(!$o[p])for(var $=0;$<=p;$++)$o[$]||($o[$]={});($o[p].vx!=B||$o[p].vy!=H||$o[p].el!==m)&&($o[p].el=m,$o[p].vx=B,$o[p].vy=H,clearInterval($o[p].pid),(B!=0||H!=0)&&(c=!0,$o[p].pid=setInterval((function(){r&&this.layer===0&&Sr.active._onTouchMove(ey);var R=$o[this.layer].vy?$o[this.layer].vy*a:0,I=$o[this.layer].vx?$o[this.layer].vx*a:0;typeof h=="function"&&h.call(Sr.dragged.parentNode[Qa],I,R,t,ey,$o[this.layer].el)!=="continue"||dP($o[this.layer].el,I,R)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dh(v,!1)));Rb=c}},30),vP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function H_(){}H_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Tp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:vP};Gu(H_,{pluginName:"revertOnSpill"});function G_(){}G_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:vP};Gu(G_,{pluginName:"removeOnSpill"});var Iu;function MZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Iu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,h=this.options;if(i&&i!==c){var p=Iu;s(i)!==!1?(Js(i,h.swapClass,!0),Iu=i):Iu=null,p&&p!==Iu&&Js(p,h.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Iu&&Js(Iu,a.swapClass,!1),Iu&&(a.swap||i&&i.options.swap)&&s!==Iu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),kZ(s,Iu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Iu=null}},Gu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Iu}}})}function kZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=go(t),s=go(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Ir=[],hu=[],og,dc,ag=!1,Fl=!1,Xf=!1,fs,lg,A0;function AZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?pi(document,"pointerup",this._deselectMultiDrag):(pi(document,"mouseup",this._deselectMultiDrag),pi(document,"touchend",this._deselectMultiDrag)),pi(document,"keydown",this._checkKeyDown),pi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Ir.length&&dc===e?Ir.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;fs=r},delayEnded:function(){this.isMultiDrag=~Ir.indexOf(fs)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Ir.length;s++)hu.push(U_(Ir[s])),hu[s].sortableIndex=Ir[s].sortableIndex,hu[s].draggable=!1,hu[s].style["will-change"]="",Js(hu[s],this.options.selectedClass,!1),Ir[s]===fs&&Js(hu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ir.length&&dc===r&&(q5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(q5(!1,i),hu.forEach(function(o){tr(o,"display","")}),r(),A0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(hu.forEach(function(o){tr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),A0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&dc&&dc.multiDrag._deselectMultiDrag(),Ir.forEach(function(r){r.sortableIndex=go(r)}),Ir=Ir.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Xf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ir.forEach(function(o){o!==fs&&tr(o,"position","absolute")});var s=Is(fs,!1,!0,!0);Ir.forEach(function(o){o!==fs&&V5(o,s)}),Fl=!0,ag=!0}i.animateAll(function(){Fl=!1,ag=!1,r.options.animation&&Ir.forEach(function(o){c2(o)}),r.options.sort&&T0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Fl&&~Ir.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Ir.length>1&&(Ir.forEach(function(a){s.addAnimationState({target:a,rect:Fl?Is(a):o}),c2(a),a.fromRect=o,r.removeAnimationState(a)}),Fl=!1,TZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),ag=!1,c.animation&&Ir.length>1&&(Fl||!i&&!o.options.sort&&!l)){var h=Is(fs,!1,!0,!0);Ir.forEach(function(v){v!==fs&&(V5(v,h),a.appendChild(v))}),Fl=!0}if(!i)if(Fl||T0(),Ir.length>1){var p=A0;o._showClone(r),o.options.animation&&!A0&&p&&hu.forEach(function(v){o.addAnimationState({target:v,rect:lg}),v.fromRect=lg,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Ir.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){lg=Gu({},r);var o=ff(fs,!0);lg.top-=o.f,lg.left-=o.e}},dragOverAnimationComplete:function(){Fl&&(Fl=!1,T0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,h=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Xf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Js(fs,p.selectedClass,!~Ir.indexOf(fs)),~Ir.indexOf(fs))Ir.splice(Ir.indexOf(fs),1),og=null,Lg({sortable:o,rootEl:i,name:"deselect",targetEl:fs});else{if(Ir.push(fs),Lg({sortable:o,rootEl:i,name:"select",targetEl:fs}),r.shiftKey&&og&&o.el.contains(og)){var m=go(og),x=go(fs);if(~m&&~x&&m!==x){var E,k;for(x>m?(k=m,E=x):(k=x,E=m+1);k<E;k++)~Ir.indexOf(v[k])||(Js(v[k],p.selectedClass,!0),Ir.push(v[k]),Lg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else og=fs;dc=h}if(Xf&&this.isMultiDrag){if(Fl=!1,(s[Qa].options.sort||s!==i)&&Ir.length>1){var T=Is(fs),A=go(fs,":not(."+this.options.selectedClass+")");if(!ag&&p.animation&&(fs.thisAnimationDuration=null),h.captureAnimationState(),!ag&&(p.animation&&(fs.fromRect=T,Ir.forEach(function(Y){if(Y.thisAnimationDuration=null,Y!==fs){var ne=Fl?Is(Y):T;Y.fromRect=ne,h.addAnimationState({target:Y,rect:ne})}})),T0(),Ir.forEach(function(Y){v[A]?s.insertBefore(Y,v[A]):s.appendChild(Y),A++}),l===go(fs))){var z=!1;Ir.forEach(function(Y){if(Y.sortableIndex!==go(Y)){z=!0;return}}),z&&a("update")}Ir.forEach(function(Y){c2(Y)}),h.animateAll()}dc=h}(i===s||c&&c.lastPutMode!=="clone")&&hu.forEach(function(Y){Y.parentNode&&Y.parentNode.removeChild(Y)})}},nullingGlobal:function(){this.isMultiDrag=Xf=!1,hu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),oi(document,"pointerup",this._deselectMultiDrag),oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Xf<"u"&&Xf)&&dc===this.sortable&&!(n&&gc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Ir.length;){var r=Ir[0];Js(r,this.options.selectedClass,!1),Ir.shift(),Lg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Gu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Qa];!r||!r.options.multiDrag||~Ir.indexOf(n)||(dc&&dc!==r&&(dc.multiDrag._deselectMultiDrag(),dc=r),Js(n,r.options.selectedClass,!0),Ir.push(n))},deselect:function(n){var r=n.parentNode[Qa],i=Ir.indexOf(n);!r||!r.options.multiDrag||!~i||(Js(n,r.options.selectedClass,!1),Ir.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Ir.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Fl&&s!==fs?o=-1:Fl?o=go(s,":not(."+n.options.selectedClass+")"):o=go(s),i.push({multiDragElement:s,index:o})}),{items:eZ(Ir),clones:[].concat(hu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function TZ(t,e){Ir.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function q5(t,e){hu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function T0(){Ir.forEach(function(t){t!==fs&&t.parentNode&&t.parentNode.removeChild(t)})}Sr.mount(new PZ);Sr.mount(G_,H_);const DZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:AZ,Sortable:Sr,Swap:MZ,default:Sr},Symbol.toStringTag,{value:"Module"})),NZ=yE(DZ);(function(t,e){(function(r,i){t.exports=i(ZK,NZ)})(typeof self<"u"?self:ha,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(c,h,(function(p){return a[p]}).bind(null,h));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,h){if(a(l),c===void 0)return l;switch(h){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,m){return l.call(c,p,v,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return h.slice()}};i.exports.f=function(m){return h&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),h=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(k,T){if(k=h(k),T=p(T,!0),m)try{return x(k,T)}catch{}if(v(k,T))return c(!l.f.call(k,T),k[T])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),h=o("ae40"),p=c("reduce"),v=h("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,h){var p=c.exec;if(typeof p=="function"){var v=p.call(c,h);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,h)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),h=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==c)try{h(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),h=l("forEach"),p=c("forEach");i.exports=!h||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var h=0,p={next:function(){return{done:!!h++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),h=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],m=v.constructor={};return m[h]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(h,p){var v=a(h);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),h=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(x,E){var k=x.target,T=x.global,A=x.stat,z,Y,ne,ge,pe,O;if(T?Y=a:A?Y=a[k]||p(k,{}):Y=(a[k]||{}).prototype,Y)for(ne in E){if(pe=E[ne],x.noTargetGet?(O=l(Y,ne),ge=O&&O.value):ge=Y[ne],z=m(T?ne:k+(A?".":"#")+ne,x.forced),!z&&ge!==void 0){if(typeof pe==typeof ge)continue;v(pe,ge)}(x.sham||ge&&ge.sham)&&c(pe,"sham",!0),h(Y,ne,pe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),h=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],x=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var T=l(this),A=String(T.source),z=T.flags,Y=String(z===void 0&&T instanceof RegExp&&!("flags"in v)?h.call(T):z);return"/"+A+"/"+Y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),h=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),x="".startsWith,E=Math.min,k=v("startsWith"),T=!m&&!k&&!!function(){var A=l(String.prototype,"startsWith");return A&&!A.writable}();a({target:"String",proto:!0,forced:!T&&!k},{startsWith:function(z){var Y=String(p(this));h(z);var ne=c(E(arguments.length>1?arguments[1]:void 0,Y.length)),ge=String(z);return x?x.call(Y,ge,ne):Y.slice(ne,ne+ge.length)===ge}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,h=c&&c.versions,p=h&&h.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),h=c("iterator");i.exports=function(p){if(p!=null)return p[h]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),h=o("df75");i.exports=a?Object.defineProperties:function(v,m){c(v);for(var x=h(m),E=x.length,k=0,T;E>k;)l.f(v,T=x[k++],m[T]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),h="String Iterator",p=l.set,v=l.getterFor(h);c(String,"String",function(m){p(this,{type:h,string:String(m),index:0})},function(){var x=v(this),E=x.string,k=x.index,T;return k>=E.length?{value:void 0,done:!0}:(T=a(E,k),x.index+=T.length,{value:T,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?c.call(h,""):Object(h)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),h=a("unscopables"),p=Array.prototype;p[h]==null&&c.f(p,h,{configurable:!0,value:l(null)}),i.exports=function(v){p[h][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),h=c("match");i.exports=function(p){var v;return a(p)&&((v=p[h])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),h=function(p){return function(v,m,x){var E=a(v),k=l(E.length),T=c(x,k),A;if(p&&m!=m){for(;k>T;)if(A=E[T++],A!=A)return!0}else for(;k>T;T++)if((p||T in E)&&E[T]===m)return p||T||0;return!p&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),h=o("ae40"),p=c("filter"),v=h("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),h=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var k=l(E),T=typeof this=="function"?this:Array,A=arguments.length,z=A>1?arguments[1]:void 0,Y=z!==void 0,ne=m(k),ge=0,pe,O,j,J,V,B;if(Y&&(z=a(z,A>2?arguments[2]:void 0,2)),ne!=null&&!(T==Array&&h(ne)))for(J=ne.call(k),V=J.next,O=new T;!(j=V.call(J)).done;ge++)B=Y?c(J,z,[j.value,ge],!0):j.value,v(O,ge,B);else for(pe=p(k.length),O=new T(pe);pe>ge;ge++)B=Y?z(k[ge],ge):k[ge],v(O,ge,B);return O.length=ge,O}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(h){return l(h)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),h=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),x=o("14c3"),E=Math.max,k=Math.min,T=Math.floor,A=/\$([$&'`]|\d\d?|<[^>]*>)/g,z=/\$([$&'`]|\d\d?)/g,Y=function(ne){return ne===void 0?ne:String(ne)};a("replace",2,function(ne,ge,pe,O){var j=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,J=O.REPLACE_KEEPS_$0,V=j?"$":"$0";return[function($,R){var I=v(this),X=$==null?void 0:$[ne];return X!==void 0?X.call($,I,R):ge.call(String(I),$,R)},function(H,$){if(!j&&J||typeof $=="string"&&$.indexOf(V)===-1){var R=pe(ge,H,this,$);if(R.done)return R.value}var I=l(H),X=String(this),K=typeof $=="function";K||($=String($));var _e=I.global;if(_e){var ve=I.unicode;I.lastIndex=0}for(var Ge=[];;){var se=x(I,X);if(se===null||(Ge.push(se),!_e))break;var q=String(se[0]);q===""&&(I.lastIndex=m(X,h(I.lastIndex),ve))}for(var Z="",ie=0,de=0;de<Ge.length;de++){se=Ge[de];for(var ye=String(se[0]),he=E(k(p(se.index),X.length),0),Q=[],Ae=1;Ae<se.length;Ae++)Q.push(Y(se[Ae]));var De=se.groups;if(K){var Ke=[ye].concat(Q,he,X);De!==void 0&&Ke.push(De);var fe=String($.apply(void 0,Ke))}else fe=B(ye,X,he,Q,De,$);he>=ie&&(Z+=X.slice(ie,he)+fe,ie=he+ye.length)}return Z+X.slice(ie)}];function B(H,$,R,I,X,K){var _e=R+H.length,ve=I.length,Ge=z;return X!==void 0&&(X=c(X),Ge=A),ge.call(K,Ge,function(se,q){var Z;switch(q.charAt(0)){case"$":return"$";case"&":return H;case"`":return $.slice(0,R);case"'":return $.slice(_e);case"<":Z=X[q.slice(1,-1)];break;default:var ie=+q;if(ie===0)return se;if(ie>ve){var de=T(ie/10);return de===0?se:de<=ve?I[de-1]===void 0?q.charAt(1):I[de-1]+q.charAt(1):se}Z=I[ie-1]}return Z===void 0?"":Z})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,h){return l[c]||(l[c]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),h=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(h(v)),x=c.f;return x?m.concat(x(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),h=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),k=h(E.length),T;return p(x),T=v(E,0),T.length=l(T,E,E,k,0,1,x,arguments.length>1?arguments[1]:void 0),T}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(h){return function(p,v){var m=String(l(p)),x=a(v),E=m.length,k,T;return x<0||x>=E?h?"":void 0:(k=m.charCodeAt(x),k<55296||k>56319||x+1===E||(T=m.charCodeAt(x+1))<56320||T>57343?h?m.charAt(x):k:h?m.slice(x,x+2):(k-55296<<10)+(T-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),h=c("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[h],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),h=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),x=l.WeakMap,E,k,T,A=function(j){return T(j)?k(j):E(j,{})},z=function(j){return function(J){var V;if(!c(J)||(V=k(J)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return V}};if(a){var Y=new x,ne=Y.get,ge=Y.has,pe=Y.set;E=function(j,J){return pe.call(Y,j,J),J},k=function(j){return ne.call(Y,j)||{}},T=function(j){return ge.call(Y,j)}}else{var O=v("state");m[O]=!0,E=function(j,J){return h(j,O,J),J},k=function(j){return p(j,O)?j[O]:{}},T=function(j){return p(j,O)}}i.exports={set:E,get:k,has:T,enforce:A,getterFor:z}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),h=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(k,T,A,z){var Y=z?!!z.unsafe:!1,ne=z?!!z.enumerable:!1,ge=z?!!z.noTargetGet:!1;if(typeof A=="function"&&(typeof T=="string"&&!c(A,"name")&&l(A,"name",T),x(A).source=E.join(typeof T=="string"?T:"")),k===a){ne?k[T]=A:h(T,A);return}else Y?!ge&&k[T]&&(ne=!0):delete k[T];ne?k[T]=A:l(k,T,A)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),h=o("d1e7").f,p=function(v){return function(m){for(var x=c(m),E=l(x),k=E.length,T=0,A=[],z;k>T;)z=E[T++],(!a||h.call(x,z))&&A.push(v?[z,x[z]]:x[z]);return A}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),h=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||h(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),h=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),x=">",E="<",k="prototype",T="script",A=m("IE_PROTO"),z=function(){},Y=function(j){return E+T+x+j+E+"/"+T+x},ne=function(j){j.write(Y("")),j.close();var J=j.parentWindow.Object;return j=null,J},ge=function(){var j=v("iframe"),J="java"+T+":",V;return j.style.display="none",p.appendChild(j),j.src=String(J),V=j.contentWindow.document,V.open(),V.write(Y("document.F=Object")),V.close(),V.F},pe,O=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch{}O=pe?ne(pe):ge();for(var j=c.length;j--;)delete O[k][c[j]];return O()};h[A]=!0,i.exports=Object.create||function(J,V){var B;return J!==null?(z[k]=a(J),B=new z,z[k]=null,B[A]=J):B=O(),V===void 0?B:l(B,V)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),h=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),x=o("b622"),E=o("c430"),k=o("3f8c"),T=o("ae93"),A=T.IteratorPrototype,z=T.BUGGY_SAFARI_ITERATORS,Y=x("iterator"),ne="keys",ge="values",pe="entries",O=function(){return this};i.exports=function(j,J,V,B,H,$,R){l(V,J,B);var I=function(de){if(de===H&&Ge)return Ge;if(!z&&de in _e)return _e[de];switch(de){case ne:return function(){return new V(this,de)};case ge:return function(){return new V(this,de)};case pe:return function(){return new V(this,de)}}return function(){return new V(this)}},X=J+" Iterator",K=!1,_e=j.prototype,ve=_e[Y]||_e["@@iterator"]||H&&_e[H],Ge=!z&&ve||I(H),se=J=="Array"&&_e.entries||ve,q,Z,ie;if(se&&(q=c(se.call(new j)),A!==Object.prototype&&q.next&&(!E&&c(q)!==A&&(h?h(q,A):typeof q[Y]!="function"&&v(q,Y,O)),p(q,X,!0,!0),E&&(k[X]=O))),H==ge&&ve&&ve.name!==ge&&(K=!0,Ge=function(){return ve.call(this)}),(!E||R)&&_e[Y]!==Ge&&v(_e,Y,Ge),k[J]=Ge,H)if(Z={values:I(ge),keys:$?Ge:I(ne),entries:I(pe)},R)for(ie in Z)(z||K||!(ie in _e))&&m(_e,ie,Z[ie]);else a({target:J,proto:!0,forced:z||K},Z);return Z}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(h,p,v){var m=a(p);m in h?l.f(h,m,c(0,v)):h[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(h,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function h(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==h&&document.currentScript)return document.currentScript;try{throw new Error}catch(pe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(pe.stack)||m.exec(pe.stack),E=x&&x[1]||!1,k=x&&x[2]||!1,T=document.location.href.replace(document.location.hash,""),A,z,Y,ne=document.getElementsByTagName("script");E===T&&(A=document.documentElement.outerHTML,z=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Y=A.replace(z,"$1").trim());for(var ge=0;ge<ne.length;ge++)if(ne[ge].readyState==="interactive"||ne[ge].src===E||E===T&&ne[ge].innerHTML&&ne[ge].innerHTML.trim()===Y)return ne[ge];return null}}return h})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,h){return c+(h?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(h,p,v){return l.f(h,p,c(1,v))}:function(h,p,v){return h[p]=v,h}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,h=String.prototype.replace,p=c,v=function(){var k=/a/,T=/b*/g;return c.call(k,"a"),c.call(T,"a"),k.lastIndex!==0||T.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||m;E&&(p=function(T){var A=this,z,Y,ne,ge,pe=m&&A.sticky,O=a.call(A),j=A.source,J=0,V=T;return pe&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),V=String(T).slice(A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&T[A.lastIndex-1]!==`
`)&&(j="(?: "+j+")",V=" "+V,J++),Y=new RegExp("^(?:"+j+")",O)),x&&(Y=new RegExp("^"+j+"$(?!\\s)",O)),v&&(z=A.lastIndex),ne=c.call(pe?Y:A,V),pe?ne?(ne.input=ne.input.slice(J),ne[0]=ne[0].slice(J),ne.index=A.lastIndex,A.lastIndex+=ne[0].length):A.lastIndex=0:v&&ne&&(A.lastIndex=A.global?ne.index+ne[0].length:z),x&&ne&&ne.length>1&&h.call(ne[0],Y,function(){for(ge=1;ge<arguments.length-2;ge++)arguments[ge]===void 0&&(ne[ge]=void 0)}),ne}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var k=p[h(x)];return k==m?!0:k==v?!1:typeof E=="function"?a(E):!!E},h=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),h=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),x=o("65f0"),E=o("1dde"),k=o("b622"),T=o("2d00"),A=k("isConcatSpreadable"),z=9007199254740991,Y="Maximum allowed index exceeded",ne=T>=51||!l(function(){var j=[];return j[A]=!1,j.concat()[0]!==j}),ge=E("concat"),pe=function(j){if(!h(j))return!1;var J=j[A];return J!==void 0?!!J:c(j)},O=!ne||!ge;a({target:"Array",proto:!0,forced:O},{concat:function(J){var V=p(this),B=x(V,0),H=0,$,R,I,X,K;for($=-1,I=arguments.length;$<I;$++)if(K=$===-1?V:arguments[$],pe(K)){if(X=v(K.length),H+X>z)throw TypeError(Y);for(R=0;R<X;R++,H++)R in K&&m(B,H,K[R])}else{if(H>=z)throw TypeError(Y);m(B,H++,K)}return B.length=H,B}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,h,p){try{return p?c(a(h)[0],h[1]):c(h)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),h=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,x,E){if(c(m),x=h(x,!0),c(E),l)try{return p(m,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[x]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),h=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,x,E){var k=x+" Iterator";return m.prototype=l(a,{next:c(1,E)}),h(m,k,!1,!0),p[k]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,h){return RegExp(c,h)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),h=function(p,v,m,x,E,k,T,A){for(var z=E,Y=0,ne=T?c(T,A,3):!1,ge;Y<x;){if(Y in m){if(ge=ne?ne(m[Y],Y,v):m[Y],k>0&&a(ge))z=h(p,v,ge,l(ge.length),z,k-1)-1;else{if(z>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[z]=ge}z++}Y++}return z};i.exports=h},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),h=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),x=o("1dde"),E=o("ae40"),k=x("splice"),T=E("splice",{ACCESSORS:!0,0:0,1:2}),A=Math.max,z=Math.min,Y=9007199254740991,ne="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!T},{splice:function(pe,O){var j=p(this),J=h(j.length),V=l(pe,J),B=arguments.length,H,$,R,I,X,K;if(B===0?H=$=0:B===1?(H=0,$=J-V):(H=B-2,$=z(A(c(O),0),J-V)),J+H-$>Y)throw TypeError(ne);for(R=v(j,$),I=0;I<$;I++)X=V+I,X in j&&m(R,I,j[X]);if(R.length=$,H<$){for(I=V;I<J-$;I++)X=I+$,K=I+H,X in j?j[K]=j[X]:delete j[K];for(I=J;I>J-$+H;I--)delete j[I-1]}else if(H>$)for(I=J-$;I>V;I--)X=I+$-1,K=I+H-1,X in j?j[K]=j[X]:delete j[K];for(I=0;I<H;I++)j[I+V]=arguments[I+2];return j.length=J-$+H,R}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),h=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),x=o("d039"),E=o("5135"),k=o("e8b5"),T=o("861d"),A=o("825a"),z=o("7b0b"),Y=o("fc6a"),ne=o("c04e"),ge=o("5c6c"),pe=o("7c73"),O=o("df75"),j=o("241c"),J=o("057f"),V=o("7418"),B=o("06cf"),H=o("9bf2"),$=o("d1e7"),R=o("9112"),I=o("6eeb"),X=o("5692"),K=o("f772"),_e=o("d012"),ve=o("90e3"),Ge=o("b622"),se=o("e538"),q=o("746f"),Z=o("d44e"),ie=o("69f3"),de=o("b727").forEach,ye=K("hidden"),he="Symbol",Q="prototype",Ae=Ge("toPrimitive"),De=ie.set,Ke=ie.getterFor(he),fe=Object[Q],ee=l.Symbol,oe=c("JSON","stringify"),le=B.f,ze=H.f,$e=J.f,Je=$.f,Me=X("symbols"),me=X("op-symbols"),qe=X("string-to-symbol-registry"),ct=X("symbol-to-string-registry"),ft=X("wks"),Mt=l.QObject,it=!Mt||!Mt[Q]||!Mt[Q].findChild,jt=p&&x(function(){return pe(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(en,_n,Cn){var qn=le(fe,_n);qn&&delete fe[_n],ze(en,_n,Cn),qn&&en!==fe&&ze(fe,_n,qn)}:ze,hn=function(en,_n){var Cn=Me[en]=pe(ee[Q]);return De(Cn,{type:he,tag:en,description:_n}),p||(Cn.description=_n),Cn},Ze=m?function(en){return typeof en=="symbol"}:function(en){return Object(en)instanceof ee},lt=function(_n,Cn,qn){_n===fe&&lt(me,Cn,qn),A(_n);var nr=ne(Cn,!0);return A(qn),E(Me,nr)?(qn.enumerable?(E(_n,ye)&&_n[ye][nr]&&(_n[ye][nr]=!1),qn=pe(qn,{enumerable:ge(0,!1)})):(E(_n,ye)||ze(_n,ye,ge(1,{})),_n[ye][nr]=!0),jt(_n,nr,qn)):ze(_n,nr,qn)},rt=function(_n,Cn){A(_n);var qn=Y(Cn),nr=O(qn).concat(xn(qn));return de(nr,function(rr){(!p||Qt.call(qn,rr))&&lt(_n,rr,qn[rr])}),_n},$t=function(_n,Cn){return Cn===void 0?pe(_n):rt(pe(_n),Cn)},Qt=function(_n){var Cn=ne(_n,!0),qn=Je.call(this,Cn);return this===fe&&E(Me,Cn)&&!E(me,Cn)?!1:qn||!E(this,Cn)||!E(Me,Cn)||E(this,ye)&&this[ye][Cn]?qn:!0},Pn=function(_n,Cn){var qn=Y(_n),nr=ne(Cn,!0);if(!(qn===fe&&E(Me,nr)&&!E(me,nr))){var rr=le(qn,nr);return rr&&E(Me,nr)&&!(E(qn,ye)&&qn[ye][nr])&&(rr.enumerable=!0),rr}},wn=function(_n){var Cn=$e(Y(_n)),qn=[];return de(Cn,function(nr){!E(Me,nr)&&!E(_e,nr)&&qn.push(nr)}),qn},xn=function(_n){var Cn=_n===fe,qn=$e(Cn?me:Y(_n)),nr=[];return de(qn,function(rr){E(Me,rr)&&(!Cn||E(fe,rr))&&nr.push(Me[rr])}),nr};if(v||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var _n=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Cn=ve(_n),qn=function(nr){this===fe&&qn.call(me,nr),E(this,ye)&&E(this[ye],Cn)&&(this[ye][Cn]=!1),jt(this,Cn,ge(1,nr))};return p&&it&&jt(fe,Cn,{configurable:!0,set:qn}),hn(Cn,_n)},I(ee[Q],"toString",function(){return Ke(this).tag}),I(ee,"withoutSetter",function(en){return hn(ve(en),en)}),$.f=Qt,H.f=lt,B.f=Pn,j.f=J.f=wn,V.f=xn,se.f=function(en){return hn(Ge(en),en)},p&&(ze(ee[Q],"description",{configurable:!0,get:function(){return Ke(this).description}}),h||I(fe,"propertyIsEnumerable",Qt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ee}),de(O(ft),function(en){q(en)}),a({target:he,stat:!0,forced:!v},{for:function(en){var _n=String(en);if(E(qe,_n))return qe[_n];var Cn=ee(_n);return qe[_n]=Cn,ct[Cn]=_n,Cn},keyFor:function(_n){if(!Ze(_n))throw TypeError(_n+" is not a symbol");if(E(ct,_n))return ct[_n]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:$t,defineProperty:lt,defineProperties:rt,getOwnPropertyDescriptor:Pn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:wn,getOwnPropertySymbols:xn}),a({target:"Object",stat:!0,forced:x(function(){V.f(1)})},{getOwnPropertySymbols:function(_n){return V.f(z(_n))}}),oe){var $n=!v||x(function(){var en=ee();return oe([en])!="[null]"||oe({a:en})!="{}"||oe(Object(en))!="{}"});a({target:"JSON",stat:!0,forced:$n},{stringify:function(_n,Cn,qn){for(var nr=[_n],rr=1,Jn;arguments.length>rr;)nr.push(arguments[rr++]);if(Jn=Cn,!(!T(Cn)&&_n===void 0||Ze(_n)))return k(Cn)||(Cn=function(Mr,as){if(typeof Jn=="function"&&(as=Jn.call(this,Mr,as)),!Ze(as))return as}),nr[1]=Cn,oe.apply(null,nr)}})}ee[Q][Ae]||R(ee[Q],Ae,ee[Q].valueOf),Z(ee,he),_e[ye]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),h=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:h},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var h=[][l];return!!h&&a(function(){h.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var h=/./;try{"/./"[c](h)}catch{try{return h[l]=!1,"/./"[c](h)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),h=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,x){if(c(p,m))return p[m];x||(x={});var E=[][m],k=c(x,"ACCESSORS")?x.ACCESSORS:!1,T=c(x,0)?x[0]:v,A=c(x,1)?x[1]:void 0;return p[m]=!!E&&!l(function(){if(k&&!a)return!0;var z={length:-1};k?h(z,1,{enumerable:!0,get:v}):z[1]=1,E.call(z,T,A)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),h=o("b622"),p=o("c430"),v=h("iterator"),m=!1,x=function(){return this},E,k,T;[].keys&&(T=[].keys(),"next"in T?(k=a(a(T)),k!==Object.prototype&&(E=k)):m=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,h=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return h.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),h=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||h;i.exports=function(k){return c(m,k)||(p&&c(x,k)?m[k]=x[k]:m[k]=E("Symbol."+k)),m[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),h=o("d039"),p=h(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),h=o("50c4"),p=o("65f0"),v=[].push,m=function(x){var E=x==1,k=x==2,T=x==3,A=x==4,z=x==6,Y=x==5||z;return function(ne,ge,pe,O){for(var j=c(ne),J=l(j),V=a(ge,pe,3),B=h(J.length),H=0,$=O||p,R=E?$(ne,B):k?$(ne,0):void 0,I,X;B>H;H++)if((Y||H in J)&&(I=J[H],X=V(I,H,j),x)){if(E)R[H]=X;else if(X)switch(x){case 3:return!0;case 5:return I;case 6:return H;case 2:v.call(R,I)}else if(A)return!1}return z?-1:T||A?A:R}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var h,p;if(c&&typeof(h=l.toString)=="function"&&!a(p=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(p=h.call(l))||!c&&typeof(h=l.toString)=="function"&&!a(p=h.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",h=a[c]||l(c,{});i.exports=h},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),h=o("ae40"),p="findIndex",v=!0,m=h(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),h=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),x=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!x},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,h=o("d012");i.exports=function(p,v){var m=l(p),x=0,E=[],k;for(k in m)!a(h,k)&&a(m,k)&&E.push(k);for(;v.length>x;)a(m,k=v[x++])&&(~c(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),h=o("ae40"),p=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,h=l(c)&&l(c.createElement);i.exports=function(p){return h?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,h){try{l(a,c,h)}catch{a[c]=h}return h}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(h){return typeof h=="function"?h:void 0};i.exports=function(h,p){return arguments.length<2?c(a[h])||c(l[h]):a[h]&&a[h][p]||l[h]&&l[h][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,h={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(h,[]),c=h instanceof Array}catch{}return function(m,x){return a(m),l(x),c?p.call(m,x):m.__proto__=x,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),h=c("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,h)&&a(p,h,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),h=o("50c4"),p=function(v){return function(m,x,E,k){a(x);var T=l(m),A=c(T),z=h(T.length),Y=v?z-1:0,ne=v?-1:1;if(E<2)for(;;){if(Y in A){k=A[Y],Y+=ne;break}if(Y+=ne,v?Y<0:z<=Y)throw TypeError("Reduce of empty array with no initial value")}for(;v?Y>=0:z>Y;Y+=ne)Y in A&&(k=x(k,A[Y],Y,T));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),h=o("9263"),p=o("9112"),v=c("species"),m=!l(function(){var A=/./;return A.exec=function(){var z=[];return z.groups={a:"7"},z},"".replace(A,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),T=!l(function(){var A=/(?:)/,z=A.exec;A.exec=function(){return z.apply(this,arguments)};var Y="ab".split(A);return Y.length!==2||Y[0]!=="a"||Y[1]!=="b"});i.exports=function(A,z,Y,ne){var ge=c(A),pe=!l(function(){var H={};return H[ge]=function(){return 7},""[A](H)!=7}),O=pe&&!l(function(){var H=!1,$=/a/;return A==="split"&&($={},$.constructor={},$.constructor[v]=function(){return $},$.flags="",$[ge]=/./[ge]),$.exec=function(){return H=!0,null},$[ge](""),!H});if(!pe||!O||A==="replace"&&!(m&&x&&!k)||A==="split"&&!T){var j=/./[ge],J=Y(ge,""[A],function(H,$,R,I,X){return $.exec===h?pe&&!X?{done:!0,value:j.call($,R,I)}:{done:!0,value:H.call(R,$,I)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),V=J[0],B=J[1];a(String.prototype,A,V),a(RegExp.prototype,ge,z==2?function(H,$){return B.call(H,this,$)}:function(H){return B.call(H,this)})}ne&&p(RegExp.prototype[ge],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),h=o("ae40"),p=c("map"),v=h("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),h=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=h(x),k=p.f,T=c(E),A={},z=0,Y,ne;T.length>z;)ne=k(E,Y=T[z++]),ne!==void 0&&v(A,Y,ne);return A}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),h=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),x=c.values;for(var E in l){var k=a[E],T=k&&k.prototype;if(T){if(T[v]!==x)try{h(T,v,x)}catch{T[v]=x}if(T[m]||h(T,m,E),l[E]){for(var A in c)if(T[A]!==c[A])try{h(T,A,c[A])}catch{T[A]=c[A]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(h){return a(h,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),h=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},k=function(){var ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),pe=this instanceof k?new x(ge):ge===void 0?x():x(ge);return ge===""&&(E[pe]=!0),pe};m(k,x);var T=k.prototype=x.prototype;T.constructor=k;var A=T.toString,z=String(x("test"))=="Symbol(test)",Y=/^Symbol\((.*)\)[^)]+$/;v(T,"description",{configurable:!0,get:function(){var ge=p(this)?this.valueOf():this,pe=A.call(ge);if(h(E,ge))return"";var O=z?pe.slice(7,-1):pe.replace(Y,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),h=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=h?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),h=o("69f3"),p=o("7dd0"),v="Array Iterator",m=h.set,x=h.getterFor(v);i.exports=p(Array,"Array",function(E,k){m(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=x(this),k=E.target,T=E.kind,A=E.index++;return!k||A>=k.length?(E.target=void 0,{value:void 0,done:!0}):T=="keys"?{value:A,done:!1}:T=="values"?{value:k[A],done:!1}:{value:[A,k[A]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),h=o("06cf").f,p=o("83ab"),v=l(function(){h(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,k){return h(c(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),h=o("9bf2");i.exports=function(p,v){for(var m=l(v),x=h.f,E=c.f,k=0;k<m.length;k++){var T=m[k];a(p,T)||x(p,T,E(v,T))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),h=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||h[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),h=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,x){try{return m[x]}catch{}};i.exports=a?l:function(m){var x,E,k;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(x=Object(m),h))=="string"?E:p?l(x):(k=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(h){return c[h]||(c[h]=l(h))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function h(Ze,lt,rt){return lt in Ze?Object.defineProperty(Ze,lt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Ze[lt]=rt,Ze}function p(Ze,lt){var rt=Object.keys(Ze);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Ze);lt&&($t=$t.filter(function(Qt){return Object.getOwnPropertyDescriptor(Ze,Qt).enumerable})),rt.push.apply(rt,$t)}return rt}function v(Ze){for(var lt=1;lt<arguments.length;lt++){var rt=arguments[lt]!=null?arguments[lt]:{};lt%2?p(Object(rt),!0).forEach(function($t){h(Ze,$t,rt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ze,Object.getOwnPropertyDescriptors(rt)):p(Object(rt)).forEach(function($t){Object.defineProperty(Ze,$t,Object.getOwnPropertyDescriptor(rt,$t))})}return Ze}function m(Ze){if(Array.isArray(Ze))return Ze}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Ze,lt){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ze)))){var rt=[],$t=!0,Qt=!1,Pn=void 0;try{for(var wn=Ze[Symbol.iterator](),xn;!($t=(xn=wn.next()).done)&&(rt.push(xn.value),!(lt&&rt.length===lt));$t=!0);}catch($n){Qt=!0,Pn=$n}finally{try{!$t&&wn.return!=null&&wn.return()}finally{if(Qt)throw Pn}}return rt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Ze,lt){(lt==null||lt>Ze.length)&&(lt=Ze.length);for(var rt=0,$t=new Array(lt);rt<lt;rt++)$t[rt]=Ze[rt];return $t}function k(Ze,lt){if(Ze){if(typeof Ze=="string")return E(Ze,lt);var rt=Object.prototype.toString.call(Ze).slice(8,-1);if(rt==="Object"&&Ze.constructor&&(rt=Ze.constructor.name),rt==="Map"||rt==="Set")return Array.from(Ze);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return E(Ze,lt)}}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(Ze,lt){return m(Ze)||x(Ze,lt)||k(Ze,lt)||T()}function z(Ze){if(Array.isArray(Ze))return E(Ze)}function Y(Ze){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ze))return Array.from(Ze)}function ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(Ze){return z(Ze)||Y(Ze)||k(Ze)||ne()}var pe=o("a352"),O=o.n(pe);function j(Ze){Ze.parentElement!==null&&Ze.parentElement.removeChild(Ze)}function J(Ze,lt,rt){var $t=rt===0?Ze.children[0]:Ze.children[rt-1].nextSibling;Ze.insertBefore(lt,$t)}var V=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function B(Ze){var lt=Object.create(null);return function($t){var Qt=lt[$t];return Qt||(lt[$t]=Ze($t))}}var H=/-(\w)/g,$=B(function(Ze){return Ze.replace(H,function(lt,rt){return rt.toUpperCase()})});o("5db7"),o("73d9");var R=["Start","Add","Remove","Update","End"],I=["Choose","Unchoose","Sort","Filter","Clone"],X=["Move"],K=[X,R,I].flatMap(function(Ze){return Ze}).map(function(Ze){return"on".concat(Ze)}),_e={manage:X,manageAndEmit:R,emit:I};function ve(Ze){return K.indexOf(Ze)!==-1}o("caad"),o("2ca0");var Ge=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function se(Ze){return Ge.includes(Ze)}function q(Ze){return["transition-group","TransitionGroup"].includes(Ze)}function Z(Ze){return["id","class","role","style"].includes(Ze)||Ze.startsWith("data-")||Ze.startsWith("aria-")||Ze.startsWith("on")}function ie(Ze){return Ze.reduce(function(lt,rt){var $t=A(rt,2),Qt=$t[0],Pn=$t[1];return lt[Qt]=Pn,lt},{})}function de(Ze){var lt=Ze.$attrs,rt=Ze.componentData,$t=rt===void 0?{}:rt,Qt=ie(Object.entries(lt).filter(function(Pn){var wn=A(Pn,2),xn=wn[0];return wn[1],Z(xn)}));return v(v({},Qt),$t)}function ye(Ze){var lt=Ze.$attrs,rt=Ze.callBackBuilder,$t=ie(he(lt));Object.entries(rt).forEach(function(Pn){var wn=A(Pn,2),xn=wn[0],$n=wn[1];_e[xn].forEach(function(en){$t["on".concat(en)]=$n(en)})});var Qt="[data-draggable]".concat($t.draggable||"");return v(v({},$t),{},{draggable:Qt})}function he(Ze){return Object.entries(Ze).filter(function(lt){var rt=A(lt,2),$t=rt[0];return rt[1],!Z($t)}).map(function(lt){var rt=A(lt,2),$t=rt[0],Qt=rt[1];return[$($t),Qt]}).filter(function(lt){var rt=A(lt,2),$t=rt[0];return rt[1],!ve($t)})}o("c740");function Q(Ze,lt){if(!(Ze instanceof lt))throw new TypeError("Cannot call a class as a function")}function Ae(Ze,lt){for(var rt=0;rt<lt.length;rt++){var $t=lt[rt];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Ze,$t.key,$t)}}function De(Ze,lt,rt){return lt&&Ae(Ze.prototype,lt),Ze}var Ke=function(lt){var rt=lt.el;return rt},fe=function(lt,rt){return lt.__draggable_context=rt},ee=function(lt){return lt.__draggable_context},oe=function(){function Ze(lt){var rt=lt.nodes,$t=rt.header,Qt=rt.default,Pn=rt.footer,wn=lt.root,xn=lt.realList;Q(this,Ze),this.defaultNodes=Qt,this.children=[].concat(ge($t),ge(Qt),ge(Pn)),this.externalComponent=wn.externalComponent,this.rootTransition=wn.transition,this.tag=wn.tag,this.realList=xn}return De(Ze,[{key:"render",value:function(rt,$t){var Qt=this.tag,Pn=this.children,wn=this._isRootComponent,xn=wn?{default:function(){return Pn}}:Pn;return rt(Qt,$t,xn)}},{key:"updated",value:function(){var rt=this.defaultNodes,$t=this.realList;rt.forEach(function(Qt,Pn){fe(Ke(Qt),{element:$t[Pn],index:Pn})})}},{key:"getUnderlyingVm",value:function(rt){return ee(rt)}},{key:"getVmIndexFromDomIndex",value:function(rt,$t){var Qt=this.defaultNodes,Pn=Qt.length,wn=$t.children,xn=wn.item(rt);if(xn===null)return Pn;var $n=ee(xn);if($n)return $n.index;if(Pn===0)return 0;var en=Ke(Qt[0]),_n=ge(wn).findIndex(function(Cn){return Cn===en});return rt<_n?0:Pn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ze}(),le=o("8bbf");function ze(Ze,lt){var rt=Ze[lt];return rt?rt():[]}function $e(Ze){var lt=Ze.$slots,rt=Ze.realList,$t=Ze.getKey,Qt=rt||[],Pn=["header","footer"].map(function(Cn){return ze(lt,Cn)}),wn=A(Pn,2),xn=wn[0],$n=wn[1],en=lt.item;if(!en)throw new Error("draggable element must have an item slot");var _n=Qt.flatMap(function(Cn,qn){return en({element:Cn,index:qn}).map(function(nr){return nr.key=$t(Cn),nr.props=v(v({},nr.props||{}),{},{"data-draggable":!0}),nr})});if(_n.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:xn,footer:$n,default:_n}}function Je(Ze){var lt=q(Ze),rt=!se(Ze)&&!lt;return{transition:lt,externalComponent:rt,tag:rt?Object(le.resolveComponent)(Ze):lt?le.TransitionGroup:Ze}}function Me(Ze){var lt=Ze.$slots,rt=Ze.tag,$t=Ze.realList,Qt=Ze.getKey,Pn=$e({$slots:lt,realList:$t,getKey:Qt}),wn=Je(rt);return new oe({nodes:Pn,root:wn,realList:$t})}function me(Ze,lt){var rt=this;Object(le.nextTick)(function(){return rt.$emit(Ze.toLowerCase(),lt)})}function qe(Ze){var lt=this;return function(rt,$t){if(lt.realList!==null)return lt["onDrag".concat(Ze)](rt,$t)}}function ct(Ze){var lt=this,rt=qe.call(this,Ze);return function($t,Qt){rt.call(lt,$t,Qt),me.call(lt,Ze,$t)}}var ft=null,Mt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(lt){return lt}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},it=["update:modelValue","change"].concat(ge([].concat(ge(_e.manageAndEmit),ge(_e.emit)).map(function(Ze){return Ze.toLowerCase()}))),jt=Object(le.defineComponent)({name:"draggable",inheritAttrs:!1,props:Mt,emits:it,data:function(){return{error:!1}},render:function(){try{this.error=!1;var lt=this.$slots,rt=this.$attrs,$t=this.tag,Qt=this.componentData,Pn=this.realList,wn=this.getKey,xn=Me({$slots:lt,tag:$t,realList:Pn,getKey:wn});this.componentStructure=xn;var $n=de({$attrs:rt,componentData:Qt});return xn.render(le.h,$n)}catch(en){return this.error=!0,Object(le.h)("pre",{style:{color:"red"}},en.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&V.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var lt=this;if(!this.error){var rt=this.$attrs,$t=this.$el,Qt=this.componentStructure;Qt.updated();var Pn=ye({$attrs:rt,callBackBuilder:{manageAndEmit:function($n){return ct.call(lt,$n)},emit:function($n){return me.bind(lt,$n)},manage:function($n){return qe.call(lt,$n)}}}),wn=$t.nodeType===1?$t:$t.parentElement;this._sortable=new O.a(wn,Pn),this.targetDomElement=wn,wn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var lt=this.list;return lt||this.modelValue},getKey:function(){var lt=this.itemKey;return typeof lt=="function"?lt:function(rt){return rt[lt]}}},watch:{$attrs:{handler:function(lt){var rt=this._sortable;rt&&he(lt).forEach(function($t){var Qt=A($t,2),Pn=Qt[0],wn=Qt[1];rt.option(Pn,wn)})},deep:!0}},methods:{getUnderlyingVm:function(lt){return this.componentStructure.getUnderlyingVm(lt)||null},getUnderlyingPotencialDraggableComponent:function(lt){return lt.__draggable_component__},emitChanges:function(lt){var rt=this;Object(le.nextTick)(function(){return rt.$emit("change",lt)})},alterList:function(lt){if(this.list){lt(this.list);return}var rt=ge(this.modelValue);lt(rt),this.$emit("update:modelValue",rt)},spliceList:function(){var lt=arguments,rt=function(Qt){return Qt.splice.apply(Qt,ge(lt))};this.alterList(rt)},updatePosition:function(lt,rt){var $t=function(Pn){return Pn.splice(rt,0,Pn.splice(lt,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(lt){var rt=lt.to,$t=lt.related,Qt=this.getUnderlyingPotencialDraggableComponent(rt);if(!Qt)return{component:Qt};var Pn=Qt.realList,wn={list:Pn,component:Qt};if(rt!==$t&&Pn){var xn=Qt.getUnderlyingVm($t)||{};return v(v({},xn),wn)}return wn},getVmIndexFromDomIndex:function(lt){return this.componentStructure.getVmIndexFromDomIndex(lt,this.targetDomElement)},onDragStart:function(lt){this.context=this.getUnderlyingVm(lt.item),lt.item._underlying_vm_=this.clone(this.context.element),ft=lt.item},onDragAdd:function(lt){var rt=lt.item._underlying_vm_;if(rt!==void 0){j(lt.item);var $t=this.getVmIndexFromDomIndex(lt.newIndex);this.spliceList($t,0,rt);var Qt={element:rt,newIndex:$t};this.emitChanges({added:Qt})}},onDragRemove:function(lt){if(J(this.$el,lt.item,lt.oldIndex),lt.pullMode==="clone"){j(lt.clone);return}var rt=this.context,$t=rt.index,Qt=rt.element;this.spliceList($t,1);var Pn={element:Qt,oldIndex:$t};this.emitChanges({removed:Pn})},onDragUpdate:function(lt){j(lt.item),J(lt.from,lt.item,lt.oldIndex);var rt=this.context.index,$t=this.getVmIndexFromDomIndex(lt.newIndex);this.updatePosition(rt,$t);var Qt={element:this.context.element,oldIndex:rt,newIndex:$t};this.emitChanges({moved:Qt})},computeFutureIndex:function(lt,rt){if(!lt.element)return 0;var $t=ge(rt.to.children).filter(function(xn){return xn.style.display!=="none"}),Qt=$t.indexOf(rt.related),Pn=lt.component.getVmIndexFromDomIndex(Qt),wn=$t.indexOf(ft)!==-1;return wn||!rt.willInsertAfter?Pn:Pn+1},onDragMove:function(lt,rt){var $t=this.move,Qt=this.realList;if(!$t||!Qt)return!0;var Pn=this.getRelatedContextFromMoveEvent(lt),wn=this.computeFutureIndex(Pn,lt),xn=v(v({},this.context),{},{futureIndex:wn}),$n=v(v({},lt),{},{relatedContext:Pn,draggedContext:xn});return $t($n,rt)},onDragEnd:function(){ft=null}}}),hn=jt;s.default=hn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),h=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),x=o("b622"),E=o("1dde"),k=o("ae40"),T=E("slice"),A=k("slice",{ACCESSORS:!0,0:0,1:2}),z=x("species"),Y=[].slice,ne=Math.max;a({target:"Array",proto:!0,forced:!T||!A},{slice:function(pe,O){var j=v(this),J=p(j.length),V=h(pe,J),B=h(O===void 0?J:O,J),H,$,R;if(c(j)&&(H=j.constructor,typeof H=="function"&&(H===Array||c(H.prototype))?H=void 0:l(H)&&(H=H[z],H===null&&(H=void 0)),H===Array||H===void 0))return Y.call(j,V,B);for($=new(H===void 0?Array:H)(ne(B-V,0)),R=0;V<B;V++,R++)V in j&&m($,R,j[V]);return $.length=R,$}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(oP);var OZ=oP.exports;const IZ=B_(OZ),BZ={class:"h-full bg-gray-50"},RZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},FZ={class:"sm:flex sm:items-center"},jZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},zZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},$Z={class:"mt-6 bg-white shadow rounded-lg p-4"},VZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},UZ=["value"],HZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},GZ={key:1,class:"mt-6 overflow-x-auto pb-4"},WZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},qZ={class:"flex space-x-4 min-w-max"},YZ={class:"bg-white rounded-lg shadow overflow-hidden"},KZ={class:"flex items-center"},ZZ={class:"flex items-center"},XZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},JZ={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},QZ={class:"min-h-[100px] draggable-container"},eX={class:"note-container"},tX={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},nX={class:"flex items-center"},rX={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},iX={class:"text-sm font-medium text-gray-900 truncate"},sX={class:"px-3 py-2"},oX={class:"text-sm text-gray-500 line-clamp-2"},aX={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},lX={class:"text-xs text-gray-500"},uX={class:"flex space-x-1"},cX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},dX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},hX=["onClick"],fX=["onClick"],pX=["onClick"],gX=["onClick"],mX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},vX={class:"flex items-center justify-center min-h-screen w-full"},yX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},bX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},_X=Ss({__name:"NotesView",setup(t){const e=Nm(),n=Kl(),r=bf(),i=to(),s=Ap(),o=Lt(!0),a=Lt(!1),l=Lt(!1),c=Lt(null),h=Lt(null),p=Lt("info"),v=Lt(null),m=Lt(window.innerWidth<768),x=()=>{m.value=window.innerWidth<768},E=Un(()=>{const Z=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes tries:",Z),Z}),k=[{id:ki.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:ki.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:ki.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:ki.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],T=Zl({search:"",date:"",accessLevel:""});function A(Z){if(!Z)return"Date non dfinie";try{const ie=new Date(Z);return isNaN(ie.getTime())?(console.warn("[safeFormatDate] Date invalide:",Z),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(ie)}catch(ie){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",ie),"Date invalide"}}function z(Z){if(!Z)return null;try{const ie=new Date(Z);return isNaN(ie.getTime())?(console.warn("[safeDate] Date invalide:",Z),null):ie}catch(ie){return console.error("[safeDate] Erreur lors de la cration de la date:",ie),null}}function Y(Z){return A(Z)}const ne=Un(()=>{let Z=r.getAccessibleNotes;if(T.search){const ie=T.search.toLowerCase();Z=Z.filter(de=>de.title.toLowerCase().includes(ie)||de.description.toLowerCase().includes(ie))}if(T.accessLevel&&(Z=Z.filter(ie=>ie.accessLevel===T.accessLevel)),T.date){const ie=new Date;ie.setHours(0,0,0,0);const de=new Date(ie);de.setDate(ie.getDate()-ie.getDay());const ye=new Date(ie.getFullYear(),ie.getMonth(),1);Z=Z.filter(he=>{const Q=z(he.createdAt);return Q?T.date==="today"?Q>=ie:T.date==="week"?Q>=de:T.date==="month"?Q>=ye:!0:!1})}return Z}),ge=Un(()=>Z=>r.getNotesByColumn(Z));function pe(Z){if(Z==null)return"Non dfini";switch(Z){case ki.PRIVATE:return"Priv";case ki.COMPANY:return"Entreprise";case ki.EMPLOYEE:return"Salaris";case ki.VISITOR:return"Visiteurs";default:return"Non dfini"}}function O(Z){if(Z==null)return"#9CA3AF";switch(Z){case ki.PRIVATE:return"#9CA3AF";case ki.COMPANY:return"#EF4444";case ki.EMPLOYEE:return"#F59E0B";case ki.VISITOR:return"#10B981";default:return"#6B7280"}}no(()=>{console.log("[NotesView] Composant mont"),j().then(()=>{console.log("[NotesView] Donnes charges avec succs")}).catch(Z=>{console.error("[NotesView] Erreur lors du chargement des donnes:",Z),n.error("Erreur lors du chargement des donnes")}),document.addEventListener("click",q),window.addEventListener("resize",x)});async function j(){var Z;console.log(`
[NotesView][loadInitialData] Dbut du chargement des donnes`);try{o.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes charges:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const ie={};!i.isAdmin&&((Z=i.user)!=null&&Z.enterprise_id)&&(ie.enterprise_id=i.user.enterprise_id,console.log(`[NotesView][loadInitialData] Filtrage des notes par entreprise: ${ie.enterprise_id}`));const de=await da.getNotes(ie);console.log("[NotesView][loadInitialData] Notes reues:",de.data),de.data.length>0?(console.log("[NotesView][loadInitialData] Dtails des notes:"),de.data.forEach((Ae,De)=>{console.log(`Note ${De+1}:`,{id:Ae.id,title:Ae.title,columnId:Ae.column||Ae.column_id,access_level:Ae.access_level,column:Ae.column})})):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const ye=r.columns.map(Ae=>Ae.id),he=de.data.filter(Ae=>{const De=(Ae.column||Ae.column_id||"").toString();return De===""||!ye.includes(De)});if(he.length>0){console.warn(`[NotesView][loadInitialData] ${he.length} notes avec des colonnes invalides:`,he),console.log("[NotesView][loadInitialData] Assignation des notes  la colonne  faire (2)");for(const Ae of he)try{await da.updateNote(Ae.id,{column:"2"})}catch(De){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${Ae.id}  la colonne  faire:`,De)}}const Q=de.data.map(Ae=>({id:Ae.id,title:Ae.title,description:Ae.description,location:Ae.location,columnId:(Ae.column||Ae.column_id||"2").toString(),access_level:Ae.access_level,style:Ae.style||{},comments:Ae.comments||[],photos:Ae.photos||[],order:Ae.order||0,createdAt:Ae.created_at,updatedAt:Ae.updated_at}));r.notes.length=0,Q.forEach(Ae=>{r.addNote(Ae)}),console.log("[NotesView][loadInitialData] Notes charges dans le store");for(const Ae of r.columns){const De=r.getNotesByColumn(Ae.id);console.log(`[NotesView][loadInitialData] Colonne ${Ae.title} (${Ae.id}): ${De.length} notes`),De.length>0&&De.forEach(Ke=>{console.log(`  - Note ID=${Ke.id}, Titre="${Ke.title}", Niveau d'accs=${Ke.accessLevel}, Colonne=${Ke.columnId}`)})}}catch(ie){console.error("[NotesView][loadInitialData] Erreur:",ie),n.error("Erreur lors du chargement des donnes")}finally{o.value=!1,console.log("[NotesView][loadInitialData] Chargement termin")}}function J(){e.push({path:"/",query:{tool:"Note"}})}async function V(Z){if(!Z.location){n.warning("Cette note n'est pas golocalise");return}try{const de=(await da.getNote(Z.id)).data,ye=de.plan;console.log("[NotesView][viewOnMap] Dtails de la note rcuprs:",de),e.push({path:"/",query:{lat:Array.isArray(Z.location)?Z.location[0].toString():Z.location.coordinates[1].toString(),lng:Array.isArray(Z.location)?Z.location[1].toString():Z.location.coordinates[0].toString(),noteId:Z.id.toString(),planId:ye?ye.toString():void 0}})}catch(ie){console.error("[NotesView][viewOnMap] Erreur lors de la rcupration des dtails de la note:",ie),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function B(Z){if(!Z.location){n.warning("Cette note n'est pas golocalise");return}let ie,de;Array.isArray(Z.location)?(ie=Z.location[0],de=Z.location[1]):(ie=Z.location.coordinates[1],de=Z.location.coordinates[0]);const ye=`https://www.google.com/maps/dir/?api=1&destination=${ie},${de}`;window.open(ye,"_blank")}function H(Z){h.value=JSON.parse(JSON.stringify(Z)),p.value="info",l.value=!0}async function $(Z){if(console.log("[NotesView][handleNoteSave] Note sauvegarde:",Z),Z&&Z.id){const ie=r.notes.find(de=>de.id===Z.id);ie&&(!Z.comments&&ie.comments&&(Z.comments=ie.comments),!Z.photos&&ie.photos&&(Z.photos=ie.photos))}if(l.value=!1,v.value&&h.value)try{const ie={location:h.value.location,name:h.value.title,description:h.value.description,columnId:h.value.columnId,accessLevel:h.value.accessLevel,style:h.value.style,comments:h.value.comments||[],photos:h.value.photos||[],order:h.value.order,createdAt:h.value.createdAt,updatedAt:new Date().toISOString()},de=s.elements.findIndex(ye=>{var he;return ye.type_forme==="Note"&&ye.id===((he=h.value)==null?void 0:he.id)});de!==-1?s.elements[de].data=ie:s.elements.push({id:h.value.id,type_forme:"Note",data:ie}),await s.saveToPlan(v.value),n.success("Note sauvegarde et plan mis  jour avec succs")}catch(ie){console.error("Erreur lors de la sauvegarde de la note:",ie),n.error("Erreur lors de la sauvegarde de la note")}}function R(Z){c.value=Z,a.value=!0}async function I(){if(c.value)try{try{await da.deleteNote(c.value.id)}catch(Z){if(Z.response&&Z.response.status===404)console.log("[NotesView][deleteNote] Note non trouve dans le backend (404), suppression locale uniquement");else throw Z}r.removeNote(c.value.id),n.success("Note supprime avec succs")}catch(Z){console.error("Erreur lors de la suppression de la note:",Z),n.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function X(Z,ie){console.log("[NotesView][onDragChange] vnement:",Z),console.log("[NotesView][onDragChange] Colonne cible:",ie);try{if(Z.added){const{element:de}=Z.added;console.log("[NotesView][onDragChange] Note  dplacer:",de);const ye=typeof de=="object"&&de.id?de.id:null;if(!ye)throw console.error("[NotesView][onDragChange] ID de note invalide:",de),new Error("ID de note invalide");r.moveNote(ye,ie);const Q=ge.value(ie).map(De=>De.id);r.reorderNotes(ie,Q);const Ae=r.getColumnById(ie);n.success(`Note dplace vers ${(Ae==null?void 0:Ae.title)||"une autre colonne"}`),await K(ye,{columnId:ie})}if(Z.moved){const de=ge.value(ie),ye=de.map(he=>he.id);r.reorderNotes(ie,ye),n.success("Ordre des notes mis  jour");for(const[he,Q]of de.entries())await K(Q.id,{order:he})}}catch(de){console.error("[NotesView][onDragChange] Erreur:",de),n.error("Une erreur est survenue lors du dplacement de la note")}}async function K(Z,ie){console.log("[NotesView][updateNoteInBackend] Mise  jour de la note:",Z,ie);try{const de=r.notes.find(Q=>Q.id===Z);if(!de){console.error("[NotesView][updateNoteInBackend] Note non trouve:",Z);return}const ye={...ie};if(ie.columnId){const Q=r.getColumnById(ie.columnId);Q?(console.log(`[NotesView][updateNoteInBackend] Mise  jour de la colonne: ${Q.id} (${Q.title})`),ye.column=Q.id,delete ye.columnId,delete ye.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${ie.columnId}`)}const he={...de,...ye,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Donnes envoyes au backend:",he),await da.updateNote(Z,he),console.log("[NotesView][updateNoteInBackend] Note mise  jour avec succs")}catch(de){throw console.error("[NotesView][updateNoteInBackend] Erreur:",de),de}}function _e(){var Z;h.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:!i.isAdmin&&((Z=i.user)!=null&&Z.enterprise_id)?i.user.enterprise_id:null},l.value=!0,p.value="info"}const ve=Lt(null),Ge=Lt(!1);function se(){Ge.value=!Ge.value}function q(Z){ve.value&&!ve.value.contains(Z.target)&&(Ge.value=!1)}return no(()=>{document.addEventListener("click",q),window.addEventListener("resize",x)}),kh(()=>{document.removeEventListener("click",q),window.removeEventListener("resize",x)}),(Z,ie)=>{var de,ye;return Ne(),Be("div",BZ,[S("div",RZ,[S("div",FZ,[ie[6]||(ie[6]=S("div",{class:"sm:flex-auto"},[S("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),S("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),S("div",jZ,[S("div",{class:"relative",ref_key:"dropdownRef",ref:ve},[S("button",{onClick:se,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},ie[5]||(ie[5]=[Gr(" Crer "),S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),Ge.value?(Ne(),Be("div",zZ,[S("div",{class:"py-1"},[S("button",{onClick:_e,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),S("button",{onClick:J,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):Zt("",!0)],512)])]),S("div",$Z,[S("div",VZ,[S("div",null,[ie[7]||(ie[7]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Sn(S("input",{type:"text",id:"search","onUpdate:modelValue":ie[0]||(ie[0]=he=>T.search=he),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Pr,T.search]])]),S("div",null,[ie[9]||(ie[9]=S("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Sn(S("select",{id:"date","onUpdate:modelValue":ie[1]||(ie[1]=he=>T.date=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},ie[8]||(ie[8]=[S("option",{value:""},"Toutes les dates",-1),S("option",{value:"today"},"Aujourd'hui",-1),S("option",{value:"week"},"Cette semaine",-1),S("option",{value:"month"},"Ce mois",-1)]),512),[[Ai,T.date]])]),S("div",null,[ie[11]||(ie[11]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Sn(S("select",{id:"accessLevel","onUpdate:modelValue":ie[2]||(ie[2]=he=>T.accessLevel=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[ie[10]||(ie[10]=S("option",{value:""},"Tous les niveaux",-1)),(Ne(),Be(bn,null,Hn(k,he=>S("option",{key:he.id,value:he.id},kt(he.title),9,UZ)),64))],512),[[Ai,T.accessLevel]])])])]),o.value?(Ne(),Be("div",HZ,ie[12]||(ie[12]=[S("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),S("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ne(),Be("div",GZ,[ne.value.length===0&&E.value.length===0?(Ne(),Be("div",WZ,ie[13]||(ie[13]=[S("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouve",-1)]))):Zt("",!0),S("div",qZ,[(Ne(!0),Be(bn,null,Hn(E.value,he=>(Ne(),Be("div",{key:he.id,class:"column-wrapper w-80 flex-shrink-0"},[S("div",YZ,[S("div",{class:"p-3 flex items-center justify-between no-select",style:ql({backgroundColor:he.color+"20",borderBottom:"2px solid "+he.color})},[S("div",KZ,[S("h3",{class:"text-sm font-semibold",style:ql({color:he.color})},kt(he.title),5)]),S("div",ZZ,[S("span",XZ,kt(ge.value(he.id).length),1)])],4),S("div",JZ,[S("div",QZ,[ti(Bn(IZ),{list:ge.value(he.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:m.value?null:".note-drag-handle",onChange:Q=>X(Q,he.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:m.value},{item:zu(({element:Q})=>[S("div",eX,[S("div",tX,[S("div",{class:gi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!m.value,"no-select":!0}])},[S("div",nX,[m.value?Zt("",!0):(Ne(),Be("svg",rX,ie[14]||(ie[14]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),S("h4",iX,kt(Q.title),1)]),S("div",null,[S("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:ql({backgroundColor:O(Q.accessLevel)+"20",color:O(Q.accessLevel)})},kt(pe(Q.accessLevel)||"Non dfini"),5)])],2),S("div",sX,[S("p",oX,kt(Q.description||"Aucune description"),1)]),S("div",aX,[S("span",lX,kt(Q.updatedAt?Y(Q.updatedAt):Q.createdAt?Y(Q.createdAt):"Date non dfinie"),1),S("div",uX,[Q.location?(Ne(),Be("span",cX,ie[15]||(ie[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ne(),Be("span",dX,ie[16]||(ie[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),Q.location?(Ne(),Be(bn,{key:2},[S("button",{onClick:Ae=>B(Q),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},ie[17]||(ie[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,hX),S("button",{onClick:Ae=>V(Q),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},ie[18]||(ie[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,fX)],64)):Zt("",!0),S("button",{onClick:Ae=>H(Q),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},ie[19]||(ie[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,pX),S("button",{onClick:Ae=>R(Q),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},ie[20]||(ie[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,gX)])])])])]),"empty-content":zu(()=>ie[21]||(ie[21]=[S("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])]))]),a.value?(Ne(),Be("div",mX,[S("div",vX,[ie[23]||(ie[23]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",yX,[ie[22]||(ie[22]=Gl('<div class="p-4 md:p-6" data-v-57cf2c11><div class="flex items-start" data-v-57cf2c11><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-57cf2c11><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-57cf2c11><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-57cf2c11></path></svg></div><div class="ml-4 flex-1" data-v-57cf2c11><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-57cf2c11> Supprimer la note </h3><div class="mt-2" data-v-57cf2c11><p class="text-sm text-gray-500" data-v-57cf2c11> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),S("div",bX,[S("button",{onClick:I,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),S("button",{onClick:ie[3]||(ie[3]=he=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Zt("",!0),l.value?(Ne(),Vo(IE,{key:1,note:h.value,"is-new-note":!((de=h.value)!=null&&de.id),location:(ye=h.value)==null?void 0:ye.location,onClose:ie[4]||(ie[4]=he=>l.value=!1),onSave:$},null,8,["note","is-new-note","location"])):Zt("",!0)])}}}),wX=rd(_X,[["__scopeId","data-v-57cf2c11"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Bm(t){return t+.5|0}const hh=(t,e,n)=>Math.max(Math.min(t,n),e);function Pg(t){return hh(Bm(t*2.55),0,255)}function bh(t){return hh(Bm(t*255),0,255)}function Cd(t){return hh(Bm(t/2.55)/100,0,1)}function Y5(t){return hh(Bm(t*100),0,100)}const Bu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fb=[..."0123456789ABCDEF"],xX=t=>Fb[t&15],LX=t=>Fb[(t&240)>>4]+Fb[t&15],D0=t=>(t&240)>>4===(t&15),SX=t=>D0(t.r)&&D0(t.g)&&D0(t.b)&&D0(t.a);function CX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Bu[t[1]]*17,g:255&Bu[t[2]]*17,b:255&Bu[t[3]]*17,a:e===5?Bu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Bu[t[1]]<<4|Bu[t[2]],g:Bu[t[3]]<<4|Bu[t[4]],b:Bu[t[5]]<<4|Bu[t[6]],a:e===9?Bu[t[7]]<<4|Bu[t[8]]:255})),n}const EX=(t,e)=>t<255?e(t):"";function PX(t){var e=SX(t)?xX:LX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+EX(t.a,e):void 0}const MX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function kX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function AX(t,e,n){const r=yP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function TX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function W_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=TX(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function q_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(bh)}function Y_(t,e,n){return q_(yP,t,e,n)}function DX(t,e,n){return q_(AX,t,e,n)}function NX(t,e,n){return q_(kX,t,e,n)}function bP(t){return(t%360+360)%360}function OX(t){const e=MX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Pg(+e[5]):bh(+e[5]));const i=bP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=DX(i,s,o):e[1]==="hsv"?r=NX(i,s,o):r=Y_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function IX(t,e){var n=W_(t);n[0]=bP(n[0]+e),n=Y_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function BX(t){if(!t)return;const e=W_(t),n=e[0],r=Y5(e[1]),i=Y5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Cd(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const K5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Z5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function RX(){const t={},e=Object.keys(Z5),n=Object.keys(K5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,K5[s]);s=parseInt(Z5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let N0;function FX(t){N0||(N0=RX(),N0.transparent=[0,0,0,0]);const e=N0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zX(t){const e=jX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Pg(o):hh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Pg(r):hh(r,0,255)),i=255&(e[4]?Pg(i):hh(i,0,255)),s=255&(e[6]?Pg(s):hh(s,0,255)),{r,g:i,b:s,a:n}}}function $X(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cd(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const b2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Jf=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function VX(t,e,n){const r=Jf(Cd(t.r)),i=Jf(Cd(t.g)),s=Jf(Cd(t.b));return{r:bh(b2(r+n*(Jf(Cd(e.r))-r))),g:bh(b2(i+n*(Jf(Cd(e.g))-i))),b:bh(b2(s+n*(Jf(Cd(e.b))-s))),a:t.a+n*(e.a-t.a)}}function O0(t,e,n){if(t){let r=W_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Y_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function _P(t,e){return t&&Object.assign(e||{},t)}function X5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bh(t[3]))):(e=_P(t,{r:0,g:0,b:0,a:1}),e.a=bh(e.a)),e}function UX(t){return t.charAt(0)==="r"?zX(t):OX(t)}class ym{constructor(e){if(e instanceof ym)return e;const n=typeof e;let r;n==="object"?r=X5(e):n==="string"&&(r=CX(e)||FX(e)||UX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_P(this._rgb);return e&&(e.a=Cd(e.a)),e}set rgb(e){this._rgb=X5(e)}rgbString(){return this._valid?$X(this._rgb):void 0}hexString(){return this._valid?PX(this._rgb):void 0}hslString(){return this._valid?BX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=VX(this._rgb,e._rgb,n)),this}clone(){return new ym(this.rgb)}alpha(e){return this._rgb.a=bh(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Bm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return O0(this._rgb,2,e),this}darken(e){return O0(this._rgb,2,-e),this}saturate(e){return O0(this._rgb,1,e),this}desaturate(e){return O0(this._rgb,1,-e),this}rotate(e){return IX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function wd(){}const HX=(()=>{let t=0;return()=>t++})();function Pi(t){return t===null||typeof t>"u"}function Bs(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function mi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function mo(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function pu(t,e){return mo(t)?t:e}function Kr(t,e){return typeof t>"u"?e:t}const GX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,wP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function gs(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Yi(t,e,n,r){let i,s,o;if(Bs(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(mi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ty(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ny(t){if(Bs(t))return t.map(ny);if(mi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ny(t[n[i]]);return e}return t}function xP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function WX(t,e,n,r){if(!xP(t))return;const i=e[t],s=n[t];mi(i)&&mi(s)?bm(i,s,r):e[t]=ny(s)}function bm(t,e,n){const r=Bs(e)?e:[e],i=r.length;if(!mi(t))return t;n=n||{};const s=n.merger||WX;let o;for(let a=0;a<i;++a){if(o=r[a],!mi(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Xg(t,e){return bm(t,e,{merger:qX})}function qX(t,e,n){if(!xP(t))return;const r=e[t],i=n[t];mi(r)&&mi(i)?Xg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ny(i))}const J5={"":t=>t,x:t=>t.x,y:t=>t.y};function YX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function KX(t){const e=YX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ch(t,e){return(J5[e]||(J5[e]=KX(e)))(t)}function K_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _m=t=>typeof t<"u",Eh=t=>typeof t=="function",Q5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ZX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ls=Math.PI,xs=2*Ls,XX=xs+Ls,ry=Number.POSITIVE_INFINITY,JX=Ls/180,To=Ls/2,Yh=Ls/4,e3=Ls*2/3,fh=Math.log10,Qc=Math.sign;function Jg(t,e,n){return Math.abs(t-e)<n}function t3(t){const e=Math.round(t);t=Jg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fh(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function QX(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Dp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function eJ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function LP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function yc(t){return t*(Ls/180)}function Z_(t){return t*(180/Ls)}function n3(t){if(!mo(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function SP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Ls&&(s+=xs),{angle:s,distance:i}}function jb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tJ(t,e){return(t-e+XX)%xs-Ls}function gu(t){return(t%xs+xs)%xs}function wm(t,e,n,r){const i=gu(t),s=gu(e),o=gu(n),a=gu(s-i),l=gu(o-i),c=gu(i-s),h=gu(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function fa(t,e,n){return Math.max(e,Math.min(n,t))}function nJ(t){return fa(t,-32768,32767)}function Td(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function X_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Dd=(t,e,n,r)=>X_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),rJ=(t,e,n)=>X_(t,n,r=>t[r][e]>=n);function iJ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const CP=["push","pop","shift","splice","unshift"];function sJ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),CP.forEach(n=>{const r="_onData"+K_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function r3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(CP.forEach(s=>{delete t[s]}),delete t._chartjs)}function EP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const PP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function MP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,PP.call(window,()=>{r=!1,t.apply(e,n)}))}}function oJ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const J_=t=>t==="start"?"left":t==="end"?"right":"center",qa=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,aJ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=fa(Math.min(Dd(a,l,c).lo,n?r:Dd(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=fa(Math.max(Dd(a,o.axis,h,!0).hi+1,n?0:Dd(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function AP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const I0=t=>t===0||t===1,i3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*xs/n)),s3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*xs/n)+1,Qg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*To)+1,easeOutSine:t=>Math.sin(t*To),easeInOutSine:t=>-.5*(Math.cos(Ls*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>I0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>I0(t)?t:i3(t,.075,.3),easeOutElastic:t=>I0(t)?t:s3(t,.075,.3),easeInOutElastic(t){return I0(t)?t:t<.5?.5*i3(t*2,.1125,.45):.5+.5*s3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Qg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Qg.easeInBounce(t*2)*.5:Qg.easeOutBounce(t*2-1)*.5+.5};function Q_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function o3(t){return Q_(t)?t:new ym(t)}function _2(t){return Q_(t)?t:new ym(t).saturate(.5).darken(.1).hexString()}const lJ=["x","y","borderWidth","radius","tension"],uJ=["color","borderColor","backgroundColor"];function cJ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:uJ},numbers:{type:"number",properties:lJ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function dJ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const a3=new Map;function hJ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=a3.get(n);return r||(r=new Intl.NumberFormat(t,e),a3.set(n,r)),r}function Rm(t,e,n){return hJ(e,n).format(t)}const TP={values(t){return Bs(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=fJ(t,n)}const o=fh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Rm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(fh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?TP.numeric.call(this,t,e,n):""}};function fJ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Wy={formatters:TP};function pJ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _f=Object.create(null),zb=Object.create(null);function em(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function w2(t,e,n){return typeof e=="string"?bm(em(t,e),n):bm(em(t,""),e)}class gJ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>_2(i.backgroundColor),this.hoverBorderColor=(r,i)=>_2(i.borderColor),this.hoverColor=(r,i)=>_2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return w2(this,e,n)}get(e){return em(this,e)}describe(e,n){return w2(zb,e,n)}override(e,n){return w2(_f,e,n)}route(e,n,r,i){const s=em(this,e),o=em(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return mi(l)?Object.assign({},c,l):Kr(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var vo=new gJ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cJ,dJ,pJ]);function mJ(t){return!t||Pi(t.size)||Pi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function iy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function vJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Bs(p))o=iy(t,i,s,o,p);else if(Bs(p))for(c=0,h=p.length;c<h;c++)v=p[c],v!=null&&!Bs(v)&&(o=iy(t,i,s,o,v));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Kh(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function l3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function $b(t,e,n,r){DP(t,e,n,r,null)}function DP(t,e,n,r,i){let s,o,a,l,c,h,p,v;const m=e.pointStyle,x=e.rotation,E=e.radius;let k=(x||0)*JX;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,E,0,0,xs):t.arc(n,r,E,0,xs),t.closePath();break;case"triangle":h=i?i/2:E,t.moveTo(n+Math.sin(k)*h,r-Math.cos(k)*E),k+=e3,t.lineTo(n+Math.sin(k)*h,r-Math.cos(k)*E),k+=e3,t.lineTo(n+Math.sin(k)*h,r-Math.cos(k)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(k+Yh)*l,p=Math.cos(k+Yh)*(i?i/2-c:l),a=Math.sin(k+Yh)*l,v=Math.sin(k+Yh)*(i?i/2-c:l),t.arc(n-p,r-a,c,k-Ls,k-To),t.arc(n+v,r-o,c,k-To,k),t.arc(n+p,r+a,c,k,k+To),t.arc(n-v,r+o,c,k+To,k+Ls),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}k+=Yh;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":k+=Yh;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),k+=Yh,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Nd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function qy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yy(t){t.restore()}function yJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function bJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function _J(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Pi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function wJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function xJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wf(t,e,n,r,i,s={}){const o=Bs(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,_J(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&xJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Pi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),wJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function xm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ls,Ls,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ls,To,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,To,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-To,!0),t.lineTo(n+o.topLeft,r)}const LJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CJ(t,e){const n=(""+t).match(LJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const EJ=t=>+t||0;function ew(t,e){const n={},r=mi(e),i=r?Object.keys(e):e,s=mi(t)?r?o=>Kr(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=EJ(s(o));return n}function NP(t){return ew(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pf(t){return ew(t,["topLeft","topRight","bottomLeft","bottomRight"])}function nl(t){const e=NP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Jo(t,e){t=t||{},e=e||vo.font;let n=Kr(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Kr(t.style,e.style);r&&!(""+r).match(SJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Kr(t.family,e.family),lineHeight:CJ(Kr(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Kr(t.weight,e.weight),string:""};return i.string=mJ(i),i}function Mg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function PJ(t,e,n){const{min:r,max:i}=t,s=wP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ah(t,e){return Object.assign(Object.create(t),e)}function tw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=RP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>tw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return IP(a,l,()=>IJ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return c3(a).includes(l)},ownKeys(a){return c3(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Np(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:OP(t,r),setContext:s=>Np(t,s,n,r),override:s=>Np(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return IP(s,o,()=>kJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function OP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Eh(n)?n:()=>n,isIndexable:Eh(r)?r:()=>r}}const MJ=(t,e)=>t?t+K_(e):e,nw=(t,e)=>mi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function IP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function kJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Eh(a)&&o.isScriptable(e)&&(a=AJ(e,a,t,n)),Bs(a)&&a.length&&(a=TJ(e,a,t,o.isIndexable)),nw(e,a)&&(a=Np(a,i,s&&s[e],o)),a}function AJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),nw(t,l)&&(l=rw(i._scopes,i,t,l)),l}function TJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(mi(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=rw(c,i,t,h);e.push(Np(p,s,o&&o[t],a))}}return e}function BP(t,e,n){return Eh(t)?t(e,n):t}const DJ=(t,e)=>t===!0?e:typeof t=="string"?Ch(e,t):void 0;function NJ(t,e,n,r,i){for(const s of e){const o=DJ(n,s);if(o){t.add(o);const a=BP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function rw(t,e,n,r){const i=e._rootScopes,s=BP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=u3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=u3(a,o,s,l,r),l===null)?!1:tw(Array.from(a),[""],i,s,()=>OJ(e,n,r))}function u3(t,e,n,r,i){for(;n;)n=NJ(t,e,n,r,i);return n}function OJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Bs(i)&&mi(n)?n:i||{}}function IJ(t,e,n,r){let i;for(const s of e)if(i=RP(MJ(s,t),n),typeof i<"u")return nw(t,i)?rw(n,r,t,i):i}function RP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function c3(t){let e=t._keys;return e||(e=t._keys=BJ(t._scopes)),e}function BJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function FP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,h;for(a=0,l=r;a<l;++a)c=a+n,h=e[c],o[a]={r:i.parse(Ch(h,s),c)};return o}const RJ=Number.EPSILON||1e-14,Op=(t,e)=>e<t.length&&!t[e].skip&&t[e],jP=t=>t==="x"?"y":"x";function FJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=jb(s,i),l=jb(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const p=r*c,v=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function jJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Op(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Op(t,h+1),!(!l||!c)){if(Jg(e[h],0,RJ)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function zJ(t,e,n="x"){const r=jP(n),i=t.length;let s,o,a,l=Op(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Op(t,c+1),!a)continue;const h=a[n],p=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=p+s*e[c])}}function $J(t,e="x"){const n=jP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Op(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Op(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Qc(i[o-1])!==Qc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}jJ(t,i,s),zJ(t,s,e)}function B0(t,e,n){return Math.max(Math.min(t,n),e)}function VJ(t,e){let n,r,i,s,o,a=Nd(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Nd(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=B0(i.cp1x,e.left,e.right),i.cp1y=B0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=B0(i.cp2x,e.left,e.right),i.cp2y=B0(i.cp2y,e.top,e.bottom)))}function UJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")$J(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=FJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&VJ(t,n)}function iw(){return typeof window<"u"&&typeof document<"u"}function sw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function sy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ky=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function HJ(t,e){return Ky(t).getPropertyValue(e)}const GJ=["top","right","bottom","left"];function gf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=GJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const WJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function qJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(WJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ef(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Ky(n),s=i.boxSizing==="border-box",o=gf(i,"padding"),a=gf(i,"border","width"),{x:l,y:c,box:h}=qJ(t,n),p=o.left+(h&&a.left),v=o.top+(h&&a.top);let{width:m,height:x}=e;return s&&(m-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function YJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=sw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ky(s),l=gf(a,"border","width"),c=gf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=sy(a.maxWidth,s,"clientWidth"),i=sy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||ry,maxHeight:i||ry}}const R0=t=>Math.round(t*10)/10;function KJ(t,e,n,r){const i=Ky(t),s=gf(i,"margin"),o=sy(i.maxWidth,t,"clientWidth")||ry,a=sy(i.maxHeight,t,"clientHeight")||ry,l=YJ(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const v=gf(i,"border","width"),m=gf(i,"padding");c-=m.width+v.width,h-=m.height+v.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=R0(Math.min(c,o,l.maxWidth)),h=R0(Math.min(h,a,l.maxHeight)),c&&!h&&(h=R0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=R0(Math.floor(h*r))),{width:c,height:h}}function d3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ZJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};iw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function h3(t,e){const n=HJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function XJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function JJ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=tf(t,i,n),a=tf(i,s,n),l=tf(s,e,n),c=tf(o,a,n),h=tf(a,l,n);return tf(c,h,n)}const QJ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},eQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xp(t,e,n){return t?QJ(e,n):eQ()}function zP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function $P(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function VP(t){return t==="angle"?{between:wm,compare:tJ,normalize:gu}:{between:Td,compare:(e,n)=>e-n,normalize:e=>e}}function f3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function tQ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=VP(r),l=e.length;let{start:c,end:h,loop:p}=t,v,m;if(p){for(c+=l,h+=l,v=0,m=l;v<m&&o(a(e[c%l][r]),i,s);++v)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:p,style:t.style}}function UP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=VP(r),{start:h,end:p,loop:v,style:m}=tQ(t,e,n),x=[];let E=!1,k=null,T,A,z;const Y=()=>l(i,z,T)&&a(i,z)!==0,ne=()=>a(s,T)===0||l(s,z,T),ge=()=>E||Y(),pe=()=>!E||ne();for(let O=h,j=h;O<=p;++O)A=e[O%o],!A.skip&&(T=c(A[r]),T!==z&&(E=l(T,i,s),k===null&&ge()&&(k=a(T,i)===0?O:j),k!==null&&pe()&&(x.push(f3({start:k,end:O,loop:v,count:o,style:m})),k=null),j=O,z=T));return k!==null&&x.push(f3({start:k,end:p,loop:v,count:o,style:m})),x}function HP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=UP(r[i],t.points,e);s.length&&n.push(...s)}return n}function nQ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function rQ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function iQ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=nQ(n,i,s,r);if(r===!0)return p3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return p3(t,rQ(n,o,l,c),n,e)}function p3(t,e,n,r){return!r||!r.setContext||!n?e:sQ(t,e,n,r)}function sQ(t,e,n,r){const i=t._chart.getContext(),s=g3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,p=e[0].start,v=p;function m(x,E,k,T){const A=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=A;for(;n[E%l].skip;)E+=A;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:k,style:T}),h=T,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],k;for(v=p+1;v<=x.end;v++){const T=n[v%l];k=g3(r.setContext(Ah(i,{type:"segment",p0:E,p1:T,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),oQ(k,h)&&m(p,v-1,x.loop,h),E=T,h=k}p<v-1&&m(p,v-1,x.loop,h)}return c}function g3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function oQ(t,e){if(!e)return!1;const n=[],r=function(i,s){return Q_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class aQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xd=new aQ;const m3="transparent",lQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=o3(t||m3),i=r.valid&&o3(e||m3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class uQ{constructor(e,n,r,i){const s=n[r];i=Mg([e.to,i,s,e.from]);const o=Mg([e.from,s,i]);this._active=!0,this._fn=e.fn||lQ[e.type||typeof o],this._easing=Qg[e.easing]||Qg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Mg([e.to,n,i,e.from]),this._from=Mg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class GP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!mi(e))return;const n=Object.keys(vo.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!mi(s))return;const o={};for(const a of n)o[a]=s[a];(Bs(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=dQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&cQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,h,a);continue}else p.cancel();if(!v||!v.duration){e[c]=h;continue}s[c]=p=new uQ(v,e,c,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return xd.add(this._chart,r),!0}}function cQ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function dQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function v3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function hQ(t,e,n){if(n===!1)return!1;const r=v3(t,n),i=v3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function fQ(t){let e,n,r,i;return mi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function WP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function y3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],mo(c)&&(s||e===0||Qc(e)===Qc(c))&&(e+=c)}return e}}function pQ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function b3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function gQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function mQ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function vQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function _3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function w3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=gQ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const x=e[m],{[l]:E,[c]:k}=x,T=x._stacks||(x._stacks={});v=T[c]=vQ(i,h,E),v[a]=k,v._top=_3(v,o,!0,r.type),v._bottom=_3(v,o,!1,r.type);const A=v._visualValues||(v._visualValues={});A[a]=k}}function x2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function yQ(t,e){return Ah(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function bQ(t,e,n){return Ah(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ug(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const L2=t=>t==="reset"||t==="none",x3=(t,e)=>e?t:Object.assign({},t),_Q=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:WP(n,!0),values:null};class _c{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=b3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ug(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,m,x)=>p==="x"?v:p==="r"?x:m,s=n.xAxisID=Kr(r.xAxisID,x2(e,"x")),o=n.yAxisID=Kr(r.yAxisID,x2(e,"y")),a=n.rAxisID=Kr(r.rAxisID,x2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&r3(this._data,this),e._stacked&&ug(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(mi(n))this._data=pQ(n);else if(r!==n){if(r){r3(r,this);const i=this._cachedMeta;ug(i),i._parsed=[]}n&&Object.isExtensible(n)&&sJ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=b3(n.vScale,n),n.stack!==r.stack&&(i=!0,ug(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&w3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Bs(i[e])?v=this.parseArrayData(r,i,e,n):mi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=p=v[h],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&w3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,p=new Array(i);let v,m,x;for(v=0,m=i;v<m;++v)x=v+r,p[v]={[a]:h||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,p;for(l=0,c=i;l<c;++l)h=l+r,p=n[h],a[l]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,p,v,m;for(h=0,p=i;h<p;++h)v=h+r,m=n[v],c[h]={x:s.parse(Ch(m,a),v),y:o.parse(Ch(m,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:WP(i,!0),values:n._stacks[e.axis]._visualValues};return y3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=y3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=_Q(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=mQ(a);let v,m;function x(){m=i[v];const E=m[a.axis];return!mo(m[e.axis])||h>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],mo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=fQ(Kr(this.options.clip,hQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const p=i[h];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=bQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=yQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&_m(r);if(a)return x3(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),h),m=Object.keys(vo.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,m,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(x3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),v=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(v,this.getContext(e,r,n))}const c=new GP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||L2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){L2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!L2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ug(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Xe(_c,"defaults",{}),Xe(_c,"datasetElementType",null),Xe(_c,"dataElementType",null);function wQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=EP(r.sort((i,s)=>i-s))}return t._cache.$bar}function xQ(t){const e=t.iScale,n=wQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(_m(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function LQ(t,e,n,r){const i=n.barThickness;let s,o;return Pi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function SQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function CQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function qP(t,e,n,r){return Bs(t)?CQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function L3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,p,v;for(c=n,h=n+r;c<h;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(qP(v,p,s,c));return l}function S2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function EQ(t,e,n){return t!==0?Qc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function PQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function MQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=PQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[S3(h,o,a,l)]=!0,i=c)),s[S3(i,o,a,l)]=!0,t.borderSkipped=s}function S3(t,e,n,r){return r?(t=kQ(t,e,n),t=C3(t,n,e)):t=C3(t,e,n),t}function kQ(t,e,n){return t===e?n:t===n?e:t}function C3(t,e,n){return t==="start"?e:t==="end"?n:t}function AQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class pv extends _c{parsePrimitiveData(e,n,r,i){return L3(e,n,r,i)}parseArrayData(e,n,r,i){return L3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let v,m,x,E;for(v=r,m=r+i;v<m;++v)E=n[v],x={},x[s.axis]=s.parse(Ch(E,c),v),p.push(qP(Ch(E,h),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=S2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const x=this.getParsed(m),E=s||Pi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),k=this._calculateBarIndexPixels(m,h),T=(x._stacks||{})[a.axis],A={horizontal:c,base:E.base,enableBorderRadius:!T||S2(x._custom)||o===T._top||o===T._bottom,x:c?E.head:k.center,y:c?k.center:E.head,height:c?k.size:Math.abs(E.size),width:c?Math.abs(E.size):k.size};v&&(A.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const z=A.options||e[m].options;MQ(A,z,T,o),AQ(A,z,h.ratio),this.updateElement(e[m],m,A,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),h=c&&c[l.vScale.axis];if(Pi(h)||isNaN(h))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||xQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=S2(c);let p=l[n.axis],v=0,m=r?this.applyStack(n,l,r):p,x,E;m!==p&&(v=m-p,m=p),h&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Qc(p)!==Qc(c.barEnd)&&(v=0),v+=p);const k=!Pi(s)&&!h?s:v;let T=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+m):x=T,E=x-T,Math.abs(E)<o){E=EQ(E,n,a)*o,p===a&&(T-=E/2);const A=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),Y=Math.min(A,z),ne=Math.max(A,z);T=Math.max(Math.min(T,ne),Y),x=T+E,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(T))}if(T===n.getPixelForValue(a)){const A=Qc(E)*n.getLineWidthForValue(a)/2;T+=A,E-=A}return{size:E,base:T,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Kr(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?SQ(e,n,i,c):LQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Xe(pv,"id","bar"),Xe(pv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Xe(pv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class gv extends _c{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Kr(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Kr(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),h=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const m=e[v],x=!s&&this.getParsed(v),E={},k=E[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[h]),T=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(k)||isNaN(T),c&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Kr(r&&r._custom,s),i}}Xe(gv,"id","bubble"),Xe(gv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Xe(gv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function TQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<xs){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(z,Y,ne)=>wm(z,a,l,!0)?1:Math.max(Y,Y*n,ne,ne*n),x=(z,Y,ne)=>wm(z,a,l,!0)?-1:Math.min(Y,Y*n,ne,ne*n),E=m(0,c,p),k=m(To,h,v),T=x(Ls,c,p),A=x(Ls+To,h,v);r=(E-T)/2,i=(k-A)/2,s=-(E+T)/2,o=-(k+A)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class af extends _c{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(mi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Ch(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return yc(this.options.rotation-90)}_getCircumference(){return yc(this.options.circumference)}_getRotationExtents(){let e=xs,n=-xs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(GX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:x,offsetY:E}=TQ(p,h,l),k=(r.width-o)/v,T=(r.height-o)/m,A=Math.max(Math.min(k,T)/2,0),z=wP(this.options.radius,A),Y=Math.max(z*l,0),ne=(z-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=x*z,this.offsetY=E*z,i.total=this.calculateTotal(),this.outerRadius=z-ne*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ne*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/xs)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,m=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(n,i);let T=this._getRotation(),A;for(A=0;A<n;++A)T+=this._circumference(A,s);for(A=n;A<n+r;++A){const z=this._circumference(A,s),Y=e[A],ne={x:h+this.offsetX,y:p+this.offsetY,startAngle:T,endAngle:T+z,circumference:z,outerRadius:x,innerRadius:m};k&&(ne.options=E||this.resolveDataElementOptions(A,Y.active?"active":i)),T+=z,this.updateElement(Y,A,ne,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?xs*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Rm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Kr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Xe(af,"id","doughnut"),Xe(af,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Xe(af,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Xe(af,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class mv extends _c{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kP(n,i,o);this._drawStart=a,this._drawCount=l,AP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,m=a.axis,{spanGaps:x,segment:E}=this.options,k=Dp(x)?x:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none",A=n+r,z=e.length;let Y=n>0&&this.getParsed(n-1);for(let ne=0;ne<z;++ne){const ge=e[ne],pe=T?ge:{};if(ne<n||ne>=A){pe.skip=!0;continue}const O=this.getParsed(ne),j=Pi(O[m]),J=pe[v]=o.getPixelForValue(O[v],ne),V=pe[m]=s||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[m],ne);pe.skip=isNaN(J)||isNaN(V)||j,pe.stop=ne>0&&Math.abs(O[v]-Y[v])>k,E&&(pe.parsed=O,pe.raw=c.data[ne]),p&&(pe.options=h||this.resolveDataElementOptions(ne,ge.active?"active":i)),T||this.updateElement(ge,ne,pe,i),Y=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Xe(mv,"id","line"),Xe(mv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Xe(mv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class tm extends _c{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Rm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return FP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Ls;let m=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)m+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const k=e[x];let T=m,A=m+this._computeAngle(x,i,E),z=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;m=A,s&&(l.animateScale&&(z=0),l.animateRotate&&(T=A=v));const Y={x:h,y:p,innerRadius:0,outerRadius:z,startAngle:T,endAngle:A,options:this.resolveDataElementOptions(x,k.active?"active":i)};this.updateElement(k,x,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?yc(this.resolveDataElementOptions(e,n).angle||r):0}}Xe(tm,"id","polarArea"),Xe(tm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Xe(tm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vb extends af{}Xe(Vb,"id","pie"),Xe(Vb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class vv extends _c{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return FP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:h.x,v=o?s.yCenter:h.y,m={x:p,y:v,angle:h.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,m,i)}}}Xe(vv,"id","radar"),Xe(vv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Xe(vv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class yv extends _c{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=kP(n,r,i);if(this._drawStart=s,this._drawCount=o,AP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(h),v=this.includeOptions(i,p),m=o.axis,x=a.axis,{spanGaps:E,segment:k}=this.options,T=Dp(E)?E:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none";let z=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+r;++Y){const ne=e[Y],ge=this.getParsed(Y),pe=A?ne:{},O=Pi(ge[x]),j=pe[m]=o.getPixelForValue(ge[m],Y),J=pe[x]=s||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ge,l):ge[x],Y);pe.skip=isNaN(j)||isNaN(J)||O,pe.stop=Y>0&&Math.abs(ge[m]-z[m])>T,k&&(pe.parsed=ge,pe.raw=c.data[Y]),v&&(pe.options=p||this.resolveDataElementOptions(Y,ne.active?"active":i)),A||this.updateElement(ne,Y,pe,i),z=ge}this.updateSharedOptions(p,i,h)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Xe(yv,"id","scatter"),Xe(yv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Xe(yv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var DQ=Object.freeze({__proto__:null,BarController:pv,BubbleController:gv,DoughnutController:af,LineController:mv,PieController:Vb,PolarAreaController:tm,RadarController:vv,ScatterController:yv});function Zh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ow{constructor(e){Xe(this,"options");this.options=e||{}}static override(e){Object.assign(ow.prototype,e)}init(){}formats(){return Zh()}parse(){return Zh()}format(){return Zh()}add(){return Zh()}diff(){return Zh()}startOf(){return Zh()}endOf(){return Zh()}}var YP={_date:ow};function NQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?rJ:Dd;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const p=l(s,e,n-h),v=l(s,e,n+h);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Zy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:p,hi:v}=NQ(s[a],e,o,i);for(let m=p;m<=v;++m){const x=h[m];x.skip||r(x,c,m)}}}function OQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function C2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Zy(t,n,e,function(a,l,c){!i&&!Nd(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function IQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=SP(o,{x:e.x,y:e.y});wm(p,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return Zy(t,n,e,s),i}function BQ(t,e,n,r,i,s){let o=[];const a=OQ(n);let l=Number.POSITIVE_INFINITY;function c(h,p,v){const m=h.inRange(e.x,e.y,i);if(r&&!m)return;const x=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!m)return;const k=a(e,x);k<l?(o=[{element:h,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:h,datasetIndex:p,index:v})}return Zy(t,n,e,c),o}function E2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?IQ(t,e,n,i):BQ(t,e,n,r,i,s)}function E3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Zy(t,n,e,(l,c,h)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var RQ={modes:{index(t,e,n,r){const i=ef(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?C2(t,i,s,r,o):E2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,p=c.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?C2(t,i,s,r,o):E2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return C2(t,i,s,r,o)},nearest(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return E2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ef(e,t);return E3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ef(e,t);return E3(t,i,"y",n.intersect,r)}}};const KP=["left","top","right","bottom"];function cg(t,e){return t.filter(n=>n.pos===e)}function P3(t,e){return t.filter(n=>KP.indexOf(n.pos)===-1&&n.box.axis===e)}function dg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function FQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function jQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!KP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function zQ(t,e){const n=jQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function $Q(t){const e=FQ(t),n=dg(e.filter(c=>c.box.fullSize),!0),r=dg(cg(e,"left"),!0),i=dg(cg(e,"right")),s=dg(cg(e,"top"),!0),o=dg(cg(e,"bottom")),a=P3(e,"x"),l=P3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:cg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function M3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function ZP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function VQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!mi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&ZP(o,s.getPadding());const a=Math.max(0,e.outerWidth-M3(o,t,"left","right")),l=Math.max(0,e.outerHeight-M3(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function UQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function HQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function kg(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,HQ(a.horizontal,e));const{same:p,other:v}=VQ(e,n,a,r);c|=p&&i.length,h=h||v,l.fullSize||i.push(a)}return c&&kg(i,e,n,r)||h}function F0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function k3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*h,v=c.size||l.height;_m(c.start)&&(o=c.start),l.fullSize?F0(l,i.left,o,n.outerWidth-i.right-i.left,v):F0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*h,v=c.size||l.width;_m(c.start)&&(s=c.start),l.fullSize?F0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):F0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var tl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=nl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=$Q(t.boxes),l=a.vertical,c=a.horizontal;Yi(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),v=Object.assign({},i);ZP(v,nl(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=zQ(l.concat(c),p);kg(a.fullSize,m,p,x),kg(l,m,p,x),kg(c,m,p,x)&&kg(l,m,p,x),UQ(m),k3(a.leftAndTop,m,p,x),m.x+=m.w,m.y+=m.h,k3(a.rightAndBottom,m,p,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Yi(a.chartArea,E=>{const k=E.box;Object.assign(k,t.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class XP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class GQ extends XP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const bv="$chartjs",WQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},A3=t=>t===null||t==="";function qQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[bv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",A3(i)){const s=h3(t,"width");s!==void 0&&(t.width=s)}if(A3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=h3(t,"height");s!==void 0&&(t.height=s)}return t}const JP=ZJ?{passive:!0}:!1;function YQ(t,e,n){t.addEventListener(e,n,JP)}function KQ(t,e,n){t.canvas.removeEventListener(e,n,JP)}function ZQ(t,e){const n=WQ[t.type]||t.type,{x:r,y:i}=ef(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function oy(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function XQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||oy(a.addedNodes,r),o=o&&!oy(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function JQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||oy(a.removedNodes,r),o=o&&!oy(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Lm=new Map;let T3=0;function QP(){const t=window.devicePixelRatio;t!==T3&&(T3=t,Lm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function QQ(t,e){Lm.size||window.addEventListener("resize",QP),Lm.set(t,e)}function eee(t){Lm.delete(t),Lm.size||window.removeEventListener("resize",QP)}function tee(t,e,n){const r=t.canvas,i=r&&sw(r);if(!i)return;const s=MP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),QQ(t,s),o}function P2(t,e,n){n&&n.disconnect(),e==="resize"&&eee(t)}function nee(t,e,n){const r=t.canvas,i=MP(s=>{t.ctx!==null&&n(ZQ(s,t))},t);return YQ(r,e,i),i}class ree extends XP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(qQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[bv])return!1;const r=n[bv].initial;["height","width"].forEach(s=>{const o=r[s];Pi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[bv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:XQ,detach:JQ,resize:tee}[n]||nee;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:P2,detach:P2,resize:P2}[n]||KQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return KJ(e,n,r,i)}isAttached(e){const n=sw(e);return!!(n&&n.isConnected)}}function iee(t){return!iw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?GQ:ree}var q0;let zd=(q0=class{constructor(){Xe(this,"x");Xe(this,"y");Xe(this,"active",!1);Xe(this,"options");Xe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Dp(this.x)&&Dp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Xe(q0,"defaults",{}),Xe(q0,"defaultRoutes"),q0);function see(t,e){const n=t.options.ticks,r=oee(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?lee(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return uee(e,c,s,o/i),c;const h=aee(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(j0(e,c,h,Pi(m)?0:a-m,a),p=0,v=o-1;p<v;p++)j0(e,c,h,s[p],s[p+1]);return j0(e,c,h,l,Pi(m)?e.length:l+m),c}return j0(e,c,h),c}function oee(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function aee(t,e,n){const r=cee(t),i=e.length/n;if(!r)return Math.max(i,1);const s=QX(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function lee(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function uee(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function j0(t,e,n,r,i){const s=Kr(r,0),o=Math.min(Kr(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function cee(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const dee=t=>t==="left"?"right":t==="right"?"left":t,D3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,N3=(t,e)=>Math.min(e||t,t);function O3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function hee(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function fee(t,e){Yi(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function hg(t){return t.drawTicks?t.tickLength:0}function I3(t,e){if(!t.display)return 0;const n=Jo(t.font,e),r=nl(t.padding);return(Bs(t.text)?t.text.length:1)*n.lineHeight+r.height}function pee(t,e){return Ah(t,{scale:e,type:"scale"})}function gee(t,e,n){return Ah(t,{tick:n,index:e,type:"tick"})}function mee(t,e,n){let r=J_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=dee(r)),r}function vee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let p=0,v,m,x;const E=o-i,k=a-s;if(t.isHorizontal()){if(m=qa(r,s,a),mi(n)){const T=Object.keys(n)[0],A=n[T];x=h[T].getPixelForValue(A)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=D3(t,n,e);v=a-s}else{if(mi(n)){const T=Object.keys(n)[0],A=n[T];m=h[T].getPixelForValue(A)-k+e}else n==="center"?m=(c.left+c.right)/2-k+e:m=D3(t,n,e);x=qa(r,o,i),p=n==="left"?-To:To}return{titleX:m,titleY:x,maxWidth:v,rotation:p}}class Cf extends zd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=pu(e,Number.POSITIVE_INFINITY),n=pu(n,Number.NEGATIVE_INFINITY),r=pu(r,Number.POSITIVE_INFINITY),i=pu(i,Number.NEGATIVE_INFINITY),{min:pu(e,r),max:pu(n,i),minDefined:mo(e),maxDefined:mo(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:pu(n,pu(r,n)),max:pu(r,pu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){gs(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=PJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?O3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=see(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){gs(this.options.afterUpdate,[this])}beforeSetDimensions(){gs(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){gs(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),gs(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){gs(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=gs(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){gs(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){gs(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=N3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,v=h.highest.height,m=fa(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-hg(e.grid)-n.padding-I3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Z_(Math.min(Math.asin(fa((h.highest.height+6)/a,-1,1)),Math.asin(fa(l/c,-1,1))-Math.asin(fa(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){gs(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){gs(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=I3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=hg(s)+l):(e.height=this.maxHeight,e.width=hg(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,x=yc(this.labelRotation),E=Math.cos(x),k=Math.sin(x);if(a){const T=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+T+m)}else{const T=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+T+m)}this._calculatePadding(c,h,k,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?c?(v=i*e.width,m=r*n.height):(v=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=n.width/2),this.paddingLeft=Math.max((v-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){gs(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Pi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=O3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/N3(n,r));let c=0,h=0,p,v,m,x,E,k,T,A,z,Y,ne;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,T=s[k]=s[k]||{data:{},gc:[]},A=E.lineHeight,z=Y=0,!Pi(x)&&!Bs(x))z=iy(i,T.data,T.gc,z,x),Y=A;else if(Bs(x))for(v=0,m=x.length;v<m;++v)ne=x[v],!Pi(ne)&&!Bs(ne)&&(z=iy(i,T.data,T.gc,z,ne),Y+=A);o.push(z),a.push(Y),c=Math.max(z,c),h=Math.max(Y,h)}fee(s,n);const ge=o.indexOf(c),pe=a.indexOf(h),O=j=>({width:o[j]||0,height:a[j]||0});return{first:O(0),last:O(n-1),widest:O(ge),highest:O(pe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return nJ(this._alignToPixels?Kh(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=gee(this.getContext(),e,r))}return this.$context||(this.$context=pee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=yc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=hg(s),m=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,k=E/2,T=function(I){return Kh(r,I,E)};let A,z,Y,ne,ge,pe,O,j,J,V,B,H;if(o==="top")A=T(this.bottom),pe=this.bottom-v,j=A-k,V=T(e.top)+k,H=e.bottom;else if(o==="bottom")A=T(this.top),V=e.top,H=T(e.bottom)-k,pe=A+k,j=this.top+v;else if(o==="left")A=T(this.right),ge=this.right-v,O=A-k,J=T(e.left)+k,B=e.right;else if(o==="right")A=T(this.left),J=e.left,B=T(e.right)-k,ge=A+k,O=this.left+v;else if(n==="x"){if(o==="center")A=T((e.top+e.bottom)/2+.5);else if(mi(o)){const I=Object.keys(o)[0],X=o[I];A=T(this.chart.scales[I].getPixelForValue(X))}V=e.top,H=e.bottom,pe=A+k,j=pe+v}else if(n==="y"){if(o==="center")A=T((e.left+e.right)/2);else if(mi(o)){const I=Object.keys(o)[0],X=o[I];A=T(this.chart.scales[I].getPixelForValue(X))}ge=A-k,O=ge-v,J=e.left,B=e.right}const $=Kr(i.ticks.maxTicksLimit,p),R=Math.max(1,Math.ceil(p/$));for(z=0;z<p;z+=R){const I=this.getContext(z),X=s.setContext(I),K=a.setContext(I),_e=X.lineWidth,ve=X.color,Ge=K.dash||[],se=K.dashOffset,q=X.tickWidth,Z=X.tickColor,ie=X.tickBorderDash||[],de=X.tickBorderDashOffset;Y=hee(this,z,l),Y!==void 0&&(ne=Kh(r,Y,_e),c?ge=O=J=B=ne:pe=j=V=H=ne,m.push({tx1:ge,ty1:pe,tx2:O,ty2:j,x1:J,y1:V,x2:B,y2:H,width:_e,color:ve,borderDash:Ge,borderDashOffset:se,tickWidth:q,tickColor:Z,tickBorderDash:ie,tickBorderDashOffset:de}))}return this._ticksLength=p,this._borderValue=A,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:p}=s,v=hg(r.grid),m=v+h,x=p?-h:m,E=-yc(this.labelRotation),k=[];let T,A,z,Y,ne,ge,pe,O,j,J,V,B,H="middle";if(i==="top")ge=this.bottom-x,pe=this._getXAxisLabelAlignment();else if(i==="bottom")ge=this.top+x,pe=this._getXAxisLabelAlignment();else if(i==="left"){const R=this._getYAxisLabelAlignment(v);pe=R.textAlign,ne=R.x}else if(i==="right"){const R=this._getYAxisLabelAlignment(v);pe=R.textAlign,ne=R.x}else if(n==="x"){if(i==="center")ge=(e.top+e.bottom)/2+m;else if(mi(i)){const R=Object.keys(i)[0],I=i[R];ge=this.chart.scales[R].getPixelForValue(I)+m}pe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")ne=(e.left+e.right)/2-m;else if(mi(i)){const R=Object.keys(i)[0],I=i[R];ne=this.chart.scales[R].getPixelForValue(I)}pe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const $=this._getLabelSizes();for(T=0,A=a.length;T<A;++T){z=a[T],Y=z.label;const R=s.setContext(this.getContext(T));O=this.getPixelForTick(T)+s.labelOffset,j=this._resolveTickFontOptions(T),J=j.lineHeight,V=Bs(Y)?Y.length:1;const I=V/2,X=R.color,K=R.textStrokeColor,_e=R.textStrokeWidth;let ve=pe;o?(ne=O,pe==="inner"&&(T===A-1?ve=this.options.reverse?"left":"right":T===0?ve=this.options.reverse?"right":"left":ve="center"),i==="top"?c==="near"||E!==0?B=-V*J+J/2:c==="center"?B=-$.highest.height/2-I*J+J:B=-$.highest.height+J/2:c==="near"||E!==0?B=J/2:c==="center"?B=$.highest.height/2-I*J:B=$.highest.height-V*J,p&&(B*=-1),E!==0&&!R.showLabelBackdrop&&(ne+=J/2*Math.sin(E))):(ge=O,B=(1-V)*J/2);let Ge;if(R.showLabelBackdrop){const se=nl(R.backdropPadding),q=$.heights[T],Z=$.widths[T];let ie=B-se.top,de=0-se.left;switch(H){case"middle":ie-=q/2;break;case"bottom":ie-=q;break}switch(pe){case"center":de-=Z/2;break;case"right":de-=Z;break;case"inner":T===A-1?de-=Z:T>0&&(de-=Z/2);break}Ge={left:de,top:ie,width:Z+se.width,height:q+se.height,color:R.backdropColor}}k.push({label:Y,font:j,textOffset:B,options:{rotation:E,color:X,strokeColor:K,strokeWidth:_e,textAlign:ve,textBaseline:H,translation:[ne,ge],backdrop:Ge}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-yc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,p,v;this.isHorizontal()?(c=Kh(e,this.left,o)-o/2,h=Kh(e,this.right,a)+a/2,p=v=l):(p=Kh(e,this.top,o)-o/2,v=Kh(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(h,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&qy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;wf(r,c,0,h,l,a)}i&&Yy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Jo(r.font),o=nl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||mi(n)?(l+=o.bottom,Bs(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:p,rotation:v}=vee(this,l,n,a);wf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:mee(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Kr(e.grid&&e.grid.z,-1),i=Kr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Cf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Jo(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class z0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;_ee(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,yee(e,o,r),this.override&&vo.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in vo[i]&&(delete vo[i][r],this.override&&delete _f[r])}}function yee(t,e,n){const r=bm(Object.create(null),[n?vo.get(n):{},vo.get(e),t.defaults]);vo.set(e,r),t.defaultRoutes&&bee(e,t.defaultRoutes),t.descriptors&&vo.describe(e,t.descriptors)}function bee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");vo.route(s,i,l,a)})}function _ee(t){return"id"in t&&"defaults"in t}class wee{constructor(){this.controllers=new z0(_c,"datasets",!0),this.elements=new z0(zd,"elements"),this.plugins=new z0(Object,"plugins"),this.scales=new z0(Cf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Yi(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=K_(e);gs(r["before"+i],[],r),n[e](r),gs(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Vc=new wee;class xee{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(gs(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Pi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Kr(r.options&&r.options.plugins,{}),s=Lee(r);return i===!1&&!n?[]:Cee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Lee(t){const e={},n=[],r=Object.keys(Vc.plugins.items);for(let s=0;s<r.length;s++)n.push(Vc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function See(t,e){return!e&&t===!1?null:t===!0?{}:t}function Cee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=See(r[l],i);c!==null&&s.push({plugin:a,options:Eee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Eee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ub(t,e){const n=vo.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Pee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Mee(t,e){return t===e?"_index_":"_value_"}function B3(t){if(t==="x"||t==="y"||t==="r")return t}function kee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Hb(t,...e){if(B3(t))return t;for(const n of e){const r=n.axis||kee(n.position)||t.length>1&&B3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function R3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Aee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return R3(t,"x",n[0])||R3(t,"y",n[0])}return{}}function Tee(t,e){const n=_f[t.type]||{scales:{}},r=e.scales||{},i=Ub(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!mi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Hb(o,a,Aee(o,t),vo.scales[a.type]),c=Mee(l,i),h=n.scales||{};s[o]=Xg(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ub(a,e),h=(_f[a]||{}).scales||{};Object.keys(h).forEach(p=>{const v=Pee(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),Xg(s[m],[{axis:v},r[m],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Xg(a,[vo.scales[a.type],vo.scale])}),s}function eM(t){const e=t.options||(t.options={});e.plugins=Kr(e.plugins,{}),e.scales=Tee(t,e)}function tM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Dee(t){return t=t||{},t.data=tM(t.data),eM(t),t}const F3=new Map,nM=new Set;function $0(t,e){let n=F3.get(t);return n||(n=e(),F3.set(t,n),nM.add(n)),n}const fg=(t,e,n)=>{const r=Ch(e,n);r!==void 0&&t.add(r)};class Nee{constructor(e){this._config=Dee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return $0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(p=>fg(l,e,p))),h.forEach(p=>fg(l,i,p)),h.forEach(p=>fg(l,_f[s]||{},p)),h.forEach(p=>fg(l,vo,p)),h.forEach(p=>fg(l,zb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,_f[n]||{},vo.datasets[n]||{},{type:n},vo,zb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=j3(this._resolverCache,e,i);let l=o;if(Iee(o,n)){s.$shared=!1,r=Eh(r)?r():r;const c=this.createResolver(e,r,a);l=Np(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=j3(this._resolverCache,e,r);return mi(n)?Np(s,n,void 0,i):s}}function j3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:tw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Oee=t=>mi(t)&&Object.getOwnPropertyNames(t).some(e=>Eh(t[e]));function Iee(t,e){const{isScriptable:n,isIndexable:r}=OP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Eh(a)||Oee(a))||o&&Bs(a))return!0}return!1}var Bee="4.4.1";const Ree=["top","bottom","left","right","chartArea"];function z3(t,e){return t==="top"||t==="bottom"||Ree.indexOf(t)===-1&&e==="x"}function $3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function V3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),gs(n&&n.onComplete,[t],e)}function Fee(t){const e=t.chart,n=e.options.animation;gs(n&&n.onProgress,[t],e)}function rM(t){return iw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _v={},U3=t=>{const e=rM(t);return Object.values(_v).filter(n=>n.canvas===e).pop()};function jee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function zee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function V0(t,e,n){return t.options.clip?t[n]:e[n]}function $ee(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:V0(n,e,"left"),right:V0(n,e,"right"),top:V0(r,e,"top"),bottom:V0(r,e,"bottom")}:e}class Gc{static register(...e){Vc.add(...e),H3()}static unregister(...e){Vc.remove(...e),H3()}constructor(e,n){const r=this.config=new Nee(n),i=rM(e),s=U3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||iee(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=HX(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oJ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],_v[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xd.listen(this,"complete",V3),xd.listen(this,"progress",Fee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Pi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():d3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return l3(this.canvas,this.ctx),this}stop(){return xd.stop(this),this}resize(e,n){xd.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,d3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),gs(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Yi(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Hb(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Yi(s,o=>{const a=o.options,l=a.id,c=Hb(l,a),h=Kr(a.type,o.dtype);(a.position===void 0||z3(a.position,c)!==z3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const v=Vc.getScale(h);p=new v({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Yi(i,(o,a)=>{o||delete r[a]}),Yi(r,o=>{tl.configure(this,o,o.options),tl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort($3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Ub(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Vc.getController(a),{datasetElementType:c,dataElementType:h}=vo.datasets[a];Object.assign(l,{dataElementType:Vc.getElement(h),datasetElementType:c&&Vc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Yi(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Yi(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Yi(this.scales,e=>{tl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Q5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;jee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Q5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Yi(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Eh(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xd.has(this)?this.attached&&!xd.running(this)&&xd.start(this):(this.draw(),V3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=$ee(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&qy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Yy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Nd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=RQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ah(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);_m(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xd.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),l3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _v[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Yi(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Yi(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Yi(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ty(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=ZX(e),c=zee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,gs(s.onHover,[e,a,this],this),l&&gs(s.onClick,[e,a,this],this));const h=!ty(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Xe(Gc,"defaults",vo),Xe(Gc,"instances",_v),Xe(Gc,"overrides",_f),Xe(Gc,"registry",Vc),Xe(Gc,"version",Bee),Xe(Gc,"getChart",U3);function H3(){return Yi(Gc.instances,t=>t._plugins.invalidate())}function Vee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+To,r-To),t.closePath(),t.clip()}function Uee(t){return ew(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Hee(t,e,n,r){const i=Uee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return fa(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:fa(i.innerStart,0,o),innerEnd:fa(i.innerEnd,0,o)}}function Qf(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ay(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,p=Math.max(e.outerRadius+r+n-c,0),v=h>0?h+r+n+c:0;let m=0;const x=i-l;if(r){const R=h>0?h-r:0,I=p>0?p-r:0,X=(R+I)/2,K=X!==0?x*X/(X+r):x;m=(x-K)/2}const E=Math.max(.001,x*p-n/Ls)/p,k=(x-E)/2,T=l+k+m,A=i-k-m,{outerStart:z,outerEnd:Y,innerStart:ne,innerEnd:ge}=Hee(e,v,p,A-T),pe=p-z,O=p-Y,j=T+z/pe,J=A-Y/O,V=v+ne,B=v+ge,H=T+ne/V,$=A-ge/B;if(t.beginPath(),s){const R=(j+J)/2;if(t.arc(o,a,p,j,R),t.arc(o,a,p,R,J),Y>0){const _e=Qf(O,J,o,a);t.arc(_e.x,_e.y,Y,J,A+To)}const I=Qf(B,A,o,a);if(t.lineTo(I.x,I.y),ge>0){const _e=Qf(B,$,o,a);t.arc(_e.x,_e.y,ge,A+To,$+Math.PI)}const X=(A-ge/v+(T+ne/v))/2;if(t.arc(o,a,v,A-ge/v,X,!0),t.arc(o,a,v,X,T+ne/v,!0),ne>0){const _e=Qf(V,H,o,a);t.arc(_e.x,_e.y,ne,H+Math.PI,T-To)}const K=Qf(pe,T,o,a);if(t.lineTo(K.x,K.y),z>0){const _e=Qf(pe,j,o,a);t.arc(_e.x,_e.y,z,T-To,j)}}else{t.moveTo(o,a);const R=Math.cos(j)*p+o,I=Math.sin(j)*p+a;t.lineTo(R,I);const X=Math.cos(J)*p+o,K=Math.sin(J)*p+a;t.lineTo(X,K)}t.closePath()}function Gee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ay(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%xs||xs))}return ay(t,e,n,r,l,i),t.fill(),l}function Wee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,m?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let x=e.endAngle;if(s){ay(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%xs||xs))}m&&Vee(t,e,x),s||(ay(t,e,n,r,x,i),t.stroke())}class Ag extends zd{constructor(n){super();Xe(this,"circumference");Xe(this,"endAngle");Xe(this,"fullCircles");Xe(this,"innerRadius");Xe(this,"outerRadius");Xe(this,"pixelMargin");Xe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=SP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=Kr(v,c-l)>=xs||wm(o,l,c),k=Td(a,h+m,p+m);return E&&k}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,p=(s+o)/2,v=(a+l+h+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>xs?Math.floor(i/xs):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ls,i||0)),h=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Gee(n,this,h,o,a),Wee(n,this,h,o,a),n.restore()}}Xe(Ag,"id","arc"),Xe(Ag,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Xe(Ag,"defaultRoutes",{backgroundColor:"backgroundColor"}),Xe(Ag,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function iM(t,e,n=e){t.lineCap=Kr(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Kr(n.borderDash,e.borderDash)),t.lineDashOffset=Kr(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Kr(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Kr(n.borderWidth,e.borderWidth),t.strokeStyle=Kr(n.borderColor,e.borderColor)}function qee(t,e,n){t.lineTo(n.x,n.y)}function Yee(t){return t.stepped?yJ:t.tension||t.cubicInterpolationMode==="monotone"?bJ:qee}function sM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function Kee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=sM(i,n,r),h=Yee(s);let{move:p=!0,reverse:v}=r||{},m,x,E;for(m=0;m<=c;++m)x=i[(a+(v?c-m:m))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):h(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],h(t,E,x,v,s.stepped)),!!l}function Zee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=sM(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,p=0,v,m,x,E,k,T;const A=Y=>(o+(c?a-Y:Y))%s,z=()=>{E!==k&&(t.lineTo(h,k),t.lineTo(h,E),t.lineTo(h,T))};for(l&&(m=i[A(0)],t.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[A(v)],m.skip)continue;const Y=m.x,ne=m.y,ge=Y|0;ge===x?(ne<E?E=ne:ne>k&&(k=ne),h=(p*h+Y)/++p):(z(),t.lineTo(Y,ne),x=ge,p=0,E=k=ne),T=ne}z()}function Gb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Zee:Kee}function Xee(t){return t.stepped?XJ:t.tension||t.cubicInterpolationMode==="monotone"?JJ:tf}function Jee(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),iM(t,e.options),t.stroke(i)}function Qee(t,e,n,r){const{segments:i,options:s}=e,o=Gb(e);for(const a of i)iM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const ete=typeof Path2D=="function";function tte(t,e,n,r){ete&&!e.options.segment?Jee(t,e,n,r):Qee(t,e,n,r)}class ph extends zd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;UJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=iQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=HP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Xee(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:p,end:v}=o[c],m=s[p],x=s[v];if(m===x){a.push(m);continue}const E=Math.abs((i-m[n])/(x[n]-m[n])),k=l(m,x,E,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Gb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Gb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),tte(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Xe(ph,"id","line"),Xe(ph,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Xe(ph,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Xe(ph,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function G3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class wv extends zd{constructor(n){super();Xe(this,"parsed");Xe(this,"skip");Xe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return G3(this,n,"x",r)}inYRange(n,r){return G3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Nd(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,$b(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Xe(wv,"id","point"),Xe(wv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Xe(wv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function oM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,h=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function gh(t,e,n,r){return t?0:fa(e,n,r)}function nte(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=NP(r);return{t:gh(i.top,s.top,0,n),r:gh(i.right,s.right,0,e),b:gh(i.bottom,s.bottom,0,n),l:gh(i.left,s.left,0,e)}}function rte(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=pf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||mi(i);return{topLeft:gh(!l||a.top||a.left,s.topLeft,0,o),topRight:gh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:gh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:gh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function ite(t){const e=oM(t),n=e.right-e.left,r=e.bottom-e.top,i=nte(t,n/2,r/2),s=rte(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function M2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&oM(t,r);return a&&(i||Td(e,a.left,a.right))&&(s||Td(n,a.top,a.bottom))}function ste(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function ote(t,e){t.rect(e.x,e.y,e.w,e.h)}function k2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class xv extends zd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=ite(this),a=ste(o.radius)?xm:ote;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,k2(o,n,s)),e.clip(),a(e,k2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,k2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return M2(this,e,n,r)}inXRange(e,n){return M2(this,e,null,n)}inYRange(e,n){return M2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Xe(xv,"id","bar"),Xe(xv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Xe(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var ate=Object.freeze({__proto__:null,ArcElement:Ag,BarElement:xv,LineElement:ph,PointElement:wv});const Wb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],W3=Wb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function aM(t){return Wb[t%Wb.length]}function lM(t){return W3[t%W3.length]}function lte(t,e){return t.borderColor=aM(e),t.backgroundColor=lM(e),++e}function ute(t,e){return t.backgroundColor=t.data.map(()=>aM(e++)),e}function cte(t,e){return t.backgroundColor=t.data.map(()=>lM(e++)),e}function dte(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof af?e=ute(n,e):i instanceof tm?e=cte(n,e):i&&(e=lte(n,e))}}function q3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function hte(t){return t&&(t.borderColor||t.backgroundColor)}var fte={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(q3(r)||hte(i)||s&&q3(s)))return;const o=dte(t);r.forEach(o)}};function pte(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h=e,p,v,m,x,E;for(o[l++]=t[h],p=0;p<s-2;p++){let k=0,T=0,A;const z=Math.floor((p+1)*a)+1+e,Y=Math.min(Math.floor((p+2)*a)+1,n)+e,ne=Y-z;for(A=z;A<Y;A++)k+=t[A].x,T+=t[A].y;k/=ne,T/=ne;const ge=Math.floor(p*a)+1+e,pe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:O,y:j}=t[h];for(m=x=-1,A=ge;A<pe;A++)x=.5*Math.abs((O-k)*(t[A].y-j)-(O-t[A].x)*(T-j)),x>m&&(m=x,v=t[A],E=A);o[l++]=v,h=E}return o[l++]=t[c],o}function gte(t,e,n,r){let i=0,s=0,o,a,l,c,h,p,v,m,x,E;const k=[],T=e+n-1,A=t[e].x,Y=t[T].x-A;for(o=e;o<e+n;++o){a=t[o],l=(a.x-A)/Y*r,c=a.y;const ne=l|0;if(ne===h)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const ge=o-1;if(!Pi(p)&&!Pi(v)){const pe=Math.min(p,v),O=Math.max(p,v);pe!==m&&pe!==ge&&k.push({...t[pe],x:i}),O!==m&&O!==ge&&k.push({...t[O],x:i})}o>0&&ge!==m&&k.push(t[ge]),k.push(a),h=ne,s=0,x=E=c,p=v=m=o}}return k}function uM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Y3(t){t.data.datasets.forEach(e=>{uM(e)})}function mte(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=fa(Dd(e,s.axis,o).lo,0,n-1)),c?i=fa(Dd(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var vte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Y3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Mg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:p,count:v}=mte(l,c);const m=n.threshold||4*r;if(v<=m){uM(i);return}Pi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=pte(c,p,v,r,n);break;case"min-max":x=gte(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Y3(t)}};function yte(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=aw(l,c,i);const h=qb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[l],end:i[c]});continue}const p=HP(e,h);for(const v of p){const m=qb(n,s[v.start],s[v.end],v.loop),x=UP(a,i,m);for(const E of x)o.push({source:E,target:v,start:{[n]:K3(h,m,"start",Math.max)},end:{[n]:K3(h,m,"end",Math.min)}})}}return o}function qb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=gu(i),s=gu(s)),{property:t,start:i,end:s}}function bte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=aw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function aw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function K3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function cM(t,e){let n=[],r=!1;return Bs(t)?(r=!0,n=t):n=bte(t,e),n.length?new ph({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Z3(t){return t&&t.fill!==!1}function _te(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!mo(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function wte(t,e,n){const r=Cte(t);if(mi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return mo(i)&&Math.floor(i)===i?xte(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function xte(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Lte(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:mi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Ste(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:mi(t)?r=t.value:r=e.getBaseValue(),r}function Cte(t){const e=t.options,n=e.fill;let r=Kr(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Ete(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Pte(e,n);a.push(cM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)Mte(i,o[h],a)}return new ph({points:i,options:{}})}function Pte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Mte(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=kte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function kte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],p=o[h.start][n],v=o[h.end][n];if(Td(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class dM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:xs},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Ate(t){const{chart:e,fill:n,line:r}=t;if(mo(n))return Tte(e,n);if(n==="stack")return Ete(t);if(n==="shape")return!0;const i=Dte(t);return i instanceof dM?i:cM(i,r)}function Tte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Dte(t){return(t.scale||{}).getPointPositionForValue?Ote(t):Nte(t)}function Nte(t){const{scale:e={},fill:n}=t,r=Lte(n,e);if(mo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Ote(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Ste(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new dM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function A2(t,e,n){const r=Ate(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:p=c}=l||{};r&&i.points.length&&(qy(t,n),Ite(t,{line:i,target:r,above:h,below:p,area:n,scale:s,axis:o}),Yy(t))}function Ite(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(X3(t,r,o.top),J3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),X3(t,r,o.bottom)),J3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function X3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=i[l],p=i[aw(l,c,i)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function J3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=yte(n,r,i);for(const{source:l,target:c,start:h,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=v,Bte(t,o,m&&qb(i,h,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(m){x?t.closePath():Q3(t,r,p,i);const k=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&k,E||Q3(t,r,h,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function Bte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function Q3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Rte={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ph&&(l={visible:t.isDatasetVisible(o),index:o,fill:wte(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=_te(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&A2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Z3(s)&&A2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Z3(r)||n.drawTime!=="beforeDatasetDraw"||A2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const eL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Fte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class tL extends zd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=gs(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Jo(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=eL(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-h;return this.legendItems.forEach((x,E)=>{const k=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+k+2*a>o)&&(p+=h,c[c.length-(E>0?0:1)]=0,m+=h,v++),l[E]={left:0,top:m,row:v,width:k,height:i},c[c.length-1]+=k+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let p=a,v=0,m=0,x=0,E=0;return this.legendItems.forEach((k,T)=>{const{itemWidth:A,itemHeight:z}=jte(r,n,s,k,i);T>0&&m+z+2*a>h&&(p+=v+a,c.push({width:v,height:m}),x+=v+a,E++,v=m=0),l[T]={left:x,top:m,col:E,width:A,height:z},v=Math.max(v,A),m+=z+a}),p+=v,c.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=xp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=qa(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qa(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=qa(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qa(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qy(e,this),this._draw(),Yy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=vo.color,l=xp(e.rtl,this.left,this.width),c=Jo(o.font),{padding:h}=o,p=c.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:k}=eL(o,p),T=function(ge,pe,O){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const j=Kr(O.lineWidth,1);if(i.fillStyle=Kr(O.fillStyle,a),i.lineCap=Kr(O.lineCap,"butt"),i.lineDashOffset=Kr(O.lineDashOffset,0),i.lineJoin=Kr(O.lineJoin,"miter"),i.lineWidth=j,i.strokeStyle=Kr(O.strokeStyle,a),i.setLineDash(Kr(O.lineDash,[])),o.usePointStyle){const J={radius:E*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:j},V=l.xPlus(ge,x/2),B=pe+v;DP(i,J,V,B,o.pointStyleWidth&&x)}else{const J=pe+Math.max((p-E)/2,0),V=l.leftForLtr(ge,x),B=pf(O.borderRadius);i.beginPath(),Object.values(B).some(H=>H!==0)?xm(i,{x:V,y:J,w:x,h:E,radius:B}):i.rect(V,J,x,E),i.fill(),j!==0&&i.stroke()}i.restore()},A=function(ge,pe,O){wf(i,O.text,ge,pe+k/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},z=this.isHorizontal(),Y=this._computeTitleHeight();z?m={x:qa(s,this.left+h,this.right-r[0]),y:this.top+h+Y,line:0}:m={x:this.left+h,y:qa(s,this.top+Y+h,this.bottom-n[0].height),line:0},zP(this.ctx,e.textDirection);const ne=k+h;this.legendItems.forEach((ge,pe)=>{i.strokeStyle=ge.fontColor,i.fillStyle=ge.fontColor;const O=i.measureText(ge.text).width,j=l.textAlign(ge.textAlign||(ge.textAlign=o.textAlign)),J=x+v+O;let V=m.x,B=m.y;l.setWidth(this.width),z?pe>0&&V+J+h>this.right&&(B=m.y+=ne,m.line++,V=m.x=qa(s,this.left+h,this.right-r[m.line])):pe>0&&B+ne>this.bottom&&(V=m.x=V+n[m.line].width+h,m.line++,B=m.y=qa(s,this.top+Y+h,this.bottom-n[m.line].height));const H=l.x(V);if(T(H,B,ge),V=aJ(j,V+x+v,z?V+J:this.right,e.rtl),A(l.x(V),B,ge),z)m.x+=J+h;else if(typeof ge.text!="string"){const $=c.lineHeight;m.y+=hM(ge,$)+h}else m.y+=ne}),$P(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Jo(n.font),i=nl(n.padding);if(!n.display)return;const s=xp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+c,p=qa(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);h=c+qa(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=qa(a,p,p+v);o.textAlign=s.textAlign(J_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,wf(o,n.text,m,h,r)}_computeTitleHeight(){const e=this.options.title,n=Jo(e.font),r=nl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Td(e,this.left,this.right)&&Td(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Td(e,i.left,i.left+i.width)&&Td(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Vte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Fte(i,r);i&&!s&&gs(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&gs(n.onHover,[e,r,this],this)}else r&&gs(n.onClick,[e,r,this],this)}}function jte(t,e,n,r,i){const s=zte(r,t,e,n),o=$te(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function zte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function $te(t,e,n){let r=t;return typeof e.text!="string"&&(r=hM(e,n)),r}function hM(t,e){const n=t.text?t.text.length:0;return e*n}function Vte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ute={id:"legend",_element:tL,start(t,e,n){const r=t.legend=new tL({ctx:t.ctx,options:n,chart:t});tl.configure(t,r,n),tl.addBox(t,r)},stop(t){tl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;tl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=nl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lw extends zd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Bs(r.text)?r.text.length:1;this._padding=nl(r.padding);const s=i*Jo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,p;return this.isHorizontal()?(h=qa(a,r,s),p=n+e,c=s-r):(o.position==="left"?(h=r+e,p=qa(a,i,n),l=Ls*-.5):(h=s-e,p=qa(a,n,i),l=Ls*.5),c=i-n),{titleX:h,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Jo(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);wf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:J_(n.align),textBaseline:"middle",translation:[o,a]})}}function Hte(t,e){const n=new lw({ctx:t.ctx,options:e,chart:t});tl.configure(t,n,e),tl.addBox(t,n),t.titleBlock=n}var Gte={id:"title",_element:lw,start(t,e,n){Hte(t,n)},stop(t){const e=t.titleBlock;tl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;tl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const U0=new WeakMap;var Wte={id:"subtitle",start(t,e,n){const r=new lw({ctx:t.ctx,options:n,chart:t});tl.configure(t,r,n),tl.addBox(t,r),U0.set(t,r)},stop(t){tl.removeBox(t,U0.get(t)),U0.delete(t)},beforeUpdate(t,e,n){const r=U0.get(t);tl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=jb(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zc(t,e){return e&&(Bs(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ld(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qte(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function nL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Jo(e.bodyFont),c=Jo(e.titleFont),h=Jo(e.footerFont),p=s.length,v=i.length,m=r.length,x=nl(e.padding);let E=x.height,k=0,T=r.reduce((Y,ne)=>Y+ne.before.length+ne.lines.length+ne.after.length,0);if(T+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),T){const Y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*Y+(T-m)*l.lineHeight+(T-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*h.lineHeight+(v-1)*e.footerSpacing);let A=0;const z=function(Y){k=Math.max(k,n.measureText(Y).width+A)};return n.save(),n.font=c.string,Yi(t.title,z),n.font=l.string,Yi(t.beforeBody.concat(t.afterBody),z),A=e.displayColors?o+2+e.boxPadding:0,Yi(r,Y=>{Yi(Y.before,z),Yi(Y.lines,z),Yi(Y.after,z)}),A=0,n.font=h.string,Yi(t.footer,z),n.restore(),k+=x.width,{width:k,height:E}}function Yte(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Kte(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Zte(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Kte(c,t,e,n)&&(c="center"),c}function rL(t,e,n){const r=n.yAlign||e.yAlign||Yte(t,n);return{xAlign:n.xAlign||e.xAlign||Zte(t,e,n,r),yAlign:r}}function Xte(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Jte(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function iL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:p,bottomLeft:v,bottomRight:m}=pf(o);let x=Xte(e,a);const E=Jte(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(h,v)+i:a==="right"&&(x+=Math.max(p,m)+i),{x:fa(x,0,r.width-e.width),y:fa(E,0,r.height-e.height)}}function H0(t,e,n){const r=nl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function sL(t){return zc([],Ld(t))}function Qte(t,e,n){return Ah(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function oL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const fM={beforeTitle:wd,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:wd,beforeBody:wd,beforeLabel:wd,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Pi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:wd,afterBody:wd,beforeFooter:wd,footer:wd,afterFooter:wd};function jl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?fM[e].call(n,r):i}class Yb extends zd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new GP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Qte(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=jl(r,"beforeTitle",this,e),s=jl(r,"title",this,e),o=jl(r,"afterTitle",this,e);let a=[];return a=zc(a,Ld(i)),a=zc(a,Ld(s)),a=zc(a,Ld(o)),a}getBeforeBody(e,n){return sL(jl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Yi(e,s=>{const o={before:[],lines:[],after:[]},a=oL(r,s);zc(o.before,Ld(jl(a,"beforeLabel",this,s))),zc(o.lines,jl(a,"label",this,s)),zc(o.after,Ld(jl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return sL(jl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=jl(r,"beforeFooter",this,e),s=jl(r,"footer",this,e),o=jl(r,"afterFooter",this,e);let a=[];return a=zc(a,Ld(i)),a=zc(a,Ld(s)),a=zc(a,Ld(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(qte(this.chart,n[l]));return e.filter&&(a=a.filter((h,p,v)=>e.filter(h,p,v,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),Yi(a,h=>{const p=oL(e.callbacks,h);i.push(jl(p,"labelColor",this,h)),s.push(jl(p,"labelPointStyle",this,h)),o.push(jl(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Tg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=nL(this,r),c=Object.assign({},a,l),h=rL(this.chart,r,c),p=iL(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:p}=pf(a),{x:v,y:m}=e,{width:x,height:E}=n;let k,T,A,z,Y,ne;return s==="center"?(Y=m+E/2,i==="left"?(k=v,T=k-o,z=Y+o,ne=Y-o):(k=v+x,T=k+o,z=Y-o,ne=Y+o),A=k):(i==="left"?T=v+Math.max(l,h)+o:i==="right"?T=v+x-Math.max(c,p)-o:T=this.caretX,s==="top"?(z=m,Y=z-o,k=T-o,A=T+o):(z=m+E,Y=z+o,k=T+o,A=T-o),ne=z),{x1:k,x2:T,x3:A,y1:z,y2:Y,y3:ne}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=xp(r.rtl,this.x,this.width);for(e.x=H0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Jo(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=Jo(s.bodyFont),p=H0(this,"left",s),v=i.x(p),m=l<h.lineHeight?(h.lineHeight-l)/2:0,x=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,c)+c/2,T=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,$b(e,E,k,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$b(e,E,k,T)}else{e.lineWidth=mi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),k=i.leftForLtr(i.xPlus(v,1),c-2),T=pf(o.borderRadius);Object.values(T).some(A=>A!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,xm(e,{x:E,y:x,w:c,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),xm(e,{x:k,y:x+1,w:c-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,p=Jo(r.bodyFont);let v=p.lineHeight,m=0;const x=xp(r.rtl,this.x,this.width),E=function(O){n.fillText(O,x.x(e.x+m),e.y+v/2),e.y+=v+s},k=x.textAlign(o);let T,A,z,Y,ne,ge,pe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=H0(this,k,r),n.fillStyle=r.bodyColor,Yi(this.beforeBody,E),m=a&&k!=="right"?o==="center"?c/2+h:c+2+h:0,Y=0,ge=i.length;Y<ge;++Y){for(T=i[Y],A=this.labelTextColors[Y],n.fillStyle=A,Yi(T.before,E),z=T.lines,a&&z.length&&(this._drawColorBox(n,e,Y,x,r),v=Math.max(p.lineHeight,l)),ne=0,pe=z.length;ne<pe;++ne)E(z[ne]),v=p.lineHeight;Yi(T.after,E)}m=0,v=p.lineHeight,Yi(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=xp(r.rtl,this.x,this.width);for(e.x=H0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Jo(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:x}=pf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-x),n.quadraticCurveTo(a+c,l+h,a+c-x,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Tg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=nL(this,e),l=Object.assign({},o,this._size),c=rL(n,e,l),h=iL(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=nl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),zP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),$P(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ty(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ty(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Tg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Xe(Yb,"positioners",Tg);var ene={id:"tooltip",_element:Yb,positioners:Tg,afterInit(t,e,n){n&&(t.tooltip=new Yb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},tne=Object.freeze({__proto__:null,Colors:fte,Decimation:vte,Filler:Rte,Legend:Ute,SubTitle:Wte,Title:Gte,Tooltip:ene});const nne=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function rne(t,e,n,r){const i=t.indexOf(e);if(i===-1)return nne(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const ine=(t,e)=>t===null?null:fa(Math.round(t),0,e);function aL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Kb extends Cf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Pi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:rne(r,e,Kr(n,e),this._addedLabels),ine(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return aL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Xe(Kb,"id","category"),Xe(Kb,"defaults",{ticks:{callback:aL}});function sne(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:p,includeBounds:v}=t,m=s||1,x=h-1,{min:E,max:k}=e,T=!Pi(o),A=!Pi(a),z=!Pi(c),Y=(k-E)/(p+1);let ne=t3((k-E)/x/m)*m,ge,pe,O,j;if(ne<1e-14&&!T&&!A)return[{value:E},{value:k}];j=Math.ceil(k/ne)-Math.floor(E/ne),j>x&&(ne=t3(j*ne/x/m)*m),Pi(l)||(ge=Math.pow(10,l),ne=Math.ceil(ne*ge)/ge),i==="ticks"?(pe=Math.floor(E/ne)*ne,O=Math.ceil(k/ne)*ne):(pe=E,O=k),T&&A&&s&&eJ((a-o)/s,ne/1e3)?(j=Math.round(Math.min((a-o)/ne,h)),ne=(a-o)/j,pe=o,O=a):z?(pe=T?o:pe,O=A?a:O,j=c-1,ne=(O-pe)/j):(j=(O-pe)/ne,Jg(j,Math.round(j),ne/1e3)?j=Math.round(j):j=Math.ceil(j));const J=Math.max(n3(ne),n3(pe));ge=Math.pow(10,Pi(l)?J:l),pe=Math.round(pe*ge)/ge,O=Math.round(O*ge)/ge;let V=0;for(T&&(v&&pe!==o?(n.push({value:o}),pe<o&&V++,Jg(Math.round((pe+V*ne)*ge)/ge,o,lL(o,Y,t))&&V++):pe<o&&V++);V<j;++V){const B=Math.round((pe+V*ne)*ge)/ge;if(A&&B>a)break;n.push({value:B})}return A&&v&&O!==a?n.length&&Jg(n[n.length-1].value,a,lL(a,Y,t))?n[n.length-1].value=a:n.push({value:a}):(!A||O===a)&&n.push({value:O}),n}function lL(t,e,{horizontal:n,minRotation:r}){const i=yc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ly extends Cf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Pi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Qc(i),c=Qc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=sne(i,s);return e.bounds==="ticks"&&LP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Rm(e,this.chart.options.locale,this.options.ticks.format)}}class Zb extends ly{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=mo(e)?e:0,this.max=mo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=yc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Xe(Zb,"id","linear"),Xe(Zb,"defaults",{ticks:{callback:Wy.formatters.numeric}});const Sm=t=>Math.floor(fh(t)),Xh=(t,e)=>Math.pow(10,Sm(t)+e);function uL(t){return t/Math.pow(10,Sm(t))===1}function cL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function one(t,e){const n=e-t;let r=Sm(n);for(;cL(t,e,r)>10;)r++;for(;cL(t,e,r)<10;)r--;return Math.min(r,Sm(t))}function ane(t,{min:e,max:n}){e=pu(t.min,e);const r=[],i=Sm(e);let s=one(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-h)/Math.pow(10,s)),v=pu(t.min,Math.round((l+h+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:uL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+h+p*Math.pow(10,s))*o)/o;const m=pu(t.max,v);return r.push({value:m,major:uL(m),significand:p}),r}class Xb extends Cf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ly.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return mo(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=mo(e)?Math.max(0,e):null,this.max=mo(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!mo(this._userMin)&&(this.min=e===Xh(this.min,0)?Xh(this.min,-1):Xh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Xh(r,-1)),o(Xh(i,1)))),r<=0&&s(Xh(i,-1)),i<=0&&o(Xh(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=ane(n,this);return e.bounds==="ticks"&&LP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Rm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fh(e),this._valueRange=fh(this.max)-fh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Xe(Xb,"id","logarithmic"),Xe(Xb,"defaults",{ticks:{callback:Wy.formatters.logarithmic,major:{enabled:!0}}});function Jb(t){const e=t.ticks;if(e.display&&t.display){const n=nl(e.backdropPadding);return Kr(e.font&&e.font.size,vo.font.size)+n.height}return 0}function lne(t,e,n){return n=Bs(n)?n:[n],{w:vJ(t,e.string,n),h:n.length*e.lineHeight}}function dL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function une(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ls/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+i[l],a),p=Jo(c.font),v=lne(t.ctx,p,t._pointLabels[l]);r[l]=v;const m=gu(t.getIndexAngle(l)+a),x=Math.round(Z_(m)),E=dL(x,h.x,v.w,0,180),k=dL(x,h.y,v.h,90,270);cne(n,e,m,E,k)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=fne(t,r,i)}function cne(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function dne(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Z_(gu(l.angle+To))),h=mne(l.y,a.h,c),p=pne(c),v=gne(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:v,top:h,right:v+a.w,bottom:h+a.h}}function hne(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Nd({x:n,y:r},e)||Nd({x:n,y:s},e)||Nd({x:i,y:r},e)||Nd({x:i,y:s},e))}function fne(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Jb(s)/2,additionalAngle:o?Ls/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=e[h];const p=dne(t,h,l);r.push(p),a==="auto"&&(p.visible=hne(p,c),p.visible&&(c=p))}return r}function pne(t){return t===0||t===180?"center":t<180?"left":"right"}function gne(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function mne(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function vne(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Pi(a)){const l=pf(e.borderRadius),c=nl(e.backdropPadding);t.fillStyle=a;const h=r-c.left,p=i-c.top,v=s-r+c.width,m=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),xm(t,{x:h,y:p,w:v,h:m,radius:l}),t.fill()):t.fillRect(h,p,v,m)}}function yne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));vne(n,o,s);const a=Jo(o.font),{x:l,y:c,textAlign:h}=s;wf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function pM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,xs);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function bne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),pM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function _ne(t,e,n){return Ah(t,{label:n,index:e,type:"pointLabel"})}class Dg extends ly{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=nl(Jb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=mo(e)&&!isNaN(e)?e:0,this.max=mo(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jb(this.options))}generateTickLabels(e){ly.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=gs(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?une(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=xs/(this._pointLabels.length||1),r=this.options.startAngle||0;return gu(e*n+yc(r))}getDistanceFromCenterForValue(e){if(Pi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Pi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return _ne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-To+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),pM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&yne(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(p),m=i.setContext(v),x=s.setContext(v);bne(this,m,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=h;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),h=Jo(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=nl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-h.size/2-p.top,o+p.width,h.size+p.height)}wf(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Xe(Dg,"id","radialLinear"),Xe(Dg,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Wy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Xe(Dg,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Xe(Dg,"descriptors",{angleLines:{_fallback:"grid"}});const Xy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hl=Object.keys(Xy);function hL(t,e){return t-e}function fL(t,e){if(Pi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),mo(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Dp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function pL(t,e,n,r){const i=Hl.length;for(let s=Hl.indexOf(t);s<i-1;++s){const o=Xy[Hl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Hl[s]}return Hl[i-1]}function wne(t,e,n,r,i){for(let s=Hl.length-1;s>=Hl.indexOf(n);s--){const o=Hl[s];if(Xy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Hl[n?Hl.indexOf(n):0]}function xne(t){for(let e=Hl.indexOf(t)+1,n=Hl.length;e<n;++e)if(Xy[Hl[e]].common)return Hl[e]}function gL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=X_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Lne(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function mL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Lne(t,r,i,n)}class Cm extends Cf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new YP._date(e.adapters.date);i.init(n),Xg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:fL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=mo(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=mo(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=iJ(i,s,o);return this._unit=n.unit||(r.autoSkip?pL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):wne(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:xne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),mL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=fa(n,0,o),r=fa(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||pL(s.minUnit,n,r,this._getLabelCapacity(n)),a=Kr(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Dp(l)||l===!0,h={};let p=n,v,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)gL(h,v,x);return(v===r||i.bounds==="ticks"||m===1)&&gL(h,v,x),Object.keys(h).sort(hL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return gs(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],p=c&&a[c],v=r[n],m=c&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=yc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,mL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(fL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return EP(e.sort(hL))}}Xe(Cm,"id","time"),Xe(Cm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function G0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Dd(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Dd(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Qb extends Cm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=G0(n,this.min),this._tableRange=G0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(G0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return G0(this._table,r*this._tableRange+this._minPos,!0)}}Xe(Qb,"id","timeseries"),Xe(Qb,"defaults",Cm.defaults);var Sne=Object.freeze({__proto__:null,CategoryScale:Kb,LinearScale:Zb,LogarithmicScale:Xb,RadialLinearScale:Dg,TimeScale:Cm,TimeSeriesScale:Qb});const Cne=[DQ,ate,tne,Sne];Gc.register(...Cne);const gM=6048e5,Ene=864e5,Fm=6e4,jm=36e5,Pne=1e3,vL=Symbol.for("constructDateFrom");function yo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&vL in t?t[vL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Rr(t,e){return yo(e||t,t)}function Jy(t,e,n){const r=Rr(t,n==null?void 0:n.in);return isNaN(e)?yo((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function uw(t,e,n){const r=Rr(t,n==null?void 0:n.in);if(isNaN(e))return yo(t,NaN);if(!e)return r;const i=r.getDate(),s=yo(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function cw(t,e,n){return yo(t,+Rr(t)+e)}function Mne(t,e,n){return cw(t,e*jm)}let kne={};function Ef(){return kne}function nd(t,e){var a,l,c,h;const n=Ef(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,i=Rr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Ip(t,e){return nd(t,{...e,weekStartsOn:1})}function mM(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getFullYear(),i=yo(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Ip(i),o=yo(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Ip(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function uy(t){const e=Rr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Pf(t,...e){const n=yo.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function e_(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function vM(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=e_(r),o=e_(i),a=+s-uy(s),l=+o-uy(o);return Math.round((a-l)/Ene)}function Ane(t,e){const n=mM(t,e),r=yo(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ip(r)}function Tne(t,e,n){const r=Rr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*Fm),r}function Dne(t,e,n){return uw(t,e*3,n)}function Nne(t,e,n){return cw(t,e*1e3)}function One(t,e,n){return Jy(t,e*7,n)}function Ine(t,e,n){return uw(t,e*12,n)}function nm(t,e){const n=+Rr(t)-+Rr(e);return n<0?-1:n>0?1:n}function Bne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function yM(t){return!(!Bne(t)&&typeof t!="number"||isNaN(+Rr(t)))}function Rne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Fne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function bM(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=yL(r,i),o=Math.abs(vM(r,i));r.setDate(r.getDate()-s*o);const a=+(yL(r,i)===-s),l=s*(o-a);return l===0?0:l}function yL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function zm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function jne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=(+r-+i)/jm;return zm(n==null?void 0:n.roundingMethod)(s)}function dw(t,e){return+Rr(t)-+Rr(e)}function zne(t,e,n){const r=dw(t,e)/Fm;return zm(n==null?void 0:n.roundingMethod)(r)}function _M(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function wM(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function $ne(t,e){const n=Rr(t,e==null?void 0:e.in);return+_M(n,e)==+wM(n,e)}function xM(t,e,n){const[r,i,s]=Pf(n==null?void 0:n.in,t,t,e),o=nm(i,s),a=Math.abs(Rne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=nm(i,s)===-o;$ne(r)&&a===1&&nm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Vne(t,e,n){const r=xM(t,e,n)/3;return zm(n==null?void 0:n.roundingMethod)(r)}function Une(t,e,n){const r=dw(t,e)/1e3;return zm(n==null?void 0:n.roundingMethod)(r)}function Hne(t,e,n){const r=bM(t,e,n)/7;return zm(n==null?void 0:n.roundingMethod)(r)}function Gne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=nm(r,i),o=Math.abs(Fne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=nm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Wne(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function qne(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Yne(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function LM(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Kne(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Zne(t,e){var a,l;const n=Ef(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Rr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Xne(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Jne(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Qne(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const ere={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tre=(t,e,n)=>{let r;const i=ere[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function T2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const nre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ire={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sre={date:T2({formats:nre,defaultWidth:"full"}),time:T2({formats:rre,defaultWidth:"full"}),dateTime:T2({formats:ire,defaultWidth:"full"})},ore={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},are=(t,e,n,r)=>ore[t];function pg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const lre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ure={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pre=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},gre={ordinalNumber:pre,era:pg({values:lre,defaultWidth:"wide"}),quarter:pg({values:ure,defaultWidth:"wide",argumentCallback:t=>t-1}),month:pg({values:cre,defaultWidth:"wide"}),day:pg({values:dre,defaultWidth:"wide"}),dayPeriod:pg({values:hre,defaultWidth:"wide",formattingValues:fre,defaultFormattingWidth:"wide"})};function gg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?vre(a,p=>p.test(o)):mre(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function mre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function vre(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function yre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const bre=/^(\d+)(th|st|nd|rd)?/i,_re=/\d+/i,wre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xre={any:[/^b/i,/^(a|c)/i]},Lre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sre={any:[/1/i,/2/i,/3/i,/4/i]},Cre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ere={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Are={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tre={ordinalNumber:yre({matchPattern:bre,parsePattern:_re,valueCallback:t=>parseInt(t,10)}),era:gg({matchPatterns:wre,defaultMatchWidth:"wide",parsePatterns:xre,defaultParseWidth:"any"}),quarter:gg({matchPatterns:Lre,defaultMatchWidth:"wide",parsePatterns:Sre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:gg({matchPatterns:Cre,defaultMatchWidth:"wide",parsePatterns:Ere,defaultParseWidth:"any"}),day:gg({matchPatterns:Pre,defaultMatchWidth:"wide",parsePatterns:Mre,defaultParseWidth:"any"}),dayPeriod:gg({matchPatterns:kre,defaultMatchWidth:"any",parsePatterns:Are,defaultParseWidth:"any"})},SM={code:"en-US",formatDistance:tre,formatLong:sre,formatRelative:are,localize:gre,match:Tre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dre(t,e){const n=Rr(t,e==null?void 0:e.in);return vM(n,LM(n))+1}function CM(t,e){const n=Rr(t,e==null?void 0:e.in),r=+Ip(n)-+Ane(n);return Math.round(r/gM)+1}function hw(t,e){var h,p,v,m;const n=Rr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ef(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=yo((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=nd(o,e),l=yo((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=nd(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Nre(t,e){var a,l,c,h;const n=Ef(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,i=hw(t,e),s=yo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),nd(s,e)}function EM(t,e){const n=Rr(t,e==null?void 0:e.in),r=+nd(n,e)-+Nre(n,e);return Math.round(r/gM)+1}function qi(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Qd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return qi(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):qi(n+1,2)},d(t,e){return qi(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return qi(t.getHours()%12||12,e.length)},H(t,e){return qi(t.getHours(),e.length)},m(t,e){return qi(t.getMinutes(),e.length)},s(t,e){return qi(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return qi(i,e.length)}},ep={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Qd.y(t,e)},Y:function(t,e,n,r){const i=hw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return qi(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):qi(s,e.length)},R:function(t,e){const n=mM(t);return qi(n,e.length)},u:function(t,e){const n=t.getFullYear();return qi(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qi(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qi(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Qd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return qi(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=EM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):qi(i,e.length)},I:function(t,e,n){const r=CM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):qi(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Qd.d(t,e)},D:function(t,e,n){const r=Dre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):qi(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return qi(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return qi(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return qi(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ep.noon:r===0?i=ep.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ep.evening:r>=12?i=ep.afternoon:r>=4?i=ep.morning:i=ep.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Qd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):qi(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):qi(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Qd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Qd.s(t,e)},S:function(t,e){return Qd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return wL(r);case"XXXX":case"XX":return nf(r);case"XXXXX":case"XXX":default:return nf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return wL(r);case"xxxx":case"xx":return nf(r);case"xxxxx":case"xxx":default:return nf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_L(r,":");case"OOOO":default:return"GMT"+nf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_L(r,":");case"zzzz":default:return"GMT"+nf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return qi(r,e.length)},T:function(t,e,n){return qi(+t,e.length)}};function _L(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+qi(s,2)}function wL(t,e){return t%60===0?(t>0?"-":"+")+qi(Math.abs(t)/60,2):nf(t,e)}function nf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=qi(Math.trunc(r/60),2),s=qi(r%60,2);return n+i+e+s}const xL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ore=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return xL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",xL(r,e)).replace("{{time}}",PM(i,e))},t_={p:PM,P:Ore},Ire=/^D+$/,Bre=/^Y+$/,Rre=["D","DD","YY","YYYY"];function MM(t){return Ire.test(t)}function kM(t){return Bre.test(t)}function n_(t,e,n){const r=Fre(t,e,n);if(console.warn(r),Rre.includes(t))throw new RangeError(r)}function Fre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$re=/^'([^]*?)'?$/,Vre=/''/g,Ure=/[a-zA-Z]/;function Hre(t,e,n){var h,p,v,m,x,E,k,T;const r=Ef(),i=(n==null?void 0:n.locale)??r.locale??SM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((T=(k=r.locale)==null?void 0:k.options)==null?void 0:T.weekStartsOn)??0,a=Rr(t,n==null?void 0:n.in);if(!yM(a))throw new RangeError("Invalid time value");let l=e.match(zre).map(A=>{const z=A[0];if(z==="p"||z==="P"){const Y=t_[z];return Y(A,i.formatLong)}return A}).join("").match(jre).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const z=A[0];if(z==="'")return{isToken:!1,value:Gre(A)};if(bL[z])return{isToken:!0,value:A};if(z.match(Ure))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:A}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(A=>{if(!A.isToken)return A.value;const z=A.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&kM(z)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&MM(z))&&n_(z,e,String(t));const Y=bL[z[0]];return Y(a,z,i.localize,c)}).join("")}function Gre(t){const e=t.match($re);return e?e[1].replace(Vre,"'"):t}function Wre(){return Object.assign({},Ef())}function qre(t,e){const n=Rr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Yre(t,e){const n=Kre(e)?new e(0):yo(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Kre(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Zre=10;class AM{constructor(){Xe(this,"subPriority",0)}validate(e,n){return!0}}class Xre extends AM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Jre extends AM{constructor(n,r){super();Xe(this,"priority",Zre);Xe(this,"subPriority",-1);this.context=n||(i=>yo(r,i))}set(n,r){return r.timestampIsSet?n:yo(n,Yre(n,this.context))}}class Fi{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Xre(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Qre extends Fi{constructor(){super(...arguments);Xe(this,"priority",140);Xe(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Do={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Wc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function No(t,e){return t&&{value:e(t.value),rest:t.rest}}function Qs(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*jm+s*Fm+o*Pne),rest:e.slice(n[0].length)}}function TM(t){return Qs(Do.anyDigitsSigned,t)}function bo(t,e){switch(t){case 1:return Qs(Do.singleDigit,e);case 2:return Qs(Do.twoDigits,e);case 3:return Qs(Do.threeDigits,e);case 4:return Qs(Do.fourDigits,e);default:return Qs(new RegExp("^\\d{1,"+t+"}"),e)}}function cy(t,e){switch(t){case 1:return Qs(Do.singleDigitSigned,e);case 2:return Qs(Do.twoDigitsSigned,e);case 3:return Qs(Do.threeDigitsSigned,e);case 4:return Qs(Do.fourDigitsSigned,e);default:return Qs(new RegExp("^-?\\d{1,"+t+"}"),e)}}function fw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function DM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function NM(t){return t%400===0||t%4===0&&t%100!==0}class eie extends Fi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return No(bo(4,n),s);case"yo":return No(i.ordinalNumber(n,{unit:"year"}),s);default:return No(bo(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=DM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class tie extends Fi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return No(bo(4,n),s);case"Yo":return No(i.ordinalNumber(n,{unit:"year"}),s);default:return No(bo(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=hw(n,s);if(i.isTwoDigitYear){const l=DM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nd(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nd(n,s)}}class nie extends Fi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return cy(r==="R"?4:r.length,n)}set(n,r,i){const s=yo(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Ip(s)}}class rie extends Fi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return cy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class iie extends Fi{constructor(){super(...arguments);Xe(this,"priority",120);Xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return bo(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class sie extends Fi{constructor(){super(...arguments);Xe(this,"priority",120);Xe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return bo(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class oie extends Fi{constructor(){super(...arguments);Xe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Xe(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return No(Qs(Do.month,n),s);case"MM":return No(bo(2,n),s);case"Mo":return No(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class aie extends Fi{constructor(){super(...arguments);Xe(this,"priority",110);Xe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return No(Qs(Do.month,n),s);case"LL":return No(bo(2,n),s);case"Lo":return No(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function lie(t,e,n){const r=Rr(t,n==null?void 0:n.in),i=EM(r,n)-e;return r.setDate(r.getDate()-i*7),Rr(r,n==null?void 0:n.in)}class uie extends Fi{constructor(){super(...arguments);Xe(this,"priority",100);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Qs(Do.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return bo(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return nd(lie(n,i,s),s)}}function cie(t,e,n){const r=Rr(t,n==null?void 0:n.in),i=CM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class die extends Fi{constructor(){super(...arguments);Xe(this,"priority",100);Xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Qs(Do.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return bo(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Ip(cie(n,i))}}const hie=[31,28,31,30,31,30,31,31,30,31,30,31],fie=[31,29,31,30,31,30,31,31,30,31,30,31];class pie extends Fi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"subPriority",1);Xe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Qs(Do.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return bo(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=NM(i),o=n.getMonth();return s?r>=1&&r<=fie[o]:r>=1&&r<=hie[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class gie extends Fi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"subpriority",1);Xe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Qs(Do.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return bo(r.length,n)}}validate(n,r){const i=n.getFullYear();return NM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function pw(t,e,n){var p,v,m,x;const r=Ef(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,s=Rr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,h=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Jy(s,h,n)}class mie extends Fi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class vie extends Fi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return No(bo(r.length,n),o);case"eo":return No(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class yie extends Fi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return No(bo(r.length,n),o);case"co":return No(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}function bie(t,e,n){const r=Rr(t,n==null?void 0:n.in),i=qre(r,n),s=e-i;return Jy(r,s,n)}class _ie extends Fi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return bo(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return No(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return No(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return No(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return No(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=bie(n,i),n.setHours(0,0,0,0),n}}class wie extends Fi{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class xie extends Fi{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Lie extends Fi{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Sie extends Fi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Qs(Do.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return bo(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Cie extends Fi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Qs(Do.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return bo(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Eie extends Fi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Qs(Do.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return bo(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Pie extends Fi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Qs(Do.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return bo(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Mie extends Fi{constructor(){super(...arguments);Xe(this,"priority",60);Xe(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Qs(Do.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return bo(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class kie extends Fi{constructor(){super(...arguments);Xe(this,"priority",50);Xe(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Qs(Do.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return bo(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Aie extends Fi{constructor(){super(...arguments);Xe(this,"priority",30);Xe(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return No(bo(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Tie extends Fi{constructor(){super(...arguments);Xe(this,"priority",10);Xe(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qc(Wc.basicOptionalMinutes,n);case"XX":return qc(Wc.basic,n);case"XXXX":return qc(Wc.basicOptionalSeconds,n);case"XXXXX":return qc(Wc.extendedOptionalSeconds,n);case"XXX":default:return qc(Wc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:yo(n,n.getTime()-uy(n)-i)}}class Die extends Fi{constructor(){super(...arguments);Xe(this,"priority",10);Xe(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qc(Wc.basicOptionalMinutes,n);case"xx":return qc(Wc.basic,n);case"xxxx":return qc(Wc.basicOptionalSeconds,n);case"xxxxx":return qc(Wc.extendedOptionalSeconds,n);case"xxx":default:return qc(Wc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:yo(n,n.getTime()-uy(n)-i)}}class Nie extends Fi{constructor(){super(...arguments);Xe(this,"priority",40);Xe(this,"incompatibleTokens","*")}parse(n){return TM(n)}set(n,r,i){return[yo(n,i*1e3),{timestampIsSet:!0}]}}class Oie extends Fi{constructor(){super(...arguments);Xe(this,"priority",20);Xe(this,"incompatibleTokens","*")}parse(n){return TM(n)}set(n,r,i){return[yo(n,i),{timestampIsSet:!0}]}}const Iie={G:new Qre,y:new eie,Y:new tie,R:new nie,u:new rie,Q:new iie,q:new sie,M:new oie,L:new aie,w:new uie,I:new die,d:new pie,D:new gie,E:new mie,e:new vie,c:new yie,i:new _ie,a:new wie,b:new xie,B:new Lie,h:new Sie,H:new Cie,K:new Eie,k:new Pie,m:new Mie,s:new kie,S:new Aie,X:new Tie,x:new Die,t:new Nie,T:new Oie},Bie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fie=/^'([^]*?)'?$/,jie=/''/g,zie=/\S/,$ie=/[a-zA-Z]/;function Vie(t,e,n,r){var k,T,A,z,Y,ne,ge,pe;const i=()=>yo((r==null?void 0:r.in)||n,NaN),s=Wre(),o=(r==null?void 0:r.locale)??s.locale??SM,a=(r==null?void 0:r.firstWeekContainsDate)??((T=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:T.firstWeekContainsDate)??s.firstWeekContainsDate??((z=(A=s.locale)==null?void 0:A.options)==null?void 0:z.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((ne=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:ne.weekStartsOn)??s.weekStartsOn??((pe=(ge=s.locale)==null?void 0:ge.options)==null?void 0:pe.weekStartsOn)??0;if(!e)return t?i():Rr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new Jre(r==null?void 0:r.in,n)],p=e.match(Rie).map(O=>{const j=O[0];if(j in t_){const J=t_[j];return J(O,o.formatLong)}return O}).join("").match(Bie),v=[];for(let O of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&kM(O)&&n_(O,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&MM(O)&&n_(O,e,t);const j=O[0],J=Iie[j];if(J){const{incompatibleTokens:V}=J;if(Array.isArray(V)){const H=v.find($=>V.includes($.token)||$.token===j);if(H)throw new RangeError(`The format string mustn't contain \`${H.fullToken}\` and \`${O}\` at the same time`)}else if(J.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);v.push({token:j,fullToken:O});const B=J.run(t,O,o.match,c);if(!B)return i();h.push(B.setter),t=B.rest}else{if(j.match($ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(O==="''"?O="'":j==="'"&&(O=Uie(O)),t.indexOf(O)===0)t=t.slice(O.length);else return i()}}if(t.length>0&&zie.test(t))return i();const m=h.map(O=>O.priority).sort((O,j)=>j-O).filter((O,j,J)=>J.indexOf(O)===j).map(O=>h.filter(j=>j.priority===O).sort((j,J)=>J.subPriority-j.subPriority)).map(O=>O[0]);let x=Rr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const O of m){if(!O.validate(x,c))return i();const j=O.set(x,E,c);Array.isArray(j)?(x=j[0],Object.assign(E,j[1])):x=j}return x}function Uie(t){return t.match(Fie)[1].replace(jie,"'")}function Hie(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Gie(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Wie(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function qie(t,e){const n=()=>yo(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Xie(t);let s;if(i.date){const c=Jie(i.date,r);s=Qie(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=ese(i.time),isNaN(a)))return n();if(i.timezone){if(l=tse(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),h=Rr(0,e==null?void 0:e.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return Rr(o+a+l,e==null?void 0:e.in)}const W0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Yie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Kie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Zie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Xie(t){const e={},n=t.split(W0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],W0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(W0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=W0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Jie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Qie(t,e){if(e===null)return new Date(NaN);const n=t.match(Yie);if(!n)return new Date(NaN);const r=!!n[4],i=mg(n[1]),s=mg(n[2])-1,o=mg(n[3]),a=mg(n[4]),l=mg(n[5])-1;if(r)return ose(e,a,l)?nse(e,a,l):new Date(NaN);{const c=new Date(0);return!ise(e,s,o)||!sse(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function mg(t){return t?parseInt(t):1}function ese(t){const e=t.match(Kie);if(!e)return NaN;const n=D2(e[1]),r=D2(e[2]),i=D2(e[3]);return ase(n,r,i)?n*jm+r*Fm+i*1e3:NaN}function D2(t){return t&&parseFloat(t.replace(",","."))||0}function tse(t){if(t==="Z")return 0;const e=t.match(Zie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return lse(r,i)?n*(r*jm+i*Fm):NaN}function nse(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const rse=[31,null,31,30,31,30,31,31,30,31,30,31];function OM(t){return t%400===0||t%4===0&&t%100!==0}function ise(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(rse[e]||(OM(t)?29:28))}function sse(t,e){return e>=1&&e<=(OM(t)?366:365)}function ose(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function ase(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function lse(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const use={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};YP._date.override({_id:"date-fns",formats:function(){return use},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Rr(t):n==="string"&&(typeof e=="string"?t=Vie(t,e,new Date,this.options):t=qie(t,this.options)),yM(t)?t.getTime():null},format:function(t,e){return Hre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return cw(t,e);case"second":return Nne(t,e);case"minute":return Tne(t,e);case"hour":return Mne(t,e);case"day":return Jy(t,e);case"week":return One(t,e);case"month":return uw(t,e);case"quarter":return Dne(t,e);case"year":return Ine(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return dw(t,e);case"second":return Une(t,e);case"minute":return zne(t,e);case"hour":return jne(t,e);case"day":return bM(t,e);case"week":return Hne(t,e);case"month":return xM(t,e);case"quarter":return Vne(t,e);case"year":return Gne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Wie(t);case"minute":return Gie(t);case"hour":return Hie(t);case"day":return e_(t);case"week":return nd(t);case"isoWeek":return nd(t,{weekStartsOn:+n});case"month":return qne(t);case"quarter":return Wne(t);case"year":return LM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Qne(t);case"minute":return Xne(t);case"hour":return Kne(t);case"day":return _M(t);case"week":return Zne(t);case"month":return wM(t);case"quarter":return Jne(t);case"year":return Yne(t);default:return t}}});const cse={class:"container mx-auto px-4 py-8"},dse={class:"mb-8"},hse={key:0,class:"mb-6"},fse={class:"flex gap-4"},pse=["disabled"],gse={key:0,value:""},mse=["value"],vse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},yse={class:"flex"},bse={class:"ml-3"},_se={class:"text-sm font-medium text-red-800"},wse={class:"mb-6"},xse={class:"flex gap-4"},Lse=["disabled"],Sse={key:0,value:""},Cse={key:1,value:""},Ese=["value"],Pse=["disabled"],Mse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},kse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Ase={class:"font-medium"},Tse={class:"font-medium"},Dse={class:"font-medium"},Nse={class:"font-medium"},Ose={class:"font-medium"},Ise={class:"font-medium"},Bse={class:"md:col-span-2 lg:col-span-3 flex items-center"},Rse=["href"],Fse={class:"mb-6"},jse={class:"border-b border-gray-200"},zse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},$se=["onClick"],Vse={key:2,class:"mb-8"},Use={class:"text-sm text-gray-600 mb-4"},Hse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Gse={class:"bg-white rounded-lg shadow-md p-6"},Wse={class:"text-4xl font-bold text-primary-600 mb-2"},qse={class:"text-sm text-gray-600"},Yse={class:"bg-white rounded-lg shadow-md p-6"},Kse={class:"text-4xl font-bold text-primary-600 mb-2"},Zse={class:"mt-4"},Xse={class:"w-full bg-gray-200 rounded-full h-2.5"},Jse={class:"bg-white rounded-lg shadow-md p-6"},Qse={class:"text-4xl font-bold text-primary-600 mb-2"},eoe={class:"text-sm text-gray-600"},toe={class:"bg-white rounded-lg shadow-md p-6"},noe={class:"text-4xl font-bold text-primary-600 mb-2"},roe={class:"text-sm text-gray-600"},ioe={class:"bg-white rounded-lg shadow-md p-6"},soe={class:"text-4xl font-bold text-primary-600 mb-2"},ooe={class:"text-sm text-gray-600"},aoe={class:"bg-white rounded-lg shadow-md p-6"},loe={class:"text-4xl font-bold text-primary-600 mb-2"},uoe={class:"text-sm text-gray-600"},coe={key:3,class:"mb-8"},doe={class:"flex justify-between items-center mb-4"},hoe={class:"flex items-center gap-4"},foe={key:0,class:"text-sm text-gray-600"},poe=["disabled"],goe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},moe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},voe=["value"],yoe={key:0,class:"mt-1 text-sm text-red-600"},boe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},_oe={class:"bg-white rounded-lg shadow-md p-6"},woe={class:"chart-container"},xoe={class:"bg-white rounded-lg shadow-md p-6"},Loe={class:"chart-container"},Soe={class:"bg-white rounded-lg shadow-md p-6"},Coe={class:"chart-container"},Eoe={class:"bg-white rounded-lg shadow-md p-6"},Poe={class:"chart-container"},Moe={class:"bg-white rounded-lg shadow-md p-6"},koe={class:"chart-container"},Aoe={class:"bg-white rounded-lg shadow-md p-6"},Toe={class:"chart-container"},Doe=Ss({__name:"MeteoView",setup(t){const e=Kl(),n=to(),r=Lt({}),i=Lt(new Date),s=Lt(""),o=Lt([]),a=Lt(""),l=Lt([]),c=Lt(null),h=Lt(""),p=Lt(""),v=Un(()=>n.isAdmin);let m=null;const x=Un(()=>!a.value||!o.value.length?null:o.value.find(ee=>ee.mac===a.value));function E(ee){return ee?ee.latitude&&ee.longitude&&ee.latitude!==0&&ee.longitude!==0:!1}function k(ee){return E(ee)?`${ee.latitude.toFixed(6)}, ${ee.longitude.toFixed(6)}`:""}function T(ee){if(!E(ee))return"#";const oe=ee.latitude,le=ee.longitude,ze=encodeURIComponent(ee.name||"Station mto");return`https://www.google.com/maps/search/?api=1&query=${oe},${le}&query_place_id=${ze}`}async function A(){try{h.value="";const ee={};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",ee);const oe=await H1.getDevices(ee);console.log("[fetchDevices] Rponse API:",oe.data);let le;if(oe.data&&oe.data.devices)le=oe.data.devices;else if(Array.isArray(oe.data))le=oe.data;else if(le=[],typeof oe.data=="object"&&oe.data!==null){for(const ze in oe.data)if(Array.isArray(oe.data[ze])){le=oe.data[ze];break}}o.value=le.map(ze=>{var $e,Je;return{id:ze.id,name:ze.name||`Station ${ze.mac}`,mac:ze.mac,model:(($e=ze.stationtype)==null?void 0:$e.split("_")[0])||"Inconnu",firmware_version:(Je=ze.stationtype)!=null&&Je.includes("_V")?ze.stationtype.split("_V")[1]:"1.0",timezone:ze.date_zone_id||"UTC",created_at:ze.createtime?new Date(ze.createtime*1e3).toISOString():new Date().toISOString(),latitude:ze.latitude||0,longitude:ze.longitude||0}}),console.log("[fetchDevices] Appareils normaliss:",o.value),o.value.length>0?(a.value=o.value[0].mac,await z()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(ee){console.error("[fetchDevices] Erreur lors de la rcupration des appareils:",ee),ee.response&&ee.response.data&&ee.response.data.error?h.value=ee.response.data.error:(h.value="Erreur lors de la rcupration des stations mto",e.error("Erreur lors de la rcupration des stations mto")),o.value=[],a.value="",r.value={}}}async function z(){if(a.value)try{h.value="";const ee={mac:a.value};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",ee);const oe=await H1.getRealTimeData(ee);console.log("[fetchWeatherData] Rponse API:",oe.data),console.log("[fetchWeatherData] Structure de la rponse:",{hasData:oe.data&&"data"in oe.data,hasCode:oe.data&&"code"in oe.data,topLevelKeys:oe.data?Object.keys(oe.data):[]});let le;oe.data&&"data"in oe.data?le=oe.data.data:oe.data&&("outdoor"in oe.data||"indoor"in oe.data)?le=oe.data:(le={},console.warn("[fetchWeatherData] Format de rponse non reconnu")),r.value=le,i.value=new Date,console.log("[fetchWeatherData] Donnes mto extraites:",r.value)}catch(ee){console.error("[fetchWeatherData] Erreur:",ee),ee.response&&ee.response.data&&ee.response.data.error?h.value=ee.response.data.error:(h.value="Erreur lors de la rcupration des donnes mto",e.error("Erreur lors de la rcupration des donnes mto")),r.value={}}}function Y(ee){if(ee==null)return"0";const oe=typeof ee=="string"?parseFloat(ee):ee;return isNaN(oe)?"0":((oe-32)*5/9).toFixed(1)}function ne(ee){if(ee==null)return"0";const oe=typeof ee=="string"?parseFloat(ee):ee;return isNaN(oe)?"0":(oe*1.60934).toFixed(1)}function ge(ee){if(ee==null)return"0";const oe=typeof ee=="string"?parseFloat(ee):ee;return isNaN(oe)?"0":(oe*25.4).toFixed(1)}function pe(ee){if(ee==null)return"0";const oe=typeof ee=="string"?parseFloat(ee):ee;return isNaN(oe)?"0":(oe*33.8639).toFixed(1)}function O(ee){if(!ee)return"N/A";const oe=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],le=Math.round(ee/22.5)%16;return oe[le]}function j(ee){return ee?ee>0?"En hausse":"En baisse":"Stable"}async function J(){if(v.value)try{const ee=await Ya.getUsers({role:"ENTREPRISE"});l.value=ee.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ee){console.error("Erreur lors de la rcupration des entreprises:",ee),e.error("Erreur lors de la rcupration des entreprises")}}async function V(){try{o.value=[],a.value="",r.value={},h.value="",Object.values(ye).forEach(ee=>{try{ee.destroy()}catch(oe){console.error("Erreur lors de la destruction d'un graphique:",oe)}}),ye={},await A()}catch(ee){console.error("Erreur lors de la rcupration des appareils avec l'entreprise:",ee),e.error("Erreur lors du changement d'entreprise")}}const B=[{id:"realtime",name:"Temps rel"},{id:"history",name:"Historique"}],H=Lt("realtime"),$=Lt("today"),R=Lt("5min"),I=Lt(""),X=Lt(""),K=()=>{const ee=new Date,oe=new Date(ee);oe.setDate(ee.getDate()-1),I.value=oe.toISOString().split("T")[0],X.value=oe.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],ve=Un(()=>{const ee=he(),oe=new Date(ee.start),le=new Date(ee.end);le.setHours(23,59,59,999);const ze=Math.abs(le.getTime()-oe.getTime()),$e=Math.ceil(ze/(1e3*60*60*24)),Me=Math.abs(new Date().getTime()-oe.getTime()),me=Math.ceil(Me/(1e3*60*60*24));return _e.filter(qe=>$e<=qe.maxDays&&me<=qe.maxPastDays)});fi($,ee=>{ee==="custom"&&K(),!ve.value.some(le=>le.value===R.value)&&ve.value.length>0&&(R.value=ve.value[0].value)}),fi([I,X],()=>{$.value==="custom"&&!ve.value.some(oe=>oe.value===R.value)&&ve.value.length>0&&(R.value=ve.value[0].value)});const Ge=Lt(null),se=Lt(null),q=Lt(null),Z=Lt(null),ie=Lt(null),de=Lt(null);let ye={};const he=()=>{let ee=new Date,oe=new Date;switch($.value){case"today":ee.setHours(0,0,0,0);break;case"yesterday":ee.setDate(ee.getDate()-1),ee.setHours(0,0,0,0),oe.setDate(oe.getDate()-1),oe.setHours(23,59,59,999);break;case"week":ee.setDate(ee.getDate()-7);break;case"month":ee.setDate(ee.getDate()-30);break;case"custom":ee=new Date(I.value),oe=new Date(X.value);break}return{start:ee.toISOString().split("T")[0],end:oe.toISOString().split("T")[0]}},Q=async()=>{try{if(Ae.value){console.log("[updateAllCharts] Mise  jour dj en cours, annulation");return}if(Ae.value=!0,ve.value.length===0){e.warning("Aucun intervalle disponible pour cette priode"),Ae.value=!1;return}ve.value.some(ze=>ze.value===R.value)||(R.value=ve.value[0].value),console.log("[updateAllCharts] Dbut de la mise  jour des graphiques");const oe=he(),le={mac:a.value,start_date:oe.start,end_date:oe.end,cycle_type:R.value};v.value&&c.value&&(le.entreprise=c.value),console.log("[updateAllCharts] Rcupration des donnes historiques:",le);try{const $e=(await H1.getHistoryData(le)).data;console.log("[updateAllCharts] Donnes historiques reues:",$e);const Je=[{type:"temp",ref:Ge},{type:"humidity",ref:se},{type:"pressure",ref:q},{type:"wind",ref:Z},{type:"rain",ref:ie},{type:"solar",ref:de}];for(const Me of Je)if(console.log(`[updateAllCharts] Mise  jour du graphique ${Me.type}`),Me.ref.value){const me=fe($e,Me.type);De(Me.type,Me.ref.value,me)}s.value=new Date().toLocaleString()}catch(ze){console.error("[updateAllCharts] Erreur lors de la rcupration des donnes:",ze),e.error("Erreur lors de la rcupration des donnes historiques")}finally{Ae.value=!1}}catch(ee){console.error("[updateAllCharts] Erreur lors de la mise  jour des graphiques:",ee),e.error("Erreur lors de la mise  jour des graphiques"),Ae.value=!1}},Ae=Lt(!1),De=(ee,oe,le)=>{try{if(ye[ee]&&(ye[ee].destroy(),delete ye[ee]),console.log(`[updateChart] Donnes reues pour ${ee}:`,le),!le.datasets||!le.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ee}`),ye[ee]=new Gc(oe,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donne disponible"}}}});return}let ze="hour";R.value==="5min"||R.value==="30min"?ze="hour":(R.value==="4hour"||R.value==="1day")&&(ze="day");const $e=he(),Je=new Date($e.start),Me=new Date($e.end);Me.setHours(23,59,59,999);const me={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(qe){return qe.length>0?new Date(qe[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:ze,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:Je.getTime(),max:Me.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:Ke(ee)},ticks:{callback:function(qe){const ct=typeof qe=="string"?parseFloat(qe):qe;switch(ee){case"temp":return ct.toFixed(1)+"C";case"humidity":return ct.toFixed(0)+"%";case"pressure":return ct.toFixed(0)+" hPa";case"wind":case"rain":return ct.toFixed(1)+(ee==="wind"?" km/h":" mm");case"solar":return ct.toFixed(0)+" W/m";default:return ct}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};ye[ee]=new Gc(oe,{type:"line",data:{datasets:le.datasets||[]},options:me}),console.log(`[updateChart] Graphique ${ee} cr avec ${le.datasets.length} datasets`)}catch(ze){console.error(`[updateChart] Erreur lors de la mise  jour du graphique ${ee}:`,ze)}},Ke=ee=>{switch(ee){case"temp":return"Temprature (C)";case"humidity":return"Humidit (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Prcipitations (mm)";case"solar":return"Rayonnement (W/m)";default:return""}},fe=(ee,oe)=>{var Je,Me,me,qe,ct,ft,Mt,it,jt,hn,Ze,lt,rt,$t,Qt,Pn,wn,xn,$n;if(console.log(`[formatHistoryDataForChart] Donnes reues pour ${oe}:`,ee),!ee)return console.warn(`[formatHistoryDataForChart] Pas de donnes pour ${oe}`),null;let le;if("data"in ee)le=ee.data;else if(oe in ee)le=ee;else return console.warn(`[formatHistoryDataForChart] Structure de donnes non reconnue pour ${oe}`),null;console.log(`[formatHistoryDataForChart] Donnes extraites pour ${oe}:`,le);const ze=[],$e=(en,_n,Cn,qn)=>{if(!Array.isArray(en)){console.warn(`[formatHistoryDataForChart] Les donnes pour ${_n} ne sont pas un tableau`);return}const nr=en.map(rr=>{const Jn=parseFloat(String(rr.value));return{x:rr.time,y:qn?qn(Jn):Jn}}).filter(rr=>!isNaN(rr.y));nr.length>0&&ze.push({label:_n,data:nr,borderColor:Cn,fill:!1,tension:.4})};switch(oe){case"temp":(Me=(Je=le.outdoor)==null?void 0:Je.temperature)!=null&&Me.list?$e(Object.entries(le.outdoor.temperature.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Temprature","#FF6384",en=>(en-32)*5/9):(me=le.outdoor)!=null&&me.temperature&&$e(le.outdoor.temperature,"Temprature","#FF6384",en=>(en-32)*5/9);break;case"humidity":(ct=(qe=le.outdoor)==null?void 0:qe.humidity)!=null&&ct.list?$e(Object.entries(le.outdoor.humidity.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Humidit","#36A2EB"):(ft=le.outdoor)!=null&&ft.humidity&&$e(le.outdoor.humidity,"Humidit","#36A2EB");break;case"pressure":(it=(Mt=le.pressure)==null?void 0:Mt.absolute)!=null&&it.list?$e(Object.entries(le.pressure.absolute.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Pression","#4BC0C0",en=>en*33.8639):(jt=le.pressure)!=null&&jt.absolute&&$e(le.pressure.absolute,"Pression","#4BC0C0",en=>en*33.8639);break;case"wind":(Ze=(hn=le.wind)==null?void 0:hn.wind_speed)!=null&&Ze.list?($e(Object.entries(le.wind.wind_speed.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Vitesse du vent","#FFCE56",en=>en*1.60934),(lt=le.wind.wind_gust)!=null&&lt.list&&$e(Object.entries(le.wind.wind_gust.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Rafales","#FF9F40",en=>en*1.60934)):(rt=le.wind)!=null&&rt.wind_speed&&($e(le.wind.wind_speed,"Vitesse du vent","#FFCE56",en=>en*1.60934),le.wind.wind_gust&&$e(le.wind.wind_gust,"Rafales","#FF9F40",en=>en*1.60934));break;case"rain":(Qt=($t=le.rainfall)==null?void 0:$t.daily)!=null&&Qt.list?$e(Object.entries(le.rainfall.daily.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Prcipitations journalires","#9966FF",en=>en*25.4):(Pn=le.rainfall)!=null&&Pn.daily&&$e(le.rainfall.daily,"Prcipitations journalires","#9966FF",en=>en*25.4);break;case"solar":(xn=(wn=le.solar_and_uvi)==null?void 0:wn.solar)!=null&&xn.list?$e(Object.entries(le.solar_and_uvi.solar.list).map(([en,_n])=>({time:parseInt(en)*1e3,value:_n})),"Rayonnement solaire","#FF9F40"):($n=le.solar_and_uvi)!=null&&$n.solar&&$e(le.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets gnrs pour ${oe}:`,ze),{datasets:ze}};return Hu(()=>{Object.values(ye).forEach(ee=>ee.destroy())}),fi([$,R,I,X],()=>{H.value==="history"&&a.value&&Q()}),no(async()=>{const ee=[];v.value&&ee.push(J()),await Promise.all(ee),await A(),m=window.setInterval(z,5*60*1e3)}),fi(c,ee=>{v.value&&ee&&V()}),fi(a,ee=>{ee&&H.value==="history"&&Q()}),fi(H,ee=>{ee==="history"&&a.value&&Q()}),Hu(()=>{m&&clearInterval(m)}),(ee,oe)=>{var le,ze,$e,Je,Me,me,qe,ct,ft,Mt,it,jt,hn,Ze,lt,rt,$t,Qt,Pn,wn,xn,$n,en,_n,Cn,qn,nr,rr,Jn,Mr,as,ji,ro,Cs,ot,nt,Ht,kn;return Ne(),Be("div",cse,[S("div",dse,[oe[38]||(oe[38]=S("h1",{class:"text-3xl font-bold mb-4"},"Mto",-1)),v.value?(Ne(),Be("div",hse,[oe[6]||(oe[6]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une entreprise ",-1)),S("div",fse,[Sn(S("select",{"onUpdate:modelValue":oe[0]||(oe[0]=tn=>c.value=tn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:V},[l.value.length?Zt("",!0):(Ne(),Be("option",gse,"Chargement des entreprises...")),(Ne(!0),Be(bn,null,Hn(l.value,tn=>(Ne(),Be("option",{key:tn.id,value:tn.id},kt(tn.company_name||`${tn.first_name} ${tn.last_name}`),9,mse))),128))],40,pse),[[Ai,c.value]])])])):Zt("",!0),h.value?(Ne(),Be("div",vse,[S("div",yse,[oe[7]||(oe[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",bse,[S("h3",_se,kt(h.value),1)])])])):Zt("",!0),S("div",wse,[oe[17]||(oe[17]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une station ",-1)),S("div",xse,[Sn(S("select",{"onUpdate:modelValue":oe[1]||(oe[1]=tn=>a.value=tn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||h.value)},[!o.value.length&&!h.value?(Ne(),Be("option",Sse,"Chargement des stations...")):Zt("",!0),h.value?(Ne(),Be("option",Cse,"Aucune station disponible")):Zt("",!0),(Ne(!0),Be(bn,null,Hn(o.value,tn=>(Ne(),Be("option",{key:tn.mac,value:tn.mac},kt(tn.name)+" ("+kt(tn.model)+" - v"+kt(tn.firmware_version)+") ",9,Ese))),128))],8,Lse),[[Ai,a.value]]),S("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||h.value)}," Actualiser ",8,Pse)]),x.value?(Ne(),Be("div",Mse,[oe[16]||(oe[16]=S("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),S("div",kse,[S("div",null,[oe[8]||(oe[8]=S("span",{class:"text-gray-500"},"Modle:",-1)),S("p",Ase,kt(x.value.model),1)]),S("div",null,[oe[9]||(oe[9]=S("span",{class:"text-gray-500"},"Version:",-1)),S("p",Tse,kt(x.value.firmware_version),1)]),S("div",null,[oe[10]||(oe[10]=S("span",{class:"text-gray-500"},"ID:",-1)),S("p",Dse,kt(x.value.id),1)]),S("div",null,[oe[11]||(oe[11]=S("span",{class:"text-gray-500"},"MAC:",-1)),S("p",Nse,kt(x.value.mac),1)]),S("div",null,[oe[12]||(oe[12]=S("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),S("p",Ose,kt(x.value.timezone),1)]),S("div",null,[oe[13]||(oe[13]=S("span",{class:"text-gray-500"},"Installation:",-1)),S("p",Ise,kt(new Date(x.value.created_at).toLocaleDateString()),1)]),S("div",Bse,[oe[15]||(oe[15]=S("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Ne(),Be("a",{key:0,href:T(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[oe[14]||(oe[14]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),Gr(" "+kt(k(x.value)),1)],8,Rse)):Zt("",!0)])])])):Zt("",!0)]),S("div",Fse,[S("div",jse,[S("nav",zse,[(Ne(),Be(bn,null,Hn(B,tn=>S("button",{key:tn.id,onClick:qt=>H.value=tn.id,class:gi([H.value===tn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},kt(tn.name),11,$se)),64))])])]),H.value==="realtime"?(Ne(),Be("div",Vse,[S("p",Use," Dernire mise  jour : "+kt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),S("div",Hse,[S("div",Gse,[oe[18]||(oe[18]=S("h2",{class:"text-xl font-semibold mb-4"},"Temprature Extrieure",-1)),S("div",Wse,kt(Y((ze=(le=r.value.outdoor)==null?void 0:le.temperature)==null?void 0:ze.value))+"C ",1),S("div",qse," Min: "+kt(Y(((Je=($e=r.value.outdoor)==null?void 0:$e.temperature)==null?void 0:Je.min)||"0"))+"C Max: "+kt(Y(((me=(Me=r.value.outdoor)==null?void 0:Me.temperature)==null?void 0:me.max)||"0"))+"C ",1)]),S("div",Yse,[oe[19]||(oe[19]=S("h2",{class:"text-xl font-semibold mb-4"},"Humidit",-1)),S("div",Kse,kt(((ct=(qe=r.value.outdoor)==null?void 0:qe.humidity)==null?void 0:ct.value)||"0")+"% ",1),S("div",Zse,[S("div",Xse,[S("div",{class:"bg-primary-600 h-2.5 rounded-full",style:ql({width:`${((Mt=(ft=r.value.outdoor)==null?void 0:ft.humidity)==null?void 0:Mt.value)||0}%`})},null,4)])])]),S("div",Jse,[oe[20]||(oe[20]=S("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphrique",-1)),S("div",Qse,kt(pe((jt=(it=r.value.pressure)==null?void 0:it.absolute)==null?void 0:jt.value))+" hPa ",1),S("div",eoe," Tendance: "+kt(j((Ze=(hn=r.value.pressure)==null?void 0:hn.absolute)==null?void 0:Ze.trend)),1)]),S("div",toe,[oe[22]||(oe[22]=S("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),S("div",noe,kt(ne(((rt=(lt=r.value.wind)==null?void 0:lt.speed)==null?void 0:rt.value)||((Qt=($t=r.value.wind)==null?void 0:$t.wind_speed)==null?void 0:Qt.value)))+" km/h ",1),S("div",roe,[Gr(" Direction: "+kt(O(((wn=(Pn=r.value.wind)==null?void 0:Pn.direction)==null?void 0:wn.value)||(($n=(xn=r.value.wind)==null?void 0:xn.wind_direction)==null?void 0:$n.value)))+" ",1),oe[21]||(oe[21]=S("br",null,null,-1)),Gr(" Rafales: "+kt(ne(((_n=(en=r.value.wind)==null?void 0:en.gust)==null?void 0:_n.value)||((qn=(Cn=r.value.wind)==null?void 0:Cn.wind_gust)==null?void 0:qn.value)))+" km/h ",1)])]),S("div",ioe,[oe[24]||(oe[24]=S("h2",{class:"text-xl font-semibold mb-4"},"Prcipitations",-1)),S("div",soe,kt(ge((rr=(nr=r.value.rainfall)==null?void 0:nr.daily)==null?void 0:rr.value))+" mm ",1),S("div",ooe,[Gr(" Taux: "+kt(ge(((Mr=(Jn=r.value.rainfall)==null?void 0:Jn.rate)==null?void 0:Mr.value)||((ji=(as=r.value.rainfall)==null?void 0:as.rain_rate)==null?void 0:ji.value)))+" mm/h ",1),oe[23]||(oe[23]=S("br",null,null,-1)),Gr(" Mensuel: "+kt(ge((Cs=(ro=r.value.rainfall)==null?void 0:ro.monthly)==null?void 0:Cs.value))+" mm ",1)])]),S("div",aoe,[oe[25]||(oe[25]=S("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),S("div",loe,kt(((nt=(ot=r.value.solar_and_uvi)==null?void 0:ot.solar)==null?void 0:nt.value)||"0")+" W/m ",1),S("div",uoe," UV: "+kt(((kn=(Ht=r.value.solar_and_uvi)==null?void 0:Ht.uvi)==null?void 0:kn.value)||"0"),1)])])])):H.value==="history"?(Ne(),Be("div",coe,[S("div",doe,[oe[26]||(oe[26]=S("h2",{class:"text-xl font-semibold"},"Donnes historiques",-1)),S("div",hoe,[s.value?(Ne(),Be("div",foe," Dernire mise  jour: "+kt(s.value),1)):Zt("",!0),S("button",{onClick:Q,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,poe)])]),S("div",goe,[S("div",null,[oe[28]||(oe[28]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Priode ",-1)),Sn(S("select",{"onUpdate:modelValue":oe[2]||(oe[2]=tn=>$.value=tn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},oe[27]||(oe[27]=[Gl('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Priode personnalise</option>',5)]),512),[[Ai,$.value]])]),$.value==="custom"?(Ne(),Be("div",moe,[S("div",null,[oe[29]||(oe[29]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de dbut ",-1)),Sn(S("input",{type:"date","onUpdate:modelValue":oe[3]||(oe[3]=tn=>I.value=tn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Pr,I.value]])]),S("div",null,[oe[30]||(oe[30]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Sn(S("input",{type:"date","onUpdate:modelValue":oe[4]||(oe[4]=tn=>X.value=tn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Pr,X.value]])])])):Zt("",!0),S("div",null,[oe[31]||(oe[31]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Sn(S("select",{"onUpdate:modelValue":oe[5]||(oe[5]=tn=>R.value=tn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ne(!0),Be(bn,null,Hn(ve.value,tn=>(Ne(),Be("option",{key:tn.value,value:tn.value},kt(tn.label),9,voe))),128))],512),[[Ai,R.value]]),p.value?(Ne(),Be("div",yoe,kt(p.value),1)):Zt("",!0)])]),S("div",boe,[S("div",_oe,[oe[32]||(oe[32]=S("h3",{class:"text-lg font-semibold mb-4"},"Temprature",-1)),S("div",woe,[S("canvas",{ref_key:"tempChart",ref:Ge},null,512)])]),S("div",xoe,[oe[33]||(oe[33]=S("h3",{class:"text-lg font-semibold mb-4"},"Humidit",-1)),S("div",Loe,[S("canvas",{ref_key:"humidityChart",ref:se},null,512)])]),S("div",Soe,[oe[34]||(oe[34]=S("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),S("div",Coe,[S("canvas",{ref_key:"pressureChart",ref:q},null,512)])]),S("div",Eoe,[oe[35]||(oe[35]=S("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),S("div",Poe,[S("canvas",{ref_key:"windChart",ref:Z},null,512)])]),S("div",Moe,[oe[36]||(oe[36]=S("h3",{class:"text-lg font-semibold mb-4"},"Prcipitations",-1)),S("div",koe,[S("canvas",{ref_key:"rainChart",ref:ie},null,512)])]),S("div",Aoe,[oe[37]||(oe[37]=S("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),S("div",Toe,[S("canvas",{ref_key:"solarChart",ref:de},null,512)])])])])):Zt("",!0)])])}}}),Noe=rd(Doe,[["__scopeId","data-v-9a089f70"]]),IM=KB({history:EB("/"),routes:[{path:"/",name:"home",component:B5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:Noe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:KK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:_Y,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>kd(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Nj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>kd(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>kd(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:tj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:wX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:B5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>kd(()=>import("./NotFoundView.js"),[])}]});IM.beforeEach(async(t,e,n)=>{var a,l;const r=to();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Ooe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await kd(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=h(),c}const gw=Rv(N9),BM=rI();gw.use(BM);gw.use(IM);const Ioe=to(BM);window.INITIAL_STATE&&Ioe.initialize(window.INITIAL_STATE);gw.mount("#app");Ooe({immediate:!0,onRegistered(t){t&&console.log("SW enregistr:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prte  tre utilise hors ligne")}});export{Ki as _,Zl as a,S as b,Be as c,Ss as d,Zt as e,Bn as f,Gr as g,Sn as h,Ne as i,Gl as j,ti as k,zu as l,yS as m,gi as n,no as o,XB as p,Nm as q,Lt as r,ha as s,kt as t,to as u,Pr as v,Wl as w,B_ as x};

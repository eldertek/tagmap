var SD=Object.defineProperty;var CD=(t,e,n)=>e in t?SD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>CD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function cy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ji={},cp=[],Gu=()=>{},ED=()=>!1,Cm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),n_=t=>t.startsWith("onUpdate:"),_s=Object.assign,r_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},PD=Object.prototype.hasOwnProperty,ts=(t,e)=>PD.call(t,e),lr=Array.isArray,hp=t=>Np(t)==="[object Map]",wf=t=>Np(t)==="[object Set]",Cx=t=>Np(t)==="[object Date]",MD=t=>Np(t)==="[object RegExp]",Ir=t=>typeof t=="function",As=t=>typeof t=="string",xc=t=>typeof t=="symbol",ds=t=>t!==null&&typeof t=="object",i_=t=>(ds(t)||Ir(t))&&Ir(t.then)&&Ir(t.catch),CL=Object.prototype.toString,Np=t=>CL.call(t),kD=t=>Np(t).slice(8,-1),hy=t=>Np(t)==="[object Object]",s_=t=>As(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,dp=cy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dy=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},AD=/-(\w)/g,Ga=dy(t=>t.replace(AD,(e,n)=>n?n.toUpperCase():"")),TD=/\B([A-Z])/g,Ql=dy(t=>t.replace(TD,"-$1").toLowerCase()),Em=dy(t=>t.charAt(0).toUpperCase()+t.slice(1)),Tg=dy(t=>t?`on${Em(t)}`:""),Dl=(t,e)=>!Object.is(t,e),fp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},EL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},xv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Lv=t=>{const e=As(t)?Number(t):NaN;return isNaN(e)?t:e};let Ex;const fy=()=>Ex||(Ex=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),DD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",OD=cy(DD);function Nl(t){if(lr(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=As(r)?RD(r):Nl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(As(t)||ds(t))return t}const ND=/;(?![^(]*\))/g,ID=/:([^]+)/,BD=/\/\*[^]*?\*\//g;function RD(t){const e={};return t.replace(BD,"").split(ND).forEach(n=>{if(n){const r=n.split(ID);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function gi(t){let e="";if(As(t))e=t;else if(lr(t))for(let n=0;n<t.length;n++){const r=gi(t[n]);r&&(e+=r+" ")}else if(ds(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function FD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!As(e)&&(t.class=gi(e)),n&&(t.style=Nl(n)),t}const jD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zD=cy(jD);function PL(t){return!!t||t===""}function $D(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=bd(t[r],e[r]);return n}function bd(t,e){if(t===e)return!0;let n=Cx(t),r=Cx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=xc(t),r=xc(e),n||r)return t===e;if(n=lr(t),r=lr(e),n||r)return n&&r?$D(t,e):!1;if(n=ds(t),r=ds(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!bd(t[o],e[o]))return!1}}return String(t)===String(e)}function py(t,e){return t.findIndex(n=>bd(n,e))}const ML=t=>!!(t&&t.__v_isRef===!0),Et=t=>As(t)?t:t==null?"":lr(t)||ds(t)&&(t.toString===CL||!Ir(t.toString))?ML(t)?Et(t.value):JSON.stringify(t,kL,2):String(t),kL=(t,e)=>ML(e)?kL(t,e.value):hp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[E1(r,s)+" =>"]=i,n),{})}:wf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>E1(n))}:xc(e)?E1(e):ds(e)&&!lr(e)&&!hy(e)?String(e):e,E1=(t,e="")=>{var n;return xc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Tl;class o_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tl,!e&&Tl&&(this.index=(Tl.scopes||(Tl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Tl;try{return Tl=this,e()}finally{Tl=n}}}on(){Tl=this}off(){Tl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function a_(t){return new o_(t)}function l_(){return Tl}function AL(t,e=!1){Tl&&Tl.cleanups.push(t)}let Ms;const P1=new WeakSet;class nm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tl&&Tl.active&&Tl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,P1.has(this)&&(P1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||DL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Px(this),OL(this);const e=Ms,n=_c;Ms=this,_c=!0;try{return this.fn()}finally{NL(this),Ms=e,_c=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)h_(e);this.deps=this.depsTail=void 0,Px(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?P1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){D2(this)&&this.run()}get dirty(){return D2(this)}}let TL=0,Dg,Og;function DL(t,e=!1){if(t.flags|=8,e){t.next=Og,Og=t;return}t.next=Dg,Dg=t}function u_(){TL++}function c_(){if(--TL>0)return;if(Og){let e=Og;for(Og=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Dg;){let e=Dg;for(Dg=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function OL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function NL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),h_(r),VD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function D2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(IL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function IL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rm))return;t.globalVersion=rm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!D2(t)){t.flags&=-3;return}const n=Ms,r=_c;Ms=t,_c=!0;try{OL(t);const i=t.fn(t._value);(e.version===0||Dl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ms=n,_c=r,NL(t),t.flags&=-3}}function h_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)h_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function VD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function UD(t,e){t.effect instanceof nm&&(t=t.effect.fn);const n=new nm(t);e&&_s(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function HD(t){t.effect.stop()}let _c=!0;const BL=[];function Ed(){BL.push(_c),_c=!1}function Pd(){const t=BL.pop();_c=t===void 0?!0:t}function Px(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ms;Ms=void 0;try{e()}finally{Ms=n}}}let rm=0;class WD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ms||!_c||Ms===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ms)n=this.activeLink=new WD(Ms,this),Ms.deps?(n.prevDep=Ms.depsTail,Ms.depsTail.nextDep=n,Ms.depsTail=n):Ms.deps=Ms.depsTail=n,RL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ms.depsTail,n.nextDep=void 0,Ms.depsTail.nextDep=n,Ms.depsTail=n,Ms.deps===n&&(Ms.deps=r)}return n}trigger(e){this.version++,rm++,this.notify(e)}notify(e){u_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{c_()}}}function RL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)RL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Sv=new WeakMap,af=Symbol(""),O2=Symbol(""),im=Symbol("");function hl(t,e,n){if(_c&&Ms){let r=Sv.get(t);r||Sv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new gy),i.map=r,i.key=n),i.track()}}function Ch(t,e,n,r,i,s){const o=Sv.get(t);if(!o){rm++;return}const a=l=>{l&&l.trigger()};if(u_(),e==="clear")o.forEach(a);else{const l=lr(t),c=l&&s_(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===im||!xc(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(im)),e){case"add":l?c&&a(o.get("length")):(a(o.get(af)),hp(t)&&a(o.get(O2)));break;case"delete":l||(a(o.get(af)),hp(t)&&a(o.get(O2)));break;case"set":hp(t)&&a(o.get(af));break}}c_()}function GD(t,e){const n=Sv.get(t);return n&&n.get(e)}function Uf(t){const e=Fi(t);return e===t?e:(hl(e,"iterate",im),Cu(t)?e:e.map(dl))}function my(t){return hl(t=Fi(t),"iterate",im),t}const qD={__proto__:null,[Symbol.iterator](){return M1(this,Symbol.iterator,dl)},concat(...t){return Uf(this).concat(...t.map(e=>lr(e)?Uf(e):e))},entries(){return M1(this,"entries",t=>(t[1]=dl(t[1]),t))},every(t,e){return mh(this,"every",t,e,void 0,arguments)},filter(t,e){return mh(this,"filter",t,e,n=>n.map(dl),arguments)},find(t,e){return mh(this,"find",t,e,dl,arguments)},findIndex(t,e){return mh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mh(this,"findLast",t,e,dl,arguments)},findLastIndex(t,e){return mh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mh(this,"forEach",t,e,void 0,arguments)},includes(...t){return k1(this,"includes",t)},indexOf(...t){return k1(this,"indexOf",t)},join(t){return Uf(this).join(t)},lastIndexOf(...t){return k1(this,"lastIndexOf",t)},map(t,e){return mh(this,"map",t,e,void 0,arguments)},pop(){return Yp(this,"pop")},push(...t){return Yp(this,"push",t)},reduce(t,...e){return Mx(this,"reduce",t,e)},reduceRight(t,...e){return Mx(this,"reduceRight",t,e)},shift(){return Yp(this,"shift")},some(t,e){return mh(this,"some",t,e,void 0,arguments)},splice(...t){return Yp(this,"splice",t)},toReversed(){return Uf(this).toReversed()},toSorted(t){return Uf(this).toSorted(t)},toSpliced(...t){return Uf(this).toSpliced(...t)},unshift(...t){return Yp(this,"unshift",t)},values(){return M1(this,"values",dl)}};function M1(t,e,n){const r=my(t),i=r[e]();return r!==t&&!Cu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const YD=Array.prototype;function mh(t,e,n,r,i,s){const o=my(t),a=o!==t&&!Cu(t),l=o[e];if(l!==YD[e]){const p=l.apply(t,s);return a?dl(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,dl(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function Mx(t,e,n,r){const i=my(t);let s=n;return i!==t&&(Cu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,dl(a),l,t)}),i[e](s,...r)}function k1(t,e,n){const r=Fi(t);hl(r,"iterate",im);const i=r[e](...n);return(i===-1||i===!1)&&by(n[0])?(n[0]=Fi(n[0]),r[e](...n)):i}function Yp(t,e,n=[]){Ed(),u_();const r=Fi(t)[e].apply(t,n);return c_(),Pd(),r}const KD=cy("__proto__,__v_isRef,__isVue"),FL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xc));function ZD(t){xc(t)||(t=String(t));const e=Fi(this);return hl(e,"has",t),e.hasOwnProperty(t)}class jL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?WL:HL:s?UL:VL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=lr(e);if(!i){let l;if(o&&(l=qD[n]))return l;if(n==="hasOwnProperty")return ZD}const a=Reflect.get(e,n,go(e)?e:r);return(xc(n)?FL.has(n):KD(n))||(i||hl(e,"get",n),s)?a:go(a)?o&&s_(n)?a:a.value:ds(a)?i?fc(a):iu(a):a}}class zL extends jL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=_d(s);if(!Cu(r)&&!_d(r)&&(s=Fi(s),r=Fi(r)),!lr(e)&&go(s)&&!go(r))return l?!1:(s.value=r,!0)}const o=lr(e)&&s_(n)?Number(n)<e.length:ts(e,n),a=Reflect.set(e,n,r,go(e)?e:i);return e===Fi(i)&&(o?Dl(r,s)&&Ch(e,"set",n,r):Ch(e,"add",n,r)),a}deleteProperty(e,n){const r=ts(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ch(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!xc(n)||!FL.has(n))&&hl(e,"has",n),r}ownKeys(e){return hl(e,"iterate",lr(e)?"length":af),Reflect.ownKeys(e)}}class $L extends jL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const XD=new zL,JD=new $L,QD=new zL(!0),e8=new $L(!0),N2=t=>t,a0=t=>Reflect.getPrototypeOf(t);function t8(t,e,n){return function(...r){const i=this.__v_raw,s=Fi(i),o=hp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?N2:e?I2:dl;return!e&&hl(s,"iterate",l?O2:af),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function l0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function n8(t,e){const n={get(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);t||(Dl(i,a)&&hl(o,"get",i),hl(o,"get",a));const{has:l}=a0(o),c=e?N2:t?I2:dl;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&hl(Fi(i),"iterate",af),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);return t||(Dl(i,a)&&hl(o,"has",i),hl(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Fi(a),c=e?N2:t?I2:dl;return!t&&hl(l,"iterate",af),a.forEach((d,p)=>i.call(s,c(d),c(p),o))}};return _s(n,t?{add:l0("add"),set:l0("set"),delete:l0("delete"),clear:l0("clear")}:{add(i){!e&&!Cu(i)&&!_d(i)&&(i=Fi(i));const s=Fi(this);return a0(s).has.call(s,i)||(s.add(i),Ch(s,"add",i,i)),this},set(i,s){!e&&!Cu(s)&&!_d(s)&&(s=Fi(s));const o=Fi(this),{has:a,get:l}=a0(o);let c=a.call(o,i);c||(i=Fi(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?Dl(s,d)&&Ch(o,"set",i,s):Ch(o,"add",i,s),this},delete(i){const s=Fi(this),{has:o,get:a}=a0(s);let l=o.call(s,i);l||(i=Fi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ch(s,"delete",i,void 0),c},clear(){const i=Fi(this),s=i.size!==0,o=i.clear();return s&&Ch(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=t8(i,t,e)}),n}function vy(t,e){const n=n8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ts(n,i)&&i in r?n:r,i,s)}const r8={get:vy(!1,!1)},i8={get:vy(!1,!0)},s8={get:vy(!0,!1)},o8={get:vy(!0,!0)},VL=new WeakMap,UL=new WeakMap,HL=new WeakMap,WL=new WeakMap;function a8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function l8(t){return t.__v_skip||!Object.isExtensible(t)?0:a8(kD(t))}function iu(t){return _d(t)?t:yy(t,!1,XD,r8,VL)}function d_(t){return yy(t,!1,QD,i8,UL)}function fc(t){return yy(t,!0,JD,s8,HL)}function u8(t){return yy(t,!0,e8,o8,WL)}function yy(t,e,n,r,i){if(!ds(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=l8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Kc(t){return _d(t)?Kc(t.__v_raw):!!(t&&t.__v_isReactive)}function _d(t){return!!(t&&t.__v_isReadonly)}function Cu(t){return!!(t&&t.__v_isShallow)}function by(t){return t?!!t.__v_raw:!1}function Fi(t){const e=t&&t.__v_raw;return e?Fi(e):t}function _y(t){return!ts(t,"__v_skip")&&Object.isExtensible(t)&&EL(t,"__v_skip",!0),t}const dl=t=>ds(t)?iu(t):t,I2=t=>ds(t)?fc(t):t;function go(t){return t?t.__v_isRef===!0:!1}function Ct(t){return GL(t,!1)}function f_(t){return GL(t,!0)}function GL(t,e){return go(t)?t:new c8(t,e)}class c8{constructor(e,n){this.dep=new gy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fi(e),this._value=n?e:dl(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Cu(e)||_d(e);e=r?e:Fi(e),Dl(e,n)&&(this._rawValue=e,this._value=r?e:dl(e),this.dep.trigger())}}function h8(t){t.dep&&t.dep.trigger()}function qn(t){return go(t)?t.value:t}function d8(t){return Ir(t)?t():qn(t)}const f8={get:(t,e,n)=>e==="__v_raw"?t:qn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return go(i)&&!go(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function p_(t){return Kc(t)?t:new Proxy(t,f8)}class p8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new gy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function qL(t){return new p8(t)}function YL(t){const e=lr(t)?new Array(t.length):{};for(const n in t)e[n]=KL(t,n);return e}class g8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return GD(Fi(this._object),this._key)}}class m8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function v8(t,e,n){return go(t)?t:Ir(t)?new m8(t):ds(t)&&arguments.length>1?KL(t,e,n):Ct(t)}function KL(t,e,n){const r=t[e];return go(r)?r:new g8(t,e,n)}class y8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new gy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ms!==this)return DL(this,!0),!0}get value(){const e=this.dep.track();return IL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function b8(t,e,n=!1){let r,i;return Ir(t)?r=t:(r=t.get,i=t.set),new y8(r,i,n)}const _8={GET:"get",HAS:"has",ITERATE:"iterate"},w8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},u0={},Cv=new WeakMap;let td;function x8(){return td}function ZL(t,e=!1,n=td){if(n){let r=Cv.get(n);r||Cv.set(n,r=[]),r.push(t)}}function L8(t,e,n=ji){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=X=>i?X:Cu(X)||i===!1||i===0?Eh(X,1):Eh(X);let d,p,v,g,x=!1,E=!1;if(go(t)?(p=()=>t.value,x=Cu(t)):Kc(t)?(p=()=>c(t),x=!0):lr(t)?(E=!0,x=t.some(X=>Kc(X)||Cu(X)),p=()=>t.map(X=>{if(go(X))return X.value;if(Kc(X))return c(X);if(Ir(X))return l?l(X,2):X()})):Ir(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){Ed();try{v()}finally{Pd()}}const X=td;td=d;try{return l?l(t,3,[g]):t(g)}finally{td=X}}:p=Gu,e&&i){const X=p,re=i===!0?1/0:i;p=()=>Eh(X(),re)}const k=l_(),A=()=>{d.stop(),k&&k.active&&r_(k.effects,d)};if(s&&e){const X=e;e=(...re)=>{X(...re),A()}}let D=E?new Array(t.length).fill(u0):u0;const z=X=>{if(!(!(d.flags&1)||!d.dirty&&!X))if(e){const re=d.run();if(i||x||(E?re.some((ge,fe)=>Dl(ge,D[fe])):Dl(re,D))){v&&v();const ge=td;td=d;try{const fe=[re,D===u0?void 0:E&&D[0]===u0?[]:D,g];l?l(e,3,fe):e(...fe),D=re}finally{td=ge}}}else d.run()};return a&&a(z),d=new nm(p),d.scheduler=o?()=>o(z,!1):z,g=X=>ZL(X,!1,d),v=d.onStop=()=>{const X=Cv.get(d);if(X){if(l)l(X,4);else for(const re of X)re();Cv.delete(d)}},e?r?z(!0):D=d.run():o?o(z.bind(null,!0),!0):d.run(),A.pause=d.pause.bind(d),A.resume=d.resume.bind(d),A.stop=A,A}function Eh(t,e=1/0,n){if(e<=0||!ds(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,go(t))Eh(t.value,e,n);else if(lr(t))for(let r=0;r<t.length;r++)Eh(t[r],e,n);else if(wf(t)||hp(t))t.forEach(r=>{Eh(r,e,n)});else if(hy(t)){for(const r in t)Eh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Eh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const XL=[];function S8(t){XL.push(t)}function C8(){XL.pop()}function E8(t,e){}const P8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},M8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Ip(t,e,n,r){try{return r?t(...r):t()}catch(i){xf(i,e,n)}}function Yu(t,e,n,r){if(Ir(t)){const i=Ip(t,e,n,r);return i&&i_(i)&&i.catch(s=>{xf(s,e,n)}),i}if(lr(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Yu(t[s],e,n,r));return i}}function xf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ji;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,c)===!1)return}a=a.parent}if(s){Ed(),Ip(s,null,10,[t,l,c]),Pd();return}}k8(t,n,i,r,o)}function k8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Ol=[];let zc=-1;const pp=[];let nd=null,ep=0;const JL=Promise.resolve();let Ev=null;function ha(t){const e=Ev||JL;return t?e.then(this?t.bind(this):t):e}function A8(t){let e=zc+1,n=Ol.length;for(;e<n;){const r=e+n>>>1,i=Ol[r],s=om(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function g_(t){if(!(t.flags&1)){const e=om(t),n=Ol[Ol.length-1];!n||!(t.flags&2)&&e>=om(n)?Ol.push(t):Ol.splice(A8(e),0,t),t.flags|=1,QL()}}function QL(){Ev||(Ev=JL.then(eS))}function sm(t){lr(t)?pp.push(...t):nd&&t.id===-1?nd.splice(ep+1,0,t):t.flags&1||(pp.push(t),t.flags|=1),QL()}function kx(t,e,n=zc+1){for(;n<Ol.length;n++){const r=Ol[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ol.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Pv(t){if(pp.length){const e=[...new Set(pp)].sort((n,r)=>om(n)-om(r));if(pp.length=0,nd){nd.push(...e);return}for(nd=e,ep=0;ep<nd.length;ep++){const n=nd[ep];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}nd=null,ep=0}}const om=t=>t.id==null?t.flags&2?-1:1/0:t.id;function eS(t){try{for(zc=0;zc<Ol.length;zc++){const e=Ol[zc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ip(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;zc<Ol.length;zc++){const e=Ol[zc];e&&(e.flags&=-2)}zc=-1,Ol.length=0,Pv(),Ev=null,(Ol.length||pp.length)&&eS()}}let tp,c0=[];function tS(t,e){var n,r;tp=t,tp?(tp.enabled=!0,c0.forEach(({event:i,args:s})=>tp.emit(i,...s)),c0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{tS(s,e)}),setTimeout(()=>{tp||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,c0=[])},3e3)):c0=[]}let pa=null,wy=null;function am(t){const e=pa;return pa=t,wy=t&&t.type.__scopeId||null,e}function T8(t){wy=t}function D8(){wy=null}const O8=t=>Wu;function Wu(t,e=pa,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&U2(-1);const s=am(e);let o;try{o=t(...i)}finally{am(s),r._d&&U2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function er(t,e){if(pa===null)return t;const n=km(pa),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=ji]=e[i];s&&(Ir(s)&&(s={mounted:s,updated:s}),s.deep&&Eh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Vc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ed(),Yu(l,n,8,[t.el,a,t,e]),Pd())}}const nS=Symbol("_vte"),rS=t=>t.__isTeleport,Ng=t=>t&&(t.disabled||t.disabled===""),Ax=t=>t&&(t.defer||t.defer===""),Tx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Dx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,B2=(t,e)=>{const n=t&&t.to;return As(n)?e?e(n):null:n},iS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:p,pbc:v,o:{insert:g,querySelector:x,createText:E,createComment:k}}=c,A=Ng(e.props);let{shapeFlag:D,children:z,dynamicChildren:X}=e;if(t==null){const re=e.el=E(""),ge=e.anchor=E("");g(re,n,r),g(ge,n,r);const fe=(F,Y)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=F),d(z,F,Y,i,s,o,a,l))},N=()=>{const F=e.target=B2(e.props,x),Y=sS(F,e,E,g);F&&(o!=="svg"&&Tx(F)?o="svg":o!=="mathml"&&Dx(F)&&(o="mathml"),A||(fe(F,Y),q0(e,!1)))};A&&(fe(n,ge),q0(e,!0)),Ax(e.props)?ca(()=>{N(),e.el.__isMounted=!0},s):N()}else{if(Ax(e.props)&&!t.el.__isMounted){ca(()=>{iS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const re=e.anchor=t.anchor,ge=e.target=t.target,fe=e.targetAnchor=t.targetAnchor,N=Ng(t.props),F=N?n:ge,Y=N?re:fe;if(o==="svg"||Tx(ge)?o="svg":(o==="mathml"||Dx(ge))&&(o="mathml"),X?(v(t.dynamicChildren,X,F,i,s,o,a),C_(t,e,!0)):l||p(t,e,F,Y,i,s,o,a,!1),A)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):h0(e,n,re,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const B=e.target=B2(e.props,x);B&&h0(e,B,null,c,0)}else N&&h0(e,ge,fe,c,1);q0(e,A)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:p,props:v}=t;if(p&&(i(c),i(d)),s&&i(l),o&16){const g=s||!Ng(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,g,!!E.dynamicChildren)}}},move:h0,hydrate:N8};function h0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,p=s===2;if(p&&r(o,e,n),(!p||Ng(d))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function N8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},p){const v=e.target=B2(e.props,l);if(v){const g=Ng(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(g)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||sS(v,e,d,c),p(x&&o(x),e,v,n,r,i,s)}q0(e,g)}return e.anchor&&o(e.anchor)}const Ig=iS;function q0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function sS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[nS]=s,t&&(r(i,t),r(s,t)),s}const rd=Symbol("_leaveCb"),d0=Symbol("_enterCb");function m_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zs(()=>{t.isMounted=!0}),Md(()=>{t.isUnmounting=!0}),t}const Fu=[Function,Array],v_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fu,onEnter:Fu,onAfterEnter:Fu,onEnterCancelled:Fu,onBeforeLeave:Fu,onLeave:Fu,onAfterLeave:Fu,onLeaveCancelled:Fu,onBeforeAppear:Fu,onAppear:Fu,onAfterAppear:Fu,onAppearCancelled:Fu},oS=t=>{const e=t.subTree;return e.component?oS(e.component):e},I8={name:"BaseTransition",props:v_,setup(t,{slots:e}){const n=Xu(),r=m_();return()=>{const i=e.default&&xy(e.default(),!0);if(!i||!i.length)return;const s=aS(i),o=Fi(t),{mode:a}=o;if(r.isLeaving)return A1(s);const l=Ox(s);if(!l)return A1(s);let c=wp(l,o,r,n,p=>c=p);l.type!==ia&&Nh(l,c);let d=n.subTree&&Ox(n.subTree);if(d&&d.type!==ia&&!vc(l,d)&&oS(n).type!==ia){let p=wp(d,o,r,n);if(Nh(d,p),a==="out-in"&&l.type!==ia)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},A1(s);a==="in-out"&&l.type!==ia?p.delayLeave=(v,g,x)=>{const E=uS(r,d);E[String(d.key)]=d,v[rd]=()=>{g(),v[rd]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function aS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ia){e=n;break}}return e}const lS=I8;function uS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function wp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:g,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:k,onAppear:A,onAfterAppear:D,onAppearCancelled:z}=e,X=String(t.key),re=uS(n,t),ge=(F,Y)=>{F&&Yu(F,r,9,Y)},fe=(F,Y)=>{const B=Y[1];ge(F,Y),lr(F)?F.every(I=>I.length<=1)&&B():F.length<=1&&B()},N={mode:o,persisted:a,beforeEnter(F){let Y=l;if(!n.isMounted)if(s)Y=k||l;else return;F[rd]&&F[rd](!0);const B=re[X];B&&vc(t,B)&&B.el[rd]&&B.el[rd](),ge(Y,[F])},enter(F){let Y=c,B=d,I=p;if(!n.isMounted)if(s)Y=A||c,B=D||d,I=z||p;else return;let R=!1;const q=F[d0]=U=>{R||(R=!0,U?ge(I,[F]):ge(B,[F]),N.delayedLeave&&N.delayedLeave(),F[d0]=void 0)};Y?fe(Y,[F,q]):q()},leave(F,Y){const B=String(t.key);if(F[d0]&&F[d0](!0),n.isUnmounting)return Y();ge(v,[F]);let I=!1;const R=F[rd]=q=>{I||(I=!0,Y(),q?ge(E,[F]):ge(x,[F]),F[rd]=void 0,re[B]===t&&delete re[B])};re[B]=t,g?fe(g,[F,R]):R()},clone(F){const Y=wp(F,e,n,r,i);return i&&i(Y),Y}};return N}function A1(t){if(Pm(t))return t=Qc(t),t.children=null,t}function Ox(t){if(!Pm(t))return rS(t.type)&&t.children?aS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ir(n.default))return n.default()}}function Nh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Nh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===wn?(o.patchFlag&128&&i++,r=r.concat(xy(o.children,e,a))):(e||o.type!==ia)&&r.push(a!=null?Qc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Rs(t,e){return Ir(t)?_s({name:t.name},e,{setup:t}):t}function B8(){const t=Xu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function y_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function R8(t){const e=Xu(),n=f_(null);if(e){const i=e.refs===ji?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function lm(t,e,n,r,i=!1){if(lr(t)){t.forEach((x,E)=>lm(x,e&&(lr(e)?e[E]:e),n,r,i));return}if(gd(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&lm(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?km(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===ji?a.refs={}:a.refs,p=a.setupState,v=Fi(p),g=p===ji?()=>!1:x=>ts(v,x);if(c!=null&&c!==l&&(As(c)?(d[c]=null,g(c)&&(p[c]=null)):go(c)&&(c.value=null)),Ir(l))Ip(l,a,12,[o,d]);else{const x=As(l),E=go(l);if(x||E){const k=()=>{if(t.f){const A=x?g(l)?p[l]:d[l]:l.value;i?lr(A)&&r_(A,s):lr(A)?A.includes(s)||A.push(s):x?(d[l]=[s],g(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else x?(d[l]=o,g(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(d[t.k]=o))};o?(k.id=-1,ca(k,n)):k()}}}let Nx=!1;const Hf=()=>{Nx||(console.error("Hydration completed but contains mismatches."),Nx=!0)},F8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",j8=t=>t.namespaceURI.includes("MathML"),f0=t=>{if(t.nodeType===1){if(F8(t))return"svg";if(j8(t))return"mathml"}},ap=t=>t.nodeType===8;function z8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,d=(z,X)=>{if(!X.hasChildNodes()){n(null,z,X),Pv(),X._vnode=z;return}p(X.firstChild,z,null,null,null),Pv(),X._vnode=z},p=(z,X,re,ge,fe,N=!1)=>{N=N||!!X.dynamicChildren;const F=ap(z)&&z.data==="[",Y=()=>E(z,X,re,ge,fe,F),{type:B,ref:I,shapeFlag:R,patchFlag:q}=X;let U=z.nodeType;X.el=z,q===-2&&(N=!1,X.dynamicChildren=null);let $=null;switch(B){case md:U!==3?X.children===""?(l(X.el=i(""),o(z),z),$=z):$=Y():(z.data!==X.children&&(Hf(),z.data=X.children),$=s(z));break;case ia:D(z)?($=s(z),A(X.el=z.content.firstChild,z,re)):U!==8||F?$=Y():$=s(z);break;case uf:if(F&&(z=s(z),U=z.nodeType),U===1||U===3){$=z;const oe=!X.children.length;for(let J=0;J<X.staticCount;J++)oe&&(X.children+=$.nodeType===1?$.outerHTML:$.data),J===X.staticCount-1&&(X.anchor=$),$=s($);return F?s($):$}else Y();break;case wn:F?$=x(z,X,re,ge,fe,N):$=Y();break;default:if(R&1)(U!==1||X.type.toLowerCase()!==z.tagName.toLowerCase())&&!D(z)?$=Y():$=v(z,X,re,ge,fe,N);else if(R&6){X.slotScopeIds=fe;const oe=o(z);if(F?$=k(z):ap(z)&&z.data==="teleport start"?$=k(z,z.data,"teleport end"):$=s(z),e(X,oe,null,re,ge,f0(oe),N),gd(X)&&!X.type.__asyncResolved){let J;F?(J=mi(wn),J.anchor=$?$.previousSibling:oe.lastChild):J=z.nodeType===3?ci(""):mi("div"),J.el=z,X.component.subTree=J}}else R&64?U!==8?$=Y():$=X.type.hydrate(z,X,re,ge,fe,N,t,g):R&128&&($=X.type.hydrate(z,X,re,ge,f0(o(z)),fe,N,t,p))}return I!=null&&lm(I,null,ge,X),$},v=(z,X,re,ge,fe,N)=>{N=N||!!X.dynamicChildren;const{type:F,props:Y,patchFlag:B,shapeFlag:I,dirs:R,transition:q}=X,U=F==="input"||F==="option";if(U||B!==-1){R&&Vc(X,null,re,"created");let $=!1;if(D(z)){$=BS(null,q)&&re&&re.vnode.props&&re.vnode.props.appear;const J=z.content.firstChild;$&&q.beforeEnter(J),A(J,z,re),X.el=z=J}if(I&16&&!(Y&&(Y.innerHTML||Y.textContent))){let J=g(z.firstChild,X,z,re,ge,fe,N);for(;J;){p0(z,1)||Hf();const _e=J;J=J.nextSibling,a(_e)}}else if(I&8){let J=X.children;J[0]===`
`&&(z.tagName==="PRE"||z.tagName==="TEXTAREA")&&(J=J.slice(1)),z.textContent!==J&&(p0(z,0)||Hf(),z.textContent=X.children)}if(Y){if(U||!N||B&48){const J=z.tagName.includes("-");for(const _e in Y)(U&&(_e.endsWith("value")||_e==="indeterminate")||Cm(_e)&&!dp(_e)||_e[0]==="."||J)&&r(z,_e,null,Y[_e],void 0,re)}else if(Y.onClick)r(z,"onClick",null,Y.onClick,void 0,re);else if(B&4&&Kc(Y.style))for(const J in Y.style)Y.style[J]}let oe;(oe=Y&&Y.onVnodeBeforeMount)&&Xl(oe,re,X),R&&Vc(X,null,re,"beforeMount"),((oe=Y&&Y.onVnodeMounted)||R||$)&&WS(()=>{oe&&Xl(oe,re,X),$&&q.enter(z),R&&Vc(X,null,re,"mounted")},ge)}return z.nextSibling},g=(z,X,re,ge,fe,N,F)=>{F=F||!!X.dynamicChildren;const Y=X.children,B=Y.length;for(let I=0;I<B;I++){const R=F?Y[I]:Y[I]=Jl(Y[I]),q=R.type===md;z?(q&&!F&&I+1<B&&Jl(Y[I+1]).type===md&&(l(i(z.data.slice(R.children.length)),re,s(z)),z.data=R.children),z=p(z,R,ge,fe,N,F)):q&&!R.children?l(R.el=i(""),re):(p0(re,1)||Hf(),n(null,R,re,null,ge,fe,f0(re),N))}return z},x=(z,X,re,ge,fe,N)=>{const{slotScopeIds:F}=X;F&&(fe=fe?fe.concat(F):F);const Y=o(z),B=g(s(z),X,Y,re,ge,fe,N);return B&&ap(B)&&B.data==="]"?s(X.anchor=B):(Hf(),l(X.anchor=c("]"),Y,B),B)},E=(z,X,re,ge,fe,N)=>{if(p0(z.parentElement,1)||Hf(),X.el=null,N){const B=k(z);for(;;){const I=s(z);if(I&&I!==B)a(I);else break}}const F=s(z),Y=o(z);return a(z),n(null,X,Y,F,re,ge,f0(Y),fe),re&&(re.vnode.el=X.el,Ey(re,X.el)),F},k=(z,X="[",re="]")=>{let ge=0;for(;z;)if(z=s(z),z&&ap(z)&&(z.data===X&&ge++,z.data===re)){if(ge===0)return s(z);ge--}return z},A=(z,X,re)=>{const ge=X.parentNode;ge&&ge.replaceChild(z,X);let fe=re;for(;fe;)fe.vnode.el===X&&(fe.vnode.el=fe.subTree.el=z),fe=fe.parent},D=z=>z.nodeType===1&&z.tagName==="TEMPLATE";return[d,p]}const Ix="data-allow-mismatch",$8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function p0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ix);)t=t.parentElement;const n=t&&t.getAttribute(Ix);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes($8[e])}}const V8=fy().requestIdleCallback||(t=>setTimeout(t,1)),U8=fy().cancelIdleCallback||(t=>clearTimeout(t)),H8=(t=1e4)=>e=>{const n=V8(e,{timeout:t});return()=>U8(n)};function W8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const G8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(W8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},q8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},Y8=(t=[])=>(e,n)=>{As(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function K8(t,e){if(ap(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(ap(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const gd=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Z8(t){Ir(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,d,p=0;const v=()=>(p++,c=null,g()),g=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,A)=>{l(E,()=>k(v()),()=>A(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return Rs({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(x,E,k){const A=s?()=>{const D=s(k,z=>K8(x,z));D&&(E.bum||(E.bum=[])).push(D)}:k;d?A():g().then(()=>!E.isUnmounted&&A())},get __asyncResolved(){return d},setup(){const x=fa;if(y_(x),d)return()=>T1(d,x);const E=z=>{c=null,xf(z,x,13,!r)};if(a&&x.suspense||xp)return g().then(z=>()=>T1(z,x)).catch(z=>(E(z),()=>r?mi(r,{error:z}):null));const k=Ct(!1),A=Ct(),D=Ct(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!A.value){const z=new Error(`Async component timed out after ${o}ms.`);E(z),A.value=z}},o),g().then(()=>{k.value=!0,x.parent&&Pm(x.parent.vnode)&&x.parent.update()}).catch(z=>{E(z),A.value=z}),()=>{if(k.value&&d)return T1(d,x);if(A.value&&r)return mi(r,{error:A.value});if(n&&!D.value)return mi(n)}}})}function T1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=mi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const Pm=t=>t.type.__isKeepAlive,X8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Xu(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:d,o:{createElement:p}}}=r,v=p("div");r.activate=(D,z,X,re,ge)=>{const fe=D.component;c(D,z,X,0,a),l(fe.vnode,D,z,X,fe,a,re,D.slotScopeIds,ge),ca(()=>{fe.isDeactivated=!1,fe.a&&fp(fe.a);const N=D.props&&D.props.onVnodeMounted;N&&Xl(N,fe.parent,D)},a)},r.deactivate=D=>{const z=D.component;kv(z.m),kv(z.a),c(D,v,null,1,a),ca(()=>{z.da&&fp(z.da);const X=D.props&&D.props.onVnodeUnmounted;X&&Xl(X,z.parent,D),z.isDeactivated=!0},a)};function g(D){D1(D),d(D,n,a,!0)}function x(D){i.forEach((z,X)=>{const re=Y2(z.type);re&&!D(re)&&E(X)})}function E(D){const z=i.get(D);z&&(!o||!vc(z,o))?g(z):o&&D1(o),i.delete(D),s.delete(D)}Ai(()=>[t.include,t.exclude],([D,z])=>{D&&x(X=>gg(D,X)),z&&x(X=>!gg(z,X))},{flush:"post",deep:!0});let k=null;const A=()=>{k!=null&&(Av(n.subTree.type)?ca(()=>{i.set(k,g0(n.subTree))},n.subTree.suspense):i.set(k,g0(n.subTree)))};return Zs(A),Sy(A),Md(()=>{i.forEach(D=>{const{subTree:z,suspense:X}=n,re=g0(z);if(D.type===re.type&&D.key===re.key){D1(re);const ge=re.component.da;ge&&ca(ge,X);return}g(D)})}),()=>{if(k=null,!e.default)return o=null;const D=e.default(),z=D[0];if(D.length>1)return o=null,D;if(!Ih(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return o=null,z;let X=g0(z);if(X.type===ia)return o=null,X;const re=X.type,ge=Y2(gd(X)?X.type.__asyncResolved||{}:re),{include:fe,exclude:N,max:F}=t;if(fe&&(!ge||!gg(fe,ge))||N&&ge&&gg(N,ge))return X.shapeFlag&=-257,o=X,z;const Y=X.key==null?re:X.key,B=i.get(Y);return X.el&&(X=Qc(X),z.shapeFlag&128&&(z.ssContent=X)),k=Y,B?(X.el=B.el,X.component=B.component,X.transition&&Nh(X,X.transition),X.shapeFlag|=512,s.delete(Y),s.add(Y)):(s.add(Y),F&&s.size>parseInt(F,10)&&E(s.values().next().value)),X.shapeFlag|=256,o=X,Av(z.type)?z:X}}},J8=X8;function gg(t,e){return lr(t)?t.some(n=>gg(n,e)):As(t)?t.split(",").includes(e):MD(t)?(t.lastIndex=0,t.test(e)):!1}function cS(t,e){dS(t,"a",e)}function hS(t,e){dS(t,"da",e)}function dS(t,e,n=fa){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ly(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Pm(i.parent.vnode)&&Q8(r,e,n,i),i=i.parent}}function Q8(t,e,n,r){const i=Ly(e,t,r,!0);Ku(()=>{r_(r[e],i)},n)}function D1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function g0(t){return t.shapeFlag&128?t.ssContent:t}function Ly(t,e,n=fa,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Ed();const a=mf(n),l=Yu(e,n,t,o);return a(),Pd(),l});return r?i.unshift(s):i.push(s),s}}const Rh=t=>(e,n=fa)=>{(!xp||t==="sp")&&Ly(t,(...r)=>e(...r),n)},fS=Rh("bm"),Zs=Rh("m"),b_=Rh("bu"),Sy=Rh("u"),Md=Rh("bum"),Ku=Rh("um"),pS=Rh("sp"),gS=Rh("rtg"),mS=Rh("rtc");function vS(t,e=fa){Ly("ec",t,e)}const __="components",eO="directives";function yS(t,e){return w_(__,t,!0,e)||t}const bS=Symbol.for("v-ndc");function tO(t){return As(t)?w_(__,t,!1)||t:t||bS}function nO(t){return w_(eO,t)}function w_(t,e,n=!0,r=!1){const i=pa||fa;if(i){const s=i.type;if(t===__){const a=Y2(s,!1);if(a&&(a===e||a===Ga(e)||a===Em(Ga(e))))return s}const o=Bx(i[t]||s[t],e)||Bx(i.appContext[t],e);return!o&&r?s:o}}function Bx(t,e){return t&&(t[e]||t[Ga(e)]||t[Em(Ga(e))])}function Qn(t,e,n,r){let i;const s=n&&n[r],o=lr(t);if(o||As(t)){const a=o&&Kc(t);let l=!1;a&&(l=!Cu(t),t=my(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?dl(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(ds(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function rO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(lr(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function iO(t,e,n={},r,i){if(pa.ce||pa.parent&&gd(pa.parent)&&pa.parent.ce)return e!=="default"&&(n.name=e),Ae(),da(wn,null,[mi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ae();const o=s&&x_(s(n)),a=n.key||o&&o.key,l=da(wn,{key:(a&&!xc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function x_(t){return t.some(e=>Ih(e)?!(e.type===ia||e.type===wn&&!x_(e.children)):!0)?t:null}function sO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Tg(r)]=t[r];return n}const R2=t=>t?JS(t)?km(t):R2(t.parent):null,Bg=_s(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>R2(t.parent),$root:t=>R2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>L_(t),$forceUpdate:t=>t.f||(t.f=()=>{g_(t.update)}),$nextTick:t=>t.n||(t.n=ha.bind(t.proxy)),$watch:t=>IO.bind(t)}),O1=(t,e)=>t!==ji&&!t.__isScriptSetup&&ts(t,e),F2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(O1(r,e))return o[e]=1,r[e];if(i!==ji&&ts(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&ts(c,e))return o[e]=3,s[e];if(n!==ji&&ts(n,e))return o[e]=4,n[e];j2&&(o[e]=0)}}const d=Bg[e];let p,v;if(d)return e==="$attrs"&&hl(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==ji&&ts(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,ts(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return O1(i,e)?(i[e]=n,!0):r!==ji&&ts(r,e)?(r[e]=n,!0):ts(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==ji&&ts(t,o)||O1(e,o)||(a=s[0])&&ts(a,o)||ts(r,o)||ts(Bg,o)||ts(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ts(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},oO=_s({},F2,{get(t,e){if(e!==Symbol.unscopables)return F2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!OD(e)}});function aO(){return null}function lO(){return null}function uO(t){}function cO(t){}function hO(){return null}function dO(){}function fO(t,e){return null}function pO(){return _S().slots}function gO(){return _S().attrs}function _S(){const t=Xu();return t.setupContext||(t.setupContext=tC(t))}function um(t){return lr(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function mO(t,e){const n=um(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?lr(i)||Ir(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function vO(t,e){return!t||!e?t||e:lr(t)&&lr(e)?t.concat(e):_s({},um(t),um(e))}function yO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function bO(t){const e=Xu();let n=t();return W2(),i_(n)&&(n=n.catch(r=>{throw mf(e),r})),[n,()=>mf(e)]}let j2=!0;function _O(t){const e=L_(t),n=t.proxy,r=t.ctx;j2=!1,e.beforeCreate&&Rx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:p,mounted:v,beforeUpdate:g,updated:x,activated:E,deactivated:k,beforeDestroy:A,beforeUnmount:D,destroyed:z,unmounted:X,render:re,renderTracked:ge,renderTriggered:fe,errorCaptured:N,serverPrefetch:F,expose:Y,inheritAttrs:B,components:I,directives:R,filters:q}=e;if(c&&wO(c,r,null),o)for(const oe in o){const J=o[oe];Ir(J)&&(r[oe]=J.bind(n))}if(i){const oe=i.call(n,n);ds(oe)&&(t.data=iu(oe))}if(j2=!0,s)for(const oe in s){const J=s[oe],_e=Ir(J)?J.bind(n,n):Ir(J.get)?J.get.bind(n,n):Gu,ve=!Ir(J)&&Ir(J.set)?J.set.bind(n):Gu,ke=Xn({get:_e,set:ve});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>ke.value,set:W=>ke.value=W})}if(a)for(const oe in a)wS(a[oe],r,n,oe);if(l){const oe=Ir(l)?l.call(n):l;Reflect.ownKeys(oe).forEach(J=>{Rg(J,oe[J])})}d&&Rx(d,t,"c");function $(oe,J){lr(J)?J.forEach(_e=>oe(_e.bind(n))):J&&oe(J.bind(n))}if($(fS,p),$(Zs,v),$(b_,g),$(Sy,x),$(cS,E),$(hS,k),$(vS,N),$(mS,ge),$(gS,fe),$(Md,D),$(Ku,X),$(pS,F),lr(Y))if(Y.length){const oe=t.exposed||(t.exposed={});Y.forEach(J=>{Object.defineProperty(oe,J,{get:()=>n[J],set:_e=>n[J]=_e})})}else t.exposed||(t.exposed={});re&&t.render===Gu&&(t.render=re),B!=null&&(t.inheritAttrs=B),I&&(t.components=I),R&&(t.directives=R),F&&y_(t)}function wO(t,e,n=Gu){lr(t)&&(t=z2(t));for(const r in t){const i=t[r];let s;ds(i)?"default"in i?s=Eu(i.from||r,i.default,!0):s=Eu(i.from||r):s=Eu(i),go(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Rx(t,e,n){Yu(lr(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function wS(t,e,n,r){let i=r.includes(".")?$S(n,r):()=>n[r];if(As(t)){const s=e[t];Ir(s)&&Ai(i,s)}else if(Ir(t))Ai(i,t.bind(n));else if(ds(t))if(lr(t))t.forEach(s=>wS(s,e,n,r));else{const s=Ir(t.handler)?t.handler.bind(n):e[t.handler];Ir(s)&&Ai(i,s,t)}}function L_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Mv(l,c,o,!0)),Mv(l,e,o)),ds(e)&&s.set(e,l),l}function Mv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Mv(t,s,n,!0),i&&i.forEach(o=>Mv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=xO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const xO={data:Fx,props:jx,emits:jx,methods:mg,computed:mg,beforeCreate:Pl,created:Pl,beforeMount:Pl,mounted:Pl,beforeUpdate:Pl,updated:Pl,beforeDestroy:Pl,beforeUnmount:Pl,destroyed:Pl,unmounted:Pl,activated:Pl,deactivated:Pl,errorCaptured:Pl,serverPrefetch:Pl,components:mg,directives:mg,watch:SO,provide:Fx,inject:LO};function Fx(t,e){return e?t?function(){return _s(Ir(t)?t.call(this,this):t,Ir(e)?e.call(this,this):e)}:e:t}function LO(t,e){return mg(z2(t),z2(e))}function z2(t){if(lr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Pl(t,e){return t?[...new Set([].concat(t,e))]:e}function mg(t,e){return t?_s(Object.create(null),t,e):e}function jx(t,e){return t?lr(t)&&lr(e)?[...new Set([...t,...e])]:_s(Object.create(null),um(t),um(e??{})):e}function SO(t,e){if(!t)return e;if(!e)return t;const n=_s(Object.create(null),t);for(const r in e)n[r]=Pl(t[r],e[r]);return n}function xS(){return{app:null,config:{isNativeTag:ED,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CO=0;function EO(t,e){return function(r,i=null){Ir(r)||(r=_s({},r)),i!=null&&!ds(i)&&(i=null);const s=xS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:CO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:rC,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&Ir(d.install)?(o.add(d),d.install(c,...p)):Ir(d)&&(o.add(d),d(c,...p))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,p){return p?(s.components[d]=p,c):s.components[d]},directive(d,p){return p?(s.directives[d]=p,c):s.directives[d]},mount(d,p,v){if(!l){const g=c._ceVNode||mi(r,i);return g.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(g,d):t(g,d,v),l=!0,c._container=d,d.__vue_app__=c,km(g.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Yu(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return s.provides[d]=p,c},runWithContext(d){const p=lf;lf=c;try{return d()}finally{lf=p}}};return c}}let lf=null;function Rg(t,e){if(fa){let n=fa.provides;const r=fa.parent&&fa.parent.provides;r===n&&(n=fa.provides=Object.create(r)),n[t]=e}}function Eu(t,e,n=!1){const r=fa||pa;if(r||lf){const i=lf?lf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ir(e)?e.call(r&&r.proxy):e}}function LS(){return!!(fa||pa||lf)}const SS={},CS=()=>Object.create(SS),ES=t=>Object.getPrototypeOf(t)===SS;function PO(t,e,n,r=!1){const i={},s=CS();t.propsDefaults=Object.create(null),PS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:d_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function MO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Fi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Cy(t.emitsOptions,v))continue;const g=e[v];if(l)if(ts(s,v))g!==s[v]&&(s[v]=g,c=!0);else{const x=Ga(v);i[x]=$2(l,a,x,g,t,!1)}else g!==s[v]&&(s[v]=g,c=!0)}}}else{PS(t,e,i,s)&&(c=!0);let d;for(const p in a)(!e||!ts(e,p)&&((d=Ql(p))===p||!ts(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=$2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!ts(e,p))&&(delete s[p],c=!0)}c&&Ch(t.attrs,"set","")}function PS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(dp(l))continue;const c=e[l];let d;i&&ts(i,d=Ga(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:Cy(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Fi(n),c=a||ji;for(let d=0;d<s.length;d++){const p=s[d];n[p]=$2(i,l,p,c[p],t,!ts(c,p))}}return o}function $2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ts(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ir(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=mf(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ql(n))&&(r=!0))}return r}const kO=new WeakMap;function MS(t,e,n=!1){const r=n?kO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ir(t)){const d=p=>{l=!0;const[v,g]=MS(p,e,!0);_s(o,v),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return ds(t)&&r.set(t,cp),cp;if(lr(s))for(let d=0;d<s.length;d++){const p=Ga(s[d]);zx(p)&&(o[p]=ji)}else if(s)for(const d in s){const p=Ga(d);if(zx(p)){const v=s[d],g=o[p]=lr(v)||Ir(v)?{type:v}:_s({},v),x=g.type;let E=!1,k=!0;if(lr(x))for(let A=0;A<x.length;++A){const D=x[A],z=Ir(D)&&D.name;if(z==="Boolean"){E=!0;break}else z==="String"&&(k=!1)}else E=Ir(x)&&x.name==="Boolean";g[0]=E,g[1]=k,(E||ts(g,"default"))&&a.push(p)}}const c=[o,a];return ds(t)&&r.set(t,c),c}function zx(t){return t[0]!=="$"&&!dp(t)}const kS=t=>t[0]==="_"||t==="$stable",S_=t=>lr(t)?t.map(Jl):[Jl(t)],AO=(t,e,n)=>{if(e._n)return e;const r=Wu((...i)=>S_(e(...i)),n);return r._c=!1,r},AS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(kS(i))continue;const s=t[i];if(Ir(s))e[i]=AO(i,s,r);else if(s!=null){const o=S_(s);e[i]=()=>o}}},TS=(t,e)=>{const n=S_(e);t.slots.default=()=>n},DS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},TO=(t,e,n)=>{const r=t.slots=CS();if(t.vnode.shapeFlag&32){const i=e._;i?(DS(r,e,n),n&&EL(r,"_",i,!0)):AS(e,r)}else e&&TS(t,e)},DO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ji;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:DS(i,e,n):(s=!e.$stable,AS(e,i)),o=e}else e&&(TS(t,e),o={default:1});if(s)for(const a in i)!kS(a)&&o[a]==null&&delete i[a]},ca=WS;function OS(t){return IS(t)}function NS(t){return IS(t,z8)}function IS(t,e){const n=fy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:v,setScopeId:g=Gu,insertStaticContent:x}=t,E=(me,ee,se,de=null,ze=null,$e=null,et=void 0,Ge=null,Qe=!!ee.dynamicChildren)=>{if(me===ee)return;me&&!vc(me,ee)&&(de=te(me),W(me,ze,$e,!0),me=null),ee.patchFlag===-2&&(Qe=!1,ee.dynamicChildren=null);const{type:Ke,ref:xt,shapeFlag:bt}=ee;switch(Ke){case md:k(me,ee,se,de);break;case ia:A(me,ee,se,de);break;case uf:me==null&&D(ee,se,de,et);break;case wn:I(me,ee,se,de,ze,$e,et,Ge,Qe);break;default:bt&1?re(me,ee,se,de,ze,$e,et,Ge,Qe):bt&6?R(me,ee,se,de,ze,$e,et,Ge,Qe):(bt&64||bt&128)&&Ke.process(me,ee,se,de,ze,$e,et,Ge,Qe,Be)}xt!=null&&ze&&lm(xt,me&&me.ref,$e,ee||me,!ee)},k=(me,ee,se,de)=>{if(me==null)r(ee.el=a(ee.children),se,de);else{const ze=ee.el=me.el;ee.children!==me.children&&c(ze,ee.children)}},A=(me,ee,se,de)=>{me==null?r(ee.el=l(ee.children||""),se,de):ee.el=me.el},D=(me,ee,se,de)=>{[me.el,me.anchor]=x(me.children,ee,se,de,me.el,me.anchor)},z=({el:me,anchor:ee},se,de)=>{let ze;for(;me&&me!==ee;)ze=v(me),r(me,se,de),me=ze;r(ee,se,de)},X=({el:me,anchor:ee})=>{let se;for(;me&&me!==ee;)se=v(me),i(me),me=se;i(ee)},re=(me,ee,se,de,ze,$e,et,Ge,Qe)=>{ee.type==="svg"?et="svg":ee.type==="math"&&(et="mathml"),me==null?ge(ee,se,de,ze,$e,et,Ge,Qe):F(me,ee,ze,$e,et,Ge,Qe)},ge=(me,ee,se,de,ze,$e,et,Ge)=>{let Qe,Ke;const{props:xt,shapeFlag:bt,transition:yt,dirs:Wt}=me;if(Qe=me.el=o(me.type,$e,xt&&xt.is,xt),bt&8?d(Qe,me.children):bt&16&&N(me.children,Qe,null,de,ze,N1(me,$e),et,Ge),Wt&&Vc(me,null,de,"created"),fe(Qe,me,me.scopeId,et,de),xt){for(const yn in xt)yn!=="value"&&!dp(yn)&&s(Qe,yn,null,xt[yn],$e,de);"value"in xt&&s(Qe,"value",null,xt.value,$e),(Ke=xt.onVnodeBeforeMount)&&Xl(Ke,de,me)}Wt&&Vc(me,null,de,"beforeMount");const tn=BS(ze,yt);tn&&yt.beforeEnter(Qe),r(Qe,ee,se),((Ke=xt&&xt.onVnodeMounted)||tn||Wt)&&ca(()=>{Ke&&Xl(Ke,de,me),tn&&yt.enter(Qe),Wt&&Vc(me,null,de,"mounted")},ze)},fe=(me,ee,se,de,ze)=>{if(se&&g(me,se),de)for(let $e=0;$e<de.length;$e++)g(me,de[$e]);if(ze){let $e=ze.subTree;if(ee===$e||Av($e.type)&&($e.ssContent===ee||$e.ssFallback===ee)){const et=ze.vnode;fe(me,et,et.scopeId,et.slotScopeIds,ze.parent)}}},N=(me,ee,se,de,ze,$e,et,Ge,Qe=0)=>{for(let Ke=Qe;Ke<me.length;Ke++){const xt=me[Ke]=Ge?id(me[Ke]):Jl(me[Ke]);E(null,xt,ee,se,de,ze,$e,et,Ge)}},F=(me,ee,se,de,ze,$e,et)=>{const Ge=ee.el=me.el;let{patchFlag:Qe,dynamicChildren:Ke,dirs:xt}=ee;Qe|=me.patchFlag&16;const bt=me.props||ji,yt=ee.props||ji;let Wt;if(se&&zd(se,!1),(Wt=yt.onVnodeBeforeUpdate)&&Xl(Wt,se,ee,me),xt&&Vc(ee,me,se,"beforeUpdate"),se&&zd(se,!0),(bt.innerHTML&&yt.innerHTML==null||bt.textContent&&yt.textContent==null)&&d(Ge,""),Ke?Y(me.dynamicChildren,Ke,Ge,se,de,N1(ee,ze),$e):et||J(me,ee,Ge,null,se,de,N1(ee,ze),$e,!1),Qe>0){if(Qe&16)B(Ge,bt,yt,se,ze);else if(Qe&2&&bt.class!==yt.class&&s(Ge,"class",null,yt.class,ze),Qe&4&&s(Ge,"style",bt.style,yt.style,ze),Qe&8){const tn=ee.dynamicProps;for(let yn=0;yn<tn.length;yn++){const Ze=tn[yn],ot=bt[Ze],rt=yt[Ze];(rt!==ot||Ze==="value")&&s(Ge,Ze,ot,rt,ze,se)}}Qe&1&&me.children!==ee.children&&d(Ge,ee.children)}else!et&&Ke==null&&B(Ge,bt,yt,se,ze);((Wt=yt.onVnodeUpdated)||xt)&&ca(()=>{Wt&&Xl(Wt,se,ee,me),xt&&Vc(ee,me,se,"updated")},de)},Y=(me,ee,se,de,ze,$e,et)=>{for(let Ge=0;Ge<ee.length;Ge++){const Qe=me[Ge],Ke=ee[Ge],xt=Qe.el&&(Qe.type===wn||!vc(Qe,Ke)||Qe.shapeFlag&70)?p(Qe.el):se;E(Qe,Ke,xt,null,de,ze,$e,et,!0)}},B=(me,ee,se,de,ze)=>{if(ee!==se){if(ee!==ji)for(const $e in ee)!dp($e)&&!($e in se)&&s(me,$e,ee[$e],null,ze,de);for(const $e in se){if(dp($e))continue;const et=se[$e],Ge=ee[$e];et!==Ge&&$e!=="value"&&s(me,$e,Ge,et,ze,de)}"value"in se&&s(me,"value",ee.value,se.value,ze)}},I=(me,ee,se,de,ze,$e,et,Ge,Qe)=>{const Ke=ee.el=me?me.el:a(""),xt=ee.anchor=me?me.anchor:a("");let{patchFlag:bt,dynamicChildren:yt,slotScopeIds:Wt}=ee;Wt&&(Ge=Ge?Ge.concat(Wt):Wt),me==null?(r(Ke,se,de),r(xt,se,de),N(ee.children||[],se,xt,ze,$e,et,Ge,Qe)):bt>0&&bt&64&&yt&&me.dynamicChildren?(Y(me.dynamicChildren,yt,se,ze,$e,et,Ge),(ee.key!=null||ze&&ee===ze.subTree)&&C_(me,ee,!0)):J(me,ee,se,xt,ze,$e,et,Ge,Qe)},R=(me,ee,se,de,ze,$e,et,Ge,Qe)=>{ee.slotScopeIds=Ge,me==null?ee.shapeFlag&512?ze.ctx.activate(ee,se,de,et,Qe):q(ee,se,de,ze,$e,et,Qe):U(me,ee,Qe)},q=(me,ee,se,de,ze,$e,et)=>{const Ge=me.component=XS(me,de,ze);if(Pm(me)&&(Ge.ctx.renderer=Be),QS(Ge,!1,et),Ge.asyncDep){if(ze&&ze.registerDep(Ge,$,et),!me.el){const Qe=Ge.subTree=mi(ia);A(null,Qe,ee,se)}}else $(Ge,me,ee,se,ze,$e,et)},U=(me,ee,se)=>{const de=ee.component=me.component;if($O(me,ee,se))if(de.asyncDep&&!de.asyncResolved){oe(de,ee,se);return}else de.next=ee,de.update();else ee.el=me.el,de.vnode=ee},$=(me,ee,se,de,ze,$e,et)=>{const Ge=()=>{if(me.isMounted){let{next:bt,bu:yt,u:Wt,parent:tn,vnode:yn}=me;{const Zt=RS(me);if(Zt){bt&&(bt.el=yn.el,oe(me,bt,et)),Zt.asyncDep.then(()=>{me.isUnmounted||Ge()});return}}let Ze=bt,ot;zd(me,!1),bt?(bt.el=yn.el,oe(me,bt,et)):bt=yn,yt&&fp(yt),(ot=bt.props&&bt.props.onVnodeBeforeUpdate)&&Xl(ot,tn,bt,yn),zd(me,!0);const rt=Y0(me),$t=me.subTree;me.subTree=rt,E($t,rt,p($t.el),te($t),me,ze,$e),bt.el=rt.el,Ze===null&&Ey(me,rt.el),Wt&&ca(Wt,ze),(ot=bt.props&&bt.props.onVnodeUpdated)&&ca(()=>Xl(ot,tn,bt,yn),ze)}else{let bt;const{el:yt,props:Wt}=ee,{bm:tn,m:yn,parent:Ze,root:ot,type:rt}=me,$t=gd(ee);if(zd(me,!1),tn&&fp(tn),!$t&&(bt=Wt&&Wt.onVnodeBeforeMount)&&Xl(bt,Ze,ee),zd(me,!0),yt&&Je){const Zt=()=>{me.subTree=Y0(me),Je(yt,me.subTree,me,ze,null)};$t&&rt.__asyncHydrate?rt.__asyncHydrate(yt,me,Zt):Zt()}else{ot.ce&&ot.ce._injectChildStyle(rt);const Zt=me.subTree=Y0(me);E(null,Zt,se,de,me,ze,$e),ee.el=Zt.el}if(yn&&ca(yn,ze),!$t&&(bt=Wt&&Wt.onVnodeMounted)){const Zt=ee;ca(()=>Xl(bt,Ze,Zt),ze)}(ee.shapeFlag&256||Ze&&gd(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&me.a&&ca(me.a,ze),me.isMounted=!0,ee=se=de=null}};me.scope.on();const Qe=me.effect=new nm(Ge);me.scope.off();const Ke=me.update=Qe.run.bind(Qe),xt=me.job=Qe.runIfDirty.bind(Qe);xt.i=me,xt.id=me.uid,Qe.scheduler=()=>g_(xt),zd(me,!0),Ke()},oe=(me,ee,se)=>{ee.component=me;const de=me.vnode.props;me.vnode=ee,me.next=null,MO(me,ee.props,de,se),DO(me,ee.children,se),Ed(),kx(me),Pd()},J=(me,ee,se,de,ze,$e,et,Ge,Qe=!1)=>{const Ke=me&&me.children,xt=me?me.shapeFlag:0,bt=ee.children,{patchFlag:yt,shapeFlag:Wt}=ee;if(yt>0){if(yt&128){ve(Ke,bt,se,de,ze,$e,et,Ge,Qe);return}else if(yt&256){_e(Ke,bt,se,de,ze,$e,et,Ge,Qe);return}}Wt&8?(xt&16&&he(Ke,ze,$e),bt!==Ke&&d(se,bt)):xt&16?Wt&16?ve(Ke,bt,se,de,ze,$e,et,Ge,Qe):he(Ke,ze,$e,!0):(xt&8&&d(se,""),Wt&16&&N(bt,se,de,ze,$e,et,Ge,Qe))},_e=(me,ee,se,de,ze,$e,et,Ge,Qe)=>{me=me||cp,ee=ee||cp;const Ke=me.length,xt=ee.length,bt=Math.min(Ke,xt);let yt;for(yt=0;yt<bt;yt++){const Wt=ee[yt]=Qe?id(ee[yt]):Jl(ee[yt]);E(me[yt],Wt,se,null,ze,$e,et,Ge,Qe)}Ke>xt?he(me,ze,$e,!0,!1,bt):N(ee,se,de,ze,$e,et,Ge,Qe,bt)},ve=(me,ee,se,de,ze,$e,et,Ge,Qe)=>{let Ke=0;const xt=ee.length;let bt=me.length-1,yt=xt-1;for(;Ke<=bt&&Ke<=yt;){const Wt=me[Ke],tn=ee[Ke]=Qe?id(ee[Ke]):Jl(ee[Ke]);if(vc(Wt,tn))E(Wt,tn,se,null,ze,$e,et,Ge,Qe);else break;Ke++}for(;Ke<=bt&&Ke<=yt;){const Wt=me[bt],tn=ee[yt]=Qe?id(ee[yt]):Jl(ee[yt]);if(vc(Wt,tn))E(Wt,tn,se,null,ze,$e,et,Ge,Qe);else break;bt--,yt--}if(Ke>bt){if(Ke<=yt){const Wt=yt+1,tn=Wt<xt?ee[Wt].el:de;for(;Ke<=yt;)E(null,ee[Ke]=Qe?id(ee[Ke]):Jl(ee[Ke]),se,tn,ze,$e,et,Ge,Qe),Ke++}}else if(Ke>yt)for(;Ke<=bt;)W(me[Ke],ze,$e,!0),Ke++;else{const Wt=Ke,tn=Ke,yn=new Map;for(Ke=tn;Ke<=yt;Ke++){const An=ee[Ke]=Qe?id(ee[Ke]):Jl(ee[Ke]);An.key!=null&&yn.set(An.key,Ke)}let Ze,ot=0;const rt=yt-tn+1;let $t=!1,Zt=0;const Dn=new Array(rt);for(Ke=0;Ke<rt;Ke++)Dn[Ke]=0;for(Ke=Wt;Ke<=bt;Ke++){const An=me[Ke];if(ot>=rt){W(An,ze,$e,!0);continue}let Jn;if(An.key!=null)Jn=yn.get(An.key);else for(Ze=tn;Ze<=yt;Ze++)if(Dn[Ze-tn]===0&&vc(An,ee[Ze])){Jn=Ze;break}Jn===void 0?W(An,ze,$e,!0):(Dn[Jn-tn]=Ke+1,Jn>=Zt?Zt=Jn:$t=!0,E(An,ee[Jn],se,null,ze,$e,et,Ge,Qe),ot++)}const mn=$t?OO(Dn):cp;for(Ze=mn.length-1,Ke=rt-1;Ke>=0;Ke--){const An=tn+Ke,Jn=ee[An],Qt=An+1<xt?ee[An+1].el:de;Dn[Ke]===0?E(null,Jn,se,Qt,ze,$e,et,Ge,Qe):$t&&(Ze<0||Ke!==mn[Ze]?ke(Jn,se,Qt,2):Ze--)}}},ke=(me,ee,se,de,ze=null)=>{const{el:$e,type:et,transition:Ge,children:Qe,shapeFlag:Ke}=me;if(Ke&6){ke(me.component.subTree,ee,se,de);return}if(Ke&128){me.suspense.move(ee,se,de);return}if(Ke&64){et.move(me,ee,se,Be);return}if(et===wn){r($e,ee,se);for(let bt=0;bt<Qe.length;bt++)ke(Qe[bt],ee,se,de);r(me.anchor,ee,se);return}if(et===uf){z(me,ee,se);return}if(de!==2&&Ke&1&&Ge)if(de===0)Ge.beforeEnter($e),r($e,ee,se),ca(()=>Ge.enter($e),ze);else{const{leave:bt,delayLeave:yt,afterLeave:Wt}=Ge,tn=()=>r($e,ee,se),yn=()=>{bt($e,()=>{tn(),Wt&&Wt()})};yt?yt($e,tn,yn):yn()}else r($e,ee,se)},W=(me,ee,se,de=!1,ze=!1)=>{const{type:$e,props:et,ref:Ge,children:Qe,dynamicChildren:Ke,shapeFlag:xt,patchFlag:bt,dirs:yt,cacheIndex:Wt}=me;if(bt===-2&&(ze=!1),Ge!=null&&lm(Ge,null,se,me,!0),Wt!=null&&(ee.renderCache[Wt]=void 0),xt&256){ee.ctx.deactivate(me);return}const tn=xt&1&&yt,yn=!gd(me);let Ze;if(yn&&(Ze=et&&et.onVnodeBeforeUnmount)&&Xl(Ze,ee,me),xt&6)pe(me.component,se,de);else{if(xt&128){me.suspense.unmount(se,de);return}tn&&Vc(me,null,ee,"beforeUnmount"),xt&64?me.type.remove(me,ee,se,Be,de):Ke&&!Ke.hasOnce&&($e!==wn||bt>0&&bt&64)?he(Ke,ee,se,!1,!0):($e===wn&&bt&384||!ze&&xt&16)&&he(Qe,ee,se),de&&V(me)}(yn&&(Ze=et&&et.onVnodeUnmounted)||tn)&&ca(()=>{Ze&&Xl(Ze,ee,me),tn&&Vc(me,null,ee,"unmounted")},se)},V=me=>{const{type:ee,el:se,anchor:de,transition:ze}=me;if(ee===wn){K(se,de);return}if(ee===uf){X(me);return}const $e=()=>{i(se),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(me.shapeFlag&1&&ze&&!ze.persisted){const{leave:et,delayLeave:Ge}=ze,Qe=()=>et(se,$e);Ge?Ge(me.el,$e,Qe):Qe()}else $e()},K=(me,ee)=>{let se;for(;me!==ee;)se=v(me),i(me),me=se;i(ee)},pe=(me,ee,se)=>{const{bum:de,scope:ze,job:$e,subTree:et,um:Ge,m:Qe,a:Ke}=me;kv(Qe),kv(Ke),de&&fp(de),ze.stop(),$e&&($e.flags|=8,W(et,me,ee,se)),Ge&&ca(Ge,ee),ca(()=>{me.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&me.asyncDep&&!me.asyncResolved&&me.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},he=(me,ee,se,de=!1,ze=!1,$e=0)=>{for(let et=$e;et<me.length;et++)W(me[et],ee,se,de,ze)},te=me=>{if(me.shapeFlag&6)return te(me.component.subTree);if(me.shapeFlag&128)return me.suspense.next();const ee=v(me.anchor||me.el),se=ee&&ee[nS];return se?v(se):ee};let le=!1;const Q=(me,ee,se)=>{me==null?ee._vnode&&W(ee._vnode,null,null,!0):E(ee._vnode||null,me,ee,null,null,null,se),ee._vnode=me,le||(le=!0,kx(),Pv(),le=!1)},Be={p:E,um:W,m:ke,r:V,mt:q,mc:N,pc:J,pbc:Y,n:te,o:t};let De,Je;return e&&([De,Je]=e(Be)),{render:Q,hydrate:De,createApp:EO(Q,De)}}function N1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function zd({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function BS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function C_(t,e,n=!1){const r=t.children,i=e.children;if(lr(r)&&lr(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=id(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&C_(o,a)),a.type===md&&(a.el=o.el)}}function OO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function RS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:RS(e)}function kv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const FS=Symbol.for("v-scx"),jS=()=>Eu(FS);function cm(t,e){return Mm(t,null,e)}function NO(t,e){return Mm(t,null,{flush:"post"})}function zS(t,e){return Mm(t,null,{flush:"sync"})}function Ai(t,e,n){return Mm(t,e,n)}function Mm(t,e,n=ji){const{immediate:r,deep:i,flush:s,once:o}=n,a=_s({},n),l=e&&r||!e&&s!=="post";let c;if(xp){if(s==="sync"){const g=jS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Gu,g.resume=Gu,g.pause=Gu,g}}const d=fa;a.call=(g,x,E)=>Yu(g,d,x,E);let p=!1;s==="post"?a.scheduler=g=>{ca(g,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(g,x)=>{x?g():g_(g)}),a.augmentJob=g=>{e&&(g.flags|=4),p&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const v=L8(t,e,a);return xp&&(c?c.push(v):l&&v()),v}function IO(t,e,n){const r=this.proxy,i=As(t)?t.includes(".")?$S(r,t):()=>r[t]:t.bind(r,r);let s;Ir(e)?s=e:(s=e.handler,n=e);const o=mf(this),a=Mm(i,s.bind(r),n);return o(),a}function $S(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function BO(t,e,n=ji){const r=Xu(),i=Ga(e),s=Ql(e),o=VS(t,i),a=qL((l,c)=>{let d,p=ji,v;return zS(()=>{const g=t[i];Dl(d,g)&&(d=g,c())}),{get(){return l(),n.get?n.get(d):d},set(g){const x=n.set?n.set(g):g;if(!Dl(x,d)&&!(p!==ji&&Dl(g,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(d=g,c()),r.emit(`update:${e}`,x),Dl(g,x)&&Dl(g,p)&&!Dl(x,v)&&c(),p=g,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||ji:a,done:!1}:{done:!0}}}},a}const VS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ga(e)}Modifiers`]||t[`${Ql(e)}Modifiers`];function RO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ji;let i=n;const s=e.startsWith("update:"),o=s&&VS(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>As(d)?d.trim():d)),o.number&&(i=n.map(xv)));let a,l=r[a=Tg(e)]||r[a=Tg(Ga(e))];!l&&s&&(l=r[a=Tg(Ql(e))]),l&&Yu(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Yu(c,t,6,i)}}function US(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ir(t)){const l=c=>{const d=US(c,e,!0);d&&(a=!0,_s(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ds(t)&&r.set(t,null),null):(lr(s)?s.forEach(l=>o[l]=null):_s(o,s),ds(t)&&r.set(t,o),o)}function Cy(t,e){return!t||!Cm(e)?!1:(e=e.slice(2).replace(/Once$/,""),ts(t,e[0].toLowerCase()+e.slice(1))||ts(t,Ql(e))||ts(t,e))}function Y0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:p,data:v,setupState:g,ctx:x,inheritAttrs:E}=t,k=am(t);let A,D;try{if(n.shapeFlag&4){const X=i||r,re=X;A=Jl(c.call(re,X,d,p,g,v,x)),D=a}else{const X=e;A=Jl(X.length>1?X(p,{attrs:a,slots:o,emit:l}):X(p,null)),D=e.props?a:jO(a)}}catch(X){Fg.length=0,xf(X,t,1),A=mi(ia)}let z=A;if(D&&E!==!1){const X=Object.keys(D),{shapeFlag:re}=z;X.length&&re&7&&(s&&X.some(n_)&&(D=zO(D,s)),z=Qc(z,D,!1,!0))}return n.dirs&&(z=Qc(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Nh(z,n.transition),A=z,am(k),A}function FO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Ih(i)){if(i.type!==ia||i.children==="v-if"){if(n)return;n=i}}else return}return n}const jO=t=>{let e;for(const n in t)(n==="class"||n==="style"||Cm(n))&&((e||(e={}))[n]=t[n]);return e},zO=(t,e)=>{const n={};for(const r in t)(!n_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function $O(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$x(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!Cy(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$x(r,o,c):!0:!!o;return!1}function $x(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Cy(n,s))return!0}return!1}function Ey({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Av=t=>t.__isSuspense;let V2=0;const VO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)HO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}WO(t,e,n,r,i,o,a,l,c)}},hydrate:GO,normalize:qO},UO=VO;function hm(t,e){const n=t.props&&t.props[e];Ir(n)&&n()}function HO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:d}}=l,p=d("div"),v=t.suspense=HS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(hm(t,"onPending"),hm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),gp(v,t.ssFallback)):v.resolve(!1,!0)}function WO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:d}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,g=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:k,isHydrating:A}=p;if(E)p.pendingBranch=v,vc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(A||(l(x,g,n,r,i,null,s,o,a),gp(p,g)))):(p.pendingId=V2++,A?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,g,n,r,i,null,s,o,a),gp(p,g))):x&&vc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&vc(v,x))l(x,v,n,r,i,p,s,o,a),gp(p,v);else if(hm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=V2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:z}=p;D>0?setTimeout(()=>{p.pendingId===z&&p.fallback(g)},D):D===0&&p.fallback(g)}}function HS(t,e,n,r,i,s,o,a,l,c,d=!1){const{p,m:v,um:g,n:x,o:{parentNode:E,remove:k}}=c;let A;const D=YO(t);D&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const z=t.props?Lv(t.props.timeout):void 0,X=s,re={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:V2++,timeout:typeof z=="number"?z:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(ge=!1,fe=!1){const{vnode:N,activeBranch:F,pendingBranch:Y,pendingId:B,effects:I,parentComponent:R,container:q}=re;let U=!1;re.isHydrating?re.isHydrating=!1:ge||(U=F&&Y.transition&&Y.transition.mode==="out-in",U&&(F.transition.afterLeave=()=>{B===re.pendingId&&(v(Y,q,s===X?x(F):s,0),sm(I))}),F&&(E(F.el)===q&&(s=x(F)),g(F,R,re,!0)),U||v(Y,q,s,0)),gp(re,Y),re.pendingBranch=null,re.isInFallback=!1;let $=re.parent,oe=!1;for(;$;){if($.pendingBranch){$.effects.push(...I),oe=!0;break}$=$.parent}!oe&&!U&&sm(I),re.effects=[],D&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!fe&&e.resolve()),hm(N,"onResolve")},fallback(ge){if(!re.pendingBranch)return;const{vnode:fe,activeBranch:N,parentComponent:F,container:Y,namespace:B}=re;hm(fe,"onFallback");const I=x(N),R=()=>{re.isInFallback&&(p(null,ge,Y,I,F,null,B,a,l),gp(re,ge))},q=ge.transition&&ge.transition.mode==="out-in";q&&(N.transition.afterLeave=R),re.isInFallback=!0,g(N,F,null,!0),q||R()},move(ge,fe,N){re.activeBranch&&v(re.activeBranch,ge,fe,N),re.container=ge},next(){return re.activeBranch&&x(re.activeBranch)},registerDep(ge,fe,N){const F=!!re.pendingBranch;F&&re.deps++;const Y=ge.vnode.el;ge.asyncDep.catch(B=>{xf(B,ge,0)}).then(B=>{if(ge.isUnmounted||re.isUnmounted||re.pendingId!==ge.suspenseId)return;ge.asyncResolved=!0;const{vnode:I}=ge;G2(ge,B,!1),Y&&(I.el=Y);const R=!Y&&ge.subTree.el;fe(ge,I,E(Y||ge.subTree.el),Y?null:x(ge.subTree),re,o,N),R&&k(R),Ey(ge,I.el),F&&--re.deps===0&&re.resolve()})},unmount(ge,fe){re.isUnmounted=!0,re.activeBranch&&g(re.activeBranch,n,ge,fe),re.pendingBranch&&g(re.pendingBranch,n,ge,fe)}};return re}function GO(t,e,n,r,i,s,o,a,l){const c=e.suspense=HS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),d=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),d}function qO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Vx(r?n.default:n),t.ssFallback=r?Vx(n.fallback):mi(ia)}function Vx(t){let e;if(Ir(t)){const n=gf&&t._c;n&&(t._d=!1,Ae()),t=t(),n&&(t._d=!0,e=ml,GS())}return lr(t)&&(t=FO(t)),t=Jl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function WS(t,e){e&&e.pendingBranch?lr(t)?e.effects.push(...t):e.effects.push(t):sm(t)}function gp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Ey(r,i))}function YO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const wn=Symbol.for("v-fgt"),md=Symbol.for("v-txt"),ia=Symbol.for("v-cmt"),uf=Symbol.for("v-stc"),Fg=[];let ml=null;function Ae(t=!1){Fg.push(ml=t?null:[])}function GS(){Fg.pop(),ml=Fg[Fg.length-1]||null}let gf=1;function U2(t,e=!1){gf+=t,t<0&&ml&&e&&(ml.hasOnce=!0)}function qS(t){return t.dynamicChildren=gf>0?ml||cp:null,GS(),gf>0&&ml&&ml.push(t),t}function Ne(t,e,n,r,i,s){return qS(C(t,e,n,r,i,s,!0))}function da(t,e,n,r,i){return qS(mi(t,e,n,r,i,!0))}function Ih(t){return t?t.__v_isVNode===!0:!1}function vc(t,e){return t.type===e.type&&t.key===e.key}function KO(t){}const YS=({key:t})=>t??null,K0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?As(t)||go(t)||Ir(t)?{i:pa,r:t,k:e,f:!!n}:t:null);function C(t,e=null,n=null,r=0,i=null,s=t===wn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&YS(e),ref:e&&K0(e),scopeId:wy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:pa};return a?(E_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=As(n)?8:16),gf>0&&!o&&ml&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ml.push(l),l}const mi=ZO;function ZO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===bS)&&(t=ia),Ih(t)){const a=Qc(t,e,!0);return n&&E_(a,n),gf>0&&!s&&ml&&(a.shapeFlag&6?ml[ml.indexOf(t)]=a:ml.push(a)),a.patchFlag=-2,a}if(rN(t)&&(t=t.__vccOpts),e){e=KS(e);let{class:a,style:l}=e;a&&!As(a)&&(e.class=gi(a)),ds(l)&&(by(l)&&!lr(l)&&(l=_s({},l)),e.style=Nl(l))}const o=As(t)?1:Av(t)?128:rS(t)?64:ds(t)?4:Ir(t)?2:0;return C(t,e,n,r,i,o,s,!0)}function KS(t){return t?by(t)||ES(t)?_s({},t):t:null}function Qc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?ZS(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&YS(c),ref:e&&e.ref?n&&s?lr(s)?s.concat(K0(e)):[s,K0(e)]:K0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==wn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qc(t.ssContent),ssFallback:t.ssFallback&&Qc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Nh(d,l.clone(d)),d}function ci(t=" ",e=0){return mi(md,null,t,e)}function Lu(t,e){const n=mi(uf,null,t);return n.staticCount=e,n}function Jt(t="",e=!1){return e?(Ae(),da(ia,null,t)):mi(ia,null,t)}function Jl(t){return t==null||typeof t=="boolean"?mi(ia):lr(t)?mi(wn,null,t.slice()):Ih(t)?id(t):mi(md,null,String(t))}function id(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qc(t)}function E_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(lr(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),E_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!ES(e)?e._ctx=pa:i===3&&pa&&(pa.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ir(e)?(e={default:e,_ctx:pa},n=32):(e=String(e),r&64?(n=16,e=[ci(e)]):n=8);t.children=e,t.shapeFlag|=n}function ZS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=gi([e.class,r.class]));else if(i==="style")e.style=Nl([e.style,r.style]);else if(Cm(i)){const s=e[i],o=r[i];o&&s!==o&&!(lr(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Xl(t,e,n,r=null){Yu(t,e,7,[n,r])}const XO=xS();let JO=0;function XS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||XO,s={uid:JO++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new o_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:MS(r,i),emitsOptions:US(r,i),emit:null,emitted:null,propsDefaults:ji,inheritAttrs:r.inheritAttrs,ctx:ji,data:ji,props:ji,attrs:ji,slots:ji,refs:ji,setupState:ji,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=RO.bind(null,s),t.ce&&t.ce(s),s}let fa=null;const Xu=()=>fa||pa;let Tv,H2;{const t=fy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Tv=e("__VUE_INSTANCE_SETTERS__",n=>fa=n),H2=e("__VUE_SSR_SETTERS__",n=>xp=n)}const mf=t=>{const e=fa;return Tv(t),t.scope.on(),()=>{t.scope.off(),Tv(e)}},W2=()=>{fa&&fa.scope.off(),Tv(null)};function JS(t){return t.vnode.shapeFlag&4}let xp=!1;function QS(t,e=!1,n=!1){e&&H2(e);const{props:r,children:i}=t.vnode,s=JS(t);PO(t,r,s,e),TO(t,i,n);const o=s?QO(t,e):void 0;return e&&H2(!1),o}function QO(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,F2);const{setup:r}=n;if(r){Ed();const i=t.setupContext=r.length>1?tC(t):null,s=mf(t),o=Ip(r,t,0,[t.props,i]),a=i_(o);if(Pd(),s(),(a||t.sp)&&!gd(t)&&y_(t),a){if(o.then(W2,W2),e)return o.then(l=>{G2(t,l,e)}).catch(l=>{xf(l,t,0)});t.asyncDep=o}else G2(t,o,e)}else eC(t,e)}function G2(t,e,n){Ir(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ds(e)&&(t.setupState=p_(e)),eC(t,n)}let Dv,q2;function eN(t){Dv=t,q2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,oO))}}const tN=()=>!Dv;function eC(t,e,n){const r=t.type;if(!t.render){if(!e&&Dv&&!r.render){const i=r.template||L_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=_s(_s({isCustomElement:s,delimiters:a},o),l);r.render=Dv(i,c)}}t.render=r.render||Gu,q2&&q2(t)}{const i=mf(t);Ed();try{_O(t)}finally{Pd(),i()}}}const nN={get(t,e){return hl(t,"get",""),t[e]}};function tC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,nN),slots:t.slots,emit:t.emit,expose:e}}function km(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(p_(_y(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Bg)return Bg[n](t)},has(e,n){return n in e||n in Bg}})):t.proxy}function Y2(t,e=!0){return Ir(t)?t.displayName||t.name:t.name||e&&t.__name}function rN(t){return Ir(t)&&"__vccOpts"in t}const Xn=(t,e)=>b8(t,e,xp);function Py(t,e,n){const r=arguments.length;return r===2?ds(e)&&!lr(e)?Ih(e)?mi(t,null,[e]):mi(t,e):mi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ih(n)&&(n=[n]),mi(t,e,n))}function iN(){}function sN(t,e,n,r){const i=n[r];if(i&&nC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function nC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Dl(n[r],e[r]))return!1;return gf>0&&ml&&ml.push(t),!0}const rC="3.5.13",oN=Gu,aN=M8,lN=tp,uN=tS,cN={createComponentInstance:XS,setupComponent:QS,renderComponentRoot:Y0,setCurrentRenderingInstance:am,isVNode:Ih,normalizeVNode:Jl,getComponentPublicInstance:km,ensureValidVNode:x_,pushWarningContext:S8,popWarningContext:C8},hN=cN,dN=null,fN=null,pN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let K2;const Ux=typeof window<"u"&&window.trustedTypes;if(Ux)try{K2=Ux.createPolicy("vue",{createHTML:t=>t})}catch{}const iC=K2?t=>K2.createHTML(t):t=>t,gN="http://www.w3.org/2000/svg",mN="http://www.w3.org/1998/Math/MathML",Lh=typeof document<"u"?document:null,Hx=Lh&&Lh.createElement("template"),vN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Lh.createElementNS(gN,t):e==="mathml"?Lh.createElementNS(mN,t):n?Lh.createElement(t,{is:n}):Lh.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Lh.createTextNode(t),createComment:t=>Lh.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Lh.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Hx.innerHTML=iC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Hx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},qh="transition",Kp="animation",Lp=Symbol("_vtc"),sC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},oC=_s({},v_,sC),yN=t=>(t.displayName="Transition",t.props=oC,t),Z2=yN((t,{slots:e})=>Py(lS,aC(t),e)),$d=(t,e=[])=>{lr(t)?t.forEach(n=>n(...e)):t&&t(...e)},Wx=t=>t?lr(t)?t.some(e=>e.length>1):t.length>1:!1;function aC(t){const e={};for(const I in t)I in sC||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,x=bN(i),E=x&&x[0],k=x&&x[1],{onBeforeEnter:A,onEnter:D,onEnterCancelled:z,onLeave:X,onLeaveCancelled:re,onBeforeAppear:ge=A,onAppear:fe=D,onAppearCancelled:N=z}=e,F=(I,R,q,U)=>{I._enterCancelled=U,Qh(I,R?d:a),Qh(I,R?c:o),q&&q()},Y=(I,R)=>{I._isLeaving=!1,Qh(I,p),Qh(I,g),Qh(I,v),R&&R()},B=I=>(R,q)=>{const U=I?fe:D,$=()=>F(R,I,q);$d(U,[R,$]),Gx(()=>{Qh(R,I?l:s),Rc(R,I?d:a),Wx(U)||qx(R,r,E,$)})};return _s(e,{onBeforeEnter(I){$d(A,[I]),Rc(I,s),Rc(I,o)},onBeforeAppear(I){$d(ge,[I]),Rc(I,l),Rc(I,c)},onEnter:B(!1),onAppear:B(!0),onLeave(I,R){I._isLeaving=!0;const q=()=>Y(I,R);Rc(I,p),I._enterCancelled?(Rc(I,v),X2()):(X2(),Rc(I,v)),Gx(()=>{I._isLeaving&&(Qh(I,p),Rc(I,g),Wx(X)||qx(I,r,k,q))}),$d(X,[I,q])},onEnterCancelled(I){F(I,!1,void 0,!0),$d(z,[I])},onAppearCancelled(I){F(I,!0,void 0,!0),$d(N,[I])},onLeaveCancelled(I){Y(I),$d(re,[I])}})}function bN(t){if(t==null)return null;if(ds(t))return[I1(t.enter),I1(t.leave)];{const e=I1(t);return[e,e]}}function I1(t){return Lv(t)}function Rc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Lp]||(t[Lp]=new Set)).add(e)}function Qh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Lp];n&&(n.delete(e),n.size||(t[Lp]=void 0))}function Gx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _N=0;function qx(t,e,n,r){const i=t._endId=++_N,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=lC(t,e);if(!o)return r();const c=o+"end";let d=0;const p=()=>{t.removeEventListener(c,v),s()},v=g=>{g.target===t&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),t.addEventListener(c,v)}function lC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${qh}Delay`),s=r(`${qh}Duration`),o=Yx(i,s),a=r(`${Kp}Delay`),l=r(`${Kp}Duration`),c=Yx(a,l);let d=null,p=0,v=0;e===qh?o>0&&(d=qh,p=o,v=s.length):e===Kp?c>0&&(d=Kp,p=c,v=l.length):(p=Math.max(o,c),d=p>0?o>c?qh:Kp:null,v=d?d===qh?s.length:l.length:0);const g=d===qh&&/\b(transform|all)(,|$)/.test(r(`${qh}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:g}}function Yx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Kx(n)+Kx(t[r])))}function Kx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function X2(){return document.body.offsetHeight}function wN(t,e,n){const r=t[Lp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ov=Symbol("_vod"),uC=Symbol("_vsh"),P_={beforeMount(t,{value:e},{transition:n}){t[Ov]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Zp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Zp(t,!0),r.enter(t)):r.leave(t,()=>{Zp(t,!1)}):Zp(t,e))},beforeUnmount(t,{value:e}){Zp(t,e)}};function Zp(t,e){t.style.display=e?t[Ov]:"none",t[uC]=!e}function xN(){P_.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const cC=Symbol("");function LN(t){const e=Xu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Nv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Nv(e.ce,i):J2(e.subTree,i),n(i)};b_(()=>{sm(r)}),Zs(()=>{Ai(r,Gu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ku(()=>i.disconnect())})}function J2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{J2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Nv(t.el,e);else if(t.type===wn)t.children.forEach(n=>J2(n,e));else if(t.type===uf){let{el:n,anchor:r}=t;for(;n&&(Nv(n,e),n!==r);)n=n.nextSibling}}function Nv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[cC]=r}}const SN=/(^|;)\s*display\s*:/;function CN(t,e,n){const r=t.style,i=As(n);let s=!1;if(n&&!i){if(e)if(As(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Z0(r,a,"")}else for(const o in e)n[o]==null&&Z0(r,o,"");for(const o in n)o==="display"&&(s=!0),Z0(r,o,n[o])}else if(i){if(e!==n){const o=r[cC];o&&(n+=";"+o),r.cssText=n,s=SN.test(n)}}else e&&t.removeAttribute("style");Ov in t&&(t[Ov]=s?r.display:"",t[uC]&&(r.display="none"))}const Zx=/\s*!important$/;function Z0(t,e,n){if(lr(n))n.forEach(r=>Z0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=EN(t,e);Zx.test(n)?t.setProperty(Ql(r),n.replace(Zx,""),"important"):t[r]=n}}const Xx=["Webkit","Moz","ms"],B1={};function EN(t,e){const n=B1[e];if(n)return n;let r=Ga(e);if(r!=="filter"&&r in t)return B1[e]=r;r=Em(r);for(let i=0;i<Xx.length;i++){const s=Xx[i]+r;if(s in t)return B1[e]=s}return e}const Jx="http://www.w3.org/1999/xlink";function Qx(t,e,n,r,i,s=zD(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Jx,e.slice(6,e.length)):t.setAttributeNS(Jx,e,n):n==null||s&&!PL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":xc(n)?String(n):n)}function e4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?iC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=PL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ph(t,e,n,r){t.addEventListener(e,n,r)}function PN(t,e,n,r){t.removeEventListener(e,n,r)}const t4=Symbol("_vei");function MN(t,e,n,r,i=null){const s=t[t4]||(t[t4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=kN(e);if(r){const c=s[e]=DN(r,i);Ph(t,a,c,l)}else o&&(PN(t,a,o,l),s[e]=void 0)}}const n4=/(?:Once|Passive|Capture)$/;function kN(t){let e;if(n4.test(t)){e={};let r;for(;r=t.match(n4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ql(t.slice(2)),e]}let R1=0;const AN=Promise.resolve(),TN=()=>R1||(AN.then(()=>R1=0),R1=Date.now());function DN(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Yu(ON(r,n.value),e,5,[r])};return n.value=t,n.attached=TN(),n}function ON(t,e){if(lr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const r4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,NN=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?wN(t,r,o):e==="style"?CN(t,n,r):Cm(e)?n_(e)||MN(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):IN(t,e,r,o))?(e4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Qx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!As(r))?e4(t,Ga(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Qx(t,e,r,o))};function IN(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&r4(e)&&Ir(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return r4(e)&&As(n)?!1:e in t}const i4={};/*! #__NO_SIDE_EFFECTS__ */function hC(t,e,n){const r=Rs(t,e);hy(r)&&_s(r,e);class i extends My{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const BN=(t,e)=>hC(t,e,wC),RN=typeof HTMLElement<"u"?HTMLElement:class{};class My extends RN{constructor(e,n={},r=Bv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Bv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof My){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,ha(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!lr(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Lv(this._props[l])),(a||(a=Object.create(null)))[Ga(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)ts(this,r)||Object.defineProperty(this,r,{get:()=>qn(n[r])})}_resolveProps(e){const{props:n}=e,r=lr(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Ga))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):i4;const i=Ga(e);n&&this._numberProps&&this._numberProps[i]&&(r=Lv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===i4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Ql(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ql(e),n+""):n||this.removeAttribute(Ql(e)),s&&s.observe(this,{attributes:!0})}}_update(){_C(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=mi(this._def,_s(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,hy(o[0])?_s({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Ql(s)!==s&&i(Ql(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",d=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=d.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function dC(t){const e=Xu(),n=e&&e.ce;return n||null}function FN(){const t=dC();return t&&t.shadowRoot}function jN(t="$style"){{const e=Xu();if(!e)return ji;const n=e.type.__cssModules;if(!n)return ji;const r=n[t];return r||ji}}const fC=new WeakMap,pC=new WeakMap,Iv=Symbol("_moveCb"),s4=Symbol("_enterCb"),zN=t=>(delete t.props.mode,t),$N=zN({name:"TransitionGroup",props:_s({},oC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Xu(),r=m_();let i,s;return Sy(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!GN(i[0].el,n.vnode.el,o))return;i.forEach(UN),i.forEach(HN);const a=i.filter(WN);X2(),a.forEach(l=>{const c=l.el,d=c.style;Rc(c,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=c[Iv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Iv]=null,Qh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=Fi(t),a=aC(o);let l=o.tag||wn;if(i=[],s)for(let c=0;c<s.length;c++){const d=s[c];d.el&&d.el instanceof Element&&(i.push(d),Nh(d,wp(d,a,r,n)),fC.set(d,d.el.getBoundingClientRect()))}s=e.default?xy(e.default()):[];for(let c=0;c<s.length;c++){const d=s[c];d.key!=null&&Nh(d,wp(d,a,r,n))}return mi(l,null,s)}}}),VN=$N;function UN(t){const e=t.el;e[Iv]&&e[Iv](),e[s4]&&e[s4]()}function HN(t){pC.set(t,t.el.getBoundingClientRect())}function WN(t){const e=fC.get(t),n=pC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function GN(t,e,n){const r=t.cloneNode(),i=t[Lp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=lC(r);return s.removeChild(r),o}const wd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return lr(e)?n=>fp(e,n):e};function qN(t){t.target.composing=!0}function o4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qu=Symbol("_assign"),Li={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[qu]=wd(i);const s=r||i.props&&i.props.type==="number";Ph(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=xv(a)),t[qu](a)}),n&&Ph(t,"change",()=>{t.value=t.value.trim()}),e||(Ph(t,"compositionstart",qN),Ph(t,"compositionend",o4),Ph(t,"change",o4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[qu]=wd(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?xv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},ky={deep:!0,created(t,e,n){t[qu]=wd(n),Ph(t,"change",()=>{const r=t._modelValue,i=Sp(t),s=t.checked,o=t[qu];if(lr(r)){const a=py(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(wf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(gC(t,s))})},mounted:a4,beforeUpdate(t,e,n){t[qu]=wd(n),a4(t,e,n)}};function a4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(lr(e))i=py(e,r.props.value)>-1;else if(wf(e))i=e.has(r.props.value);else{if(e===n)return;i=bd(e,gC(t,!0))}t.checked!==i&&(t.checked=i)}const M_={created(t,{value:e},n){t.checked=bd(e,n.props.value),t[qu]=wd(n),Ph(t,"change",()=>{t[qu](Sp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[qu]=wd(r),e!==n&&(t.checked=bd(e,r.props.value))}},us={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=wf(e);Ph(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?xv(Sp(o)):Sp(o));t[qu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,ha(()=>{t._assigning=!1})}),t[qu]=wd(r)},mounted(t,{value:e}){l4(t,e)},beforeUpdate(t,e,n){t[qu]=wd(n)},updated(t,{value:e}){t._assigning||l4(t,e)}};function l4(t,e){const n=t.multiple,r=lr(e);if(!(n&&!r&&!wf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Sp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=py(e,a)>-1}else o.selected=e.has(a);else if(bd(Sp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Sp(t){return"_value"in t?t._value:t.value}function gC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const k_={created(t,e,n){m0(t,e,n,null,"created")},mounted(t,e,n){m0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){m0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){m0(t,e,n,r,"updated")}};function mC(t,e){switch(t){case"SELECT":return us;case"TEXTAREA":return Li;default:switch(e){case"checkbox":return ky;case"radio":return M_;default:return Li}}}function m0(t,e,n,r,i){const o=mC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function YN(){Li.getSSRProps=({value:t})=>({value:t}),M_.getSSRProps=({value:t},e)=>{if(e.props&&bd(e.props.value,t))return{checked:!0}},ky.getSSRProps=({value:t},e)=>{if(lr(t)){if(e.props&&py(t,e.props.value)>-1)return{checked:!0}}else if(wf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},k_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=mC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const KN=["ctrl","shift","alt","meta"],ZN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>KN.some(n=>t[`${n}Key`]&&!e.includes(n))},tu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=ZN[e[o]];if(a&&a(i,e))return}return t(i,...s)})},XN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JN=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Ql(i.key);if(e.some(o=>o===s||XN[o]===s))return t(i)})},vC=_s({patchProp:NN},vN);let jg,u4=!1;function yC(){return jg||(jg=OS(vC))}function bC(){return jg=u4?jg:NS(vC),u4=!0,jg}const _C=(...t)=>{yC().render(...t)},QN=(...t)=>{bC().hydrate(...t)},Bv=(...t)=>{const e=yC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LC(r);if(!i)return;const s=e._component;!Ir(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,xC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},wC=(...t)=>{const e=bC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LC(r);if(i)return n(i,!0,xC(i))},e};function xC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LC(t){return As(t)?document.querySelector(t):t}let c4=!1;const eI=()=>{c4||(c4=!0,YN(),xN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tI=()=>{},nI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:lS,BaseTransitionPropsValidators:v_,Comment:ia,DeprecationTypes:pN,EffectScope:o_,ErrorCodes:P8,ErrorTypeStrings:aN,Fragment:wn,KeepAlive:J8,ReactiveEffect:nm,Static:uf,Suspense:UO,Teleport:Ig,Text:md,TrackOpTypes:_8,Transition:Z2,TransitionGroup:VN,TriggerOpTypes:w8,VueElement:My,assertNumber:E8,callWithAsyncErrorHandling:Yu,callWithErrorHandling:Ip,camelize:Ga,capitalize:Em,cloneVNode:Qc,compatUtils:fN,compile:tI,computed:Xn,createApp:Bv,createBlock:da,createCommentVNode:Jt,createElementBlock:Ne,createElementVNode:C,createHydrationRenderer:NS,createPropsRestProxy:yO,createRenderer:OS,createSSRApp:wC,createSlots:rO,createStaticVNode:Lu,createTextVNode:ci,createVNode:mi,customRef:qL,defineAsyncComponent:Z8,defineComponent:Rs,defineCustomElement:hC,defineEmits:lO,defineExpose:uO,defineModel:dO,defineOptions:cO,defineProps:aO,defineSSRCustomElement:BN,defineSlots:hO,devtools:lN,effect:UD,effectScope:a_,getCurrentInstance:Xu,getCurrentScope:l_,getCurrentWatcher:x8,getTransitionRawChildren:xy,guardReactiveProps:KS,h:Py,handleError:xf,hasInjectionContext:LS,hydrate:QN,hydrateOnIdle:H8,hydrateOnInteraction:Y8,hydrateOnMediaQuery:q8,hydrateOnVisible:G8,initCustomFormatter:iN,initDirectivesForSSR:eI,inject:Eu,isMemoSame:nC,isProxy:by,isReactive:Kc,isReadonly:_d,isRef:go,isRuntimeOnly:tN,isShallow:Cu,isVNode:Ih,markRaw:_y,mergeDefaults:mO,mergeModels:vO,mergeProps:ZS,nextTick:ha,normalizeClass:gi,normalizeProps:FD,normalizeStyle:Nl,onActivated:cS,onBeforeMount:fS,onBeforeUnmount:Md,onBeforeUpdate:b_,onDeactivated:hS,onErrorCaptured:vS,onMounted:Zs,onRenderTracked:mS,onRenderTriggered:gS,onScopeDispose:AL,onServerPrefetch:pS,onUnmounted:Ku,onUpdated:Sy,onWatcherCleanup:ZL,openBlock:Ae,popScopeId:D8,provide:Rg,proxyRefs:p_,pushScopeId:T8,queuePostFlushCb:sm,reactive:iu,readonly:fc,ref:Ct,registerRuntimeCompiler:eN,render:_C,renderList:Qn,renderSlot:iO,resolveComponent:yS,resolveDirective:nO,resolveDynamicComponent:tO,resolveFilter:dN,resolveTransitionHooks:wp,setBlockTracking:U2,setDevtoolsHook:uN,setTransitionHooks:Nh,shallowReactive:d_,shallowReadonly:u8,shallowRef:f_,ssrContextKey:FS,ssrUtils:hN,stop:HD,toDisplayString:Et,toHandlerKey:Tg,toHandlers:sO,toRaw:Fi,toRef:v8,toRefs:YL,toValue:d8,transformVNodeArgs:KO,triggerRef:h8,unref:qn,useAttrs:gO,useCssModule:jN,useCssVars:LN,useHost:dC,useId:B8,useModel:BO,useSSRContext:jS,useShadowRoot:FN,useSlots:pO,useTemplateRef:R8,useTransitionState:m_,vModelCheckbox:ky,vModelDynamic:k_,vModelRadio:M_,vModelSelect:us,vModelText:Li,vShow:P_,version:rC,warn:oN,watch:Ai,watchEffect:cm,watchPostEffect:NO,watchSyncEffect:zS,withAsyncContext:bO,withCtx:Wu,withDefaults:fO,withDirectives:er,withKeys:JN,withMemo:sN,withModifiers:tu,withScopeId:O8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let SC;const Ay=t=>SC=t,CC=Symbol();function Q2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var zg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(zg||(zg={}));function rI(){const t=a_(!0),e=t.run(()=>Ct({}));let n=[],r=[];const i=_y({install(s){Ay(i),i._a=s,s.provide(CC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const EC=()=>{};function h4(t,e,n,r=EC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&l_()&&AL(i),i}function Wf(t,...e){t.slice().forEach(n=>{n(...e)})}const iI=t=>t(),d4=Symbol(),F1=Symbol();function eb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];Q2(i)&&Q2(r)&&t.hasOwnProperty(n)&&!go(r)&&!Kc(r)?t[n]=eb(i,r):t[n]=r}return t}const sI=Symbol();function oI(t){return!Q2(t)||!t.hasOwnProperty(sI)}const{assign:ed}=Object;function aI(t){return!!(go(t)&&t.effect)}function lI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const d=YL(n.state.value[t]);return ed(d,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=_y(Xn(()=>{Ay(n);const g=n._s.get(t);return o[v].call(g,g)})),p),{}))}return l=PC(t,c,e,n,r,!0),l}function PC(t,e,n={},r,i,s){let o;const a=ed({actions:{}},n),l={deep:!0};let c,d,p=[],v=[],g;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),Ct({});let E;function k(N){let F;c=d=!1,typeof N=="function"?(N(r.state.value[t]),F={type:zg.patchFunction,storeId:t,events:g}):(eb(r.state.value[t],N),F={type:zg.patchObject,payload:N,storeId:t,events:g});const Y=E=Symbol();ha().then(()=>{E===Y&&(c=!0)}),d=!0,Wf(p,F,r.state.value[t])}const A=s?function(){const{state:F}=n,Y=F?F():{};this.$patch(B=>{ed(B,Y)})}:EC;function D(){o.stop(),p=[],v=[],r._s.delete(t)}const z=(N,F="")=>{if(d4 in N)return N[F1]=F,N;const Y=function(){Ay(r);const B=Array.from(arguments),I=[],R=[];function q(oe){I.push(oe)}function U(oe){R.push(oe)}Wf(v,{args:B,name:Y[F1],store:re,after:q,onError:U});let $;try{$=N.apply(this&&this.$id===t?this:re,B)}catch(oe){throw Wf(R,oe),oe}return $ instanceof Promise?$.then(oe=>(Wf(I,oe),oe)).catch(oe=>(Wf(R,oe),Promise.reject(oe))):(Wf(I,$),$)};return Y[d4]=!0,Y[F1]=F,Y},X={_p:r,$id:t,$onAction:h4.bind(null,v),$patch:k,$reset:A,$subscribe(N,F={}){const Y=h4(p,N,F.detached,()=>B()),B=o.run(()=>Ai(()=>r.state.value[t],I=>{(F.flush==="sync"?d:c)&&N({storeId:t,type:zg.direct,events:g},I)},ed({},l,F)));return Y},$dispose:D},re=iu(X);r._s.set(t,re);const fe=(r._a&&r._a.runWithContext||iI)(()=>r._e.run(()=>(o=a_()).run(()=>e({action:z}))));for(const N in fe){const F=fe[N];if(go(F)&&!aI(F)||Kc(F))s||(x&&oI(F)&&(go(F)?F.value=x[N]:eb(F,x[N])),r.state.value[t][N]=F);else if(typeof F=="function"){const Y=z(F,N);fe[N]=Y,a.actions[N]=F}}return ed(re,fe),ed(Fi(re),fe),Object.defineProperty(re,"$state",{get:()=>r.state.value[t],set:N=>{k(F=>{ed(F,N)})}}),r._p.forEach(N=>{ed(re,o.run(()=>N({store:re,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(re.$state,x),c=!0,d=!0,re}/*! #__NO_SIDE_EFFECTS__ */function Bp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=LS();return a=a||(c?Eu(CC,null):null),a&&Ay(a),a=SC,a._s.has(r)||(s?PC(r,e,i,a):lI(r,i,a)),a._s.get(r)}return o.$id=r,o}function MC(t,e){return function(){return t.apply(e,arguments)}}const{toString:uI}=Object.prototype,{getPrototypeOf:A_}=Object,Ty=(t=>e=>{const n=uI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cc=t=>(t=t.toLowerCase(),e=>Ty(e)===t),Dy=t=>e=>typeof e===t,{isArray:Rp}=Array,dm=Dy("undefined");function cI(t){return t!==null&&!dm(t)&&t.constructor!==null&&!dm(t.constructor)&&Pu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kC=Cc("ArrayBuffer");function hI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kC(t.buffer),e}const dI=Dy("string"),Pu=Dy("function"),AC=Dy("number"),Oy=t=>t!==null&&typeof t=="object",fI=t=>t===!0||t===!1,X0=t=>{if(Ty(t)!=="object")return!1;const e=A_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pI=Cc("Date"),gI=Cc("File"),mI=Cc("Blob"),vI=Cc("FileList"),yI=t=>Oy(t)&&Pu(t.pipe),bI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Pu(t.append)&&((e=Ty(t))==="formdata"||e==="object"&&Pu(t.toString)&&t.toString()==="[object FormData]"))},_I=Cc("URLSearchParams"),[wI,xI,LI,SI]=["ReadableStream","Request","Response","Headers"].map(Cc),CI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Am(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Rp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function TC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DC=t=>!dm(t)&&t!==rf;function tb(){const{caseless:t}=DC(this)&&this||{},e={},n=(r,i)=>{const s=t&&TC(e,i)||i;X0(e[s])&&X0(r)?e[s]=tb(e[s],r):X0(r)?e[s]=tb({},r):Rp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Am(arguments[r],n);return e}const EI=(t,e,n,{allOwnKeys:r}={})=>(Am(e,(i,s)=>{n&&Pu(i)?t[s]=MC(i,n):t[s]=i},{allOwnKeys:r}),t),PI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),MI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&A_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},AI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},TI=t=>{if(!t)return null;if(Rp(t))return t;let e=t.length;if(!AC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},DI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&A_(Uint8Array)),OI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},NI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},II=Cc("HTMLFormElement"),BI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),f4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),RI=Cc("RegExp"),OC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Am(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},FI=t=>{OC(t,(e,n)=>{if(Pu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Pu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Rp(t)?r(t):r(String(t).split(e)),n},zI=()=>{},$I=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function VI(t){return!!(t&&Pu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const UI=t=>{const e=new Array(10),n=(r,i)=>{if(Oy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Rp(r)?[]:{};return Am(r,(o,a)=>{const l=n(o,i+1);!dm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},HI=Cc("AsyncFunction"),WI=t=>t&&(Oy(t)||Pu(t))&&Pu(t.then)&&Pu(t.catch),NC=((t,e)=>t?setImmediate:e?((n,r)=>(rf.addEventListener("message",({source:i,data:s})=>{i===rf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),rf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Pu(rf.postMessage)),GI=typeof queueMicrotask<"u"?queueMicrotask.bind(rf):typeof process<"u"&&process.nextTick||NC,Xt={isArray:Rp,isArrayBuffer:kC,isBuffer:cI,isFormData:bI,isArrayBufferView:hI,isString:dI,isNumber:AC,isBoolean:fI,isObject:Oy,isPlainObject:X0,isReadableStream:wI,isRequest:xI,isResponse:LI,isHeaders:SI,isUndefined:dm,isDate:pI,isFile:gI,isBlob:mI,isRegExp:RI,isFunction:Pu,isStream:yI,isURLSearchParams:_I,isTypedArray:DI,isFileList:vI,forEach:Am,merge:tb,extend:EI,trim:CI,stripBOM:PI,inherits:MI,toFlatObject:kI,kindOf:Ty,kindOfTest:Cc,endsWith:AI,toArray:TI,forEachEntry:OI,matchAll:NI,isHTMLForm:II,hasOwnProperty:f4,hasOwnProp:f4,reduceDescriptors:OC,freezeMethods:FI,toObjectSet:jI,toCamelCase:BI,noop:zI,toFiniteNumber:$I,findKey:TC,global:rf,isContextDefined:DC,isSpecCompliantForm:VI,toJSONObject:UI,isAsyncFn:HI,isThenable:WI,setImmediate:NC,asap:GI};function oi(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Xt.inherits(oi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xt.toJSONObject(this.config),code:this.code,status:this.status}}});const IC=oi.prototype,BC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{BC[t]={value:t}});Object.defineProperties(oi,BC);Object.defineProperty(IC,"isAxiosError",{value:!0});oi.from=(t,e,n,r,i,s)=>{const o=Object.create(IC);return Xt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),oi.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const qI=null;function nb(t){return Xt.isPlainObject(t)||Xt.isArray(t)}function RC(t){return Xt.endsWith(t,"[]")?t.slice(0,-2):t}function p4(t,e,n){return t?t.concat(e).map(function(i,s){return i=RC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function YI(t){return Xt.isArray(t)&&!t.some(nb)}const KI=Xt.toFlatObject(Xt,{},null,function(e){return/^is[A-Z]/.test(e)});function Ny(t,e,n){if(!Xt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!Xt.isUndefined(k[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xt.isSpecCompliantForm(e);if(!Xt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Xt.isDate(x))return x.toISOString();if(!l&&Xt.isBlob(x))throw new oi("Blob is not supported. Use a Buffer instead.");return Xt.isArrayBuffer(x)||Xt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,E,k){let A=x;if(x&&!k&&typeof x=="object"){if(Xt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Xt.isArray(x)&&YI(x)||(Xt.isFileList(x)||Xt.endsWith(E,"[]"))&&(A=Xt.toArray(x)))return E=RC(E),A.forEach(function(z,X){!(Xt.isUndefined(z)||z===null)&&e.append(o===!0?p4([E],X,s):o===null?E:E+"[]",c(z))}),!1}return nb(x)?!0:(e.append(p4(k,E,s),c(x)),!1)}const p=[],v=Object.assign(KI,{defaultVisitor:d,convertValue:c,isVisitable:nb});function g(x,E){if(!Xt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Xt.forEach(x,function(A,D){(!(Xt.isUndefined(A)||A===null)&&i.call(e,A,Xt.isString(D)?D.trim():D,E,v))===!0&&g(A,E?E.concat(D):[D])}),p.pop()}}if(!Xt.isObject(t))throw new TypeError("data must be an object");return g(t),e}function g4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function T_(t,e){this._pairs=[],t&&Ny(t,this,e)}const FC=T_.prototype;FC.append=function(e,n){this._pairs.push([e,n])};FC.toString=function(e){const n=e?function(r){return e.call(this,r,g4)}:g4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ZI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jC(t,e,n){if(!e)return t;const r=n&&n.encode||ZI;Xt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Xt.isURLSearchParams(e)?e.toString():new T_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class m4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const zC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XI=typeof URLSearchParams<"u"?URLSearchParams:T_,JI=typeof FormData<"u"?FormData:null,QI=typeof Blob<"u"?Blob:null,e7={isBrowser:!0,classes:{URLSearchParams:XI,FormData:JI,Blob:QI},protocols:["http","https","file","blob","url","data"]},D_=typeof window<"u"&&typeof document<"u",rb=typeof navigator=="object"&&navigator||void 0,t7=D_&&(!rb||["ReactNative","NativeScript","NS"].indexOf(rb.product)<0),n7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r7=D_&&window.location.href||"http://localhost",i7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:D_,hasStandardBrowserEnv:t7,hasStandardBrowserWebWorkerEnv:n7,navigator:rb,origin:r7},Symbol.toStringTag,{value:"Module"})),fl={...i7,...e7};function s7(t,e){return Ny(t,new fl.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return fl.isNode&&Xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function o7(t){return Xt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function a7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function $C(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Xt.isArray(i)?i.length:o,l?(Xt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Xt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Xt.isArray(i[o])&&(i[o]=a7(i[o])),!a)}if(Xt.isFormData(t)&&Xt.isFunction(t.entries)){const n={};return Xt.forEachEntry(t,(r,i)=>{e(o7(r),i,n,0)}),n}return null}function l7(t,e,n){if(Xt.isString(t))try{return(e||JSON.parse)(t),Xt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Tm={transitional:zC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Xt.isObject(e);if(s&&Xt.isHTMLForm(e)&&(e=new FormData(e)),Xt.isFormData(e))return i?JSON.stringify($C(e)):e;if(Xt.isArrayBuffer(e)||Xt.isBuffer(e)||Xt.isStream(e)||Xt.isFile(e)||Xt.isBlob(e)||Xt.isReadableStream(e))return e;if(Xt.isArrayBufferView(e))return e.buffer;if(Xt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return s7(e,this.formSerializer).toString();if((a=Xt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ny(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),l7(e)):e}],transformResponse:[function(e){const n=this.transitional||Tm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Xt.isResponse(e)||Xt.isReadableStream(e))return e;if(e&&Xt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?oi.from(a,oi.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fl.classes.FormData,Blob:fl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xt.forEach(["delete","get","head","post","put","patch"],t=>{Tm.headers[t]={}});const u7=Xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&u7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},v4=Symbol("internals");function Xp(t){return t&&String(t).trim().toLowerCase()}function J0(t){return t===!1||t==null?t:Xt.isArray(t)?t.map(J0):String(t)}function h7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const d7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function j1(t,e,n,r,i){if(Xt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Xt.isString(e)){if(Xt.isString(r))return e.indexOf(r)!==-1;if(Xt.isRegExp(r))return r.test(e)}}function f7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function p7(t,e){const n=Xt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let nu=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=Xp(l);if(!d)throw new Error("header name must be a non-empty string");const p=Xt.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=J0(a))}const o=(a,l)=>Xt.forEach(a,(c,d)=>s(c,d,l));if(Xt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Xt.isString(e)&&(e=e.trim())&&!d7(e))o(c7(e),n);else if(Xt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Xp(e),e){const r=Xt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return h7(i);if(Xt.isFunction(n))return n.call(this,i,r);if(Xt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Xp(e),e){const r=Xt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||j1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Xp(o),o){const a=Xt.findKey(r,o);a&&(!n||j1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Xt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||j1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Xt.forEach(this,(i,s)=>{const o=Xt.findKey(r,s);if(o){n[o]=J0(i),delete n[s];return}const a=e?f7(s):String(s).trim();a!==s&&delete n[s],n[a]=J0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Xt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[v4]=this[v4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Xp(o);r[a]||(p7(i,o),r[a]=!0)}return Xt.isArray(e)?e.forEach(s):s(e),this}};nu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xt.reduceDescriptors(nu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Xt.freezeMethods(nu);function z1(t,e){const n=this||Tm,r=e||n,i=nu.from(r.headers);let s=r.data;return Xt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function VC(t){return!!(t&&t.__CANCEL__)}function Fp(t,e,n){oi.call(this,t??"canceled",oi.ERR_CANCELED,e,n),this.name="CanceledError"}Xt.inherits(Fp,oi,{__CANCEL__:!0});function UC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new oi("Request failed with status code "+n.status,[oi.ERR_BAD_REQUEST,oi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function g7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function m7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=d&&c-d;return g?Math.round(v*1e3/g):void 0}}function v7(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Rv=(t,e,n=3)=>{let r=0;const i=m7(50,250);return v7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},y4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},b4=t=>(...e)=>Xt.asap(()=>t(...e)),y7=fl.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,fl.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(fl.origin),fl.navigator&&/(msie|trident)/i.test(fl.navigator.userAgent)):()=>!0,b7=fl.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Xt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Xt.isString(r)&&o.push("path="+r),Xt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function w7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function HC(t,e,n){let r=!_7(e);return t&&(r||n==!1)?w7(t,e):e}const _4=t=>t instanceof nu?{...t}:t;function vf(t,e){e=e||{};const n={};function r(c,d,p,v){return Xt.isPlainObject(c)&&Xt.isPlainObject(d)?Xt.merge.call({caseless:v},c,d):Xt.isPlainObject(d)?Xt.merge({},d):Xt.isArray(d)?d.slice():d}function i(c,d,p,v){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,d,p,v)}function s(c,d){if(!Xt.isUndefined(d))return r(void 0,d)}function o(c,d){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,p)=>i(_4(c),_4(d),p,!0)};return Xt.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Xt.isUndefined(v)&&p!==a||(n[d]=v)}),n}const WC=t=>{const e=vf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=nu.from(o),e.url=jC(HC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Xt.isFormData(n)){if(fl.hasStandardBrowserEnv||fl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(fl.hasStandardBrowserEnv&&(r&&Xt.isFunction(r)&&(r=r(e)),r||r!==!1&&y7(e.url))){const c=i&&s&&b7.read(s);c&&o.set(i,c)}return e},x7=typeof XMLHttpRequest<"u",L7=x7&&function(t){return new Promise(function(n,r){const i=WC(t);let s=i.data;const o=nu.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,p,v,g,x;function E(){g&&g(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function A(){if(!k)return;const z=nu.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),re={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:z,config:t,request:k};UC(function(fe){n(fe),E()},function(fe){r(fe),E()},re),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new oi("Request aborted",oi.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new oi("Network Error",oi.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let X=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const re=i.transitional||zC;i.timeoutErrorMessage&&(X=i.timeoutErrorMessage),r(new oi(X,re.clarifyTimeoutError?oi.ETIMEDOUT:oi.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Xt.forEach(o.toJSON(),function(X,re){k.setRequestHeader(re,X)}),Xt.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([v,x]=Rv(c,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,g]=Rv(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(d=z=>{k&&(r(!z||z.type?new Fp(null,t,k):z),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const D=g7(i.url);if(D&&fl.protocols.indexOf(D)===-1){r(new oi("Unsupported protocol "+D+":",oi.ERR_BAD_REQUEST,t));return}k.send(s||null)})},S7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof oi?d:new Fp(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new oi(`timeout ${e} of ms exceeded`,oi.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Xt.asap(a),l}},C7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},E7=async function*(t,e){for await(const n of P7(t))yield*C7(n,e)},P7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},w4=(t,e,n,r)=>{const i=E7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Iy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",GC=Iy&&typeof ReadableStream=="function",M7=Iy&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),qC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},k7=GC&&qC(()=>{let t=!1;const e=new Request(fl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),x4=64*1024,ib=GC&&qC(()=>Xt.isReadableStream(new Response("").body)),Fv={stream:ib&&(t=>t.body)};Iy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Fv[e]&&(Fv[e]=Xt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new oi(`Response type '${e}' is not supported`,oi.ERR_NOT_SUPPORT,r)})})})(new Response);const A7=async t=>{if(t==null)return 0;if(Xt.isBlob(t))return t.size;if(Xt.isSpecCompliantForm(t))return(await new Request(fl.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Xt.isArrayBufferView(t)||Xt.isArrayBuffer(t))return t.byteLength;if(Xt.isURLSearchParams(t)&&(t=t+""),Xt.isString(t))return(await M7(t)).byteLength},T7=async(t,e)=>{const n=Xt.toFiniteNumber(t.getContentLength());return n??A7(e)},D7=Iy&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:v}=WC(t);c=c?(c+"").toLowerCase():"text";let g=S7([i,s&&s.toAbortSignal()],o),x;const E=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let k;try{if(l&&k7&&n!=="get"&&n!=="head"&&(k=await T7(d,r))!==0){let re=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Xt.isFormData(r)&&(ge=re.headers.get("content-type"))&&d.setContentType(ge),re.body){const[fe,N]=y4(k,Rv(b4(l)));r=w4(re.body,x4,fe,N)}}Xt.isString(p)||(p=p?"include":"omit");const A="credentials"in Request.prototype;x=new Request(e,{...v,signal:g,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:A?p:void 0});let D=await fetch(x);const z=ib&&(c==="stream"||c==="response");if(ib&&(a||z&&E)){const re={};["status","statusText","headers"].forEach(F=>{re[F]=D[F]});const ge=Xt.toFiniteNumber(D.headers.get("content-length")),[fe,N]=a&&y4(ge,Rv(b4(a),!0))||[];D=new Response(w4(D.body,x4,fe,()=>{N&&N(),E&&E()}),re)}c=c||"text";let X=await Fv[Xt.findKey(Fv,c)||"text"](D,t);return!z&&E&&E(),await new Promise((re,ge)=>{UC(re,ge,{data:X,headers:nu.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:x})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new oi("Network Error",oi.ERR_NETWORK,t,x),{cause:A.cause||A}):oi.from(A,A&&A.code,t,x)}}),sb={http:qI,xhr:L7,fetch:D7};Xt.forEach(sb,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const L4=t=>`- ${t}`,O7=t=>Xt.isFunction(t)||t===null||t===!1,YC={getAdapter:t=>{t=Xt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!O7(n)&&(r=sb[(o=String(n)).toLowerCase()],r===void 0))throw new oi(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(L4).join(`
`):" "+L4(s[0]):"as no adapter specified";throw new oi("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:sb};function $1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fp(null,t)}function S4(t){return $1(t),t.headers=nu.from(t.headers),t.data=z1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YC.getAdapter(t.adapter||Tm.adapter)(t).then(function(r){return $1(t),r.data=z1.call(t,t.transformResponse,r),r.headers=nu.from(r.headers),r},function(r){return VC(r)||($1(t),r&&r.response&&(r.response.data=z1.call(t,t.transformResponse,r.response),r.response.headers=nu.from(r.response.headers))),Promise.reject(r)})}const KC="1.8.4",By={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{By[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const C4={};By.transitional=function(e,n,r){function i(s,o){return"[Axios v"+KC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new oi(i(o," has been removed"+(n?" in "+n:"")),oi.ERR_DEPRECATED);return n&&!C4[o]&&(C4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};By.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function N7(t,e,n){if(typeof t!="object")throw new oi("options must be an object",oi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new oi("option "+s+" must be "+l,oi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oi("Unknown option "+s,oi.ERR_BAD_OPTION)}}const Q0={assertOptions:N7,validators:By},Ic=Q0.validators;let cf=class{constructor(e){this.defaults=e,this.interceptors={request:new m4,response:new m4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=vf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Q0.assertOptions(r,{silentJSONParsing:Ic.transitional(Ic.boolean),forcedJSONParsing:Ic.transitional(Ic.boolean),clarifyTimeoutError:Ic.transitional(Ic.boolean)},!1),i!=null&&(Xt.isFunction(i)?n.paramsSerializer={serialize:i}:Q0.assertOptions(i,{encode:Ic.function,serialize:Ic.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Q0.assertOptions(n,{baseUrl:Ic.spelling("baseURL"),withXsrfToken:Ic.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Xt.merge(s.common,s[n.method]);s&&Xt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=nu.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!l){const x=[S4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,d=Promise.resolve(n);p<v;)d=d.then(x[p++],x[p++]);return d}v=a.length;let g=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{g=x(g)}catch(k){E.call(this,k);break}}try{d=S4.call(this,g)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=vf(this.defaults,e);const n=HC(e.baseURL,e.url,e.allowAbsoluteUrls);return jC(n,e.params,e.paramsSerializer)}};Xt.forEach(["delete","get","head","options"],function(e){cf.prototype[e]=function(n,r){return this.request(vf(r||{},{method:e,url:n,data:(r||{}).data}))}});Xt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(vf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}cf.prototype[e]=n(),cf.prototype[e+"Form"]=n(!0)});let I7=class ZC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Fp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new ZC(function(i){e=i}),cancel:e}}};function B7(t){return function(n){return t.apply(null,n)}}function R7(t){return Xt.isObject(t)&&t.isAxiosError===!0}const ob={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ob).forEach(([t,e])=>{ob[e]=t});function XC(t){const e=new cf(t),n=MC(cf.prototype.request,e);return Xt.extend(n,cf.prototype,e,{allOwnKeys:!0}),Xt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return XC(vf(t,i))},n}const Ko=XC(Tm);Ko.Axios=cf;Ko.CanceledError=Fp;Ko.CancelToken=I7;Ko.isCancel=VC;Ko.VERSION=KC;Ko.toFormData=Ny;Ko.AxiosError=oi;Ko.Cancel=Ko.CanceledError;Ko.all=function(e){return Promise.all(e)};Ko.spread=B7;Ko.isAxiosError=R7;Ko.mergeConfig=vf;Ko.AxiosHeaders=nu;Ko.formToJSON=t=>$C(Xt.isHTMLForm(t)?new FormData(t):t);Ko.getAdapter=YC.getAdapter;Ko.HttpStatusCode=ob;Ko.default=Ko;const{Axios:Toe,AxiosError:Doe,CanceledError:Ooe,isCancel:Noe,CancelToken:Ioe,VERSION:Boe,all:Roe,Cancel:Foe,isAxiosError:joe,spread:zoe,toFormData:$oe,AxiosHeaders:Voe,HttpStatusCode:Uoe,formToJSON:Hoe,getAdapter:Woe,mergeConfig:Goe}=Ko,gn=iu({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let vd=null,sf=null;const F7=1e3;function Ry(){if(gn.isEnabled){gn.isRecording=!0,gn.startTime=performance.now(),gn.frameCount=0,gn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(vd=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{gn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Lc()})})}),vd.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tâches non supporté",t)}j7(),O_()}}function jv(){gn.isRecording=!1,vd&&(vd.disconnect(),vd=null),tE()}function ab(){vd&&(vd.disconnect(),vd=null),tE(),gn.measures=[],gn.longTasks=[],gn.memorySnapshots=[],gn.operationHistory=[],gn.frameCount=0,gn.framesPerSecond=0,gn.lastFpsUpdate=0,gn.isEnabled&&Ry()}function JC(t,e,n){if(!gn.isEnabled||!gn.isRecording)return()=>{};const r=performance.now(),i=gn.currentOperation;return gn.currentOperation=t,gn.operationStack.push(t),()=>{const s=performance.now()-r;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:t,startTime:r,duration:s,component:e||Lc(),info:n,parentOperation:i||void 0}),s>10&&gn.operationHistory.push({operation:t,component:e||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function QC(t,e,n,r){if(!gn.isEnabled||!gn.isRecording)return e();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=t,gn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function eE(t,e,n,r){if(!gn.isEnabled||!gn.isRecording)return e();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=t,gn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function O_(){!gn.isEnabled||!gn.isRecording||(performance.memory?gn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):gn.memorySnapshots.push({timestamp:performance.now()}))}function j7(){sf!==null&&cancelAnimationFrame(sf),gn.frameCount=0,gn.lastFpsUpdate=performance.now();function t(){gn.frameCount++;const e=performance.now();e-gn.lastFpsUpdate>=F7&&(gn.framesPerSecond=Math.round(gn.frameCount*1e3/(e-gn.lastFpsUpdate)),gn.frameCount=0,gn.lastFpsUpdate=e),gn.isRecording&&(sf=requestAnimationFrame(t))}sf=requestAnimationFrame(t)}function tE(){sf!==null&&(cancelAnimationFrame(sf),sf=null)}function Lc(){return""}function lb(t){gn.isEnabled=t,t&&!gn.isRecording?Ry():!t&&gn.isRecording&&jv()}function nE(t,e,n){return(...r)=>{if(!gn.isEnabled||!gn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;gn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function rE(t,e,n){return async(...r)=>{if(!gn.isEnabled||!gn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;gn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function z7(t,e){const n=gn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function ub(t,e){const n=t||gn.startTime,r=e||performance.now(),i=z7(n,r),s=r-n,o=new Map;function a(c){const d=o.get(c.operation)||{duration:0,component:c.component};d.duration+=c.duration,o.set(c.operation,d),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:d,component:p}])=>({operation:c,duration:d,component:p,impact:d/s*100})).sort((c,d)=>d.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function jp(){const t=Ct(!1);Zs(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,lb(r),ab()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),t.value=!1,lb(!1)}}),Ku(()=>{gn.isRecording&&jv()});const e=(n,r)=>{if(!gn.isEnabled||!gn.isRecording)return null;const i=gn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=gn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=gn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=gn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:fc(Ct(gn.isEnabled)),isQueryParamEnabled:fc(t),isRecording:fc(Ct(gn.isRecording)),measures:fc(Ct(gn.measures)),longTasks:fc(Ct(gn.longTasks)),memorySnapshots:fc(Ct(gn.memorySnapshots)),framesPerSecond:fc(Ct(gn.framesPerSecond)),operationHistory:fc(Ct(gn.operationHistory)),startRecording:Ry,stopRecording:jv,clearRecording:ab,startMeasure:JC,measure:eE,measureAsync:QC,captureMemorySnapshot:O_,createPerformanceTracker:nE,createAsyncPerformanceTracker:rE,getOperationDetails:e,getSlowOperations:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!gn.isEnabled||!gn.isRecording)return null;const n=ub();return{totalMeasures:gn.measures.length,totalLongTasks:gn.longTasks.length,slowestOperations:[...gn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:gn.framesPerSecond,memoryUsage:gn.memorySnapshots.length>0?gn.memorySnapshots[gn.memorySnapshots.length-1]:null,operationsByComponent:$7(gn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:gn.isRecording?performance.now()-gn.startTime:null}},analyzeCriticalPaths:ub}}function $7(t){if(!gn.isEnabled||!gn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const kn={startRecording:Ry,stopRecording:jv,clearRecording:ab,startMeasure:JC,measure:eE,measureAsync:QC,captureMemorySnapshot:O_,createPerformanceTracker:nE,createAsyncPerformanceTracker:rE,setEnabled:lb,analyzeCriticalPaths:ub},Nn=Ko.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Wr=jp();function iE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Nn.interceptors.request.use(async t=>{const e=Wr.startMeasure("api_request_interceptor","ApiService");try{const n=iE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Nn.interceptors.response.use(t=>t,async t=>{var r,i;const e=Wr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=ma();try{await Wr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=iE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Nn(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function V7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function ev(t){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const n=await Al.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const Al={async getUsers(t={}){const e=Wr.startMeasure("get_users","UserService");try{return await Wr.measureAsync("get_users_request",()=>Nn.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await Nn.get(`/users/${t}/`)},async createUser(t){return await Nn.post("/users/",t)},async updateUser(t,e){return await Nn.patch(`/users/${t}/`,e)},async deleteUser(t){return await Nn.delete(`/users/${t}/`)},async getEntreprises(){return await Nn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Nn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Nn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Nn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Wr.startMeasure("get_users_hierarchy","UserService");try{const n=Wr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Wr.measureAsync("get_users_hierarchy_request",()=>Nn.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await Nn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Nn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Nn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Nn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Wr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Wr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Wr.measureAsync("upload_logo_request",()=>Nn.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function V1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const v0={async getPlans(){const t=Wr.startMeasure("get_plans","IrrigationService");try{return await Wr.measureAsync("get_plans_request",()=>Nn.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Wr.startMeasure("create_plan","IrrigationService");try{const n=Wr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Wr.measureAsync("create_plan_request",()=>Nn.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Wr.startMeasure("update_plan","IrrigationService");try{return await Wr.measureAsync("update_plan_request",()=>Nn.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Wr.startMeasure("delete_plan","IrrigationService");try{return await Wr.measureAsync("delete_plan_request",()=>Nn.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await Nn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Nn.post("/plans/",t)},async getEntreprisePlans(t){return await Nn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Nn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Nn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Nn.post("/plans/",n)}},Ca={async getNotes(t={}){const e=Wr.startMeasure("get_notes","NoteService");try{return await Wr.measureAsync("get_notes_request",()=>Nn.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Wr.startMeasure("get_notes_by_plan","NoteService");try{return await Wr.measureAsync("get_notes_by_plan_request",()=>Nn.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Wr.startMeasure("get_note","NoteService");try{return await Wr.measureAsync("get_note_request",()=>Nn.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Wr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Wr.measureAsync("create_note_request",()=>Nn.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:t,noteData:e});const n=Wr.startMeasure("update_note","NoteService");try{const r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Données formatées:",r);const i=await Wr.measureAsync("update_note_request",()=>Nn.patch(`/notes/${t}/`,r),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{n()}},async deleteNote(t){const e=Wr.startMeasure("delete_note","NoteService");try{return await Wr.measureAsync("delete_note_request",()=>Nn.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await Nn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await Nn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Nn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Nn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Nn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Nn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Nn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Nn.delete(`/notes/${t}/photos/${e}/`)}},U1={async getDevices(t={}){const e=Wr.startMeasure("get_weather_devices","WeatherService");try{return await V1(()=>Nn.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Wr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await V1(()=>Nn.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Wr.startMeasure("get_history_data","WeatherService");try{return await V1(()=>Nn.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},y0={async getFilters(){const t=Wr.startMeasure("get_map_filters","MapFilterService");try{return await Wr.measureAsync("get_map_filters_request",()=>Nn.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Wr.startMeasure("get_map_filter","MapFilterService");try{return await Wr.measureAsync("get_map_filter_request",()=>Nn.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Wr.startMeasure("create_map_filter","MapFilterService");try{return await Wr.measureAsync("create_map_filter_request",()=>Nn.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Wr.startMeasure("update_map_filter","MapFilterService");try{return await Wr.measureAsync("update_map_filter_request",()=>Nn.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Wr.startMeasure("delete_map_filter","MapFilterService");try{return await Wr.measureAsync("delete_map_filter_request",()=>Nn.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};Nn.defaults.baseURL="/api";Nn.defaults.headers.common["Content-Type"]="application/json";Nn.defaults.withCredentials=!0;function fm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Nn.interceptors.request.use(t=>{const e=fm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Nn.interceptors.response.use(t=>t,async t=>{var r,i;const e=ma(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!fm("access_token"))throw new Error("No token available");await e.refreshToken();const o=fm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Nn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function U7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function xu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function H7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const W7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function G7(t){return W7[t]||t}function q7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Y7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function K7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Al.getUsers(i)).data}const ma=Bp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!fm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Nn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Nn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Nn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Nn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!fm("refresh_token"))throw new Error("No refresh token available");const r=await Nn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return U7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await Al.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await Al.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await Al.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await Al.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Al.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await Al.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await Al.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Nn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Nn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Nn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Nn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await Al.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await K7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await Al.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await Al.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const np=typeof document<"u";function sE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Z7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&sE(t.default)}const ss=Object.assign;function H1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Sc(i)?i.map(t):t(i)}return n}const $g=()=>{},Sc=Array.isArray,oE=/#/g,X7=/&/g,J7=/\//g,Q7=/=/g,eB=/\?/g,aE=/\+/g,tB=/%5B/g,nB=/%5D/g,lE=/%5E/g,rB=/%60/g,uE=/%7B/g,iB=/%7C/g,cE=/%7D/g,sB=/%20/g;function N_(t){return encodeURI(""+t).replace(iB,"|").replace(tB,"[").replace(nB,"]")}function oB(t){return N_(t).replace(uE,"{").replace(cE,"}").replace(lE,"^")}function cb(t){return N_(t).replace(aE,"%2B").replace(sB,"+").replace(oE,"%23").replace(X7,"%26").replace(rB,"`").replace(uE,"{").replace(cE,"}").replace(lE,"^")}function aB(t){return cb(t).replace(Q7,"%3D")}function lB(t){return N_(t).replace(oE,"%23").replace(eB,"%3F")}function uB(t){return t==null?"":lB(t).replace(J7,"%2F")}function pm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const cB=/\/$/,hB=t=>t.replace(cB,"");function W1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=gB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:pm(o)}}function dB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function E4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Cp(e.matched[r],n.matched[i])&&hE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Cp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function hE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pB(t[n],e[n]))return!1;return!0}function pB(t,e){return Sc(t)?P4(t,e):Sc(e)?P4(e,t):t===e}function P4(t,e){return Sc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function gB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Yh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gm;(function(t){t.pop="pop",t.push="push"})(gm||(gm={}));var Vg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Vg||(Vg={}));function mB(t){if(!t)if(np){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hB(t)}const vB=/^[^#]+#/;function yB(t,e){return t.replace(vB,"#")+e}function bB(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Fy=()=>({left:window.scrollX,top:window.scrollY});function _B(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=bB(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function M4(t,e){return(history.state?history.state.position-e:-1)+t}const hb=new Map;function wB(t,e){hb.set(t,e)}function xB(t){const e=hb.get(t);return hb.delete(t),e}let LB=()=>location.protocol+"//"+location.host;function dE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),E4(l,"")}return E4(n,t)+r+i}function SB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const g=dE(t,location),x=n.value,E=e.value;let k=0;if(v){if(n.value=g,e.value=v,o&&o===x){o=null;return}k=E?v.position-E.position:0}else r(g);i.forEach(A=>{A(n.value,x,{delta:k,type:gm.pop,direction:k?k>0?Vg.forward:Vg.back:Vg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const g=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(g),g}function d(){const{history:v}=window;v.state&&v.replaceState(ss({},v.state,{scroll:Fy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function k4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Fy():null}}function CB(t){const{history:e,location:n}=window,r={value:dE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:LB()+t+l;try{e[d?"replaceState":"pushState"](c,"",v),i.value=c}catch(g){console.error(g),n[d?"replace":"assign"](v)}}function o(l,c){const d=ss({},e.state,k4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=ss({},i.value,e.state,{forward:l,scroll:Fy()});s(d.current,d,!0);const p=ss({},k4(r.value,l,null),{position:d.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function EB(t){t=mB(t);const e=CB(t),n=SB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=ss({location:"",base:t,go:r,createHref:yB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function PB(t){return typeof t=="string"||t&&typeof t=="object"}function fE(t){return typeof t=="string"||typeof t=="symbol"}const pE=Symbol("");var A4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(A4||(A4={}));function Ep(t,e){return ss(new Error,{type:t,[pE]:!0},e)}function vh(t,e){return t instanceof Error&&pE in t&&(e==null||!!(t.type&e))}const T4="[^/]+?",MB={sensitive:!1,strict:!1,start:!0,end:!0},kB=/[.+*?^${}()[\]/\\]/g;function AB(t,e){const n=ss({},MB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let g=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(kB,"\\$&"),g+=40;else if(v.type===1){const{value:x,repeatable:E,optional:k,regexp:A}=v;s.push({name:x,repeatable:E,optional:k});const D=A||T4;if(D!==T4){g+=10;try{new RegExp(`(${D})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${x}" (${D}): `+X.message)}}let z=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(z=k&&c.length<2?`(?:/${z})`:"/"+z),k&&(z+="?"),i+=z,g+=20,k&&(g+=-8),E&&(g+=-20),D===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const g=d[v]||"",x=s[v-1];p[x.name]=g&&x.repeatable?g.split("/"):g}return p}function l(c){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const g of v)if(g.type===0)d+=g.value;else if(g.type===1){const{value:x,repeatable:E,optional:k}=g,A=x in c?c[x]:"";if(Sc(A)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const D=Sc(A)?A.join("/"):A;if(!D)if(k)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);d+=D}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function TB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function gE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=TB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(D4(r))return 1;if(D4(i))return-1}return i.length-r.length}function D4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const DB={type:0,value:""},OB=/[a-zA-Z0-9_]/;function NB(t){if(!t)return[[]];if(t==="/")return[[DB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:OB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function IB(t,e,n){const r=AB(NB(t.path),n),i=ss(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function BB(t,e){const n=[],r=new Map;e=B4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,g){const x=!g,E=N4(p);E.aliasOf=g&&g.record;const k=B4(e,p),A=[E];if("alias"in p){const X=typeof p.alias=="string"?[p.alias]:p.alias;for(const re of X)A.push(N4(ss({},E,{components:g?g.record.components:E.components,path:re,aliasOf:g?g.record:E})))}let D,z;for(const X of A){const{path:re}=X;if(v&&re[0]!=="/"){const ge=v.record.path,fe=ge[ge.length-1]==="/"?"":"/";X.path=v.record.path+(re&&fe+re)}if(D=IB(X,v,k),g?g.alias.push(D):(z=z||D,z!==D&&z.alias.push(D),x&&p.name&&!I4(D)&&o(p.name)),mE(D)&&l(D),E.children){const ge=E.children;for(let fe=0;fe<ge.length;fe++)s(ge[fe],D,g&&g.children[fe])}g=g||D}return z?()=>{o(z)}:$g}function o(p){if(fE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=jB(p,n);n.splice(v,0,p),p.record.name&&!I4(p)&&r.set(p.record.name,p)}function c(p,v){let g,x={},E,k;if("name"in p&&p.name){if(g=r.get(p.name),!g)throw Ep(1,{location:p});k=g.record.name,x=ss(O4(v.params,g.keys.filter(z=>!z.optional).concat(g.parent?g.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&O4(p.params,g.keys.map(z=>z.name))),E=g.stringify(x)}else if(p.path!=null)E=p.path,g=n.find(z=>z.re.test(E)),g&&(x=g.parse(E),k=g.record.name);else{if(g=v.name?r.get(v.name):n.find(z=>z.re.test(v.path)),!g)throw Ep(1,{location:p,currentLocation:v});k=g.record.name,x=ss({},v.params,p.params),E=g.stringify(x)}const A=[];let D=g;for(;D;)A.unshift(D.record),D=D.parent;return{name:k,path:E,params:x,matched:A,meta:FB(A)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function O4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function N4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function I4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function FB(t){return t.reduce((e,n)=>ss(e,n.meta),{})}function B4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function jB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;gE(t,e[s])<0?r=s:n=s+1}const i=zB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function zB(t){let e=t;for(;e=e.parent;)if(mE(e)&&gE(t,e)===0)return e}function mE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function $B(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(aE," "),o=s.indexOf("="),a=pm(o<0?s:s.slice(0,o)),l=o<0?null:pm(s.slice(o+1));if(a in e){let c=e[a];Sc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function R4(t){let e="";for(let n in t){const r=t[n];if(n=aB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Sc(r)?r.map(s=>s&&cb(s)):[r&&cb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function VB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Sc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const UB=Symbol(""),F4=Symbol(""),jy=Symbol(""),I_=Symbol(""),db=Symbol("");function Jp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function sd(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(Ep(4,{from:n,to:e})):v instanceof Error?l(v):PB(v)?l(Ep(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function G1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(sE(l)){const d=(l.__vccOpts||l)[e];d&&s.push(sd(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=Z7(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const g=(p.__vccOpts||p)[e];return g&&sd(g,n,r,o,a,i)()}))}}return s}function j4(t){const e=Eu(jy),n=Eu(I_),r=Xn(()=>{const l=qn(t.to);return e.resolve(l)}),i=Xn(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(Cp.bind(null,d));if(v>-1)return v;const g=z4(l[c-2]);return c>1&&z4(d)===g&&p[p.length-1].path!==g?p.findIndex(Cp.bind(null,l[c-2])):v}),s=Xn(()=>i.value>-1&&qB(n.params,r.value.params)),o=Xn(()=>i.value>-1&&i.value===n.matched.length-1&&hE(n.params,r.value.params));function a(l={}){if(GB(l)){const c=e[qn(t.replace)?"replace":"push"](qn(t.to)).catch($g);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Xn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function HB(t){return t.length===1?t[0]:t}const WB=Rs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:j4,setup(t,{slots:e}){const n=iu(j4(t)),{options:r}=Eu(jy),i=Xn(()=>({[$4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[$4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&HB(e.default(n));return t.custom?s:Py("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),vg=WB;function GB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Sc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function z4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $4=(t,e,n)=>t??e??n,YB=Rs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Eu(db),i=Xn(()=>t.route||r.value),s=Eu(F4,0),o=Xn(()=>{let c=qn(s);const{matched:d}=i.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),a=Xn(()=>i.value.matched[o.value]);Rg(F4,Xn(()=>o.value+1)),Rg(UB,a),Rg(db,i);const l=Ct();return Ai(()=>[l.value,a.value,t.name],([c,d,p],[v,g,x])=>{d&&(d.instances[p]=c,g&&g!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),c&&d&&(!g||!Cp(d,g)||!v)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return V4(n.default,{Component:v,route:c});const g=p.props[d],x=g?g===!0?c.params:typeof g=="function"?g(c):g:null,k=Py(v,ss({},x,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return V4(n.default,{Component:k,route:c})||k}}});function V4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const vE=YB;function KB(t){const e=BB(t.routes,t),n=t.parseQuery||$B,r=t.stringifyQuery||R4,i=t.history,s=Jp(),o=Jp(),a=Jp(),l=f_(Yh);let c=Yh;np&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=H1.bind(null,te=>""+te),p=H1.bind(null,uB),v=H1.bind(null,pm);function g(te,le){let Q,Be;return fE(te)?(Q=e.getRecordMatcher(te),Be=le):Be=te,e.addRoute(Be,Q)}function x(te){const le=e.getRecordMatcher(te);le&&e.removeRoute(le)}function E(){return e.getRoutes().map(te=>te.record)}function k(te){return!!e.getRecordMatcher(te)}function A(te,le){if(le=ss({},le||l.value),typeof te=="string"){const ee=W1(n,te,le.path),se=e.resolve({path:ee.path},le),de=i.createHref(ee.fullPath);return ss(ee,se,{params:v(se.params),hash:pm(ee.hash),redirectedFrom:void 0,href:de})}let Q;if(te.path!=null)Q=ss({},te,{path:W1(n,te.path,le.path).path});else{const ee=ss({},te.params);for(const se in ee)ee[se]==null&&delete ee[se];Q=ss({},te,{params:p(ee)}),le.params=p(le.params)}const Be=e.resolve(Q,le),De=te.hash||"";Be.params=d(v(Be.params));const Je=dB(r,ss({},te,{hash:oB(De),path:Be.path})),me=i.createHref(Je);return ss({fullPath:Je,hash:De,query:r===R4?VB(te.query):te.query||{}},Be,{redirectedFrom:void 0,href:me})}function D(te){return typeof te=="string"?W1(n,te,l.value.path):ss({},te)}function z(te,le){if(c!==te)return Ep(8,{from:le,to:te})}function X(te){return fe(te)}function re(te){return X(ss(D(te),{replace:!0}))}function ge(te){const le=te.matched[te.matched.length-1];if(le&&le.redirect){const{redirect:Q}=le;let Be=typeof Q=="function"?Q(te):Q;return typeof Be=="string"&&(Be=Be.includes("?")||Be.includes("#")?Be=D(Be):{path:Be},Be.params={}),ss({query:te.query,hash:te.hash,params:Be.path!=null?{}:te.params},Be)}}function fe(te,le){const Q=c=A(te),Be=l.value,De=te.state,Je=te.force,me=te.replace===!0,ee=ge(Q);if(ee)return fe(ss(D(ee),{state:typeof ee=="object"?ss({},De,ee.state):De,force:Je,replace:me}),le||Q);const se=Q;se.redirectedFrom=le;let de;return!Je&&fB(r,Be,Q)&&(de=Ep(16,{to:se,from:Be}),ke(Be,Be,!0,!1)),(de?Promise.resolve(de):Y(se,Be)).catch(ze=>vh(ze)?vh(ze,2)?ze:ve(ze):J(ze,se,Be)).then(ze=>{if(ze){if(vh(ze,2))return fe(ss({replace:me},D(ze.to),{state:typeof ze.to=="object"?ss({},De,ze.to.state):De,force:Je}),le||se)}else ze=I(se,Be,!0,me,De);return B(se,Be,ze),ze})}function N(te,le){const Q=z(te,le);return Q?Promise.reject(Q):Promise.resolve()}function F(te){const le=K.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(te):te()}function Y(te,le){let Q;const[Be,De,Je]=ZB(te,le);Q=G1(Be.reverse(),"beforeRouteLeave",te,le);for(const ee of Be)ee.leaveGuards.forEach(se=>{Q.push(sd(se,te,le))});const me=N.bind(null,te,le);return Q.push(me),he(Q).then(()=>{Q=[];for(const ee of s.list())Q.push(sd(ee,te,le));return Q.push(me),he(Q)}).then(()=>{Q=G1(De,"beforeRouteUpdate",te,le);for(const ee of De)ee.updateGuards.forEach(se=>{Q.push(sd(se,te,le))});return Q.push(me),he(Q)}).then(()=>{Q=[];for(const ee of Je)if(ee.beforeEnter)if(Sc(ee.beforeEnter))for(const se of ee.beforeEnter)Q.push(sd(se,te,le));else Q.push(sd(ee.beforeEnter,te,le));return Q.push(me),he(Q)}).then(()=>(te.matched.forEach(ee=>ee.enterCallbacks={}),Q=G1(Je,"beforeRouteEnter",te,le,F),Q.push(me),he(Q))).then(()=>{Q=[];for(const ee of o.list())Q.push(sd(ee,te,le));return Q.push(me),he(Q)}).catch(ee=>vh(ee,8)?ee:Promise.reject(ee))}function B(te,le,Q){a.list().forEach(Be=>F(()=>Be(te,le,Q)))}function I(te,le,Q,Be,De){const Je=z(te,le);if(Je)return Je;const me=le===Yh,ee=np?history.state:{};Q&&(Be||me?i.replace(te.fullPath,ss({scroll:me&&ee&&ee.scroll},De)):i.push(te.fullPath,De)),l.value=te,ke(te,le,Q,me),ve()}let R;function q(){R||(R=i.listen((te,le,Q)=>{if(!pe.listening)return;const Be=A(te),De=ge(Be);if(De){fe(ss(De,{replace:!0,force:!0}),Be).catch($g);return}c=Be;const Je=l.value;np&&wB(M4(Je.fullPath,Q.delta),Fy()),Y(Be,Je).catch(me=>vh(me,12)?me:vh(me,2)?(fe(ss(D(me.to),{force:!0}),Be).then(ee=>{vh(ee,20)&&!Q.delta&&Q.type===gm.pop&&i.go(-1,!1)}).catch($g),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),J(me,Be,Je))).then(me=>{me=me||I(Be,Je,!1),me&&(Q.delta&&!vh(me,8)?i.go(-Q.delta,!1):Q.type===gm.pop&&vh(me,20)&&i.go(-1,!1)),B(Be,Je,me)}).catch($g)}))}let U=Jp(),$=Jp(),oe;function J(te,le,Q){ve(te);const Be=$.list();return Be.length?Be.forEach(De=>De(te,le,Q)):console.error(te),Promise.reject(te)}function _e(){return oe&&l.value!==Yh?Promise.resolve():new Promise((te,le)=>{U.add([te,le])})}function ve(te){return oe||(oe=!te,q(),U.list().forEach(([le,Q])=>te?Q(te):le()),U.reset()),te}function ke(te,le,Q,Be){const{scrollBehavior:De}=t;if(!np||!De)return Promise.resolve();const Je=!Q&&xB(M4(te.fullPath,0))||(Be||!Q)&&history.state&&history.state.scroll||null;return ha().then(()=>De(te,le,Je)).then(me=>me&&_B(me)).catch(me=>J(me,te,le))}const W=te=>i.go(te);let V;const K=new Set,pe={currentRoute:l,listening:!0,addRoute:g,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:A,options:t,push:X,replace:re,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:$.add,isReady:_e,install(te){const le=this;te.component("RouterLink",vg),te.component("RouterView",vE),te.config.globalProperties.$router=le,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>qn(l)}),np&&!V&&l.value===Yh&&(V=!0,X(i.location).catch(De=>{}));const Q={};for(const De in Yh)Object.defineProperty(Q,De,{get:()=>l.value[De],enumerable:!0});te.provide(jy,le),te.provide(I_,d_(Q)),te.provide(db,l);const Be=te.unmount;K.add(te),te.unmount=function(){K.delete(te),K.size<1&&(c=Yh,R&&R(),R=null,l.value=Yh,V=!1,oe=!1),Be()}}};function he(te){return te.reduce((le,Q)=>le.then(()=>F(Q)),Promise.resolve())}return pe}function ZB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Cp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Cp(c,l))||i.push(l))}return[n,r,i]}function Dm(){return Eu(jy)}function XB(t){return Eu(I_)}const ru=Bp("notification",()=>{const t=Ct([]),e=Ct(0),n=Ct(null),r=Xn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:g=5e3}){const x=++e.value,E=Date.now(),k={id:x,type:p,message:v,duration:g,timestamp:E};return t.value.push(k),n.value=x,g>0&&setTimeout(()=>{c(x)},g),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(g=>g.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function d(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:d,success:s,error:o,info:a,warning:l}}),JB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:ru},Symbol.toStringTag,{value:"Module"}));var Ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function QB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var bE=QB,eR=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea,tR=eR,nR=tR,rR=typeof self=="object"&&self&&self.Object===Object&&self,iR=nR||rR||Function("return this")(),_E=iR,sR=_E,oR=function(){return sR.Date.now()},aR=oR,lR=/\s/;function uR(t){for(var e=t.length;e--&&lR.test(t.charAt(e)););return e}var cR=uR,hR=cR,dR=/^\s+/;function fR(t){return t&&t.slice(0,hR(t)+1).replace(dR,"")}var pR=fR,gR=_E,mR=gR.Symbol,wE=mR,U4=wE,xE=Object.prototype,vR=xE.hasOwnProperty,yR=xE.toString,Qp=U4?U4.toStringTag:void 0;function bR(t){var e=vR.call(t,Qp),n=t[Qp];try{t[Qp]=void 0;var r=!0}catch{}var i=yR.call(t);return r&&(e?t[Qp]=n:delete t[Qp]),i}var _R=bR,wR=Object.prototype,xR=wR.toString;function LR(t){return xR.call(t)}var SR=LR,H4=wE,CR=_R,ER=SR,PR="[object Null]",MR="[object Undefined]",W4=H4?H4.toStringTag:void 0;function kR(t){return t==null?t===void 0?MR:PR:W4&&W4 in Object(t)?CR(t):ER(t)}var AR=kR;function TR(t){return t!=null&&typeof t=="object"}var DR=TR,OR=AR,NR=DR,IR="[object Symbol]";function BR(t){return typeof t=="symbol"||NR(t)&&OR(t)==IR}var RR=BR,FR=pR,G4=bE,jR=RR,q4=NaN,zR=/^[-+]0x[0-9a-f]+$/i,$R=/^0b[01]+$/i,VR=/^0o[0-7]+$/i,UR=parseInt;function HR(t){if(typeof t=="number")return t;if(jR(t))return q4;if(G4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=FR(t);var n=$R.test(t);return n||VR.test(t)?UR(t.slice(2),n?2:8):zR.test(t)?q4:+t}var WR=HR,GR=bE,q1=aR,Y4=WR,qR="Expected a function",YR=Math.max,KR=Math.min;function ZR(t,e,n){var r,i,s,o,a,l,c=0,d=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(qR);e=Y4(e)||0,GR(n)&&(d=!!n.leading,p="maxWait"in n,s=p?YR(Y4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function g(ge){var fe=r,N=i;return r=i=void 0,c=ge,o=t.apply(N,fe),o}function x(ge){return c=ge,a=setTimeout(A,e),d?g(ge):o}function E(ge){var fe=ge-l,N=ge-c,F=e-fe;return p?KR(F,s-N):F}function k(ge){var fe=ge-l,N=ge-c;return l===void 0||fe>=e||fe<0||p&&N>=s}function A(){var ge=q1();if(k(ge))return D(ge);a=setTimeout(A,E(ge))}function D(ge){return a=void 0,v&&r?g(ge):(r=i=void 0,o)}function z(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function X(){return a===void 0?o:D(q1())}function re(){var ge=q1(),fe=k(ge);if(r=arguments,i=this,l=ge,fe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(A,e),g(l)}return a===void 0&&(a=setTimeout(A,e)),o}return re.cancel=z,re.flush=X,re}var XR=ZR;const JR=B_(XR),QR={class:"relative w-full"},eF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},tF=["onClick"],K4=Rs({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Ct(""),r=Ct([]),i=e,s=JR(async l=>{if(l.length<3){r.value=[];return}try{const d=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=d}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ae(),Ne("div",QR,[er(C("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Li,n.value]]),r.value.length>0?(Ae(),Ne("div",eF,[(Ae(!0),Ne(wn,null,Qn(r.value,d=>(Ae(),Ne("div",{key:d.place_id,onClick:p=>a(d),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Et(d.display_name),9,tF))),128))])):Jt("",!0)]))}}),nF={class:"perf-title"},rF={class:"perf-basic-stats"},iF={class:"perf-stat"},sF={class:"perf-stat"},oF={class:"perf-expand-btn"},aF={key:0,class:"perf-content"},lF={class:"perf-section"},uF={class:"perf-metrics"},cF={class:"perf-metric"},hF={class:"perf-metric-value"},dF={class:"perf-metric"},fF={class:"perf-metric-value"},pF={class:"perf-metric"},gF={class:"perf-metric-value"},mF={class:"perf-metric"},vF={class:"perf-metric-value"},yF={class:"perf-section"},bF={class:"perf-metrics"},_F={key:0,class:"perf-metric"},wF={class:"perf-metric-value"},xF={key:1,class:"perf-metric"},LF={class:"perf-metric-value"},SF={key:2,class:"perf-metric"},CF={class:"perf-metric-value"},EF={class:"perf-section"},PF={class:"perf-table"},MF={class:"perf-table-cell"},kF={class:"perf-table-cell"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF=["onClick"],OF={key:0,class:"perf-empty"},NF=Rs({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=Ct(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:d,startRecording:p,stopRecording:v,clearRecording:g,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:A}=jp(),D=Xn(()=>{const I=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:I.totalMeasures,totalLongTasks:I.totalLongTasks,averageDuration:I.slowestOperations.length>0?I.slowestOperations.reduce((R,q)=>R+q.duration,0)/I.slowestOperations.length:0,fps:I.averageFps,slowestOperations:I.slowestOperations,memoryUsage:I.memoryUsage}}),z=Xn(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(R=>({operation:R.name,component:R.component||"unknown",durationMs:R.duration,timestamp:R.startTime}))),X=Ct(null);Zs(()=>{i.value&&(X.value=window.setInterval(()=>{x()},1e3))}),Ku(()=>{X.value!==null&&clearInterval(X.value)});function re(I){return I===void 0?"N/A":I<1024?I+" B":I<1024*1024?(I/1024).toFixed(2)+" KB":I<1024*1024*1024?(I/(1024*1024)).toFixed(2)+" MB":(I/(1024*1024*1024)).toFixed(2)+" GB"}function ge(I){return I.toFixed(2)}const fe=()=>{x()};function N(){const I=k(),R="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(I,null,2)),q=document.createElement("a");q.setAttribute("href",R),q.setAttribute("download","performance_report.json"),document.body.appendChild(q),q.click(),q.remove()}function F(){g(),fe()}function Y(){const I=k();navigator.clipboard.writeText(JSON.stringify(I,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(R=>{console.error("Erreur lors de la copie des données",R),alert("Erreur lors de la copie des données")})}async function B(I){const R=A(I.operation,I.timestamp);if(!R){alert("Impossible de trouver les détails de cette opération");return}const q={operation:{...R.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(R.operation.startTime).toISOString()},context:{...R.context,relatedOperations:R.context.relatedOperations.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),longTasks:R.context.longTasks.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),memorySnapshots:R.context.memorySnapshots.map(U=>({...U,timestamp:`+${U.timestamp.toFixed(2)}ms`,usedJSHeapSize:U.usedJSHeapSize?re(U.usedJSHeapSize):"N/A",totalJSHeapSize:U.totalJSHeapSize?re(U.totalJSHeapSize):"N/A"}))},summary:{...R.summary,memoryDelta:re(R.summary.memoryDelta),maxLongTaskDuration:`${R.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(q,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(U){console.error("Erreur lors de la copie des détails",U),alert("Erreur lors de la copie des détails")}}return(I,R)=>{var q,U,$,oe,J,_e;return qn(i)?(Ae(),Ne("div",{key:0,class:gi(["performance-panel",`position-${qn(n)}`,{expanded:r.value}])},[C("div",{class:"perf-header",onClick:R[0]||(R[0]=ve=>r.value=!r.value)},[C("div",nF,[C("div",{class:gi(["perf-indicator",{active:qn(s)}])},null,2),R[1]||(R[1]=C("span",null,"Performance",-1))]),C("div",rF,[C("span",iF,Et(D.value.fps)+" FPS",1),C("span",sF,Et(ge(D.value.averageDuration))+"ms",1)]),C("button",oF,Et(r.value?"▼":"▲"),1)]),r.value?(Ae(),Ne("div",aF,[C("div",lF,[R[6]||(R[6]=C("h3",null,"Métriques générales",-1)),C("div",uF,[C("div",cF,[R[2]||(R[2]=C("span",{class:"perf-metric-label"},"Mesures",-1)),C("span",hF,Et(D.value.totalMeasures),1)]),C("div",dF,[R[3]||(R[3]=C("span",{class:"perf-metric-label"},"Tâches longues",-1)),C("span",fF,Et(D.value.totalLongTasks),1)]),C("div",pF,[R[4]||(R[4]=C("span",{class:"perf-metric-label"},"Durée moyenne",-1)),C("span",gF,Et(ge(D.value.averageDuration))+"ms",1)]),C("div",mF,[R[5]||(R[5]=C("span",{class:"perf-metric-label"},"FPS",-1)),C("span",vF,Et(D.value.fps),1)])])]),C("div",yF,[R[10]||(R[10]=C("h3",null,"Mémoire",-1)),C("div",bF,[((q=D.value.memoryUsage)==null?void 0:q.usedJSHeapSize)!==void 0?(Ae(),Ne("div",_F,[R[7]||(R[7]=C("span",{class:"perf-metric-label"},"Utilisée",-1)),C("span",wF,Et(re((U=D.value.memoryUsage)==null?void 0:U.usedJSHeapSize)),1)])):Jt("",!0),(($=D.value.memoryUsage)==null?void 0:$.totalJSHeapSize)!==void 0?(Ae(),Ne("div",xF,[R[8]||(R[8]=C("span",{class:"perf-metric-label"},"Totale",-1)),C("span",LF,Et(re((oe=D.value.memoryUsage)==null?void 0:oe.totalJSHeapSize)),1)])):Jt("",!0),((J=D.value.memoryUsage)==null?void 0:J.jsHeapSizeLimit)!==void 0?(Ae(),Ne("div",SF,[R[9]||(R[9]=C("span",{class:"perf-metric-label"},"Limite",-1)),C("span",CF,Et(re((_e=D.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):Jt("",!0)])]),C("div",EF,[R[13]||(R[13]=C("h3",null,"Opérations les plus lentes",-1)),C("div",PF,[R[12]||(R[12]=Lu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Ae(!0),Ne(wn,null,Qn(z.value,ve=>(Ae(),Ne("div",{class:"perf-table-row",key:ve.timestamp},[C("div",MF,Et(ve.operation),1),C("div",kF,Et(ve.component),1),C("div",AF,Et(ge(ve.durationMs))+"ms",1),C("div",TF,[C("button",{onClick:ke=>B(ve),class:"perf-action-button",title:"Copier les détails"},R[11]||(R[11]=[C("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,DF)])]))),128)),z.value.length===0?(Ae(),Ne("div",OF," Aucune opération enregistrée ")):Jt("",!0)])]),C("div",{class:"perf-actions"},[C("button",{onClick:F,class:"perf-button"}," Réinitialiser "),C("button",{onClick:N,class:"perf-button"}," Télécharger "),C("button",{onClick:Y,class:"perf-button"}," Copier ")])])):Jt("",!0)],2)):Jt("",!0)}}}),nh=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},IF=nh(NF,[["__scopeId","data-v-fefe39b0"]]),BF={key:0,class:"pwa-update-notification"},RF=Rs({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=Ct(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ae(),Ne("div",BF,[C("div",{class:"pwa-update-content"},[o[0]||(o[0]=C("p",null,"Une nouvelle version est disponible",-1)),C("div",{class:"pwa-update-actions"},[C("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),C("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Jt("",!0)}}),FF=nh(RF,[["__scopeId","data-v-aa687693"]]),jF="/static/frontend/img/icons/android-chrome-192x192.png",zF={class:"prompt-content"},$F={class:"prompt-body"},VF={key:0,class:"install-instructions ios"},UF={key:1,class:"install-instructions android"},HF={key:2,class:"install-instructions desktop"},WF={key:3,class:"install-instructions desktop"},GF=Rs({__name:"PWAInstallPrompt",setup(t){const e=Ct(!1),n=Ct(!1),r=Ct(null);Ct(null);const i=Ct(!1),s=Ct(!1),o=Ct(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const g=localStorage.getItem("pwaPromptLastClosed");if(!g)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(g)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",g=>{g.preventDefault(),r.value=g,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",g=>{console.log("Application installée avec succès",g),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},d=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Zs(()=>{c()}),Md(()=>{d()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const g=await r.value.userChoice;r.value=null,g.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(g){console.error("Erreur lors de l'installation:",g)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(g,x)=>e.value?(Ae(),Ne("div",{key:0,class:gi(["pwa-install-prompt",{fullscreen:n.value}])},[C("div",zF,[C("div",{class:"prompt-header"},[x[1]||(x[1]=C("div",{class:"app-info"},[C("img",{src:jF,alt:"TagMap Logo",class:"app-logo"}),C("div",{class:"app-details"},[C("h2",null,"Installer TagMap"),C("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),C("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[C("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),C("div",$F,[i.value?(Ae(),Ne("div",VF,x[2]||(x[2]=[Lu('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Ae(),Ne("div",UF,[x[3]||(x[3]=C("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ae(),Ne("div",HF,[x[5]||(x[5]=C("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ae(),Ne("div",WF,x[7]||(x[7]=[Lu('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),C("div",{class:"prompt-footer"},[x[8]||(x[8]=Lu('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),C("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Jt("",!0)}}),qF=nh(GF,[["__scopeId","data-v-48772823"]]),YF={class:"h-screen flex flex-col"},KF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},ZF={class:"mx-auto px-4 sm:px-6 lg:px-8"},XF={class:"flex h-16 items-center justify-between"},JF={class:"flex items-center"},QF={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},t9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},n9={class:"hidden md:flex md:ml-6 space-x-8"},r9={key:0,class:"flex-1 mx-2"},i9={class:"hidden md:block"},s9={class:"md:hidden"},o9={key:1,class:"flex-1"},a9={class:"flex items-center space-x-2 md:space-x-4"},l9={class:"relative"},u9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},c9={class:"flex items-center justify-between w-full"},h9={class:"flex items-center space-x-3"},d9={class:"max-h-72 overflow-y-auto"},f9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},p9={class:"flex items-start"},g9={class:"flex-shrink-0 mr-3"},m9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},v9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},y9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={class:"flex-1"},w9={class:"text-sm md:text-sm text-gray-800"},x9=["onClick"],L9={class:"relative"},S9={class:"hidden md:flex flex-col items-end"},C9={class:"text-sm font-medium text-gray-700"},E9={key:0,class:"text-xs text-gray-500"},P9=["src","alt"],M9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},k9={class:"text-sm font-semibold text-gray-700"},A9={class:"text-xs text-gray-500"},T9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},D9={class:"space-y-1 px-2 pb-3 pt-2"},O9=Rs({__name:"App",setup(t){const e=Dm(),n=ma(),r=ru(),i=Ct(!1),s=Ct(!1),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(!1),d=Ct(!1),p=Ct(null),v=Ct("13px"),g=Ct("65px"),x=Ct(null),E=Ct(null),k=Ct(!1);function A(){d.value=window.innerWidth<768}Zs(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),Md(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const U=p.value.getBoundingClientRect();v.value=`${U.top+window.scrollY+5}px`;const $=U.left+U.width/2;g.value=`${window.innerWidth-$-22}px`}const z=Xn(()=>{const U=n.user;if(!U)return"";const $=`${U.first_name} ${U.last_name.toUpperCase()}`;return U.company_name?`${$} (${U.company_name})`:$}),X=Xn(()=>{var $;switch(($=n.user)==null?void 0:$.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),re=Xn(()=>{var U;return((U=n.user)==null?void 0:U.user_type)==="admin"}),ge=Xn(()=>n.isAuthenticated),fe=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],N=Xn(()=>{var $;if(!ge.value)return[];const U=[...fe];return(re.value||(($=n.user)==null?void 0:$.user_type)==="entreprise")&&U.push({name:"Utilisateurs",to:"/users"}),U}),F=Xn(()=>ge.value?[{name:"Mon profil",to:"/profile"}]:[]);async function Y(){try{await n.logout(),e.push("/login")}catch(U){console.error("Erreur lors de la déconnexion:",U)}}function B(U){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:U.lat,lng:U.lng,zoom:16}}))}Zs(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const $=localStorage.getItem("lastPlanId");$&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:$}}))}else console.log("No token found")}catch(U){console.error("Auth check error:",U),e.push("/login")}});const I=Xn(()=>{const U="TagMap";if(!ge.value)return`${U} - Connexion`;const $=e.currentRoute.value,J={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[$.name]||"";return J?`${U} - ${J}`:U});Ai(I,U=>{document.title=U},{immediate:!0});const R=Xn(()=>r.notifications.length);function q(){r.clearAll(),o.value=!1}return cm(()=>{if(r.lastAddedId!==null){const U=r.notifications.find($=>$.id===r.lastAddedId);U&&ha(()=>{D(),a.value=!0,l.value={id:U.id,message:U.message,type:U.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var $;(($=l.value)==null?void 0:$.id)===U.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(U,$)=>{var oe;return Ae(),Ne("div",YF,[ge.value?(Ae(),Ne("header",KF,[C("nav",ZF,[C("div",XF,[C("div",JF,[C("button",{onClick:$[0]||($[0]=J=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[$[7]||($[7]=C("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ae(),Ne("svg",QF,[s.value?(Ae(),Ne("path",t9)):(Ae(),Ne("path",e9))]))]),mi(qn(vg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Wu(()=>$[8]||($[8]=[C("span",{class:"md:inline hidden"},"TagMap",-1),C("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),C("div",n9,[(Ae(!0),Ne(wn,null,Qn(N.value,J=>(Ae(),da(qn(vg),{key:J.name,to:J.to,class:gi(["text-sm font-medium transition-colors duration-200",[U.$route.path===J.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Wu(()=>[ci(Et(J.name),1)]),_:2},1032,["to","class"]))),128))])]),U.$route.path==="/"?(Ae(),Ne("div",r9,[C("div",i9,[mi(K4,{onSelectLocation:B})]),C("div",s9,[mi(K4,{onSelectLocation:B,class:"max-w-full"})])])):(Ae(),Ne("div",o9)),C("div",a9,[C("div",l9,[C("button",{ref_key:"bellButtonRef",ref:p,onClick:$[1]||($[1]=J=>o.value=!o.value),class:gi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},$[9]||($[9]=[C("span",{class:"sr-only"},"Voir les notifications",-1),C("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ae(),Ne("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Nl(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",u9,[C("div",c9,[$[11]||($[11]=C("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),C("div",h9,[R.value>0?(Ae(),Ne("button",{key:0,onClick:q,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Jt("",!0),C("button",{onClick:$[2]||($[2]=J=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},$[10]||($[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),C("div",d9,[R.value===0?(Ae(),Ne("div",f9," Aucune notification ")):Jt("",!0),(Ae(!0),Ne(wn,null,Qn(qn(r).notifications,J=>(Ae(),Ne("div",{key:J.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[C("div",p9,[C("div",g9,[J.type==="success"?(Ae(),Ne("svg",m9,$[12]||($[12]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):J.type==="error"?(Ae(),Ne("svg",v9,$[13]||($[13]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):J.type==="warning"?(Ae(),Ne("svg",y9,$[14]||($[14]=[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ae(),Ne("svg",b9,$[15]||($[15]=[C("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),C("div",_9,[C("p",w9,Et(J.message),1),C("button",{onClick:_e=>qn(r).removeNotification(J.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,x9)])])]))),128))])],4)):Jt("",!0)]),C("div",L9,[C("button",{onClick:$[3]||($[3]=J=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[C("div",S9,[C("span",C9,Et(z.value),1),X.value?(Ae(),Ne("span",E9,Et(X.value),1)):Jt("",!0)]),C("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((oe=qn(n).user)==null?void 0:oe.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(z.value),alt:z.value},null,8,P9)]),i.value?(Ae(),Ne("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Nl(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",M9,[C("div",null,[C("div",k9,Et(z.value),1),C("div",A9,Et(X.value),1)]),C("button",{onClick:$[4]||($[4]=J=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},$[16]||($[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ae(!0),Ne(wn,null,Qn(F.value,J=>(Ae(),da(qn(vg),{key:J.name,to:J.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:$[5]||($[5]=_e=>i.value=!1)},{default:Wu(()=>[ci(Et(J.name),1)]),_:2},1032,["to"]))),128)),C("button",{onClick:Y,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Jt("",!0)])])]),s.value?(Ae(),Ne("div",T9,[C("div",D9,[(Ae(!0),Ne(wn,null,Qn(N.value,J=>(Ae(),da(qn(vg),{key:J.name,to:J.to,class:gi(["block px-3 py-2 rounded-md text-base font-medium",[U.$route.path===J.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:$[6]||($[6]=_e=>s.value=!1)},{default:Wu(()=>[ci(Et(J.name),1)]),_:2},1032,["to","class"]))),128))])])):Jt("",!0)])])):Jt("",!0),C("main",{class:gi([U.$route.path==="/"&&!d.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[mi(qn(vE))],2),mi(IF,{position:"bottom-left"}),mi(FF,{ref_key:"pwaUpdateNotification",ref:x},null,512),mi(qF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),N9="modulepreload",I9=function(t){return"/static/frontend/"+t},Z4={},Mh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=I9(l),l in Z4)return;Z4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":N9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},B9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},R9={class:"max-w-md w-full space-y-8"},F9={class:"space-y-4"},j9={class:"mt-1"},z9={class:"mt-1"},$9={class:"mt-1"},V9={key:0,class:"rounded-md bg-red-50 p-4"},U9={class:"flex"},H9={class:"ml-3"},W9={class:"text-sm font-medium text-red-800"},G9={key:1,class:"rounded-md bg-yellow-50 p-4"},q9={class:"flex"},Y9={class:"ml-3"},K9={class:"mt-2 text-sm text-yellow-700"},Z9={class:"list-disc pl-5 space-y-1"},X9=["disabled"],J9={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Q9={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ej={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tj=Rs({__name:"ChangePasswordForm",setup(t){const e=Dm(),n=ma(),r=iu({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ct(!1),s=Ct("");Zs(()=>{var c,d;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(d=n.user)==null?void 0:d.must_change_password})});const o=Xn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Xn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,d,p,v,g,x,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(A){console.error("Password change failed:",A),(p=(d=A.response)==null?void 0:d.data)!=null&&p.detail?s.value=A.response.data.detail:(g=(v=A.response)==null?void 0:v.data)!=null&&g.old_password?s.value=A.response.data.old_password[0]:(E=(x=A.response)==null?void 0:x.data)!=null&&E.password?s.value=A.response.data.password[0]:((k=A.response)==null?void 0:k.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,d)=>(Ae(),Ne("div",B9,[C("div",R9,[d[12]||(d[12]=C("div",null,[C("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),C("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),C("form",{class:"mt-8 space-y-6",onSubmit:tu(l,["prevent"])},[C("div",F9,[C("div",null,[d[3]||(d[3]=C("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),C("div",j9,[er(C("input",{id:"old-password","onUpdate:modelValue":d[0]||(d[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Li,r.oldPassword]])])]),C("div",null,[d[4]||(d[4]=C("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),C("div",z9,[er(C("input",{id:"new-password","onUpdate:modelValue":d[1]||(d[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Li,r.newPassword]])]),d[5]||(d[5]=C("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),C("div",null,[d[6]||(d[6]=C("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),C("div",$9,[er(C("input",{id:"confirm-password","onUpdate:modelValue":d[2]||(d[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Li,r.confirmPassword]])])])]),s.value?(Ae(),Ne("div",V9,[C("div",U9,[d[7]||(d[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",H9,[C("h3",W9,Et(s.value),1)])])])):Jt("",!0),o.value.length>0?(Ae(),Ne("div",G9,[C("div",q9,[d[9]||(d[9]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),C("div",Y9,[d[8]||(d[8]=C("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),C("div",K9,[C("ul",Z9,[(Ae(!0),Ne(wn,null,Qn(o.value,(p,v)=>(Ae(),Ne("li",{key:v},Et(p),1))),128))])])])])])):Jt("",!0),C("div",null,[C("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[C("span",J9,[i.value?(Ae(),Ne("svg",ej,d[11]||(d[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ae(),Ne("svg",Q9,d[10]||(d[10]=[C("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ci(" "+Et(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,X9)])],32)])]))}}),nj="/static/frontend/assets/background.svg",rj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},ij={class:"container mx-auto relative z-10"},sj={class:"sm:mx-auto sm:w-full sm:max-w-md"},oj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},aj={key:0,class:"rounded-md bg-red-50 p-4"},lj={class:"flex"},uj={class:"ml-3"},cj={class:"text-sm font-medium text-red-800"},hj={class:"mt-1"},dj={class:"mt-1 relative"},fj=["type"],pj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mj={class:"flex items-center justify-between"},vj={class:"flex items-center"},yj={class:"text-sm"},bj=["disabled"],_j={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xj={class:"mt-12"},Lj={class:"flex flex-wrap justify-center gap-2 mb-8"},Sj=["onClick"],Cj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ej={class:"flex items-center mb-4"},Pj={class:"text-2xl mr-2"},Mj={class:"text-xl font-semibold text-gray-900"},kj={class:"text-gray-600 text-sm"},Aj={key:0,class:"flex justify-center mt-8 gap-2"},Tj=["onClick"],Y1=6,Dj=Rs({__name:"LoginView",setup(t){const e=Dm(),n=ma(),r=Ct(!1),i=Ct(null),s=Ct(!1),o=Ct("Tous"),a=Ct(1),l=iu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],d=Xn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Xn(()=>{let x=o.value==="Tous"?c:c.filter(A=>A.sector===o.value);const E=(a.value-1)*Y1,k=E+Y1;return x.slice(E,k)}),v=Xn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/Y1)});Zs(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function g(){var x,E,k,A,D,z,X,re,ge;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(fe){console.error("Login error:",fe),((E=fe==null?void 0:fe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((k=fe==null?void 0:fe.response)==null?void 0:k.status)===401||((A=fe==null?void 0:fe.response)==null?void 0:A.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(z=(D=fe==null?void 0:fe.response)==null?void 0:D.data)!=null&&z.detail?i.value=fe.response.data.detail:(ge=(re=(X=fe==null?void 0:fe.response)==null?void 0:X.data)==null?void 0:re.non_field_errors)!=null&&ge[0]?i.value=fe.response.data.non_field_errors[0]:(fe==null?void 0:fe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(x,E)=>{const k=yS("router-link");return Ae(),Ne("div",rj,[C("div",{class:"fixed inset-0 z-0",style:Nl({backgroundImage:`url(${qn(nj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=C("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),C("div",ij,[C("div",sj,[C("div",oj,[E[12]||(E[12]=C("div",{class:"text-center mb-8"},[C("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),C("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),C("form",{class:"space-y-6",onSubmit:tu(g,["prevent"])},[i.value?(Ae(),Ne("div",aj,[C("div",lj,[E[4]||(E[4]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",uj,[C("h3",cj,Et(i.value),1)])])])):Jt("",!0),C("div",null,[E[5]||(E[5]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),C("div",hj,[er(C("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=A=>l.username=A),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Li,l.username]])])]),C("div",null,[E[8]||(E[8]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),C("div",dj,[er(C("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=A=>l.password=A),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,fj),[[k_,l.password]]),C("button",{type:"button",onClick:E[2]||(E[2]=A=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ae(),Ne("svg",pj,E[6]||(E[6]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ae(),Ne("svg",gj,E[7]||(E[7]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),C("div",mj,[C("div",vj,[er(C("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=A=>l.rememberMe=A),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[ky,l.rememberMe]]),E[9]||(E[9]=C("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),C("div",yj,[mi(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Wu(()=>E[10]||(E[10]=[ci(" Mot de passe oublié ? ")])),_:1})])]),C("div",null,[C("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ae(),Ne("svg",_j,E[11]||(E[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),ci(" "+Et(r.value?"Connexion en cours...":"Se connecter"),1)],8,bj)])],32)])]),C("div",wj,[E[14]||(E[14]=Lu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),C("div",xj,[E[13]||(E[13]=C("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),C("div",Lj,[(Ae(!0),Ne(wn,null,Qn(d.value,A=>(Ae(),Ne("button",{key:A,onClick:D=>o.value=A,class:gi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Et(A),11,Sj))),128))]),C("div",Cj,[(Ae(!0),Ne(wn,null,Qn(p.value,A=>(Ae(),Ne("div",{key:A.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[C("div",Ej,[C("span",Pj,Et(A.icon),1),C("span",Mj,Et(A.type),1)]),C("p",kj,Et(A.text),1)]))),128))]),v.value>1?(Ae(),Ne("div",Aj,[(Ae(!0),Ne(wn,null,Qn(v.value,A=>(Ae(),Ne("button",{key:A,onClick:D=>a.value=A,class:gi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Et(A),11,Tj))),128))])):Jt("",!0)])]),E[15]||(E[15]=C("div",{class:"h-16"},null,-1))])])}}}),Oj=nh(Dj,[["__scopeId","data-v-9ff7ee32"]]),X4="/static/frontend/assets/logo.svg";var fb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ea,function(n){var r="1.9.4";function i(u){var y,P,G,ue;for(P=1,G=arguments.length;P<G;P++){ue=arguments[P];for(y in ue)u[y]=ue[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var G=P.call(arguments,2);return function(){return u.apply(y,G.length?G.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var G,ue,Ce,lt;return lt=function(){G=!1,ue&&(Ce.apply(P,ue),ue=!1)},Ce=function(){G?ue=arguments:(u.apply(P,arguments),setTimeout(lt,y),G=!0)},Ce}function d(u,y,P){var G=y[1],ue=y[0],Ce=G-ue;return u===G&&P?u:((u-ue)%Ce+Ce)%Ce+ue}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function g(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return g(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function k(u,y,P){var G=[];for(var ue in u)G.push(encodeURIComponent(P?ue.toUpperCase():ue)+"="+encodeURIComponent(u[ue]));return(!y||y.indexOf("?")===-1?"?":"&")+G.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(u,y){return u.replace(A,function(P,G){var ue=y[G];if(ue===void 0)throw new Error("No value provided for variable "+P);return typeof ue=="function"&&(ue=ue(y)),ue})}var z=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function X(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var re="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var fe=0;function N(u){var y=+new Date,P=Math.max(0,16-(y-fe));return fe=y+P,window.setTimeout(u,P)}var F=window.requestAnimationFrame||ge("RequestAnimationFrame")||N,Y=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function B(u,y,P){if(P&&F===N)u.call(y);else return F.call(window,o(u,y))}function I(u){u&&Y.call(window,u)}var R={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:d,falseFn:p,formatNum:v,trim:g,splitWords:x,setOptions:E,getParamString:k,template:D,isArray:z,indexOf:X,emptyImageUrl:re,requestFn:F,cancelFn:Y,requestAnimFrame:B,cancelAnimFrame:I};function q(){}q.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,G=s(P);G.constructor=y,y.prototype=G;for(var ue in this)Object.prototype.hasOwnProperty.call(this,ue)&&ue!=="prototype"&&ue!=="__super__"&&(y[ue]=this[ue]);return u.statics&&i(y,u.statics),u.includes&&(U(u.includes),i.apply(null,[G].concat(u.includes))),i(G,u),delete G.statics,delete G.includes,G.options&&(G.options=P.options?s(P.options):{},i(G.options,u.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ce=0,lt=G._initHooks.length;Ce<lt;Ce++)G._initHooks[Ce].call(this)}},y},q.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},q.mergeOptions=function(u){return i(this.prototype.options,u),this},q.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=z(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y);else{u=x(u);for(var ue=0,Ce=u.length;ue<Ce;ue++)this._on(u[ue],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var G in u)this._off(G,u[G],y);else{u=x(u);for(var ue=arguments.length===1,Ce=0,lt=u.length;Ce<lt;Ce++)ue?this._off(u[Ce]):this._off(u[Ce],y,P)}return this},_on:function(u,y,P,G){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var ue={fn:y,ctx:P};G&&(ue.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ue)}},_off:function(u,y,P){var G,ue,Ce;if(this._events&&(G=this._events[u],!!G)){if(arguments.length===1){if(this._firingCount)for(ue=0,Ce=G.length;ue<Ce;ue++)G[ue].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var lt=this._listens(u,y,P);if(lt!==!1){var Ot=G[lt];this._firingCount&&(Ot.fn=p,this._events[u]=G=G.slice()),G.splice(lt,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var G=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ue=this._events[u];if(ue){this._firingCount=this._firingCount+1||1;for(var Ce=0,lt=ue.length;Ce<lt;Ce++){var Ot=ue[Ce],Ht=Ot.fn;Ot.once&&this.off(u,Ht,Ot.ctx),Ht.call(Ot.ctx||this,G)}this._firingCount--}}return P&&this._propagateEvent(G),this},listens:function(u,y,P,G){typeof u!="string"&&console.warn('"string" type argument expected');var ue=y;typeof y!="function"&&(G=!!y,ue=void 0,P=void 0);var Ce=this._events&&this._events[u];if(Ce&&Ce.length&&this._listens(u,ue,P)!==!1)return!0;if(G){for(var lt in this._eventParents)if(this._eventParents[lt].listens(u,y,P,G))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var G=this._events[u]||[];if(!y)return!!G.length;P===this&&(P=void 0);for(var ue=0,Ce=G.length;ue<Ce;ue++)if(G[ue].fn===y&&G[ue].ctx===P)return ue;return!1},once:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y,!0);else{u=x(u);for(var ue=0,Ce=u.length;ue<Ce;ue++)this._on(u[ue],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var oe=q.extend($);function J(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(u){return this.clone()._add(ve(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(ve(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new J(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new J(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=ve(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=ve(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=ve(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ve(u,y,P){return u instanceof J?u:z(u)?new J(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new J(u.x,u.y):new J(u,y,P)}function ke(u,y){if(u)for(var P=y?[u,y]:u,G=0,ue=P.length;G<ue;G++)this.extend(P[G])}ke.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof J||typeof u[0]=="number"||"x"in u)y=P=ve(u);else if(u=W(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof J?u=ve(u):u=W(u),u instanceof ke?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=W(u);var y=this.min,P=this.max,G=u.min,ue=u.max,Ce=ue.x>=y.x&&G.x<=P.x,lt=ue.y>=y.y&&G.y<=P.y;return Ce&&lt},overlaps:function(u){u=W(u);var y=this.min,P=this.max,G=u.min,ue=u.max,Ce=ue.x>y.x&&G.x<P.x,lt=ue.y>y.y&&G.y<P.y;return Ce&&lt},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,G=Math.abs(y.x-P.x)*u,ue=Math.abs(y.y-P.y)*u;return W(ve(y.x-G,y.y-ue),ve(P.x+G,P.y+ue))},equals:function(u){return u?(u=W(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function W(u,y){return!u||u instanceof ke?u:new ke(u,y)}function V(u,y){if(u)for(var P=y?[u,y]:u,G=0,ue=P.length;G<ue;G++)this.extend(P[G])}V.prototype={extend:function(u){var y=this._southWest,P=this._northEast,G,ue;if(u instanceof pe)G=u,ue=u;else if(u instanceof V){if(G=u._southWest,ue=u._northEast,!G||!ue)return this}else return u?this.extend(he(u)||K(u)):this;return!y&&!P?(this._southWest=new pe(G.lat,G.lng),this._northEast=new pe(ue.lat,ue.lng)):(y.lat=Math.min(G.lat,y.lat),y.lng=Math.min(G.lng,y.lng),P.lat=Math.max(ue.lat,P.lat),P.lng=Math.max(ue.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,G=Math.abs(y.lat-P.lat)*u,ue=Math.abs(y.lng-P.lng)*u;return new V(new pe(y.lat-G,y.lng-ue),new pe(P.lat+G,P.lng+ue))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof pe||"lat"in u?u=he(u):u=K(u);var y=this._southWest,P=this._northEast,G,ue;return u instanceof V?(G=u.getSouthWest(),ue=u.getNorthEast()):G=ue=u,G.lat>=y.lat&&ue.lat<=P.lat&&G.lng>=y.lng&&ue.lng<=P.lng},intersects:function(u){u=K(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ue=u.getNorthEast(),Ce=ue.lat>=y.lat&&G.lat<=P.lat,lt=ue.lng>=y.lng&&G.lng<=P.lng;return Ce&&lt},overlaps:function(u){u=K(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ue=u.getNorthEast(),Ce=ue.lat>y.lat&&G.lat<P.lat,lt=ue.lng>y.lng&&G.lng<P.lng;return Ce&&lt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=K(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function K(u,y){return u instanceof V?u:new V(u,y)}function pe(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}pe.prototype={equals:function(u,y){if(!u)return!1;u=he(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return le.distance(this,he(u))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return K([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function he(u,y,P){return u instanceof pe?u:z(u)&&typeof u[0]!="object"?u.length===3?new pe(u[0],u[1],u[2]):u.length===2?new pe(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new pe(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new pe(u,y,P)}var te={latLngToPoint:function(u,y){var P=this.projection.project(u),G=this.scale(y);return this.transformation._transform(P,G)},pointToLatLng:function(u,y){var P=this.scale(y),G=this.transformation.untransform(u,P);return this.projection.unproject(G)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),G=this.transformation.transform(y.min,P),ue=this.transformation.transform(y.max,P);return new ke(G,ue)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,G=u.alt;return new pe(P,y,G)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),G=y.lat-P.lat,ue=y.lng-P.lng;if(G===0&&ue===0)return u;var Ce=u.getSouthWest(),lt=u.getNorthEast(),Ot=new pe(Ce.lat-G,Ce.lng-ue),Ht=new pe(lt.lat-G,lt.lng-ue);return new V(Ot,Ht)}},le=i({},te,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,G=u.lat*P,ue=y.lat*P,Ce=Math.sin((y.lat-u.lat)*P/2),lt=Math.sin((y.lng-u.lng)*P/2),Ot=Ce*Ce+Math.cos(G)*Math.cos(ue)*lt*lt,Ht=2*Math.atan2(Math.sqrt(Ot),Math.sqrt(1-Ot));return this.R*Ht}}),Q=6378137,Be={R:Q,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,G=Math.max(Math.min(P,u.lat),-P),ue=Math.sin(G*y);return new J(this.R*u.lng*y,this.R*Math.log((1+ue)/(1-ue))/2)},unproject:function(u){var y=180/Math.PI;return new pe((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=Q*Math.PI;return new ke([-u,-u],[u,u])}()};function De(u,y,P,G){if(z(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=G}De.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new J((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function Je(u,y,P,G){return new De(u,y,P,G)}var me=i({},le,{code:"EPSG:3857",projection:Be,transformation:function(){var u=.5/(Math.PI*Be.R);return Je(u,.5,-u,.5)}()}),ee=i({},me,{code:"EPSG:900913"});function se(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function de(u,y){var P="",G,ue,Ce,lt,Ot,Ht;for(G=0,Ce=u.length;G<Ce;G++){for(Ot=u[G],ue=0,lt=Ot.length;ue<lt;ue++)Ht=Ot[ue],P+=(ue?"L":"M")+Ht.x+" "+Ht.y;P+=y?ct.svg?"z":"x":""}return P||"M0 0"}var ze=document.documentElement.style,$e="ActiveXObject"in window,et=$e&&!document.addEventListener,Ge="msLaunchUri"in navigator&&!("documentMode"in document),Qe=Ie("webkit"),Ke=Ie("android"),xt=Ie("android 2")||Ie("android 3"),bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yt=Ke&&Ie("Google")&&bt<537&&!("AudioNode"in window),Wt=!!window.opera,tn=!Ge&&Ie("chrome"),yn=Ie("gecko")&&!Qe&&!Wt&&!$e,Ze=!tn&&Ie("safari"),ot=Ie("phantom"),rt="OTransition"in ze,$t=navigator.platform.indexOf("Win")===0,Zt=$e&&"transition"in ze,Dn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xt,mn="MozPerspective"in ze,An=!window.L_DISABLE_3D&&(Zt||Dn||mn)&&!rt&&!ot,Jn=typeof orientation<"u"||Ie("mobile"),Qt=Jn&&Qe,xn=Jn&&Dn,Cn=!window.PointerEvent&&window.MSPointerEvent,tr=!!(window.PointerEvent||Cn),vr="ontouchstart"in window||!!window.TouchEvent,xr=!window.L_NO_TOUCH&&(vr||tr),ur=Jn&&Wt,Gr=Jn&&yn,Fs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ti=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Oo=function(){return!!document.createElement("canvas").getContext}(),Ts=!!(document.createElementNS&&se("svg").createSVGRect),nr=!!Ts&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ds=!Ts&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),No=navigator.platform.indexOf("Mac")===0,at=navigator.platform.indexOf("Linux")===0;function Ie(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var ct={ie:$e,ielt9:et,edge:Ge,webkit:Qe,android:Ke,android23:xt,androidStock:yt,opera:Wt,chrome:tn,gecko:yn,safari:Ze,phantom:ot,opera12:rt,win:$t,ie3d:Zt,webkit3d:Dn,gecko3d:mn,any3d:An,mobile:Jn,mobileWebkit:Qt,mobileWebkit3d:xn,msPointer:Cn,pointer:tr,touch:xr,touchNative:vr,mobileOpera:ur,mobileGecko:Gr,retina:Fs,passiveEvents:Ti,canvas:Oo,svg:Ts,vml:Ds,inlineSvg:nr,mac:No,linux:at},Ln=ct.msPointer?"MSPointerDown":"pointerdown",$n=ct.msPointer?"MSPointerMove":"pointermove",En=ct.msPointer?"MSPointerUp":"pointerup",jt=ct.msPointer?"MSPointerCancel":"pointercancel",Un={touchstart:Ln,touchmove:$n,touchend:En,touchcancel:jt},St={touchstart:Xr,touchmove:zi,touchend:zi,touchcancel:zi},qt={},Vn=!1;function hr(u,y,P){return y==="touchstart"&&Br(),St[y]?(P=St[y].bind(this,P),u.addEventListener(Un[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function Lr(u,y,P){if(!Un[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Un[y],P,!1)}function pn(u){qt[u.pointerId]=u}function rn(u){qt[u.pointerId]&&(qt[u.pointerId]=u)}function zr(u){delete qt[u.pointerId]}function Br(){Vn||(document.addEventListener(Ln,pn,!0),document.addEventListener($n,rn,!0),document.addEventListener(En,zr,!0),document.addEventListener(jt,zr,!0),Vn=!0)}function zi(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in qt)y.touches.push(qt[P]);y.changedTouches=[y],u(y)}}function Xr(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Pr(y),zi(u,y)}function _r(u){var y={},P,G;for(G in u)P=u[G],y[G]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Ar=200;function hi(u,y){u.addEventListener("dblclick",y);var P=0,G;function ue(Ce){if(Ce.detail!==1){G=Ce.detail;return}if(!(Ce.pointerType==="mouse"||Ce.sourceCapabilities&&!Ce.sourceCapabilities.firesTouchEvents)){var lt=eo(Ce);if(!(lt.some(function(Ht){return Ht instanceof HTMLLabelElement&&Ht.attributes.for})&&!lt.some(function(Ht){return Ht instanceof HTMLInputElement||Ht instanceof HTMLSelectElement}))){var Ot=Date.now();Ot-P<=Ar?(G++,G===2&&y(_r(Ce))):G=1,P=Ot}}}return u.addEventListener("click",ue),{dblclick:y,simDblclick:ue}}function Rr(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var an=vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vi=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function Ki(u){return typeof u=="string"?document.getElementById(u):u}function Jr(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(u,null);P=G?G[y]:null}return P==="auto"?null:P}function dr(u,y,P){var G=document.createElement(u);return G.className=y||"",P&&P.appendChild(G),G}function Tn(u){var y=u.parentNode;y&&y.removeChild(u)}function Sr(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function ws(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function mo(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function cr(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=Qr(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function Sn(u,y){if(u.classList!==void 0)for(var P=x(y),G=0,ue=P.length;G<ue;G++)u.classList.add(P[G]);else if(!cr(u,y)){var Ce=Qr(u);yi(u,(Ce?Ce+" ":"")+y)}}function sn(u,y){u.classList!==void 0?u.classList.remove(y):yi(u,g((" "+Qr(u)+" ").replace(" "+y+" "," ")))}function yi(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function Qr(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function bi(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Xs(u,y)}function Xs(u,y){var P=!1,G="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(G)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+G+"(opacity="+y+")"}function vo(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function js(u,y,P){var G=y||new J(0,0);u.style[an]=(ct.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(P?" scale("+P+")":"")}function yr(u,y){u._leaflet_pos=y,ct.any3d?js(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Js(u){return u._leaflet_pos||new J(0,0)}var Vi,Gi,di;if("onselectstart"in document)Vi=function(){Cr(window,"selectstart",Pr)},Gi=function(){Tr(window,"selectstart",Pr)};else{var Mn=vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vi=function(){if(Mn){var u=document.documentElement.style;di=u[Mn],u[Mn]="none"}},Gi=function(){Mn&&(document.documentElement.style[Mn]=di,di=void 0)}}function vn(){Cr(window,"dragstart",Pr)}function qr(){Tr(window,"dragstart",Pr)}var xs,Qs;function qa(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(hs(),xs=u,Qs=u.style.outlineStyle,u.style.outlineStyle="none",Cr(window,"keydown",hs))}function hs(){xs&&(xs.style.outlineStyle=Qs,xs=void 0,Qs=void 0,Tr(window,"keydown",hs))}function Ma(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function bl(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var zn={__proto__:null,TRANSFORM:an,TRANSITION:Ni,TRANSITION_END:vi,get:Ki,getStyle:Jr,create:dr,remove:Tn,empty:Sr,toFront:ws,toBack:mo,hasClass:cr,addClass:Sn,removeClass:sn,setClass:yi,getClass:Qr,setOpacity:bi,testProp:vo,setTransform:js,setPosition:yr,getPosition:Js,get disableTextSelection(){return Vi},get enableTextSelection(){return Gi},disableImageDrag:vn,enableImageDrag:qr,preventOutline:qa,restoreOutline:hs,getSizedParentNode:Ma,getScale:bl};function Cr(u,y,P,G){if(y&&typeof y=="object")for(var ue in y)Aa(u,ue,y[ue],P);else{y=x(y);for(var Ce=0,lt=y.length;Ce<lt;Ce++)Aa(u,y[Ce],P,G)}return this}var rs="_leaflet_events";function Tr(u,y,P,G){if(arguments.length===1)Zo(u),delete u[rs];else if(y&&typeof y=="object")for(var ue in y)Xo(u,ue,y[ue],P);else if(y=x(y),arguments.length===2)Zo(u,function(Ot){return X(y,Ot)!==-1});else for(var Ce=0,lt=y.length;Ce<lt;Ce++)Xo(u,y[Ce],P,G);return this}function Zo(u,y){for(var P in u[rs]){var G=P.split(/\d/)[0];(!y||y(G))&&Xo(u,G,null,null,P)}}var ka={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(u,y,P,G){var ue=y+l(P)+(G?"_"+l(G):"");if(u[rs]&&u[rs][ue])return this;var Ce=function(Ot){return P.call(G||u,Ot||window.event)},lt=Ce;!ct.touchNative&&ct.pointer&&y.indexOf("touch")===0?Ce=hr(u,y,Ce):ct.touch&&y==="dblclick"?Ce=hi(u,Ce):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(ka[y]||y,Ce,ct.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Ce=function(Ot){Ot=Ot||window.event,Il(u,Ot)&&lt(Ot)},u.addEventListener(ka[y],Ce,!1)):u.addEventListener(y,lt,!1):u.attachEvent("on"+y,Ce),u[rs]=u[rs]||{},u[rs][ue]=Ce}function Xo(u,y,P,G,ue){ue=ue||y+l(P)+(G?"_"+l(G):"");var Ce=u[rs]&&u[rs][ue];if(!Ce)return this;!ct.touchNative&&ct.pointer&&y.indexOf("touch")===0?Lr(u,y,Ce):ct.touch&&y==="dblclick"?Rr(u,Ce):"removeEventListener"in u?u.removeEventListener(ka[y]||y,Ce,!1):u.detachEvent("on"+y,Ce),u[rs][ue]=null}function sa(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function _l(u){return Aa(u,"wheel",sa),this}function Ta(u){return Cr(u,"mousedown touchstart dblclick contextmenu",sa),u._leaflet_disable_click=!0,this}function Pr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Yn(u){return Pr(u),sa(u),this}function eo(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function yo(u,y){if(!y)return new J(u.clientX,u.clientY);var P=bl(y),G=P.boundingClientRect;return new J((u.clientX-G.left)/P.x-y.clientLeft,(u.clientY-G.top)/P.y-y.clientTop)}var ou=ct.linux&&ct.chrome?window.devicePixelRatio:ct.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Mu(u){return ct.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/ou:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Il(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var au={__proto__:null,on:Cr,off:Tr,stopPropagation:sa,disableScrollPropagation:_l,disableClickPropagation:Ta,preventDefault:Pr,stop:Yn,getPropagationPath:eo,getMousePosition:yo,getWheelDelta:Mu,isExternalTarget:Il,addListener:Cr,removeListener:Tr},ku=oe.extend({run:function(u,y,P,G){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=Js(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),yr(this._el,P),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),ei=oe.extend({options:{crs:me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(he(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&ct.any3d&&!ct.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Cr(this._proxy,vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(he(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var G=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var G=this.getZoomScale(y),ue=this.getSize().divideBy(2),Ce=u instanceof J?u:this.latLngToContainerPoint(u),lt=Ce.subtract(ue).multiplyBy(1-1/G),Ot=this.containerPointToLatLng(ue.add(lt));return this.setView(Ot,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():K(u);var P=ve(y.paddingTopLeft||y.padding||[0,0]),G=ve(y.paddingBottomRight||y.padding||[0,0]),ue=this.getBoundsZoom(u,!1,P.add(G));if(ue=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ue):ue,ue===1/0)return{center:u.getCenter(),zoom:ue};var Ce=G.subtract(P).divideBy(2),lt=this.project(u.getSouthWest(),ue),Ot=this.project(u.getNorthEast(),ue),Ht=this.unproject(lt.add(Ot).divideBy(2).add(Ce),ue);return{center:Ht,zoom:ue}},fitBounds:function(u,y){if(u=K(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=ve(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ku,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Sn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!ct.any3d)return this.setView(u,y,P);this._stop();var G=this.project(this.getCenter()),ue=this.project(u),Ce=this.getSize(),lt=this._zoom;u=he(u),y=y===void 0?lt:y;var Ot=Math.max(Ce.x,Ce.y),Ht=Ot*this.getZoomScale(lt,y),un=ue.distanceTo(G)||1,Fn=1.42,sr=Fn*Fn;function $r(_i){var lo=_i?-1:1,Oe=_i?Ht:Ot,jo=Ht*Ht-Ot*Ot+lo*sr*sr*un*un,ec=2*Oe*sr*un,Gs=jo/ec,Hr=Math.sqrt(Gs*Gs+1)-Gs,zh=Hr<1e-9?-18:Math.log(Hr);return zh}function Es(_i){return(Math.exp(_i)-Math.exp(-_i))/2}function os(_i){return(Math.exp(_i)+Math.exp(-_i))/2}function Ws(_i){return Es(_i)/os(_i)}var Qi=$r(0);function Fo(_i){return Ot*(os(Qi)/os(Qi+Fn*_i))}function sh(_i){return Ot*(os(Qi)*Ws(Qi+Fn*_i)-Es(Qi))/sr}function $a(_i){return 1-Math.pow(1-_i,1.5)}var xa=Date.now(),la=($r(1)-Qi)/Fn,Ad=P.duration?1e3*P.duration:1e3*la*.8;function Du(){var _i=(Date.now()-xa)/Ad,lo=$a(_i)*la;_i<=1?(this._flyToFrame=B(Du,this),this._move(this.unproject(G.add(ue.subtract(G).multiplyBy(sh(lo)/un)),lt),this.getScaleZoom(Ot/Fo(lo),lt),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Du.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=K(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),G=this._limitCenter(P,this._zoom,K(u));return P.equals(G)||this.panTo(G,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=ve(y.paddingTopLeft||y.padding||[0,0]),G=ve(y.paddingBottomRight||y.padding||[0,0]),ue=this.project(this.getCenter()),Ce=this.project(u),lt=this.getPixelBounds(),Ot=W([lt.min.add(P),lt.max.subtract(G)]),Ht=Ot.getSize();if(!Ot.contains(Ce)){this._enforcingBounds=!0;var un=Ce.subtract(Ot.getCenter()),Fn=Ot.extend(Ce).getSize().subtract(Ht);ue.x+=un.x<0?-Fn.x:Fn.x,ue.y+=un.y<0?-Fn.y:Fn.y,this.panTo(this.unproject(ue),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),G=y.divideBy(2).round(),ue=P.divideBy(2).round(),Ce=G.subtract(ue);return!Ce.x&&!Ce.y?this:(u.animate&&u.pan?this.panBy(Ce):(u.pan&&this._rawPanBy(Ce),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,G=new pe(y,P),ue=G.toBounds(u.coords.accuracy*2),Ce=this._locateOptions;if(Ce.setView){var lt=this.getBoundsZoom(ue);this.setView(G,Ce.maxZoom?Math.min(lt,Ce.maxZoom):lt)}var Ot={latlng:G,bounds:ue,timestamp:u.timestamp};for(var Ht in u.coords)typeof u.coords[Ht]=="number"&&(Ot[Ht]=u.coords[Ht]);this.fire("locationfound",Ot)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Tn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),G=dr("div",P,y||this._mapPane);return u&&(this._panes[u]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new V(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=K(u),P=ve(P||[0,0]);var G=this.getZoom()||0,ue=this.getMinZoom(),Ce=this.getMaxZoom(),lt=u.getNorthWest(),Ot=u.getSouthEast(),Ht=this.getSize().subtract(P),un=W(this.project(Ot,G),this.project(lt,G)).getSize(),Fn=ct.any3d?this.options.zoomSnap:1,sr=Ht.x/un.x,$r=Ht.y/un.y,Es=y?Math.max(sr,$r):Math.min(sr,$r);return G=this.getScaleZoom(Es,G),Fn&&(G=Math.round(G/(Fn/100))*(Fn/100),G=y?Math.ceil(G/Fn)*Fn:Math.floor(G/Fn)*Fn),Math.max(ue,Math.min(Ce,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new ke(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var G=P.zoom(u*P.scale(y));return isNaN(G)?1/0:G},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(he(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(ve(u),y)},layerPointToLatLng:function(u){var y=ve(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(he(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(he(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(K(u))},distance:function(u,y){return this.options.crs.distance(he(u),he(y))},containerPointToLayerPoint:function(u){return ve(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return ve(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(ve(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(u)))},mouseEventToContainerPoint:function(u){return yo(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Ki(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Cr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&ct.any3d,Sn(u,"leaflet-container"+(ct.touch?" leaflet-touch":"")+(ct.retina?" leaflet-retina":"")+(ct.ielt9?" leaflet-oldie":"")+(ct.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Jr(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yr(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Sn(u.markerPane,"leaflet-zoom-hide"),Sn(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){yr(this._mapPane,new J(0,0));var G=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ue=this._zoom!==y;this._moveStart(ue,P)._move(u,y)._moveEnd(ue),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,G){y===void 0&&(y=this._zoom);var ue=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),G?P&&P.pinch&&this.fire("zoom",P):((ue||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){yr(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Tr:Cr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),ct.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],G,ue=y==="mouseout"||y==="mouseover",Ce=u.target||u.srcElement,lt=!1;Ce;){if(G=this._targets[l(Ce)],G&&(y==="click"||y==="preclick")&&this._draggableMoved(G)){lt=!0;break}if(G&&G.listens(y,!0)&&(ue&&!Il(Ce,u)||(P.push(G),ue))||Ce===this._container)break;Ce=Ce.parentNode}return!P.length&&!lt&&!ue&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&qa(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var G=i({},u);G.type="preclick",this._fireDOMEvent(G,G.type,P)}var ue=this._findEventTargets(u,y);if(P){for(var Ce=[],lt=0;lt<P.length;lt++)P[lt].listens(y,!0)&&Ce.push(P[lt]);ue=Ce.concat(ue)}if(ue.length){y==="contextmenu"&&Pr(u);var Ot=ue[0],Ht={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var un=Ot.getLatLng&&(!Ot._radius||Ot._radius<=10);Ht.containerPoint=un?this.latLngToContainerPoint(Ot.getLatLng()):this.mouseEventToContainerPoint(u),Ht.layerPoint=this.containerPointToLayerPoint(Ht.containerPoint),Ht.latlng=un?Ot.getLatLng():this.layerPointToLatLng(Ht.layerPoint)}for(lt=0;lt<ue.length;lt++)if(ue[lt].fire(y,Ht,!0),Ht.originalEvent._stopped||ue[lt].options.bubblingMouseEvents===!1&&X(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Js(this._mapPane)||new J(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(G)},_latLngBoundsToNewLayerBounds:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return W([this.project(u.getSouthWest(),y)._subtract(G),this.project(u.getNorthWest(),y)._subtract(G),this.project(u.getSouthEast(),y)._subtract(G),this.project(u.getNorthEast(),y)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var G=this.project(u,y),ue=this.getSize().divideBy(2),Ce=new ke(G.subtract(ue),G.add(ue)),lt=this._getBoundsOffset(Ce,P,y);return Math.abs(lt.x)<=1&&Math.abs(lt.y)<=1?u:this.unproject(G.add(lt),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),G=new ke(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(G,y))},_getBoundsOffset:function(u,y,P){var G=W(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),ue=G.min.subtract(u.min),Ce=G.max.subtract(u.max),lt=this._rebound(ue.x,-Ce.x),Ot=this._rebound(ue.y,-Ce.y);return new J(lt,Ot)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),G=ct.any3d?this.options.zoomSnap:1;return G&&(u=Math.round(u/G)*G),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){sn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=dr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=an,G=this._proxy.style[P];js(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),G===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();js(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(y),ue=this._getCenterOffset(u)._divideBy(1-1/G);return P.animate!==!0&&!this.getSize().contains(ue)?!1:(B(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,G){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,Sn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&sn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fs(u,y){return new ei(u,y)}var gr=q.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),G=u._controlCorners[P];return Sn(y,"leaflet-control"),P.indexOf("bottom")!==-1?G.insertBefore(y,G.firstChild):G.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ps=function(u){return new gr(u)};ei.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=dr("div",y+"control-container",this._container);function G(ue,Ce){var lt=y+ue+" "+y+Ce;u[ue+Ce]=dr("div",lt,P)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Tn(this._controlCorners[u]);Tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bl=gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,G){return P<G?-1:G<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in u)this._addLayer(u[G],G);for(G in y)this._addLayer(y[G],G,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return gr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Sn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Sn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):sn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return sn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=dr("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Ta(y),_l(y);var G=this._section=dr("section",u+"-list");P&&(this._map.on("click",this.collapse,this),Cr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ue=this._layersLink=dr("a",u+"-toggle",y);ue.href="#",ue.title="Layers",ue.setAttribute("role","button"),Cr(ue,{keydown:function(Ce){Ce.keyCode===13&&this._expandSafely()},click:function(Ce){Pr(Ce),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=dr("div",u+"-base",G),this._separator=dr("div",u+"-separator",G),this._overlaysList=dr("div",u+"-overlays",G),y.appendChild(G)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(G,ue){return this.options.sortFunction(G.layer,ue.layer,G.name,ue.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sr(this._baseLayersList),Sr(this._overlaysList),this._layerControlInputs=[];var u,y,P,G,ue=0;for(P=0;P<this._layers.length;P++)G=this._layers[P],this._addItem(G),y=y||G.overlay,u=u||!G.overlay,ue+=G.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ue>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=P,G.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),G;u.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=P):G=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(G),G.layerId=l(u.layer),Cr(G,"click",this._onInputClick,this);var ue=document.createElement("span");ue.innerHTML=" "+u.name;var Ce=document.createElement("span");y.appendChild(Ce),Ce.appendChild(G),Ce.appendChild(ue);var lt=u.overlay?this._overlaysList:this._baseLayersList;return lt.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,G=[],ue=[];this._handlingClick=!0;for(var Ce=u.length-1;Ce>=0;Ce--)y=u[Ce],P=this._getLayer(y.layerId).layer,y.checked?G.push(P):y.checked||ue.push(P);for(Ce=0;Ce<ue.length;Ce++)this._map.hasLayer(ue[Ce])&&this._map.removeLayer(ue[Ce]);for(Ce=0;Ce<G.length;Ce++)this._map.hasLayer(G[Ce])||this._map.addLayer(G[Ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,G=this._map.getZoom(),ue=u.length-1;ue>=0;ue--)y=u[ue],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&G<P.options.minZoom||P.options.maxZoom!==void 0&&G>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Cr(u,"click",Pr),this.expand();var y=this;setTimeout(function(){Tr(u,"click",Pr),y._preventClick=!1})}}),Ya=function(u,y,P){return new Bl(u,y,P)},Zi=gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=dr("div",y+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,G,ue){var Ce=dr("a",P,G);return Ce.innerHTML=u,Ce.href="#",Ce.title=y,Ce.setAttribute("role","button"),Ce.setAttribute("aria-label",y),Ta(Ce),Cr(Ce,"click",Yn),Cr(Ce,"click",ue,this),Cr(Ce,"click",this._refocusOnMap,this),Ce},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";sn(this._zoomInButton,y),sn(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Sn(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Sn(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});ei.mergeOptions({zoomControl:!0}),ei.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zi,this.addControl(this.zoomControl))});var Au=function(u){return new Zi(u)},Da=gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=dr("div",y),G=this.options;return this._addScales(G,y+"-line",P),u.on(G.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=dr("div",y,P)),u.imperial&&(this._iScale=dr("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,G,ue;y>5280?(P=y/5280,G=this._getRoundNum(P),this._updateScale(this._iScale,G+" mi",G/P)):(ue=this._getRoundNum(y),this._updateScale(this._iScale,ue+" ft",ue/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),lu=function(u){return new Da(u)},uu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oa=gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ct.inlineSvg?uu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=dr("div","leaflet-control-attribution"),Ta(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});ei.mergeOptions({attributionControl:!0}),ei.addInitHook(function(){this.options.attributionControl&&new oa().addTo(this)});var cu=function(u){return new oa(u)};gr.Layers=Bl,gr.Zoom=Zi,gr.Scale=Da,gr.Attribution=oa,ps.layers=Ya,ps.zoom=Au,ps.scale=lu,ps.attribution=cu;var Si=q.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Si.addTo=function(u,y){return u.addHandler(y,this),this};var Mc={Events:$},zs=ct.touch?"touchstart mousedown":"mousedown",va=oe.extend({options:{clickTolerance:3},initialize:function(u,y,P,G){E(this,G),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(Cr(this._dragStartTarget,zs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(va._dragging===this&&this.finishDrag(!0),Tr(this._dragStartTarget,zs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!cr(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){va._dragging===this&&this.finishDrag();return}if(!(va._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(va._dragging=this,this._preventOutline&&qa(this._element),vn(),Vi(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=Ma(this._element);this._startPoint=new J(y.clientX,y.clientY),this._startPos=Js(this._element),this._parentScale=bl(P);var G=u.type==="mousedown";Cr(document,G?"mousemove":"touchmove",this._onMove,this),Cr(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new J(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Pr(u),this._moved||(this.fire("dragstart"),this._moved=!0,Sn(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Sn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),yr(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){sn(document.body,"leaflet-dragging"),this._lastTarget&&(sn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Tr(document,"mousemove touchmove",this._onMove,this),Tr(document,"mouseup touchend touchcancel",this._onUp,this),qr(),Gi();var y=this._moved&&this._moving;this._moving=!1,va._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function hu(u,y,P){var G,ue=[1,4,2,8],Ce,lt,Ot,Ht,un,Fn,sr,$r;for(Ce=0,Fn=u.length;Ce<Fn;Ce++)u[Ce]._code=Ut(u[Ce],y);for(Ot=0;Ot<4;Ot++){for(sr=ue[Ot],G=[],Ce=0,Fn=u.length,lt=Fn-1;Ce<Fn;lt=Ce++)Ht=u[Ce],un=u[lt],Ht._code&sr?un._code&sr||($r=kt(un,Ht,sr,y,P),$r._code=Ut($r,y),G.push($r)):(un._code&sr&&($r=kt(un,Ht,sr,y,P),$r._code=Ut($r,y),G.push($r)),G.push(Ht));u=G}return u}function ya(u,y){var P,G,ue,Ce,lt,Ot,Ht,un,Fn;if(!u||u.length===0)throw new Error("latlngs not passed");Hn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var sr=he([0,0]),$r=K(u),Es=$r.getNorthWest().distanceTo($r.getSouthWest())*$r.getNorthEast().distanceTo($r.getNorthWest());Es<1700&&(sr=Rl(u));var os=u.length,Ws=[];for(P=0;P<os;P++){var Qi=he(u[P]);Ws.push(y.project(he([Qi.lat-sr.lat,Qi.lng-sr.lng])))}for(Ot=Ht=un=0,P=0,G=os-1;P<os;G=P++)ue=Ws[P],Ce=Ws[G],lt=ue.y*Ce.x-Ce.y*ue.x,Ht+=(ue.x+Ce.x)*lt,un+=(ue.y+Ce.y)*lt,Ot+=lt*3;Ot===0?Fn=Ws[0]:Fn=[Ht/Ot,un/Ot];var Fo=y.unproject(ve(Fn));return he([Fo.lat+sr.lat,Fo.lng+sr.lng])}function Rl(u){for(var y=0,P=0,G=0,ue=0;ue<u.length;ue++){var Ce=he(u[ue]);y+=Ce.lat,P+=Ce.lng,G++}return he([y/G,P/G])}var Fl={__proto__:null,clipPolygon:hu,polygonCenter:ya,centroid:Rl};function Ci(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=we(u,P),u=gs(u,P),u}function Jo(u,y,P){return Math.sqrt(Rn(u,y,P,!0))}function Ka(u,y,P){return Rn(u,y,P)}function gs(u,y){var P=u.length,G=typeof Uint8Array<"u"?Uint8Array:Array,ue=new G(P);ue[0]=ue[P-1]=1,j(u,ue,y,0,P-1);var Ce,lt=[];for(Ce=0;Ce<P;Ce++)ue[Ce]&&lt.push(u[Ce]);return lt}function j(u,y,P,G,ue){var Ce=0,lt,Ot,Ht;for(Ot=G+1;Ot<=ue-1;Ot++)Ht=Rn(u[Ot],u[G],u[ue],!0),Ht>Ce&&(lt=Ot,Ce=Ht);Ce>P&&(y[lt]=1,j(u,y,P,G,lt),j(u,y,P,lt,ue))}function we(u,y){for(var P=[u[0]],G=1,ue=0,Ce=u.length;G<Ce;G++)dn(u[G],u[ue])>y&&(P.push(u[G]),ue=G);return ue<Ce-1&&P.push(u[Ce-1]),P}var Xe;function dt(u,y,P,G,ue){var Ce=G?Xe:Ut(u,P),lt=Ut(y,P),Ot,Ht,un;for(Xe=lt;;){if(!(Ce|lt))return[u,y];if(Ce&lt)return!1;Ot=Ce||lt,Ht=kt(u,y,Ot,P,ue),un=Ut(Ht,P),Ot===Ce?(u=Ht,Ce=un):(y=Ht,lt=un)}}function kt(u,y,P,G,ue){var Ce=y.x-u.x,lt=y.y-u.y,Ot=G.min,Ht=G.max,un,Fn;return P&8?(un=u.x+Ce*(Ht.y-u.y)/lt,Fn=Ht.y):P&4?(un=u.x+Ce*(Ot.y-u.y)/lt,Fn=Ot.y):P&2?(un=Ht.x,Fn=u.y+lt*(Ht.x-u.x)/Ce):P&1&&(un=Ot.x,Fn=u.y+lt*(Ot.x-u.x)/Ce),new J(un,Fn,ue)}function Ut(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function dn(u,y){var P=y.x-u.x,G=y.y-u.y;return P*P+G*G}function Rn(u,y,P,G){var ue=y.x,Ce=y.y,lt=P.x-ue,Ot=P.y-Ce,Ht=lt*lt+Ot*Ot,un;return Ht>0&&(un=((u.x-ue)*lt+(u.y-Ce)*Ot)/Ht,un>1?(ue=P.x,Ce=P.y):un>0&&(ue+=lt*un,Ce+=Ot*un)),lt=u.x-ue,Ot=u.y-Ce,G?lt*lt+Ot*Ot:new J(ue,Ce)}function Hn(u){return!z(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function fr(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hn(u)}function Er(u,y){var P,G,ue,Ce,lt,Ot,Ht,un;if(!u||u.length===0)throw new Error("latlngs not passed");Hn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Fn=he([0,0]),sr=K(u),$r=sr.getNorthWest().distanceTo(sr.getSouthWest())*sr.getNorthEast().distanceTo(sr.getNorthWest());$r<1700&&(Fn=Rl(u));var Es=u.length,os=[];for(P=0;P<Es;P++){var Ws=he(u[P]);os.push(y.project(he([Ws.lat-Fn.lat,Ws.lng-Fn.lng])))}for(P=0,G=0;P<Es-1;P++)G+=os[P].distanceTo(os[P+1])/2;if(G===0)un=os[0];else for(P=0,Ce=0;P<Es-1;P++)if(lt=os[P],Ot=os[P+1],ue=lt.distanceTo(Ot),Ce+=ue,Ce>G){Ht=(Ce-G)/ue,un=[Ot.x-Ht*(Ot.x-lt.x),Ot.y-Ht*(Ot.y-lt.y)];break}var Qi=y.unproject(ve(un));return he([Qi.lat+Fn.lat,Qi.lng+Fn.lng])}var Vr={__proto__:null,simplify:Ci,pointToSegmentDistance:Jo,closestPointOnSegment:Ka,clipSegment:dt,_getEdgeIntersection:kt,_getBitCode:Ut,_sqClosestPointOnSegment:Rn,isFlat:Hn,_flat:fr,polylineCenter:Er},qi={project:function(u){return new J(u.lng,u.lat)},unproject:function(u){return new pe(u.y,u.x)},bounds:new ke([-180,-90],[180,90])},pi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ke([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,G=u.lat*y,ue=this.R_MINOR/P,Ce=Math.sqrt(1-ue*ue),lt=Ce*Math.sin(G),Ot=Math.tan(Math.PI/4-G/2)/Math.pow((1-lt)/(1+lt),Ce/2);return G=-P*Math.log(Math.max(Ot,1e-10)),new J(u.lng*y*P,G)},unproject:function(u){for(var y=180/Math.PI,P=this.R,G=this.R_MINOR/P,ue=Math.sqrt(1-G*G),Ce=Math.exp(-u.y/P),lt=Math.PI/2-2*Math.atan(Ce),Ot=0,Ht=.1,un;Ot<15&&Math.abs(Ht)>1e-7;Ot++)un=ue*Math.sin(lt),un=Math.pow((1-un)/(1+un),ue/2),Ht=Math.PI/2-2*Math.atan(Ce*un)-lt,lt+=Ht;return new pe(lt*y,u.x*y/P)}},Ei={__proto__:null,LonLat:qi,Mercator:pi,SphericalMercator:Be},ms=i({},le,{code:"EPSG:3395",projection:pi,transformation:function(){var u=.5/(Math.PI*pi.R);return Je(u,.5,-u,.5)}()}),Ls=i({},le,{code:"EPSG:4326",projection:qi,transformation:Je(1/180,1,-1/180,.5)}),Qo=i({},te,{projection:qi,transformation:Je(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,G=y.lat-u.lat;return Math.sqrt(P*P+G*G)},infinite:!0});te.Earth=le,te.EPSG3395=ms,te.EPSG3857=me,te.EPSG900913=ee,te.EPSG4326=Ls,te.Simple=Qo;var Ur=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});ei.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?z(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var G in this._zoomBoundLayers){var ue=this._zoomBoundLayers[G].options;u=ue.minZoom===void 0?u:Math.min(u,ue.minZoom),y=ue.maxZoom===void 0?y:Math.max(y,ue.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var to=Ur.extend({initialize:function(u,y){E(this,y),this._layers={};var P,G;if(u)for(P=0,G=u.length;P<G;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,G;for(P in this._layers)G=this._layers[P],G[u]&&G[u].apply(G,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),jl=function(u,y){return new to(u,y)},bo=to.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),to.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),to.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new V;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Tu=function(u,y){return new bo(u,y)},Oa=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(G,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(u,y){var P=this.options,G=P[y+"Size"];typeof G=="number"&&(G=[G,G]);var ue=ve(G),Ce=ve(y==="shadow"&&P.shadowAnchor||P.iconAnchor||ue&&ue.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Ce&&(u.style.marginLeft=-Ce.x+"px",u.style.marginTop=-Ce.y+"px"),ue&&(u.style.width=ue.x+"px",u.style.height=ue.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return ct.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Ju(u){return new Oa(u)}var wl=Oa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof wl.imagePath!="string"&&(wl.imagePath=this._detectIconPath()),(this.options.imagePath||wl.imagePath)+Oa.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,G,ue){var Ce=G.exec(P);return Ce&&Ce[ue]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=dr("div","leaflet-default-icon-path",document.body),y=Jr(u,"background-image")||Jr(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),xl=Si.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new va(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Sn(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&sn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,G=this._marker.options.autoPanSpeed,ue=this._marker.options.autoPanPadding,Ce=Js(y._icon),lt=P.getPixelBounds(),Ot=P.getPixelOrigin(),Ht=W(lt.min._subtract(Ot).add(ue),lt.max._subtract(Ot).subtract(ue));if(!Ht.contains(Ce)){var un=ve((Math.max(Ht.max.x,Ce.x)-Ht.max.x)/(lt.max.x-Ht.max.x)-(Math.min(Ht.min.x,Ce.x)-Ht.min.x)/(lt.min.x-Ht.min.x),(Math.max(Ht.max.y,Ce.y)-Ht.max.y)/(lt.max.y-Ht.max.y)-(Math.min(Ht.min.y,Ce.y)-Ht.min.y)/(lt.min.y-Ht.min.y)).multiplyBy(G);P.panBy(un,{animate:!1}),this._draggable._newPos._add(un),this._draggable._startPos._add(un),yr(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=B(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,G=Js(y._icon),ue=y._map.layerPointToLatLng(G);P&&yr(P,G),y._latlng=ue,u.latlng=ue,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Ss=Ur.extend({options:{icon:new wl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=he(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=he(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),G=!1;P!==this._icon&&(this._icon&&this._removeIcon(),G=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),Sn(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Cr(P,"focus",this._panOnFocus,this);var ue=u.icon.createShadow(this._shadow),Ce=!1;ue!==this._shadow&&(this._removeShadow(),Ce=!0),ue&&(Sn(ue,y),ue.alt=""),this._shadow=ue,u.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),ue&&Ce&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tr(this._icon,"focus",this._panOnFocus,this),Tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Tn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&yr(this._icon,u),this._shadow&&yr(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Sn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&bi(this._icon,u),this._shadow&&bi(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?ve(y.iconSize):ve(0,0),G=y.iconAnchor?ve(y.iconAnchor):ve(0,0);u.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:P.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Na(u,y){return new Ss(u,y)}var ea=Ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Io=ea.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=he(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=he(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return ea.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),G=[u+P,y+P];this._pxBounds=new ke(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zl(u,y){return new Io(u,y)}var no=Io.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=he(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new V(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:ea.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,G=P.options.crs;if(G.distance===le.distance){var ue=Math.PI/180,Ce=this._mRadius/le.R/ue,lt=P.project([y+Ce,u]),Ot=P.project([y-Ce,u]),Ht=lt.add(Ot).divideBy(2),un=P.unproject(Ht).lat,Fn=Math.acos((Math.cos(Ce*ue)-Math.sin(y*ue)*Math.sin(un*ue))/(Math.cos(y*ue)*Math.cos(un*ue)))/ue;(isNaN(Fn)||Fn===0)&&(Fn=Ce/Math.cos(Math.PI/180*y)),this._point=Ht.subtract(P.getPixelOrigin()),this._radius=isNaN(Fn)?0:Ht.x-P.project([un,u-Fn]).x,this._radiusY=Ht.y-lt.y}else{var sr=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(sr).x}this._updateBounds()}});function _o(u,y,P){return new no(u,y,P)}var wo=ea.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,G=Rn,ue,Ce,lt=0,Ot=this._parts.length;lt<Ot;lt++)for(var Ht=this._parts[lt],un=1,Fn=Ht.length;un<Fn;un++){ue=Ht[un-1],Ce=Ht[un];var sr=G(u,ue,Ce,!0);sr<y&&(y=sr,P=G(u,ue,Ce))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Er(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=he(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new V,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Hn(u),G=0,ue=u.length;G<ue;G++)P?(y[G]=he(u[G]),this._bounds.extend(y[G])):y[G]=this._convertLatLngs(u[G]);return y},_project:function(){var u=new ke;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new J(u,u);this._rawPxBounds&&(this._pxBounds=new ke([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var G=u[0]instanceof pe,ue=u.length,Ce,lt;if(G){for(lt=[],Ce=0;Ce<ue;Ce++)lt[Ce]=this._map.latLngToLayerPoint(u[Ce]),P.extend(lt[Ce]);y.push(lt)}else for(Ce=0;Ce<ue;Ce++)this._projectLatlngs(u[Ce],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,G,ue,Ce,lt,Ot,Ht;for(P=0,ue=0,Ce=this._rings.length;P<Ce;P++)for(Ht=this._rings[P],G=0,lt=Ht.length;G<lt-1;G++)Ot=dt(Ht[G],Ht[G+1],u,G,!0),Ot&&(y[ue]=y[ue]||[],y[ue].push(Ot[0]),(Ot[1]!==Ht[G+1]||G===lt-2)&&(y[ue].push(Ot[1]),ue++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,G=u.length;P<G;P++)u[P]=Ci(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,G,ue,Ce,lt,Ot,Ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Ce=this._parts.length;P<Ce;P++)for(Ot=this._parts[P],G=0,lt=Ot.length,ue=lt-1;G<lt;ue=G++)if(!(!y&&G===0)&&Jo(u,Ot[ue],Ot[G])<=Ht)return!0;return!1}});function kc(u,y){return new wo(u,y)}wo._flat=fr;var Os=wo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ya(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=wo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof pe&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){wo.prototype._setLatLngs.call(this,u),Hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new J(y,y);if(u=new ke(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,ue=this._rings.length,Ce;G<ue;G++)Ce=hu(this._rings[G],u,!0),Ce.length&&this._parts.push(Ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,G,ue,Ce,lt,Ot,Ht,un;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Ce=0,Ht=this._parts.length;Ce<Ht;Ce++)for(P=this._parts[Ce],lt=0,un=P.length,Ot=un-1;lt<un;Ot=lt++)G=P[lt],ue=P[Ot],G.y>u.y!=ue.y>u.y&&u.x<(ue.x-G.x)*(u.y-G.y)/(ue.y-G.y)+G.x&&(y=!y);return y||wo.prototype._containsPoint.call(this,u,!0)}});function Za(u,y){return new Os(u,y)}var ro=bo.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=z(u)?u:u.features,P,G,ue;if(y){for(P=0,G=y.length;P<G;P++)ue=y[P],(ue.geometries||ue.geometry||ue.features||ue.coordinates)&&this.addData(ue);return this}var Ce=this.options;if(Ce.filter&&!Ce.filter(u))return this;var lt=io(u,Ce);return lt?(lt.feature=oo(u),lt.defaultOptions=lt.options,this.resetStyle(lt),Ce.onEachFeature&&Ce.onEachFeature(u,lt),this.addLayer(lt)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function io(u,y){var P=u.type==="Feature"?u.geometry:u,G=P?P.coordinates:null,ue=[],Ce=y&&y.pointToLayer,lt=y&&y.coordsToLatLng||Ja,Ot,Ht,un,Fn;if(!G&&!P)return null;switch(P.type){case"Point":return Ot=lt(G),Xa(Ce,u,Ot,y);case"MultiPoint":for(un=0,Fn=G.length;un<Fn;un++)Ot=lt(G[un]),ue.push(Xa(Ce,u,Ot,y));return new bo(ue);case"LineString":case"MultiLineString":return Ht=so(G,P.type==="LineString"?0:1,lt),new wo(Ht,y);case"Polygon":case"MultiPolygon":return Ht=so(G,P.type==="Polygon"?1:2,lt),new Os(Ht,y);case"GeometryCollection":for(un=0,Fn=P.geometries.length;un<Fn;un++){var sr=io({geometry:P.geometries[un],type:"Feature",properties:u.properties},y);sr&&ue.push(sr)}return new bo(ue);case"FeatureCollection":for(un=0,Fn=P.features.length;un<Fn;un++){var $r=io(P.features[un],y);$r&&ue.push($r)}return new bo(ue);default:throw new Error("Invalid GeoJSON object.")}}function Xa(u,y,P,G){return u?u(y,P):new Ss(P,G&&G.markersInheritOptions&&G)}function Ja(u){return new pe(u[1],u[0],u[2])}function so(u,y,P){for(var G=[],ue=0,Ce=u.length,lt;ue<Ce;ue++)lt=y?so(u[ue],y-1,P):(P||Ja)(u[ue]),G.push(lt);return G}function $s(u,y){return u=he(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Ia(u,y,P,G){for(var ue=[],Ce=0,lt=u.length;Ce<lt;Ce++)ue.push(y?Ia(u[Ce],Hn(u[Ce])?0:y-1,P,G):$s(u[Ce],G));return!y&&P&&ue.length>0&&ue.push(ue[0].slice()),ue}function ta(u,y){return u.feature?i({},u.feature,{geometry:y}):oo(y)}function oo(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var Lt={toGeoJSON:function(u){return ta(this,{type:"Point",coordinates:$s(this.getLatLng(),u)})}};Ss.include(Lt),no.include(Lt),Io.include(Lt),wo.include({toGeoJSON:function(u){var y=!Hn(this._latlngs),P=Ia(this._latlngs,y?1:0,!1,u);return ta(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Os.include({toGeoJSON:function(u){var y=!Hn(this._latlngs),P=y&&!Hn(this._latlngs[0]),G=Ia(this._latlngs,P?2:y?1:0,!0,u);return y||(G=[G]),ta(this,{type:(P?"Multi":"")+"Polygon",coordinates:G})}}),to.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),ta(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",G=[];return this.eachLayer(function(ue){if(ue.toGeoJSON){var Ce=ue.toGeoJSON(u);if(P)G.push(Ce.geometry);else{var lt=oo(Ce);lt.type==="FeatureCollection"?G.push.apply(G,lt.features):G.push(lt)}}}),P?ta(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function Yt(u,y){return new ro(u,y)}var Nt=Yt,In=Ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=K(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Sn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&ws(this._image),this},bringToBack:function(){return this._map&&mo(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=K(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:dr("img");if(Sn(y,"leaflet-image-layer"),this._zoomAnimated&&Sn(y,"leaflet-zoom-animated"),this.options.className&&Sn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;js(this._image,P,y)},_reset:function(){var u=this._image,y=new ke(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();yr(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){bi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),rr=function(u,y,P){return new In(u,y,P)},Mr=In.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:dr("video");if(Sn(y,"leaflet-image-layer"),this._zoomAnimated&&Sn(y,"leaflet-zoom-animated"),this.options.className&&Sn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),G=[],ue=0;ue<P.length;ue++)G.push(P[ue].src);this._url=P.length>0?G:[y.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Ce=0;Ce<this._url.length;Ce++){var lt=dr("source");lt.src=this._url[Ce],y.appendChild(lt)}}});function Xi(u,y,P){return new Mr(u,y,P)}var Pi=In.extend({_initImage:function(){var u=this._image=this._url;Sn(u,"leaflet-image-layer"),this._zoomAnimated&&Sn(u,"leaflet-zoom-animated"),this.options.className&&Sn(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function du(u,y,P){return new Pi(u,y,P)}var xo=Ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof pe||z(u))?(this._latlng=he(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&bi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&bi(this._container,1),this.bringToFront(),this.options.interactive&&(Sn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(bi(this._container,0),this._removeTimeout=setTimeout(o(Tn,void 0,this._container),200)):Tn(this._container),this.options.interactive&&(sn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=he(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ws(this._container),this},bringToBack:function(){return this._map&&mo(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof bo){y=null;var P=this._source._layers;for(var G in P)if(P[G]._map){y=P[G];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=ve(this.options.offset),P=this._getAnchor();this._zoomAnimated?yr(this._container,u.add(P)):y=y.add(u).add(P);var G=this._containerBottom=-y.y,ue=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=G+"px",this._container.style.left=ue+"px"}},_getAnchor:function(){return[0,0]}});ei.include({_initOverlay:function(u,y,P,G){var ue=y;return ue instanceof u||(ue=new u(G).setContent(y)),P&&ue.setLatLng(P),ue}}),Ur.include({_initOverlay:function(u,y,P,G){var ue=P;return ue instanceof u?(E(ue,G),ue._source=this):(ue=y&&!G?y:new u(G,this),ue.setContent(P)),ue}});var Ji=xo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,xo.prototype.openOn.call(this,u)},onAdd:function(u){xo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ea||this._source.on("preclick",sa))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ea||this._source.off("preclick",sa))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=dr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=dr("div",u+"-content-wrapper",y);if(this._contentNode=dr("div",u+"-content",P),Ta(y),_l(this._contentNode),Cr(y,"contextmenu",sa),this._tipContainer=dr("div",u+"-tip-container",y),this._tip=dr("div",u+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=dr("a",u+"-close-button",y);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',Cr(G,"click",function(ue){Pr(ue),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var G=u.offsetHeight,ue=this.options.maxHeight,Ce="leaflet-popup-scrolled";ue&&G>ue?(y.height=ue+"px",Sn(u,Ce)):sn(u,Ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();yr(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Jr(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,G=this._containerWidth,ue=new J(this._containerLeft,-P-this._containerBottom);ue._add(Js(this._container));var Ce=u.layerPointToContainerPoint(ue),lt=ve(this.options.autoPanPadding),Ot=ve(this.options.autoPanPaddingTopLeft||lt),Ht=ve(this.options.autoPanPaddingBottomRight||lt),un=u.getSize(),Fn=0,sr=0;Ce.x+G+Ht.x>un.x&&(Fn=Ce.x+G-un.x+Ht.x),Ce.x-Fn-Ot.x<0&&(Fn=Ce.x-Ot.x),Ce.y+P+Ht.y>un.y&&(sr=Ce.y+P-un.y+Ht.y),Ce.y-sr-Ot.y<0&&(sr=Ce.y-Ot.y),(Fn||sr)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Fn,sr]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ba=function(u,y){return new Ji(u,y)};ei.mergeOptions({closePopupOnClick:!0}),ei.include({openPopup:function(u,y,P){return this._initOverlay(Ji,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Ur.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Ji,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof bo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Yn(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof ea)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Qa=xo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){xo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,G=this._map,ue=this._container,Ce=G.latLngToContainerPoint(G.getCenter()),lt=G.layerPointToContainerPoint(u),Ot=this.options.direction,Ht=ue.offsetWidth,un=ue.offsetHeight,Fn=ve(this.options.offset),sr=this._getAnchor();Ot==="top"?(y=Ht/2,P=un):Ot==="bottom"?(y=Ht/2,P=0):Ot==="center"?(y=Ht/2,P=un/2):Ot==="right"?(y=0,P=un/2):Ot==="left"?(y=Ht,P=un/2):lt.x<Ce.x?(Ot="right",y=0,P=un/2):(Ot="left",y=Ht+(Fn.x+sr.x)*2,P=un/2),u=u.subtract(ve(y,P,!0)).add(Fn).add(sr),sn(ue,"leaflet-tooltip-right"),sn(ue,"leaflet-tooltip-left"),sn(ue,"leaflet-tooltip-top"),sn(ue,"leaflet-tooltip-bottom"),Sn(ue,"leaflet-tooltip-"+Ot),yr(ue,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&bi(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ra=function(u,y){return new Qa(u,y)};ei.include({openTooltip:function(u,y,P){return this._initOverlay(Qa,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Ur.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof bo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(Cr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Cr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,G;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),G=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(y)}});var Fa=Oa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Sr(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var G=ve(P.bgPos);y.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function ja(u){return new Fa(u)}Oa.Default=wl;var ti=Ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ct.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Tn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ws(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof J?u:new J(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),G=0,ue=y.length,Ce;G<ue;G++)Ce=y[G].style.zIndex,y[G]!==this._container&&Ce&&(P=u(P,+Ce));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ct.ielt9){bi(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var G in this._tiles){var ue=this._tiles[G];if(!(!ue.current||!ue.loaded)){var Ce=Math.min(1,(u-ue.loaded)/200);bi(ue.el,Ce),Ce<1?y=!0:(ue.active?P=!0:this._onOpaqueTile(ue),ue.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(I(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=dr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(Tn(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var G=this._levels[u],ue=this._map;return G||(G=this._levels[u]={},G.el=dr("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=y,G.origin=ue.project(ue.unproject(ue.getPixelOrigin()),u).round(),G.zoom=u,this._setZoomTransform(G,ue.getCenter(),ue.getZoom()),p(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var G=y.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Tn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,G){var ue=Math.floor(u/2),Ce=Math.floor(y/2),lt=P-1,Ot=new J(+ue,+Ce);Ot.z=+lt;var Ht=this._tileCoordsToKey(Ot),un=this._tiles[Ht];return un&&un.active?(un.retain=!0,!0):(un&&un.loaded&&(un.retain=!0),lt>G?this._retainParent(ue,Ce,lt,G):!1)},_retainChildren:function(u,y,P,G){for(var ue=2*u;ue<2*u+2;ue++)for(var Ce=2*y;Ce<2*y+2;Ce++){var lt=new J(ue,Ce);lt.z=P+1;var Ot=this._tileCoordsToKey(lt),Ht=this._tiles[Ot];if(Ht&&Ht.active){Ht.retain=!0;continue}else Ht&&Ht.loaded&&(Ht.retain=!0);P+1<G&&this._retainChildren(ue,Ce,P+1,G)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,G){var ue=Math.round(y);this.options.maxZoom!==void 0&&ue>this.options.maxZoom||this.options.minZoom!==void 0&&ue<this.options.minZoom?ue=void 0:ue=this._clampZoom(ue);var Ce=this.options.updateWhenZooming&&ue!==this._tileZoom;(!G||Ce)&&(this._tileZoom=ue,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ue!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var G=this._map.getZoomScale(P,u.zoom),ue=u.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(y,P)).round();ct.any3d?js(u.el,ue,G):yr(u.el,ue)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),G=this._tileZoom,ue=this._map.getPixelWorldBounds(this._tileZoom);ue&&(this._globalTileRange=this._pxBoundsToTileRange(ue)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],G).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],G).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],G).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],G).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),G=y.getZoomScale(P,this._tileZoom),ue=y.project(u,this._tileZoom).floor(),Ce=y.getSize().divideBy(G*2);return new ke(ue.subtract(Ce),ue.add(Ce))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(u),ue=this._pxBoundsToTileRange(G),Ce=ue.getCenter(),lt=[],Ot=this.options.keepBuffer,Ht=new ke(ue.getBottomLeft().subtract([Ot,-Ot]),ue.getTopRight().add([Ot,-Ot]));if(!(isFinite(ue.min.x)&&isFinite(ue.min.y)&&isFinite(ue.max.x)&&isFinite(ue.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var un in this._tiles){var Fn=this._tiles[un].coords;(Fn.z!==this._tileZoom||!Ht.contains(new J(Fn.x,Fn.y)))&&(this._tiles[un].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var sr=ue.min.y;sr<=ue.max.y;sr++)for(var $r=ue.min.x;$r<=ue.max.x;$r++){var Es=new J($r,sr);if(Es.z=this._tileZoom,!!this._isValidTile(Es)){var os=this._tiles[this._tileCoordsToKey(Es)];os?os.current=!0:lt.push(Es)}}if(lt.sort(function(Qi,Fo){return Qi.distanceTo(Ce)-Fo.distanceTo(Ce)}),lt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ws=document.createDocumentFragment();for($r=0;$r<lt.length;$r++)this._addTile(lt[$r],Ws);this._level.el.appendChild(Ws)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(u);return K(this.options.bounds).overlaps(G)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),G=u.scaleBy(P),ue=G.add(P),Ce=y.unproject(G,u.z),lt=y.unproject(ue,u.z);return[Ce,lt]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new V(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new J(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(Tn(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Sn(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,ct.ielt9&&this.options.opacity<1&&bi(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),G=this._tileCoordsToKey(u),ue=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ue),this.createTile.length<2&&B(o(this._tileReady,this,u,null,ue)),yr(ue,P),this._tiles[G]={el:ue,coords:u,current:!0},y.appendChild(ue),this.fire("tileloadstart",{tile:ue,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var G=this._tileCoordsToKey(u);P=this._tiles[G],P&&(P.loaded=+new Date,this._map._fadeAnimated?(bi(P.el,0),I(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(Sn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ct.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new J(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new ke(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function ba(u){return new ti(u)}var Vs=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&ct.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return Cr(P,"load",o(this._tileOnLoad,this,y,P)),Cr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:ct.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return D(this._url,i(y,this.options))},_tileOnLoad:function(u,y){ct.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var G=this.options.errorTileUrl;G&&y.getAttribute("src")!==G&&(y.src=G),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,G=this.options.zoomOffset;return P&&(u=y-u),u+G},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=re;var P=this._tiles[u].coords;Tn(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",re),ti.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===re))return ti.prototype._tileReady.call(this,u,y,P)}});function Mi(u,y){return new Vs(u,y)}var Ii=Vs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var G in y)G in this.options||(P[G]=y[G]);y=E(this,y);var ue=y.detectRetina&&ct.retina?2:1,Ce=this.getTileSize();P.width=Ce.x*ue,P.height=Ce.y*ue,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Vs.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,G=W(P.project(y[0]),P.project(y[1])),ue=G.min,Ce=G.max,lt=(this._wmsVersion>=1.3&&this._crs===Ls?[ue.y,ue.x,Ce.y,Ce.x]:[ue.x,ue.y,Ce.x,Ce.y]).join(","),Ot=Vs.prototype.getTileUrl.call(this,u);return Ot+k(this.wmsParams,Ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+lt},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function vs(u,y){return new Ii(u,y)}Vs.WMS=Ii,Mi.wms=vs;var Ui=Ur.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Sn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),ue=this._map.project(this._center,y),Ce=G.multiplyBy(-P).add(ue).subtract(this._map._getNewPixelOrigin(u,y));ct.any3d?js(this._container,Ce,P):yr(this._container,Ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new ke(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),na=Ui.extend({options:{tolerance:0},getEvents:function(){var u=Ui.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Cr(u,"mousemove",this._onMouseMove,this),Cr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Cr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,Tn(this._container),Tr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),G=ct.retina?2:1;yr(y,u.min),y.width=G*P.x,y.height=G*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",ct.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,G=y.prev;P?P.prev=G:this._drawLast=G,G?G.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],G,ue;for(ue=0;ue<y.length;ue++){if(G=Number(y[ue]),isNaN(G))return;P.push(G)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ke,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)u=G.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,G,ue,Ce,lt=u._parts,Ot=lt.length,Ht=this._ctx;if(Ot){for(Ht.beginPath(),P=0;P<Ot;P++){for(G=0,ue=lt[P].length;G<ue;G++)Ce=lt[P][G],Ht[G?"lineTo":"moveTo"](Ce.x,Ce.y);y&&Ht.closePath()}this._fillStroke(Ht,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,G=Math.max(Math.round(u._radius),1),ue=(Math.max(Math.round(u._radiusY),1)||G)/G;ue!==1&&(P.save(),P.scale(1,ue)),P.beginPath(),P.arc(y.x,y.y/ue,G,0,Math.PI*2,!1),ue!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,G,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(G=P);this._fireEvent(G?[G]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(sn(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,G,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(G=P);G!==this._hoveredLayer&&(this._handleMouseOut(u),G&&(Sn(this._container,"leaflet-interactive"),this._fireEvent([G],u,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(P)P.prev=G;else return;G?G.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(G)G.next=P;else return;P?P.prev=G:G&&(this._drawLast=G),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Bo(u){return ct.canvas?new na(u):null}var aa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Qu={_initContainer:function(){this._container=dr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=aa("shape");Sn(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=aa("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;Tn(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,G=u.options,ue=u._container;ue.stroked=!!G.stroke,ue.filled=!!G.fill,G.stroke?(y||(y=u._stroke=aa("stroke")),ue.appendChild(y),y.weight=G.weight+"px",y.color=G.color,y.opacity=G.opacity,G.dashArray?y.dashStyle=z(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=G.lineCap.replace("butt","flat"),y.joinstyle=G.lineJoin):y&&(ue.removeChild(y),u._stroke=null),G.fill?(P||(P=u._fill=aa("fill")),ue.appendChild(P),P.color=G.fillColor||G.color,P.opacity=G.fillOpacity):P&&(ue.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),G=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+G+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){ws(u._container)},_bringToBack:function(u){mo(u._container)}},za=ct.vml?aa:se,Cs=Ui.extend({_initContainer:function(){this._container=za("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=za("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Tn(this._container),Tr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),yr(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=za("path");u.options.className&&Sn(y,u.options.className),u.options.interactive&&Sn(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Tn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,de(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),G=Math.max(Math.round(u._radiusY),1)||P,ue="a"+P+","+G+" 0 1,0 ",Ce=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+ue+P*2+",0 "+ue+-P*2+",0 ";this._setPath(u,Ce)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){ws(u._path)},_bringToBack:function(u){mo(u._path)}});ct.vml&&Cs.include(Qu);function $i(u){return ct.svg||ct.vml?new Cs(u):null}ei.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Bo(u)||$i(u)}});var ao=Os.extend({initialize:function(u,y){Os.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=K(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Ro(u,y){return new ao(u,y)}Cs.create=za,Cs.pointsToPath=de,ro.geometryToLayer=io,ro.coordsToLatLng=Ja,ro.coordsToLatLngs=so,ro.latLngToCoords=$s,ro.latLngsToCoords=Ia,ro.getFeature=ta,ro.asFeature=oo,ei.mergeOptions({boxZoom:!0});var wr=Si.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Cr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Tr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vi(),vn(),this._startPoint=this._map.mouseEventToContainerPoint(u),Cr(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=dr("div","leaflet-zoom-box",this._container),Sn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new ke(this._point,this._startPoint),P=y.getSize();yr(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Tn(this._box),sn(this._container,"leaflet-crosshair")),Gi(),qr(),Tr(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new V(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ei.addInitHook("addHandler","boxZoom",wr),ei.mergeOptions({doubleClickZoom:!0});var el=Si.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),G=y.options.zoomDelta,ue=u.originalEvent.shiftKey?P-G:P+G;y.options.doubleClickZoom==="center"?y.setZoom(ue):y.setZoomAround(u.containerPoint,ue)}});ei.addInitHook("addHandler","doubleClickZoom",el),ei.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tl=Si.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new va(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Sn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){sn(this._map._container,"leaflet-grab"),sn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=K(this._map.options.maxBounds);this._offsetLimit=W(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,G=this._draggable._newPos.x,ue=(G-y+P)%u+y-P,Ce=(G+y+P)%u-y-P,lt=Math.abs(ue+P)<Math.abs(Ce+P)?ue:Ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=lt},_onDragEnd:function(u){var y=this._map,P=y.options,G=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),G)y.fire("moveend");else{this._prunePositions(+new Date);var ue=this._lastPos.subtract(this._positions[0]),Ce=(this._lastTime-this._times[0])/1e3,lt=P.easeLinearity,Ot=ue.multiplyBy(lt/Ce),Ht=Ot.distanceTo([0,0]),un=Math.min(P.inertiaMaxSpeed,Ht),Fn=Ot.multiplyBy(un/Ht),sr=un/(P.inertiaDeceleration*lt),$r=Fn.multiplyBy(-sr/2).round();!$r.x&&!$r.y?y.fire("moveend"):($r=y._limitOffset($r,y.options.maxBounds),B(function(){y.panBy($r,{duration:sr,easeLinearity:lt,noMoveStart:!0,animate:!0})}))}}});ei.addInitHook("addHandler","dragging",tl),ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _a=Si.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Cr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Tr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,G=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(G,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,G,ue;for(G=0,ue=P.left.length;G<ue;G++)y[P.left[G]]=[-1*u,0];for(G=0,ue=P.right.length;G<ue;G++)y[P.right[G]]=[u,0];for(G=0,ue=P.down.length;G<ue;G++)y[P.down[G]]=[0,u];for(G=0,ue=P.up.length;G<ue;G++)y[P.up[G]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,G,ue;for(G=0,ue=P.zoomIn.length;G<ue;G++)y[P.zoomIn[G]]=u;for(G=0,ue=P.zoomOut.length;G<ue;G++)y[P.zoomOut[G]]=-u},_addHooks:function(){Cr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Tr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,G;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(G=this._panKeys[y],u.shiftKey&&(G=ve(G).multiplyBy(3)),P.options.maxBounds&&(G=P._limitOffset(ve(G),P.options.maxBounds)),P.options.worldCopyJump){var ue=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(G)));P.panTo(ue)}else P.panBy(G)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Yn(u)}}});ei.addInitHook("addHandler","keyboard",_a),ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lo=Si.extend({addHooks:function(){Cr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Tr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Mu(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var G=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),G),Yn(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ue=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,Ce=P?Math.ceil(ue/P)*P:ue,lt=u._limitZoom(y+(this._delta>0?Ce:-Ce))-y;this._delta=0,this._startTime=null,lt&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+lt):u.setZoomAround(this._lastMousePos,y+lt))}});ei.addInitHook("addHandler","scrollWheelZoom",Lo);var ih=600;ei.mergeOptions({tapHold:ct.touchNative&&ct.safari&&ct.mobile,tapTolerance:15});var Us=Si.extend({addHooks:function(){Cr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Tr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new J(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Cr(document,"touchend",Pr),Cr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),ih),Cr(document,"touchend touchcancel contextmenu",this._cancel,this),Cr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Tr(document,"touchend",Pr),Tr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Tr(document,"touchend touchcancel contextmenu",this._cancel,this),Tr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new J(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});ei.addInitHook("addHandler","tapHold",Us),ei.mergeOptions({touchZoom:ct.touch,bounceAtZoomLimits:!0});var Hs=Si.extend({addHooks:function(){Sn(this._map._container,"leaflet-touch-zoom"),Cr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){sn(this._map._container,"leaflet-touch-zoom"),Tr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(G)._divideBy(2))),this._startDist=P.distanceTo(G),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Cr(document,"touchmove",this._onTouchMove,this),Cr(document,"touchend touchcancel",this._onTouchEnd,this),Pr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]),ue=P.distanceTo(G)/this._startDist;if(this._zoom=y.getScaleZoom(ue,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ue<1||this._zoom>y.getMaxZoom()&&ue>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ue===1)return}else{var Ce=P._add(G)._divideBy(2)._subtract(this._centerPoint);if(ue===1&&Ce.x===0&&Ce.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Ce),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var lt=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(lt,this,!0),Pr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Tr(document,"touchmove",this._onTouchMove,this),Tr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ei.addInitHook("addHandler","touchZoom",Hs),ei.BoxZoom=wr,ei.DoubleClickZoom=el,ei.Drag=tl,ei.Keyboard=_a,ei.ScrollWheelZoom=Lo,ei.TapHold=Us,ei.TouchZoom=Hs,n.Bounds=ke,n.Browser=ct,n.CRS=te,n.Canvas=na,n.Circle=no,n.CircleMarker=Io,n.Class=q,n.Control=gr,n.DivIcon=Fa,n.DivOverlay=xo,n.DomEvent=au,n.DomUtil=zn,n.Draggable=va,n.Evented=oe,n.FeatureGroup=bo,n.GeoJSON=ro,n.GridLayer=ti,n.Handler=Si,n.Icon=Oa,n.ImageOverlay=In,n.LatLng=pe,n.LatLngBounds=V,n.Layer=Ur,n.LayerGroup=to,n.LineUtil=Vr,n.Map=ei,n.Marker=Ss,n.Mixin=Mc,n.Path=ea,n.Point=J,n.PolyUtil=Fl,n.Polygon=Os,n.Polyline=wo,n.Popup=Ji,n.PosAnimation=ku,n.Projection=Ei,n.Rectangle=ao,n.Renderer=Ui,n.SVG=Cs,n.SVGOverlay=Pi,n.TileLayer=Vs,n.Tooltip=Qa,n.Transformation=De,n.Util=R,n.VideoOverlay=Mr,n.bind=o,n.bounds=W,n.canvas=Bo,n.circle=_o,n.circleMarker=zl,n.control=ps,n.divIcon=ja,n.extend=i,n.featureGroup=Tu,n.geoJSON=Yt,n.geoJson=Nt,n.gridLayer=ba,n.icon=Ju,n.imageOverlay=rr,n.latLng=he,n.latLngBounds=K,n.layerGroup=jl,n.map=fs,n.marker=Na,n.point=ve,n.polygon=Za,n.polyline=kc,n.popup=Ba,n.rectangle=Ro,n.setOptions=E,n.stamp=l,n.svg=$i,n.svgOverlay=du,n.tileLayer=Mi,n.tooltip=Ra,n.transformation=Je,n.version=r,n.videoOverlay=Xi;var wa=window.L;n.noConflict=function(){return window.L=wa,this},window.L=n})})(fb,fb.exports);var Vt=fb.exports;const Zn=B_(Vt);var J4={exports:{}};(function(t,e){(function(n,r){r(e)})(Ea,function(n){var r=typeof window<"u"?window:typeof Ea<"u"?Ea:typeof self<"u"?self:{};function i(c,d){return c(d={exports:{}},d.exports),d.exports}var s=i(function(c,d){(function(p){const v={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:g,mimeType:function(U){return U=g(U).toLowerCase(),function(){var $="application/font-woff",oe="image/jpeg";return{woff:$,woff2:$,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:oe,jpeg:oe,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,$){return`data:${$};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(oe){U.toBlob(oe)}):($=U,new Promise(function(oe){const J=fe($.toDataURL().split(",")[1]);var _e=J.length;const ve=new Uint8Array(_e);for(let ke=0;ke<_e;ke++)ve[ke]=J.charCodeAt(ke);oe(new Blob([ve],{type:"image/png"}))}));var $},resolveUrl:function(U,$){const oe=document.implementation.createHTMLDocument(),J=oe.createElement("base"),_e=(oe.head.appendChild(J),oe.createElement("a"));return oe.body.appendChild(_e),J.href=$,_e.href=U,_e.href},getAndEncode:function(U){let $=re.impl.urlCache.find(function(oe){return oe.url===U});return $||($={url:U,promise:null},re.impl.urlCache.push($)),$.promise===null&&(re.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),$.promise=new Promise(function(oe){const J=re.impl.options.httpTimeout,_e=new XMLHttpRequest;let ve;var ke;function W(V){console.error(V),oe("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)ve?oe(ve):W(`cannot fetch resource: ${U}, status: `+_e.status);else{const V=new FileReader;V.onloadend=function(){var K=V.result.split(/,/)[1];oe(K)},V.readAsDataURL(_e.response)}},_e.ontimeout=function(){ve?oe(ve):W(`timeout of ${J}ms occured while fetching resource: `+U)},_e.responseType="blob",_e.timeout=J,re.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",U,!0),_e.send(),re.impl.options.imagePlaceholder&&(ke=re.impl.options.imagePlaceholder.split(/,/))&&ke[1]&&(ve=ke[1])})),$.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function($){return new Promise(function(oe){setTimeout(function(){oe($)},U)})}},asArray:function(U){const $=[],oe=U.length;for(let J=0;J<oe;J++)$.push(U[J]);return $},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function($,oe){const J=new Image;re.impl.options.useCredentials&&(J.crossOrigin="use-credentials"),J.onload=function(){$(J)},J.onerror=oe,J.src=U}):Promise.resolve()},width:function(U){var $=x(U,"border-left-width"),oe=x(U,"border-right-width");return U.scrollWidth+$+oe},height:function(U){var $=x(U,"border-top-width"),oe=x(U,"border-bottom-width");return U.scrollHeight+$+oe}};function g(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function x(U,$){const oe=ge(U).getPropertyValue($);return parseFloat(oe.replace("px",""))}const E=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,ve,ke){return $(_e)?Promise.resolve(_e).then(oe).then(function(W){let V=Promise.resolve(_e);return W.forEach(function(K){V=V.then(function(pe){return J(pe,K,ve,ke)})}),V}):Promise.resolve(_e)},shouldProcess:$,impl:{readUrls:oe,inline:J}};function $(_e){return _e.search(U)!==-1}function oe(_e){const ve=[];for(var ke;(ke=U.exec(_e))!==null;)ve.push(ke[1]);return ve.filter(function(W){return!v.isDataUrl(W)})}function J(_e,ve,ke,W){return Promise.resolve(ve).then(function(V){return ke?v.resolveUrl(V,ke):V}).then(W||v.getAndEncode).then(function(V){return v.dataAsUrl(V,v.mimeType(ve))}).then(function(V){return _e.replace((K=ve,new RegExp(`(url\\(['"]?)(${v.escape(K)})(['"]?\\))`,"g")),`$1${V}$3`);var K})}}(),k={resolveAll:function(){return A().then(function(U){return Promise.all(U.map(function($){return $.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:A}};function A(){return Promise.resolve(v.asArray(document.styleSheets)).then(function($){const oe=[];return $.forEach(function(J){if(Object.getPrototypeOf(J).hasOwnProperty("cssRules"))try{v.asArray(J.cssRules||[]).forEach(oe.push.bind(oe))}catch(_e){console.log("Error while reading CSS rules from "+J.href,_e.toString())}}),oe}).then(function($){return $.filter(function(oe){return oe.type===CSSRule.FONT_FACE_RULE}).filter(function(oe){return E.shouldProcess(oe.style.getPropertyValue("src"))})}).then(function($){return $.map(U)});function U($){return{resolve:function(){var oe=($.parentStyleSheet||{}).href;return E.inlineAll($.cssText,oe)},src:function(){return $.style.getPropertyValue("src")}}}}const D={inlineAll:function U($){return $ instanceof Element?function(oe){const J=oe.style.getPropertyValue("background");return J?E.inlineAll(J).then(function(_e){oe.style.setProperty("background",_e,J)}).then(function(){return oe}):Promise.resolve(oe)}($).then(function(){return $ instanceof HTMLImageElement?z($).inline():Promise.all(v.asArray($.childNodes).map(function(oe){return U(oe)}))}):Promise.resolve($)},impl:{newImage:z}};function z(U){return{inline:function($){return v.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then($||v.getAndEncode).then(function(oe){return v.dataAsUrl(oe,v.mimeType(U.src))}).then(function(oe){return new Promise(function(J){U.onload=J,U.onerror=J,U.src=oe})})}}}const X={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},re={toSvg:N,toPng:function(U,$){return($=$||{}).raster=!0,F(U,$).then(function(oe){return oe.toDataURL()})},toJpeg:function(U,$){return($=$||{}).raster=!0,F(U,$).then(function(oe){return oe.toDataURL("image/jpeg",$.quality||1)})},toBlob:function(U,$){return($=$||{}).raster=!0,F(U,$).then(v.canvasToBlob)},toPixelData:function(U,$){return($=$||{}).raster=!0,F(U,$).then(function(oe){return oe.getContext("2d").getImageData(0,0,v.width(U),v.height(U)).data})},toCanvas:function(U,$){return($=$||{}).raster=!0,F(U,$||{})},impl:{fontFaces:k,images:D,util:v,inliner:E,urlCache:[],options:{}}},ge=(c.exports=re,p.getComputedStyle||window.getComputedStyle),fe=p.atob||window.atob;function N(U,$){var oe=$=$||{};return oe.imagePlaceholder===void 0?re.impl.options.imagePlaceholder=X.imagePlaceholder:re.impl.options.imagePlaceholder=oe.imagePlaceholder,oe.cacheBust===void 0?re.impl.options.cacheBust=X.cacheBust:re.impl.options.cacheBust=oe.cacheBust,oe.useCredentials===void 0?re.impl.options.useCredentials=X.useCredentials:re.impl.options.useCredentials=oe.useCredentials,Promise.resolve(U).then(function(J){return function _e(ve,ke,W,V,K=null){return W||!ke||ke(ve)?Promise.resolve(ve).then(function(pe){return pe instanceof HTMLCanvasElement?v.makeImage(pe.toDataURL()):pe.nodeName==="IFRAME"?html2canvas(pe.contentDocument.body).then(he=>he.toDataURL()).then(v.makeImage):pe.cloneNode(!1)}).then(function(pe){return function(he,te){const le=he.childNodes;return le.length===0?Promise.resolve(te):function(Q,Be){const De=ge(he);let Je=Promise.resolve();return Be.forEach(function(me){Je=Je.then(function(){return _e(me,ke,!1,V,De)}).then(function(ee){ee&&Q.appendChild(ee)})}),Je}(te,v.asArray(le)).then(function(){return te})}(ve,pe)}).then(function(pe){return function(he,te,le){return te instanceof Element?Promise.resolve().then(function(){(function(Q,Be){const De=ge(Q);De.cssText?(Be.style.cssText=De.cssText,function(Je,me){me.font=Je.font,me.fontFamily=Je.fontFamily,me.fontFeatureSettings=Je.fontFeatureSettings,me.fontKerning=Je.fontKerning,me.fontSize=Je.fontSize,me.fontStretch=Je.fontStretch,me.fontStyle=Je.fontStyle,me.fontVariant=Je.fontVariant,me.fontVariantCaps=Je.fontVariantCaps,me.fontVariantEastAsian=Je.fontVariantEastAsian,me.fontVariantLigatures=Je.fontVariantLigatures,me.fontVariantNumeric=Je.fontVariantNumeric,me.fontVariationSettings=Je.fontVariationSettings,me.fontWeight=Je.fontWeight}(De,Be.style)):(le?function(Je,me,ee,se){const de=ee.style,ze=Je.style;for(var $e of me){var et=me.getPropertyValue($e),Ge=ze.getPropertyValue($e),Qe=(ze.setProperty($e,se?"initial":"unset"),me.getPropertyValue($e));Qe!==et?de.setProperty($e,et):de.removeProperty($e),ze.setProperty($e,Ge)}}(Q,De,Be,W):function(Je,me,ee){const se=function(ze){if(q[ze])return q[ze];R||((R=document.createElement("iframe")).style.visibility="hidden",R.style.position="fixed",document.body.appendChild(R),R.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const $e=document.createElement(ze),et=(R.contentWindow.document.body.appendChild($e),$e.textContent=".",R.contentWindow.getComputedStyle($e)),Ge={};return v.asArray(et).forEach(function(Qe){Ge[Qe]=Qe==="width"||Qe==="height"?"auto":et.getPropertyValue(Qe)}),R.contentWindow.document.body.removeChild($e),q[ze]=Ge}(ee.tagName),de=ee.style;v.asArray(Je).forEach(function(ze){var $e=Je.getPropertyValue(ze);($e!==se[ze]||me&&$e!==me.getPropertyValue(ze))&&de.setProperty(ze,$e,Je.getPropertyPriority(ze))})}(De,K,Be),W&&(["inset-block","inset-block-start","inset-block-end"].forEach(Je=>Be.style.removeProperty(Je)),["left","right","top","bottom"].forEach(Je=>{Be.style.getPropertyValue(Je)&&Be.style.setProperty(Je,"0px")})))})(he,te)}).then(function(){[":before",":after"].forEach(function(Q){(function(Be){const De=ge(he,Be),Je=De.getPropertyValue("content");if(Je!==""&&Je!=="none"){const me=v.uid(),ee=te.getAttribute("class"),se=(ee&&te.setAttribute("class",ee+" "+me),document.createElement("style"));se.appendChild(function(){const de=`.${me}:`+Be,ze=(De.cssText?function(){return`${De.cssText} content: ${De.getPropertyValue("content")};`}:function(){return v.asArray(De).map(function($e){return $e+": "+De.getPropertyValue($e)+(De.getPropertyPriority($e)?" !important":"")}).join("; ")+";"})();return document.createTextNode(de+`{${ze}}`)}()),te.appendChild(se)}})(Q)})}).then(function(){he instanceof HTMLTextAreaElement&&(te.innerHTML=he.value),he instanceof HTMLInputElement&&te.setAttribute("value",he.value)}).then(function(){te instanceof SVGElement&&(te.setAttribute("xmlns","http://www.w3.org/2000/svg"),te instanceof SVGRectElement&&["width","height"].forEach(function(Q){const Be=te.getAttribute(Q);Be&&te.style.setProperty(Q,Be)}))}).then(function(){return te}):te}(ve,pe,V)}):Promise.resolve()}(J,$.filter,!0,!$.raster)}).then(Y).then(B).then(function(J){$.bgcolor&&(J.style.backgroundColor=$.bgcolor),$.width&&(J.style.width=$.width+"px"),$.height&&(J.style.height=$.height+"px"),$.style&&Object.keys($.style).forEach(function(ve){J.style[ve]=$.style[ve]});let _e=null;return typeof $.onclone=="function"&&(_e=$.onclone(J)),Promise.resolve(_e).then(function(){return J})}).then(function(J){return J=J,_e=$.width||v.width(U),ve=$.height||v.height(U),Promise.resolve(J).then(function(ke){return ke.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(ke)}).then(v.escapeXhtml).then(function(ke){return`<foreignObject x="0" y="0" width="100%" height="100%">${ke}</foreignObject>`}).then(function(ke){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${ve}">${ke}</svg>`}).then(function(ke){return"data:image/svg+xml;charset=utf-8,"+ke});var _e,ve}).then(function(J){return re.impl.urlCache=[],J})}function F(U,$){return N(U,$).then(v.makeImage).then(v.delay(0)).then(function(oe){var J=typeof $.scale!="number"?1:$.scale;const _e=function(ke,W){const V=document.createElement("canvas");if(V.width=($.width||v.width(ke))*W,V.height=($.height||v.height(ke))*W,$.bgcolor){const K=V.getContext("2d");K.fillStyle=$.bgcolor,K.fillRect(0,0,V.width,V.height)}return V}(U,J),ve=_e.getContext("2d");return ve.mozImageSmoothingEnabled=!1,ve.msImageSmoothingEnabled=!1,ve.imageSmoothingEnabled=!1,oe&&(ve.scale(J,J),ve.drawImage(oe,0,0)),R&&(document.body.removeChild(R),R=null,I&&clearTimeout(I),I=setTimeout(()=>{I=null,q={}},2e4)),_e})}function Y(U){return k.resolveAll().then(function($){const oe=document.createElement("style");return U.appendChild(oe),oe.appendChild(document.createTextNode($)),U})}function B(U){return D.inlineAll(U).then(function(){return U})}let I=null,R=null,q={}})(r)}),o=i(function(c,d){(function(){function p(k,A,D){var z=new XMLHttpRequest;z.open("GET",k),z.responseType="blob",z.onload=function(){E(z.response,A,D)},z.onerror=function(){console.error("could not download file")},z.send()}function v(k){var A=new XMLHttpRequest;A.open("HEAD",k,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function g(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(A)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(k,A,D){var z=x.URL||x.webkitURL,X=document.createElement("a");A=A||k.name||"download",X.download=A,X.rel="noopener",typeof k=="string"?(X.href=k,X.origin===location.origin?g(X):v(X.href)?p(k,A,D):g(X,X.target="_blank")):(X.href=z.createObjectURL(k),setTimeout(function(){z.revokeObjectURL(X.href)},4e4),setTimeout(function(){g(X)},0))}:"msSaveOrOpenBlob"in navigator?function(k,A,D){if(A=A||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(X,re){return re===void 0?re={autoBom:!1}:typeof re!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),re={autoBom:!re}),re.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(X.type)?new Blob(["\uFEFF",X],{type:X.type}):X}(k,D),A);else if(v(k))p(k,A,D);else{var z=document.createElement("a");z.href=k,z.target="_blank",setTimeout(function(){g(z)})}}:function(k,A,D,z){if((z=z||open("","_blank"))&&(z.document.title=z.document.body.innerText="downloading..."),typeof k=="string")return p(k,A,D);var X=k.type==="application/octet-stream",re=/constructor/i.test(x.HTMLElement)||x.safari,ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((ge||X&&re)&&typeof FileReader=="object"){var fe=new FileReader;fe.onloadend=function(){var Y=fe.result;Y=ge?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),z?z.location.href=Y:location=Y,z=null},fe.readAsDataURL(k)}else{var N=x.URL||x.webkitURL,F=N.createObjectURL(k);z?z.location=F:location.href=F,z=null,setTimeout(function(){N.revokeObjectURL(F)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var d=c.node,p=c.error;return console.warn("Map node is very big "+d.scrollWidth+"x"+d.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var g in this.options)p.hasOwnProperty(g)?v[g]=p[g]:v[g]=this.options[g];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return d==="image"?c._canvasToImage(x,v):d==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),g=!0,x=!1,E=void 0;try{for(var k,A=v[Symbol.iterator]();!(g=(k=A.next()).done);g=!0)k.value.style.opacity=d===!1?0:1}catch(D){x=!0,E=D}finally{try{!g&&A.return&&A.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,d){var p=d.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,d){var p=d.mimeType;return new Promise(function(v,g){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,d){var p=d.captionOffset,v=d.caption,g=d.captionFontSize,x=d.captionFont,E=d.captionColor,k=d.captionBgColor,A=this._node,D=A.screenHeight,z=A.screenWidth,X=document.createElement("canvas");X.width=z,X.height=D;for(var re=X.getContext("2d"),ge=re.createImageData(z,D),fe=0;fe<c.length;++fe)ge.data[fe]=c[fe];re.putImageData(ge,0,0),ge=null;var N=document.createElement("canvas"),F=N.getContext("2d"),Y=0,B=0,I=D,R=z;if(this.options.cropImageByInnerWH===!0){for(var q=[],U=0,$=0;$<D;++$){U=0;for(var oe=0;oe<z;++oe)c[4*$*z+4*oe+4]===0&&U++;U===z&&q.push($)}var J=this._getMinAndMaxOnValuesBreak(q);Y=J.min;for(var _e=z,ve=J.max,ke=[],W=0,V=B;V<_e;++V){W=0;for(var K=0;K<D;++K)c[4*K*z+4*V+4]===0&&W++;W===D&&ke.push(V)}var pe=this._getMinAndMaxOnValuesBreak(ke);B=pe.min,_e=pe.max,(B===0&&_e===0||_e===null)&&(_e=z),(Y===0&&ve===0||ve===null)&&(ve=D),this.options.debugMode===!0&&(console.log("emptyYLine",q),console.log("minMaxY",J),console.log("emptyXLine",ke),console.log("minMaxX",pe),console.log("debugX",{}),console.log("debugY",{})),Y===0&&ve===D&&B===0&&_e===z||(Y+=this.options.onCropBorderSize,ve-=this.options.onCropBorderSize,B+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),I=ve-Y,R=_e-B,N.width=R,N.height=I}else N.width=R,N.height=I;var he=null;return v&&(he=typeof v=="function"?v.call(this):v),he!==null&&(N.height=N.height+(p+g+p),F.beginPath(),F.rect(0,0,N.width,N.height),F.fillStyle=k,F.fill(),F.save()),F.drawImage(X,B,Y,R,I,0,0,R,I),he!==null&&(F.font=g+"px "+x,F.fillStyle=E,F.fillText(he,p,I+p+g)),Promise.resolve(N)},_getMinAndMaxOnValuesBreak:function(c){for(var d=0,p=0,v=!1,g=1;g<c.length;g++){if(c[g]-1!==c[g-1]){p=c[g],v=!0;break}d=c[g]}return v===!1&&c[0]>1?(d=0,p=c[0]):v===!1&&(d=c[c.length-1]||0,p=null),{min:d,max:p}},_getPixelData:function(c){var d=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(g){return console.warn("May be map size very big on that zoom level, we have error:",g.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),d._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._map.getContainer();return this._node={node:d,screenHeight:d.scrollHeight,screenWidth:d.scrollWidth},s.toPixelData(d,c)},_getPixelDataOfBigMap:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var g=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,d).then(function(x){return g(),x}).catch(function(x){return g(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:d}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),d.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(d){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(d,p+".png")}).catch(function(d){c._map.fire("simpleMapScreenshoter.error",{e:d})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(d){var p=setInterval(function(){c._interaction||(d(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(J4,J4.exports);var kl=63710088e-1,LE={centimeters:kl*100,centimetres:kl*100,degrees:360/(2*Math.PI),feet:kl*3.28084,inches:kl*39.37,kilometers:kl/1e3,kilometres:kl/1e3,meters:kl,metres:kl,miles:kl/1609.344,millimeters:kl*1e3,millimetres:kl*1e3,nauticalmiles:kl/1852,radians:1,yards:kl*1.0936};function Pp(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function zv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q4(t[0])||!Q4(t[1]))throw new Error("coordinates must contain numbers");return Pp({type:"Point",coordinates:t},e,n)}function Hu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Pp({type:"Polygon",coordinates:t},e,n)}function gc(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Pp({type:"LineString",coordinates:t},e,n)}function Nj(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Ij(t,e,n={}){return Pp({type:"MultiPolygon",coordinates:t},e,n)}function Bj(t,e="kilometers"){const n=LE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Rj(t,e="kilometers"){const n=LE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function pb(t){return t%(2*Math.PI)*180/Math.PI}function yc(t){return t%360*Math.PI/180}function Q4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function e5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Fj(t){return t.type==="Feature"?t.geometry:t}function SE(t,e,n={}){if(n.final===!0)return jj(t,e);const r=e5(t),i=e5(e),s=yc(r[0]),o=yc(i[0]),a=yc(r[1]),l=yc(i[1]),c=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return pb(Math.atan2(c,d))}function jj(t,e){let n=SE(e,t);return n=(n+180)%360,n}function zj(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function R_(t,e,n,r={}){const i=zj(t),s=yc(i[0]),o=yc(i[1]),a=yc(n),l=Rj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=pb(d),v=pb(c);return zv([p,v],r.properties)}var t5=R_;function n5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function F_(t,e,n={}){var r=n5(t),i=n5(e),s=yc(i[1]-r[1]),o=yc(i[0]-r[0]),a=yc(r[1]),l=yc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Bj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var K1=F_;function $j(t,e,n={}){const i=Fj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=SE(i[o],i[o-1])-180;return R_(i[o],a,l,n)}else return zv(i[o])}else s+=F_(i[o],i[o+1],n);return zv(i[i.length-1])}var r5=$j;function Vj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},d=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Uj(t,e,n){var r=n;return Vj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function CE(t){return Uj(t,(e,n)=>e+Hj(n),0)}function Hj(t){let e=0,n;switch(t.type){case"Polygon":return i5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=i5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function i5(t){let e=0;if(t&&t.length>0){e+=Math.abs(s5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(s5(t[n]))}return e}var Wj=kl*kl/2,Z1=Math.PI/180;function s5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*Z1,l=s[1]*Z1,c=o[0]*Z1;n+=(c-a)*Math.sin(l),r++}return n*Wj}var Bc=CE;function EE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var z=0,X=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var re=o.type;switch(d=re==="Polygon"||re==="MultiPolygon"?1:0,re){case null:break;case"Point":if(e(l,p,A,z,X)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,z,X)===!1)return!1;p++,re==="MultiPoint"&&z++}re==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,z,X)===!1)return!1;p++}re==="MultiLineString"&&z++,re==="Polygon"&&X++}re==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(X=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,z,X)===!1)return!1;p++}X++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(EE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Gj(t,e={}){let n=0,r=0,i=0;return EE(t,function(s){n+=s[0],r+=s[1],i++}),zv([n/i,r/i],e.properties)}var Ug=Gj;function qj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(R_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Hu([s],i)}var Yj=qj,Kj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,X1=Math.ceil,Vu=Math.floor,Zl="[BigNumber Error] ",o5=Zl+"Number primitive has more than 15 significant digits: ",lc=1e14,ii=14,a5=9007199254740991,J1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Kh=1e7,vu=1e9;function PE(t){var e,n,r,i=D.prototype={constructor:D,toString:null,valueOf:null},s=new D(1),o=20,a=4,l=-7,c=21,d=-1e7,p=1e7,v=!1,g=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function D(N,F){var Y,B,I,R,q,U,$,oe,J=this;if(!(J instanceof D))return new D(N,F);if(F==null){if(N&&N._isBigNumber===!0){J.s=N.s,!N.c||N.e>p?J.c=J.e=null:N.e<d?J.c=[J.e=0]:(J.e=N.e,J.c=N.c.slice());return}if((U=typeof N=="number")&&N*0==0){if(J.s=1/N<0?(N=-N,-1):1,N===~~N){for(R=0,q=N;q>=10;q/=10,R++);R>p?J.c=J.e=null:(J.e=R,J.c=[N]);return}oe=String(N)}else{if(!Kj.test(oe=String(N)))return r(J,oe,U);J.s=oe.charCodeAt(0)==45?(oe=oe.slice(1),-1):1}(R=oe.indexOf("."))>-1&&(oe=oe.replace(".","")),(q=oe.search(/e/i))>0?(R<0&&(R=q),R+=+oe.slice(q+1),oe=oe.substring(0,q)):R<0&&(R=oe.length)}else{if(ho(F,2,k.length,"Base"),F==10&&A)return J=new D(N),ge(J,o+J.e+1,a);if(oe=String(N),U=typeof N=="number"){if(N*0!=0)return r(J,oe,U,F);if(J.s=1/N<0?(oe=oe.slice(1),-1):1,D.DEBUG&&oe.replace(/^0\.0*|\./,"").length>15)throw Error(o5+N)}else J.s=oe.charCodeAt(0)===45?(oe=oe.slice(1),-1):1;for(Y=k.slice(0,F),R=q=0,$=oe.length;q<$;q++)if(Y.indexOf(B=oe.charAt(q))<0){if(B=="."){if(q>R){R=$;continue}}else if(!I&&(oe==oe.toUpperCase()&&(oe=oe.toLowerCase())||oe==oe.toLowerCase()&&(oe=oe.toUpperCase()))){I=!0,q=-1,R=0;continue}return r(J,String(N),U,F)}U=!1,oe=n(oe,F,10,J.s),(R=oe.indexOf("."))>-1?oe=oe.replace(".",""):R=oe.length}for(q=0;oe.charCodeAt(q)===48;q++);for($=oe.length;oe.charCodeAt(--$)===48;);if(oe=oe.slice(q,++$)){if($-=q,U&&D.DEBUG&&$>15&&(N>a5||N!==Vu(N)))throw Error(o5+J.s*N);if((R=R-q-1)>p)J.c=J.e=null;else if(R<d)J.c=[J.e=0];else{if(J.e=R,J.c=[],q=(R+1)%ii,R<0&&(q+=ii),q<$){for(q&&J.c.push(+oe.slice(0,q)),$-=ii;q<$;)J.c.push(+oe.slice(q,q+=ii));q=ii-(oe=oe.slice(q)).length}else q-=$;for(;q--;oe+="0");J.c.push(+oe)}}else J.c=[J.e=0]}D.clone=PE,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(N){var F,Y;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(F="DECIMAL_PLACES")&&(Y=N[F],ho(Y,0,vu,F),o=Y),N.hasOwnProperty(F="ROUNDING_MODE")&&(Y=N[F],ho(Y,0,8,F),a=Y),N.hasOwnProperty(F="EXPONENTIAL_AT")&&(Y=N[F],Y&&Y.pop?(ho(Y[0],-1e9,0,F),ho(Y[1],0,vu,F),l=Y[0],c=Y[1]):(ho(Y,-1e9,vu,F),l=-(c=Y<0?-Y:Y))),N.hasOwnProperty(F="RANGE"))if(Y=N[F],Y&&Y.pop)ho(Y[0],-1e9,-1,F),ho(Y[1],1,vu,F),d=Y[0],p=Y[1];else if(ho(Y,-1e9,vu,F),Y)d=-(p=Y<0?-Y:Y);else throw Error(Zl+F+" cannot be zero: "+Y);if(N.hasOwnProperty(F="CRYPTO"))if(Y=N[F],Y===!!Y)if(Y)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=Y;else throw v=!Y,Error(Zl+"crypto unavailable");else v=Y;else throw Error(Zl+F+" not true or false: "+Y);if(N.hasOwnProperty(F="MODULO_MODE")&&(Y=N[F],ho(Y,0,9,F),g=Y),N.hasOwnProperty(F="POW_PRECISION")&&(Y=N[F],ho(Y,0,vu,F),x=Y),N.hasOwnProperty(F="FORMAT"))if(Y=N[F],typeof Y=="object")E=Y;else throw Error(Zl+F+" not an object: "+Y);if(N.hasOwnProperty(F="ALPHABET"))if(Y=N[F],typeof Y=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Y))A=Y.slice(0,10)=="0123456789",k=Y;else throw Error(Zl+F+" invalid: "+Y)}else throw Error(Zl+"Object expected: "+N);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,p],CRYPTO:v,MODULO_MODE:g,POW_PRECISION:x,FORMAT:E,ALPHABET:k}},D.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var F,Y,B=N.c,I=N.e,R=N.s;e:if({}.toString.call(B)=="[object Array]"){if((R===1||R===-1)&&I>=-1e9&&I<=vu&&I===Vu(I)){if(B[0]===0){if(I===0&&B.length===1)return!0;break e}if(F=(I+1)%ii,F<1&&(F+=ii),String(B[0]).length==F){for(F=0;F<B.length;F++)if(Y=B[F],Y<0||Y>=lc||Y!==Vu(Y))break e;if(Y!==0)return!0}}}else if(B===null&&I===null&&(R===null||R===1||R===-1))return!0;throw Error(Zl+"Invalid BigNumber: "+N)},D.maximum=D.max=function(){return X(arguments,-1)},D.minimum=D.min=function(){return X(arguments,1)},D.random=function(){var N=9007199254740992,F=Math.random()*N&2097151?function(){return Vu(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Y){var B,I,R,q,U,$=0,oe=[],J=new D(s);if(Y==null?Y=o:ho(Y,0,vu),q=X1(Y/ii),v)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array(q*=2));$<q;)U=B[$]*131072+(B[$+1]>>>11),U>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),B[$]=I[0],B[$+1]=I[1]):(oe.push(U%1e14),$+=2);$=q/2}else if(crypto.randomBytes){for(B=crypto.randomBytes(q*=7);$<q;)U=(B[$]&31)*281474976710656+B[$+1]*1099511627776+B[$+2]*4294967296+B[$+3]*16777216+(B[$+4]<<16)+(B[$+5]<<8)+B[$+6],U>=9e15?crypto.randomBytes(7).copy(B,$):(oe.push(U%1e14),$+=7);$=q/7}else throw v=!1,Error(Zl+"crypto unavailable");if(!v)for(;$<q;)U=F(),U<9e15&&(oe[$++]=U%1e14);for(q=oe[--$],Y%=ii,q&&Y&&(U=J1[ii-Y],oe[$]=Vu(q/U)*U);oe[$]===0;oe.pop(),$--);if($<0)oe=[R=0];else{for(R=-1;oe[0]===0;oe.splice(0,1),R-=ii);for($=1,U=oe[0];U>=10;U/=10,$++);$<ii&&(R-=ii-$)}return J.e=R,J.c=oe,J}}(),D.sum=function(){for(var N=1,F=arguments,Y=new D(F[0]);N<F.length;)Y=Y.plus(F[N++]);return Y},n=function(){var N="0123456789";function F(Y,B,I,R){for(var q,U=[0],$,oe=0,J=Y.length;oe<J;){for($=U.length;$--;U[$]*=B);for(U[0]+=R.indexOf(Y.charAt(oe++)),q=0;q<U.length;q++)U[q]>I-1&&(U[q+1]==null&&(U[q+1]=0),U[q+1]+=U[q]/I|0,U[q]%=I)}return U.reverse()}return function(Y,B,I,R,q){var U,$,oe,J,_e,ve,ke,W,V=Y.indexOf("."),K=o,pe=a;for(V>=0&&(J=x,x=0,Y=Y.replace(".",""),W=new D(B),ve=W.pow(Y.length-V),x=J,W.c=F(yh(ju(ve.c),ve.e,"0"),10,I,N),W.e=W.c.length),ke=F(Y,B,I,q?(U=k,N):(U=N,k)),oe=J=ke.length;ke[--J]==0;ke.pop());if(!ke[0])return U.charAt(0);if(V<0?--oe:(ve.c=ke,ve.e=oe,ve.s=R,ve=e(ve,W,K,pe,I),ke=ve.c,_e=ve.r,oe=ve.e),$=oe+K+1,V=ke[$],J=I/2,_e=_e||$<0||ke[$+1]!=null,_e=pe<4?(V!=null||_e)&&(pe==0||pe==(ve.s<0?3:2)):V>J||V==J&&(pe==4||_e||pe==6&&ke[$-1]&1||pe==(ve.s<0?8:7)),$<1||!ke[0])Y=_e?yh(U.charAt(1),-K,U.charAt(0)):U.charAt(0);else{if(ke.length=$,_e)for(--I;++ke[--$]>I;)ke[$]=0,$||(++oe,ke=[1].concat(ke));for(J=ke.length;!ke[--J];);for(V=0,Y="";V<=J;Y+=U.charAt(ke[V++]));Y=yh(Y,oe,U.charAt(0))}return Y}}(),e=function(){function N(B,I,R){var q,U,$,oe,J=0,_e=B.length,ve=I%Kh,ke=I/Kh|0;for(B=B.slice();_e--;)$=B[_e]%Kh,oe=B[_e]/Kh|0,q=ke*$+oe*ve,U=ve*$+q%Kh*Kh+J,J=(U/R|0)+(q/Kh|0)+ke*oe,B[_e]=U%R;return J&&(B=[J].concat(B)),B}function F(B,I,R,q){var U,$;if(R!=q)$=R>q?1:-1;else for(U=$=0;U<R;U++)if(B[U]!=I[U]){$=B[U]>I[U]?1:-1;break}return $}function Y(B,I,R,q){for(var U=0;R--;)B[R]-=U,U=B[R]<I[R]?1:0,B[R]=U*q+B[R]-I[R];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,I,R,q,U){var $,oe,J,_e,ve,ke,W,V,K,pe,he,te,le,Q,Be,De,Je,me=B.s==I.s?1:-1,ee=B.c,se=I.c;if(!ee||!ee[0]||!se||!se[0])return new D(!B.s||!I.s||(ee?se&&ee[0]==se[0]:!se)?NaN:ee&&ee[0]==0||!se?me*0:me/0);for(V=new D(me),K=V.c=[],oe=B.e-I.e,me=R+oe+1,U||(U=lc,oe=Uu(B.e/ii)-Uu(I.e/ii),me=me/ii|0),J=0;se[J]==(ee[J]||0);J++);if(se[J]>(ee[J]||0)&&oe--,me<0)K.push(1),_e=!0;else{for(Q=ee.length,De=se.length,J=0,me+=2,ve=Vu(U/(se[0]+1)),ve>1&&(se=N(se,ve,U),ee=N(ee,ve,U),De=se.length,Q=ee.length),le=De,pe=ee.slice(0,De),he=pe.length;he<De;pe[he++]=0);Je=se.slice(),Je=[0].concat(Je),Be=se[0],se[1]>=U/2&&Be++;do{if(ve=0,$=F(se,pe,De,he),$<0){if(te=pe[0],De!=he&&(te=te*U+(pe[1]||0)),ve=Vu(te/Be),ve>1)for(ve>=U&&(ve=U-1),ke=N(se,ve,U),W=ke.length,he=pe.length;F(ke,pe,W,he)==1;)ve--,Y(ke,De<W?Je:se,W,U),W=ke.length,$=1;else ve==0&&($=ve=1),ke=se.slice(),W=ke.length;if(W<he&&(ke=[0].concat(ke)),Y(pe,ke,he,U),he=pe.length,$==-1)for(;F(se,pe,De,he)<1;)ve++,Y(pe,De<he?Je:se,he,U),he=pe.length}else $===0&&(ve++,pe=[0]);K[J++]=ve,pe[0]?pe[he++]=ee[le]||0:(pe=[ee[le]],he=1)}while((le++<Q||pe[0]!=null)&&me--);_e=pe[0]!=null,K[0]||K.splice(0,1)}if(U==lc){for(J=1,me=K[0];me>=10;me/=10,J++);ge(V,R+(V.e=J+oe*ii-1)+1,q,_e)}else V.e=oe,V.r=+_e;return V}}();function z(N,F,Y,B){var I,R,q,U,$;if(Y==null?Y=a:ho(Y,0,8),!N.c)return N.toString();if(I=N.c[0],q=N.e,F==null)$=ju(N.c),$=B==1||B==2&&(q<=l||q>=c)?_0($,q):yh($,q,"0");else if(N=ge(new D(N),F,Y),R=N.e,$=ju(N.c),U=$.length,B==1||B==2&&(F<=R||R<=l)){for(;U<F;$+="0",U++);$=_0($,R)}else if(F-=q,$=yh($,R,"0"),R+1>U){if(--F>0)for($+=".";F--;$+="0");}else if(F+=R-U,F>0)for(R+1==U&&($+=".");F--;$+="0");return N.s<0&&I?"-"+$:$}function X(N,F){for(var Y,B,I=1,R=new D(N[0]);I<N.length;I++)B=new D(N[I]),(!B.s||(Y=Vd(R,B))===F||Y===0&&R.s===F)&&(R=B);return R}function re(N,F,Y){for(var B=1,I=F.length;!F[--I];F.pop());for(I=F[0];I>=10;I/=10,B++);return(Y=B+Y*ii-1)>p?N.c=N.e=null:Y<d?N.c=[N.e=0]:(N.e=Y,N.c=F),N}r=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,F=/^([^.]+)\.$/,Y=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,q,U,$){var oe,J=U?q:q.replace(I,"");if(B.test(J))R.s=isNaN(J)?null:J<0?-1:1;else{if(!U&&(J=J.replace(N,function(_e,ve,ke){return oe=(ke=ke.toLowerCase())=="x"?16:ke=="b"?2:8,!$||$==oe?ve:_e}),$&&(oe=$,J=J.replace(F,"$1").replace(Y,"0.$1")),q!=J))return new D(J,oe);if(D.DEBUG)throw Error(Zl+"Not a"+($?" base "+$:"")+" number: "+q);R.s=null}R.c=R.e=null}}();function ge(N,F,Y,B){var I,R,q,U,$,oe,J,_e=N.c,ve=J1;if(_e){e:{for(I=1,U=_e[0];U>=10;U/=10,I++);if(R=F-I,R<0)R+=ii,q=F,$=_e[oe=0],J=Vu($/ve[I-q-1]%10);else if(oe=X1((R+1)/ii),oe>=_e.length)if(B){for(;_e.length<=oe;_e.push(0));$=J=0,I=1,R%=ii,q=R-ii+1}else break e;else{for($=U=_e[oe],I=1;U>=10;U/=10,I++);R%=ii,q=R-ii+I,J=q<0?0:Vu($/ve[I-q-1]%10)}if(B=B||F<0||_e[oe+1]!=null||(q<0?$:$%ve[I-q-1]),B=Y<4?(J||B)&&(Y==0||Y==(N.s<0?3:2)):J>5||J==5&&(Y==4||B||Y==6&&(R>0?q>0?$/ve[I-q]:0:_e[oe-1])%10&1||Y==(N.s<0?8:7)),F<1||!_e[0])return _e.length=0,B?(F-=N.e+1,_e[0]=ve[(ii-F%ii)%ii],N.e=-F||0):_e[0]=N.e=0,N;if(R==0?(_e.length=oe,U=1,oe--):(_e.length=oe+1,U=ve[ii-R],_e[oe]=q>0?Vu($/ve[I-q]%ve[q])*U:0),B)for(;;)if(oe==0){for(R=1,q=_e[0];q>=10;q/=10,R++);for(q=_e[0]+=U,U=1;q>=10;q/=10,U++);R!=U&&(N.e++,_e[0]==lc&&(_e[0]=1));break}else{if(_e[oe]+=U,_e[oe]!=lc)break;_e[oe--]=0,U=1}for(R=_e.length;_e[--R]===0;_e.pop());}N.e>p?N.c=N.e=null:N.e<d&&(N.c=[N.e=0])}return N}function fe(N){var F,Y=N.e;return Y===null?N.toString():(F=ju(N.c),F=Y<=l||Y>=c?_0(F,Y):yh(F,Y,"0"),N.s<0?"-"+F:F)}return i.absoluteValue=i.abs=function(){var N=new D(this);return N.s<0&&(N.s=1),N},i.comparedTo=function(N,F){return Vd(this,new D(N,F))},i.decimalPlaces=i.dp=function(N,F){var Y,B,I,R=this;if(N!=null)return ho(N,0,vu),F==null?F=a:ho(F,0,8),ge(new D(R),N+R.e+1,F);if(!(Y=R.c))return null;if(B=((I=Y.length-1)-Uu(this.e/ii))*ii,I=Y[I])for(;I%10==0;I/=10,B--);return B<0&&(B=0),B},i.dividedBy=i.div=function(N,F){return e(this,new D(N,F),o,a)},i.dividedToIntegerBy=i.idiv=function(N,F){return e(this,new D(N,F),0,1)},i.exponentiatedBy=i.pow=function(N,F){var Y,B,I,R,q,U,$,oe,J,_e=this;if(N=new D(N),N.c&&!N.isInteger())throw Error(Zl+"Exponent not an integer: "+fe(N));if(F!=null&&(F=new D(F)),U=N.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!N.c||!N.c[0])return J=new D(Math.pow(+fe(_e),U?N.s*(2-b0(N)):+fe(N))),F?J.mod(F):J;if($=N.s<0,F){if(F.c?!F.c[0]:!F.s)return new D(NaN);B=!$&&_e.isInteger()&&F.isInteger(),B&&(_e=_e.mod(F))}else{if(N.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||U&&_e.c[1]>=24e7:_e.c[0]<8e13||U&&_e.c[0]<=9999975e7)))return R=_e.s<0&&b0(N)?-0:0,_e.e>-1&&(R=1/R),new D($?1/R:R);x&&(R=X1(x/ii+2))}for(U?(Y=new D(.5),$&&(N.s=1),oe=b0(N)):(I=Math.abs(+fe(N)),oe=I%2),J=new D(s);;){if(oe){if(J=J.times(_e),!J.c)break;R?J.c.length>R&&(J.c.length=R):B&&(J=J.mod(F))}if(I){if(I=Vu(I/2),I===0)break;oe=I%2}else if(N=N.times(Y),ge(N,N.e+1,1),N.e>14)oe=b0(N);else{if(I=+fe(N),I===0)break;oe=I%2}_e=_e.times(_e),R?_e.c&&_e.c.length>R&&(_e.c.length=R):B&&(_e=_e.mod(F))}return B?J:($&&(J=s.div(J)),F?J.mod(F):R?ge(J,x,a,q):J)},i.integerValue=function(N){var F=new D(this);return N==null?N=a:ho(N,0,8),ge(F,F.e+1,N)},i.isEqualTo=i.eq=function(N,F){return Vd(this,new D(N,F))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(N,F){return Vd(this,new D(N,F))>0},i.isGreaterThanOrEqualTo=i.gte=function(N,F){return(F=Vd(this,new D(N,F)))===1||F===0},i.isInteger=function(){return!!this.c&&Uu(this.e/ii)>this.c.length-2},i.isLessThan=i.lt=function(N,F){return Vd(this,new D(N,F))<0},i.isLessThanOrEqualTo=i.lte=function(N,F){return(F=Vd(this,new D(N,F)))===-1||F===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(N,F){var Y,B,I,R,q=this,U=q.s;if(N=new D(N,F),F=N.s,!U||!F)return new D(NaN);if(U!=F)return N.s=-F,q.plus(N);var $=q.e/ii,oe=N.e/ii,J=q.c,_e=N.c;if(!$||!oe){if(!J||!_e)return J?(N.s=-F,N):new D(_e?q:NaN);if(!J[0]||!_e[0])return _e[0]?(N.s=-F,N):new D(J[0]?q:a==3?-0:0)}if($=Uu($),oe=Uu(oe),J=J.slice(),U=$-oe){for((R=U<0)?(U=-U,I=J):(oe=$,I=_e),I.reverse(),F=U;F--;I.push(0));I.reverse()}else for(B=(R=(U=J.length)<(F=_e.length))?U:F,U=F=0;F<B;F++)if(J[F]!=_e[F]){R=J[F]<_e[F];break}if(R&&(I=J,J=_e,_e=I,N.s=-N.s),F=(B=_e.length)-(Y=J.length),F>0)for(;F--;J[Y++]=0);for(F=lc-1;B>U;){if(J[--B]<_e[B]){for(Y=B;Y&&!J[--Y];J[Y]=F);--J[Y],J[B]+=lc}J[B]-=_e[B]}for(;J[0]==0;J.splice(0,1),--oe);return J[0]?re(N,J,oe):(N.s=a==3?-1:1,N.c=[N.e=0],N)},i.modulo=i.mod=function(N,F){var Y,B,I=this;return N=new D(N,F),!I.c||!N.s||N.c&&!N.c[0]?new D(NaN):!N.c||I.c&&!I.c[0]?new D(I):(g==9?(B=N.s,N.s=1,Y=e(I,N,0,3),N.s=B,Y.s*=B):Y=e(I,N,0,g),N=I.minus(Y.times(N)),!N.c[0]&&g==1&&(N.s=I.s),N)},i.multipliedBy=i.times=function(N,F){var Y,B,I,R,q,U,$,oe,J,_e,ve,ke,W,V,K,pe=this,he=pe.c,te=(N=new D(N,F)).c;if(!he||!te||!he[0]||!te[0])return!pe.s||!N.s||he&&!he[0]&&!te||te&&!te[0]&&!he?N.c=N.e=N.s=null:(N.s*=pe.s,!he||!te?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(B=Uu(pe.e/ii)+Uu(N.e/ii),N.s*=pe.s,$=he.length,_e=te.length,$<_e&&(W=he,he=te,te=W,I=$,$=_e,_e=I),I=$+_e,W=[];I--;W.push(0));for(V=lc,K=Kh,I=_e;--I>=0;){for(Y=0,ve=te[I]%K,ke=te[I]/K|0,q=$,R=I+q;R>I;)oe=he[--q]%K,J=he[q]/K|0,U=ke*oe+J*ve,oe=ve*oe+U%K*K+W[R]+Y,Y=(oe/V|0)+(U/K|0)+ke*J,W[R--]=oe%V;W[R]=Y}return Y?++B:W.splice(0,1),re(N,W,B)},i.negated=function(){var N=new D(this);return N.s=-N.s||null,N},i.plus=function(N,F){var Y,B=this,I=B.s;if(N=new D(N,F),F=N.s,!I||!F)return new D(NaN);if(I!=F)return N.s=-F,B.minus(N);var R=B.e/ii,q=N.e/ii,U=B.c,$=N.c;if(!R||!q){if(!U||!$)return new D(I/0);if(!U[0]||!$[0])return $[0]?N:new D(U[0]?B:I*0)}if(R=Uu(R),q=Uu(q),U=U.slice(),I=R-q){for(I>0?(q=R,Y=$):(I=-I,Y=U),Y.reverse();I--;Y.push(0));Y.reverse()}for(I=U.length,F=$.length,I-F<0&&(Y=$,$=U,U=Y,F=I),I=0;F;)I=(U[--F]=U[F]+$[F]+I)/lc|0,U[F]=lc===U[F]?0:U[F]%lc;return I&&(U=[I].concat(U),++q),re(N,U,q)},i.precision=i.sd=function(N,F){var Y,B,I,R=this;if(N!=null&&N!==!!N)return ho(N,1,vu),F==null?F=a:ho(F,0,8),ge(new D(R),N,F);if(!(Y=R.c))return null;if(I=Y.length-1,B=I*ii+1,I=Y[I]){for(;I%10==0;I/=10,B--);for(I=Y[0];I>=10;I/=10,B++);}return N&&R.e+1>B&&(B=R.e+1),B},i.shiftedBy=function(N){return ho(N,-9007199254740991,a5),this.times("1e"+N)},i.squareRoot=i.sqrt=function(){var N,F,Y,B,I,R=this,q=R.c,U=R.s,$=R.e,oe=o+4,J=new D("0.5");if(U!==1||!q||!q[0])return new D(!U||U<0&&(!q||q[0])?NaN:q?R:1/0);if(U=Math.sqrt(+fe(R)),U==0||U==1/0?(F=ju(q),(F.length+$)%2==0&&(F+="0"),U=Math.sqrt(+F),$=Uu(($+1)/2)-($<0||$%2),U==1/0?F="5e"+$:(F=U.toExponential(),F=F.slice(0,F.indexOf("e")+1)+$),Y=new D(F)):Y=new D(U+""),Y.c[0]){for($=Y.e,U=$+oe,U<3&&(U=0);;)if(I=Y,Y=J.times(I.plus(e(R,I,oe,1))),ju(I.c).slice(0,U)===(F=ju(Y.c)).slice(0,U))if(Y.e<$&&--U,F=F.slice(U-3,U+1),F=="9999"||!B&&F=="4999"){if(!B&&(ge(I,I.e+o+2,0),I.times(I).eq(R))){Y=I;break}oe+=4,U+=4,B=1}else{(!+F||!+F.slice(1)&&F.charAt(0)=="5")&&(ge(Y,Y.e+o+2,1),N=!Y.times(Y).eq(R));break}}return ge(Y,Y.e+o+1,a,N)},i.toExponential=function(N,F){return N!=null&&(ho(N,0,vu),N++),z(this,N,F,1)},i.toFixed=function(N,F){return N!=null&&(ho(N,0,vu),N=N+this.e+1),z(this,N,F)},i.toFormat=function(N,F,Y){var B,I=this;if(Y==null)N!=null&&F&&typeof F=="object"?(Y=F,F=null):N&&typeof N=="object"?(Y=N,N=F=null):Y=E;else if(typeof Y!="object")throw Error(Zl+"Argument not an object: "+Y);if(B=I.toFixed(N,F),I.c){var R,q=B.split("."),U=+Y.groupSize,$=+Y.secondaryGroupSize,oe=Y.groupSeparator||"",J=q[0],_e=q[1],ve=I.s<0,ke=ve?J.slice(1):J,W=ke.length;if($&&(R=U,U=$,$=R,W-=R),U>0&&W>0){for(R=W%U||U,J=ke.substr(0,R);R<W;R+=U)J+=oe+ke.substr(R,U);$>0&&(J+=oe+ke.slice(R)),ve&&(J="-"+J)}B=_e?J+(Y.decimalSeparator||"")+(($=+Y.fractionGroupSize)?_e.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(Y.fractionGroupSeparator||"")):_e):J}return(Y.prefix||"")+B+(Y.suffix||"")},i.toFraction=function(N){var F,Y,B,I,R,q,U,$,oe,J,_e,ve,ke=this,W=ke.c;if(N!=null&&(U=new D(N),!U.isInteger()&&(U.c||U.s!==1)||U.lt(s)))throw Error(Zl+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+fe(U));if(!W)return new D(ke);for(F=new D(s),oe=Y=new D(s),B=$=new D(s),ve=ju(W),R=F.e=ve.length-ke.e-1,F.c[0]=J1[(q=R%ii)<0?ii+q:q],N=!N||U.comparedTo(F)>0?R>0?F:oe:U,q=p,p=1/0,U=new D(ve),$.c[0]=0;J=e(U,F,0,1),I=Y.plus(J.times(B)),I.comparedTo(N)!=1;)Y=B,B=I,oe=$.plus(J.times(I=oe)),$=I,F=U.minus(J.times(I=F)),U=I;return I=e(N.minus(Y),B,0,1),$=$.plus(I.times(oe)),Y=Y.plus(I.times(B)),$.s=oe.s=ke.s,R=R*2,_e=e(oe,B,R,a).minus(ke).abs().comparedTo(e($,Y,R,a).minus(ke).abs())<1?[oe,B]:[$,Y],p=q,_e},i.toNumber=function(){return+fe(this)},i.toPrecision=function(N,F){return N!=null&&ho(N,1,vu),z(this,N,F,2)},i.toString=function(N){var F,Y=this,B=Y.s,I=Y.e;return I===null?B?(F="Infinity",B<0&&(F="-"+F)):F="NaN":(N==null?F=I<=l||I>=c?_0(ju(Y.c),I):yh(ju(Y.c),I,"0"):N===10&&A?(Y=ge(new D(Y),o+I+1,a),F=yh(ju(Y.c),Y.e,"0")):(ho(N,2,k.length,"Base"),F=n(yh(ju(Y.c),I,"0"),10,N,B,!0)),B<0&&Y.c[0]&&(F="-"+F)),F},i.valueOf=i.toJSON=function(){return fe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&D.set(t),D}function Uu(t){var e=t|0;return t>0||t===e?e:e-1}function ju(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=ii-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Vd(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function ho(t,e,n,r){if(t<e||t>n||t!==Vu(t))throw Error(Zl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function b0(t){var e=t.c.length-1;return Uu(t.e/ii)==e&&t.c[e]%2!=0}function _0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function yh(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var qc=PE(),Zj=class{constructor(t){Ye(this,"key");Ye(this,"left",null);Ye(this,"right",null);this.key=t}},eg=class extends Zj{constructor(t){super(t)}},Xj=class{constructor(){Ye(this,"size",0);Ye(this,"modificationCount",0);Ye(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},LL,SL,$v=class yg extends Xj{constructor(n,r){super();Ye(this,"root",null);Ye(this,"compare");Ye(this,"validKey");Ye(this,LL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new eg(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new eg(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new yg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new yg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new yg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new yg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new eg(a.key);o.left=c,r(a,c)}if(l!=null){const c=new eg(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new eg(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new Qj(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(SL=Symbol.iterator,LL=Symbol.toStringTag,SL)](){return new Jj(this.wrap())}},ME=class{constructor(t){Ye(this,"tree");Ye(this,"path",new Array);Ye(this,"modificationCount",null);Ye(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},Jj=class extends ME{getValue(t){return t.key}},Qj=class extends ME{getValue(t){return[t.key,t.key]}},kE=t=>()=>t,gb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):kE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function ez(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):kE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var tz=t=>t,nz=t=>{if(t){const e=new $v(gb(t)),n=new $v(gb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new qc(0),y:new qc(0)}),i}return tz},mb=t=>({set:e=>{Bh=mb(e)},reset:()=>mb(t),compare:gb(t),snap:nz(t),orient:ez(t)}),Bh=mb(),tg=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),vb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},tv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),AE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Vv=t=>AE(t,t).sqrt(),rz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return tv(i,r).div(Vv(i)).div(Vv(r))},iz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return AE(i,r).div(Vv(i)).div(Vv(r))},l5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},u5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},sz=(t,e,n,r)=>{if(e.x.isZero())return u5(n,r,t.x);if(r.x.isZero())return u5(t,e,n.x);if(e.y.isZero())return l5(n,r,t.y);if(r.y.isZero())return l5(t,e,n.y);const i=tv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=tv(s,e).div(i),a=tv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),d=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),g=d.plus(p).div(2);return{x:v,y:g}},Uc=class TE{constructor(e,n){Ye(this,"point");Ye(this,"isLeft");Ye(this,"segment");Ye(this,"otherSE");Ye(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=TE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Uv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:rz(this.point,e.point,s.point),cosine:iz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},oz=class yb{constructor(e){Ye(this,"events");Ye(this,"poly");Ye(this,"_isExteriorRing");Ye(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],d=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==d;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,k=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let g=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){g=E;break}if(g!==null){const E=p.splice(g)[0],k=c.splice(E.index);k.unshift(k[0].otherSE),n.push(new yb(k.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new yb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,d=this.events.length-1;c<d;c++){const p=this.events[c].point,v=this.events[c+1].point;Bh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Bh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Uc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},c5=class{constructor(t){Ye(this,"exteriorRing");Ye(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},az=class{constructor(t){Ye(this,"rings");Ye(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new c5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new c5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},lz=class{constructor(t,e=Uv.compare){Ye(this,"queue");Ye(this,"tree");Ye(this,"segments");this.queue=t,this.tree=new $v(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Uc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},uz=class{constructor(){Ye(this,"type");Ye(this,"numMultiPolys")}run(t,e,n){bg.type=t;const r=[new d5(e,!0)];for(let c=0,d=n.length;c<d;c++)r.push(new d5(n[c],!1));if(bg.numMultiPolys=r.length,bg.type==="difference"){const c=r[0];let d=1;for(;d<r.length;)vb(r[d].bbox,c.bbox)!==null?d++:r.splice(d,1)}if(bg.type==="intersection")for(let c=0,d=r.length;c<d;c++){const p=r[c];for(let v=c+1,g=r.length;v<g;v++)if(vb(p.bbox,r[v].bbox)===null)return[]}const i=new $v(Uc.compare);for(let c=0,d=r.length;c<d;c++){const p=r[c].getSweepEvents();for(let v=0,g=p.length;v<g;v++)i.add(p[v])}const s=new lz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let d=0,p=c.length;d<p;d++){const v=c[d];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Bh.reset();const a=oz.factory(s.segments);return new az(a).getGeom()}},bg=new uz,bb=bg,cz=0,Uv=class nv{constructor(e,n,r,i){Ye(this,"id");Ye(this,"leftSE");Ye(this,"rightSE");Ye(this,"rings");Ye(this,"windings");Ye(this,"ringOut");Ye(this,"consumedBy");Ye(this,"prev");Ye(this,"_prevInResult");Ye(this,"_beforeState");Ye(this,"_afterState");Ye(this,"_isInResult");this.id=++cz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,d=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(d))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(d))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),g=d.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&g.isLessThan(x))return 1;if(p.isLessThan(v)&&g.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(d)?-1:c.isGreaterThan(d)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Uc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Uc(i,!0),c=new Uc(s,!1);return new nv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Bh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=vb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=tg(n,a)&&this.comparePoint(a)===0,d=tg(r,s)&&e.comparePoint(s)===0,p=tg(n,l)&&this.comparePoint(l)===0,v=tg(r,o)&&e.comparePoint(o)===0;if(d&&c)return v&&!p?o:!v&&p?l:null;if(d)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const g=sz(s,this.vector(),a,e.vector());return g===null||!tg(i,g)?null:Bh.snap(g)}split(e){const n=[],r=e.events!==void 0,i=new Uc(e,!0),s=new Uc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new nv(i,o,this.rings.slice(),this.windings.slice());return Uc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Uc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=nv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],d=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(d)):r[p]+=d}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],d=c.poly;if(o.indexOf(d)===-1)if(c.isExterior)s.push(d);else{o.indexOf(d)===-1&&o.push(d);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(bb.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===bb.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},h5=class{constructor(t,e,n){Ye(this,"poly");Ye(this,"isExterior");Ye(this,"segments");Ye(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Bh.snap({x:new qc(t[0][0]),y:new qc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Bh.snap({x:new qc(t[s][0]),y:new qc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Uv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Uv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},hz=class{constructor(t,e){Ye(this,"multiPoly");Ye(this,"exteriorRing");Ye(this,"interiorRings");Ye(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new h5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new h5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},d5=class{constructor(t,e){Ye(this,"isSubject");Ye(this,"polys");Ye(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new qc(Number.POSITIVE_INFINITY),y:new qc(Number.POSITIVE_INFINITY)},ur:{x:new qc(Number.NEGATIVE_INFINITY),y:new qc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new hz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},dz=(t,...e)=>bb.run("intersection",t,e);Bh.set;function fz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},d=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function pz(t,e={}){const n=[];if(fz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=dz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Hu(r[0],e.properties):Ij(r,e.properties)}var gz=pz;function DE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var z=0,X=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var re=o.type;switch(d=0,re){case null:break;case"Point":if(e(l,p,A,z,X)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,z,X)===!1)return!1;p++,re==="MultiPoint"&&z++}re==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,z,X)===!1)return!1;p++}re==="MultiLineString"&&z++,re==="Polygon"&&X++}re==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(X=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,z,X)===!1)return!1;p++}X++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(DE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},d=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function vz(t,e){mz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Pp(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var d=n.coordinates[c],p={type:l,coordinates:d};if(e(Pp(p,i),r,c)===!1)return!1}})}function yz(t,e){vz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,d=0;if(DE(n,function(p,v,g,x,E){if(a===void 0||r>l||x>c||E>d){a=p,l=r,c=x,d=E,s=0;return}var k=gc([a,p],n.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function bz(t,e,n){var r=n,i=!1;return yz(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Hv(t,e={}){return bz(t,(n,r)=>{const i=r.geometry.coordinates;return n+F_(i[0],i[1],e)},0)}var Ud=Hv;class ld extends Zn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ye(this,"properties");this.properties=kn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){kn.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(A=>[A.lng,A.lat]);l.push(l[0]);const c=Hu([l]),d=CE(c),p=Hv(gc([...l]),{units:"meters"}),v=Ug(c),g=Zn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(A=>({lat:A.lat,lng:A.lng})),surface:d,perimeter:p,center:{lat:g.lat,lng:g.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){kn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return kn.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return kn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return kn.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Zn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){kn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Zn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){kn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Zn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return kn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Zn.latLng(s.lat+n.lat,s.lng+n.lng));return Zn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return kn.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Zn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Zn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Hu([i]),o=Ug(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Zn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Zn.LatLng(0,0)):new Zn.LatLng(i/o,s/o)}})}getSegmentLengths(){return kn.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class ua extends Zn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ye(this,"properties");Ye(this,"cachedProperties",{});Ye(this,"needsUpdate",!0);this.properties=kn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){kn.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=gc(r),d=Hv(c,{units:"meters"});let p;if(n.length===2)p=Zn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const k=r5(c,d/2,{units:"meters"});p=Zn.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,g=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:d,coordinates:n.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:d*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:g}},this.cachedProperties.length=d,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){kn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return kn.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){kn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return kn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Zn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return kn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Zn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){kn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){kn.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Zn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return kn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Zn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return kn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Zn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=gc(r),s=Hv(i,{units:"meters"}),o=r5(i,s/2,{units:"meters"}),a=Zn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Zn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return kn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return kn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return kn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return kn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}var Wv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Wv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,v=2,g=4,x=1,E=2,k=1,A=2,D=4,z=8,X=16,re=32,ge=64,fe=128,N=256,F=512,Y=30,B="...",I=800,R=16,q=1,U=2,$=3,oe=1/0,J=9007199254740991,_e=17976931348623157e292,ve=NaN,ke=4294967295,W=ke-1,V=ke>>>1,K=[["ary",fe],["bind",k],["bindKey",A],["curry",z],["curryRight",X],["flip",F],["partial",re],["partialRight",ge],["rearg",N]],pe="[object Arguments]",he="[object Array]",te="[object AsyncFunction]",le="[object Boolean]",Q="[object Date]",Be="[object DOMException]",De="[object Error]",Je="[object Function]",me="[object GeneratorFunction]",ee="[object Map]",se="[object Number]",de="[object Null]",ze="[object Object]",$e="[object Promise]",et="[object Proxy]",Ge="[object RegExp]",Qe="[object Set]",Ke="[object String]",xt="[object Symbol]",bt="[object Undefined]",yt="[object WeakMap]",Wt="[object WeakSet]",tn="[object ArrayBuffer]",yn="[object DataView]",Ze="[object Float32Array]",ot="[object Float64Array]",rt="[object Int8Array]",$t="[object Int16Array]",Zt="[object Int32Array]",Dn="[object Uint8Array]",mn="[object Uint8ClampedArray]",An="[object Uint16Array]",Jn="[object Uint32Array]",Qt=/\b__p \+= '';/g,xn=/\b(__p \+=) '' \+/g,Cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tr=/&(?:amp|lt|gt|quot|#39);/g,vr=/[&<>"']/g,xr=RegExp(tr.source),ur=RegExp(vr.source),Gr=/<%-([\s\S]+?)%>/g,Fs=/<%([\s\S]+?)%>/g,Ti=/<%=([\s\S]+?)%>/g,Oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ts=/^\w*$/,nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ds=/[\\^$.*+?()[\]{}|]/g,No=RegExp(Ds.source),at=/^\s+/,Ie=/\s/,ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ln=/\{\n\/\* \[wrapped with (.+)\] \*/,$n=/,? & /,En=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/[()=,{}\[\]\/\s]/,Un=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qt=/\w*$/,Vn=/^[-+]0x[0-9a-f]+$/i,hr=/^0b[01]+$/i,Lr=/^\[object .+?Constructor\]$/,pn=/^0o[0-7]+$/i,rn=/^(?:0|[1-9]\d*)$/,zr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Br=/($^)/,zi=/['\n\r\u2028\u2029\\]/g,Xr="\\ud800-\\udfff",_r="\\u0300-\\u036f",Ar="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",Rr=_r+Ar+hi,an="\\u2700-\\u27bf",Ni="a-z\\xdf-\\xf6\\xf8-\\xff",vi="\\xac\\xb1\\xd7\\xf7",Ki="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jr="\\u2000-\\u206f",dr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tn="A-Z\\xc0-\\xd6\\xd8-\\xde",Sr="\\ufe0e\\ufe0f",ws=vi+Ki+Jr+dr,mo="['’]",cr="["+Xr+"]",Sn="["+ws+"]",sn="["+Rr+"]",yi="\\d+",Qr="["+an+"]",bi="["+Ni+"]",Xs="[^"+Xr+ws+yi+an+Ni+Tn+"]",vo="\\ud83c[\\udffb-\\udfff]",js="(?:"+sn+"|"+vo+")",yr="[^"+Xr+"]",Js="(?:\\ud83c[\\udde6-\\uddff]){2}",Vi="[\\ud800-\\udbff][\\udc00-\\udfff]",Gi="["+Tn+"]",di="\\u200d",Mn="(?:"+bi+"|"+Xs+")",vn="(?:"+Gi+"|"+Xs+")",qr="(?:"+mo+"(?:d|ll|m|re|s|t|ve))?",xs="(?:"+mo+"(?:D|LL|M|RE|S|T|VE))?",Qs=js+"?",qa="["+Sr+"]?",hs="(?:"+di+"(?:"+[yr,Js,Vi].join("|")+")"+qa+Qs+")*",Ma="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zn=qa+Qs+hs,Cr="(?:"+[Qr,Js,Vi].join("|")+")"+zn,rs="(?:"+[yr+sn+"?",sn,Js,Vi,cr].join("|")+")",Tr=RegExp(mo,"g"),Zo=RegExp(sn,"g"),ka=RegExp(vo+"(?="+vo+")|"+rs+zn,"g"),Aa=RegExp([Gi+"?"+bi+"+"+qr+"(?="+[Sn,Gi,"$"].join("|")+")",vn+"+"+xs+"(?="+[Sn,Gi+Mn,"$"].join("|")+")",Gi+"?"+Mn+"+"+qr,Gi+"+"+xs,bl,Ma,yi,Cr].join("|"),"g"),Xo=RegExp("["+di+Xr+Rr+Sr+"]"),sa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_l=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ta=-1,Pr={};Pr[Ze]=Pr[ot]=Pr[rt]=Pr[$t]=Pr[Zt]=Pr[Dn]=Pr[mn]=Pr[An]=Pr[Jn]=!0,Pr[pe]=Pr[he]=Pr[tn]=Pr[le]=Pr[yn]=Pr[Q]=Pr[De]=Pr[Je]=Pr[ee]=Pr[se]=Pr[ze]=Pr[Ge]=Pr[Qe]=Pr[Ke]=Pr[yt]=!1;var Yn={};Yn[pe]=Yn[he]=Yn[tn]=Yn[yn]=Yn[le]=Yn[Q]=Yn[Ze]=Yn[ot]=Yn[rt]=Yn[$t]=Yn[Zt]=Yn[ee]=Yn[se]=Yn[ze]=Yn[Ge]=Yn[Qe]=Yn[Ke]=Yn[xt]=Yn[Dn]=Yn[mn]=Yn[An]=Yn[Jn]=!0,Yn[De]=Yn[Je]=Yn[yt]=!1;var eo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},yo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ou={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Il=parseFloat,au=parseInt,ku=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea,ei=typeof self=="object"&&self&&self.Object===Object&&self,fs=ku||ei||Function("return this")(),gr=e&&!e.nodeType&&e,ps=gr&&!0&&t&&!t.nodeType&&t,Bl=ps&&ps.exports===gr,Ya=Bl&&ku.process,Zi=function(){try{var Lt=ps&&ps.require&&ps.require("util").types;return Lt||Ya&&Ya.binding&&Ya.binding("util")}catch{}}(),Au=Zi&&Zi.isArrayBuffer,Da=Zi&&Zi.isDate,lu=Zi&&Zi.isMap,uu=Zi&&Zi.isRegExp,oa=Zi&&Zi.isSet,cu=Zi&&Zi.isTypedArray;function Si(Lt,Yt,Nt){switch(Nt.length){case 0:return Lt.call(Yt);case 1:return Lt.call(Yt,Nt[0]);case 2:return Lt.call(Yt,Nt[0],Nt[1]);case 3:return Lt.call(Yt,Nt[0],Nt[1],Nt[2])}return Lt.apply(Yt,Nt)}function Mc(Lt,Yt,Nt,In){for(var rr=-1,Mr=Lt==null?0:Lt.length;++rr<Mr;){var Xi=Lt[rr];Yt(In,Xi,Nt(Xi),Lt)}return In}function zs(Lt,Yt){for(var Nt=-1,In=Lt==null?0:Lt.length;++Nt<In&&Yt(Lt[Nt],Nt,Lt)!==!1;);return Lt}function va(Lt,Yt){for(var Nt=Lt==null?0:Lt.length;Nt--&&Yt(Lt[Nt],Nt,Lt)!==!1;);return Lt}function hu(Lt,Yt){for(var Nt=-1,In=Lt==null?0:Lt.length;++Nt<In;)if(!Yt(Lt[Nt],Nt,Lt))return!1;return!0}function ya(Lt,Yt){for(var Nt=-1,In=Lt==null?0:Lt.length,rr=0,Mr=[];++Nt<In;){var Xi=Lt[Nt];Yt(Xi,Nt,Lt)&&(Mr[rr++]=Xi)}return Mr}function Rl(Lt,Yt){var Nt=Lt==null?0:Lt.length;return!!Nt&&dn(Lt,Yt,0)>-1}function Fl(Lt,Yt,Nt){for(var In=-1,rr=Lt==null?0:Lt.length;++In<rr;)if(Nt(Yt,Lt[In]))return!0;return!1}function Ci(Lt,Yt){for(var Nt=-1,In=Lt==null?0:Lt.length,rr=Array(In);++Nt<In;)rr[Nt]=Yt(Lt[Nt],Nt,Lt);return rr}function Jo(Lt,Yt){for(var Nt=-1,In=Yt.length,rr=Lt.length;++Nt<In;)Lt[rr+Nt]=Yt[Nt];return Lt}function Ka(Lt,Yt,Nt,In){var rr=-1,Mr=Lt==null?0:Lt.length;for(In&&Mr&&(Nt=Lt[++rr]);++rr<Mr;)Nt=Yt(Nt,Lt[rr],rr,Lt);return Nt}function gs(Lt,Yt,Nt,In){var rr=Lt==null?0:Lt.length;for(In&&rr&&(Nt=Lt[--rr]);rr--;)Nt=Yt(Nt,Lt[rr],rr,Lt);return Nt}function j(Lt,Yt){for(var Nt=-1,In=Lt==null?0:Lt.length;++Nt<In;)if(Yt(Lt[Nt],Nt,Lt))return!0;return!1}var we=Er("length");function Xe(Lt){return Lt.split("")}function dt(Lt){return Lt.match(En)||[]}function kt(Lt,Yt,Nt){var In;return Nt(Lt,function(rr,Mr,Xi){if(Yt(rr,Mr,Xi))return In=Mr,!1}),In}function Ut(Lt,Yt,Nt,In){for(var rr=Lt.length,Mr=Nt+(In?1:-1);In?Mr--:++Mr<rr;)if(Yt(Lt[Mr],Mr,Lt))return Mr;return-1}function dn(Lt,Yt,Nt){return Yt===Yt?Os(Lt,Yt,Nt):Ut(Lt,Hn,Nt)}function Rn(Lt,Yt,Nt,In){for(var rr=Nt-1,Mr=Lt.length;++rr<Mr;)if(In(Lt[rr],Yt))return rr;return-1}function Hn(Lt){return Lt!==Lt}function fr(Lt,Yt){var Nt=Lt==null?0:Lt.length;return Nt?Ei(Lt,Yt)/Nt:ve}function Er(Lt){return function(Yt){return Yt==null?n:Yt[Lt]}}function Vr(Lt){return function(Yt){return Lt==null?n:Lt[Yt]}}function qi(Lt,Yt,Nt,In,rr){return rr(Lt,function(Mr,Xi,Pi){Nt=In?(In=!1,Mr):Yt(Nt,Mr,Xi,Pi)}),Nt}function pi(Lt,Yt){var Nt=Lt.length;for(Lt.sort(Yt);Nt--;)Lt[Nt]=Lt[Nt].value;return Lt}function Ei(Lt,Yt){for(var Nt,In=-1,rr=Lt.length;++In<rr;){var Mr=Yt(Lt[In]);Mr!==n&&(Nt=Nt===n?Mr:Nt+Mr)}return Nt}function ms(Lt,Yt){for(var Nt=-1,In=Array(Lt);++Nt<Lt;)In[Nt]=Yt(Nt);return In}function Ls(Lt,Yt){return Ci(Yt,function(Nt){return[Nt,Lt[Nt]]})}function Qo(Lt){return Lt&&Lt.slice(0,Xa(Lt)+1).replace(at,"")}function Ur(Lt){return function(Yt){return Lt(Yt)}}function to(Lt,Yt){return Ci(Yt,function(Nt){return Lt[Nt]})}function jl(Lt,Yt){return Lt.has(Yt)}function bo(Lt,Yt){for(var Nt=-1,In=Lt.length;++Nt<In&&dn(Yt,Lt[Nt],0)>-1;);return Nt}function Tu(Lt,Yt){for(var Nt=Lt.length;Nt--&&dn(Yt,Lt[Nt],0)>-1;);return Nt}function Oa(Lt,Yt){for(var Nt=Lt.length,In=0;Nt--;)Lt[Nt]===Yt&&++In;return In}var Ju=Vr(eo),wl=Vr(yo);function xl(Lt){return"\\"+Mu[Lt]}function Ss(Lt,Yt){return Lt==null?n:Lt[Yt]}function Na(Lt){return Xo.test(Lt)}function ea(Lt){return sa.test(Lt)}function Io(Lt){for(var Yt,Nt=[];!(Yt=Lt.next()).done;)Nt.push(Yt.value);return Nt}function zl(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(In,rr){Nt[++Yt]=[rr,In]}),Nt}function no(Lt,Yt){return function(Nt){return Lt(Yt(Nt))}}function _o(Lt,Yt){for(var Nt=-1,In=Lt.length,rr=0,Mr=[];++Nt<In;){var Xi=Lt[Nt];(Xi===Yt||Xi===d)&&(Lt[Nt]=d,Mr[rr++]=Nt)}return Mr}function wo(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(In){Nt[++Yt]=In}),Nt}function kc(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(In){Nt[++Yt]=[In,In]}),Nt}function Os(Lt,Yt,Nt){for(var In=Nt-1,rr=Lt.length;++In<rr;)if(Lt[In]===Yt)return In;return-1}function Za(Lt,Yt,Nt){for(var In=Nt+1;In--;)if(Lt[In]===Yt)return In;return In}function ro(Lt){return Na(Lt)?so(Lt):we(Lt)}function io(Lt){return Na(Lt)?$s(Lt):Xe(Lt)}function Xa(Lt){for(var Yt=Lt.length;Yt--&&Ie.test(Lt.charAt(Yt)););return Yt}var Ja=Vr(ou);function so(Lt){for(var Yt=ka.lastIndex=0;ka.test(Lt);)++Yt;return Yt}function $s(Lt){return Lt.match(ka)||[]}function Ia(Lt){return Lt.match(Aa)||[]}var ta=function Lt(Yt){Yt=Yt==null?fs:oo.defaults(fs.Object(),Yt,oo.pick(fs,_l));var Nt=Yt.Array,In=Yt.Date,rr=Yt.Error,Mr=Yt.Function,Xi=Yt.Math,Pi=Yt.Object,du=Yt.RegExp,xo=Yt.String,Ji=Yt.TypeError,Ba=Nt.prototype,Qa=Mr.prototype,Ra=Pi.prototype,Fa=Yt["__core-js_shared__"],ja=Qa.toString,ti=Ra.hasOwnProperty,ba=0,Vs=function(){var f=/[^.]+$/.exec(Fa&&Fa.keys&&Fa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Mi=Ra.toString,Ii=ja.call(Pi),vs=fs._,Ui=du("^"+ja.call(ti).replace(Ds,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),na=Bl?Yt.Buffer:n,Bo=Yt.Symbol,aa=Yt.Uint8Array,Qu=na?na.allocUnsafe:n,za=no(Pi.getPrototypeOf,Pi),Cs=Pi.create,$i=Ra.propertyIsEnumerable,ao=Ba.splice,Ro=Bo?Bo.isConcatSpreadable:n,wr=Bo?Bo.iterator:n,el=Bo?Bo.toStringTag:n,tl=function(){try{var f=Rd(Pi,"defineProperty");return f({},"",{}),f}catch{}}(),_a=Yt.clearTimeout!==fs.clearTimeout&&Yt.clearTimeout,Lo=In&&In.now!==fs.Date.now&&In.now,ih=Yt.setTimeout!==fs.setTimeout&&Yt.setTimeout,Us=Xi.ceil,Hs=Xi.floor,wa=Pi.getOwnPropertySymbols,u=na?na.isBuffer:n,y=Yt.isFinite,P=Ba.join,G=no(Pi.keys,Pi),ue=Xi.max,Ce=Xi.min,lt=In.now,Ot=Yt.parseInt,Ht=Xi.random,un=Ba.reverse,Fn=Rd(Yt,"DataView"),sr=Rd(Yt,"Map"),$r=Rd(Yt,"Promise"),Es=Rd(Yt,"Set"),os=Rd(Yt,"WeakMap"),Ws=Rd(Pi,"create"),Qi=os&&new os,Fo={},sh=Fd(Fn),$a=Fd(sr),xa=Fd($r),la=Fd(Es),Ad=Fd(os),Du=Bo?Bo.prototype:n,_i=Du?Du.valueOf:n,lo=Du?Du.toString:n;function Oe(f){if(So(f)&&!ri(f)&&!(f instanceof Hr)){if(f instanceof Gs)return f;if(ti.call(f,"__wrapped__"))return Hw(f)}return new Gs(f)}var jo=function(){function f(){}return function(b){if(!co(b))return{};if(Cs)return Cs(b);f.prototype=b;var O=new f;return f.prototype=n,O}}();function ec(){}function Gs(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Oe.templateSettings={escape:Gr,evaluate:Fs,interpolate:Ti,variable:"",imports:{_:Oe}},Oe.prototype=ec.prototype,Oe.prototype.constructor=Oe,Gs.prototype=jo(ec.prototype),Gs.prototype.constructor=Gs;function Hr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ke,this.__views__=[]}function zh(){var f=new Hr(this.__wrapped__);return f.__actions__=Vl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Vl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Vl(this.__views__),f}function Pf(){if(this.__filtered__){var f=new Hr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function $h(){var f=this.__wrapped__.value(),b=this.__dir__,O=ri(f),ie=b<0,Le=O?f.length:0,Ve=XM(0,Le,this.__views__),st=Ve.start,vt=Ve.end,Dt=vt-st,cn=ie?vt:st-1,hn=this.__iteratees__,bn=hn.length,Gn=0,mr=Ce(Dt,this.__takeCount__);if(!O||!ie&&Le==Dt&&mr==Dt)return Ou(f,this.__actions__);var Dr=[];e:for(;Dt--&&Gn<mr;){cn+=b;for(var fi=-1,Or=f[cn];++fi<bn;){var ki=hn[fi],Ri=ki.iteratee,gu=ki.type,El=Ri(Or);if(gu==U)Or=El;else if(!El){if(gu==q)continue e;break e}}Dr[Gn++]=Or}return Dr}Hr.prototype=jo(ec.prototype),Hr.prototype.constructor=Hr;function Ll(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function oh(){this.__data__=Ws?Ws(null):{},this.size=0}function Td(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function zp(f){var b=this.__data__;if(Ws){var O=b[f];return O===l?n:O}return ti.call(b,f)?b[f]:n}function Ac(f){var b=this.__data__;return Ws?b[f]!==n:ti.call(b,f)}function Vh(f,b){var O=this.__data__;return this.size+=this.has(f)?0:1,O[f]=Ws&&b===n?l:b,this}Ll.prototype.clear=oh,Ll.prototype.delete=Td,Ll.prototype.get=zp,Ll.prototype.has=Ac,Ll.prototype.set=Vh;function fu(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function $p(){this.__data__=[],this.size=0}function Uh(f){var b=this.__data__,O=wt(b,f);if(O<0)return!1;var ie=b.length-1;return O==ie?b.pop():ao.call(b,O,1),--this.size,!0}function Hh(f){var b=this.__data__,O=wt(b,f);return O<0?n:b[O][1]}function Mf(f){return wt(this.__data__,f)>-1}function kf(f,b){var O=this.__data__,ie=wt(O,f);return ie<0?(++this.size,O.push([f,b])):O[ie][1]=b,this}fu.prototype.clear=$p,fu.prototype.delete=Uh,fu.prototype.get=Hh,fu.prototype.has=Mf,fu.prototype.set=kf;function nl(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function Af(){this.size=0,this.__data__={hash:new Ll,map:new(sr||fu),string:new Ll}}function Tf(f){var b=Xm(this,f).delete(f);return this.size-=b?1:0,b}function Df(f){return Xm(this,f).get(f)}function w(f){return Xm(this,f).has(f)}function T(f,b){var O=Xm(this,f),ie=O.size;return O.set(f,b),this.size+=O.size==ie?0:1,this}nl.prototype.clear=Af,nl.prototype.delete=Tf,nl.prototype.get=Df,nl.prototype.has=w,nl.prototype.set=T;function Z(f){var b=-1,O=f==null?0:f.length;for(this.__data__=new nl;++b<O;)this.add(f[b])}function ce(f){return this.__data__.set(f,l),this}function xe(f){return this.__data__.has(f)}Z.prototype.add=Z.prototype.push=ce,Z.prototype.has=xe;function Ee(f){var b=this.__data__=new fu(f);this.size=b.size}function Me(){this.__data__=new fu,this.size=0}function Te(f){var b=this.__data__,O=b.delete(f);return this.size=b.size,O}function Re(f){return this.__data__.get(f)}function qe(f){return this.__data__.has(f)}function pt(f,b){var O=this.__data__;if(O instanceof fu){var ie=O.__data__;if(!sr||ie.length<i-1)return ie.push([f,b]),this.size=++O.size,this;O=this.__data__=new nl(ie)}return O.set(f,b),this.size=O.size,this}Ee.prototype.clear=Me,Ee.prototype.delete=Te,Ee.prototype.get=Re,Ee.prototype.has=qe,Ee.prototype.set=pt;function Rt(f,b){var O=ri(f),ie=!O&&jd(f),Le=!O&&!ie&&Gh(f),Ve=!O&&!ie&&!Le&&$f(f),st=O||ie||Le||Ve,vt=st?ms(f.length,xo):[],Dt=vt.length;for(var cn in f)(b||ti.call(f,cn))&&!(st&&(cn=="length"||Le&&(cn=="offset"||cn=="parent")||Ve&&(cn=="buffer"||cn=="byteLength"||cn=="byteOffset")||dh(cn,Dt)))&&vt.push(cn);return vt}function Ft(f){var b=f.length;return b?f[Nd(0,b-1)]:n}function Mt(f,b){return Jm(Vl(f),or(b,0,f.length))}function Kt(f){return Jm(Vl(f))}function Gt(f,b,O){(O!==n&&!oc(f[b],O)||O===n&&!(b in f))&&Bn(f,b,O)}function gt(f,b,O){var ie=f[b];(!(ti.call(f,b)&&oc(ie,O))||O===n&&!(b in f))&&Bn(f,b,O)}function wt(f,b){for(var O=f.length;O--;)if(oc(f[O][0],b))return O;return-1}function nn(f,b,O,ie){return H(f,function(Le,Ve,st){b(ie,Le,O(Le),st)}),ie}function fn(f,b){return f&&Oc(b,La(b),f)}function on(f,b){return f&&Oc(b,Hl(b),f)}function Bn(f,b,O){b=="__proto__"&&tl?tl(f,b,{configurable:!0,enumerable:!0,value:O,writable:!0}):f[b]=O}function On(f,b){for(var O=-1,ie=b.length,Le=Nt(ie),Ve=f==null;++O<ie;)Le[O]=Ve?n:v1(f,b[O]);return Le}function or(f,b,O){return f===f&&(O!==n&&(f=f<=O?f:O),b!==n&&(f=f>=b?f:b)),f}function h(f,b,O,ie,Le,Ve){var st,vt=b&p,Dt=b&v,cn=b&g;if(O&&(st=Le?O(f,ie,Le,Ve):O(f)),st!==n)return st;if(!co(f))return f;var hn=ri(f);if(hn){if(st=QM(f),!vt)return Vl(f,st)}else{var bn=il(f),Gn=bn==Je||bn==me;if(Gh(f))return mw(f,vt);if(bn==ze||bn==pe||Gn&&!Le){if(st=Dt||Gn?{}:Iw(f),!vt)return Dt?VM(f,on(st,f)):$M(f,fn(st,f))}else{if(!Yn[bn])return Le?f:{};st=ek(f,bn,vt)}}Ve||(Ve=new Ee);var mr=Ve.get(f);if(mr)return mr;Ve.set(f,st),cx(f)?f.forEach(function(Or){st.add(h(Or,b,O,Or,f,Ve))}):lx(f)&&f.forEach(function(Or,ki){st.set(ki,h(Or,b,O,ki,f,Ve))});var Dr=cn?Dt?r1:n1:Dt?Hl:La,fi=hn?n:Dr(f);return zs(fi||f,function(Or,ki){fi&&(ki=Or,Or=f[ki]),gt(st,ki,h(Or,b,O,ki,f,Ve))}),st}function m(f){var b=La(f);return function(O){return _(O,f,b)}}function _(f,b,O){var ie=O.length;if(f==null)return!ie;for(f=Pi(f);ie--;){var Le=O[ie],Ve=b[Le],st=f[Le];if(st===n&&!(Le in f)||!Ve(st))return!1}return!0}function S(f,b,O){if(typeof f!="function")throw new Ji(o);return Gp(function(){f.apply(n,O)},b)}function M(f,b,O,ie){var Le=-1,Ve=Rl,st=!0,vt=f.length,Dt=[],cn=b.length;if(!vt)return Dt;O&&(b=Ci(b,Ur(O))),ie?(Ve=Fl,st=!1):b.length>=i&&(Ve=jl,st=!1,b=new Z(b));e:for(;++Le<vt;){var hn=f[Le],bn=O==null?hn:O(hn);if(hn=ie||hn!==0?hn:0,st&&bn===bn){for(var Gn=cn;Gn--;)if(b[Gn]===bn)continue e;Dt.push(hn)}else Ve(b,bn,ie)||Dt.push(hn)}return Dt}var H=ww(en),ne=ww(_n,!0);function ae(f,b){var O=!0;return H(f,function(ie,Le,Ve){return O=!!b(ie,Le,Ve),O}),O}function ye(f,b,O){for(var ie=-1,Le=f.length;++ie<Le;){var Ve=f[ie],st=b(Ve);if(st!=null&&(vt===n?st===st&&!pu(st):O(st,vt)))var vt=st,Dt=Ve}return Dt}function Se(f,b,O,ie){var Le=f.length;for(O=ui(O),O<0&&(O=-O>Le?0:Le+O),ie=ie===n||ie>Le?Le:ui(ie),ie<0&&(ie+=Le),ie=O>ie?0:dx(ie);O<ie;)f[O++]=b;return f}function nt(f,b){var O=[];return H(f,function(ie,Le,Ve){b(ie,Le,Ve)&&O.push(ie)}),O}function We(f,b,O,ie,Le){var Ve=-1,st=f.length;for(O||(O=nk),Le||(Le=[]);++Ve<st;){var vt=f[Ve];b>0&&O(vt)?b>1?We(vt,b-1,O,ie,Le):Jo(Le,vt):ie||(Le[Le.length]=vt)}return Le}var _t=xw(),It=xw(!0);function en(f,b){return f&&_t(f,b,La)}function _n(f,b){return f&&It(f,b,La)}function Pn(f,b){return ya(b,function(O){return fh(f[O])})}function br(f,b){b=sc(b,f);for(var O=0,ie=b.length;f!=null&&O<ie;)f=f[Nc(b[O++])];return O&&O==ie?f:n}function tt(f,b,O){var ie=b(f);return ri(f)?ie:Jo(ie,O(f))}function it(f){return f==null?f===n?bt:de:el&&el in Pi(f)?ZM(f):uk(f)}function ft(f,b){return f>b}function zt(f,b){return f!=null&&ti.call(f,b)}function Pt(f,b){return f!=null&&b in Pi(f)}function Bt(f,b,O){return f>=Ce(b,O)&&f<ue(b,O)}function be(f,b,O){for(var ie=O?Fl:Rl,Le=f[0].length,Ve=f.length,st=Ve,vt=Nt(Ve),Dt=1/0,cn=[];st--;){var hn=f[st];st&&b&&(hn=Ci(hn,Ur(b))),Dt=Ce(hn.length,Dt),vt[st]=!O&&(b||Le>=120&&hn.length>=120)?new Z(st&&hn):n}hn=f[0];var bn=-1,Gn=vt[0];e:for(;++bn<Le&&cn.length<Dt;){var mr=hn[bn],Dr=b?b(mr):mr;if(mr=O||mr!==0?mr:0,!(Gn?jl(Gn,Dr):ie(cn,Dr,O))){for(st=Ve;--st;){var fi=vt[st];if(!(fi?jl(fi,Dr):ie(f[st],Dr,O)))continue e}Gn&&Gn.push(Dr),cn.push(mr)}}return cn}function Pe(f,b,O,ie){return en(f,function(Le,Ve,st){b(ie,O(Le),Ve,st)}),ie}function je(f,b,O){b=sc(b,f),f=jw(f,b);var ie=f==null?f:f[Nc(Bu(b))];return ie==null?n:Si(ie,f,O)}function Fe(f){return So(f)&&it(f)==pe}function Ue(f){return So(f)&&it(f)==tn}function He(f){return So(f)&&it(f)==Q}function ut(f,b,O,ie,Le){return f===b?!0:f==null||b==null||!So(f)&&!So(b)?f!==f&&b!==b:ht(f,b,O,ie,ut,Le)}function ht(f,b,O,ie,Le,Ve){var st=ri(f),vt=ri(b),Dt=st?he:il(f),cn=vt?he:il(b);Dt=Dt==pe?ze:Dt,cn=cn==pe?ze:cn;var hn=Dt==ze,bn=cn==ze,Gn=Dt==cn;if(Gn&&Gh(f)){if(!Gh(b))return!1;st=!0,hn=!1}if(Gn&&!hn)return Ve||(Ve=new Ee),st||$f(f)?Dw(f,b,O,ie,Le,Ve):YM(f,b,Dt,O,ie,Le,Ve);if(!(O&x)){var mr=hn&&ti.call(f,"__wrapped__"),Dr=bn&&ti.call(b,"__wrapped__");if(mr||Dr){var fi=mr?f.value():f,Or=Dr?b.value():b;return Ve||(Ve=new Ee),Le(fi,Or,O,ie,Ve)}}return Gn?(Ve||(Ve=new Ee),KM(f,b,O,ie,Le,Ve)):!1}function mt(f){return So(f)&&il(f)==ee}function At(f,b,O,ie){var Le=O.length,Ve=Le,st=!ie;if(f==null)return!Ve;for(f=Pi(f);Le--;){var vt=O[Le];if(st&&vt[2]?vt[1]!==f[vt[0]]:!(vt[0]in f))return!1}for(;++Le<Ve;){vt=O[Le];var Dt=vt[0],cn=f[Dt],hn=vt[1];if(st&&vt[2]){if(cn===n&&!(Dt in f))return!1}else{var bn=new Ee;if(ie)var Gn=ie(cn,hn,Dt,f,b,bn);if(!(Gn===n?ut(hn,cn,x|E,ie,bn):Gn))return!1}}return!0}function Tt(f){if(!co(f)||ik(f))return!1;var b=fh(f)?Ui:Lr;return b.test(Fd(f))}function ln(f){return So(f)&&it(f)==Ge}function Wn(f){return So(f)&&il(f)==Qe}function Kn(f){return So(f)&&i0(f.length)&&!!Pr[it(f)]}function ar(f){return typeof f=="function"?f:f==null?Wl:typeof f=="object"?ri(f)?tc(f[0],f[1]):zo(f):Lx(f)}function wi(f){if(!Wp(f))return G(f);var b=[];for(var O in Pi(f))ti.call(f,O)&&O!="constructor"&&b.push(O);return b}function Bi(f){if(!co(f))return lk(f);var b=Wp(f),O=[];for(var ie in f)ie=="constructor"&&(b||!ti.call(f,ie))||O.push(ie);return O}function ni(f,b){return f<b}function Hi(f,b){var O=-1,ie=Ul(f)?Nt(f.length):[];return H(f,function(Le,Ve,st){ie[++O]=b(Le,Ve,st)}),ie}function zo(f){var b=s1(f);return b.length==1&&b[0][2]?Rw(b[0][0],b[0][1]):function(O){return O===f||At(O,f,b)}}function tc(f,b){return a1(f)&&Bw(b)?Rw(Nc(f),b):function(O){var ie=v1(O,f);return ie===n&&ie===b?y1(O,f):ut(b,ie,x|E)}}function Va(f,b,O,ie,Le){f!==b&&_t(b,function(Ve,st){if(Le||(Le=new Ee),co(Ve))Dd(f,b,st,O,Va,ie,Le);else{var vt=ie?ie(u1(f,st),Ve,st+"",f,b,Le):n;vt===n&&(vt=Ve),Gt(f,st,vt)}},Hl)}function Dd(f,b,O,ie,Le,Ve,st){var vt=u1(f,O),Dt=u1(b,O),cn=st.get(Dt);if(cn){Gt(f,O,cn);return}var hn=Ve?Ve(vt,Dt,O+"",f,b,st):n,bn=hn===n;if(bn){var Gn=ri(Dt),mr=!Gn&&Gh(Dt),Dr=!Gn&&!mr&&$f(Dt);hn=Dt,Gn||mr||Dr?ri(vt)?hn=vt:$o(vt)?hn=Vl(vt):mr?(bn=!1,hn=mw(Dt,!0)):Dr?(bn=!1,hn=vw(Dt,!0)):hn=[]:qp(Dt)||jd(Dt)?(hn=vt,jd(vt)?hn=fx(vt):(!co(vt)||fh(vt))&&(hn=Iw(Dt))):bn=!1}bn&&(st.set(Dt,hn),Le(hn,Dt,ie,Ve,st),st.delete(Dt)),Gt(f,O,hn)}function Sl(f,b){var O=f.length;if(O)return b+=b<0?O:0,dh(b,O)?f[b]:n}function Tc(f,b,O){b.length?b=Ci(b,function(Ve){return ri(Ve)?function(st){return br(st,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[Wl];var ie=-1;b=Ci(b,Ur(kr()));var Le=Hi(f,function(Ve,st,vt){var Dt=Ci(b,function(cn){return cn(Ve)});return{criteria:Dt,index:++ie,value:Ve}});return pi(Le,function(Ve,st){return zM(Ve,st,O)})}function Ua(f,b){return uo(f,b,function(O,ie){return y1(f,ie)})}function uo(f,b,O){for(var ie=-1,Le=b.length,Ve={};++ie<Le;){var st=b[ie],vt=br(f,st);O(vt,st)&&ah(Ve,sc(st,f),vt)}return Ve}function ys(f){return function(b){return br(b,f)}}function Of(f,b,O,ie){var Le=ie?Rn:dn,Ve=-1,st=b.length,vt=f;for(f===b&&(b=Vl(b)),O&&(vt=Ci(f,Ur(O)));++Ve<st;)for(var Dt=0,cn=b[Ve],hn=O?O(cn):cn;(Dt=Le(vt,hn,Dt,ie))>-1;)vt!==f&&ao.call(vt,Dt,1),ao.call(f,Dt,1);return f}function Od(f,b){for(var O=f?b.length:0,ie=O-1;O--;){var Le=b[O];if(O==ie||Le!==Ve){var Ve=Le;dh(Le)?ao.call(f,Le,1):lh(f,Le)}}return f}function Nd(f,b){return f+Hs(Ht()*(b-f+1))}function Id(f,b,O,ie){for(var Le=-1,Ve=ue(Us((b-f)/(O||1)),0),st=Nt(Ve);Ve--;)st[ie?Ve:++Le]=f,f+=O;return st}function Nf(f,b){var O="";if(!f||b<1||b>J)return O;do b%2&&(O+=f),b=Hs(b/2),b&&(f+=f);while(b);return O}function li(f,b){return c1(Fw(f,b,Wl),f+"")}function If(f){return Ft(Vf(f))}function zm(f,b){var O=Vf(f);return Jm(O,or(b,0,O.length))}function ah(f,b,O,ie){if(!co(f))return f;b=sc(b,f);for(var Le=-1,Ve=b.length,st=Ve-1,vt=f;vt!=null&&++Le<Ve;){var Dt=Nc(b[Le]),cn=O;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return f;if(Le!=st){var hn=vt[Dt];cn=ie?ie(hn,Dt,vt):n,cn===n&&(cn=co(hn)?hn:dh(b[Le+1])?[]:{})}gt(vt,Dt,cn),vt=vt[Dt]}return f}var nc=Qi?function(f,b){return Qi.set(f,b),f}:Wl,$m=tl?function(f,b){return tl(f,"toString",{configurable:!0,enumerable:!1,value:_1(b),writable:!0})}:Wl;function Vm(f){return Jm(Vf(f))}function $l(f,b,O){var ie=-1,Le=f.length;b<0&&(b=-b>Le?0:Le+b),O=O>Le?Le:O,O<0&&(O+=Le),Le=b>O?0:O-b>>>0,b>>>=0;for(var Ve=Nt(Le);++ie<Le;)Ve[ie]=f[ie+b];return Ve}function Um(f,b){var O;return H(f,function(ie,Le,Ve){return O=b(ie,Le,Ve),!O}),!!O}function rc(f,b,O){var ie=0,Le=f==null?ie:f.length;if(typeof b=="number"&&b===b&&Le<=V){for(;ie<Le;){var Ve=ie+Le>>>1,st=f[Ve];st!==null&&!pu(st)&&(O?st<=b:st<b)?ie=Ve+1:Le=Ve}return Le}return Vp(f,b,Wl,O)}function Vp(f,b,O,ie){var Le=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=O(b);for(var st=b!==b,vt=b===null,Dt=pu(b),cn=b===n;Le<Ve;){var hn=Hs((Le+Ve)/2),bn=O(f[hn]),Gn=bn!==n,mr=bn===null,Dr=bn===bn,fi=pu(bn);if(st)var Or=ie||Dr;else cn?Or=Dr&&(ie||Gn):vt?Or=Dr&&Gn&&(ie||!mr):Dt?Or=Dr&&Gn&&!mr&&(ie||!fi):mr||fi?Or=!1:Or=ie?bn<=b:bn<b;Or?Le=hn+1:Ve=hn}return Ce(Ve,W)}function Up(f,b){for(var O=-1,ie=f.length,Le=0,Ve=[];++O<ie;){var st=f[O],vt=b?b(st):st;if(!O||!oc(vt,Dt)){var Dt=vt;Ve[Le++]=st===0?0:st}}return Ve}function Hm(f){return typeof f=="number"?f:pu(f)?ve:+f}function rl(f){if(typeof f=="string")return f;if(ri(f))return Ci(f,rl)+"";if(pu(f))return lo?lo.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Dc(f,b,O){var ie=-1,Le=Rl,Ve=f.length,st=!0,vt=[],Dt=vt;if(O)st=!1,Le=Fl;else if(Ve>=i){var cn=b?null:GM(f);if(cn)return wo(cn);st=!1,Le=jl,Dt=new Z}else Dt=b?[]:vt;e:for(;++ie<Ve;){var hn=f[ie],bn=b?b(hn):hn;if(hn=O||hn!==0?hn:0,st&&bn===bn){for(var Gn=Dt.length;Gn--;)if(Dt[Gn]===bn)continue e;b&&Dt.push(bn),vt.push(hn)}else Le(Dt,bn,O)||(Dt!==vt&&Dt.push(bn),vt.push(hn))}return vt}function lh(f,b){return b=sc(b,f),f=jw(f,b),f==null||delete f[Nc(Bu(b))]}function Bf(f,b,O,ie){return ah(f,b,O(br(f,b)),ie)}function uh(f,b,O,ie){for(var Le=f.length,Ve=ie?Le:-1;(ie?Ve--:++Ve<Le)&&b(f[Ve],Ve,f););return O?$l(f,ie?0:Ve,ie?Ve+1:Le):$l(f,ie?Ve+1:0,ie?Le:Ve)}function Ou(f,b){var O=f;return O instanceof Hr&&(O=O.value()),Ka(b,function(ie,Le){return Le.func.apply(Le.thisArg,Jo([ie],Le.args))},O)}function Nu(f,b,O){var ie=f.length;if(ie<2)return ie?Dc(f[0]):[];for(var Le=-1,Ve=Nt(ie);++Le<ie;)for(var st=f[Le],vt=-1;++vt<ie;)vt!=Le&&(Ve[Le]=M(Ve[Le]||st,f[vt],b,O));return Dc(We(Ve,1),b,O)}function ic(f,b,O){for(var ie=-1,Le=f.length,Ve=b.length,st={};++ie<Le;){var vt=ie<Ve?b[ie]:n;O(st,f[ie],vt)}return st}function Wh(f){return $o(f)?f:[]}function Bd(f){return typeof f=="function"?f:Wl}function sc(f,b){return ri(f)?f:a1(f,b)?[f]:Uw(is(f))}var Jy=li;function Iu(f,b,O){var ie=f.length;return O=O===n?ie:O,!b&&O>=ie?f:$l(f,b,O)}var Rf=_a||function(f){return fs.clearTimeout(f)};function mw(f,b){if(b)return f.slice();var O=f.length,ie=Qu?Qu(O):new f.constructor(O);return f.copy(ie),ie}function Qy(f){var b=new f.constructor(f.byteLength);return new aa(b).set(new aa(f)),b}function RM(f,b){var O=b?Qy(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.byteLength)}function FM(f){var b=new f.constructor(f.source,qt.exec(f));return b.lastIndex=f.lastIndex,b}function jM(f){return _i?Pi(_i.call(f)):{}}function vw(f,b){var O=b?Qy(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.length)}function yw(f,b){if(f!==b){var O=f!==n,ie=f===null,Le=f===f,Ve=pu(f),st=b!==n,vt=b===null,Dt=b===b,cn=pu(b);if(!vt&&!cn&&!Ve&&f>b||Ve&&st&&Dt&&!vt&&!cn||ie&&st&&Dt||!O&&Dt||!Le)return 1;if(!ie&&!Ve&&!cn&&f<b||cn&&O&&Le&&!ie&&!Ve||vt&&O&&Le||!st&&Le||!Dt)return-1}return 0}function zM(f,b,O){for(var ie=-1,Le=f.criteria,Ve=b.criteria,st=Le.length,vt=O.length;++ie<st;){var Dt=yw(Le[ie],Ve[ie]);if(Dt){if(ie>=vt)return Dt;var cn=O[ie];return Dt*(cn=="desc"?-1:1)}}return f.index-b.index}function bw(f,b,O,ie){for(var Le=-1,Ve=f.length,st=O.length,vt=-1,Dt=b.length,cn=ue(Ve-st,0),hn=Nt(Dt+cn),bn=!ie;++vt<Dt;)hn[vt]=b[vt];for(;++Le<st;)(bn||Le<Ve)&&(hn[O[Le]]=f[Le]);for(;cn--;)hn[vt++]=f[Le++];return hn}function _w(f,b,O,ie){for(var Le=-1,Ve=f.length,st=-1,vt=O.length,Dt=-1,cn=b.length,hn=ue(Ve-vt,0),bn=Nt(hn+cn),Gn=!ie;++Le<hn;)bn[Le]=f[Le];for(var mr=Le;++Dt<cn;)bn[mr+Dt]=b[Dt];for(;++st<vt;)(Gn||Le<Ve)&&(bn[mr+O[st]]=f[Le++]);return bn}function Vl(f,b){var O=-1,ie=f.length;for(b||(b=Nt(ie));++O<ie;)b[O]=f[O];return b}function Oc(f,b,O,ie){var Le=!O;O||(O={});for(var Ve=-1,st=b.length;++Ve<st;){var vt=b[Ve],Dt=ie?ie(O[vt],f[vt],vt,O,f):n;Dt===n&&(Dt=f[vt]),Le?Bn(O,vt,Dt):gt(O,vt,Dt)}return O}function $M(f,b){return Oc(f,o1(f),b)}function VM(f,b){return Oc(f,Ow(f),b)}function Wm(f,b){return function(O,ie){var Le=ri(O)?Mc:nn,Ve=b?b():{};return Le(O,f,kr(ie,2),Ve)}}function Ff(f){return li(function(b,O){var ie=-1,Le=O.length,Ve=Le>1?O[Le-1]:n,st=Le>2?O[2]:n;for(Ve=f.length>3&&typeof Ve=="function"?(Le--,Ve):n,st&&Cl(O[0],O[1],st)&&(Ve=Le<3?n:Ve,Le=1),b=Pi(b);++ie<Le;){var vt=O[ie];vt&&f(b,vt,ie,Ve)}return b})}function ww(f,b){return function(O,ie){if(O==null)return O;if(!Ul(O))return f(O,ie);for(var Le=O.length,Ve=b?Le:-1,st=Pi(O);(b?Ve--:++Ve<Le)&&ie(st[Ve],Ve,st)!==!1;);return O}}function xw(f){return function(b,O,ie){for(var Le=-1,Ve=Pi(b),st=ie(b),vt=st.length;vt--;){var Dt=st[f?vt:++Le];if(O(Ve[Dt],Dt,Ve)===!1)break}return b}}function UM(f,b,O){var ie=b&k,Le=Hp(f);function Ve(){var st=this&&this!==fs&&this instanceof Ve?Le:f;return st.apply(ie?O:this,arguments)}return Ve}function Lw(f){return function(b){b=is(b);var O=Na(b)?io(b):n,ie=O?O[0]:b.charAt(0),Le=O?Iu(O,1).join(""):b.slice(1);return ie[f]()+Le}}function jf(f){return function(b){return Ka(wx(_x(b).replace(Tr,"")),f,"")}}function Hp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var O=jo(f.prototype),ie=f.apply(O,b);return co(ie)?ie:O}}function HM(f,b,O){var ie=Hp(f);function Le(){for(var Ve=arguments.length,st=Nt(Ve),vt=Ve,Dt=zf(Le);vt--;)st[vt]=arguments[vt];var cn=Ve<3&&st[0]!==Dt&&st[Ve-1]!==Dt?[]:_o(st,Dt);if(Ve-=cn.length,Ve<O)return Mw(f,b,Gm,Le.placeholder,n,st,cn,n,n,O-Ve);var hn=this&&this!==fs&&this instanceof Le?ie:f;return Si(hn,this,st)}return Le}function Sw(f){return function(b,O,ie){var Le=Pi(b);if(!Ul(b)){var Ve=kr(O,3);b=La(b),O=function(vt){return Ve(Le[vt],vt,Le)}}var st=f(b,O,ie);return st>-1?Le[Ve?b[st]:st]:n}}function Cw(f){return hh(function(b){var O=b.length,ie=O,Le=Gs.prototype.thru;for(f&&b.reverse();ie--;){var Ve=b[ie];if(typeof Ve!="function")throw new Ji(o);if(Le&&!st&&Zm(Ve)=="wrapper")var st=new Gs([],!0)}for(ie=st?ie:O;++ie<O;){Ve=b[ie];var vt=Zm(Ve),Dt=vt=="wrapper"?i1(Ve):n;Dt&&l1(Dt[0])&&Dt[1]==(fe|z|re|N)&&!Dt[4].length&&Dt[9]==1?st=st[Zm(Dt[0])].apply(st,Dt[3]):st=Ve.length==1&&l1(Ve)?st[vt]():st.thru(Ve)}return function(){var cn=arguments,hn=cn[0];if(st&&cn.length==1&&ri(hn))return st.plant(hn).value();for(var bn=0,Gn=O?b[bn].apply(this,cn):hn;++bn<O;)Gn=b[bn].call(this,Gn);return Gn}})}function Gm(f,b,O,ie,Le,Ve,st,vt,Dt,cn){var hn=b&fe,bn=b&k,Gn=b&A,mr=b&(z|X),Dr=b&F,fi=Gn?n:Hp(f);function Or(){for(var ki=arguments.length,Ri=Nt(ki),gu=ki;gu--;)Ri[gu]=arguments[gu];if(mr)var El=zf(Or),mu=Oa(Ri,El);if(ie&&(Ri=bw(Ri,ie,Le,mr)),Ve&&(Ri=_w(Ri,Ve,st,mr)),ki-=mu,mr&&ki<cn){var Vo=_o(Ri,El);return Mw(f,b,Gm,Or.placeholder,O,Ri,Vo,vt,Dt,cn-ki)}var ac=bn?O:this,gh=Gn?ac[f]:f;return ki=Ri.length,vt?Ri=ck(Ri,vt):Dr&&ki>1&&Ri.reverse(),hn&&Dt<ki&&(Ri.length=Dt),this&&this!==fs&&this instanceof Or&&(gh=fi||Hp(gh)),gh.apply(ac,Ri)}return Or}function Ew(f,b){return function(O,ie){return Pe(O,f,b(ie),{})}}function qm(f,b){return function(O,ie){var Le;if(O===n&&ie===n)return b;if(O!==n&&(Le=O),ie!==n){if(Le===n)return ie;typeof O=="string"||typeof ie=="string"?(O=rl(O),ie=rl(ie)):(O=Hm(O),ie=Hm(ie)),Le=f(O,ie)}return Le}}function e1(f){return hh(function(b){return b=Ci(b,Ur(kr())),li(function(O){var ie=this;return f(b,function(Le){return Si(Le,ie,O)})})})}function Ym(f,b){b=b===n?" ":rl(b);var O=b.length;if(O<2)return O?Nf(b,f):b;var ie=Nf(b,Us(f/ro(b)));return Na(b)?Iu(io(ie),0,f).join(""):ie.slice(0,f)}function WM(f,b,O,ie){var Le=b&k,Ve=Hp(f);function st(){for(var vt=-1,Dt=arguments.length,cn=-1,hn=ie.length,bn=Nt(hn+Dt),Gn=this&&this!==fs&&this instanceof st?Ve:f;++cn<hn;)bn[cn]=ie[cn];for(;Dt--;)bn[cn++]=arguments[++vt];return Si(Gn,Le?O:this,bn)}return st}function Pw(f){return function(b,O,ie){return ie&&typeof ie!="number"&&Cl(b,O,ie)&&(O=ie=n),b=ph(b),O===n?(O=b,b=0):O=ph(O),ie=ie===n?b<O?1:-1:ph(ie),Id(b,O,ie,f)}}function Km(f){return function(b,O){return typeof b=="string"&&typeof O=="string"||(b=Ru(b),O=Ru(O)),f(b,O)}}function Mw(f,b,O,ie,Le,Ve,st,vt,Dt,cn){var hn=b&z,bn=hn?st:n,Gn=hn?n:st,mr=hn?Ve:n,Dr=hn?n:Ve;b|=hn?re:ge,b&=~(hn?ge:re),b&D||(b&=-4);var fi=[f,b,Le,mr,bn,Dr,Gn,vt,Dt,cn],Or=O.apply(n,fi);return l1(f)&&zw(Or,fi),Or.placeholder=ie,$w(Or,f,b)}function t1(f){var b=Xi[f];return function(O,ie){if(O=Ru(O),ie=ie==null?0:Ce(ui(ie),292),ie&&y(O)){var Le=(is(O)+"e").split("e"),Ve=b(Le[0]+"e"+(+Le[1]+ie));return Le=(is(Ve)+"e").split("e"),+(Le[0]+"e"+(+Le[1]-ie))}return b(O)}}var GM=Es&&1/wo(new Es([,-0]))[1]==oe?function(f){return new Es(f)}:L1;function kw(f){return function(b){var O=il(b);return O==ee?zl(b):O==Qe?kc(b):Ls(b,f(b))}}function ch(f,b,O,ie,Le,Ve,st,vt){var Dt=b&A;if(!Dt&&typeof f!="function")throw new Ji(o);var cn=ie?ie.length:0;if(cn||(b&=-97,ie=Le=n),st=st===n?st:ue(ui(st),0),vt=vt===n?vt:ui(vt),cn-=Le?Le.length:0,b&ge){var hn=ie,bn=Le;ie=Le=n}var Gn=Dt?n:i1(f),mr=[f,b,O,ie,Le,hn,bn,Ve,st,vt];if(Gn&&ak(mr,Gn),f=mr[0],b=mr[1],O=mr[2],ie=mr[3],Le=mr[4],vt=mr[9]=mr[9]===n?Dt?0:f.length:ue(mr[9]-cn,0),!vt&&b&(z|X)&&(b&=-25),!b||b==k)var Dr=UM(f,b,O);else b==z||b==X?Dr=HM(f,b,vt):(b==re||b==(k|re))&&!Le.length?Dr=WM(f,b,O,ie):Dr=Gm.apply(n,mr);var fi=Gn?nc:zw;return $w(fi(Dr,mr),f,b)}function Aw(f,b,O,ie){return f===n||oc(f,Ra[O])&&!ti.call(ie,O)?b:f}function Tw(f,b,O,ie,Le,Ve){return co(f)&&co(b)&&(Ve.set(b,f),Va(f,b,n,Tw,Ve),Ve.delete(b)),f}function qM(f){return qp(f)?n:f}function Dw(f,b,O,ie,Le,Ve){var st=O&x,vt=f.length,Dt=b.length;if(vt!=Dt&&!(st&&Dt>vt))return!1;var cn=Ve.get(f),hn=Ve.get(b);if(cn&&hn)return cn==b&&hn==f;var bn=-1,Gn=!0,mr=O&E?new Z:n;for(Ve.set(f,b),Ve.set(b,f);++bn<vt;){var Dr=f[bn],fi=b[bn];if(ie)var Or=st?ie(fi,Dr,bn,b,f,Ve):ie(Dr,fi,bn,f,b,Ve);if(Or!==n){if(Or)continue;Gn=!1;break}if(mr){if(!j(b,function(ki,Ri){if(!jl(mr,Ri)&&(Dr===ki||Le(Dr,ki,O,ie,Ve)))return mr.push(Ri)})){Gn=!1;break}}else if(!(Dr===fi||Le(Dr,fi,O,ie,Ve))){Gn=!1;break}}return Ve.delete(f),Ve.delete(b),Gn}function YM(f,b,O,ie,Le,Ve,st){switch(O){case yn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case tn:return!(f.byteLength!=b.byteLength||!Ve(new aa(f),new aa(b)));case le:case Q:case se:return oc(+f,+b);case De:return f.name==b.name&&f.message==b.message;case Ge:case Ke:return f==b+"";case ee:var vt=zl;case Qe:var Dt=ie&x;if(vt||(vt=wo),f.size!=b.size&&!Dt)return!1;var cn=st.get(f);if(cn)return cn==b;ie|=E,st.set(f,b);var hn=Dw(vt(f),vt(b),ie,Le,Ve,st);return st.delete(f),hn;case xt:if(_i)return _i.call(f)==_i.call(b)}return!1}function KM(f,b,O,ie,Le,Ve){var st=O&x,vt=n1(f),Dt=vt.length,cn=n1(b),hn=cn.length;if(Dt!=hn&&!st)return!1;for(var bn=Dt;bn--;){var Gn=vt[bn];if(!(st?Gn in b:ti.call(b,Gn)))return!1}var mr=Ve.get(f),Dr=Ve.get(b);if(mr&&Dr)return mr==b&&Dr==f;var fi=!0;Ve.set(f,b),Ve.set(b,f);for(var Or=st;++bn<Dt;){Gn=vt[bn];var ki=f[Gn],Ri=b[Gn];if(ie)var gu=st?ie(Ri,ki,Gn,b,f,Ve):ie(ki,Ri,Gn,f,b,Ve);if(!(gu===n?ki===Ri||Le(ki,Ri,O,ie,Ve):gu)){fi=!1;break}Or||(Or=Gn=="constructor")}if(fi&&!Or){var El=f.constructor,mu=b.constructor;El!=mu&&"constructor"in f&&"constructor"in b&&!(typeof El=="function"&&El instanceof El&&typeof mu=="function"&&mu instanceof mu)&&(fi=!1)}return Ve.delete(f),Ve.delete(b),fi}function hh(f){return c1(Fw(f,n,qw),f+"")}function n1(f){return tt(f,La,o1)}function r1(f){return tt(f,Hl,Ow)}var i1=Qi?function(f){return Qi.get(f)}:L1;function Zm(f){for(var b=f.name+"",O=Fo[b],ie=ti.call(Fo,b)?O.length:0;ie--;){var Le=O[ie],Ve=Le.func;if(Ve==null||Ve==f)return Le.name}return b}function zf(f){var b=ti.call(Oe,"placeholder")?Oe:f;return b.placeholder}function kr(){var f=Oe.iteratee||w1;return f=f===w1?ar:f,arguments.length?f(arguments[0],arguments[1]):f}function Xm(f,b){var O=f.__data__;return rk(b)?O[typeof b=="string"?"string":"hash"]:O.map}function s1(f){for(var b=La(f),O=b.length;O--;){var ie=b[O],Le=f[ie];b[O]=[ie,Le,Bw(Le)]}return b}function Rd(f,b){var O=Ss(f,b);return Tt(O)?O:n}function ZM(f){var b=ti.call(f,el),O=f[el];try{f[el]=n;var ie=!0}catch{}var Le=Mi.call(f);return ie&&(b?f[el]=O:delete f[el]),Le}var o1=wa?function(f){return f==null?[]:(f=Pi(f),ya(wa(f),function(b){return $i.call(f,b)}))}:S1,Ow=wa?function(f){for(var b=[];f;)Jo(b,o1(f)),f=za(f);return b}:S1,il=it;(Fn&&il(new Fn(new ArrayBuffer(1)))!=yn||sr&&il(new sr)!=ee||$r&&il($r.resolve())!=$e||Es&&il(new Es)!=Qe||os&&il(new os)!=yt)&&(il=function(f){var b=it(f),O=b==ze?f.constructor:n,ie=O?Fd(O):"";if(ie)switch(ie){case sh:return yn;case $a:return ee;case xa:return $e;case la:return Qe;case Ad:return yt}return b});function XM(f,b,O){for(var ie=-1,Le=O.length;++ie<Le;){var Ve=O[ie],st=Ve.size;switch(Ve.type){case"drop":f+=st;break;case"dropRight":b-=st;break;case"take":b=Ce(b,f+st);break;case"takeRight":f=ue(f,b-st);break}}return{start:f,end:b}}function JM(f){var b=f.match(Ln);return b?b[1].split($n):[]}function Nw(f,b,O){b=sc(b,f);for(var ie=-1,Le=b.length,Ve=!1;++ie<Le;){var st=Nc(b[ie]);if(!(Ve=f!=null&&O(f,st)))break;f=f[st]}return Ve||++ie!=Le?Ve:(Le=f==null?0:f.length,!!Le&&i0(Le)&&dh(st,Le)&&(ri(f)||jd(f)))}function QM(f){var b=f.length,O=new f.constructor(b);return b&&typeof f[0]=="string"&&ti.call(f,"index")&&(O.index=f.index,O.input=f.input),O}function Iw(f){return typeof f.constructor=="function"&&!Wp(f)?jo(za(f)):{}}function ek(f,b,O){var ie=f.constructor;switch(b){case tn:return Qy(f);case le:case Q:return new ie(+f);case yn:return RM(f,O);case Ze:case ot:case rt:case $t:case Zt:case Dn:case mn:case An:case Jn:return vw(f,O);case ee:return new ie;case se:case Ke:return new ie(f);case Ge:return FM(f);case Qe:return new ie;case xt:return jM(f)}}function tk(f,b){var O=b.length;if(!O)return f;var ie=O-1;return b[ie]=(O>1?"& ":"")+b[ie],b=b.join(O>2?", ":" "),f.replace(ct,`{
/* [wrapped with `+b+`] */
`)}function nk(f){return ri(f)||jd(f)||!!(Ro&&f&&f[Ro])}function dh(f,b){var O=typeof f;return b=b??J,!!b&&(O=="number"||O!="symbol"&&rn.test(f))&&f>-1&&f%1==0&&f<b}function Cl(f,b,O){if(!co(O))return!1;var ie=typeof b;return(ie=="number"?Ul(O)&&dh(b,O.length):ie=="string"&&b in O)?oc(O[b],f):!1}function a1(f,b){if(ri(f))return!1;var O=typeof f;return O=="number"||O=="symbol"||O=="boolean"||f==null||pu(f)?!0:Ts.test(f)||!Oo.test(f)||b!=null&&f in Pi(b)}function rk(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function l1(f){var b=Zm(f),O=Oe[b];if(typeof O!="function"||!(b in Hr.prototype))return!1;if(f===O)return!0;var ie=i1(O);return!!ie&&f===ie[0]}function ik(f){return!!Vs&&Vs in f}var sk=Fa?fh:C1;function Wp(f){var b=f&&f.constructor,O=typeof b=="function"&&b.prototype||Ra;return f===O}function Bw(f){return f===f&&!co(f)}function Rw(f,b){return function(O){return O==null?!1:O[f]===b&&(b!==n||f in Pi(O))}}function ok(f){var b=n0(f,function(ie){return O.size===c&&O.clear(),ie}),O=b.cache;return b}function ak(f,b){var O=f[1],ie=b[1],Le=O|ie,Ve=Le<(k|A|fe),st=ie==fe&&O==z||ie==fe&&O==N&&f[7].length<=b[8]||ie==(fe|N)&&b[7].length<=b[8]&&O==z;if(!(Ve||st))return f;ie&k&&(f[2]=b[2],Le|=O&k?0:D);var vt=b[3];if(vt){var Dt=f[3];f[3]=Dt?bw(Dt,vt,b[4]):vt,f[4]=Dt?_o(f[3],d):b[4]}return vt=b[5],vt&&(Dt=f[5],f[5]=Dt?_w(Dt,vt,b[6]):vt,f[6]=Dt?_o(f[5],d):b[6]),vt=b[7],vt&&(f[7]=vt),ie&fe&&(f[8]=f[8]==null?b[8]:Ce(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Le,f}function lk(f){var b=[];if(f!=null)for(var O in Pi(f))b.push(O);return b}function uk(f){return Mi.call(f)}function Fw(f,b,O){return b=ue(b===n?f.length-1:b,0),function(){for(var ie=arguments,Le=-1,Ve=ue(ie.length-b,0),st=Nt(Ve);++Le<Ve;)st[Le]=ie[b+Le];Le=-1;for(var vt=Nt(b+1);++Le<b;)vt[Le]=ie[Le];return vt[b]=O(st),Si(f,this,vt)}}function jw(f,b){return b.length<2?f:br(f,$l(b,0,-1))}function ck(f,b){for(var O=f.length,ie=Ce(b.length,O),Le=Vl(f);ie--;){var Ve=b[ie];f[ie]=dh(Ve,O)?Le[Ve]:n}return f}function u1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var zw=Vw(nc),Gp=ih||function(f,b){return fs.setTimeout(f,b)},c1=Vw($m);function $w(f,b,O){var ie=b+"";return c1(f,tk(ie,hk(JM(ie),O)))}function Vw(f){var b=0,O=0;return function(){var ie=lt(),Le=R-(ie-O);if(O=ie,Le>0){if(++b>=I)return arguments[0]}else b=0;return f.apply(n,arguments)}}function Jm(f,b){var O=-1,ie=f.length,Le=ie-1;for(b=b===n?ie:b;++O<b;){var Ve=Nd(O,Le),st=f[Ve];f[Ve]=f[O],f[O]=st}return f.length=b,f}var Uw=ok(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(nr,function(O,ie,Le,Ve){b.push(Le?Ve.replace(Un,"$1"):ie||O)}),b});function Nc(f){if(typeof f=="string"||pu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Fd(f){if(f!=null){try{return ja.call(f)}catch{}try{return f+""}catch{}}return""}function hk(f,b){return zs(K,function(O){var ie="_."+O[0];b&O[1]&&!Rl(f,ie)&&f.push(ie)}),f.sort()}function Hw(f){if(f instanceof Hr)return f.clone();var b=new Gs(f.__wrapped__,f.__chain__);return b.__actions__=Vl(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function dk(f,b,O){(O?Cl(f,b,O):b===n)?b=1:b=ue(ui(b),0);var ie=f==null?0:f.length;if(!ie||b<1)return[];for(var Le=0,Ve=0,st=Nt(Us(ie/b));Le<ie;)st[Ve++]=$l(f,Le,Le+=b);return st}function fk(f){for(var b=-1,O=f==null?0:f.length,ie=0,Le=[];++b<O;){var Ve=f[b];Ve&&(Le[ie++]=Ve)}return Le}function pk(){var f=arguments.length;if(!f)return[];for(var b=Nt(f-1),O=arguments[0],ie=f;ie--;)b[ie-1]=arguments[ie];return Jo(ri(O)?Vl(O):[O],We(b,1))}var gk=li(function(f,b){return $o(f)?M(f,We(b,1,$o,!0)):[]}),mk=li(function(f,b){var O=Bu(b);return $o(O)&&(O=n),$o(f)?M(f,We(b,1,$o,!0),kr(O,2)):[]}),vk=li(function(f,b){var O=Bu(b);return $o(O)&&(O=n),$o(f)?M(f,We(b,1,$o,!0),n,O):[]});function yk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:ui(b),$l(f,b<0?0:b,ie)):[]}function bk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:ui(b),b=ie-b,$l(f,0,b<0?0:b)):[]}function _k(f,b){return f&&f.length?uh(f,kr(b,3),!0,!0):[]}function wk(f,b){return f&&f.length?uh(f,kr(b,3),!0):[]}function xk(f,b,O,ie){var Le=f==null?0:f.length;return Le?(O&&typeof O!="number"&&Cl(f,b,O)&&(O=0,ie=Le),Se(f,b,O,ie)):[]}function Ww(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Le=O==null?0:ui(O);return Le<0&&(Le=ue(ie+Le,0)),Ut(f,kr(b,3),Le)}function Gw(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Le=ie-1;return O!==n&&(Le=ui(O),Le=O<0?ue(ie+Le,0):Ce(Le,ie-1)),Ut(f,kr(b,3),Le,!0)}function qw(f){var b=f==null?0:f.length;return b?We(f,1):[]}function Lk(f){var b=f==null?0:f.length;return b?We(f,oe):[]}function Sk(f,b){var O=f==null?0:f.length;return O?(b=b===n?1:ui(b),We(f,b)):[]}function Ck(f){for(var b=-1,O=f==null?0:f.length,ie={};++b<O;){var Le=f[b];ie[Le[0]]=Le[1]}return ie}function Yw(f){return f&&f.length?f[0]:n}function Ek(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Le=O==null?0:ui(O);return Le<0&&(Le=ue(ie+Le,0)),dn(f,b,Le)}function Pk(f){var b=f==null?0:f.length;return b?$l(f,0,-1):[]}var Mk=li(function(f){var b=Ci(f,Wh);return b.length&&b[0]===f[0]?be(b):[]}),kk=li(function(f){var b=Bu(f),O=Ci(f,Wh);return b===Bu(O)?b=n:O.pop(),O.length&&O[0]===f[0]?be(O,kr(b,2)):[]}),Ak=li(function(f){var b=Bu(f),O=Ci(f,Wh);return b=typeof b=="function"?b:n,b&&O.pop(),O.length&&O[0]===f[0]?be(O,n,b):[]});function Tk(f,b){return f==null?"":P.call(f,b)}function Bu(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Dk(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Le=ie;return O!==n&&(Le=ui(O),Le=Le<0?ue(ie+Le,0):Ce(Le,ie-1)),b===b?Za(f,b,Le):Ut(f,Hn,Le,!0)}function Ok(f,b){return f&&f.length?Sl(f,ui(b)):n}var Nk=li(Kw);function Kw(f,b){return f&&f.length&&b&&b.length?Of(f,b):f}function Ik(f,b,O){return f&&f.length&&b&&b.length?Of(f,b,kr(O,2)):f}function Bk(f,b,O){return f&&f.length&&b&&b.length?Of(f,b,n,O):f}var Rk=hh(function(f,b){var O=f==null?0:f.length,ie=On(f,b);return Od(f,Ci(b,function(Le){return dh(Le,O)?+Le:Le}).sort(yw)),ie});function Fk(f,b){var O=[];if(!(f&&f.length))return O;var ie=-1,Le=[],Ve=f.length;for(b=kr(b,3);++ie<Ve;){var st=f[ie];b(st,ie,f)&&(O.push(st),Le.push(ie))}return Od(f,Le),O}function h1(f){return f==null?f:un.call(f)}function jk(f,b,O){var ie=f==null?0:f.length;return ie?(O&&typeof O!="number"&&Cl(f,b,O)?(b=0,O=ie):(b=b==null?0:ui(b),O=O===n?ie:ui(O)),$l(f,b,O)):[]}function zk(f,b){return rc(f,b)}function $k(f,b,O){return Vp(f,b,kr(O,2))}function Vk(f,b){var O=f==null?0:f.length;if(O){var ie=rc(f,b);if(ie<O&&oc(f[ie],b))return ie}return-1}function Uk(f,b){return rc(f,b,!0)}function Hk(f,b,O){return Vp(f,b,kr(O,2),!0)}function Wk(f,b){var O=f==null?0:f.length;if(O){var ie=rc(f,b,!0)-1;if(oc(f[ie],b))return ie}return-1}function Gk(f){return f&&f.length?Up(f):[]}function qk(f,b){return f&&f.length?Up(f,kr(b,2)):[]}function Yk(f){var b=f==null?0:f.length;return b?$l(f,1,b):[]}function Kk(f,b,O){return f&&f.length?(b=O||b===n?1:ui(b),$l(f,0,b<0?0:b)):[]}function Zk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:ui(b),b=ie-b,$l(f,b<0?0:b,ie)):[]}function Xk(f,b){return f&&f.length?uh(f,kr(b,3),!1,!0):[]}function Jk(f,b){return f&&f.length?uh(f,kr(b,3)):[]}var Qk=li(function(f){return Dc(We(f,1,$o,!0))}),eA=li(function(f){var b=Bu(f);return $o(b)&&(b=n),Dc(We(f,1,$o,!0),kr(b,2))}),tA=li(function(f){var b=Bu(f);return b=typeof b=="function"?b:n,Dc(We(f,1,$o,!0),n,b)});function nA(f){return f&&f.length?Dc(f):[]}function rA(f,b){return f&&f.length?Dc(f,kr(b,2)):[]}function iA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Dc(f,n,b):[]}function d1(f){if(!(f&&f.length))return[];var b=0;return f=ya(f,function(O){if($o(O))return b=ue(O.length,b),!0}),ms(b,function(O){return Ci(f,Er(O))})}function Zw(f,b){if(!(f&&f.length))return[];var O=d1(f);return b==null?O:Ci(O,function(ie){return Si(b,n,ie)})}var sA=li(function(f,b){return $o(f)?M(f,b):[]}),oA=li(function(f){return Nu(ya(f,$o))}),aA=li(function(f){var b=Bu(f);return $o(b)&&(b=n),Nu(ya(f,$o),kr(b,2))}),lA=li(function(f){var b=Bu(f);return b=typeof b=="function"?b:n,Nu(ya(f,$o),n,b)}),uA=li(d1);function cA(f,b){return ic(f||[],b||[],gt)}function hA(f,b){return ic(f||[],b||[],ah)}var dA=li(function(f){var b=f.length,O=b>1?f[b-1]:n;return O=typeof O=="function"?(f.pop(),O):n,Zw(f,O)});function Xw(f){var b=Oe(f);return b.__chain__=!0,b}function fA(f,b){return b(f),f}function Qm(f,b){return b(f)}var pA=hh(function(f){var b=f.length,O=b?f[0]:0,ie=this.__wrapped__,Le=function(Ve){return On(Ve,f)};return b>1||this.__actions__.length||!(ie instanceof Hr)||!dh(O)?this.thru(Le):(ie=ie.slice(O,+O+(b?1:0)),ie.__actions__.push({func:Qm,args:[Le],thisArg:n}),new Gs(ie,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function gA(){return Xw(this)}function mA(){return new Gs(this.value(),this.__chain__)}function vA(){this.__values__===n&&(this.__values__=hx(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function yA(){return this}function bA(f){for(var b,O=this;O instanceof ec;){var ie=Hw(O);ie.__index__=0,ie.__values__=n,b?Le.__wrapped__=ie:b=ie;var Le=ie;O=O.__wrapped__}return Le.__wrapped__=f,b}function _A(){var f=this.__wrapped__;if(f instanceof Hr){var b=f;return this.__actions__.length&&(b=new Hr(this)),b=b.reverse(),b.__actions__.push({func:Qm,args:[h1],thisArg:n}),new Gs(b,this.__chain__)}return this.thru(h1)}function wA(){return Ou(this.__wrapped__,this.__actions__)}var xA=Wm(function(f,b,O){ti.call(f,O)?++f[O]:Bn(f,O,1)});function LA(f,b,O){var ie=ri(f)?hu:ae;return O&&Cl(f,b,O)&&(b=n),ie(f,kr(b,3))}function SA(f,b){var O=ri(f)?ya:nt;return O(f,kr(b,3))}var CA=Sw(Ww),EA=Sw(Gw);function PA(f,b){return We(e0(f,b),1)}function MA(f,b){return We(e0(f,b),oe)}function kA(f,b,O){return O=O===n?1:ui(O),We(e0(f,b),O)}function Jw(f,b){var O=ri(f)?zs:H;return O(f,kr(b,3))}function Qw(f,b){var O=ri(f)?va:ne;return O(f,kr(b,3))}var AA=Wm(function(f,b,O){ti.call(f,O)?f[O].push(b):Bn(f,O,[b])});function TA(f,b,O,ie){f=Ul(f)?f:Vf(f),O=O&&!ie?ui(O):0;var Le=f.length;return O<0&&(O=ue(Le+O,0)),s0(f)?O<=Le&&f.indexOf(b,O)>-1:!!Le&&dn(f,b,O)>-1}var DA=li(function(f,b,O){var ie=-1,Le=typeof b=="function",Ve=Ul(f)?Nt(f.length):[];return H(f,function(st){Ve[++ie]=Le?Si(b,st,O):je(st,b,O)}),Ve}),OA=Wm(function(f,b,O){Bn(f,O,b)});function e0(f,b){var O=ri(f)?Ci:Hi;return O(f,kr(b,3))}function NA(f,b,O,ie){return f==null?[]:(ri(b)||(b=b==null?[]:[b]),O=ie?n:O,ri(O)||(O=O==null?[]:[O]),Tc(f,b,O))}var IA=Wm(function(f,b,O){f[O?0:1].push(b)},function(){return[[],[]]});function BA(f,b,O){var ie=ri(f)?Ka:qi,Le=arguments.length<3;return ie(f,kr(b,4),O,Le,H)}function RA(f,b,O){var ie=ri(f)?gs:qi,Le=arguments.length<3;return ie(f,kr(b,4),O,Le,ne)}function FA(f,b){var O=ri(f)?ya:nt;return O(f,r0(kr(b,3)))}function jA(f){var b=ri(f)?Ft:If;return b(f)}function zA(f,b,O){(O?Cl(f,b,O):b===n)?b=1:b=ui(b);var ie=ri(f)?Mt:zm;return ie(f,b)}function $A(f){var b=ri(f)?Kt:Vm;return b(f)}function VA(f){if(f==null)return 0;if(Ul(f))return s0(f)?ro(f):f.length;var b=il(f);return b==ee||b==Qe?f.size:wi(f).length}function UA(f,b,O){var ie=ri(f)?j:Um;return O&&Cl(f,b,O)&&(b=n),ie(f,kr(b,3))}var HA=li(function(f,b){if(f==null)return[];var O=b.length;return O>1&&Cl(f,b[0],b[1])?b=[]:O>2&&Cl(b[0],b[1],b[2])&&(b=[b[0]]),Tc(f,We(b,1),[])}),t0=Lo||function(){return fs.Date.now()};function WA(f,b){if(typeof b!="function")throw new Ji(o);return f=ui(f),function(){if(--f<1)return b.apply(this,arguments)}}function ex(f,b,O){return b=O?n:b,b=f&&b==null?f.length:b,ch(f,fe,n,n,n,n,b)}function tx(f,b){var O;if(typeof b!="function")throw new Ji(o);return f=ui(f),function(){return--f>0&&(O=b.apply(this,arguments)),f<=1&&(b=n),O}}var f1=li(function(f,b,O){var ie=k;if(O.length){var Le=_o(O,zf(f1));ie|=re}return ch(f,ie,b,O,Le)}),nx=li(function(f,b,O){var ie=k|A;if(O.length){var Le=_o(O,zf(nx));ie|=re}return ch(b,ie,f,O,Le)});function rx(f,b,O){b=O?n:b;var ie=ch(f,z,n,n,n,n,n,b);return ie.placeholder=rx.placeholder,ie}function ix(f,b,O){b=O?n:b;var ie=ch(f,X,n,n,n,n,n,b);return ie.placeholder=ix.placeholder,ie}function sx(f,b,O){var ie,Le,Ve,st,vt,Dt,cn=0,hn=!1,bn=!1,Gn=!0;if(typeof f!="function")throw new Ji(o);b=Ru(b)||0,co(O)&&(hn=!!O.leading,bn="maxWait"in O,Ve=bn?ue(Ru(O.maxWait)||0,b):Ve,Gn="trailing"in O?!!O.trailing:Gn);function mr(Vo){var ac=ie,gh=Le;return ie=Le=n,cn=Vo,st=f.apply(gh,ac),st}function Dr(Vo){return cn=Vo,vt=Gp(ki,b),hn?mr(Vo):st}function fi(Vo){var ac=Vo-Dt,gh=Vo-cn,Sx=b-ac;return bn?Ce(Sx,Ve-gh):Sx}function Or(Vo){var ac=Vo-Dt,gh=Vo-cn;return Dt===n||ac>=b||ac<0||bn&&gh>=Ve}function ki(){var Vo=t0();if(Or(Vo))return Ri(Vo);vt=Gp(ki,fi(Vo))}function Ri(Vo){return vt=n,Gn&&ie?mr(Vo):(ie=Le=n,st)}function gu(){vt!==n&&Rf(vt),cn=0,ie=Dt=Le=vt=n}function El(){return vt===n?st:Ri(t0())}function mu(){var Vo=t0(),ac=Or(Vo);if(ie=arguments,Le=this,Dt=Vo,ac){if(vt===n)return Dr(Dt);if(bn)return Rf(vt),vt=Gp(ki,b),mr(Dt)}return vt===n&&(vt=Gp(ki,b)),st}return mu.cancel=gu,mu.flush=El,mu}var GA=li(function(f,b){return S(f,1,b)}),qA=li(function(f,b,O){return S(f,Ru(b)||0,O)});function YA(f){return ch(f,F)}function n0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Ji(o);var O=function(){var ie=arguments,Le=b?b.apply(this,ie):ie[0],Ve=O.cache;if(Ve.has(Le))return Ve.get(Le);var st=f.apply(this,ie);return O.cache=Ve.set(Le,st)||Ve,st};return O.cache=new(n0.Cache||nl),O}n0.Cache=nl;function r0(f){if(typeof f!="function")throw new Ji(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function KA(f){return tx(2,f)}var ZA=Jy(function(f,b){b=b.length==1&&ri(b[0])?Ci(b[0],Ur(kr())):Ci(We(b,1),Ur(kr()));var O=b.length;return li(function(ie){for(var Le=-1,Ve=Ce(ie.length,O);++Le<Ve;)ie[Le]=b[Le].call(this,ie[Le]);return Si(f,this,ie)})}),p1=li(function(f,b){var O=_o(b,zf(p1));return ch(f,re,n,b,O)}),ox=li(function(f,b){var O=_o(b,zf(ox));return ch(f,ge,n,b,O)}),XA=hh(function(f,b){return ch(f,N,n,n,n,b)});function JA(f,b){if(typeof f!="function")throw new Ji(o);return b=b===n?b:ui(b),li(f,b)}function QA(f,b){if(typeof f!="function")throw new Ji(o);return b=b==null?0:ue(ui(b),0),li(function(O){var ie=O[b],Le=Iu(O,0,b);return ie&&Jo(Le,ie),Si(f,this,Le)})}function e6(f,b,O){var ie=!0,Le=!0;if(typeof f!="function")throw new Ji(o);return co(O)&&(ie="leading"in O?!!O.leading:ie,Le="trailing"in O?!!O.trailing:Le),sx(f,b,{leading:ie,maxWait:b,trailing:Le})}function t6(f){return ex(f,1)}function n6(f,b){return p1(Bd(b),f)}function r6(){if(!arguments.length)return[];var f=arguments[0];return ri(f)?f:[f]}function i6(f){return h(f,g)}function s6(f,b){return b=typeof b=="function"?b:n,h(f,g,b)}function o6(f){return h(f,p|g)}function a6(f,b){return b=typeof b=="function"?b:n,h(f,p|g,b)}function l6(f,b){return b==null||_(f,b,La(b))}function oc(f,b){return f===b||f!==f&&b!==b}var u6=Km(ft),c6=Km(function(f,b){return f>=b}),jd=Fe(function(){return arguments}())?Fe:function(f){return So(f)&&ti.call(f,"callee")&&!$i.call(f,"callee")},ri=Nt.isArray,h6=Au?Ur(Au):Ue;function Ul(f){return f!=null&&i0(f.length)&&!fh(f)}function $o(f){return So(f)&&Ul(f)}function d6(f){return f===!0||f===!1||So(f)&&it(f)==le}var Gh=u||C1,f6=Da?Ur(Da):He;function p6(f){return So(f)&&f.nodeType===1&&!qp(f)}function g6(f){if(f==null)return!0;if(Ul(f)&&(ri(f)||typeof f=="string"||typeof f.splice=="function"||Gh(f)||$f(f)||jd(f)))return!f.length;var b=il(f);if(b==ee||b==Qe)return!f.size;if(Wp(f))return!wi(f).length;for(var O in f)if(ti.call(f,O))return!1;return!0}function m6(f,b){return ut(f,b)}function v6(f,b,O){O=typeof O=="function"?O:n;var ie=O?O(f,b):n;return ie===n?ut(f,b,n,O):!!ie}function g1(f){if(!So(f))return!1;var b=it(f);return b==De||b==Be||typeof f.message=="string"&&typeof f.name=="string"&&!qp(f)}function y6(f){return typeof f=="number"&&y(f)}function fh(f){if(!co(f))return!1;var b=it(f);return b==Je||b==me||b==te||b==et}function ax(f){return typeof f=="number"&&f==ui(f)}function i0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=J}function co(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function So(f){return f!=null&&typeof f=="object"}var lx=lu?Ur(lu):mt;function b6(f,b){return f===b||At(f,b,s1(b))}function _6(f,b,O){return O=typeof O=="function"?O:n,At(f,b,s1(b),O)}function w6(f){return ux(f)&&f!=+f}function x6(f){if(sk(f))throw new rr(s);return Tt(f)}function L6(f){return f===null}function S6(f){return f==null}function ux(f){return typeof f=="number"||So(f)&&it(f)==se}function qp(f){if(!So(f)||it(f)!=ze)return!1;var b=za(f);if(b===null)return!0;var O=ti.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&ja.call(O)==Ii}var m1=uu?Ur(uu):ln;function C6(f){return ax(f)&&f>=-9007199254740991&&f<=J}var cx=oa?Ur(oa):Wn;function s0(f){return typeof f=="string"||!ri(f)&&So(f)&&it(f)==Ke}function pu(f){return typeof f=="symbol"||So(f)&&it(f)==xt}var $f=cu?Ur(cu):Kn;function E6(f){return f===n}function P6(f){return So(f)&&il(f)==yt}function M6(f){return So(f)&&it(f)==Wt}var k6=Km(ni),A6=Km(function(f,b){return f<=b});function hx(f){if(!f)return[];if(Ul(f))return s0(f)?io(f):Vl(f);if(wr&&f[wr])return Io(f[wr]());var b=il(f),O=b==ee?zl:b==Qe?wo:Vf;return O(f)}function ph(f){if(!f)return f===0?f:0;if(f=Ru(f),f===oe||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function ui(f){var b=ph(f),O=b%1;return b===b?O?b-O:b:0}function dx(f){return f?or(ui(f),0,ke):0}function Ru(f){if(typeof f=="number")return f;if(pu(f))return ve;if(co(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=co(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Qo(f);var O=hr.test(f);return O||pn.test(f)?au(f.slice(2),O?2:8):Vn.test(f)?ve:+f}function fx(f){return Oc(f,Hl(f))}function T6(f){return f?or(ui(f),-9007199254740991,J):f===0?f:0}function is(f){return f==null?"":rl(f)}var D6=Ff(function(f,b){if(Wp(b)||Ul(b)){Oc(b,La(b),f);return}for(var O in b)ti.call(b,O)&&gt(f,O,b[O])}),px=Ff(function(f,b){Oc(b,Hl(b),f)}),o0=Ff(function(f,b,O,ie){Oc(b,Hl(b),f,ie)}),O6=Ff(function(f,b,O,ie){Oc(b,La(b),f,ie)}),N6=hh(On);function I6(f,b){var O=jo(f);return b==null?O:fn(O,b)}var B6=li(function(f,b){f=Pi(f);var O=-1,ie=b.length,Le=ie>2?b[2]:n;for(Le&&Cl(b[0],b[1],Le)&&(ie=1);++O<ie;)for(var Ve=b[O],st=Hl(Ve),vt=-1,Dt=st.length;++vt<Dt;){var cn=st[vt],hn=f[cn];(hn===n||oc(hn,Ra[cn])&&!ti.call(f,cn))&&(f[cn]=Ve[cn])}return f}),R6=li(function(f){return f.push(n,Tw),Si(gx,n,f)});function F6(f,b){return kt(f,kr(b,3),en)}function j6(f,b){return kt(f,kr(b,3),_n)}function z6(f,b){return f==null?f:_t(f,kr(b,3),Hl)}function $6(f,b){return f==null?f:It(f,kr(b,3),Hl)}function V6(f,b){return f&&en(f,kr(b,3))}function U6(f,b){return f&&_n(f,kr(b,3))}function H6(f){return f==null?[]:Pn(f,La(f))}function W6(f){return f==null?[]:Pn(f,Hl(f))}function v1(f,b,O){var ie=f==null?n:br(f,b);return ie===n?O:ie}function G6(f,b){return f!=null&&Nw(f,b,zt)}function y1(f,b){return f!=null&&Nw(f,b,Pt)}var q6=Ew(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Mi.call(b)),f[b]=O},_1(Wl)),Y6=Ew(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Mi.call(b)),ti.call(f,b)?f[b].push(O):f[b]=[O]},kr),K6=li(je);function La(f){return Ul(f)?Rt(f):wi(f)}function Hl(f){return Ul(f)?Rt(f,!0):Bi(f)}function Z6(f,b){var O={};return b=kr(b,3),en(f,function(ie,Le,Ve){Bn(O,b(ie,Le,Ve),ie)}),O}function X6(f,b){var O={};return b=kr(b,3),en(f,function(ie,Le,Ve){Bn(O,Le,b(ie,Le,Ve))}),O}var J6=Ff(function(f,b,O){Va(f,b,O)}),gx=Ff(function(f,b,O,ie){Va(f,b,O,ie)}),Q6=hh(function(f,b){var O={};if(f==null)return O;var ie=!1;b=Ci(b,function(Ve){return Ve=sc(Ve,f),ie||(ie=Ve.length>1),Ve}),Oc(f,r1(f),O),ie&&(O=h(O,p|v|g,qM));for(var Le=b.length;Le--;)lh(O,b[Le]);return O});function eT(f,b){return mx(f,r0(kr(b)))}var tT=hh(function(f,b){return f==null?{}:Ua(f,b)});function mx(f,b){if(f==null)return{};var O=Ci(r1(f),function(ie){return[ie]});return b=kr(b),uo(f,O,function(ie,Le){return b(ie,Le[0])})}function nT(f,b,O){b=sc(b,f);var ie=-1,Le=b.length;for(Le||(Le=1,f=n);++ie<Le;){var Ve=f==null?n:f[Nc(b[ie])];Ve===n&&(ie=Le,Ve=O),f=fh(Ve)?Ve.call(f):Ve}return f}function rT(f,b,O){return f==null?f:ah(f,b,O)}function iT(f,b,O,ie){return ie=typeof ie=="function"?ie:n,f==null?f:ah(f,b,O,ie)}var vx=kw(La),yx=kw(Hl);function sT(f,b,O){var ie=ri(f),Le=ie||Gh(f)||$f(f);if(b=kr(b,4),O==null){var Ve=f&&f.constructor;Le?O=ie?new Ve:[]:co(f)?O=fh(Ve)?jo(za(f)):{}:O={}}return(Le?zs:en)(f,function(st,vt,Dt){return b(O,st,vt,Dt)}),O}function oT(f,b){return f==null?!0:lh(f,b)}function aT(f,b,O){return f==null?f:Bf(f,b,Bd(O))}function lT(f,b,O,ie){return ie=typeof ie=="function"?ie:n,f==null?f:Bf(f,b,Bd(O),ie)}function Vf(f){return f==null?[]:to(f,La(f))}function uT(f){return f==null?[]:to(f,Hl(f))}function cT(f,b,O){return O===n&&(O=b,b=n),O!==n&&(O=Ru(O),O=O===O?O:0),b!==n&&(b=Ru(b),b=b===b?b:0),or(Ru(f),b,O)}function hT(f,b,O){return b=ph(b),O===n?(O=b,b=0):O=ph(O),f=Ru(f),Bt(f,b,O)}function dT(f,b,O){if(O&&typeof O!="boolean"&&Cl(f,b,O)&&(b=O=n),O===n&&(typeof b=="boolean"?(O=b,b=n):typeof f=="boolean"&&(O=f,f=n)),f===n&&b===n?(f=0,b=1):(f=ph(f),b===n?(b=f,f=0):b=ph(b)),f>b){var ie=f;f=b,b=ie}if(O||f%1||b%1){var Le=Ht();return Ce(f+Le*(b-f+Il("1e-"+((Le+"").length-1))),b)}return Nd(f,b)}var fT=jf(function(f,b,O){return b=b.toLowerCase(),f+(O?bx(b):b)});function bx(f){return b1(is(f).toLowerCase())}function _x(f){return f=is(f),f&&f.replace(zr,Ju).replace(Zo,"")}function pT(f,b,O){f=is(f),b=rl(b);var ie=f.length;O=O===n?ie:or(ui(O),0,ie);var Le=O;return O-=b.length,O>=0&&f.slice(O,Le)==b}function gT(f){return f=is(f),f&&ur.test(f)?f.replace(vr,wl):f}function mT(f){return f=is(f),f&&No.test(f)?f.replace(Ds,"\\$&"):f}var vT=jf(function(f,b,O){return f+(O?"-":"")+b.toLowerCase()}),yT=jf(function(f,b,O){return f+(O?" ":"")+b.toLowerCase()}),bT=Lw("toLowerCase");function _T(f,b,O){f=is(f),b=ui(b);var ie=b?ro(f):0;if(!b||ie>=b)return f;var Le=(b-ie)/2;return Ym(Hs(Le),O)+f+Ym(Us(Le),O)}function wT(f,b,O){f=is(f),b=ui(b);var ie=b?ro(f):0;return b&&ie<b?f+Ym(b-ie,O):f}function xT(f,b,O){f=is(f),b=ui(b);var ie=b?ro(f):0;return b&&ie<b?Ym(b-ie,O)+f:f}function LT(f,b,O){return O||b==null?b=0:b&&(b=+b),Ot(is(f).replace(at,""),b||0)}function ST(f,b,O){return(O?Cl(f,b,O):b===n)?b=1:b=ui(b),Nf(is(f),b)}function CT(){var f=arguments,b=is(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var ET=jf(function(f,b,O){return f+(O?"_":"")+b.toLowerCase()});function PT(f,b,O){return O&&typeof O!="number"&&Cl(f,b,O)&&(b=O=n),O=O===n?ke:O>>>0,O?(f=is(f),f&&(typeof b=="string"||b!=null&&!m1(b))&&(b=rl(b),!b&&Na(f))?Iu(io(f),0,O):f.split(b,O)):[]}var MT=jf(function(f,b,O){return f+(O?" ":"")+b1(b)});function kT(f,b,O){return f=is(f),O=O==null?0:or(ui(O),0,f.length),b=rl(b),f.slice(O,O+b.length)==b}function AT(f,b,O){var ie=Oe.templateSettings;O&&Cl(f,b,O)&&(b=n),f=is(f),b=o0({},b,ie,Aw);var Le=o0({},b.imports,ie.imports,Aw),Ve=La(Le),st=to(Le,Ve),vt,Dt,cn=0,hn=b.interpolate||Br,bn="__p += '",Gn=du((b.escape||Br).source+"|"+hn.source+"|"+(hn===Ti?St:Br).source+"|"+(b.evaluate||Br).source+"|$","g"),mr="//# sourceURL="+(ti.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ta+"]")+`
`;f.replace(Gn,function(Or,ki,Ri,gu,El,mu){return Ri||(Ri=gu),bn+=f.slice(cn,mu).replace(zi,xl),ki&&(vt=!0,bn+=`' +
__e(`+ki+`) +
'`),El&&(Dt=!0,bn+=`';
`+El+`;
__p += '`),Ri&&(bn+=`' +
((__t = (`+Ri+`)) == null ? '' : __t) +
'`),cn=mu+Or.length,Or}),bn+=`';
`;var Dr=ti.call(b,"variable")&&b.variable;if(!Dr)bn=`with (obj) {
`+bn+`
}
`;else if(jt.test(Dr))throw new rr(a);bn=(Dt?bn.replace(Qt,""):bn).replace(xn,"$1").replace(Cn,"$1;"),bn="function("+(Dr||"obj")+`) {
`+(Dr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(vt?", __e = _.escape":"")+(Dt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bn+`return __p
}`;var fi=xx(function(){return Mr(Ve,mr+"return "+bn).apply(n,st)});if(fi.source=bn,g1(fi))throw fi;return fi}function TT(f){return is(f).toLowerCase()}function DT(f){return is(f).toUpperCase()}function OT(f,b,O){if(f=is(f),f&&(O||b===n))return Qo(f);if(!f||!(b=rl(b)))return f;var ie=io(f),Le=io(b),Ve=bo(ie,Le),st=Tu(ie,Le)+1;return Iu(ie,Ve,st).join("")}function NT(f,b,O){if(f=is(f),f&&(O||b===n))return f.slice(0,Xa(f)+1);if(!f||!(b=rl(b)))return f;var ie=io(f),Le=Tu(ie,io(b))+1;return Iu(ie,0,Le).join("")}function IT(f,b,O){if(f=is(f),f&&(O||b===n))return f.replace(at,"");if(!f||!(b=rl(b)))return f;var ie=io(f),Le=bo(ie,io(b));return Iu(ie,Le).join("")}function BT(f,b){var O=Y,ie=B;if(co(b)){var Le="separator"in b?b.separator:Le;O="length"in b?ui(b.length):O,ie="omission"in b?rl(b.omission):ie}f=is(f);var Ve=f.length;if(Na(f)){var st=io(f);Ve=st.length}if(O>=Ve)return f;var vt=O-ro(ie);if(vt<1)return ie;var Dt=st?Iu(st,0,vt).join(""):f.slice(0,vt);if(Le===n)return Dt+ie;if(st&&(vt+=Dt.length-vt),m1(Le)){if(f.slice(vt).search(Le)){var cn,hn=Dt;for(Le.global||(Le=du(Le.source,is(qt.exec(Le))+"g")),Le.lastIndex=0;cn=Le.exec(hn);)var bn=cn.index;Dt=Dt.slice(0,bn===n?vt:bn)}}else if(f.indexOf(rl(Le),vt)!=vt){var Gn=Dt.lastIndexOf(Le);Gn>-1&&(Dt=Dt.slice(0,Gn))}return Dt+ie}function RT(f){return f=is(f),f&&xr.test(f)?f.replace(tr,Ja):f}var FT=jf(function(f,b,O){return f+(O?" ":"")+b.toUpperCase()}),b1=Lw("toUpperCase");function wx(f,b,O){return f=is(f),b=O?n:b,b===n?ea(f)?Ia(f):dt(f):f.match(b)||[]}var xx=li(function(f,b){try{return Si(f,n,b)}catch(O){return g1(O)?O:new rr(O)}}),jT=hh(function(f,b){return zs(b,function(O){O=Nc(O),Bn(f,O,f1(f[O],f))}),f});function zT(f){var b=f==null?0:f.length,O=kr();return f=b?Ci(f,function(ie){if(typeof ie[1]!="function")throw new Ji(o);return[O(ie[0]),ie[1]]}):[],li(function(ie){for(var Le=-1;++Le<b;){var Ve=f[Le];if(Si(Ve[0],this,ie))return Si(Ve[1],this,ie)}})}function $T(f){return m(h(f,p))}function _1(f){return function(){return f}}function VT(f,b){return f==null||f!==f?b:f}var UT=Cw(),HT=Cw(!0);function Wl(f){return f}function w1(f){return ar(typeof f=="function"?f:h(f,p))}function WT(f){return zo(h(f,p))}function GT(f,b){return tc(f,h(b,p))}var qT=li(function(f,b){return function(O){return je(O,f,b)}}),YT=li(function(f,b){return function(O){return je(f,O,b)}});function x1(f,b,O){var ie=La(b),Le=Pn(b,ie);O==null&&!(co(b)&&(Le.length||!ie.length))&&(O=b,b=f,f=this,Le=Pn(b,La(b)));var Ve=!(co(O)&&"chain"in O)||!!O.chain,st=fh(f);return zs(Le,function(vt){var Dt=b[vt];f[vt]=Dt,st&&(f.prototype[vt]=function(){var cn=this.__chain__;if(Ve||cn){var hn=f(this.__wrapped__),bn=hn.__actions__=Vl(this.__actions__);return bn.push({func:Dt,args:arguments,thisArg:f}),hn.__chain__=cn,hn}return Dt.apply(f,Jo([this.value()],arguments))})}),f}function KT(){return fs._===this&&(fs._=vs),this}function L1(){}function ZT(f){return f=ui(f),li(function(b){return Sl(b,f)})}var XT=e1(Ci),JT=e1(hu),QT=e1(j);function Lx(f){return a1(f)?Er(Nc(f)):ys(f)}function eD(f){return function(b){return f==null?n:br(f,b)}}var tD=Pw(),nD=Pw(!0);function S1(){return[]}function C1(){return!1}function rD(){return{}}function iD(){return""}function sD(){return!0}function oD(f,b){if(f=ui(f),f<1||f>J)return[];var O=ke,ie=Ce(f,ke);b=kr(b),f-=ke;for(var Le=ms(ie,b);++O<f;)b(O);return Le}function aD(f){return ri(f)?Ci(f,Nc):pu(f)?[f]:Vl(Uw(is(f)))}function lD(f){var b=++ba;return is(f)+b}var uD=qm(function(f,b){return f+b},0),cD=t1("ceil"),hD=qm(function(f,b){return f/b},1),dD=t1("floor");function fD(f){return f&&f.length?ye(f,Wl,ft):n}function pD(f,b){return f&&f.length?ye(f,kr(b,2),ft):n}function gD(f){return fr(f,Wl)}function mD(f,b){return fr(f,kr(b,2))}function vD(f){return f&&f.length?ye(f,Wl,ni):n}function yD(f,b){return f&&f.length?ye(f,kr(b,2),ni):n}var bD=qm(function(f,b){return f*b},1),_D=t1("round"),wD=qm(function(f,b){return f-b},0);function xD(f){return f&&f.length?Ei(f,Wl):0}function LD(f,b){return f&&f.length?Ei(f,kr(b,2)):0}return Oe.after=WA,Oe.ary=ex,Oe.assign=D6,Oe.assignIn=px,Oe.assignInWith=o0,Oe.assignWith=O6,Oe.at=N6,Oe.before=tx,Oe.bind=f1,Oe.bindAll=jT,Oe.bindKey=nx,Oe.castArray=r6,Oe.chain=Xw,Oe.chunk=dk,Oe.compact=fk,Oe.concat=pk,Oe.cond=zT,Oe.conforms=$T,Oe.constant=_1,Oe.countBy=xA,Oe.create=I6,Oe.curry=rx,Oe.curryRight=ix,Oe.debounce=sx,Oe.defaults=B6,Oe.defaultsDeep=R6,Oe.defer=GA,Oe.delay=qA,Oe.difference=gk,Oe.differenceBy=mk,Oe.differenceWith=vk,Oe.drop=yk,Oe.dropRight=bk,Oe.dropRightWhile=_k,Oe.dropWhile=wk,Oe.fill=xk,Oe.filter=SA,Oe.flatMap=PA,Oe.flatMapDeep=MA,Oe.flatMapDepth=kA,Oe.flatten=qw,Oe.flattenDeep=Lk,Oe.flattenDepth=Sk,Oe.flip=YA,Oe.flow=UT,Oe.flowRight=HT,Oe.fromPairs=Ck,Oe.functions=H6,Oe.functionsIn=W6,Oe.groupBy=AA,Oe.initial=Pk,Oe.intersection=Mk,Oe.intersectionBy=kk,Oe.intersectionWith=Ak,Oe.invert=q6,Oe.invertBy=Y6,Oe.invokeMap=DA,Oe.iteratee=w1,Oe.keyBy=OA,Oe.keys=La,Oe.keysIn=Hl,Oe.map=e0,Oe.mapKeys=Z6,Oe.mapValues=X6,Oe.matches=WT,Oe.matchesProperty=GT,Oe.memoize=n0,Oe.merge=J6,Oe.mergeWith=gx,Oe.method=qT,Oe.methodOf=YT,Oe.mixin=x1,Oe.negate=r0,Oe.nthArg=ZT,Oe.omit=Q6,Oe.omitBy=eT,Oe.once=KA,Oe.orderBy=NA,Oe.over=XT,Oe.overArgs=ZA,Oe.overEvery=JT,Oe.overSome=QT,Oe.partial=p1,Oe.partialRight=ox,Oe.partition=IA,Oe.pick=tT,Oe.pickBy=mx,Oe.property=Lx,Oe.propertyOf=eD,Oe.pull=Nk,Oe.pullAll=Kw,Oe.pullAllBy=Ik,Oe.pullAllWith=Bk,Oe.pullAt=Rk,Oe.range=tD,Oe.rangeRight=nD,Oe.rearg=XA,Oe.reject=FA,Oe.remove=Fk,Oe.rest=JA,Oe.reverse=h1,Oe.sampleSize=zA,Oe.set=rT,Oe.setWith=iT,Oe.shuffle=$A,Oe.slice=jk,Oe.sortBy=HA,Oe.sortedUniq=Gk,Oe.sortedUniqBy=qk,Oe.split=PT,Oe.spread=QA,Oe.tail=Yk,Oe.take=Kk,Oe.takeRight=Zk,Oe.takeRightWhile=Xk,Oe.takeWhile=Jk,Oe.tap=fA,Oe.throttle=e6,Oe.thru=Qm,Oe.toArray=hx,Oe.toPairs=vx,Oe.toPairsIn=yx,Oe.toPath=aD,Oe.toPlainObject=fx,Oe.transform=sT,Oe.unary=t6,Oe.union=Qk,Oe.unionBy=eA,Oe.unionWith=tA,Oe.uniq=nA,Oe.uniqBy=rA,Oe.uniqWith=iA,Oe.unset=oT,Oe.unzip=d1,Oe.unzipWith=Zw,Oe.update=aT,Oe.updateWith=lT,Oe.values=Vf,Oe.valuesIn=uT,Oe.without=sA,Oe.words=wx,Oe.wrap=n6,Oe.xor=oA,Oe.xorBy=aA,Oe.xorWith=lA,Oe.zip=uA,Oe.zipObject=cA,Oe.zipObjectDeep=hA,Oe.zipWith=dA,Oe.entries=vx,Oe.entriesIn=yx,Oe.extend=px,Oe.extendWith=o0,x1(Oe,Oe),Oe.add=uD,Oe.attempt=xx,Oe.camelCase=fT,Oe.capitalize=bx,Oe.ceil=cD,Oe.clamp=cT,Oe.clone=i6,Oe.cloneDeep=o6,Oe.cloneDeepWith=a6,Oe.cloneWith=s6,Oe.conformsTo=l6,Oe.deburr=_x,Oe.defaultTo=VT,Oe.divide=hD,Oe.endsWith=pT,Oe.eq=oc,Oe.escape=gT,Oe.escapeRegExp=mT,Oe.every=LA,Oe.find=CA,Oe.findIndex=Ww,Oe.findKey=F6,Oe.findLast=EA,Oe.findLastIndex=Gw,Oe.findLastKey=j6,Oe.floor=dD,Oe.forEach=Jw,Oe.forEachRight=Qw,Oe.forIn=z6,Oe.forInRight=$6,Oe.forOwn=V6,Oe.forOwnRight=U6,Oe.get=v1,Oe.gt=u6,Oe.gte=c6,Oe.has=G6,Oe.hasIn=y1,Oe.head=Yw,Oe.identity=Wl,Oe.includes=TA,Oe.indexOf=Ek,Oe.inRange=hT,Oe.invoke=K6,Oe.isArguments=jd,Oe.isArray=ri,Oe.isArrayBuffer=h6,Oe.isArrayLike=Ul,Oe.isArrayLikeObject=$o,Oe.isBoolean=d6,Oe.isBuffer=Gh,Oe.isDate=f6,Oe.isElement=p6,Oe.isEmpty=g6,Oe.isEqual=m6,Oe.isEqualWith=v6,Oe.isError=g1,Oe.isFinite=y6,Oe.isFunction=fh,Oe.isInteger=ax,Oe.isLength=i0,Oe.isMap=lx,Oe.isMatch=b6,Oe.isMatchWith=_6,Oe.isNaN=w6,Oe.isNative=x6,Oe.isNil=S6,Oe.isNull=L6,Oe.isNumber=ux,Oe.isObject=co,Oe.isObjectLike=So,Oe.isPlainObject=qp,Oe.isRegExp=m1,Oe.isSafeInteger=C6,Oe.isSet=cx,Oe.isString=s0,Oe.isSymbol=pu,Oe.isTypedArray=$f,Oe.isUndefined=E6,Oe.isWeakMap=P6,Oe.isWeakSet=M6,Oe.join=Tk,Oe.kebabCase=vT,Oe.last=Bu,Oe.lastIndexOf=Dk,Oe.lowerCase=yT,Oe.lowerFirst=bT,Oe.lt=k6,Oe.lte=A6,Oe.max=fD,Oe.maxBy=pD,Oe.mean=gD,Oe.meanBy=mD,Oe.min=vD,Oe.minBy=yD,Oe.stubArray=S1,Oe.stubFalse=C1,Oe.stubObject=rD,Oe.stubString=iD,Oe.stubTrue=sD,Oe.multiply=bD,Oe.nth=Ok,Oe.noConflict=KT,Oe.noop=L1,Oe.now=t0,Oe.pad=_T,Oe.padEnd=wT,Oe.padStart=xT,Oe.parseInt=LT,Oe.random=dT,Oe.reduce=BA,Oe.reduceRight=RA,Oe.repeat=ST,Oe.replace=CT,Oe.result=nT,Oe.round=_D,Oe.runInContext=Lt,Oe.sample=jA,Oe.size=VA,Oe.snakeCase=ET,Oe.some=UA,Oe.sortedIndex=zk,Oe.sortedIndexBy=$k,Oe.sortedIndexOf=Vk,Oe.sortedLastIndex=Uk,Oe.sortedLastIndexBy=Hk,Oe.sortedLastIndexOf=Wk,Oe.startCase=MT,Oe.startsWith=kT,Oe.subtract=wD,Oe.sum=xD,Oe.sumBy=LD,Oe.template=AT,Oe.times=oD,Oe.toFinite=ph,Oe.toInteger=ui,Oe.toLength=dx,Oe.toLower=TT,Oe.toNumber=Ru,Oe.toSafeInteger=T6,Oe.toString=is,Oe.toUpper=DT,Oe.trim=OT,Oe.trimEnd=NT,Oe.trimStart=IT,Oe.truncate=BT,Oe.unescape=RT,Oe.uniqueId=lD,Oe.upperCase=FT,Oe.upperFirst=b1,Oe.each=Jw,Oe.eachRight=Qw,Oe.first=Yw,x1(Oe,function(){var f={};return en(Oe,function(b,O){ti.call(Oe.prototype,O)||(f[O]=b)}),f}(),{chain:!1}),Oe.VERSION=r,zs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Oe[f].placeholder=Oe}),zs(["drop","take"],function(f,b){Hr.prototype[f]=function(O){O=O===n?1:ue(ui(O),0);var ie=this.__filtered__&&!b?new Hr(this):this.clone();return ie.__filtered__?ie.__takeCount__=Ce(O,ie.__takeCount__):ie.__views__.push({size:Ce(O,ke),type:f+(ie.__dir__<0?"Right":"")}),ie},Hr.prototype[f+"Right"]=function(O){return this.reverse()[f](O).reverse()}}),zs(["filter","map","takeWhile"],function(f,b){var O=b+1,ie=O==q||O==$;Hr.prototype[f]=function(Le){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:kr(Le,3),type:O}),Ve.__filtered__=Ve.__filtered__||ie,Ve}}),zs(["head","last"],function(f,b){var O="take"+(b?"Right":"");Hr.prototype[f]=function(){return this[O](1).value()[0]}}),zs(["initial","tail"],function(f,b){var O="drop"+(b?"":"Right");Hr.prototype[f]=function(){return this.__filtered__?new Hr(this):this[O](1)}}),Hr.prototype.compact=function(){return this.filter(Wl)},Hr.prototype.find=function(f){return this.filter(f).head()},Hr.prototype.findLast=function(f){return this.reverse().find(f)},Hr.prototype.invokeMap=li(function(f,b){return typeof f=="function"?new Hr(this):this.map(function(O){return je(O,f,b)})}),Hr.prototype.reject=function(f){return this.filter(r0(kr(f)))},Hr.prototype.slice=function(f,b){f=ui(f);var O=this;return O.__filtered__&&(f>0||b<0)?new Hr(O):(f<0?O=O.takeRight(-f):f&&(O=O.drop(f)),b!==n&&(b=ui(b),O=b<0?O.dropRight(-b):O.take(b-f)),O)},Hr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Hr.prototype.toArray=function(){return this.take(ke)},en(Hr.prototype,function(f,b){var O=/^(?:filter|find|map|reject)|While$/.test(b),ie=/^(?:head|last)$/.test(b),Le=Oe[ie?"take"+(b=="last"?"Right":""):b],Ve=ie||/^find/.test(b);Le&&(Oe.prototype[b]=function(){var st=this.__wrapped__,vt=ie?[1]:arguments,Dt=st instanceof Hr,cn=vt[0],hn=Dt||ri(st),bn=function(ki){var Ri=Le.apply(Oe,Jo([ki],vt));return ie&&Gn?Ri[0]:Ri};hn&&O&&typeof cn=="function"&&cn.length!=1&&(Dt=hn=!1);var Gn=this.__chain__,mr=!!this.__actions__.length,Dr=Ve&&!Gn,fi=Dt&&!mr;if(!Ve&&hn){st=fi?st:new Hr(this);var Or=f.apply(st,vt);return Or.__actions__.push({func:Qm,args:[bn],thisArg:n}),new Gs(Or,Gn)}return Dr&&fi?f.apply(this,vt):(Or=this.thru(bn),Dr?ie?Or.value()[0]:Or.value():Or)})}),zs(["pop","push","shift","sort","splice","unshift"],function(f){var b=Ba[f],O=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",ie=/^(?:pop|shift)$/.test(f);Oe.prototype[f]=function(){var Le=arguments;if(ie&&!this.__chain__){var Ve=this.value();return b.apply(ri(Ve)?Ve:[],Le)}return this[O](function(st){return b.apply(ri(st)?st:[],Le)})}}),en(Hr.prototype,function(f,b){var O=Oe[b];if(O){var ie=O.name+"";ti.call(Fo,ie)||(Fo[ie]=[]),Fo[ie].push({name:b,func:O})}}),Fo[Gm(n,A).name]=[{name:"wrapper",func:n}],Hr.prototype.clone=zh,Hr.prototype.reverse=Pf,Hr.prototype.value=$h,Oe.prototype.at=pA,Oe.prototype.chain=gA,Oe.prototype.commit=mA,Oe.prototype.next=vA,Oe.prototype.plant=bA,Oe.prototype.reverse=_A,Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=wA,Oe.prototype.first=Oe.prototype.head,wr&&(Oe.prototype[wr]=yA),Oe},oo=ta();ps?((ps.exports=oo)._=oo,gr._=oo):fs._=oo}).call(Ea)})(Wv,Wv.exports);var OE=Wv.exports;class Wa extends Zn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ye(this,"_width");Ye(this,"_height");Ye(this,"_center");Ye(this,"_rotation");Ye(this,"_isMapReady",!1);Ye(this,"properties");Ye(this,"_helperPoints",{corners:[],midPoints:[]});Ye(this,"_throttledUpdateProperties");const i=n instanceof Zn.LatLngBounds?n:Zn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=kn.measure("Rectangle.constructor.calculateWidth",()=>{const a=K1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=kn.measure("Rectangle.constructor.calculateHeight",()=>{const a=K1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=kn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=kn.measure("Rectangle.constructor.initThrottle",()=>OE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){kn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=t5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=t5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Zn.latLng(this._center.lat+o/2,this._center.lng-a/2),Zn.latLng(this._center.lat+o/2,this._center.lng+a/2),Zn.latLng(this._center.lat-o/2,this._center.lng+a/2),Zn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),d=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),g=Math.sin(p),E=d.map(k=>{const A=k.x-c.x,D=k.y-c.y;return Zn.point(c.x+(A*v-D*g),c.y+(A*g+D*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return kn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Zn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=K1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return kn.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng-r),Zn.latLng(this._center.lat+i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng-r),Zn.latLng(this._center.lat+i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return kn.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Zn.latLng(this._center.lat+s,this._center.lng),Zn.latLng(this._center.lat,this._center.lng+i),Zn.latLng(this._center.lat-s,this._center.lng),Zn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng),Zn.latLng(this._center.lat,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng),Zn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return kn.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Zn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return kn.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){kn.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return kn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){kn.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){kn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return kn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){kn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){kn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,g=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,k=Math.max(Math.abs(p*2)/g,1),A=Math.max(Math.abs(v*2)/g,1),D=k*g/2,z=A*g/2,X=x*D*c-E*z*d,re=x*D*d+E*z*c,ge=Zn.point(s.x-X,s.y-re),fe=this._map.containerPointToLatLng(ge),Y=[Zn.point(ge.x-D,ge.y+z),Zn.point(ge.x+D,ge.y+z),Zn.point(ge.x+D,ge.y-z),Zn.point(ge.x-D,ge.y-z)].map(B=>{const I=B.x-ge.x,R=B.y-ge.y;return Zn.point(ge.x+(I*c-R*d),ge.y+(I*d+R*c))}).map(B=>this._map.containerPointToLatLng(B));this._width=k,this._height=A,this._center=fe,this.setLatLngs(Y),this.fire("coordinates:updated",{corners:Y,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){kn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,g=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/g:this._width=Math.abs(p*2)/g,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){kn.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){kn.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){kn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return kn.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){kn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Zn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Zn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){kn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){kn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return kn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){kn.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return kn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,d=r[o].lat;l>n.lat!=d>n.lat&&n.lng<(c-a)*(n.lat-l)/(d-l)+a&&(i=!i)}return i})}}var Yi=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Yi||{});const yf=Bp("notes",()=>{const t=Ct([]),e=Ct([]),n=Xn(()=>B=>t.value.find(I=>I.id===B)),r=Xn(()=>B=>{const I=t.value.find(R=>R.id===B);return I?I.color:"#6B7280"}),i=Xn(()=>B=>e.value.filter(I=>I.columnId===B).sort((I,R)=>I.order-R.order)),s=Xn(()=>t.value.find(B=>B.isDefault)||t.value[0]),o=Xn(()=>[...t.value].sort((B,I)=>B.order-I.order)),a=Xn(()=>B=>{const I=ma();if(!I.user)return!1;if(I.isAdmin)return!0;switch(B.accessLevel){case"private":return!0;case"company":return I.isAdmin||I.isEntreprise;case"employee":return I.isAdmin||I.isEntreprise||I.isSalarie;case"visitor":return I.isAdmin||I.isEntreprise||I.isSalarie||I.isVisiteur;default:return!1}}),l=Xn(()=>e.value.filter(B=>a.value(B))),c=Xn(()=>B=>l.value.filter(I=>I.columnId===B).sort((I,R)=>I.order-R.order));async function d(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const B=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=B,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",t.value)}catch(B){throw console.error("[NotesStore][loadColumns] Erreur:",B),B}}async function p(B){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function v(B,I){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,B,I);try{const R=t.value.findIndex(q=>q.id===B);R!==-1&&(t.value[R]={...t.value[R],...I},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",t.value))}catch(R){throw console.error("[NotesStore][updateColumn] Erreur:",R),R}}async function g(B){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function x(B){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function E(B){if(!B)return"private";switch(B.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${B}, utilisation de PRIVATE par défaut`),"private"}}function k(B){if(!B.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const I=new Date().toISOString(),R=e.value.filter($=>$.columnId===B.columnId),q=R.length>0?Math.max(...R.map($=>$.order))+1:0,U=E(B.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",B.id,"et niveau d'accès:",U),e.value.push({...B,id:B.id,order:q,accessLevel:U,createdAt:I,updatedAt:I,comments:[],photos:[]}),B.id}function A(B,I){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,B,I);try{const R=e.value.findIndex(q=>q.id===B);R!==-1&&(I.color&&(I.style={...e.value[R].style,color:I.color,fillColor:I.color}),I.access_level&&(I.accessLevel=E(I.access_level),delete I.access_level),e.value[R]={...e.value[R],...I},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[R]))}catch(R){throw console.error("[NotesStore][updateNote] Erreur:",R),R}}function D(B){e.value.findIndex(R=>R.id===B)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",B),e.value=e.value.filter(R=>R.id!==B)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",B)}function z(B,I){const R=e.value.findIndex(q=>q.id===B);if(R!==-1){const q=e.value[R];if(q.columnId!==I){const $=e.value.filter(_e=>_e.columnId===I),oe=$.length>0?Math.max(...$.map(_e=>_e.order))+1:0,J={...q,columnId:I,order:oe,updatedAt:new Date().toISOString()};e.value[R]=J}else e.value[R]={...e.value[R],updatedAt:new Date().toISOString()}}}function X(B,I){I.forEach((R,q)=>{const U=e.value.findIndex($=>$.id===R&&$.columnId===B);U!==-1&&(e.value[U]={...e.value[U],order:q,updatedAt:new Date().toISOString()})})}function re(B){switch(B){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ge(B,I){try{const R=ma();if(!R.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!R.isEntreprise&&!R.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(ve=>ve.id===B))throw new Error(`La note avec l'ID ${B} n'existe pas`);const $=(await Ca.addComment(B,I)).data,oe=e.value.findIndex(ve=>ve.id===B);if(oe===-1)return;const J=e.value[oe];J.comments||(J.comments=[]);const _e={id:$.id,text:$.text,createdAt:$.created_at,userId:$.user,userName:$.user_name,userRole:$.user_role};return J.comments.push(_e),J.updatedAt=new Date().toISOString(),e.value[oe]={...J},_e.id}catch(R){throw console.error("Erreur lors de l'ajout du commentaire:",R),R}}async function fe(B,I){try{const R=e.value.findIndex($=>$.id===B);if(R===-1)throw new Error(`La note avec l'ID ${B} n'existe pas`);const q=e.value[R];if(!q.comments||q.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!q.comments.some($=>$.id===I))throw new Error(`Le commentaire avec l'ID ${I} n'existe pas`);await Ca.deleteComment(B,I),q.comments=q.comments.filter($=>$.id!==I),q.updatedAt=new Date().toISOString(),e.value[R]={...q}}catch(R){throw console.error("Erreur lors de la suppression du commentaire:",R),R}}async function N(B,I){try{if(I.id&&I.image){const R=e.value.findIndex($=>$.id===B);if(R===-1)return;const q=e.value[R];q.photos||(q.photos=[]);const U={id:I.id,url:I.image,caption:I.caption,createdAt:I.created_at};return q.photos.push(U),q.updatedAt=new Date().toISOString(),e.value[R]={...q},U.id}else{const R=new FormData;R.append("image",I.url),I.caption&&R.append("caption",I.caption);const U=(await Ca.addPhoto(B,R)).data,$=e.value.findIndex(_e=>_e.id===B);if($===-1)return;const oe=e.value[$];oe.photos||(oe.photos=[]);const J={id:U.id,url:U.image,caption:U.caption,createdAt:U.created_at};return oe.photos.push(J),oe.updatedAt=new Date().toISOString(),e.value[$]={...oe},J.id}}catch(R){throw console.error("Erreur lors de l'ajout de la photo:",R),R}}async function F(B,I){try{await Ca.deletePhoto(B,I);const R=e.value.findIndex($=>$.id===B);if(R===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[R].photos||(e.value[R].photos=[]);const q=e.value[R],U=(q.photos||[]).filter($=>$.id!==I);e.value[R]={...q,photos:U,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",U.length)}catch(R){throw console.error("Erreur lors de la suppression de la photo:",R),R}}async function Y(B,I,R){try{await Ca.updatePhoto(B,I,{caption:R});const q=e.value.findIndex(oe=>oe.id===B);if(q===-1||!e.value[q].photos)return;const U=e.value[q],$=U.photos.findIndex(oe=>oe.id===I);if($===-1)return;U.photos[$].caption=R,U.updatedAt=new Date().toISOString(),e.value[q]={...U}}catch(q){throw console.error("Erreur lors de la mise à jour de la légende:",q),q}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:re,loadColumns:d,addColumn:p,updateColumn:v,removeColumn:g,reorderColumns:x,addNote:k,updateNote:A,removeNote:D,moveNote:z,reorderNotes:X,addComment:ge,removeComment:fe,addPhoto:N,removePhoto:F,updatePhoto:Y}});class kh extends Vt.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=Vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Ye(this,"properties");Ye(this,"_planSaved",!1);Ye(this,"_isMoving",!1);Ye(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Yi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle()})}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Yi.PRIVATE:return"Privé";case Yi.COMPANY:return"Entreprise";case Yi.EMPLOYEE:return"Salariés";case Yi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Yi.PRIVATE:return"#9CA3AF";case Yi.COMPANY:return"#EF4444";case Yi.EMPLOYEE:return"#F59E0B";case Yi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Vt.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilisé: ${n}`);const r={id:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",r.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Yi.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur récupérée depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",r);const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style)}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise à jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'élément"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup")}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",Vt.DomUtil.setTransform(n,new Vt.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)}),console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=Vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,d,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((d=n.style)==null?void 0:d._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||Yi.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,d,p,v,g,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const k=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",k),r=[k[1],k[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",n),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Yi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",n.style);const s=((d=n.style)==null?void 0:d.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new kh(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(g=n.style)==null?void 0:g.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c,d,p,v;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let g=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(g.startsWith("rgb")){const A=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(A){const D=A.getAttribute("fill");D&&(g=D,console.log("[GeoNote][saveNote] Couleur récupérée depuis SVG pour remplacer RGB:",g))}}const x={...this.properties.style,color:g,fillColor:g,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",x);const E={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:x,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};n&&(E.plan=n),console.log("[GeoNote][saveNote] Données à envoyer:",E),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:E.style.color,styleFillColor:E.style.fillColor});let k;return this._dbId?(k=(await Ca.updateNote(this._dbId,E)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",k),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(c=k.style)==null?void 0:c.color,styleFillColor:(d=k.style)==null?void 0:d.fillColor,styleObject:k.style})):(k=(await Ca.createNote(E)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",k),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(p=k.style)==null?void 0:p.color,styleFillColor:(v=k.style)==null?void 0:v.fillColor,styleObject:k.style}),this._dbId=k.id,yf().addNote({...k,id:k.id,columnId:k.column,accessLevel:k.access_level})),this._planSaved=!0,k.id}catch(g){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",g),ru().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n)return;const r=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",n)}}}function _z(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function wz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function f5(t){var e,n,r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,z,X,re,ge;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const fe=t.getLatLng();return{type_forme:"Note",data:{points:[[fe.lng,fe.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((d=t.properties.style)==null?void 0:d.name)||""}}}}if(t instanceof ld||((p=t.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(F=>[F.lng,F.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((g=t.properties.style)==null?void 0:g.weight)||3,opacity:((x=t.properties.style)==null?void 0:x.opacity)||1,fillColor:((E=t.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((k=t.properties.style)==null?void 0:k.fillOpacity)||.2,name:((A=t.properties.style)==null?void 0:A.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ua||((D=t.properties)==null?void 0:D.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(F=>[F.lng,F.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((z=t.properties.style)==null?void 0:z.color)||"#2b6451",weight:((X=t.properties.style)==null?void 0:X.weight)||3,opacity:((re=t.properties.style)==null?void 0:re.opacity)||1,name:((ge=t.properties.style)==null?void 0:ge.name)||""}}};throw new Error("Type de forme non reconnu")}function xz(t){var e,n,r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,z,X,re,ge,fe,N,F,Y,B,I,R,q,U,$,oe,J,_e;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"Polygon":{const ve=t.data;if(!_z(ve))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const ke=ve.points.map(K=>Zn.latLng(K[1],K[0])),W=((e=ve.style)==null?void 0:e._accessLevel)||((n=ve.style)==null?void 0:n.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",W,"Style:",ve.style),ve.accessLevel=W;const V=new ld([ke],{color:((r=ve.style)==null?void 0:r.color)||"#2b6451",weight:((i=ve.style)==null?void 0:i.weight)||3,opacity:((s=ve.style)==null?void 0:s.opacity)||1,fillColor:((o=ve.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ve.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ve.style)==null?void 0:l.dashArray)||"",name:((c=ve.style)==null?void 0:c.name)||"",category:ve.category||"forages",accessLevel:W});return V.updateProperties(),V}case"Line":{const ve=t.data;if(!wz(ve))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const ke=ve.points.map(K=>Zn.latLng(K[1],K[0])),W=((d=ve.style)==null?void 0:d._accessLevel)||((p=ve.style)==null?void 0:p.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",W,"Style:",ve.style),ve.accessLevel=W;const V=new ua(ke,{...ve.style||{},name:((v=ve.style)==null?void 0:v.name)||"",category:ve.category||"forages",accessLevel:W});return V.updateProperties(),V}case"Rectangle":{const ve=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ve,bounds:ve.bounds,width:ve.width,height:ve.height,rotation:ve.rotation}),!ve.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const ke=new Zn.LatLngBounds(Zn.latLng(ve.bounds.southWest[1],ve.bounds.southWest[0]),Zn.latLng(ve.bounds.northEast[1],ve.bounds.northEast[0])),W=new Wa(ke,{color:((g=ve.style)==null?void 0:g.color)||"#2b6451",weight:((x=ve.style)==null?void 0:x.weight)||3,opacity:((E=ve.style)==null?void 0:E.opacity)||1,fillColor:((k=ve.style)==null?void 0:k.fillColor)||"#2b6451",fillOpacity:((A=ve.style)==null?void 0:A.fillOpacity)||.2,dashArray:((D=ve.style)==null?void 0:D.dashArray)||"",name:((z=ve.style)==null?void 0:z.name)||"",width:ve.width,height:ve.height});return ve.rotation&&W.setRotation(ve.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:W.getBounds(),dimensions:W.getDimensions(),properties:W.properties}),W}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:t.id,data:t.data,hasName:((re=(X=t.data)==null?void 0:X.style)==null?void 0:re.name)!==void 0,name:(fe=(ge=t.data)==null?void 0:ge.style)==null?void 0:fe.name});const ve=t.data;if(!ve.center||!ve.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const ke=Zn.circle([ve.center[1],ve.center[0]],{color:((N=ve.style)==null?void 0:N.color)||"#2b6451",weight:((F=ve.style)==null?void 0:F.weight)||3,opacity:((Y=ve.style)==null?void 0:Y.opacity)||1,fillColor:((B=ve.style)==null?void 0:B.fillColor)||"#2b6451",fillOpacity:((I=ve.style)==null?void 0:I.fillOpacity)||.2,dashArray:((R=ve.style)==null?void 0:R.dashArray)||"",radius:ve.radius});return ke.properties={type:"Circle",radius:ve.radius,diameter:ve.radius*2,surface:Math.PI*ve.radius*ve.radius,perimeter:2*Math.PI*ve.radius,style:{...ve.style||{},name:((q=ve.style)==null?void 0:q.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof ve.center,center:ve.center,radius:ve.radius,style:ke.properties.style,name:ke.properties.style.name}),ke}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:t.id,data:t.data});const ve=t.data;if(!ve.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const ke={location:ve.location,name:ve.name||"Note géolocalisée",description:ve.description||"",columnId:ve.columnId||"en-cours",accessLevel:ve.accessLevel||"private",category:ve.category||"forages",style:{color:((U=ve.style)==null?void 0:U.color)||"#2b6451",weight:(($=ve.style)==null?void 0:$.weight)||2,fillColor:((oe=ve.style)==null?void 0:oe.fillColor)||"#2b6451",fillOpacity:((J=ve.style)==null?void 0:J.fillOpacity)||.8,radius:((_e=ve.style)==null?void 0:_e.radius)||12},comments:ve.comments||[],photos:ve.photos||[],order:ve.order||0,createdAt:ve.createdAt||new Date().toISOString(),updatedAt:ve.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",ke);const W=kh.fromBackendData(ke);return W._dbId=t.id,console.log("[DrawingStore] Note créée:",{id:t.id,location:ke.location,name:ke.name,type:W.properties.type}),W}catch(ke){return console.error("[DrawingStore] Erreur lors de la création de la Note:",ke),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const Mp=Bp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:jp()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof Zn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Zn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>f5(t),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} déjà chargé avec ${this.elements.length} éléments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Nn.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=xz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),f5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Nn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),NE=Bp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:jp()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=ru();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>y0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>y0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre créé avec succès:",n.data),n.data}catch(n){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>y0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>y0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprimé avec succès:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),zy=Bp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:jp()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=ma();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Nn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=ma();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Nn.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await v0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=ru();try{const i=ma();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>v0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await v0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Nn.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=ru();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),Nn.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Nn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Nn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=ru();try{const r=this.plans.find(i=>i.id===t);await v0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Lz={class:"mobile-header"},Sz={class:"header-content"},Cz={class:"tabs-navigation"},Ez={class:"content-container"},Pz={key:0,class:"tab-content"},Mz={class:"tools-grid"},kz=["onClick","title"],Az=["innerHTML"],Tz={class:"tool-label"},Dz={key:0,class:"note-actions"},Oz={key:2,class:"shape-properties"},Nz={class:"property-group"},Iz={class:"property-content"},Bz={class:"property-item"},Rz={class:"property-value"},Fz={class:"property-item"},jz={class:"property-value"},zz={key:1,class:"property-item"},$z={class:"property-value"},Vz={class:"property-item"},Uz={class:"property-value"},Hz={class:"property-item"},Wz={class:"property-value"},Gz={class:"property-item"},qz={class:"property-value"},Yz={key:1,class:"tab-content"},Kz={class:"color-picker"},Zz={class:"color-grid"},Xz=["onClick"],Jz={class:"style-controls"},Qz={class:"style-group"},e$={class:"style-inputs"},t$={class:"value-label"},n$={class:"style-group"},r$=["value"],i$={key:0,class:"style-group"},s$={class:"style-inputs"},o$={class:"value-label"},a$={class:"tabs-navigation"},l$={class:"content-container"},u$={key:0,class:"tab-content"},c$={class:"tools-grid"},h$=["onClick","title"],d$=["innerHTML"],f$={class:"tool-label"},p$={key:0,class:"note-actions"},g$={key:2,class:"shape-properties"},m$={class:"property-group"},v$={class:"property-content"},y$={class:"property-item"},b$={class:"property-value"},_$={class:"property-item"},w$={class:"property-value"},x$={key:1,class:"property-item"},L$={class:"property-value"},S$={class:"property-item"},C$={class:"property-value"},E$={class:"property-item"},P$={class:"property-value"},M$={class:"property-item"},k$={class:"property-value"},A$={key:1,class:"tab-content"},T$={class:"color-picker"},D$={class:"color-grid"},O$=["onClick"],N$={class:"style-controls"},I$={class:"style-group"},B$={class:"style-inputs"},R$={class:"value-label"},F$={class:"style-group"},j$=["value"],z$={key:0,class:"style-group"},$$={class:"style-inputs"},V$={class:"value-label"},U$=Rs({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=Ct(!1);Zs(()=>{r(),window.addEventListener("resize",r)});const r=()=>{n.value=window.innerWidth<768},i=t,s=Mp(),o=ma();Xn(()=>o.isAdmin),Xn(()=>o.isEntreprise);const a=NE();zy(),iu({name:""}),Ct(!1);const l=Ct(["forages","clients","entrepots","livraisons","cultures","parcelles"]),c=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note"}],d=ke=>{switch(ke){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},p=Ct("tools");Ai(()=>i.selectedTool,(ke,W)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:ke,oldTool:W})}),Ai(p,(ke,W)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:ke,oldTab:W}),ke==="filters"&&W!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...F.accessLevels},categories:{...F.categories},shapeTypes:{...F.shapeTypes}},null,2)),i.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),oe("tool-selected","")),setTimeout(()=>{R()},0)),W==="filters"&&ke!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...F.accessLevels},categories:{...F.categories},shapeTypes:{...F.shapeTypes}},null,2)),R())}),Ct({samplePoints:!0,circleSections:!0});const v=Ct("#2b6451"),g=Ct(2),x=Ct("solid"),E=Ct("#2b6451"),k=Ct(.2),A=Ct(!0),D=Ct(""),z=Ct("default"),X=Ct("visitor"),re=Ct({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),ge=Ct({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),fe=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],N=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}];Ct("company");const F=iu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}});console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...F.accessLevels},categories:{...F.categories},shapeTypes:{...F.shapeTypes}},store:{accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}}},null,2));const Y=Xn(()=>i.selectedShape&&i.selectedShape.properties||null),B=ke=>{v.value=ke,E.value=ke,I({strokeColor:ke,fillColor:ke})},I=ke=>{if(i.selectedShape){if(ke.strokeStyle){switch(ke.strokeStyle){case"dashed":ke.dashArray="10, 10";break;case"dotted":ke.dashArray="2, 8";break;case"solid":ke.dashArray=null;break}delete ke.strokeStyle}oe("style-update",ke)}},R=()=>{const ke={...F.accessLevels},W={...F.categories},V={...F.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:ke,categories:W,shapeTypes:V},null,2));const K={accessLevels:ke,categories:W,shapeTypes:V};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(K,null,2)),s.updateFilters(K),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),oe("filter-change",K),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:K}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},q=ke=>`${Math.round(ke)} m`,U=ke=>ke>=1e4?`${(ke/1e4).toFixed(2)} ha`:`${Math.round(ke)} m²`,$=ke=>`${ke.toFixed(1)}%`,oe=e;cm(()=>{var ke,W,V,K,pe,he,te;if(i.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:i.selectedShape.type,properties:i.selectedShape.properties,options:i.selectedShape.options,layer:(ke=i.selectedShape.layer)==null?void 0:ke._leaflet_id});const le=i.selectedShape.options||{};v.value=le.color||"#2b6451",g.value=le.weight||3,le.dashArray==="10, 10"?x.value="dashed":le.dashArray==="2, 8"?x.value="dotted":x.value="solid",E.value=le.fillColor||"#2b6451",k.value=le.fillOpacity||.2;const Q=i.selectedShape.type||((W=i.selectedShape.properties)==null?void 0:W.type)||"";A.value=Q!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",Q),D.value=((V=i.selectedShape.properties)==null?void 0:V.name)||"",z.value=((K=i.selectedShape.properties)==null?void 0:K.category)||"forages",X.value=((pe=i.selectedShape.properties)==null?void 0:pe.accessLevel)||"visitor",Q==="ElevationLine"&&((he=i.selectedShape.properties)!=null&&he.samplePointStyle&&(re.value={...i.selectedShape.properties.samplePointStyle}),(te=i.selectedShape.properties)!=null&&te.minMaxPointStyle&&(ge.value={...i.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),Zs(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const ke=s.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...ke.accessLevels},categories:{...ke.categories},shapeTypes:{...ke.shapeTypes}},null,2)),F.accessLevels.company=ke.accessLevels.company,F.accessLevels.employee=ke.accessLevels.employee,F.accessLevels.visitor=ke.accessLevels.visitor,F.categories.forages=ke.categories.forages,F.categories.clients=ke.categories.clients,F.categories.entrepots=ke.categories.entrepots,F.categories.livraisons=ke.categories.livraisons,F.categories.cultures=ke.categories.cultures,F.categories.parcelles=ke.categories.parcelles,F.shapeTypes.Polygon=ke.shapeTypes.Polygon,F.shapeTypes.Line=ke.shapeTypes.Line,F.shapeTypes.ElevationLine=ke.shapeTypes.ElevationLine,F.shapeTypes.Note=ke.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const W=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",W);const V=[];W.forEach(K=>{!l.value.includes(K)&&!F.categories[K]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${K}`),F.categories[K]=!0,V.push(K))}),V.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",V),s.updateFilters({categories:F.categories}),oe("filter-change",F))}catch(W){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",W)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...F.accessLevels},categories:{...F.categories},shapeTypes:{...F.shapeTypes}},null,2))}),Ai(F,(ke,W)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:p.value,newFilters:JSON.stringify({accessLevels:ke.accessLevels,categories:ke.categories,shapeTypes:ke.shapeTypes}),oldFilters:JSON.stringify({accessLevels:W.accessLevels,categories:W.categories,shapeTypes:W.shapeTypes})});const V=Object.keys(ke.accessLevels).filter(te=>W.accessLevels[te]!==ke.accessLevels[te]),K=Object.keys(ke.categories).filter(te=>W.categories[te]!==ke.categories[te]),pe=Object.keys(ke.shapeTypes).filter(te=>W.shapeTypes[te]!==ke.shapeTypes[te]),he=V.length>0||K.length>0||pe.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:V,categoriesDiff:K,shapeTypesDiff:pe,hasChanges:he}),p.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),R()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const J=ke=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",ke,"Outil actuel:",i.selectedTool),oe("tool-selected",i.selectedTool===ke?"":ke),window.innerWidth<768&&oe("update:show",!1)},_e=()=>{var ke;if(console.log("[DrawingTools][editGeoNote] Édition de la GeoNote"),i.selectedShape&&((ke=i.selectedShape.properties)==null?void 0:ke.type)==="Note"){const W=i.selectedShape.layer;W&&typeof W.editNote=="function"?(W.editNote(),console.log("[DrawingTools][editGeoNote] Méthode editNote appelée avec succès")):console.error("[DrawingTools][editGeoNote] La méthode editNote n'est pas disponible sur la couche")}},ve=()=>{var ke;if(console.log("[DrawingTools][openGeoNoteRoute] Ouverture de l'itinéraire pour la GeoNote"),i.selectedShape&&((ke=i.selectedShape.properties)==null?void 0:ke.type)==="Note"){const W=i.selectedShape.layer;W&&typeof W.openInGoogleMaps=="function"?(W.openInGoogleMaps(),console.log("[DrawingTools][openGeoNoteRoute] Méthode openInGoogleMaps appelée avec succès")):console.error("[DrawingTools][openGeoNoteRoute] La méthode openInGoogleMaps n'est pas disponible sur la couche")}};return(ke,W)=>{var V,K,pe,he;return n.value?(Ae(),da(Ig,{key:0,to:"body"},[C("div",{class:gi(["drawing-tools-panel",{open:t.show}])},[C("div",Lz,[C("div",Sz,[W[28]||(W[28]=C("div",{class:"drag-handle"},[C("div",{class:"handle-bar"})],-1)),W[29]||(W[29]=C("h3",{class:"header-title"},"Outils de dessin",-1)),C("button",{onClick:W[0]||(W[0]=te=>ke.$emit("update:show",!1)),class:"close-button"},W[27]||(W[27]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),C("div",Cz,[C("button",{onClick:W[1]||(W[1]=te=>p.value="tools"),class:gi(["tab-button",{active:p.value==="tools"}])},W[30]||(W[30]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),C("span",null,"Outils",-1)]),2),t.selectedShape&&((V=t.selectedShape.properties)==null?void 0:V.type)!=="Note"?(Ae(),Ne("button",{key:0,onClick:W[2]||(W[2]=te=>p.value="style"),class:gi(["tab-button",{active:p.value==="style"}])},W[31]||(W[31]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),C("span",null,"Style",-1)]),2)):Jt("",!0)]),C("div",Ez,[p.value==="tools"?(Ae(),Ne("div",Pz,[C("div",Mz,[(Ae(!0),Ne(wn,null,Qn(c.filter(te=>te.type!=="delete"),te=>(Ae(),Ne("button",{key:te.type,class:gi(["tool-button",{active:i.selectedTool===te.type}]),onClick:le=>J(te.type),title:te.label},[C("span",{class:"icon",innerHTML:d(te.type)},null,8,Az),C("span",Tz,Et(te.label),1)],10,kz))),128))]),t.selectedShape&&Y.value&&Y.value.type==="Note"?(Ae(),Ne("div",Dz,[C("button",{class:"action-button edit",onClick:_e},W[32]||(W[32]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),C("span",null,"Éditer",-1)])),C("button",{class:"action-button route",onClick:ve},W[33]||(W[33]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),C("span",null,"Itinéraire",-1)]))])):Jt("",!0),t.selectedShape?(Ae(),Ne("button",{key:1,class:gi(["delete-button",{active:i.selectedTool==="delete"}]),onClick:W[3]||(W[3]=te=>ke.$emit("delete-shape"))},W[34]||(W[34]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C("span",null,"Supprimer",-1)]),2)):Jt("",!0),t.selectedShape&&Y.value?(Ae(),Ne("div",Oz,[C("div",Nz,[W[41]||(W[41]=C("h4",{class:"property-title"},"Propriétés",-1)),C("div",Iz,[Y.value.type==="Polygon"?(Ae(),Ne(wn,{key:0},[C("div",Bz,[W[35]||(W[35]=C("span",{class:"property-label"},"Surface",-1)),C("span",Rz,Et(U(Y.value.surface||0)),1)]),C("div",Fz,[W[36]||(W[36]=C("span",{class:"property-label"},"Périmètre",-1)),C("span",jz,Et(q(Y.value.perimeter||0)),1)])],64)):Y.value.type==="Line"?(Ae(),Ne("div",zz,[W[37]||(W[37]=C("span",{class:"property-label"},"Longueur",-1)),C("span",$z,Et(q(Y.value.length||0)),1)])):Y.value.type==="ElevationLine"?(Ae(),Ne(wn,{key:2},[C("div",Vz,[W[38]||(W[38]=C("span",{class:"property-label"},"Longueur",-1)),C("span",Uz,Et(q(Y.value.length||0)),1)]),C("div",Hz,[W[39]||(W[39]=C("span",{class:"property-label"},"Dénivelé",-1)),C("span",Wz,Et(q(Y.value.elevation||0)),1)]),C("div",Gz,[W[40]||(W[40]=C("span",{class:"property-label"},"Pente",-1)),C("span",qz,Et($(Y.value.slope||0)),1)])],64)):Jt("",!0)])])])):Jt("",!0)])):Jt("",!0),p.value==="style"&&t.selectedShape&&((K=t.selectedShape.properties)==null?void 0:K.type)!=="Note"?(Ae(),Ne("div",Yz,[C("div",Kz,[C("div",Zz,[(Ae(),Ne(wn,null,Qn(fe,te=>C("button",{key:te,class:"color-button",style:Nl({backgroundColor:te}),onClick:le=>B(te)},null,12,Xz)),64))])]),C("div",Jz,[C("div",Qz,[W[42]||(W[42]=C("h4",{class:"style-title"},"Contour",-1)),C("div",e$,[er(C("input",{type:"color","onUpdate:modelValue":W[4]||(W[4]=te=>v.value=te),onChange:W[5]||(W[5]=te=>I({strokeColor:v.value}))},null,544),[[Li,v.value]]),er(C("input",{type:"range","onUpdate:modelValue":W[6]||(W[6]=te=>g.value=te),min:"1",max:"10",onChange:W[7]||(W[7]=te=>I({strokeWidth:g.value}))},null,544),[[Li,g.value]]),C("span",t$,Et(g.value)+"px",1)])]),C("div",n$,[W[43]||(W[43]=C("h4",{class:"style-title"},"Style de trait",-1)),er(C("select",{"onUpdate:modelValue":W[8]||(W[8]=te=>x.value=te),onChange:W[9]||(W[9]=te=>I({strokeStyle:x.value})),class:"style-select"},[(Ae(),Ne(wn,null,Qn(N,te=>C("option",{key:te.value,value:te.value},Et(te.label),9,r$)),64))],544),[[us,x.value]])]),A.value?(Ae(),Ne("div",i$,[W[44]||(W[44]=C("h4",{class:"style-title"},"Remplissage",-1)),C("div",s$,[er(C("input",{type:"color","onUpdate:modelValue":W[10]||(W[10]=te=>E.value=te),onChange:W[11]||(W[11]=te=>I({fillColor:E.value}))},null,544),[[Li,E.value]]),er(C("input",{type:"range","onUpdate:modelValue":W[12]||(W[12]=te=>k.value=te),min:"0",max:"1",step:"0.1",onChange:W[13]||(W[13]=te=>I({fillOpacity:k.value}))},null,544),[[Li,k.value]]),C("span",o$,Et(Math.round(k.value*100))+"%",1)])])):Jt("",!0)])])):Jt("",!0)])],2)])):(Ae(),Ne("div",{key:1,class:gi(["drawing-tools-panel",{open:t.show}])},[C("div",a$,[C("button",{onClick:W[14]||(W[14]=te=>p.value="tools"),class:gi(["tab-button",{active:p.value==="tools"}])},W[45]||(W[45]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),C("span",null,"Outils",-1)]),2),t.selectedShape&&((pe=t.selectedShape.properties)==null?void 0:pe.type)!=="Note"?(Ae(),Ne("button",{key:0,onClick:W[15]||(W[15]=te=>p.value="style"),class:gi(["tab-button",{active:p.value==="style"}])},W[46]||(W[46]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),C("span",null,"Style",-1)]),2)):Jt("",!0)]),C("div",l$,[p.value==="tools"?(Ae(),Ne("div",u$,[C("div",c$,[(Ae(!0),Ne(wn,null,Qn(c.filter(te=>te.type!=="delete"),te=>(Ae(),Ne("button",{key:te.type,class:gi(["tool-button",{active:i.selectedTool===te.type}]),onClick:le=>J(te.type),title:te.label},[C("span",{class:"icon",innerHTML:d(te.type)},null,8,d$),C("span",f$,Et(te.label),1)],10,h$))),128))]),t.selectedShape&&Y.value&&Y.value.type==="Note"?(Ae(),Ne("div",p$,[C("button",{class:"action-button edit",onClick:_e},W[47]||(W[47]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),C("span",null,"Éditer",-1)])),C("button",{class:"action-button route",onClick:ve},W[48]||(W[48]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),C("span",null,"Itinéraire",-1)]))])):Jt("",!0),t.selectedShape?(Ae(),Ne("button",{key:1,class:gi(["delete-button",{active:i.selectedTool==="delete"}]),onClick:W[16]||(W[16]=te=>ke.$emit("delete-shape"))},W[49]||(W[49]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C("span",null,"Supprimer",-1)]),2)):Jt("",!0),t.selectedShape&&Y.value?(Ae(),Ne("div",g$,[C("div",m$,[W[56]||(W[56]=C("h4",{class:"property-title"},"Propriétés",-1)),C("div",v$,[Y.value.type==="Polygon"?(Ae(),Ne(wn,{key:0},[C("div",y$,[W[50]||(W[50]=C("span",{class:"property-label"},"Surface",-1)),C("span",b$,Et(U(Y.value.surface||0)),1)]),C("div",_$,[W[51]||(W[51]=C("span",{class:"property-label"},"Périmètre",-1)),C("span",w$,Et(q(Y.value.perimeter||0)),1)])],64)):Y.value.type==="Line"?(Ae(),Ne("div",x$,[W[52]||(W[52]=C("span",{class:"property-label"},"Longueur",-1)),C("span",L$,Et(q(Y.value.length||0)),1)])):Y.value.type==="ElevationLine"?(Ae(),Ne(wn,{key:2},[C("div",S$,[W[53]||(W[53]=C("span",{class:"property-label"},"Longueur",-1)),C("span",C$,Et(q(Y.value.length||0)),1)]),C("div",E$,[W[54]||(W[54]=C("span",{class:"property-label"},"Dénivelé",-1)),C("span",P$,Et(q(Y.value.elevation||0)),1)]),C("div",M$,[W[55]||(W[55]=C("span",{class:"property-label"},"Pente",-1)),C("span",k$,Et($(Y.value.slope||0)),1)])],64)):Jt("",!0)])])])):Jt("",!0)])):Jt("",!0),p.value==="style"&&t.selectedShape&&((he=t.selectedShape.properties)==null?void 0:he.type)!=="Note"?(Ae(),Ne("div",A$,[C("div",T$,[C("div",D$,[(Ae(),Ne(wn,null,Qn(fe,te=>C("button",{key:te,class:"color-button",style:Nl({backgroundColor:te}),onClick:le=>B(te)},null,12,O$)),64))])]),C("div",N$,[C("div",I$,[W[57]||(W[57]=C("h4",{class:"style-title"},"Contour",-1)),C("div",B$,[er(C("input",{type:"color","onUpdate:modelValue":W[17]||(W[17]=te=>v.value=te),onChange:W[18]||(W[18]=te=>I({strokeColor:v.value}))},null,544),[[Li,v.value]]),er(C("input",{type:"range","onUpdate:modelValue":W[19]||(W[19]=te=>g.value=te),min:"1",max:"10",onChange:W[20]||(W[20]=te=>I({strokeWidth:g.value}))},null,544),[[Li,g.value]]),C("span",R$,Et(g.value)+"px",1)])]),C("div",F$,[W[58]||(W[58]=C("h4",{class:"style-title"},"Style de trait",-1)),er(C("select",{"onUpdate:modelValue":W[21]||(W[21]=te=>x.value=te),onChange:W[22]||(W[22]=te=>I({strokeStyle:x.value})),class:"style-select"},[(Ae(),Ne(wn,null,Qn(N,te=>C("option",{key:te.value,value:te.value},Et(te.label),9,j$)),64))],544),[[us,x.value]])]),A.value?(Ae(),Ne("div",z$,[W[59]||(W[59]=C("h4",{class:"style-title"},"Remplissage",-1)),C("div",$$,[er(C("input",{type:"color","onUpdate:modelValue":W[23]||(W[23]=te=>E.value=te),onChange:W[24]||(W[24]=te=>I({fillColor:E.value}))},null,544),[[Li,E.value]]),er(C("input",{type:"range","onUpdate:modelValue":W[25]||(W[25]=te=>k.value=te),min:"0",max:"1",step:"0.1",onChange:W[26]||(W[26]=te=>I({fillOpacity:k.value}))},null,544),[[Li,k.value]]),C("span",V$,Et(Math.round(k.value*100))+"%",1)])])):Jt("",!0)])])):Jt("",!0)])],2))}}}),H$=nh(U$,[["__scopeId","data-v-46fc6667"]]),W$={class:"map-toolbar w-full"},G$={class:"hidden md:flex items-center space-x-2"},q$={class:"dropdown"},Y$={class:"dropdown-menu"},K$=["onClick"],Z$={key:0,class:"border-l pl-2 flex-1"},X$={class:"flex items-center"},J$={class:"plan-info"},Q$={class:"plan-name"},eV={key:0,class:"plan-description"},tV={class:"border-l pl-2 ml-auto"},nV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},iV={key:"saving"},sV={key:"success",class:"save-success-text"},oV={key:"default"},aV={class:"md:hidden"},lV={class:"flex justify-between items-center"},uV={key:0,class:"truncate mx-2 text-sm font-medium"},cV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},hV={class:"flex justify-between items-center mb-3 border-b pb-2"},dV={class:"flex flex-col space-y-4"},fV={key:0,class:"flex flex-col pb-3 border-b"},pV={class:"text-sm font-semibold text-gray-800"},gV={key:0,class:"text-xs text-gray-600 mt-1"},mV={class:"flex flex-col"},vV={class:"grid grid-cols-3 gap-2"},yV=["onClick"],bV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_V={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},wV={key:"saving"},xV={key:"success",class:"save-success-text"},LV={key:"default"},SV=Rs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=Ct("Hybride"),s=Ct(!1),o=k=>{const A=k.currentTarget,D=A.nextElementSibling;if(D&&D.classList.contains("dropdown-menu")){const z=A.getBoundingClientRect();D.style.top=`${z.bottom}px`,D.style.left=`${z.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Xn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=k=>{i.value=k,n("change-map-type",k),E()},d=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},g=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(k,A)=>(Ae(),Ne("div",W$,[C("div",G$,[C("div",q$,[C("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[A[2]||(A[2]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),C("span",null,Et(a[i.value]),1)],32),C("div",Y$,[(Ae(),Ne(wn,null,Qn(a,(D,z)=>C("button",{key:z,class:gi(["dropdown-item",{active:z===i.value}]),onClick:X=>c(z)},Et(D),11,K$)),64))])]),k.planName?(Ae(),Ne("div",Z$,[C("div",X$,[C("div",J$,[C("h2",Q$,Et(k.planName),1),k.planDescription?(Ae(),Ne("p",eV,Et(k.planDescription),1)):Jt("",!0)])])])):Jt("",!0),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:d,class:"btn-toolbar",title:"Nouveau plan"},A[3]||(A[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),C("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},A[4]||(A[4]=[Lu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b4cc3353><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b4cc3353></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b4cc3353></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b4cc3353></path></svg><span class="hidden lg:inline ml-1" data-v-b4cc3353>Charger</span>',2)])),C("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},A[5]||(A[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:g,class:"btn-toolbar",title:"Ajuster la vue"},A[6]||(A[6]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),C("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},A[7]||(A[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),C("div",tV,[C("div",{class:gi(["text-xs hidden lg:flex items-center",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Ae(),Ne("svg",nV,A[8]||(A[8]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),k.saveStatus==="success"?(Ae(),Ne("svg",rV,A[9]||(A[9]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),mi(Z2,{name:"fade-slide",mode:"out-in"},{default:Wu(()=>[k.saveStatus==="saving"?(Ae(),Ne("span",iV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Ae(),Ne("span",sV," Sauvegarde réussie ! ")):(Ae(),Ne("span",oV," Dernière modification : "+Et(l.value),1))]),_:1})],2)])]),C("div",aV,[C("div",lV,[C("button",{onClick:A[0]||(A[0]=D=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},A[10]||(A[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),k.planName?(Ae(),Ne("div",uV,Et(k.planName),1)):Jt("",!0),C("div",{class:"flex space-x-2"},[C("button",{onClick:d,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[11]||(A[11]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),C("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[12]||(A[12]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),C("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[13]||(A[13]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Ae(),Ne("div",cV,[C("div",hV,[A[15]||(A[15]=C("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),C("button",{onClick:A[1]||(A[1]=D=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},A[14]||(A[14]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",dV,[k.planName?(Ae(),Ne("div",fV,[C("h3",pV,Et(k.planName),1),k.planDescription?(Ae(),Ne("p",gV,Et(k.planDescription),1)):Jt("",!0)])):Jt("",!0),C("div",mV,[A[16]||(A[16]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),C("div",vV,[(Ae(),Ne(wn,null,Qn(a,(D,z)=>C("button",{key:z,class:gi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":z===i.value}]),onClick:X=>c(z)},Et(D),11,yV)),64))])]),C("div",{class:"flex flex-col"},[A[20]||(A[20]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),C("div",{class:"grid grid-cols-3 gap-2"},[C("button",{onClick:d,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[17]||(A[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),ci(" Nouveau ")])),C("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[18]||(A[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),C("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),C("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ci(" Charger ")])),C("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[19]||(A[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ci(" Synthèse ")]))])]),C("div",{class:gi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Ae(),Ne("svg",bV,A[21]||(A[21]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),k.saveStatus==="success"?(Ae(),Ne("svg",_V,A[22]||(A[22]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),mi(Z2,{name:"fade-slide",mode:"out-in"},{default:Wu(()=>[k.saveStatus==="saving"?(Ae(),Ne("span",wV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Ae(),Ne("span",xV," Sauvegarde réussie ! ")):(Ae(),Ne("span",LV," Dernière modification : "+Et(l.value),1))]),_:1})],2)])])):Jt("",!0)])]))}}),CV=nh(SV,[["__scopeId","data-v-b4cc3353"]]),EV={class:"comment-thread"},PV={key:0,class:"space-y-3 mb-4"},MV={class:"flex justify-between items-start"},kV={class:"flex items-center"},AV={class:"font-medium text-sm text-gray-900"},TV={class:"flex items-center"},DV={class:"text-xs text-gray-500"},OV=["onClick"],NV={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},IV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},BV={key:2,class:"mt-3"},RV={class:"flex justify-end mt-2"},FV=["disabled"],jV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},zV=Rs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reçus initialement:",n.comments),Ai(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=ma(),s=yf(),o=ru(),a=Ct(""),l=Xn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function d(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const A=k.response.data;A.note?o.error(`Erreur: ${A.note[0]}`):A.user?o.error(`Erreur: ${A.user[0]}`):A.text?o.error(`Erreur: ${A.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(A){if(console.error("Erreur lors de la suppression du commentaire:",A),(k=A.response)!=null&&k.data){const D=A.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function g(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(Ae(),Ne("div",EV,[E.comments&&E.comments.length>0?(Ae(),Ne("div",PV,[(Ae(!0),Ne(wn,null,Qn(E.comments,A=>(Ae(),Ne("div",{key:A.id,class:"bg-gray-50 rounded-lg p-3"},[C("div",MV,[C("div",kV,[C("div",AV,Et(A.userName),1),C("span",{class:gi(["ml-2 text-xs px-2 py-0.5 rounded-full",g(A.userRole)])},Et(x(A.userRole)),3)]),C("div",TV,[C("span",DV,Et(v(A.createdAt)),1),c(A)?(Ae(),Ne("button",{key:0,onClick:tu(D=>p(A.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,OV)):Jt("",!0)])]),C("p",NV,Et(A.text),1)]))),128))])):(Ae(),Ne("div",IV," Aucun commentaire pour le moment ")),l.value?(Ae(),Ne("div",BV,[er(C("textarea",{"onUpdate:modelValue":k[0]||(k[0]=A=>a.value=A),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Li,a.value]]),C("div",RV,[C("button",{type:"button",onClick:tu(d,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,FV)])])):(Ae(),Ne("div",jV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),$V={class:"photo-gallery"},VV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},UV=["src","onClick"],HV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},WV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},GV=["onClick"],qV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},YV={class:"flex space-x-2 mt-3"},KV={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},ZV={class:"relative bg-gray-900",style:{height:"300px"}},XV=["src"],JV={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},QV={key:1,class:"flex space-x-3"},eU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},tU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},nU=["src"],rU=Rs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=yf(),s=ru(),o=Ct(null),a=Ct(null),l=Ct(null);let c=null;const d=Ct(!1),p=Ct(!1),v=Ct(null),g=Ct(null);function x(fe){v.value=fe,d.value=!0}async function E(fe){var N;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,fe),s.success("Photo supprimée"),r("photo-deleted"),d.value&&((N=v.value)==null?void 0:N.id)===fe&&(d.value=!1,v.value=null)}catch(F){console.error("Erreur lors de la suppression de la photo:",F),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function A(fe){const N=fe.target;if(!N.files||N.files.length===0)return;const F=N.files[0];if(!F.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(F.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const Y=await D(F);await i.addPhoto(n.noteId,{url:Y}),N.value="",s.success("Photo ajoutée"),r("photo-added")}catch(Y){console.error("Erreur lors de l'ajout de la photo:",Y),s.error("Erreur lors de l'ajout de la photo")}}function D(fe){return new Promise((N,F)=>{const Y=new FileReader;Y.onload=()=>N(Y.result),Y.onerror=F,Y.readAsDataURL(fe)})}Ai(p,async fe=>{if(fe){g.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const N={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(N),o.value&&(o.value.srcObject=c,await new Promise(F=>{o.value.onloadedmetadata=()=>{o.value.play().then(F)}}))}catch(N){console.error("Erreur lors de l'accès à la caméra:",N);let F="Impossible d'accéder à la caméra";N.name==="NotAllowedError"?F="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":N.name==="NotFoundError"?F="Aucune caméra n'a été trouvée sur votre appareil.":N.name==="NotSupportedError"&&(F="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(F),p.value=!1}}else c&&(c.getTracks().forEach(N=>N.stop()),c=null)});function z(){if(!o.value||!a.value)return;const fe=o.value,N=a.value;N.width=fe.videoWidth,N.height=fe.videoHeight;const F=N.getContext("2d");F&&(F.drawImage(fe,0,0,N.width,N.height),g.value=N.toDataURL("image/jpeg"))}function X(){g.value=null}async function re(){if(g.value)try{await i.addPhoto(n.noteId,{url:g.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(fe){console.error("Erreur lors de l'ajout de la photo:",fe),s.error("Erreur lors de l'ajout de la photo")}}function ge(){p.value=!1}return Ku(()=>{c&&(c.getTracks().forEach(fe=>fe.stop()),c=null)}),(fe,N)=>(Ae(),Ne("div",$V,[fe.photos&&fe.photos.length>0?(Ae(),Ne("div",VV,[(Ae(!0),Ne(wn,null,Qn(fe.photos,F=>(Ae(),Ne("div",{key:F.id,class:"relative group"},[C("img",{src:F.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:Y=>x(F)},null,8,UV),C("div",HV,[C("div",WV,[C("button",{onClick:tu(Y=>E(F.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},N[2]||(N[2]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,GV)])])]))),128))])):(Ae(),Ne("div",qV," Aucune photo pour le moment ")),C("div",YV,[C("button",{type:"button",onClick:N[0]||(N[0]=F=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[3]||(N[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),ci(" Prendre une photo ")])),C("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},N[4]||(N[4]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),ci(" Téléverser ")])),C("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544)]),p.value?(Ae(),Ne("div",KV,[C("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[N[6]||(N[6]=C("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),C("button",{type:"button",onClick:ge,class:"text-gray-400 hover:text-gray-500"},N[5]||(N[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",ZV,[g.value?(Ae(),Ne("img",{key:1,src:g.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,XV)):(Ae(),Ne("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),C("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),C("div",JV,[g.value?(Ae(),Ne("div",QV,[C("button",{type:"button",onClick:X,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),C("button",{type:"button",onClick:re,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ae(),Ne("button",{key:0,type:"button",onClick:z,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[7]||(N[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Jt("",!0),d.value?(Ae(),Ne("div",eU,[C("div",tU,[C("button",{type:"button",onClick:N[1]||(N[1]=F=>d.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},N[8]||(N[8]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Ae(),Ne("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,nU)):Jt("",!0)])])):Jt("",!0)]))}}),iU=nh(rU,[["__scopeId","data-v-f87156b4"]]),sU={class:"modal-container"},oU={class:"modal-header"},aU={class:"modal-title"},lU={class:"modal-tabs"},uU={key:0,class:"badge"},cU={key:0,class:"badge"},hU={class:"modal-content"},dU={key:0,class:"tab-content"},fU={class:"form-group"},pU={class:"form-group"},gU={key:0,class:"location-indicator"},mU={class:"form-group"},vU=["value"],yU={class:"form-group"},bU=["value"],_U={class:"form-group"},wU={class:"color-picker"},xU=["onClick"],LU={key:1,class:"tab-content"},SU={key:2,class:"tab-content"},CU=Rs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=yf(),s=ru(),o=Ct("info"),a=window.console;Ai(o,async Y=>{a.log("[NoteEditModal] Onglet actif changé:",Y),Y==="comments"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",l.value.comments),await p(n.note.id)),Y==="photos"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",l.value.photos),await v(n.note.id))});const l=Ct({title:"",description:"",columnId:"",accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function c(Y){return Array.isArray(Y)?Y:typeof Y=="object"&&"type"in Y&&"coordinates"in Y?[Y.coordinates[1],Y.coordinates[0]]:(a.error("[NoteEditModal] Format de localisation non reconnu:",Y),[0,0])}function d(Y){if(!Y)return new Date().toISOString();try{const B=new Date(Y);return isNaN(B.getTime())?(a.warn("[NoteEditModal] Date invalide:",Y),new Date().toISOString()):B.toISOString()}catch(B){return a.error("[NoteEditModal] Erreur lors de la création de la date:",B),new Date().toISOString()}}async function p(Y){try{a.log(`[NoteEditModal] Chargement des commentaires pour la note ${Y}`);const B=await Ca.getComments(Y);a.log("[NoteEditModal] Commentaires reçus:",B.data);const I=B.data.map(R=>({id:R.id,text:R.text,createdAt:R.created_at,userId:R.user,userName:R.user_name,userRole:R.user_role}));return a.log("[NoteEditModal] Commentaires transformés:",I),n.note&&(i.updateNote(n.note.id,{comments:I}),l.value.comments=I,a.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),a.log("[NoteEditModal] editingNote.comments après mise à jour:",l.value.comments)),I}catch(B){return a.error("[NoteEditModal] Erreur lors du chargement des commentaires:",B),s.error("Erreur lors du chargement des commentaires"),[]}}async function v(Y){try{a.log(`[NoteEditModal] Chargement des photos pour la note ${Y}`);const B=await Ca.getPhotos(Y);a.log("[NoteEditModal] Photos reçues:",B.data);const I=B.data.map(R=>({id:R.id,url:R.image,createdAt:R.created_at,caption:R.caption}));return n.note&&(i.updateNote(n.note.id,{photos:I}),l.value.photos=I,a.log("[NoteEditModal] Photos mises à jour dans le store et localement")),I}catch(B){return a.error("[NoteEditModal] Erreur lors du chargement des photos:",B),s.error("Erreur lors du chargement des photos"),[]}}Zs(async()=>{var Y,B;if(a.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),a.log("[NoteEditModal] Colonnes chargées:",i.columns),n.note){a.log("[NoteEditModal] Édition d'une note existante:",n.note);const I=JSON.parse(JSON.stringify(n.note));I.createdAt=d(I.createdAt),I.updatedAt=d(I.updatedAt),l.value=I,n.note.id&&(a.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([p(n.note.id),v(n.note.id)]),a.log("[NoteEditModal] Après chargement - Commentaires:",((Y=l.value.comments)==null?void 0:Y.length)||0),a.log("[NoteEditModal] Après chargement - Photos:",((B=l.value.photos)==null?void 0:B.length)||0),setTimeout(()=>{a.log("[NoteEditModal] Compteurs après timeout - Commentaires:",x.value),a.log("[NoteEditModal] Compteurs après timeout - Photos:",E.value)},0))}else if(n.isNewNote){if(a.log("[NoteEditModal] Création d'une nouvelle note"),l.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Yi.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n.location){a.log("[NoteEditModal] Ajout de la localisation:",n.location);const I=c(n.location);l.value.location=I}a.log("[NoteEditModal] Niveau d'accès initial:",l.value.accessLevel)}else a.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");a.log("[NoteEditModal] editingNote.value après initialisation:",l.value)});const g=Xn(()=>i.getSortedColumns),x=Xn(()=>{var B;const Y=((B=l.value.comments)==null?void 0:B.length)||0;return a.log("[NoteEditModal] Computed commentsCount recalculé:",Y),Y}),E=Xn(()=>{var B;const Y=((B=l.value.photos)==null?void 0:B.length)||0;return a.log("[NoteEditModal] Computed photosCount recalculé:",Y),Y}),k=[{id:Yi.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Yi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Yi.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Yi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],A=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],D=Y=>{var B;if(l.value.style?(l.value.style.color=Y,l.value.style.fillColor=Y):l.value.style={color:Y,weight:2,opacity:1,fillColor:Y,fillOpacity:.6,radius:8},l.value.color=Y,(B=n.note)!=null&&B.id){a.log("[NoteEditModal] Émission de l'événement de mise à jour de couleur:",Y);const I=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:Y,fillColor:Y}}});window.dispatchEvent(I);const R=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style}}});window.dispatchEvent(R)}},z=()=>{var Y,B,I,R,q,U,$,oe;l.value={title:((Y=n.note)==null?void 0:Y.title)||"",description:((B=n.note)==null?void 0:B.description)||"",columnId:((I=n.note)==null?void 0:I.columnId)||"",accessLevel:((R=n.note)==null?void 0:R.accessLevel)||"private",style:((q=n.note)==null?void 0:q.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((U=n.note)==null?void 0:U.location)||null,comments:(($=n.note)==null?void 0:$.comments)||[],photos:((oe=n.note)==null?void 0:oe.photos)||[]}};Zs(()=>{z()}),Ai(()=>n.note,()=>{z()},{deep:!0});function X(){r("close")}async function re(){a.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),n.note&&n.note.id&&await p(n.note.id)}async function ge(){a.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),n.note&&n.note.id&&await v(n.note.id)}async function fe(){a.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),n.note&&n.note.id&&await p(n.note.id)}async function N(){a.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),n.note&&n.note.id&&await v(n.note.id)}async function F(){var Y;try{const B=l.value.style.color;l.value.style={...l.value.style,color:B,fillColor:B,weight:2,opacity:1,fillOpacity:.6,radius:8};const I={title:l.value.title,description:l.value.description,columnId:l.value.columnId,style:l.value.style,access_level:l.value.accessLevel,comments:l.value.comments||[],photos:l.value.photos||[],color:B};l.value.location&&(I.location=Array.isArray(l.value.location)?{type:"Point",coordinates:[l.value.location[1],l.value.location[0]]}:l.value.location),a.log("[NoteEditModal] Données de note à sauvegarder:",I);let R;if((Y=n.note)!=null&&Y.id){R=(await Ca.updateNote(n.note.id,I)).data,i.updateNote(n.note.id,{...l.value,...R,accessLevel:l.value.accessLevel,style:l.value.style,color:B,updatedAt:new Date().toISOString()});const U=n.note.id,$=new CustomEvent("geonote:update",{detail:{noteId:U,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style,color:B}}});window.dispatchEvent($),s.success("Note mise à jour avec succès")}else{if(R=(await Ca.createNote(I)).data,!R.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const U=i.getDefaultColumn,$={...I,id:R.id,columnId:I.columnId||U.id,accessLevel:l.value.accessLevel,style:I.style,color:B};a.log("[NoteEditModal] Note à ajouter au store avec ID backend:",R.id),i.addNote($),s.success("Note créée avec succès")}R&&(!R.comments&&l.value.comments&&(R.comments=l.value.comments),!R.photos&&l.value.photos&&(R.photos=l.value.photos),R.color=B,R.style={...R.style,color:B,fillColor:B}),r("save",R),r("close")}catch(B){a.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",B),s.error("Erreur lors de la sauvegarde de la note")}}return(Y,B)=>{var I;return Ae(),Ne("div",{class:"modal-overlay",onClick:tu(X,["self"])},[C("div",sU,[C("form",{onSubmit:tu(F,["prevent"]),class:"modal-form"},[C("div",oU,[C("h3",aU,Et((I=Y.note)!=null&&I.id?"Modifier la note":"Nouvelle note"),1),C("button",{type:"button",onClick:X,class:"close-button"},B[7]||(B[7]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",lU,[C("button",{type:"button",onClick:B[0]||(B[0]=R=>o.value="info"),class:gi(["tab-button",{active:o.value==="info"}])}," Informations ",2),C("button",{type:"button",onClick:B[1]||(B[1]=R=>o.value="comments"),class:gi(["tab-button",{active:o.value==="comments"}])},[B[8]||(B[8]=ci(" Commentaires ")),x.value>0?(Ae(),Ne("span",uU,Et(x.value),1)):Jt("",!0)],2),C("button",{type:"button",onClick:B[2]||(B[2]=R=>o.value="photos"),class:gi(["tab-button",{active:o.value==="photos"}])},[B[9]||(B[9]=ci(" Photos ")),E.value>0?(Ae(),Ne("span",cU,Et(E.value),1)):Jt("",!0)],2)]),C("div",hU,[o.value==="info"?(Ae(),Ne("div",dU,[C("div",fU,[B[10]||(B[10]=C("label",{for:"title"},"Titre",-1)),er(C("input",{type:"text",id:"title","onUpdate:modelValue":B[3]||(B[3]=R=>l.value.title=R),required:""},null,512),[[Li,l.value.title]])]),C("div",pU,[B[11]||(B[11]=C("label",{for:"description"},"Description",-1)),er(C("textarea",{id:"description","onUpdate:modelValue":B[4]||(B[4]=R=>l.value.description=R),rows:"3"},null,512),[[Li,l.value.description]])]),l.value.location?(Ae(),Ne("div",gU,B[12]||(B[12]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),C("span",null,"Note géolocalisée",-1)]))):Jt("",!0),C("div",mU,[B[13]||(B[13]=C("label",{for:"column"},"État",-1)),er(C("select",{id:"column","onUpdate:modelValue":B[5]||(B[5]=R=>l.value.columnId=R)},[(Ae(!0),Ne(wn,null,Qn(g.value,R=>(Ae(),Ne("option",{key:R.id,value:R.id},Et(R.title),9,vU))),128))],512),[[us,l.value.columnId]])]),C("div",yU,[B[14]||(B[14]=C("label",{for:"accessLevel"},"Niveau d'accès",-1)),er(C("select",{id:"accessLevel","onUpdate:modelValue":B[6]||(B[6]=R=>l.value.accessLevel=R)},[(Ae(),Ne(wn,null,Qn(k,R=>C("option",{key:R.id,value:R.id},Et(R.title)+" - "+Et(R.description),9,bU)),64))],512),[[us,l.value.accessLevel]])]),C("div",_U,[B[15]||(B[15]=C("label",null,"Couleur",-1)),C("div",wU,[(Ae(),Ne(wn,null,Qn(A,R=>C("div",{key:R,class:gi(["color-option",{selected:l.value.style.color===R}]),style:Nl({backgroundColor:R}),onClick:q=>D(R)},null,14,xU)),64))])])])):o.value==="comments"?(Ae(),Ne("div",LU,[Y.note?(Ae(),da(zV,{key:0,noteId:Y.note.id,comments:l.value.comments||[],onCommentAdded:re,onCommentDeleted:fe},null,8,["noteId","comments"])):Jt("",!0)])):o.value==="photos"?(Ae(),Ne("div",SU,[Y.note?(Ae(),da(iU,{key:0,noteId:Y.note.id,photos:l.value.photos||[],onPhotoAdded:ge,onPhotoDeleted:N},null,8,["noteId","photos"])):Jt("",!0)])):Jt("",!0)]),C("div",{class:"modal-footer"},[B[16]||(B[16]=C("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),C("button",{type:"button",onClick:X,class:"secondary-button"},"Annuler")])],32)])])}}}),IE=nh(CU,[["__scopeId","data-v-bb7ee64f"]]);(()=>{var On,or;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,m)=>()=>(m||h((m={exports:{}}).exports,m),m.exports),a=(h,m,_,S)=>{if(m&&typeof m=="object"||typeof m=="function")for(let M of r(m))!s.call(h,M)&&M!==_&&e(h,M,{get:()=>m[M],enumerable:!(S=n(m,M))||S.enumerable});return h},l=(h,m,_)=>(_=h!=null?t(i(h)):{},a(m||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,m)=>{function _(){this.__data__=[],this.size=0}m.exports=_}),d=o((h,m)=>{function _(S,M){return S===M||S!==S&&M!==M}m.exports=_}),p=o((h,m)=>{var _=d();function S(M,H){for(var ne=M.length;ne--;)if(_(M[ne][0],H))return ne;return-1}m.exports=S}),v=o((h,m)=>{var _=p(),S=Array.prototype,M=S.splice;function H(ne){var ae=this.__data__,ye=_(ae,ne);if(ye<0)return!1;var Se=ae.length-1;return ye==Se?ae.pop():M.call(ae,ye,1),--this.size,!0}m.exports=H}),g=o((h,m)=>{var _=p();function S(M){var H=this.__data__,ne=_(H,M);return ne<0?void 0:H[ne][1]}m.exports=S}),x=o((h,m)=>{var _=p();function S(M){return _(this.__data__,M)>-1}m.exports=S}),E=o((h,m)=>{var _=p();function S(M,H){var ne=this.__data__,ae=_(ne,M);return ae<0?(++this.size,ne.push([M,H])):ne[ae][1]=H,this}m.exports=S}),k=o((h,m)=>{var _=c(),S=v(),M=g(),H=x(),ne=E();function ae(ye){var Se=-1,nt=ye==null?0:ye.length;for(this.clear();++Se<nt;){var We=ye[Se];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=M,ae.prototype.has=H,ae.prototype.set=ne,m.exports=ae}),A=o((h,m)=>{var _=k();function S(){this.__data__=new _,this.size=0}m.exports=S}),D=o((h,m)=>{function _(S){var M=this.__data__,H=M.delete(S);return this.size=M.size,H}m.exports=_}),z=o((h,m)=>{function _(S){return this.__data__.get(S)}m.exports=_}),X=o((h,m)=>{function _(S){return this.__data__.has(S)}m.exports=_}),re=o((h,m)=>{var _=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea;m.exports=_}),ge=o((h,m)=>{var _=re(),S=typeof self=="object"&&self&&self.Object===Object&&self,M=_||S||Function("return this")();m.exports=M}),fe=o((h,m)=>{var _=ge(),S=_.Symbol;m.exports=S}),N=o((h,m)=>{var _=fe(),S=Object.prototype,M=S.hasOwnProperty,H=S.toString,ne=_?_.toStringTag:void 0;function ae(ye){var Se=M.call(ye,ne),nt=ye[ne];try{ye[ne]=void 0;var We=!0}catch{}var _t=H.call(ye);return We&&(Se?ye[ne]=nt:delete ye[ne]),_t}m.exports=ae}),F=o((h,m)=>{var _=Object.prototype,S=_.toString;function M(H){return S.call(H)}m.exports=M}),Y=o((h,m)=>{var _=fe(),S=N(),M=F(),H="[object Null]",ne="[object Undefined]",ae=_?_.toStringTag:void 0;function ye(Se){return Se==null?Se===void 0?ne:H:ae&&ae in Object(Se)?S(Se):M(Se)}m.exports=ye}),B=o((h,m)=>{function _(S){var M=typeof S;return S!=null&&(M=="object"||M=="function")}m.exports=_}),I=o((h,m)=>{var _=Y(),S=B(),M="[object AsyncFunction]",H="[object Function]",ne="[object GeneratorFunction]",ae="[object Proxy]";function ye(Se){if(!S(Se))return!1;var nt=_(Se);return nt==H||nt==ne||nt==M||nt==ae}m.exports=ye}),R=o((h,m)=>{var _=ge(),S=_["__core-js_shared__"];m.exports=S}),q=o((h,m)=>{var _=R(),S=function(){var H=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}();function M(H){return!!S&&S in H}m.exports=M}),U=o((h,m)=>{var _=Function.prototype,S=_.toString;function M(H){if(H!=null){try{return S.call(H)}catch{}try{return H+""}catch{}}return""}m.exports=M}),$=o((h,m)=>{var _=I(),S=q(),M=B(),H=U(),ne=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,ye=Function.prototype,Se=Object.prototype,nt=ye.toString,We=Se.hasOwnProperty,_t=RegExp("^"+nt.call(We).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(en){if(!M(en)||S(en))return!1;var _n=_(en)?_t:ae;return _n.test(H(en))}m.exports=It}),oe=o((h,m)=>{function _(S,M){return S==null?void 0:S[M]}m.exports=_}),J=o((h,m)=>{var _=$(),S=oe();function M(H,ne){var ae=S(H,ne);return _(ae)?ae:void 0}m.exports=M}),_e=o((h,m)=>{var _=J(),S=ge(),M=_(S,"Map");m.exports=M}),ve=o((h,m)=>{var _=J(),S=_(Object,"create");m.exports=S}),ke=o((h,m)=>{var _=ve();function S(){this.__data__=_?_(null):{},this.size=0}m.exports=S}),W=o((h,m)=>{function _(S){var M=this.has(S)&&delete this.__data__[S];return this.size-=M?1:0,M}m.exports=_}),V=o((h,m)=>{var _=ve(),S="__lodash_hash_undefined__",M=Object.prototype,H=M.hasOwnProperty;function ne(ae){var ye=this.__data__;if(_){var Se=ye[ae];return Se===S?void 0:Se}return H.call(ye,ae)?ye[ae]:void 0}m.exports=ne}),K=o((h,m)=>{var _=ve(),S=Object.prototype,M=S.hasOwnProperty;function H(ne){var ae=this.__data__;return _?ae[ne]!==void 0:M.call(ae,ne)}m.exports=H}),pe=o((h,m)=>{var _=ve(),S="__lodash_hash_undefined__";function M(H,ne){var ae=this.__data__;return this.size+=this.has(H)?0:1,ae[H]=_&&ne===void 0?S:ne,this}m.exports=M}),he=o((h,m)=>{var _=ke(),S=W(),M=V(),H=K(),ne=pe();function ae(ye){var Se=-1,nt=ye==null?0:ye.length;for(this.clear();++Se<nt;){var We=ye[Se];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=M,ae.prototype.has=H,ae.prototype.set=ne,m.exports=ae}),te=o((h,m)=>{var _=he(),S=k(),M=_e();function H(){this.size=0,this.__data__={hash:new _,map:new(M||S),string:new _}}m.exports=H}),le=o((h,m)=>{function _(S){var M=typeof S;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?S!=="__proto__":S===null}m.exports=_}),Q=o((h,m)=>{var _=le();function S(M,H){var ne=M.__data__;return _(H)?ne[typeof H=="string"?"string":"hash"]:ne.map}m.exports=S}),Be=o((h,m)=>{var _=Q();function S(M){var H=_(this,M).delete(M);return this.size-=H?1:0,H}m.exports=S}),De=o((h,m)=>{var _=Q();function S(M){return _(this,M).get(M)}m.exports=S}),Je=o((h,m)=>{var _=Q();function S(M){return _(this,M).has(M)}m.exports=S}),me=o((h,m)=>{var _=Q();function S(M,H){var ne=_(this,M),ae=ne.size;return ne.set(M,H),this.size+=ne.size==ae?0:1,this}m.exports=S}),ee=o((h,m)=>{var _=te(),S=Be(),M=De(),H=Je(),ne=me();function ae(ye){var Se=-1,nt=ye==null?0:ye.length;for(this.clear();++Se<nt;){var We=ye[Se];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=M,ae.prototype.has=H,ae.prototype.set=ne,m.exports=ae}),se=o((h,m)=>{var _=k(),S=_e(),M=ee(),H=200;function ne(ae,ye){var Se=this.__data__;if(Se instanceof _){var nt=Se.__data__;if(!S||nt.length<H-1)return nt.push([ae,ye]),this.size=++Se.size,this;Se=this.__data__=new M(nt)}return Se.set(ae,ye),this.size=Se.size,this}m.exports=ne}),de=o((h,m)=>{var _=k(),S=A(),M=D(),H=z(),ne=X(),ae=se();function ye(Se){var nt=this.__data__=new _(Se);this.size=nt.size}ye.prototype.clear=S,ye.prototype.delete=M,ye.prototype.get=H,ye.prototype.has=ne,ye.prototype.set=ae,m.exports=ye}),ze=o((h,m)=>{var _=J(),S=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();m.exports=S}),$e=o((h,m)=>{var _=ze();function S(M,H,ne){H=="__proto__"&&_?_(M,H,{configurable:!0,enumerable:!0,value:ne,writable:!0}):M[H]=ne}m.exports=S}),et=o((h,m)=>{var _=$e(),S=d();function M(H,ne,ae){(ae!==void 0&&!S(H[ne],ae)||ae===void 0&&!(ne in H))&&_(H,ne,ae)}m.exports=M}),Ge=o((h,m)=>{function _(S){return function(M,H,ne){for(var ae=-1,ye=Object(M),Se=ne(M),nt=Se.length;nt--;){var We=Se[S?nt:++ae];if(H(ye[We],We,ye)===!1)break}return M}}m.exports=_}),Qe=o((h,m)=>{var _=Ge(),S=_();m.exports=S}),Ke=o((h,m)=>{var _=ge(),S=typeof h=="object"&&h&&!h.nodeType&&h,M=S&&typeof m=="object"&&m&&!m.nodeType&&m,H=M&&M.exports===S,ne=H?_.Buffer:void 0,ae=ne?ne.allocUnsafe:void 0;function ye(Se,nt){if(nt)return Se.slice();var We=Se.length,_t=ae?ae(We):new Se.constructor(We);return Se.copy(_t),_t}m.exports=ye}),xt=o((h,m)=>{var _=ge(),S=_.Uint8Array;m.exports=S}),bt=o((h,m)=>{var _=xt();function S(M){var H=new M.constructor(M.byteLength);return new _(H).set(new _(M)),H}m.exports=S}),yt=o((h,m)=>{var _=bt();function S(M,H){var ne=H?_(M.buffer):M.buffer;return new M.constructor(ne,M.byteOffset,M.length)}m.exports=S}),Wt=o((h,m)=>{function _(S,M){var H=-1,ne=S.length;for(M||(M=Array(ne));++H<ne;)M[H]=S[H];return M}m.exports=_}),tn=o((h,m)=>{var _=B(),S=Object.create,M=function(){function H(){}return function(ne){if(!_(ne))return{};if(S)return S(ne);H.prototype=ne;var ae=new H;return H.prototype=void 0,ae}}();m.exports=M}),yn=o((h,m)=>{function _(S,M){return function(H){return S(M(H))}}m.exports=_}),Ze=o((h,m)=>{var _=yn(),S=_(Object.getPrototypeOf,Object);m.exports=S}),ot=o((h,m)=>{var _=Object.prototype;function S(M){var H=M&&M.constructor,ne=typeof H=="function"&&H.prototype||_;return M===ne}m.exports=S}),rt=o((h,m)=>{var _=tn(),S=Ze(),M=ot();function H(ne){return typeof ne.constructor=="function"&&!M(ne)?_(S(ne)):{}}m.exports=H}),$t=o((h,m)=>{function _(S){return S!=null&&typeof S=="object"}m.exports=_}),Zt=o((h,m)=>{var _=Y(),S=$t(),M="[object Arguments]";function H(ne){return S(ne)&&_(ne)==M}m.exports=H}),Dn=o((h,m)=>{var _=Zt(),S=$t(),M=Object.prototype,H=M.hasOwnProperty,ne=M.propertyIsEnumerable,ae=_(function(){return arguments}())?_:function(ye){return S(ye)&&H.call(ye,"callee")&&!ne.call(ye,"callee")};m.exports=ae}),mn=o((h,m)=>{var _=Array.isArray;m.exports=_}),An=o((h,m)=>{var _=9007199254740991;function S(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}m.exports=S}),Jn=o((h,m)=>{var _=I(),S=An();function M(H){return H!=null&&S(H.length)&&!_(H)}m.exports=M}),Qt=o((h,m)=>{var _=Jn(),S=$t();function M(H){return S(H)&&_(H)}m.exports=M}),xn=o((h,m)=>{function _(){return!1}m.exports=_}),Cn=o((h,m)=>{var _=ge(),S=xn(),M=typeof h=="object"&&h&&!h.nodeType&&h,H=M&&typeof m=="object"&&m&&!m.nodeType&&m,ne=H&&H.exports===M,ae=ne?_.Buffer:void 0,ye=ae?ae.isBuffer:void 0,Se=ye||S;m.exports=Se}),tr=o((h,m)=>{var _=Y(),S=Ze(),M=$t(),H="[object Object]",ne=Function.prototype,ae=Object.prototype,ye=ne.toString,Se=ae.hasOwnProperty,nt=ye.call(Object);function We(_t){if(!M(_t)||_(_t)!=H)return!1;var It=S(_t);if(It===null)return!0;var en=Se.call(It,"constructor")&&It.constructor;return typeof en=="function"&&en instanceof en&&ye.call(en)==nt}m.exports=We}),vr=o((h,m)=>{var _=Y(),S=An(),M=$t(),H="[object Arguments]",ne="[object Array]",ae="[object Boolean]",ye="[object Date]",Se="[object Error]",nt="[object Function]",We="[object Map]",_t="[object Number]",It="[object Object]",en="[object RegExp]",_n="[object Set]",Pn="[object String]",br="[object WeakMap]",tt="[object ArrayBuffer]",it="[object DataView]",ft="[object Float32Array]",zt="[object Float64Array]",Pt="[object Int8Array]",Bt="[object Int16Array]",be="[object Int32Array]",Pe="[object Uint8Array]",je="[object Uint8ClampedArray]",Fe="[object Uint16Array]",Ue="[object Uint32Array]",He={};He[ft]=He[zt]=He[Pt]=He[Bt]=He[be]=He[Pe]=He[je]=He[Fe]=He[Ue]=!0,He[H]=He[ne]=He[tt]=He[ae]=He[it]=He[ye]=He[Se]=He[nt]=He[We]=He[_t]=He[It]=He[en]=He[_n]=He[Pn]=He[br]=!1;function ut(ht){return M(ht)&&S(ht.length)&&!!He[_(ht)]}m.exports=ut}),xr=o((h,m)=>{function _(S){return function(M){return S(M)}}m.exports=_}),ur=o((h,m)=>{var _=re(),S=typeof h=="object"&&h&&!h.nodeType&&h,M=S&&typeof m=="object"&&m&&!m.nodeType&&m,H=M&&M.exports===S,ne=H&&_.process,ae=function(){try{var ye=M&&M.require&&M.require("util").types;return ye||ne&&ne.binding&&ne.binding("util")}catch{}}();m.exports=ae}),Gr=o((h,m)=>{var _=vr(),S=xr(),M=ur(),H=M&&M.isTypedArray,ne=H?S(H):_;m.exports=ne}),Fs=o((h,m)=>{function _(S,M){if(!(M==="constructor"&&typeof S[M]=="function")&&M!="__proto__")return S[M]}m.exports=_}),Ti=o((h,m)=>{var _=$e(),S=d(),M=Object.prototype,H=M.hasOwnProperty;function ne(ae,ye,Se){var nt=ae[ye];(!(H.call(ae,ye)&&S(nt,Se))||Se===void 0&&!(ye in ae))&&_(ae,ye,Se)}m.exports=ne}),Oo=o((h,m)=>{var _=Ti(),S=$e();function M(H,ne,ae,ye){var Se=!ae;ae||(ae={});for(var nt=-1,We=ne.length;++nt<We;){var _t=ne[nt],It=ye?ye(ae[_t],H[_t],_t,ae,H):void 0;It===void 0&&(It=H[_t]),Se?S(ae,_t,It):_(ae,_t,It)}return ae}m.exports=M}),Ts=o((h,m)=>{function _(S,M){for(var H=-1,ne=Array(S);++H<S;)ne[H]=M(H);return ne}m.exports=_}),nr=o((h,m)=>{var _=9007199254740991,S=/^(?:0|[1-9]\d*)$/;function M(H,ne){var ae=typeof H;return ne=ne??_,!!ne&&(ae=="number"||ae!="symbol"&&S.test(H))&&H>-1&&H%1==0&&H<ne}m.exports=M}),Ds=o((h,m)=>{var _=Ts(),S=Dn(),M=mn(),H=Cn(),ne=nr(),ae=Gr(),ye=Object.prototype,Se=ye.hasOwnProperty;function nt(We,_t){var It=M(We),en=!It&&S(We),_n=!It&&!en&&H(We),Pn=!It&&!en&&!_n&&ae(We),br=It||en||_n||Pn,tt=br?_(We.length,String):[],it=tt.length;for(var ft in We)(_t||Se.call(We,ft))&&!(br&&(ft=="length"||_n&&(ft=="offset"||ft=="parent")||Pn&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||ne(ft,it)))&&tt.push(ft);return tt}m.exports=nt}),No=o((h,m)=>{function _(S){var M=[];if(S!=null)for(var H in Object(S))M.push(H);return M}m.exports=_}),at=o((h,m)=>{var _=B(),S=ot(),M=No(),H=Object.prototype,ne=H.hasOwnProperty;function ae(ye){if(!_(ye))return M(ye);var Se=S(ye),nt=[];for(var We in ye)We=="constructor"&&(Se||!ne.call(ye,We))||nt.push(We);return nt}m.exports=ae}),Ie=o((h,m)=>{var _=Ds(),S=at(),M=Jn();function H(ne){return M(ne)?_(ne,!0):S(ne)}m.exports=H}),ct=o((h,m)=>{var _=Oo(),S=Ie();function M(H){return _(H,S(H))}m.exports=M}),Ln=o((h,m)=>{var _=et(),S=Ke(),M=yt(),H=Wt(),ne=rt(),ae=Dn(),ye=mn(),Se=Qt(),nt=Cn(),We=I(),_t=B(),It=tr(),en=Gr(),_n=Fs(),Pn=ct();function br(tt,it,ft,zt,Pt,Bt,be){var Pe=_n(tt,ft),je=_n(it,ft),Fe=be.get(je);if(Fe){_(tt,ft,Fe);return}var Ue=Bt?Bt(Pe,je,ft+"",tt,it,be):void 0,He=Ue===void 0;if(He){var ut=ye(je),ht=!ut&&nt(je),mt=!ut&&!ht&&en(je);Ue=je,ut||ht||mt?ye(Pe)?Ue=Pe:Se(Pe)?Ue=H(Pe):ht?(He=!1,Ue=S(je,!0)):mt?(He=!1,Ue=M(je,!0)):Ue=[]:It(je)||ae(je)?(Ue=Pe,ae(Pe)?Ue=Pn(Pe):(!_t(Pe)||We(Pe))&&(Ue=ne(je))):He=!1}He&&(be.set(je,Ue),Pt(Ue,je,zt,Bt,be),be.delete(je)),_(tt,ft,Ue)}m.exports=br}),$n=o((h,m)=>{var _=de(),S=et(),M=Qe(),H=Ln(),ne=B(),ae=Ie(),ye=Fs();function Se(nt,We,_t,It,en){nt!==We&&M(We,function(_n,Pn){if(en||(en=new _),ne(_n))H(nt,We,Pn,_t,Se,It,en);else{var br=It?It(ye(nt,Pn),_n,Pn+"",nt,We,en):void 0;br===void 0&&(br=_n),S(nt,Pn,br)}},ae)}m.exports=Se}),En=o((h,m)=>{function _(S){return S}m.exports=_}),jt=o((h,m)=>{function _(S,M,H){switch(H.length){case 0:return S.call(M);case 1:return S.call(M,H[0]);case 2:return S.call(M,H[0],H[1]);case 3:return S.call(M,H[0],H[1],H[2])}return S.apply(M,H)}m.exports=_}),Un=o((h,m)=>{var _=jt(),S=Math.max;function M(H,ne,ae){return ne=S(ne===void 0?H.length-1:ne,0),function(){for(var ye=arguments,Se=-1,nt=S(ye.length-ne,0),We=Array(nt);++Se<nt;)We[Se]=ye[ne+Se];Se=-1;for(var _t=Array(ne+1);++Se<ne;)_t[Se]=ye[Se];return _t[ne]=ae(We),_(H,this,_t)}}m.exports=M}),St=o((h,m)=>{function _(S){return function(){return S}}m.exports=_}),qt=o((h,m)=>{var _=St(),S=ze(),M=En(),H=S?function(ne,ae){return S(ne,"toString",{configurable:!0,enumerable:!1,value:_(ae),writable:!0})}:M;m.exports=H}),Vn=o((h,m)=>{var _=800,S=16,M=Date.now;function H(ne){var ae=0,ye=0;return function(){var Se=M(),nt=S-(Se-ye);if(ye=Se,nt>0){if(++ae>=_)return arguments[0]}else ae=0;return ne.apply(void 0,arguments)}}m.exports=H}),hr=o((h,m)=>{var _=qt(),S=Vn(),M=S(_);m.exports=M}),Lr=o((h,m)=>{var _=En(),S=Un(),M=hr();function H(ne,ae){return M(S(ne,ae,_),ne+"")}m.exports=H}),pn=o((h,m)=>{var _=d(),S=Jn(),M=nr(),H=B();function ne(ae,ye,Se){if(!H(Se))return!1;var nt=typeof ye;return(nt=="number"?S(Se)&&M(ye,Se.length):nt=="string"&&ye in Se)?_(Se[ye],ae):!1}m.exports=ne}),rn=o((h,m)=>{var _=Lr(),S=pn();function M(H){return _(function(ne,ae){var ye=-1,Se=ae.length,nt=Se>1?ae[Se-1]:void 0,We=Se>2?ae[2]:void 0;for(nt=H.length>3&&typeof nt=="function"?(Se--,nt):void 0,We&&S(ae[0],ae[1],We)&&(nt=Se<3?void 0:nt,Se=1),ne=Object(ne);++ye<Se;){var _t=ae[ye];_t&&H(ne,_t,ye,nt)}return ne})}m.exports=M}),zr=o((h,m)=>{var _=$n(),S=rn(),M=S(function(H,ne,ae){_(H,ne,ae)});m.exports=M}),Br=o((h,m)=>{var _=Y(),S=$t(),M="[object Symbol]";function H(ne){return typeof ne=="symbol"||S(ne)&&_(ne)==M}m.exports=H}),zi=o((h,m)=>{var _=mn(),S=Br(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/;function ne(ae,ye){if(_(ae))return!1;var Se=typeof ae;return Se=="number"||Se=="symbol"||Se=="boolean"||ae==null||S(ae)?!0:H.test(ae)||!M.test(ae)||ye!=null&&ae in Object(ye)}m.exports=ne}),Xr=o((h,m)=>{var _=ee(),S="Expected a function";function M(H,ne){if(typeof H!="function"||ne!=null&&typeof ne!="function")throw new TypeError(S);var ae=function(){var ye=arguments,Se=ne?ne.apply(this,ye):ye[0],nt=ae.cache;if(nt.has(Se))return nt.get(Se);var We=H.apply(this,ye);return ae.cache=nt.set(Se,We)||nt,We};return ae.cache=new(M.Cache||_),ae}M.Cache=_,m.exports=M}),_r=o((h,m)=>{var _=Xr(),S=500;function M(H){var ne=_(H,function(ye){return ae.size===S&&ae.clear(),ye}),ae=ne.cache;return ne}m.exports=M}),Ar=o((h,m)=>{var _=_r(),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,H=_(function(ne){var ae=[];return ne.charCodeAt(0)===46&&ae.push(""),ne.replace(S,function(ye,Se,nt,We){ae.push(nt?We.replace(M,"$1"):Se||ye)}),ae});m.exports=H}),hi=o((h,m)=>{function _(S,M){for(var H=-1,ne=S==null?0:S.length,ae=Array(ne);++H<ne;)ae[H]=M(S[H],H,S);return ae}m.exports=_}),Rr=o((h,m)=>{var _=fe(),S=hi(),M=mn(),H=Br(),ne=_?_.prototype:void 0,ae=ne?ne.toString:void 0;function ye(Se){if(typeof Se=="string")return Se;if(M(Se))return S(Se,ye)+"";if(H(Se))return ae?ae.call(Se):"";var nt=Se+"";return nt=="0"&&1/Se==-1/0?"-0":nt}m.exports=ye}),an=o((h,m)=>{var _=Rr();function S(M){return M==null?"":_(M)}m.exports=S}),Ni=o((h,m)=>{var _=mn(),S=zi(),M=Ar(),H=an();function ne(ae,ye){return _(ae)?ae:S(ae,ye)?[ae]:M(H(ae))}m.exports=ne}),vi=o((h,m)=>{var _=Br();function S(M){if(typeof M=="string"||_(M))return M;var H=M+"";return H=="0"&&1/M==-1/0?"-0":H}m.exports=S}),Ki=o((h,m)=>{var _=Ni(),S=vi();function M(H,ne){ne=_(ne,H);for(var ae=0,ye=ne.length;H!=null&&ae<ye;)H=H[S(ne[ae++])];return ae&&ae==ye?H:void 0}m.exports=M}),Jr=o((h,m)=>{var _=Ki();function S(M,H,ne){var ae=M==null?void 0:_(M,H);return ae===void 0?ne:ae}m.exports=S}),dr=o((h,m)=>{(function(_,S){typeof h=="object"&&typeof m<"u"?m.exports=S():(_=_||self).RBush=S()})(h,function(){function _(tt,it,ft,zt,Pt){(function Bt(be,Pe,je,Fe,Ue){for(;Fe>je;){if(Fe-je>600){var He=Fe-je+1,ut=Pe-je+1,ht=Math.log(He),mt=.5*Math.exp(2*ht/3),At=.5*Math.sqrt(ht*mt*(He-mt)/He)*(ut-He/2<0?-1:1),Tt=Math.max(je,Math.floor(Pe-ut*mt/He+At)),ln=Math.min(Fe,Math.floor(Pe+(He-ut)*mt/He+At));Bt(be,Pe,Tt,ln,Ue)}var Wn=be[Pe],Kn=je,ar=Fe;for(S(be,je,Pe),Ue(be[Fe],Wn)>0&&S(be,je,Fe);Kn<ar;){for(S(be,Kn,ar),Kn++,ar--;Ue(be[Kn],Wn)<0;)Kn++;for(;Ue(be[ar],Wn)>0;)ar--}Ue(be[je],Wn)===0?S(be,je,ar):S(be,++ar,Fe),ar<=Pe&&(je=ar+1),Pe<=ar&&(Fe=ar-1)}})(tt,it,ft||0,zt||tt.length-1,Pt||M)}function S(tt,it,ft){var zt=tt[it];tt[it]=tt[ft],tt[ft]=zt}function M(tt,it){return tt<it?-1:tt>it?1:0}var H=function(tt){tt===void 0&&(tt=9),this._maxEntries=Math.max(4,tt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ne(tt,it,ft){if(!ft)return it.indexOf(tt);for(var zt=0;zt<it.length;zt++)if(ft(tt,it[zt]))return zt;return-1}function ae(tt,it){ye(tt,0,tt.children.length,it,tt)}function ye(tt,it,ft,zt,Pt){Pt||(Pt=Pn(null)),Pt.minX=1/0,Pt.minY=1/0,Pt.maxX=-1/0,Pt.maxY=-1/0;for(var Bt=it;Bt<ft;Bt++){var be=tt.children[Bt];Se(Pt,tt.leaf?zt(be):be)}return Pt}function Se(tt,it){return tt.minX=Math.min(tt.minX,it.minX),tt.minY=Math.min(tt.minY,it.minY),tt.maxX=Math.max(tt.maxX,it.maxX),tt.maxY=Math.max(tt.maxY,it.maxY),tt}function nt(tt,it){return tt.minX-it.minX}function We(tt,it){return tt.minY-it.minY}function _t(tt){return(tt.maxX-tt.minX)*(tt.maxY-tt.minY)}function It(tt){return tt.maxX-tt.minX+(tt.maxY-tt.minY)}function en(tt,it){return tt.minX<=it.minX&&tt.minY<=it.minY&&it.maxX<=tt.maxX&&it.maxY<=tt.maxY}function _n(tt,it){return it.minX<=tt.maxX&&it.minY<=tt.maxY&&it.maxX>=tt.minX&&it.maxY>=tt.minY}function Pn(tt){return{children:tt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function br(tt,it,ft,zt,Pt){for(var Bt=[it,ft];Bt.length;)if(!((ft=Bt.pop())-(it=Bt.pop())<=zt)){var be=it+Math.ceil((ft-it)/zt/2)*zt;_(tt,be,it,ft,Pt),Bt.push(it,be,be,ft)}}return H.prototype.all=function(){return this._all(this.data,[])},H.prototype.search=function(tt){var it=this.data,ft=[];if(!_n(tt,it))return ft;for(var zt=this.toBBox,Pt=[];it;){for(var Bt=0;Bt<it.children.length;Bt++){var be=it.children[Bt],Pe=it.leaf?zt(be):be;_n(tt,Pe)&&(it.leaf?ft.push(be):en(tt,Pe)?this._all(be,ft):Pt.push(be))}it=Pt.pop()}return ft},H.prototype.collides=function(tt){var it=this.data;if(!_n(tt,it))return!1;for(var ft=[];it;){for(var zt=0;zt<it.children.length;zt++){var Pt=it.children[zt],Bt=it.leaf?this.toBBox(Pt):Pt;if(_n(tt,Bt)){if(it.leaf||en(tt,Bt))return!0;ft.push(Pt)}}it=ft.pop()}return!1},H.prototype.load=function(tt){if(!tt||!tt.length)return this;if(tt.length<this._minEntries){for(var it=0;it<tt.length;it++)this.insert(tt[it]);return this}var ft=this._build(tt.slice(),0,tt.length-1,0);if(this.data.children.length)if(this.data.height===ft.height)this._splitRoot(this.data,ft);else{if(this.data.height<ft.height){var zt=this.data;this.data=ft,ft=zt}this._insert(ft,this.data.height-ft.height-1,!0)}else this.data=ft;return this},H.prototype.insert=function(tt){return tt&&this._insert(tt,this.data.height-1),this},H.prototype.clear=function(){return this.data=Pn([]),this},H.prototype.remove=function(tt,it){if(!tt)return this;for(var ft,zt,Pt,Bt=this.data,be=this.toBBox(tt),Pe=[],je=[];Bt||Pe.length;){if(Bt||(Bt=Pe.pop(),zt=Pe[Pe.length-1],ft=je.pop(),Pt=!0),Bt.leaf){var Fe=ne(tt,Bt.children,it);if(Fe!==-1)return Bt.children.splice(Fe,1),Pe.push(Bt),this._condense(Pe),this}Pt||Bt.leaf||!en(Bt,be)?zt?(ft++,Bt=zt.children[ft],Pt=!1):Bt=null:(Pe.push(Bt),je.push(ft),ft=0,zt=Bt,Bt=Bt.children[0])}return this},H.prototype.toBBox=function(tt){return tt},H.prototype.compareMinX=function(tt,it){return tt.minX-it.minX},H.prototype.compareMinY=function(tt,it){return tt.minY-it.minY},H.prototype.toJSON=function(){return this.data},H.prototype.fromJSON=function(tt){return this.data=tt,this},H.prototype._all=function(tt,it){for(var ft=[];tt;)tt.leaf?it.push.apply(it,tt.children):ft.push.apply(ft,tt.children),tt=ft.pop();return it},H.prototype._build=function(tt,it,ft,zt){var Pt,Bt=ft-it+1,be=this._maxEntries;if(Bt<=be)return ae(Pt=Pn(tt.slice(it,ft+1)),this.toBBox),Pt;zt||(zt=Math.ceil(Math.log(Bt)/Math.log(be)),be=Math.ceil(Bt/Math.pow(be,zt-1))),(Pt=Pn([])).leaf=!1,Pt.height=zt;var Pe=Math.ceil(Bt/be),je=Pe*Math.ceil(Math.sqrt(be));br(tt,it,ft,je,this.compareMinX);for(var Fe=it;Fe<=ft;Fe+=je){var Ue=Math.min(Fe+je-1,ft);br(tt,Fe,Ue,Pe,this.compareMinY);for(var He=Fe;He<=Ue;He+=Pe){var ut=Math.min(He+Pe-1,Ue);Pt.children.push(this._build(tt,He,ut,zt-1))}}return ae(Pt,this.toBBox),Pt},H.prototype._chooseSubtree=function(tt,it,ft,zt){for(;zt.push(it),!it.leaf&&zt.length-1!==ft;){for(var Pt=1/0,Bt=1/0,be=void 0,Pe=0;Pe<it.children.length;Pe++){var je=it.children[Pe],Fe=_t(je),Ue=(He=tt,ut=je,(Math.max(ut.maxX,He.maxX)-Math.min(ut.minX,He.minX))*(Math.max(ut.maxY,He.maxY)-Math.min(ut.minY,He.minY))-Fe);Ue<Bt?(Bt=Ue,Pt=Fe<Pt?Fe:Pt,be=je):Ue===Bt&&Fe<Pt&&(Pt=Fe,be=je)}it=be||it.children[0]}var He,ut;return it},H.prototype._insert=function(tt,it,ft){var zt=ft?tt:this.toBBox(tt),Pt=[],Bt=this._chooseSubtree(zt,this.data,it,Pt);for(Bt.children.push(tt),Se(Bt,zt);it>=0&&Pt[it].children.length>this._maxEntries;)this._split(Pt,it),it--;this._adjustParentBBoxes(zt,Pt,it)},H.prototype._split=function(tt,it){var ft=tt[it],zt=ft.children.length,Pt=this._minEntries;this._chooseSplitAxis(ft,Pt,zt);var Bt=this._chooseSplitIndex(ft,Pt,zt),be=Pn(ft.children.splice(Bt,ft.children.length-Bt));be.height=ft.height,be.leaf=ft.leaf,ae(ft,this.toBBox),ae(be,this.toBBox),it?tt[it-1].children.push(be):this._splitRoot(ft,be)},H.prototype._splitRoot=function(tt,it){this.data=Pn([tt,it]),this.data.height=tt.height+1,this.data.leaf=!1,ae(this.data,this.toBBox)},H.prototype._chooseSplitIndex=function(tt,it,ft){for(var zt,Pt,Bt,be,Pe,je,Fe,Ue=1/0,He=1/0,ut=it;ut<=ft-it;ut++){var ht=ye(tt,0,ut,this.toBBox),mt=ye(tt,ut,ft,this.toBBox),At=(Pt=ht,Bt=mt,be=void 0,Pe=void 0,je=void 0,Fe=void 0,be=Math.max(Pt.minX,Bt.minX),Pe=Math.max(Pt.minY,Bt.minY),je=Math.min(Pt.maxX,Bt.maxX),Fe=Math.min(Pt.maxY,Bt.maxY),Math.max(0,je-be)*Math.max(0,Fe-Pe)),Tt=_t(ht)+_t(mt);At<Ue?(Ue=At,zt=ut,He=Tt<He?Tt:He):At===Ue&&Tt<He&&(He=Tt,zt=ut)}return zt||ft-it},H.prototype._chooseSplitAxis=function(tt,it,ft){var zt=tt.leaf?this.compareMinX:nt,Pt=tt.leaf?this.compareMinY:We;this._allDistMargin(tt,it,ft,zt)<this._allDistMargin(tt,it,ft,Pt)&&tt.children.sort(zt)},H.prototype._allDistMargin=function(tt,it,ft,zt){tt.children.sort(zt);for(var Pt=this.toBBox,Bt=ye(tt,0,it,Pt),be=ye(tt,ft-it,ft,Pt),Pe=It(Bt)+It(be),je=it;je<ft-it;je++){var Fe=tt.children[je];Se(Bt,tt.leaf?Pt(Fe):Fe),Pe+=It(Bt)}for(var Ue=ft-it-1;Ue>=it;Ue--){var He=tt.children[Ue];Se(be,tt.leaf?Pt(He):He),Pe+=It(be)}return Pe},H.prototype._adjustParentBBoxes=function(tt,it,ft){for(var zt=ft;zt>=0;zt--)Se(it[zt],tt)},H.prototype._condense=function(tt){for(var it=tt.length-1,ft=void 0;it>=0;it--)tt[it].children.length===0?it>0?(ft=tt[it-1].children).splice(ft.indexOf(tt[it]),1):this.clear():ae(tt[it],this.toBBox)},H})}),Tn=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(Fe,Ue,He){He===void 0&&(He={});var ut={type:"Feature"};return(He.id===0||He.id)&&(ut.id=He.id),He.bbox&&(ut.bbox=He.bbox),ut.properties=Ue||{},ut.geometry=Fe,ut}h.feature=m;function _(Fe,Ue,He){switch(Fe){case"Point":return S(Ue).geometry;case"LineString":return ae(Ue).geometry;case"Polygon":return H(Ue).geometry;case"MultiPoint":return We(Ue).geometry;case"MultiLineString":return nt(Ue).geometry;case"MultiPolygon":return _t(Ue).geometry;default:throw new Error(Fe+" is invalid")}}h.geometry=_;function S(Fe,Ue,He){if(He===void 0&&(He={}),!Fe)throw new Error("coordinates is required");if(!Array.isArray(Fe))throw new Error("coordinates must be an Array");if(Fe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bt(Fe[0])||!Bt(Fe[1]))throw new Error("coordinates must contain numbers");var ut={type:"Point",coordinates:Fe};return m(ut,Ue,He)}h.point=S;function M(Fe,Ue,He){return He===void 0&&(He={}),Se(Fe.map(function(ut){return S(ut,Ue)}),He)}h.points=M;function H(Fe,Ue,He){He===void 0&&(He={});for(var ut=0,ht=Fe;ut<ht.length;ut++){var mt=ht[ut];if(mt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var At=0;At<mt[mt.length-1].length;At++)if(mt[mt.length-1][At]!==mt[0][At])throw new Error("First and last Position are not equivalent.")}var Tt={type:"Polygon",coordinates:Fe};return m(Tt,Ue,He)}h.polygon=H;function ne(Fe,Ue,He){return He===void 0&&(He={}),Se(Fe.map(function(ut){return H(ut,Ue)}),He)}h.polygons=ne;function ae(Fe,Ue,He){if(He===void 0&&(He={}),Fe.length<2)throw new Error("coordinates must be an array of two or more positions");var ut={type:"LineString",coordinates:Fe};return m(ut,Ue,He)}h.lineString=ae;function ye(Fe,Ue,He){return He===void 0&&(He={}),Se(Fe.map(function(ut){return ae(ut,Ue)}),He)}h.lineStrings=ye;function Se(Fe,Ue){Ue===void 0&&(Ue={});var He={type:"FeatureCollection"};return Ue.id&&(He.id=Ue.id),Ue.bbox&&(He.bbox=Ue.bbox),He.features=Fe,He}h.featureCollection=Se;function nt(Fe,Ue,He){He===void 0&&(He={});var ut={type:"MultiLineString",coordinates:Fe};return m(ut,Ue,He)}h.multiLineString=nt;function We(Fe,Ue,He){He===void 0&&(He={});var ut={type:"MultiPoint",coordinates:Fe};return m(ut,Ue,He)}h.multiPoint=We;function _t(Fe,Ue,He){He===void 0&&(He={});var ut={type:"MultiPolygon",coordinates:Fe};return m(ut,Ue,He)}h.multiPolygon=_t;function It(Fe,Ue,He){He===void 0&&(He={});var ut={type:"GeometryCollection",geometries:Fe};return m(ut,Ue,He)}h.geometryCollection=It;function en(Fe,Ue){if(Ue===void 0&&(Ue=0),Ue&&!(Ue>=0))throw new Error("precision must be a positive number");var He=Math.pow(10,Ue||0);return Math.round(Fe*He)/He}h.round=en;function _n(Fe,Ue){Ue===void 0&&(Ue="kilometers");var He=h.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Fe*He}h.radiansToLength=_n;function Pn(Fe,Ue){Ue===void 0&&(Ue="kilometers");var He=h.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Fe/He}h.lengthToRadians=Pn;function br(Fe,Ue){return it(Pn(Fe,Ue))}h.lengthToDegrees=br;function tt(Fe){var Ue=Fe%360;return Ue<0&&(Ue+=360),Ue}h.bearingToAzimuth=tt;function it(Fe){var Ue=Fe%(2*Math.PI);return Ue*180/Math.PI}h.radiansToDegrees=it;function ft(Fe){var Ue=Fe%360;return Ue*Math.PI/180}h.degreesToRadians=ft;function zt(Fe,Ue,He){if(Ue===void 0&&(Ue="kilometers"),He===void 0&&(He="kilometers"),!(Fe>=0))throw new Error("length must be a positive number");return _n(Pn(Fe,Ue),He)}h.convertLength=zt;function Pt(Fe,Ue,He){if(Ue===void 0&&(Ue="meters"),He===void 0&&(He="kilometers"),!(Fe>=0))throw new Error("area must be a positive number");var ut=h.areaFactors[Ue];if(!ut)throw new Error("invalid original units");var ht=h.areaFactors[He];if(!ht)throw new Error("invalid final units");return Fe/ut*ht}h.convertArea=Pt;function Bt(Fe){return!isNaN(Fe)&&Fe!==null&&!Array.isArray(Fe)}h.isNumber=Bt;function be(Fe){return!!Fe&&Fe.constructor===Object}h.isObject=be;function Pe(Fe){if(!Fe)throw new Error("bbox is required");if(!Array.isArray(Fe))throw new Error("bbox must be an Array");if(Fe.length!==4&&Fe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Fe.forEach(function(Ue){if(!Bt(Ue))throw new Error("bbox must only contain numbers")})}h.validateBBox=Pe;function je(Fe){if(!Fe)throw new Error("id is required");if(["string","number"].indexOf(typeof Fe)===-1)throw new Error("id must be a number or a string")}h.validateId=je}),Sr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var m=Tn();function _(it,ft,zt){if(it!==null)for(var Pt,Bt,be,Pe,je,Fe,Ue,He=0,ut=0,ht,mt=it.type,At=mt==="FeatureCollection",Tt=mt==="Feature",ln=At?it.features.length:1,Wn=0;Wn<ln;Wn++){Ue=At?it.features[Wn].geometry:Tt?it.geometry:it,ht=Ue?Ue.type==="GeometryCollection":!1,je=ht?Ue.geometries.length:1;for(var Kn=0;Kn<je;Kn++){var ar=0,wi=0;if(Pe=ht?Ue.geometries[Kn]:Ue,Pe!==null){Fe=Pe.coordinates;var Bi=Pe.type;switch(He=zt&&(Bi==="Polygon"||Bi==="MultiPolygon")?1:0,Bi){case null:break;case"Point":if(ft(Fe,ut,Wn,ar,wi)===!1)return!1;ut++,ar++;break;case"LineString":case"MultiPoint":for(Pt=0;Pt<Fe.length;Pt++){if(ft(Fe[Pt],ut,Wn,ar,wi)===!1)return!1;ut++,Bi==="MultiPoint"&&ar++}Bi==="LineString"&&ar++;break;case"Polygon":case"MultiLineString":for(Pt=0;Pt<Fe.length;Pt++){for(Bt=0;Bt<Fe[Pt].length-He;Bt++){if(ft(Fe[Pt][Bt],ut,Wn,ar,wi)===!1)return!1;ut++}Bi==="MultiLineString"&&ar++,Bi==="Polygon"&&wi++}Bi==="Polygon"&&ar++;break;case"MultiPolygon":for(Pt=0;Pt<Fe.length;Pt++){for(wi=0,Bt=0;Bt<Fe[Pt].length;Bt++){for(be=0;be<Fe[Pt][Bt].length-He;be++){if(ft(Fe[Pt][Bt][be],ut,Wn,ar,wi)===!1)return!1;ut++}wi++}ar++}break;case"GeometryCollection":for(Pt=0;Pt<Pe.geometries.length;Pt++)if(_(Pe.geometries[Pt],ft,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function S(it,ft,zt,Pt){var Bt=zt;return _(it,function(be,Pe,je,Fe,Ue){Pe===0&&zt===void 0?Bt=be:Bt=ft(Bt,be,Pe,je,Fe,Ue)},Pt),Bt}function M(it,ft){var zt;switch(it.type){case"FeatureCollection":for(zt=0;zt<it.features.length&&ft(it.features[zt].properties,zt)!==!1;zt++);break;case"Feature":ft(it.properties,0);break}}function H(it,ft,zt){var Pt=zt;return M(it,function(Bt,be){be===0&&zt===void 0?Pt=Bt:Pt=ft(Pt,Bt,be)}),Pt}function ne(it,ft){if(it.type==="Feature")ft(it,0);else if(it.type==="FeatureCollection")for(var zt=0;zt<it.features.length&&ft(it.features[zt],zt)!==!1;zt++);}function ae(it,ft,zt){var Pt=zt;return ne(it,function(Bt,be){be===0&&zt===void 0?Pt=Bt:Pt=ft(Pt,Bt,be)}),Pt}function ye(it){var ft=[];return _(it,function(zt){ft.push(zt)}),ft}function Se(it,ft){var zt,Pt,Bt,be,Pe,je,Fe,Ue,He,ut,ht=0,mt=it.type==="FeatureCollection",At=it.type==="Feature",Tt=mt?it.features.length:1;for(zt=0;zt<Tt;zt++){for(je=mt?it.features[zt].geometry:At?it.geometry:it,Ue=mt?it.features[zt].properties:At?it.properties:{},He=mt?it.features[zt].bbox:At?it.bbox:void 0,ut=mt?it.features[zt].id:At?it.id:void 0,Fe=je?je.type==="GeometryCollection":!1,Pe=Fe?je.geometries.length:1,Bt=0;Bt<Pe;Bt++){if(be=Fe?je.geometries[Bt]:je,be===null){if(ft(null,ht,Ue,He,ut)===!1)return!1;continue}switch(be.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ft(be,ht,Ue,He,ut)===!1)return!1;break}case"GeometryCollection":{for(Pt=0;Pt<be.geometries.length;Pt++)if(ft(be.geometries[Pt],ht,Ue,He,ut)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function nt(it,ft,zt){var Pt=zt;return Se(it,function(Bt,be,Pe,je,Fe){be===0&&zt===void 0?Pt=Bt:Pt=ft(Pt,Bt,be,Pe,je,Fe)}),Pt}function We(it,ft){Se(it,function(zt,Pt,Bt,be,Pe){var je=zt===null?null:zt.type;switch(je){case null:case"Point":case"LineString":case"Polygon":return ft(m.feature(zt,Bt,{bbox:be,id:Pe}),Pt,0)===!1?!1:void 0}var Fe;switch(je){case"MultiPoint":Fe="Point";break;case"MultiLineString":Fe="LineString";break;case"MultiPolygon":Fe="Polygon";break}for(var Ue=0;Ue<zt.coordinates.length;Ue++){var He=zt.coordinates[Ue],ut={type:Fe,coordinates:He};if(ft(m.feature(ut,Bt),Pt,Ue)===!1)return!1}})}function _t(it,ft,zt){var Pt=zt;return We(it,function(Bt,be,Pe){be===0&&Pe===0&&zt===void 0?Pt=Bt:Pt=ft(Pt,Bt,be,Pe)}),Pt}function It(it,ft){We(it,function(zt,Pt,Bt){var be=0;if(zt.geometry){var Pe=zt.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var je,Fe=0,Ue=0,He=0;if(_(zt,function(ut,ht,mt,At,Tt){if(je===void 0||Pt>Fe||At>Ue||Tt>He){je=ut,Fe=Pt,Ue=At,He=Tt,be=0;return}var ln=m.lineString([je,ut],zt.properties);if(ft(ln,Pt,Bt,Tt,be)===!1)return!1;be++,je=ut})===!1)return!1}}})}function en(it,ft,zt){var Pt=zt,Bt=!1;return It(it,function(be,Pe,je,Fe,Ue){Bt===!1&&zt===void 0?Pt=be:Pt=ft(Pt,be,Pe,je,Fe,Ue),Bt=!0}),Pt}function _n(it,ft){if(!it)throw new Error("geojson is required");We(it,function(zt,Pt,Bt){if(zt.geometry!==null){var be=zt.geometry.type,Pe=zt.geometry.coordinates;switch(be){case"LineString":if(ft(zt,Pt,Bt,0,0)===!1)return!1;break;case"Polygon":for(var je=0;je<Pe.length;je++)if(ft(m.lineString(Pe[je],zt.properties),Pt,Bt,je)===!1)return!1;break}}})}function Pn(it,ft,zt){var Pt=zt;return _n(it,function(Bt,be,Pe,je){be===0&&zt===void 0?Pt=Bt:Pt=ft(Pt,Bt,be,Pe,je)}),Pt}function br(it,ft){if(ft=ft||{},!m.isObject(ft))throw new Error("options is invalid");var zt=ft.featureIndex||0,Pt=ft.multiFeatureIndex||0,Bt=ft.geometryIndex||0,be=ft.segmentIndex||0,Pe=ft.properties,je;switch(it.type){case"FeatureCollection":zt<0&&(zt=it.features.length+zt),Pe=Pe||it.features[zt].properties,je=it.features[zt].geometry;break;case"Feature":Pe=Pe||it.properties,je=it.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":je=it;break;default:throw new Error("geojson is invalid")}if(je===null)return null;var Fe=je.coordinates;switch(je.type){case"Point":case"MultiPoint":return null;case"LineString":return be<0&&(be=Fe.length+be-1),m.lineString([Fe[be],Fe[be+1]],Pe,ft);case"Polygon":return Bt<0&&(Bt=Fe.length+Bt),be<0&&(be=Fe[Bt].length+be-1),m.lineString([Fe[Bt][be],Fe[Bt][be+1]],Pe,ft);case"MultiLineString":return Pt<0&&(Pt=Fe.length+Pt),be<0&&(be=Fe[Pt].length+be-1),m.lineString([Fe[Pt][be],Fe[Pt][be+1]],Pe,ft);case"MultiPolygon":return Pt<0&&(Pt=Fe.length+Pt),Bt<0&&(Bt=Fe[Pt].length+Bt),be<0&&(be=Fe[Pt][Bt].length-be-1),m.lineString([Fe[Pt][Bt][be],Fe[Pt][Bt][be+1]],Pe,ft)}throw new Error("geojson is invalid")}function tt(it,ft){if(ft=ft||{},!m.isObject(ft))throw new Error("options is invalid");var zt=ft.featureIndex||0,Pt=ft.multiFeatureIndex||0,Bt=ft.geometryIndex||0,be=ft.coordIndex||0,Pe=ft.properties,je;switch(it.type){case"FeatureCollection":zt<0&&(zt=it.features.length+zt),Pe=Pe||it.features[zt].properties,je=it.features[zt].geometry;break;case"Feature":Pe=Pe||it.properties,je=it.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":je=it;break;default:throw new Error("geojson is invalid")}if(je===null)return null;var Fe=je.coordinates;switch(je.type){case"Point":return m.point(Fe,Pe,ft);case"MultiPoint":return Pt<0&&(Pt=Fe.length+Pt),m.point(Fe[Pt],Pe,ft);case"LineString":return be<0&&(be=Fe.length+be),m.point(Fe[be],Pe,ft);case"Polygon":return Bt<0&&(Bt=Fe.length+Bt),be<0&&(be=Fe[Bt].length+be),m.point(Fe[Bt][be],Pe,ft);case"MultiLineString":return Pt<0&&(Pt=Fe.length+Pt),be<0&&(be=Fe[Pt].length+be),m.point(Fe[Pt][be],Pe,ft);case"MultiPolygon":return Pt<0&&(Pt=Fe.length+Pt),Bt<0&&(Bt=Fe[Pt].length+Bt),be<0&&(be=Fe[Pt][Bt].length-be),m.point(Fe[Pt][Bt][be],Pe,ft)}throw new Error("geojson is invalid")}h.coordAll=ye,h.coordEach=_,h.coordReduce=S,h.featureEach=ne,h.featureReduce=ae,h.findPoint=tt,h.findSegment=br,h.flattenEach=We,h.flattenReduce=_t,h.geomEach=Se,h.geomReduce=nt,h.lineEach=_n,h.lineReduce=Pn,h.propEach=M,h.propReduce=H,h.segmentEach=It,h.segmentReduce=en}),ws=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var m=Sr();function _(S){var M=[1/0,1/0,-1/0,-1/0];return m.coordEach(S,function(H){M[0]>H[0]&&(M[0]=H[0]),M[1]>H[1]&&(M[1]=H[1]),M[2]<H[0]&&(M[2]=H[0]),M[3]<H[1]&&(M[3]=H[1])}),M}_.default=_,h.default=_}),mo=o((h,m)=>{var _=dr(),S=Tn(),M=Sr(),H=ws().default,ne=M.featureEach;M.coordEach,S.polygon;var ae=S.featureCollection;function ye(Se){var nt=new _(Se);return nt.insert=function(We){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:H(We),_.prototype.insert.call(this,We)},nt.load=function(We){var _t=[];return Array.isArray(We)?We.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:H(It),_t.push(It)}):ne(We,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:H(It),_t.push(It)}),_.prototype.load.call(this,_t)},nt.remove=function(We,_t){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:H(We),_.prototype.remove.call(this,We,_t)},nt.clear=function(){return _.prototype.clear.call(this)},nt.search=function(We){var _t=_.prototype.search.call(this,this.toBBox(We));return ae(_t)},nt.collides=function(We){return _.prototype.collides.call(this,this.toBBox(We))},nt.all=function(){var We=_.prototype.all.call(this);return ae(We)},nt.toJSON=function(){return _.prototype.toJSON.call(this)},nt.fromJSON=function(We){return _.prototype.fromJSON.call(this,We)},nt.toBBox=function(We){var _t;if(We.bbox)_t=We.bbox;else if(Array.isArray(We)&&We.length===4)_t=We;else if(Array.isArray(We)&&We.length===6)_t=[We[0],We[1],We[3],We[4]];else if(We.type==="Feature")_t=H(We);else if(We.type==="FeatureCollection")_t=H(We);else throw new Error("invalid geojson");return{minX:_t[0],minY:_t[1],maxX:_t[2],maxY:_t[3]}},nt}m.exports=ye,m.exports.default=ye});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,S=arguments[1],M=0;M<_;M++)if(h.call(S,m[M],M,m))return M;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,S=arguments[1],M=0;M<_;M++){var H=m[M];if(h.call(S,H,M,m))return H}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var m=1;m<arguments.length;m++){var _=arguments[m];if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(h[S]=_[S])}return h}),function(h){h.forEach(function(m){m.hasOwnProperty("remove")||Object.defineProperty(m,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,m){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),S=_.length>>>0;if(S===0)return!1;var M=m|0,H=Math.max(M>=0?M:S-Math.abs(M),0);function ne(ae,ye){return ae===ye||typeof ae=="number"&&typeof ye=="number"&&isNaN(ae)&&isNaN(ye)}for(;H<S;){if(ne(_[H],h))return!0;H++}return!1}});var cr={version:"2.18.3"},Sn=l(zr()),sn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},yi={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Qr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},bi={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Xs={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},vo={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},js={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},yr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Js={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Vi={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Gi={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},di={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Mn={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},vn={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},qr={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},xs={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Qs={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},qa={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},hs={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Ma={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},bl={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},zn={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Cr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},rs={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Tr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Zo={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},ka={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Aa=Mn,Xo={en:sn,de:yi,it:Qr,id:bi,ro:Xs,ru:vo,es:js,nl:yr,fr:Js,pt:Aa,pt_br:di,pt_pt:Mn,zh:Vi,zh_tw:Gi,pl:vn,sv:qr,el:xs,hu:Qs,da:qa,no:hs,fa:Ma,ua:bl,tr:zn,cz:Cr,ja:rs,fi:Tr,ko:Zo,ky:ka},sa={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let m={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(m)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let m in h){let _=h[m];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},_l=sa,Ta={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(m=>{this._isRelevantForDrag(m)&&m.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(m=>{m.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let m in h){let _=h[m];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},Pr=Ta,Yn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let m=h.target;this._isRelevantForRemoval(m)&&!m.pm.dragging()&&(m.removeFrom(this.map.pm._getContainingLayer()),m.remove(),m instanceof L.LayerGroup?(this._fireRemoveLayerGroup(m),this._fireRemoveLayerGroup(this.map,m)):(m.pm._fireRemove(m),m.pm._fireRemove(this.map,m)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let m in h){let _=h[m];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},eo=Yn,yo={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let m in h){let _=h[m];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},ou=yo,Mu=l(zr()),Il={_fireDrawStart(h="Draw",m={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,m)},_fireDrawEnd(h="Draw",m={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,m)},_fireCreate(h,m="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},m,_)},_fireCenterPlaced(h="Draw",m={}){let _=h==="Draw"?this._layer:void 0,S=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:S,latlng:this._layer.getLatLng()},h,m)},_fireCut(h,m,_,S="Draw",M={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:m,originalLayer:_},S,M)},_fireEdit(h=this._layer,m="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},m,_)},_fireEnable(h="Edit",m={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,m)},_fireDisable(h="Edit",m={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,m)},_fireUpdate(h="Edit",m={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,m)},_fireMarkerDragStart(h,m=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:m},_,S)},_fireMarkerDrag(h,m=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:m},_,S)},_fireMarkerDragEnd(h,m=void 0,_=void 0,S="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:m,intersectionReset:_},S,M)},_fireDragStart(h="Edit",m={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,m)},_fireDrag(h,m="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},m,_)},_fireDragEnd(h="Edit",m={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,m)},_fireDragEnable(h="Edit",m={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,m)},_fireDragDisable(h="Edit",m={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,m)},_fireRemove(h,m=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:m,shape:this.getShape()},_,S)},_fireVertexAdded(h,m,_,S="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:m,latlng:_,shape:this.getShape()},S,M)},_fireVertexRemoved(h,m,_="Edit",S={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:m,shape:this.getShape()},_,S)},_fireVertexClick(h,m,_="Edit",S={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:m,shape:this.getShape()},_,S)},_fireIntersect(h,m=this._layer,_="Edit",S={}){this.__fire(m,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,S)},_fireLayerReset(h,m,_="Edit",S={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:m,shape:this.getShape()},_,S)},_fireChange(h,m="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},m,_)},_fireTextChange(h,m="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},m,_)},_fireTextFocus(h="Edit",m={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,m)},_fireTextBlur(h="Edit",m={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,m)},_fireSnapDrag(h,m,_="Snapping",S={}){this.__fire(h,"pm:snapdrag",m,_,S)},_fireSnap(h,m,_="Snapping",S={}){this.__fire(h,"pm:snap",m,_,S)},_fireUnsnap(h,m,_="Snapping",S={}){this.__fire(h,"pm:unsnap",m,_,S)},_fireRotationEnable(h,m,_="Rotation",S={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,S)},_fireRotationDisable(h,m="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},m,_)},_fireRotationStart(h,m,_="Rotation",S={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:m},_,S)},_fireRotation(h,m,_,S=this._rotationLayer,M="Rotation",H={}){this.__fire(h,"pm:rotate",{layer:S,helpLayer:this._layer,startAngle:this._startAngle,angle:S.pm.getAngle(),angleDiff:m,oldLatLngs:_,newLatLngs:S.getLatLngs()},M,H)},_fireRotationEnd(h,m,_,S="Rotation",M={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:m,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},S,M)},_fireActionClick(h,m,_,S="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:m,button:_},S,M)},_fireButtonClick(h,m,_="Toolbar",S={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:m},_,S)},_fireLangChange(h,m,_,S,M="Global",H={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:m,fallback:_,translations:S},M,H)},_fireGlobalDragModeToggled(h,m="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},m,_)},_fireGlobalEditModeToggled(h,m="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},m,_)},_fireGlobalRemovalModeToggled(h,m="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},m,_)},_fireGlobalCutModeToggled(h="Global",m={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,m)},_fireGlobalDrawModeToggled(h="Global",m={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,m)},_fireGlobalRotateModeToggled(h="Global",m={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,m)},_fireRemoveLayerGroup(h,m=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:m,shape:void 0},_,S)},_fireKeyeventEvent(h,m,_,S="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:m,focusOn:_},S,M)},__fire(h,m,_,S,M={}){_=(0,Mu.default)(_,M,{source:S}),L.PM.Utils._fireEvent(h,m,_)}},au=Il,ku=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let m="document";this.map.getContainer().contains(h.target)&&(m="map");let _={event:h,eventType:h.type,focusOn:m};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,m)},_onBlur(h){h.altKey=!1;let m={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=m,this._lastEvents.current=m},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),ei=ku,fs=l(Jr());function gr(h){let m=L.PM.activeLang;return(0,fs.default)(Xo[m],h)||(0,fs.default)(Xo.en,h)||h}function ps(h){for(let m=0;m<h.length;m+=1){let _=h[m];if(Array.isArray(_)){if(ps(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Bl(h){return h.reduce((m,_)=>{if(_.length!==0){let S=Array.isArray(_)?Bl(_):_;Array.isArray(S)?S.length!==0&&m.push(S):m.push(S)}return m},[])}function Ya(h,m,_){let S={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:H,f:ne}=S,ae=h.lng,ye=h.lat,Se=_,nt=Math.PI,We=m*nt/180,_t=Math.sin(We),It=Math.cos(We),en=(1-ne)*Math.tan(ye*nt/180),_n=1/Math.sqrt(1+en*en),Pn=en*_n,br=Math.atan2(en,It),tt=_n*_t,it=1-tt*tt,ft=it*(M*M-H*H)/(H*H),zt=1+ft/16384*(4096+ft*(-768+ft*(320-175*ft))),Pt=ft/1024*(256+ft*(-128+ft*(74-47*ft))),Bt=Se/(H*zt),be=2*Math.PI,Pe,je,Fe;for(;Math.abs(Bt-be)>1e-12;){Pe=Math.cos(2*br+Bt),je=Math.sin(Bt),Fe=Math.cos(Bt);let ln=Pt*je*(Pe+Pt/4*(Fe*(-1+2*Pe*Pe)-Pt/6*Pe*(-3+4*je*je)*(-3+4*Pe*Pe)));be=Bt,Bt=Se/(H*zt)+ln}let Ue=Pn*je-_n*Fe*It,He=Math.atan2(Pn*Fe+_n*je*It,(1-ne)*Math.sqrt(tt*tt+Ue*Ue)),ut=Math.atan2(je*_t,_n*Fe-Pn*je*It),ht=ne/16*it*(4+ne*(4-3*it)),mt=ut-(1-ht)*ne*tt*(Bt+ht*je*(Pe+ht*Fe*(-1+2*Pe*Pe))),At=ae+mt*180/nt,Tt=He*180/nt;return L.latLng(At,Tt)}function Zi(h,m,_,S,M=!0){let H,ne,ae,ye=[];for(let Se=0;Se<_;Se+=1){if(M)H=Se*360/_+S,ne=Ya(h,H,m),ae=L.latLng(ne.lng,ne.lat);else{let nt=h.lat+Math.cos(2*Se*Math.PI/_)*m,We=h.lng+Math.sin(2*Se*Math.PI/_)*m;ae=L.latLng(nt,We)}ye.push(ae)}return ye}function Au(h,m,_){m=(m+360)%360;let S=Math.PI/180,M=180/Math.PI,{R:H}=L.CRS.Earth,ne=h.lng*S,ae=h.lat*S,ye=m*S,Se=Math.sin(ae),nt=Math.cos(ae),We=Math.cos(_/H),_t=Math.sin(_/H),It=Math.asin(Se*We+nt*_t*Math.cos(ye)),en=ne+Math.atan2(Math.sin(ye)*_t*nt,We-Se*Math.sin(It));en*=M;let _n=en-360,Pn=en<-180?en+360:en;return en=en>180?_n:Pn,L.latLng([It*M,en])}function Da(h,m,_){let S=h.latLngToContainerPoint(m),M=h.latLngToContainerPoint(_),H=Math.atan2(M.y-S.y,M.x-S.x)*180/Math.PI+90;return H+=H<0?360:0,H}function lu(h,m,_,S){let M=Da(h,m,_);return Au(m,M,S)}function uu(h,m,_="asc"){if(!m||Object.keys(m).length===0)return(ye,Se)=>ye-Se;let S=Object.keys(m),M,H=S.length-1,ne={};for(;H>=0;)M=S[H],ne[M.toLowerCase()]=m[M],H-=1;function ae(ye){if(ye instanceof L.Marker)return"Marker";if(ye instanceof L.Circle)return"Circle";if(ye instanceof L.CircleMarker)return"CircleMarker";if(ye instanceof L.Rectangle)return"Rectangle";if(ye instanceof L.Polygon)return"Polygon";if(ye instanceof L.Polyline)return"Line"}return(ye,Se)=>{let nt,We;if(nt=ae(ye.layer).toLowerCase(),We=ae(Se.layer).toLowerCase(),!nt||!We)return 0;let _t=nt in ne?ne[nt]:Number.MAX_SAFE_INTEGER,It=We in ne?ne[We]:Number.MAX_SAFE_INTEGER,en=0;return _t<It?en=-1:_t>It&&(en=1),_==="desc"?en*-1:en}}function oa(h,m=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(m).getLatLngs():L.polyline(m).getLatLngs()}function cu(h,m){var _,S,M,H;if((S=(_=m.options.crs)==null?void 0:_.projection)!=null&&S.MAX_LATITUDE){let ne=(H=(M=m.options.crs)==null?void 0:M.projection)==null?void 0:H.MAX_LATITUDE;h.lat=Math.max(Math.min(ne,h.lat),-ne)}return h}function Si(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var Mc=L.Class.extend({includes:[_l,Pr,eo,ou,au],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=ei(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",m,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let M=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let H=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let ne of H)if(Xo[ne]){h=ne;break}}}let S=L.PM.activeLang;m&&(Xo[h]=(0,Sn.default)(Xo[_],m)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(S,h,_,Xo[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",m){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,m)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,m={}){let _=m.ignoreShapes||[],S=m.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(h,S)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let m=(0,Sn.default)(this.globalOptions,h);m.editable&&(m.resizeableCircleMarker=m.editable,delete m.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!m.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let S=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!m.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),S=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(m)}),_&&this.map.pm.Draw.CircleMarker.enable(),S&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(m)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=m,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let m=L.PM.Utils.findLayers(this.map);if(!h)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(S=>{_.addLayer(S)}),_},getGeomanDrawLayers(h=!1){let m=L.PM.Utils.findLayers(this.map).filter(S=>S._drawnByGeoman===!0);if(!h)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(S=>{_.addLayer(S)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){Si(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let m="";h.type==="touchstart"||h.type==="pointerdown"?m="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(m="mouseup"),m&&Si(this.map)._onClick(this._createMouseEvent(m,h))},_createMouseEvent(h,m){let _,S=m.touches[0]||m.changedTouches[0];try{_=new MouseEvent(h,{bubbles:m.bubbles,cancelable:m.cancelable,view:m.view,detail:S.detail,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY,ctrlKey:m.ctrlKey,altKey:m.altKey,shiftKey:m.shiftKey,metaKey:m.metaKey,button:m.button,relatedTarget:m.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,m.bubbles,m.cancelable,m.view,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget)}return _}}),zs=Mc,va=L.Control.extend({includes:[au],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let m=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${m}`,this._container);h.title&&_.setAttribute("title",h.title);let S=L.DomUtil.create("a","leaflet-buttons-control-button",_);S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${m}`,_),H=h.actions,ne={cancel:{text:gr("actions.cancel"),title:gr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:gr("actions.finish"),title:gr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:gr("actions.removeLastVertex"),title:gr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:gr("actions.finish"),title:gr("actions.finish"),onClick(ye){this._map.pm.Draw[h.jsClass]._finishShape(ye)}}};h._preparedActions=H.map(ye=>{let Se=typeof ye=="string"?ye:ye.name,nt;if(ne[Se])nt=ne[Se];else if(ye.text)nt=ye;else return nt;let We=L.DomUtil.create("a",`leaflet-pm-action ${m} action-${Se}`,M);if(We.setAttribute("role","button"),We.setAttribute("tabindex","0"),We.href="#",nt.title&&(We.title=nt.title),We.innerHTML=nt.text,L.DomEvent.disableClickPropagation(We),L.DomEvent.on(We,"click",L.DomEvent.stop),nt._node=We,!h.disabled&&nt.onClick){let _t=It=>{It.preventDefault();let en="",{buttons:_n}=this._map.pm.Toolbar;for(let Pn in _n)if(_n[Pn]._button===h){en=Pn;break}this._fireActionClick(nt,en,h)};L.DomEvent.addListener(We,"click",_t,this),L.DomEvent.addListener(We,"click",nt.onClick,this),L.DomEvent.addListener(We,"click",()=>this._updateActiveAction(h))}return nt}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let ae=L.DomUtil.create("div","control-icon",S);return h.iconUrl&&ae.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(ae,h.className),L.DomEvent.disableClickPropagation(S),L.DomEvent.on(S,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(S,"click",this._onBtnClick,this),L.DomEvent.addListener(S,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(S,"pm-disabled"),S.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:m}=this._map.pm.Toolbar;for(let _ in m)if(m[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",m=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(m,h),m.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(m,h),m.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var m;(m=h._preparedActions)==null||m.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),hu=va;L.Control.PMButton=hu;var ya=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let m=`${h}Container`;return this[m]||(this[m]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[m]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),m={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let S=h[_];L.Util.setOptions(S,{className:m.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let m in h)h[m].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,m){return this.buttons[h]=m,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let m in this.buttons){let _=this.buttons[m];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,m,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let S=h;return _&&this.triggerClickOnToggledButtons(this.buttons[S]),this.buttons[S]?this.buttons[S].toggle(m):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:gr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:gr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:gr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},S={title:gr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:gr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},H={title:gr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},ne={title:gr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ae={title:gr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ye={title:gr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Se={title:gr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},nt={title:gr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},We={className:"control-icon leaflet-pm-icon-text",title:gr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(_t,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(H)),this._addButton("drawPolygon",new L.Control.PMButton(m)),this._addButton("drawCircle",new L.Control.PMButton(S)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(We)),this._addButton("editMode",new L.Control.PMButton(ne)),this._addButton("dragMode",new L.Control.PMButton(ae)),this._addButton("cutPolygon",new L.Control.PMButton(ye)),this._addButton("removalMode",new L.Control.PMButton(Se)),this._addButton("rotateMode",new L.Control.PMButton(nt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),m=[];this.options.drawControls===!1&&(m=m.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(m=m.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(m=m.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(m=m.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&m.indexOf(_)===-1){let S=h[_]._button.tool;S||(S="draw"),h[_].setPosition(this._getBtnPosition(S)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,m){this.options.positions[h]=m,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,m){if(m)typeof m!="object"&&(m={name:m});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!m.name)throw new TypeError("Button has no name");if(this.buttons[m.name])throw new TypeError("Button with this name already exists");let S=this.map.pm.Draw.createNewDrawInstance(m.name,_);m={...this.buttons[_]._button,...m};let M=this.createCustomControl(m);return{drawInstance:S,control:M}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let m={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(m));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let m={};if(h)for(let _ in this.getButtons()){let S=this.getButtons()[_];(S._button.tool===h||h==="draw"&&!S._button.tool)&&(m[_]=S)}return m},changeControlOrder(h=[]){let m=this._shapeMapping(),_=[];h.forEach(H=>{m[H]?_.push(m[H]):_.push(H)});let S=this.getButtons(),M={};_.forEach(H=>{S[H]&&(M[H]=S[H])}),Object.keys(S).filter(H=>!S[H]._button.tool||S[H]._button.tool==="draw").forEach(H=>{_.indexOf(H)===-1&&(M[H]=S[H])}),Object.keys(S).filter(H=>S[H]._button.tool==="edit").forEach(H=>{_.indexOf(H)===-1&&(M[H]=S[H])}),Object.keys(S).filter(H=>S[H]._button.tool==="options").forEach(H=>{_.indexOf(H)===-1&&(M[H]=S[H])}),Object.keys(S).filter(H=>S[H]._button.tool==="custom").forEach(H=>{_.indexOf(H)===-1&&(M[H]=S[H])}),Object.keys(S).forEach(H=>{_.indexOf(H)===-1&&(M[H]=S[H])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),m=[];for(let _ in h)m.push(_);return m},changeActionsOfControl(h,m){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!m)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=m,this.changeControlOrder()},setButtonDisabled(h,m){let _=this._btnNameMapping(h);m?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let m=this._shapeMapping();return m[h]?m[h]:h}}),Rl=ya,Fl=l(zr()),Ci={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(m=>{if(Array.isArray(m)){this._assignEvents(m);return}m.off("drag",this._handleSnapping,this),m.on("drag",this._handleSnapping,this),m.off("dragend",this._cleanupSnapping,this),m.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let m=h.target;m._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(m=>{m.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var ae,ye,Se;let m=h.target;if(m._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ae=h==null?void 0:h.originalEvent)==null?void 0:ae.altKey)||((Se=(ye=this._map)==null?void 0:ye.pm)==null?void 0:Se.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(m.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let S=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;S?M=_.latlng:M=this._checkPrioritiySnapping(_);let H=this.options.snapDistance,ne={marker:m,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(ne.marker,ne),this._fireSnapDrag(this._layer,ne),_.distance<H){m._orgLatLng=m.getLatLng(),m.setLatLng(M),m._snapped=!0,m._snapInfo=ne;let nt=()=>{this._snapLatLng=M,this._fireSnap(m,ne),this._fireSnap(this._layer,ne)},We=this._snapLatLng||{},_t=M||{};(We.lat!==_t.lat||We.lng!==_t.lng)&&nt()}else this._snapLatLng&&(this._unsnap(ne),m._snapped=!1,m._snapInfo=void 0,this._fireUnsnap(ne.marker,ne),this._fireUnsnap(this._layer,ne));return!0},_createSnapList(){let h=[],m=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(S=>{if((S instanceof L.Polyline||S instanceof L.Marker||S instanceof L.CircleMarker||S instanceof L.ImageOverlay)&&S.options.snapIgnore!==!0){if(S.options.snapIgnore===void 0&&(!L.PM.optIn&&S.options.pmIgnore===!0||L.PM.optIn&&S.options.pmIgnore!==!1))return;(S instanceof L.Circle||S instanceof L.CircleMarker)&&S.pm&&S.pm._hiddenPolyCircle?h.push(S.pm._hiddenPolyCircle):S instanceof L.ImageOverlay&&(S=L.rectangle(S.getBounds())),h.push(S);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,m.push(M),(S instanceof L.Circle||S instanceof L.CircleMarker)&&m.push(M)}}),h=h.filter(S=>this._layer!==S),h=h.filter(S=>S._latlng||S._latlngs&&ps(S._latlngs)),h=h.filter(S=>!S._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let S=L.polyline([],{color:"red",pmIgnore:!0});S._pmTempLayer=!0,m.push(S)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=m},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let m=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);m>-1&&this._snapList.splice(m,1)},_calcClosestLayer(h,m){return this._calcClosestLayers(h,m,1)[0]},_calcClosestLayers(h,m,_=1){let S=[],M={};m.forEach((ne,ae)=>{var Se;if(ne._parentCopy&&ne._parentCopy===this._layer||((Se=ne.getLatLngs)==null?void 0:Se.call(ne).flat(5).length)<2)return;let ye=this._calcLayerDistances(h,ne);if(ye.distance=Math.floor(ye.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ae]){let nt=L.polyline([],{color:"red",pmIgnore:!0});nt._pmTempLayer=!0,this.debugIndicatorLines[ae]=nt}this.debugIndicatorLines[ae].setLatLngs([h,ye.latlng])}_===1&&(M.distance===void 0||ye.distance-5<=M.distance)?(ye.distance+5<M.distance&&(S=[]),M=ye,M.layer=ne,S.push(M)):_!==1&&(M={},M=ye,M.layer=ne,S.push(M))}),_!==1&&(S=S.sort((ne,ae)=>ne.distance-ae.distance)),_===-1&&(_=S.length);let H=this._getClosestLayerByPriority(S,_);return L.Util.isArray(H)?H:[H]},_calcLayerDistances(h,m){let _=this._map,S=m instanceof L.Marker||m instanceof L.CircleMarker,M=m instanceof L.Polygon,H=h;if(S){let ne=m.getLatLng();return{latlng:{...ne},distance:this._getDistance(_,ne,H)}}return this._calcLatLngDistances(H,m.getLatLngs(),_,M)},_calcLatLngDistances(h,m,_,S=!1){let M,H,ne,ae=ye=>{ye.forEach((Se,nt)=>{if(Array.isArray(Se)){ae(Se);return}if(this.options.snapSegment){let We=Se,_t;S?_t=nt+1===ye.length?0:nt+1:_t=nt+1===ye.length?void 0:nt+1;let It=ye[_t];if(It){let en=this._getDistanceToSegment(_,h,We,It);(H===void 0||en<H)&&(H=en,ne=[We,It])}}else{let We=this._getDistance(_,h,Se);(H===void 0||We<H)&&(H=We,M=Se)}})};return ae(m),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,ne[0],ne[1])},segment:ne,distance:H}:{latlng:M,distance:H}},_getClosestLayerByPriority(h,m=1){h=h.sort((ne,ae)=>ne._leaflet_id-ae._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],S=this._map.pm.globalOptions.snappingOrder||[],M=0,H={};return S.concat(_).forEach(ne=>{H[ne]||(M+=1,H[ne]=M)}),h.sort(uu("instanceofShape",H)),m===1?h[0]||{}:h.slice(0,m)},_checkPrioritiySnapping(h){let m=this._map,_=h.segment[0],S=h.segment[1],M=h.latlng,H=M;if(this.options.snapVertex){let ne=this._getDistance(m,_,M),ae=this._getDistance(m,S,M),ye=ne<ae?_:S,Se=ne<ae?ne:ae;if(this.options.snapMiddle){let We=L.PM.Utils.calcMiddleLatLng(m,_,S),_t=this._getDistance(m,We,M);_t<ne&&_t<ae&&(ye=We,Se=_t)}let nt=this.options.snapDistance;Se<nt&&(H=ye)}return{...H}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,m,_,S){let M=h.getMaxZoom();M===1/0&&(M=h.getZoom());let H=h.project(m,M),ne=h.project(_,M),ae=h.project(S,M),ye=L.LineUtil.closestPointOnSegment(H,ne,ae);return h.unproject(ye,M)},_getDistanceToSegment(h,m,_,S){let M=h.latLngToContainerPoint(m),H=h.latLngToContainerPoint(_),ne=h.latLngToContainerPoint(S);return L.LineUtil.pointToSegmentDistance(M,H,ne)},_getDistance(h,m,_){return h.latLngToContainerPoint(m).distanceTo(h.latLngToContainerPoint(_))}},Jo=Ci,Ka=L.Class.extend({includes:[Jo,au],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let m=new L.Icon.Default;m.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=m,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,m=!1){m?this.options.pathOptions=(0,Fl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,m){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(m)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(m=>{this[m]._enabled&&(h=m)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(m=>{(m instanceof L.Polyline||m instanceof L.Marker||m instanceof L.Circle||m instanceof L.CircleMarker||m instanceof L.ImageOverlay)&&(m._pmTempLayer||h.push(m))}),this._enabled?h.forEach(m=>{L.PM.Utils.disablePopup(m)}):h.forEach(m=>{L.PM.Utils.enablePopup(m)})},createNewDrawInstance(h,m){let _=this._getShapeFromBtnName(m);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[m]&&this[h].setOptions(this[m].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let m={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return m[h]?m[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,m){m==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),gs=Ka;gs.Marker=gs.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(m=>{this.isRelevantMarker(m)&&m.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let m=h;m.target=this._hintMarker,this._handleSnapping(m)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=new L.Marker(m,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,m;(h=this.options.markerStyle)!=null&&h.icon&&((m=this._hintMarker)==null||m.setIcon(this.options.markerStyle.icon))}});var j=63710088e-1,we={centimeters:j*100,centimetres:j*100,degrees:j/111325,feet:j*3.28084,inches:j*39.37,kilometers:j/1e3,kilometres:j/1e3,meters:j,metres:j,miles:j/1609.344,millimeters:j*1e3,millimetres:j*1e3,nauticalmiles:j/1852,radians:1,yards:j*1.0936};function Xe(h,m,_){_===void 0&&(_={});var S={type:"Feature"};return(_.id===0||_.id)&&(S.id=_.id),_.bbox&&(S.bbox=_.bbox),S.properties=m||{},S.geometry=h,S}function dt(h,m,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Er(h[0])||!Er(h[1]))throw new Error("coordinates must contain numbers");var S={type:"Point",coordinates:h};return Xe(S,m,_)}function kt(h,m,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var S={type:"LineString",coordinates:h};return Xe(S,m,_)}function Ut(h,m){m===void 0&&(m={});var _={type:"FeatureCollection"};return m.id&&(_.id=m.id),m.bbox&&(_.bbox=m.bbox),_.features=h,_}function dn(h,m){m===void 0&&(m="kilometers");var _=we[m];if(!_)throw new Error(m+" units is invalid");return h*_}function Rn(h,m){m===void 0&&(m="kilometers");var _=we[m];if(!_)throw new Error(m+" units is invalid");return h/_}function Hn(h){var m=h%(2*Math.PI);return m*180/Math.PI}function fr(h){var m=h%360;return m*Math.PI/180}function Er(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Vr(h){var m,_,S={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")m=[_.coordinates];else if(_.type==="MultiLineString")m=_.coordinates;else if(_.type==="MultiPolygon")m=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")m=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return m.forEach(function(M){m.forEach(function(H){for(var ne=0;ne<M.length-1;ne++)for(var ae=ne;ae<H.length-1;ae++)if(!(M===H&&(Math.abs(ne-ae)===1||ne===0&&ae===M.length-2&&M[ne][0]===M[M.length-1][0]&&M[ne][1]===M[M.length-1][1]))){var ye=qi(M[ne][0],M[ne][1],M[ne+1][0],M[ne+1][1],H[ae][0],H[ae][1],H[ae+1][0],H[ae+1][1]);ye&&S.features.push(dt([ye[0],ye[1]]))}})}),S}function qi(h,m,_,S,M,H,ne,ae){var ye,Se,nt,We,_t,It={x:null,y:null,onLine1:!1,onLine2:!1};return ye=(ae-H)*(_-h)-(ne-M)*(S-m),ye===0?It.x!==null&&It.y!==null?It:!1:(Se=m-H,nt=h-M,We=(ne-M)*Se-(ae-H)*nt,_t=(_-h)*Se-(S-m)*nt,Se=We/ye,nt=_t/ye,It.x=h+Se*(_-h),It.y=m+Se*(S-m),Se>=0&&Se<=1&&(It.onLine1=!0),nt>=0&&nt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}gs.Line=gs.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let m=h[h.length-1];this._hintline.setLatLngs([m,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let m=this._layer._defaultShape().slice();m.push(this._hintMarker.getLatLng()),this._change(m)},hasSelfIntersection(){return Vr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,m){let _=L.polyline(this._layer.getLatLngs());h&&(m||(m=this._hintMarker.getLatLng()),_.addLatLng(m));let S=Vr(_.toGeoJSON(15));this._doesSelfIntersect=S.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(S,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),S=_[_.length-1];if(m.equals(_[0])||_.length>0&&m.equals(S)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:m,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(m);let M=this._createMarker(m);this._setTooltipText(),this._setHintLineAfterNewVertex(m),this._fireVertexAdded(M,void 0,m,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let m=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let M=h[h.length-1],H=m.indexOf(M.getLatLng());m=m.slice(0,H+1),this._layer.setLatLngs(m),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,S,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let m=L.polyline(h,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let m=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),m.on("click",this._finishShape,this),m},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),m="";h<=1?m=gr("tooltips.continueLine"):m=gr("tooltips.finishLine"),this._hintMarker.setTooltipContent(m)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,m;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(m=this._hintline)==null||m.setStyle(this.options.hintlineStyle)}}),gs.Polygon=gs.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let m=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),this._layer.getLatLngs().flat().length===1?(m.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(m)-1,this.options.snappable&&this._cleanupSnapping()):m.on("click",()=>1),m},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),m="";h<=2?m=gr("tooltips.continueLine"):m=gr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(m)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let m=L.polygon(h,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),gs.Rectangle=gs.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let m=0;m<2;m+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(m),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(m)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(gr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let m=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(m,"Draw")},_syncRectangleSize(){let h=cu(this._startMarker.getLatLng(),this._map),m=cu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,m,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let S=[];_.forEach(M=>{!M.equals(h,1e-8)&&!M.equals(m,1e-8)&&S.push(M)}),S.forEach((M,H)=>{try{this._styleMarkers[H].setLatLng(M)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(m))return;let S=L.rectangle([_,m],this.options.pathOptions);if(this.options.rectangleAngle){let H=L.PM.Utils._getRotatedRectangle(_,m,this.options.rectangleAngle||0,this._map);S.setLatLngs(H),S.pm&&S.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(S,"layerPane"),this._finishLayer(S),S.addTo(this._map.pm._getContainingLayer()),this._fireCreate(S);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),gs.CircleMarker=gs.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let m={};L.extend(m,this.options.templineStyle),m.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),m),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let m=this._hintMarker.getLatLng();this._centerMarker.setLatLng(m),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(gr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),m=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,m])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let m=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(m,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(m,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let ne=this._hintMarker.getLatLng();_=this._distanceCalculation(m,ne),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let S={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(m,S);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let H=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(H))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let m=this._centerMarker.getLatLng(),_=this._distanceCalculation(m,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=lu(this._map,m,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=lu(this._map,m,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,m);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var m,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(m=this._layer)==null||m.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,m){return this._map.project(h).distanceTo(this._map.project(m))}}),gs.Circle=gs.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,m){return this._map.distance(h,m)}});function pi(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ei(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ms(h){return h.type==="Feature"?h.geometry:h}function Ls(h,m){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Qo(h,m,_){if(h!==null)for(var S,M,H,ne,ae,ye,Se,nt=0,We=0,_t,It=h.type,en=It==="FeatureCollection",_n=It==="Feature",Pn=en?h.features.length:1,br=0;br<Pn;br++){Se=en?h.features[br].geometry:_n?h.geometry:h,_t=Se?Se.type==="GeometryCollection":!1,ae=_t?Se.geometries.length:1;for(var tt=0;tt<ae;tt++){var it=0,ft=0;if(ne=_t?Se.geometries[tt]:Se,ne!==null){ye=ne.coordinates;var zt=ne.type;switch(nt=0,zt){case null:break;case"Point":if(m(ye,We,br,it,ft)===!1)return!1;We++,it++;break;case"LineString":case"MultiPoint":for(S=0;S<ye.length;S++){if(m(ye[S],We,br,it,ft)===!1)return!1;We++,zt==="MultiPoint"&&it++}zt==="LineString"&&it++;break;case"Polygon":case"MultiLineString":for(S=0;S<ye.length;S++){for(M=0;M<ye[S].length-nt;M++){if(m(ye[S][M],We,br,it,ft)===!1)return!1;We++}zt==="MultiLineString"&&it++,zt==="Polygon"&&ft++}zt==="Polygon"&&it++;break;case"MultiPolygon":for(S=0;S<ye.length;S++){for(ft=0,M=0;M<ye[S].length;M++){for(H=0;H<ye[S][M].length-nt;H++){if(m(ye[S][M][H],We,br,it,ft)===!1)return!1;We++}ft++}it++}break;case"GeometryCollection":for(S=0;S<ne.geometries.length;S++)if(Qo(ne.geometries[S],m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ur(h,m){if(h.type==="Feature")m(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&m(h.features[_],_)!==!1;_++);}function to(h,m,_){var S=_;return Ur(h,function(M,H){H===0&&_===void 0?S=M:S=m(S,M,H)}),S}function jl(h,m){var _,S,M,H,ne,ae,ye,Se,nt,We,_t=0,It=h.type==="FeatureCollection",en=h.type==="Feature",_n=It?h.features.length:1;for(_=0;_<_n;_++){for(ae=It?h.features[_].geometry:en?h.geometry:h,Se=It?h.features[_].properties:en?h.properties:{},nt=It?h.features[_].bbox:en?h.bbox:void 0,We=It?h.features[_].id:en?h.id:void 0,ye=ae?ae.type==="GeometryCollection":!1,ne=ye?ae.geometries.length:1,M=0;M<ne;M++){if(H=ye?ae.geometries[M]:ae,H===null){if(m(null,_t,Se,nt,We)===!1)return!1;continue}switch(H.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(H,_t,Se,nt,We)===!1)return!1;break}case"GeometryCollection":{for(S=0;S<H.geometries.length;S++)if(m(H.geometries[S],_t,Se,nt,We)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_t++}}function bo(h,m){jl(h,function(_,S,M,H,ne){var ae=_===null?null:_.type;switch(ae){case null:case"Point":case"LineString":case"Polygon":return m(Xe(_,M,{bbox:H,id:ne}),S,0)===!1?!1:void 0}var ye;switch(ae){case"MultiPoint":ye="Point";break;case"MultiLineString":ye="LineString";break;case"MultiPolygon":ye="Polygon";break}for(var Se=0;Se<_.coordinates.length;Se++){var nt=_.coordinates[Se],We={type:ye,coordinates:nt};if(m(Xe(We,M),S,Se)===!1)return!1}})}function Tu(h){if(!h)throw new Error("geojson is required");var m=[];return bo(h,function(_){Oa(_,m)}),Ut(m)}function Oa(h,m){var _=[],S=h.geometry;if(S!==null){switch(S.type){case"Polygon":_=Ei(S);break;case"LineString":_=[Ei(S)]}_.forEach(function(M){var H=Ju(M,h.properties);H.forEach(function(ne){ne.id=m.length,m.push(ne)})})}}function Ju(h,m){var _=[];return h.reduce(function(S,M){var H=kt([S,M],m);return H.bbox=wl(S,M),_.push(H),M}),_}function wl(h,m){var _=h[0],S=h[1],M=m[0],H=m[1],ne=_<M?_:M,ae=S<H?S:H,ye=_>M?_:M,Se=S>H?S:H;return[ne,ae,ye,Se]}var xl=Tu,Ss=l(mo(),1);function Na(h,m){var _={},S=[];if(h.type==="LineString"&&(h=Xe(h)),m.type==="LineString"&&(m=Xe(m)),h.type==="Feature"&&m.type==="Feature"&&h.geometry!==null&&m.geometry!==null&&h.geometry.type==="LineString"&&m.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&m.geometry.coordinates.length===2){var M=ea(h,m);return M&&S.push(M),Ut(S)}var H=(0,Ss.default)();return H.load(xl(m)),Ur(xl(h),function(ne){Ur(H.search(ne),function(ae){var ye=ea(ne,ae);if(ye){var Se=Ei(ye).join(",");_[Se]||(_[Se]=!0,S.push(ye))}})}),Ut(S)}function ea(h,m){var _=Ei(h),S=Ei(m);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(S.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],H=_[0][1],ne=_[1][0],ae=_[1][1],ye=S[0][0],Se=S[0][1],nt=S[1][0],We=S[1][1],_t=(We-Se)*(ne-M)-(nt-ye)*(ae-H),It=(nt-ye)*(H-Se)-(We-Se)*(M-ye),en=(ne-M)*(H-Se)-(ae-H)*(M-ye);if(_t===0)return null;var _n=It/_t,Pn=en/_t;if(_n>=0&&_n<=1&&Pn>=0&&Pn<=1){var br=M+_n*(ne-M),tt=H+_n*(ae-H);return dt([br,tt])}return null}var Io=Na,zl=l(mo(),1);function no(h,m,_){_===void 0&&(_={});var S=pi(h),M=pi(m),H=fr(M[1]-S[1]),ne=fr(M[0]-S[0]),ae=fr(S[1]),ye=fr(M[1]),Se=Math.pow(Math.sin(H/2),2)+Math.pow(Math.sin(ne/2),2)*Math.cos(ae)*Math.cos(ye);return dn(2*Math.atan2(Math.sqrt(Se),Math.sqrt(1-Se)),_.units)}var _o=no;function wo(h){var m=h[0],_=h[1],S=h[2],M=h[3],H=_o(h.slice(0,2),[S,_]),ne=_o(h.slice(0,2),[m,M]);if(H>=ne){var ae=(_+M)/2;return[m,ae-(S-m)/2,S,ae+(S-m)/2]}else{var ye=(m+S)/2;return[ye-(M-_)/2,_,ye+(M-_)/2,M]}}var kc=wo;function Os(h){var m=[1/0,1/0,-1/0,-1/0];return Qo(h,function(_){m[0]>_[0]&&(m[0]=_[0]),m[1]>_[1]&&(m[1]=_[1]),m[2]<_[0]&&(m[2]=_[0]),m[3]<_[1]&&(m[3]=_[1])}),m}Os.default=Os;var Za=Os;function ro(h,m){m===void 0&&(m={});var _=m.precision,S=m.coordinates,M=m.mutate;if(_=_==null||isNaN(_)?6:_,S=S==null||isNaN(S)?3:S,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof S!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(h=JSON.parse(JSON.stringify(h)));var H=Math.pow(10,_);return Qo(h,function(ne){io(ne,H,S)}),h}function io(h,m,_){h.length>_&&h.splice(_,h.length);for(var S=0;S<h.length;S++)h[S]=Math.round(h[S]*m)/m;return h}var Xa=ro;function Ja(h,m,_){if(_===void 0&&(_={}),_.final===!0)return so(h,m);var S=pi(h),M=pi(m),H=fr(S[0]),ne=fr(M[0]),ae=fr(S[1]),ye=fr(M[1]),Se=Math.sin(ne-H)*Math.cos(ye),nt=Math.cos(ae)*Math.sin(ye)-Math.sin(ae)*Math.cos(ye)*Math.cos(ne-H);return Hn(Math.atan2(Se,nt))}function so(h,m){var _=Ja(m,h);return _=(_+180)%360,_}function $s(h,m,_,S){S===void 0&&(S={});var M=pi(h),H=fr(M[0]),ne=fr(M[1]),ae=fr(_),ye=Rn(m,S.units),Se=Math.asin(Math.sin(ne)*Math.cos(ye)+Math.cos(ne)*Math.sin(ye)*Math.cos(ae)),nt=H+Math.atan2(Math.sin(ae)*Math.sin(ye)*Math.cos(ne),Math.cos(ye)-Math.sin(ne)*Math.sin(Se)),We=Hn(nt),_t=Hn(Se);return dt([We,_t],S.properties)}function Ia(h,m,_){_===void 0&&(_={});var S=dt([1/0,1/0],{dist:1/0}),M=0;return bo(h,function(H){for(var ne=Ei(H),ae=0;ae<ne.length-1;ae++){var ye=dt(ne[ae]);ye.properties.dist=_o(m,ye,_);var Se=dt(ne[ae+1]);Se.properties.dist=_o(m,Se,_);var nt=_o(ye,Se,_),We=Math.max(ye.properties.dist,Se.properties.dist),_t=Ja(ye,Se),It=$s(m,We,_t+90,_),en=$s(m,We,_t-90,_),_n=Io(kt([It.geometry.coordinates,en.geometry.coordinates]),kt([ye.geometry.coordinates,Se.geometry.coordinates])),Pn=null;_n.features.length>0&&(Pn=_n.features[0],Pn.properties.dist=_o(m,Pn,_),Pn.properties.location=M+_o(ye,Pn,_)),ye.properties.dist<S.properties.dist&&(S=ye,S.properties.index=ae,S.properties.location=M),Se.properties.dist<S.properties.dist&&(S=Se,S.properties.index=ae+1,S.properties.location=M+nt),Pn&&Pn.properties.dist<S.properties.dist&&(S=Pn,S.properties.index=ae),M+=nt}}),S}var ta=Ia;function oo(h,m){if(!h)throw new Error("line is required");if(!m)throw new Error("splitter is required");var _=Ls(h),S=Ls(m);if(_!=="LineString")throw new Error("line must be LineString");if(S==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(S==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=Xa(m,{precision:7});switch(S){case"Point":return Yt(h,M);case"MultiPoint":return Lt(h,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Lt(h,Io(h,M))}}function Lt(h,m){var _=[],S=(0,zl.default)();return bo(m,function(M){if(_.forEach(function(ae,ye){ae.id=ye}),!_.length)_=Yt(h,M).features,_.forEach(function(ae){ae.bbox||(ae.bbox=kc(Za(ae)))}),S.load(Ut(_));else{var H=S.search(M);if(H.features.length){var ne=Nt(M,H);_=_.filter(function(ae){return ae.id!==ne.id}),S.remove(ne),Ur(Yt(ne,M),function(ae){_.push(ae),S.insert(ae)})}}}),Ut(_)}function Yt(h,m){var _=[],S=Ei(h)[0],M=Ei(h)[h.geometry.coordinates.length-1];if(In(S,pi(m))||In(M,pi(m)))return Ut([h]);var H=(0,zl.default)(),ne=xl(h);H.load(ne);var ae=H.search(m);if(!ae.features.length)return Ut([h]);var ye=Nt(m,ae),Se=[S],nt=to(ne,function(We,_t,It){var en=Ei(_t)[1],_n=pi(m);return It===ye.id?(We.push(_n),_.push(kt(We)),In(_n,en)?[_n]:[_n,en]):(We.push(en),We)},Se);return nt.length>1&&_.push(kt(nt)),Ut(_)}function Nt(h,m){if(!m.features.length)throw new Error("lines must contain features");if(m.features.length===1)return m.features[0];var _,S=1/0;return Ur(m,function(M){var H=ta(M,h),ne=H.properties.dist;ne<S&&(_=M,S=ne)}),_}function In(h,m){return h[0]===m[0]&&h[1]===m[1]}var rr=oo;function Mr(h,m,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!m)throw new Error("polygon is required");var S=pi(h),M=ms(m),H=M.type,ne=m.bbox,ae=M.coordinates;if(ne&&Pi(S,ne)===!1)return!1;H==="Polygon"&&(ae=[ae]);for(var ye=!1,Se=0;Se<ae.length&&!ye;Se++)if(Xi(S,ae[Se][0],_.ignoreBoundary)){for(var nt=!1,We=1;We<ae[Se].length&&!nt;)Xi(S,ae[Se][We],!_.ignoreBoundary)&&(nt=!0),We++;nt||(ye=!0)}return ye}function Xi(h,m,_){var S=!1;m[0][0]===m[m.length-1][0]&&m[0][1]===m[m.length-1][1]&&(m=m.slice(0,m.length-1));for(var M=0,H=m.length-1;M<m.length;H=M++){var ne=m[M][0],ae=m[M][1],ye=m[H][0],Se=m[H][1],nt=h[1]*(ne-ye)+ae*(ye-h[0])+Se*(h[0]-ne)===0&&(ne-h[0])*(ye-h[0])<=0&&(ae-h[1])*(Se-h[1])<=0;if(nt)return!_;var We=ae>h[1]!=Se>h[1]&&h[0]<(ye-ne)*(h[1]-ae)/(Se-ae)+ne;We&&(S=!S)}return S}function Pi(h,m){return m[0]<=h[0]&&m[1]<=h[1]&&m[2]>=h[0]&&m[3]>=h[1]}function du(h,m,_){_===void 0&&(_={});for(var S=pi(h),M=Ei(m),H=0;H<M.length-1;H++){var ne=!1;if(_.ignoreEndVertices&&(H===0&&(ne="start"),H===M.length-2&&(ne="end"),H===0&&H+1===M.length-1&&(ne="both")),xo(M[H],M[H+1],S,ne,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function xo(h,m,_,S,M){var H=_[0],ne=_[1],ae=h[0],ye=h[1],Se=m[0],nt=m[1],We=_[0]-ae,_t=_[1]-ye,It=Se-ae,en=nt-ye,_n=We*en-_t*It;if(M!==null){if(Math.abs(_n)>M)return!1}else if(_n!==0)return!1;if(S){if(S==="start")return Math.abs(It)>=Math.abs(en)?It>0?ae<H&&H<=Se:Se<=H&&H<ae:en>0?ye<ne&&ne<=nt:nt<=ne&&ne<ye;if(S==="end")return Math.abs(It)>=Math.abs(en)?It>0?ae<=H&&H<Se:Se<H&&H<=ae:en>0?ye<=ne&&ne<nt:nt<ne&&ne<=ye;if(S==="both")return Math.abs(It)>=Math.abs(en)?It>0?ae<H&&H<Se:Se<H&&H<ae:en>0?ye<ne&&ne<nt:nt<ne&&ne<ye}else return Math.abs(It)>=Math.abs(en)?It>0?ae<=H&&H<=Se:Se<=H&&H<=ae:en>0?ye<=ne&&ne<=nt:nt<=ne&&ne<=ye;return!1}var Ji=du;function Ba(h,m){var _=ms(h),S=ms(m),M=_.type,H=S.type,ne=_.coordinates,ae=S.coordinates;switch(M){case"Point":switch(H){case"Point":return Ii(ne,ae);default:throw new Error("feature2 "+H+" geometry not supported")}case"MultiPoint":switch(H){case"Point":return Qa(_,S);case"MultiPoint":return Ra(_,S);default:throw new Error("feature2 "+H+" geometry not supported")}case"LineString":switch(H){case"Point":return Ji(S,_,{ignoreEndVertices:!0});case"LineString":return ti(_,S);case"MultiPoint":return Fa(_,S);default:throw new Error("feature2 "+H+" geometry not supported")}case"Polygon":switch(H){case"Point":return Mr(S,_,{ignoreBoundary:!0});case"LineString":return ba(_,S);case"Polygon":return Vs(_,S);case"MultiPoint":return ja(_,S);default:throw new Error("feature2 "+H+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Qa(h,m){var _,S=!1;for(_=0;_<h.coordinates.length;_++)if(Ii(h.coordinates[_],m.coordinates)){S=!0;break}return S}function Ra(h,m){for(var _=0,S=m.coordinates;_<S.length;_++){for(var M=S[_],H=!1,ne=0,ae=h.coordinates;ne<ae.length;ne++){var ye=ae[ne];if(Ii(M,ye)){H=!0;break}}if(!H)return!1}return!0}function Fa(h,m){for(var _=!1,S=0,M=m.coordinates;S<M.length;S++){var H=M[S];if(Ji(H,h,{ignoreEndVertices:!0})&&(_=!0),!Ji(H,h))return!1}return!!_}function ja(h,m){for(var _=0,S=m.coordinates;_<S.length;_++){var M=S[_];if(!Mr(M,h,{ignoreBoundary:!0}))return!1}return!0}function ti(h,m){for(var _=!1,S=0,M=m.coordinates;S<M.length;S++){var H=M[S];if(Ji({type:"Point",coordinates:H},h,{ignoreEndVertices:!0})&&(_=!0),!Ji({type:"Point",coordinates:H},h,{ignoreEndVertices:!1}))return!1}return _}function ba(h,m){var _=!1,S=0,M=Za(h),H=Za(m);if(!Mi(M,H))return!1;for(S;S<m.coordinates.length-1;S++){var ne=vs(m.coordinates[S],m.coordinates[S+1]);if(Mr({type:"Point",coordinates:ne},h,{ignoreBoundary:!0})){_=!0;break}}return _}function Vs(h,m){if(h.type==="Feature"&&h.geometry===null||m.type==="Feature"&&m.geometry===null)return!1;var _=Za(h),S=Za(m);if(!Mi(_,S))return!1;for(var M=ms(m).coordinates,H=0,ne=M;H<ne.length;H++)for(var ae=ne[H],ye=0,Se=ae;ye<Se.length;ye++){var nt=Se[ye];if(!Mr(nt,h))return!1}return!0}function Mi(h,m){return!(h[0]>m[0]||h[2]<m[2]||h[1]>m[1]||h[3]<m[3])}function Ii(h,m){return h[0]===m[0]&&h[1]===m[1]}function vs(h,m){return[(h[0]+m[0])/2,(h[1]+m[1])/2]}var Ui=l(Jr()),na=h=>()=>h,Bo=h=>{let m=h?(_,S)=>S.minus(_).abs().isLessThanOrEqualTo(h):na(!1);return(_,S)=>m(_,S)?0:_.comparedTo(S)};function aa(h){let m=h?(_,S,M,H,ne)=>_.exponentiatedBy(2).isLessThanOrEqualTo(H.minus(S).exponentiatedBy(2).plus(ne.minus(M).exponentiatedBy(2)).times(h)):na(!1);return(_,S,M)=>{let H=_.x,ne=_.y,ae=M.x,ye=M.y,Se=ne.minus(ye).times(S.x.minus(ae)).minus(H.minus(ae).times(S.y.minus(ye)));return m(Se,H,ne,ae,ye)?0:Se.comparedTo(0)}}var Qu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,za=Math.ceil,Cs=Math.floor,$i="[BigNumber Error] ",ao=$i+"Number primitive has more than 15 significant digits: ",Ro=1e14,wr=14,el=9007199254740991,tl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_a=1e7,Lo=1e9;function ih(h){var m,_,S,M=tt.prototype={constructor:tt,toString:null,valueOf:null},H=new tt(1),ne=20,ae=4,ye=-7,Se=21,nt=-1e7,We=1e7,_t=!1,It=1,en=0,_n={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Pn="0123456789abcdefghijklmnopqrstuvwxyz",br=!0;function tt(be,Pe){var je,Fe,Ue,He,ut,ht,mt,At,Tt=this;if(!(Tt instanceof tt))return new tt(be,Pe);if(Pe==null){if(be&&be._isBigNumber===!0){Tt.s=be.s,!be.c||be.e>We?Tt.c=Tt.e=null:be.e<nt?Tt.c=[Tt.e=0]:(Tt.e=be.e,Tt.c=be.c.slice());return}if((ht=typeof be=="number")&&be*0==0){if(Tt.s=1/be<0?(be=-be,-1):1,be===~~be){for(He=0,ut=be;ut>=10;ut/=10,He++);He>We?Tt.c=Tt.e=null:(Tt.e=He,Tt.c=[be]);return}At=String(be)}else{if(!Qu.test(At=String(be)))return S(Tt,At,ht);Tt.s=At.charCodeAt(0)==45?(At=At.slice(1),-1):1}(He=At.indexOf("."))>-1&&(At=At.replace(".","")),(ut=At.search(/e/i))>0?(He<0&&(He=ut),He+=+At.slice(ut+1),At=At.substring(0,ut)):He<0&&(He=At.length)}else{if(u(Pe,2,Pn.length,"Base"),Pe==10&&br)return Tt=new tt(be),Pt(Tt,ne+Tt.e+1,ae);if(At=String(be),ht=typeof be=="number"){if(be*0!=0)return S(Tt,At,ht,Pe);if(Tt.s=1/be<0?(At=At.slice(1),-1):1,tt.DEBUG&&At.replace(/^0\.0*|\./,"").length>15)throw Error(ao+be)}else Tt.s=At.charCodeAt(0)===45?(At=At.slice(1),-1):1;for(je=Pn.slice(0,Pe),He=ut=0,mt=At.length;ut<mt;ut++)if(je.indexOf(Fe=At.charAt(ut))<0){if(Fe=="."){if(ut>He){He=mt;continue}}else if(!Ue&&(At==At.toUpperCase()&&(At=At.toLowerCase())||At==At.toLowerCase()&&(At=At.toUpperCase()))){Ue=!0,ut=-1,He=0;continue}return S(Tt,String(be),ht,Pe)}ht=!1,At=_(At,Pe,10,Tt.s),(He=At.indexOf("."))>-1?At=At.replace(".",""):He=At.length}for(ut=0;At.charCodeAt(ut)===48;ut++);for(mt=At.length;At.charCodeAt(--mt)===48;);if(At=At.slice(ut,++mt)){if(mt-=ut,ht&&tt.DEBUG&&mt>15&&(be>el||be!==Cs(be)))throw Error(ao+Tt.s*be);if((He=He-ut-1)>We)Tt.c=Tt.e=null;else if(He<nt)Tt.c=[Tt.e=0];else{if(Tt.e=He,Tt.c=[],ut=(He+1)%wr,He<0&&(ut+=wr),ut<mt){for(ut&&Tt.c.push(+At.slice(0,ut)),mt-=wr;ut<mt;)Tt.c.push(+At.slice(ut,ut+=wr));ut=wr-(At=At.slice(ut)).length}else ut-=mt;for(;ut--;At+="0");Tt.c.push(+At)}}else Tt.c=[Tt.e=0]}tt.clone=ih,tt.ROUND_UP=0,tt.ROUND_DOWN=1,tt.ROUND_CEIL=2,tt.ROUND_FLOOR=3,tt.ROUND_HALF_UP=4,tt.ROUND_HALF_DOWN=5,tt.ROUND_HALF_EVEN=6,tt.ROUND_HALF_CEIL=7,tt.ROUND_HALF_FLOOR=8,tt.EUCLID=9,tt.config=tt.set=function(be){var Pe,je;if(be!=null)if(typeof be=="object"){if(be.hasOwnProperty(Pe="DECIMAL_PLACES")&&(je=be[Pe],u(je,0,Lo,Pe),ne=je),be.hasOwnProperty(Pe="ROUNDING_MODE")&&(je=be[Pe],u(je,0,8,Pe),ae=je),be.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(je=be[Pe],je&&je.pop?(u(je[0],-1e9,0,Pe),u(je[1],0,Lo,Pe),ye=je[0],Se=je[1]):(u(je,-1e9,Lo,Pe),ye=-(Se=je<0?-je:je))),be.hasOwnProperty(Pe="RANGE"))if(je=be[Pe],je&&je.pop)u(je[0],-1e9,-1,Pe),u(je[1],1,Lo,Pe),nt=je[0],We=je[1];else if(u(je,-1e9,Lo,Pe),je)nt=-(We=je<0?-je:je);else throw Error($i+Pe+" cannot be zero: "+je);if(be.hasOwnProperty(Pe="CRYPTO"))if(je=be[Pe],je===!!je)if(je)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_t=je;else throw _t=!je,Error($i+"crypto unavailable");else _t=je;else throw Error($i+Pe+" not true or false: "+je);if(be.hasOwnProperty(Pe="MODULO_MODE")&&(je=be[Pe],u(je,0,9,Pe),It=je),be.hasOwnProperty(Pe="POW_PRECISION")&&(je=be[Pe],u(je,0,Lo,Pe),en=je),be.hasOwnProperty(Pe="FORMAT"))if(je=be[Pe],typeof je=="object")_n=je;else throw Error($i+Pe+" not an object: "+je);if(be.hasOwnProperty(Pe="ALPHABET"))if(je=be[Pe],typeof je=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(je))br=je.slice(0,10)=="0123456789",Pn=je;else throw Error($i+Pe+" invalid: "+je)}else throw Error($i+"Object expected: "+be);return{DECIMAL_PLACES:ne,ROUNDING_MODE:ae,EXPONENTIAL_AT:[ye,Se],RANGE:[nt,We],CRYPTO:_t,MODULO_MODE:It,POW_PRECISION:en,FORMAT:_n,ALPHABET:Pn}},tt.isBigNumber=function(be){if(!be||be._isBigNumber!==!0)return!1;if(!tt.DEBUG)return!0;var Pe,je,Fe=be.c,Ue=be.e,He=be.s;e:if({}.toString.call(Fe)=="[object Array]"){if((He===1||He===-1)&&Ue>=-1e9&&Ue<=Lo&&Ue===Cs(Ue)){if(Fe[0]===0){if(Ue===0&&Fe.length===1)return!0;break e}if(Pe=(Ue+1)%wr,Pe<1&&(Pe+=wr),String(Fe[0]).length==Pe){for(Pe=0;Pe<Fe.length;Pe++)if(je=Fe[Pe],je<0||je>=Ro||je!==Cs(je))break e;if(je!==0)return!0}}}else if(Fe===null&&Ue===null&&(He===null||He===1||He===-1))return!0;throw Error($i+"Invalid BigNumber: "+be)},tt.maximum=tt.max=function(){return ft(arguments,-1)},tt.minimum=tt.min=function(){return ft(arguments,1)},tt.random=function(){var be=9007199254740992,Pe=Math.random()*be&2097151?function(){return Cs(Math.random()*be)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(je){var Fe,Ue,He,ut,ht,mt=0,At=[],Tt=new tt(H);if(je==null?je=ne:u(je,0,Lo),ut=za(je/wr),_t)if(crypto.getRandomValues){for(Fe=crypto.getRandomValues(new Uint32Array(ut*=2));mt<ut;)ht=Fe[mt]*131072+(Fe[mt+1]>>>11),ht>=9e15?(Ue=crypto.getRandomValues(new Uint32Array(2)),Fe[mt]=Ue[0],Fe[mt+1]=Ue[1]):(At.push(ht%1e14),mt+=2);mt=ut/2}else if(crypto.randomBytes){for(Fe=crypto.randomBytes(ut*=7);mt<ut;)ht=(Fe[mt]&31)*281474976710656+Fe[mt+1]*1099511627776+Fe[mt+2]*4294967296+Fe[mt+3]*16777216+(Fe[mt+4]<<16)+(Fe[mt+5]<<8)+Fe[mt+6],ht>=9e15?crypto.randomBytes(7).copy(Fe,mt):(At.push(ht%1e14),mt+=7);mt=ut/7}else throw _t=!1,Error($i+"crypto unavailable");if(!_t)for(;mt<ut;)ht=Pe(),ht<9e15&&(At[mt++]=ht%1e14);for(ut=At[--mt],je%=wr,ut&&je&&(ht=tl[wr-je],At[mt]=Cs(ut/ht)*ht);At[mt]===0;At.pop(),mt--);if(mt<0)At=[He=0];else{for(He=-1;At[0]===0;At.splice(0,1),He-=wr);for(mt=1,ht=At[0];ht>=10;ht/=10,mt++);mt<wr&&(He-=wr-mt)}return Tt.e=He,Tt.c=At,Tt}}(),tt.sum=function(){for(var be=1,Pe=arguments,je=new tt(Pe[0]);be<Pe.length;)je=je.plus(Pe[be++]);return je},_=function(){var be="0123456789";function Pe(je,Fe,Ue,He){for(var ut,ht=[0],mt,At=0,Tt=je.length;At<Tt;){for(mt=ht.length;mt--;ht[mt]*=Fe);for(ht[0]+=He.indexOf(je.charAt(At++)),ut=0;ut<ht.length;ut++)ht[ut]>Ue-1&&(ht[ut+1]==null&&(ht[ut+1]=0),ht[ut+1]+=ht[ut]/Ue|0,ht[ut]%=Ue)}return ht.reverse()}return function(je,Fe,Ue,He,ut){var ht,mt,At,Tt,ln,Wn,Kn,ar,wi=je.indexOf("."),Bi=ne,ni=ae;for(wi>=0&&(Tt=en,en=0,je=je.replace(".",""),ar=new tt(Fe),Wn=ar.pow(je.length-wi),en=Tt,ar.c=Pe(G(Hs(Wn.c),Wn.e,"0"),10,Ue,be),ar.e=ar.c.length),Kn=Pe(je,Fe,Ue,ut?(ht=Pn,be):(ht=be,Pn)),At=Tt=Kn.length;Kn[--Tt]==0;Kn.pop());if(!Kn[0])return ht.charAt(0);if(wi<0?--At:(Wn.c=Kn,Wn.e=At,Wn.s=He,Wn=m(Wn,ar,Bi,ni,Ue),Kn=Wn.c,ln=Wn.r,At=Wn.e),mt=At+Bi+1,wi=Kn[mt],Tt=Ue/2,ln=ln||mt<0||Kn[mt+1]!=null,ln=ni<4?(wi!=null||ln)&&(ni==0||ni==(Wn.s<0?3:2)):wi>Tt||wi==Tt&&(ni==4||ln||ni==6&&Kn[mt-1]&1||ni==(Wn.s<0?8:7)),mt<1||!Kn[0])je=ln?G(ht.charAt(1),-Bi,ht.charAt(0)):ht.charAt(0);else{if(Kn.length=mt,ln)for(--Ue;++Kn[--mt]>Ue;)Kn[mt]=0,mt||(++At,Kn=[1].concat(Kn));for(Tt=Kn.length;!Kn[--Tt];);for(wi=0,je="";wi<=Tt;je+=ht.charAt(Kn[wi++]));je=G(je,At,ht.charAt(0))}return je}}(),m=function(){function be(Fe,Ue,He){var ut,ht,mt,At,Tt=0,ln=Fe.length,Wn=Ue%_a,Kn=Ue/_a|0;for(Fe=Fe.slice();ln--;)mt=Fe[ln]%_a,At=Fe[ln]/_a|0,ut=Kn*mt+At*Wn,ht=Wn*mt+ut%_a*_a+Tt,Tt=(ht/He|0)+(ut/_a|0)+Kn*At,Fe[ln]=ht%He;return Tt&&(Fe=[Tt].concat(Fe)),Fe}function Pe(Fe,Ue,He,ut){var ht,mt;if(He!=ut)mt=He>ut?1:-1;else for(ht=mt=0;ht<He;ht++)if(Fe[ht]!=Ue[ht]){mt=Fe[ht]>Ue[ht]?1:-1;break}return mt}function je(Fe,Ue,He,ut){for(var ht=0;He--;)Fe[He]-=ht,ht=Fe[He]<Ue[He]?1:0,Fe[He]=ht*ut+Fe[He]-Ue[He];for(;!Fe[0]&&Fe.length>1;Fe.splice(0,1));}return function(Fe,Ue,He,ut,ht){var mt,At,Tt,ln,Wn,Kn,ar,wi,Bi,ni,Hi,zo,tc,Va,Dd,Sl,Tc,Ua=Fe.s==Ue.s?1:-1,uo=Fe.c,ys=Ue.c;if(!uo||!uo[0]||!ys||!ys[0])return new tt(!Fe.s||!Ue.s||(uo?ys&&uo[0]==ys[0]:!ys)?NaN:uo&&uo[0]==0||!ys?Ua*0:Ua/0);for(wi=new tt(Ua),Bi=wi.c=[],At=Fe.e-Ue.e,Ua=He+At+1,ht||(ht=Ro,At=Us(Fe.e/wr)-Us(Ue.e/wr),Ua=Ua/wr|0),Tt=0;ys[Tt]==(uo[Tt]||0);Tt++);if(ys[Tt]>(uo[Tt]||0)&&At--,Ua<0)Bi.push(1),ln=!0;else{for(Va=uo.length,Sl=ys.length,Tt=0,Ua+=2,Wn=Cs(ht/(ys[0]+1)),Wn>1&&(ys=be(ys,Wn,ht),uo=be(uo,Wn,ht),Sl=ys.length,Va=uo.length),tc=Sl,ni=uo.slice(0,Sl),Hi=ni.length;Hi<Sl;ni[Hi++]=0);Tc=ys.slice(),Tc=[0].concat(Tc),Dd=ys[0],ys[1]>=ht/2&&Dd++;do{if(Wn=0,mt=Pe(ys,ni,Sl,Hi),mt<0){if(zo=ni[0],Sl!=Hi&&(zo=zo*ht+(ni[1]||0)),Wn=Cs(zo/Dd),Wn>1)for(Wn>=ht&&(Wn=ht-1),Kn=be(ys,Wn,ht),ar=Kn.length,Hi=ni.length;Pe(Kn,ni,ar,Hi)==1;)Wn--,je(Kn,Sl<ar?Tc:ys,ar,ht),ar=Kn.length,mt=1;else Wn==0&&(mt=Wn=1),Kn=ys.slice(),ar=Kn.length;if(ar<Hi&&(Kn=[0].concat(Kn)),je(ni,Kn,Hi,ht),Hi=ni.length,mt==-1)for(;Pe(ys,ni,Sl,Hi)<1;)Wn++,je(ni,Sl<Hi?Tc:ys,Hi,ht),Hi=ni.length}else mt===0&&(Wn++,ni=[0]);Bi[Tt++]=Wn,ni[0]?ni[Hi++]=uo[tc]||0:(ni=[uo[tc]],Hi=1)}while((tc++<Va||ni[0]!=null)&&Ua--);ln=ni[0]!=null,Bi[0]||Bi.splice(0,1)}if(ht==Ro){for(Tt=1,Ua=Bi[0];Ua>=10;Ua/=10,Tt++);Pt(wi,He+(wi.e=Tt+At*wr-1)+1,ut,ln)}else wi.e=At,wi.r=+ln;return wi}}();function it(be,Pe,je,Fe){var Ue,He,ut,ht,mt;if(je==null?je=ae:u(je,0,8),!be.c)return be.toString();if(Ue=be.c[0],ut=be.e,Pe==null)mt=Hs(be.c),mt=Fe==1||Fe==2&&(ut<=ye||ut>=Se)?P(mt,ut):G(mt,ut,"0");else if(be=Pt(new tt(be),Pe,je),He=be.e,mt=Hs(be.c),ht=mt.length,Fe==1||Fe==2&&(Pe<=He||He<=ye)){for(;ht<Pe;mt+="0",ht++);mt=P(mt,He)}else if(Pe-=ut,mt=G(mt,He,"0"),He+1>ht){if(--Pe>0)for(mt+=".";Pe--;mt+="0");}else if(Pe+=He-ht,Pe>0)for(He+1==ht&&(mt+=".");Pe--;mt+="0");return be.s<0&&Ue?"-"+mt:mt}function ft(be,Pe){for(var je,Fe,Ue=1,He=new tt(be[0]);Ue<be.length;Ue++)Fe=new tt(be[Ue]),(!Fe.s||(je=wa(He,Fe))===Pe||je===0&&He.s===Pe)&&(He=Fe);return He}function zt(be,Pe,je){for(var Fe=1,Ue=Pe.length;!Pe[--Ue];Pe.pop());for(Ue=Pe[0];Ue>=10;Ue/=10,Fe++);return(je=Fe+je*wr-1)>We?be.c=be.e=null:je<nt?be.c=[be.e=0]:(be.e=je,be.c=Pe),be}S=function(){var be=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,je=/^\.([^.]+)$/,Fe=/^-?(Infinity|NaN)$/,Ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(He,ut,ht,mt){var At,Tt=ht?ut:ut.replace(Ue,"");if(Fe.test(Tt))He.s=isNaN(Tt)?null:Tt<0?-1:1;else{if(!ht&&(Tt=Tt.replace(be,function(ln,Wn,Kn){return At=(Kn=Kn.toLowerCase())=="x"?16:Kn=="b"?2:8,!mt||mt==At?Wn:ln}),mt&&(At=mt,Tt=Tt.replace(Pe,"$1").replace(je,"0.$1")),ut!=Tt))return new tt(Tt,At);if(tt.DEBUG)throw Error($i+"Not a"+(mt?" base "+mt:"")+" number: "+ut);He.s=null}He.c=He.e=null}}();function Pt(be,Pe,je,Fe){var Ue,He,ut,ht,mt,At,Tt,ln=be.c,Wn=tl;if(ln){e:{for(Ue=1,ht=ln[0];ht>=10;ht/=10,Ue++);if(He=Pe-Ue,He<0)He+=wr,ut=Pe,mt=ln[At=0],Tt=Cs(mt/Wn[Ue-ut-1]%10);else if(At=za((He+1)/wr),At>=ln.length)if(Fe){for(;ln.length<=At;ln.push(0));mt=Tt=0,Ue=1,He%=wr,ut=He-wr+1}else break e;else{for(mt=ht=ln[At],Ue=1;ht>=10;ht/=10,Ue++);He%=wr,ut=He-wr+Ue,Tt=ut<0?0:Cs(mt/Wn[Ue-ut-1]%10)}if(Fe=Fe||Pe<0||ln[At+1]!=null||(ut<0?mt:mt%Wn[Ue-ut-1]),Fe=je<4?(Tt||Fe)&&(je==0||je==(be.s<0?3:2)):Tt>5||Tt==5&&(je==4||Fe||je==6&&(He>0?ut>0?mt/Wn[Ue-ut]:0:ln[At-1])%10&1||je==(be.s<0?8:7)),Pe<1||!ln[0])return ln.length=0,Fe?(Pe-=be.e+1,ln[0]=Wn[(wr-Pe%wr)%wr],be.e=-Pe||0):ln[0]=be.e=0,be;if(He==0?(ln.length=At,ht=1,At--):(ln.length=At+1,ht=Wn[wr-He],ln[At]=ut>0?Cs(mt/Wn[Ue-ut]%Wn[ut])*ht:0),Fe)for(;;)if(At==0){for(He=1,ut=ln[0];ut>=10;ut/=10,He++);for(ut=ln[0]+=ht,ht=1;ut>=10;ut/=10,ht++);He!=ht&&(be.e++,ln[0]==Ro&&(ln[0]=1));break}else{if(ln[At]+=ht,ln[At]!=Ro)break;ln[At--]=0,ht=1}for(He=ln.length;ln[--He]===0;ln.pop());}be.e>We?be.c=be.e=null:be.e<nt&&(be.c=[be.e=0])}return be}function Bt(be){var Pe,je=be.e;return je===null?be.toString():(Pe=Hs(be.c),Pe=je<=ye||je>=Se?P(Pe,je):G(Pe,je,"0"),be.s<0?"-"+Pe:Pe)}return M.absoluteValue=M.abs=function(){var be=new tt(this);return be.s<0&&(be.s=1),be},M.comparedTo=function(be,Pe){return wa(this,new tt(be,Pe))},M.decimalPlaces=M.dp=function(be,Pe){var je,Fe,Ue,He=this;if(be!=null)return u(be,0,Lo),Pe==null?Pe=ae:u(Pe,0,8),Pt(new tt(He),be+He.e+1,Pe);if(!(je=He.c))return null;if(Fe=((Ue=je.length-1)-Us(this.e/wr))*wr,Ue=je[Ue])for(;Ue%10==0;Ue/=10,Fe--);return Fe<0&&(Fe=0),Fe},M.dividedBy=M.div=function(be,Pe){return m(this,new tt(be,Pe),ne,ae)},M.dividedToIntegerBy=M.idiv=function(be,Pe){return m(this,new tt(be,Pe),0,1)},M.exponentiatedBy=M.pow=function(be,Pe){var je,Fe,Ue,He,ut,ht,mt,At,Tt,ln=this;if(be=new tt(be),be.c&&!be.isInteger())throw Error($i+"Exponent not an integer: "+Bt(be));if(Pe!=null&&(Pe=new tt(Pe)),ht=be.e>14,!ln.c||!ln.c[0]||ln.c[0]==1&&!ln.e&&ln.c.length==1||!be.c||!be.c[0])return Tt=new tt(Math.pow(+Bt(ln),ht?be.s*(2-y(be)):+Bt(be))),Pe?Tt.mod(Pe):Tt;if(mt=be.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new tt(NaN);Fe=!mt&&ln.isInteger()&&Pe.isInteger(),Fe&&(ln=ln.mod(Pe))}else{if(be.e>9&&(ln.e>0||ln.e<-1||(ln.e==0?ln.c[0]>1||ht&&ln.c[1]>=24e7:ln.c[0]<8e13||ht&&ln.c[0]<=9999975e7)))return He=ln.s<0&&y(be)?-0:0,ln.e>-1&&(He=1/He),new tt(mt?1/He:He);en&&(He=za(en/wr+2))}for(ht?(je=new tt(.5),mt&&(be.s=1),At=y(be)):(Ue=Math.abs(+Bt(be)),At=Ue%2),Tt=new tt(H);;){if(At){if(Tt=Tt.times(ln),!Tt.c)break;He?Tt.c.length>He&&(Tt.c.length=He):Fe&&(Tt=Tt.mod(Pe))}if(Ue){if(Ue=Cs(Ue/2),Ue===0)break;At=Ue%2}else if(be=be.times(je),Pt(be,be.e+1,1),be.e>14)At=y(be);else{if(Ue=+Bt(be),Ue===0)break;At=Ue%2}ln=ln.times(ln),He?ln.c&&ln.c.length>He&&(ln.c.length=He):Fe&&(ln=ln.mod(Pe))}return Fe?Tt:(mt&&(Tt=H.div(Tt)),Pe?Tt.mod(Pe):He?Pt(Tt,en,ae,ut):Tt)},M.integerValue=function(be){var Pe=new tt(this);return be==null?be=ae:u(be,0,8),Pt(Pe,Pe.e+1,be)},M.isEqualTo=M.eq=function(be,Pe){return wa(this,new tt(be,Pe))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(be,Pe){return wa(this,new tt(be,Pe))>0},M.isGreaterThanOrEqualTo=M.gte=function(be,Pe){return(Pe=wa(this,new tt(be,Pe)))===1||Pe===0},M.isInteger=function(){return!!this.c&&Us(this.e/wr)>this.c.length-2},M.isLessThan=M.lt=function(be,Pe){return wa(this,new tt(be,Pe))<0},M.isLessThanOrEqualTo=M.lte=function(be,Pe){return(Pe=wa(this,new tt(be,Pe)))===-1||Pe===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(be,Pe){var je,Fe,Ue,He,ut=this,ht=ut.s;if(be=new tt(be,Pe),Pe=be.s,!ht||!Pe)return new tt(NaN);if(ht!=Pe)return be.s=-Pe,ut.plus(be);var mt=ut.e/wr,At=be.e/wr,Tt=ut.c,ln=be.c;if(!mt||!At){if(!Tt||!ln)return Tt?(be.s=-Pe,be):new tt(ln?ut:NaN);if(!Tt[0]||!ln[0])return ln[0]?(be.s=-Pe,be):new tt(Tt[0]?ut:ae==3?-0:0)}if(mt=Us(mt),At=Us(At),Tt=Tt.slice(),ht=mt-At){for((He=ht<0)?(ht=-ht,Ue=Tt):(At=mt,Ue=ln),Ue.reverse(),Pe=ht;Pe--;Ue.push(0));Ue.reverse()}else for(Fe=(He=(ht=Tt.length)<(Pe=ln.length))?ht:Pe,ht=Pe=0;Pe<Fe;Pe++)if(Tt[Pe]!=ln[Pe]){He=Tt[Pe]<ln[Pe];break}if(He&&(Ue=Tt,Tt=ln,ln=Ue,be.s=-be.s),Pe=(Fe=ln.length)-(je=Tt.length),Pe>0)for(;Pe--;Tt[je++]=0);for(Pe=Ro-1;Fe>ht;){if(Tt[--Fe]<ln[Fe]){for(je=Fe;je&&!Tt[--je];Tt[je]=Pe);--Tt[je],Tt[Fe]+=Ro}Tt[Fe]-=ln[Fe]}for(;Tt[0]==0;Tt.splice(0,1),--At);return Tt[0]?zt(be,Tt,At):(be.s=ae==3?-1:1,be.c=[be.e=0],be)},M.modulo=M.mod=function(be,Pe){var je,Fe,Ue=this;return be=new tt(be,Pe),!Ue.c||!be.s||be.c&&!be.c[0]?new tt(NaN):!be.c||Ue.c&&!Ue.c[0]?new tt(Ue):(It==9?(Fe=be.s,be.s=1,je=m(Ue,be,0,3),be.s=Fe,je.s*=Fe):je=m(Ue,be,0,It),be=Ue.minus(je.times(be)),!be.c[0]&&It==1&&(be.s=Ue.s),be)},M.multipliedBy=M.times=function(be,Pe){var je,Fe,Ue,He,ut,ht,mt,At,Tt,ln,Wn,Kn,ar,wi,Bi,ni=this,Hi=ni.c,zo=(be=new tt(be,Pe)).c;if(!Hi||!zo||!Hi[0]||!zo[0])return!ni.s||!be.s||Hi&&!Hi[0]&&!zo||zo&&!zo[0]&&!Hi?be.c=be.e=be.s=null:(be.s*=ni.s,!Hi||!zo?be.c=be.e=null:(be.c=[0],be.e=0)),be;for(Fe=Us(ni.e/wr)+Us(be.e/wr),be.s*=ni.s,mt=Hi.length,ln=zo.length,mt<ln&&(ar=Hi,Hi=zo,zo=ar,Ue=mt,mt=ln,ln=Ue),Ue=mt+ln,ar=[];Ue--;ar.push(0));for(wi=Ro,Bi=_a,Ue=ln;--Ue>=0;){for(je=0,Wn=zo[Ue]%Bi,Kn=zo[Ue]/Bi|0,ut=mt,He=Ue+ut;He>Ue;)At=Hi[--ut]%Bi,Tt=Hi[ut]/Bi|0,ht=Kn*At+Tt*Wn,At=Wn*At+ht%Bi*Bi+ar[He]+je,je=(At/wi|0)+(ht/Bi|0)+Kn*Tt,ar[He--]=At%wi;ar[He]=je}return je?++Fe:ar.splice(0,1),zt(be,ar,Fe)},M.negated=function(){var be=new tt(this);return be.s=-be.s||null,be},M.plus=function(be,Pe){var je,Fe=this,Ue=Fe.s;if(be=new tt(be,Pe),Pe=be.s,!Ue||!Pe)return new tt(NaN);if(Ue!=Pe)return be.s=-Pe,Fe.minus(be);var He=Fe.e/wr,ut=be.e/wr,ht=Fe.c,mt=be.c;if(!He||!ut){if(!ht||!mt)return new tt(Ue/0);if(!ht[0]||!mt[0])return mt[0]?be:new tt(ht[0]?Fe:Ue*0)}if(He=Us(He),ut=Us(ut),ht=ht.slice(),Ue=He-ut){for(Ue>0?(ut=He,je=mt):(Ue=-Ue,je=ht),je.reverse();Ue--;je.push(0));je.reverse()}for(Ue=ht.length,Pe=mt.length,Ue-Pe<0&&(je=mt,mt=ht,ht=je,Pe=Ue),Ue=0;Pe;)Ue=(ht[--Pe]=ht[Pe]+mt[Pe]+Ue)/Ro|0,ht[Pe]=Ro===ht[Pe]?0:ht[Pe]%Ro;return Ue&&(ht=[Ue].concat(ht),++ut),zt(be,ht,ut)},M.precision=M.sd=function(be,Pe){var je,Fe,Ue,He=this;if(be!=null&&be!==!!be)return u(be,1,Lo),Pe==null?Pe=ae:u(Pe,0,8),Pt(new tt(He),be,Pe);if(!(je=He.c))return null;if(Ue=je.length-1,Fe=Ue*wr+1,Ue=je[Ue]){for(;Ue%10==0;Ue/=10,Fe--);for(Ue=je[0];Ue>=10;Ue/=10,Fe++);}return be&&He.e+1>Fe&&(Fe=He.e+1),Fe},M.shiftedBy=function(be){return u(be,-9007199254740991,el),this.times("1e"+be)},M.squareRoot=M.sqrt=function(){var be,Pe,je,Fe,Ue,He=this,ut=He.c,ht=He.s,mt=He.e,At=ne+4,Tt=new tt("0.5");if(ht!==1||!ut||!ut[0])return new tt(!ht||ht<0&&(!ut||ut[0])?NaN:ut?He:1/0);if(ht=Math.sqrt(+Bt(He)),ht==0||ht==1/0?(Pe=Hs(ut),(Pe.length+mt)%2==0&&(Pe+="0"),ht=Math.sqrt(+Pe),mt=Us((mt+1)/2)-(mt<0||mt%2),ht==1/0?Pe="5e"+mt:(Pe=ht.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+mt),je=new tt(Pe)):je=new tt(ht+""),je.c[0]){for(mt=je.e,ht=mt+At,ht<3&&(ht=0);;)if(Ue=je,je=Tt.times(Ue.plus(m(He,Ue,At,1))),Hs(Ue.c).slice(0,ht)===(Pe=Hs(je.c)).slice(0,ht))if(je.e<mt&&--ht,Pe=Pe.slice(ht-3,ht+1),Pe=="9999"||!Fe&&Pe=="4999"){if(!Fe&&(Pt(Ue,Ue.e+ne+2,0),Ue.times(Ue).eq(He))){je=Ue;break}At+=4,ht+=4,Fe=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(Pt(je,je.e+ne+2,1),be=!je.times(je).eq(He));break}}return Pt(je,je.e+ne+1,ae,be)},M.toExponential=function(be,Pe){return be!=null&&(u(be,0,Lo),be++),it(this,be,Pe,1)},M.toFixed=function(be,Pe){return be!=null&&(u(be,0,Lo),be=be+this.e+1),it(this,be,Pe)},M.toFormat=function(be,Pe,je){var Fe,Ue=this;if(je==null)be!=null&&Pe&&typeof Pe=="object"?(je=Pe,Pe=null):be&&typeof be=="object"?(je=be,be=Pe=null):je=_n;else if(typeof je!="object")throw Error($i+"Argument not an object: "+je);if(Fe=Ue.toFixed(be,Pe),Ue.c){var He,ut=Fe.split("."),ht=+je.groupSize,mt=+je.secondaryGroupSize,At=je.groupSeparator||"",Tt=ut[0],ln=ut[1],Wn=Ue.s<0,Kn=Wn?Tt.slice(1):Tt,ar=Kn.length;if(mt&&(He=ht,ht=mt,mt=He,ar-=He),ht>0&&ar>0){for(He=ar%ht||ht,Tt=Kn.substr(0,He);He<ar;He+=ht)Tt+=At+Kn.substr(He,ht);mt>0&&(Tt+=At+Kn.slice(He)),Wn&&(Tt="-"+Tt)}Fe=ln?Tt+(je.decimalSeparator||"")+((mt=+je.fractionGroupSize)?ln.replace(new RegExp("\\d{"+mt+"}\\B","g"),"$&"+(je.fractionGroupSeparator||"")):ln):Tt}return(je.prefix||"")+Fe+(je.suffix||"")},M.toFraction=function(be){var Pe,je,Fe,Ue,He,ut,ht,mt,At,Tt,ln,Wn,Kn=this,ar=Kn.c;if(be!=null&&(ht=new tt(be),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(H)))throw Error($i+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Bt(ht));if(!ar)return new tt(Kn);for(Pe=new tt(H),At=je=new tt(H),Fe=mt=new tt(H),Wn=Hs(ar),He=Pe.e=Wn.length-Kn.e-1,Pe.c[0]=tl[(ut=He%wr)<0?wr+ut:ut],be=!be||ht.comparedTo(Pe)>0?He>0?Pe:At:ht,ut=We,We=1/0,ht=new tt(Wn),mt.c[0]=0;Tt=m(ht,Pe,0,1),Ue=je.plus(Tt.times(Fe)),Ue.comparedTo(be)!=1;)je=Fe,Fe=Ue,At=mt.plus(Tt.times(Ue=At)),mt=Ue,Pe=ht.minus(Tt.times(Ue=Pe)),ht=Ue;return Ue=m(be.minus(je),Fe,0,1),mt=mt.plus(Ue.times(At)),je=je.plus(Ue.times(Fe)),mt.s=At.s=Kn.s,He=He*2,ln=m(At,Fe,He,ae).minus(Kn).abs().comparedTo(m(mt,je,He,ae).minus(Kn).abs())<1?[At,Fe]:[mt,je],We=ut,ln},M.toNumber=function(){return+Bt(this)},M.toPrecision=function(be,Pe){return be!=null&&u(be,1,Lo),it(this,be,Pe,2)},M.toString=function(be){var Pe,je=this,Fe=je.s,Ue=je.e;return Ue===null?Fe?(Pe="Infinity",Fe<0&&(Pe="-"+Pe)):Pe="NaN":(be==null?Pe=Ue<=ye||Ue>=Se?P(Hs(je.c),Ue):G(Hs(je.c),Ue,"0"):be===10&&br?(je=Pt(new tt(je),ne+Ue+1,ae),Pe=G(Hs(je.c),je.e,"0")):(u(be,2,Pn.length,"Base"),Pe=_(G(Hs(je.c),Ue,"0"),10,be,Fe,!0)),Fe<0&&je.c[0]&&(Pe="-"+Pe)),Pe},M.valueOf=M.toJSON=function(){return Bt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,h!=null&&tt.set(h),tt}function Us(h){var m=h|0;return h>0||h===m?m:m-1}function Hs(h){for(var m,_,S=1,M=h.length,H=h[0]+"";S<M;){for(m=h[S++]+"",_=wr-m.length;_--;m="0"+m);H+=m}for(M=H.length;H.charCodeAt(--M)===48;);return H.slice(0,M+1||1)}function wa(h,m){var _,S,M=h.c,H=m.c,ne=h.s,ae=m.s,ye=h.e,Se=m.e;if(!ne||!ae)return null;if(_=M&&!M[0],S=H&&!H[0],_||S)return _?S?0:-ae:ne;if(ne!=ae)return ne;if(_=ne<0,S=ye==Se,!M||!H)return S?0:!M^_?1:-1;if(!S)return ye>Se^_?1:-1;for(ae=(ye=M.length)<(Se=H.length)?ye:Se,ne=0;ne<ae;ne++)if(M[ne]!=H[ne])return M[ne]>H[ne]^_?1:-1;return ye==Se?0:ye>Se^_?1:-1}function u(h,m,_,S){if(h<m||h>_||h!==Cs(h))throw Error($i+(S||"Argument")+(typeof h=="number"?h<m||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var m=h.c.length-1;return Us(h.e/wr)==m&&h.c[m]%2!=0}function P(h,m){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(m<0?"e":"e+")+m}function G(h,m,_){var S,M;if(m<0){for(M=_+".";++m;M+=_);h=M+h}else if(S=h.length,++m>S){for(M=_,m-=S;--m;M+=_);h+=M}else m<S&&(h=h.slice(0,m)+"."+h.slice(m));return h}var ue=ih(),Ce=ue,lt=class{constructor(h){Ye(this,"key");Ye(this,"left",null);Ye(this,"right",null);this.key=h}},Ot=class extends lt{constructor(h){super(h)}},Ht=class{constructor(){Ye(this,"size",0);Ye(this,"modificationCount",0);Ye(this,"splayCount",0)}splay(h){let m=this.root;if(m==null)return this.compare(h,h),-1;let _=null,S=null,M=null,H=null,ne=m,ae=this.compare,ye;for(;;)if(ye=ae(ne.key,h),ye>0){let Se=ne.left;if(Se==null||(ye=ae(Se.key,h),ye>0&&(ne.left=Se.right,Se.right=ne,ne=Se,Se=ne.left,Se==null)))break;_==null?S=ne:_.left=ne,_=ne,ne=Se}else if(ye<0){let Se=ne.right;if(Se==null||(ye=ae(Se.key,h),ye<0&&(ne.right=Se.left,Se.left=ne,ne=Se,Se=ne.right,Se==null)))break;M==null?H=ne:M.right=ne,M=ne,ne=Se}else break;return M!=null&&(M.right=ne.left,ne.left=H),_!=null&&(_.left=ne.right,ne.right=S),this.root!==ne&&(this.root=ne,this.splayCount++),ye}splayMin(h){let m=h,_=m.left;for(;_!=null;){let S=_;m.left=S.right,S.right=m,m=S,_=m.left}return m}splayMax(h){let m=h,_=m.right;for(;_!=null;){let S=_;m.right=S.left,S.left=m,m=S,_=m.right}return m}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let m=this.root,_=m,S=m.left;if(this.size--,S==null)this.root=m.right;else{let M=m.right;m=this.splayMax(S),m.right=M,this.root=m}return this.modificationCount++,_}addNewRoot(h,m){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}m<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,m)=>h<m?-1:h>m?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},un=class _g extends Ht{constructor(_,S){super();Ye(this,"root",null);Ye(this,"compare");Ye(this,"validKey");Ye(this,On,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=S??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let S of _)this.delete(S)}forEach(_){let S=this[Symbol.iterator](),M;for(;M=S.next(),!M.done;)_(M.value,M.value,this)}add(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Ot(_),S),this}addAndReturn(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Ot(_),S),this.root.key}addAll(_){for(let S of _)this.add(S)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let S=this.root.left;if(S==null)return null;let M=S.right;for(;M!=null;)S=M,M=S.right;return S.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let S=this.root.right;if(S==null)return null;let M=S.left;for(;M!=null;)S=M,M=S.left;return S.key}retainAll(_){let S=new _g(this.compare,this.validKey),M=this.modificationCount;for(let H of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(H)&&this.splay(H)==0&&S.add(this.root.key)}S.size!=this.size&&(this.root=S.root,this.size=S.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let S=new _g(this.compare,this.validKey);for(let M of this)_.has(M)&&S.add(M);return S}difference(_){let S=new _g(this.compare,this.validKey);for(let M of this)_.has(M)||S.add(M);return S}union(_){let S=this.clone();return S.addAll(_),S}clone(){let _=new _g(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function S(H,ne){let ae,ye;do{if(ae=H.left,ye=H.right,ae!=null){let Se=new Ot(ae.key);ne.left=Se,S(ae,Se)}if(ye!=null){let Se=new Ot(ye.key);ne.right=Se,H=ye,ne=Se}}while(ye!=null)}let M=new Ot(_.key);return S(_,M),M}toSet(){return this.clone()}entries(){return new $r(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(or=Symbol.iterator,On=Symbol.toStringTag,or)](){return new sr(this.wrap())}},Fn=class{constructor(h){Ye(this,"tree");Ye(this,"path",new Array);Ye(this,"modificationCount",null);Ye(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],m=h.right;if(m!=null){for(;m!=null;)this.path.push(m),m=m.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},sr=class extends Fn{getValue(h){return h.key}},$r=class extends Fn{getValue(h){return[h.key,h.key]}},Es=h=>h,os=h=>{if(h){let m=new un(Bo(h)),_=new un(Bo(h)),S=(H,ne)=>ne.addAndReturn(H),M=H=>({x:S(H.x,m),y:S(H.y,_)});return M({x:new Ce(0),y:new Ce(0)}),M}return Es},Ws=h=>({set:m=>{Qi=Ws(m)},reset:()=>Ws(h),compare:Bo(h),snap:os(h),orient:aa(h)}),Qi=Ws(),Fo=(h,m)=>h.ll.x.isLessThanOrEqualTo(m.x)&&m.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(m.y)&&m.y.isLessThanOrEqualTo(h.ur.y),sh=(h,m)=>{if(m.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(m.ll.x)||m.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(m.ll.y))return null;let _=h.ll.x.isLessThan(m.ll.x)?m.ll.x:h.ll.x,S=h.ur.x.isLessThan(m.ur.x)?h.ur.x:m.ur.x,M=h.ll.y.isLessThan(m.ll.y)?m.ll.y:h.ll.y,H=h.ur.y.isLessThan(m.ur.y)?h.ur.y:m.ur.y;return{ll:{x:_,y:M},ur:{x:S,y:H}}},$a=(h,m)=>h.x.times(m.y).minus(h.y.times(m.x)),xa=(h,m)=>h.x.times(m.x).plus(h.y.times(m.y)),la=h=>xa(h,h).sqrt(),Ad=(h,m,_)=>{let S={x:m.x.minus(h.x),y:m.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return $a(M,S).div(la(M)).div(la(S))},Du=(h,m,_)=>{let S={x:m.x.minus(h.x),y:m.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return xa(M,S).div(la(M)).div(la(S))},_i=(h,m,_)=>m.y.isZero()?null:{x:h.x.plus(m.x.div(m.y).times(_.minus(h.y))),y:_},lo=(h,m,_)=>m.x.isZero()?null:{x:_,y:h.y.plus(m.y.div(m.x).times(_.minus(h.x)))},Oe=(h,m,_,S)=>{if(m.x.isZero())return lo(_,S,h.x);if(S.x.isZero())return lo(h,m,_.x);if(m.y.isZero())return _i(_,S,h.y);if(S.y.isZero())return _i(h,m,_.y);let M=$a(m,S);if(M.isZero())return null;let H={x:_.x.minus(h.x),y:_.y.minus(h.y)},ne=$a(H,m).div(M),ae=$a(H,S).div(M),ye=h.x.plus(ae.times(m.x)),Se=_.x.plus(ne.times(S.x)),nt=h.y.plus(ae.times(m.y)),We=_.y.plus(ne.times(S.y)),_t=ye.plus(Se).div(2),It=nt.plus(We).div(2);return{x:_t,y:It}},jo=class BE{constructor(m,_){Ye(this,"point");Ye(this,"isLeft");Ye(this,"segment");Ye(this,"otherSE");Ye(this,"consumedBy");m.events===void 0?m.events=[this]:m.events.push(this),this.point=m,this.isLeft=_}static compare(m,_){let S=BE.comparePoints(m.point,_.point);return S!==0?S:(m.point!==_.point&&m.link(_),m.isLeft!==_.isLeft?m.isLeft?1:-1:Gs.compare(m.segment,_.segment))}static comparePoints(m,_){return m.x.isLessThan(_.x)?-1:m.x.isGreaterThan(_.x)?1:m.y.isLessThan(_.y)?-1:m.y.isGreaterThan(_.y)?1:0}link(m){if(m.point===this.point)throw new Error("Tried to link already linked events");let _=m.point.events;for(let S=0,M=_.length;S<M;S++){let H=_[S];this.point.events.push(H),H.point=this.point}this.checkForConsuming()}checkForConsuming(){let m=this.point.events.length;for(let _=0;_<m;_++){let S=this.point.events[_];if(S.segment.consumedBy===void 0)for(let M=_+1;M<m;M++){let H=this.point.events[M];H.consumedBy===void 0&&S.otherSE.point.events===H.otherSE.point.events&&S.segment.consume(H.segment)}}}getAvailableLinkedEvents(){let m=[];for(let _=0,S=this.point.events.length;_<S;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&m.push(M)}return m}getLeftmostComparator(m){let _=new Map,S=M=>{let H=M.otherSE;_.set(M,{sine:Ad(this.point,m.point,H.point),cosine:Du(this.point,m.point,H.point)})};return(M,H)=>{_.has(M)||S(M),_.has(H)||S(H);let{sine:ne,cosine:ae}=_.get(M),{sine:ye,cosine:Se}=_.get(H);return ne.isGreaterThanOrEqualTo(0)&&ye.isGreaterThanOrEqualTo(0)?ae.isLessThan(Se)?1:ae.isGreaterThan(Se)?-1:0:ne.isLessThan(0)&&ye.isLessThan(0)?ae.isLessThan(Se)?-1:ae.isGreaterThan(Se)?1:0:ye.isLessThan(ne)?-1:ye.isGreaterThan(ne)?1:0}}},ec=0,Gs=class rv{constructor(m,_,S,M){Ye(this,"id");Ye(this,"leftSE");Ye(this,"rightSE");Ye(this,"rings");Ye(this,"windings");Ye(this,"ringOut");Ye(this,"consumedBy");Ye(this,"prev");Ye(this,"_prevInResult");Ye(this,"_beforeState");Ye(this,"_afterState");Ye(this,"_isInResult");this.id=++ec,this.leftSE=m,m.segment=this,m.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=m,this.rings=S,this.windings=M}static compare(m,_){let S=m.leftSE.point.x,M=_.leftSE.point.x,H=m.rightSE.point.x,ne=_.rightSE.point.x;if(ne.isLessThan(S))return 1;if(H.isLessThan(M))return-1;let ae=m.leftSE.point.y,ye=_.leftSE.point.y,Se=m.rightSE.point.y,nt=_.rightSE.point.y;if(S.isLessThan(M)){if(ye.isLessThan(ae)&&ye.isLessThan(Se))return 1;if(ye.isGreaterThan(ae)&&ye.isGreaterThan(Se))return-1;let We=m.comparePoint(_.leftSE.point);if(We<0)return 1;if(We>0)return-1;let _t=_.comparePoint(m.rightSE.point);return _t!==0?_t:-1}if(S.isGreaterThan(M)){if(ae.isLessThan(ye)&&ae.isLessThan(nt))return-1;if(ae.isGreaterThan(ye)&&ae.isGreaterThan(nt))return 1;let We=_.comparePoint(m.leftSE.point);if(We!==0)return We;let _t=m.comparePoint(_.rightSE.point);return _t<0?1:_t>0?-1:1}if(ae.isLessThan(ye))return-1;if(ae.isGreaterThan(ye))return 1;if(H.isLessThan(ne)){let We=_.comparePoint(m.rightSE.point);if(We!==0)return We}if(H.isGreaterThan(ne)){let We=m.comparePoint(_.rightSE.point);if(We<0)return 1;if(We>0)return-1}if(!H.eq(ne)){let We=Se.minus(ae),_t=H.minus(S),It=nt.minus(ye),en=ne.minus(M);if(We.isGreaterThan(_t)&&It.isLessThan(en))return 1;if(We.isLessThan(_t)&&It.isGreaterThan(en))return-1}return H.isGreaterThan(ne)?1:H.isLessThan(ne)||Se.isLessThan(nt)?-1:Se.isGreaterThan(nt)?1:m.id<_.id?-1:m.id>_.id?1:0}static fromRing(m,_,S){let M,H,ne,ae=jo.comparePoints(m,_);if(ae<0)M=m,H=_,ne=1;else if(ae>0)M=_,H=m,ne=-1;else throw new Error(`Tried to create degenerate segment at [${m.x}, ${m.y}]`);let ye=new jo(M,!0),Se=new jo(H,!1);return new rv(ye,Se,[S],[ne])}replaceRightSE(m){this.rightSE=m,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let m=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:m.isLessThan(_)?m:_},ur:{x:this.rightSE.point.x,y:m.isGreaterThan(_)?m:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(m){return m.x.eq(this.leftSE.point.x)&&m.y.eq(this.leftSE.point.y)||m.x.eq(this.rightSE.point.x)&&m.y.eq(this.rightSE.point.y)}comparePoint(m){return Qi.orient(this.leftSE.point,m,this.rightSE.point)}getIntersection(m){let _=this.bbox(),S=m.bbox(),M=sh(_,S);if(M===null)return null;let H=this.leftSE.point,ne=this.rightSE.point,ae=m.leftSE.point,ye=m.rightSE.point,Se=Fo(_,ae)&&this.comparePoint(ae)===0,nt=Fo(S,H)&&m.comparePoint(H)===0,We=Fo(_,ye)&&this.comparePoint(ye)===0,_t=Fo(S,ne)&&m.comparePoint(ne)===0;if(nt&&Se)return _t&&!We?ne:!_t&&We?ye:null;if(nt)return We&&H.x.eq(ye.x)&&H.y.eq(ye.y)?null:H;if(Se)return _t&&ne.x.eq(ae.x)&&ne.y.eq(ae.y)?null:ae;if(_t&&We)return null;if(_t)return ne;if(We)return ye;let It=Oe(H,this.vector(),ae,m.vector());return It===null||!Fo(M,It)?null:Qi.snap(It)}split(m){let _=[],S=m.events!==void 0,M=new jo(m,!0),H=new jo(m,!1),ne=this.rightSE;this.replaceRightSE(H),_.push(H),_.push(M);let ae=new rv(M,ne,this.rings.slice(),this.windings.slice());return jo.comparePoints(ae.leftSE.point,ae.rightSE.point)>0&&ae.swapEvents(),jo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),S&&(M.checkForConsuming(),H.checkForConsuming()),_}swapEvents(){let m=this.rightSE;this.rightSE=this.leftSE,this.leftSE=m,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,S=this.windings.length;_<S;_++)this.windings[_]*=-1}consume(m){let _=this,S=m;for(;_.consumedBy;)_=_.consumedBy;for(;S.consumedBy;)S=S.consumedBy;let M=rv.compare(_,S);if(M!==0){if(M>0){let H=_;_=S,S=H}if(_.prev===S){let H=_;_=S,S=H}for(let H=0,ne=S.rings.length;H<ne;H++){let ae=S.rings[H],ye=S.windings[H],Se=_.rings.indexOf(ae);Se===-1?(_.rings.push(ae),_.windings.push(ye)):_.windings[Se]+=ye}S.rings=null,S.windings=null,S.consumedBy=_,S.leftSE.consumedBy=_.leftSE,S.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let m=this.prev.consumedBy||this.prev;this._beforeState=m.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let m=this.beforeState();this._afterState={rings:m.rings.slice(0),windings:m.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,S=this._afterState.windings,M=this._afterState.multiPolys;for(let ae=0,ye=this.rings.length;ae<ye;ae++){let Se=this.rings[ae],nt=this.windings[ae],We=_.indexOf(Se);We===-1?(_.push(Se),S.push(nt)):S[We]+=nt}let H=[],ne=[];for(let ae=0,ye=_.length;ae<ye;ae++){if(S[ae]===0)continue;let Se=_[ae],nt=Se.poly;if(ne.indexOf(nt)===-1)if(Se.isExterior)H.push(nt);else{ne.indexOf(nt)===-1&&ne.push(nt);let We=H.indexOf(Se.poly);We!==-1&&H.splice(We,1)}}for(let ae=0,ye=H.length;ae<ye;ae++){let Se=H[ae].multiPoly;M.indexOf(Se)===-1&&M.push(Se)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let m=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Vh.type){case"union":{let S=m.length===0,M=_.length===0;this._isInResult=S!==M;break}case"intersection":{let S,M;m.length<_.length?(S=m.length,M=_.length):(S=_.length,M=m.length),this._isInResult=M===Vh.numMultiPolys&&S<M;break}case"xor":{let S=Math.abs(m.length-_.length);this._isInResult=S%2===1;break}case"difference":{let S=M=>M.length===1&&M[0].isSubject;this._isInResult=S(m)!==S(_);break}}return this._isInResult}},Hr=class{constructor(h,m,_){Ye(this,"poly");Ye(this,"isExterior");Ye(this,"segments");Ye(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=m,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=Qi.snap({x:new Ce(h[0][0]),y:new Ce(h[0][1])});this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let M=S;for(let H=1,ne=h.length;H<ne;H++){if(typeof h[H][0]!="number"||typeof h[H][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ae=Qi.snap({x:new Ce(h[H][0]),y:new Ce(h[H][1])});ae.x.eq(M.x)&&ae.y.eq(M.y)||(this.segments.push(Gs.fromRing(M,ae,this)),ae.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ae.x),ae.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ae.y),ae.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ae.x),ae.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ae.y),M=ae)}(!S.x.eq(M.x)||!S.y.eq(M.y))&&this.segments.push(Gs.fromRing(M,S,this))}getSweepEvents(){let h=[];for(let m=0,_=this.segments.length;m<_;m++){let S=this.segments[m];h.push(S.leftSE),h.push(S.rightSE)}return h}},zh=class{constructor(h,m){Ye(this,"multiPoly");Ye(this,"exteriorRing");Ye(this,"interiorRings");Ye(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Hr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=h.length;_<S;_++){let M=new Hr(h[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=m}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let m=0,_=this.interiorRings.length;m<_;m++){let S=this.interiorRings[m].getSweepEvents();for(let M=0,H=S.length;M<H;M++)h.push(S[M])}return h}},Pf=class{constructor(h,m){Ye(this,"isSubject");Ye(this,"polys");Ye(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Ce(Number.POSITIVE_INFINITY),y:new Ce(Number.POSITIVE_INFINITY)},ur:{x:new Ce(Number.NEGATIVE_INFINITY),y:new Ce(Number.NEGATIVE_INFINITY)}};for(let _=0,S=h.length;_<S;_++){let M=new zh(h[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=m}getSweepEvents(){let h=[];for(let m=0,_=this.polys.length;m<_;m++){let S=this.polys[m].getSweepEvents();for(let M=0,H=S.length;M<H;M++)h.push(S[M])}return h}},$h=class _b{constructor(m){Ye(this,"events");Ye(this,"poly");Ye(this,"_isExteriorRing");Ye(this,"_enclosingRing");this.events=m;for(let _=0,S=m.length;_<S;_++)m[_].segment.ringOut=this;this.poly=null}static factory(m){let _=[];for(let S=0,M=m.length;S<M;S++){let H=m[S];if(!H.isInResult()||H.ringOut)continue;let ne=null,ae=H.leftSE,ye=H.rightSE,Se=[ae],nt=ae.point,We=[];for(;ne=ae,ae=ye,Se.push(ae),ae.point!==nt;)for(;;){let _t=ae.getAvailableLinkedEvents();if(_t.length===0){let _n=Se[0].point,Pn=Se[Se.length-1].point;throw new Error(`Unable to complete output ring starting at [${_n.x}, ${_n.y}]. Last matching segment found ends at [${Pn.x}, ${Pn.y}].`)}if(_t.length===1){ye=_t[0].otherSE;break}let It=null;for(let _n=0,Pn=We.length;_n<Pn;_n++)if(We[_n].point===ae.point){It=_n;break}if(It!==null){let _n=We.splice(It)[0],Pn=Se.splice(_n.index);Pn.unshift(Pn[0].otherSE),_.push(new _b(Pn.reverse()));continue}We.push({index:Se.length,point:ae.point});let en=ae.getLeftmostComparator(ne);ye=_t.sort(en)[0].otherSE;break}_.push(new _b(Se))}return _}getGeom(){let m=this.events[0].point,_=[m];for(let Se=1,nt=this.events.length-1;Se<nt;Se++){let We=this.events[Se].point,_t=this.events[Se+1].point;Qi.orient(We,m,_t)!==0&&(_.push(We),m=We)}if(_.length===1)return null;let S=_[0],M=_[1];Qi.orient(S,m,M)===0&&_.shift(),_.push(_[0]);let H=this.isExteriorRing()?1:-1,ne=this.isExteriorRing()?0:_.length-1,ae=this.isExteriorRing()?_.length:-1,ye=[];for(let Se=ne;Se!=ae;Se+=H)ye.push([_[Se].x.toNumber(),_[Se].y.toNumber()]);return ye}isExteriorRing(){if(this._isExteriorRing===void 0){let m=this.enclosingRing();this._isExteriorRing=m?!m.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,H;let m=this.events[0];for(let ne=1,ae=this.events.length;ne<ae;ne++){let ye=this.events[ne];jo.compare(m,ye)>0&&(m=ye)}let _=m.segment.prevInResult(),S=_?_.prevInResult():null;for(;;){if(!_)return null;if(!S)return _.ringOut;if(S.ringOut!==_.ringOut)return((M=S.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:(H=_.ringOut)==null?void 0:H.enclosingRing();_=S.prevInResult(),S=_?_.prevInResult():null}}},Ll=class{constructor(h){Ye(this,"exteriorRing");Ye(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let m=[h];for(let _=0,S=this.interiorRings.length;_<S;_++){let M=this.interiorRings[_].getGeom();M!==null&&m.push(M)}return m}},oh=class{constructor(h){Ye(this,"rings");Ye(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let m=0,_=this.polys.length;m<_;m++){let S=this.polys[m].getGeom();S!==null&&h.push(S)}return h}_composePolys(h){var _;let m=[];for(let S=0,M=h.length;S<M;S++){let H=h[S];if(!H.poly)if(H.isExteriorRing())m.push(new Ll(H));else{let ne=H.enclosingRing();ne!=null&&ne.poly||m.push(new Ll(ne)),(_=ne==null?void 0:ne.poly)==null||_.addInterior(H)}}return m}},Td=class{constructor(h,m=Gs.compare){Ye(this,"queue");Ye(this,"tree");Ye(this,"segments");this.queue=h,this.tree=new un(m),this.segments=[]}process(h){let m=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(m),_;h.isLeft&&this.tree.add(m);let S=m,M=m;do S=this.tree.lastBefore(S);while(S!=null&&S.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(h.isLeft){let H=null;if(S){let ae=S.getIntersection(m);if(ae!==null&&(m.isAnEndpoint(ae)||(H=ae),!S.isAnEndpoint(ae))){let ye=this._splitSafely(S,ae);for(let Se=0,nt=ye.length;Se<nt;Se++)_.push(ye[Se])}}let ne=null;if(M){let ae=M.getIntersection(m);if(ae!==null&&(m.isAnEndpoint(ae)||(ne=ae),!M.isAnEndpoint(ae))){let ye=this._splitSafely(M,ae);for(let Se=0,nt=ye.length;Se<nt;Se++)_.push(ye[Se])}}if(H!==null||ne!==null){let ae=null;H===null?ae=ne:ne===null?ae=H:ae=jo.comparePoints(H,ne)<=0?H:ne,this.queue.delete(m.rightSE),_.push(m.rightSE);let ye=m.split(ae);for(let Se=0,nt=ye.length;Se<nt;Se++)_.push(ye[Se])}_.length>0?(this.tree.delete(m),_.push(h)):(this.segments.push(m),m.prev=S)}else{if(S&&M){let H=S.getIntersection(M);if(H!==null){if(!S.isAnEndpoint(H)){let ne=this._splitSafely(S,H);for(let ae=0,ye=ne.length;ae<ye;ae++)_.push(ne[ae])}if(!M.isAnEndpoint(H)){let ne=this._splitSafely(M,H);for(let ae=0,ye=ne.length;ae<ye;ae++)_.push(ne[ae])}}}this.tree.delete(m)}return _}_splitSafely(h,m){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let S=h.split(m);return S.push(_),h.consumedBy===void 0&&this.tree.add(h),S}},zp=class{constructor(){Ye(this,"type");Ye(this,"numMultiPolys")}run(h,m,_){Ac.type=h;let S=[new Pf(m,!0)];for(let ye=0,Se=_.length;ye<Se;ye++)S.push(new Pf(_[ye],!1));if(Ac.numMultiPolys=S.length,Ac.type==="difference"){let ye=S[0],Se=1;for(;Se<S.length;)sh(S[Se].bbox,ye.bbox)!==null?Se++:S.splice(Se,1)}if(Ac.type==="intersection")for(let ye=0,Se=S.length;ye<Se;ye++){let nt=S[ye];for(let We=ye+1,_t=S.length;We<_t;We++)if(sh(nt.bbox,S[We].bbox)===null)return[]}let M=new un(jo.compare);for(let ye=0,Se=S.length;ye<Se;ye++){let nt=S[ye].getSweepEvents();for(let We=0,_t=nt.length;We<_t;We++)M.add(nt[We])}let H=new Td(M),ne=null;for(M.size!=0&&(ne=M.first(),M.delete(ne));ne;){let ye=H.process(ne);for(let Se=0,nt=ye.length;Se<nt;Se++){let We=ye[Se];We.consumedBy===void 0&&M.add(We)}M.size!=0?(ne=M.first(),M.delete(ne)):ne=null}Qi.reset();let ae=$h.factory(H.segments);return new oh(ae).getGeom()}},Ac=new zp,Vh=Ac,fu=(h,...m)=>Vh.run("intersection",h,m),$p=(h,...m)=>Vh.run("difference",h,m);Qi.set;function Uh(h){let m={type:"Feature"};return m.geometry=h,m}function Hh(h){return h.type==="Feature"?h.geometry:h}function Mf(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function kf(h){return Uh({type:"LineString",coordinates:h})}function nl(h){return Uh({type:"MultiLineString",coordinates:h})}function Af(h){return Uh({type:"Polygon",coordinates:h})}function Tf(h){return Uh({type:"MultiPolygon",coordinates:h})}function Df(h,m){let _=Hh(h),S=Hh(m),M=fu(_.coordinates,S.coordinates);return M.length===0?null:M.length===1?Af(M[0]):Tf(M)}function w(h,m){let _=Hh(h),S=Hh(m),M=$p(_.coordinates,S.coordinates);return M.length===0?null:M.length===1?Af(M[0]):Tf(M)}function T(h){return Array.isArray(h)?1+T(h[0]):-1}function Z(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let m=Mf(h),_=T(m),S=[];return _>1?m.forEach(M=>{S.push(kf(M))}):S.push(h),S}function ce(h){let m=[];return h.eachLayer(_=>{m.push(Mf(_.toGeoJSON(15)))}),nl(m)}gs.Cut=gs.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let m=L.polygon(h,this.options.pathOptions);m._latlngInfos=this._layer._latlngInfo,this.cut(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:S,originalLayer:M})=>{this._fireCut(M,S,M),this._fireCut(this._map,S,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let m=this._map._layers,_=h._latlngInfos||[];Object.keys(m).map(S=>m[S]).filter(S=>S.pm).filter(S=>!S._pmTempLayer).filter(S=>!L.PM.optIn&&!S.options.pmIgnore||L.PM.optIn&&S.options.pmIgnore===!1).filter(S=>S instanceof L.Polyline).filter(S=>S!==h).filter(S=>S.pm.options.allowCutting).filter(S=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(S)>-1:!0).filter(S=>!this._layerGroup.hasLayer(S)).filter(S=>{try{let M=!!Io(h.toGeoJSON(15),S.toGeoJSON(15)).features.length>0;return M||S instanceof L.Polyline&&!(S instanceof L.Polygon)?M:!!Df(h.toGeoJSON(15),S.toGeoJSON(15))}catch{return S instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(S=>{let M;if(S instanceof L.Polygon){M=L.polygon(S.getLatLngs());let ye=M.getLatLngs();_.forEach(Se=>{if(Se&&Se.snapInfo){let{latlng:nt}=Se,We=this._calcClosestLayer(nt,[M]);if(We&&We.segment&&We.distance<this.options.snapDistance){let{segment:_t}=We;if(_t&&_t.length===2){let{indexPath:It,parentPath:en,newIndex:_n}=L.PM.Utils._getIndexFromSegment(ye,_t);(It.length>1?(0,Ui.default)(ye,en):ye).splice(_n,0,nt)}}}})}else M=S;let H=this._cutLayer(h,M),ne=L.geoJSON(H,S.options);ne.getLayers().length===1&&([ne]=ne.getLayers()),this._setPane(ne,"layerPane");let ae=ne.addTo(this._map.pm._getContainingLayer());if(ae.pm.enable(S.pm.options),ae.pm.disable(),S._pmTempLayer=!0,h._pmTempLayer=!0,S.remove(),S.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),ae.getLayers&&ae.getLayers().length===0&&this._map.pm.removeLayer({target:ae}),ae instanceof L.LayerGroup?(ae.eachLayer(ye=>{this._addDrawnLayerProp(ye)}),this._addDrawnLayerProp(ae)):this._addDrawnLayerProp(ae),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ye=this.options.layersToCut.indexOf(S);ye>-1&&this.options.layersToCut.splice(ye,1)}this._editedLayers.push({layer:ae,originalLayer:S})})},_cutLayer(h,m){let _=L.geoJSON(),S;if(m instanceof L.Polygon)S=w(m.toGeoJSON(15),h.toGeoJSON(15));else{let M=Z(m);M.forEach(H=>{let ne=rr(H,h.toGeoJSON(15)),ae;ne&&ne.features.length>0?ae=L.geoJSON(ne):ae=L.geoJSON(H),ae.getLayers().forEach(ye=>{Ba(h.toGeoJSON(15),ye.toGeoJSON(15))||ye.addTo(_)})}),M.length>1?S=ce(_):S=_.toGeoJSON(15)}return S},_change:L.Util.falseFn}),gs.Text=gs.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let m=h;m.target=this._hintMarker,this._handleSnapping(m)}},_createMarker(h){var M,H,ne,ae;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let ye=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ye)}let _=this._createTextIcon(this.textArea),S=new L.Marker(m,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(S,"markerPane"),this._finishLayer(S),S.pm||(S.options.draggable=!1),S.addTo(this._map.pm._getContainingLayer()),S.pm){S.pm.textArea=this.textArea,L.setOptions(S.pm,{removeIfEmpty:((H=this.options.textOptions)==null?void 0:H.removeIfEmpty)??!0});let ye=((ne=this.options.textOptions)==null?void 0:ne.focusAfterDraw)??!0;S.pm._createTextMarker(ye),(ae=this.options.textOptions)!=null&&ae.text&&S.pm.setText(this.options.textOptions.text)}this._fireCreate(S),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var xe={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Si(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(Si(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Si(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(Si(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let m=h.touches?h.touches[0]:h,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let m=h.touches?h.touches[0]:h,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let m={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(m.containerPoint=this._map.mouseEventToContainerPoint(h),m.latlng=this._map.containerPointToLatLng(m.containerPoint)),this._dragMixinOnMouseUp(m),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let m=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!m&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let S="resizeableCircleMarker";this._layer instanceof L.Circle&&(S="resizeableCircle"),this.options.snappable&&!m&&!_?this._layer.pm.options[S]||this._initSnappableMarkersDrag():this._layer.pm.options[S]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let m=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(m,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let m=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,m&&L.DomUtil.removeClass(m,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:m}=h,_={lat:m.lat-this._tempDragCoord.lat,lng:m.lng-this._tempDragCoord.lng},S=M=>M.map(H=>{if(Array.isArray(H))return S(H);let ne={lat:H.lat+_.lat,lng:H.lng+_.lng};return(H.alt||H.alt===0)&&(ne.alt=H.alt),ne});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=S([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let H=S([M]);this._layer.setLatLng(H[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=S([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=S(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=m,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,m){if(this.enabled())return!1;if(!m._fromLayerSync&&this._layer===m.target&&this.options.syncLayersOnDrag){m._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(S=>{S instanceof L.LayerGroup&&(_=_.concat(S.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let S in this._parentLayerGroup){let M=this._parentLayerGroup[S];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(S=>!!S.pm).filter(S=>!!S.pm.options.draggable),_.forEach(S=>{S!==this._layer&&S.pm[h]&&(S._snapped=!1,S.pm[h](m))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Ee=xe,Me=l(Jr());function Te(h,m,_,S){return _.unproject(m.transform(_.project(h,S)),S)}function Re(h,m,_){let S=_.getMaxZoom();if(S===1/0&&(S=_.getZoom()),L.Util.isArray(h)){let M=[];return h.forEach(H=>{M.push(Re(H,m,_))}),M}return h instanceof L.LatLng?Te(h,m,_,S):null}function qe(h,m){m instanceof L.Layer&&(m=m.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(m,_)}function pt(h,m){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(m,_)}var Rt={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=qe(this._map,this._rotationOriginLatLng),this._rotationStartPoint=qe(this._map,h.target.getLatLng()),this._initialRotateLatLng=oa(this._layer),this._startAngle=this.getAngle();let m=oa(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,m),this._fireRotationStart(this._map,m)},_onRotate(h){let m=qe(this._map,h.target.getLatLng()),_=this._rotationStartPoint,S=this._rotationOriginPoint,M=Math.atan2(m.y-S.y,m.x-S.x)-Math.atan2(_.y-S.y,_.x-S.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let H=this;function ne(nt,We=[],_t=-1){if(_t>-1&&We.push(_t),L.Util.isArray(nt[0]))nt.forEach((It,en)=>ne(It,We.slice(),en));else{let It=We.length>0?(0,Me.default)(H._markers,We):H._markers[0];nt.forEach((en,_n)=>{It[_n].setLatLng(en)})}}ne(this._layer.getLatLngs());let ae=oa(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ye=M*180/Math.PI;ye=ye<0?ye+360:ye;let Se=ye+this._startAngle;this._setAngle(Se),this._rotationLayer.pm._setAngle(Se),this._fireRotation(this._rotationLayer,ye,ae),this._fireRotation(this._map,ye,ae),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let m=oa(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=oa(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,m),this._fireRotationEnd(this._map,h,m),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,m,_,S,M){let H=qe(M,_);return this._matrix=S.clone().rotate(h,H).flip(),Re(m,this._matrix,M)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),m=h.getCenter();return h.removeFrom(this._layer._map),m},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Da(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=oa(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let m=this.getAngle(),_=this._layer.getLatLngs(),S=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(S,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(S,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-m;M=M<0?M+360:M,this._startAngle=m,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let m=h-this.getAngle();this.rotateLayer(m)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Ft=Rt,Mt=L.Class.extend({includes:[Ee,Jo,Ft,au],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,m){m==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,m){let _=m.target,S={layer:this._layer,marker:_,event:m},M="";return h==="move"?M="moveVertexValidation":h==="add"?M="addVertexValidation":h==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](S)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Kt=Mt;Kt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(S=>this._initLayer(S));let m=S=>{if(S.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(H=>!H.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in H.pm._parentLayerGroup));M.forEach(H=>{this._initLayer(H)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(m,100,this),this),this._layerGroup.on("layerremove",S=>{this._removeLayerFromGroup(S.target)},this);let _=S=>{S.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.enable(h,m)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(m=>{m instanceof L.LayerGroup?h.indexOf(m._leaflet_id)===-1&&(h.push(m._leaflet_id),m.pm.disable(h)):m.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(m=>m instanceof L.LayerGroup?h.indexOf(m._leaflet_id)===-1?(h.push(m._leaflet_id),m.pm.enabled(h)):!1:m.pm.enabled())},toggleEdit(h,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.toggleEdit(h,m)):_.pm.toggleEdit(h)})},_initLayer(h){let m=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[m]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let m=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[m]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(m=>!!m._map))==null?void 0:h._map)||null},getLayers(h=!1,m=!0,_=!0,S=[]){let M=[];return h?this._layerGroup.getLayers().forEach(H=>{M.push(H),H instanceof L.LayerGroup&&S.indexOf(H._leaflet_id)===-1&&(S.push(H._leaflet_id),M=M.concat(H.pm.getLayers(!0,!0,!0,S)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter(H=>!(H instanceof L.LayerGroup))),m&&(M=M.filter(H=>!!H.pm),M=M.filter(H=>!H._pmTempLayer),M=M.filter(H=>!L.PM.optIn&&!H.options.pmIgnore||L.PM.optIn&&H.options.pmIgnore===!1)),M},setOptions(h,m=[]){m.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.setOptions(h,m)):_.pm.setOptions(h))})}}),Kt.Marker=Kt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let m=h.target;m.remove(),this._fireRemove(m),this._fireRemove(this._map,m)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var Gt=l(Jr()),gt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((m,_,S)=>S.indexOf(m)===_)},_removeFromCache(h){let m=this.markerCache.indexOf(h);m>-1&&this.markerCache.splice(m,1)},renderLimits(h){this.markerCache.forEach(m=>{h.includes(m)?this._markerGroup.addLayer(m):this._markerGroup.removeLayer(m)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let m=[...this._filterClosestMarkers(h)];this.renderLimits(m)},_filterClosestMarkers(h){let m=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?m:(m.sort((S,M)=>{let H=S._latlng.distanceTo(h),ne=M._latlng.distanceTo(h);return H-ne}),m.filter((S,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},wt=gt;Kt.Line=Kt.extend({includes:[wt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,m=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=S=>{if(Array.isArray(S[0]))return S.map(_,this);let M=S.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&S.map((H,ne)=>{let ae=this.isPolygon()?(ne+1)%S.length:ne+1;return this._createMiddleMarker(M[ne],M[ae])}),M};this._markers=_(m),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let m=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this.options.rotate?(m.on("dragstart",this._onRotateStart,this),m.on("drag",this._onRotate,this),m.on("dragend",this._onRotateEnd,this)):(m.on("click",this._onVertexClick,this),m.on("dragstart",this._onMarkerDragStart,this),m.on("move",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||m.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(m),m},_createMiddleMarker(h,m){if(!h||!m)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),m.getLatLng()),S=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return S.setIcon(M),S.leftM=h,S.rightM=m,h._middleMarkerNext=S,m._middleMarkerPrev=S,S.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),S.on("movestart",this._onMiddleMarkerMoveStart,this),S},_onMiddleMarkerClick(h){let m=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMoveStart(h){let m=h.target;if(m.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){m.on("move",this._onMiddleMarkerMovePrevent,this);return}m._dragging=!0,this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMovePrevent(h){let m=h.target;this._vertexValidationDrag(m)},_onMiddleMarkerMoveEnd(h){let m=h.target;if(m.off("move",this._onMiddleMarkerMovePrevent,this),m.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(m))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),setTimeout(()=>{delete m._dragging},100)},_addMarker(h,m,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let S=h.getLatLng(),M=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:H,index:ne,parentPath:ae}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),ye=H.length>1?(0,Gt.default)(M,ae):M,Se=H.length>1?(0,Gt.default)(this._markers,ae):this._markers;ye.splice(ne+1,0,S),Se.splice(ne+1,0,h),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(m,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,S),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Vr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let m=this._layer,_,S;if(this.options.allowSelfIntersection?_=!1:(S=Vr(this._layer.toGeoJSON(15)),_=S.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(m.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(S)}else m.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,m){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,m):_._icon&&(m&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let m=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=oa(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:S,index:M,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!S)return;let ne=S.length>1?(0,Gt.default)(_,H):_,ae=S.length>1?(0,Gt.default)(this._markers,H):this._markers,ye=H[H.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ye&&(ne.length<=2||this.isPolygon()&&ne.length<=3)){this._flashLayer();return}ne.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&ne.length<=2&&ne.splice(0,ne.length);let Se=!1;if(ne.length<=1&&(ne.splice(0,ne.length),H.length>1&&S.length>1&&(_=Bl(_)),this._layer.setLatLngs(_),this._initMarkers(),Se=!0),ps(_)||this._layer.remove(),_=Bl(_),this._layer.setLatLngs(_),this._markers=Bl(this._markers),!Se&&(ae=S.length>1?(0,Gt.default)(this._markers,H):this._markers,m._middleMarkerPrev&&(this._markerGroup.removeLayer(m._middleMarkerPrev),this._removeFromCache(m._middleMarkerPrev)),m._middleMarkerNext&&(this._markerGroup.removeLayer(m._middleMarkerNext),this._removeFromCache(m._middleMarkerNext)),this._markerGroup.removeLayer(m),this._removeFromCache(m),ae)){let nt,We;if(this.isPolygon()?(nt=(M+1)%ae.length,We=(M+(ae.length-1))%ae.length):(We=M-1<0?void 0:M-1,nt=M+1>=ae.length?void 0:M+1),nt!==We){let _t=ae[We],It=ae[nt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(_t,It)}ae.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(m,S),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let m=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:S,index:M,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(S.length>1?(0,Gt.default)(m,H):m).splice(M,1,_),this._layer.setLatLngs(m)},_getNeighborMarkers(h){let{indexPath:m,index:_,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),M=m.length>1?(0,Gt.default)(this._markers,S):this._markers,H=(_+1)%M.length,ne=(_+(M.length-1))%M.length,ae=M[ne],ye=M[H];return{prevMarker:ae,nextMarker:ye}},_checkMarkerAllowedToDrag(h){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([m.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),H=Io(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,ne=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?ne+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(H+=1),!(H<=2&&ne<=2)},_onMarkerDragStart(h){let m=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=oa(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(m):this._markerAllowedToDrag=null},_onMarkerDrag(h){let m=h.target;if(!this._vertexValidationDrag(m))return;let{indexPath:_,index:S,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(m);let H=_.length>1?(0,Gt.default)(this._markers,M):this._markers,ne=(S+1)%H.length,ae=(S+(H.length-1))%H.length,ye=m.getLatLng(),Se=H[ae].getLatLng(),nt=H[ne].getLatLng();if(m._middleMarkerNext){let We=L.PM.Utils.calcMiddleLatLng(this._map,ye,nt);m._middleMarkerNext.setLatLng(We)}if(m._middleMarkerPrev){let We=L.PM.Utils.calcMiddleLatLng(this._map,ye,Se);m._middleMarkerPrev.setLatLng(We)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let m=h.target;if(!this._vertexValidationDragEnd(m))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),S=!this.options.allowSelfIntersection&&this.hasSelfIntersection();S&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(S=!1);let M=!this.options.allowSelfIntersection&&S;if(this._fireMarkerDragEnd(h,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let m=h.target;if(m._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireVertexClick(h,_)}}),Kt.Polygon=Kt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([m.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),H=Io(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,ne=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(H<=2&&ne<=2)}}),Kt.Rectangle=Kt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,m=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=m.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,S)=>{let M=this._cornerMarkers.find(H=>H._index===S);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,m){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=m,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let m=h.target,_=this._cornerMarkers;m._oppositeCornerLatLng=_.find(M=>M._index===(m._index+2)%4).getLatLng(),m._snapped=!1;let{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(h,S)},_onMarkerDrag(h){let m=h.target;if(!this._vertexValidationDrag(m)||m._index===void 0)return;this._adjustRectangleForMarkerMove(m);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let m=h.target;if(!this._vertexValidationDragEnd(m))return;this._cornerMarkers.forEach(S=>{delete S._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let m=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(m),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let m=this._layer.getLatLngs()[0];if(m&&m.length!==4&&m.length>0)m.forEach((_,S)=>{this._cornerMarkers[S].setLatLng(_)}),this._cornerMarkers.slice(m.length).forEach(_=>{_.setLatLng(m[0])});else if(!m||!m.length)console.error("The layer has no LatLngs");else{let _=m.findIndex(S=>h.getLatLng().equals(S));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(m[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(m[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(m[(_+3)%4])):this._cornerMarkers.forEach(S=>{S.setLatLng(m[S._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Da(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Kt.CircleMarker=Kt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let m=this._layer.getLatLng(),_=this._layer._radius,S=this._getLatLngOnCircle(m,_);this._centerMarker=this._createCenterMarker(m),this._outerMarker=this._createOuterMarker(S),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,m){let _=this._map.project(h),S=L.point(_.x+m,_.y);return this._map.unproject(S)},_createHintLine(h,m){let _=h.getLatLng(),S=m.getLatLng();this._hintline=L.polyline([_,S],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let m=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(m._icon,"leaflet-pm-draggable"),m.on("move",this._moveCircle,this)):m.dragging.disable(),m},_createOuterMarker(h){let m=this._createMarker(h);return m.on("drag",this._resizeCircle,this),m},_createMarker(h){let m=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._origLatLng=h,m._pmTempLayer=!0,m.on("dragstart",this._onMarkerDragStart,this),m.on("drag",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),m.on("click",this._onVertexClick,this),this._helperLayers.addLayer(m),m},_moveCircle(h){if(h.target._cancelDragEventChain)return;let m=this._centerMarker.getLatLng();this._layer.setLatLng(m);let _=this._layer._radius,S=this._getLatLngOnCircle(m,_);this._outerMarker._latlng=S,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),m=this._layer._radius,_=this._getLatLngOnCircle(h,m);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,m])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let m=h.target;m instanceof L.Marker&&!this._vertexValidationDrag(m)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let m=h.target;this._vertexValidationDragEnd(m)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let m=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(m);let S=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!S).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!S),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,m);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?m=lu(this._map,h,m,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(m=lu(this._map,h,m,this._getMaxDistanceInMeter(h))),m},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,m){return this._map.project(h).distanceTo(this._map.project(m))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Kt.Circle=Kt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,m){return this._map.distance(h,m)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Kt.ImageOverlay=Kt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),m=h.getNorthWest(),_=h.getNorthEast(),S=h.getSouthEast(),M=h.getSouthWest();return[m,_,S,M]}}),Kt.Text=Kt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,m=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${m}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let m=this._hasFocus;this._hasFocus=h.type==="focus",!m!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let m=this.options.className.split(" ");this.textArea.classList.add(...m)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var nn=function(h,m,_,S,M,H){this._matrix=[h,m,_,S,M,H]};nn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),nn.prototype={transform(h){return this._transform(h.clone())},_transform(h){let m=this._matrix,{x:_,y:S}=h;return h.x=m[0]*_+m[1]*S+m[4],h.y=m[2]*_+m[3]*S+m[5],h},untransform(h){let m=this._matrix;return new L.Point((h.x/m[0]-m[4])/m[0],(h.y/m[2]-m[5])/m[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let m,_;return typeof h=="number"?(m=h,_=h):(m=h.x,_=h.y),this._add(1,0,0,1,m,_)},scale(h,m){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,S;return m=m||L.point(0,0),typeof h=="number"?(_=h,S=h):(_=h.x,S=h.y),this._add(_,0,0,S,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},rotate(h,m){let _=Math.cos(h),S=Math.sin(h);return m=m||new L.Point(0,0),this._add(_,S,-S,_,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,m,_,S,M,H){let ne=[[],[],[]],ae=this._matrix,ye=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]],Se=[[h,_,M],[m,S,H],[0,0,1]],nt;h&&h instanceof L.PM.Matrix&&(ae=h._matrix,Se=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]]);for(let We=0;We<3;We+=1)for(let _t=0;_t<3;_t+=1){nt=0;for(let It=0;It<3;It+=1)nt+=ye[We][It]*Se[It][_t];ne[We][_t]=nt}return this._matrix=[ne[0][0],ne[1][0],ne[0][1],ne[1][1],ne[0][2],ne[1][2]],this}};var fn=nn,on={calcMiddleLatLng(h,m,_){let S=h.project(m),M=h.project(_);return h.unproject(S._add(M)._divideBy(2))},findLayers(h){let m=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&m.push(_)}),m=m.filter(_=>!!_.pm),m=m.filter(_=>!_._pmTempLayer),m=m.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),m},circleToPolygon(h,m=60,_=!0){let S=h.getLatLng(),M=h.getRadius(),H=Zi(S,M,m,0,_),ne=[];for(let ae=0;ae<H.length;ae+=1){let ye=[H[ae].lat,H[ae].lng];ne.push(ye)}return L.polygon(ne,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,m,_,S=!1){h.fire(m,_,S);let{groups:M}=this.getAllParentGroups(h);M.forEach(H=>{H.fire(m,_,S)})},getAllParentGroups(h){let m=[],_=[],S=M=>{for(let H in M._eventParents)if(m.indexOf(H)===-1){m.push(H);let ne=M._eventParents[H];_.push(ne),S(ne)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(S(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:m},{groupIds:m,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Zi,getTranslation:gr,findDeepCoordIndex(h,m,_=!0){let S,M=ne=>(ae,ye)=>{let Se=ne.concat(ye);if(_){if(ae.lat&&ae.lat===m.lat&&ae.lng===m.lng)return S=Se,!0}else if(ae.lat&&L.latLng(ae).equals(m))return S=Se,!0;return Array.isArray(ae)&&ae.some(M(Se))};h.some(M([]));let H={};return S&&(H={indexPath:S,index:S[S.length-1],parentPath:S.slice(0,S.length-1)}),H},findDeepMarkerIndex(h,m){let _,S=H=>(ne,ae)=>{let ye=H.concat(ae);return ne._leaflet_id===m._leaflet_id?(_=ye,!0):Array.isArray(ne)&&ne.some(S(ye))};h.some(S([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(h,m){if(m&&m.length===2){let _=this.findDeepCoordIndex(h,m[0]),S=this.findDeepCoordIndex(h,m[1]),M=Math.max(_.index,S.index);return(_.index===0||S.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:S,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,m,_,S){let M=qe(S,h),H=qe(S,m),ne=_*Math.PI/180,ae=Math.cos(ne),ye=Math.sin(ne),Se=(H.x-M.x)*ae+(H.y-M.y)*ye,nt=(H.y-M.y)*ae-(H.x-M.x)*ye,We=Se*ae+M.x,_t=Se*ye+M.y,It=-nt*ye+M.x,en=nt*ae+M.y,_n=pt(S,M),Pn=pt(S,{x:We,y:_t}),br=pt(S,H),tt=pt(S,{x:It,y:en});return[_n,Pn,br,tt]},pxRadiusToMeterRadius(h,m,_){let S=m.project(_),M=L.point(S.x+h,S.y);return m.distance(m.unproject(M),_)}},Bn=on;L.PM=L.PM||{version:cr.version,Map:zs,Toolbar:Rl,Draw:gs,Edit:Kt,Utils:Bn,Matrix:fn,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(m);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(S);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function H(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(H);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(ne);function ae(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ae);function ye(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ye)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(m=>{this.reInitLayer(m)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let m=this._map.mouseEventToLayerPoint(h),_,S;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(m)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);S&&(L.DomEvent.fakeStop(h),this._fireEvent([S],h))}}),L.PM.initialize()})();class rp extends Zn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Ye(this,"properties");Ye(this,"angleCache",new Map);Ye(this,"lastCenter");Ye(this,"lastCenterCosLat");Ye(this,"_pendingNameUpdate",!1);Ye(this,"_nameUpdateTimeout",null);kn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){kn.measure("Circle.updateProperties",()=>{var a,l,c,d;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((d=this.options)==null?void 0:d.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){kn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return kn.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return kn.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return kn.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return kn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Zn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return kn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return kn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){kn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Gv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},p5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Gv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Gv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Gl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Vt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function g5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const es=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},EU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),PU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},Hd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function MU(){const t=Ct(null),e=Ct(null),n=Ct(null),r=Ct(null),i=Ct(""),s=Ct(null),o=Ct(!1),a=Ct(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(V=>V.remove()),document.querySelectorAll(".drawing-help-message").forEach(V=>V.remove())}),Ku(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(V,K="Double-cliquez pour éditer")=>{const pe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},he=(ze,$e)=>{var Ke;const et=((Ke=t.value)==null?void 0:Ke.getZoom())||14,Ge=V.lat,Qe=g5($e.physicalSize,Ge,et);return`<div class="text-container" style="width:${Qe}px;height:${Qe}px;transform:rotate(${$e.rotation}deg)">
        <div class="text-annotation" style="font-size:${Qe*.2}px;color:${$e.color};background-color:${Gv($e.backgroundColor,$e.backgroundOpacity)};border:${$e.hasBorder?$e.borderWidth+" solid "+Gv($e.borderColor,$e.borderOpacity):"none"};padding:${$e.padding};border-radius:${$e.borderRadius}">${ze}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},te=()=>{if(!t.value)return;const ze=Q.getIcon(),$e={html:he(Q.properties.text,Q.properties.style),className:ze.options.className};Q.setIcon(Vt.divIcon($e))},le=Vt.divIcon({html:he(K,pe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),Q=Vt.marker(V,{icon:le,draggable:!1,pmIgnore:!0});Q.properties={type:"text",text:K,style:{...pe}},t.value&&(t.value.on("zoomend",te),Q.on("remove",()=>{var ze;(ze=t.value)==null||ze.off("zoomend",te)})),te();let Be=!1,De=!1,Je=0,me=0;const ee=ze=>{if(!t.value)return;const $e=ze.target;if($e.classList.contains("rotate")){Be=!0;const et=Q.getLatLng(),Ge=t.value.mouseEventToLatLng(ze);Je=Math.atan2(Ge.lat-et.lat,Ge.lng-et.lng)*180/Math.PI,me=Q.properties.style.rotation||0}else $e.classList.contains("move")&&(De=!0);document.addEventListener("mousemove",se),document.addEventListener("mouseup",de)},se=ze=>{if(!(!De||!t.value)){if(Be){const $e=Q.getLatLng(),et=t.value.mouseEventToLatLng(ze),Ge=Math.atan2(et.lat-$e.lat,et.lng-$e.lng)*180/Math.PI,Qe=(me+(Ge-Je))%360;Q.properties.style.rotation=Qe;const Ke=Q.getIcon(),xt={html:he(Q.properties.text,Q.properties.style),className:Ke.options.className};Q.setIcon(Vt.divIcon(xt))}else if(De){const $e=EU(ze),et=t.value.mouseEventToLatLng($e);Q.setLatLng(et)}}},de=()=>{Be=!1,De=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",de)};return Q.on("add",()=>{const ze=Q.getElement();ze&&ze.querySelectorAll(".control-button").forEach(et=>{et.addEventListener("mousedown",ee)})}),Q.on("remove",()=>{const ze=Q.getElement();ze&&ze.querySelectorAll(".control-button").forEach(et=>{et.removeEventListener("mousedown",ee)})}),Q.on("dblclick",ze=>{var xt;Vt.DomEvent.stopPropagation(ze);const $e=(xt=Q.getElement())==null?void 0:xt.querySelector(".text-annotation");if(!$e)return;$e.contentEditable="true",$e.focus(),$e.classList.add("editing");const et=window.getSelection(),Ge=document.createRange();Ge.selectNodeContents($e),et==null||et.removeAllRanges(),et==null||et.addRange(Ge);const Qe=()=>{$e.contentEditable="false",$e.classList.remove("editing");const bt=$e.innerText.trim();if(bt){Q.properties.text=bt;const yt=Q.getIcon(),Wt={html:he(bt,Q.properties.style),className:yt.options.className};Q.setIcon(Vt.divIcon(Wt))}$e.removeEventListener("blur",Qe),$e.removeEventListener("keydown",Ke)},Ke=bt=>{bt.key==="Enter"&&!bt.shiftKey&&(bt.preventDefault(),Qe())};$e.addEventListener("blur",Qe),$e.addEventListener("keydown",Ke)}),Q},c=(V,K)=>{const pe=Vt.DomUtil.create("div","measure-tooltip");if(pe.innerHTML=K,pe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(pe),t.value){const he=t.value.latLngToContainerPoint(V);pe.style.left=`${he.x+10}px`,pe.style.top=`${he.y-25}px`}return pe},d=Hd((V,K,pe)=>{if(V&&(V.innerHTML=pe,t.value)){const he=t.value.latLngToContainerPoint(K);V.style.left=`${he.x+10}px`,V.style.top=`${he.y-25}px`}},100),p=(V,K,pe)=>{V.on("mouseover",()=>{const he=c(V.getLatLng(),pe());V.measureDiv=he}),V.on("mousemove",he=>{V.measureDiv&&t.value&&d(V.measureDiv,he.latlng,pe())}),V.on("mouseout",()=>{V.measureDiv&&(V.measureDiv.remove(),V.measureDiv=void 0)})};let v=[];const g=()=>{var V;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(V=r.value)==null||V.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(K=>K.remove()),e.value&&e.value.getLayers().forEach(K=>{K instanceof Wa&&K.clearHelperPoints()})},x=(V,K="#2563EB")=>{const pe=Vt.circleMarker(V,{radius:6,color:K,fillColor:K,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(pe),pe},E=(V,K)=>{var he,te,le,Q,Be,De;console.log("Input layer:",{type:K,instanceof:{Circle:V instanceof Vt.Circle,Rectangle:V instanceof Vt.Rectangle,Polygon:V instanceof Vt.Polygon,Polyline:V instanceof Vt.Polyline,Line:V instanceof ua},options:V.options});const pe={type:K,style:V.options||{}};try{if(V instanceof Vt.Circle){const Je=V.getRadius();pe.radius=Je,pe.diameter=Je*2,pe.surface=Math.PI*Math.pow(Je,2),pe.perimeter=2*Math.PI*Je,pe.center=V.getLatLng()}else if(V instanceof Vt.Rectangle){const Je=V.getBounds(),me=Je.getNorthEast(),ee=Je.getSouthWest(),se=gc([[ee.lng,ee.lat],[me.lng,ee.lat]]),de=gc([[ee.lng,ee.lat],[ee.lng,me.lat]]),ze=Ud(se,{units:"meters"}),$e=Ud(de,{units:"meters"});pe.width=ze,pe.height=$e,pe.surface=ze*$e,pe.perimeter=2*(ze+$e),pe.dimensions={width:ze,height:$e}}else if(V instanceof Vt.Polygon)try{const me=V.getLatLngs()[0].map(se=>[se.lng,se.lat]);me.push(me[0]);const ee=Hu([me]);pe.surface=Bc(ee),pe.perimeter=Ud(gc(me),{units:"meters"})}catch(Je){console.error("Erreur lors du calcul des propriétés du polygone",Je)}else if(V instanceof Vt.Polyline&&!(V instanceof Vt.Polygon))try{const Je=V.getLatLngs();let me=0;for(let ee=1;ee<Je.length;ee++)me+=Je[ee].distanceTo(Je[ee-1]);pe.length=me}catch(Je){console.error("Erreur lors du calcul de la longueur de la ligne",Je)}pe.style={...pe.style,color:((he=V.options)==null?void 0:he.color)||"#3388ff",weight:((te=V.options)==null?void 0:te.weight)||3,opacity:((le=V.options)==null?void 0:le.opacity)||1,fillColor:((Q=V.options)==null?void 0:Q.fillColor)||"#3388ff",fillOpacity:((Be=V.options)==null?void 0:Be.fillOpacity)||.2,dashArray:((De=V.options)==null?void 0:De.dashArray)||""}}catch(Je){console.error("Error calculating shape properties:",Je)}return pe},k=(V,K=2)=>{var Q;if(!t.value){console.warn("Map is not available for text size update");return}const pe=t.value.getZoom(),he=V.getLatLng().lat,te=g5(K,he,pe),le=(Q=V.getElement())==null?void 0:Q.querySelector(".text-annotation");le&&(V.properties.style.fontSize=`${te}px`,V.properties.physicalWidth=K,V.properties.physicalHeight=K,p5(le,V.properties.style))},A=(V,K,pe)=>{const he=Vt.map(V).setView(K,pe);t.value=he,Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(he);const te=new Vt.FeatureGroup;return te.addTo(he),e.value=te,n.value=Vt.featureGroup().addTo(he),r.value=Vt.featureGroup().addTo(he),he.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:te,snapLayers:[te,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),he.on("pm:drawstart",le=>{o.value=!0,le.shape==="Circle"&&i.value==="Semicircle"&&(he.getContainer().style.cursor="crosshair")}),he.on("pm:drawend",()=>{o.value=!1,he.getContainer().style.cursor="",s.value&&Gl("Cliquez sur la forme pour afficher les points de contrôle")}),he.on("pm:create",ke),te.on("click",le=>{var Be,De,Je,me,ee,se,de,ze,$e,et,Ge,Qe,Ke,xt,bt;Vt.DomEvent.stopPropagation(le);const Q=le.layer;if(Q.name&&!((Be=Q.properties)!=null&&Be.name)?(Q.properties||(Q.properties={}),Q.properties.name=Q.name):(De=Q.properties)!=null&&De.name&&!Q.name&&(Q.name=Q.properties.name),console.log("[featureGroup click] État du nom:",{directName:Q.name,propertiesName:(Je=Q.properties)==null?void 0:Je.name,fullProperties:Q.properties}),(me=r.value)==null||me.clearLayers(),g(),s.value=Q,Q instanceof rp)F(Q);else if(Q instanceof Vt.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(Q,"name"),directName:Q.name,propertiesName:(ee=Q.properties)==null?void 0:ee.name,styleNameBeforeTransfer:(de=(se=Q.properties)==null?void 0:se.style)==null?void 0:de.name,nameIsEnumerable:Object.keys(Q).includes("name"),allProperties:Object.keys(Q.properties||{}),_dbId:Q._dbId});const yt=Q.name,Wt=(ze=Q.properties)==null?void 0:ze.name,tn=(et=($e=Q.properties)==null?void 0:$e.style)==null?void 0:et.name,yn=Q._dbId,Ze=new rp(Q.getLatLng(),{...Q.options,radius:Q.getRadius()});Q.properties?Ze.properties={...Q.properties||{}}:Ze.updateProperties();const ot=yt||Wt||tn;ot&&(Ze.properties.name=ot,Ze.properties.style||(Ze.properties.style={}),Ze.properties.style.name=ot,Ze.name=ot),yn&&(Ze._dbId=yn),console.log("[useMapDrawing] Cercle après conversion:",{name:Ze.name,propertiesName:Ze.properties.name,stylePropertyName:(Ge=Ze.properties.style)==null?void 0:Ge.name,allProperties:Object.keys(Ze.properties||{})}),(Qe=e.value)==null||Qe.removeLayer(Q),(Ke=e.value)==null||Ke.addLayer(Ze),s.value=Ze,F(Ze)}else if(Q instanceof Wa)Y(Q);else if(Q instanceof Vt.Rectangle){const yt=new Wa(Q.getBounds(),{...Q.options});yt.updateProperties(),(xt=e.value)==null||xt.removeLayer(Q),(bt=e.value)==null||bt.addLayer(yt),s.value=yt,Y(yt)}else Q instanceof Vt.Polygon?I(Q):Q instanceof ua||Q instanceof Vt.Polyline?B(Q):Q instanceof kh&&R(Q)}),he.on("pm:edit",le=>{var Be,De,Je;console.log("[pm:edit] Début",{layer:le.layer,currentProperties:le.layer.properties});const Q=le.layer;if(Q){const me=((Be=Q.properties)==null?void 0:Be.type)||"unknown";if(fe(Q,me),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:Q.properties,selectedShape:s.value}),Q instanceof rp)F(Q);else if(Q instanceof Wa)Y(Q);else if(Q instanceof Vt.Rectangle){const ee=new Wa(Q.getBounds(),{...Q.options});ee.updateProperties(),(De=e.value)==null||De.removeLayer(Q),(Je=e.value)==null||Je.addLayer(ee),s.value=ee,Y(ee)}else Q instanceof Vt.Polygon?I(Q):Q instanceof ua?(Q.updateProperties(),fe(Q,"Line"),B(Q)):Q instanceof Vt.Polyline?B(Q):Q instanceof kh&&(Q.updateProperties(),R(Q))}}),he.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(le=>le.remove()),Gl("Déplacez la forme à l'endroit souhaité")}),he.on("pm:dragend",le=>{var Be,De,Je;console.log("[pm:dragend] Début",{layer:le.layer,currentProperties:le.layer.properties});const Q=le.layer;if(Q){const me=((Be=Q.properties)==null?void 0:Be.type)||"unknown";if(Q instanceof Vt.Rectangle&&!(Q instanceof Wa)){const ee=new Wa(Q.getBounds(),{...Q.options});ee.updateProperties(),(De=e.value)==null||De.removeLayer(Q),(Je=e.value)==null||Je.addLayer(ee),s.value=ee,Y(ee)}else Q instanceof ua?(Q.updateProperties(),fe(Q,"Line"),B(Q)):fe(Q,me);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:Q.properties,selectedShape:s.value})}setTimeout(()=>{Gl("Cliquez sur la forme pour afficher les points de contrôle")},100)}),he.on("pm:remove",()=>{var le;(le=document.querySelector(".drawing-help-message"))==null||le.remove()}),he.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(le=>le.remove()),Gl("Utilisez les points de contrôle pour modifier la forme")}),he.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(le=>le.remove())}),he.on("zoomstart",()=>{s.value&&(g(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(le=>le.remove()))}),he},D=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const V=e.value.getBounds();if(V.isValid()){const K={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(V,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=K.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=K.zoomAnimation,t.value.options.markerZoomAnimation=K.markerZoomAnimation}catch(pe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",pe)}},500)}catch(pe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",pe)}},500)}}catch(V){if(console.warn("[useMapDrawing] Error adjusting view:",V),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(K){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",K)}}},z=V=>{var pe;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove());try{const he=t.value.pm;he.globalEditModeEnabled()&&he.disableGlobalEditMode(),he.globalRemovalModeEnabled()&&he.disableGlobalRemovalMode(),he.disableDraw(),g(),(pe=r.value)==null||pe.clearLayers()}catch(he){console.error("Error disabling modes:",he)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:V}})),i.value=V,!V){g();return}let K=V;switch(V){case"Note":K="GeoNote";break;case"Polygon":K="Polygon";break;case"Line":K="Line";break;case"ElevationLine":K="ElevationLine";break;default:K=V}V=K,W(),setTimeout(()=>{var he,te,le,Q,Be,De,Je,me,ee,se,de,ze,$e;try{switch(V){case"Polygon":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(he=t.value)==null||he.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(te=t.value)==null||te.off("pm:create"),(le=t.value)==null||le.on("pm:create",Ge=>{var Qe,Ke,xt;if(Ge.shape==="Polygon"&&Ge.layer){const bt=Ge.layer.getLatLngs()[0];(Qe=t.value)==null||Qe.removeLayer(Ge.layer),(Ke=e.value)!=null&&Ke.hasLayer(Ge.layer)&&e.value.removeLayer(Ge.layer);const yt=new ld(bt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(yt),s.value=yt,yt.updateProperties()),(xt=t.value)==null||xt.pm.disableDraw(),W()}});break;case"Circle":e.value&&e.value.getLayers().filter(Qe=>Qe instanceof Wa).forEach(Qe=>{Qe.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Gl("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Gl("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(Q=t.value)==null||Q.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Be=t.value)==null||Be.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(De=t.value)==null||De.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Je=t.value)==null||Je.off("pm:create"),(me=t.value)==null||me.on("pm:create",Ge=>{var Qe,Ke,xt;if(Ge.shape==="Line"&&Ge.layer){const bt=Ge.layer.getLatLngs();(Qe=t.value)==null||Qe.removeLayer(Ge.layer),(Ke=e.value)!=null&&Ke.hasLayer(Ge.layer)&&e.value.removeLayer(Ge.layer);const yt=new ua(bt,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(yt),s.value=yt,yt.updateProperties()),(xt=t.value)==null||xt.pm.disableDraw(),W()}});break;case"Text":if(Gl("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const Ge=Qe=>{if(!t.value||!e.value)return;const Ke=l(Qe.latlng);e.value.addLayer(Ke),s.value=Ke,t.value.off("click",Ge),z("")};t.value.on("click",Ge)}break;case"GeoNote":if(Gl("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const Ge=async Ke=>{if(!t.value||!e.value)return null;try{const xt=Mp(),bt=new kh(Ke,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(bt),s.value=bt,bt.updateProperties();try{const yt=xt.currentMapId||void 0,Wt=await bt.saveNote(yt);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${Wt}`);const tn=bt._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${tn}, ID backend: ${Wt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:bt,leafletId:tn,backendId:Wt}})),bt.openPopup(),bt}catch(yt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",yt),Mh(async()=>{const{useNotificationStore:Wt}=await Promise.resolve().then(()=>JB);return{useNotificationStore:Wt}},void 0).then(({useNotificationStore:Wt})=>{Wt().error("Erreur lors de la création de la note")}),null}}catch(xt){return console.error("[useMapDrawing] Erreur lors de la création de la note:",xt),null}},Qe=async Ke=>{Vt.DomEvent.stopPropagation(Ke),Vt.DomEvent.preventDefault(Ke);const xt=await Ge(Ke.latlng);xt&&(t.value.off("click",Qe),e.value&&e.value.getLayers().forEach(bt=>{if(bt.off&&typeof bt.off=="function")try{bt.off("click")}catch(yt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",yt)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:xt,leafletId:xt._leaflet_id}})))};if(t.value.on("click",Qe),e.value){const Ke=async bt=>{Vt.DomEvent.stopPropagation(bt),Vt.DomEvent.preventDefault(bt),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const yt=await Ge(bt.latlng);return yt&&(t.value.off("click",Qe),e.value&&e.value.getLayers().forEach(Wt=>{if(Wt.off&&typeof Wt.off=="function")try{Wt.off("click")}catch(tn){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",tn)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:yt,leafletId:yt._leaflet_id}}))),!1};e.value.getLayers().forEach(bt=>{bt.on("click",Ke)});const xt=()=>{e.value&&e.value.getLayers().forEach(bt=>{if(bt.off&&typeof bt.off=="function")try{bt.off("click")}catch(yt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",yt)}}),window.removeEventListener("tool:changed",xt),console.log("[useMapDrawing] Nettoyage des gestionnaires d'événements pour les formes existantes")};window.addEventListener("tool:changed",xt)}}break;case"delete":Gl("Cliquez sur une forme pour la supprimer"),(ee=t.value)==null||ee.pm.enableGlobalRemovalMode();break;case"ElevationLine":Gl("Cliquez et maintenez pour tracer le profil altimétrique"),(se=t.value)==null||se.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(de=t.value)==null||de.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(ze=t.value)==null||ze.off("pm:create"),($e=t.value)==null||$e.on("pm:create",async Ge=>{var Qe,Ke,xt;if(Ge.shape==="Line"&&Ge.layer){const bt=Ge.layer.getLatLngs();(Qe=t.value)==null||Qe.removeLayer(Ge.layer),(Ke=e.value)!=null&&Ke.hasLayer(Ge.layer)&&e.value.removeLayer(Ge.layer),(xt=t.value)==null||xt.pm.disableDraw(),i.value="",W()}});break}}catch(et){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",et)}},100)},X=V=>{var pe;if(!s.value)return;const K=s.value;if(K.properties=K.properties||{},K.properties.style=K.properties.style||{},K.properties.style={...K.properties.style,...V},K.properties.type==="text"){const he=K.properties._textLayer,te=(pe=he==null?void 0:he.getElement())==null?void 0:pe.querySelector(".text-annotation");te&&p5(te,K.properties.style);const le={color:V.borderColor||K.properties.style.borderColor,weight:parseInt(V.borderWidth||K.properties.style.borderWidth),opacity:V.borderOpacity??K.properties.style.borderOpacity};"setStyle"in K&&K.setStyle(le)}else if(K.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const he={};V.fillColor&&(he.fillColor=V.fillColor),V.fillOpacity!==void 0&&(he.fillOpacity=V.fillOpacity),V.strokeColor&&(he.color=V.strokeColor),V.strokeOpacity!==void 0&&(he.opacity=V.strokeOpacity),V.strokeWidth!==void 0&&(he.weight=V.strokeWidth),V.dashArray&&(he.dashArray=V.dashArray),"setStyle"in K&&K.setStyle(he)}},re=V=>{var Q,Be,De,Je,me;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:V,layerType:(Q=s.value.properties)==null?void 0:Q.type,beforeName:s.value.name,beforePropertiesName:(Be=s.value.properties)==null?void 0:Be.name,beforeCategory:(De=s.value.properties)==null?void 0:De.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const K=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${K}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const pe=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${pe}`);const he=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${he}`);const te="category"in V&&V.category!==he;if(Object.keys(V).forEach(ee=>{ee==="type"&&pe?console.log(`[useMapDrawing] Préservation du type original: ${pe}`):s.value.properties[ee]=V[ee],ee==="name"&&(console.log(`[useMapDrawing] Setting name "${V[ee]}" directly on layer`),s.value.name=V[ee]),ee==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${he} -> ${V[ee]}`)}),pe&&(s.value.properties.type=pe),he&&!te&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${he}`),s.value.properties.category=he),s.value._dbId&&te){const ee=Mp(),se=ee.elements.find(de=>de.id===s.value._dbId);if(se){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const de=se;de.data||(de.data={}),de.data.category=s.value.properties.category,ee.$patch({unsavedChanges:!0})}}const le=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:te}});if(window.dispatchEvent(le),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Je=s.value.properties)==null?void 0:Je.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((me=s.value.properties)==null?void 0:me.type)==="Circle"){const ee=s.value,se=ee.getRadius();ee.properties.radius=se,ee.properties.diameter=se*2,ee.properties.surface=Math.PI*se*se,ee.properties.perimeter=2*Math.PI*se,V.name&&(console.log(`[useMapDrawing] Ensuring circle name "${V.name}" is set in multiple places`),ee.properties.name=V.name,ee.properties.style.name=V.name,ee.name=V.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:ee.name,circlePropertiesName:ee.properties.name,nameIsEnumerable:Object.keys(ee).includes("name"),propertiesNameIsEnumerable:Object.keys(ee.properties).includes("name")}))}},ge=V=>{console.log("[forceShapeUpdate] Début",{currentProperties:V.properties,selectedShapeRef:s.value}),s.value=null,ha(()=>{s.value=V,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},fe=(V,K)=>{console.log("[updateLayerProperties] Début",{layer:V,shapeType:K,currentProperties:V.properties}),PU((he,te)=>{const le=E(he,te);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:le}),he.properties={...le},ge(he),he.fire("properties:updated",{shape:he,properties:he.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:he.properties,selectedShape:s.value})},100)(V,K)},N=(V,K)=>Vt.latLng((V.lat+K.lat)/2,(V.lng+K.lng)/2),F=V=>{if(!t.value||!e.value)return;g();const K=V.getLatLng(),pe=V.getRadius(),he=x(K,"#059669");v.push(he),p(he,V,()=>[es(pe,"m","Rayon"),es(pe*2,"m","Diamètre"),es(Math.PI*Math.pow(pe,2),"m²","Surface")].join("<br>"));const te=[],le=[0,45,90,135,180,225,270,315];le.forEach(Q=>{const Be=V.calculatePointOnCircle(Q),De=x(Be,"#2563EB");te.push(De),v.push(De),p(De,V,()=>es(pe,"m","Rayon")),De.on("mousedown",Je=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Je),t.value.dragging.disable();let me=!0;const ee=de=>{me&&(V.resizeFromControlPoint(de.latlng),te.forEach((ze,$e)=>{const et=V.calculatePointOnCircle(le[$e]);ze.setLatLng(et)}),he.setLatLng(V.getLatLng()),De.measureDiv&&(De.measureDiv.innerHTML=es(V.getRadius(),"m","Rayon")))},se=()=>{me=!1,t.value&&(t.value.off("mousemove",ee),document.removeEventListener("mouseup",se),t.value.dragging.enable(),V.updateProperties(),s.value=null,ha(()=>{s.value=V}),fe(V,"Circle"))};t.value.on("mousemove",ee),document.addEventListener("mouseup",se)})}),he.on("mousedown",Q=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Q),t.value.dragging.disable();let Be=!0;const De=V.getLatLng(),Je=Q.latlng,me=se=>{if(!Be)return;const de=se.latlng.lng-Je.lng,ze=se.latlng.lat-Je.lat,$e=Vt.latLng(De.lat+ze,De.lng+de);Vt.Circle.prototype.setLatLng.call(V,$e),he.setLatLng($e),te.forEach((et,Ge)=>{const Qe=V.calculatePointOnCircle(le[Ge]);et.setLatLng(Qe)}),he.measureDiv&&(he.measureDiv.innerHTML=[es(V.getRadius(),"m","Rayon"),es(V.getRadius()*2,"m","Diamètre"),es(Math.PI*Math.pow(V.getRadius(),2),"m²","Surface")].join("<br>"))},ee=()=>{Be=!1,t.value&&(t.value.off("mousemove",me),document.removeEventListener("mouseup",ee),t.value.dragging.enable(),V.updateProperties(),s.value=null,ha(()=>{s.value=V}),fe(V,"Circle"))};t.value.on("mousemove",me),document.addEventListener("mouseup",ee)}),V.on("circle:resized",()=>{fe(V,"Circle")}),s.value=V},Y=V=>{var me;if(!t.value||!e.value)return;if(!(V instanceof Wa)){console.warn("La couche n'est pas une instance de Rectangle");return}const K=V;g();const pe=K.getCenter(),he=K.getRotatedCorners(),te=K.getMidPoints(),le=x(pe,"#059669");v.push(le),p(le,K,()=>{const{width:ee,height:se}=K.getDimensions(),de=ee*se,ze=K.getRotation();return[es(ee,"m","Largeur"),es(se,"m","Hauteur"),es(de,"m²","Surface"),`Rotation: ${ze.toFixed(1)}°`].join("<br>")});const Q=x(Vt.latLng(pe.lat+(he[0].lat-pe.lat)*1.2,pe.lng+(he[0].lng-pe.lng)*1.2),"#F97316");v.push(Q);const Be=Vt.polyline([pe,Q.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(me=n.value)==null||me.addLayer(Be);const De=he.map(ee=>{const se=x(ee,"#DC2626");return v.push(se),p(se,K,()=>{const{width:de,height:ze}=K.getDimensions();return[es(de,"m","Largeur"),es(ze,"m","Hauteur")].join("<br>")}),se}),Je=te.map((ee,se)=>{const de=x(ee,"#2b6451");return v.push(de),p(de,K,()=>{const{width:ze,height:$e}=K.getDimensions(),et=se%2===0?ze:$e;return[es(et,"m","Longueur du côté"),es(et/2,"m","Distance au coin")].join("<br>")}),de});le.on("mousedown",ee=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!0;const de=$e=>{if(!se)return;K.moveFromCenter($e.latlng);const et=K.getRotatedCorners(),Ge=K.getMidPoints();De.forEach((Ke,xt)=>Ke.setLatLng(et[xt])),Je.forEach((Ke,xt)=>Ke.setLatLng(Ge[xt])),le.setLatLng($e.latlng);const Qe=Vt.latLng($e.latlng.lat+(et[0].lat-$e.latlng.lat)*1.2,$e.latlng.lng+(et[0].lng-$e.latlng.lng)*1.2);Q.setLatLng(Qe),Be.setLatLngs([$e.latlng,Qe])},ze=()=>{se=!1,t.value&&(t.value.off("mousemove",de),document.removeEventListener("mouseup",ze),t.value.dragging.enable(),K.updateProperties(),s.value=null,ha(()=>{s.value=K}))};t.value.on("mousemove",de),document.addEventListener("mouseup",ze)}),Q.on("mousedown",ee=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!1;const de=ee.latlng,ze=K.getRotation(),$e=K.getCenter(),et=de.lng-$e.lng,Ge=de.lat-$e.lat,Qe=Math.atan2(Ge,et)*180/Math.PI;v.forEach(bt=>{bt!==Q&&(bt.setStyle({opacity:0,fillOpacity:0}),bt.measureDiv&&(bt.measureDiv.style.display="none"))});const Ke=Hd(bt=>{se||(se=!0);const yt=bt.latlng.lng-$e.lng,Wt=bt.latlng.lat-$e.lat;let yn=Math.atan2(Wt,yt)*180/Math.PI-Qe,Ze=(ze+yn)%360;Ze<0&&(Ze+=360),K.setRotation(Ze,!1),Q.setLatLng(bt.latlng),Be.setLatLngs([$e,bt.latlng])},16),xt=()=>{t.value&&(t.value.off("mousemove",Ke),document.removeEventListener("mouseup",xt),t.value.dragging.enable(),se&&K.finalizeRotation(),s.value=null,ha(()=>{s.value=K,g(),Y(K)}))};t.value.on("mousemove",Ke),document.addEventListener("mouseup",xt)}),K.on("coordinates:updated",ee=>{const{corners:se,center:de}=ee,ze=K.getMidPoints();De.forEach((et,Ge)=>et.setLatLng(se[Ge])),Je.forEach((et,Ge)=>et.setLatLng(ze[Ge])),le.setLatLng(de);const $e=Vt.latLng(de.lat+(se[0].lat-de.lat)*1.2,de.lng+(se[0].lng-de.lng)*1.2);Q.setLatLng($e),Be.setLatLngs([de,$e])})},B=V=>{if(!t.value||!e.value)return;g();const K=V.getLatLngs();if(!K||K.length===0){console.warn("Pas de points pour la ligne");return}let pe=null;if(V instanceof ua){const he=V.getCenter();pe=x(he,"#059669"),v.push(pe),p(pe,V,()=>{const te=V.getLength()||0;return es(te,"m","Longueur totale")}),pe.on("mousedown",te=>{if(!t.value)return;Vt.DomEvent.stopPropagation(te),t.value.dragging.disable();let le=!0;const Q=V.getLatLngs().map(ee=>Vt.latLng(ee.lat,ee.lng)),Be=te.latlng;V instanceof ua&&(V.off("move:end"),V.off("vertex:moved"),V.off("latlngs:updated"),V.off("properties:updated")),v.forEach((ee,se)=>{se>0&&(ee.setStyle({opacity:0,fillOpacity:0}),ee.measureDiv&&(ee.measureDiv.style.display="none"))});const Je=Hd(ee=>{if(!le)return;const se=ee.latlng.lng-Be.lng,de=ee.latlng.lat-Be.lat,ze=Q.map($e=>Vt.latLng($e.lat+de,$e.lng+se));Vt.Polyline.prototype.setLatLngs.call(V,ze),pe==null||pe.setLatLng(ee.latlng)},16),me=()=>{if(le=!1,!!t.value){if(t.value.off("mousemove",Je),document.removeEventListener("mouseup",me),t.value.dragging.enable(),V instanceof ua){const ee=()=>{g(),B(V)};V.on("move:end",ee),V.on("vertex:moved",ee),V.on("latlngs:updated",ee),V.on("properties:updated",ee),V.updateProperties(),fe(V,"Line")}g(),B(V)}};t.value.on("mousemove",Je),document.addEventListener("mouseup",me)})}if(K.forEach((he,te)=>{const le=x(he,"#DC2626");v.push(le),p(le,V,()=>{if(V instanceof ua){const Q=V.getLength()||0,Be=V.getLengthToVertex(te);return[es(Be,"m","Distance depuis le début"),es(Q,"m","Longueur totale")].join("<br>")}return""}),le.on("mousedown",Q=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Q),t.value.dragging.disable();let Be=!0;V instanceof ua&&(V.off("move:end"),V.off("vertex:moved"),V.off("latlngs:updated"),V.off("properties:updated")),v.forEach((me,ee)=>{ee!==te+1&&(me.setStyle({opacity:0,fillOpacity:0}),me.measureDiv&&(me.measureDiv.style.display="none"))});const De=Hd(me=>{if(!Be)return;const ee=V.getLatLngs();ee[te]=me.latlng,Vt.Polyline.prototype.setLatLngs.call(V,ee),le.setLatLng(me.latlng)},16),Je=()=>{if(Be=!1,!!t.value){if(t.value.off("mousemove",De),document.removeEventListener("mouseup",Je),t.value.dragging.enable(),V instanceof ua){const me=()=>{g(),B(V)};V.on("move:end",me),V.on("vertex:moved",me),V.on("latlngs:updated",me),V.on("properties:updated",me),V.updateProperties(),fe(V,"Line")}g(),B(V)}};t.value.on("mousemove",De),document.addEventListener("mouseup",Je)})}),K.length>=2)for(let he=0;he<K.length-1;he++){const te=K[he],le=K[he+1],Q=Vt.latLng((te.lat+le.lat)/2,(te.lng+le.lng)/2),Be=x(Q,"#2b6451");v.push(Be),p(Be,V,()=>{if(V instanceof ua){const De=V.getSegmentLengthAt(he),Je=V.getLength()||0,me=V.getLengthToVertex(he)+De/2;return[es(De,"m","Longueur du segment"),es(De/2,"m","Demi-segment"),es(me,"m","Distance depuis le début"),es(Je,"m","Longueur totale")].join("<br>")}return""})}if(V instanceof ua){const he=()=>{g(),B(V)};V.on("move:start",()=>{v.forEach((te,le)=>{le>0&&(te.setStyle({opacity:0,fillOpacity:0}),te.measureDiv&&(te.measureDiv.style.display="none"))})}),V.on("move:end",he),V.on("vertex:moved",he),V.on("latlngs:updated",he),V.on("properties:updated",he),v.cleanup=()=>{V.off("move:start",()=>{}),V.off("move:end",he),V.off("vertex:moved",he),V.off("latlngs:updated",he),V.off("properties:updated",he)}}},I=V=>{if(!t.value||!e.value)return;g();const K=V.getLatLngs()[0],pe=K.map(Je=>[Je.lng,Je.lat]);pe.push(pe[0]);const he=Hu([pe]),te=Bc(he),le=K.reduce((Je,me,ee)=>{const se=K[(ee+1)%K.length];return Je+me.distanceTo(se)},0);let Q;if(typeof V.getCenter=="function")try{Q=V.getCenter()}catch(Je){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Je);const me=Ug(he);Q=Vt.latLng(me.geometry.coordinates[1],me.geometry.coordinates[0])}else{const Je=Ug(he);Q=Vt.latLng(Je.geometry.coordinates[1],Je.geometry.coordinates[0])}const Be=x(Q,"#059669");v.push(Be),p(Be,V,()=>[es(le,"m","Périmètre"),es(te,"m²","Surface")].join("<br>")),Be.on("mousedown",Je=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Je),t.value.dragging.disable();let me=!0;const ee=Je.latlng,se=[...K];v.forEach((et,Ge)=>{Ge>0&&et.setStyle({opacity:0,fillOpacity:0})});const de=Hd(et=>{if(!me)return;const Ge=et.latlng.lng-ee.lng,Qe=et.latlng.lat-ee.lat,Ke=se.map(xt=>Vt.latLng(xt.lat+Qe,xt.lng+Ge));Vt.Polygon.prototype.setLatLngs.call(V,[Ke]),Be.setLatLng(et.latlng)},16),ze=et=>{me&&de(et)},$e=()=>{if(me=!1,!!t.value){if(t.value.off("mousemove",ze),document.removeEventListener("mouseup",$e),t.value.dragging.enable(),V.properties){const et=V.getLatLngs()[0],Ge=et.map(Ke=>[Ke.lng,Ke.lat]);Ge.push(Ge[0]);const Qe=Hu([Ge]);V.properties.area=Bc(Qe),V.properties.perimeter=et.reduce((Ke,xt,bt)=>{const yt=et[(bt+1)%et.length];return Ke+xt.distanceTo(yt)},0),V.properties.surface=V.properties.area}g(),I(V),s.value=null,ha(()=>{s.value=V})}};t.value.on("mousemove",ze),document.addEventListener("mouseup",$e)}),K.forEach((Je,me)=>{const ee=x(Je,"#DC2626");v.push(ee),p(ee,V,()=>{const se=K[(me-1+K.length)%K.length],de=K[(me+1)%K.length],ze=Je.distanceTo(se),$e=Je.distanceTo(de);return[es(ze,"m","Distance au point précédent"),es($e,"m","Distance au point suivant"),es(le,"m","Périmètre total"),es(te,"m²","Surface")].join("<br>")}),ee.on("mousedown",se=>{if(Vt.DomEvent.stopPropagation(se),!t.value)return;t.value.dragging.disable();let de=!0;Be&&(Be.setStyle({opacity:0,fillOpacity:0}),Be.measureDiv&&(Be.measureDiv.style.display="none"));const ze=Hd(Ge=>{if(!de)return;K[me]=Ge.latlng,Vt.Polygon.prototype.setLatLngs.call(V,[K]),ee.setLatLng(Ge.latlng);const Qe=v.slice(K.length+1),Ke=(me-1+K.length)%K.length,xt=Qe[Ke];if(xt){const yt=K[Ke],Wt=K[me],tn=Vt.latLng((yt.lat+Wt.lat)/2,(yt.lng+Wt.lng)/2);xt.setLatLng(tn)}const bt=Qe[me];if(bt){const yt=K[me],Wt=K[(me+1)%K.length],tn=Vt.latLng((yt.lat+Wt.lat)/2,(yt.lng+Wt.lng)/2);bt.setLatLng(tn)}},16),$e=Ge=>{de&&ze(Ge)},et=()=>{if(de=!1,!!t.value){if(t.value.off("mousemove",$e),document.removeEventListener("mouseup",et),t.value.dragging.enable(),V.properties){const Ge=V.getLatLngs()[0].map(Ke=>[Ke.lng,Ke.lat]);Ge.push(Ge[0]);const Qe=Hu([Ge]);V.properties.area=Bc(Qe),V.properties.perimeter=K.reduce((Ke,xt,bt)=>{const yt=K[(bt+1)%K.length];return Ke+xt.distanceTo(yt)},0),V.properties.surface=V.properties.area}g(),I(V),s.value=null,ha(()=>{s.value=V})}};t.value.on("mousemove",$e),document.addEventListener("mouseup",et)})}),(()=>{const Je=V.getLatLngs()[0];v.slice(Je.length+1).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,Je.length+1);const me=new Array(Je.length);for(let ee=0;ee<Je.length;ee++){const se=Je[ee],de=Je[(ee+1)%Je.length];me[ee]=N(se,de)}me.forEach((ee,se)=>{const de=x(ee,"#2b6451");v.push(de),p(de,V,()=>{const ze=Je[se],$e=Je[(se+1)%Je.length],et=ze.distanceTo($e);return[es(et,"m","Longueur du segment"),es(le,"m","Périmètre total"),es(te,"m²","Surface")].join("<br>")}),de.on("mousedown",ze=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ze),t.value.dragging.disable();let $e=!0;const et=se;Be&&(Be.setStyle({opacity:0,fillOpacity:0}),Be.measureDiv&&(Be.measureDiv.style.display="none"));const Ge=[...V.getLatLngs()[0]];Ge.splice((et+1)%Ge.length,0,ee),V.setLatLngs([Ge]),g(),I(V);const Qe=et+1,Ke=1+Qe,xt=Qe<v.length-1?v[Ke]:null;if(xt){const bt=Wt=>{if(!$e)return;const tn=V.getLatLngs()[0];tn[Qe]=Wt.latlng,V.setLatLngs([tn]),xt.setLatLng(Wt.latlng);const yn=v.slice(1+tn.length),Ze=(Qe-1+tn.length)%tn.length,ot=Qe;if(yn[Ze]){const rt=tn[Ze],$t=tn[Qe],Zt=Vt.latLng((rt.lat+$t.lat)/2,(rt.lng+$t.lng)/2);yn[Ze].setLatLng(Zt)}if(yn[ot]){const rt=tn[Qe],$t=tn[(Qe+1)%tn.length],Zt=Vt.latLng((rt.lat+$t.lat)/2,(rt.lng+$t.lng)/2);yn[ot].setLatLng(Zt)}},yt=()=>{if($e=!1,!!t.value){if(t.value.off("mousemove",bt),document.removeEventListener("mouseup",yt),t.value.dragging.enable(),V.properties){const Wt=V.getLatLngs()[0].map(yn=>[yn.lng,yn.lat]);Wt.push(Wt[0]);const tn=Hu([Wt]);V.properties.area=Bc(tn),V.properties.perimeter=V.getLatLngs()[0].reduce((yn,Ze,ot,rt)=>{const $t=rt[(ot+1)%rt.length];return yn+Ze.distanceTo($t)},0)}g(),I(V),s.value=null,ha(()=>{s.value=V})}};t.value.on("mousemove",bt),document.addEventListener("mouseup",yt)}else t.value.dragging.enable(),g(),I(V)})})})()},R=V=>{if(!t.value||!e.value)return;g();const K=V.getLatLng(),pe=x(K,"#059669");v.push(pe),p(pe,V,()=>`Position: ${K.lat.toFixed(6)}, ${K.lng.toFixed(6)}`),pe.on("mousedown",he=>{if(!t.value)return;Vt.DomEvent.stopPropagation(he),t.value.dragging.disable(),V.startMoving();let te=!0;const Q=Hd(De=>{te&&(pe.setLatLng(De.latlng),V.setLatLng(De.latlng))},16),Be=()=>{t.value&&(t.value.off("mousemove",Q),document.removeEventListener("mouseup",Be),t.value.dragging.enable(),te=!1,V.finishMoving(),V.updateProperties(),s.value=null,ha(()=>{s.value=V,g(),R(V)}))};t.value.on("mousemove",Q),document.addEventListener("mouseup",Be)}),s.value=V},q=V=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:V.constructor.name,properties:V.properties}),r.value.clearLayers();try{if(V instanceof Wa)V.generateHelperPoints(t.value);else if(V instanceof rp){if("getLatLng"in V&&typeof V.getLatLng=="function"){const K=V.getLatLng();if(K){const pe=Vt.circleMarker(K,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}}}else if(V instanceof kh){const K=V.getLatLng();if(K){const pe=Vt.circleMarker(K,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}}else if(V instanceof ld||V instanceof Vt.Polygon){let K=[];if("getLatLngs"in V){const he=V.getLatLngs();if(Array.isArray(he)&&he.length>0){const te=he[0];Array.isArray(te)?K=te:te instanceof Vt.LatLng&&(K=he)}}let pe=null;if(V instanceof ld&&typeof V.getCenter=="function")pe=V.getCenter();else if(K.length>0){const he=K.map(Q=>[Q.lng,Q.lat]);he.push(he[0]);const te=Hu([he]),le=Ug(te);pe=Vt.latLng(le.geometry.coordinates[1],le.geometry.coordinates[0])}if(pe){const he=Vt.circleMarker(pe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(he)}K.forEach(he=>{if(he){const te=Vt.circleMarker(he,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(te)}});for(let he=0;he<K.length;he++){const te=K[he],le=K[(he+1)%K.length];if(te&&le){const Q=Vt.latLng((te.lat+le.lat)/2,(te.lng+le.lng)/2),Be=Vt.circleMarker(Q,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Be)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(K){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",K)}}},U=V=>{console.log("Nombre total de couches:",V.length);const K=V.filter(Q=>{var Je;if(!Q)return!1;let Be=0,De={width:0,height:0};if(Q instanceof Vt.Circle){Be=Math.PI*Math.pow(Q.getRadius(),2);const me=Q.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${Be.toFixed(2)} m²`),console.log(`- Rayon: ${me.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(Q instanceof Wa||Q instanceof Vt.Rectangle){const me=Q.getBounds(),ee=me.getSouthWest(),se=me.getNorthEast(),de=gc([[ee.lng,ee.lat],[se.lng,ee.lat]]),ze=gc([[ee.lng,ee.lat],[ee.lng,se.lat]]);De.width=Ud(de,{units:"meters"}),De.height=Ud(ze,{units:"meters"}),Be=De.width*De.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${Be.toFixed(2)} m²`),console.log(`- Largeur: ${De.width.toFixed(2)} m`),console.log(`- Hauteur: ${De.height.toFixed(2)} m`)}else if(((Je=Q.properties)==null?void 0:Je.type)==="Semicircle"){const me=Q.getStartAngle(),ee=Q.getStopAngle(),se=(ee-me+360)%360,de=Q.getRadius();Be=Math.PI*Math.pow(de,2)*se/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${Be.toFixed(2)} m²`),console.log(`- Rayon: ${de.toFixed(2)} m`),console.log(`- Angle de début: ${me.toFixed(2)}°`),console.log(`- Angle de fin: ${ee.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${se.toFixed(2)}°`)}return Be>0});if(K.length===0)return 0;const pe=new Set,he=[];for(const Q of K)if(!pe.has(Q)){const Be=J(K,Q);Be.length>0&&(he.push(Be),Be.forEach(De=>pe.add(De)))}console.log(`
Nombre de groupes de formes connectées: ${he.length}`);const te=he.map((Q,Be)=>{console.log(`
Calcul pour le groupe ${Be+1} (${Q.length} formes):`);const De=Q.map(de=>{var ze,$e,et;try{let Ge;if(de instanceof Vt.Circle){const Qe=de.getLatLng(),Ke=de.getRadius();Ge=Yj([Qe.lng,Qe.lat],Ke/1e3,{units:"kilometers",steps:256});const xt=Bc(Ge),bt=((ze=de.properties)==null?void 0:ze.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Ke.toFixed(2)}m`),console.log(`- Surface propriété: ${bt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${xt.toFixed(2)}m²`),Ge}else if(de instanceof Wa||de instanceof Vt.Rectangle){const Qe=de.getBounds(),Ke=Qe.getSouthWest(),xt=Qe.getNorthEast(),bt=Vt.latLng(xt.lat,Ke.lng),yt=Vt.latLng(Ke.lat,xt.lng),Wt=[[Ke.lng,Ke.lat],[yt.lng,yt.lat],[xt.lng,xt.lat],[bt.lng,bt.lat],[Ke.lng,Ke.lat]];Ge=Hu([Wt]);const tn=Bc(Ge),yn=gc([[Ke.lng,Ke.lat],[xt.lng,Ke.lat]]),Ze=gc([[Ke.lng,Ke.lat],[Ke.lng,xt.lat]]),ot=Ud(yn,{units:"meters"}),rt=Ud(Ze,{units:"meters"}),$t=ot*rt;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${ot.toFixed(2)}m`),console.log(`- Hauteur: ${rt.toFixed(2)}m`),console.log(`- Surface théorique: ${$t.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${tn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs($t-tn).toFixed(2)}m² (${(Math.abs($t-tn)/$t*100).toFixed(2)}%)`),Ge}else if((($e=de.properties)==null?void 0:$e.type)==="Semicircle"){const Qe=de.getCenter(),Ke=de.getRadius(),xt=de.getStartAngle(),bt=de.getStopAngle(),yt=[],Wt=64;yt.push([Qe.lng,Qe.lat]);for(let Ze=0;Ze<=Wt;Ze++){const rt=(xt+(bt-xt+360)%360*Ze/Wt)*Math.PI/180,$t=Ke*Math.cos(rt),Dn=Ke*Math.sin(rt)/111319.9,mn=$t/(111319.9*Math.cos(Qe.lat*Math.PI/180));yt.push([Qe.lng+mn,Qe.lat+Dn])}yt.push([Qe.lng,Qe.lat]),Ge=Hu([yt]);const tn=Bc(Ge),yn=((et=de.properties)==null?void 0:et.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Ke.toFixed(2)}m`),console.log(`- Surface propriété: ${yn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${tn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(yn-tn).toFixed(2)}m² (${(Math.abs(yn-tn)/yn*100).toFixed(2)}%)`),Ge}return null}catch(Ge){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ge),null}}).filter(de=>de!==null);if(De.length===0)return 0;const Je=De.map(de=>{const ze=Bc(de);return console.log(`Surface individuelle: ${ze.toFixed(2)}m²`),ze});let me=0;for(let de=0;de<De.length;de++)for(let ze=de+1;ze<De.length;ze++)try{const $e=Nj([De[de],De[ze]]),et=gz($e);if(et){const Ge=Bc(et);me+=Ge,console.log(`Intersection entre formes ${de+1} et ${ze+1}: ${Ge.toFixed(2)}m²`)}}catch($e){console.error(`Erreur lors du calcul d'intersection entre les formes ${de+1} et ${ze+1}:`,$e)}const ee=Je.reduce((de,ze)=>de+ze,0),se=ee-me;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Be+1}:`),console.log(`- Surface totale (somme): ${ee.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${me.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${se.toFixed(2)}m²`),se}),le=Math.max(...te);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${le.toFixed(2)}m²`),le},$=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},oe=(V,K)=>{if(!t.value)return;$();const pe=K?J(V,K):V;if(a.value||(a.value=Vt.layerGroup().addTo(t.value)),pe.forEach(he=>{var le;const te=(le=he.properties)==null?void 0:le.type;if(te==="Circle"||te==="Semicircle"){const Q=he.getLatLng(),Be=he.getRadius(),De=Vt.circle(Q,{radius:Be,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),Je=Vt.circle(Q,{radius:Be,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(Je),a.value.addLayer(De))}else if(te==="Rectangle"||te==="Polygon"){const Q=he.getLatLngs(),Be=Vt.polygon(Q,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),De=Vt.polygon(Q,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(De),a.value.addLayer(Be))}}),K&&pe.length>1&&t.value){const he=Vt.latLngBounds([]);pe.forEach(Q=>{Q.getBounds?he.extend(Q.getBounds()):Q.getLatLng&&he.extend(Q.getLatLng())});const te=he.getCenter(),le=Vt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(te);a.value&&a.value.addLayer(Vt.marker(te,{opacity:0,interactive:!1}).bindTooltip(le).openTooltip())}},J=(V,K)=>{if(!K)return[];const pe=new Set,he=[K],te=[K];for(K._leaflet_id!==void 0&&pe.add(K._leaflet_id);he.length>0;){const le=he.shift();for(const Q of V){if(Q===le||pe.has(Q._leaflet_id))continue;_e(le,Q)&&(te.push(Q),he.push(Q),pe.add(Q._leaflet_id))}}return te},_e=(V,K)=>{let pe=null,he=null;if(V.getBounds&&typeof V.getBounds=="function")pe=V.getBounds();else if(V.getLatLng&&V.getRadius){const te=V.getLatLng(),le=V.getRadius();pe=Vt.latLngBounds([te.lat-le/111e3,te.lng-le/(111e3*Math.cos(te.lat*Math.PI/180))],[te.lat+le/111e3,te.lng+le/(111e3*Math.cos(te.lat*Math.PI/180))])}if(K.getBounds&&typeof K.getBounds=="function")he=K.getBounds();else if(K.getLatLng&&K.getRadius){const te=K.getLatLng(),le=K.getRadius();he=Vt.latLngBounds([te.lat-le/111e3,te.lng-le/(111e3*Math.cos(te.lat*Math.PI/180))],[te.lat+le/111e3,te.lng+le/(111e3*Math.cos(te.lat*Math.PI/180))])}return!(!pe||!he||!pe.intersects(he))},ve=(V,K)=>{var he;const pe=J(V,K);return pe.length===1&&(he=K.properties)!=null&&he.surface?K.properties.surface:U(pe)},ke=V=>{var he,te,le,Q,Be,De,Je,me,ee;const K=V.layer;(he=e.value)==null||he.addLayer(K);let pe="unknown";if(K instanceof Vt.Circle?pe=i.value==="Semicircle"?"Semicircle":"Circle":K instanceof Vt.Rectangle?pe="Rectangle":K instanceof Vt.Polygon?pe="Polygon":K instanceof Vt.Polyline&&!(K instanceof Vt.Polygon)&&(pe="Line"),K.properties=E(K,pe),K.properties||(K.properties={}),K.properties.category||(K.properties.category="forages"),K.properties.accessLevel||(K.properties.accessLevel="visitor"),K._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=K,console.log("[useMapDrawing] Input layer:",{type:pe,instanceof:{Circle:K instanceof Vt.Circle,Rectangle:K instanceof Vt.Rectangle,Polygon:K instanceof Vt.Polygon,Polyline:K instanceof Vt.Polyline},options:K.options,properties:K.properties,_dbId:K._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:K,type:pe,properties:K.properties}})),K.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:pe,isSelected:s.value===K}),(!s.value||s.value!==K)&&q(K)}),K.on("mouseout",()=>{var se;console.log("[mouseout] Sortie de la forme",{type:pe,isSelected:s.value===K}),(!s.value||s.value!==K)&&((se=r.value)==null||se.clearLayers())}),pe==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(pe==="Circle"){(te=e.value)==null||te.removeLayer(K);const se=new rp(K.getLatLng(),{radius:K.getRadius(),...K.options});se.properties={...E(se,"Circle"),type:"Circle"},Object.defineProperty(se,"name",{value:se.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(se,"name"),directName:se.name,propertiesName:se.properties.name,nameIsEnumerable:Object.keys(se).includes("name"),allProperties:Object.keys(se.properties),allKeys:Object.keys(se)}),(le=e.value)==null||le.addLayer(se),s.value=se,F(se)}else if(pe==="Rectangle"){(Q=e.value)==null||Q.removeLayer(K);const se=new Wa(K.getBounds(),{...K.options});se.updateProperties(),(Be=e.value)==null||Be.addLayer(se),s.value=se,Y(se)}else if(K instanceof Vt.Polygon){const se=K.getLatLngs()[0],de=new ld([se],{...K.options});de.updateProperties(),(De=e.value)==null||De.removeLayer(K),(Je=e.value)==null||Je.addLayer(de),s.value=de,I(de)}else if(K instanceof ua)B(K);else if(K instanceof Vt.Polyline&&!(K instanceof Vt.Polygon)){const se=K.getLatLngs(),de=new ua(se,{...K.options});de.updateProperties(),(me=e.value)==null||me.removeLayer(K),(ee=e.value)==null||ee.addLayer(de),s.value=de,B(de)}Gl("Cliquez sur la forme pour afficher les points de contrôle")},W=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",ke))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:A,setDrawingTool:z,updateShapeStyle:X,updateShapeProperties:re,updateTextFixedSize:k,adjustView:D,clearActiveControlPoints:g,calculateTotalCoverageArea:U,showCoverageOverlay:oe,hideCoverageOverlay:$,calculateConnectedCoverageArea:ve,getConnectedShapes:J}}function kU(){const{isEnabled:t,startMeasure:e}=jp(),n=Ct(null),r=Ct(""),i=Ct("Hybride"),s=Ct(null),o={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},a=e("createBaseMaps","useMapState"),l={Hybride:Vt.layerGroup([Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{...o,attribution:"© OpenStreetMap contributors",opacity:.6,subdomains:["a","b","c"],crossOrigin:!0}),Vt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{...o,attribution:"© Esri",maxNativeZoom:20,opacity:.6})]),Cadastre:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})};a();const c=kn.createPerformanceTracker(g=>{kn.measure("initMap:setOptions",()=>{n.value=g,g.options.zoomSnap=.5,g.options.zoomDelta=.5,g.options.wheelPxPerZoomLevel=120,g.options.zoomAnimation=!0,g.options.fadeAnimation=!0,g.options.markerZoomAnimation=!0,g.options.preferCanvas=!0,g.options.renderer=Vt.canvas(),g.options.minZoom=2,g.options.maxZoom=19,g.options.scrollWheelZoom=!0,g.options.doubleClickZoom=!0;const x=Vt.latLngBounds(Vt.latLng(-90,-180),Vt.latLng(90,180));g.setMaxBounds(x),g.options.maxBoundsViscosity=1,g.options.trackResize=!0;let E=null;g.getZoom(),g.on("zoomstart",()=>{g.getZoom(),g.options.zoomAnimation=!1,g.options.markerZoomAnimation=!1}),g.on("zoomend",()=>{E&&clearTimeout(E),E=setTimeout(()=>{setTimeout(()=>{g.options.zoomAnimation=!0,g.options.markerZoomAnimation=!0,g.invalidateSize({animate:!1,pan:!1});const A=g.getBounds(),D=g.options.maxBounds;D&&!A.intersects(D)&&g.panInsideBounds(D,{animate:!1}),g.eachLayer(z=>{z.properties&&z.properties.type==="Note"&&typeof z.updatePosition=="function"&&z.updatePosition()})},250)},250)});const k=g._zoomAnimation;k&&(g._zoomAnimation=function(A){try{this._animatingZoom||k.call(this,A)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),g.on("zoomanim",A=>{g.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePositionDuringZoom=="function"&&D.updatePositionDuringZoom(A)})})},"useMapState"),kn.measure("initMap:addInitialLayer",()=>{g&&g.whenReady(()=>{const x=i.value;if(l[x]){if(console.log(`Initialisation de la couche de base: ${x}`),s.value&&g.hasLayer(s.value))try{g.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(E){console.warn("Erreur lors de la suppression de la couche active précédente:",E)}s.value=l[x];try{s.value.addTo(g),console.log(`Couche ${x} ajoutée à la carte`)}catch(E){console.error(`Erreur lors de l'ajout de la couche ${x}:`,E)}}else console.warn(`Couche de base non disponible: ${x}`)})},"useMapState"),g.on("baselayerchange",x=>{const E=e("baselayerchange","useMapState",{layer:x.name});i.value=x.name,s.value=x.layer,E()}),t.value&&(g.on("movestart",()=>{e("mapMove","useMapState",{startCenter:g.getCenter()})}),g.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:g.getCenter()})(),g.eachLayer(E=>{E.properties&&E.properties.type==="Note"&&typeof E.updatePosition=="function"&&E.updatePosition()})}),g.on("tileloadstart",()=>{e("tileLoad","useMapState")}),g.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=kn.createAsyncPerformanceTracker(async g=>{if(!n.value||!l[g]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===g)return;console.log(`Changement de carte: ${i.value} -> ${g}`);const x=n.value,E=x.getCenter(),k=x.getZoom();x.options.zoomAnimation=!1,x.options.fadeAnimation=!1,x.options.markerZoomAnimation=!1;const A=l[g];if(s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(D){console.warn("Erreur lors de la suppression de la couche active:",D)}try{A instanceof Vt.LayerGroup,A.addTo(x),console.log(`Nouvelle couche ${g} ajoutée`)}catch(D){console.error("Erreur lors de l'ajout de la nouvelle couche:",D);try{x.hasLayer(A)&&x.removeLayer(A),A.addTo(x),console.log(`Récupération: couche ${g} réajoutée`)}catch(z){throw console.error("Échec de la récupération:",z),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=A,i.value=g;try{x.setView(E,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${E}, zoom=${k}`)}catch(D){console.warn("Erreur lors de la réinitialisation de la vue:",D)}try{x.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{x.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePosition=="function"&&D.updatePosition()})},100)}catch(D){console.warn("Erreur lors du rafraîchissement de la carte:",D)}setTimeout(()=>{x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(x){if(console.error("Erreur lors du changement de carte de base:",x),n.value)try{const E=n.value;E.eachLayer(A=>{(A instanceof Vt.TileLayer||A instanceof Vt.LayerGroup)&&E.removeLayer(A)});const k=l[g];k.addTo(E),s.value=k,i.value=g,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(E){console.error("Erreur lors de la récupération après échec:",E)}}},"changeBaseMap","useMapState"),p=kn.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const g=await kn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),x=await kn.measureAsync("searchLocation:parseResponse",async()=>await g.json(),"useMapState");x&&x.length>0&&kn.measure("searchLocation:updateView",()=>{const{lat:E,lon:k}=x[0];n.value.setView([E,k],13,{animate:!0})},"useMapState")}catch(g){console.error("Erreur lors de la recherche de localisation:",g)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:l,initMap:c,searchLocation:p,changeBaseMap:d,cleanup:()=>{const g=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),g()},isPerformanceEnabled:t}}const AU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},TU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},DU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},OU={key:0,class:"mb-4"},NU={key:0,class:"animate-pulse"},IU=["value"],BU={key:1,class:"mb-4"},RU={key:0,class:"animate-pulse"},FU=["disabled"],jU={value:null},zU=["value"],$U={key:2,class:"mb-4"},VU={key:0,class:"animate-pulse"},UU=["disabled"],HU={value:null},WU=["value"],GU={class:"mb-4"},qU={class:"mb-6"},YU={class:"flex justify-end space-x-3"},KU=["disabled"],ZU={key:0},XU={key:1},RE=Rs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(R){return R?typeof R=="object"?R.id:R:null}function i(R){if(R===null)throw new Error("Invalid ID");return R}const s=t,o=n,a=ma(),l=zy(),c=Mp(),d=Ct(!1),p=Ct(null),v=Ct([]),g=Ct([]),x=Ct([]),E=Ct(null),k=Ct(null),A=Ct(!1),D=Ct(!1),z=Ct(!1),X=Ct({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),re=Xn(()=>{var R,q,U;return((R=a.user)==null?void 0:R.user_type)==="admin"?X.value.nom.trim()&&X.value.entreprise&&X.value.salarie:((q=a.user)==null?void 0:q.user_type)==="entreprise"?X.value.nom.trim()&&X.value.salarie:(((U=a.user)==null?void 0:U.user_type)==="salarie",X.value.nom.trim())});Ai(()=>X.value.entreprise,async R=>{if(!s.modelValue)return;X.value.salarie=null,X.value.visiteur=null,g.value=[];const q=r(R);console.log("[NewPlanModal] Entreprise sélectionnée:",q),q?await ge(q):v.value=[]}),Ai(()=>X.value.salarie,async R=>{if(!s.modelValue)return;X.value.visiteur=null;const q=r(R);q?await fe(q):g.value=[]}),Ai(()=>s.modelValue,R=>{var q,U,$;R?((q=a.user)==null?void 0:q.user_type)==="admin"?B():((U=a.user)==null?void 0:U.user_type)==="entreprise"?ge(a.user.id):(($=a.user)==null?void 0:$.user_type)==="salarie"&&fe(a.user.id):(X.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,g.value=[],v.value=[],x.value=[],p.value=null)});async function ge(R){A.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",R);const q=await Al.getUsers({role:"SALARIE",entreprise:R});console.log("[NewPlanModal] Réponse salaries:",q.data),v.value=q.data}catch(q){console.error("[NewPlanModal] Error loading salaries:",q),v.value=[]}finally{A.value=!1}}async function fe(R){D.value=!0;try{const q=await Al.getUsers({role:"VISITEUR",salarie:R});g.value=q.data}catch(q){console.error("[NewPlanModal] Error loading visiteurs:",q),g.value=[]}finally{D.value=!1}}async function N(R){s.modelValue&&(E.value=R,X.value.salarie=R.id,await fe(R.id),o("salarieSelected",R))}function F(R){s.modelValue&&(k.value=R,X.value.visiteur=R.id,o("visiteurSelected",R))}function Y(){o("update:modelValue",!1),X.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,g.value=[],p.value=null}async function B(){z.value=!0;try{const R=await a.fetchEnterprises();x.value=R}catch(R){console.error("[NewPlanModal] Error loading entreprises:",R),x.value=[]}finally{z.value=!1}}async function I(){var R,q;p.value=null,d.value=!0;try{const U={nom:X.value.nom.trim(),description:X.value.description.trim()},$=a.user;if(!$)throw new Error("User not found");if($.user_type==="admin"){if(!X.value.entreprise||!X.value.salarie)throw new Error("Missing required fields");U.entreprise=i(r(X.value.entreprise)),U.salarie=i(r(X.value.salarie)),X.value.visiteur&&(U.visiteur=X.value.visiteur)}else if($.user_type==="entreprise"){if(!X.value.salarie)throw new Error("Missing required fields");U.entreprise=$.id,U.salarie=i(r(X.value.salarie)),X.value.visiteur&&(U.visiteur=X.value.visiteur)}else if($.user_type==="salarie"){if(!$.entreprise)throw new Error("Missing required fields");U.entreprise=$.entreprise.id,U.salarie=$.id,X.value.visiteur&&(U.visiteur=X.value.visiteur)}else if($.user_type==="visiteur"){if(!$.entreprise||!$.salarie)throw new Error("Missing required fields");U.entreprise=$.entreprise.id,U.salarie=$.salarie.id,U.visiteur=$.id}console.log("Données du plan à créer:",U),l.clearCurrentPlan(),c.setCurrentPlan(null);const oe=await l.createPlan(U);o("created",oe.id),Y()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",(R=U.response)==null?void 0:R.data);let $="Une erreur est survenue lors de la création du plan";(q=U.response)!=null&&q.data&&(typeof U.response.data=="object"?$=Object.entries(U.response.data).map(([oe,J])=>Array.isArray(J)?`${oe}: ${J.join(", ")}`:`${oe}: ${J}`).join(`
`):typeof U.response.data=="string"&&($=U.response.data)),p.value=$}finally{d.value=!1}}return e({salaries:v,visiteurs:g,selectedSalarie:E,selectedVisiteur:k,loadSalaries:ge,loadVisiteurs:fe,selectSalarie:N,selectVisiteur:F}),(R,q)=>{var U,$,oe,J;return R.modelValue?(Ae(),Ne("div",AU,[C("div",TU,[C("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[q[6]||(q[6]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),C("button",{onClick:Y,class:"text-gray-400 hover:text-gray-500"},q[5]||(q[5]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",DU,[qn(a).isAdmin?(Ae(),Ne("div",OU,[q[9]||(q[9]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),z.value?(Ae(),Ne("div",NU,q[7]||(q[7]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):er((Ae(),Ne("select",{key:1,"onUpdate:modelValue":q[0]||(q[0]=_e=>X.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[q[8]||(q[8]=C("option",{value:null},"Sélectionnez une entreprise",-1)),(Ae(!0),Ne(wn,null,Qn(x.value,_e=>(Ae(),Ne("option",{key:_e.id,value:_e.id},Et(qn(xu)(_e)),9,IU))),128))],512)),[[us,X.value.entreprise]])])):Jt("",!0),((U=qn(a).user)==null?void 0:U.user_type)==="admin"||(($=qn(a).user)==null?void 0:$.user_type)==="entreprise"?(Ae(),Ne("div",BU,[q[11]||(q[11]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),A.value?(Ae(),Ne("div",RU,q[10]||(q[10]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):er((Ae(),Ne("select",{key:1,id:"edit-salarie","onUpdate:modelValue":q[1]||(q[1]=_e=>X.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:qn(a).isAdmin&&!X.value.entreprise},[C("option",jU,Et(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ae(!0),Ne(wn,null,Qn(v.value,_e=>(Ae(),Ne("option",{key:_e.id,value:_e.id},Et(qn(xu)(_e)),9,zU))),128))],8,FU)),[[us,X.value.salarie]])])):Jt("",!0),((oe=qn(a).user)==null?void 0:oe.user_type)!=="visiteur"?(Ae(),Ne("div",$U,[q[13]||(q[13]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Ae(),Ne("div",VU,q[12]||(q[12]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):er((Ae(),Ne("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":q[2]||(q[2]=_e=>X.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!g.value.length||((J=qn(a).user)==null?void 0:J.user_type)!=="salarie"&&!X.value.salarie},[C("option",HU,Et(g.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ae(!0),Ne(wn,null,Qn(g.value,_e=>(Ae(),Ne("option",{key:_e.id,value:_e.id},Et(qn(xu)(_e)),9,WU))),128))],8,UU)),[[us,X.value.visiteur]])])):Jt("",!0),C("div",GU,[q[14]||(q[14]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),er(C("input",{id:"edit-nom","onUpdate:modelValue":q[3]||(q[3]=_e=>X.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Li,X.value.nom]])]),C("div",qU,[q[15]||(q[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),er(C("textarea",{id:"edit-description","onUpdate:modelValue":q[4]||(q[4]=_e=>X.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Li,X.value.description]])]),C("div",YU,[C("button",{onClick:Y,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),C("button",{onClick:I,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!re.value||d.value},[d.value?(Ae(),Ne("span",ZU,"Création en cours...")):(Ae(),Ne("span",XU,"Créer"))],8,KU)])])])])):Jt("",!0)}}});function cs(t){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cs(t)}var pl=Uint8Array,Su=Uint16Array,j_=Int32Array,$y=new pl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vy=new pl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wb=new pl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FE=function(t,e){for(var n=new Su(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new j_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},jE=FE($y,2),zE=jE.b,xb=jE.r;zE[28]=258,xb[258]=28;var $E=FE(Vy,0),JU=$E.b,m5=$E.r,Lb=new Su(32768);for(var Ns=0;Ns<32768;++Ns){var Zh=(Ns&43690)>>1|(Ns&21845)<<1;Zh=(Zh&52428)>>2|(Zh&13107)<<2,Zh=(Zh&61680)>>4|(Zh&3855)<<4,Lb[Ns]=((Zh&65280)>>8|(Zh&255)<<8)>>1}var Zc=function(t,e,n){for(var r=t.length,i=0,s=new Su(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Su(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Su(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[Lb[p]>>l]=c}else for(a=new Su(r),i=0;i<r;++i)t[i]&&(a[i]=Lb[o[t[i]-1]++]>>15-t[i]);return a},xd=new pl(288);for(var Ns=0;Ns<144;++Ns)xd[Ns]=8;for(var Ns=144;Ns<256;++Ns)xd[Ns]=9;for(var Ns=256;Ns<280;++Ns)xd[Ns]=7;for(var Ns=280;Ns<288;++Ns)xd[Ns]=8;var mm=new pl(32);for(var Ns=0;Ns<32;++Ns)mm[Ns]=5;var QU=Zc(xd,9,0),eH=Zc(xd,9,1),tH=Zc(mm,5,0),nH=Zc(mm,5,1),Q1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},uc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},e2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},z_=function(t){return(t+7)/8|0},VE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new pl(t.subarray(e,n))},rH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pc=function(t,e,n){var r=new Error(e||rH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,pc),!n)throw r;return r},iH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new pl(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new pl(i*3));var c=function(De){var Je=n.length;if(De>Je){var me=new pl(Math.max(Je*2,De));me.set(n),n=me}},d=e.f||0,p=e.p||0,v=e.b||0,g=e.l,x=e.d,E=e.m,k=e.n,A=i*8;do{if(!g){d=uc(t,p,1);var D=uc(t,p+1,3);if(p+=3,D)if(D==1)g=eH,x=nH,E=9,k=5;else if(D==2){var ge=uc(t,p,31)+257,fe=uc(t,p+10,15)+4,N=ge+uc(t,p+5,31)+1;p+=14;for(var F=new pl(N),Y=new pl(19),B=0;B<fe;++B)Y[wb[B]]=uc(t,p+B*3,7);p+=fe*3;for(var I=Q1(Y),R=(1<<I)-1,q=Zc(Y,I,1),B=0;B<N;){var U=q[uc(t,p,R)];p+=U&15;var z=U>>4;if(z<16)F[B++]=z;else{var $=0,oe=0;for(z==16?(oe=3+uc(t,p,3),p+=2,$=F[B-1]):z==17?(oe=3+uc(t,p,7),p+=3):z==18&&(oe=11+uc(t,p,127),p+=7);oe--;)F[B++]=$}}var J=F.subarray(0,ge),_e=F.subarray(ge);E=Q1(J),k=Q1(_e),g=Zc(J,E,1),x=Zc(_e,k,1)}else pc(1);else{var z=z_(p)+4,X=t[z-4]|t[z-3]<<8,re=z+X;if(re>i){l&&pc(0);break}a&&c(v+X),n.set(t.subarray(z,re),v),e.b=v+=X,e.p=p=re*8,e.f=d;continue}if(p>A){l&&pc(0);break}}a&&c(v+131072);for(var ve=(1<<E)-1,ke=(1<<k)-1,W=p;;W=p){var $=g[e2(t,p)&ve],V=$>>4;if(p+=$&15,p>A){l&&pc(0);break}if($||pc(2),V<256)n[v++]=V;else if(V==256){W=p,g=null;break}else{var K=V-254;if(V>264){var B=V-257,pe=$y[B];K=uc(t,p,(1<<pe)-1)+zE[B],p+=pe}var he=x[e2(t,p)&ke],te=he>>4;he||pc(3),p+=he&15;var _e=JU[te];if(te>3){var pe=Vy[te];_e+=e2(t,p)&(1<<pe)-1,p+=pe}if(p>A){l&&pc(0);break}a&&c(v+131072);var le=v+K;if(v<_e){var Q=s-_e,Be=Math.min(_e,le);for(Q+v<0&&pc(3);v<Be;++v)n[v]=r[Q+v]}for(;v<le;++v)n[v]=n[v-_e]}}e.l=g,e.p=W,e.b=v,e.f=d,g&&(d=1,e.m=E,e.d=x,e.n=k)}while(!d);return v!=n.length&&o?VE(n,0,v):n.subarray(0,v)},bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},ng=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},t2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:HE,l:0};if(i==1){var o=new pl(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(re,ge){return re.f-ge.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new Su(v+1),x=Sb(n[d-1],g,0);if(x>e){var r=0,E=0,k=x-e,A=1<<k;for(s.sort(function(ge,fe){return g[fe.s]-g[ge.s]||ge.f-fe.f});r<i;++r){var D=s[r].s;if(g[D]>e)E+=A-(1<<x-g[D]),g[D]=e;else break}for(E>>=k;E>0;){var z=s[r].s;g[z]<e?E-=1<<e-g[z]++-1:++r}for(;r>=0&&E;--r){var X=s[r].s;g[X]==e&&(--g[X],++E)}x=e}return{t:new pl(g),l:x}},Sb=function(t,e,n){return t.s==-1?Math.max(Sb(t.l,e,n+1),Sb(t.r,e,n+1)):e[t.s]=n},v5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Su(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},rg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},UE=function(t,e,n){var r=n.length,i=z_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},y5=function(t,e,n,r,i,s,o,a,l,c,d){bh(e,d++,n),++i[256];for(var p=t2(i,15),v=p.t,g=p.l,x=t2(s,15),E=x.t,k=x.l,A=v5(v),D=A.c,z=A.n,X=v5(E),re=X.c,ge=X.n,fe=new Su(19),N=0;N<D.length;++N)++fe[D[N]&31];for(var N=0;N<re.length;++N)++fe[re[N]&31];for(var F=t2(fe,7),Y=F.t,B=F.l,I=19;I>4&&!Y[wb[I-1]];--I);var R=c+5<<3,q=rg(i,xd)+rg(s,mm)+o,U=rg(i,v)+rg(s,E)+o+14+3*I+rg(fe,Y)+2*fe[16]+3*fe[17]+7*fe[18];if(l>=0&&R<=q&&R<=U)return UE(e,d,t.subarray(l,l+c));var $,oe,J,_e;if(bh(e,d,1+(U<q)),d+=2,U<q){$=Zc(v,g,0),oe=v,J=Zc(E,k,0),_e=E;var ve=Zc(Y,B,0);bh(e,d,z-257),bh(e,d+5,ge-1),bh(e,d+10,I-4),d+=14;for(var N=0;N<I;++N)bh(e,d+3*N,Y[wb[N]]);d+=3*I;for(var ke=[D,re],W=0;W<2;++W)for(var V=ke[W],N=0;N<V.length;++N){var K=V[N]&31;bh(e,d,ve[K]),d+=Y[K],K>15&&(bh(e,d,V[N]>>5&127),d+=V[N]>>12)}}else $=QU,oe=xd,J=tH,_e=mm;for(var N=0;N<a;++N){var pe=r[N];if(pe>255){var K=pe>>18&31;ng(e,d,$[K+257]),d+=oe[K+257],K>7&&(bh(e,d,pe>>23&31),d+=$y[K]);var he=pe&31;ng(e,d,J[he]),d+=_e[he],he>3&&(ng(e,d,pe>>5&8191),d+=Vy[he])}else ng(e,d,$[pe]),d+=oe[pe]}return ng(e,d,$[256]),d+oe[256]},sH=new j_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HE=new pl(0),oH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new pl(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=sH[e-1],v=p>>13,g=p&8191,x=(1<<n)-1,E=s.p||new Su(32768),k=s.h||new Su(x+1),A=Math.ceil(n/3),D=2*A,z=function(ee){return(t[ee]^t[ee+1]<<A^t[ee+2]<<D)&x},X=new j_(25e3),re=new Su(288),ge=new Su(32),fe=0,N=0,F=s.i||0,Y=0,B=s.w||0,I=0;F+2<o;++F){var R=z(F),q=F&32767,U=k[R];if(E[q]=U,k[R]=q,B<=F){var $=o-F;if((fe>7e3||Y>24576)&&($>423||!c)){d=y5(t,l,0,X,re,ge,N,Y,I,F-I,d),Y=fe=N=0,I=F;for(var oe=0;oe<286;++oe)re[oe]=0;for(var oe=0;oe<30;++oe)ge[oe]=0}var J=2,_e=0,ve=g,ke=q-U&32767;if($>2&&R==z(F-ke))for(var W=Math.min(v,$)-1,V=Math.min(32767,F),K=Math.min(258,$);ke<=V&&--ve&&q!=U;){if(t[F+J]==t[F+J-ke]){for(var pe=0;pe<K&&t[F+pe]==t[F+pe-ke];++pe);if(pe>J){if(J=pe,_e=ke,pe>W)break;for(var he=Math.min(ke,pe-2),te=0,oe=0;oe<he;++oe){var le=F-ke+oe&32767,Q=E[le],Be=le-Q&32767;Be>te&&(te=Be,U=le)}}}q=U,U=E[q],ke+=q-U&32767}if(_e){X[Y++]=268435456|xb[J]<<18|m5[_e];var De=xb[J]&31,Je=m5[_e]&31;N+=$y[De]+Vy[Je],++re[257+De],++ge[Je],B=F+J,++fe}else X[Y++]=t[F],++re[t[F]]}}for(F=Math.max(F,B);F<o;++F)X[Y++]=t[F],++re[t[F]];d=y5(t,l,c,X,re,ge,N,Y,I,F-I,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=E,s.i=F,s.w=B)}else{for(var F=s.w||0;F<o+c;F+=65535){var me=F+65535;me>=o&&(l[d/8|0]=c,me=o),d=UE(l,d+1,t.subarray(F,me))}s.i=o}return VE(a,0,r+z_(d)+i)},WE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},aH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new pl(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return oH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},GE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},lH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=WE();i.p(e.dictionary),GE(t,2,i.d())}},uH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&pc(6,"invalid zlib data"),(t[1]>>5&1)==1&&pc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Cb(t,e){e||(e={});var n=WE();n.p(t);var r=aH(t,e,e.dictionary?6:2,4);return lH(r,e),GE(r,r.length-4,n.d()),r}function cH(t,e){return iH(t.subarray(uH(t),-4),{i:2},e,e)}var hH=typeof TextDecoder<"u"&&new TextDecoder,dH=0;try{hH.decode(HE,{stream:!0}),dH=1}catch{}var jr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function n2(){jr.console&&typeof jr.console.log=="function"&&jr.console.log.apply(jr.console,arguments)}var bs={log:n2,warn:function(t){jr.console&&(typeof jr.console.warn=="function"?jr.console.warn.apply(jr.console,arguments):n2.call(null,arguments))},error:function(t){jr.console&&(typeof jr.console.error=="function"?jr.console.error.apply(jr.console,arguments):n2(t))}};function r2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Xd(r.response,e,n)},r.onerror=function(){bs.error("could not download file")},r.send()}function b5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function w0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Hg,Eb,Xd=jr.saveAs||((typeof window>"u"?"undefined":cs(window))!=="object"||window!==jr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=jr.URL||jr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?b5(i.href)?r2(t,e,n):w0(i,i.target="_blank"):w0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){w0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(b5(t))r2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){w0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:cs(s)!=="object"&&(bs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return r2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(jr.HTMLElement)||jr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":cs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=jr.URL||jr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function i2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=sl(n,r,i,s,e[0],7,-680876936),s=sl(s,n,r,i,e[1],12,-389564586),i=sl(i,s,n,r,e[2],17,606105819),r=sl(r,i,s,n,e[3],22,-1044525330),n=sl(n,r,i,s,e[4],7,-176418897),s=sl(s,n,r,i,e[5],12,1200080426),i=sl(i,s,n,r,e[6],17,-1473231341),r=sl(r,i,s,n,e[7],22,-45705983),n=sl(n,r,i,s,e[8],7,1770035416),s=sl(s,n,r,i,e[9],12,-1958414417),i=sl(i,s,n,r,e[10],17,-42063),r=sl(r,i,s,n,e[11],22,-1990404162),n=sl(n,r,i,s,e[12],7,1804603682),s=sl(s,n,r,i,e[13],12,-40341101),i=sl(i,s,n,r,e[14],17,-1502002290),n=ol(n,r=sl(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ol(s,n,r,i,e[6],9,-1069501632),i=ol(i,s,n,r,e[11],14,643717713),r=ol(r,i,s,n,e[0],20,-373897302),n=ol(n,r,i,s,e[5],5,-701558691),s=ol(s,n,r,i,e[10],9,38016083),i=ol(i,s,n,r,e[15],14,-660478335),r=ol(r,i,s,n,e[4],20,-405537848),n=ol(n,r,i,s,e[9],5,568446438),s=ol(s,n,r,i,e[14],9,-1019803690),i=ol(i,s,n,r,e[3],14,-187363961),r=ol(r,i,s,n,e[8],20,1163531501),n=ol(n,r,i,s,e[13],5,-1444681467),s=ol(s,n,r,i,e[2],9,-51403784),i=ol(i,s,n,r,e[7],14,1735328473),n=al(n,r=ol(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=al(s,n,r,i,e[8],11,-2022574463),i=al(i,s,n,r,e[11],16,1839030562),r=al(r,i,s,n,e[14],23,-35309556),n=al(n,r,i,s,e[1],4,-1530992060),s=al(s,n,r,i,e[4],11,1272893353),i=al(i,s,n,r,e[7],16,-155497632),r=al(r,i,s,n,e[10],23,-1094730640),n=al(n,r,i,s,e[13],4,681279174),s=al(s,n,r,i,e[0],11,-358537222),i=al(i,s,n,r,e[3],16,-722521979),r=al(r,i,s,n,e[6],23,76029189),n=al(n,r,i,s,e[9],4,-640364487),s=al(s,n,r,i,e[12],11,-421815835),i=al(i,s,n,r,e[15],16,530742520),n=ll(n,r=al(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ll(s,n,r,i,e[7],10,1126891415),i=ll(i,s,n,r,e[14],15,-1416354905),r=ll(r,i,s,n,e[5],21,-57434055),n=ll(n,r,i,s,e[12],6,1700485571),s=ll(s,n,r,i,e[3],10,-1894986606),i=ll(i,s,n,r,e[10],15,-1051523),r=ll(r,i,s,n,e[1],21,-2054922799),n=ll(n,r,i,s,e[8],6,1873313359),s=ll(s,n,r,i,e[15],10,-30611744),i=ll(i,s,n,r,e[6],15,-1560198380),r=ll(r,i,s,n,e[13],21,1309151649),n=ll(n,r,i,s,e[4],6,-145523070),s=ll(s,n,r,i,e[11],10,-1120210379),i=ll(i,s,n,r,e[2],15,718787259),r=ll(r,i,s,n,e[9],21,-343485551),t[0]=ud(n,t[0]),t[1]=ud(r,t[1]),t[2]=ud(i,t[2]),t[3]=ud(s,t[3])}function Uy(t,e,n,r,i,s){return e=ud(ud(e,t),ud(r,s)),ud(e<<i|e>>>32-i,n)}function sl(t,e,n,r,i,s,o){return Uy(e&n|~e&r,t,e,i,s,o)}function ol(t,e,n,r,i,s,o){return Uy(e&r|n&~r,t,e,i,s,o)}function al(t,e,n,r,i,s,o){return Uy(e^n^r,t,e,i,s,o)}function ll(t,e,n,r,i,s,o){return Uy(n^(e|~r),t,e,i,s,o)}function YE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)i2(r,fH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(i2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,i2(r,i),r}function fH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Hg=jr.atob.bind(jr),Eb=jr.btoa.bind(jr);var _5="0123456789abcdef".split("");function pH(t){for(var e="",n=0;n<4;n++)e+=_5[t>>8*n+4&15]+_5[t>>8*n&15];return e}function gH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Pb(t){return YE(t).map(gH).join("")}var mH=function(t){for(var e=0;e<t.length;e++)t[e]=pH(t[e]);return t.join("")}(YE("hello"))!="5d41402abc4b2a76b9719d911017c592";function ud(t,e){if(mH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Mb(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var p=e.length,v=0,g=0,x="";for(l=0;l<p;l++)g=(g+(d=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=d,o=a[(a[v]+a[g])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var w5={print:4,modify:8,copy:16,"annot-forms":32};function ip(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(w5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=w5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Pb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Mb(this.encryptionKey,this.padding)}function sp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function x5(t){if(cs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){jr.console&&bs.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function qv(t){if(!(this instanceof qv))return new qv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function KE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function nf(t,e,n,r,i){if(!(this instanceof nf))return new nf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,KE.call(this,r,i)}function lp(t,e,n,r,i){if(!(this instanceof lp))return new lp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,KE.call(this,r,i)}function Nr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;cs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=x5;var x="1.3",E=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(j){x=j};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var A=g.__private__.getPageFormat=function(j){return k[j]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},z=D.COMPAT;function X(){this.saveGraphicsState(),de(new nr(rt,0,0,-rt,0,Ka()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),c="n",z=D.ADVANCED}function re(){this.restoreGraphicsState(),c="S",z=D.COMPAT}var ge=g.__private__.combineFontStyleAndFontWeight=function(j,we){if(j=="bold"&&we=="normal"||j=="bold"&&we==400||j=="normal"&&we=="italic"||j=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(j=we==400||we==="normal"?j==="italic"?"italic":"normal":we!=700&&we!=="bold"||j!=="normal"?(we==700?"bold":we)+""+j:"bold"),j};g.advancedAPI=function(j){var we=z===D.COMPAT;return we&&X.call(this),typeof j!="function"||(j(this),we&&re.call(this)),this},g.compatAPI=function(j){var we=z===D.ADVANCED;return we&&re.call(this),typeof j!="function"||(j(this),we&&X.call(this)),this},g.isAdvancedAPI=function(){return z===D.ADVANCED};var fe,N=function(j){if(z!==D.ADVANCED)throw new Error(j+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=g.roundToPrecision=g.__private__.roundToPrecision=function(j,we){var Xe=e||we;if(isNaN(j)||isNaN(Xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return j.toFixed(Xe).replace(/0+$/,"")};fe=g.hpf=g.__private__.hpf=typeof l=="number"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return F(j,l)}:l==="smart"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return F(j,j>-1&&j<1?16:5)}:function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return F(j,16)};var Y=g.f2=g.__private__.f2=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f2");return F(j,2)},B=g.__private__.f3=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f3");return F(j,3)},I=g.scale=g.__private__.scale=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.scale");return z===D.COMPAT?j*rt:z===D.ADVANCED?j:void 0},R=function(j){return z===D.COMPAT?Ka()-j:z===D.ADVANCED?j:void 0},q=function(j){return I(R(j))};g.__private__.setPrecision=g.setPrecision=function(j){typeof parseInt(j,10)=="number"&&(e=parseInt(j,10))};var U,$="00000000000000000000000000000000",oe=g.__private__.getFileId=function(){return $},J=g.__private__.setFileId=function(j){return $=j!==void 0&&/^[a-fA-F0-9]{32}$/.test(j)?j.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(hs=new ip(d.userPermissions,d.userPassword,d.ownerPassword,$)),$};g.setFileId=function(j){return J(j),this},g.getFileId=function(){return oe()};var _e=g.__private__.convertDateToPDFDate=function(j){var we=j.getTimezoneOffset(),Xe=we<0?"+":"-",dt=Math.floor(Math.abs(we/60)),kt=Math.abs(we%60),Ut=[Xe,K(dt),"'",K(kt),"'"].join("");return["D:",j.getFullYear(),K(j.getMonth()+1),K(j.getDate()),K(j.getHours()),K(j.getMinutes()),K(j.getSeconds()),Ut].join("")},ve=g.__private__.convertPDFDateToDate=function(j){var we=parseInt(j.substr(2,4),10),Xe=parseInt(j.substr(6,2),10)-1,dt=parseInt(j.substr(8,2),10),kt=parseInt(j.substr(10,2),10),Ut=parseInt(j.substr(12,2),10),dn=parseInt(j.substr(14,2),10);return new Date(we,Xe,dt,kt,Ut,dn,0)},ke=g.__private__.setCreationDate=function(j){var we;if(j===void 0&&(j=new Date),j instanceof Date)we=_e(j);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(j))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=j}return U=we},W=g.__private__.getCreationDate=function(j){var we=U;return j==="jsDate"&&(we=ve(U)),we};g.setCreationDate=function(j){return ke(j),this},g.getCreationDate=function(j){return W(j)};var V,K=g.__private__.padd2=function(j){return("0"+parseInt(j)).slice(-2)},pe=g.__private__.padd2Hex=function(j){return("00"+(j=j.toString())).substr(j.length)},he=0,te=[],le=[],Q=0,Be=[],De=[],Je=!1,me=le,ee=function(){he=0,Q=0,le=[],te=[],Be=[],En=ct(),jt=ct()};g.__private__.setCustomOutputDestination=function(j){Je=!0,me=j};var se=function(j){Je||(me=j)};g.__private__.resetCustomOutputDestination=function(){Je=!1,me=le};var de=g.__private__.out=function(j){return j=j.toString(),Q+=j.length+1,me.push(j),me},ze=g.__private__.write=function(j){return de(arguments.length===1?j.toString():Array.prototype.join.call(arguments," "))},$e=g.__private__.getArrayBuffer=function(j){for(var we=j.length,Xe=new ArrayBuffer(we),dt=new Uint8Array(Xe);we--;)dt[we]=j.charCodeAt(we);return Xe},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return et};var Ge=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(j){return Ge=z===D.ADVANCED?j/rt:j,this};var Qe,Ke=g.__private__.getFontSize=g.getFontSize=function(){return z===D.COMPAT?Ge:Ge*rt},xt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(j){return xt=j,this},g.__private__.getR2L=g.getR2L=function(){return xt};var bt,yt=g.__private__.setZoomMode=function(j){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(j))Qe=j;else if(isNaN(j)){if(we.indexOf(j)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+j+'" is not recognized.');Qe=j}else Qe=parseInt(j,10)};g.__private__.getZoomMode=function(){return Qe};var Wt,tn=g.__private__.setPageMode=function(j){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(j)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+j+'" is not recognized.');bt=j};g.__private__.getPageMode=function(){return bt};var yn=g.__private__.setLayoutMode=function(j){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(j)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+j+'" is not recognized.');Wt=j};g.__private__.getLayoutMode=function(){return Wt},g.__private__.setDisplayMode=g.setDisplayMode=function(j,we,Xe){return yt(j),yn(we),tn(Xe),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(j){if(Object.keys(Ze).indexOf(j)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[j]},g.__private__.getDocumentProperties=function(){return Ze},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(j){for(var we in Ze)Ze.hasOwnProperty(we)&&j[we]&&(Ze[we]=j[we]);return this},g.__private__.setDocumentProperty=function(j,we){if(Object.keys(Ze).indexOf(j)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[j]=we};var ot,rt,$t,Zt,Dn,mn={},An={},Jn=[],Qt={},xn={},Cn={},tr={},vr=null,xr=0,ur=[],Gr=new x5(g),Fs=t.hotfixes||[],Ti={},Oo={},Ts=[],nr=function j(we,Xe,dt,kt,Ut,dn){if(!(this instanceof j))return new j(we,Xe,dt,kt,Ut,dn);isNaN(we)&&(we=1),isNaN(Xe)&&(Xe=0),isNaN(dt)&&(dt=0),isNaN(kt)&&(kt=1),isNaN(Ut)&&(Ut=0),isNaN(dn)&&(dn=0),this._matrix=[we,Xe,dt,kt,Ut,dn]};Object.defineProperty(nr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(nr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(nr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(nr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(nr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(nr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(nr.prototype,"a",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(nr.prototype,"b",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(nr.prototype,"c",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(nr.prototype,"d",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(nr.prototype,"e",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(nr.prototype,"f",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(nr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nr.prototype.join=function(j){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(j)},nr.prototype.multiply=function(j){var we=j.sx*this.sx+j.shy*this.shx,Xe=j.sx*this.shy+j.shy*this.sy,dt=j.shx*this.sx+j.sy*this.shx,kt=j.shx*this.shy+j.sy*this.sy,Ut=j.tx*this.sx+j.ty*this.shx+this.tx,dn=j.tx*this.shy+j.ty*this.sy+this.ty;return new nr(we,Xe,dt,kt,Ut,dn)},nr.prototype.decompose=function(){var j=this.sx,we=this.shy,Xe=this.shx,dt=this.sy,kt=this.tx,Ut=this.ty,dn=Math.sqrt(j*j+we*we),Rn=(j/=dn)*Xe+(we/=dn)*dt;Xe-=j*Rn,dt-=we*Rn;var Hn=Math.sqrt(Xe*Xe+dt*dt);return Rn/=Hn,j*(dt/=Hn)<we*(Xe/=Hn)&&(j=-j,we=-we,Rn=-Rn,dn=-dn),{scale:new nr(dn,0,0,Hn,0,0),translate:new nr(1,0,0,1,kt,Ut),rotate:new nr(j,we,-we,j,0,0),skew:new nr(1,0,Rn,1,0,0)}},nr.prototype.toString=function(j){return this.join(" ")},nr.prototype.inversed=function(){var j=this.sx,we=this.shy,Xe=this.shx,dt=this.sy,kt=this.tx,Ut=this.ty,dn=1/(j*dt-we*Xe),Rn=dt*dn,Hn=-we*dn,fr=-Xe*dn,Er=j*dn;return new nr(Rn,Hn,fr,Er,-Rn*kt-fr*Ut,-Hn*kt-Er*Ut)},nr.prototype.applyToPoint=function(j){var we=j.x*this.sx+j.y*this.shx+this.tx,Xe=j.x*this.shy+j.y*this.sy+this.ty;return new zs(we,Xe)},nr.prototype.applyToRectangle=function(j){var we=this.applyToPoint(j),Xe=this.applyToPoint(new zs(j.x+j.w,j.y+j.h));return new va(we.x,we.y,Xe.x-we.x,Xe.y-we.y)},nr.prototype.clone=function(){var j=this.sx,we=this.shy,Xe=this.shx,dt=this.sy,kt=this.tx,Ut=this.ty;return new nr(j,we,Xe,dt,kt,Ut)},g.Matrix=nr;var Ds=g.matrixMult=function(j,we){return we.multiply(j)},No=new nr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=No;var at=function(j,we){if(!xn[j]){var Xe=(we instanceof nf?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);we.id=Xe,xn[j]=Xe,Qt[Xe]=we,Gr.publish("addPattern",we)}};g.ShadingPattern=nf,g.TilingPattern=lp,g.addShadingPattern=function(j,we){return N("addShadingPattern()"),at(j,we),this},g.beginTilingPattern=function(j){N("beginTilingPattern()"),ya(j.boundingBox[0],j.boundingBox[1],j.boundingBox[2]-j.boundingBox[0],j.boundingBox[3]-j.boundingBox[1],j.matrix)},g.endTilingPattern=function(j,we){N("endTilingPattern()"),we.stream=De[V].join(`
`),at(j,we),Gr.publish("endTilingPattern",we),Ts.pop().restore()};var Ie=g.__private__.newObject=function(){var j=ct();return Ln(j,!0),j},ct=g.__private__.newObjectDeferred=function(){return he++,te[he]=function(){return Q},he},Ln=function(j,we){return we=typeof we=="boolean"&&we,te[j]=Q,we&&de(j+" 0 obj"),j},$n=g.__private__.newAdditionalObject=function(){var j={objId:ct(),content:""};return Be.push(j),j},En=ct(),jt=ct(),Un=g.__private__.decodeColorString=function(j){var we=j.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var Xe=parseFloat(we[0]);we=[Xe,Xe,Xe,"r"]}for(var dt="#",kt=0;kt<3;kt++)dt+=("0"+Math.floor(255*parseFloat(we[kt])).toString(16)).slice(-2);return dt},St=g.__private__.encodeColorString=function(j){var we;typeof j=="string"&&(j={ch1:j});var Xe=j.ch1,dt=j.ch2,kt=j.ch3,Ut=j.ch4,dn=j.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Xe=="string"&&Xe.charAt(0)!=="#"){var Rn=new qE(Xe);if(Rn.ok)Xe=Rn.toHex();else if(!/^\d*\.?\d*$/.test(Xe))throw new Error('Invalid color "'+Xe+'" passed to jsPDF.encodeColorString.')}if(typeof Xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Xe)&&(Xe="#"+Xe[1]+Xe[1]+Xe[2]+Xe[2]+Xe[3]+Xe[3]),typeof Xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Xe)){var Hn=parseInt(Xe.substr(1),16);Xe=Hn>>16&255,dt=Hn>>8&255,kt=255&Hn}if(dt===void 0||Ut===void 0&&Xe===dt&&dt===kt)if(typeof Xe=="string")we=Xe+" "+dn[0];else switch(j.precision){case 2:we=Y(Xe/255)+" "+dn[0];break;case 3:default:we=B(Xe/255)+" "+dn[0]}else if(Ut===void 0||cs(Ut)==="object"){if(Ut&&!isNaN(Ut.a)&&Ut.a===0)return we=["1.","1.","1.",dn[1]].join(" ");if(typeof Xe=="string")we=[Xe,dt,kt,dn[1]].join(" ");else switch(j.precision){case 2:we=[Y(Xe/255),Y(dt/255),Y(kt/255),dn[1]].join(" ");break;default:case 3:we=[B(Xe/255),B(dt/255),B(kt/255),dn[1]].join(" ")}}else if(typeof Xe=="string")we=[Xe,dt,kt,Ut,dn[2]].join(" ");else switch(j.precision){case 2:we=[Y(Xe),Y(dt),Y(kt),Y(Ut),dn[2]].join(" ");break;case 3:default:we=[B(Xe),B(dt),B(kt),B(Ut),dn[2]].join(" ")}return we},qt=g.__private__.getFilters=function(){return o},Vn=g.__private__.putStream=function(j){var we=(j=j||{}).data||"",Xe=j.filters||qt(),dt=j.alreadyAppliedFilters||[],kt=j.addLength1||!1,Ut=we.length,dn=j.objectId,Rn=function(ms){return ms};if(d!==null&&dn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Rn=hs.encryptor(dn,0));var Hn={};Xe===!0&&(Xe=["FlateEncode"]);var fr=j.additionalKeyValues||[],Er=(Hn=Nr.API.processDataByFilters!==void 0?Nr.API.processDataByFilters(we,Xe):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(dt)?dt.join(" "):dt.toString());if(Hn.data.length!==0&&(fr.push({key:"Length",value:Hn.data.length}),kt===!0&&fr.push({key:"Length1",value:Ut})),Er.length!=0)if(Er.split("/").length-1==1)fr.push({key:"Filter",value:Er});else{fr.push({key:"Filter",value:"["+Er+"]"});for(var Vr=0;Vr<fr.length;Vr+=1)if(fr[Vr].key==="DecodeParms"){for(var qi=[],pi=0;pi<Hn.reverseChain.split("/").length-1;pi+=1)qi.push("null");qi.push(fr[Vr].value),fr[Vr].value="["+qi.join(" ")+"]"}}de("<<");for(var Ei=0;Ei<fr.length;Ei++)de("/"+fr[Ei].key+" "+fr[Ei].value);de(">>"),Hn.data.length!==0&&(de("stream"),de(Rn(Hn.data)),de("endstream"))},hr=g.__private__.putPage=function(j){var we=j.number,Xe=j.data,dt=j.objId,kt=j.contentsObjId;Ln(dt,!0),de("<</Type /Page"),de("/Parent "+j.rootDictionaryObjId+" 0 R"),de("/Resources "+j.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(fe(j.mediaBox.bottomLeftX))+" "+parseFloat(fe(j.mediaBox.bottomLeftY))+" "+fe(j.mediaBox.topRightX)+" "+fe(j.mediaBox.topRightY)+"]"),j.cropBox!==null&&de("/CropBox ["+fe(j.cropBox.bottomLeftX)+" "+fe(j.cropBox.bottomLeftY)+" "+fe(j.cropBox.topRightX)+" "+fe(j.cropBox.topRightY)+"]"),j.bleedBox!==null&&de("/BleedBox ["+fe(j.bleedBox.bottomLeftX)+" "+fe(j.bleedBox.bottomLeftY)+" "+fe(j.bleedBox.topRightX)+" "+fe(j.bleedBox.topRightY)+"]"),j.trimBox!==null&&de("/TrimBox ["+fe(j.trimBox.bottomLeftX)+" "+fe(j.trimBox.bottomLeftY)+" "+fe(j.trimBox.topRightX)+" "+fe(j.trimBox.topRightY)+"]"),j.artBox!==null&&de("/ArtBox ["+fe(j.artBox.bottomLeftX)+" "+fe(j.artBox.bottomLeftY)+" "+fe(j.artBox.topRightX)+" "+fe(j.artBox.topRightY)+"]"),typeof j.userUnit=="number"&&j.userUnit!==1&&de("/UserUnit "+j.userUnit),Gr.publish("putPage",{objId:dt,pageContext:ur[we],pageNumber:we,page:Xe}),de("/Contents "+kt+" 0 R"),de(">>"),de("endobj");var Ut=Xe.join(`
`);return z===D.ADVANCED&&(Ut+=`
Q`),Ln(kt,!0),Vn({data:Ut,filters:qt(),objectId:kt}),de("endobj"),dt},Lr=g.__private__.putPages=function(){var j,we,Xe=[];for(j=1;j<=xr;j++)ur[j].objId=ct(),ur[j].contentsObjId=ct();for(j=1;j<=xr;j++)Xe.push(hr({number:j,data:De[j],objId:ur[j].objId,contentsObjId:ur[j].contentsObjId,mediaBox:ur[j].mediaBox,cropBox:ur[j].cropBox,bleedBox:ur[j].bleedBox,trimBox:ur[j].trimBox,artBox:ur[j].artBox,userUnit:ur[j].userUnit,rootDictionaryObjId:En,resourceDictionaryObjId:jt}));Ln(En,!0),de("<</Type /Pages");var dt="/Kids [";for(we=0;we<xr;we++)dt+=Xe[we]+" 0 R ";de(dt+"]"),de("/Count "+xr),de(">>"),de("endobj"),Gr.publish("postPutPages")},pn=function(j){Gr.publish("putFont",{font:j,out:de,newObject:Ie,putStream:Vn}),j.isAlreadyPutted!==!0&&(j.objectNumber=Ie(),de("<<"),de("/Type /Font"),de("/BaseFont /"+sp(j.postScriptName)),de("/Subtype /Type1"),typeof j.encoding=="string"&&de("/Encoding /"+j.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},rn=function(){for(var j in mn)mn.hasOwnProperty(j)&&(p===!1||p===!0&&v.hasOwnProperty(j))&&pn(mn[j])},zr=function(j){j.objectNumber=Ie();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[fe(j.x),fe(j.y),fe(j.x+j.width),fe(j.y+j.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+j.matrix.toString()+"]"});var Xe=j.pages[1].join(`
`);Vn({data:Xe,additionalKeyValues:we,objectId:j.objectNumber}),de("endobj")},Br=function(){for(var j in Ti)Ti.hasOwnProperty(j)&&zr(Ti[j])},zi=function(j,we){var Xe,dt=[],kt=1/(we-1);for(Xe=0;Xe<1;Xe+=kt)dt.push(Xe);if(dt.push(1),j[0].offset!=0){var Ut={offset:0,color:j[0].color};j.unshift(Ut)}if(j[j.length-1].offset!=1){var dn={offset:1,color:j[j.length-1].color};j.push(dn)}for(var Rn="",Hn=0,fr=0;fr<dt.length;fr++){for(Xe=dt[fr];Xe>j[Hn+1].offset;)Hn++;var Er=j[Hn].offset,Vr=(Xe-Er)/(j[Hn+1].offset-Er),qi=j[Hn].color,pi=j[Hn+1].color;Rn+=pe(Math.round((1-Vr)*qi[0]+Vr*pi[0]).toString(16))+pe(Math.round((1-Vr)*qi[1]+Vr*pi[1]).toString(16))+pe(Math.round((1-Vr)*qi[2]+Vr*pi[2]).toString(16))}return Rn.trim()},Xr=function(j,we){we||(we=21);var Xe=Ie(),dt=zi(j.colors,we),kt=[];kt.push({key:"FunctionType",value:"0"}),kt.push({key:"Domain",value:"[0.0 1.0]"}),kt.push({key:"Size",value:"["+we+"]"}),kt.push({key:"BitsPerSample",value:"8"}),kt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vn({data:dt,additionalKeyValues:kt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Xe}),de("endobj"),j.objectNumber=Ie(),de("<< /ShadingType "+j.type),de("/ColorSpace /DeviceRGB");var Ut="/Coords ["+fe(parseFloat(j.coords[0]))+" "+fe(parseFloat(j.coords[1]))+" ";j.type===2?Ut+=fe(parseFloat(j.coords[2]))+" "+fe(parseFloat(j.coords[3])):Ut+=fe(parseFloat(j.coords[2]))+" "+fe(parseFloat(j.coords[3]))+" "+fe(parseFloat(j.coords[4]))+" "+fe(parseFloat(j.coords[5])),de(Ut+="]"),j.matrix&&de("/Matrix ["+j.matrix.toString()+"]"),de("/Function "+Xe+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},_r=function(j,we){var Xe=ct(),dt=Ie();we.push({resourcesOid:Xe,objectOid:dt}),j.objectNumber=dt;var kt=[];kt.push({key:"Type",value:"/Pattern"}),kt.push({key:"PatternType",value:"1"}),kt.push({key:"PaintType",value:"1"}),kt.push({key:"TilingType",value:"1"}),kt.push({key:"BBox",value:"["+j.boundingBox.map(fe).join(" ")+"]"}),kt.push({key:"XStep",value:fe(j.xStep)}),kt.push({key:"YStep",value:fe(j.yStep)}),kt.push({key:"Resources",value:Xe+" 0 R"}),j.matrix&&kt.push({key:"Matrix",value:"["+j.matrix.toString()+"]"}),Vn({data:j.stream,additionalKeyValues:kt,objectId:j.objectNumber}),de("endobj")},Ar=function(j){var we;for(we in Qt)Qt.hasOwnProperty(we)&&(Qt[we]instanceof nf?Xr(Qt[we]):Qt[we]instanceof lp&&_r(Qt[we],j))},hi=function(j){for(var we in j.objectNumber=Ie(),de("<<"),j)switch(we){case"opacity":de("/ca "+Y(j[we]));break;case"stroke-opacity":de("/CA "+Y(j[we]))}de(">>"),de("endobj")},Rr=function(){var j;for(j in Cn)Cn.hasOwnProperty(j)&&hi(Cn[j])},an=function(){for(var j in de("/XObject <<"),Ti)Ti.hasOwnProperty(j)&&Ti[j].objectNumber>=0&&de("/"+j+" "+Ti[j].objectNumber+" 0 R");Gr.publish("putXobjectDict"),de(">>")},Ni=function(){hs.oid=Ie(),de("<<"),de("/Filter /Standard"),de("/V "+hs.v),de("/R "+hs.r),de("/U <"+hs.toHexString(hs.U)+">"),de("/O <"+hs.toHexString(hs.O)+">"),de("/P "+hs.P),de(">>"),de("endobj")},vi=function(){for(var j in de("/Font <<"),mn)mn.hasOwnProperty(j)&&(p===!1||p===!0&&v.hasOwnProperty(j))&&de("/"+j+" "+mn[j].objectNumber+" 0 R");de(">>")},Ki=function(){if(Object.keys(Qt).length>0){for(var j in de("/Shading <<"),Qt)Qt.hasOwnProperty(j)&&Qt[j]instanceof nf&&Qt[j].objectNumber>=0&&de("/"+j+" "+Qt[j].objectNumber+" 0 R");Gr.publish("putShadingPatternDict"),de(">>")}},Jr=function(j){if(Object.keys(Qt).length>0){for(var we in de("/Pattern <<"),Qt)Qt.hasOwnProperty(we)&&Qt[we]instanceof g.TilingPattern&&Qt[we].objectNumber>=0&&Qt[we].objectNumber<j&&de("/"+we+" "+Qt[we].objectNumber+" 0 R");Gr.publish("putTilingPatternDict"),de(">>")}},dr=function(){if(Object.keys(Cn).length>0){var j;for(j in de("/ExtGState <<"),Cn)Cn.hasOwnProperty(j)&&Cn[j].objectNumber>=0&&de("/"+j+" "+Cn[j].objectNumber+" 0 R");Gr.publish("putGStateDict"),de(">>")}},Tn=function(j){Ln(j.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),vi(),Ki(),Jr(j.objectOid),dr(),an(),de(">>"),de("endobj")},Sr=function(){var j=[];rn(),Rr(),Br(),Ar(j),Gr.publish("putResources"),j.forEach(Tn),Tn({resourcesOid:jt,objectOid:Number.MAX_SAFE_INTEGER}),Gr.publish("postPutResources")},ws=function(){Gr.publish("putAdditionalObjects");for(var j=0;j<Be.length;j++){var we=Be[j];Ln(we.objId,!0),de(we.content),de("endobj")}Gr.publish("postPutAdditionalObjects")},mo=function(j){An[j.fontName]=An[j.fontName]||{},An[j.fontName][j.fontStyle]=j.id},cr=function(j,we,Xe,dt,kt){var Ut={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:j,fontName:we,fontStyle:Xe,encoding:dt,isStandardFont:kt||!1,metadata:{}};return Gr.publish("addFont",{font:Ut,instance:this}),mn[Ut.id]=Ut,mo(Ut),Ut.id},Sn=function(j){for(var we=0,Xe=et.length;we<Xe;we++){var dt=cr.call(this,j[we][0],j[we][1],j[we][2],et[we][3],!0);p===!1&&(v[dt]=!0);var kt=j[we][0].split("-");mo({id:dt,fontName:kt[0],fontStyle:kt[1]||""})}Gr.publish("addFonts",{fonts:mn,dictionary:An})},sn=function(j){return j.foo=function(){try{return j.apply(this,arguments)}catch(dt){var we=dt.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var Xe="Error in function "+we.split(`
`)[0].split("<")[0]+": "+dt.message;if(!jr.console)throw new Error(Xe);jr.console.error(Xe,dt),jr.alert&&alert(Xe)}},j.foo.bar=j,j.foo},yi=function(j,we){var Xe,dt,kt,Ut,dn,Rn,Hn,fr,Er;if(kt=(we=we||{}).sourceEncoding||"Unicode",dn=we.outputEncoding,(we.autoencode||dn)&&mn[ot].metadata&&mn[ot].metadata[kt]&&mn[ot].metadata[kt].encoding&&(Ut=mn[ot].metadata[kt].encoding,!dn&&mn[ot].encoding&&(dn=mn[ot].encoding),!dn&&Ut.codePages&&(dn=Ut.codePages[0]),typeof dn=="string"&&(dn=Ut[dn]),dn)){for(Hn=!1,Rn=[],Xe=0,dt=j.length;Xe<dt;Xe++)(fr=dn[j.charCodeAt(Xe)])?Rn.push(String.fromCharCode(fr)):Rn.push(j[Xe]),Rn[Xe].charCodeAt(0)>>8&&(Hn=!0);j=Rn.join("")}for(Xe=j.length;Hn===void 0&&Xe!==0;)j.charCodeAt(Xe-1)>>8&&(Hn=!0),Xe--;if(!Hn)return j;for(Rn=we.noBOM?[]:[254,255],Xe=0,dt=j.length;Xe<dt;Xe++){if((Er=(fr=j.charCodeAt(Xe))>>8)>>8)throw new Error("Character at position "+Xe+" of string '"+j+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rn.push(Er),Rn.push(fr-(Er<<8))}return String.fromCharCode.apply(void 0,Rn)},Qr=g.__private__.pdfEscape=g.pdfEscape=function(j,we){return yi(j,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bi=g.__private__.beginPage=function(j){De[++xr]=[],ur[xr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(j[0]),topRightY:Number(j[1])}},js(xr),se(De[V])},Xs=function(j,we){var Xe,dt,kt;switch(n=we||n,typeof j=="string"&&(Xe=A(j.toLowerCase()),Array.isArray(Xe)&&(dt=Xe[0],kt=Xe[1])),Array.isArray(j)&&(dt=j[0]*rt,kt=j[1]*rt),isNaN(dt)&&(dt=i[0],kt=i[1]),(dt>14400||kt>14400)&&(bs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dt=Math.min(14400,dt),kt=Math.min(14400,kt)),i=[dt,kt],n.substr(0,1)){case"l":kt>dt&&(i=[kt,dt]);break;case"p":dt>kt&&(i=[kt,dt])}bi(i),au(Mu),de(Zi),cu!==0&&de(cu+" J"),Si!==0&&de(Si+" j"),Gr.publish("addPage",{pageNumber:xr})},vo=function(j){j>0&&j<=xr&&(De.splice(j,1),ur.splice(j,1),xr--,V>xr&&(V=xr),this.setPage(V))},js=function(j){j>0&&j<=xr&&(V=j)},yr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},Js=function(j,we,Xe){var dt,kt=void 0;return Xe=Xe||{},j=j!==void 0?j:mn[ot].fontName,we=we!==void 0?we:mn[ot].fontStyle,dt=j.toLowerCase(),An[dt]!==void 0&&An[dt][we]!==void 0?kt=An[dt][we]:An[j]!==void 0&&An[j][we]!==void 0?kt=An[j][we]:Xe.disableWarning===!1&&bs.warn("Unable to look up font label for font '"+j+"', '"+we+"'. Refer to getFontList() for available fonts."),kt||Xe.noFallback||(kt=An.times[we])==null&&(kt=An.times.normal),kt},Vi=g.__private__.putInfo=function(){var j=Ie(),we=function(dt){return dt};for(var Xe in d!==null&&(we=hs.encryptor(j,0)),de("<<"),de("/Producer ("+Qr(we("jsPDF "+Nr.version))+")"),Ze)Ze.hasOwnProperty(Xe)&&Ze[Xe]&&de("/"+Xe.substr(0,1).toUpperCase()+Xe.substr(1)+" ("+Qr(we(Ze[Xe]))+")");de("/CreationDate ("+Qr(we(U))+")"),de(">>"),de("endobj")},Gi=g.__private__.putCatalog=function(j){var we=(j=j||{}).rootDictionaryObjId||En;switch(Ie(),de("<<"),de("/Type /Catalog"),de("/Pages "+we+" 0 R"),Qe||(Qe="fullwidth"),Qe){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Xe=""+Qe;Xe.substr(Xe.length-1)==="%"&&(Qe=parseInt(Qe)/100),typeof Qe=="number"&&de("/OpenAction [3 0 R /XYZ null null "+Y(Qe)+"]")}switch(Wt||(Wt="continuous"),Wt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}bt&&de("/PageMode /"+bt),Gr.publish("putCatalog"),de(">>"),de("endobj")},di=g.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(he+1)),de("/Root "+he+" 0 R"),de("/Info "+(he-1)+" 0 R"),d!==null&&de("/Encrypt "+hs.oid+" 0 R"),de("/ID [ <"+$+"> <"+$+"> ]"),de(">>")},Mn=g.__private__.putHeader=function(){de("%PDF-"+x),de("%ºß¬à")},vn=g.__private__.putXRef=function(){var j="0000000000";de("xref"),de("0 "+(he+1)),de("0000000000 65535 f ");for(var we=1;we<=he;we++)typeof te[we]=="function"?de((j+te[we]()).slice(-10)+" 00000 n "):te[we]!==void 0?de((j+te[we]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},qr=g.__private__.buildDocument=function(){ee(),se(le),Gr.publish("buildDocument"),Mn(),Lr(),ws(),Sr(),d!==null&&Ni(),Vi(),Gi();var j=Q;return vn(),di(),de("startxref"),de(""+j),de("%%EOF"),se(De[V]),le.join(`
`)},xs=g.__private__.getBlob=function(j){return new Blob([$e(j)],{type:"application/pdf"})},Qs=g.output=g.__private__.output=sn(function(j,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",j){case void 0:return qr();case"save":g.save(we.filename);break;case"arraybuffer":return $e(qr());case"blob":return xs(qr());case"bloburi":case"bloburl":if(jr.URL!==void 0&&typeof jr.URL.createObjectURL=="function")return jr.URL&&jr.URL.createObjectURL(xs(qr()))||void 0;bs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Xe="",dt=qr();try{Xe=Eb(dt)}catch{Xe=Eb(unescape(encodeURIComponent(dt)))}return"data:application/pdf;filename="+we.filename+";base64,"+Xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var kt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(kt=we.pdfObjectUrl,Ut="");var dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+kt+'"'+Ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Rn=jr.open();return Rn!==null&&Rn.document.write(dn),Rn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var Hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',fr=jr.open();if(fr!==null){fr.document.write(Hn);var Er=this;fr.document.documentElement.querySelector("#pdfViewer").onload=function(){fr.document.title=we.filename,fr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Er.output("bloburl"))}}return fr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',qi=jr.open();if(qi!==null&&(qi.document.write(Vr),qi.document.title=we.filename),qi||typeof safari>"u")return qi;break;case"datauri":case"dataurl":return jr.document.location.href=this.output("datauristring",we);default:return null}}),qa=function(j){return Array.isArray(Fs)===!0&&Fs.indexOf(j)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=qa("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var hs=null;ke(),J();var Ma=function(j){return d!==null?hs.encryptor(j,0):function(we){return we}},bl=g.__private__.getPageInfo=g.getPageInfo=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ur[j].objId,pageNumber:j,pageContext:ur[j]}},zn=g.__private__.getPageInfoByObjId=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in ur)if(ur[we].objId===j)break;return bl(we)},Cr=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ur[V].objId,pageNumber:V,pageContext:ur[V]}};g.addPage=function(){return Xs.apply(this,arguments),this},g.setPage=function(){return js.apply(this,arguments),se.call(this,De[V]),this},g.insertPage=function(j){return this.addPage(),this.movePage(V,j),this},g.movePage=function(j,we){var Xe,dt;if(j>we){Xe=De[j],dt=ur[j];for(var kt=j;kt>we;kt--)De[kt]=De[kt-1],ur[kt]=ur[kt-1];De[we]=Xe,ur[we]=dt,this.setPage(we)}else if(j<we){Xe=De[j],dt=ur[j];for(var Ut=j;Ut<we;Ut++)De[Ut]=De[Ut+1],ur[Ut]=ur[Ut+1];De[we]=Xe,ur[we]=dt,this.setPage(we)}return this},g.deletePage=function(){return vo.apply(this,arguments),this},g.__private__.text=g.text=function(j,we,Xe,dt,kt){var Ut,dn,Rn,Hn,fr,Er,Vr,qi,pi,Ei=(dt=dt||{}).scope||this;if(typeof j=="number"&&typeof we=="number"&&(typeof Xe=="string"||Array.isArray(Xe))){var ms=Xe;Xe=we,we=j,j=ms}if(arguments[3]instanceof nr?(N("The transform parameter of text() with a Matrix value"),pi=kt):(Rn=arguments[4],Hn=arguments[5],cs(Vr=arguments[3])==="object"&&Vr!==null||(typeof Rn=="string"&&(Hn=Rn,Rn=null),typeof Vr=="string"&&(Hn=Vr,Vr=null),typeof Vr=="number"&&(Rn=Vr,Vr=null),dt={flags:Vr,angle:Rn,align:Hn})),isNaN(we)||isNaN(Xe)||j==null)throw new Error("Invalid arguments passed to jsPDF.text");if(j.length===0)return Ei;var Ls="",Qo=!1,Ur=typeof dt.lineHeightFactor=="number"?dt.lineHeightFactor:ou,to=Ei.internal.scaleFactor;function jl(Mi){return Mi=Mi.split("	").join(Array(dt.TabLen||9).join(" ")),Qr(Mi,Vr)}function bo(Mi){for(var Ii,vs=Mi.concat(),Ui=[],na=vs.length;na--;)typeof(Ii=vs.shift())=="string"?Ui.push(Ii):Array.isArray(Mi)&&(Ii.length===1||Ii[1]===void 0&&Ii[2]===void 0)?Ui.push(Ii[0]):Ui.push([Ii[0],Ii[1],Ii[2]]);return Ui}function Tu(Mi,Ii){var vs;if(typeof Mi=="string")vs=Ii(Mi)[0];else if(Array.isArray(Mi)){for(var Ui,na,Bo=Mi.concat(),aa=[],Qu=Bo.length;Qu--;)typeof(Ui=Bo.shift())=="string"?aa.push(Ii(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(na=Ii(Ui[0],Ui[1],Ui[2]),aa.push([na[0],na[1],na[2]]));vs=aa}return vs}var Oa=!1,Ju=!0;if(typeof j=="string")Oa=!0;else if(Array.isArray(j)){var wl=j.concat();dn=[];for(var xl,Ss=wl.length;Ss--;)(typeof(xl=wl.shift())!="string"||Array.isArray(xl)&&typeof xl[0]!="string")&&(Ju=!1);Oa=Ju}if(Oa===!1)throw new Error('Type of text must be string or Array. "'+j+'" is not recognized.');typeof j=="string"&&(j=j.match(/[\r?\n]/)?j.split(/\r\n|\r|\n/g):[j]);var Na=Ge/Ei.internal.scaleFactor,ea=Na*(Ur-1);switch(dt.baseline){case"bottom":Xe-=ea;break;case"top":Xe+=Na-ea;break;case"hanging":Xe+=Na-2*ea;break;case"middle":Xe+=Na/2-ea}if((Er=dt.maxWidth||0)>0&&(typeof j=="string"?j=Ei.splitTextToSize(j,Er):Object.prototype.toString.call(j)==="[object Array]"&&(j=j.reduce(function(Mi,Ii){return Mi.concat(Ei.splitTextToSize(Ii,Er))},[]))),Ut={text:j,x:we,y:Xe,options:dt,mutex:{pdfEscape:Qr,activeFontKey:ot,fonts:mn,activeFontSize:Ge}},Gr.publish("preProcessText",Ut),j=Ut.text,Rn=(dt=Ut.options).angle,!(pi instanceof nr)&&Rn&&typeof Rn=="number"){Rn*=Math.PI/180,dt.rotationDirection===0&&(Rn=-Rn),z===D.ADVANCED&&(Rn=-Rn);var Io=Math.cos(Rn),zl=Math.sin(Rn);pi=new nr(Io,zl,-zl,Io,0,0)}else Rn&&Rn instanceof nr&&(pi=Rn);z!==D.ADVANCED||pi||(pi=No),(fr=dt.charSpace||uu)!==void 0&&(Ls+=fe(I(fr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qi=dt.horizontalScale)!==void 0&&(Ls+=fe(100*qi)+` Tz
`),dt.lang;var no=-1,_o=dt.renderingMode!==void 0?dt.renderingMode:dt.stroke,wo=Ei.internal.getCurrentPageInfo().pageContext;switch(_o){case 0:case!1:case"fill":no=0;break;case 1:case!0:case"stroke":no=1;break;case 2:case"fillThenStroke":no=2;break;case 3:case"invisible":no=3;break;case 4:case"fillAndAddForClipping":no=4;break;case 5:case"strokeAndAddPathForClipping":no=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":no=6;break;case 7:case"addToPathForClipping":no=7}var kc=wo.usedRenderingMode!==void 0?wo.usedRenderingMode:-1;no!==-1?Ls+=no+` Tr
`:kc!==-1&&(Ls+=`0 Tr
`),no!==-1&&(wo.usedRenderingMode=no),Hn=dt.align||"left";var Os,Za=Ge*Ur,ro=Ei.internal.pageSize.getWidth(),io=mn[ot];fr=dt.charSpace||uu,Er=dt.maxWidth||0,Vr=Object.assign({autoencode:!0,noBOM:!0},dt.flags);var Xa=[],Ja=function(Mi){return Ei.getStringUnitWidth(Mi,{font:io,charSpace:fr,fontSize:Ge,doKerning:!1})*Ge/to};if(Object.prototype.toString.call(j)==="[object Array]"){var so;dn=bo(j),Hn!=="left"&&(Os=dn.map(Ja));var $s,Ia=0;if(Hn==="right"){we-=Os[0],j=[],Ss=dn.length;for(var ta=0;ta<Ss;ta++)ta===0?($s=gr(we),so=ps(Xe)):($s=I(Ia-Os[ta]),so=-Za),j.push([dn[ta],$s,so]),Ia=Os[ta]}else if(Hn==="center"){we-=Os[0]/2,j=[],Ss=dn.length;for(var oo=0;oo<Ss;oo++)oo===0?($s=gr(we),so=ps(Xe)):($s=I((Ia-Os[oo])/2),so=-Za),j.push([dn[oo],$s,so]),Ia=Os[oo]}else if(Hn==="left"){j=[],Ss=dn.length;for(var Lt=0;Lt<Ss;Lt++)j.push(dn[Lt])}else if(Hn==="justify"&&io.encoding==="Identity-H"){j=[],Ss=dn.length,Er=Er!==0?Er:ro;for(var Yt=0,Nt=0;Nt<Ss;Nt++)if(so=Nt===0?ps(Xe):-Za,$s=Nt===0?gr(we):Yt,Nt<Ss-1){var In=I((Er-Os[Nt])/(dn[Nt].split(" ").length-1)),rr=dn[Nt].split(" ");j.push([rr[0]+" ",$s,so]),Yt=0;for(var Mr=1;Mr<rr.length;Mr++){var Xi=(Ja(rr[Mr-1]+" "+rr[Mr])-Ja(rr[Mr]))*to+In;Mr==rr.length-1?j.push([rr[Mr],Xi,0]):j.push([rr[Mr]+" ",Xi,0]),Yt-=Xi}}else j.push([dn[Nt],$s,so]);j.push(["",Yt,0])}else{if(Hn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(j=[],Ss=dn.length,Er=Er!==0?Er:ro,Nt=0;Nt<Ss;Nt++)so=Nt===0?ps(Xe):-Za,$s=Nt===0?gr(we):0,Nt<Ss-1?Xa.push(fe(I((Er-Os[Nt])/(dn[Nt].split(" ").length-1)))):Xa.push(0),j.push([dn[Nt],$s,so])}}var Pi=typeof dt.R2L=="boolean"?dt.R2L:xt;Pi===!0&&(j=Tu(j,function(Mi,Ii,vs){return[Mi.split("").reverse().join(""),Ii,vs]})),Ut={text:j,x:we,y:Xe,options:dt,mutex:{pdfEscape:Qr,activeFontKey:ot,fonts:mn,activeFontSize:Ge}},Gr.publish("postProcessText",Ut),j=Ut.text,Qo=Ut.mutex.isHex||!1;var du=mn[ot].encoding;du!=="WinAnsiEncoding"&&du!=="StandardEncoding"||(j=Tu(j,function(Mi,Ii,vs){return[jl(Mi),Ii,vs]})),dn=bo(j),j=[];for(var xo,Ji,Ba,Qa=0,Ra=1,Fa=Array.isArray(dn[0])?Ra:Qa,ja="",ti=function(Mi,Ii,vs){var Ui="";return vs instanceof nr?(vs=typeof dt.angle=="number"?Ds(vs,new nr(1,0,0,1,Mi,Ii)):Ds(new nr(1,0,0,1,Mi,Ii),vs),z===D.ADVANCED&&(vs=Ds(new nr(1,0,0,-1,0,0),vs)),Ui=vs.join(" ")+` Tm
`):Ui=fe(Mi)+" "+fe(Ii)+` Td
`,Ui},ba=0;ba<dn.length;ba++){switch(ja="",Fa){case Ra:Ba=(Qo?"<":"(")+dn[ba][0]+(Qo?">":")"),xo=parseFloat(dn[ba][1]),Ji=parseFloat(dn[ba][2]);break;case Qa:Ba=(Qo?"<":"(")+dn[ba]+(Qo?">":")"),xo=gr(we),Ji=ps(Xe)}Xa!==void 0&&Xa[ba]!==void 0&&(ja=Xa[ba]+` Tw
`),ba===0?j.push(ja+ti(xo,Ji,pi)+Ba):Fa===Qa?j.push(ja+Ba):Fa===Ra&&j.push(ja+ti(xo,Ji,pi)+Ba)}j=Fa===Qa?j.join(` Tj
T* `):j.join(` Tj
`),j+=` Tj
`;var Vs=`BT
/`;return Vs+=ot+" "+Ge+` Tf
`,Vs+=fe(Ge*Ur)+` TL
`,Vs+=Da+`
`,Vs+=Ls,Vs+=j,de(Vs+="ET"),v[ot]=!0,Ei};var rs=g.__private__.clip=g.clip=function(j){return de(j==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return rs("evenodd")},g.__private__.discardPath=g.discardPath=function(){return de("n"),this};var Tr=g.__private__.isValidStyle=function(j){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(j)!==-1&&(we=!0),we};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(j){return Tr(j)&&(c=j),this};var Zo=g.__private__.getStyle=g.getStyle=function(j){var we=c;switch(j){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=j}return we},ka=g.close=function(){return de("h"),this};g.stroke=function(){return de("S"),this},g.fill=function(j){return Aa("f",j),this},g.fillEvenOdd=function(j){return Aa("f*",j),this},g.fillStroke=function(j){return Aa("B",j),this},g.fillStrokeEvenOdd=function(j){return Aa("B*",j),this};var Aa=function(j,we){cs(we)==="object"?_l(we,j):de(j)},Xo=function(j){j===null||z===D.ADVANCED&&j===void 0||(j=Zo(j),de(j))};function sa(j,we,Xe,dt,kt){var Ut=new lp(we||this.boundingBox,Xe||this.xStep,dt||this.yStep,this.gState,kt||this.matrix);Ut.stream=this.stream;var dn=j+"$$"+this.cloneIndex+++"$$";return at(dn,Ut),Ut}var _l=function(j,we){var Xe=xn[j.key],dt=Qt[Xe];if(dt instanceof nf)de("q"),de(Ta(we)),dt.gState&&g.setGState(dt.gState),de(j.matrix.toString()+" cm"),de("/"+Xe+" sh"),de("Q");else if(dt instanceof lp){var kt=new nr(1,0,0,-1,0,Ka());j.matrix&&(kt=kt.multiply(j.matrix||No),Xe=sa.call(dt,j.key,j.boundingBox,j.xStep,j.yStep,kt).id),de("q"),de("/Pattern cs"),de("/"+Xe+" scn"),dt.gState&&g.setGState(dt.gState),de(we),de("Q")}},Ta=function(j){switch(j){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Pr=g.moveTo=function(j,we){return de(fe(I(j))+" "+fe(q(we))+" m"),this},Yn=g.lineTo=function(j,we){return de(fe(I(j))+" "+fe(q(we))+" l"),this},eo=g.curveTo=function(j,we,Xe,dt,kt,Ut){return de([fe(I(j)),fe(q(we)),fe(I(Xe)),fe(q(dt)),fe(I(kt)),fe(q(Ut)),"c"].join(" ")),this};g.__private__.line=g.line=function(j,we,Xe,dt,kt){if(isNaN(j)||isNaN(we)||isNaN(Xe)||isNaN(dt)||!Tr(kt))throw new Error("Invalid arguments passed to jsPDF.line");return z===D.COMPAT?this.lines([[Xe-j,dt-we]],j,we,[1,1],kt||"S"):this.lines([[Xe-j,dt-we]],j,we,[1,1]).stroke()},g.__private__.lines=g.lines=function(j,we,Xe,dt,kt,Ut){var dn,Rn,Hn,fr,Er,Vr,qi,pi,Ei,ms,Ls,Qo;if(typeof j=="number"&&(Qo=Xe,Xe=we,we=j,j=Qo),dt=dt||[1,1],Ut=Ut||!1,isNaN(we)||isNaN(Xe)||!Array.isArray(j)||!Array.isArray(dt)||!Tr(kt)||typeof Ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pr(we,Xe),dn=dt[0],Rn=dt[1],fr=j.length,ms=we,Ls=Xe,Hn=0;Hn<fr;Hn++)(Er=j[Hn]).length===2?(ms=Er[0]*dn+ms,Ls=Er[1]*Rn+Ls,Yn(ms,Ls)):(Vr=Er[0]*dn+ms,qi=Er[1]*Rn+Ls,pi=Er[2]*dn+ms,Ei=Er[3]*Rn+Ls,ms=Er[4]*dn+ms,Ls=Er[5]*Rn+Ls,eo(Vr,qi,pi,Ei,ms,Ls));return Ut&&ka(),Xo(kt),this},g.path=function(j){for(var we=0;we<j.length;we++){var Xe=j[we],dt=Xe.c;switch(Xe.op){case"m":Pr(dt[0],dt[1]);break;case"l":Yn(dt[0],dt[1]);break;case"c":eo.apply(this,dt);break;case"h":ka()}}return this},g.__private__.rect=g.rect=function(j,we,Xe,dt,kt){if(isNaN(j)||isNaN(we)||isNaN(Xe)||isNaN(dt)||!Tr(kt))throw new Error("Invalid arguments passed to jsPDF.rect");return z===D.COMPAT&&(dt=-dt),de([fe(I(j)),fe(q(we)),fe(I(Xe)),fe(I(dt)),"re"].join(" ")),Xo(kt),this},g.__private__.triangle=g.triangle=function(j,we,Xe,dt,kt,Ut,dn){if(isNaN(j)||isNaN(we)||isNaN(Xe)||isNaN(dt)||isNaN(kt)||isNaN(Ut)||!Tr(dn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Xe-j,dt-we],[kt-Xe,Ut-dt],[j-kt,we-Ut]],j,we,[1,1],dn,!0),this},g.__private__.roundedRect=g.roundedRect=function(j,we,Xe,dt,kt,Ut,dn){if(isNaN(j)||isNaN(we)||isNaN(Xe)||isNaN(dt)||isNaN(kt)||isNaN(Ut)||!Tr(dn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rn=4/3*(Math.SQRT2-1);return kt=Math.min(kt,.5*Xe),Ut=Math.min(Ut,.5*dt),this.lines([[Xe-2*kt,0],[kt*Rn,0,kt,Ut-Ut*Rn,kt,Ut],[0,dt-2*Ut],[0,Ut*Rn,-kt*Rn,Ut,-kt,Ut],[2*kt-Xe,0],[-kt*Rn,0,-kt,-Ut*Rn,-kt,-Ut],[0,2*Ut-dt],[0,-Ut*Rn,kt*Rn,-Ut,kt,-Ut]],j+kt,we,[1,1],dn,!0),this},g.__private__.ellipse=g.ellipse=function(j,we,Xe,dt,kt){if(isNaN(j)||isNaN(we)||isNaN(Xe)||isNaN(dt)||!Tr(kt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ut=4/3*(Math.SQRT2-1)*Xe,dn=4/3*(Math.SQRT2-1)*dt;return Pr(j+Xe,we),eo(j+Xe,we-dn,j+Ut,we-dt,j,we-dt),eo(j-Ut,we-dt,j-Xe,we-dn,j-Xe,we),eo(j-Xe,we+dn,j-Ut,we+dt,j,we+dt),eo(j+Ut,we+dt,j+Xe,we+dn,j+Xe,we),Xo(kt),this},g.__private__.circle=g.circle=function(j,we,Xe,dt){if(isNaN(j)||isNaN(we)||isNaN(Xe)||!Tr(dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(j,we,Xe,Xe,dt)},g.setFont=function(j,we,Xe){return Xe&&(we=ge(we,Xe)),ot=Js(j,we,{disableWarning:!1}),this};var yo=g.__private__.getFont=g.getFont=function(){return mn[Js.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var j,we,Xe={};for(j in An)if(An.hasOwnProperty(j))for(we in Xe[j]=[],An[j])An[j].hasOwnProperty(we)&&Xe[j].push(we);return Xe},g.addFont=function(j,we,Xe,dt,kt){var Ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ut.indexOf(arguments[3])!==-1?kt=arguments[3]:arguments[3]&&Ut.indexOf(arguments[3])==-1&&(Xe=ge(Xe,dt)),kt=kt||"Identity-H",cr.call(this,j,we,Xe,kt)};var ou,Mu=t.lineWidth||.200025,Il=g.__private__.getLineWidth=g.getLineWidth=function(){return Mu},au=g.__private__.setLineWidth=g.setLineWidth=function(j){return Mu=j,de(fe(I(j))+" w"),this};g.__private__.setLineDash=Nr.API.setLineDash=Nr.API.setLineDashPattern=function(j,we){if(j=j||[],we=we||0,isNaN(we)||!Array.isArray(j))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return j=j.map(function(Xe){return fe(I(Xe))}).join(" "),we=fe(I(we)),de("["+j+"] "+we+" d"),this};var ku=g.__private__.getLineHeight=g.getLineHeight=function(){return Ge*ou};g.__private__.getLineHeight=g.getLineHeight=function(){return Ge*ou};var ei=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(j){return typeof(j=j||1.15)=="number"&&(ou=j),this},fs=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return ou};ei(t.lineHeight);var gr=g.__private__.getHorizontalCoordinate=function(j){return I(j)},ps=g.__private__.getVerticalCoordinate=function(j){return z===D.ADVANCED?j:ur[V].mediaBox.topRightY-ur[V].mediaBox.bottomLeftY-I(j)},Bl=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(j){return fe(gr(j))},Ya=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(j){return fe(ps(j))},Zi=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Un(Zi)},g.__private__.setStrokeColor=g.setDrawColor=function(j,we,Xe,dt){return Zi=St({ch1:j,ch2:we,ch3:Xe,ch4:dt,pdfColorType:"draw",precision:2}),de(Zi),this};var Au=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Un(Au)},g.__private__.setFillColor=g.setFillColor=function(j,we,Xe,dt){return Au=St({ch1:j,ch2:we,ch3:Xe,ch4:dt,pdfColorType:"fill",precision:2}),de(Au),this};var Da=t.textColor||"0 g",lu=g.__private__.getTextColor=g.getTextColor=function(){return Un(Da)};g.__private__.setTextColor=g.setTextColor=function(j,we,Xe,dt){return Da=St({ch1:j,ch2:we,ch3:Xe,ch4:dt,pdfColorType:"text",precision:3}),this};var uu=t.charSpace,oa=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(uu||0)};g.__private__.setCharSpace=g.setCharSpace=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return uu=j,this};var cu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(j){var we=g.CapJoinStyles[j];if(we===void 0)throw new Error("Line cap style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cu=we,de(we+" J"),this};var Si=0;g.__private__.setLineJoin=g.setLineJoin=function(j){var we=g.CapJoinStyles[j];if(we===void 0)throw new Error("Line join style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Si=we,de(we+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(j){if(j=j||0,isNaN(j))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(fe(I(j))+" M"),this},g.GState=qv,g.setGState=function(j){(j=typeof j=="string"?Cn[tr[j]]:Mc(null,j)).equals(vr)||(de("/"+j.id+" gs"),vr=j)};var Mc=function(j,we){if(!j||!tr[j]){var Xe=!1;for(var dt in Cn)if(Cn.hasOwnProperty(dt)&&Cn[dt].equals(we)){Xe=!0;break}if(Xe)we=Cn[dt];else{var kt="GS"+(Object.keys(Cn).length+1).toString(10);Cn[kt]=we,we.id=kt}return j&&(tr[j]=we.id),Gr.publish("addGState",we),we}};g.addGState=function(j,we){return Mc(j,we),this},g.saveGraphicsState=function(){return de("q"),Jn.push({key:ot,size:Ge,color:Da}),this},g.restoreGraphicsState=function(){de("Q");var j=Jn.pop();return ot=j.key,Ge=j.size,Da=j.color,vr=null,this},g.setCurrentTransformationMatrix=function(j){return de(j.toString()+" cm"),this},g.comment=function(j){return de("#"+j),this};var zs=function(j,we){var Xe=j||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Xe},set:function(Ut){isNaN(Ut)||(Xe=parseFloat(Ut))}});var dt=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dt},set:function(Ut){isNaN(Ut)||(dt=parseFloat(Ut))}});var kt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return kt},set:function(Ut){kt=Ut.toString()}}),this},va=function(j,we,Xe,dt){zs.call(this,j,we),this.type="rect";var kt=Xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return kt},set:function(dn){isNaN(dn)||(kt=parseFloat(dn))}});var Ut=dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ut},set:function(dn){isNaN(dn)||(Ut=parseFloat(dn))}}),this},hu=function(){this.page=xr,this.currentPage=V,this.pages=De.slice(0),this.pagesContext=ur.slice(0),this.x=$t,this.y=Zt,this.matrix=Dn,this.width=Ci(V),this.height=Ka(V),this.outputDestination=me,this.id="",this.objectNumber=-1};hu.prototype.restore=function(){xr=this.page,V=this.currentPage,ur=this.pagesContext,De=this.pages,$t=this.x,Zt=this.y,Dn=this.matrix,Jo(V,this.width),gs(V,this.height),me=this.outputDestination};var ya=function(j,we,Xe,dt,kt){Ts.push(new hu),xr=V=0,De=[],$t=j,Zt=we,Dn=kt,bi([Xe,dt])},Rl=function(j){if(Oo[j])Ts.pop().restore();else{var we=new hu,Xe="Xo"+(Object.keys(Ti).length+1).toString(10);we.id=Xe,Oo[j]=Xe,Ti[Xe]=we,Gr.publish("addFormObject",we),Ts.pop().restore()}};for(var Fl in g.beginFormObject=function(j,we,Xe,dt,kt){return ya(j,we,Xe,dt,kt),this},g.endFormObject=function(j){return Rl(j),this},g.doFormObject=function(j,we){var Xe=Ti[Oo[j]];return de("q"),de(we.toString()+" cm"),de("/"+Xe.id+" Do"),de("Q"),this},g.getFormObject=function(j){var we=Ti[Oo[j]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},g.save=function(j,we){return j=j||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(Xd(xs(qr()),j),typeof Xd.unload=="function"&&jr.setTimeout&&setTimeout(Xd.unload,911),this):new Promise(function(Xe,dt){try{var kt=Xd(xs(qr()),j);typeof Xd.unload=="function"&&jr.setTimeout&&setTimeout(Xd.unload,911),Xe(kt)}catch(Ut){dt(Ut.message)}})},Nr.API)Nr.API.hasOwnProperty(Fl)&&(Fl==="events"&&Nr.API.events.length?function(j,we){var Xe,dt,kt;for(kt=we.length-1;kt!==-1;kt--)Xe=we[kt][0],dt=we[kt][1],j.subscribe.apply(j,[Xe].concat(typeof dt=="function"?[dt]:dt))}(Gr,Nr.API.events):g[Fl]=Nr.API[Fl]);var Ci=g.getPageWidth=function(j){return(ur[j=j||V].mediaBox.topRightX-ur[j].mediaBox.bottomLeftX)/rt},Jo=g.setPageWidth=function(j,we){ur[j].mediaBox.topRightX=we*rt+ur[j].mediaBox.bottomLeftX},Ka=g.getPageHeight=function(j){return(ur[j=j||V].mediaBox.topRightY-ur[j].mediaBox.bottomLeftY)/rt},gs=g.setPageHeight=function(j,we){ur[j].mediaBox.topRightY=we*rt+ur[j].mediaBox.bottomLeftY};return g.internal={pdfEscape:Qr,getStyle:Zo,getFont:yo,getFontSize:Ke,getCharSpace:oa,getTextColor:lu,getLineHeight:ku,getLineHeightFactor:fs,getLineWidth:Il,write:ze,getHorizontalCoordinate:gr,getVerticalCoordinate:ps,getCoordinateString:Bl,getVerticalCoordinateString:Ya,collections:{},newObject:Ie,newAdditionalObject:$n,newObjectDeferred:ct,newObjectDeferredBegin:Ln,getFilters:qt,putStream:Vn,events:Gr,scaleFactor:rt,pageSize:{getWidth:function(){return Ci(V)},setWidth:function(j){Jo(V,j)},getHeight:function(){return Ka(V)},setHeight:function(j){gs(V,j)}},encryptionOptions:d,encryption:hs,getEncryptor:Ma,output:Qs,getNumberOfPages:yr,pages:De,out:de,f2:Y,f3:B,getPageInfo:bl,getPageInfoByObjId:zn,getCurrentPageInfo:Cr,getPDFVersion:E,Point:zs,Rectangle:va,Matrix:nr,hasHotfix:qa},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ci(V)},set:function(j){Jo(V,j)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ka(V)},set:function(j){gs(V,j)},enumerable:!0,configurable:!0}),Sn.call(g,et),ot="F1",Xs(i,n),Gr.publish("initialized"),g}ip.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},ip.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ip.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},ip.prototype.processOwnerPassword=function(t,e){return Mb(Pb(e).substr(0,5),t)},ip.prototype.encryptor=function(t,e){var n=Pb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Mb(n,r)}},qv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||cs(t)!==cs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Nr.API={events:[]},Nr.version="2.5.2";var Po=Nr.API,$_=1,Lf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kr=function(t){return t.toFixed(2)},Xh=function(t){return t.toFixed(5)};Po.__acroform__={};var su=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},L5=function(t){return t*$_},Fc=function(t){var e=new XE,n=ir.internal.getHeight(t)||0,r=ir.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Kr(r)),Number(Kr(n))],e},vH=Po.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},yH=Po.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},bH=Po.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Uo=Po.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bH(t,e-1)},Ho=Po.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vH(t,e-1)},Wo=Po.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yH(t,e-1)},_H=Po.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Kr(l.lowerLeft_X)),Number(Kr(l.lowerLeft_Y)),Number(Kr(l.upperRight_X)),Number(Kr(l.upperRight_Y))]},wH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=kb(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Kr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Fc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},kb=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(B){return B.split(`
`)}):i.map(function(B){return[B]});var s=n,o=ir.internal.getHeight(t)||0;o=o<0?-o:o;var a=ir.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(B,I,R){if(B+1<i.length){var q=I+" "+i[B+1][0];return x0(q,t,R).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=x0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,g=v+=2,x=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+x0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",D=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var X=!1;if(i[z].length!==1&&k!==i[z].length-1){if((p+2)*(D+2)+2>o)continue e;A+=i[z][k],X=!0,E=z,z--}else{A=(A+=i[z][k]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var re=parseInt(z),ge=l(re,A,s),fe=z>=i.length-1;if(ge&&!fe){A+=" ",k=0;continue}if(ge||fe){if(fe)E=re;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;E=re}}for(var N="",F=x;F<=E;F++){var Y=i[F];if(t.multiline){if(F===E){N+=Y[k]+" ",k=(k+1)%Y.length;continue}if(F===x){N+=Y[Y.length-1]+" ";continue}}N+=Y[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=x0(N,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Kr(c)+" "+Kr(g)+` Td
`,e+="("+Lf(N)+`) Tj
`,e+=-Kr(c)+` 0 Td
`,g=-(s+2),d=0,x=X?E:E+1,D++,A=""}break}return r.text=e,r.fontSize=s,r},x0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},xH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},LH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},SH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),cs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},CH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ec.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(xH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new JE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&LH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=_H(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ir.createDefaultAppearanceStream(a),cs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=wH(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var x=g[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&SH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},ZE=Po.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),cs(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Lf(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},s2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Lf(r(t))+")"},Yc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yc.prototype.toString=function(){return this.objId+" 0 R"},Yc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Yc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:ZE(i,this.objId,this.scope)}):i instanceof Yc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var XE=function(){Yc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};su(XE,Yc);var JE=function(){Yc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Lf(n(t))+")"}},set:function(n){t=n}})};su(JE,Yc);var Ec=function t(){Yc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Uo(e,3)},set:function(A){A?this.F=Ho(e,3):this.F=Wo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Yv)return;s="FieldObject"+t.FieldNum++}var A=function(D){return D};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Lf(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/$_:c},set:function(A){c=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Yv||this instanceof hf))return s2(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Sa?v:s2(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=this instanceof Sa?A:A.substr(0,1)==="("?Gf(A.substr(1,A.length-2)):Gf(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sa?Gf(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof Sa?"/"+A:A}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Sa?g:s2(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof Sa?A:A.substr(0,1)==="("?Gf(A.substr(1,A.length-2)):Gf(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sa?Gf(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof Sa?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(A){x=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,1)},set:function(A){A?this.Ff=Ho(this.Ff,1):this.Ff=Wo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,2)},set:function(A){A?this.Ff=Ho(this.Ff,2):this.Ff=Wo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,3)},set:function(A){A?this.Ff=Ho(this.Ff,3):this.Ff=Wo(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');k=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(k){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};su(Ec,Yc);var mp=function(){Ec.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,18)},set:function(n){n?this.Ff=Ho(this.Ff,18):this.Ff=Wo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ho(this.Ff,19):this.Ff=Wo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,20)},set:function(n){n?(this.Ff=Ho(this.Ff,20),e.sort()):this.Ff=Wo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,22)},set:function(n){n?this.Ff=Ho(this.Ff,22):this.Ff=Wo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(n){n?this.Ff=Ho(this.Ff,23):this.Ff=Wo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,27)},set:function(n){n?this.Ff=Ho(this.Ff,27):this.Ff=Wo(this.Ff,27)}}),this.hasAppearanceStream=!1};su(mp,Ec);var vp=function(){mp.call(this),this.fontName="helvetica",this.combo=!1};su(vp,mp);var yp=function(){vp.call(this),this.combo=!0};su(yp,vp);var iv=function(){yp.call(this),this.edit=!0};su(iv,yp);var Sa=function(){Ec.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,15)},set:function(n){n?this.Ff=Ho(this.Ff,15):this.Ff=Wo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,16)},set:function(n){n?this.Ff=Ho(this.Ff,16):this.Ff=Wo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,17)},set:function(n){n?this.Ff=Ho(this.Ff,17):this.Ff=Wo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(n){n?this.Ff=Ho(this.Ff,26):this.Ff=Wo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Lf(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){cs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};su(Sa,Ec);var sv=function(){Sa.call(this),this.pushButton=!0};su(sv,Sa);var bp=function(){Sa.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};su(bp,Sa);var Yv=function(){var t,e;Ec.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Lf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){cs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};su(Yv,Ec),bp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},bp.prototype.createOption=function(t){var e=new Yv;return e.Parent=this,e.optionName=t,this.Kids.push(e),EH.call(this.scope,e),e};var ov=function(){Sa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ir.CheckBox.createAppearanceStream()};su(ov,Sa);var hf=function(){Ec.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,13)},set:function(e){e?this.Ff=Ho(this.Ff,13):this.Ff=Wo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,21)},set:function(e){e?this.Ff=Ho(this.Ff,21):this.Ff=Wo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(e){e?this.Ff=Ho(this.Ff,23):this.Ff=Wo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,24)},set:function(e){e?this.Ff=Ho(this.Ff,24):this.Ff=Wo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,25)},set:function(e){e?this.Ff=Ho(this.Ff,25):this.Ff=Wo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(e){e?this.Ff=Ho(this.Ff,26):this.Ff=Wo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};su(hf,Ec);var av=function(){hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,14)},set:function(t){t?this.Ff=Ho(this.Ff,14):this.Ff=Wo(this.Ff,14)}}),this.password=!0};su(av,hf);var ir={CheckBox:{createAppearanceStream:function(){return{N:{On:ir.CheckBox.YesNormal},D:{On:ir.CheckBox.YesPushDown,Off:ir.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Fc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=kb(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Kr(ir.internal.getWidth(t))+" "+Kr(ir.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Kr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Fc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=ir.internal.getHeight(t),o=ir.internal.getWidth(t),a=kb(t,t.caption);return i.push("1 g"),i.push("0 0 "+Kr(o)+" "+Kr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Kr(o-1)+" "+Kr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Kr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Fc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kr(ir.internal.getWidth(t))+" "+Kr(ir.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ir.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ir.RadioButton.Circle.YesNormal,e.D[t]=ir.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Fc(t);e.scope=t.scope;var n=[],r=ir.internal.getWidth(t)<=ir.internal.getHeight(t)?ir.internal.getWidth(t)/4:ir.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ir.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Xh(ir.internal.getWidth(t)/2)+" "+Xh(ir.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fc(t);e.scope=t.scope;var n=[],r=ir.internal.getWidth(t)<=ir.internal.getHeight(t)?ir.internal.getWidth(t)/4:ir.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ir.internal.Bezier_C).toFixed(5)),o=Number((r*ir.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Xh(ir.internal.getWidth(t)/2)+" "+Xh(ir.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Xh(ir.internal.getWidth(t)/2)+" "+Xh(ir.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Fc(t);e.scope=t.scope;var n=[],r=ir.internal.getWidth(t)<=ir.internal.getHeight(t)?ir.internal.getWidth(t)/4:ir.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ir.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Xh(ir.internal.getWidth(t)/2)+" "+Xh(ir.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ir.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ir.RadioButton.Cross.YesNormal,e.D[t]=ir.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Fc(t);e.scope=t.scope;var n=[],r=ir.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Kr(ir.internal.getWidth(t)-2)+" "+Kr(ir.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Kr(r.x1.x)+" "+Kr(r.x1.y)+" m"),n.push(Kr(r.x2.x)+" "+Kr(r.x2.y)+" l"),n.push(Kr(r.x4.x)+" "+Kr(r.x4.y)+" m"),n.push(Kr(r.x3.x)+" "+Kr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fc(t);e.scope=t.scope;var n=ir.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Kr(ir.internal.getWidth(t))+" "+Kr(ir.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Kr(ir.internal.getWidth(t)-2)+" "+Kr(ir.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Kr(n.x1.x)+" "+Kr(n.x1.y)+" m"),r.push(Kr(n.x2.x)+" "+Kr(n.x2.y)+" l"),r.push(Kr(n.x4.x)+" "+Kr(n.x4.y)+" m"),r.push(Kr(n.x3.x)+" "+Kr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Fc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kr(ir.internal.getWidth(t))+" "+Kr(ir.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ir.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ir.internal.getWidth(t),n=ir.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ir.internal.getWidth=function(t){var e=0;return cs(t)==="object"&&(e=L5(t.Rect[2])),e},ir.internal.getHeight=function(t){var e=0;return cs(t)==="object"&&(e=L5(t.Rect[3])),e};var EH=Po.addField=function(t){if(CH(this,t),!(t instanceof Ec))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Po.AcroFormChoiceField=mp,Po.AcroFormListBox=vp,Po.AcroFormComboBox=yp,Po.AcroFormEditBox=iv,Po.AcroFormButton=Sa,Po.AcroFormPushButton=sv,Po.AcroFormRadioButton=bp,Po.AcroFormCheckBox=ov,Po.AcroFormTextField=hf,Po.AcroFormPasswordField=av,Po.AcroFormAppearance=ir,Po.AcroForm={ChoiceField:mp,ListBox:vp,ComboBox:yp,EditBox:iv,Button:Sa,PushButton:sv,RadioButton:bp,CheckBox:ov,TextField:hf,PasswordField:av,Appearance:ir},Nr.AcroForm={ChoiceField:mp,ListBox:vp,ComboBox:yp,EditBox:iv,Button:Sa,PushButton:sv,RadioButton:bp,CheckBox:ov,TextField:hf,PasswordField:av,Appearance:ir};Nr.AcroForm;function QE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(B,I){var R,q,U,$,oe,J=e;if((I=I||e)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(ge(B))for(oe in n)for(U=n[oe],R=0;R<U.length;R+=1){for($=!0,q=0;q<U[R].length;q+=1)if(U[R][q]!==void 0&&U[R][q]!==B[q]){$=!1;break}if($===!0){J=oe;break}}else for(oe in n)for(U=n[oe],R=0;R<U.length;R+=1){for($=!0,q=0;q<U[R].length;q+=1)if(U[R][q]!==void 0&&U[R][q]!==B.charCodeAt(q)){$=!1;break}if($===!0){J=oe;break}}return J===e&&I!==e&&(J=I),J},i=function B(I){for(var R=this.internal.write,q=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:I.width}),$.push({key:"Height",value:I.height}),I.colorSpace===k.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===k.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var oe="",J=0,_e=I.transparency.length;J<_e;J++)oe+=I.transparency[J]+" "+I.transparency[J]+" ";$.push({key:"Mask",value:"["+oe+"]"})}I.sMask!==void 0&&$.push({key:"SMask",value:I.objectId+1+" 0 R"});var ve=I.filter!==void 0?["/"+I.filter]:void 0;if(q({data:I.data,additionalKeyValues:$,alreadyAppliedFilters:ve,objectId:I.objectId}),R("endobj"),"sMask"in I&&I.sMask!==void 0){var ke="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,W={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:ke,data:I.sMask};"filter"in I&&(W.filter=I.filter),B.call(this,W)}if(I.colorSpace===k.INDEXED){var V=this.internal.newObject();q({data:N(new Uint8Array(I.palette)),objectId:V}),R("endobj")}},s=function(){var B=this.internal.collections.addImage_images;for(var I in B)i.call(this,B[I])},o=function(){var B,I=this.internal.collections.addImage_images,R=this.internal.write;for(var q in I)R("/I"+(B=I[q]).index,B.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var B=this.internal.collections.addImage_images;return a.call(this),B},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(B){return typeof t["process"+B.toUpperCase()]=="function"},p=function(B){return cs(B)==="object"&&B.nodeType===1},v=function(B,I){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var R=""+B.getAttribute("src");if(R.indexOf("data:image/")===0)return Hg(unescape(R).split("base64,").pop());var q=t.loadFile(R,!0);if(q!==void 0)return q}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var U;switch(I){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return Hg(B.toDataURL(U,1).split("base64,").pop())}},g=function(B){var I=this.internal.collections.addImage_images;if(I){for(var R in I)if(B===I[R].alias)return I[R]}},x=function(B,I,R){return B||I||(B=-96,I=-96),B<0&&(B=-1*R.width*72/B/this.internal.scaleFactor),I<0&&(I=-1*R.height*72/I/this.internal.scaleFactor),B===0&&(B=I*R.width/R.height),I===0&&(I=B*R.height/R.width),[B,I]},E=function(B,I,R,q,U,$){var oe=x.call(this,R,q,U),J=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,ve=l.call(this);if(R=oe[0],q=oe[1],ve[U.index]=U,$){$*=Math.PI/180;var ke=Math.cos($),W=Math.sin($),V=function(pe){return pe.toFixed(4)},K=[V(ke),V(W),V(-1*W),V(ke),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,J(B),_e(I+q),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([J(R),"0","0",J(q),"0","0","cm"].join(" "))):this.internal.write([J(R),"0","0",J(q),J(B),_e(I+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(B){var I,R,q=0;if(typeof B=="string")for(R=B.length,I=0;I<R;I++)q=(q<<5)-q+B.charCodeAt(I),q|=0;else if(ge(B))for(R=B.byteLength/2,I=0;I<R;I++)q=(q<<5)-q+B[I],q|=0;return q},z=t.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var I=!0;return B.length===0&&(I=!1),B.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(I=!1),I},X=t.__addimage__.extractImageFromDataUrl=function(B){var I=(B=B||"").split("base64,"),R=null;if(I.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(q)&&(R={mimeType:q[1],charset:q[2],data:I[1]})}return R},re=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(B){return re()&&B instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(B){return re()&&typeof Uint32Array<"u"&&(B instanceof Int8Array||B instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array)},fe=t.__addimage__.binaryStringToUint8Array=function(B){for(var I=B.length,R=new Uint8Array(I),q=0;q<I;q++)R[q]=B.charCodeAt(q);return R},N=t.__addimage__.arrayBufferToBinaryString=function(B){for(var I="",R=ge(B)?B:new Uint8Array(B),q=0;q<R.length;q+=8192)I+=String.fromCharCode.apply(null,R.subarray(q,q+8192));return I};t.addImage=function(){var B,I,R,q,U,$,oe,J,_e;if(typeof arguments[1]=="number"?(I=e,R=arguments[1],q=arguments[2],U=arguments[3],$=arguments[4],oe=arguments[5],J=arguments[6],_e=arguments[7]):(I=arguments[1],R=arguments[2],q=arguments[3],U=arguments[4],$=arguments[5],oe=arguments[6],J=arguments[7],_e=arguments[8]),cs(B=arguments[0])==="object"&&!p(B)&&"imageData"in B){var ve=B;B=ve.imageData,I=ve.format||I||e,R=ve.x||R||0,q=ve.y||q||0,U=ve.w||ve.width||U,$=ve.h||ve.height||$,oe=ve.alias||oe,J=ve.compression||J,_e=ve.rotation||ve.angle||_e}var ke=this.internal.getFilters();if(J===void 0&&ke.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(R)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var W=F.call(this,B,I,oe,J);return E.call(this,R,q,U,$,W,_e),this};var F=function(B,I,R,q){var U,$,oe;if(typeof B=="string"&&r(B)===e){B=unescape(B);var J=Y(B,!1);(J!==""||(J=t.loadFile(B,!0))!==void 0)&&(B=J)}if(p(B)&&(B=v(B,I)),I=r(B,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((oe=R)==null||oe.length===0)&&(R=function(_e){return typeof _e=="string"||ge(_e)?D(_e):ge(_e.data)?D(_e.data):null}(B)),(U=g.call(this,R))||(re()&&(B instanceof Uint8Array||I==="RGBA"||($=B,B=fe(B))),U=this["process"+I.toUpperCase()](B,c.call(this),R,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:A.NONE}(q),$)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},Y=t.__addimage__.convertBase64ToBinaryString=function(B,I){var R;I=typeof I!="boolean"||I;var q,U="";if(typeof B=="string"){q=(R=X(B))!==null?R.data:B;try{U=Hg(q)}catch($){if(I)throw z(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(B){var I,R,q="";if(p(B)&&(B=v(B)),typeof B=="string"&&r(B)===e&&((q=Y(B,!1))===""&&(q=t.loadFile(B)||""),B=q),R=r(B),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!re()||B instanceof Uint8Array||(B=fe(B)),!(I=this["process"+R.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=R,I}})(Nr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Nr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(A(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(A(D))+") >>",E.content=s;var z=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var X=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+X+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var re=this.annotations._nameMap[r.options.name];r.options.pageNumber=re.page,r.options.top=re.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Nr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var k=0,A=n,D="",z=0;for(k=0;k<E.length;k+=1)A[E.charCodeAt(k)]!==void 0?(z++,typeof(A=A[E.charCodeAt(k)])=="number"&&(D+=String.fromCharCode(A),A=n,z=0),k===E.length-1&&(A=n,D+=E.charAt(k-(z-1)),k-=z-1,z=0)):(A=n,D+=E.charAt(k-z),k-=z,z=0);return D};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,k,A){return o(E)?s(E)===!1?-1:!c(E)||!o(k)&&!o(A)||!o(A)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:d(E)&&o(k)&&!a(k)&&o(A)&&c(A)?3:a(E)||!o(A)?1:2:-1},g=function(E){var k=0,A=0,D=0,z="",X="",re="",ge=(E=E||"").split("\\s+"),fe=[];for(k=0;k<ge.length;k+=1){for(fe.push(""),A=0;A<ge[k].length;A+=1)z=ge[k][A],X=ge[k][A-1],re=ge[k][A+1],o(z)?(D=v(z,X,re),fe[k]+=D!==-1?String.fromCharCode(e[z.charCodeAt(0)][D]):z):fe[k]+=z;fe[k]=p(fe[k])}return fe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(k)){var D=0;for(A=[],D=0;D<k.length;D+=1)Array.isArray(k[D])?A.push([g(k[D][0]),k[D][1],k[D][2]]):A.push([g(k[D])]);E=A}else E=g(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Nr.API),Nr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,g=0,x=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(z,X){return z.concat(k.splitTextToSize(X,A))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)g<(E=this.getStringUnitWidth(l[D],{font:p})*d)&&(g=E);return g!==0&&(x=l.length),{w:g/=v,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,x,E,k,A=[],D=[],z=[],X={},re={},ge=[],fe=[],N=(v=v||{}).autoSize||!1,F=v.printHeaders!==!1,Y=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,B=v.margins||Object.assign({width:this.getPageWidth()},e),I=typeof v.padding=="number"?v.padding:3,R=v.headerBackgroundColor||"#c8c8c8",q=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=q,this.setFontSize(Y),p==null)D=A=Object.keys(d[0]),z=A.map(function(){return"left"});else if(Array.isArray(p)&&cs(p[0])==="object")for(A=p.map(function(ve){return ve.name}),D=p.map(function(ve){return ve.prompt||ve.name||""}),z=p.map(function(ve){return ve.align||"left"}),g=0;g<p.length;g+=1)re[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=A=p,z=A.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<A.length;g+=1){for(X[k=A[g]]=d.map(function(ve){return ve[k]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(D[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=X[k],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)ge.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);re[k]=Math.max.apply(null,ge)+I+I,ge=[]}if(F){var U={};for(g=0;g<A.length;g+=1)U[A[g]]={},U[A[g]].text=D[g],U[A[g]].align=z[g];var $=a.call(this,U,re);fe=A.map(function(ve){return new s(l,c,re[ve],$,U[ve].text,void 0,U[ve].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var oe=p.reduce(function(ve,ke){return ve[ke.name]=ke.align,ve},{});for(g=0;g<d.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:d[g]},this);var J=a.call(this,d[g],re);for(E=0;E<A.length;E+=1){var _e=d[g][A[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:E,data:_e},this),o.call(this,new s(l,c,re[A[E]],J,_e,g+2,oe[A[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var x=l[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+d+d},this).reduce(function(g,x){return Math.max(g,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Nr.API);var eP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ab=QE(tP),nP=[100,200,300,400,500,600,700,800,900],PH=QE(nP);function Tb(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return eP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Ab[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function S5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var MH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},C5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function E5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function kH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},MH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Tb(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+E5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=Ab[l],p=d<=Ab.normal?-1:1,v=S5(c,tP,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=eP[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=PH[l],p=S5(c,nP,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+E5(s)+"'.");return o}function P5(t){return t.trimLeft()}function AH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function TH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var L0,M5,k5,o2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new l,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new o,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new o,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=W;Object.defineProperty(this,"pdf",{get:function(){return V}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(se){K=!!se}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(se){pe=!!se}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(se){isNaN(se)||(he=se)}});var te=0;Object.defineProperty(this,"posY",{get:function(){return te},set:function(se){isNaN(se)||(te=se)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(se){var de;typeof se=="number"?de=[se,se,se,se]:((de=new Array(4))[0]=se[0],de[1]=se.length>=2?se[1]:de[0],de[2]=se.length>=3?se[2]:de[0],de[3]=se.length>=4?se[3]:de[1]),c.margin=de}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(se){le=se}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(se){Q=se}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(se){Be=se}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(se){se instanceof d&&(c=se)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(se){c.path=se}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(se){De=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var de;de=v(se),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var de=v(se);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var Je=null;function me(se,de){if(Je===null){var ze=function($e){var et=[];return Object.keys($e).forEach(function(Ge){$e[Ge].forEach(function(Qe){var Ke=null;switch(Qe){case"bold":Ke={family:Ge,weight:"bold"};break;case"italic":Ke={family:Ge,style:"italic"};break;case"bolditalic":Ke={family:Ge,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:Ge}}Ke!==null&&(Ke.ref={name:Ge,style:Qe},et.push(Ke))})}),et}(se.getFontList());Je=function($e){for(var et={},Ge=0;Ge<$e.length;++Ge){var Qe=Tb($e[Ge]),Ke=Qe.family,xt=Qe.stretch,bt=Qe.style,yt=Qe.weight;et[Ke]=et[Ke]||{},et[Ke][xt]=et[Ke][xt]||{},et[Ke][xt][bt]=et[Ke][xt][bt]||{},et[Ke][xt][bt][yt]=Qe}return et}(ze.concat(de))}return Je}var ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return ee},set:function(se){Je=null,ee=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var de;if(this.ctx.font=se,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var ze=de[1],$e=(de[2],de[3]),et=de[4],Ge=(de[5],de[6]),Qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(Qe==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:Qe==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var Ke=function(Ze){var ot,rt,$t=[],Zt=Ze.trim();if(Zt==="")return o2;if(Zt in C5)return[C5[Zt]];for(;Zt!=="";){switch(rt=null,ot=(Zt=P5(Zt)).charAt(0)){case'"':case"'":rt=AH(Zt.substring(1),ot);break;default:rt=TH(Zt)}if(rt===null||($t.push(rt[0]),(Zt=P5(rt[1]))!==""&&Zt.charAt(0)!==","))return o2;Zt=Zt.replace(/^,/,"")}return $t}(Ge);if(this.fontFaces){var xt=kH(me(this.pdf,this.fontFaces),Ke.map(function(Ze){return{family:Ze,stretch:"normal",weight:$e,style:ze}}));this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var bt="";($e==="bold"||parseInt($e,10)>=700||ze==="bold")&&(bt="bold"),ze==="italic"&&(bt+="italic"),bt.length===0&&(bt="normal");for(var yt="",Wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tn=0;tn<Ke.length;tn++){if(this.pdf.internal.getFont(Ke[tn],bt,{noFallback:!0,disableWarning:!0})!==void 0){yt=Ke[tn];break}if(bt==="bolditalic"&&this.pdf.internal.getFont(Ke[tn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)yt=Ke[tn],bt="bold";else if(this.pdf.internal.getFont(Ke[tn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){yt=Ke[tn],bt="normal";break}}if(yt===""){for(var yn=0;yn<Ke.length;yn++)if(Wt[Ke[yn]]){yt=Wt[Ke[yn]];break}}yt=yt===""?"Times":yt,this.pdf.setFont(yt,bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,ke.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,ke.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};p.prototype.setLineDash=function(W){this.lineDash=W},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){X.call(this,"fill",!1)},p.prototype.stroke=function(){X.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(W,V){if(isNaN(W)||isNaN(V))throw bs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(W,V));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(W,V)},p.prototype.closePath=function(){var W=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&cs(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){W=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(W.x,W.y)},p.prototype.lineTo=function(W,V){if(isNaN(W)||isNaN(V))throw bs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(W,V));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),X.call(this,null,!0)},p.prototype.quadraticCurveTo=function(W,V,K,pe){if(isNaN(K)||isNaN(pe)||isNaN(W)||isNaN(V))throw bs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(K,pe)),te=this.ctx.transform.applyToPoint(new o(W,V));this.path.push({type:"qct",x1:te.x,y1:te.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.bezierCurveTo=function(W,V,K,pe,he,te){if(isNaN(he)||isNaN(te)||isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe))throw bs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new o(he,te)),Q=this.ctx.transform.applyToPoint(new o(W,V)),Be=this.ctx.transform.applyToPoint(new o(K,pe));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:Be.x,y2:Be.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},p.prototype.arc=function(W,V,K,pe,he,te){if(isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe)||isNaN(he))throw bs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(te=!!te,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new o(W,V));W=le.x,V=le.y;var Q=this.ctx.transform.applyToPoint(new o(0,K)),Be=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(Q.x-Be.x,2)+Math.pow(Q.y-Be.y,2))}Math.abs(he-pe)>=2*Math.PI&&(pe=0,he=2*Math.PI),this.path.push({type:"arc",x:W,y:V,radius:K,startAngle:pe,endAngle:he,counterclockwise:te})},p.prototype.arcTo=function(W,V,K,pe,he){throw new Error("arcTo not implemented.")},p.prototype.rect=function(W,V,K,pe){if(isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe))throw bs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,V),this.lineTo(W+K,V),this.lineTo(W+K,V+pe),this.lineTo(W,V+pe),this.lineTo(W,V),this.lineTo(W+K,V),this.lineTo(W,V)},p.prototype.fillRect=function(W,V,K,pe){if(isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe))throw bs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,V,K,pe),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},p.prototype.strokeRect=function(W,V,K,pe){if(isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe))throw bs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(W,V,K,pe),this.stroke())},p.prototype.clearRect=function(W,V,K,pe){if(isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe))throw bs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,V,K,pe))},p.prototype.save=function(W){W=typeof W!="boolean"||W;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},p.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(V),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(W){var V,K,pe,he;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))V=0,K=0,pe=0,he=0;else{var te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(te!==null)V=parseInt(te[1]),K=parseInt(te[2]),pe=parseInt(te[3]),he=1;else if((te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)V=parseInt(te[1]),K=parseInt(te[2]),pe=parseInt(te[3]),he=parseFloat(te[4]);else{if(he=1,typeof W=="string"&&W.charAt(0)!=="#"){var le=new qE(W);W=le.ok?le.toHex():"#000000"}W.length===4?(V=W.substring(1,2),V+=V,K=W.substring(2,3),K+=K,pe=W.substring(3,4),pe+=pe):(V=W.substring(1,3),K=W.substring(3,5),pe=W.substring(5,7)),V=parseInt(V,16),K=parseInt(K,16),pe=parseInt(pe,16)}}return{r:V,g:K,b:pe,a:he,style:W}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(W,V,K,pe){if(isNaN(V)||isNaN(K)||typeof W!="string")throw bs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!g.call(this)){var he=J(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;I.call(this,{text:W,x:V,y:K,scale:te,angle:he,align:this.textAlign,maxWidth:pe})}},p.prototype.strokeText=function(W,V,K,pe){if(isNaN(V)||isNaN(K)||typeof W!="string")throw bs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){pe=isNaN(pe)?void 0:pe;var he=J(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;I.call(this,{text:W,x:V,y:K,scale:te,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:pe})}},p.prototype.measureText=function(W){if(typeof W!="string")throw bs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,K=this.pdf.internal.scaleFactor,pe=V.internal.getFontSize(),he=V.getStringUnitWidth(W)*pe/V.internal.scaleFactor,te=function(le){var Q=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this};return new te({width:he*=Math.round(96*K/72*1e4)/1e4})},p.prototype.scale=function(W,V){if(isNaN(W)||isNaN(V))throw bs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(W,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.rotate=function(W){if(isNaN(W))throw bs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.translate=function(W,V){if(isNaN(W)||isNaN(V))throw bs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,W,V);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.transform=function(W,V,K,pe,he,te){if(isNaN(W)||isNaN(V)||isNaN(K)||isNaN(pe)||isNaN(he)||isNaN(te))throw bs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new l(W,V,K,pe,he,te);this.ctx.transform=this.ctx.transform.multiply(le)},p.prototype.setTransform=function(W,V,K,pe,he,te){W=isNaN(W)?1:W,V=isNaN(V)?0:V,K=isNaN(K)?0:K,pe=isNaN(pe)?1:pe,he=isNaN(he)?0:he,te=isNaN(te)?0:te,this.ctx.transform=new l(W,V,K,pe,he,te)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(W,V,K,pe,he,te,le,Q,Be){var De=this.pdf.getImageProperties(W),Je=1,me=1,ee=1,se=1;pe!==void 0&&Q!==void 0&&(ee=Q/pe,se=Be/he,Je=De.width/pe*Q/pe,me=De.height/he*Be/he),te===void 0&&(te=V,le=K,V=0,K=0),pe!==void 0&&Q===void 0&&(Q=pe,Be=he),pe===void 0&&Q===void 0&&(Q=De.width,Be=De.height);for(var de,ze=this.ctx.transform.decompose(),$e=J(ze.rotate.shx),et=new l,Ge=(et=(et=(et=et.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new a(te-V*ee,le-K*se,pe*Je,he*me)),Qe=k.call(this,Ge),Ke=[],xt=0;xt<Qe.length;xt+=1)Ke.indexOf(Qe[xt])===-1&&Ke.push(Qe[xt]);if(z(Ke),this.autoPaging)for(var bt=Ke[0],yt=Ke[Ke.length-1],Wt=bt;Wt<yt+1;Wt++){this.pdf.setPage(Wt);var tn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yn=Wt===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Wt===1?0:Ze+(Wt-2)*ot;if(this.ctx.clip_path.length!==0){var $t=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(de,this.posX+this.margin[3],-rt+yn+this.ctx.prevPageLastElemOffset),re.call(this,"fill",!0),this.path=$t}var Zt=JSON.parse(JSON.stringify(Ge));Zt=D([Zt],this.posX+this.margin[3],-rt+yn+this.ctx.prevPageLastElemOffset)[0];var Dn=(Wt>bt||Wt<yt)&&E.call(this);Dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,ot,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,$e),Dn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,$e)};var k=function(W,V,K){var pe=[];V=V||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":pe.push(Math.floor((W.y+he)/K)+1);break;case"arc":pe.push(Math.floor((W.y+he-W.radius)/K)+1),pe.push(Math.floor((W.y+he+W.radius)/K)+1);break;case"qct":var te=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);pe.push(Math.floor((te.y+he)/K)+1),pe.push(Math.floor((te.y+te.h+he)/K)+1);break;case"bct":var le=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);pe.push(Math.floor((le.y+he)/K)+1),pe.push(Math.floor((le.y+le.h+he)/K)+1);break;case"rect":pe.push(Math.floor((W.y+he)/K)+1),pe.push(Math.floor((W.y+W.h+he)/K)+1)}for(var Q=0;Q<pe.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<pe[Q];)A.call(this);return pe},A=function(){var W=this.fillStyle,V=this.strokeStyle,K=this.font,pe=this.lineCap,he=this.lineWidth,te=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=V,this.font=K,this.lineCap=pe,this.lineWidth=he,this.lineJoin=te},D=function(W,V,K){for(var pe=0;pe<W.length;pe++)switch(W[pe].type){case"bct":W[pe].x2+=V,W[pe].y2+=K;case"qct":W[pe].x1+=V,W[pe].y1+=K;case"mt":case"lt":case"arc":default:W[pe].x+=V,W[pe].y+=K}return W},z=function(W){return W.sort(function(V,K){return V-K})},X=function(W,V){for(var K,pe,he=this.fillStyle,te=this.strokeStyle,le=this.lineCap,Q=this.lineWidth,Be=Math.abs(Q*this.ctx.transform.scaleX),De=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),me=JSON.parse(JSON.stringify(this.path)),ee=[],se=0;se<me.length;se++)if(me[se].x!==void 0)for(var de=k.call(this,me[se]),ze=0;ze<de.length;ze+=1)ee.indexOf(de[ze])===-1&&ee.push(de[ze]);for(var $e=0;$e<ee.length;$e++)for(;this.pdf.internal.getNumberOfPages()<ee[$e];)A.call(this);if(z(ee),this.autoPaging)for(var et=ee[0],Ge=ee[ee.length-1],Qe=et;Qe<Ge+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=he,this.strokeStyle=te,this.lineCap=le,this.lineWidth=Be,this.lineJoin=De;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=Qe===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=Qe===1?0:bt+(Qe-2)*yt;if(this.ctx.clip_path.length!==0){var tn=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(K,this.posX+this.margin[3],-Wt+xt+this.ctx.prevPageLastElemOffset),re.call(this,W,!0),this.path=tn}if(pe=JSON.parse(JSON.stringify(Je)),this.path=D(pe,this.posX+this.margin[3],-Wt+xt+this.ctx.prevPageLastElemOffset),V===!1||Qe===0){var yn=(Qe>et||Qe<Ge)&&E.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,yt,null).clip().discardPath()),re.call(this,W,V),yn&&this.pdf.restoreGraphicsState()}this.lineWidth=Q}else this.lineWidth=Be,re.call(this,W,V),this.lineWidth=Q;this.path=Je},re=function(W,V){if((W!=="stroke"||V||!x.call(this))&&(W==="stroke"||V||!g.call(this))){for(var K,pe,he=[],te=this.path,le=0;le<te.length;le++){var Q=te[le];switch(Q.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:Q,deltas:[],abs:[]});break;case"lt":var Be=he.length;if(te[le-1]&&!isNaN(te[le-1].x)&&(K=[Q.x-te[le-1].x,Q.y-te[le-1].y],Be>0)){for(;Be>=0;Be--)if(he[Be-1].close!==!0&&he[Be-1].begin!==!0){he[Be-1].deltas.push(K),he[Be-1].abs.push(Q);break}}break;case"bct":K=[Q.x1-te[le-1].x,Q.y1-te[le-1].y,Q.x2-te[le-1].x,Q.y2-te[le-1].y,Q.x-te[le-1].x,Q.y-te[le-1].y],he[he.length-1].deltas.push(K);break;case"qct":var De=te[le-1].x+2/3*(Q.x1-te[le-1].x),Je=te[le-1].y+2/3*(Q.y1-te[le-1].y),me=Q.x+2/3*(Q.x1-Q.x),ee=Q.y+2/3*(Q.y1-Q.y),se=Q.x,de=Q.y;K=[De-te[le-1].x,Je-te[le-1].y,me-te[le-1].x,ee-te[le-1].y,se-te[le-1].x,de-te[le-1].y],he[he.length-1].deltas.push(K);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(Q)}}pe=V?null:W==="stroke"?"stroke":"fill";for(var ze=!1,$e=0;$e<he.length;$e++)if(he[$e].arc)for(var et=he[$e].abs,Ge=0;Ge<et.length;Ge++){var Qe=et[Ge];Qe.type==="arc"?N.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,V,!ze):R.call(this,Qe.x,Qe.y),ze=!0}else if(he[$e].close===!0)this.pdf.internal.out("h"),ze=!1;else if(he[$e].begin!==!0){var Ke=he[$e].start.x,xt=he[$e].start.y;q.call(this,he[$e].deltas,Ke,xt),ze=!0}pe&&F.call(this,pe),V&&Y.call(this)}},ge=function(W){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-K;case"top":return W+V-K;case"hanging":return W+V-2*K;case"middle":return W+V/2-K;case"ideographic":return W;case"alphabetic":default:return W}},fe=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(V,K){this.colorStops.push([V,K])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(W,V,K,pe,he,te,le,Q,Be){for(var De=$.call(this,K,pe,he,te),Je=0;Je<De.length;Je++){var me=De[Je];Je===0&&(Be?B.call(this,me.x1+W,me.y1+V):R.call(this,me.x1+W,me.y1+V)),U.call(this,W,V,me.x2,me.y2,me.x3,me.y3,me.x4,me.y4)}Q?Y.call(this):F.call(this,le)},F=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(W,V){this.pdf.internal.out(n(W)+" "+r(V)+" m")},I=function(W){var V;switch(W.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var K=this.pdf.getTextDimensions(W.text),pe=ge.call(this,W.y),he=fe.call(this,pe)-K.h,te=this.ctx.transform.applyToPoint(new o(W.x,pe)),le=this.ctx.transform.decompose(),Q=new l;Q=(Q=(Q=Q.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var Be,De,Je,me=this.ctx.transform.applyToRectangle(new a(W.x,pe,K.w,K.h)),ee=Q.applyToRectangle(new a(W.x,he,K.w,K.h)),se=k.call(this,ee),de=[],ze=0;ze<se.length;ze+=1)de.indexOf(se[ze])===-1&&de.push(se[ze]);if(z(de),this.autoPaging)for(var $e=de[0],et=de[de.length-1],Ge=$e;Ge<et+1;Ge++){this.pdf.setPage(Ge);var Qe=Ge===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[2],bt=xt-this.margin[0],yt=this.pdf.internal.pageSize.width-this.margin[1],Wt=yt-this.margin[3],tn=Ge===1?0:Ke+(Ge-2)*bt;if(this.ctx.clip_path.length!==0){var yn=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Be,this.posX+this.margin[3],-1*tn+Qe),re.call(this,"fill",!0),this.path=yn}var Ze=D([JSON.parse(JSON.stringify(ee))],this.posX+this.margin[3],-tn+Qe+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*W.scale),Je=this.lineWidth,this.lineWidth=Je*W.scale);var ot=this.autoPaging!=="text";if(ot||Ze.y+Ze.h<=xt){if(ot||Ze.y>=Qe&&Ze.x<=yt){var rt=ot?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||yt-Ze.x)[0],$t=D([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-tn+Qe+this.ctx.prevPageLastElemOffset)[0],Zt=ot&&(Ge>$e||Ge<et)&&E.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,bt,null).clip().discardPath()),this.pdf.text(rt,$t.x,$t.y,{angle:W.angle,align:V,renderingMode:W.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else Ze.y<xt&&(this.ctx.prevPageLastElemOffset+=xt-Ze.y);W.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Je)}else W.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*W.scale),Je=this.lineWidth,this.lineWidth=Je*W.scale),this.pdf.text(W.text,te.x+this.posX,te.y+this.posY,{angle:W.angle,align:V,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Je)},R=function(W,V,K,pe){K=K||0,pe=pe||0,this.pdf.internal.out(n(W+K)+" "+r(V+pe)+" l")},q=function(W,V,K){return this.pdf.lines(W,V,K,null,null)},U=function(W,V,K,pe,he,te,le,Q){this.pdf.internal.out([e(i(K+W)),e(s(pe+V)),e(i(he+W)),e(s(te+V)),e(i(le+W)),e(s(Q+V)),"c"].join(" "))},$=function(W,V,K,pe){for(var he=2*Math.PI,te=Math.PI/2;V>K;)V-=he;var le=Math.abs(K-V);le<he&&pe&&(le=he-le);for(var Q=[],Be=pe?-1:1,De=V;le>1e-5;){var Je=De+Be*Math.min(le,te);Q.push(oe.call(this,W,De,Je)),le-=Math.abs(Je-De),De=Je}return Q},oe=function(W,V,K){var pe=(K-V)/2,he=W*Math.cos(pe),te=W*Math.sin(pe),le=he,Q=-te,Be=le*le+Q*Q,De=Be+le*he+Q*te,Je=4/3*(Math.sqrt(2*Be*De)-De)/(le*te-Q*he),me=le-Je*Q,ee=Q+Je*le,se=me,de=-ee,ze=pe+V,$e=Math.cos(ze),et=Math.sin(ze);return{x1:W*Math.cos(V),y1:W*Math.sin(V),x2:me*$e-ee*et,y2:me*et+ee*$e,x3:se*$e-de*et,y3:se*et+de*$e,x4:W*Math.cos(K),y4:W*Math.sin(K)}},J=function(W){return 180*W/Math.PI},_e=function(W,V,K,pe,he,te){var le=W+.5*(K-W),Q=V+.5*(pe-V),Be=he+.5*(K-he),De=te+.5*(pe-te),Je=Math.min(W,he,le,Be),me=Math.max(W,he,le,Be),ee=Math.min(V,te,Q,De),se=Math.max(V,te,Q,De);return new a(Je,ee,me-Je,se-ee)},ve=function(W,V,K,pe,he,te,le,Q){var Be,De,Je,me,ee,se,de,ze,$e,et,Ge,Qe,Ke,xt,bt=K-W,yt=pe-V,Wt=he-K,tn=te-pe,yn=le-he,Ze=Q-te;for(De=0;De<41;De++)$e=(de=(Je=W+(Be=De/40)*bt)+Be*((ee=K+Be*Wt)-Je))+Be*(ee+Be*(he+Be*yn-ee)-de),et=(ze=(me=V+Be*yt)+Be*((se=pe+Be*tn)-me))+Be*(se+Be*(te+Be*Ze-se)-ze),De==0?(Ge=$e,Qe=et,Ke=$e,xt=et):(Ge=Math.min(Ge,$e),Qe=Math.min(Qe,et),Ke=Math.max(Ke,$e),xt=Math.max(xt,et));return new a(Math.round(Ge),Math.round(Qe),Math.round(Ke-Ge),Math.round(xt-Qe))},ke=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,V,K=(W=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:V}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Nr.API),function(t){var e=function(s){var o,a,l,c,d,p,v,g,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(E=d%85))/85)-(x=d%85))/85)-(g=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,g+33,x+33,E+33)):a.push(122);return function(k,A){for(var D=A;D>0;D--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,p=String,v="length",g=255,x="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[E](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(A,D){for(var z=D;z>0;z--)A.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Cb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Nr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,g=function(x){var E=x.length,k=[],A=String.fromCharCode;for(v=0;v<E;v+=1)k.push(A(255&x.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Nr.API),function(t){function e(){return(jr.html2canvas?Promise.resolve(jr.html2canvas):Mh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(jr.DOMPurify?Promise.resolve(jr.DOMPurify):Mh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=cs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var g=c[v],x=g.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Nr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Nr.getPageSize=function(o,a,l){if(cs(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/d,E=v[p][0]/d;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(g=E,E=x,x=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(g=E,E=x,x=g)}return{width:E,height:x,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Tb):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Nr.API),Nr.API.addJS=function(t){return k5=t,this.internal.events.subscribe("postPutResources",function(){L0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(L0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),M5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){L0!==void 0&&M5!==void 0&&this.internal.out("/Names <</JavaScript "+L0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Nr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},k=4;k<x;k+=2){if(k+=g,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Nr.API);var qf,S0,A5,T5,D5,DH=function(){var t,e,n;function r(s){var o,a,l,c,d,p,v,g,x,E,k,A,D,z;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var X,re;for(re=[],X=0;X<4;++X)re.push(String.fromCharCode(this.data[this.pos++]));return re}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,k.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(z=this.colorType)===4||z===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,g,x){var E,k,A,D,z,X,re,ge,fe,N,F,Y,B,I,R,q,U,$,oe,J,_e,ve=Math.ceil((c.width-p)/g),ke=Math.ceil((c.height-v)/x),W=c.width==ve&&c.height==ke;for(I=o*ve,Y=W?a:new Uint8Array(I*ke),X=s.length,B=0,k=0;B<ke&&l<X;){switch(s[l++]){case 0:for(D=U=0;U<I;D=U+=1)Y[k++]=s[l++];break;case 1:for(D=$=0;$<I;D=$+=1)E=s[l++],z=D<o?0:Y[k-o],Y[k++]=(E+z)%256;break;case 2:for(D=oe=0;oe<I;D=oe+=1)E=s[l++],A=(D-D%o)/o,R=B&&Y[(B-1)*I+A*o+D%o],Y[k++]=(R+E)%256;break;case 3:for(D=J=0;J<I;D=J+=1)E=s[l++],A=(D-D%o)/o,z=D<o?0:Y[k-o],R=B&&Y[(B-1)*I+A*o+D%o],Y[k++]=(E+Math.floor((z+R)/2))%256;break;case 4:for(D=_e=0;_e<I;D=_e+=1)E=s[l++],A=(D-D%o)/o,z=D<o?0:Y[k-o],B===0?R=q=0:(R=Y[(B-1)*I+A*o+D%o],q=A&&Y[(B-1)*I+(A-1)*o+D%o]),re=z+R-q,ge=Math.abs(re-z),N=Math.abs(re-R),F=Math.abs(re-q),fe=ge<=N&&ge<=F?z:N<=F?R:q,Y[k++]=(E+fe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!W){var V=((v+B*x)*c.width+p)*o,K=B*I;for(D=0;D<ve;D+=1){for(var pe=0;pe<o;pe+=1)a[V++]=Y[K++];V+=(g-1)*o}}B++}}return s=cH(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,g;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(g=d[s++])!=null?g:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,g,x,E,k,A;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,d=v=0,l===1)for(;d<x;)g=E?4*o[d/4]:v,k=p[g++],c[d++]=k,c[d++]=k,c[d++]=k,c[d++]=a?p[g++]:255,v=g;else for(;d<x;)g=E?4*o[d/4]:v,c[d++]=p[g++],c[d++]=p[g++],c[d++]=p[g++],c[d++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(jr)==="[object Window]"){try{e=jr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,g;if(this.animation){for(g=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var g,x;if(g=a++%c,x=l[g],v.renderFrame(s,g),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function OH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,g=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),g=E>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,X=t[e++],re=X>>6&1,ge=1<<(7&X)+1,fe=a,N=l,F=!1;X>>7&&(F=!0,fe=e,N=ge,e+=3*ge);var Y=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}d.push({x:k,y:A,width:D,height:z,has_local_palette:F,palette_offset:fe,palette_size:N,data_offset:Y,data_length:e-Y,transparent_index:v,interlaced:!!re,delay:p,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,R){var q=this.frameInfo(I),U=q.width*q.height,$=new Uint8Array(U);O5(t,q.data_offset,$,U);var oe=q.palette_offset,J=q.transparent_index;J===null&&(J=256);var _e=q.width,ve=n-_e,ke=_e,W=4*(q.y*n+q.x),V=4*((q.y+q.height)*n+q.x),K=W,pe=4*ve;q.interlaced===!0&&(pe+=4*n*7);for(var he=8,te=0,le=$.length;te<le;++te){var Q=$[te];if(ke===0&&(ke=_e,(K+=pe)>=V&&(pe=4*ve+4*n*(he-1),K=W+(_e+ve)*(he<<1),he>>=1)),Q===J)K+=4;else{var Be=t[oe+3*Q],De=t[oe+3*Q+1],Je=t[oe+3*Q+2];R[K++]=Je,R[K++]=De,R[K++]=Be,R[K++]=255}--ke}},this.decodeAndBlitFrameRGBA=function(I,R){var q=this.frameInfo(I),U=q.width*q.height,$=new Uint8Array(U);O5(t,q.data_offset,$,U);var oe=q.palette_offset,J=q.transparent_index;J===null&&(J=256);var _e=q.width,ve=n-_e,ke=_e,W=4*(q.y*n+q.x),V=4*((q.y+q.height)*n+q.x),K=W,pe=4*ve;q.interlaced===!0&&(pe+=4*n*7);for(var he=8,te=0,le=$.length;te<le;++te){var Q=$[te];if(ke===0&&(ke=_e,(K+=pe)>=V&&(pe=4*ve+4*n*(he-1),K=W+(_e+ve)*(he<<1),he>>=1)),Q===J)K+=4;else{var Be=t[oe+3*Q],De=t[oe+3*Q+1],Je=t[oe+3*Q+2];R[K++]=Be,R[K++]=De,R[K++]=Je,R[K++]=255}--ke}}}function O5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,g=t[e++],x=new Int32Array(4096),E=null;;){for(;d<16&&g!==0;)p|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var k=p&c;if(p>>=l,d-=l,k!==s){if(k===o)break;for(var A=k<a?k:E,D=0,z=A;z>s;)z=x[z]>>8,++D;var X=z;if(v+D+(A!==k?1:0)>r)return void bs.log("Warning, gif stream longer than expected.");n[v++]=X;var re=v+=D;for(A!==k&&(n[v++]=X),z=A;D--;)z=x[z],n[--re]=255&z,z>>=8;E!==null&&a<4096&&(x[a++]=E<<8|X,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=k}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&bs.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function a2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),x=new Array(64),E=[],k=0,A=7,D=new Array(64),z=new Array(64),X=new Array(64),re=new Array(256),ge=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(W,V){for(var K=0,pe=0,he=new Array,te=1;te<=16;te++){for(var le=1;le<=W[te];le++)he[V[pe]]=[],he[V[pe]][0]=K,he[V[pe]][1]=te,pe++,K++;K*=2}return he}function oe(W){for(var V=W[0],K=W[1]-1;K>=0;)V&1<<K&&(k|=1<<A),K--,--A<0&&(k==255?(J(255),J(0)):J(k),A=7,k=0)}function J(W){E.push(W)}function _e(W){J(W>>8&255),J(255&W)}function ve(W,V,K,pe,he){for(var te,le=he[0],Q=he[240],Be=function(et,Ge){var Qe,Ke,xt,bt,yt,Wt,tn,yn,Ze,ot,rt=0;for(Ze=0;Ze<8;++Ze){Qe=et[rt],Ke=et[rt+1],xt=et[rt+2],bt=et[rt+3],yt=et[rt+4],Wt=et[rt+5],tn=et[rt+6];var $t=Qe+(yn=et[rt+7]),Zt=Qe-yn,Dn=Ke+tn,mn=Ke-tn,An=xt+Wt,Jn=xt-Wt,Qt=bt+yt,xn=bt-yt,Cn=$t+Qt,tr=$t-Qt,vr=Dn+An,xr=Dn-An;et[rt]=Cn+vr,et[rt+4]=Cn-vr;var ur=.707106781*(xr+tr);et[rt+2]=tr+ur,et[rt+6]=tr-ur;var Gr=.382683433*((Cn=xn+Jn)-(xr=mn+Zt)),Fs=.5411961*Cn+Gr,Ti=1.306562965*xr+Gr,Oo=.707106781*(vr=Jn+mn),Ts=Zt+Oo,nr=Zt-Oo;et[rt+5]=nr+Fs,et[rt+3]=nr-Fs,et[rt+1]=Ts+Ti,et[rt+7]=Ts-Ti,rt+=8}for(rt=0,Ze=0;Ze<8;++Ze){Qe=et[rt],Ke=et[rt+8],xt=et[rt+16],bt=et[rt+24],yt=et[rt+32],Wt=et[rt+40],tn=et[rt+48];var Ds=Qe+(yn=et[rt+56]),No=Qe-yn,at=Ke+tn,Ie=Ke-tn,ct=xt+Wt,Ln=xt-Wt,$n=bt+yt,En=bt-yt,jt=Ds+$n,Un=Ds-$n,St=at+ct,qt=at-ct;et[rt]=jt+St,et[rt+32]=jt-St;var Vn=.707106781*(qt+Un);et[rt+16]=Un+Vn,et[rt+48]=Un-Vn;var hr=.382683433*((jt=En+Ln)-(qt=Ie+No)),Lr=.5411961*jt+hr,pn=1.306562965*qt+hr,rn=.707106781*(St=Ln+Ie),zr=No+rn,Br=No-rn;et[rt+40]=Br+Lr,et[rt+24]=Br-Lr,et[rt+8]=zr+pn,et[rt+56]=zr-pn,rt++}for(Ze=0;Ze<64;++Ze)ot=et[Ze]*Ge[Ze],g[Ze]=ot>0?ot+.5|0:ot-.5|0;return g}(W,V),De=0;De<64;++De)x[fe[De]]=Be[De];var Je=x[0]-K;K=x[0],Je==0?oe(pe[0]):(oe(pe[v[te=32767+Je]]),oe(p[te]));for(var me=63;me>0&&x[me]==0;)me--;if(me==0)return oe(le),K;for(var ee,se=1;se<=me;){for(var de=se;x[se]==0&&se<=me;)++se;var ze=se-de;if(ze>=16){ee=ze>>4;for(var $e=1;$e<=ee;++$e)oe(Q);ze&=15}te=32767+x[se],oe(he[(ze<<4)+v[te]]),oe(p[te]),se++}return me!=63&&oe(le),K}function ke(W){W=Math.min(Math.max(W,1),100),s!=W&&(function(V){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var he=o((K[pe]*V+50)/100);he=Math.min(Math.max(he,1),255),a[fe[pe]]=he}for(var te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var Q=o((te[le]*V+50)/100);Q=Math.min(Math.max(Q,1),255),l[fe[le]]=Q}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,Je=0;Je<8;Je++)for(var me=0;me<8;me++)c[De]=1/(a[fe[De]]*Be[Je]*Be[me]*8),d[De]=1/(l[fe[De]]*Be[Je]*Be[me]*8),De++}(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),s=W)}this.encode=function(W,V){V&&ke(V),E=new Array,k=0,A=7,_e(65496),_e(65504),_e(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),_e(1),_e(1),J(0),J(0),function(){_e(65499),_e(132),J(0);for(var Ke=0;Ke<64;Ke++)J(a[Ke]);J(1);for(var xt=0;xt<64;xt++)J(l[xt])}(),function(Ke,xt){_e(65472),_e(17),J(8),_e(xt),_e(Ke),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(W.width,W.height),function(){_e(65476),_e(418),J(0);for(var Ke=0;Ke<16;Ke++)J(N[Ke+1]);for(var xt=0;xt<=11;xt++)J(F[xt]);J(16);for(var bt=0;bt<16;bt++)J(Y[bt+1]);for(var yt=0;yt<=161;yt++)J(B[yt]);J(1);for(var Wt=0;Wt<16;Wt++)J(I[Wt+1]);for(var tn=0;tn<=11;tn++)J(R[tn]);J(17);for(var yn=0;yn<16;yn++)J(q[yn+1]);for(var Ze=0;Ze<=161;Ze++)J(U[Ze])}(),_e(65498),_e(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var K=0,pe=0,he=0;k=0,A=7,this.encode.displayName="_encode_";for(var te,le,Q,Be,De,Je,me,ee,se,de=W.data,ze=W.width,$e=W.height,et=4*ze,Ge=0;Ge<$e;){for(te=0;te<et;){for(De=et*Ge+te,me=-1,ee=0,se=0;se<64;se++)Je=De+(ee=se>>3)*et+(me=4*(7&se)),Ge+ee>=$e&&(Je-=et*(Ge+1+ee-$e)),te+me>=et&&(Je-=te+me-et+4),le=de[Je++],Q=de[Je++],Be=de[Je++],D[se]=(ge[le]+ge[Q+256>>0]+ge[Be+512>>0]>>16)-128,z[se]=(ge[le+768>>0]+ge[Q+1024>>0]+ge[Be+1280>>0]>>16)-128,X[se]=(ge[le+1280>>0]+ge[Q+1536>>0]+ge[Be+1792>>0]>>16)-128;K=ve(D,c,K,e,r),pe=ve(z,d,pe,n,i),he=ve(X,d,he,n,i),te+=32}Ge+=8}if(A>=0){var Qe=[];Qe[1]=A+1,Qe[0]=(1<<A+1)-1,oe(Qe)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var W=String.fromCharCode,V=0;V<256;V++)re[V]=W(V)}(),e=$(N,F),n=$(I,R),r=$(Y,B),i=$(q,U),function(){for(var W=1,V=2,K=1;K<=15;K++){for(var pe=W;pe<V;pe++)v[32767+pe]=K,p[32767+pe]=[],p[32767+pe][1]=K,p[32767+pe][0]=pe;for(var he=-(V-1);he<=-W;he++)v[32767+he]=K,p[32767+he]=[],p[32767+he][1]=K,p[32767+he][0]=V-1+he;W<<=1,V<<=1}}(),function(){for(var W=0;W<256;W++)ge[W]=19595*W,ge[W+256>>0]=38470*W,ge[W+512>>0]=7471*W+32768,ge[W+768>>0]=-11059*W,ge[W+1024>>0]=-21709*W,ge[W+1280>>0]=32768*W+8421375,ge[W+1536>>0]=-27439*W,ge[W+1792>>0]=-5329*W}(),ke(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N5(t){function e(N){if(!N)throw Error("assert :P")}function n(N,F,Y){for(var B=0;4>B;B++)if(N[F+B]!=Y.charCodeAt(B))return!0;return!1}function r(N,F,Y,B,I){for(var R=0;R<I;R++)N[F+R]=Y[B+R]}function i(N,F,Y,B){for(var I=0;I<B;I++)N[F+I]=Y}function s(N){return new Int32Array(N)}function o(N,F){for(var Y=[],B=0;B<N;B++)Y.push(new F);return Y}function a(N,F){var Y=[];return function B(I,R,q){for(var U=q[R],$=0;$<U&&(I.push(q.length>R+1?[]:new F),!(q.length<R+1));$++)B(I[$],R+1,q)}(Y,0,N),Y}var l=function(){var N=this;function F(w,T){for(var Z=1<<T-1>>>0;w&Z;)Z>>>=1;return Z?(w&Z-1)+Z:w}function Y(w,T,Z,ce,xe){e(!(ce%Z));do w[T+(ce-=Z)]=xe;while(0<ce)}function B(w,T,Z,ce,xe){if(e(2328>=xe),512>=xe)var Ee=s(512);else if((Ee=s(xe))==null)return 0;return function(Me,Te,Re,qe,pt,Rt){var Ft,Mt,Kt=Te,Gt=1<<Re,gt=s(16),wt=s(16);for(e(pt!=0),e(qe!=null),e(Me!=null),e(0<Re),Mt=0;Mt<pt;++Mt){if(15<qe[Mt])return 0;++gt[qe[Mt]]}if(gt[0]==pt)return 0;for(wt[1]=0,Ft=1;15>Ft;++Ft){if(gt[Ft]>1<<Ft)return 0;wt[Ft+1]=wt[Ft]+gt[Ft]}for(Mt=0;Mt<pt;++Mt)Ft=qe[Mt],0<qe[Mt]&&(Rt[wt[Ft]++]=Mt);if(wt[15]==1)return(qe=new I).g=0,qe.value=Rt[0],Y(Me,Kt,1,Gt,qe),Gt;var nn,fn=-1,on=Gt-1,Bn=0,On=1,or=1,h=1<<Re;for(Mt=0,Ft=1,pt=2;Ft<=Re;++Ft,pt<<=1){if(On+=or<<=1,0>(or-=gt[Ft]))return 0;for(;0<gt[Ft];--gt[Ft])(qe=new I).g=Ft,qe.value=Rt[Mt++],Y(Me,Kt+Bn,pt,h,qe),Bn=F(Bn,Ft)}for(Ft=Re+1,pt=2;15>=Ft;++Ft,pt<<=1){if(On+=or<<=1,0>(or-=gt[Ft]))return 0;for(;0<gt[Ft];--gt[Ft]){if(qe=new I,(Bn&on)!=fn){for(Kt+=h,nn=1<<(fn=Ft)-Re;15>fn&&!(0>=(nn-=gt[fn]));)++fn,nn<<=1;Gt+=h=1<<(nn=fn-Re),Me[Te+(fn=Bn&on)].g=nn+Re,Me[Te+fn].value=Kt-Te-fn}qe.g=Ft-Re,qe.value=Rt[Mt++],Y(Me,Kt+(Bn>>Re),pt,h,qe),Bn=F(Bn,Ft)}}return On!=2*wt[15]-1?0:Gt}(w,T,Z,ce,xe,Ee)}function I(){this.value=this.g=0}function R(){this.value=this.g=0}function q(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ss,R)}function U(w,T,Z,ce){e(w!=null),e(T!=null),e(2147483648>ce),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=Z,w.Jd=T,w.Yc=Z+ce,w.Zc=4<=ce?Z+ce-4+1:Z,te(w)}function $(w,T){for(var Z=0;0<T--;)Z|=Q(w,128)<<T;return Z}function oe(w,T){var Z=$(w,T);return le(w)?-Z:Z}function J(w,T,Z,ce){var xe,Ee=0;for(e(w!=null),e(T!=null),e(4294967288>ce),w.Sb=ce,w.Ra=0,w.u=0,w.h=0,4<ce&&(ce=4),xe=0;xe<ce;++xe)Ee+=T[Z+xe]<<8*xe;w.Ra=Ee,w.bb=ce,w.oa=T,w.pa=Z}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Io-8>>>0,++w.bb,w.u-=8;K(w)&&(w.h=1,w.u=0)}function ve(w,T){if(e(0<=T),!w.h&&T<=ea){var Z=V(w)&Na[T];return w.u+=T,_e(w),Z}return w.h=1,w.u=0}function ke(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(w){return w.Ra>>>(w.u&Io-1)>>>0}function K(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Io}function pe(w,T){w.u=T,w.h=K(w)}function he(w){w.u>=zl&&(e(w.u>=zl),_e(w))}function te(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function le(w){return $(w,1)}function Q(w,T){var Z=w.Ca;0>w.b&&te(w);var ce=w.b,xe=Z*T>>>8,Ee=(w.I>>>ce>xe)+0;for(Ee?(Z-=xe,w.I-=xe+1<<ce>>>0):Z=xe+1,ce=Z,xe=0;256<=ce;)xe+=8,ce>>=8;return ce=7^xe+no[ce],w.b-=ce,w.Ca=(Z<<ce)-1,Ee}function Be(w,T,Z){w[T+0]=Z>>24&255,w[T+1]=Z>>16&255,w[T+2]=Z>>8&255,w[T+3]=Z>>0&255}function De(w,T){return w[T+0]<<0|w[T+1]<<8}function Je(w,T){return De(w,T)|w[T+2]<<16}function me(w,T){return De(w,T)|De(w,T+2)<<16}function ee(w,T){var Z=1<<T;return e(w!=null),e(0<T),w.X=s(Z),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function se(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function ze(w,T,Z,ce){e(Z!=null),e(ce!=null);var xe=Z[0],Ee=ce[0];return xe==0&&(xe=(w*Ee+T/2)/T),Ee==0&&(Ee=(T*xe+w/2)/w),0>=xe||0>=Ee?0:(Z[0]=xe,ce[0]=Ee,1)}function $e(w,T){return w+(1<<T)-1>>>T}function et(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function Ge(w,T){N[T]=function(Z,ce,xe,Ee,Me,Te,Re){var qe;for(qe=0;qe<Me;++qe){var pt=N[w](Te[Re+qe-1],xe,Ee+qe);Te[Re+qe]=et(Z[ce+qe],pt)}}}function Qe(){this.ud=this.hd=this.jd=0}function Ke(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function xt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function bt(w,T){return xt(w+(w-T+.5>>1))}function yt(w,T,Z){return Math.abs(T-Z)-Math.abs(w-Z)}function Wt(w,T,Z,ce,xe,Ee,Me){for(ce=Ee[Me-1],Z=0;Z<xe;++Z)Ee[Me+Z]=ce=et(w[T+Z],ce)}function tn(w,T,Z,ce,xe){var Ee;for(Ee=0;Ee<Z;++Ee){var Me=w[T+Ee],Te=Me>>8&255,Re=16711935&(Re=(Re=16711935&Me)+((Te<<16)+Te));ce[xe+Ee]=(4278255360&Me)+Re>>>0}}function yn(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Ze(w,T,Z,ce,xe,Ee){var Me;for(Me=0;Me<ce;++Me){var Te=T[Z+Me],Re=Te>>>8,qe=Te,pt=255&(pt=(pt=Te>>>16)+((w.jd<<24>>24)*(Re<<24>>24)>>>5));qe=255&(qe=(qe=qe+((w.hd<<24>>24)*(Re<<24>>24)>>>5))+((w.ud<<24>>24)*(pt<<24>>24)>>>5)),xe[Ee+Me]=(4278255360&Te)+(pt<<16)+qe}}function ot(w,T,Z,ce,xe){N[T]=function(Ee,Me,Te,Re,qe,pt,Rt,Ft,Mt){for(Re=Rt;Re<Ft;++Re)for(Rt=0;Rt<Mt;++Rt)qe[pt++]=xe(Te[ce(Ee[Me++])])},N[w]=function(Ee,Me,Te,Re,qe,pt,Rt){var Ft=8>>Ee.b,Mt=Ee.Ea,Kt=Ee.K[0],Gt=Ee.w;if(8>Ft)for(Ee=(1<<Ee.b)-1,Gt=(1<<Ft)-1;Me<Te;++Me){var gt,wt=0;for(gt=0;gt<Mt;++gt)gt&Ee||(wt=ce(Re[qe++])),pt[Rt++]=xe(Kt[wt&Gt]),wt>>=Ft}else N["VP8LMapColor"+Z](Re,qe,Kt,Gt,pt,Rt,Me,Te,Mt)}}function rt(w,T,Z,ce,xe){for(Z=T+Z;T<Z;){var Ee=w[T++];ce[xe++]=Ee>>16&255,ce[xe++]=Ee>>8&255,ce[xe++]=Ee>>0&255}}function $t(w,T,Z,ce,xe){for(Z=T+Z;T<Z;){var Ee=w[T++];ce[xe++]=Ee>>16&255,ce[xe++]=Ee>>8&255,ce[xe++]=Ee>>0&255,ce[xe++]=Ee>>24&255}}function Zt(w,T,Z,ce,xe){for(Z=T+Z;T<Z;){var Ee=(Me=w[T++])>>16&240|Me>>12&15,Me=Me>>0&240|Me>>28&15;ce[xe++]=Ee,ce[xe++]=Me}}function Dn(w,T,Z,ce,xe){for(Z=T+Z;T<Z;){var Ee=(Me=w[T++])>>16&248|Me>>13&7,Me=Me>>5&224|Me>>3&31;ce[xe++]=Ee,ce[xe++]=Me}}function mn(w,T,Z,ce,xe){for(Z=T+Z;T<Z;){var Ee=w[T++];ce[xe++]=Ee>>0&255,ce[xe++]=Ee>>8&255,ce[xe++]=Ee>>16&255}}function An(w,T,Z,ce,xe,Ee){if(Ee==0)for(Z=T+Z;T<Z;)Be(ce,((Ee=w[T++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),xe+=32;else r(ce,xe,w,T,Z)}function Jn(w,T){N[T][0]=N[w+"0"],N[T][1]=N[w+"1"],N[T][2]=N[w+"2"],N[T][3]=N[w+"3"],N[T][4]=N[w+"4"],N[T][5]=N[w+"5"],N[T][6]=N[w+"6"],N[T][7]=N[w+"7"],N[T][8]=N[w+"8"],N[T][9]=N[w+"9"],N[T][10]=N[w+"10"],N[T][11]=N[w+"11"],N[T][12]=N[w+"12"],N[T][13]=N[w+"13"],N[T][14]=N[w+"0"],N[T][15]=N[w+"0"]}function Qt(w){return w==Us||w==Hs||w==wa||w==u}function xn(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xn,this.f.kb=new Cn,this.sd=null}function vr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ur(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Gr(w,T){var Z=w.T,ce=T.ba.f.RGBA,xe=ce.eb,Ee=ce.fb+w.ka*ce.A,Me=lo[T.ba.S],Te=w.y,Re=w.O,qe=w.f,pt=w.N,Rt=w.ea,Ft=w.W,Mt=T.cc,Kt=T.dc,Gt=T.Mc,gt=T.Nc,wt=w.ka,nn=w.ka+w.T,fn=w.U,on=fn+1>>1;for(wt==0?Me(Te,Re,null,null,qe,pt,Rt,Ft,qe,pt,Rt,Ft,xe,Ee,null,null,fn):(Me(T.ec,T.fc,Te,Re,Mt,Kt,Gt,gt,qe,pt,Rt,Ft,xe,Ee-ce.A,xe,Ee,fn),++Z);wt+2<nn;wt+=2)Mt=qe,Kt=pt,Gt=Rt,gt=Ft,pt+=w.Rc,Ft+=w.Rc,Ee+=2*ce.A,Me(Te,(Re+=2*w.fa)-w.fa,Te,Re,Mt,Kt,Gt,gt,qe,pt,Rt,Ft,xe,Ee-ce.A,xe,Ee,fn);return Re+=w.fa,w.j+nn<w.o?(r(T.ec,T.fc,Te,Re,fn),r(T.cc,T.dc,qe,pt,on),r(T.Mc,T.Nc,Rt,Ft,on),Z--):1&nn||Me(Te,Re,null,null,qe,pt,Rt,Ft,qe,pt,Rt,Ft,xe,Ee+ce.A,null,null,fn),Z}function Fs(w,T,Z){var ce=w.F,xe=[w.J];if(ce!=null){var Ee=w.U,Me=T.ba.S,Te=Me==_a||Me==wa;T=T.ba.f.RGBA;var Re=[0],qe=w.ka;Re[0]=w.T,w.Kb&&(qe==0?--Re[0]:(--qe,xe[0]-=w.width),w.j+w.ka+w.T==w.o&&(Re[0]=w.o-w.j-qe));var pt=T.eb;qe=T.fb+qe*T.A,w=Ii(ce,xe[0],w.width,Ee,Re,pt,qe+(Te?0:3),T.A),e(Z==Re),w&&Qt(Me)&&Vs(pt,qe,Te,Ee,Re,T.A)}return 0}function Ti(w){var T=w.ma,Z=T.ba.S,ce=11>Z,xe=Z==wr||Z==tl||Z==_a||Z==Lo||Z==12||Qt(Z);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Ju(T.Oa,w,xe?11:12))return 0;if(xe&&Qt(Z)&&dn(),w.da)alert("todo:use_scaling");else{if(ce){if(T.Ib=ur,w.Kb){if(Z=w.U+1>>1,T.memory=s(w.U+2*Z),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+Z,T.Ib=Gr,dn()}}else alert("todo:EmitYUV");xe&&(T.Jb=Fs,ce&&kt())}if(ce&&!Ac){for(w=0;256>w;++w)Vh[w]=89858*(w-128)+Ll>>$h,Uh[w]=-22014*(w-128)+Ll,$p[w]=-45773*(w-128),fu[w]=113618*(w-128)+Ll>>$h;for(w=oh;w<Td;++w)T=76283*(w-16)+Ll>>$h,Hh[w-oh]=Ur(T,255),Mf[w-oh]=Ur(T+8>>4,15);Ac=1}return 1}function Oo(w){var T=w.ma,Z=w.U,ce=w.T;return e(!(1&w.ka)),0>=Z||0>=ce?0:(Z=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,Z),T.Dc+=Z,1)}function Ts(w){w.ma.memory=null}function nr(w,T,Z,ce){return ve(w,8)!=47?0:(T[0]=ve(w,14)+1,Z[0]=ve(w,14)+1,ce[0]=ve(w,1),ve(w,3)!=0?0:!w.h)}function Ds(w,T){if(4>w)return w+1;var Z=w-2>>1;return(2+(1&w)<<Z)+ve(T,Z)+1}function No(w,T){return 120<T?T-120:1<=(Z=((Z=lt[T-1])>>4)*w+(8-(15&Z)))?Z:1;var Z}function at(w,T,Z){var ce=V(Z),xe=w[T+=255&ce].g-8;return 0<xe&&(pe(Z,Z.u+8),ce=V(Z),T+=w[T].value,T+=ce&(1<<xe)-1),pe(Z,Z.u+w[T].g),w[T].value}function Ie(w,T,Z){return Z.g+=w.g,Z.value+=w.value<<T>>>0,e(8>=Z.g),w.g}function ct(w,T,Z){var ce=w.xc;return e((T=ce==0?0:w.vc[w.md*(Z>>ce)+(T>>ce)])<w.Wb),w.Ya[T]}function Ln(w,T,Z,ce){var xe=w.ab,Ee=w.c*T,Me=w.C;T=Me+T;var Te=Z,Re=ce;for(ce=w.Ta,Z=w.Ua;0<xe--;){var qe=w.gc[xe],pt=Me,Rt=T,Ft=Te,Mt=Re,Kt=(Re=ce,Te=Z,qe.Ea);switch(e(pt<Rt),e(Rt<=qe.nc),qe.hc){case 2:kc(Ft,Mt,(Rt-pt)*Kt,Re,Te);break;case 0:var Gt=pt,gt=Rt,wt=Re,nn=Te,fn=(h=qe).Ea;Gt==0&&(_o(Ft,Mt,null,null,1,wt,nn),Wt(Ft,Mt+1,0,0,fn-1,wt,nn+1),Mt+=fn,nn+=fn,++Gt);for(var on=1<<h.b,Bn=on-1,On=$e(fn,h.b),or=h.K,h=h.w+(Gt>>h.b)*On;Gt<gt;){var m=or,_=h,S=1;for(wo(Ft,Mt,wt,nn-fn,1,wt,nn);S<fn;){var M=(S&~Bn)+on;M>fn&&(M=fn),(0,Xa[m[_++]>>8&15])(Ft,Mt+ +S,wt,nn+S-fn,M-S,wt,nn+S),S=M}Mt+=fn,nn+=fn,++Gt&Bn||(h+=On)}Rt!=qe.nc&&r(Re,Te-Kt,Re,Te+(Rt-pt-1)*Kt,Kt);break;case 1:for(Kt=Ft,gt=Mt,fn=(Ft=qe.Ea)-(nn=Ft&~(wt=(Mt=1<<qe.b)-1)),Gt=$e(Ft,qe.b),on=qe.K,qe=qe.w+(pt>>qe.b)*Gt;pt<Rt;){for(Bn=on,On=qe,or=new Qe,h=gt+nn,m=gt+Ft;gt<h;)yn(Bn[On++],or),Ja(or,Kt,gt,Mt,Re,Te),gt+=Mt,Te+=Mt;gt<m&&(yn(Bn[On++],or),Ja(or,Kt,gt,fn,Re,Te),gt+=fn,Te+=fn),++pt&wt||(qe+=Gt)}break;case 3:if(Ft==Re&&Mt==Te&&0<qe.b){for(gt=Re,Ft=Kt=Te+(Rt-pt)*Kt-(nn=(Rt-pt)*$e(qe.Ea,qe.b)),Mt=Re,wt=Te,Gt=[],nn=(fn=nn)-1;0<=nn;--nn)Gt[nn]=Mt[wt+nn];for(nn=fn-1;0<=nn;--nn)gt[Ft+nn]=Gt[nn];Os(qe,pt,Rt,Re,Kt,Re,Te)}else Os(qe,pt,Rt,Ft,Mt,Re,Te)}Te=ce,Re=Z}Re!=Z&&r(ce,Z,Te,Re,Ee)}function $n(w,T){var Z=w.V,ce=w.Ba+w.c*w.C,xe=T-w.C;if(e(T<=w.l.o),e(16>=xe),0<xe){var Ee=w.l,Me=w.Ta,Te=w.Ua,Re=Ee.width;if(Ln(w,xe,Z,ce),xe=Te=[Te],e((Z=w.C)<(ce=T)),e(Ee.v<Ee.va),ce>Ee.o&&(ce=Ee.o),Z<Ee.j){var qe=Ee.j-Z;Z=Ee.j,xe[0]+=qe*Re}if(Z>=ce?Z=0:(xe[0]+=4*Ee.v,Ee.ka=Z-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=ce-Z,Z=1),Z){if(Te=Te[0],11>(Z=w.ca).S){var pt=Z.f.RGBA,Rt=(ce=Z.S,xe=Ee.U,Ee=Ee.T,qe=pt.eb,pt.A),Ft=Ee;for(pt=pt.fb+w.Ma*pt.A;0<Ft--;){var Mt=Me,Kt=Te,Gt=xe,gt=qe,wt=pt;switch(ce){case Ro:so(Mt,Kt,Gt,gt,wt);break;case wr:$s(Mt,Kt,Gt,gt,wt);break;case Us:$s(Mt,Kt,Gt,gt,wt),Vs(gt,wt,0,Gt,1,0);break;case el:oo(Mt,Kt,Gt,gt,wt);break;case tl:An(Mt,Kt,Gt,gt,wt,1);break;case Hs:An(Mt,Kt,Gt,gt,wt,1),Vs(gt,wt,0,Gt,1,0);break;case _a:An(Mt,Kt,Gt,gt,wt,0);break;case wa:An(Mt,Kt,Gt,gt,wt,0),Vs(gt,wt,1,Gt,1,0);break;case Lo:Ia(Mt,Kt,Gt,gt,wt);break;case u:Ia(Mt,Kt,Gt,gt,wt),Mi(gt,wt,Gt,1,0);break;case ih:ta(Mt,Kt,Gt,gt,wt);break;default:e(0)}Te+=Re,pt+=Rt}w.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=Z.height)}}w.C=T,e(w.C<=w.i)}function En(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var Z=w.Ya[T].G,ce=w.Ya[T].H;if(0<Z[1][ce[1]+0].g||0<Z[2][ce[2]+0].g||0<Z[3][ce[3]+0].g)return 0}return 1}function jt(w,T,Z,ce,xe,Ee){if(w.Z!=0){var Me=w.qd,Te=w.rd;for(e(_i[w.Z]!=null);T<Z;++T)_i[w.Z](Me,Te,ce,xe,ce,xe,Ee),Me=ce,Te=xe,xe+=Ee;w.qd=Me,w.rd=Te}}function Un(w,T){var Z=w.l.ma,ce=Z.Z==0||Z.Z==1?w.l.j:w.C;if(ce=w.C<ce?ce:w.C,e(T<=w.l.o),T>ce){var xe=w.l.width,Ee=Z.ca,Me=Z.tb+xe*ce,Te=w.V,Re=w.Ba+w.c*ce,qe=w.gc;e(w.ab==1),e(qe[0].hc==3),ro(qe[0],ce,T,Te,Re,Ee,Me),jt(Z,ce,T,Ee,Me,xe)}w.C=w.Ma=T}function St(w,T,Z,ce,xe,Ee,Me){var Te=w.$/ce,Re=w.$%ce,qe=w.m,pt=w.s,Rt=Z+w.$,Ft=Rt;xe=Z+ce*xe;var Mt=Z+ce*Ee,Kt=280+pt.ua,Gt=w.Pb?Te:16777216,gt=0<pt.ua?pt.Wa:null,wt=pt.wc,nn=Rt<Mt?ct(pt,Re,Te):null;e(w.C<Ee),e(Mt<=xe);var fn=!1;e:for(;;){for(;fn||Rt<Mt;){var on=0;if(Te>=Gt){var Bn=Rt-Z;e((Gt=w).Pb),Gt.wd=Gt.m,Gt.xd=Bn,0<Gt.s.ua&&se(Gt.s.Wa,Gt.s.vb),Gt=Te+Ht}if(Re&wt||(nn=ct(pt,Re,Te)),e(nn!=null),nn.Qb&&(T[Rt]=nn.qb,fn=!0),!fn)if(he(qe),nn.jc){on=qe,Bn=T;var On=Rt,or=nn.pd[V(on)&Ss-1];e(nn.jc),256>or.g?(pe(on,on.u+or.g),Bn[On]=or.value,on=0):(pe(on,on.u+or.g-256),e(256<=or.value),on=or.value),on==0&&(fn=!0)}else on=at(nn.G[0],nn.H[0],qe);if(qe.h)break;if(fn||256>on){if(!fn)if(nn.nd)T[Rt]=(nn.qb|on<<8)>>>0;else{if(he(qe),fn=at(nn.G[1],nn.H[1],qe),he(qe),Bn=at(nn.G[2],nn.H[2],qe),On=at(nn.G[3],nn.H[3],qe),qe.h)break;T[Rt]=(On<<24|fn<<16|on<<8|Bn)>>>0}if(fn=!1,++Rt,++Re>=ce&&(Re=0,++Te,Me!=null&&Te<=Ee&&!(Te%16)&&Me(w,Te),gt!=null))for(;Ft<Rt;)on=T[Ft++],gt.X[(506832829*on&4294967295)>>>gt.Mb]=on}else if(280>on){if(on=Ds(on-256,qe),Bn=at(nn.G[4],nn.H[4],qe),he(qe),Bn=No(ce,Bn=Ds(Bn,qe)),qe.h)break;if(Rt-Z<Bn||xe-Rt<on)break e;for(On=0;On<on;++On)T[Rt+On]=T[Rt+On-Bn];for(Rt+=on,Re+=on;Re>=ce;)Re-=ce,++Te,Me!=null&&Te<=Ee&&!(Te%16)&&Me(w,Te);if(e(Rt<=xe),Re&wt&&(nn=ct(pt,Re,Te)),gt!=null)for(;Ft<Rt;)on=T[Ft++],gt.X[(506832829*on&4294967295)>>>gt.Mb]=on}else{if(!(on<Kt))break e;for(fn=on-280,e(gt!=null);Ft<Rt;)on=T[Ft++],gt.X[(506832829*on&4294967295)>>>gt.Mb]=on;on=Rt,e(!(fn>>>(Bn=gt).Xa)),T[on]=Bn.X[fn],fn=!0}fn||e(qe.h==K(qe))}if(w.Pb&&qe.h&&Rt<xe)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&se(w.s.vb,w.s.Wa);else{if(qe.h)break e;Me!=null&&Me(w,Te>Ee?Ee:Te),w.a=0,w.$=Rt-Z}return 1}return w.a=3,0}function qt(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function Vn(){var w=new Rl;return w==null?null:(w.a=0,w.xb=Du,Jn("Predictor","VP8LPredictors"),Jn("Predictor","VP8LPredictors_C"),Jn("PredictorAdd","VP8LPredictorsAdd"),Jn("PredictorAdd","VP8LPredictorsAdd_C"),kc=tn,Ja=Ze,so=rt,$s=$t,Ia=Zt,ta=Dn,oo=mn,N.VP8LMapColor32b=Za,N.VP8LMapColor8b=io,w)}function hr(w,T,Z,ce,xe){var Ee=1,Me=[w],Te=[T],Re=ce.m,qe=ce.s,pt=null,Rt=0;e:for(;;){if(Z)for(;Ee&&ve(Re,1);){var Ft=Me,Mt=Te,Kt=ce,Gt=1,gt=Kt.m,wt=Kt.gc[Kt.ab],nn=ve(gt,2);if(Kt.Oc&1<<nn)Ee=0;else{switch(Kt.Oc|=1<<nn,wt.hc=nn,wt.Ea=Ft[0],wt.nc=Mt[0],wt.K=[null],++Kt.ab,e(4>=Kt.ab),nn){case 0:case 1:wt.b=ve(gt,3)+2,Gt=hr($e(wt.Ea,wt.b),$e(wt.nc,wt.b),0,Kt,wt.K),wt.K=wt.K[0];break;case 3:var fn,on=ve(gt,8)+1,Bn=16<on?0:4<on?1:2<on?2:3;if(Ft[0]=$e(wt.Ea,Bn),wt.b=Bn,fn=Gt=hr(on,1,0,Kt,wt.K)){var On,or=on,h=wt,m=1<<(8>>h.b),_=s(m);if(_==null)fn=0;else{var S=h.K[0],M=h.w;for(_[0]=h.K[0][0],On=1;On<1*or;++On)_[On]=et(S[M+On],_[On-1]);for(;On<4*m;++On)_[On]=0;h.K[0]=null,h.K[0]=_,fn=1}}Gt=fn;break;case 2:break;default:e(0)}Ee=Gt}}if(Me=Me[0],Te=Te[0],Ee&&ve(Re,1)&&!(Ee=1<=(Rt=ve(Re,4))&&11>=Rt)){ce.a=3;break e}var H;if(H=Ee)t:{var ne,ae,ye,Se=ce,nt=Me,We=Te,_t=Rt,It=Z,en=Se.m,_n=Se.s,Pn=[null],br=1,tt=0,it=Ot[_t];n:for(;;){if(It&&ve(en,1)){var ft=ve(en,3)+2,zt=$e(nt,ft),Pt=$e(We,ft),Bt=zt*Pt;if(!hr(zt,Pt,0,Se,Pn))break n;for(Pn=Pn[0],_n.xc=ft,ne=0;ne<Bt;++ne){var be=Pn[ne]>>8&65535;Pn[ne]=be,be>=br&&(br=be+1)}}if(en.h)break n;for(ae=0;5>ae;++ae){var Pe=G[ae];!ae&&0<_t&&(Pe+=1<<_t),tt<Pe&&(tt=Pe)}var je=o(br*it,I),Fe=br,Ue=o(Fe,q);if(Ue==null)var He=null;else e(65536>=Fe),He=Ue;var ut=s(tt);if(He==null||ut==null||je==null){Se.a=1;break n}var ht=je;for(ne=ye=0;ne<br;++ne){var mt=He[ne],At=mt.G,Tt=mt.H,ln=0,Wn=1,Kn=0;for(ae=0;5>ae;++ae){Pe=G[ae],At[ae]=ht,Tt[ae]=ye,!ae&&0<_t&&(Pe+=1<<_t);i:{var ar,wi=Pe,Bi=Se,ni=ut,Hi=ht,zo=ye,tc=0,Va=Bi.m,Dd=ve(Va,1);if(i(ni,0,0,wi),Dd){var Sl=ve(Va,1)+1,Tc=ve(Va,1),Ua=ve(Va,Tc==0?1:8);ni[Ua]=1,Sl==2&&(ni[Ua=ve(Va,8)]=1);var uo=1}else{var ys=s(19),Of=ve(Va,4)+4;if(19<Of){Bi.a=3;var Od=0;break i}for(ar=0;ar<Of;++ar)ys[Ce[ar]]=ve(Va,3);var Nd=void 0,Id=void 0,Nf=Bi,li=ys,If=wi,zm=ni,ah=0,nc=Nf.m,$m=8,Vm=o(128,I);r:for(;B(Vm,0,7,li,19);){if(ve(nc,1)){var $l=2+2*ve(nc,3);if((Nd=2+ve(nc,$l))>If)break r}else Nd=If;for(Id=0;Id<If&&Nd--;){he(nc);var Um=Vm[0+(127&V(nc))];pe(nc,nc.u+Um.g);var rc=Um.value;if(16>rc)zm[Id++]=rc,rc!=0&&($m=rc);else{var Vp=rc==16,Up=rc-16,Hm=P[Up],rl=ve(nc,y[Up])+Hm;if(Id+rl>If)break r;for(var Dc=Vp?$m:0;0<rl--;)zm[Id++]=Dc}}ah=1;break r}ah||(Nf.a=3),uo=ah}(uo=uo&&!Va.h)&&(tc=B(Hi,zo,8,ni,wi)),uo&&tc!=0?Od=tc:(Bi.a=3,Od=0)}if(Od==0)break n;if(Wn&&ue[ae]==1&&(Wn=ht[ye].g==0),ln+=ht[ye].g,ye+=Od,3>=ae){var lh,Bf=ut[0];for(lh=1;lh<Pe;++lh)ut[lh]>Bf&&(Bf=ut[lh]);Kn+=Bf}}if(mt.nd=Wn,mt.Qb=0,Wn&&(mt.qb=(At[3][Tt[3]+0].value<<24|At[1][Tt[1]+0].value<<16|At[2][Tt[2]+0].value)>>>0,ln==0&&256>At[0][Tt[0]+0].value&&(mt.Qb=1,mt.qb+=At[0][Tt[0]+0].value<<8)),mt.jc=!mt.Qb&&6>Kn,mt.jc){var uh,Ou=mt;for(uh=0;uh<Ss;++uh){var Nu=uh,ic=Ou.pd[Nu],Wh=Ou.G[0][Ou.H[0]+Nu];256<=Wh.value?(ic.g=Wh.g+256,ic.value=Wh.value):(ic.g=0,ic.value=0,Nu>>=Ie(Wh,8,ic),Nu>>=Ie(Ou.G[1][Ou.H[1]+Nu],16,ic),Nu>>=Ie(Ou.G[2][Ou.H[2]+Nu],0,ic),Ie(Ou.G[3][Ou.H[3]+Nu],24,ic))}}}_n.vc=Pn,_n.Wb=br,_n.Ya=He,_n.yc=je,H=1;break t}H=0}if(!(Ee=H)){ce.a=3;break e}if(0<Rt){if(qe.ua=1<<Rt,!ee(qe.Wa,Rt)){ce.a=1,Ee=0;break e}}else qe.ua=0;var Bd=ce,sc=Me,Jy=Te,Iu=Bd.s,Rf=Iu.xc;if(Bd.c=sc,Bd.i=Jy,Iu.md=$e(sc,Rf),Iu.wc=Rf==0?-1:(1<<Rf)-1,Z){ce.xb=Ad;break e}if((pt=s(Me*Te))==null){ce.a=1,Ee=0;break e}Ee=(Ee=St(ce,pt,0,Me,Te,Te,null))&&!Re.h;break e}return Ee?(xe!=null?xe[0]=pt:(e(pt==null),e(Z)),ce.$=0,Z||qt(qe)):qt(qe),Ee}function Lr(w,T){var Z=w.c*w.i,ce=Z+T+16*T;return e(w.c<=T),w.V=s(ce),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+Z+T,1)}function pn(w,T){var Z=w.C,ce=T-Z,xe=w.V,Ee=w.Ba+w.c*Z;for(e(T<=w.l.o);0<ce;){var Me=16<ce?16:ce,Te=w.l.ma,Re=w.l.width,qe=Re*Me,pt=Te.ca,Rt=Te.tb+Re*Z,Ft=w.Ta,Mt=w.Ua;Ln(w,Me,xe,Ee),vs(Ft,Mt,pt,Rt,qe),jt(Te,Z,Z+Me,pt,Rt,Re),ce-=Me,xe+=Me*w.c,Z+=Me}e(Z==T),w.C=w.Ma=T}function rn(){this.ub=this.yd=this.td=this.Rb=0}function zr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Br(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zi(){this.Yb=function(){var w=[];return function T(Z,ce,xe){for(var Ee=xe[ce],Me=0;Me<Ee&&(Z.push(xe.length>ce+1?[]:0),!(xe.length<ce+1));Me++)T(Z[Me],ce+1,xe)}(w,0,[3,11]),w}()}function Xr(){this.jb=s(3),this.Wc=a([4,8],zi),this.Xc=a([4,17],zi)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ar(){this.ld=this.La=this.dd=this.tc=0}function hi(){this.Na=this.la=0}function Rr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function an(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ni(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ar),this.Y=0,this.ya=Array(new an),this.aa=0,this.l=new Jr}function vi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ki(){this.cb=this.a=0,this.sc="",this.m=new ke,this.Od=new rn,this.Kc=new zr,this.ed=new _r,this.Qa=new Br,this.Ic=this.$c=this.Aa=0,this.D=new Ni,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ke),this.ia=0,this.pb=o(4,Rr),this.Pa=new Xr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vi),this.Hd=0,this.rb=Array(new hi),this.sb=0,this.wa=Array(new Ar),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new an),this.L=this.aa=0,this.gd=a([4,2],Ar),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Jr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function dr(){var w=new Ki;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,sr||(sr=mo)),w}function Tn(w,T,Z){return w.a==0&&(w.a=T,w.sc=Z,w.cb=0),0}function Sr(w,T,Z){return 3<=Z&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function ws(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return Tn(w,2,"null VP8Io passed to VP8GetHeaders()");var Z=T.data,ce=T.w,xe=T.ha;if(4>xe)return Tn(w,7,"Truncated header.");var Ee=Z[ce+0]|Z[ce+1]<<8|Z[ce+2]<<16,Me=w.Od;if(Me.Rb=!(1&Ee),Me.td=Ee>>1&7,Me.yd=Ee>>4&1,Me.ub=Ee>>5,3<Me.td)return Tn(w,3,"Incorrect keyframe parameters.");if(!Me.yd)return Tn(w,4,"Frame not displayable.");ce+=3,xe-=3;var Te=w.Kc;if(Me.Rb){if(7>xe)return Tn(w,7,"cannot parse picture header");if(!Sr(Z,ce,xe))return Tn(w,3,"Bad code word");Te.c=16383&(Z[ce+4]<<8|Z[ce+3]),Te.Td=Z[ce+4]>>6,Te.i=16383&(Z[ce+6]<<8|Z[ce+5]),Te.Ud=Z[ce+6]>>6,ce+=7,xe-=7,w.za=Te.c+15>>4,w.Ub=Te.i+15>>4,T.width=Te.c,T.height=Te.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Ee=w.Pa).jb,0,255,Ee.jb.length),e((Ee=w.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Me.ub>xe)return Tn(w,7,"bad partition length");U(Ee=w.m,Z,ce,Me.ub),ce+=Me.ub,xe-=Me.ub,Me.Rb&&(Te.Ld=le(Ee),Te.Kd=le(Ee)),Te=w.Qa;var Re,qe=w.Pa;if(e(Ee!=null),e(Te!=null),Te.Cb=le(Ee),Te.Cb){if(Te.Bb=le(Ee),le(Ee)){for(Te.Fb=le(Ee),Re=0;4>Re;++Re)Te.Zb[Re]=le(Ee)?oe(Ee,7):0;for(Re=0;4>Re;++Re)Te.Lb[Re]=le(Ee)?oe(Ee,6):0}if(Te.Bb)for(Re=0;3>Re;++Re)qe.jb[Re]=le(Ee)?$(Ee,8):255}else Te.Bb=0;if(Ee.Ka)return Tn(w,3,"cannot parse segment header");if((Te=w.ed).zd=le(Ee),Te.Tb=$(Ee,6),Te.wb=$(Ee,3),Te.Pc=le(Ee),Te.Pc&&le(Ee)){for(qe=0;4>qe;++qe)le(Ee)&&(Te.vd[qe]=oe(Ee,6));for(qe=0;4>qe;++qe)le(Ee)&&(Te.od[qe]=oe(Ee,6))}if(w.L=Te.Tb==0?0:Te.zd?1:2,Ee.Ka)return Tn(w,3,"cannot parse filter header");var pt=xe;if(xe=Re=ce,ce=Re+pt,Te=pt,w.Xb=(1<<$(w.m,2))-1,pt<3*(qe=w.Xb))Z=7;else{for(Re+=3*qe,Te-=3*qe,pt=0;pt<qe;++pt){var Rt=Z[xe+0]|Z[xe+1]<<8|Z[xe+2]<<16;Rt>Te&&(Rt=Te),U(w.Jc[+pt],Z,Re,Rt),Re+=Rt,Te-=Rt,xe+=3}U(w.Jc[+qe],Z,Re,Te),Z=Re<ce?0:5}if(Z!=0)return Tn(w,Z,"cannot parse partitions");for(Z=$(Re=w.m,7),xe=le(Re)?oe(Re,4):0,ce=le(Re)?oe(Re,4):0,Te=le(Re)?oe(Re,4):0,qe=le(Re)?oe(Re,4):0,Re=le(Re)?oe(Re,4):0,pt=w.Qa,Rt=0;4>Rt;++Rt){if(pt.Cb){var Ft=pt.Zb[Rt];pt.Fb||(Ft+=Z)}else{if(0<Rt){w.pb[Rt]=w.pb[0];continue}Ft=Z}var Mt=w.pb[Rt];Mt.Sc[0]=un[Ur(Ft+xe,127)],Mt.Sc[1]=Fn[Ur(Ft+0,127)],Mt.Eb[0]=2*un[Ur(Ft+ce,127)],Mt.Eb[1]=101581*Fn[Ur(Ft+Te,127)]>>16,8>Mt.Eb[1]&&(Mt.Eb[1]=8),Mt.Qc[0]=un[Ur(Ft+qe,117)],Mt.Qc[1]=Fn[Ur(Ft+Re,127)],Mt.lc=Ft+Re}if(!Me.Rb)return Tn(w,4,"Not a key frame.");for(le(Ee),Me=w.Pa,Z=0;4>Z;++Z){for(xe=0;8>xe;++xe)for(ce=0;3>ce;++ce)for(Te=0;11>Te;++Te)qe=Q(Ee,Fo[Z][xe][ce][Te])?$(Ee,8):Ws[Z][xe][ce][Te],Me.Wc[Z][xe].Yb[ce][Te]=qe;for(xe=0;17>xe;++xe)Me.Xc[Z][xe]=Me.Wc[Z][sh[xe]]}return w.kc=le(Ee),w.kc&&(w.Bd=$(Ee,8)),w.cb=1}function mo(w,T,Z,ce,xe,Ee,Me){var Te=T[xe].Yb[Z];for(Z=0;16>xe;++xe){if(!Q(w,Te[Z+0]))return xe;for(;!Q(w,Te[Z+1]);)if(Te=T[++xe].Yb[0],Z=0,xe==16)return 16;var Re=T[xe+1].Yb;if(Q(w,Te[Z+2])){var qe=w,pt=0;if(Q(qe,(Ft=Te)[(Rt=Z)+3]))if(Q(qe,Ft[Rt+6])){for(Te=0,Rt=2*(pt=Q(qe,Ft[Rt+8]))+(Ft=Q(qe,Ft[Rt+9+pt])),pt=0,Ft=$r[Rt];Ft[Te];++Te)pt+=pt+Q(qe,Ft[Te]);pt+=3+(8<<Rt)}else Q(qe,Ft[Rt+7])?(pt=7+2*Q(qe,165),pt+=Q(qe,145)):pt=5+Q(qe,159);else pt=Q(qe,Ft[Rt+4])?3+Q(qe,Ft[Rt+5]):2;Te=Re[2]}else pt=1,Te=Re[1];Re=Me+Es[xe],0>(qe=w).b&&te(qe);var Rt,Ft=qe.b,Mt=(Rt=qe.Ca>>1)-(qe.I>>Ft)>>31;--qe.b,qe.Ca+=Mt,qe.Ca|=1,qe.I-=(Rt+1&Mt)<<Ft,Ee[Re]=((pt^Mt)-Mt)*ce[(0<xe)+0]}return 16}function cr(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Sn(w,T){if(w==null)return 0;if(T==null)return Tn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!ws(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var Z=nl[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-Z>>4,w.zb=T.j-Z>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+Z>>4,w.Hb=T.va+15+Z>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ce=w.ed;for(Z=0;4>Z;++Z){var xe;if(w.Qa.Cb){var Ee=w.Qa.Lb[Z];w.Qa.Fb||(Ee+=ce.Tb)}else Ee=ce.Tb;for(xe=0;1>=xe;++xe){var Me=w.gd[Z][xe],Te=Ee;if(ce.Pc&&(Te+=ce.vd[0],xe&&(Te+=ce.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var Re=Te;0<ce.wb&&(Re=4<ce.wb?Re>>2:Re>>1)>9-ce.wb&&(Re=9-ce.wb),1>Re&&(Re=1),Me.dd=Re,Me.tc=2*Te+Re,Me.ld=40<=Te?2:15<=Te?1:0}else Me.tc=0;Me.La=xe}}}Z=0}else Tn(w,6,"Frame setup failed"),Z=w.a;if(Z=Z==0){if(Z){w.$c=0,0<w.Aa||(w.Ic=Tf);e:{Z=w.Ic,ce=4*(Re=w.za);var qe=32*Re,pt=Re+1,Rt=0<w.L?Re*(0<w.Aa?2:1):0,Ft=(w.Aa==2?2:1)*Re;if((Me=ce+832+(xe=3*(16*Z+nl[w.L])/2*qe)+(Ee=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Me)Z=0;else{if(Me>w.Vb){if(w.Vb=0,w.Ec=s(Me),w.Fc=0,w.Ec==null){Z=Tn(w,1,"no memory during frame initialization.");break e}w.Vb=Me}Me=w.Ec,Te=w.Fc,w.Ac=Me,w.Bc=Te,Te+=ce,w.Gd=o(qe,vi),w.Hd=0,w.rb=o(pt+1,hi),w.sb=1,w.wa=Rt?o(Rt,Ar):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Re),e(!0),w.oc=Me,w.pc=Te,Te+=832,w.ya=o(Ft,an),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Re),w.R=16*Re,w.B=8*Re,Re=(qe=nl[w.L])*w.R,qe=qe/2*w.B,w.sa=Me,w.ta=Te+Re,w.qa=w.sa,w.ra=w.ta+16*Z*w.R+qe,w.Ha=w.qa,w.Ia=w.ra+8*Z*w.B+qe,w.$c=0,Te+=xe,w.mb=Ee?Me:null,w.nb=Ee?Te:null,e(Te+Ee<=w.Fc+w.Vb),cr(w),i(w.Ac,w.Bc,0,ce),Z=1}}if(Z){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!Qu){for(Z=-255;255>=Z;++Z)Ui[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)na[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)Bo[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)aa[255+Z]=0>Z?0:255<Z?255:Z;Qu=1}Lt=Vi,Yt=vo,In=js,rr=yr,Mr=Js,Nt=Xs,Xi=Au,Pi=Da,du=oa,xo=cu,Ji=lu,Ba=uu,Qa=Si,Ra=Mc,Fa=fs,ja=gr,ti=ps,ba=Bl,xa[0]=Tr,xa[1]=di,xa[2]=Cr,xa[3]=rs,xa[4]=Zo,xa[5]=Aa,xa[6]=ka,xa[7]=Xo,xa[8]=_l,xa[9]=sa,$a[0]=qa,$a[1]=vn,$a[2]=qr,$a[3]=xs,$a[4]=hs,$a[5]=Ma,$a[6]=bl,la[0]=eo,la[1]=Mn,la[2]=Ta,la[3]=Pr,la[4]=ou,la[5]=yo,la[6]=Mu,Z=1}else Z=0}Z&&(Z=function(Mt,Kt){for(Mt.M=0;Mt.M<Mt.Va;++Mt.M){var Gt,gt=Mt.Jc[Mt.M&Mt.Xb],wt=Mt.m,nn=Mt;for(Gt=0;Gt<nn.za;++Gt){var fn=wt,on=nn,Bn=on.Ac,On=on.Bc+4*Gt,or=on.zc,h=on.ya[on.aa+Gt];if(on.Qa.Bb?h.$b=Q(fn,on.Pa.jb[0])?2+Q(fn,on.Pa.jb[2]):Q(fn,on.Pa.jb[1]):h.$b=0,on.kc&&(h.Ad=Q(fn,on.Bd)),h.Za=!Q(fn,145)+0,h.Za){var m=h.Ob,_=0;for(on=0;4>on;++on){var S,M=or[0+on];for(S=0;4>S;++S){M=Qi[Bn[On+S]][M];for(var H=os[Q(fn,M[0])];0<H;)H=os[2*H+Q(fn,M[H])];M=-H,Bn[On+S]=M}r(m,_,Bn,On,4),_+=4,or[0+on]=M}}else M=Q(fn,156)?Q(fn,128)?1:3:Q(fn,163)?2:0,h.Ob[0]=M,i(Bn,On,M,4),i(or,0,M,4);h.Dd=Q(fn,142)?Q(fn,114)?Q(fn,183)?1:3:2:0}if(nn.m.Ka)return Tn(Mt,7,"Premature end-of-partition0 encountered.");for(;Mt.ja<Mt.za;++Mt.ja){if(nn=gt,fn=(wt=Mt).rb[wt.sb-1],Bn=wt.rb[wt.sb+wt.ja],Gt=wt.ya[wt.aa+wt.ja],On=wt.kc?Gt.Ad:0)fn.la=Bn.la=0,Gt.Za||(fn.Na=Bn.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var ne,ae;if(fn=Bn,Bn=nn,On=wt.Pa.Xc,or=wt.ya[wt.aa+wt.ja],h=wt.pb[or.$b],on=or.ad,m=0,_=wt.rb[wt.sb-1],M=S=0,i(on,m,0,384),or.Za)var ye=0,Se=On[3];else{H=s(16);var nt=fn.Na+_.Na;if(nt=sr(Bn,On[1],nt,h.Eb,0,H,0),fn.Na=_.Na=(0<nt)+0,1<nt)Lt(H,0,on,m);else{var We=H[0]+3>>3;for(H=0;256>H;H+=16)on[m+H]=We}ye=1,Se=On[0]}var _t=15&fn.la,It=15&_.la;for(H=0;4>H;++H){var en=1&It;for(We=ae=0;4>We;++We)_t=_t>>1|(en=(nt=sr(Bn,Se,nt=en+(1&_t),h.Sc,ye,on,m))>ye)<<7,ae=ae<<2|(3<nt?3:1<nt?2:on[m+0]!=0),m+=16;_t>>=4,It=It>>1|en<<7,S=(S<<8|ae)>>>0}for(Se=_t,ye=It>>4,ne=0;4>ne;ne+=2){for(ae=0,_t=fn.la>>4+ne,It=_.la>>4+ne,H=0;2>H;++H){for(en=1&It,We=0;2>We;++We)nt=en+(1&_t),_t=_t>>1|(en=0<(nt=sr(Bn,On[2],nt,h.Qc,0,on,m)))<<3,ae=ae<<2|(3<nt?3:1<nt?2:on[m+0]!=0),m+=16;_t>>=2,It=It>>1|en<<5}M|=ae<<4*ne,Se|=_t<<4<<ne,ye|=(240&It)<<ne}fn.la=Se,_.la=ye,or.Hc=S,or.Gc=M,or.ia=43690&M?0:h.ia,On=!(S|M)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[Gt.$b][Gt.Za],wt.wa[wt.Y+wt.ja].La|=!On),nn.Ka)return Tn(Mt,7,"Premature end-of-file encountered.")}if(cr(Mt),wt=Kt,nn=1,Gt=(gt=Mt).D,fn=0<gt.L&&gt.M>=gt.zb&&gt.M<=gt.Va,gt.Aa==0)e:{if(Gt.M=gt.M,Gt.uc=fn,Tu(gt,Gt),nn=1,Gt=(ae=gt.D).Nb,fn=(M=nl[gt.L])*gt.R,Bn=M/2*gt.B,H=16*Gt*gt.R,We=8*Gt*gt.B,On=gt.sa,or=gt.ta-fn+H,h=gt.qa,on=gt.ra-Bn+We,m=gt.Ha,_=gt.Ia-Bn+We,It=(_t=ae.M)==0,S=_t>=gt.Va-1,gt.Aa==2&&Tu(gt,ae),ae.uc)for(en=(nt=gt).D.M,e(nt.D.uc),ae=nt.yb;ae<nt.Hb;++ae){ye=ae,Se=en;var _n=(Pn=(Pe=nt).D).Nb;ne=Pe.R;var Pn=Pn.wa[Pn.Y+ye],br=Pe.sa,tt=Pe.ta+16*_n*ne+16*ye,it=Pn.dd,ft=Pn.tc;if(ft!=0)if(e(3<=ft),Pe.L==1)0<ye&&ja(br,tt,ne,ft+4),Pn.La&&ba(br,tt,ne,ft),0<Se&&Fa(br,tt,ne,ft+4),Pn.La&&ti(br,tt,ne,ft);else{var zt=Pe.B,Pt=Pe.qa,Bt=Pe.ra+8*_n*zt+8*ye,be=Pe.Ha,Pe=Pe.Ia+8*_n*zt+8*ye;_n=Pn.ld,0<ye&&(Pi(br,tt,ne,ft+4,it,_n),xo(Pt,Bt,be,Pe,zt,ft+4,it,_n)),Pn.La&&(Ba(br,tt,ne,ft,it,_n),Ra(Pt,Bt,be,Pe,zt,ft,it,_n)),0<Se&&(Xi(br,tt,ne,ft+4,it,_n),du(Pt,Bt,be,Pe,zt,ft+4,it,_n)),Pn.La&&(Ji(br,tt,ne,ft,it,_n),Qa(Pt,Bt,be,Pe,zt,ft,it,_n))}}if(gt.ia&&alert("todo:DitherRow"),wt.put!=null){if(ae=16*_t,_t=16*(_t+1),It?(wt.y=gt.sa,wt.O=gt.ta+H,wt.f=gt.qa,wt.N=gt.ra+We,wt.ea=gt.Ha,wt.W=gt.Ia+We):(ae-=M,wt.y=On,wt.O=or,wt.f=h,wt.N=on,wt.ea=m,wt.W=_),S||(_t-=M),_t>wt.o&&(_t=wt.o),wt.F=null,wt.J=null,gt.Fa!=null&&0<gt.Fa.length&&ae<_t&&(wt.J=gs(gt,wt,ae,_t-ae),wt.F=gt.mb,wt.F==null&&wt.F.length==0)){nn=Tn(gt,3,"Could not decode alpha data.");break e}ae<wt.j&&(M=wt.j-ae,ae=wt.j,e(!(1&M)),wt.O+=gt.R*M,wt.N+=gt.B*(M>>1),wt.W+=gt.B*(M>>1),wt.F!=null&&(wt.J+=wt.width*M)),ae<_t&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=ae-wt.j,wt.U=wt.va-wt.v,wt.T=_t-ae,nn=wt.put(wt))}Gt+1!=gt.Ic||S||(r(gt.sa,gt.ta-fn,On,or+16*gt.R,fn),r(gt.qa,gt.ra-Bn,h,on+8*gt.B,Bn),r(gt.Ha,gt.Ia-Bn,m,_+8*gt.B,Bn))}if(!nn)return Tn(Mt,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),Z&=1}return Z?(w.cb=0,Z):0}function sn(w,T,Z,ce,xe){xe=w[T+Z+32*ce]+(xe>>3),w[T+Z+32*ce]=-256&xe?0>xe?0:255:xe}function yi(w,T,Z,ce,xe,Ee){sn(w,T,0,Z,ce+xe),sn(w,T,1,Z,ce+Ee),sn(w,T,2,Z,ce-Ee),sn(w,T,3,Z,ce-xe)}function Qr(w){return(20091*w>>16)+w}function bi(w,T,Z,ce){var xe,Ee=0,Me=s(16);for(xe=0;4>xe;++xe){var Te=w[T+0]+w[T+8],Re=w[T+0]-w[T+8],qe=(35468*w[T+4]>>16)-Qr(w[T+12]),pt=Qr(w[T+4])+(35468*w[T+12]>>16);Me[Ee+0]=Te+pt,Me[Ee+1]=Re+qe,Me[Ee+2]=Re-qe,Me[Ee+3]=Te-pt,Ee+=4,T++}for(xe=Ee=0;4>xe;++xe)Te=(w=Me[Ee+0]+4)+Me[Ee+8],Re=w-Me[Ee+8],qe=(35468*Me[Ee+4]>>16)-Qr(Me[Ee+12]),sn(Z,ce,0,0,Te+(pt=Qr(Me[Ee+4])+(35468*Me[Ee+12]>>16))),sn(Z,ce,1,0,Re+qe),sn(Z,ce,2,0,Re-qe),sn(Z,ce,3,0,Te-pt),Ee++,ce+=32}function Xs(w,T,Z,ce){var xe=w[T+0]+4,Ee=35468*w[T+4]>>16,Me=Qr(w[T+4]),Te=35468*w[T+1]>>16;yi(Z,ce,0,xe+Me,w=Qr(w[T+1]),Te),yi(Z,ce,1,xe+Ee,w,Te),yi(Z,ce,2,xe-Ee,w,Te),yi(Z,ce,3,xe-Me,w,Te)}function vo(w,T,Z,ce,xe){bi(w,T,Z,ce),xe&&bi(w,T+16,Z,ce+4)}function js(w,T,Z,ce){Yt(w,T+0,Z,ce,1),Yt(w,T+32,Z,ce+128,1)}function yr(w,T,Z,ce){var xe;for(w=w[T+0]+4,xe=0;4>xe;++xe)for(T=0;4>T;++T)sn(Z,ce,T,xe,w)}function Js(w,T,Z,ce){w[T+0]&&rr(w,T+0,Z,ce),w[T+16]&&rr(w,T+16,Z,ce+4),w[T+32]&&rr(w,T+32,Z,ce+128),w[T+48]&&rr(w,T+48,Z,ce+128+4)}function Vi(w,T,Z,ce){var xe,Ee=s(16);for(xe=0;4>xe;++xe){var Me=w[T+0+xe]+w[T+12+xe],Te=w[T+4+xe]+w[T+8+xe],Re=w[T+4+xe]-w[T+8+xe],qe=w[T+0+xe]-w[T+12+xe];Ee[0+xe]=Me+Te,Ee[8+xe]=Me-Te,Ee[4+xe]=qe+Re,Ee[12+xe]=qe-Re}for(xe=0;4>xe;++xe)Me=(w=Ee[0+4*xe]+3)+Ee[3+4*xe],Te=Ee[1+4*xe]+Ee[2+4*xe],Re=Ee[1+4*xe]-Ee[2+4*xe],qe=w-Ee[3+4*xe],Z[ce+0]=Me+Te>>3,Z[ce+16]=qe+Re>>3,Z[ce+32]=Me-Te>>3,Z[ce+48]=qe-Re>>3,ce+=64}function Gi(w,T,Z){var ce,xe=T-32,Ee=$i,Me=255-w[xe-1];for(ce=0;ce<Z;++ce){var Te,Re=Ee,qe=Me+w[T-1];for(Te=0;Te<Z;++Te)w[T+Te]=Re[qe+w[xe+Te]];T+=32}}function di(w,T){Gi(w,T,4)}function Mn(w,T){Gi(w,T,8)}function vn(w,T){Gi(w,T,16)}function qr(w,T){var Z;for(Z=0;16>Z;++Z)r(w,T+32*Z,w,T-32,16)}function xs(w,T){var Z;for(Z=16;0<Z;--Z)i(w,T,w[T-1],16),T+=32}function Qs(w,T,Z){var ce;for(ce=0;16>ce;++ce)i(T,Z+32*ce,w,16)}function qa(w,T){var Z,ce=16;for(Z=0;16>Z;++Z)ce+=w[T-1+32*Z]+w[T+Z-32];Qs(ce>>5,w,T)}function hs(w,T){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=w[T-1+32*Z];Qs(ce>>4,w,T)}function Ma(w,T){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=w[T+Z-32];Qs(ce>>4,w,T)}function bl(w,T){Qs(128,w,T)}function zn(w,T,Z){return w+2*T+Z+2>>2}function Cr(w,T){var Z,ce=T-32;for(ce=new Uint8Array([zn(w[ce-1],w[ce+0],w[ce+1]),zn(w[ce+0],w[ce+1],w[ce+2]),zn(w[ce+1],w[ce+2],w[ce+3]),zn(w[ce+2],w[ce+3],w[ce+4])]),Z=0;4>Z;++Z)r(w,T+32*Z,ce,0,ce.length)}function rs(w,T){var Z=w[T-1],ce=w[T-1+32],xe=w[T-1+64],Ee=w[T-1+96];Be(w,T+0,16843009*zn(w[T-1-32],Z,ce)),Be(w,T+32,16843009*zn(Z,ce,xe)),Be(w,T+64,16843009*zn(ce,xe,Ee)),Be(w,T+96,16843009*zn(xe,Ee,Ee))}function Tr(w,T){var Z,ce=4;for(Z=0;4>Z;++Z)ce+=w[T+Z-32]+w[T-1+32*Z];for(ce>>=3,Z=0;4>Z;++Z)i(w,T+32*Z,ce,4)}function Zo(w,T){var Z=w[T-1+0],ce=w[T-1+32],xe=w[T-1+64],Ee=w[T-1-32],Me=w[T+0-32],Te=w[T+1-32],Re=w[T+2-32],qe=w[T+3-32];w[T+0+96]=zn(ce,xe,w[T-1+96]),w[T+1+96]=w[T+0+64]=zn(Z,ce,xe),w[T+2+96]=w[T+1+64]=w[T+0+32]=zn(Ee,Z,ce),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=zn(Me,Ee,Z),w[T+3+64]=w[T+2+32]=w[T+1+0]=zn(Te,Me,Ee),w[T+3+32]=w[T+2+0]=zn(Re,Te,Me),w[T+3+0]=zn(qe,Re,Te)}function ka(w,T){var Z=w[T+1-32],ce=w[T+2-32],xe=w[T+3-32],Ee=w[T+4-32],Me=w[T+5-32],Te=w[T+6-32],Re=w[T+7-32];w[T+0+0]=zn(w[T+0-32],Z,ce),w[T+1+0]=w[T+0+32]=zn(Z,ce,xe),w[T+2+0]=w[T+1+32]=w[T+0+64]=zn(ce,xe,Ee),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=zn(xe,Ee,Me),w[T+3+32]=w[T+2+64]=w[T+1+96]=zn(Ee,Me,Te),w[T+3+64]=w[T+2+96]=zn(Me,Te,Re),w[T+3+96]=zn(Te,Re,Re)}function Aa(w,T){var Z=w[T-1+0],ce=w[T-1+32],xe=w[T-1+64],Ee=w[T-1-32],Me=w[T+0-32],Te=w[T+1-32],Re=w[T+2-32],qe=w[T+3-32];w[T+0+0]=w[T+1+64]=Ee+Me+1>>1,w[T+1+0]=w[T+2+64]=Me+Te+1>>1,w[T+2+0]=w[T+3+64]=Te+Re+1>>1,w[T+3+0]=Re+qe+1>>1,w[T+0+96]=zn(xe,ce,Z),w[T+0+64]=zn(ce,Z,Ee),w[T+0+32]=w[T+1+96]=zn(Z,Ee,Me),w[T+1+32]=w[T+2+96]=zn(Ee,Me,Te),w[T+2+32]=w[T+3+96]=zn(Me,Te,Re),w[T+3+32]=zn(Te,Re,qe)}function Xo(w,T){var Z=w[T+0-32],ce=w[T+1-32],xe=w[T+2-32],Ee=w[T+3-32],Me=w[T+4-32],Te=w[T+5-32],Re=w[T+6-32],qe=w[T+7-32];w[T+0+0]=Z+ce+1>>1,w[T+1+0]=w[T+0+64]=ce+xe+1>>1,w[T+2+0]=w[T+1+64]=xe+Ee+1>>1,w[T+3+0]=w[T+2+64]=Ee+Me+1>>1,w[T+0+32]=zn(Z,ce,xe),w[T+1+32]=w[T+0+96]=zn(ce,xe,Ee),w[T+2+32]=w[T+1+96]=zn(xe,Ee,Me),w[T+3+32]=w[T+2+96]=zn(Ee,Me,Te),w[T+3+64]=zn(Me,Te,Re),w[T+3+96]=zn(Te,Re,qe)}function sa(w,T){var Z=w[T-1+0],ce=w[T-1+32],xe=w[T-1+64],Ee=w[T-1+96];w[T+0+0]=Z+ce+1>>1,w[T+2+0]=w[T+0+32]=ce+xe+1>>1,w[T+2+32]=w[T+0+64]=xe+Ee+1>>1,w[T+1+0]=zn(Z,ce,xe),w[T+3+0]=w[T+1+32]=zn(ce,xe,Ee),w[T+3+32]=w[T+1+64]=zn(xe,Ee,Ee),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Ee}function _l(w,T){var Z=w[T-1+0],ce=w[T-1+32],xe=w[T-1+64],Ee=w[T-1+96],Me=w[T-1-32],Te=w[T+0-32],Re=w[T+1-32],qe=w[T+2-32];w[T+0+0]=w[T+2+32]=Z+Me+1>>1,w[T+0+32]=w[T+2+64]=ce+Z+1>>1,w[T+0+64]=w[T+2+96]=xe+ce+1>>1,w[T+0+96]=Ee+xe+1>>1,w[T+3+0]=zn(Te,Re,qe),w[T+2+0]=zn(Me,Te,Re),w[T+1+0]=w[T+3+32]=zn(Z,Me,Te),w[T+1+32]=w[T+3+64]=zn(ce,Z,Me),w[T+1+64]=w[T+3+96]=zn(xe,ce,Z),w[T+1+96]=zn(Ee,xe,ce)}function Ta(w,T){var Z;for(Z=0;8>Z;++Z)r(w,T+32*Z,w,T-32,8)}function Pr(w,T){var Z;for(Z=0;8>Z;++Z)i(w,T,w[T-1],8),T+=32}function Yn(w,T,Z){var ce;for(ce=0;8>ce;++ce)i(T,Z+32*ce,w,8)}function eo(w,T){var Z,ce=8;for(Z=0;8>Z;++Z)ce+=w[T+Z-32]+w[T-1+32*Z];Yn(ce>>4,w,T)}function yo(w,T){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=w[T+Z-32];Yn(ce>>3,w,T)}function ou(w,T){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=w[T-1+32*Z];Yn(ce>>3,w,T)}function Mu(w,T){Yn(128,w,T)}function Il(w,T,Z){var ce=w[T-Z],xe=w[T+0],Ee=3*(xe-ce)+za[1020+w[T-2*Z]-w[T+Z]],Me=Cs[112+(Ee+4>>3)];w[T-Z]=$i[255+ce+Cs[112+(Ee+3>>3)]],w[T+0]=$i[255+xe-Me]}function au(w,T,Z,ce){var xe=w[T+0],Ee=w[T+Z];return ao[255+w[T-2*Z]-w[T-Z]]>ce||ao[255+Ee-xe]>ce}function ku(w,T,Z,ce){return 4*ao[255+w[T-Z]-w[T+0]]+ao[255+w[T-2*Z]-w[T+Z]]<=ce}function ei(w,T,Z,ce,xe){var Ee=w[T-3*Z],Me=w[T-2*Z],Te=w[T-Z],Re=w[T+0],qe=w[T+Z],pt=w[T+2*Z],Rt=w[T+3*Z];return 4*ao[255+Te-Re]+ao[255+Me-qe]>ce?0:ao[255+w[T-4*Z]-Ee]<=xe&&ao[255+Ee-Me]<=xe&&ao[255+Me-Te]<=xe&&ao[255+Rt-pt]<=xe&&ao[255+pt-qe]<=xe&&ao[255+qe-Re]<=xe}function fs(w,T,Z,ce){var xe=2*ce+1;for(ce=0;16>ce;++ce)ku(w,T+ce,Z,xe)&&Il(w,T+ce,Z)}function gr(w,T,Z,ce){var xe=2*ce+1;for(ce=0;16>ce;++ce)ku(w,T+ce*Z,1,xe)&&Il(w,T+ce*Z,1)}function ps(w,T,Z,ce){var xe;for(xe=3;0<xe;--xe)fs(w,T+=4*Z,Z,ce)}function Bl(w,T,Z,ce){var xe;for(xe=3;0<xe;--xe)gr(w,T+=4,Z,ce)}function Ya(w,T,Z,ce,xe,Ee,Me,Te){for(Ee=2*Ee+1;0<xe--;){if(ei(w,T,Z,Ee,Me))if(au(w,T,Z,Te))Il(w,T,Z);else{var Re=w,qe=T,pt=Z,Rt=Re[qe-2*pt],Ft=Re[qe-pt],Mt=Re[qe+0],Kt=Re[qe+pt],Gt=Re[qe+2*pt],gt=27*(nn=za[1020+3*(Mt-Ft)+za[1020+Rt-Kt]])+63>>7,wt=18*nn+63>>7,nn=9*nn+63>>7;Re[qe-3*pt]=$i[255+Re[qe-3*pt]+nn],Re[qe-2*pt]=$i[255+Rt+wt],Re[qe-pt]=$i[255+Ft+gt],Re[qe+0]=$i[255+Mt-gt],Re[qe+pt]=$i[255+Kt-wt],Re[qe+2*pt]=$i[255+Gt-nn]}T+=ce}}function Zi(w,T,Z,ce,xe,Ee,Me,Te){for(Ee=2*Ee+1;0<xe--;){if(ei(w,T,Z,Ee,Me))if(au(w,T,Z,Te))Il(w,T,Z);else{var Re=w,qe=T,pt=Z,Rt=Re[qe-pt],Ft=Re[qe+0],Mt=Re[qe+pt],Kt=Cs[112+((Gt=3*(Ft-Rt))+4>>3)],Gt=Cs[112+(Gt+3>>3)],gt=Kt+1>>1;Re[qe-2*pt]=$i[255+Re[qe-2*pt]+gt],Re[qe-pt]=$i[255+Rt+Gt],Re[qe+0]=$i[255+Ft-Kt],Re[qe+pt]=$i[255+Mt-gt]}T+=ce}}function Au(w,T,Z,ce,xe,Ee){Ya(w,T,Z,1,16,ce,xe,Ee)}function Da(w,T,Z,ce,xe,Ee){Ya(w,T,1,Z,16,ce,xe,Ee)}function lu(w,T,Z,ce,xe,Ee){var Me;for(Me=3;0<Me;--Me)Zi(w,T+=4*Z,Z,1,16,ce,xe,Ee)}function uu(w,T,Z,ce,xe,Ee){var Me;for(Me=3;0<Me;--Me)Zi(w,T+=4,1,Z,16,ce,xe,Ee)}function oa(w,T,Z,ce,xe,Ee,Me,Te){Ya(w,T,xe,1,8,Ee,Me,Te),Ya(Z,ce,xe,1,8,Ee,Me,Te)}function cu(w,T,Z,ce,xe,Ee,Me,Te){Ya(w,T,1,xe,8,Ee,Me,Te),Ya(Z,ce,1,xe,8,Ee,Me,Te)}function Si(w,T,Z,ce,xe,Ee,Me,Te){Zi(w,T+4*xe,xe,1,8,Ee,Me,Te),Zi(Z,ce+4*xe,xe,1,8,Ee,Me,Te)}function Mc(w,T,Z,ce,xe,Ee,Me,Te){Zi(w,T+4,1,xe,8,Ee,Me,Te),Zi(Z,ce+4,1,xe,8,Ee,Me,Te)}function zs(){this.ba=new tr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ya(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new I}function Rl(){this.xb=this.a=0,this.l=new Jr,this.ca=new tr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ya,this.ab=0,this.gc=o(4,hu),this.Oc=0}function Fl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Jr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ci(w,T,Z,ce,xe,Ee,Me){for(w=w==null?0:w[T+0],T=0;T<Me;++T)xe[Ee+T]=w+Z[ce+T]&255,w=xe[Ee+T]}function Jo(w,T,Z,ce,xe,Ee,Me){var Te;if(w==null)Ci(null,null,Z,ce,xe,Ee,Me);else for(Te=0;Te<Me;++Te)xe[Ee+Te]=w[T+Te]+Z[ce+Te]&255}function Ka(w,T,Z,ce,xe,Ee,Me){if(w==null)Ci(null,null,Z,ce,xe,Ee,Me);else{var Te,Re=w[T+0],qe=Re,pt=Re;for(Te=0;Te<Me;++Te)qe=pt+(Re=w[T+Te])-qe,pt=Z[ce+Te]+(-256&qe?0>qe?0:255:qe)&255,qe=Re,xe[Ee+Te]=pt}}function gs(w,T,Z,ce){var xe=T.width,Ee=T.o;if(e(w!=null&&T!=null),0>Z||0>=ce||Z+ce>Ee)return null;if(!w.Cc){if(w.ga==null){var Me;if(w.ga=new Fl,(Me=w.ga==null)||(Me=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Me),w.Uc=0,w.Gb==null?Me=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Me=1),Me=!Me),!Me){Me=w.ga;var Te=w.Fa,Re=w.P,qe=w.qc,pt=w.mb,Rt=w.nb,Ft=Re+1,Mt=qe-1,Kt=Me.l;if(e(Te!=null&&pt!=null&&T!=null),_i[0]=null,_i[1]=Ci,_i[2]=Jo,_i[3]=Ka,Me.ca=pt,Me.tb=Rt,Me.c=T.width,Me.i=T.height,e(0<Me.c&&0<Me.i),1>=qe)T=0;else if(Me.$a=Te[Re+0]>>0&3,Me.Z=Te[Re+0]>>2&3,Me.Lc=Te[Re+0]>>4&3,Re=Te[Re+0]>>6&3,0>Me.$a||1<Me.$a||4<=Me.Z||1<Me.Lc||Re)T=0;else if(Kt.put=Oo,Kt.ac=Ti,Kt.bc=Ts,Kt.ma=Me,Kt.width=T.width,Kt.height=T.height,Kt.Da=T.Da,Kt.v=T.v,Kt.va=T.va,Kt.j=T.j,Kt.o=T.o,Me.$a)e:{e(Me.$a==1),T=Vn();t:for(;;){if(T==null){T=0;break e}if(e(Me!=null),Me.mc=T,T.c=Me.c,T.i=Me.i,T.l=Me.l,T.l.ma=Me,T.l.width=Me.c,T.l.height=Me.i,T.a=0,J(T.m,Te,Ft,Mt),!hr(Me.c,Me.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&En(T.s)?(Me.ic=1,Te=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Te),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Me.ic=0,T=Lr(T,Me.c)),!T))break t;T=1;break e}Me.mc=null,T=0}else T=Mt>=Me.c*Me.i;Me=!T}if(Me)return null;w.ga.Lc!=1?w.Ga=0:ce=Ee-Z}e(w.ga!=null),e(Z+ce<=Ee);e:{if(T=(Te=w.ga).c,Ee=Te.l.o,Te.$a==0){if(Ft=w.rc,Mt=w.Vc,Kt=w.Fa,Re=w.P+1+Z*T,qe=w.mb,pt=w.nb+Z*T,e(Re<=w.P+w.qc),Te.Z!=0)for(e(_i[Te.Z]!=null),Me=0;Me<ce;++Me)_i[Te.Z](Ft,Mt,Kt,Re,qe,pt,T),Ft=qe,Mt=pt,pt+=T,Re+=T;else for(Me=0;Me<ce;++Me)r(qe,pt,Kt,Re,T),Ft=qe,Mt=pt,pt+=T,Re+=T;w.rc=Ft,w.Vc=Mt}else{if(e(Te.mc!=null),T=Z+ce,e((Me=Te.mc)!=null),e(T<=Me.i),Me.C>=T)T=1;else if(Te.ic||kt(),Te.ic){Te=Me.V,Ft=Me.Ba,Mt=Me.c;var Gt=Me.i,gt=(Kt=1,Re=Me.$/Mt,qe=Me.$%Mt,pt=Me.m,Rt=Me.s,Me.$),wt=Mt*Gt,nn=Mt*T,fn=Rt.wc,on=gt<nn?ct(Rt,qe,Re):null;e(gt<=wt),e(T<=Gt),e(En(Rt));t:for(;;){for(;!pt.h&&gt<nn;){if(qe&fn||(on=ct(Rt,qe,Re)),e(on!=null),he(pt),256>(Gt=at(on.G[0],on.H[0],pt)))Te[Ft+gt]=Gt,++gt,++qe>=Mt&&(qe=0,++Re<=T&&!(Re%16)&&Un(Me,Re));else{if(!(280>Gt)){Kt=0;break t}Gt=Ds(Gt-256,pt);var Bn,On=at(on.G[4],on.H[4],pt);if(he(pt),!(gt>=(On=No(Mt,On=Ds(On,pt)))&&wt-gt>=Gt)){Kt=0;break t}for(Bn=0;Bn<Gt;++Bn)Te[Ft+gt+Bn]=Te[Ft+gt+Bn-On];for(gt+=Gt,qe+=Gt;qe>=Mt;)qe-=Mt,++Re<=T&&!(Re%16)&&Un(Me,Re);gt<nn&&qe&fn&&(on=ct(Rt,qe,Re))}e(pt.h==K(pt))}Un(Me,Re>T?T:Re);break t}!Kt||pt.h&&gt<wt?(Kt=0,Me.a=pt.h?5:3):Me.$=gt,T=Kt}else T=St(Me,Me.V,Me.Ba,Me.c,Me.i,T,pn);if(!T){ce=0;break e}}Z+ce>=Ee&&(w.Cc=1),ce=1}if(!ce)return null;if(w.Cc&&((ce=w.ga)!=null&&(ce.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+Z*xe}function j(w,T,Z,ce,xe,Ee){for(;0<xe--;){var Me,Te=w,Re=T+(Z?1:0),qe=w,pt=T+(Z?0:3);for(Me=0;Me<ce;++Me){var Rt=qe[pt+4*Me];Rt!=255&&(Rt*=32897,Te[Re+4*Me+0]=Te[Re+4*Me+0]*Rt>>23,Te[Re+4*Me+1]=Te[Re+4*Me+1]*Rt>>23,Te[Re+4*Me+2]=Te[Re+4*Me+2]*Rt>>23)}T+=Ee}}function we(w,T,Z,ce,xe){for(;0<ce--;){var Ee;for(Ee=0;Ee<Z;++Ee){var Me=w[T+2*Ee+0],Te=15&(qe=w[T+2*Ee+1]),Re=4369*Te,qe=(240&qe|qe>>4)*Re>>16;w[T+2*Ee+0]=(240&Me|Me>>4)*Re>>16&240|(15&Me|Me<<4)*Re>>16>>4&15,w[T+2*Ee+1]=240&qe|Te}T+=xe}}function Xe(w,T,Z,ce,xe,Ee,Me,Te){var Re,qe,pt=255;for(qe=0;qe<xe;++qe){for(Re=0;Re<ce;++Re){var Rt=w[T+Re];Ee[Me+4*Re]=Rt,pt&=Rt}T+=Z,Me+=Te}return pt!=255}function dt(w,T,Z,ce,xe){var Ee;for(Ee=0;Ee<xe;++Ee)Z[ce+Ee]=w[T+Ee]>>8}function kt(){Vs=j,Mi=we,Ii=Xe,vs=dt}function Ut(w,T,Z){N[w]=function(ce,xe,Ee,Me,Te,Re,qe,pt,Rt,Ft,Mt,Kt,Gt,gt,wt,nn,fn){var on,Bn=fn-1>>1,On=Te[Re+0]|qe[pt+0]<<16,or=Rt[Ft+0]|Mt[Kt+0]<<16;e(ce!=null);var h=3*On+or+131074>>2;for(T(ce[xe+0],255&h,h>>16,Gt,gt),Ee!=null&&(h=3*or+On+131074>>2,T(Ee[Me+0],255&h,h>>16,wt,nn)),on=1;on<=Bn;++on){var m=Te[Re+on]|qe[pt+on]<<16,_=Rt[Ft+on]|Mt[Kt+on]<<16,S=On+m+or+_+524296,M=S+2*(m+or)>>3;h=M+On>>1,On=(S=S+2*(On+_)>>3)+m>>1,T(ce[xe+2*on-1],255&h,h>>16,Gt,gt+(2*on-1)*Z),T(ce[xe+2*on-0],255&On,On>>16,Gt,gt+(2*on-0)*Z),Ee!=null&&(h=S+or>>1,On=M+_>>1,T(Ee[Me+2*on-1],255&h,h>>16,wt,nn+(2*on-1)*Z),T(Ee[Me+2*on+0],255&On,On>>16,wt,nn+(2*on+0)*Z)),On=m,or=_}1&fn||(h=3*On+or+131074>>2,T(ce[xe+fn-1],255&h,h>>16,Gt,gt+(fn-1)*Z),Ee!=null&&(h=3*or+On+131074>>2,T(Ee[Me+fn-1],255&h,h>>16,wt,nn+(fn-1)*Z)))}}function dn(){lo[Ro]=Oe,lo[wr]=ec,lo[el]=jo,lo[tl]=Gs,lo[_a]=Hr,lo[Lo]=zh,lo[ih]=Pf,lo[Us]=ec,lo[Hs]=Gs,lo[wa]=Hr,lo[u]=zh}function Rn(w){return w&-16384?0>w?0:255:w>>zp}function Hn(w,T){return Rn((19077*w>>8)+(26149*T>>8)-14234)}function fr(w,T,Z){return Rn((19077*w>>8)-(6419*T>>8)-(13320*Z>>8)+8708)}function Er(w,T){return Rn((19077*w>>8)+(33050*T>>8)-17685)}function Vr(w,T,Z,ce,xe){ce[xe+0]=Hn(w,Z),ce[xe+1]=fr(w,T,Z),ce[xe+2]=Er(w,T)}function qi(w,T,Z,ce,xe){ce[xe+0]=Er(w,T),ce[xe+1]=fr(w,T,Z),ce[xe+2]=Hn(w,Z)}function pi(w,T,Z,ce,xe){var Ee=fr(w,T,Z);T=Ee<<3&224|Er(w,T)>>3,ce[xe+0]=248&Hn(w,Z)|Ee>>5,ce[xe+1]=T}function Ei(w,T,Z,ce,xe){var Ee=240&Er(w,T)|15;ce[xe+0]=240&Hn(w,Z)|fr(w,T,Z)>>4,ce[xe+1]=Ee}function ms(w,T,Z,ce,xe){ce[xe+0]=255,Vr(w,T,Z,ce,xe+1)}function Ls(w,T,Z,ce,xe){qi(w,T,Z,ce,xe),ce[xe+3]=255}function Qo(w,T,Z,ce,xe){Vr(w,T,Z,ce,xe),ce[xe+3]=255}function Ur(w,T){return 0>w?0:w>T?T:w}function to(w,T,Z){N[w]=function(ce,xe,Ee,Me,Te,Re,qe,pt,Rt){for(var Ft=pt+(-2&Rt)*Z;pt!=Ft;)T(ce[xe+0],Ee[Me+0],Te[Re+0],qe,pt),T(ce[xe+1],Ee[Me+0],Te[Re+0],qe,pt+Z),xe+=2,++Me,++Re,pt+=2*Z;1&Rt&&T(ce[xe+0],Ee[Me+0],Te[Re+0],qe,pt)}}function jl(w,T,Z){return Z==0?w==0?T==0?6:5:T==0?4:0:Z}function bo(w,T,Z,ce,xe){switch(w>>>30){case 3:Yt(T,Z,ce,xe,0);break;case 2:Nt(T,Z,ce,xe);break;case 1:rr(T,Z,ce,xe)}}function Tu(w,T){var Z,ce,xe=T.M,Ee=T.Nb,Me=w.oc,Te=w.pc+40,Re=w.oc,qe=w.pc+584,pt=w.oc,Rt=w.pc+600;for(Z=0;16>Z;++Z)Me[Te+32*Z-1]=129;for(Z=0;8>Z;++Z)Re[qe+32*Z-1]=129,pt[Rt+32*Z-1]=129;for(0<xe?Me[Te-1-32]=Re[qe-1-32]=pt[Rt-1-32]=129:(i(Me,Te-32-1,127,21),i(Re,qe-32-1,127,9),i(pt,Rt-32-1,127,9)),ce=0;ce<w.za;++ce){var Ft=T.ya[T.aa+ce];if(0<ce){for(Z=-1;16>Z;++Z)r(Me,Te+32*Z-4,Me,Te+32*Z+12,4);for(Z=-1;8>Z;++Z)r(Re,qe+32*Z-4,Re,qe+32*Z+4,4),r(pt,Rt+32*Z-4,pt,Rt+32*Z+4,4)}var Mt=w.Gd,Kt=w.Hd+ce,Gt=Ft.ad,gt=Ft.Hc;if(0<xe&&(r(Me,Te-32,Mt[Kt].y,0,16),r(Re,qe-32,Mt[Kt].f,0,8),r(pt,Rt-32,Mt[Kt].ea,0,8)),Ft.Za){var wt=Me,nn=Te-32+16;for(0<xe&&(ce>=w.za-1?i(wt,nn,Mt[Kt].y[15],4):r(wt,nn,Mt[Kt+1].y,0,4)),Z=0;4>Z;Z++)wt[nn+128+Z]=wt[nn+256+Z]=wt[nn+384+Z]=wt[nn+0+Z];for(Z=0;16>Z;++Z,gt<<=2)wt=Me,nn=Te+kf[Z],xa[Ft.Ob[Z]](wt,nn),bo(gt,Gt,16*+Z,wt,nn)}else if(wt=jl(ce,xe,Ft.Ob[0]),$a[wt](Me,Te),gt!=0)for(Z=0;16>Z;++Z,gt<<=2)bo(gt,Gt,16*+Z,Me,Te+kf[Z]);for(Z=Ft.Gc,wt=jl(ce,xe,Ft.Dd),la[wt](Re,qe),la[wt](pt,Rt),gt=Gt,wt=Re,nn=qe,255&(Ft=Z>>0)&&(170&Ft?In(gt,256,wt,nn):Mr(gt,256,wt,nn)),Ft=pt,gt=Rt,255&(Z>>=8)&&(170&Z?In(Gt,320,Ft,gt):Mr(Gt,320,Ft,gt)),xe<w.Ub-1&&(r(Mt[Kt].y,0,Me,Te+480,16),r(Mt[Kt].f,0,Re,qe+224,8),r(Mt[Kt].ea,0,pt,Rt+224,8)),Z=8*Ee*w.B,Mt=w.sa,Kt=w.ta+16*ce+16*Ee*w.R,Gt=w.qa,Ft=w.ra+8*ce+Z,gt=w.Ha,wt=w.Ia+8*ce+Z,Z=0;16>Z;++Z)r(Mt,Kt+Z*w.R,Me,Te+32*Z,16);for(Z=0;8>Z;++Z)r(Gt,Ft+Z*w.B,Re,qe+32*Z,8),r(gt,wt+Z*w.B,pt,Rt+32*Z,8)}}function Oa(w,T,Z,ce,xe,Ee,Me,Te,Re){var qe=[0],pt=[0],Rt=0,Ft=Re!=null?Re.kd:0,Mt=Re??new va;if(w==null||12>Z)return 7;Mt.data=w,Mt.w=T,Mt.ha=Z,T=[T],Z=[Z],Mt.gb=[Mt.gb];e:{var Kt=T,Gt=Z,gt=Mt.gb;if(e(w!=null),e(Gt!=null),e(gt!=null),gt[0]=0,12<=Gt[0]&&!n(w,Kt[0],"RIFF")){if(n(w,Kt[0]+8,"WEBP")){gt=3;break e}var wt=me(w,Kt[0]+4);if(12>wt||4294967286<wt){gt=3;break e}if(Ft&&wt>Gt[0]-8){gt=7;break e}gt[0]=wt,Kt[0]+=12,Gt[0]-=12}gt=0}if(gt!=0)return gt;for(wt=0<Mt.gb[0],Z=Z[0];;){e:{var nn=w;Gt=T,gt=Z;var fn=qe,on=pt,Bn=Kt=[0];if((h=Rt=[Rt])[0]=0,8>gt[0])gt=7;else{if(!n(nn,Gt[0],"VP8X")){if(me(nn,Gt[0]+4)!=10){gt=3;break e}if(18>gt[0]){gt=7;break e}var On=me(nn,Gt[0]+8),or=1+Je(nn,Gt[0]+12);if(2147483648<=or*(nn=1+Je(nn,Gt[0]+15))){gt=3;break e}Bn!=null&&(Bn[0]=On),fn!=null&&(fn[0]=or),on!=null&&(on[0]=nn),Gt[0]+=18,gt[0]-=18,h[0]=1}gt=0}}if(Rt=Rt[0],Kt=Kt[0],gt!=0)return gt;if(Gt=!!(2&Kt),!wt&&Rt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Kt)),Me!=null&&(Me[0]=Gt),Te!=null&&(Te[0]=0),Me=qe[0],Kt=pt[0],Rt&&Gt&&Re==null){gt=0;break}if(4>Z){gt=7;break}if(wt&&Rt||!wt&&!Rt&&!n(w,T[0],"ALPH")){Z=[Z],Mt.na=[Mt.na],Mt.P=[Mt.P],Mt.Sa=[Mt.Sa];e:{On=w,gt=T,wt=Z;var h=Mt.gb;fn=Mt.na,on=Mt.P,Bn=Mt.Sa,or=22,e(On!=null),e(wt!=null),nn=gt[0];var m=wt[0];for(e(fn!=null),e(Bn!=null),fn[0]=null,on[0]=null,Bn[0]=0;;){if(gt[0]=nn,wt[0]=m,8>m){gt=7;break e}var _=me(On,nn+4);if(4294967286<_){gt=3;break e}var S=8+_+1&-2;if(or+=S,0<h&&or>h){gt=3;break e}if(!n(On,nn,"VP8 ")||!n(On,nn,"VP8L")){gt=0;break e}if(m[0]<S){gt=7;break e}n(On,nn,"ALPH")||(fn[0]=On,on[0]=nn+8,Bn[0]=_),nn+=S,m-=S}}if(Z=Z[0],Mt.na=Mt.na[0],Mt.P=Mt.P[0],Mt.Sa=Mt.Sa[0],gt!=0)break}Z=[Z],Mt.Ja=[Mt.Ja],Mt.xa=[Mt.xa];e:if(h=w,gt=T,wt=Z,fn=Mt.gb[0],on=Mt.Ja,Bn=Mt.xa,On=gt[0],nn=!n(h,On,"VP8 "),or=!n(h,On,"VP8L"),e(h!=null),e(wt!=null),e(on!=null),e(Bn!=null),8>wt[0])gt=7;else{if(nn||or){if(h=me(h,On+4),12<=fn&&h>fn-12){gt=3;break e}if(Ft&&h>wt[0]-8){gt=7;break e}on[0]=h,gt[0]+=8,wt[0]-=8,Bn[0]=or}else Bn[0]=5<=wt[0]&&h[On+0]==47&&!(h[On+4]>>5),on[0]=wt[0];gt=0}if(Z=Z[0],Mt.Ja=Mt.Ja[0],Mt.xa=Mt.xa[0],T=T[0],gt!=0)break;if(4294967286<Mt.Ja)return 3;if(Te==null||Gt||(Te[0]=Mt.xa?2:1),Me=[Me],Kt=[Kt],Mt.xa){if(5>Z){gt=7;break}Te=Me,Ft=Kt,Gt=Ee,w==null||5>Z?w=0:5<=Z&&w[T+0]==47&&!(w[T+4]>>5)?(wt=[0],h=[0],fn=[0],J(on=new W,w,T,Z),nr(on,wt,h,fn)?(Te!=null&&(Te[0]=wt[0]),Ft!=null&&(Ft[0]=h[0]),Gt!=null&&(Gt[0]=fn[0]),w=1):w=0):w=0}else{if(10>Z){gt=7;break}Te=Kt,w==null||10>Z||!Sr(w,T+3,Z-3)?w=0:(Ft=w[T+0]|w[T+1]<<8|w[T+2]<<16,Gt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=Mt.Ja||!Gt||!w?w=0:(Me&&(Me[0]=Gt),Te&&(Te[0]=w),w=1))}if(!w||(Me=Me[0],Kt=Kt[0],Rt&&(qe[0]!=Me||pt[0]!=Kt)))return 3;Re!=null&&(Re[0]=Mt,Re.offset=T-Re.w,e(4294967286>T-Re.w),e(Re.offset==Re.ha-Z));break}return gt==0||gt==7&&Rt&&Re==null?(Ee!=null&&(Ee[0]|=Mt.na!=null&&0<Mt.na.length),ce!=null&&(ce[0]=Me),xe!=null&&(xe[0]=Kt),0):gt}function Ju(w,T,Z){var ce=T.width,xe=T.height,Ee=0,Me=0,Te=ce,Re=xe;if(T.Da=w!=null&&0<w.Da,T.Da&&(Te=w.cd,Re=w.bd,Ee=w.v,Me=w.j,11>Z||(Ee&=-2,Me&=-2),0>Ee||0>Me||0>=Te||0>=Re||Ee+Te>ce||Me+Re>xe))return 0;if(T.v=Ee,T.j=Me,T.va=Ee+Te,T.o=Me+Re,T.U=Te,T.T=Re,T.da=w!=null&&0<w.da,T.da){if(!ze(Te,Re,Z=[w.ib],Ee=[w.hb]))return 0;T.ib=Z[0],T.hb=Ee[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ce/4&&T.hb<3*xe/4,T.Kb=0),1}function wl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function xl(w,T,Z,ce){if(ce==null||0>=w||0>=T)return 2;if(Z!=null){if(Z.Da){var xe=Z.cd,Ee=Z.bd,Me=-2&Z.v,Te=-2&Z.j;if(0>Me||0>Te||0>=xe||0>=Ee||Me+xe>w||Te+Ee>T)return 2;w=xe,T=Ee}if(Z.da){if(!ze(w,T,xe=[Z.ib],Ee=[Z.hb]))return 2;w=xe[0],T=Ee[0]}}ce.width=w,ce.height=T;e:{var Re=ce.width,qe=ce.height;if(w=ce.S,0>=Re||0>=qe||!(w>=Ro&&13>w))w=2;else{if(0>=ce.Rd&&ce.sd==null){Me=Ee=xe=T=0;var pt=(Te=Re*Df[w])*qe;if(11>w||(Ee=(qe+1)/2*(T=(Re+1)/2),w==12&&(Me=(xe=Re)*qe)),(qe=s(pt+2*Ee+Me))==null){w=1;break e}ce.sd=qe,11>w?((Re=ce.f.RGBA).eb=qe,Re.fb=0,Re.A=Te,Re.size=pt):((Re=ce.f.kb).y=qe,Re.O=0,Re.fa=Te,Re.Fd=pt,Re.f=qe,Re.N=0+pt,Re.Ab=T,Re.Cd=Ee,Re.ea=qe,Re.W=0+pt+Ee,Re.Db=T,Re.Ed=Ee,w==12&&(Re.F=qe,Re.J=0+pt+2*Ee),Re.Tc=Me,Re.lb=xe)}if(T=1,xe=ce.S,Ee=ce.width,Me=ce.height,xe>=Ro&&13>xe)if(11>xe)w=ce.f.RGBA,T&=(Te=Math.abs(w.A))*(Me-1)+Ee<=w.size,T&=Te>=Ee*Df[xe],T&=w.eb!=null;else{w=ce.f.kb,Te=(Ee+1)/2,pt=(Me+1)/2,Re=Math.abs(w.fa),qe=Math.abs(w.Ab);var Rt=Math.abs(w.Db),Ft=Math.abs(w.lb),Mt=Ft*(Me-1)+Ee;T&=Re*(Me-1)+Ee<=w.Fd,T&=qe*(pt-1)+Te<=w.Cd,T=(T&=Rt*(pt-1)+Te<=w.Ed)&Re>=Ee&qe>=Te&Rt>=Te,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,xe==12&&(T&=Ft>=Ee,T&=Mt<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||Z!=null&&Z.fd&&(w=wl(ce)),w}var Ss=64,Na=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ea=24,Io=32,zl=8,no=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ge("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(w){return w},N.Predictor2=function(w,T,Z){return T[Z+0]},N.Predictor3=function(w,T,Z){return T[Z+1]},N.Predictor4=function(w,T,Z){return T[Z-1]},N.Predictor5=function(w,T,Z){return Ke(Ke(w,T[Z+1]),T[Z+0])},N.Predictor6=function(w,T,Z){return Ke(w,T[Z-1])},N.Predictor7=function(w,T,Z){return Ke(w,T[Z+0])},N.Predictor8=function(w,T,Z){return Ke(T[Z-1],T[Z+0])},N.Predictor9=function(w,T,Z){return Ke(T[Z+0],T[Z+1])},N.Predictor10=function(w,T,Z){return Ke(Ke(w,T[Z-1]),Ke(T[Z+0],T[Z+1]))},N.Predictor11=function(w,T,Z){var ce=T[Z+0];return 0>=yt(ce>>24&255,w>>24&255,(T=T[Z-1])>>24&255)+yt(ce>>16&255,w>>16&255,T>>16&255)+yt(ce>>8&255,w>>8&255,T>>8&255)+yt(255&ce,255&w,255&T)?ce:w},N.Predictor12=function(w,T,Z){var ce=T[Z+0];return(xt((w>>24&255)+(ce>>24&255)-((T=T[Z-1])>>24&255))<<24|xt((w>>16&255)+(ce>>16&255)-(T>>16&255))<<16|xt((w>>8&255)+(ce>>8&255)-(T>>8&255))<<8|xt((255&w)+(255&ce)-(255&T)))>>>0},N.Predictor13=function(w,T,Z){var ce=T[Z-1];return(bt((w=Ke(w,T[Z+0]))>>24&255,ce>>24&255)<<24|bt(w>>16&255,ce>>16&255)<<16|bt(w>>8&255,ce>>8&255)<<8|bt(w>>0&255,ce>>0&255))>>>0};var _o=N.PredictorAdd0;N.PredictorAdd1=Wt,Ge("Predictor2","PredictorAdd2"),Ge("Predictor3","PredictorAdd3"),Ge("Predictor4","PredictorAdd4"),Ge("Predictor5","PredictorAdd5"),Ge("Predictor6","PredictorAdd6"),Ge("Predictor7","PredictorAdd7"),Ge("Predictor8","PredictorAdd8"),Ge("Predictor9","PredictorAdd9"),Ge("Predictor10","PredictorAdd10"),Ge("Predictor11","PredictorAdd11"),Ge("Predictor12","PredictorAdd12"),Ge("Predictor13","PredictorAdd13");var wo=N.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var kc,Os=N.ColorIndexInverseTransform,Za=N.MapARGB,ro=N.VP8LColorIndexInverseTransformAlpha,io=N.MapAlpha,Xa=N.VP8LPredictorsAdd=[];Xa.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Ja,so,$s,Ia,ta,oo,Lt,Yt,Nt,In,rr,Mr,Xi,Pi,du,xo,Ji,Ba,Qa,Ra,Fa,ja,ti,ba,Vs,Mi,Ii,vs,Ui=s(511),na=s(2041),Bo=s(225),aa=s(767),Qu=0,za=na,Cs=Bo,$i=aa,ao=Ui,Ro=0,wr=1,el=2,tl=3,_a=4,Lo=5,ih=6,Us=7,Hs=8,wa=9,u=10,y=[2,3,7],P=[3,3,11],G=[280,256,256,256,40],ue=[0,1,1,1,0],Ce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lt=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ot=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ht=8,un=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Fn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sr=null,$r=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Es=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],os=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ws=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$a=[],xa=[],la=[],Ad=1,Du=2,_i=[],lo=[];Ut("UpsampleRgbLinePair",Vr,3),Ut("UpsampleBgrLinePair",qi,3),Ut("UpsampleRgbaLinePair",Qo,4),Ut("UpsampleBgraLinePair",Ls,4),Ut("UpsampleArgbLinePair",ms,4),Ut("UpsampleRgba4444LinePair",Ei,2),Ut("UpsampleRgb565LinePair",pi,2);var Oe=N.UpsampleRgbLinePair,jo=N.UpsampleBgrLinePair,ec=N.UpsampleRgbaLinePair,Gs=N.UpsampleBgraLinePair,Hr=N.UpsampleArgbLinePair,zh=N.UpsampleRgba4444LinePair,Pf=N.UpsampleRgb565LinePair,$h=16,Ll=1<<$h-1,oh=-227,Td=482,zp=6,Ac=0,Vh=s(256),fu=s(256),$p=s(256),Uh=s(256),Hh=s(Td-oh),Mf=s(Td-oh);to("YuvToRgbRow",Vr,3),to("YuvToBgrRow",qi,3),to("YuvToRgbaRow",Qo,4),to("YuvToBgraRow",Ls,4),to("YuvToArgbRow",ms,4),to("YuvToRgba4444Row",Ei,2),to("YuvToRgb565Row",pi,2);var kf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nl=[0,2,8],Af=[8,7,6,4,4,2,2,2,1,1,1,1],Tf=1;this.WebPDecodeRGBA=function(w,T,Z,ce,xe){var Ee=wr,Me=new zs,Te=new tr;Me.ba=Te,Te.S=Ee,Te.width=[Te.width],Te.height=[Te.height];var Re=Te.width,qe=Te.height,pt=new vr;if(pt==null||w==null)var Rt=2;else e(pt!=null),Rt=Oa(w,T,Z,pt.width,pt.height,pt.Pd,pt.Qd,pt.format,null);if(Rt!=0?Re=0:(Re!=null&&(Re[0]=pt.width[0]),qe!=null&&(qe[0]=pt.height[0]),Re=1),Re){Te.width=Te.width[0],Te.height=Te.height[0],ce!=null&&(ce[0]=Te.width),xe!=null&&(xe[0]=Te.height);e:{if(ce=new Jr,(xe=new va).data=w,xe.w=T,xe.ha=Z,xe.kd=1,T=[0],e(xe!=null),((w=Oa(xe.data,xe.w,xe.ha,null,null,null,T,null,xe))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Me!=null),ce.data=xe.data,ce.w=xe.w+xe.offset,ce.ha=xe.ha-xe.offset,ce.put=Oo,ce.ac=Ti,ce.bc=Ts,ce.ma=Me,xe.xa){if((w=Vn())==null){Me=1;break e}if(function(Ft,Mt){var Kt=[0],Gt=[0],gt=[0];t:for(;;){if(Ft==null)return 0;if(Mt==null)return Ft.a=2,0;if(Ft.l=Mt,Ft.a=0,J(Ft.m,Mt.data,Mt.w,Mt.ha),!nr(Ft.m,Kt,Gt,gt)){Ft.a=3;break t}if(Ft.xb=Du,Mt.width=Kt[0],Mt.height=Gt[0],!hr(Kt[0],Gt[0],1,Ft,null))break t;return 1}return e(Ft.a!=0),0}(w,ce)){if(ce=(T=xl(ce.width,ce.height,Me.Oa,Me.ba))==0){t:{ce=w;n:for(;;){if(ce==null){ce=0;break t}if(e(ce.s.yc!=null),e(ce.s.Ya!=null),e(0<ce.s.Wb),e((Z=ce.l)!=null),e((xe=Z.ma)!=null),ce.xb!=0){if(ce.ca=xe.ba,ce.tb=xe.tb,e(ce.ca!=null),!Ju(xe.Oa,Z,tl)){ce.a=2;break n}if(!Lr(ce,Z.width)||Z.da)break n;if((Z.da||Qt(ce.ca.S))&&kt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&kt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!ee(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break n}ce.xb=0}if(!St(ce,ce.V,ce.Ba,ce.c,ce.i,Z.o,$n))break n;xe.Dc=ce.Ma,ce=1;break t}e(ce.a!=0),ce=0}ce=!ce}ce&&(T=w.a)}else T=w.a}else{if((w=new dr)==null){Me=1;break e}if(w.Fa=xe.na,w.P=xe.P,w.qc=xe.Sa,ws(w,ce)){if((T=xl(ce.width,ce.height,Me.Oa,Me.ba))==0){if(w.Aa=0,Z=Me.Oa,e((xe=w)!=null),Z!=null){if(0<(Re=0>(Re=Z.Md)?0:100<Re?255:255*Re/100)){for(qe=pt=0;4>qe;++qe)12>(Rt=xe.pb[qe]).lc&&(Rt.ia=Re*Af[0>Rt.lc?0:Rt.lc]>>3),pt|=Rt.ia;pt&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=Z.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}Sn(w,ce)||(T=w.a)}}else T=w.a}T==0&&Me.Oa!=null&&Me.Oa.fd&&(T=wl(Me.ba))}Me=T}Ee=Me!=0?null:11>Ee?Te.f.RGBA.eb:Te.f.kb.y}else Ee=null;return Ee};var Df=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,F){for(var Y="",B=0;B<4;B++)Y+=String.fromCharCode(N[F++]);return Y}function d(N,F){return(N[F+0]<<0|N[F+1]<<8|N[F+2]<<16)>>>0}function p(N,F){return(N[F+0]<<0|N[F+1]<<8|N[F+2]<<16|N[F+3]<<24)>>>0}new l;var v=[0],g=[0],x=[],E=new l,k=t,A=function(N,F){var Y={},B=0,I=!1,R=0,q=0;if(Y.frames=[],!function(V,K,pe,he){for(var te=0;te<he;te++)if(V[K+te]!=pe.charCodeAt(te))return!0;return!1}(N,F,"RIFF",4)){var U,$;for(p(N,F+=4),F+=8;F<N.length;){var oe=c(N,F),J=p(N,F+=4);F+=4;var _e=J+(1&J);switch(oe){case"VP8 ":case"VP8L":Y.frames[B]===void 0&&(Y.frames[B]={}),(W=Y.frames[B]).src_off=I?q:F-8,W.src_size=R+J+8,B++,I&&(I=!1,R=0,q=0);break;case"VP8X":(W=Y.header={}).feature_flags=N[F];var ve=F+4;W.canvas_width=1+d(N,ve),ve+=3,W.canvas_height=1+d(N,ve),ve+=3;break;case"ALPH":I=!0,R=_e+8,q=F-8;break;case"ANIM":(W=Y.header).bgcolor=p(N,F),ve=F+4,W.loop_count=(U=N)[($=ve)+0]<<0|U[$+1]<<8,ve+=2;break;case"ANMF":var ke,W;(W=Y.frames[B]={}).offset_x=2*d(N,F),F+=3,W.offset_y=2*d(N,F),F+=3,W.width=1+d(N,F),F+=3,W.height=1+d(N,F),F+=3,W.duration=d(N,F),F+=3,ke=N[F++],W.dispose=1&ke,W.blend=ke>>1&1}oe!="ANMF"&&(F+=_e)}return Y}}(k,0);A.response=k,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,z=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],g=[D.canvas_width];for(var X=0;X<z.length&&z[X].blend!=0;X++);}var re=z[0],ge=E.WebPDecodeRGBA(k,re.src_off,re.src_size,g,v);re.rgba=ge,re.imgwidth=g[0],re.imgheight=v[0];for(var fe=0;fe<g[0]*v[0]*4;fe++)x[fe]=ge[fe];return this.width=g,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof Cb=="function"},n=function(v,g,x,E){var k=4,A=o;switch(E){case t.image_compression.FAST:k=1,A=s;break;case t.image_compression.MEDIUM:k=6,A=a;break;case t.image_compression.SLOW:k=9,A=l}v=r(v,g,x,A);var D=Cb(v,{level:k});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(v,g,x,E){for(var k,A,D,z=v.length/g,X=new Uint8Array(v.length+z),re=d(),ge=0;ge<z;ge+=1){if(D=ge*g,k=v.subarray(D,D+g),E)X.set(E(k,x,A),D+ge);else{for(var fe,N=re.length,F=[];fe<N;fe+=1)F[fe]=re[fe](k,x,A);var Y=p(F.concat());X.set(F[Y],D+ge)}A=k}return X},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var x,E=[],k=v.length;E[0]=1;for(var A=0;A<k;A+=1)x=v[A-g]||0,E[A+1]=v[A]-x+256&255;return E},o=function(v,g,x){var E,k=[],A=v.length;k[0]=2;for(var D=0;D<A;D+=1)E=x&&x[D]||0,k[D+1]=v[D]-E+256&255;return k},a=function(v,g,x){var E,k,A=[],D=v.length;A[0]=3;for(var z=0;z<D;z+=1)E=v[z-g]||0,k=x&&x[z]||0,A[z+1]=v[z]+256-(E+k>>>1)&255;return A},l=function(v,g,x){var E,k,A,D,z=[],X=v.length;z[0]=4;for(var re=0;re<X;re+=1)E=v[re-g]||0,k=x&&x[re]||0,A=x&&x[re-g]||0,D=c(E,k,A),z[re+1]=v[re]-D+256&255;return z},c=function(v,g,x){if(v===g&&g===x)return v;var E=Math.abs(g-x),k=Math.abs(v-x),A=Math.abs(v+g-x-x);return E<=k&&E<=A?v:k<=A?g:x},d=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(x){return x.reduce(function(E,k){return E+Math.abs(k)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(v,g,x,E){var k,A,D,z,X,re,ge,fe,N,F,Y,B,I,R,q,U=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(D=new DH(v)).imgData,A=D.bits,k=D.colorSpace,X=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){N=(fe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,Y=new Uint8Array(N*D.colors),F=new Uint8Array(N);var oe,J=D.pixelBitlength-D.bits;for(R=0,q=0;R<N;R++){for(I=fe[R],oe=0;oe<J;)Y[q++]=I>>>oe&255,oe+=D.bits;F[R]=I>>>oe&255}}if(D.bits===16){N=(fe=new Uint32Array(D.decodePixels().buffer)).length,Y=new Uint8Array(N*(32/D.pixelBitlength)*D.colors),F=new Uint8Array(N*(32/D.pixelBitlength)),B=D.colors>1,R=0,q=0;for(var _e=0;R<N;)I=fe[R++],Y[q++]=I>>>0&255,B&&(Y[q++]=I>>>16&255,I=fe[R++],Y[q++]=I>>>0&255),F[_e++]=I>>>16&255;A=8}E!==t.image_compression.NONE&&e()?(v=n(Y,D.width*D.colors,D.colors,E),ge=n(F,D.width,1,E)):(v=Y,ge=F,U=void 0)}if(D.colorType===3&&(k=this.color_spaces.INDEXED,re=D.palette,D.transparency.indexed)){var ve=D.transparency.indexed,ke=0;for(R=0,N=ve.length;R<N;++R)ke+=ve[R];if((ke/=255)===N-1&&ve.indexOf(0)!==-1)z=[ve.indexOf(0)];else if(ke!==N){for(fe=D.decodePixels(),F=new Uint8Array(fe.length),R=0,N=fe.length;R<N;R++)F[R]=ve[fe[R]];ge=n(F,D.width,1)}}var W=function(V){var K;switch(V){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K}(E);return U===this.decode.FLATE_DECODE&&($="/Predictor "+W+" "),$+="/Colors "+X+" /BitsPerComponent "+A+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:x,data:v,index:g,filter:U,decodeParameters:$,transparency:z,palette:re,sMask:ge,predictor:W,width:D.width,height:D.height,bitsPerComponent:A,colorSpace:k}}}})(Nr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new OH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new a2(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Nr.API),cc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){bs.log("bit decode error:"+n)}},cc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},cc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},cc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},cc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},cc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},cc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},cc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},cc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new cc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new a2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Nr.API),N5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new N5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new a2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Nr.API),Nr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],g=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=g}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Nr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qf=Nr.API,S0=qf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,g=t.length,x=0,E=a[0]||l,k=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&cs(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/d:0,k.push((a[r]||E)/l+v)),x=r;return k},A5=qf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return qf.processArabic&&(t=qf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:S0.apply(this,arguments).reduce(function(s,o){return s+o},0)},T5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},D5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],v=n.textIndent||0,g=0,x=0,E=t.split(" "),k=S0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var A=Array(l).join(" "),D=[];E.map(function(X){(X=X.split(/\s*\n/)).length>1?D=D.concat(X.map(function(re,ge){return(ge&&re.length?`
`:"")+re})):D.push(X[0])}),E=D,l=A5.apply(this,[A,n])}for(s=0,o=E.length;s<o;s++){var z=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),z=1),v+g+(x=(i=S0.apply(this,[r,n])).reduce(function(X,re){return X+re},0))>e||z){if(x>e){for(a=T5.apply(this,[r,i,e-(v+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(X,re){return X+re},0)}else d=[r];p.push(d),v=x+l,g=k}else d.push(r),v+=g+x,g=k}return c=l?function(X,re){return(re?A:"")+X.join(" ")}:function(X){return X.join(" ")},p.map(c)},qf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(D5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,g,x,E,k=["{"];for(var A in p){if(v=p[A],isNaN(parseInt(A,10))?g="'"+A+"'":(A=parseInt(A,10),g=(g=s(A).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(cs(v)!=="object")throw new Error("Don't know what to do with value type "+cs(v)+".");x=o(v)}k.push(g+x)}return k.push("}"),k.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,x,E,k={},A=1,D=k,z=[],X="",re="",ge=p.length-1,fe=1;fe<ge;fe+=1)(E=p[fe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(z.push([D,x]),D={},x=void 0):E=="}"?((g=z.pop())[0][g[1]]=D,x=void 0,D=g[0]):E=="-"?A=-1:x===void 0?n.hasOwnProperty(E)?(X+=n[E],x=parseInt(X,16)*A,A=1,X=""):X+=E:n.hasOwnProperty(E)?(re+=n[E],D[x]=parseInt(re,16)*A,A=1,x=void 0,re=""):re+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,g=d.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Nr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Hg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Nr),function(t){function e(){return(jr.canvg?Promise.resolve(jr.canvg):Mh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Nr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw bs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw bs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Nr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Nr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(x,E){var k,A=!1;for(k=0;k<x.length;k+=1)x[k]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(cs(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Nr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,x){return g-x})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",x=0;x<v.length;x++)g+=String.fromCharCode(v[x]);var E=c();d({data:g,addLength1:!0,objectId:E}),l("endobj");var k=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+sp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+sp(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+sp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var x=c();d({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+sp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+sp(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,x=p.fonts,E=g,k="",A=0,D="",z=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(D=a,E=g,Array.isArray(a)&&(D=a[0]),A=0;A<D.length;A+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[D[A].charCodeAt(0)]),o||D[A].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?k+=D[A]:k+="";var X="";return parseInt(E.slice(1))<14||z==="WinAnsiEncoding"?X=v(k,E).split("").map(function(re){return re.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(X=n(k,x[E])),p.isHex=!0,{text:X,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Nr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Nr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,z=0;this.__bidiEngine__={};var X=function(B){var I=B.charCodeAt(),R=I>>8,q=E[R];return q!==void 0?p[256*q+(255&I)]:R===252||R===253?"AL":A.test(R)?"L":R===8?"R":"N"},re=function(B){for(var I,R=0;R<B.length;R++){if((I=X(B.charAt(R)))==="L")return!1;if(I==="R")return!0}return!1},ge=function(B,I,R,q){var U,$,oe,J,_e=I[q];switch(_e){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(_e="AN");break;case"AL":D=!0,_e="R";break;case"WS":_e="N";break;case"CS":q<1||q+1>=I.length||(U=R[q-1])!=="EN"&&U!=="AN"||($=I[q+1])!=="EN"&&$!=="AN"?_e="N":D&&($="AN"),_e=$===U?$:"N";break;case"ES":_e=(U=q>0?R[q-1]:"B")==="EN"&&q+1<I.length&&I[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&R[q-1]==="EN"){_e="EN";break}if(D){_e="N";break}for(oe=q+1,J=I.length;oe<J&&I[oe]==="ET";)oe++;_e=oe<J&&I[oe]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=I.length,oe=q+1;oe<J&&I[oe]==="NSM";)oe++;if(oe<J){var ve=B[q],ke=ve>=1425&&ve<=2303||ve===64286;if(U=I[oe],ke&&(U==="R"||U==="AL")){_e="R";break}}}_e=q<1||(U=I[q-1])==="B"?"N":R[q-1];break;case"B":D=!1,i=!0,_e=z;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":_e="N"}return _e},fe=function(B,I,R){var q=B.split("");return R&&N(q,R,{hiLevel:z}),q.reverse(),I&&I.reverse(),q.join("")},N=function(B,I,R){var q,U,$,oe,J,_e=-1,ve=B.length,ke=0,W=[],V=z?g:v,K=[];for(D=!1,i=!1,s=!1,U=0;U<ve;U++)K[U]=X(B[U]);for($=0;$<ve;$++){if(J=ke,W[$]=ge(B,K,W,$),q=240&(ke=V[J][x[W[$]]]),ke&=15,I[$]=oe=V[ke][5],q>0)if(q===16){for(U=_e;U<$;U++)I[U]=1;_e=-1}else _e=-1;if(V[ke][6])_e===-1&&(_e=$);else if(_e>-1){for(U=_e;U<$;U++)I[U]=oe;_e=-1}K[$]==="B"&&(I[$]=0),R.hiLevel|=oe}s&&function(pe,he,te){for(var le=0;le<te;le++)if(pe[le]==="S"){he[le]=z;for(var Q=le-1;Q>=0&&pe[Q]==="WS";Q--)he[Q]=z}}(K,I,ve)},F=function(B,I,R,q,U){if(!(U.hiLevel<B)){if(B===1&&z===1&&!i)return I.reverse(),void(R&&R.reverse());for(var $,oe,J,_e,ve=I.length,ke=0;ke<ve;){if(q[ke]>=B){for(J=ke+1;J<ve&&q[J]>=B;)J++;for(_e=ke,oe=J-1;_e<oe;_e++,oe--)$=I[_e],I[_e]=I[oe],I[oe]=$,R&&($=R[_e],R[_e]=R[oe],R[oe]=$);ke=J}ke++}}},Y=function(B,I,R){var q=B.split(""),U={hiLevel:z};return R||(R=[]),N(q,R,U),function($,oe,J){if(J.hiLevel!==0&&d)for(var _e,ve=0;ve<$.length;ve++)oe[ve]===1&&(_e=k.indexOf($[ve]))>=0&&($[ve]=k[_e+1])}(q,R,U),F(2,q,I,R,U),F(1,q,I,R,U),q.join("")};return this.__bidiEngine__.doBidiReorder=function(B,I,R){if(function(U,$){if($)for(var oe=0;oe<U.length;oe++)$[oe]=oe;a===void 0&&(a=re(U)),c===void 0&&(c=re(U))}(B,I),o||!l||c)if(o&&l&&a^c)z=a?1:0,B=fe(B,I,R);else if(!o&&l&&c)z=a?1:0,B=Y(B,I,R),B=fe(B,I);else if(!o||a||l||c){if(o&&!l&&a^c)B=fe(B,I),a?(z=0,B=Y(B,I,R)):(z=1,B=Y(B,I,R),B=fe(B,I));else if(o&&a&&!l&&c)z=1,B=Y(B,I,R),B=fe(B,I);else if(!o&&!l&&a^c){var q=d;a?(z=1,B=Y(B,I,R),z=0,d=!1,B=Y(B,I,R),d=q):(z=0,B=Y(B,I,R),B=fe(B,I),z=1,d=!1,B=Y(B,I,R),d=q,B=fe(B,I))}}else z=0,B=Y(B,I,R);else z=a?1:0,B=Y(B,I,R);return B},this.__bidiEngine__.setOptions=function(B){B&&(o=B.isInputVisual,l=B.isOutputVisual,a=B.isInputRtl,c=B.isOutputRtl,d=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Nr),Nr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ld(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new YH(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new NH(this.contents),this.head=new BH(this),this.name=new $H(this),this.cmap=new rP(this),this.toUnicode={},this.hhea=new RH(this),this.maxp=new VH(this),this.hmtx=new UH(this),this.post=new jH(this),this.os2=new FH(this),this.loca=new qH(this),this.glyf=new HH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Pc,Ld=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),NH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,v,g,x,E;for(E in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),d=16*g-p,(i=new Ld).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*g,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=iP.call(n);n.length%4;)n.push(0);for(s=new Ld(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),IH={}.hasOwnProperty,rh=function(t,e){for(var n in e)IH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var BH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ld).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),I5=function(){function t(e,n){var r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var X,re;for(re=[],l=X=0;0<=v?X<v:X>v;l=0<=v?++X:--X)re.push(e.readUInt16());return re}(),e.pos+=2,E=function(){var X,re;for(re=[],l=X=0;0<=v?X<v:X>v;l=0<=v?++X:--X)re.push(e.readUInt16());return re}(),c=function(){var X,re;for(re=[],l=X=0;0<=v?X<v:X>v;l=0<=v?++X:--X)re.push(e.readUInt16());return re}(),d=function(){var X,re;for(re=[],l=X=0;0<=v?X<v:X>v;l=0<=v?++X:--X)re.push(e.readUInt16());return re}(),i=(this.length-e.pos+this.offset)/2,a=function(){var X,re;for(re=[],l=X=0;0<=i?X<i:X>i;l=0<=i?++X:--X)re.push(e.readUInt16());return re}(),l=A=0,z=s.length;A<z;l=++A)for(k=s[l],r=D=x=E[l];x<=k?D<=k:D>=k;r=x<=k?++D:--D)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,z,X,re,ge,fe,N,F,Y,B,I,R,q,U,$,oe,J,_e,ve,ke,W,V,K,pe,he,te,le,Q,Be,De,Je;switch(q=new Ld,o=Object.keys(e).sort(function(me,ee){return me-ee}),n){case"macroman":for(E=0,k=function(){var me=[];for(x=0;x<256;++x)me.push(0);return me}(),D={0:0},s={},U=0,_e=o.length;U<_e;U++)D[Q=e[i=o[U]]]==null&&(D[Q]=++E),s[i]={old:e[i],new:D[e[i]]},k[i]=D[e[i]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(k),{charMap:s,subtable:q.data,maxGlyphID:E+1};case"unicode":for(I=[],p=[],z=0,D={},r={},A=c=null,$=0,ve=o.length;$<ve;$++)D[re=e[i=o[$]]]==null&&(D[re]=++z),r[i]={old:re,new:D[re]},a=D[re]-i,A!=null&&a===c||(A&&p.push(A),I.push(i),c=a),A=i;for(A&&p.push(A),p.push(65535),I.push(65535),Y=2*(F=I.length),N=2*Math.pow(Math.log(F)/Math.LN2,2),v=Math.log(N/2)/Math.LN2,fe=2*F-N,l=[],ge=[],g=[],x=oe=0,ke=I.length;oe<ke;x=++oe){if(B=I[x],d=p[x],B===65535){l.push(0),ge.push(0);break}if(B-(R=r[B].new)>=32768)for(l.push(0),ge.push(2*(g.length+F-x)),i=J=B;B<=d?J<=d:J>=d;i=B<=d?++J:--J)g.push(r[i].new);else l.push(R-B),ge.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*F+2*g.length),q.writeUInt16(0),q.writeUInt16(Y),q.writeUInt16(N),q.writeUInt16(v),q.writeUInt16(fe),te=0,W=p.length;te<W;te++)i=p[te],q.writeUInt16(i);for(q.writeUInt16(0),le=0,V=I.length;le<V;le++)i=I[le],q.writeUInt16(i);for(Be=0,K=l.length;Be<K;Be++)a=l[Be],q.writeUInt16(a);for(De=0,pe=ge.length;De<pe;De++)X=ge[De],q.writeUInt16(X);for(Je=0,he=g.length;Je<he;Je++)E=g[Je],q.writeUInt16(E);return{charMap:r,subtable:q.data,maxGlyphID:z+1}}},t}(),rP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new I5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=I5.encode(n,r),(s=new Ld).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),RH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),FH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),jH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),zH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},$H=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,p,v,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new zH(d,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),VH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),UH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,g;for(g=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),iP=[].slice,HH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ld(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new GH(l,d,v,c,p):new WH(l,a,d,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),WH=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),GH=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ld(iP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),qH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),YH=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,g,x,E,k,A;for(i in r=rP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},A=r.charMap)g[(l=A[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in g||(g[x]=v++);return d=function(D){var z,X;for(z in X={},D)X[D[z]]=z;return X}(g),p=Object.keys(d).sort(function(D,z){return D-z}),E=function(){var D,z,X;for(X=[],D=0,z=p.length;D<z;D++)a=p[D],X.push(d[a]);return X}(),s=this.font.glyf.encode(o,E,g),c=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();Nr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const KH={class:"h-full flex"},ZH={class:"flex-1 relative"},XH={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},JH={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},QH={class:"text-center max-w-lg mx-auto p-8"},eW={class:"space-y-4"},tW={class:"map-parent"},nW={class:"map-content flex flex-col h-full"},rW={class:"flex-1 flex flex-col md:flex-row relative"},iW={class:"flex-1 relative"},sW={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},oW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},aW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},lW={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},uW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},cW={key:0,class:"space-y-4"},hW={key:0,class:"space-y-2"},dW={class:"grid grid-cols-1 gap-2"},fW=["onClick"],pW={class:"font-medium text-gray-900"},gW={key:1,class:"space-y-2"},mW={class:"flex items-center mb-4"},vW={class:"text-sm text-gray-600"},yW={class:"grid grid-cols-1 gap-2"},bW=["onClick"],_W={class:"font-medium text-gray-900"},wW={key:2,class:"space-y-2"},xW={class:"flex items-center mb-4"},LW={class:"text-sm text-gray-600"},SW={class:"grid grid-cols-1 gap-2"},CW={key:0,class:"text-center py-4"},EW=["onClick"],PW={class:"font-medium text-gray-900"},MW={key:3,class:"space-y-2"},kW={class:"flex items-center mb-4"},AW={class:"text-sm text-gray-600"},TW={class:"grid grid-cols-1 gap-2"},DW=["onClick"],OW={class:"font-medium text-gray-900"},NW={class:"text-sm text-gray-500"},IW={class:"text-xs text-gray-400 mt-1"},BW=["onClick"],RW={key:1,class:"space-y-4"},FW={key:0,class:"space-y-2"},jW={class:"grid grid-cols-1 gap-2"},zW={key:0,class:"text-center py-8"},$W=["onClick"],VW={class:"font-medium text-gray-900"},UW={key:1,class:"space-y-2"},HW={class:"flex items-center mb-4"},WW={class:"text-sm text-gray-600"},GW={class:"grid grid-cols-1 gap-2"},qW=["onClick"],YW={class:"font-medium text-gray-900"},KW={class:"text-sm text-gray-500"},ZW={class:"text-xs text-gray-400 mt-1"},XW=["onClick"],JW={key:2,class:"space-y-4"},QW={key:0,class:"space-y-2"},eG={class:"grid grid-cols-1 gap-2"},tG=["onClick"],nG={class:"font-medium text-gray-900"},rG={key:1,class:"space-y-2"},iG={class:"flex items-center mb-4"},sG={class:"text-sm text-gray-600"},oG={class:"grid grid-cols-1 gap-2"},aG={key:0,class:"text-center py-4"},lG=["onClick"],uG={class:"font-medium text-gray-900"},cG={key:2,class:"space-y-2"},hG={class:"flex items-center mb-4"},dG={class:"text-sm text-gray-600"},fG={class:"grid grid-cols-1 gap-2"},pG=["onClick"],gG={class:"font-medium text-gray-900"},mG={class:"text-sm text-gray-500"},vG={class:"text-xs text-gray-400 mt-1"},yG=["onClick"],bG={key:3,class:"space-y-4"},_G={key:0,class:"text-center py-8"},wG={key:1,class:"space-y-2"},xG=["onClick"],LG={class:"font-medium text-gray-900"},SG={class:"text-sm text-gray-500"},CG={class:"text-xs text-gray-400 mt-1"},EG=["onClick"],PG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},MG={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},kG={class:"text-center mb-4"},AG={class:"mt-2 text-gray-600"},B5=Rs({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=XB(),r=Ct(null),i=Ct(!1),s=zy(),o=Mp(),a=yf(),l=ru(),c=Ct([]),d=Ct({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:g,initMap:x,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:A,featureGroup:D,adjustView:z,clearActiveControlPoints:X,calculateConnectedCoverageArea:re,isDrawing:ge}=MU(),{initMap:fe,changeBaseMap:N}=kU(),F=Ct(!1),Y=Ct(!1),B=Ct(!1),I=Ct(!1),R=Ct(null),q=Ct(null),U=Ct(null),$=Ct(!1),oe=Ct(null),J=ma(),_e=Ct([]),ve=Ct([]),ke=Ct([]),W=Ct(null),V=Ct(null),K=Ct(null),pe=Ct(!1),he=Ct(!1),te=Ct(!1),le=Ct(null),Q=Xn(()=>{var at,Ie;return console.log("[MapView][filteredClients] Computing with:",{userType:(at=J.user)==null?void 0:at.user_type,selectedSalarie:W.value,salarieVisiteurs:ve.value,visiteurCount:((Ie=ve.value)==null?void 0:Ie.length)||0}),J.isSalarie||W.value?ve.value:[]}),Be=Xn(()=>{var En,jt,Un;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(En=v.value.properties)==null?void 0:En.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const at=v.value.properties||{};let Ie="unknown";at.type?Ie=at.type:v.value instanceof Vt.Circle?Ie="Circle":v.value instanceof Wa||v.value instanceof Vt.Rectangle?Ie="Rectangle":v.value instanceof ld||v.value instanceof Vt.Polygon?Ie="Polygon":(v.value instanceof ua||v.value instanceof Vt.Polyline&&!(v.value instanceof Vt.Polygon))&&(Ie="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${Ie}`),at.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=Ie);let ct;if(at.style&&at.style.name)ct=at.style.name,console.log("[MapView][selectedShape] Using name from style:",ct);else if(at.name)ct=at.name,console.log("[MapView][selectedShape] Using name from properties:",ct);else if(v.value.name)ct=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",ct);else{const St=Object.getOwnPropertyDescriptor(v.value,"name");St&&St.value&&(ct=St.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",ct));const qt=["_name","displayName","title"];for(const Vn of qt)if(v.value[Vn]){ct=v.value[Vn],console.log(`[MapView][selectedShape] Found name in ${Vn}:`,ct);break}}ct&&(console.log(`[MapView][selectedShape] Ensuring name "${ct}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=ct,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=ct,v.value.name=ct,typeof v.value.setName=="function"&&(v.value.setName(ct),console.log(`[MapView][selectedShape] Used setName method to set name "${ct}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:Ie,name:at.name,foundName:ct,hasNameProperty:"name"in at,allPropertiesKeys:Object.keys(at),layerId:v.value._leaflet_id,rawProperties:at,layerName:v.value.name,layerPropertiesName:(jt=v.value.properties)==null?void 0:jt.name});const Ln={...at,type:Ie,name:ct||v.value.name||at.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},$n={type:Ie,properties:Ln,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:$n.type,hasName:"name"in $n.properties,name:$n.properties.name,layerName:$n.layer.name,layerPropertiesName:(Un=$n.layer.properties)==null?void 0:Un.name}),$n});function De(at){const Ie=at.getCenter(),ct=at.getZoom(),Ln={lat:Ie.lat,lng:Ie.lng,zoom:ct};document.cookie=`mapState=${JSON.stringify(Ln)};max-age=2592000;path=/`}function Je(){const Ie=document.cookie.split(";").find(ct=>ct.trim().startsWith("mapState="));if(Ie)try{return JSON.parse(Ie.split("=")[1])}catch(ct){return console.error("Erreur lors de la lecture du cookie de position:",ct),null}return null}Zs(async()=>{var at,Ie;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(J.isAdmin||J.isEntreprise)&&await An(),J.isEntreprise){pe.value=!0;try{const St=await Nn.get("/users/",{params:{role:"SALARIE",entreprise:(at=J.user)==null?void 0:at.id}});_e.value=St.data}catch(St){console.error("Error loading salaries:",St),_e.value=[]}finally{pe.value=!1}}if(J.isSalarie){he.value=!0;try{const St=await J.fetchSalarieVisiteurs(((Ie=J.user)==null?void 0:Ie.id)||0);ve.value=Array.isArray(St)?St:[St]}catch(St){console.error("Error loading clients:",St)}finally{he.value=!1}}const ct=Je(),Ln=ct?[ct.lat,ct.lng]:[46.603354,1.888334],$n=(ct==null?void 0:ct.zoom)??6;if(r.value&&!g.value){const St=x(r.value,Ln,$n);St.pm.setLang("fr"),St.pm.addControls({rotateMode:!1}),fe(St),St.on("moveend",()=>{De(St)}),window.addEventListener("map-set-location",qt=>{if(St&&qt.detail){const{lat:Vn,lng:hr,zoom:Lr}=qt.detail;St.flyTo([Vn,hr],Lr,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",qt=>{const Vn=qt.layer;Vn&&Vn._leaflet_id&&c.value.findIndex(Lr=>Lr.layer&&Lr.layer._leaflet_id===Vn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Vn._leaflet_id} à shapes.value`),c.value.push({layer:Vn,id:Vn._dbId||Vn._leaflet_id}))}),D.value.on("layerremove",qt=>{const Vn=qt.layer;if(Vn&&Vn._leaflet_id)if(!Vn._dbId&&(!Vn.properties||Vn.properties&&!Vn.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Vn._leaflet_id} supprimée définitivement`);const Lr=c.value.findIndex(pn=>pn.layer&&pn.layer._leaflet_id===Vn._leaflet_id);Lr!==-1&&c.value.splice(Lr,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Vn._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(d.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",d.value.planId),await ze(d.value.planId);const St=document.querySelector(".map-parent");St instanceof HTMLElement&&(St.style.display="block"),d.value.lat&&d.value.lng&&g.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",d.value.lat,d.value.lng),g.value.flyTo([d.value.lat,d.value.lng],16)),d.value.noteId&&D.value&&(console.log("[MapView][onMounted] Recherche de la note:",d.value.noteId),setTimeout(()=>{var Vn;const qt=((Vn=D.value)==null?void 0:Vn.getLayers())||[];for(const hr of qt)if(hr._dbId===d.value.noteId||hr.id===d.value.noteId){console.log("[MapView][onMounted] Note trouvée:",hr),typeof hr.fire=="function"&&hr.fire("click");break}},1e3)),d.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",d.value.tool),E(d.value.tool))}catch(St){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",St),En()}else En();async function En(){const St=localStorage.getItem("lastPlanId");if(St)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",St),await ze(parseInt(St));const qt=document.querySelector(".map-parent");qt instanceof HTMLElement&&(qt.style.display="block")}catch(qt){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",qt),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()}window.addEventListener("shape:created",St=>{const{shape:qt,type:Vn,properties:hr}=St.detail;console.log("[MapView] Nouvelle forme créée",{shape:qt,type:Vn,properties:hr}),o.addElement(qt),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),$e()}),window.addEventListener("geonote:select",St=>{if(console.log("[MapView] Événement geonote:select reçu",St.detail),St.detail&&St.detail.geoNote){const qt=St.detail.geoNote;v.value=qt,ha(()=>{console.log("[MapView] Note géolocalisée sélectionnée:",qt)})}}),window.addEventListener("categoriesReactivated",St=>{console.log("[MapView][categoriesReactivated] Événement reçu:",St.detail),Ti()}),window.addEventListener("shapeTypesReactivated",St=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",St.detail),Ti()});const jt=St=>{if(console.log("[MapView] Édition de note via Leaflet",St),console.log("[MapView] Type de e:",typeof St,"Contenu de e:",JSON.stringify(St)),!St||!St.note){console.error("[MapView] Erreur: e.note est undefined ou null",St);return}const qt=St.note;console.log("[MapView] Note à éditer:",qt),q.value={id:qt.id,title:qt.title||qt.name,description:qt.description,location:qt.location,columnId:qt.columnId||a.getDefaultColumn.id,accessLevel:qt.accessLevel,style:qt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:qt.createdAt||new Date().toISOString(),updatedAt:qt.updatedAt||new Date().toISOString(),comments:qt.comments||[],photos:qt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",q.value),B.value=!0,console.log("[MapView] showNoteEditModal.value:",B.value)},Un=St=>{if(console.log("[MapView] Édition de note via événement global",St),!St.detail||!St.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",St);return}const qt=St.detail.note;console.log("[MapView] Note à éditer (global):",qt);const Vn=c.value.find(Lr=>Lr.layer===St.detail.source),hr=Vn?Vn.id:qt.id;console.log("[MapView] ID de la note pour l'API:",hr,"Source:",St.detail.source?"Couche Leaflet":"Autre"),q.value={id:hr,title:qt.title||qt.name,description:qt.description,location:qt.location,columnId:qt.columnId||a.getDefaultColumn.id,accessLevel:qt.accessLevel,style:qt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:qt.createdAt||new Date().toISOString(),updatedAt:qt.updatedAt||new Date().toISOString(),comments:qt.comments||[],photos:qt.photos||[]},B.value=!0};window.addEventListener("geonote:edit",Un),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",jt))}catch(ct){console.error("Error during component mount:",ct),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}}),Ai(()=>o.hasUnsavedChanges,at=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",at),at&&R.value&&s.markUnsavedChanges()}),Ai(()=>s.plans,at=>{console.log("[MapView][watch irrigationStore.plans] Mise à jour de la liste des plans:",at.length),Y.value&&(K.value||console.log("[MapView][watch irrigationStore.plans] Mise à jour de l'interface client"))},{deep:!0}),Ai(()=>o.filters,(at,Ie)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(at,null,2)),Ie){const ct=JSON.stringify(Ie.accessLevels)!==JSON.stringify(at.accessLevels),Ln=JSON.stringify(Ie.categories)!==JSON.stringify(at.categories),$n=JSON.stringify(Ie.shapeTypes)!==JSON.stringify(at.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:ct,categoriesChanged:Ln,shapeTypesChanged:$n}),ct||Ln||$n?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Ti()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Ti()},{deep:!0});const me=at=>{console.log("[MapView][filtersChanged] Événement reçu:",at.detail),Ti()};Zs(()=>{window.addEventListener("filtersChanged",me)}),Ku(()=>{window.removeEventListener("filtersChanged",me),console.log("[MapView][filtersChanged] Événement désactivé")}),Ai(()=>o.getFilteredElements,(at,Ie)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:at.length,anciens:Ie?Ie.length:"aucun",ids:at.map(ct=>ct.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Ti()},{deep:!0}),Ai(g,async at=>{var Ie;console.log(`
[MapView][watch map] Nouvelle carte:`,!!at),at&&s.currentPlan&&!((Ie=D.value)!=null&&Ie.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),se(),await o.loadPlanElements(s.currentPlan.id))}),Ai(()=>s.currentPlan,async(at,Ie)=>{var ct,Ln,$n;if((at==null?void 0:at.id)===(Ie==null?void 0:Ie.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",at==null?void 0:at.id);try{if(at){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),R.value=at;const En=document.querySelector(".map-parent");En instanceof HTMLElement&&(En.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),R.value=null,se();const En=document.querySelector(".map-parent");En instanceof HTMLElement&&(En.style.display="none")}}catch(En){console.error("[MapView][watch currentPlan] ERREUR:",En),R.value=null,se()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(ct=R.value)==null?void 0:ct.id,storePlanId:(Ln=s.currentPlan)==null?void 0:Ln.id,mapVisible:g.value!==null,mapParentDisplay:($n=document.querySelector(".map-parent"))==null?void 0:$n.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Md(()=>{g.value&&g.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function ee(){i.value=!i.value}function se(){D.value&&(D.value.eachLayer(at=>{var Ie;((Ie=at.properties)==null?void 0:Ie.type)==="Note"&&typeof at.resetPlanSaveState=="function"&&at.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],X(),v.value=null,p.value=""}async function de(at){return await kn.measureAsync("refreshMapWithPlan",async()=>{try{kn.measure("refreshMapWithPlan:clearMap",()=>{se()},"MapView"),await kn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(at)},"MapView");const Ie=kn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(at),"MapView");Ie?(kn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{R.value=Ie,s.setCurrentPlan(Ie),o.setCurrentPlan(Ie.id),localStorage.setItem("lastPlanId",Ie.id.toString())},"MapView"),await kn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",at);const Ln=(await Ca.getNotesByPlan(at)).data;console.log(`[MapView][refreshMapWithPlan] ${Ln.length} notes géolocalisées récupérées`);const $n=yf();g.value&&D.value&&Ln.forEach(En=>{try{if($n.addNote({...En,id:En.id,columnId:En.column,accessLevel:En.access_level}),En.location&&En.location.type==="Point"&&Array.isArray(En.location.coordinates)&&En.location.coordinates.length===2){const jt=kh.fromBackendData({name:En.title,description:En.description,location:En.location,columnId:En.column,accessLevel:En.access_level,style:En.style||{color:En.color||"#3B82F6",weight:2,opacity:1,fillColor:En.color||"#3B82F6",fillOpacity:.6,radius:8},category:En.category||"forages",comments:En.comments||[],photos:En.photos||[]});jt._dbId=En.id,D.value.addLayer(jt),c.value.push({id:En.id,type:"Note",layer:jt,properties:jt.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:En.id,title:En.title,location:En.location})}}catch(jt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",jt)}})}catch(ct){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",ct)}},"MapView"),g.value&&D.value&&await kn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(jt=>{var Un;return{id:jt.id,type:jt.type_forme,hasName:jt.data&&"name"in jt.data,name:(Un=jt.data)==null?void 0:Un.name}})});const ct=o.getCurrentElements.reduce((jt,Un)=>(jt[Un.type_forme]||(jt[Un.type_forme]=[]),jt[Un.type_forme].push(Un),jt),{}),Ln=["Note","Polygon","Line","Circle","Rectangle"],$n=Object.keys(ct).sort((jt,Un)=>{const St=Ln.indexOf(jt),qt=Ln.indexOf(Un);return(St===-1?999:St)-(qt===-1?999:qt)}),En=jt=>{switch(jt){case"Note":return 20;case"Circle":return 15;case"Rectangle":return 15;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const jt of $n){const Un=ct[jt],St=En(jt);for(let qt=0;qt<Un.length;qt+=St){const Vn=Un.slice(qt,qt+St);await Promise.all(Vn.map(async hr=>{await kn.measureAsync(`refreshMapWithPlan:createElement:${hr.type_forme}`,async()=>{var pn;if(!D.value||!hr.data)return;let Lr=null;switch(hr.type_forme){case"Circle":{const rn=hr.data;rn.center&&rn.radius&&(Lr=new rp(Vt.latLng(rn.center[1],rn.center[0]),{...rn.style,radius:rn.radius}),rn.name&&(Lr.properties={type:"Circle",name:rn.name,style:rn.style,radius:rn.radius,diameter:rn.radius*2,surface:Math.PI*rn.radius*rn.radius,perimeter:2*Math.PI*rn.radius},Lr.name=rn.name));break}case"Rectangle":{const rn=hr.data;if(rn.bounds){const zr=Vt.latLngBounds(Vt.latLng(rn.bounds.southWest[1],rn.bounds.southWest[0]),Vt.latLng(rn.bounds.northEast[1],rn.bounds.northEast[0]));Lr=new Wa(zr,rn.style),rn.name&&(Lr.properties={name:rn.name},Lr.name=rn.name)}break}case"Polygon":{const rn=hr.data;if(rn.points&&rn.points.length>0){const zr=rn.points.map(Br=>Vt.latLng(Br[1],Br[0]));Lr=new ld(zr,rn.style),rn.name&&(Lr.properties={name:rn.name},Lr.name=rn.name)}break}case"Line":{const rn=hr.data;if(rn.points&&rn.points.length>0){const zr=rn.points.map(Br=>Vt.latLng(Br[1],Br[0]));Lr=new ua(zr,rn.style),rn.name&&(Lr.properties={name:rn.name},Lr.name=rn.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",hr.data);const rn=hr.data;if(rn.location&&Array.isArray(rn.location)&&rn.location.length===2||rn.location&&typeof rn.location=="object"&&rn.location.type==="Point"&&Array.isArray(rn.location.coordinates)&&rn.location.coordinates.length===2)try{rn.category||(rn.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",rn.category)),rn.accessLevel||(rn.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",rn.accessLevel));const Br=kh.fromBackendData(rn);Br._dbId=hr.id,Lr=Br,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:hr.id,location:rn.location,name:rn.name,category:rn.category,accessLevel:rn.accessLevel,type:Br.properties.type})}catch(Br){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Br)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",rn),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Lr&&(Lr._dbId=hr.id,(pn=D.value)==null||pn.addLayer(Lr),c.value.push({id:hr.id,type:hr.type_forme,layer:Lr,properties:Lr.properties}))},"MapView")})),await new Promise(hr=>requestAnimationFrame(()=>setTimeout(hr,0)))}}kn.measure("refreshMapWithPlan:adjustView",()=>{setTimeout(()=>{z(),g.value&&g.value.invalidateSize({animate:!1,pan:!1})},100)},"MapView")},"MapView"),console.log(`Plan ${at} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${at} introuvable après chargement`),Y.value=!1}catch(Ie){throw console.error("Erreur lors du rafraîchissement de la carte:",Ie),Ie}},"MapView")}async function ze(at){return await kn.measureAsync("loadPlan",async()=>{var Ie;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",at);try{const ct=await kn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(at),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!ct),!ct){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await kn.measureAsync("loadPlan:apiCheck",async()=>{await Nn.get(`/plans/${at}/`)},"MapView")}catch(Ln){throw((Ie=Ln.response)==null?void 0:Ie.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()),Ln}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await kn.measureAsync("loadPlan:refreshMap",async()=>{await de(at)},"MapView"),Y.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),ot(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:at,elementsCount:o.getCurrentElements.length})}catch(ct){throw console.error("Erreur lors du chargement du plan:",ct),kn.measure("loadPlan:errorRecovery",()=>{R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")},"MapView"),ct}},"MapView")}async function $e(){var at;if(!R.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}$.value=!0,oe.value="saving";try{const Ie=[],ct=new Set(o.getCurrentElements.filter(jt=>jt.id!==void 0).map(jt=>jt.id)),Ln=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from(ct),currentElements:o.getCurrentElements}),D.value.eachLayer(jt=>{var Vn,hr,Lr,pn,rn,zr,Br,zi,Xr,_r,Ar,hi,Rr,an,Ni,vi,Ki,Jr,dr,Tn,Sr,ws,mo;console.log("[savePlan] Traitement de la couche",{type:(Vn=jt.properties)==null?void 0:Vn.type,name:(hr=jt.properties)==null?void 0:hr.name,isPolygon:jt instanceof Vt.Polygon,properties:jt.properties});let Un,St;const qt={color:jt.options.color||"#2b6451",weight:jt.options.weight||3,opacity:jt.options.opacity||1,fillColor:jt.options.fillColor||"#2b6451",fillOpacity:jt.options.fillOpacity||.2,dashArray:jt.options.dashArray||""};if(jt instanceof Wa){Un="Rectangle";const cr=jt.getBounds();St={bounds:{southWest:[cr.getSouthWest().lng,cr.getSouthWest().lat],northEast:[cr.getNorthEast().lng,cr.getNorthEast().lat]},style:qt,name:((Lr=jt.properties)==null?void 0:Lr.name)||"",rotation:jt.getRotation(),width:jt.getDimensions().width,height:jt.getDimensions().height,center:[jt.getCenter().lng,jt.getCenter().lat]}}else if(jt instanceof Vt.Circle)Un="Circle",St={center:[jt.getLatLng().lng,jt.getLatLng().lat],radius:jt.getRadius(),name:((pn=jt.properties)==null?void 0:pn.name)||"",style:qt};else if(jt instanceof Vt.Rectangle){Un="Rectangle";const cr=jt.getBounds();St={bounds:{southWest:[cr.getSouthWest().lng,cr.getSouthWest().lat],northEast:[cr.getNorthEast().lng,cr.getNorthEast().lat]},name:((rn=jt.properties)==null?void 0:rn.name)||"",style:qt}}else if(jt instanceof Vt.Polyline&&!(jt instanceof Vt.Polygon))if(((zr=jt.properties)==null?void 0:zr.type)==="ElevationLine"){Un="ElevationLine";const cr=jt.getLatLngs(),Sn=((Br=jt.properties)==null?void 0:Br.category)||"forages",sn=((zi=jt.properties)==null?void 0:zi.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",Sn,"Niveau d'accès:",sn),St={points:cr.map(yi=>[yi.lng,yi.lat]),style:{...qt,color:((Xr=jt.properties.style)==null?void 0:Xr.color)||"#FF4500",weight:((_r=jt.properties.style)==null?void 0:_r.weight)||4,opacity:((Ar=jt.properties.style)==null?void 0:Ar.opacity)||.8,_accessLevel:sn,accessLevel:sn},name:((hi=jt.properties)==null?void 0:hi.name)||"",category:Sn,accessLevel:sn,elevationData:jt.properties.elevationData,samplePointStyle:jt.properties.samplePointStyle,minMaxPointStyle:jt.properties.minMaxPointStyle,minElevation:jt.properties.minElevation,maxElevation:jt.properties.maxElevation,elevationGain:jt.properties.elevationGain,elevationLoss:jt.properties.elevationLoss,averageSlope:jt.properties.averageSlope,maxSlope:jt.properties.maxSlope}}else{Un="Line";const cr=jt.getLatLngs(),Sn=((Rr=jt.properties)==null?void 0:Rr.category)||"forages",sn=((an=jt.properties)==null?void 0:an.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",Sn,"Niveau d'accès:",sn),St={points:cr.map(yi=>[yi.lng,yi.lat]),name:((Ni=jt.properties)==null?void 0:Ni.name)||"",category:Sn,accessLevel:sn,style:{...qt,_accessLevel:sn,accessLevel:sn}}}else if(jt instanceof Vt.Polygon&&!(jt instanceof Vt.Rectangle)){Un="Polygon";const cr=jt.getLatLngs()[0],Sn=((vi=jt.properties)==null?void 0:vi.category)||"forages",sn=((Ki=jt.properties)==null?void 0:Ki.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",Sn,"Niveau d'accès:",sn),St={points:cr.map(yi=>[yi.lng,yi.lat]),name:((Jr=jt.properties)==null?void 0:Jr.name)||"",category:Sn,accessLevel:sn,style:{...qt,_accessLevel:sn,accessLevel:sn}}}else if(((dr=jt.properties)==null?void 0:dr.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const cr=jt;if(cr._dbId&&typeof cr._dbId=="number"&&Ln.add(cr._dbId),typeof cr.saveNote=="function")try{if(cr.properties&&(cr.properties.style||(cr.properties.style={}),cr.properties.accessLevel&&(cr.properties.style._accessLevel=cr.properties.accessLevel,cr.properties.style.accessLevel=cr.properties.accessLevel),cr.properties.style.color)){const Sn=cr.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",Sn),cr.properties.style.color=Sn,cr.properties.style.fillColor=Sn}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(Tn=cr.properties)==null?void 0:Tn.category,accessLevel:(Sr=cr.properties)==null?void 0:Sr.accessLevel,styleAccessLevel:(mo=(ws=cr.properties)==null?void 0:ws.style)==null?void 0:mo.accessLevel}),R.value&&R.value.id?cr.saveNote(R.value.id):cr.saveNote()}catch(Sn){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",Sn)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");Un=void 0,St=void 0}if(Un&&St){let cr=jt._elementId;jt._dbId&&(cr=jt._dbId,typeof cr=="number"&&Ln.add(cr)),Ie.push({id:cr,type_forme:Un,data:St})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:Ie.length,elements:Ie.map(jt=>({type:jt.type_forme,hasPoints:"points"in jt.data,hasStyle:"style"in jt.data}))});const $n=Array.from(ct).filter(jt=>!Ln.has(jt));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from(ct),currentLayerIds:Array.from(Ln),elementsToDelete:$n}),o.elements=Ie.filter(jt=>!jt.id||!$n.includes(jt.id));const En=await o.saveToPlan(R.value.id,{elementsToDelete:$n});if(En&&((at=R.value)!=null&&at.id)){const jt=R.value.id;R.value={...R.value,...En},s.updatePlanDetails(jt,En)}oe.value="success",D.value&&D.value.eachLayer(jt=>{var Un;((Un=jt.properties)==null?void 0:Un.type)==="Note"&&typeof jt.resetPlanSaveState=="function"&&jt.resetPlanSaveState()}),setTimeout(()=>{oe.value=null},3e3)}catch(Ie){console.error("Erreur lors de la sauvegarde du plan:",Ie),oe.value=null}finally{$.value=!1}}Ku(()=>{J.user||bt(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function et(at){var Ie,ct,Ln;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",at),A(at),v.value&&((Ie=v.value.properties)==null?void 0:Ie.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(at.category&&(v.value.properties.category=at.category),at.accessLevel&&(v.value.properties.accessLevel=at.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=at.accessLevel,v.value.properties.style.accessLevel=at.accessLevel),v.value.properties.style&&v.value.properties.style.color){const $n=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",$n),v.value.properties.style.color=$n,v.value.properties.style.fillColor=$n}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(ct=v.value.properties)==null?void 0:ct.category,accessLevel:(Ln=v.value.properties)==null?void 0:Ln.accessLevel,updatedProperties:at}),R.value&&R.value.id?v.value.saveNote(R.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch($n){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",$n)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(at.category&&v.value&&v.value._dbId){const $n=v.value._dbId,En=o.elements.find(jt=>jt.id===$n);if(En){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${at.category} pour l'élément ${$n}`);const jt=En;jt.data||(jt.data={}),jt.data.category=at.category,o.$patch({unsavedChanges:!0})}}}function Ge(at){try{const Ie=new Date(at);return isNaN(Ie.getTime())?(console.error("Date invalide reçue:",at),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Ie)}catch(Ie){return console.error("Erreur lors du formatage de la date:",Ie),"Date invalide"}}const Qe=()=>{D.value&&z()},Ke=async()=>{var at;if(v.value&&D.value){const Ie=v.value._leaflet_id,ct=v.value._dbId;if(((at=v.value.properties)==null?void 0:at.type)==="Note"&&ct)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${ct} du backend...`),await Ca.deleteNote(ct),a.removeNote(ct),console.log(`[MapView][deleteSelectedShape] Note ${ct} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch($n){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${ct} du backend:`,$n),l.error("Erreur lors de la suppression de la note")}E(""),D.value.removeLayer(v.value),c.value=c.value.filter($n=>$n.layer&&$n.layer._leaflet_id!==Ie),console.log(`[MapView][deleteSelectedShape] Forme ${Ie} (dbId: ${ct}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function xt(at){console.log(`onPlanCreated - Tentative de chargement du plan ${at}`),await s.fetchPlans();const Ie=s.getPlanById(at);Ie?(console.log(`Plan ${at} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",at.toString()),R.value=Ie,s.setCurrentPlan(Ie),o.setCurrentPlan(Ie.id),F.value=!1,ot(),console.log(`Plan ${at} chargé avec succès`)):console.error(`Plan ${at} introuvable après création! Vérifiez les permissions.`)}Ai(W,async at=>{var Ie;if(at&&((Ie=J.user)==null?void 0:Ie.user_type)==="admin"){he.value=!0;try{const ct=await J.fetchSalarieVisiteurs(at.id);ve.value=Array.isArray(ct)?ct:[ct]}catch(ct){console.error("[MapView][watch selectedSalarie] Error:",ct),ve.value=[]}finally{he.value=!1}}});function bt(){localStorage.removeItem("lastPlanId")}function yt(at,Ie="m"){return Ie==="m²"?`${(at/1e4).toFixed(2)} ha`:Ie==="m"?at>=1e3?`${(at/1e3).toFixed(2)} km`:`${at.toFixed(2)} m`:`${at.toFixed(2)} ${Ie}`}const Wt=Ct(!1);function tn(at){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[at]||at}async function yn(){var Ie,ct,Ln,$n,En,jt,Un,St,qt,Vn;if(!R.value||!g.value||!D.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const at=R.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",at),await $e();let _r=at;if(!at.salarie_details&&!at.entreprise_details&&!at.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const Sr=await Nn.get(`/plans/${at.id}/`);Sr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",Sr.data),R.value={...at,...Sr.data},_r=Sr.data,s.updatePlanDetails(at.id,Sr.data))}catch(Sr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",Sr)}}await new Promise(Sr=>setTimeout(Sr,1e3)),Wt.value=!0;const Ar=_r.salarie_details,hi=_r.client_details,Rr=(Ar==null?void 0:Ar.entreprise_details)||_r.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",_r),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:Ar?{id:Ar.id,nom:`${Ar.first_name} ${Ar.last_name}`,company:Ar.company_name,logo:Ar.logo}:null,entreprise:Rr?{id:Rr.id,nom:`${Rr.first_name} ${Rr.last_name}`,company:Rr.company_name,logo:Rr.logo}:null,client:hi?{id:hi.id,nom:`${hi.first_name} ${hi.last_name}`,company:hi.company_name}:null}),v.value&&(X(),v.value=null);const an=new Nr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Ni=new Image;Ni.src=X4,await new Promise(Sr=>{Ni.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),Sr()},Ni.onerror=ws=>{console.error("[generateSynthesis] Erreur chargement logo application:",ws),Sr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Rr==null?void 0:Rr.logo);let vi=null;Rr!=null&&Rr.logo&&(vi=new Image,vi.src=Rr.logo,await new Promise(Sr=>{vi?(vi.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),Sr()},vi.onerror=ws=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",ws),Sr()}):Sr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",Ar==null?void 0:Ar.logo);let Ki=null;Ar!=null&&Ar.logo&&(Ki=new Image,Ki.src=Ar.logo,await new Promise(Sr=>{Ki?(Ki.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),Sr()},Ki.onerror=ws=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",ws),Sr()}):Sr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:vi!==null,logoSalarie:Ki!==null}),vi!==null&&an.addImage(vi,"JPEG",148.5-40-30,20,40,40),an.addImage(Ni,"JPEG",148.5-40/2,20,40,40),Ki!==null&&an.addImage(Ki,"JPEG",148.5+30,20,40,40),an.setFontSize(24),an.setTextColor(0),an.text(at.nom||"Sans titre",297/2,100,{align:"center"});let Jr=120;if(Rr&&(an.setFontSize(14),an.setFont("helvetica","bold"),an.text("Entreprise:",20,Jr),an.setFont("helvetica","normal"),an.text(`${Rr.first_name} ${Rr.last_name}${Rr.company_name?` (${Rr.company_name})`:""}`,20,Jr+6),Jr+=15),Ar&&(an.setFontSize(14),an.setFont("helvetica","bold"),an.text("Salarie:",20,Jr),an.setFont("helvetica","normal"),an.text(`${Ar.first_name} ${Ar.last_name}${Ar.company_name?` (${Ar.company_name})`:""}`,20,Jr+6),Jr+=15),hi&&(an.setFontSize(14),an.setFont("helvetica","bold"),an.text("Client:",20,Jr),an.setFont("helvetica","normal"),an.text(`${hi.first_name} ${hi.last_name}${hi.company_name?` (${hi.company_name})`:""}`,20,Jr+6),Jr+=15),at.description){an.setFont("helvetica","bold"),an.text("Description:",20,Jr),an.setFont("helvetica","normal");const Sr=an.splitTextToSize(at.description,150);an.text(Sr,20,Jr+6),Jr+=8*Sr.length+10}Jr=Math.min(Jr,180),an.setFontSize(10),an.setTextColor(100),an.text(`Date de création: ${Ge(at.date_creation)}`,20,190),an.text(`Dernière modification: ${Ge(at.date_modification)}`,277,190,{align:"right"});const dr=[];D.value.eachLayer(Sr=>dr.push(Sr));const Tn=Vt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(g.value);await new Promise(Sr=>setTimeout(Sr,3e3));for(let Sr=0;Sr<dr.length;Sr++){an.addPage(),an.setFillColor(248,250,252),an.setDrawColor(226,232,240),an.rect(0,0,297,25,"F"),an.setFontSize(10),an.setTextColor(50,50,50),an.setFont("helvetica","bold"),an.text(at.nom||"Sans titre",20,12);let cr=297-20-(15*(1+(vi!==null?1:0)+(Ki!==null?1:0))+5*(1+(vi!==null?1:0)));vi!==null&&(an.addImage(vi,"JPEG",cr,5,15,15),cr+=20),an.addImage(Ni,"JPEG",cr,5,15,15),cr+=20,Ki!==null&&an.addImage(Ki,"JPEG",cr,5,15,15),an.setDrawColor(200,200,200),an.setLineWidth(.5),an.line(0,25,297,25);const Sn=dr[Sr],sn=Sn.properties;if(sn){an.setTextColor(0),an.setFontSize(14),an.setFont("helvetica","bold");const yi=sn.name||tn(sn.type);let Qr="";if(sn.type!=="TextRectangle"){const Xs=re(dr,Sn);Qr=Xs>0?` (surface totale d'irrigation : ${yt(Xs,"m²")})`:""}const bi=`${yi}${Qr}`;an.text(bi,20,35)}if(sn&&sn.type==="ElevationLine")try{const yi=((Ie=Sn.getBounds)==null?void 0:Ie.call(Sn))||((ct=Sn.getLatLng)==null?void 0:ct.call(Sn));yi&&g.value.fitBounds(yi instanceof Vt.LatLng?Vt.latLngBounds([yi]):yi,{padding:[50,50]});try{const Mn=((Ln=Sn.getBounds)==null?void 0:Ln.call(Sn))||(($n=Sn.getLatLng)==null?void 0:$n.call(Sn));if(!Mn||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const vn=Mn instanceof Vt.LatLng?Vt.latLngBounds([Mn]):Mn;vn&&vn.isValid&&vn.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(vn,{padding:[50,50],animate:!1})}}catch(Mn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Mn)}await new Promise(Mn=>setTimeout(Mn,2e3)),g.value.invalidateSize();try{g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())?g.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Mn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Mn)}await new Promise(Mn=>setTimeout(Mn,500));const Qr=await Tn.takeScreen("image"),bi=await new Promise((Mn,vn)=>{const qr=new Image;qr.onload=()=>Mn(qr),qr.onerror=xs=>vn(xs),qr.src=Qr}),Xs=40,vo=237/2,js=Math.min(70,bi.height*vo/bi.width);if(an.addImage(bi,"PNG",20,Xs,vo,js),sn.elevationData&&sn.elevationData.length>0){const Mn=document.createElement("canvas");Mn.width=800,Mn.height=400;const vn=Mn.getContext("2d");if(vn){const qr=sn.elevationData,xs=sn.minElevation,Qs=sn.maxElevation,hs=(Qs-xs)*.05,Ma=xs-hs,bl=Qs+hs,zn=40,Cr=Mn.width-2*zn,rs=Mn.height-2*zn,Tr=Yn=>zn+Yn/qr[qr.length-1].distance*Cr,Zo=Yn=>zn+rs-(Yn-Ma)/(bl-Ma)*rs;vn.fillStyle="#f8fafc",vn.fillRect(0,0,Mn.width,Mn.height),vn.fillStyle="#334155",vn.font="bold 20px Arial",vn.textAlign="center",vn.fillText("Profil altimétrique",Mn.width/2,25),vn.strokeStyle="#e2e8f0",vn.lineWidth=1,vn.beginPath(),vn.moveTo(zn,zn),vn.lineTo(zn,rs+zn),vn.lineTo(Cr+zn,rs+zn),vn.strokeStyle="#94a3b8",vn.stroke();const ka=5;for(let Yn=0;Yn<=ka;Yn++){const eo=Ma+Yn/ka*(bl-Ma),yo=Zo(eo);vn.beginPath(),vn.strokeStyle="#e2e8f0",vn.moveTo(zn,yo),vn.lineTo(Cr+zn,yo),vn.stroke(),vn.beginPath(),vn.strokeStyle="#94a3b8",vn.moveTo(zn-5,yo),vn.lineTo(zn,yo),vn.stroke(),vn.fillStyle="#64748b",vn.font="12px Arial",vn.textAlign="right",vn.fillText(`${Math.round(eo)}m`,zn-8,yo+4)}const Aa=5,Xo=qr[qr.length-1].distance;for(let Yn=0;Yn<=Aa;Yn++){const eo=Yn/Aa*Xo,yo=Tr(eo);vn.beginPath(),vn.strokeStyle="#e2e8f0",vn.moveTo(yo,zn),vn.lineTo(yo,rs+zn),vn.stroke(),vn.beginPath(),vn.strokeStyle="#94a3b8",vn.moveTo(yo,rs+zn),vn.lineTo(yo,rs+zn+5),vn.stroke(),vn.fillStyle="#64748b",vn.font="12px Arial",vn.textAlign="center",vn.fillText(`${Math.round(eo)}m`,yo,rs+zn+16)}const sa=vn.createLinearGradient(0,zn,0,rs+zn);sa.addColorStop(0,"rgba(255, 69, 0, 0.8)"),sa.addColorStop(1,"rgba(255, 69, 0, 0.2)"),vn.beginPath(),vn.moveTo(Tr(qr[0].distance),Zo(qr[0].elevation)),qr.forEach((Yn,eo)=>{eo>0&&vn.lineTo(Tr(Yn.distance),Zo(Yn.elevation))}),vn.strokeStyle="#FF4500",vn.lineWidth=2,vn.stroke(),vn.lineTo(Tr(qr[qr.length-1].distance),Zo(Ma)),vn.lineTo(Tr(qr[0].distance),Zo(Ma)),vn.closePath(),vn.fillStyle=sa,vn.fill(),qr.forEach(Yn=>{vn.beginPath(),vn.arc(Tr(Yn.distance),Zo(Yn.elevation),3,0,Math.PI*2),vn.fillStyle="#FF4500",vn.fill(),vn.strokeStyle="white",vn.lineWidth=1,vn.stroke()});let _l=0,Ta=0;for(let Yn=0;Yn<qr.length;Yn++)qr[Yn].elevation===xs&&(_l=Yn),qr[Yn].elevation===Qs&&(Ta=Yn);vn.beginPath(),vn.arc(Tr(qr[Ta].distance),Zo(qr[Ta].elevation),6,0,Math.PI*2),vn.fillStyle="#059669",vn.fill(),vn.strokeStyle="white",vn.lineWidth=2,vn.stroke(),vn.beginPath(),vn.arc(Tr(qr[_l].distance),Zo(qr[_l].elevation),6,0,Math.PI*2),vn.fillStyle="#DC2626",vn.fill(),vn.strokeStyle="white",vn.lineWidth=2,vn.stroke(),vn.font="12px Arial",vn.fillStyle="#059669",vn.textAlign="left",vn.fillText(`Point haut: ${yt(Qs,"m")}`,zn,rs+zn+35),vn.fillStyle="#DC2626",vn.fillText(`Point bas: ${yt(xs,"m")}`,zn+200,rs+zn+35);const Pr=Mn.toDataURL("image/png");an.addImage(Pr,"PNG",20+vo+20,Xs,vo,js)}}const yr=Xs+js+15;an.setFillColor(248,250,252),an.setDrawColor(226,232,240),an.roundedRect(20,yr,257,50,3,3,"FD"),an.setFont("helvetica","bold"),an.setFontSize(12),an.setTextColor(51,65,85),an.text("Caractéristiques",30,yr+10);const Js=[{label:"Distance totale",value:yt(sn.length||0)},{label:"Dénivelé positif",value:yt(sn.elevationGain||0,"m")},{label:"Dénivelé négatif",value:yt(sn.elevationLoss||0,"m")}],Vi=[{label:"Pente moyenne",value:`${(sn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(sn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${yt(sn.minElevation||0,"m")} / ${yt(sn.maxElevation||0,"m")}`}];let Gi=yr+20;an.setFont("helvetica","normal"),an.setFontSize(10),Js.forEach(Mn=>{an.setTextColor(100,116,139),an.text(Mn.label,30,Gi),an.setTextColor(15,23,42),an.setFont("helvetica","bold"),an.text(Mn.value,110,Gi),an.setFont("helvetica","normal"),Gi+=9}),Gi=yr+20;const di=297/2;Vi.forEach(Mn=>{an.setTextColor(100,116,139),an.text(Mn.label,di,Gi),an.setTextColor(15,23,42),an.setFont("helvetica","bold"),an.text(Mn.value,di+80,Gi),an.setFont("helvetica","normal"),Gi+=9})}catch(yi){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",yi)}else{const yi=((En=Sn.getBounds)==null?void 0:En.call(Sn))||((jt=Sn.getLatLng)==null?void 0:jt.call(Sn));yi&&g.value.fitBounds(yi instanceof Vt.LatLng?Vt.latLngBounds([yi]):yi,{padding:[50,50]});try{const Qr=((Un=Sn.getBounds)==null?void 0:Un.call(Sn))||((St=Sn.getLatLng)==null?void 0:St.call(Sn));if(!Qr||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const bi=Qr instanceof Vt.LatLng?Vt.latLngBounds([Qr]):Qr;bi&&bi.isValid&&bi.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(bi,{padding:[50,50],animate:!1})}}catch(Qr){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Qr)}await new Promise(Qr=>setTimeout(Qr,2e3)),g.value.invalidateSize(),await new Promise(Qr=>setTimeout(Qr,500));try{const Qr=await Tn.takeScreen("image"),bi=await new Promise((yr,Js)=>{const Vi=new Image;Vi.onload=()=>yr(Vi),Vi.onerror=Gi=>Js(Gi),Vi.src=Qr}),Xs=45,vo=297*.6-30;let js=bi.height*vo/bi.width;if(js>210*.9&&(js=210*.9),an.addImage(bi,"PNG",20,Xs,vo,js),sn){let yr=function(vn,qr,xs,Qs,qa){an.setTextColor(100,116,139),an.setFont("helvetica","normal"),an.text(vn,xs+10,Qs),an.setTextColor(15,23,42),an.setFont("helvetica","bold"),an.text(qr,xs+qa-10,Qs,{align:"right"})},Vi=0;if(sn.type==="Circle")Vi=4;else if(sn.type==="Rectangle")Vi=4;else if(sn.type==="Line")Vi=1,(qt=sn.dimensions)!=null&&qt.width&&Vi++,sn.surfaceInfluence&&Vi++;else if(sn.type==="Semicircle")Vi=6;else if(sn.type==="Polygon")Vi=2;else if(sn.type==="CircleWithSections"&&(Vi=3,sn.sections&&sn.sections.length>0)){const vn=Math.ceil(sn.sections.length/3);Vi+=vn*3}const Gi=Math.max(15+Vi*12+30,60),di=297-188.2-20;an.setFillColor(248,250,252),an.setDrawColor(226,232,240),an.roundedRect(188.2,Xs,di,Gi,3,3,"FD"),an.setFont("helvetica","bold"),an.setFontSize(12),an.setTextColor(51,65,85),an.text("Caractéristiques",188.2+10,Xs+15);let Mn=Xs+30;an.setFontSize(10),sn.type==="Circle"?(yr("Rayon",yt(sn.radius),188.2,Mn,di),Mn+=12,yr("Diamètre",yt(sn.radius*2),188.2,Mn,di),Mn+=12,yr("Surface",yt(sn.surface,"m²"),188.2,Mn,di),Mn+=12,yr("Périmètre",yt(sn.perimeter),188.2,Mn,di)):sn.type==="Rectangle"?(yr("Largeur",yt(sn.width),188.2,Mn,di),Mn+=12,yr("Hauteur",yt(sn.height),188.2,Mn,di),Mn+=12,yr("Surface",yt(sn.surface,"m²"),188.2,Mn,di),Mn+=12,yr("Périmètre",yt(sn.perimeter),188.2,Mn,di)):sn.type==="Line"?(yr("Longueur",yt(sn.length),188.2,Mn,di),Mn+=12,(Vn=sn.dimensions)!=null&&Vn.width&&(yr("Largeur d'influence",yt(sn.dimensions.width),188.2,Mn,di),Mn+=12),sn.surfaceInfluence&&yr("Surface d'influence",yt(sn.surfaceInfluence,"m²"),188.2,Mn,di)):sn.type==="Semicircle"?(yr("Rayon",yt(sn.radius),188.2,Mn,di),Mn+=12,yr("Diamètre",yt(sn.radius*2),188.2,Mn,di),Mn+=12,yr("Surface",yt(sn.surface,"m²"),188.2,Mn,di),Mn+=12,yr("Périmètre",yt(sn.perimeter),188.2,Mn,di),Mn+=12,yr("Longueur d'arc",yt(sn.arcLength),188.2,Mn,di),Mn+=12,yr("Angle d'ouverture",`${sn.openingAngle.toFixed(1)}°`,188.2,Mn,di)):sn.type==="Polygon"?(yr("Surface",yt(sn.surface,"m²"),188.2,Mn,di),Mn+=12,yr("Périmètre",yt(sn.perimeter),188.2,Mn,di)):sn.type==="CircleWithSections"&&(yr("Rayon",yt(sn.radius),188.2,Mn,di),Mn+=12,yr("Surface totale",yt(sn.surface,"m²"),188.2,Mn,di),Mn+=12,yr("Périmètre",yt(sn.perimeter),188.2,Mn,di),Mn+=20,sn.sections&&sn.sections.length>0&&(Mn=No(sn.sections,an,188.2,Mn,di)))}}catch(Qr){console.error(`[generateSynthesis] Erreur capture forme ${Sr+1}:`,Qr)}}}g.value.removeControl(Tn),an.save(`synthese_${at.nom}.pdf`)}catch(hr){console.error("[generateSynthesis] Erreur:",hr),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Wt.value=!1}}const Ze=OE.debounce(()=>{const at=kn.startMeasure("invalidateMapSize","MapView");if(!g.value){at();return}ha(()=>{kn.measure("invalidateMapSize:nextTick",()=>{var Ie;try{if(g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())){if(g.value.invalidateSize({animate:!1}),(Ie=D.value)!=null&&Ie.getLayers().length)try{z()}catch(ct){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",ct)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(ct){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",ct)}at()},"MapView")})},250);function ot(){Ze()}Ai(R,(at,Ie)=>{at&&at.id!==(Ie==null?void 0:Ie.id)&&ha(()=>{ot()})});const rt=Ct(null),$t=Ct(!1),Zt=Ct([]),Dn=Xn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:rt.value,salaries:_e.value,salariesLength:_e.value.length}),!rt.value)return[];const at=_e.value.filter(Ie=>{var $n,En,jt;const ct=Ie.entreprise,Ln=typeof ct=="object"&&ct!==null?ct.id:ct;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Ie,salarieEntreprise:ct,salarieEntrepriseId:Ln,selectedEntrepriseId:($n=rt.value)==null?void 0:$n.id,matches:Ln===((En=rt.value)==null?void 0:En.id)}),Ln===((jt=rt.value)==null?void 0:jt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",at),at});function mn(at){if(!at)return"";const Ie=at.first_name||"",ct=at.last_name?at.last_name.toUpperCase():"",Ln=at.company_name||at.role||"";return`${Ie} ${ct} (${Ln})`}async function An(){$t.value=!0;try{const at=await Nn.get("/users/",{params:{role:"ENTREPRISE"}});Zt.value=at.data}catch(at){console.error("[MapView] Error loading entreprises:",at),Zt.value=[]}finally{$t.value=!1}}async function Jn(at){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",at),rt.value=at,pe.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:at.id});const Ie=await Nn.get("/users/",{params:{role:"SALARIE",entreprise:at.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",Ie.data),_e.value=Ie.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",_e.value)}catch(Ie){console.error("[MapView] Error loading salaries for entreprise:",Ie),_e.value=[]}finally{pe.value=!1}}function Qt(){rt.value=null,W.value=null,K.value=null,_e.value=[],ve.value=[],ke.value=[]}function xn(){W.value=null,K.value=null,ve.value=[],ke.value=[]}function Cn(){K.value=null,ke.value=[]}async function tr(at){var Ie,ct,Ln,$n,En,jt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:at.id,username:at.username,company:at.company_name,role:at.role}),console.log("Contexte utilisateur:",{userType:(Ie=J.user)==null?void 0:Ie.user_type,userId:(ct=J.user)==null?void 0:ct.id,userRole:(Ln=J.user)==null?void 0:Ln.role,selectedEntrepriseId:($n=rt.value)==null?void 0:$n.id}),W.value=at,he.value=!0;try{const Un={role:"VISITEUR",salarie:at.id};J.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(En=J.user)==null?void 0:En.id),Un.entreprise=(jt=J.user)==null?void 0:jt.id):rt.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",rt.value.id),Un.entreprise=rt.value.id),console.log("Paramètres de la requête:",Un);const St=await Nn.get("/users/",{params:Un});console.log("Réponse reçue du serveur:",{status:St.status,dataLength:Array.isArray(St.data)?St.data.length:"non-array",data:St.data}),Array.isArray(St.data)?(ve.value=St.data,console.log(`${St.data.length} visiteurs chargés`),St.data.forEach((qt,Vn)=>{console.log(`Visiteur ${Vn+1}:`,{id:qt.id,username:qt.username,company:qt.company_name,salarie:qt.salarie})})):(console.warn("Format de réponse inattendu:",St.data),ve.value=[]),ve.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Un){if(console.error("ERREUR lors du chargement des visiteurs:",Un),Un&&typeof Un=="object"&&"response"in Un){const St=Un;console.error("Détails de l'erreur:",{status:St.response.status,data:St.response.data})}ve.value=[]}finally{he.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function vr(){B.value=!1,q.value=null}function xr(at){U.value=at,I.value=!0}async function ur(){var at,Ie,ct;if((at=U.value)!=null&&at.id)try{const Ln=U.value.id,$n={selectedClient:K.value,selectedSalarie:W.value,isNoVisiteurView:K.value&&K.value.id===-1};if(await s.deletePlan(Ln),I.value=!1,U.value=null,await new Promise(En=>setTimeout(En,50)),$n.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await nr();else if($n.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",$n.selectedClient.id);const En={visiteur:$n.selectedClient.id};$n.selectedSalarie&&(En.salarie=$n.selectedSalarie.id),J.isEntreprise?En.entreprise=(Ie=J.user)==null?void 0:Ie.id:rt.value&&(En.entreprise=rt.value.id);const jt=await Nn.get("/plans/",{params:En});ke.value=jt.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((ct=R.value)==null?void 0:ct.id)===Ln&&(R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId"))}catch(Ln){console.error("Erreur lors de la suppression du plan:",Ln),alert("Une erreur est survenue lors de la suppression du plan"),I.value=!1,U.value=null}}function Gr(){I.value=!1,U.value=null}function Fs(at){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(at,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(at),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(Ie=>Ie.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Ti(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Ti()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Ti(){if(!D.value)return;const at=[];c.value.forEach((pn,rn)=>{pn.layer&&!pn.id&&(!pn.layer.properties||pn.layer.properties&&!pn.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${pn.layer._leaflet_id}`),at.push(rn))});for(let pn=at.length-1;pn>=0;pn--)c.value.splice(at[pn],1);const Ie={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(Ie,null,2));const ct={count:o.elements.length,elements:o.elements.map(pn=>({id:pn.id,type_forme:pn.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(ct,null,2));const Ln=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:Ln.length,filteredIds:Ln.map(pn=>pn.id)});const $n=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",$n.length);const En=$n.map(pn=>({_leaflet_id:pn._leaflet_id,_dbId:pn._dbId,hasProperties:!!pn.properties,propertyType:pn.properties?pn.properties.type:null,category:pn.properties?pn.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(En,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const jt=new Map;c.value.forEach(pn=>{pn.layer&&pn.id&&jt.set(pn.id,pn.layer)});const Un=new Map;$n.forEach(pn=>{pn._dbId&&Un.set(pn,pn._dbId)});const St=new Set(Ln.map(pn=>pn.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const qt=Array.from(St);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(qt));let Vn=0,hr=0,Lr=0;$n.forEach(pn=>{var Ki,Jr;const rn=pn._dbId,zr=pn._leaflet_id;if(!rn){if(!pn.properties){Lr++,console.log(`[MapView][updateMapDisplay] Couche ${zr} sans dbId et sans propriétés, ignorée`);return}pn._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${zr} sans dbId, ID temporaire assigné: ${pn._dbId}`)}const Br=pn.properties||{},zi=Br.type||pn.type_forme||"";let Xr=Br.category;if(pn._dbId){const dr=o.elements.find(Tn=>Tn.id===pn._dbId);if(dr){const Tn=dr.data;Tn&&Tn.category&&(Xr!==Tn.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Xr}, Store: ${Tn.category} pour la couche ${pn._dbId}`),Xr=Tn.category),pn.properties||(pn.properties={}),pn.properties.category=Xr)}}Xr||(Xr="default");const _r=Br.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${zr} (dbId: ${pn._dbId}): type=${zi}, category=${Xr}, accessLevel=${_r}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let Ar=!1;zi?Ar=zi in o.filters.shapeTypes&&o.filters.shapeTypes[zi]===!0:Ar=o.filters.shapeTypes.Polygon===!0;let hi=!1;Xr?Xr in o.filters.categories?(hi=o.filters.categories[Xr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Xr}: ${hi}`)):(hi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Xr} non trouvée dans les filtres, utilisation de 'forages': ${hi}`)):(hi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${hi}`));let Rr=!1;const an={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ni="visitor";an.company?Ni="company":an.employee?Ni="employee":an.visitor&&(Ni="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${Ni}`),Ni==="company"?Rr=!0:Ni==="employee"?Rr=_r==="employee"||_r==="visitor":Ni==="visitor"&&(Rr=_r==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${_r}, visible: ${Rr}`);const vi=Ar&&hi&&Rr;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${zr}: typeVisible=${Ar}, categoryVisible=${hi}, accessLevelVisible=${Rr}, isVisible=${vi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${zr}: type=${zi}, category=${Xr}, accessLevel=${_r}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),vi?D.value.hasLayer(pn)?(Vn++,console.log(`[MapView][updateMapDisplay] Couche ${pn._dbId} (${zi}) déjà visible avec catégorie ${((Jr=pn.properties)==null?void 0:Jr.category)||"non définie"}`)):(Xr&&Xr!=="default"&&(!pn.properties||!pn.properties.category)&&(pn.properties||(pn.properties={}),pn.properties.category=Xr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Xr} pour la couche ${pn._dbId}`)),D.value.addLayer(pn),Vn++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${pn._dbId} (${zi}) avec catégorie ${((Ki=pn.properties)==null?void 0:Ki.category)||"non définie"}`)):D.value.hasLayer(pn)?(D.value.removeLayer(pn),hr++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${pn._dbId} (${zi}) - Filtres non respectés`)):(hr++,console.log(`[MapView][updateMapDisplay] Couche ${pn._dbId} (${zi}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(pn=>{var Jr;if(!pn.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const rn=pn.layer,zr=rn._leaflet_id,Br=rn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${zr} (dbId: ${Br})`),D.value.hasLayer(rn)){console.log(`[MapView][updateMapDisplay] La couche ${zr} est déjà dans le featureGroup, ignorée`);return}const zi=rn.properties||{},Xr=zi.type||rn.type_forme||"";let _r=null;if(rn._dbId){const dr=o.elements.find(Tn=>Tn.id===rn._dbId);if(dr){const Tn=dr.data;Tn&&Tn.category&&(_r=Tn.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${_r} pour la couche ${rn._dbId}`))}}!_r&&zi.category&&(_r=zi.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${_r} pour la couche ${zr}`)),_r||(_r="default");const Ar=zi.accessLevel||"visitor";if(rn.properties||(rn.properties={}),_r&&_r!=="default"&&(rn.properties.category=_r,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${_r} pour la couche ${rn._dbId}`),rn._dbId)){const dr=o.elements.find(Tn=>Tn.id===rn._dbId);if(dr){const Tn=dr;Tn.data||(Tn.data={}),Tn.data.category!==_r&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${_r} pour l'élément ${rn._dbId}`),Tn.data.category=_r,o.$patch({unsavedChanges:!0}))}}rn.properties.accessLevel||(rn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${zr}: type=${Xr}, category=${_r}, accessLevel=${Ar}`);let hi=!1;Xr?hi=Xr in o.filters.shapeTypes&&o.filters.shapeTypes[Xr]===!0:hi=o.filters.shapeTypes.Polygon===!0;let Rr=!1;if(_r)if(_r in o.filters.categories)Rr=o.filters.categories[_r]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${_r}: ${Rr}`);else if(NE().getUniqueCategories.includes(_r)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${_r} trouvée dans mapFilterStore, ajout aux filtres`);const Sr={...o.filters.categories};Sr[_r]=!0,o.updateFilters({categories:Sr}),Rr=!0}else Rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${_r} non trouvée, utilisation de 'forages': ${Rr}`);else Rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Rr}`);let an=!1;const Ni={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let vi="visitor";Ni.company?vi="company":Ni.employee?vi="employee":Ni.visitor&&(vi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${vi}`),vi==="company"?an=!0:vi==="employee"?an=Ar==="employee"||Ar==="visitor":vi==="visitor"&&(an=Ar==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${Ar}, visible: ${an}`);const Ki=hi&&Rr&&an;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${zr}: typeVisible=${hi}, categoryVisible=${Rr}, accessLevelVisible=${an}, isVisible=${Ki}`),Ki){if(_r&&_r!=="default"&&(rn.properties||(rn.properties={}),rn.properties.category=_r,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${_r} pour la couche ${zr}`),rn._dbId)){const dr=o.elements.find(Tn=>Tn.id===rn._dbId);if(dr){const Tn=dr;Tn.data||(Tn.data={}),Tn.data.category!==_r&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${_r} pour l'élément ${rn._dbId}`),Tn.data.category=_r,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(rn),Vn++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${zr} (${Xr}) avec catégorie ${((Jr=rn.properties)==null?void 0:Jr.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${zr} (${Xr}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Vn} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Vn} couches visibles, ${hr} couches masquées, ${Lr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function Oo(at){if(D.value){const ct=D.value.getLayers().find(Ln=>Ln._leaflet_id===at.id);ct&&(ct.properties.name=at.title,ct.properties.description=at.description,ct.properties.columnId=at.columnId,ct.properties.accessLevel=at.accessLevel,ct.properties.category||(ct.properties.category="forages"),ct.setNoteStyle({color:at.style.color,fillColor:at.style.fillColor,weight:at.style.weight,fillOpacity:at.style.fillOpacity,radius:at.style.radius}),ct.closePopup(),ct.unbindPopup(),ct.bindPopup(ct.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:ct.properties.name,category:ct.properties.category,accessLevel:ct.properties.accessLevel,columnId:ct.properties.columnId}),a.notes.find($n=>$n.id===at.id)?(a.updateNote(at.id,{title:at.title,description:at.description,columnId:at.columnId,accessLevel:at.accessLevel,style:at.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",at.columnId)):(a.addNote({title:at.title,description:at.description,location:[at.location[0],at.location[1]],columnId:at.columnId||"1",style:at.style,accessLevel:at.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",at.columnId||"1")))}l.success("Note enregistrée avec succès")}async function Ts(at){var Ie;K.value=at,te.value=!0;try{const ct={visiteur:at.id};J.isEntreprise?ct.entreprise=(Ie=J.user)==null?void 0:Ie.id:rt.value&&(ct.entreprise=rt.value.id),W.value&&(ct.salarie=W.value.id);const Ln=await Nn.get("/plans/",{params:ct});ke.value=Ln.data}catch(ct){console.error("[MapView] Error loading client plans:",ct),ke.value=[]}finally{te.value=!1}}async function nr(){var Ie;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const at={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};K.value=at,te.value=!0;try{const ct={visiteur_null:!0};J.isEntreprise?ct.entreprise=(Ie=J.user)==null?void 0:Ie.id:rt.value&&(ct.entreprise=rt.value.id),W.value&&(ct.salarie=W.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",ct);const Ln=await Nn.get("/plans/",{params:ct});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",Ln.data),ke.value=Ln.data}catch(ct){console.error("[MapView] Error loading plans without visiteur:",ct),ke.value=[]}finally{te.value=!1}}async function Ds(){var at;if(W.value=null,K.value=null,ke.value=[],J.isEntreprise){pe.value=!0;try{const Ie=await Nn.get("/users/",{params:{role:"SALARIE",entreprise:(at=J.user)==null?void 0:at.id}});_e.value=Ie.data,console.log("[MapView][openLoadPlanModal] Salariés chargés:",_e.value.length)}catch(Ie){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",Ie),_e.value=[]}finally{pe.value=!1}}Y.value=!0}function No(at,Ie,ct,Ln,$n){if(!at||at.length===0)return Ln;const En=[...at].sort((pn,rn)=>(rn.surface||0)-(pn.surface||0)),jt=$n,Un=7,St=6,qt=2,Vn=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],hr=Un+St*En.length;Ie.setFillColor(248,250,252),Ie.setDrawColor(226,232,240),Ie.roundedRect(ct,Ln,jt,hr+qt*2,2,2,"FD"),Ie.setFillColor(241,245,249),Ie.rect(ct+qt,Ln+qt,jt-qt*2,Un,"F"),Ie.setFont("helvetica","bold"),Ie.setFontSize(7),Ie.setTextColor(51,65,85);let Lr=ct+qt;return Vn.forEach(pn=>{const rn=pn.width*(jt-qt*2);pn.align==="right"?Ie.text(pn.header,Lr+rn-qt,Ln+qt+5,{align:"right"}):pn.align==="center"?Ie.text(pn.header,Lr+rn/2,Ln+qt+5,{align:"center"}):Ie.text(pn.header,Lr+qt/2,Ln+qt+5),Lr+=rn}),Ie.setFont("helvetica","normal"),Ie.setFontSize(6.5),Ie.setTextColor(71,85,105),En.forEach((pn,rn)=>{const zr=Ln+Un+qt+rn*St;rn%2===0&&(Ie.setFillColor(250,252,254),Ie.rect(ct+qt,zr,jt-qt*2,St,"F"));let Br=ct+qt;const zi=pn.name||`Section ${rn+1}`;Ie.text(zi,Br+qt/2,zr+4),Br+=Vn[0].width*(jt-qt*2);const Xr=yt(pn.surface||0,"m²");Ie.text(Xr,Br+Vn[1].width*(jt-qt*2)-qt,zr+4,{align:"right"}),Br+=Vn[1].width*(jt-qt*2);const _r=pn.startAngle===0&&pn.endAngle===360?"Complet":`${pn.startAngle}°-${pn.endAngle}°`;Ie.text(_r,Br+Vn[2].width*(jt-qt*2)-qt,zr+4,{align:"right"}),Br+=Vn[2].width*(jt-qt*2);const Ar=yt(pn.radius||0);Ie.text(Ar,Br+Vn[3].width*(jt-qt*2)-qt,zr+4,{align:"right"}),Br+=Vn[3].width*(jt-qt*2);const hi=pn.startAngle===0&&pn.endAngle===360?"C":"P";Ie.text(hi,Br+Vn[4].width*(jt-qt*2)/2,zr+4,{align:"center"})}),Ie.setDrawColor(226,232,240),Ie.setLineWidth(.05),Ie.line(ct+qt,Ln+Un+qt,ct+jt-qt,Ln+Un+qt),Ln+hr+qt*2}return(at,Ie)=>{var ct,Ln,$n,En,jt,Un;return Ae(),Ne(wn,null,[C("div",KH,[C("div",ZH,[Wt.value?(Ae(),Ne("div",XH,Ie[7]||(Ie[7]=[Lu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Jt("",!0),R.value?Jt("",!0):(Ae(),Ne("div",JH,[C("div",QH,[Ie[10]||(Ie[10]=Lu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+X4+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),C("div",eW,[C("button",{onClick:Ie[0]||(Ie[0]=St=>F.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ie[8]||(Ie[8]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ci(" Créer un nouveau plan ")])),C("button",{onClick:Ds,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ie[9]||(Ie[9]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ci(" Charger un plan existant ")]))])])])),er(C("div",tW,[C("div",nW,[R.value&&!Wt.value?(Ae(),da(CV,{key:0,"last-save":(ct=R.value)!=null&&ct.date_modification?new Date(R.value.date_modification):void 0,"plan-name":(Ln=R.value)==null?void 0:Ln.nom,"plan-description":($n=R.value)==null?void 0:$n.description,"save-status":oe.value,onChangeMapType:qn(N),onCreateNewPlan:Ie[1]||(Ie[1]=St=>F.value=!0),onLoadPlan:Ds,onSavePlan:$e,onAdjustView:Qe,onGenerateSummary:yn,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Jt("",!0),C("div",rW,[i.value&&R.value&&!Wt.value?(Ae(),Ne("div",{key:0,onClick:ee,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Jt("",!0),C("div",iW,[C("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),R.value&&!Wt.value?(Ae(),da(H$,{key:1,show:i.value,"onUpdate:show":Ie[2]||(Ie[2]=St=>i.value=St),"selected-tool":qn(p),"selected-shape":Be.value,"is-drawing":qn(ge),onToolSelected:qn(E),onFilterChange:Fs,onDeleteShape:Ke,onPropertiesUpdate:et,onStyleUpdate:qn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])):Jt("",!0),R.value&&!Wt.value?(Ae(),Ne("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:ee},Ie[11]||(Ie[11]=[Lu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Jt("",!0)])]),Wt.value?(Ae(),Ne("div",sW,Ie[12]||(Ie[12]=[Lu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Jt("",!0)],512),[[P_,R.value]]),(Ae(),da(Ig,{to:"body"},[mi(RE,{ref_key:"newPlanModalRef",ref:le,modelValue:F.value,"onUpdate:modelValue":Ie[3]||(Ie[3]=St=>F.value=St),onCreated:xt,onSalarieSelected:Ie[4]||(Ie[4]=St=>W.value=St),onVisiteurSelected:Ie[5]||(Ie[5]=St=>V.value=St)},null,8,["modelValue"])])),(Ae(),da(Ig,{to:"body"},[Y.value?(Ae(),Ne("div",oW,[C("div",aW,[C("div",lW,[Ie[14]||(Ie[14]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),C("button",{onClick:Ie[6]||(Ie[6]=St=>Y.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Ie[13]||(Ie[13]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",uW,[qn(J).isAdmin?(Ae(),Ne("div",cW,[rt.value?W.value?K.value?(Ae(),Ne("div",MW,[C("div",kW,[C("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ie[30]||(Ie[30]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ci(" Retour à la liste des clients ")])),Ie[31]||(Ie[31]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",AW,Et(mn(K.value)),1)]),Ie[33]||(Ie[33]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",TW,[te.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[32]||(Ie[32]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ae(!0),Ne(wn,{key:1},Qn(ke.value,St=>(Ae(),Ne("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[C("div",OW,Et(St.nom),1),C("div",NW,Et(St.description),1),C("div",IW," Modifié le "+Et(Ge(St.date_modification)),1)],8,DW),qn(J).isAdmin||qn(J).isEntreprise?(Ae(),Ne("button",{key:0,onClick:tu(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,BW)):Jt("",!0)]))),128))])])):(Ae(),Ne("div",wW,[C("div",xW,[C("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ie[23]||(Ie[23]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ci(" Retour à la liste des salaries ")])),Ie[24]||(Ie[24]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",LW,Et(mn(W.value)),1)]),Ie[29]||(Ie[29]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",SW,[C("button",{onClick:nr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ie[25]||(Ie[25]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),he.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[26]||(Ie[26]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(),Ne(wn,{key:1},[Q.value.length===0?(Ae(),Ne("div",CW,Ie[27]||(Ie[27]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ae(!0),Ne(wn,{key:1},Qn(Q.value,St=>(Ae(),Ne("button",{key:St.id,onClick:qt=>Ts(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",PW,Et(mn(St)),1)]),Ie[28]||(Ie[28]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,EW))),128))],64))])])):(Ae(),Ne("div",gW,[C("div",mW,[C("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ie[18]||(Ie[18]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ci(" Retour à la liste des entreprises ")])),Ie[19]||(Ie[19]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",vW,Et(mn(rt.value)),1)]),Ie[22]||(Ie[22]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),C("div",yW,[pe.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[20]||(Ie[20]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(!0),Ne(wn,{key:1},Qn(Dn.value,St=>(Ae(),Ne("button",{key:St.id,onClick:qt=>tr(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",_W,Et(mn(St)),1)]),Ie[21]||(Ie[21]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,bW))),128))])])):(Ae(),Ne("div",hW,[Ie[17]||(Ie[17]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),C("div",dW,[$t.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[15]||(Ie[15]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(!0),Ne(wn,{key:1},Qn(Zt.value,St=>(Ae(),Ne("button",{key:St.id,onClick:qt=>Jn(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",pW,Et(mn(St)),1)]),Ie[16]||(Ie[16]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,fW))),128))])]))])):qn(J).isSalarie?(Ae(),Ne("div",RW,[K.value?(Ae(),Ne("div",UW,[C("div",HW,[C("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ie[38]||(Ie[38]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ci(" Retour à la liste des clients ")])),Ie[39]||(Ie[39]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",WW,Et(mn(K.value)),1)]),Ie[41]||(Ie[41]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",GW,[te.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[40]||(Ie[40]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ae(!0),Ne(wn,{key:1},Qn(ke.value,St=>(Ae(),Ne("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[C("div",YW,Et(St.nom),1),C("div",KW,Et(St.description),1),C("div",ZW," Modifié le "+Et(Ge(St.date_modification)),1)],8,qW),qn(J).isAdmin||qn(J).isEntreprise?(Ae(),Ne("button",{key:0,onClick:tu(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,XW)):Jt("",!0)]))),128))])])):(Ae(),Ne("div",FW,[Ie[37]||(Ie[37]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",jW,[he.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[34]||(Ie[34]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(),Ne(wn,{key:1},[Q.value.length===0?(Ae(),Ne("div",zW,Ie[35]||(Ie[35]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ae(!0),Ne(wn,{key:1},Qn(Q.value,St=>(Ae(),Ne("button",{key:St.id,onClick:qt=>Ts(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",VW,Et(mn(St)),1)]),Ie[36]||(Ie[36]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,$W))),128))],64))])]))])):qn(J).isEntreprise?(Ae(),Ne("div",JW,[W.value?K.value?(Ae(),Ne("div",cG,[C("div",hG,[C("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ie[52]||(Ie[52]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ci(" Retour à la liste des visiteurs ")])),Ie[53]||(Ie[53]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",dG,Et(mn(K.value)),1)]),Ie[55]||(Ie[55]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",fG,[te.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[54]||(Ie[54]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ae(!0),Ne(wn,{key:1},Qn(ke.value,St=>(Ae(),Ne("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[C("div",gG,Et(St.nom),1),C("div",mG,Et(St.description),1),C("div",vG," Modifié le "+Et(Ge(St.date_modification)),1)],8,pG),qn(J).isAdmin||qn(J).isEntreprise?(Ae(),Ne("button",{key:0,onClick:tu(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,yG)):Jt("",!0)]))),128))])])):(Ae(),Ne("div",rG,[C("div",iG,[C("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ie[45]||(Ie[45]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ci(" Retour à la liste des salariés ")])),Ie[46]||(Ie[46]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",sG,Et(mn(W.value)),1)]),Ie[51]||(Ie[51]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",oG,[C("button",{onClick:nr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ie[47]||(Ie[47]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),he.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[48]||(Ie[48]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(),Ne(wn,{key:1},[Q.value.length===0?(Ae(),Ne("div",aG,Ie[49]||(Ie[49]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ae(!0),Ne(wn,{key:1},Qn(Q.value,St=>(Ae(),Ne("button",{key:St.id,onClick:qt=>Ts(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",uG,Et(mn(St)),1)]),Ie[50]||(Ie[50]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,lG))),128))],64))])])):(Ae(),Ne("div",QW,[Ie[44]||(Ie[44]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),C("div",eG,[pe.value?(Ae(),Ne(wn,{key:0},Qn(3,St=>C("div",{key:St,class:"animate-pulse"},Ie[42]||(Ie[42]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(!0),Ne(wn,{key:1},Qn(_e.value,St=>(Ae(),Ne("button",{key:St.id,onClick:qt=>tr(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",nG,Et(mn(St)),1)]),Ie[43]||(Ie[43]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,tG))),128))])]))])):(Ae(),Ne("div",bG,[qn(s).plans.length===0?(Ae(),Ne("div",_G,Ie[56]||(Ie[56]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ae(),Ne("div",wG,[(Ae(!0),Ne(wn,null,Qn(qn(s).plans,St=>(Ae(),Ne("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[C("div",LG,Et(St.nom),1),C("div",SG,Et(St.description),1),C("div",CG," Modifié le "+Et(Ge(St.date_modification)),1)],8,xG),qn(J).isAdmin||qn(J).isEntreprise?(Ae(),Ne("button",{key:0,onClick:tu(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,EG)):Jt("",!0)]))),128))]))]))])])])):Jt("",!0)])),(Ae(),da(Ig,{to:"body"},[I.value?(Ae(),Ne("div",PG,[C("div",MG,[C("div",kG,[Ie[57]||(Ie[57]=C("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Ie[58]||(Ie[58]=C("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),C("p",AG,' Êtes-vous sûr de vouloir supprimer le plan "'+Et((En=U.value)==null?void 0:En.nom)+'" ? Cette action est irréversible. ',1)]),C("div",{class:"flex justify-center space-x-4"},[C("button",{onClick:Gr,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),C("button",{onClick:ur,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Jt("",!0)]))])]),B.value?(Ae(),da(IE,{key:0,note:q.value,"is-new-note":!((jt=q.value)!=null&&jt.id),location:(Un=q.value)==null?void 0:Un.location,onClose:vr,onSave:Oo},null,8,["note","is-new-note","location"])):Jt("",!0)],64)}}}),TG={class:"fixed inset-0 z-[3001] overflow-y-auto"},DG={class:"flex items-center justify-center min-h-screen w-full p-0"},OG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},NG={class:"p-4 md:p-6"},IG={class:"flex justify-between items-center mb-4 border-b pb-4"},BG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},RG={class:"mt-4"},FG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},jG={class:"flex"},zG={class:"ml-3"},$G={class:"text-sm font-medium text-red-800"},VG={key:0},UG={key:1},HG=["value"],WG={key:2},GG={key:3},qG=["value"],YG={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},KG={key:0,class:"mt-2 text-sm text-red-600"},ZG={key:0,class:"mt-2 text-sm text-red-600"},XG={key:4},JG={class:"flex items-center"},QG={key:5,class:"border-t pt-4 mt-4"},eq={class:"mb-4"},tq={class:"mb-4"},nq={key:6},rq={key:7},iq={key:0,class:"mt-2 text-sm text-red-600"},sq={class:"flex justify-end space-x-3"},oq=["disabled"],aq={key:0,class:"mr-2"},lq=Rs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=Ct(!1),s=Ct(""),o=Ct(""),a=Ct(""),l=Ct(""),c=Ct(""),d=iu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Zs(()=>{var v;(v=n.user)!=null&&v.id?(d.id=n.user.id,d.first_name=n.user.first_name||"",d.last_name=n.user.last_name||"",d.username=n.user.username||"",d.email=n.user.email||"",d.company_name=n.user.company_name||"",d.role=n.user.role||"VISITEUR",d.is_active=n.user.is_active??!0,d.ecowitt_api_key=n.user.ecowitt_api_key||"",d.ecowitt_application_key=n.user.ecowitt_application_key||"",d.storage_quota=n.user.storage_quota||50,d.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?d.salarie=n.user.salarie.id:d.salarie=n.user.salarie:n.user.salarie_id?d.salarie=n.user.salarie_id:n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?d.entreprise=n.user.entreprise.id:d.entreprise=n.user.entreprise:n.user.entreprise_id?d.entreprise=n.user.entreprise_id:n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?d.role="SALARIE":n.isAdmin||(d.role="VISITEUR"))}),cm(()=>{d.role==="ADMIN"||d.role==="ENTREPRISE"?(d.salarie=null,d.entreprise=null):d.role==="SALARIE"&&(d.salarie=null,n.isEntreprise&&n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)))}),cm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(d.id||(d.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):d.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const g={...d};d.id&&delete g.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(d.role)&&(g.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),g.salarie&&(g.salarie_id=g.salarie,delete g.salarie),n.currentSalarie&&d.role==="VISITEUR"&&(g.salarie_id=parseInt(n.currentSalarie)),await r("save",g),r("refresh")}catch(g){console.error("Erreur locale:",g)}finally{i.value=!1}}}return(v,g)=>(Ae(),Ne("div",TG,[C("div",DG,[g[42]||(g[42]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",OG,[C("div",null,[C("div",NG,[C("div",IG,[C("h3",BG,Et(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),C("button",{type:"button",onClick:g[0]||(g[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},g[16]||(g[16]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",RG,[l.value?(Ae(),Ne("div",FG,[C("div",jG,[g[17]||(g[17]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",zG,[C("h3",$G,Et(l.value),1)])])])):Jt("",!0),C("form",{onSubmit:tu(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ae(),Ne("div",VG,[g[19]||(g[19]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),er(C("select",{id:"role","onUpdate:modelValue":g[1]||(g[1]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[18]||(g[18]=[C("option",{value:"ADMIN"},"Administrateur",-1),C("option",{value:"ENTREPRISE"},"Entreprise",-1),C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[us,d.role]])])):Jt("",!0),t.isAdmin&&d.role==="SALARIE"?(Ae(),Ne("div",UG,[g[21]||(g[21]=C("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),er(C("select",{id:"entreprise","onUpdate:modelValue":g[2]||(g[2]=x=>d.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[g[20]||(g[20]=C("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ae(!0),Ne(wn,null,Qn(t.entreprises,x=>(Ae(),Ne("option",{key:x.id,value:x.id},Et(x.first_name)+" "+Et(x.last_name)+" ("+Et(x.company_name||"Entreprise")+") ",9,HG))),128))],512),[[us,d.entreprise]])])):Jt("",!0),t.isEntreprise&&!d.id?(Ae(),Ne("div",WG,[g[23]||(g[23]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),er(C("select",{id:"role","onUpdate:modelValue":g[3]||(g[3]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[22]||(g[22]=[C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[us,d.role]])])):Jt("",!0),(t.isAdmin||t.isEntreprise)&&d.role==="VISITEUR"&&!t.currentSalarie?(Ae(),Ne("div",GG,[g[25]||(g[25]=C("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),er(C("select",{id:"salarie","onUpdate:modelValue":g[4]||(g[4]=x=>d.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[g[24]||(g[24]=C("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ae(!0),Ne(wn,null,Qn(t.salaries,x=>(Ae(),Ne("option",{key:x.id,value:x.id},Et(x.first_name)+" "+Et(x.last_name)+" ("+Et(x.company_name||"Salarie")+") ",9,qG))),128))],512),[[us,d.salarie]])])):Jt("",!0),C("div",YG,[C("div",null,[g[26]||(g[26]=C("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),er(C("input",{type:"text",id:"first_name","onUpdate:modelValue":g[5]||(g[5]=x=>d.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.first_name]])]),C("div",null,[g[27]||(g[27]=C("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),er(C("input",{type:"text",id:"last_name","onUpdate:modelValue":g[6]||(g[6]=x=>d.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.last_name]])])]),C("div",null,[g[28]||(g[28]=C("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),er(C("input",{type:"email",id:"email","onUpdate:modelValue":g[7]||(g[7]=x=>d.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.email]]),s.value?(Ae(),Ne("div",KG,Et(s.value),1)):Jt("",!0)]),C("div",null,[g[29]||(g[29]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),er(C("input",{type:"text",id:"username","onUpdate:modelValue":g[8]||(g[8]=x=>d.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.username]]),o.value?(Ae(),Ne("div",ZG,Et(o.value),1)):Jt("",!0)]),C("div",null,[g[30]||(g[30]=C("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),er(C("input",{type:"text",id:"company_name","onUpdate:modelValue":g[9]||(g[9]=x=>d.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.company_name]])]),d.role==="ENTREPRISE"||d.role==="SALARIE"?(Ae(),Ne("div",XG,[g[32]||(g[32]=C("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),C("div",JG,[er(C("input",{type:"number",id:"storage_quota","onUpdate:modelValue":g[10]||(g[10]=x=>d.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.storage_quota]]),g[31]||(g[31]=C("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),g[33]||(g[33]=C("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Jt("",!0),d.role==="ENTREPRISE"?(Ae(),Ne("div",QG,[g[38]||(g[38]=C("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),C("div",eq,[g[34]||(g[34]=C("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),er(C("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":g[11]||(g[11]=x=>d.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[Li,d.ecowitt_api_key]]),g[35]||(g[35]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),C("div",tq,[g[36]||(g[36]=C("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),er(C("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":g[12]||(g[12]=x=>d.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[Li,d.ecowitt_application_key]]),g[37]||(g[37]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Jt("",!0),d.id?Jt("",!0):(Ae(),Ne("div",nq,[g[39]||(g[39]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),er(C("input",{type:"password",id:"password","onUpdate:modelValue":g[13]||(g[13]=x=>d.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,d.password]])])),d.id?Jt("",!0):(Ae(),Ne("div",rq,[g[40]||(g[40]=C("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),er(C("input",{type:"password",id:"password_confirm","onUpdate:modelValue":g[14]||(g[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Li,c.value]]),a.value?(Ae(),Ne("div",iq,Et(a.value),1)):Jt("",!0)])),C("div",sq,[C("button",{type:"button",onClick:g[15]||(g[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),C("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ae(),Ne("span",aq,g[41]||(g[41]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Jt("",!0),ci(" "+Et(d.id?"Enregistrer":"Créer"),1)],8,oq)])],32)])])])])])]))}}),uq={class:"fixed inset-0 z-[3001] overflow-y-auto"},cq={class:"flex items-center justify-center min-h-screen w-full"},hq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},dq={class:"p-4 md:p-6"},fq={class:"flex items-start"},pq={class:"ml-4 flex-1"},gq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},mq={class:"mt-2"},vq={class:"text-sm text-gray-500"},yq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},sP=Rs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ae(),Ne("div",uq,[C("div",cq,[n[3]||(n[3]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",hq,[C("div",dq,[C("div",fq,[n[2]||(n[2]=C("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[C("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),C("div",pq,[C("h3",gq,Et(t.title),1),C("div",mq,[C("p",vq,Et(t.message),1)])])]),C("div",yq,[C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),bq={class:"h-full bg-gray-50"},_q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wq={class:"flex justify-between items-center mb-8"},xq={class:"text-3xl font-extrabold text-gray-900"},Lq={key:0},Sq={key:1},Cq={key:2},Eq={key:0},Pq={key:1},Mq={key:2},kq={class:"bg-white shadow rounded-lg mb-6 p-4"},Aq={class:"space-y-4"},Tq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Dq={key:0},Oq={key:0,value:"ADMIN"},Nq={key:1,value:"ENTREPRISE"},Iq={key:1},Bq=["value"],Rq={key:2},Fq=["value"],jq={class:"w-full"},zq={class:"bg-white shadow rounded-lg"},$q={class:"overflow-x-auto"},Vq={class:"min-w-full divide-y divide-gray-200"},Uq={class:"bg-gray-50"},Hq={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Wq={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Gq={class:"bg-white divide-y divide-gray-200"},qq={key:0,class:"animate-pulse"},Yq={key:1},Kq={class:"px-6 py-4 whitespace-nowrap"},Zq={class:"flex items-center"},Xq={class:"flex-shrink-0 h-10 w-10"},Jq={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Qq={class:"text-primary-600 font-medium"},eY={class:"ml-4"},tY={class:"text-sm font-medium text-gray-900"},nY={class:"text-sm text-gray-500"},rY={class:"px-6 py-4 whitespace-nowrap"},iY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},sY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oY={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},aY={class:"px-6 py-4 whitespace-nowrap"},lY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},uY=["onClick"],cY=["onClick"],hY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},dY=Rs({__name:"UserListView",setup(t){const e=ma(),n=ru(),r=Ct([]),i=Ct([]),s=Ct([]),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),d=Ct(!0),p=Ct([]),v=iu({role:"",search:"",salarie:"",entreprise:""}),g=Xn(()=>e.isAdmin),x=Xn(()=>e.isEntreprise),E=Xn(()=>e.isSalarie),k=Xn(()=>g.value?r.value.filter(q=>q.role==="SALARIE"):x.value?r.value.filter(q=>{var U,$;return q.role==="SALARIE"&&((U=q.entreprise)==null?void 0:U.id)===(($=e.user)==null?void 0:$.id)}):[]),A=Xn(()=>{let q=r.value;if(x.value&&(q=q.filter(U=>{var $,oe,J,_e,ve;return U.role==="SALARIE"?(($=U.entreprise)==null?void 0:$.id)===((oe=e.user)==null?void 0:oe.id):U.role==="VISITEUR"?((_e=(J=U.salarie)==null?void 0:J.entreprise)==null?void 0:_e.id)===((ve=e.user)==null?void 0:ve.id):!1})),E.value&&(q=q.filter(U=>{var $,oe;return U.role==="VISITEUR"&&(U.salarie_id===(($=e.user)==null?void 0:$.id)||U.salarie&&U.salarie.id===((oe=e.user)==null?void 0:oe.id))})),(g.value||x.value)&&(v.role&&(q=q.filter(U=>U.role===v.role)),v.salarie&&(q=q.filter(U=>{var oe;const $=((oe=U.salarie)==null?void 0:oe.id)||U.salarie_id;return($==null?void 0:$.toString())===v.salarie.toString()})),v.entreprise&&g.value&&(q=q.filter(U=>{var $,oe,J,_e,ve;return U.role==="SALARIE"?((oe=($=U.entreprise)==null?void 0:$.id)==null?void 0:oe.toString())===v.entreprise.toString():U.role==="VISITEUR"?((ve=(_e=(J=U.salarie)==null?void 0:J.entreprise)==null?void 0:_e.id)==null?void 0:ve.toString())===v.entreprise.toString():!1}))),v.search){const U=v.search.toLowerCase();q=q.filter($=>{var oe,J,_e,ve;return((oe=$.username)==null?void 0:oe.toLowerCase().includes(U))||((J=$.email)==null?void 0:J.toLowerCase().includes(U))||((_e=$.first_name)==null?void 0:_e.toLowerCase().includes(U))||((ve=$.last_name)==null?void 0:ve.toLowerCase().includes(U))||$.company_name&&$.company_name.toLowerCase().includes(U)})}return q});Zs(async()=>{await D(),await z()});async function D(){var q,U,$;d.value=!0;try{if(g.value)r.value=await e.fetchUsers();else if(x.value){const[oe,J]=await Promise.all([ev({role:"SALARIE",entrepriseId:(q=e.user)==null?void 0:q.id}),ev({role:"VISITEUR",entrepriseId:(U=e.user)==null?void 0:U.id})]);r.value=[...oe,...J]}else E.value&&(r.value=await ev({role:"VISITEUR",salarieId:($=e.user)==null?void 0:$.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(oe){console.error("Erreur lors de la récupération des utilisateurs:",oe),n.error("Erreur lors de la récupération des utilisateurs")}finally{d.value=!1}}async function z(){try{g.value?await Promise.all([X(),ge()]):x.value&&await re()}catch(q){console.error("Erreur lors de la récupération des dépendances:",q)}}async function X(){var q;try{g.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries((q=e.user)==null?void 0:q.id))}catch(U){console.error("Erreur lors de la récupération des salaries:",U)}}async function re(){var q,U;if(!(!x.value||!((q=e.user)!=null&&q.id)))try{i.value=await e.fetchEntrepriseSalaries((U=e.user)==null?void 0:U.id)}catch($){console.error("Erreur lors de la récupération des salaries de l'entreprise:",$)}}async function ge(){try{s.value=await e.fetchEnterprises()}catch(q){console.error("Erreur lors de la récupération des entreprises:",q)}}function fe(){l.value=null,o.value=!0}function N(q){l.value={...q},o.value=!0}function F(){o.value=!1,l.value=null,p.value=[]}async function Y(q){var $,oe,J,_e,ve,ke;p.value=[];const U=!!q.id;try{const W={...q};g.value?(W.entreprise&&typeof W.entreprise=="object"?W.entreprise_id=W.entreprise.id:typeof W.entreprise=="number"&&(W.entreprise_id=W.entreprise),W.salarie&&typeof W.salarie=="object"?W.salarie_id=W.salarie.id:typeof W.salarie=="number"&&(W.salarie_id=W.salarie)):x.value?(W.entreprise_id=($=e.user)==null?void 0:$.id,W.role==="VISITEUR"&&(W.salarie&&typeof W.salarie=="object"?W.salarie_id=W.salarie.id:typeof W.salarie=="number"&&(W.salarie_id=W.salarie))):E.value&&(W.role="VISITEUR",W.salarie_id=(oe=e.user)==null?void 0:oe.id),W.role==="SALARIE"?((J=W.entreprise)!=null&&J.id?(W.entreprise_id=W.entreprise.id,delete W.entreprise):typeof W.entreprise=="number"&&(W.entreprise_id=W.entreprise,delete W.entreprise),delete W.salarie):W.role==="VISITEUR"&&((_e=W.salarie)!=null&&_e.id?(W.salarie_id=W.salarie.id,delete W.salarie):typeof W.salarie=="number"&&(W.salarie_id=W.salarie,delete W.salarie),delete W.entreprise,delete W.entreprise_id),U?(await e.updateUser(q.id,W),n.success("Utilisateur modifié avec succès")):(await e.createUser(W),n.success("Utilisateur créé avec succès")),await Promise.all([D(),z()]),F()}catch(W){console.error("Error saving user:",((ve=W.response)==null?void 0:ve.data)||W),p.value=V7(W),n.error("Erreur lors de la sauvegarde de l'utilisateur");const V=((ke=W.response)==null?void 0:ke.data)||{};let K="";throw typeof V=="object"&&(K=Object.entries(V).map(([pe,he])=>Array.isArray(he)?`${pe}: ${he[0]}`:`${pe}: ${he}`).filter(pe=>pe).join(`
`)),K||(K="Une erreur est survenue lors de la sauvegarde"),new Error(K)}}function B(q){c.value=q,a.value=!0}async function I(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([D(),z()]),a.value=!1,c.value=null}catch(q){throw console.error("Erreur lors de la suppression de l'utilisateur:",q),n.error("Erreur lors de la suppression de l'utilisateur"),q}}function R(q){var U,$,oe,J,_e,ve,ke,W;return g.value?!0:x.value?q.role==="SALARIE"?((U=q.entreprise)==null?void 0:U.id)===(($=e.user)==null?void 0:$.id):q.role==="VISITEUR"?((J=(oe=q.salarie)==null?void 0:oe.entreprise)==null?void 0:J.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?q.role==="VISITEUR"&&(q.salarie_id===((ve=e.user)==null?void 0:ve.id)||((ke=q.salarie)==null?void 0:ke.id)===((W=e.user)==null?void 0:W.id)):!1}return(q,U)=>{var $,oe,J,_e;return Ae(),Ne("div",bq,[C("div",_q,[C("div",wq,[C("h1",xq,[g.value?(Ae(),Ne("span",Lq,"Gestion des utilisateurs")):x.value?(Ae(),Ne("span",Sq,"Gestion des salaries et visiteurs")):E.value?(Ae(),Ne("span",Cq,"Gestion des visiteurs")):Jt("",!0)]),C("button",{onClick:fe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[U[5]||(U[5]=C("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),g.value?(Ae(),Ne("span",Eq,"Nouvel utilisateur")):x.value?(Ae(),Ne("span",Pq,"Nouveau salarie/visiteur")):E.value?(Ae(),Ne("span",Mq,"Nouvel visiteur")):Jt("",!0)])]),C("div",kq,[C("div",Aq,[C("div",Tq,[g.value||x.value?(Ae(),Ne("div",Dq,[U[9]||(U[9]=C("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),er(C("select",{id:"role-filter","onUpdate:modelValue":U[0]||(U[0]=ve=>v.role=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[6]||(U[6]=C("option",{value:""},"Tous les rôles",-1)),g.value?(Ae(),Ne("option",Oq,"Administrateur")):Jt("",!0),g.value?(Ae(),Ne("option",Nq,"Entreprise")):Jt("",!0),U[7]||(U[7]=C("option",{value:"SALARIE"},"Salarie",-1)),U[8]||(U[8]=C("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[us,v.role]])])):Jt("",!0),g.value?(Ae(),Ne("div",Iq,[U[11]||(U[11]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),er(C("select",{id:"entreprise-filter","onUpdate:modelValue":U[1]||(U[1]=ve=>v.entreprise=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[10]||(U[10]=C("option",{value:""},"Toutes les entreprises",-1)),(Ae(!0),Ne(wn,null,Qn(s.value,ve=>(Ae(),Ne("option",{key:ve.id,value:ve.id},Et(qn(xu)(ve)),9,Bq))),128))],512),[[us,v.entreprise]])])):Jt("",!0),g.value||x.value?(Ae(),Ne("div",Rq,[U[13]||(U[13]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),er(C("select",{id:"salarie-filter","onUpdate:modelValue":U[2]||(U[2]=ve=>v.salarie=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[12]||(U[12]=C("option",{value:""},"Tous les salaries",-1)),(Ae(!0),Ne(wn,null,Qn(k.value,ve=>(Ae(),Ne("option",{key:ve.id,value:ve.id},Et(qn(xu)(ve)),9,Fq))),128))],512),[[us,v.salarie]])])):Jt("",!0)]),C("div",jq,[U[14]||(U[14]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),er(C("input",{type:"text",id:"search","onUpdate:modelValue":U[3]||(U[3]=ve=>v.search=ve),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Li,v.search]])])])]),C("div",zq,[C("div",$q,[C("table",Vq,[C("thead",Uq,[C("tr",null,[U[15]||(U[15]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),U[16]||(U[16]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),U[17]||(U[17]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),g.value||x.value?(Ae(),Ne("th",Hq," Entreprise ")):Jt("",!0),g.value||x.value?(Ae(),Ne("th",Wq," Salarie ")):Jt("",!0),U[18]||(U[18]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),U[19]||(U[19]=C("th",{scope:"col",class:"relative px-6 py-3"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",Gq,[d.value?(Ae(),Ne("tr",qq,U[20]||(U[20]=[C("td",{colspan:"7",class:"py-4 px-6"},[C("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):A.value.length===0?(Ae(),Ne("tr",Yq,U[21]||(U[21]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Jt("",!0),(Ae(!0),Ne(wn,null,Qn(A.value,ve=>{var ke;return Ae(),Ne("tr",{key:ve.id},[C("td",Kq,[C("div",Zq,[C("div",Xq,[C("div",Jq,[C("span",Qq,Et(qn(H7)(ve.first_name,ve.last_name)),1)])]),C("div",eY,[C("div",tY,Et(qn(xu)(ve)),1),C("div",nY,Et(ve.username),1)])])]),C("td",rY,[C("span",{class:gi(qn(q7)())},Et(qn(G7)(ve.role)),3)]),C("td",iY,Et(ve.email),1),g.value||x.value?(Ae(),Ne("td",sY,[ve.role==="ENTREPRISE"?(Ae(),Ne(wn,{key:0},[ci(" - ")],64)):ve.role==="SALARIE"?(Ae(),Ne(wn,{key:1},[ci(Et(ve.entreprise?qn(xu)(ve.entreprise):"Non assigné"),1)],64)):ve.role==="VISITEUR"?(Ae(),Ne(wn,{key:2},[ci(Et((ke=ve.salarie)!=null&&ke.entreprise?qn(xu)(ve.salarie.entreprise):"Non assigné"),1)],64)):(Ae(),Ne(wn,{key:3},[ci(" - ")],64))])):Jt("",!0),g.value||x.value?(Ae(),Ne("td",oY,[ve.role==="ENTREPRISE"||ve.role==="ADMIN"?(Ae(),Ne(wn,{key:0},[ci(" - ")],64)):ve.role==="SALARIE"?(Ae(),Ne(wn,{key:1},[ci(" - ")],64)):(Ae(),Ne(wn,{key:2},[ci(Et(ve.salarie?qn(xu)(ve.salarie):"Non assigné"),1)],64))])):Jt("",!0),C("td",aY,[C("span",{class:gi(qn(Y7)(ve.is_active))},Et(ve.is_active?"Actif":"Inactif"),3)]),C("td",lY,[C("button",{onClick:W=>N(ve),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,uY),R(ve)?(Ae(),Ne("button",{key:0,onClick:W=>B(ve),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,cY)):Jt("",!0)])])}),128))])])])])]),o.value?(Ae(),Ne("div",hY,[mi(lq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":g.value,"is-entreprise":x.value,"current-salarie":E.value?(oe=($=qn(e).user)==null?void 0:$.id)==null?void 0:oe.toString():void 0,"current-entreprise":x.value?(_e=(J=qn(e).user)==null?void 0:J.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:F,onSave:Y},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Jt("",!0),a.value?(Ae(),da(sP,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:I,onCancel:U[4]||(U[4]=ve=>a.value=!1)})):Jt("",!0)])}}}),fY={class:"h-full bg-gray-50"},pY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},gY={class:"sm:flex sm:items-center"},mY={class:"sm:flex-auto"},vY={class:"text-2xl font-semibold text-gray-900"},yY={class:"mt-2 text-sm text-gray-700"},bY={key:0,class:"mt-8"},_Y={class:"mb-6"},wY=["value"],xY={class:"mb-6"},LY={value:null},SY=["value"],CY={key:0,class:"mb-6"},EY={value:null},PY=["value"],MY={key:1,class:"mt-8"},kY={class:"mb-6"},AY=["value"],TY={class:"mt-8"},DY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},OY={class:"overflow-x-auto"},NY={class:"min-w-full divide-y divide-gray-300"},IY={class:"bg-gray-50"},BY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},RY={class:"ml-2 flex-none rounded"},FY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},jY={class:"ml-2 flex-none rounded"},zY={class:"divide-y divide-gray-200 bg-white"},$Y={key:0},VY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},UY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},HY={class:"px-3 py-4 text-sm text-gray-900"},WY={key:0,class:"flex items-center"},GY={class:"h-8 w-8 flex-shrink-0"},qY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},YY={class:"text-primary-700 font-medium text-sm"},KY={class:"ml-3"},ZY={class:"font-medium"},XY={key:1,class:"text-gray-500"},JY={class:"px-3 py-4 text-sm text-gray-900"},QY={key:0,class:"flex items-center"},eK={class:"h-8 w-8 flex-shrink-0"},tK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},nK={class:"text-primary-700 font-medium text-sm"},rK={class:"ml-3"},iK={class:"font-medium"},sK={key:1,class:"text-gray-500"},oK={class:"px-3 py-4 text-sm text-gray-900"},aK={key:0,class:"flex items-center"},lK={class:"h-8 w-8 flex-shrink-0"},uK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},cK={class:"text-primary-700 font-medium text-sm"},hK={class:"ml-3"},dK={class:"font-medium"},fK={key:1,class:"text-gray-500"},pK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},gK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},mK=["onClick"],vK=["onClick"],yK=["onClick"],bK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},_K={class:"bg-white rounded-lg p-6 max-w-md w-full"},wK={class:"flex justify-between items-center mb-4"},xK=["disabled"],LK=["disabled"],SK={key:0,class:"space-y-4"},CK={key:0},EK=["disabled"],PK=["value"],MK=["disabled"],kK=["value"],AK={key:0,class:"mt-1 text-sm text-gray-500"},TK=["disabled"],DK=["value"],OK={key:0,class:"mt-1 text-sm text-gray-500"},NK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},IK={class:"flex"},BK={class:"ml-3"},RK={class:"text-sm font-medium text-red-800"},FK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},jK=["disabled"],zK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$K=Rs({__name:"PlansView",setup(t){const e=Dm(),n=zy(),r=ma(),i=Ct([]),s=Ct([]),o=Ct([]),a=Ct([]),l=Ct(!1),c=Ct(!1),d=Ct(!1),p=Ct(null),v=Ct({nom:"",description:"",client:null}),g=Ct({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=Ct(!1),E=Ct(null),k=Ct(null),A=Ct(null),D=Ct("date_modification"),z=Ct("desc"),X=Ct(null),re=Xn(()=>k.value?a.value.filter(le=>typeof le.salarie=="object"&&le.salarie?le.salarie.id===k.value:le.salarie===k.value||le.salarie_id===k.value):a.value),ge=Xn(()=>{let le=i.value;console.log(`
[PlansView] Filtering plans:`,le.map(Be=>({id:Be.id,entreprise:Be.entreprise,salarie:Be.salarie,visiteur:Be.visiteur}))),r.isAdmin?(X.value&&(le=le.filter(Be=>{var De;return typeof Be.entreprise=="object"?((De=Be.entreprise)==null?void 0:De.id)===X.value:Be.entreprise===X.value})),k.value&&(le=le.filter(Be=>{var De;return typeof Be.salarie=="object"?((De=Be.salarie)==null?void 0:De.id)===k.value:Be.salarie===k.value}),A.value&&(le=le.filter(Be=>{var De;return typeof Be.visiteur=="object"?((De=Be.visiteur)==null?void 0:De.id)===A.value:Be.visiteur===A.value})))):r.isSalarie&&(le=le.filter(Be=>{var De,Je,me;return typeof Be.salarie=="object"?((De=Be.salarie)==null?void 0:De.id)===((Je=r.user)==null?void 0:Je.id):Be.salarie===((me=r.user)==null?void 0:me.id)}),A.value&&(le=le.filter(Be=>{var De;return typeof Be.visiteur=="object"?((De=Be.visiteur)==null?void 0:De.id)===A.value:Be.visiteur===A.value})));const Q=[...le].sort((Be,De)=>{if(D.value==="nom")return z.value==="asc"?Be.nom.localeCompare(De.nom):De.nom.localeCompare(Be.nom);{const Je=new Date(Be[D.value]).getTime(),me=new Date(De[D.value]).getTime();return z.value==="asc"?Je-me:me-Je}});return console.log("[PlansView] Final filtered and sorted plans:",Q.map(Be=>({id:Be.id,entreprise:Be.entreprise,salarie:Be.salarie,visiteur:Be.visiteur}))),Q}),fe=Xn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(le=>{var Q,Be,De;return typeof le.salarie=="object"?((Q=le.salarie)==null?void 0:Q.id)===((Be=r.user)==null?void 0:Be.id):le.salarie===((De=r.user)==null?void 0:De.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(le=>{var De,Je,me,ee;const Q=le.createur.id===((De=r.user)==null?void 0:De.id);let Be=!1;return typeof le.visiteur=="object"?Be=((Je=le.visiteur)==null?void 0:Je.id)===((me=r.user)==null?void 0:me.id):Be=le.visiteur===((ee=r.user)==null?void 0:ee.id),Be||Q})}),N=Xn(()=>X.value?s.value.filter(le=>{var Q;return typeof le.entreprise=="object"?((Q=le.entreprise)==null?void 0:Q.id)===X.value:le.entreprise_id===X.value}):s.value),F=Xn(()=>g.value.entreprise?s.value.filter(le=>{var Q;return typeof le.entreprise=="object"?((Q=le.entreprise)==null?void 0:Q.id)===g.value.entreprise:le.entreprise_id===g.value.entreprise}):[]),Y=Xn(()=>!g.value.entreprise||!g.value.salarie?[]:a.value.filter(le=>typeof le.salarie=="object"&&le.salarie?le.salarie.id===g.value.salarie:le.salarie===g.value.salarie||le.salarie_id===g.value.salarie));Zs(async()=>{var le;await B(),r.isAdmin?await I():r.isSalarie&&await q(((le=r.user)==null?void 0:le.id)||0)});async function B(){try{const le=await n.fetchPlansWithDetails();i.value=le.data}catch(le){console.error("Erreur lors du chargement des plans:",le)}}async function I(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(le){console.error("Erreur lors du chargement des entreprises:",le)}}async function R(le){try{if(console.log("Chargement des salaries pour l'entreprise:",le),le===void 0){const Q=await r.fetchUsersByRole({role:"SALARIE"});s.value=Q}else s.value=await r.fetchEntrepriseSalaries(le);console.log("Salaries chargés:",s.value)}catch(Q){console.error("Erreur lors du chargement des salaries:",Q)}}async function q(le){try{console.log("Chargement des visiteurs pour le salarie:",le);const Q=await ev({role:"VISITEUR",salarieId:le});a.value=Q.map(Be=>({...Be,salarie_id:le})),console.log("Visiteurs chargés:",a.value)}catch(Q){console.error("Erreur lors du chargement des visiteurs:",Q)}}function U(){l.value=!0,v.value={nom:"",description:"",client:null}}async function $(le){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:le.id,nom:le.nom,entreprise:le.entreprise,salarie:le.salarie,visiteur:le.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(le),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",le.id),localStorage.setItem("lastPlanId",le.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(Q){console.error("[PlansView][editPlan] ERREUR:",Q),Q instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",Q.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function oe(le){le!=null&&le.id&&(p.value=le,d.value=!0)}async function J(){var le,Q;if((le=p.value)!=null&&le.id)try{await n.deletePlan(p.value.id),await B(),((Q=n.currentPlan)==null?void 0:Q.id)===p.value.id&&n.clearCurrentPlan()}catch(Be){console.error("Erreur lors de la suppression du plan:",Be),alert("Une erreur est survenue lors de la suppression du plan")}finally{d.value=!1,p.value=null}}function _e(){d.value=!1,p.value=null}function ve(le){return new Date(le).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ke(le){if(!le)return"";const Q=le.first_name||"",Be=le.last_name||"";return(Q.charAt(0)+Be.charAt(0)).toUpperCase()}async function W(le){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await I();const Q=typeof le.entreprise=="object"&&le.entreprise?le.entreprise.id:le.entreprise,Be=typeof le.salarie=="object"&&le.salarie?le.salarie.id:le.salarie,De=typeof le.visiteur=="object"&&le.visiteur?le.visiteur.id:le.visiteur;g.value={id:le.id,nom:le.nom,description:le.description,entreprise:Q||null,salarie:Be||null,visiteur:De||null},Q&&await R(Q),Be&&await q(Be),c.value=!0}catch(Q){console.error("Erreur lors de l'ouverture du modal:",Q),E.value="Erreur lors du chargement des données"}finally{x.value=!1}}async function V(){var le,Q,Be,De,Je;E.value=null,x.value=!0;try{if(!g.value.nom.trim())throw new Error("Le nom du plan est requis");if(g.value.visiteur&&!g.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(g.value.salarie&&!g.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:g.value.id,nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});const me=await n.updatePlanDetails(g.value.id,{nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});console.log("Réponse de la mise à jour:",me),me&&(c.value=!1,await B())}catch(me){if(console.error("Erreur lors de la mise à jour du plan:",me),(Q=(le=me.response)==null?void 0:le.data)!=null&&Q.detail)E.value=me.response.data.detail;else if((De=(Be=me.response)==null?void 0:Be.data)!=null&&De.non_field_errors)E.value=me.response.data.non_field_errors[0];else if((Je=me.response)!=null&&Je.data){const ee=Object.entries(me.response.data).map(([se,de])=>`${se}: ${Array.isArray(de)?de[0]:de}`);E.value=ee.join(`
`)}else E.value=me.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{x.value=!1}}Ai(()=>X.value,async le=>{k.value=null,A.value=null,le?await R(le):await R()}),Ai(()=>k.value,async le=>{A.value=null,le&&await q(le)}),Ai(()=>g.value.entreprise,async le=>{le===null?(g.value.salarie=null,g.value.visiteur=null):await R(le)}),Ai(()=>g.value.salarie,async le=>{g.value.visiteur=null,le&&await q(le)});function K(le){var Je,me,ee;const Q=r.user;if(!Q)return!1;if(Q.user_type==="admin")return!0;if(Q.user_type==="entreprise")return typeof le.entreprise=="object"?((Je=le.entreprise)==null?void 0:Je.id)===Q.id:le.entreprise===Q.id;if(Q.user_type==="salarie")return typeof le.salarie=="object"?((me=le.salarie)==null?void 0:me.id)===Q.id:le.salarie===Q.id;const Be=le.createur.id===Q.id;let De=!1;return typeof le.visiteur=="object"?De=((ee=le.visiteur)==null?void 0:ee.id)===Q.id:De=le.visiteur===Q.id,De||Be}async function pe(le){await B(),localStorage.setItem("lastPlanId",le.toString()),console.log(`Plan ${le} créé et défini comme plan actif`),e.push("/")}function he(le){D.value===le?z.value=z.value==="asc"?"desc":"asc":(D.value=le,z.value="desc")}function te(le){return le?xu(le):""}return(le,Q)=>{var Be;return Ae(),Ne("div",fY,[C("div",pY,[C("div",gY,[C("div",mY,[C("h1",vY,Et(fe.value.title),1),C("p",yY,Et(fe.value.description),1)]),C("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[C("button",{onClick:U,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),qn(r).isAdmin?(Ae(),Ne("div",bY,[C("div",_Y,[Q[15]||(Q[15]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),er(C("select",{id:"entreprise-filter","onUpdate:modelValue":Q[0]||(Q[0]=De=>X.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[14]||(Q[14]=C("option",{value:null},"Toutes les entreprises",-1)),(Ae(!0),Ne(wn,null,Qn(o.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,wY))),128))],512),[[us,X.value]])]),C("div",xY,[Q[16]||(Q[16]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),er(C("select",{id:"salarie-filter","onUpdate:modelValue":Q[1]||(Q[1]=De=>k.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",LY,Et(N.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Ae(!0),Ne(wn,null,Qn(N.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,SY))),128))],512),[[us,k.value]])]),k.value?(Ae(),Ne("div",CY,[Q[17]||(Q[17]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),er(C("select",{id:"visiteur-filter","onUpdate:modelValue":Q[2]||(Q[2]=De=>A.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",EY,Et(re.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Ae(!0),Ne(wn,null,Qn(re.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,PY))),128))],512),[[us,A.value]])])):Jt("",!0)])):qn(r).isSalarie?(Ae(),Ne("div",MY,[C("div",kY,[Q[19]||(Q[19]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),er(C("select",{id:"visiteur-filter","onUpdate:modelValue":Q[3]||(Q[3]=De=>A.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[18]||(Q[18]=C("option",{value:null},"Tous les visiteurs",-1)),(Ae(!0),Ne(wn,null,Qn(a.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,AY))),128))],512),[[us,A.value]])])])):Jt("",!0),C("div",TY,[C("div",DY,[C("div",OY,[C("table",NY,[C("thead",IY,[C("tr",null,[C("th",BY,[C("button",{onClick:Q[4]||(Q[4]=De=>he("nom")),class:"group inline-flex items-center"},[Q[21]||(Q[21]=ci(" Nom ")),C("span",RY,[(Ae(),Ne("svg",{class:gi(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[20]||(Q[20]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Q[24]||(Q[24]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Q[25]||(Q[25]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),Q[26]||(Q[26]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),Q[27]||(Q[27]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),C("th",FY,[C("button",{onClick:Q[5]||(Q[5]=De=>he("date_modification")),class:"group inline-flex items-center"},[Q[23]||(Q[23]=ci(" Dernière modification ")),C("span",jY,[(Ae(),Ne("svg",{class:gi(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[22]||(Q[22]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Q[28]||(Q[28]=C("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",zY,[ge.value.length===0?(Ae(),Ne("tr",$Y,Q[29]||(Q[29]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Jt("",!0),(Ae(!0),Ne(wn,null,Qn(ge.value,De=>(Ae(),Ne("tr",{key:De.id,class:"hover:bg-gray-50"},[C("td",VY,Et(De.nom),1),C("td",UY,Et(De.description||"-"),1),C("td",HY,[De.entreprise&&typeof De.entreprise=="object"?(Ae(),Ne("div",WY,[C("div",GY,[C("div",qY,[C("span",YY,Et(ke(De.entreprise)),1)])]),C("div",KY,[C("div",ZY,Et(qn(xu)(De.entreprise)),1)])])):(Ae(),Ne("div",XY," Non assigné "))]),C("td",JY,[De.salarie&&typeof De.salarie=="object"?(Ae(),Ne("div",QY,[C("div",eK,[C("div",tK,[C("span",nK,Et(ke(De.salarie)),1)])]),C("div",rK,[C("div",iK,Et(qn(xu)(De.salarie)),1)])])):(Ae(),Ne("div",sK," Non assigné "))]),C("td",oK,[De.visiteur&&typeof De.visiteur=="object"?(Ae(),Ne("div",aK,[C("div",lK,[C("div",uK,[C("span",cK,Et(ke(De.visiteur)),1)])]),C("div",hK,[C("div",dK,Et(qn(xu)(De.visiteur)),1)])])):(Ae(),Ne("div",fK," Non assigné "))]),C("td",pK,Et(ve(De.date_modification)),1),C("td",gK,[C("button",{onClick:Je=>$(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,mK),C("button",{onClick:Je=>W(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,vK),K(De)?(Ae(),Ne("button",{key:0,onClick:Je=>oe(De),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,yK)):Jt("",!0)])]))),128))])])])])]),mi(RE,{modelValue:l.value,"onUpdate:modelValue":Q[6]||(Q[6]=De=>l.value=De),salaries:s.value,clients:a.value,onCreated:pe},null,8,["modelValue","salaries","clients"]),c.value?(Ae(),Ne("div",bK,[C("div",_K,[C("div",wK,[Q[31]||(Q[31]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),C("button",{onClick:Q[7]||(Q[7]=De=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Q[30]||(Q[30]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("form",{onSubmit:tu(V,["prevent"]),class:"space-y-4"},[C("div",null,[Q[32]||(Q[32]=C("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),er(C("input",{type:"text",id:"edit-nom","onUpdate:modelValue":Q[8]||(Q[8]=De=>g.value.nom=De),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,xK),[[Li,g.value.nom]])]),C("div",null,[Q[33]||(Q[33]=C("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),er(C("textarea",{id:"edit-description","onUpdate:modelValue":Q[9]||(Q[9]=De=>g.value.description=De),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,LK),[[Li,g.value.description]])]),qn(r).isAdmin||((Be=qn(r).user)==null?void 0:Be.user_type)==="entreprise"?(Ae(),Ne("div",SK,[qn(r).isAdmin?(Ae(),Ne("div",CK,[Q[35]||(Q[35]=C("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),er(C("select",{id:"edit-entreprise","onUpdate:modelValue":Q[10]||(Q[10]=De=>g.value.entreprise=De),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[Q[34]||(Q[34]=C("option",{value:null},"Sélectionner une entreprise",-1)),(Ae(!0),Ne(wn,null,Qn(o.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,PK))),128))],8,EK),[[us,g.value.entreprise]])])):Jt("",!0),C("div",null,[Q[37]||(Q[37]=C("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),er(C("select",{id:"edit-salarie","onUpdate:modelValue":Q[11]||(Q[11]=De=>g.value.salarie=De),disabled:qn(r).isAdmin&&!g.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[Q[36]||(Q[36]=C("option",{value:null},"Sélectionner un salarie",-1)),(Ae(!0),Ne(wn,null,Qn(F.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,kK))),128))],8,MK),[[us,g.value.salarie]]),qn(r).isAdmin&&!g.value.entreprise?(Ae(),Ne("p",AK," Veuillez d'abord sélectionner une entreprise ")):Jt("",!0)]),C("div",null,[Q[39]||(Q[39]=C("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),er(C("select",{id:"edit-visiteur","onUpdate:modelValue":Q[12]||(Q[12]=De=>g.value.visiteur=De),disabled:!g.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[Q[38]||(Q[38]=C("option",{value:null},"Sélectionner un visiteur",-1)),(Ae(!0),Ne(wn,null,Qn(Y.value,De=>(Ae(),Ne("option",{key:De.id,value:De.id},Et(te(De)),9,DK))),128))],8,TK),[[us,g.value.visiteur]]),g.value.salarie?Jt("",!0):(Ae(),Ne("p",OK," Veuillez d'abord sélectionner un salarie "))])])):Jt("",!0),E.value?(Ae(),Ne("div",NK,[C("div",IK,[Q[40]||(Q[40]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",BK,[C("p",RK,Et(E.value),1)])])])):Jt("",!0),C("div",FK,[C("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:Q[13]||(Q[13]=De=>c.value=!1)}," Annuler "),C("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Ae(),Ne("svg",zK,Q[41]||(Q[41]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),ci(" "+Et(x.value?"Enregistrement...":"Enregistrer"),1)],8,jK)])],32)])])):Jt("",!0),d.value?(Ae(),da(sP,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:J,onCancel:_e})):Jt("",!0)])])}}});var oP={exports:{}};const VK=yE(nI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function R5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(n),!0).forEach(function(r){UK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lv=function(e){return typeof e}:lv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(t)}function UK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zu(){return Zu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zu.apply(this,arguments)}function HK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WK(t,e){if(t==null)return{};var n=HK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GK(t){return qK(t)||YK(t)||KK(t)||ZK()}function qK(t){if(Array.isArray(t))return Db(t)}function YK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KK(t,e){if(t){if(typeof t=="string")return Db(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Db(t,e)}}function Db(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var XK="1.14.0";function Oh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Fh=Oh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Om=Oh(/Edge/i),F5=Oh(/firefox/i),Wg=Oh(/safari/i)&&!Oh(/chrome/i)&&!Oh(/android/i),aP=Oh(/iP(ad|od|hone)/i),JK=Oh(/chrome/i)&&Oh(/android/i),lP={capture:!1,passive:!1};function Di(t,e,n){t.addEventListener(e,n,!Fh&&lP)}function xi(t,e,n){t.removeEventListener(e,n,!Fh&&lP)}function Kv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function QK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function mc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Kv(t,e):Kv(t,e))||r&&t===n)return t;if(t===n)break}while(t=QK(t))}return null}var j5=/\s+/g;function fo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(j5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(j5," ")}}function pr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function df(t,e){var n="";if(typeof t=="string")n=t;else do{var r=pr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function uP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Xc(){var t=document.scrollingElement;return t||document.documentElement}function Ys(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,p;if(t!==window&&t.parentNode&&t!==Xc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Fh))do if(i&&i.getBoundingClientRect&&(pr(i,"transform")!=="none"||n&&pr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(pr(i,"border-top-width")),a-=v.left+parseInt(pr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var g=df(i||t),x=g&&g.a,E=g&&g.d;g&&(o/=E,a/=x,p/=x,d/=E,l=o+d,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:d}}}function z5(t,e,n){for(var r=cd(t,!0),i=Ys(t)[e];r;){var s=Ys(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Xc())break;r=cd(r,!1)}return!1}function kp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Fr.ghost&&(r||o[s]!==Fr.dragged)&&mc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function V_(t,e){for(var n=t.lastElementChild;n&&(n===Fr.ghost||pr(n,"display")==="none"||e&&!Kv(n,e));)n=n.previousElementSibling;return n||null}function Mo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Fr.clone&&(!e||Kv(t,e))&&n++;return n}function $5(t){var e=0,n=0,r=Xc();if(t)do{var i=df(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function eZ(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function cd(t,e){if(!t||!t.getBoundingClientRect)return Xc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=pr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Xc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Xc()}function tZ(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Gg;function cP(t,e){return function(){if(!Gg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Gg=setTimeout(function(){Gg=void 0},e)}}}function nZ(){clearTimeout(Gg),Gg=void 0}function hP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function U_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function V5(t,e){pr(t,"position","absolute"),pr(t,"top",e.top),pr(t,"left",e.left),pr(t,"width",e.width),pr(t,"height",e.height)}function u2(t){pr(t,"position",""),pr(t,"top",""),pr(t,"left",""),pr(t,"width",""),pr(t,"height","")}var gl="Sortable"+new Date().getTime();function rZ(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(pr(i,"display")==="none"||i===Fr.ghost)){t.push({target:i,rect:Ys(i)});var s=eh({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=df(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(eZ(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=Ys(c),v=c.prevFromRect,g=c.prevToRect,x=a.rect,E=df(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&l2(v,p)&&!l2(d,p)&&(x.top-p.top)/(x.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=sZ(x,v,g,i.options)),l2(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){pr(r,"transition",""),pr(r,"transform","");var a=df(this.el),l=a&&a.a,c=a&&a.d,d=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!d,r.animatingY=!!p,pr(r,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=iZ(r),pr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),pr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){pr(r,"transition",""),pr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function iZ(t){return t.offsetWidth}function sZ(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Yf=[],c2={initializeByDefault:!0},Nm={mount:function(e){for(var n in c2)c2.hasOwnProperty(n)&&!(n in e)&&(e[n]=c2[n]);Yf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Yf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Yf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](eh({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](eh({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Yf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Zu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Yf.forEach(function(i){typeof i.eventProperties=="function"&&Zu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Yf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function wg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,g=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[gl],!!e){var E,k=e.options,A="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Fh&&!Om?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=g?g.lastPutMode:void 0;var D=eh(eh({},x),Nm.getEventProperties(r,e));for(var z in D)E[z]=D[z];n&&n.dispatchEvent(E),k[A]&&k[A].call(e,E)}}var oZ=["evt"],ql=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=WK(r,oZ);Nm.pluginEvent.bind(Fr)(e,n,eh({dragEl:jn,parentEl:Co,ghostEl:si,rootEl:qs,nextEl:Jd,lastDownEl:uv,cloneEl:Eo,cloneHidden:ad,dragStarted:xg,putSortable:Ha,activeSortable:Fr.active,originalEvent:i,oldIndex:up,oldDraggableIndex:qg,newIndex:bu,newDraggableIndex:od,hideGhostForTarget:gP,unhideGhostForTarget:mP,cloneNowHidden:function(){ad=!0},cloneNowShown:function(){ad=!1},dispatchSortableEvent:function(a){Ml({sortable:n,name:a,originalEvent:i})}},s))};function Ml(t){wg(eh({putSortable:Ha,cloneEl:Eo,targetEl:jn,rootEl:qs,oldIndex:up,oldDraggableIndex:qg,newIndex:bu,newDraggableIndex:od},t))}var jn,Co,si,qs,Jd,uv,Eo,ad,up,bu,qg,od,C0,Ha,op=!1,Zv=!1,Xv=[],Wd,hc,h2,d2,U5,H5,xg,Kf,Yg,Kg=!1,E0=!1,cv,ul,f2=[],Ob=!1,Jv=[],Hy=typeof document<"u",P0=aP,W5=Om||Fh?"cssFloat":"float",aZ=Hy&&!JK&&!aP&&"draggable"in document.createElement("div"),dP=function(){if(Hy){if(Fh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fP=function(e,n){var r=pr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=kp(e,0,n),o=kp(e,1,n),a=s&&pr(s),l=o&&pr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ys(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ys(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[W5]==="none"||o&&r[W5]==="none"&&c+d>i)?"vertical":"horizontal"},lZ=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},uZ=function(e,n){var r;return Xv.some(function(i){var s=i[gl].options.emptyInsertThreshold;if(!(!s||V_(i))){var o=Ys(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},pP=function(e){function n(s,o){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||lv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},gP=function(){!dP&&si&&pr(si,"display","none")},mP=function(){!dP&&si&&pr(si,"display","")};Hy&&document.addEventListener("click",function(t){if(Zv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Zv=!1,!1},!0);var Gd=function(e){if(jn){e=e.touches?e.touches[0]:e;var n=uZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[gl]._onDragOver(r)}}},cZ=function(e){jn&&jn.parentNode[gl]._isOutsideThisEl(e.target)};function Fr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Zu({},e),t[gl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Fr.supportPointer!==!1&&"PointerEvent"in window&&!Wg,emptyInsertThreshold:5};Nm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);pP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:aZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Di(t,"pointerdown",this._onTapStart):(Di(t,"mousedown",this._onTapStart),Di(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Di(t,"dragover",this),Di(t,"dragenter",this)),Xv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Zu(this,rZ())}Fr.prototype={constructor:Fr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Kf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,jn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(yZ(r),!jn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Wg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=mc(l,i.draggable,r,!1),!(l&&l.animated)&&uv!==l)){if(up=Mo(l),qg=Mo(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Ml({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),ql("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=mc(c,p.trim(),r,!1),p)return Ml({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),ql("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!mc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!jn&&r.parentNode===s){var c=Ys(r);if(qs=s,jn=r,Co=jn.parentNode,Jd=jn.nextSibling,uv=r,C0=o.group,Fr.dragged=jn,Wd={target:jn,clientX:(n||e).clientX,clientY:(n||e).clientY},U5=Wd.clientX-c.left,H5=Wd.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,jn.style["will-change"]="all",l=function(){if(ql("delayEnded",i,{evt:e}),Fr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!F5&&i.nativeDraggable&&(jn.draggable=!0),i._triggerDragStart(e,n),Ml({sortable:i,name:"choose",originalEvent:e}),fo(jn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){uP(jn,d.trim(),p2)}),Di(a,"dragover",Gd),Di(a,"mousemove",Gd),Di(a,"touchmove",Gd),Di(a,"mouseup",i._onDrop),Di(a,"touchend",i._onDrop),Di(a,"touchcancel",i._onDrop),F5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,jn.draggable=!0),ql("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Om||Fh))){if(Fr.eventCanceled){this._onDrop();return}Di(a,"mouseup",i._disableDelayedDrag),Di(a,"touchend",i._disableDelayedDrag),Di(a,"touchcancel",i._disableDelayedDrag),Di(a,"mousemove",i._delayedDragTouchMoveHandler),Di(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Di(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){jn&&p2(jn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._disableDelayedDrag),xi(e,"touchend",this._disableDelayedDrag),xi(e,"touchcancel",this._disableDelayedDrag),xi(e,"mousemove",this._delayedDragTouchMoveHandler),xi(e,"touchmove",this._delayedDragTouchMoveHandler),xi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Di(document,"pointermove",this._onTouchMove):n?Di(document,"touchmove",this._onTouchMove):Di(document,"mousemove",this._onTouchMove):(Di(jn,"dragend",this),Di(qs,"dragstart",this._onDragStart));try{document.selection?hv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(op=!1,qs&&jn){ql("dragStarted",this,{evt:n}),this.nativeDraggable&&Di(document,"dragover",cZ);var r=this.options;!e&&fo(jn,r.dragClass,!1),fo(jn,r.ghostClass,!0),Fr.active=this,e&&this._appendGhost(),Ml({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hc){this._lastX=hc.clientX,this._lastY=hc.clientY,gP();for(var e=document.elementFromPoint(hc.clientX,hc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(hc.clientX,hc.clientY),e!==n);)n=e;if(jn.parentNode[gl]._isOutsideThisEl(e),n)do{if(n[gl]){var r=void 0;if(r=n[gl]._onDragOver({clientX:hc.clientX,clientY:hc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);mP()}},_onTouchMove:function(e){if(Wd){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=si&&df(si,!0),a=si&&o&&o.a,l=si&&o&&o.d,c=P0&&ul&&$5(ul),d=(s.clientX-Wd.clientX+i.x)/(a||1)+(c?c[0]-f2[0]:0)/(a||1),p=(s.clientY-Wd.clientY+i.y)/(l||1)+(c?c[1]-f2[1]:0)/(l||1);if(!Fr.active&&!op){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(si){o?(o.e+=d-(h2||0),o.f+=p-(d2||0)):o={a:1,b:0,c:0,d:1,e:d,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");pr(si,"webkitTransform",v),pr(si,"mozTransform",v),pr(si,"msTransform",v),pr(si,"transform",v),h2=d,d2=p,hc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!si){var e=this.options.fallbackOnBody?document.body:qs,n=Ys(jn,!0,P0,!0,e),r=this.options;if(P0){for(ul=e;pr(ul,"position")==="static"&&pr(ul,"transform")==="none"&&ul!==document;)ul=ul.parentNode;ul!==document.body&&ul!==document.documentElement?(ul===document&&(ul=Xc()),n.top+=ul.scrollTop,n.left+=ul.scrollLeft):ul=Xc(),f2=$5(ul)}si=jn.cloneNode(!0),fo(si,r.ghostClass,!1),fo(si,r.fallbackClass,!0),fo(si,r.dragClass,!0),pr(si,"transition",""),pr(si,"transform",""),pr(si,"box-sizing","border-box"),pr(si,"margin",0),pr(si,"top",n.top),pr(si,"left",n.left),pr(si,"width",n.width),pr(si,"height",n.height),pr(si,"opacity","0.8"),pr(si,"position",P0?"absolute":"fixed"),pr(si,"zIndex","100000"),pr(si,"pointerEvents","none"),Fr.ghost=si,e.appendChild(si),pr(si,"transform-origin",U5/parseInt(si.style.width)*100+"% "+H5/parseInt(si.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(ql("dragStart",this,{evt:e}),Fr.eventCanceled){this._onDrop();return}ql("setupClone",this),Fr.eventCanceled||(Eo=U_(jn),Eo.draggable=!1,Eo.style["will-change"]="",this._hideClone(),fo(Eo,this.options.chosenClass,!1),Fr.clone=Eo),r.cloneId=hv(function(){ql("clone",r),!Fr.eventCanceled&&(r.options.removeCloneOnHide||qs.insertBefore(Eo,jn),r._hideClone(),Ml({sortable:r,name:"clone"}))}),!n&&fo(jn,s.dragClass,!0),n?(Zv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(xi(document,"mouseup",r._onDrop),xi(document,"touchend",r._onDrop),xi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,jn)),Di(document,"drop",r),pr(jn,"transform","translateZ(0)")),op=!0,r._dragStartId=hv(r._dragStarted.bind(r,n,e)),Di(document,"selectstart",r),xg=!0,Wg&&pr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Fr.active,d=C0===l,p=a.sort,v=Ha||c,g,x=this,E=!1;if(Ob)return;function k(J,_e){ql(J,x,eh({evt:e,isOwner:d,axis:g?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:D,onMove:function(ke,W){return M0(qs,n,jn,i,ke,Ys(ke),e,W)},changed:z},_e))}function A(){k("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function D(J){return k("dragOverCompleted",{insertion:J}),J&&(d?c._hideClone():c._showClone(x),x!==v&&(fo(jn,Ha?Ha.options.ghostClass:c.options.ghostClass,!1),fo(jn,a.ghostClass,!0)),Ha!==x&&x!==Fr.active?Ha=x:x===Fr.active&&Ha&&(Ha=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){k("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===jn&&!jn.animated||r===n&&!r.animated)&&(Kf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(jn.parentNode[gl]._isOutsideThisEl(e.target),!J&&Gd(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function z(){bu=Mo(jn),od=Mo(jn,a.draggable),Ml({sortable:x,name:"change",toEl:n,newIndex:bu,newDraggableIndex:od,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=mc(r,a.draggable,n,!0),k("dragOver"),Fr.eventCanceled)return E;if(jn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return D(!1);if(Zv=!1,c&&!a.disabled&&(d?p||(o=Co!==qs):Ha===this||(this.lastPutMode=C0.checkPull(this,c,jn,e))&&l.checkPut(this,c,jn,e))){if(g=this._getDirection(e,r)==="vertical",i=Ys(jn),k("dragOverValid"),Fr.eventCanceled)return E;if(o)return Co=qs,A(),this._hideClone(),k("revert"),Fr.eventCanceled||(Jd?qs.insertBefore(jn,Jd):qs.appendChild(jn)),D(!0);var X=V_(n,a.draggable);if(!X||pZ(e,g,this)&&!X.animated){if(X===jn)return D(!1);if(X&&n===e.target&&(r=X),r&&(s=Ys(r)),M0(qs,n,jn,i,r,s,e,!!r)!==!1)return A(),n.appendChild(jn),Co=n,z(),D(!0)}else if(X&&fZ(e,g,this)){var re=kp(n,0,a,!0);if(re===jn)return D(!1);if(r=re,s=Ys(r),M0(qs,n,jn,i,r,s,e,!1)!==!1)return A(),n.insertBefore(jn,re),Co=n,z(),D(!0)}else if(r.parentNode===n){s=Ys(r);var ge=0,fe,N=jn.parentNode!==n,F=!lZ(jn.animated&&jn.toRect||i,r.animated&&r.toRect||s,g),Y=g?"top":"left",B=z5(r,"top","top")||z5(jn,"top","top"),I=B?B.scrollTop:void 0;Kf!==r&&(fe=s[Y],Kg=!1,E0=!F&&a.invertSwap||N),ge=gZ(e,r,s,g,F?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,E0,Kf===r);var R;if(ge!==0){var q=Mo(jn);do q-=ge,R=Co.children[q];while(R&&(pr(R,"display")==="none"||R===si))}if(ge===0||R===r)return D(!1);Kf=r,Yg=ge;var U=r.nextElementSibling,$=!1;$=ge===1;var oe=M0(qs,n,jn,i,r,s,e,$);if(oe!==!1)return(oe===1||oe===-1)&&($=oe===1),Ob=!0,setTimeout(dZ,30),A(),$&&!U?n.appendChild(jn):r.parentNode.insertBefore(jn,$?U:r),B&&hP(B,0,I-B.scrollTop),Co=jn.parentNode,fe!==void 0&&!E0&&(cv=Math.abs(fe-Ys(r)[Y])),z(),D(!0)}if(n.contains(jn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xi(document,"mousemove",this._onTouchMove),xi(document,"touchmove",this._onTouchMove),xi(document,"pointermove",this._onTouchMove),xi(document,"dragover",Gd),xi(document,"mousemove",Gd),xi(document,"touchmove",Gd)},_offUpEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._onDrop),xi(e,"touchend",this._onDrop),xi(e,"pointerup",this._onDrop),xi(e,"touchcancel",this._onDrop),xi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(bu=Mo(jn),od=Mo(jn,r.draggable),ql("drop",this,{evt:e}),Co=jn&&jn.parentNode,bu=Mo(jn),od=Mo(jn,r.draggable),Fr.eventCanceled){this._nulling();return}op=!1,E0=!1,Kg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nb(this.cloneId),Nb(this._dragStartId),this.nativeDraggable&&(xi(document,"drop",this),xi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wg&&pr(document.body,"user-select",""),pr(jn,"transform",""),e&&(xg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),si&&si.parentNode&&si.parentNode.removeChild(si),(qs===Co||Ha&&Ha.lastPutMode!=="clone")&&Eo&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),jn&&(this.nativeDraggable&&xi(jn,"dragend",this),p2(jn),jn.style["will-change"]="",xg&&!op&&fo(jn,Ha?Ha.options.ghostClass:this.options.ghostClass,!1),fo(jn,this.options.chosenClass,!1),Ml({sortable:this,name:"unchoose",toEl:Co,newIndex:null,newDraggableIndex:null,originalEvent:e}),qs!==Co?(bu>=0&&(Ml({rootEl:Co,name:"add",toEl:Co,fromEl:qs,originalEvent:e}),Ml({sortable:this,name:"remove",toEl:Co,originalEvent:e}),Ml({rootEl:Co,name:"sort",toEl:Co,fromEl:qs,originalEvent:e}),Ml({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Ha&&Ha.save()):bu!==up&&bu>=0&&(Ml({sortable:this,name:"update",toEl:Co,originalEvent:e}),Ml({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Fr.active&&((bu==null||bu===-1)&&(bu=up,od=qg),Ml({sortable:this,name:"end",toEl:Co,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ql("nulling",this),qs=jn=Co=si=Jd=Eo=uv=ad=Wd=hc=xg=bu=od=up=qg=Kf=Yg=Ha=C0=Fr.dragged=Fr.ghost=Fr.clone=Fr.active=null,Jv.forEach(function(e){e.checked=!0}),Jv.length=h2=d2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":jn&&(this._onDragOver(e),hZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],mc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||vZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];mc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return mc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Nm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&pP(r)},destroy:function(){ql("destroy",this);var e=this.el;e[gl]=null,xi(e,"mousedown",this._onTapStart),xi(e,"touchstart",this._onTapStart),xi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xi(e,"dragover",this),xi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Xv.splice(Xv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ad){if(ql("hideClone",this),Fr.eventCanceled)return;pr(Eo,"display","none"),this.options.removeCloneOnHide&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),ad=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ad){if(ql("showClone",this),Fr.eventCanceled)return;jn.parentNode==qs&&!this.options.group.revertClone?qs.insertBefore(Eo,jn):Jd?qs.insertBefore(Eo,Jd):qs.appendChild(Eo),this.options.group.revertClone&&this.animate(jn,Eo),pr(Eo,"display",""),ad=!1}}};function hZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function M0(t,e,n,r,i,s,o,a){var l,c=t[gl],d=c.options.onMove,p;return window.CustomEvent&&!Fh&&!Om?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Ys(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(p=d.call(c,l,o)),p}function p2(t){t.draggable=!1}function dZ(){Ob=!1}function fZ(t,e,n){var r=Ys(kp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function pZ(t,e,n){var r=Ys(V_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function gZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,d=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&cv<c*i){if(!Kg&&(Yg===1?l>d+c*s/2:l<p-c*s/2)&&(Kg=!0),Kg)v=!0;else if(Yg===1?l<d+cv:l>p-cv)return-Yg}else if(l>d+c*(1-i)/2&&l<p-c*(1-i)/2)return mZ(e)}return v=v||o,v&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function mZ(t){return Mo(jn)<Mo(t)?1:-1}function vZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function yZ(t){Jv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Jv.push(r)}}function hv(t){return setTimeout(t,0)}function Nb(t){return clearTimeout(t)}Hy&&Di(document,"touchmove",function(t){(Fr.active||op)&&t.cancelable&&t.preventDefault()});Fr.utils={on:Di,off:xi,css:pr,find:uP,is:function(e,n){return!!mc(e,n,e,!1)},extend:tZ,throttle:cP,closest:mc,toggleClass:fo,clone:U_,index:Mo,nextTick:hv,cancelNextTick:Nb,detectDirection:fP,getChild:kp};Fr.get=function(t){return t[gl]};Fr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Fr.utils=eh(eh({},Fr.utils),r.utils)),Nm.mount(r)})};Fr.create=function(t,e){return new Fr(t,e)};Fr.version=XK;var ra=[],Lg,Ib,Bb=!1,g2,m2,Qv,Sg;function bZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Di(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Di(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Di(document,"touchmove",this._handleFallbackAutoScroll):Di(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?xi(document,"dragover",this._handleAutoScroll):(xi(document,"pointermove",this._handleFallbackAutoScroll),xi(document,"touchmove",this._handleFallbackAutoScroll),xi(document,"mousemove",this._handleFallbackAutoScroll)),G5(),dv(),nZ()},nulling:function(){Qv=Ib=Lg=Bb=Sg=g2=m2=null,ra.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Qv=n,r||this.options.forceAutoScrollFallback||Om||Fh||Wg){v2(n,this.options,a,r);var l=cd(a,!0);Bb&&(!Sg||s!==g2||o!==m2)&&(Sg&&G5(),Sg=setInterval(function(){var c=cd(document.elementFromPoint(s,o),!0);c!==l&&(l=c,dv()),v2(n,i.options,c,r)},10),g2=s,m2=o)}else{if(!this.options.bubbleScroll||cd(a,!0)===Xc()){dv();return}v2(n,this.options,cd(a,!1),!1)}}},Zu(t,{pluginName:"scroll",initializeByDefault:!0})}function dv(){ra.forEach(function(t){clearInterval(t.pid)}),ra=[]}function G5(){clearInterval(Sg)}var v2=cP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Xc(),c=!1,d;Ib!==n&&(Ib=n,dv(),Lg=e.scroll,d=e.scrollFn,Lg===!0&&(Lg=cd(n,!0)));var p=0,v=Lg;do{var g=v,x=Ys(g),E=x.top,k=x.bottom,A=x.left,D=x.right,z=x.width,X=x.height,re=void 0,ge=void 0,fe=g.scrollWidth,N=g.scrollHeight,F=pr(g),Y=g.scrollLeft,B=g.scrollTop;g===l?(re=z<fe&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),ge=X<N&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(re=z<fe&&(F.overflowX==="auto"||F.overflowX==="scroll"),ge=X<N&&(F.overflowY==="auto"||F.overflowY==="scroll"));var I=re&&(Math.abs(D-i)<=o&&Y+z<fe)-(Math.abs(A-i)<=o&&!!Y),R=ge&&(Math.abs(k-s)<=o&&B+X<N)-(Math.abs(E-s)<=o&&!!B);if(!ra[p])for(var q=0;q<=p;q++)ra[q]||(ra[q]={});(ra[p].vx!=I||ra[p].vy!=R||ra[p].el!==g)&&(ra[p].el=g,ra[p].vx=I,ra[p].vy=R,clearInterval(ra[p].pid),(I!=0||R!=0)&&(c=!0,ra[p].pid=setInterval((function(){r&&this.layer===0&&Fr.active._onTouchMove(Qv);var U=ra[this.layer].vy?ra[this.layer].vy*a:0,$=ra[this.layer].vx?ra[this.layer].vx*a:0;typeof d=="function"&&d.call(Fr.dragged.parentNode[gl],$,U,t,Qv,ra[this.layer].el)!=="continue"||hP(ra[this.layer].el,$,U)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=cd(v,!1)));Bb=c}},30),vP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function H_(){}H_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=kp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:vP};Zu(H_,{pluginName:"revertOnSpill"});function W_(){}W_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:vP};Zu(W_,{pluginName:"removeOnSpill"});var zu;function _Z(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;zu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(i&&i!==c){var p=zu;s(i)!==!1?(fo(i,d.swapClass,!0),zu=i):zu=null,p&&p!==zu&&fo(p,d.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;zu&&fo(zu,a.swapClass,!1),zu&&(a.swap||i&&i.options.swap)&&s!==zu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),wZ(s,zu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){zu=null}},Zu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:zu}}})}function wZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Mo(t),s=Mo(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Yr=[],yu=[],ig,dc,sg=!1,Yl=!1,Zf=!1,Ps,og,k0;function xZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Di(document,"pointerup",this._deselectMultiDrag):(Di(document,"mouseup",this._deselectMultiDrag),Di(document,"touchend",this._deselectMultiDrag)),Di(document,"keydown",this._checkKeyDown),Di(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Yr.length&&dc===e?Yr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Ps=r},delayEnded:function(){this.isMultiDrag=~Yr.indexOf(Ps)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Yr.length;s++)yu.push(U_(Yr[s])),yu[s].sortableIndex=Yr[s].sortableIndex,yu[s].draggable=!1,yu[s].style["will-change"]="",fo(yu[s],this.options.selectedClass,!1),Yr[s]===Ps&&fo(yu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Yr.length&&dc===r&&(q5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(q5(!1,i),yu.forEach(function(o){pr(o,"display","")}),r(),k0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(yu.forEach(function(o){pr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),k0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&dc&&dc.multiDrag._deselectMultiDrag(),Yr.forEach(function(r){r.sortableIndex=Mo(r)}),Yr=Yr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Zf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Yr.forEach(function(o){o!==Ps&&pr(o,"position","absolute")});var s=Ys(Ps,!1,!0,!0);Yr.forEach(function(o){o!==Ps&&V5(o,s)}),Yl=!0,sg=!0}i.animateAll(function(){Yl=!1,sg=!1,r.options.animation&&Yr.forEach(function(o){u2(o)}),r.options.sort&&A0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Yl&&~Yr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Yr.length>1&&(Yr.forEach(function(a){s.addAnimationState({target:a,rect:Yl?Ys(a):o}),u2(a),a.fromRect=o,r.removeAnimationState(a)}),Yl=!1,LZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),sg=!1,c.animation&&Yr.length>1&&(Yl||!i&&!o.options.sort&&!l)){var d=Ys(Ps,!1,!0,!0);Yr.forEach(function(v){v!==Ps&&(V5(v,d),a.appendChild(v))}),Yl=!0}if(!i)if(Yl||A0(),Yr.length>1){var p=k0;o._showClone(r),o.options.animation&&!k0&&p&&yu.forEach(function(v){o.addAnimationState({target:v,rect:og}),v.fromRect=og,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Yr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){og=Zu({},r);var o=df(Ps,!0);og.top-=o.f,og.left-=o.e}},dragOverAnimationComplete:function(){Yl&&(Yl=!1,A0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Zf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),fo(Ps,p.selectedClass,!~Yr.indexOf(Ps)),~Yr.indexOf(Ps))Yr.splice(Yr.indexOf(Ps),1),ig=null,wg({sortable:o,rootEl:i,name:"deselect",targetEl:Ps});else{if(Yr.push(Ps),wg({sortable:o,rootEl:i,name:"select",targetEl:Ps}),r.shiftKey&&ig&&o.el.contains(ig)){var g=Mo(ig),x=Mo(Ps);if(~g&&~x&&g!==x){var E,k;for(x>g?(k=g,E=x):(k=x,E=g+1);k<E;k++)~Yr.indexOf(v[k])||(fo(v[k],p.selectedClass,!0),Yr.push(v[k]),wg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else ig=Ps;dc=d}if(Zf&&this.isMultiDrag){if(Yl=!1,(s[gl].options.sort||s!==i)&&Yr.length>1){var A=Ys(Ps),D=Mo(Ps,":not(."+this.options.selectedClass+")");if(!sg&&p.animation&&(Ps.thisAnimationDuration=null),d.captureAnimationState(),!sg&&(p.animation&&(Ps.fromRect=A,Yr.forEach(function(X){if(X.thisAnimationDuration=null,X!==Ps){var re=Yl?Ys(X):A;X.fromRect=re,d.addAnimationState({target:X,rect:re})}})),A0(),Yr.forEach(function(X){v[D]?s.insertBefore(X,v[D]):s.appendChild(X),D++}),l===Mo(Ps))){var z=!1;Yr.forEach(function(X){if(X.sortableIndex!==Mo(X)){z=!0;return}}),z&&a("update")}Yr.forEach(function(X){u2(X)}),d.animateAll()}dc=d}(i===s||c&&c.lastPutMode!=="clone")&&yu.forEach(function(X){X.parentNode&&X.parentNode.removeChild(X)})}},nullingGlobal:function(){this.isMultiDrag=Zf=!1,yu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),xi(document,"pointerup",this._deselectMultiDrag),xi(document,"mouseup",this._deselectMultiDrag),xi(document,"touchend",this._deselectMultiDrag),xi(document,"keydown",this._checkKeyDown),xi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Zf<"u"&&Zf)&&dc===this.sortable&&!(n&&mc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Yr.length;){var r=Yr[0];fo(r,this.options.selectedClass,!1),Yr.shift(),wg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Zu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[gl];!r||!r.options.multiDrag||~Yr.indexOf(n)||(dc&&dc!==r&&(dc.multiDrag._deselectMultiDrag(),dc=r),fo(n,r.options.selectedClass,!0),Yr.push(n))},deselect:function(n){var r=n.parentNode[gl],i=Yr.indexOf(n);!r||!r.options.multiDrag||!~i||(fo(n,r.options.selectedClass,!1),Yr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Yr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Yl&&s!==Ps?o=-1:Yl?o=Mo(s,":not(."+n.options.selectedClass+")"):o=Mo(s),i.push({multiDragElement:s,index:o})}),{items:GK(Yr),clones:[].concat(yu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function LZ(t,e){Yr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function q5(t,e){yu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function A0(){Yr.forEach(function(t){t!==Ps&&t.parentNode&&t.parentNode.removeChild(t)})}Fr.mount(new bZ);Fr.mount(W_,H_);const SZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:xZ,Sortable:Fr,Swap:_Z,default:Fr},Symbol.toStringTag,{value:"Module"})),CZ=yE(SZ);(function(t,e){(function(r,i){t.exports=i(VK,CZ)})(typeof self<"u"?self:Ea,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)o.d(c,d,(function(p){return a[p]}).bind(null,d));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,g){return l.call(c,p,v,g)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return d.slice()}};i.exports.f=function(g){return d&&c.call(g)=="[object Window]"?p(g):l(a(g))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),p=o("c04e"),v=o("5135"),g=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(k,A){if(k=d(k),A=p(A,!0),g)try{return x(k,A)}catch{}if(v(k,A))return c(!l.f.call(k,A),k[A])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),p=c("reduce"),v=d("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var v=p.call(c,d);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var p in l){var v=a[p],g=v&&v.prototype;if(g&&g.forEach!==c)try{d(g,"forEach",c)}catch{g.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),p=c("forEach");i.exports=!d||!p?function(g){return a(this,g,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var d=0,p={next:function(){return{done:!!d++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,g){if(!g&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],g=v.constructor={};return g[d]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(d,p){var v=a(d);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),p=o("ce4e"),v=o("e893"),g=o("94ca");i.exports=function(x,E){var k=x.target,A=x.global,D=x.stat,z,X,re,ge,fe,N;if(A?X=a:D?X=a[k]||p(k,{}):X=(a[k]||{}).prototype,X)for(re in E){if(fe=E[re],x.noTargetGet?(N=l(X,re),ge=N&&N.value):ge=X[re],z=g(A?re:k+(D?".":"#")+re,x.forced),!z&&ge!==void 0){if(typeof fe==typeof ge)continue;v(fe,ge)}(x.sham||ge&&ge.sham)&&c(fe,"sham",!0),d(X,re,fe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),p="toString",v=RegExp.prototype,g=v[p],x=c(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),E=g.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var A=l(this),D=String(A.source),z=A.flags,X=String(z===void 0&&A instanceof RegExp&&!("flags"in v)?d.call(A):z);return"/"+D+"/"+X},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),p=o("1d80"),v=o("ab13"),g=o("c430"),x="".startsWith,E=Math.min,k=v("startsWith"),A=!g&&!k&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!A&&!k},{startsWith:function(z){var X=String(p(this));d(z);var re=c(E(arguments.length>1?arguments[1]:void 0,X.length)),ge=String(z);return x?x.call(X,ge,re):X.slice(re,re+ge.length)===ge}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,d=c&&c.versions,p=d&&d.v8,v,g;p?(v=p.split("."),g=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(g=v[1]))),i.exports=g&&+g},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");i.exports=function(p){if(p!=null)return p[d]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");i.exports=a?Object.defineProperties:function(v,g){c(v);for(var x=d(g),E=x.length,k=0,A;E>k;)l.f(v,A=x[k++],g[A]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",p=l.set,v=l.getterFor(d);c(String,"String",function(g){p(this,{type:d,string:String(g),index:0})},function(){var x=v(this),E=x.string,k=x.index,A;return k>=E.length?{value:void 0,done:!0}:(A=a(E,k),x.index+=A.length,{value:A,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),d=a("unscopables"),p=Array.prototype;p[d]==null&&c.f(p,d,{configurable:!0,value:l(null)}),i.exports=function(v){p[d][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");i.exports=function(p){var v;return a(p)&&((v=p[d])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(p){return function(v,g,x){var E=a(v),k=l(E.length),A=c(x,k),D;if(p&&g!=g){for(;k>A;)if(D=E[A++],D!=D)return!0}else for(;k>A;A++)if((p||A in E)&&E[A]===g)return p||A||0;return!p&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),p=c("filter"),v=d("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),p=o("50c4"),v=o("8418"),g=o("35a1");i.exports=function(E){var k=l(E),A=typeof this=="function"?this:Array,D=arguments.length,z=D>1?arguments[1]:void 0,X=z!==void 0,re=g(k),ge=0,fe,N,F,Y,B,I;if(X&&(z=a(z,D>2?arguments[2]:void 0,2)),re!=null&&!(A==Array&&d(re)))for(Y=re.call(k),B=Y.next,N=new A;!(F=B.call(Y)).done;ge++)I=X?c(Y,z,[F.value,ge],!0):F.value,v(N,ge,I);else for(fe=p(k.length),N=new A(fe);fe>ge;ge++)I=X?z(k[ge],ge):k[ge],v(N,ge,I);return N.length=ge,N}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),p=o("a691"),v=o("1d80"),g=o("8aa5"),x=o("14c3"),E=Math.max,k=Math.min,A=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,z=/\$([$&'`]|\d\d?)/g,X=function(re){return re===void 0?re:String(re)};a("replace",2,function(re,ge,fe,N){var F=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Y=N.REPLACE_KEEPS_$0,B=F?"$":"$0";return[function(q,U){var $=v(this),oe=q==null?void 0:q[re];return oe!==void 0?oe.call(q,$,U):ge.call(String($),q,U)},function(R,q){if(!F&&Y||typeof q=="string"&&q.indexOf(B)===-1){var U=fe(ge,R,this,q);if(U.done)return U.value}var $=l(R),oe=String(this),J=typeof q=="function";J||(q=String(q));var _e=$.global;if(_e){var ve=$.unicode;$.lastIndex=0}for(var ke=[];;){var W=x($,oe);if(W===null||(ke.push(W),!_e))break;var V=String(W[0]);V===""&&($.lastIndex=g(oe,d($.lastIndex),ve))}for(var K="",pe=0,he=0;he<ke.length;he++){W=ke[he];for(var te=String(W[0]),le=E(k(p(W.index),oe.length),0),Q=[],Be=1;Be<W.length;Be++)Q.push(X(W[Be]));var De=W.groups;if(J){var Je=[te].concat(Q,le,oe);De!==void 0&&Je.push(De);var me=String(q.apply(void 0,Je))}else me=I(te,oe,le,Q,De,q);le>=pe&&(K+=oe.slice(pe,le)+me,pe=le+te.length)}return K+oe.slice(pe)}];function I(R,q,U,$,oe,J){var _e=U+R.length,ve=$.length,ke=z;return oe!==void 0&&(oe=c(oe),ke=D),ge.call(J,ke,function(W,V){var K;switch(V.charAt(0)){case"$":return"$";case"&":return R;case"`":return q.slice(0,U);case"'":return q.slice(_e);case"<":K=oe[V.slice(1,-1)];break;default:var pe=+V;if(pe===0)return W;if(pe>ve){var he=A(pe/10);return he===0?W:he<=ve?$[he-1]===void 0?V.charAt(1):$[he-1]+V.charAt(1):W}K=$[pe-1]}return K===void 0?"":K})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var g=l.f(d(v)),x=c.f;return x?g.concat(x(v)):g}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),k=d(E.length),A;return p(x),A=v(E,0),A.length=l(A,E,E,k,0,1,x,arguments.length>1?arguments[1]:void 0),A}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(d){return function(p,v){var g=String(l(p)),x=a(v),E=g.length,k,A;return x<0||x>=E?d?"":void 0:(k=g.charCodeAt(x),k<55296||k>56319||x+1===E||(A=g.charCodeAt(x+1))<56320||A>57343?d?g.charAt(x):k:d?g.slice(x,x+2):(k-55296<<10)+(A-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");i.exports=function(p,v){var g;return l(p)&&(g=p.constructor,typeof g=="function"&&(g===Array||l(g.prototype))?g=void 0:a(g)&&(g=g[d],g===null&&(g=void 0))),new(g===void 0?Array:g)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),p=o("5135"),v=o("f772"),g=o("d012"),x=l.WeakMap,E,k,A,D=function(F){return A(F)?k(F):E(F,{})},z=function(F){return function(Y){var B;if(!c(Y)||(B=k(Y)).type!==F)throw TypeError("Incompatible receiver, "+F+" required");return B}};if(a){var X=new x,re=X.get,ge=X.has,fe=X.set;E=function(F,Y){return fe.call(X,F,Y),Y},k=function(F){return re.call(X,F)||{}},A=function(F){return ge.call(X,F)}}else{var N=v("state");g[N]=!0,E=function(F,Y){return d(F,N,Y),Y},k=function(F){return p(F,N)?F[N]:{}},A=function(F){return p(F,N)}}i.exports={set:E,get:k,has:A,enforce:D,getterFor:z}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),p=o("8925"),v=o("69f3"),g=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(k,A,D,z){var X=z?!!z.unsafe:!1,re=z?!!z.enumerable:!1,ge=z?!!z.noTargetGet:!1;if(typeof D=="function"&&(typeof A=="string"&&!c(D,"name")&&l(D,"name",A),x(D).source=E.join(typeof A=="string"?A:"")),k===a){re?k[A]=D:d(A,D);return}else X?!ge&&k[A]&&(re=!0):delete k[A];re?k[A]=D:l(k,A,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,p=function(v){return function(g){for(var x=c(g),E=l(x),k=E.length,A=0,D=[],z;k>A;)z=E[A++],(!a||d.call(x,z))&&D.push(v?[z,x[z]]:x[z]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||d(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),p=o("1be4"),v=o("cc12"),g=o("f772"),x=">",E="<",k="prototype",A="script",D=g("IE_PROTO"),z=function(){},X=function(F){return E+A+x+F+E+"/"+A+x},re=function(F){F.write(X("")),F.close();var Y=F.parentWindow.Object;return F=null,Y},ge=function(){var F=v("iframe"),Y="java"+A+":",B;return F.style.display="none",p.appendChild(F),F.src=String(Y),B=F.contentWindow.document,B.open(),B.write(X("document.F=Object")),B.close(),B.F},fe,N=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch{}N=fe?re(fe):ge();for(var F=c.length;F--;)delete N[k][c[F]];return N()};d[D]=!0,i.exports=Object.create||function(Y,B){var I;return Y!==null?(z[k]=a(Y),I=new z,z[k]=null,I[D]=Y):I=N(),B===void 0?I:l(I,B)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),p=o("d44e"),v=o("9112"),g=o("6eeb"),x=o("b622"),E=o("c430"),k=o("3f8c"),A=o("ae93"),D=A.IteratorPrototype,z=A.BUGGY_SAFARI_ITERATORS,X=x("iterator"),re="keys",ge="values",fe="entries",N=function(){return this};i.exports=function(F,Y,B,I,R,q,U){l(B,Y,I);var $=function(he){if(he===R&&ke)return ke;if(!z&&he in _e)return _e[he];switch(he){case re:return function(){return new B(this,he)};case ge:return function(){return new B(this,he)};case fe:return function(){return new B(this,he)}}return function(){return new B(this)}},oe=Y+" Iterator",J=!1,_e=F.prototype,ve=_e[X]||_e["@@iterator"]||R&&_e[R],ke=!z&&ve||$(R),W=Y=="Array"&&_e.entries||ve,V,K,pe;if(W&&(V=c(W.call(new F)),D!==Object.prototype&&V.next&&(!E&&c(V)!==D&&(d?d(V,D):typeof V[X]!="function"&&v(V,X,N)),p(V,oe,!0,!0),E&&(k[oe]=N))),R==ge&&ve&&ve.name!==ge&&(J=!0,ke=function(){return ve.call(this)}),(!E||U)&&_e[X]!==ke&&v(_e,X,ke),k[Y]=ke,R)if(K={values:$(ge),keys:q?ke:$(re),entries:$(fe)},U)for(pe in K)(z||J||!(pe in _e))&&g(_e,pe,K[pe]);else a({target:Y,proto:!0,forced:z||J},K);return K}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(d,p,v){var g=a(p);g in d?l.f(d,g,c(0,v)):d[g]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(d,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function d(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(fe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,g=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(fe.stack)||g.exec(fe.stack),E=x&&x[1]||!1,k=x&&x[2]||!1,A=document.location.href.replace(document.location.hash,""),D,z,X,re=document.getElementsByTagName("script");E===A&&(D=document.documentElement.outerHTML,z=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),X=D.replace(z,"$1").trim());for(var ge=0;ge<re.length;ge++)if(re[ge].readyState==="interactive"||re[ge].src===E||E===A&&re[ge].innerHTML&&re[ge].innerHTML.trim()===X)return re[ge];return null}}return d})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(d,p,v){return l.f(d,p,c(1,v))}:function(d,p,v){return d[p]=v,d}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,p=c,v=function(){var k=/a/,A=/b*/g;return c.call(k,"a"),c.call(A,"a"),k.lastIndex!==0||A.lastIndex!==0}(),g=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||g;E&&(p=function(A){var D=this,z,X,re,ge,fe=g&&D.sticky,N=a.call(D),F=D.source,Y=0,B=A;return fe&&(N=N.replace("y",""),N.indexOf("g")===-1&&(N+="g"),B=String(A).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&A[D.lastIndex-1]!==`
`)&&(F="(?: "+F+")",B=" "+B,Y++),X=new RegExp("^(?:"+F+")",N)),x&&(X=new RegExp("^"+F+"$(?!\\s)",N)),v&&(z=D.lastIndex),re=c.call(fe?X:D,B),fe?re?(re.input=re.input.slice(Y),re[0]=re[0].slice(Y),re.index=D.lastIndex,D.lastIndex+=re[0].length):D.lastIndex=0:v&&re&&(D.lastIndex=D.global?re.index+re[0].length:z),x&&re&&re.length>1&&d.call(re[0],X,function(){for(ge=1;ge<arguments.length-2;ge++)arguments[ge]===void 0&&(re[ge]=void 0)}),re}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var k=p[d(x)];return k==g?!0:k==v?!1:typeof E=="function"?a(E):!!E},d=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",g=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),p=o("7b0b"),v=o("50c4"),g=o("8418"),x=o("65f0"),E=o("1dde"),k=o("b622"),A=o("2d00"),D=k("isConcatSpreadable"),z=9007199254740991,X="Maximum allowed index exceeded",re=A>=51||!l(function(){var F=[];return F[D]=!1,F.concat()[0]!==F}),ge=E("concat"),fe=function(F){if(!d(F))return!1;var Y=F[D];return Y!==void 0?!!Y:c(F)},N=!re||!ge;a({target:"Array",proto:!0,forced:N},{concat:function(Y){var B=p(this),I=x(B,0),R=0,q,U,$,oe,J;for(q=-1,$=arguments.length;q<$;q++)if(J=q===-1?B:arguments[q],fe(J)){if(oe=v(J.length),R+oe>z)throw TypeError(X);for(U=0;U<oe;U++,R++)U in J&&g(I,R,J[U])}else{if(R>=z)throw TypeError(X);g(I,R++,J)}return I.length=R,I}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,d,p){try{return p?c(a(d)[0],d[1]):c(d)}catch(g){var v=l.return;throw v!==void 0&&a(v.call(l)),g}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),p=Object.defineProperty;s.f=a?p:function(g,x,E){if(c(g),x=d(x,!0),c(E),l)try{return p(g,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(g[x]=E.value),g}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(g,x,E){var k=x+" Iterator";return g.prototype=l(a,{next:c(1,E)}),d(g,k,!1,!0),p[k]=v,g}},"9f7f":function(i,s,o){var a=o("d039");function l(c,d){return RegExp(c,d)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(p,v,g,x,E,k,A,D){for(var z=E,X=0,re=A?c(A,D,3):!1,ge;X<x;){if(X in g){if(ge=re?re(g[X],X,v):g[X],k>0&&a(ge))z=d(p,v,ge,l(ge.length),z,k-1)-1;else{if(z>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[z]=ge}z++}X++}return z};i.exports=d},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),p=o("7b0b"),v=o("65f0"),g=o("8418"),x=o("1dde"),E=o("ae40"),k=x("splice"),A=E("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,z=Math.min,X=9007199254740991,re="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!A},{splice:function(fe,N){var F=p(this),Y=d(F.length),B=l(fe,Y),I=arguments.length,R,q,U,$,oe,J;if(I===0?R=q=0:I===1?(R=0,q=Y-B):(R=I-2,q=z(D(c(N),0),Y-B)),Y+R-q>X)throw TypeError(re);for(U=v(F,q),$=0;$<q;$++)oe=B+$,oe in F&&g(U,$,F[oe]);if(U.length=q,R<q){for($=B;$<Y-q;$++)oe=$+q,J=$+R,oe in F?F[J]=F[oe]:delete F[J];for($=Y;$>Y-q+R;$--)delete F[$-1]}else if(R>q)for($=Y-q;$>B;$--)oe=$+q-1,J=$+R-1,oe in F?F[J]=F[oe]:delete F[J];for($=0;$<R;$++)F[$+B]=arguments[$+2];return F.length=Y-q+R,U}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),p=o("83ab"),v=o("4930"),g=o("fdbf"),x=o("d039"),E=o("5135"),k=o("e8b5"),A=o("861d"),D=o("825a"),z=o("7b0b"),X=o("fc6a"),re=o("c04e"),ge=o("5c6c"),fe=o("7c73"),N=o("df75"),F=o("241c"),Y=o("057f"),B=o("7418"),I=o("06cf"),R=o("9bf2"),q=o("d1e7"),U=o("9112"),$=o("6eeb"),oe=o("5692"),J=o("f772"),_e=o("d012"),ve=o("90e3"),ke=o("b622"),W=o("e538"),V=o("746f"),K=o("d44e"),pe=o("69f3"),he=o("b727").forEach,te=J("hidden"),le="Symbol",Q="prototype",Be=ke("toPrimitive"),De=pe.set,Je=pe.getterFor(le),me=Object[Q],ee=l.Symbol,se=c("JSON","stringify"),de=I.f,ze=R.f,$e=Y.f,et=q.f,Ge=oe("symbols"),Qe=oe("op-symbols"),Ke=oe("string-to-symbol-registry"),xt=oe("symbol-to-string-registry"),bt=oe("wks"),yt=l.QObject,Wt=!yt||!yt[Q]||!yt[Q].findChild,tn=p&&x(function(){return fe(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(Qt,xn,Cn){var tr=de(me,xn);tr&&delete me[xn],ze(Qt,xn,Cn),tr&&Qt!==me&&ze(me,xn,tr)}:ze,yn=function(Qt,xn){var Cn=Ge[Qt]=fe(ee[Q]);return De(Cn,{type:le,tag:Qt,description:xn}),p||(Cn.description=xn),Cn},Ze=g?function(Qt){return typeof Qt=="symbol"}:function(Qt){return Object(Qt)instanceof ee},ot=function(xn,Cn,tr){xn===me&&ot(Qe,Cn,tr),D(xn);var vr=re(Cn,!0);return D(tr),E(Ge,vr)?(tr.enumerable?(E(xn,te)&&xn[te][vr]&&(xn[te][vr]=!1),tr=fe(tr,{enumerable:ge(0,!1)})):(E(xn,te)||ze(xn,te,ge(1,{})),xn[te][vr]=!0),tn(xn,vr,tr)):ze(xn,vr,tr)},rt=function(xn,Cn){D(xn);var tr=X(Cn),vr=N(tr).concat(An(tr));return he(vr,function(xr){(!p||Zt.call(tr,xr))&&ot(xn,xr,tr[xr])}),xn},$t=function(xn,Cn){return Cn===void 0?fe(xn):rt(fe(xn),Cn)},Zt=function(xn){var Cn=re(xn,!0),tr=et.call(this,Cn);return this===me&&E(Ge,Cn)&&!E(Qe,Cn)?!1:tr||!E(this,Cn)||!E(Ge,Cn)||E(this,te)&&this[te][Cn]?tr:!0},Dn=function(xn,Cn){var tr=X(xn),vr=re(Cn,!0);if(!(tr===me&&E(Ge,vr)&&!E(Qe,vr))){var xr=de(tr,vr);return xr&&E(Ge,vr)&&!(E(tr,te)&&tr[te][vr])&&(xr.enumerable=!0),xr}},mn=function(xn){var Cn=$e(X(xn)),tr=[];return he(Cn,function(vr){!E(Ge,vr)&&!E(_e,vr)&&tr.push(vr)}),tr},An=function(xn){var Cn=xn===me,tr=$e(Cn?Qe:X(xn)),vr=[];return he(tr,function(xr){E(Ge,xr)&&(!Cn||E(me,xr))&&vr.push(Ge[xr])}),vr};if(v||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var xn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Cn=ve(xn),tr=function(vr){this===me&&tr.call(Qe,vr),E(this,te)&&E(this[te],Cn)&&(this[te][Cn]=!1),tn(this,Cn,ge(1,vr))};return p&&Wt&&tn(me,Cn,{configurable:!0,set:tr}),yn(Cn,xn)},$(ee[Q],"toString",function(){return Je(this).tag}),$(ee,"withoutSetter",function(Qt){return yn(ve(Qt),Qt)}),q.f=Zt,R.f=ot,I.f=Dn,F.f=Y.f=mn,B.f=An,W.f=function(Qt){return yn(ke(Qt),Qt)},p&&(ze(ee[Q],"description",{configurable:!0,get:function(){return Je(this).description}}),d||$(me,"propertyIsEnumerable",Zt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ee}),he(N(bt),function(Qt){V(Qt)}),a({target:le,stat:!0,forced:!v},{for:function(Qt){var xn=String(Qt);if(E(Ke,xn))return Ke[xn];var Cn=ee(xn);return Ke[xn]=Cn,xt[Cn]=xn,Cn},keyFor:function(xn){if(!Ze(xn))throw TypeError(xn+" is not a symbol");if(E(xt,xn))return xt[xn]},useSetter:function(){Wt=!0},useSimple:function(){Wt=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:$t,defineProperty:ot,defineProperties:rt,getOwnPropertyDescriptor:Dn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:mn,getOwnPropertySymbols:An}),a({target:"Object",stat:!0,forced:x(function(){B.f(1)})},{getOwnPropertySymbols:function(xn){return B.f(z(xn))}}),se){var Jn=!v||x(function(){var Qt=ee();return se([Qt])!="[null]"||se({a:Qt})!="{}"||se(Object(Qt))!="{}"});a({target:"JSON",stat:!0,forced:Jn},{stringify:function(xn,Cn,tr){for(var vr=[xn],xr=1,ur;arguments.length>xr;)vr.push(arguments[xr++]);if(ur=Cn,!(!A(Cn)&&xn===void 0||Ze(xn)))return k(Cn)||(Cn=function(Gr,Fs){if(typeof ur=="function"&&(Fs=ur.call(this,Gr,Fs)),!Ze(Fs))return Fs}),vr[1]=Cn,se.apply(null,vr)}})}ee[Q][Be]||U(ee[Q],Be,ee[Q].valueOf),K(ee,le),_e[te]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:d},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var d=[][l];return!!d&&a(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,p={},v=function(g){throw g};i.exports=function(g,x){if(c(p,g))return p[g];x||(x={});var E=[][g],k=c(x,"ACCESSORS")?x.ACCESSORS:!1,A=c(x,0)?x[0]:v,D=c(x,1)?x[1]:void 0;return p[g]=!!E&&!l(function(){if(k&&!a)return!0;var z={length:-1};k?d(z,1,{enumerable:!0,get:v}):z[1]=1,E.call(z,A,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),p=o("c430"),v=d("iterator"),g=!1,x=function(){return this},E,k,A;[].keys&&(A=[].keys(),"next"in A?(k=a(a(A)),k!==Object.prototype&&(E=k)):g=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:g}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return d.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),p=o("4930"),v=o("fdbf"),g=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||d;i.exports=function(k){return c(g,k)||(p&&c(x,k)?g[k]=x[k]:g[k]=E("Symbol."+k)),g[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),p=d(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(g){return c(l(g))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),p=o("65f0"),v=[].push,g=function(x){var E=x==1,k=x==2,A=x==3,D=x==4,z=x==6,X=x==5||z;return function(re,ge,fe,N){for(var F=c(re),Y=l(F),B=a(ge,fe,3),I=d(Y.length),R=0,q=N||p,U=E?q(re,I):k?q(re,0):void 0,$,oe;I>R;R++)if((X||R in Y)&&($=Y[R],oe=B($,R,F),x)){if(E)U[R]=oe;else if(oe)switch(x){case 3:return!0;case 5:return $;case 6:return R;case 2:v.call(U,$)}else if(D)return!1}return z?-1:A||D?D:U}};i.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var d,p;if(c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(p=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=a[c]||l(c,{});i.exports=d},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),p="findIndex",v=!0,g=d(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!g},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,g=c("indexOf"),x=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!g||!x},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");i.exports=function(p,v){var g=l(p),x=0,E=[],k;for(k in g)!a(d,k)&&a(g,k)&&E.push(k);for(;v.length>x;)a(g,k=v[x++])&&(~c(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),p=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,d=l(c)&&l(c.createElement);i.exports=function(p){return d?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,d){try{l(a,c,d)}catch{a[c]=d}return d}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,p){return arguments.length<2?c(a[d])||c(l[d]):a[d]&&a[d][p]||l[d]&&l[d][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(d,[]),c=d instanceof Array}catch{}return function(g,x){return a(g),l(x),c?p.call(g,x):g.__proto__=x,g}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");i.exports=function(p,v,g){p&&!l(p=g?p:p.prototype,d)&&a(p,d,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),p=function(v){return function(g,x,E,k){a(x);var A=l(g),D=c(A),z=d(A.length),X=v?z-1:0,re=v?-1:1;if(E<2)for(;;){if(X in D){k=D[X],X+=re;break}if(X+=re,v?X<0:z<=X)throw TypeError("Reduce of empty array with no initial value")}for(;v?X>=0:z>X;X+=re)X in D&&(k=x(k,D[X],X,A));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),p=o("9112"),v=c("species"),g=!l(function(){var D=/./;return D.exec=function(){var z=[];return z.groups={a:"7"},z},"".replace(D,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),A=!l(function(){var D=/(?:)/,z=D.exec;D.exec=function(){return z.apply(this,arguments)};var X="ab".split(D);return X.length!==2||X[0]!=="a"||X[1]!=="b"});i.exports=function(D,z,X,re){var ge=c(D),fe=!l(function(){var R={};return R[ge]=function(){return 7},""[D](R)!=7}),N=fe&&!l(function(){var R=!1,q=/a/;return D==="split"&&(q={},q.constructor={},q.constructor[v]=function(){return q},q.flags="",q[ge]=/./[ge]),q.exec=function(){return R=!0,null},q[ge](""),!R});if(!fe||!N||D==="replace"&&!(g&&x&&!k)||D==="split"&&!A){var F=/./[ge],Y=X(ge,""[D],function(R,q,U,$,oe){return q.exec===d?fe&&!oe?{done:!0,value:F.call(q,U,$)}:{done:!0,value:R.call(U,q,$)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),B=Y[0],I=Y[1];a(String.prototype,D,B),a(RegExp.prototype,ge,z==2?function(R,q){return I.call(R,this,q)}:function(R){return I.call(R,this)})}re&&p(RegExp.prototype[ge],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),p=c("map"),v=d("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=d(x),k=p.f,A=c(E),D={},z=0,X,re;A.length>z;)re=k(E,X=A[z++]),re!==void 0&&v(D,X,re);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),p=o("b622"),v=p("iterator"),g=p("toStringTag"),x=c.values;for(var E in l){var k=a[E],A=k&&k.prototype;if(A){if(A[v]!==x)try{d(A,v,x)}catch{A[v]=x}if(A[g]||d(A,g,E),l[E]){for(var D in c)if(A[D]!==c[D])try{d(A,D,c[D])}catch{A[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(d){return a(d,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),p=o("861d"),v=o("9bf2").f,g=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},k=function(){var ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),fe=this instanceof k?new x(ge):ge===void 0?x():x(ge);return ge===""&&(E[fe]=!0),fe};g(k,x);var A=k.prototype=x.prototype;A.constructor=k;var D=A.toString,z=String(x("test"))=="Symbol(test)",X=/^Symbol\((.*)\)[^)]+$/;v(A,"description",{configurable:!0,get:function(){var ge=p(this)?this.valueOf():this,fe=D.call(ge);if(d(E,ge))return"";var N=z?fe.slice(7,-1):fe.replace(X,"$1");return N===""?void 0:N}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=d?Object.getPrototypeOf:function(g){return g=l(g),a(g,p)?g[p]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),p=o("7dd0"),v="Array Iterator",g=d.set,x=d.getterFor(v);i.exports=p(Array,"Array",function(E,k){g(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=x(this),k=E.target,A=E.kind,D=E.index++;return!k||D>=k.length?(E.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:D,done:!1}:A=="values"?{value:k[D],done:!1}:{value:[D,k[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,p=o("83ab"),v=l(function(){d(1)}),g=!p||v;a({target:"Object",stat:!0,forced:g,sham:!p},{getOwnPropertyDescriptor:function(E,k){return d(c(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");i.exports=function(p,v){for(var g=l(v),x=d.f,E=c.f,k=0;k<g.length;k++){var A=g[k];a(p,A)||x(p,A,E(v,A))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),d=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||d[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(g,x){try{return g[x]}catch{}};i.exports=a?l:function(g){var x,E,k;return g===void 0?"Undefined":g===null?"Null":typeof(E=v(x=Object(g),d))=="string"?E:p?l(x):(k=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(Ze,ot,rt){return ot in Ze?Object.defineProperty(Ze,ot,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Ze[ot]=rt,Ze}function p(Ze,ot){var rt=Object.keys(Ze);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Ze);ot&&($t=$t.filter(function(Zt){return Object.getOwnPropertyDescriptor(Ze,Zt).enumerable})),rt.push.apply(rt,$t)}return rt}function v(Ze){for(var ot=1;ot<arguments.length;ot++){var rt=arguments[ot]!=null?arguments[ot]:{};ot%2?p(Object(rt),!0).forEach(function($t){d(Ze,$t,rt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ze,Object.getOwnPropertyDescriptors(rt)):p(Object(rt)).forEach(function($t){Object.defineProperty(Ze,$t,Object.getOwnPropertyDescriptor(rt,$t))})}return Ze}function g(Ze){if(Array.isArray(Ze))return Ze}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Ze,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ze)))){var rt=[],$t=!0,Zt=!1,Dn=void 0;try{for(var mn=Ze[Symbol.iterator](),An;!($t=(An=mn.next()).done)&&(rt.push(An.value),!(ot&&rt.length===ot));$t=!0);}catch(Jn){Zt=!0,Dn=Jn}finally{try{!$t&&mn.return!=null&&mn.return()}finally{if(Zt)throw Dn}}return rt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Ze,ot){(ot==null||ot>Ze.length)&&(ot=Ze.length);for(var rt=0,$t=new Array(ot);rt<ot;rt++)$t[rt]=Ze[rt];return $t}function k(Ze,ot){if(Ze){if(typeof Ze=="string")return E(Ze,ot);var rt=Object.prototype.toString.call(Ze).slice(8,-1);if(rt==="Object"&&Ze.constructor&&(rt=Ze.constructor.name),rt==="Map"||rt==="Set")return Array.from(Ze);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return E(Ze,ot)}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ze,ot){return g(Ze)||x(Ze,ot)||k(Ze,ot)||A()}function z(Ze){if(Array.isArray(Ze))return E(Ze)}function X(Ze){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ze))return Array.from(Ze)}function re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(Ze){return z(Ze)||X(Ze)||k(Ze)||re()}var fe=o("a352"),N=o.n(fe);function F(Ze){Ze.parentElement!==null&&Ze.parentElement.removeChild(Ze)}function Y(Ze,ot,rt){var $t=rt===0?Ze.children[0]:Ze.children[rt-1].nextSibling;Ze.insertBefore(ot,$t)}var B=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function I(Ze){var ot=Object.create(null);return function($t){var Zt=ot[$t];return Zt||(ot[$t]=Ze($t))}}var R=/-(\w)/g,q=I(function(Ze){return Ze.replace(R,function(ot,rt){return rt.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],$=["Choose","Unchoose","Sort","Filter","Clone"],oe=["Move"],J=[oe,U,$].flatMap(function(Ze){return Ze}).map(function(Ze){return"on".concat(Ze)}),_e={manage:oe,manageAndEmit:U,emit:$};function ve(Ze){return J.indexOf(Ze)!==-1}o("caad"),o("2ca0");var ke=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function W(Ze){return ke.includes(Ze)}function V(Ze){return["transition-group","TransitionGroup"].includes(Ze)}function K(Ze){return["id","class","role","style"].includes(Ze)||Ze.startsWith("data-")||Ze.startsWith("aria-")||Ze.startsWith("on")}function pe(Ze){return Ze.reduce(function(ot,rt){var $t=D(rt,2),Zt=$t[0],Dn=$t[1];return ot[Zt]=Dn,ot},{})}function he(Ze){var ot=Ze.$attrs,rt=Ze.componentData,$t=rt===void 0?{}:rt,Zt=pe(Object.entries(ot).filter(function(Dn){var mn=D(Dn,2),An=mn[0];return mn[1],K(An)}));return v(v({},Zt),$t)}function te(Ze){var ot=Ze.$attrs,rt=Ze.callBackBuilder,$t=pe(le(ot));Object.entries(rt).forEach(function(Dn){var mn=D(Dn,2),An=mn[0],Jn=mn[1];_e[An].forEach(function(Qt){$t["on".concat(Qt)]=Jn(Qt)})});var Zt="[data-draggable]".concat($t.draggable||"");return v(v({},$t),{},{draggable:Zt})}function le(Ze){return Object.entries(Ze).filter(function(ot){var rt=D(ot,2),$t=rt[0];return rt[1],!K($t)}).map(function(ot){var rt=D(ot,2),$t=rt[0],Zt=rt[1];return[q($t),Zt]}).filter(function(ot){var rt=D(ot,2),$t=rt[0];return rt[1],!ve($t)})}o("c740");function Q(Ze,ot){if(!(Ze instanceof ot))throw new TypeError("Cannot call a class as a function")}function Be(Ze,ot){for(var rt=0;rt<ot.length;rt++){var $t=ot[rt];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Ze,$t.key,$t)}}function De(Ze,ot,rt){return ot&&Be(Ze.prototype,ot),Ze}var Je=function(ot){var rt=ot.el;return rt},me=function(ot,rt){return ot.__draggable_context=rt},ee=function(ot){return ot.__draggable_context},se=function(){function Ze(ot){var rt=ot.nodes,$t=rt.header,Zt=rt.default,Dn=rt.footer,mn=ot.root,An=ot.realList;Q(this,Ze),this.defaultNodes=Zt,this.children=[].concat(ge($t),ge(Zt),ge(Dn)),this.externalComponent=mn.externalComponent,this.rootTransition=mn.transition,this.tag=mn.tag,this.realList=An}return De(Ze,[{key:"render",value:function(rt,$t){var Zt=this.tag,Dn=this.children,mn=this._isRootComponent,An=mn?{default:function(){return Dn}}:Dn;return rt(Zt,$t,An)}},{key:"updated",value:function(){var rt=this.defaultNodes,$t=this.realList;rt.forEach(function(Zt,Dn){me(Je(Zt),{element:$t[Dn],index:Dn})})}},{key:"getUnderlyingVm",value:function(rt){return ee(rt)}},{key:"getVmIndexFromDomIndex",value:function(rt,$t){var Zt=this.defaultNodes,Dn=Zt.length,mn=$t.children,An=mn.item(rt);if(An===null)return Dn;var Jn=ee(An);if(Jn)return Jn.index;if(Dn===0)return 0;var Qt=Je(Zt[0]),xn=ge(mn).findIndex(function(Cn){return Cn===Qt});return rt<xn?0:Dn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ze}(),de=o("8bbf");function ze(Ze,ot){var rt=Ze[ot];return rt?rt():[]}function $e(Ze){var ot=Ze.$slots,rt=Ze.realList,$t=Ze.getKey,Zt=rt||[],Dn=["header","footer"].map(function(Cn){return ze(ot,Cn)}),mn=D(Dn,2),An=mn[0],Jn=mn[1],Qt=ot.item;if(!Qt)throw new Error("draggable element must have an item slot");var xn=Zt.flatMap(function(Cn,tr){return Qt({element:Cn,index:tr}).map(function(vr){return vr.key=$t(Cn),vr.props=v(v({},vr.props||{}),{},{"data-draggable":!0}),vr})});if(xn.length!==Zt.length)throw new Error("Item slot must have only one child");return{header:An,footer:Jn,default:xn}}function et(Ze){var ot=V(Ze),rt=!W(Ze)&&!ot;return{transition:ot,externalComponent:rt,tag:rt?Object(de.resolveComponent)(Ze):ot?de.TransitionGroup:Ze}}function Ge(Ze){var ot=Ze.$slots,rt=Ze.tag,$t=Ze.realList,Zt=Ze.getKey,Dn=$e({$slots:ot,realList:$t,getKey:Zt}),mn=et(rt);return new se({nodes:Dn,root:mn,realList:$t})}function Qe(Ze,ot){var rt=this;Object(de.nextTick)(function(){return rt.$emit(Ze.toLowerCase(),ot)})}function Ke(Ze){var ot=this;return function(rt,$t){if(ot.realList!==null)return ot["onDrag".concat(Ze)](rt,$t)}}function xt(Ze){var ot=this,rt=Ke.call(this,Ze);return function($t,Zt){rt.call(ot,$t,Zt),Qe.call(ot,Ze,$t)}}var bt=null,yt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Wt=["update:modelValue","change"].concat(ge([].concat(ge(_e.manageAndEmit),ge(_e.emit)).map(function(Ze){return Ze.toLowerCase()}))),tn=Object(de.defineComponent)({name:"draggable",inheritAttrs:!1,props:yt,emits:Wt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,rt=this.$attrs,$t=this.tag,Zt=this.componentData,Dn=this.realList,mn=this.getKey,An=Ge({$slots:ot,tag:$t,realList:Dn,getKey:mn});this.componentStructure=An;var Jn=he({$attrs:rt,componentData:Zt});return An.render(de.h,Jn)}catch(Qt){return this.error=!0,Object(de.h)("pre",{style:{color:"red"}},Qt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&B.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var rt=this.$attrs,$t=this.$el,Zt=this.componentStructure;Zt.updated();var Dn=te({$attrs:rt,callBackBuilder:{manageAndEmit:function(Jn){return xt.call(ot,Jn)},emit:function(Jn){return Qe.bind(ot,Jn)},manage:function(Jn){return Ke.call(ot,Jn)}}}),mn=$t.nodeType===1?$t:$t.parentElement;this._sortable=new N.a(mn,Dn),this.targetDomElement=mn,mn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(rt){return rt[ot]}}},watch:{$attrs:{handler:function(ot){var rt=this._sortable;rt&&le(ot).forEach(function($t){var Zt=D($t,2),Dn=Zt[0],mn=Zt[1];rt.option(Dn,mn)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var rt=this;Object(de.nextTick)(function(){return rt.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var rt=ge(this.modelValue);ot(rt),this.$emit("update:modelValue",rt)},spliceList:function(){var ot=arguments,rt=function(Zt){return Zt.splice.apply(Zt,ge(ot))};this.alterList(rt)},updatePosition:function(ot,rt){var $t=function(Dn){return Dn.splice(rt,0,Dn.splice(ot,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(ot){var rt=ot.to,$t=ot.related,Zt=this.getUnderlyingPotencialDraggableComponent(rt);if(!Zt)return{component:Zt};var Dn=Zt.realList,mn={list:Dn,component:Zt};if(rt!==$t&&Dn){var An=Zt.getUnderlyingVm($t)||{};return v(v({},An),mn)}return mn},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),bt=ot.item},onDragAdd:function(ot){var rt=ot.item._underlying_vm_;if(rt!==void 0){F(ot.item);var $t=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList($t,0,rt);var Zt={element:rt,newIndex:$t};this.emitChanges({added:Zt})}},onDragRemove:function(ot){if(Y(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){F(ot.clone);return}var rt=this.context,$t=rt.index,Zt=rt.element;this.spliceList($t,1);var Dn={element:Zt,oldIndex:$t};this.emitChanges({removed:Dn})},onDragUpdate:function(ot){F(ot.item),Y(ot.from,ot.item,ot.oldIndex);var rt=this.context.index,$t=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(rt,$t);var Zt={element:this.context.element,oldIndex:rt,newIndex:$t};this.emitChanges({moved:Zt})},computeFutureIndex:function(ot,rt){if(!ot.element)return 0;var $t=ge(rt.to.children).filter(function(An){return An.style.display!=="none"}),Zt=$t.indexOf(rt.related),Dn=ot.component.getVmIndexFromDomIndex(Zt),mn=$t.indexOf(bt)!==-1;return mn||!rt.willInsertAfter?Dn:Dn+1},onDragMove:function(ot,rt){var $t=this.move,Zt=this.realList;if(!$t||!Zt)return!0;var Dn=this.getRelatedContextFromMoveEvent(ot),mn=this.computeFutureIndex(Dn,ot),An=v(v({},this.context),{},{futureIndex:mn}),Jn=v(v({},ot),{},{relatedContext:Dn,draggedContext:An});return $t(Jn,rt)},onDragEnd:function(){bt=null}}}),yn=tn;s.default=yn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),p=o("50c4"),v=o("fc6a"),g=o("8418"),x=o("b622"),E=o("1dde"),k=o("ae40"),A=E("slice"),D=k("slice",{ACCESSORS:!0,0:0,1:2}),z=x("species"),X=[].slice,re=Math.max;a({target:"Array",proto:!0,forced:!A||!D},{slice:function(fe,N){var F=v(this),Y=p(F.length),B=d(fe,Y),I=d(N===void 0?Y:N,Y),R,q,U;if(c(F)&&(R=F.constructor,typeof R=="function"&&(R===Array||c(R.prototype))?R=void 0:l(R)&&(R=R[z],R===null&&(R=void 0)),R===Array||R===void 0))return X.call(F,B,I);for(q=new(R===void 0?Array:R)(re(I-B,0)),U=0;B<I;B++,U++)B in F&&g(q,U,F[B]);return q.length=U,q}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(oP);var EZ=oP.exports;const PZ=B_(EZ),MZ={class:"h-full bg-gray-50"},kZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},AZ={class:"sm:flex sm:items-center"},TZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},DZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},OZ={class:"mt-6 bg-white shadow rounded-lg p-4"},NZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},IZ=["value"],BZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},RZ={key:1,class:"mt-6 overflow-x-auto pb-4"},FZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},jZ={class:"flex space-x-4 min-w-max"},zZ={class:"bg-white rounded-lg shadow overflow-hidden"},$Z={class:"flex items-center"},VZ={class:"flex items-center"},UZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},HZ={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},WZ={class:"min-h-[100px] draggable-container"},GZ={class:"note-container"},qZ={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},YZ={class:"flex items-center"},KZ={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ZZ={class:"text-sm font-medium text-gray-900 truncate"},XZ={class:"px-3 py-2"},JZ={class:"text-sm text-gray-500 line-clamp-2"},QZ={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},eX={class:"text-xs text-gray-500"},tX={class:"flex space-x-1"},nX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},rX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},iX=["onClick"],sX=["onClick"],oX=["onClick"],aX=["onClick"],lX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},uX={class:"flex items-center justify-center min-h-screen w-full"},cX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},hX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},dX=Rs({__name:"NotesView",setup(t){const e=Dm(),n=ru(),r=yf(),i=Mp(),s=Ct(!0),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),d=Ct("info"),p=Ct(null),v=Ct(window.innerWidth<768),g=()=>{v.value=window.innerWidth<768},x=Xn(()=>{const V=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",V),V}),E=[{id:Yi.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Yi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Yi.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Yi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],k=iu({search:"",date:"",accessLevel:""});function A(V){if(!V)return"Date non définie";try{const K=new Date(V);return isNaN(K.getTime())?(console.warn("[safeFormatDate] Date invalide:",V),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(K)}catch(K){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",K),"Date invalide"}}function D(V){if(!V)return null;try{const K=new Date(V);return isNaN(K.getTime())?(console.warn("[safeDate] Date invalide:",V),null):K}catch(K){return console.error("[safeDate] Erreur lors de la création de la date:",K),null}}function z(V){return A(V)}const X=Xn(()=>{let V=r.getAccessibleNotes;if(k.search){const K=k.search.toLowerCase();V=V.filter(pe=>pe.title.toLowerCase().includes(K)||pe.description.toLowerCase().includes(K))}if(k.accessLevel&&(V=V.filter(K=>K.accessLevel===k.accessLevel)),k.date){const K=new Date;K.setHours(0,0,0,0);const pe=new Date(K);pe.setDate(K.getDate()-K.getDay());const he=new Date(K.getFullYear(),K.getMonth(),1);V=V.filter(te=>{const le=D(te.createdAt);return le?k.date==="today"?le>=K:k.date==="week"?le>=pe:k.date==="month"?le>=he:!0:!1})}return V}),re=Xn(()=>V=>r.getNotesByColumn(V));function ge(V){if(V==null)return"Non défini";switch(V){case Yi.PRIVATE:return"Privé";case Yi.COMPANY:return"Entreprise";case Yi.EMPLOYEE:return"Salariés";case Yi.VISITOR:return"Visiteurs";default:return"Non défini"}}function fe(V){if(V==null)return"#9CA3AF";switch(V){case Yi.PRIVATE:return"#9CA3AF";case Yi.COMPANY:return"#EF4444";case Yi.EMPLOYEE:return"#F59E0B";case Yi.VISITOR:return"#10B981";default:return"#6B7280"}}Zs(()=>{console.log("[NotesView] Composant monté"),N().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(V=>{console.error("[NotesView] Erreur lors du chargement des données:",V),n.error("Erreur lors du chargement des données")}),document.addEventListener("click",W),window.addEventListener("resize",g)});async function N(){console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const V=await Ca.getNotes();console.log("[NotesView][loadInitialData] Notes reçues:",V.data),V.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),V.data.forEach((te,le)=>{console.log(`Note ${le+1}:`,{id:te.id,title:te.title,columnId:te.column||te.column_id,access_level:te.access_level,column:te.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const K=r.columns.map(te=>te.id),pe=V.data.filter(te=>{const le=(te.column||te.column_id||"").toString();return le===""||!K.includes(le)});if(pe.length>0){console.warn(`[NotesView][loadInitialData] ${pe.length} notes avec des colonnes invalides:`,pe),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const te of pe)try{await Ca.updateNote(te.id,{column:"2"})}catch(le){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${te.id} à la colonne À faire:`,le)}}const he=V.data.map(te=>({id:te.id,title:te.title,description:te.description,location:te.location,columnId:(te.column||te.column_id||"2").toString(),access_level:te.access_level,style:te.style||{},comments:te.comments||[],photos:te.photos||[],order:te.order||0,createdAt:te.created_at,updatedAt:te.updated_at}));r.notes.length=0,he.forEach(te=>{r.addNote(te)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const te of r.columns){const le=r.getNotesByColumn(te.id);console.log(`[NotesView][loadInitialData] Colonne ${te.title} (${te.id}): ${le.length} notes`),le.length>0&&le.forEach(Q=>{console.log(`  - Note ID=${Q.id}, Titre="${Q.title}", Niveau d'accès=${Q.accessLevel}, Colonne=${Q.columnId}`)})}}catch(V){console.error("[NotesView][loadInitialData] Erreur:",V),n.error("Erreur lors du chargement des données")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function F(){e.push({path:"/",query:{tool:"Note"}})}async function Y(V){if(!V.location){n.warning("Cette note n'est pas géolocalisée");return}try{const pe=(await Ca.getNote(V.id)).data,he=pe.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",pe),e.push({path:"/",query:{lat:Array.isArray(V.location)?V.location[0].toString():V.location.coordinates[1].toString(),lng:Array.isArray(V.location)?V.location[1].toString():V.location.coordinates[0].toString(),noteId:V.id.toString(),planId:he?he.toString():void 0}})}catch(K){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",K),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function B(V){if(!V.location){n.warning("Cette note n'est pas géolocalisée");return}let K,pe;Array.isArray(V.location)?(K=V.location[0],pe=V.location[1]):(K=V.location.coordinates[1],pe=V.location.coordinates[0]);const he=`https://www.google.com/maps/dir/?api=1&destination=${K},${pe}`;window.open(he,"_blank")}function I(V){c.value=JSON.parse(JSON.stringify(V)),d.value="info",a.value=!0}async function R(V){if(console.log("[NotesView][handleNoteSave] Note sauvegardée:",V),V&&V.id){const K=r.notes.find(pe=>pe.id===V.id);K&&(!V.comments&&K.comments&&(V.comments=K.comments),!V.photos&&K.photos&&(V.photos=K.photos))}if(a.value=!1,p.value&&c.value)try{const K={location:c.value.location,name:c.value.title,description:c.value.description,columnId:c.value.columnId,accessLevel:c.value.accessLevel,style:c.value.style,comments:c.value.comments||[],photos:c.value.photos||[],order:c.value.order,createdAt:c.value.createdAt,updatedAt:new Date().toISOString()},pe=i.elements.findIndex(he=>{var te;return he.type_forme==="Note"&&he.id===((te=c.value)==null?void 0:te.id)});pe!==-1?i.elements[pe].data=K:i.elements.push({id:c.value.id,type_forme:"Note",data:K}),await i.saveToPlan(p.value),n.success("Note sauvegardée et plan mis à jour avec succès")}catch(K){console.error("Erreur lors de la sauvegarde de la note:",K),n.error("Erreur lors de la sauvegarde de la note")}}function q(V){l.value=V,o.value=!0}async function U(){if(l.value)try{try{await Ca.deleteNote(l.value.id)}catch(V){if(V.response&&V.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw V}r.removeNote(l.value.id),n.success("Note supprimée avec succès")}catch(V){console.error("Erreur lors de la suppression de la note:",V),n.error("Erreur lors de la suppression de la note")}finally{o.value=!1,l.value=null}}async function $(V,K){console.log("[NotesView][onDragChange] Événement:",V),console.log("[NotesView][onDragChange] Colonne cible:",K);try{if(V.added){const{element:pe}=V.added;console.log("[NotesView][onDragChange] Note à déplacer:",pe);const he=typeof pe=="object"&&pe.id?pe.id:null;if(!he)throw console.error("[NotesView][onDragChange] ID de note invalide:",pe),new Error("ID de note invalide");r.moveNote(he,K);const le=re.value(K).map(Be=>Be.id);r.reorderNotes(K,le);const Q=r.getColumnById(K);n.success(`Note déplacée vers ${(Q==null?void 0:Q.title)||"une autre colonne"}`),await oe(he,{columnId:K})}if(V.moved){const pe=re.value(K),he=pe.map(te=>te.id);r.reorderNotes(K,he),n.success("Ordre des notes mis à jour");for(const[te,le]of pe.entries())await oe(le.id,{order:te})}}catch(pe){console.error("[NotesView][onDragChange] Erreur:",pe),n.error("Une erreur est survenue lors du déplacement de la note")}}async function oe(V,K){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",V,K);try{const pe=r.notes.find(le=>le.id===V);if(!pe){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",V);return}const he={...K};if(K.columnId){const le=r.getColumnById(K.columnId);le?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${le.id} (${le.title})`),he.column=le.id,delete he.columnId,delete he.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${K.columnId}`)}const te={...pe,...he,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",te),await Ca.updateNote(V,te),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(pe){throw console.error("[NotesView][updateNoteInBackend] Erreur:",pe),pe}}function J(){c.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},a.value=!0,d.value="info"}const _e=Ct(null),ve=Ct(!1);function ke(){ve.value=!ve.value}function W(V){_e.value&&!_e.value.contains(V.target)&&(ve.value=!1)}return Zs(()=>{document.addEventListener("click",W),window.addEventListener("resize",g)}),Md(()=>{document.removeEventListener("click",W),window.removeEventListener("resize",g)}),(V,K)=>{var pe,he;return Ae(),Ne("div",MZ,[C("div",kZ,[C("div",AZ,[K[6]||(K[6]=C("div",{class:"sm:flex-auto"},[C("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),C("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),C("div",TZ,[C("div",{class:"relative",ref_key:"dropdownRef",ref:_e},[C("button",{onClick:ke,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},K[5]||(K[5]=[ci(" Créer "),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),ve.value?(Ae(),Ne("div",DZ,[C("div",{class:"py-1"},[C("button",{onClick:J,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),C("button",{onClick:F,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Jt("",!0)],512)])]),C("div",OZ,[C("div",NZ,[C("div",null,[K[7]||(K[7]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),er(C("input",{type:"text",id:"search","onUpdate:modelValue":K[0]||(K[0]=te=>k.search=te),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Li,k.search]])]),C("div",null,[K[9]||(K[9]=C("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),er(C("select",{id:"date","onUpdate:modelValue":K[1]||(K[1]=te=>k.date=te),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},K[8]||(K[8]=[C("option",{value:""},"Toutes les dates",-1),C("option",{value:"today"},"Aujourd'hui",-1),C("option",{value:"week"},"Cette semaine",-1),C("option",{value:"month"},"Ce mois",-1)]),512),[[us,k.date]])]),C("div",null,[K[11]||(K[11]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),er(C("select",{id:"accessLevel","onUpdate:modelValue":K[2]||(K[2]=te=>k.accessLevel=te),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[K[10]||(K[10]=C("option",{value:""},"Tous les niveaux",-1)),(Ae(),Ne(wn,null,Qn(E,te=>C("option",{key:te.id,value:te.id},Et(te.title),9,IZ)),64))],512),[[us,k.accessLevel]])])])]),s.value?(Ae(),Ne("div",BZ,K[12]||(K[12]=[C("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),C("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ae(),Ne("div",RZ,[X.value.length===0&&x.value.length===0?(Ae(),Ne("div",FZ,K[13]||(K[13]=[C("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouvée",-1)]))):Jt("",!0),C("div",jZ,[(Ae(!0),Ne(wn,null,Qn(x.value,te=>(Ae(),Ne("div",{key:te.id,class:"column-wrapper w-80 flex-shrink-0"},[C("div",zZ,[C("div",{class:"p-3 flex items-center justify-between no-select",style:Nl({backgroundColor:te.color+"20",borderBottom:"2px solid "+te.color})},[C("div",$Z,[C("h3",{class:"text-sm font-semibold",style:Nl({color:te.color})},Et(te.title),5)]),C("div",VZ,[C("span",UZ,Et(re.value(te.id).length),1)])],4),C("div",HZ,[C("div",WZ,[mi(qn(PZ),{list:re.value(te.id),class:"space-y-2",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:le=>$(le,te.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:Wu(({element:le})=>[C("div",GZ,[C("div",qZ,[C("div",{class:gi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[C("div",YZ,[v.value?Jt("",!0):(Ae(),Ne("svg",KZ,K[14]||(K[14]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),C("h4",ZZ,Et(le.title),1)]),C("div",null,[C("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Nl({backgroundColor:fe(le.accessLevel)+"20",color:fe(le.accessLevel)})},Et(ge(le.accessLevel)||"Non défini"),5)])],2),C("div",XZ,[C("p",JZ,Et(le.description||"Aucune description"),1)]),C("div",QZ,[C("span",eX,Et(le.updatedAt?z(le.updatedAt):le.createdAt?z(le.createdAt):"Date non définie"),1),C("div",tX,[le.location?(Ae(),Ne("span",nX,K[15]||(K[15]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ae(),Ne("span",rX,K[16]||(K[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),le.location?(Ae(),Ne(wn,{key:2},[C("button",{onClick:Q=>B(le),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},K[17]||(K[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,iX),C("button",{onClick:Q=>Y(le),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},K[18]||(K[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,sX)],64)):Jt("",!0),C("button",{onClick:Q=>I(le),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},K[19]||(K[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,oX),C("button",{onClick:Q=>q(le),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},K[20]||(K[20]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,aX)])])])])]),"empty-content":Wu(()=>K[21]||(K[21]=[C("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])]))]),o.value?(Ae(),Ne("div",lX,[C("div",uX,[K[23]||(K[23]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",cX,[K[22]||(K[22]=Lu('<div class="p-4 md:p-6" data-v-0158f3fe><div class="flex items-start" data-v-0158f3fe><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-0158f3fe><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-0158f3fe><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-0158f3fe></path></svg></div><div class="ml-4 flex-1" data-v-0158f3fe><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-0158f3fe> Supprimer la note </h3><div class="mt-2" data-v-0158f3fe><p class="text-sm text-gray-500" data-v-0158f3fe> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),C("div",hX,[C("button",{onClick:U,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),C("button",{onClick:K[3]||(K[3]=te=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Jt("",!0),a.value?(Ae(),da(IE,{key:1,note:c.value,"is-new-note":!((pe=c.value)!=null&&pe.id),location:(he=c.value)==null?void 0:he.location,onClose:K[4]||(K[4]=te=>a.value=!1),onSave:R},null,8,["note","is-new-note","location"])):Jt("",!0)])}}}),fX=nh(dX,[["__scopeId","data-v-0158f3fe"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Im(t){return t+.5|0}const hd=(t,e,n)=>Math.max(Math.min(t,n),e);function Cg(t){return hd(Im(t*2.55),0,255)}function yd(t){return hd(Im(t*255),0,255)}function Sh(t){return hd(Im(t/2.55)/100,0,1)}function Y5(t){return hd(Im(t*100),0,100)}const $u={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rb=[..."0123456789ABCDEF"],pX=t=>Rb[t&15],gX=t=>Rb[(t&240)>>4]+Rb[t&15],T0=t=>(t&240)>>4===(t&15),mX=t=>T0(t.r)&&T0(t.g)&&T0(t.b)&&T0(t.a);function vX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&$u[t[1]]*17,g:255&$u[t[2]]*17,b:255&$u[t[3]]*17,a:e===5?$u[t[4]]*17:255}:(e===7||e===9)&&(n={r:$u[t[1]]<<4|$u[t[2]],g:$u[t[3]]<<4|$u[t[4]],b:$u[t[5]]<<4|$u[t[6]],a:e===9?$u[t[7]]<<4|$u[t[8]]:255})),n}const yX=(t,e)=>t<255?e(t):"";function bX(t){var e=mX(t)?pX:gX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+yX(t.a,e):void 0}const _X=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function wX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function xX(t,e,n){const r=yP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function LX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function G_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=LX(n,r,i,d,s),l=l*60+.5),[l|0,c||0,a]}function q_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(yd)}function Y_(t,e,n){return q_(yP,t,e,n)}function SX(t,e,n){return q_(xX,t,e,n)}function CX(t,e,n){return q_(wX,t,e,n)}function bP(t){return(t%360+360)%360}function EX(t){const e=_X.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Cg(+e[5]):yd(+e[5]));const i=bP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=SX(i,s,o):e[1]==="hsv"?r=CX(i,s,o):r=Y_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function PX(t,e){var n=G_(t);n[0]=bP(n[0]+e),n=Y_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function MX(t){if(!t)return;const e=G_(t),n=e[0],r=Y5(e[1]),i=Y5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Sh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const K5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Z5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kX(){const t={},e=Object.keys(Z5),n=Object.keys(K5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,K5[s]);s=parseInt(Z5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let D0;function AX(t){D0||(D0=kX(),D0.transparent=[0,0,0,0]);const e=D0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const TX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function DX(t){const e=TX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Cg(o):hd(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Cg(r):hd(r,0,255)),i=255&(e[4]?Cg(i):hd(i,0,255)),s=255&(e[6]?Cg(s):hd(s,0,255)),{r,g:i,b:s,a:n}}}function OX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Sh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const y2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Xf=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function NX(t,e,n){const r=Xf(Sh(t.r)),i=Xf(Sh(t.g)),s=Xf(Sh(t.b));return{r:yd(y2(r+n*(Xf(Sh(e.r))-r))),g:yd(y2(i+n*(Xf(Sh(e.g))-i))),b:yd(y2(s+n*(Xf(Sh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function O0(t,e,n){if(t){let r=G_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Y_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function _P(t,e){return t&&Object.assign(e||{},t)}function X5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=yd(t[3]))):(e=_P(t,{r:0,g:0,b:0,a:1}),e.a=yd(e.a)),e}function IX(t){return t.charAt(0)==="r"?DX(t):EX(t)}class vm{constructor(e){if(e instanceof vm)return e;const n=typeof e;let r;n==="object"?r=X5(e):n==="string"&&(r=vX(e)||AX(e)||IX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_P(this._rgb);return e&&(e.a=Sh(e.a)),e}set rgb(e){this._rgb=X5(e)}rgbString(){return this._valid?OX(this._rgb):void 0}hexString(){return this._valid?bX(this._rgb):void 0}hslString(){return this._valid?MX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=NX(this._rgb,e._rgb,n)),this}clone(){return new vm(this.rgb)}alpha(e){return this._rgb.a=yd(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Im(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return O0(this._rgb,2,e),this}darken(e){return O0(this._rgb,2,-e),this}saturate(e){return O0(this._rgb,1,e),this}desaturate(e){return O0(this._rgb,1,-e),this}rotate(e){return PX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function _h(){}const BX=(()=>{let t=0;return()=>t++})();function Wi(t){return t===null||typeof t>"u"}function Ks(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ko(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _u(t,e){return ko(t)?t:e}function ai(t,e){return typeof t>"u"?e:t}const RX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,wP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ks(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ls(t,e,n,r){let i,s,o;if(Ks(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Oi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ey(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ty(t){if(Ks(t))return t.map(ty);if(Oi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ty(t[n[i]]);return e}return t}function xP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function FX(t,e,n,r){if(!xP(t))return;const i=e[t],s=n[t];Oi(i)&&Oi(s)?ym(i,s,r):e[t]=ty(s)}function ym(t,e,n){const r=Ks(e)?e:[e],i=r.length;if(!Oi(t))return t;n=n||{};const s=n.merger||FX;let o;for(let a=0;a<i;++a){if(o=r[a],!Oi(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],t,o,n)}return t}function Zg(t,e){return ym(t,e,{merger:jX})}function jX(t,e,n){if(!xP(t))return;const r=e[t],i=n[t];Oi(r)&&Oi(i)?Zg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ty(i))}const J5={"":t=>t,x:t=>t.x,y:t=>t.y};function zX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function $X(t){const e=zX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Sd(t,e){return(J5[e]||(J5[e]=$X(e)))(t)}function K_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const bm=t=>typeof t<"u",Cd=t=>typeof t=="function",Q5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function VX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Bs=Math.PI,Is=2*Bs,UX=Is+Bs,ny=Number.POSITIVE_INFINITY,HX=Bs/180,Go=Bs/2,qd=Bs/4,e3=Bs*2/3,dd=Math.log10,Jc=Math.sign;function Xg(t,e,n){return Math.abs(t-e)<n}function t3(t){const e=Math.round(t);t=Xg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(dd(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function WX(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Ap(t){return!isNaN(parseFloat(t))&&isFinite(t)}function GX(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function LP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function bc(t){return t*(Bs/180)}function Z_(t){return t*(180/Bs)}function n3(t){if(!ko(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function SP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Bs&&(s+=Is),{angle:s,distance:i}}function Fb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qX(t,e){return(t-e+UX)%Is-Bs}function wu(t){return(t%Is+Is)%Is}function _m(t,e,n,r){const i=wu(t),s=wu(e),o=wu(n),a=wu(s-i),l=wu(o-i),c=wu(i-s),d=wu(i-o);return i===s||i===o||r&&s===o||a>l&&c<d}function Pa(t,e,n){return Math.max(e,Math.min(n,t))}function YX(t){return Pa(t,-32768,32767)}function Ah(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function X_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Th=(t,e,n,r)=>X_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),KX=(t,e,n)=>X_(t,n,r=>t[r][e]>=n);function ZX(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const CP=["push","pop","shift","splice","unshift"];function XX(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),CP.forEach(n=>{const r="_onData"+K_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function r3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(CP.forEach(s=>{delete t[s]}),delete t._chartjs)}function EP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const PP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function MP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,PP.call(window,()=>{r=!1,t.apply(e,n)}))}}function JX(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const J_=t=>t==="start"?"left":t==="end"?"right":"center",cl=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,QX=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:d,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Pa(Math.min(Th(a,l,c).lo,n?r:Th(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Pa(Math.max(Th(a,o.axis,d,!0).hi+1,n?0:Th(e,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function AP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const N0=t=>t===0||t===1,i3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Is/n)),s3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Is/n)+1,Jg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Go)+1,easeOutSine:t=>Math.sin(t*Go),easeInOutSine:t=>-.5*(Math.cos(Bs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>N0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>N0(t)?t:i3(t,.075,.3),easeOutElastic:t=>N0(t)?t:s3(t,.075,.3),easeInOutElastic(t){return N0(t)?t:t<.5?.5*i3(t*2,.1125,.45):.5+.5*s3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Jg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Jg.easeInBounce(t*2)*.5:Jg.easeOutBounce(t*2-1)*.5+.5};function Q_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function o3(t){return Q_(t)?t:new vm(t)}function b2(t){return Q_(t)?t:new vm(t).saturate(.5).darken(.1).hexString()}const eJ=["x","y","borderWidth","radius","tension"],tJ=["color","borderColor","backgroundColor"];function nJ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:tJ},numbers:{type:"number",properties:eJ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function rJ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const a3=new Map;function iJ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=a3.get(n);return r||(r=new Intl.NumberFormat(t,e),a3.set(n,r)),r}function Bm(t,e,n){return iJ(e,n).format(t)}const TP={values(t){return Ks(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=sJ(t,n)}const o=dd(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Bm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(dd(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?TP.numeric.call(this,t,e,n):""}};function sJ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Wy={formatters:TP};function oJ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const bf=Object.create(null),jb=Object.create(null);function Qg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function _2(t,e,n){return typeof e=="string"?ym(Qg(t,e),n):ym(Qg(t,""),e)}class aJ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>b2(i.backgroundColor),this.hoverBorderColor=(r,i)=>b2(i.borderColor),this.hoverColor=(r,i)=>b2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return _2(this,e,n)}get(e){return Qg(this,e)}describe(e,n){return _2(jb,e,n)}override(e,n){return _2(bf,e,n)}route(e,n,r,i){const s=Qg(this,e),o=Qg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Oi(l)?Object.assign({},c,l):ai(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ao=new aJ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nJ,rJ,oJ]);function lJ(t){return!t||Wi(t.size)||Wi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ry(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function uJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,d,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Ks(p))o=ry(t,i,s,o,p);else if(Ks(p))for(c=0,d=p.length;c<d;c++)v=p[c],v!=null&&!Ks(v)&&(o=ry(t,i,s,o,v));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete i[s[l]];s.splice(0,g)}return o}function Yd(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function l3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function zb(t,e,n,r){DP(t,e,n,r,null)}function DP(t,e,n,r,i){let s,o,a,l,c,d,p,v;const g=e.pointStyle,x=e.rotation,E=e.radius;let k=(x||0)*HX;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,E,0,0,Is):t.arc(n,r,E,0,Is),t.closePath();break;case"triangle":d=i?i/2:E,t.moveTo(n+Math.sin(k)*d,r-Math.cos(k)*E),k+=e3,t.lineTo(n+Math.sin(k)*d,r-Math.cos(k)*E),k+=e3,t.lineTo(n+Math.sin(k)*d,r-Math.cos(k)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(k+qd)*l,p=Math.cos(k+qd)*(i?i/2-c:l),a=Math.sin(k+qd)*l,v=Math.sin(k+qd)*(i?i/2-c:l),t.arc(n-p,r-a,c,k-Bs,k-Go),t.arc(n+v,r-o,c,k-Go,k),t.arc(n+p,r+a,c,k,k+Go),t.arc(n-v,r+o,c,k+Go,k+Bs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,d=i?i/2:l,t.rect(n-d,r-l,2*d,2*l);break}k+=qd;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":k+=qd;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),k+=qd,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Dh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Gy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qy(t){t.restore()}function cJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function hJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function dJ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Wi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function fJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function pJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function _f(t,e,n,r,i,s={}){const o=Ks(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,dJ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&pJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Wi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),fJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function wm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Bs,Bs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Bs,Go,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Go,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Go,!0),t.lineTo(n+o.topLeft,r)}const gJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vJ(t,e){const n=(""+t).match(gJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const yJ=t=>+t||0;function ew(t,e){const n={},r=Oi(e),i=r?Object.keys(e):e,s=Oi(t)?r?o=>ai(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=yJ(s(o));return n}function OP(t){return ew(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ff(t){return ew(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yl(t){const e=OP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ga(t,e){t=t||{},e=e||Ao.font;let n=ai(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ai(t.style,e.style);r&&!(""+r).match(mJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ai(t.family,e.family),lineHeight:vJ(ai(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ai(t.weight,e.weight),string:""};return i.string=lJ(i),i}function Eg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function bJ(t,e,n){const{min:r,max:i}=t,s=wP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function kd(t,e){return Object.assign(Object.create(t),e)}function tw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=RP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>tw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return IP(a,l,()=>PJ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return c3(a).includes(l)},ownKeys(a){return c3(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Tp(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:NP(t,r),setContext:s=>Tp(t,s,n,r),override:s=>Tp(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return IP(s,o,()=>wJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function NP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Cd(n)?n:()=>n,isIndexable:Cd(r)?r:()=>r}}const _J=(t,e)=>t?t+K_(e):e,nw=(t,e)=>Oi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function IP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function wJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Cd(a)&&o.isScriptable(e)&&(a=xJ(e,a,t,n)),Ks(a)&&a.length&&(a=LJ(e,a,t,o.isIndexable)),nw(e,a)&&(a=Tp(a,i,s&&s[e],o)),a}function xJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),nw(t,l)&&(l=rw(i._scopes,i,t,l)),l}function LJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Oi(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const p=rw(c,i,t,d);e.push(Tp(p,s,o&&o[t],a))}}return e}function BP(t,e,n){return Cd(t)?t(e,n):t}const SJ=(t,e)=>t===!0?e:typeof t=="string"?Sd(e,t):void 0;function CJ(t,e,n,r,i){for(const s of e){const o=SJ(n,s);if(o){t.add(o);const a=BP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function rw(t,e,n,r){const i=e._rootScopes,s=BP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=u3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=u3(a,o,s,l,r),l===null)?!1:tw(Array.from(a),[""],i,s,()=>EJ(e,n,r))}function u3(t,e,n,r,i){for(;n;)n=CJ(t,e,n,r,i);return n}function EJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Ks(i)&&Oi(n)?n:i||{}}function PJ(t,e,n,r){let i;for(const s of e)if(i=RP(_J(s,t),n),typeof i<"u")return nw(t,i)?rw(n,r,t,i):i}function RP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function c3(t){let e=t._keys;return e||(e=t._keys=MJ(t._scopes)),e}function MJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function FP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=e[c],o[a]={r:i.parse(Sd(d,s),c)};return o}const kJ=Number.EPSILON||1e-14,Dp=(t,e)=>e<t.length&&!t[e].skip&&t[e],jP=t=>t==="x"?"y":"x";function AJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Fb(s,i),l=Fb(o,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const p=r*c,v=r*d;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function TJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Dp(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Dp(t,d+1),!(!l||!c)){if(Xg(e[d],0,kJ)){n[d]=n[d+1]=0;continue}i=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*e[d],n[d+1]=s*o*e[d])}}function DJ(t,e,n="x"){const r=jP(n),i=t.length;let s,o,a,l=Dp(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Dp(t,c+1),!a)continue;const d=a[n],p=a[r];o&&(s=(d-o[n])/3,a[`cp1${n}`]=d-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${r}`]=p+s*e[c])}}function OJ(t,e="x"){const n=jP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Dp(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Dp(t,o+1),!!l){if(c){const d=c[e]-l[e];i[o]=d!==0?(c[n]-l[n])/d:0}s[o]=a?c?Jc(i[o-1])!==Jc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}TJ(t,i,s),DJ(t,s,e)}function I0(t,e,n){return Math.max(Math.min(t,n),e)}function NJ(t,e){let n,r,i,s,o,a=Dh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Dh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=I0(i.cp1x,e.left,e.right),i.cp1y=I0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=I0(i.cp2x,e.left,e.right),i.cp2y=I0(i.cp2y,e.top,e.bottom)))}function IJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")OJ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=AJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&NJ(t,n)}function iw(){return typeof window<"u"&&typeof document<"u"}function sw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function iy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Yy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function BJ(t,e){return Yy(t).getPropertyValue(e)}const RJ=["top","right","bottom","left"];function pf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=RJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const FJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function jJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(FJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Qd(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Yy(n),s=i.boxSizing==="border-box",o=pf(i,"padding"),a=pf(i,"border","width"),{x:l,y:c,box:d}=jJ(t,n),p=o.left+(d&&a.left),v=o.top+(d&&a.top);let{width:g,height:x}=e;return s&&(g-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/g*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function zJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=sw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Yy(s),l=pf(a,"border","width"),c=pf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=iy(a.maxWidth,s,"clientWidth"),i=iy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||ny,maxHeight:i||ny}}const B0=t=>Math.round(t*10)/10;function $J(t,e,n,r){const i=Yy(t),s=pf(i,"margin"),o=iy(i.maxWidth,t,"clientWidth")||ny,a=iy(i.maxHeight,t,"clientHeight")||ny,l=zJ(t,e,n);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const v=pf(i,"border","width"),g=pf(i,"padding");c-=g.width+v.width,d-=g.height+v.height}return c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=B0(Math.min(c,o,l.maxWidth)),d=B0(Math.min(d,a,l.maxHeight)),c&&!d&&(d=B0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=B0(Math.floor(d*r))),{width:c,height:d}}function h3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const VJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};iw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function d3(t,e){const n=BJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ef(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function UJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function HJ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ef(t,i,n),a=ef(i,s,n),l=ef(s,e,n),c=ef(o,a,n),d=ef(a,l,n);return ef(c,d,n)}const WJ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},GJ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function _p(t,e,n){return t?WJ(e,n):GJ()}function zP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function $P(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function VP(t){return t==="angle"?{between:_m,compare:qX,normalize:wu}:{between:Ah,compare:(e,n)=>e-n,normalize:e=>e}}function f3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function qJ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=VP(r),l=e.length;let{start:c,end:d,loop:p}=t,v,g;if(p){for(c+=l,d+=l,v=0,g=l;v<g&&o(a(e[c%l][r]),i,s);++v)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:p,style:t.style}}function UP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=VP(r),{start:d,end:p,loop:v,style:g}=qJ(t,e,n),x=[];let E=!1,k=null,A,D,z;const X=()=>l(i,z,A)&&a(i,z)!==0,re=()=>a(s,A)===0||l(s,z,A),ge=()=>E||X(),fe=()=>!E||re();for(let N=d,F=d;N<=p;++N)D=e[N%o],!D.skip&&(A=c(D[r]),A!==z&&(E=l(A,i,s),k===null&&ge()&&(k=a(A,i)===0?N:F),k!==null&&fe()&&(x.push(f3({start:k,end:N,loop:v,count:o,style:g})),k=null),F=N,z=A));return k!==null&&x.push(f3({start:k,end:p,loop:v,count:o,style:g})),x}function HP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=UP(r[i],t.points,e);s.length&&n.push(...s)}return n}function YJ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function KJ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function ZJ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=YJ(n,i,s,r);if(r===!0)return p3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return p3(t,KJ(n,o,l,c),n,e)}function p3(t,e,n,r){return!r||!r.setContext||!n?e:XJ(t,e,n,r)}function XJ(t,e,n,r){const i=t._chart.getContext(),s=g3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=s,p=e[0].start,v=p;function g(x,E,k,A){const D=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=D;for(;n[E%l].skip;)E+=D;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:k,style:A}),d=A,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],k;for(v=p+1;v<=x.end;v++){const A=n[v%l];k=g3(r.setContext(kd(i,{type:"segment",p0:E,p1:A,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),JJ(k,d)&&g(p,v-1,x.loop,d),E=A,d=k}p<v-1&&g(p,v-1,x.loop,d)}return c}function g3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function JJ(t,e){if(!e)return!1;const n=[],r=function(i,s){return Q_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class QJ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wh=new QJ;const m3="transparent",eQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=o3(t||m3),i=r.valid&&o3(e||m3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class tQ{constructor(e,n,r,i){const s=n[r];i=Eg([e.to,i,s,e.from]);const o=Eg([e.from,s,i]);this._active=!0,this._fn=e.fn||eQ[e.type||typeof o],this._easing=Jg[e.easing]||Jg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Eg([e.to,n,i,e.from]),this._from=Eg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class WP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Oi(e))return;const n=Object.keys(Ao.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Oi(s))return;const o={};for(const a of n)o[a]=s[a];(Ks(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=rQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&nQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const d=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,d,a);continue}else p.cancel();if(!v||!v.duration){e[c]=d;continue}s[c]=p=new tQ(v,e,c,d),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wh.add(this._chart,r),!0}}function nQ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function rQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function v3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function iQ(t,e,n){if(n===!1)return!1;const r=v3(t,n),i=v3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function sQ(t){let e,n,r,i;return Oi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function GP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function y3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],ko(c)&&(s||e===0||Jc(e)===Jc(c))&&(e+=c)}return e}}function oQ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function b3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function aQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function lQ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function uQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function _3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function w3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,d=aQ(s,o,r),p=e.length;let v;for(let g=0;g<p;++g){const x=e[g],{[l]:E,[c]:k}=x,A=x._stacks||(x._stacks={});v=A[c]=uQ(i,d,E),v[a]=k,v._top=_3(v,o,!0,r.type),v._bottom=_3(v,o,!1,r.type);const D=v._visualValues||(v._visualValues={});D[a]=k}}function w2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function cQ(t,e){return kd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function hQ(t,e,n){return kd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ag(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const x2=t=>t==="reset"||t==="none",x3=(t,e)=>e?t:Object.assign({},t),dQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:GP(n,!0),values:null};class wc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=b3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ag(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,g,x)=>p==="x"?v:p==="r"?x:g,s=n.xAxisID=ai(r.xAxisID,w2(e,"x")),o=n.yAxisID=ai(r.yAxisID,w2(e,"y")),a=n.rAxisID=ai(r.rAxisID,w2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),d=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&r3(this._data,this),e._stacked&&ag(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Oi(n))this._data=oQ(n);else if(r!==n){if(r){r3(r,this);const i=this._cachedMeta;ag(i),i._parsed=[]}n&&Object.isExtensible(n)&&XX(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=b3(n.vScale,n),n.stack!==r.stack&&(i=!0,ag(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&w3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Ks(i[e])?v=this.parseArrayData(r,i,e,n):Oi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const g=()=>p[a]===null||c&&p[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=p=v[d],l&&(g()&&(l=!1),c=p);r._sorted=l}o&&w3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),d=s===o,p=new Array(i);let v,g,x;for(v=0,g=i;v<g;++v)x=v+r,p[v]={[a]:d||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,d,p;for(l=0,c=i;l<c;++l)d=l+r,p=n[d],a[l]={x:s.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,p,v,g;for(d=0,p=i;d<p;++d)v=d+r,g=n[v],c[d]={x:s.parse(Sd(g,a),v),y:o.parse(Sd(g,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:GP(i,!0),values:n._stacks[e.axis]._visualValues};return y3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=y3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=dQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=lQ(a);let v,g;function x(){g=i[v];const E=g[a.axis];return!ko(g[e.axis])||d>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,g,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],ko(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=sQ(ai(this.options.clip,iQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const p=i[d];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=hQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=cQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&bm(r);if(a)return x3(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),d),g=Object.keys(Ao.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,g,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(x3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),v=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(v,this.getContext(e,r,n))}const c=new WP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||x2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){x2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!x2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ag(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ye(wc,"defaults",{}),Ye(wc,"datasetElementType",null),Ye(wc,"dataElementType",null);function fQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=EP(r.sort((i,s)=>i-s))}return t._cache.$bar}function pQ(t){const e=t.iScale,n=fQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(bm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function gQ(t,e,n,r){const i=n.barThickness;let s,o;return Wi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function mQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function vQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function qP(t,e,n,r){return Ks(t)?vQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function L3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,d,p,v;for(c=n,d=n+r;c<d;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(qP(v,p,s,c));return l}function L2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function yQ(t,e,n){return t!==0?Jc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function bQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function _Q(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:d}=bQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[S3(d,o,a,l)]=!0,i=c)),s[S3(i,o,a,l)]=!0,t.borderSkipped=s}function S3(t,e,n,r){return r?(t=wQ(t,e,n),t=C3(t,n,e)):t=C3(t,e,n),t}function wQ(t,e,n){return t===e?n:t===n?e:t}function C3(t,e,n){return t==="start"?e:t==="end"?n:t}function xQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class fv extends wc{parsePrimitiveData(e,n,r,i){return L3(e,n,r,i)}parseArrayData(e,n,r,i){return L3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,d=o.axis==="x"?a:l,p=[];let v,g,x,E;for(v=r,g=r+i;v<g;++v)E=n[v],x={},x[s.axis]=s.parse(Sd(E,c),v),p.push(qP(Sd(E,d),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=L2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const x=this.getParsed(g),E=s||Wi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),k=this._calculateBarIndexPixels(g,d),A=(x._stacks||{})[a.axis],D={horizontal:c,base:E.base,enableBorderRadius:!A||L2(x._custom)||o===A._top||o===A._bottom,x:c?E.head:k.center,y:c?k.center:E.head,height:c?k.size:Math.abs(E.size),width:c?Math.abs(E.size):k.size};v&&(D.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const z=D.options||e[g].options;_Q(D,z,A,o),xQ(D,z,d.ratio),this.updateElement(e[g],g,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),d=c&&c[l.vScale.axis];if(Wi(d)||isNaN(d))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||pQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,d=L2(c);let p=l[n.axis],v=0,g=r?this.applyStack(n,l,r):p,x,E;g!==p&&(v=g-p,g=p),d&&(p=c.barStart,g=c.barEnd-c.barStart,p!==0&&Jc(p)!==Jc(c.barEnd)&&(v=0),v+=p);const k=!Wi(s)&&!d?s:v;let A=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+g):x=A,E=x-A,Math.abs(E)<o){E=yQ(E,n,a)*o,p===a&&(A-=E/2);const D=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),X=Math.min(D,z),re=Math.max(D,z);A=Math.max(Math.min(A,re),X),x=A+E,r&&!d&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(A))}if(A===n.getPixelForValue(a)){const D=Jc(E)*n.getLineWidthForValue(a)/2;A+=D,E-=D}return{size:E,base:A,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ai(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?mQ(e,n,i,c):gQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Ye(fv,"id","bar"),Ye(fv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ye(fv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class pv extends wc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ai(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ai(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const g=e[v],x=!s&&this.getParsed(v),E={},k=E[d]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[d]),A=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(k)||isNaN(A),c&&(E.options=l||this.resolveDataElementOptions(v,g.active?"active":i),s&&(E.options.radius=0)),this.updateElement(g,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ai(r&&r._custom,s),i}}Ye(pv,"id","bubble"),Ye(pv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ye(pv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function LQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<Is){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),p=Math.cos(l),v=Math.sin(l),g=(z,X,re)=>_m(z,a,l,!0)?1:Math.max(X,X*n,re,re*n),x=(z,X,re)=>_m(z,a,l,!0)?-1:Math.min(X,X*n,re,re*n),E=g(0,c,p),k=g(Go,d,v),A=x(Bs,c,p),D=x(Bs+Go,d,v);r=(E-A)/2,i=(k-D)/2,s=-(E+A)/2,o=-(k+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class of extends wc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Oi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Sd(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return bc(this.options.rotation-90)}_getCircumference(){return bc(this.options.circumference)}_getRotationExtents(){let e=Is,n=-Is;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(RX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:g,offsetX:x,offsetY:E}=LQ(p,d,l),k=(r.width-o)/v,A=(r.height-o)/g,D=Math.max(Math.min(k,A)/2,0),z=wP(this.options.radius,D),X=Math.max(z*l,0),re=(z-X)/this._getVisibleDatasetWeightTotal();this.offsetX=x*z,this.offsetY=E*z,i.total=this.calculateTotal(),this.outerRadius=z-re*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-re*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Is)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,g=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(n,i);let A=this._getRotation(),D;for(D=0;D<n;++D)A+=this._circumference(D,s);for(D=n;D<n+r;++D){const z=this._circumference(D,s),X=e[D],re={x:d+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+z,circumference:z,outerRadius:x,innerRadius:g};k&&(re.options=E||this.resolveDataElementOptions(D,X.active?"active":i)),A+=z,this.updateElement(X,D,re,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Is*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Bm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ai(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ye(of,"id","doughnut"),Ye(of,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ye(of,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ye(of,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class gv extends wc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kP(n,i,o);this._drawStart=a,this._drawCount=l,AP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,g=a.axis,{spanGaps:x,segment:E}=this.options,k=Ap(x)?x:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none",D=n+r,z=e.length;let X=n>0&&this.getParsed(n-1);for(let re=0;re<z;++re){const ge=e[re],fe=A?ge:{};if(re<n||re>=D){fe.skip=!0;continue}const N=this.getParsed(re),F=Wi(N[g]),Y=fe[v]=o.getPixelForValue(N[v],re),B=fe[g]=s||F?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[g],re);fe.skip=isNaN(Y)||isNaN(B)||F,fe.stop=re>0&&Math.abs(N[v]-X[v])>k,E&&(fe.parsed=N,fe.raw=c.data[re]),p&&(fe.options=d||this.resolveDataElementOptions(re,ge.active?"active":i)),A||this.updateElement(ge,re,fe,i),X=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ye(gv,"id","line"),Ye(gv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ye(gv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class em extends wc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Bm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return FP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Bs;let g=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)g+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const k=e[x];let A=g,D=g+this._computeAngle(x,i,E),z=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;g=D,s&&(l.animateScale&&(z=0),l.animateRotate&&(A=D=v));const X={x:d,y:p,innerRadius:0,outerRadius:z,startAngle:A,endAngle:D,options:this.resolveDataElementOptions(x,k.active?"active":i)};this.updateElement(k,x,X,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?bc(this.resolveDataElementOptions(e,n).angle||r):0}}Ye(em,"id","polarArea"),Ye(em,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ye(em,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $b extends of{}Ye($b,"id","pie"),Ye($b,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class mv extends wc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return FP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:d.x,v=o?s.yCenter:d.y,g={x:p,y:v,angle:d.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,g,i)}}}Ye(mv,"id","radar"),Ye(mv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ye(mv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class vv extends wc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=kP(n,r,i);if(this._drawStart=s,this._drawCount=o,AP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),v=this.includeOptions(i,p),g=o.axis,x=a.axis,{spanGaps:E,segment:k}=this.options,A=Ap(E)?E:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let z=n>0&&this.getParsed(n-1);for(let X=n;X<n+r;++X){const re=e[X],ge=this.getParsed(X),fe=D?re:{},N=Wi(ge[x]),F=fe[g]=o.getPixelForValue(ge[g],X),Y=fe[x]=s||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ge,l):ge[x],X);fe.skip=isNaN(F)||isNaN(Y)||N,fe.stop=X>0&&Math.abs(ge[g]-z[g])>A,k&&(fe.parsed=ge,fe.raw=c.data[X]),v&&(fe.options=p||this.resolveDataElementOptions(X,re.active?"active":i)),D||this.updateElement(re,X,fe,i),z=ge}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ye(vv,"id","scatter"),Ye(vv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ye(vv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var SQ=Object.freeze({__proto__:null,BarController:fv,BubbleController:pv,DoughnutController:of,LineController:gv,PieController:$b,PolarAreaController:em,RadarController:mv,ScatterController:vv});function Kd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ow{constructor(e){Ye(this,"options");this.options=e||{}}static override(e){Object.assign(ow.prototype,e)}init(){}formats(){return Kd()}parse(){return Kd()}format(){return Kd()}add(){return Kd()}diff(){return Kd()}startOf(){return Kd()}endOf(){return Kd()}}var YP={_date:ow};function CQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?KX:Th;if(r){if(i._sharedOptions){const c=s[0],d=typeof c.getRange=="function"&&c.getRange(e);if(d){const p=l(s,e,n-d),v=l(s,e,n+d);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Ky(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:d}=s[a],{lo:p,hi:v}=CQ(s[a],e,o,i);for(let g=p;g<=v;++g){const x=d[g];x.skip||r(x,c,g)}}}function EQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function S2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Ky(t,n,e,function(a,l,c){!i&&!Dh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function PQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:p}=SP(o,{x:e.x,y:e.y});_m(p,c,d)&&i.push({element:o,datasetIndex:a,index:l})}return Ky(t,n,e,s),i}function MQ(t,e,n,r,i,s){let o=[];const a=EQ(n);let l=Number.POSITIVE_INFINITY;function c(d,p,v){const g=d.inRange(e.x,e.y,i);if(r&&!g)return;const x=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!g)return;const k=a(e,x);k<l?(o=[{element:d,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:d,datasetIndex:p,index:v})}return Ky(t,n,e,c),o}function C2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?PQ(t,e,n,i):MQ(t,e,n,r,i,s)}function E3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ky(t,n,e,(l,c,d)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var kQ={modes:{index(t,e,n,r){const i=Qd(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?S2(t,i,s,r,o):C2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,p=c.data[d];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const i=Qd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?S2(t,i,s,r,o):C2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const i=Qd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return S2(t,i,s,r,o)},nearest(t,e,n,r){const i=Qd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return C2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Qd(e,t);return E3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Qd(e,t);return E3(t,i,"y",n.intersect,r)}}};const KP=["left","top","right","bottom"];function lg(t,e){return t.filter(n=>n.pos===e)}function P3(t,e){return t.filter(n=>KP.indexOf(n.pos)===-1&&n.box.axis===e)}function ug(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function AQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function TQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!KP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function DQ(t,e){const n=TQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:l&&e.availableHeight)}return n}function OQ(t){const e=AQ(t),n=ug(e.filter(c=>c.box.fullSize),!0),r=ug(lg(e,"left"),!0),i=ug(lg(e,"right")),s=ug(lg(e,"top"),!0),o=ug(lg(e,"bottom")),a=P3(e,"x"),l=P3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:lg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function M3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function ZP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function NQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Oi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&ZP(o,s.getPadding());const a=Math.max(0,e.outerWidth-M3(o,t,"left","right")),l=Math.max(0,e.outerHeight-M3(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function IQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function BQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Pg(t,e,n,r){const i=[];let s,o,a,l,c,d;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,BQ(a.horizontal,e));const{same:p,other:v}=NQ(e,n,a,r);c|=p&&i.length,d=d||v,l.fullSize||i.push(a)}return c&&Pg(i,e,n,r)||d}function R0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function k3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*d,v=c.size||l.height;bm(c.start)&&(o=c.start),l.fullSize?R0(l,i.left,o,n.outerWidth-i.right-i.left,v):R0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*d,v=c.size||l.width;bm(c.start)&&(s=c.start),l.fullSize?R0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):R0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var vl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=yl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=OQ(t.boxes),l=a.vertical,c=a.horizontal;ls(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const d=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),v=Object.assign({},i);ZP(v,yl(r));const g=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=DQ(l.concat(c),p);Pg(a.fullSize,g,p,x),Pg(l,g,p,x),Pg(c,g,p,x)&&Pg(l,g,p,x),IQ(g),k3(a.leftAndTop,g,p,x),g.x+=g.w,g.y+=g.h,k3(a.rightAndBottom,g,p,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ls(a.chartArea,E=>{const k=E.box;Object.assign(k,t.chartArea),k.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class XP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class RQ extends XP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yv="$chartjs",FQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},A3=t=>t===null||t==="";function jQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[yv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",A3(i)){const s=d3(t,"width");s!==void 0&&(t.width=s)}if(A3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=d3(t,"height");s!==void 0&&(t.height=s)}return t}const JP=VJ?{passive:!0}:!1;function zQ(t,e,n){t.addEventListener(e,n,JP)}function $Q(t,e,n){t.canvas.removeEventListener(e,n,JP)}function VQ(t,e){const n=FQ[t.type]||t.type,{x:r,y:i}=Qd(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function sy(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function UQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||sy(a.addedNodes,r),o=o&&!sy(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function HQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||sy(a.removedNodes,r),o=o&&!sy(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const xm=new Map;let T3=0;function QP(){const t=window.devicePixelRatio;t!==T3&&(T3=t,xm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function WQ(t,e){xm.size||window.addEventListener("resize",QP),xm.set(t,e)}function GQ(t){xm.delete(t),xm.size||window.removeEventListener("resize",QP)}function qQ(t,e,n){const r=t.canvas,i=r&&sw(r);if(!i)return;const s=MP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(i),WQ(t,s),o}function E2(t,e,n){n&&n.disconnect(),e==="resize"&&GQ(t)}function YQ(t,e,n){const r=t.canvas,i=MP(s=>{t.ctx!==null&&n(VQ(s,t))},t);return zQ(r,e,i),i}class KQ extends XP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(jQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[yv])return!1;const r=n[yv].initial;["height","width"].forEach(s=>{const o=r[s];Wi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[yv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:UQ,detach:HQ,resize:qQ}[n]||YQ;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:E2,detach:E2,resize:E2}[n]||$Q)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return $J(e,n,r,i)}isAttached(e){const n=sw(e);return!!(n&&n.isConnected)}}function ZQ(t){return!iw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?RQ:KQ}var G0;let jh=(G0=class{constructor(){Ye(this,"x");Ye(this,"y");Ye(this,"active",!1);Ye(this,"options");Ye(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ap(this.x)&&Ap(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Ye(G0,"defaults",{}),Ye(G0,"defaultRoutes"),G0);function XQ(t,e){const n=t.options.ticks,r=JQ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?eee(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return tee(e,c,s,o/i),c;const d=QQ(s,e,i);if(o>0){let p,v;const g=o>1?Math.round((l-a)/(o-1)):null;for(F0(e,c,d,Wi(g)?0:a-g,a),p=0,v=o-1;p<v;p++)F0(e,c,d,s[p],s[p+1]);return F0(e,c,d,l,Wi(g)?e.length:l+g),c}return F0(e,c,d),c}function JQ(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function QQ(t,e,n){const r=nee(t),i=e.length/n;if(!r)return Math.max(i,1);const s=WX(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function eee(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function tee(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function F0(t,e,n,r,i){const s=ai(r,0),o=Math.min(ai(i,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(s+a*n))}function nee(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const ree=t=>t==="left"?"right":t==="right"?"left":t,D3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,O3=(t,e)=>Math.min(e||t,t);function N3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function iee(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function see(t,e){ls(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function cg(t){return t.drawTicks?t.tickLength:0}function I3(t,e){if(!t.display)return 0;const n=ga(t.font,e),r=yl(t.padding);return(Ks(t.text)?t.text.length:1)*n.lineHeight+r.height}function oee(t,e){return kd(t,{scale:e,type:"scale"})}function aee(t,e,n){return kd(t,{tick:n,index:e,type:"tick"})}function lee(t,e,n){let r=J_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=ree(r)),r}function uee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let p=0,v,g,x;const E=o-i,k=a-s;if(t.isHorizontal()){if(g=cl(r,s,a),Oi(n)){const A=Object.keys(n)[0],D=n[A];x=d[A].getPixelForValue(D)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=D3(t,n,e);v=a-s}else{if(Oi(n)){const A=Object.keys(n)[0],D=n[A];g=d[A].getPixelForValue(D)-k+e}else n==="center"?g=(c.left+c.right)/2-k+e:g=D3(t,n,e);x=cl(r,o,i),p=n==="left"?-Go:Go}return{titleX:g,titleY:x,maxWidth:v,rotation:p}}class Sf extends jh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=_u(e,Number.POSITIVE_INFINITY),n=_u(n,Number.NEGATIVE_INFINITY),r=_u(r,Number.POSITIVE_INFINITY),i=_u(i,Number.NEGATIVE_INFINITY),{min:_u(e,r),max:_u(n,i),minDefined:ko(e),maxDefined:ko(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:_u(n,_u(r,n)),max:_u(r,_u(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ks(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?N3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=XQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ks(this.options.afterUpdate,[this])}beforeSetDimensions(){ks(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ks(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ks(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ks(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ks(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ks(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ks(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=O3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,v=d.highest.height,g=Pa(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),p+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-cg(e.grid)-n.padding-I3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Z_(Math.min(Math.asin(Pa((d.highest.height+6)/a,-1,1)),Math.asin(Pa(l/c,-1,1))-Math.asin(Pa(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ks(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ks(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=I3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=cg(s)+l):(e.height=this.maxHeight,e.width=cg(s)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:p,highest:v}=this._getLabelSizes(),g=r.padding*2,x=bc(this.labelRotation),E=Math.cos(x),k=Math.sin(x);if(a){const A=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+A+g)}else{const A=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+A+g)}this._calculatePadding(c,d,k,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,g=0;l?c?(v=i*e.width,g=r*n.height):(v=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,g=n.width/2),this.paddingLeft=Math.max((v-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ks(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Wi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=N3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/O3(n,r));let c=0,d=0,p,v,g,x,E,k,A,D,z,X,re;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,A=s[k]=s[k]||{data:{},gc:[]},D=E.lineHeight,z=X=0,!Wi(x)&&!Ks(x))z=ry(i,A.data,A.gc,z,x),X=D;else if(Ks(x))for(v=0,g=x.length;v<g;++v)re=x[v],!Wi(re)&&!Ks(re)&&(z=ry(i,A.data,A.gc,z,re),X+=D);o.push(z),a.push(X),c=Math.max(z,c),d=Math.max(X,d)}see(s,n);const ge=o.indexOf(c),fe=a.indexOf(d),N=F=>({width:o[F]||0,height:a[F]||0});return{first:N(0),last:N(n-1),widest:N(ge),highest:N(fe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return YX(this._alignToPixels?Yd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=aee(this.getContext(),e,r))}return this.$context||(this.$context=oee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=bc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=cg(s),g=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,k=E/2,A=function($){return Yd(r,$,E)};let D,z,X,re,ge,fe,N,F,Y,B,I,R;if(o==="top")D=A(this.bottom),fe=this.bottom-v,F=D-k,B=A(e.top)+k,R=e.bottom;else if(o==="bottom")D=A(this.top),B=e.top,R=A(e.bottom)-k,fe=D+k,F=this.top+v;else if(o==="left")D=A(this.right),ge=this.right-v,N=D-k,Y=A(e.left)+k,I=e.right;else if(o==="right")D=A(this.left),Y=e.left,I=A(e.right)-k,ge=D+k,N=this.left+v;else if(n==="x"){if(o==="center")D=A((e.top+e.bottom)/2+.5);else if(Oi(o)){const $=Object.keys(o)[0],oe=o[$];D=A(this.chart.scales[$].getPixelForValue(oe))}B=e.top,R=e.bottom,fe=D+k,F=fe+v}else if(n==="y"){if(o==="center")D=A((e.left+e.right)/2);else if(Oi(o)){const $=Object.keys(o)[0],oe=o[$];D=A(this.chart.scales[$].getPixelForValue(oe))}ge=D-k,N=ge-v,Y=e.left,I=e.right}const q=ai(i.ticks.maxTicksLimit,p),U=Math.max(1,Math.ceil(p/q));for(z=0;z<p;z+=U){const $=this.getContext(z),oe=s.setContext($),J=a.setContext($),_e=oe.lineWidth,ve=oe.color,ke=J.dash||[],W=J.dashOffset,V=oe.tickWidth,K=oe.tickColor,pe=oe.tickBorderDash||[],he=oe.tickBorderDashOffset;X=iee(this,z,l),X!==void 0&&(re=Yd(r,X,_e),c?ge=N=Y=I=re:fe=F=B=R=re,g.push({tx1:ge,ty1:fe,tx2:N,ty2:F,x1:Y,y1:B,x2:I,y2:R,width:_e,color:ve,borderDash:ke,borderDashOffset:W,tickWidth:V,tickColor:K,tickBorderDash:pe,tickBorderDashOffset:he}))}return this._ticksLength=p,this._borderValue=D,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:p}=s,v=cg(r.grid),g=v+d,x=p?-d:g,E=-bc(this.labelRotation),k=[];let A,D,z,X,re,ge,fe,N,F,Y,B,I,R="middle";if(i==="top")ge=this.bottom-x,fe=this._getXAxisLabelAlignment();else if(i==="bottom")ge=this.top+x,fe=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(v);fe=U.textAlign,re=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(v);fe=U.textAlign,re=U.x}else if(n==="x"){if(i==="center")ge=(e.top+e.bottom)/2+g;else if(Oi(i)){const U=Object.keys(i)[0],$=i[U];ge=this.chart.scales[U].getPixelForValue($)+g}fe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")re=(e.left+e.right)/2-g;else if(Oi(i)){const U=Object.keys(i)[0],$=i[U];re=this.chart.scales[U].getPixelForValue($)}fe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const q=this._getLabelSizes();for(A=0,D=a.length;A<D;++A){z=a[A],X=z.label;const U=s.setContext(this.getContext(A));N=this.getPixelForTick(A)+s.labelOffset,F=this._resolveTickFontOptions(A),Y=F.lineHeight,B=Ks(X)?X.length:1;const $=B/2,oe=U.color,J=U.textStrokeColor,_e=U.textStrokeWidth;let ve=fe;o?(re=N,fe==="inner"&&(A===D-1?ve=this.options.reverse?"left":"right":A===0?ve=this.options.reverse?"right":"left":ve="center"),i==="top"?c==="near"||E!==0?I=-B*Y+Y/2:c==="center"?I=-q.highest.height/2-$*Y+Y:I=-q.highest.height+Y/2:c==="near"||E!==0?I=Y/2:c==="center"?I=q.highest.height/2-$*Y:I=q.highest.height-B*Y,p&&(I*=-1),E!==0&&!U.showLabelBackdrop&&(re+=Y/2*Math.sin(E))):(ge=N,I=(1-B)*Y/2);let ke;if(U.showLabelBackdrop){const W=yl(U.backdropPadding),V=q.heights[A],K=q.widths[A];let pe=I-W.top,he=0-W.left;switch(R){case"middle":pe-=V/2;break;case"bottom":pe-=V;break}switch(fe){case"center":he-=K/2;break;case"right":he-=K;break;case"inner":A===D-1?he-=K:A>0&&(he-=K/2);break}ke={left:he,top:pe,width:K+W.width,height:V+W.height,color:U.backdropColor}}k.push({label:X,font:F,textOffset:I,options:{rotation:E,color:oe,strokeColor:J,strokeWidth:_e,textAlign:ve,textBaseline:R,translation:[re,ge],backdrop:ke}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-bc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,d;return n==="left"?i?(d=this.right+s,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,p,v;this.isHorizontal()?(c=Yd(e,this.left,o)-o/2,d=Yd(e,this.right,a)+a/2,p=v=l):(p=Yd(e,this.top,o)-o/2,v=Yd(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(d,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Gy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,d=o.textOffset;_f(r,c,0,d,l,a)}i&&qy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ga(r.font),o=yl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Oi(n)?(l+=o.bottom,Ks(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:p,rotation:v}=uee(this,l,n,a);_f(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:lee(a,n,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ai(e.grid&&e.grid.z,-1),i=ai(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Sf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ga(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class j0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;dee(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,cee(e,o,r),this.override&&Ao.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ao[i]&&(delete Ao[i][r],this.override&&delete bf[r])}}function cee(t,e,n){const r=ym(Object.create(null),[n?Ao.get(n):{},Ao.get(e),t.defaults]);Ao.set(e,r),t.defaultRoutes&&hee(e,t.defaultRoutes),t.descriptors&&Ao.describe(e,t.descriptors)}function hee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ao.route(s,i,l,a)})}function dee(t){return"id"in t&&"defaults"in t}class fee{constructor(){this.controllers=new j0(wc,"datasets",!0),this.elements=new j0(jh,"elements"),this.plugins=new j0(Object,"plugins"),this.scales=new j0(Sf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ls(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=K_(e);ks(r["before"+i],[],r),n[e](r),ks(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var $c=new fee;class pee{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(ks(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Wi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ai(r.options&&r.options.plugins,{}),s=gee(r);return i===!1&&!n?[]:vee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function gee(t){const e={},n=[],r=Object.keys($c.plugins.items);for(let s=0;s<r.length;s++)n.push($c.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function mee(t,e){return!e&&t===!1?null:t===!0?{}:t}function vee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=mee(r[l],i);c!==null&&s.push({plugin:a,options:yee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function yee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vb(t,e){const n=Ao.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function bee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function _ee(t,e){return t===e?"_index_":"_value_"}function B3(t){if(t==="x"||t==="y"||t==="r")return t}function wee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ub(t,...e){if(B3(t))return t;for(const n of e){const r=n.axis||wee(n.position)||t.length>1&&B3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function R3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function xee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return R3(t,"x",n[0])||R3(t,"y",n[0])}return{}}function Lee(t,e){const n=bf[t.type]||{scales:{}},r=e.scales||{},i=Vb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Oi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ub(o,a,xee(o,t),Ao.scales[a.type]),c=_ee(l,i),d=n.scales||{};s[o]=Zg(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Vb(a,e),d=(bf[a]||{}).scales||{};Object.keys(d).forEach(p=>{const v=bee(p,l),g=o[v+"AxisID"]||v;s[g]=s[g]||Object.create(null),Zg(s[g],[{axis:v},r[g],d[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Zg(a,[Ao.scales[a.type],Ao.scale])}),s}function eM(t){const e=t.options||(t.options={});e.plugins=ai(e.plugins,{}),e.scales=Lee(t,e)}function tM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function See(t){return t=t||{},t.data=tM(t.data),eM(t),t}const F3=new Map,nM=new Set;function z0(t,e){let n=F3.get(t);return n||(n=e(),F3.set(t,n),nM.add(n)),n}const hg=(t,e,n)=>{const r=Sd(e,n);r!==void 0&&t.add(r)};class Cee{constructor(e){this._config=See(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return z0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return z0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return z0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return z0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(p=>hg(l,e,p))),d.forEach(p=>hg(l,i,p)),d.forEach(p=>hg(l,bf[s]||{},p)),d.forEach(p=>hg(l,Ao,p)),d.forEach(p=>hg(l,jb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,bf[n]||{},Ao.datasets[n]||{},{type:n},Ao,jb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=j3(this._resolverCache,e,i);let l=o;if(Pee(o,n)){s.$shared=!1,r=Cd(r)?r():r;const c=this.createResolver(e,r,a);l=Tp(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=j3(this._resolverCache,e,r);return Oi(n)?Tp(s,n,void 0,i):s}}function j3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:tw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Eee=t=>Oi(t)&&Object.getOwnPropertyNames(t).some(e=>Cd(t[e]));function Pee(t,e){const{isScriptable:n,isIndexable:r}=NP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Cd(a)||Eee(a))||o&&Ks(a))return!0}return!1}var Mee="4.4.1";const kee=["top","bottom","left","right","chartArea"];function z3(t,e){return t==="top"||t==="bottom"||kee.indexOf(t)===-1&&e==="x"}function $3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function V3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ks(n&&n.onComplete,[t],e)}function Aee(t){const e=t.chart,n=e.options.animation;ks(n&&n.onProgress,[t],e)}function rM(t){return iw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const bv={},U3=t=>{const e=rM(t);return Object.values(bv).filter(n=>n.canvas===e).pop()};function Tee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Dee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function $0(t,e,n){return t.options.clip?t[n]:e[n]}function Oee(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:$0(n,e,"left"),right:$0(n,e,"right"),top:$0(r,e,"top"),bottom:$0(r,e,"bottom")}:e}class Hc{static register(...e){$c.add(...e),H3()}static unregister(...e){$c.remove(...e),H3()}constructor(e,n){const r=this.config=new Cee(n),i=rM(e),s=U3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||ZQ(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=BX(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new pee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=JX(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],bv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wh.listen(this,"complete",V3),wh.listen(this,"progress",Aee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Wi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $c}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():h3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return l3(this.canvas,this.ctx),this}stop(){return wh.stop(this),this}resize(e,n){wh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,h3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ks(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ls(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Ub(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),ls(s,o=>{const a=o.options,l=a.id,c=Ub(l,a),d=ai(a.type,o.dtype);(a.position===void 0||z3(a.position,c)!==z3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{const v=$c.getScale(d);p=new v({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),ls(i,(o,a)=>{o||delete r[a]}),ls(r,o=>{vl.configure(this,o,o.options),vl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort($3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Vb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=$c.getController(a),{datasetElementType:c,dataElementType:d}=Ao.datasets[a];Object.assign(l,{dataElementType:$c.getElement(d),datasetElementType:c&&$c.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ls(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ls(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ls(this.scales,e=>{vl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Q5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Tee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Q5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ls(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Cd(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wh.has(this)?this.attached&&!wh.running(this)&&wh.start(this):(this.draw(),V3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Oee(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Gy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&qy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Dh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=kQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=kd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);bm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),l3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete bv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ls(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ls(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ls(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ey(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=VX(e),c=Dee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ks(s.onHover,[e,a,this],this),l&&ks(s.onClick,[e,a,this],this));const d=!ey(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Ye(Hc,"defaults",Ao),Ye(Hc,"instances",bv),Ye(Hc,"overrides",bf),Ye(Hc,"registry",$c),Ye(Hc,"version",Mee),Ye(Hc,"getChart",U3);function H3(){return ls(Hc.instances,t=>t._plugins.invalidate())}function Nee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Go,r-Go),t.closePath(),t.clip()}function Iee(t){return ew(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Bee(t,e,n,r){const i=Iee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Pa(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Pa(i.innerStart,0,o),innerEnd:Pa(i.innerEnd,0,o)}}function Jf(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function oy(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,p=Math.max(e.outerRadius+r+n-c,0),v=d>0?d+r+n+c:0;let g=0;const x=i-l;if(r){const U=d>0?d-r:0,$=p>0?p-r:0,oe=(U+$)/2,J=oe!==0?x*oe/(oe+r):x;g=(x-J)/2}const E=Math.max(.001,x*p-n/Bs)/p,k=(x-E)/2,A=l+k+g,D=i-k-g,{outerStart:z,outerEnd:X,innerStart:re,innerEnd:ge}=Bee(e,v,p,D-A),fe=p-z,N=p-X,F=A+z/fe,Y=D-X/N,B=v+re,I=v+ge,R=A+re/B,q=D-ge/I;if(t.beginPath(),s){const U=(F+Y)/2;if(t.arc(o,a,p,F,U),t.arc(o,a,p,U,Y),X>0){const _e=Jf(N,Y,o,a);t.arc(_e.x,_e.y,X,Y,D+Go)}const $=Jf(I,D,o,a);if(t.lineTo($.x,$.y),ge>0){const _e=Jf(I,q,o,a);t.arc(_e.x,_e.y,ge,D+Go,q+Math.PI)}const oe=(D-ge/v+(A+re/v))/2;if(t.arc(o,a,v,D-ge/v,oe,!0),t.arc(o,a,v,oe,A+re/v,!0),re>0){const _e=Jf(B,R,o,a);t.arc(_e.x,_e.y,re,R+Math.PI,A-Go)}const J=Jf(fe,A,o,a);if(t.lineTo(J.x,J.y),z>0){const _e=Jf(fe,F,o,a);t.arc(_e.x,_e.y,z,A-Go,F)}}else{t.moveTo(o,a);const U=Math.cos(F)*p+o,$=Math.sin(F)*p+a;t.lineTo(U,$);const oe=Math.cos(Y)*p+o,J=Math.sin(Y)*p+a;t.lineTo(oe,J)}t.closePath()}function Ree(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){oy(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Is||Is))}return oy(t,e,n,r,l,i),t.fill(),l}function Fee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:p,borderDashOffset:v}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,g?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let x=e.endAngle;if(s){oy(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%Is||Is))}g&&Nee(t,e,x),s||(oy(t,e,n,r,x,i),t.stroke())}class Mg extends jh{constructor(n){super();Ye(this,"circumference");Ye(this,"endAngle");Ye(this,"fullCircles");Ye(this,"innerRadius");Ye(this,"outerRadius");Ye(this,"pixelMargin");Ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=SP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,E=ai(v,c-l)>=Is||_m(o,l,c),k=Ah(a,d+g,p+g);return E&&k}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,p=(s+o)/2,v=(a+l+d+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Is?Math.floor(i/Is):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Bs,i||0)),d=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Ree(n,this,d,o,a),Fee(n,this,d,o,a),n.restore()}}Ye(Mg,"id","arc"),Ye(Mg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ye(Mg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ye(Mg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function iM(t,e,n=e){t.lineCap=ai(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ai(n.borderDash,e.borderDash)),t.lineDashOffset=ai(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ai(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ai(n.borderWidth,e.borderWidth),t.strokeStyle=ai(n.borderColor,e.borderColor)}function jee(t,e,n){t.lineTo(n.x,n.y)}function zee(t){return t.stepped?cJ:t.tension||t.cubicInterpolationMode==="monotone"?hJ:jee}function sM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),d=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function $ee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=sM(i,n,r),d=zee(s);let{move:p=!0,reverse:v}=r||{},g,x,E;for(g=0;g<=c;++g)x=i[(a+(v?c-g:g))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):d(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],d(t,E,x,v,s.stepped)),!!l}function Vee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=sM(i,n,r),{move:l=!0,reverse:c}=r||{};let d=0,p=0,v,g,x,E,k,A;const D=X=>(o+(c?a-X:X))%s,z=()=>{E!==k&&(t.lineTo(d,k),t.lineTo(d,E),t.lineTo(d,A))};for(l&&(g=i[D(0)],t.moveTo(g.x,g.y)),v=0;v<=a;++v){if(g=i[D(v)],g.skip)continue;const X=g.x,re=g.y,ge=X|0;ge===x?(re<E?E=re:re>k&&(k=re),d=(p*d+X)/++p):(z(),t.lineTo(X,re),x=ge,p=0,E=k=re),A=re}z()}function Hb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Vee:$ee}function Uee(t){return t.stepped?UJ:t.tension||t.cubicInterpolationMode==="monotone"?HJ:ef}function Hee(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),iM(t,e.options),t.stroke(i)}function Wee(t,e,n,r){const{segments:i,options:s}=e,o=Hb(e);for(const a of i)iM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Gee=typeof Path2D=="function";function qee(t,e,n,r){Gee&&!e.options.segment?Hee(t,e,n,r):Wee(t,e,n,r)}class fd extends jh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;IJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZJ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=HP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Uee(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:p,end:v}=o[c],g=s[p],x=s[v];if(g===x){a.push(g);continue}const E=Math.abs((i-g[n])/(x[n]-g[n])),k=l(g,x,E,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Hb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Hb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),qee(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ye(fd,"id","line"),Ye(fd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ye(fd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ye(fd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function W3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class _v extends jh{constructor(n){super();Ye(this,"parsed");Ye(this,"skip");Ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return W3(this,n,"x",r)}inYRange(n,r){return W3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Dh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,zb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ye(_v,"id","point"),Ye(_v,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ye(_v,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function oM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,d=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function pd(t,e,n,r){return t?0:Pa(e,n,r)}function Yee(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=OP(r);return{t:pd(i.top,s.top,0,n),r:pd(i.right,s.right,0,e),b:pd(i.bottom,s.bottom,0,n),l:pd(i.left,s.left,0,e)}}function Kee(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=ff(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Oi(i);return{topLeft:pd(!l||a.top||a.left,s.topLeft,0,o),topRight:pd(!l||a.top||a.right,s.topRight,0,o),bottomLeft:pd(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:pd(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Zee(t){const e=oM(t),n=e.right-e.left,r=e.bottom-e.top,i=Yee(t,n/2,r/2),s=Kee(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function P2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&oM(t,r);return a&&(i||Ah(e,a.left,a.right))&&(s||Ah(n,a.top,a.bottom))}function Xee(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Jee(t,e){t.rect(e.x,e.y,e.w,e.h)}function M2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class wv extends jh{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Zee(this),a=Xee(o.radius)?wm:Jee;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,M2(o,n,s)),e.clip(),a(e,M2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,M2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return P2(this,e,n,r)}inXRange(e,n){return P2(this,e,null,n)}inYRange(e,n){return P2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ye(wv,"id","bar"),Ye(wv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ye(wv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Qee=Object.freeze({__proto__:null,ArcElement:Mg,BarElement:wv,LineElement:fd,PointElement:_v});const Wb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],G3=Wb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function aM(t){return Wb[t%Wb.length]}function lM(t){return G3[t%G3.length]}function ete(t,e){return t.borderColor=aM(e),t.backgroundColor=lM(e),++e}function tte(t,e){return t.backgroundColor=t.data.map(()=>aM(e++)),e}function nte(t,e){return t.backgroundColor=t.data.map(()=>lM(e++)),e}function rte(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof of?e=tte(n,e):i instanceof em?e=nte(n,e):i&&(e=ete(n,e))}}function q3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function ite(t){return t&&(t.borderColor||t.backgroundColor)}var ste={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(q3(r)||ite(i)||s&&q3(s)))return;const o=rte(t);r.forEach(o)}};function ote(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let d=e,p,v,g,x,E;for(o[l++]=t[d],p=0;p<s-2;p++){let k=0,A=0,D;const z=Math.floor((p+1)*a)+1+e,X=Math.min(Math.floor((p+2)*a)+1,n)+e,re=X-z;for(D=z;D<X;D++)k+=t[D].x,A+=t[D].y;k/=re,A/=re;const ge=Math.floor(p*a)+1+e,fe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:N,y:F}=t[d];for(g=x=-1,D=ge;D<fe;D++)x=.5*Math.abs((N-k)*(t[D].y-F)-(N-t[D].x)*(A-F)),x>g&&(g=x,v=t[D],E=D);o[l++]=v,d=E}return o[l++]=t[c],o}function ate(t,e,n,r){let i=0,s=0,o,a,l,c,d,p,v,g,x,E;const k=[],A=e+n-1,D=t[e].x,X=t[A].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/X*r,c=a.y;const re=l|0;if(re===d)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const ge=o-1;if(!Wi(p)&&!Wi(v)){const fe=Math.min(p,v),N=Math.max(p,v);fe!==g&&fe!==ge&&k.push({...t[fe],x:i}),N!==g&&N!==ge&&k.push({...t[N],x:i})}o>0&&ge!==g&&k.push(t[ge]),k.push(a),d=re,s=0,x=E=c,p=v=g=o}}return k}function uM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Y3(t){t.data.datasets.forEach(e=>{uM(e)})}function lte(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Pa(Th(e,s.axis,o).lo,0,n-1)),c?i=Pa(Th(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var ute={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Y3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Eg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:p,count:v}=lte(l,c);const g=n.threshold||4*r;if(v<=g){uM(i);return}Wi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=ote(c,p,v,r,n);break;case"min-max":x=ate(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Y3(t)}};function cte(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=aw(l,c,i);const d=Gb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:i[l],end:i[c]});continue}const p=HP(e,d);for(const v of p){const g=Gb(n,s[v.start],s[v.end],v.loop),x=UP(a,i,g);for(const E of x)o.push({source:E,target:v,start:{[n]:K3(d,g,"start",Math.max)},end:{[n]:K3(d,g,"end",Math.min)}})}}return o}function Gb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=wu(i),s=wu(s)),{property:t,start:i,end:s}}function hte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=aw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function aw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function K3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function cM(t,e){let n=[],r=!1;return Ks(t)?(r=!0,n=t):n=hte(t,e),n.length?new fd({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Z3(t){return t&&t.fill!==!1}function dte(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!ko(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function fte(t,e,n){const r=vte(t);if(Oi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ko(i)&&Math.floor(i)===i?pte(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function pte(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function gte(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Oi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function mte(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Oi(t)?r=t.value:r=e.getBaseValue(),r}function vte(t){const e=t.options,n=e.fill;let r=ai(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function yte(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=bte(e,n);a.push(cM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let d=c.start;d<=c.end;d++)_te(i,o[d],a)}return new fd({points:i,options:{}})}function bte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function _te(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=wte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function wte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const d=s[c],p=o[d.start][n],v=o[d.end][n];if(Ah(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class hM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Is},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function xte(t){const{chart:e,fill:n,line:r}=t;if(ko(n))return Lte(e,n);if(n==="stack")return yte(t);if(n==="shape")return!0;const i=Ste(t);return i instanceof hM?i:cM(i,r)}function Lte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Ste(t){return(t.scale||{}).getPointPositionForValue?Ete(t):Cte(t)}function Cte(t){const{scale:e={},fill:n}=t,r=gte(n,e);if(ko(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Ete(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=mte(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new hM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function k2(t,e,n){const r=xte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:p=c}=l||{};r&&i.points.length&&(Gy(t,n),Pte(t,{line:i,target:r,above:d,below:p,area:n,scale:s,axis:o}),qy(t))}function Pte(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(X3(t,r,o.top),J3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),X3(t,r,o.bottom)),J3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function X3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=i[l],p=i[aw(l,c,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function J3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=cte(n,r,i);for(const{source:l,target:c,start:d,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,g=r!==!0;t.save(),t.fillStyle=v,Mte(t,o,g&&Gb(i,d,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(g){x?t.closePath():Q3(t,r,p,i);const k=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&k,E||Q3(t,r,d,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function Mte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function Q3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var kte={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof fd&&(l={visible:t.isDatasetVisible(o),index:o,fill:fte(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=dte(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&k2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Z3(s)&&k2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Z3(r)||n.drawTime!=="beforeDatasetDraw"||k2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const eL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Ate=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class tL extends jh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ks(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ga(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=eL(r,s);let c,d;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,g=-d;return this.legendItems.forEach((x,E)=>{const k=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+k+2*a>o)&&(p+=d,c[c.length-(E>0?0:1)]=0,g+=d,v++),l[E]={left:0,top:g,row:v,width:k,height:i},c[c.length-1]+=k+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let p=a,v=0,g=0,x=0,E=0;return this.legendItems.forEach((k,A)=>{const{itemWidth:D,itemHeight:z}=Tte(r,n,s,k,i);A>0&&g+z+2*a>d&&(p+=v+a,c.push({width:v,height:g}),x+=v+a,E++,v=g=0),l[A]={left:x,top:g,col:E,width:D,height:z},v=Math.max(v,D),g+=z+a}),p+=v,c.push({width:v,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=_p(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=cl(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=cl(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=cl(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=cl(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Gy(e,this),this._draw(),qy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ao.color,l=_p(e.rtl,this.left,this.width),c=ga(o.font),{padding:d}=o,p=c.size,v=p/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:k}=eL(o,p),A=function(ge,fe,N){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const F=ai(N.lineWidth,1);if(i.fillStyle=ai(N.fillStyle,a),i.lineCap=ai(N.lineCap,"butt"),i.lineDashOffset=ai(N.lineDashOffset,0),i.lineJoin=ai(N.lineJoin,"miter"),i.lineWidth=F,i.strokeStyle=ai(N.strokeStyle,a),i.setLineDash(ai(N.lineDash,[])),o.usePointStyle){const Y={radius:E*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:F},B=l.xPlus(ge,x/2),I=fe+v;DP(i,Y,B,I,o.pointStyleWidth&&x)}else{const Y=fe+Math.max((p-E)/2,0),B=l.leftForLtr(ge,x),I=ff(N.borderRadius);i.beginPath(),Object.values(I).some(R=>R!==0)?wm(i,{x:B,y:Y,w:x,h:E,radius:I}):i.rect(B,Y,x,E),i.fill(),F!==0&&i.stroke()}i.restore()},D=function(ge,fe,N){_f(i,N.text,ge,fe+k/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},z=this.isHorizontal(),X=this._computeTitleHeight();z?g={x:cl(s,this.left+d,this.right-r[0]),y:this.top+d+X,line:0}:g={x:this.left+d,y:cl(s,this.top+X+d,this.bottom-n[0].height),line:0},zP(this.ctx,e.textDirection);const re=k+d;this.legendItems.forEach((ge,fe)=>{i.strokeStyle=ge.fontColor,i.fillStyle=ge.fontColor;const N=i.measureText(ge.text).width,F=l.textAlign(ge.textAlign||(ge.textAlign=o.textAlign)),Y=x+v+N;let B=g.x,I=g.y;l.setWidth(this.width),z?fe>0&&B+Y+d>this.right&&(I=g.y+=re,g.line++,B=g.x=cl(s,this.left+d,this.right-r[g.line])):fe>0&&I+re>this.bottom&&(B=g.x=B+n[g.line].width+d,g.line++,I=g.y=cl(s,this.top+X+d,this.bottom-n[g.line].height));const R=l.x(B);if(A(R,I,ge),B=QX(F,B+x+v,z?B+Y:this.right,e.rtl),D(l.x(B),I,ge),z)g.x+=Y+d;else if(typeof ge.text!="string"){const q=c.lineHeight;g.y+=dM(ge,q)+d}else g.y+=re}),$P(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ga(n.font),i=yl(n.padding);if(!n.display)return;const s=_p(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let d,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),d=this.top+c,p=cl(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);d=c+cl(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=cl(a,p,p+v);o.textAlign=s.textAlign(J_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,_f(o,n.text,g,d,r)}_computeTitleHeight(){const e=this.options.title,n=ga(e.font),r=yl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Ah(e,this.left,this.right)&&Ah(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ah(e,i.left,i.left+i.width)&&Ah(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Nte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Ate(i,r);i&&!s&&ks(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ks(n.onHover,[e,r,this],this)}else r&&ks(n.onClick,[e,r,this],this)}}function Tte(t,e,n,r,i){const s=Dte(r,t,e,n),o=Ote(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Dte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Ote(t,e,n){let r=t;return typeof e.text!="string"&&(r=dM(e,n)),r}function dM(t,e){const n=t.text?t.text.length:0;return e*n}function Nte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ite={id:"legend",_element:tL,start(t,e,n){const r=t.legend=new tL({ctx:t.ctx,options:n,chart:t});vl.configure(t,r,n),vl.addBox(t,r)},stop(t){vl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;vl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=yl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lw extends jh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ks(r.text)?r.text.length:1;this._padding=yl(r.padding);const s=i*ga(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,d,p;return this.isHorizontal()?(d=cl(a,r,s),p=n+e,c=s-r):(o.position==="left"?(d=r+e,p=cl(a,i,n),l=Bs*-.5):(d=s-e,p=cl(a,n,i),l=Bs*.5),c=i-n),{titleX:d,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ga(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);_f(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:J_(n.align),textBaseline:"middle",translation:[o,a]})}}function Bte(t,e){const n=new lw({ctx:t.ctx,options:e,chart:t});vl.configure(t,n,e),vl.addBox(t,n),t.titleBlock=n}var Rte={id:"title",_element:lw,start(t,e,n){Bte(t,n)},stop(t){const e=t.titleBlock;vl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;vl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const V0=new WeakMap;var Fte={id:"subtitle",start(t,e,n){const r=new lw({ctx:t.ctx,options:n,chart:t});vl.configure(t,r,n),vl.addBox(t,r),V0.set(t,r)},stop(t){vl.removeBox(t,V0.get(t)),V0.delete(t)},beforeUpdate(t,e,n){const r=V0.get(t);vl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Fb(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function jc(t,e){return e&&(Ks(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function jte(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function nL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ga(e.bodyFont),c=ga(e.titleFont),d=ga(e.footerFont),p=s.length,v=i.length,g=r.length,x=yl(e.padding);let E=x.height,k=0,A=r.reduce((X,re)=>X+re.before.length+re.lines.length+re.after.length,0);if(A+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),A){const X=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=g*X+(A-g)*l.lineHeight+(A-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*d.lineHeight+(v-1)*e.footerSpacing);let D=0;const z=function(X){k=Math.max(k,n.measureText(X).width+D)};return n.save(),n.font=c.string,ls(t.title,z),n.font=l.string,ls(t.beforeBody.concat(t.afterBody),z),D=e.displayColors?o+2+e.boxPadding:0,ls(r,X=>{ls(X.before,z),ls(X.lines,z),ls(X.after,z)}),D=0,n.font=d.string,ls(t.footer,z),n.restore(),k+=x.width,{width:k,height:E}}function zte(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function $te(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Vte(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),$te(c,t,e,n)&&(c="center"),c}function rL(t,e,n){const r=n.yAlign||e.yAlign||zte(t,n);return{xAlign:n.xAlign||e.xAlign||Vte(t,e,n,r),yAlign:r}}function Ute(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Hte(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function iL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:d,topRight:p,bottomLeft:v,bottomRight:g}=ff(o);let x=Ute(e,a);const E=Hte(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,v)+i:a==="right"&&(x+=Math.max(p,g)+i),{x:Pa(x,0,r.width-e.width),y:Pa(E,0,r.height-e.height)}}function U0(t,e,n){const r=yl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function sL(t){return jc([],xh(t))}function Wte(t,e,n){return kd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function oL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const fM={beforeTitle:_h,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_h,beforeBody:_h,beforeLabel:_h,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Wi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_h,afterBody:_h,beforeFooter:_h,footer:_h,afterFooter:_h};function Kl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?fM[e].call(n,r):i}class qb extends jh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new WP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Wte(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Kl(r,"beforeTitle",this,e),s=Kl(r,"title",this,e),o=Kl(r,"afterTitle",this,e);let a=[];return a=jc(a,xh(i)),a=jc(a,xh(s)),a=jc(a,xh(o)),a}getBeforeBody(e,n){return sL(Kl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ls(e,s=>{const o={before:[],lines:[],after:[]},a=oL(r,s);jc(o.before,xh(Kl(a,"beforeLabel",this,s))),jc(o.lines,Kl(a,"label",this,s)),jc(o.after,xh(Kl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return sL(Kl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Kl(r,"beforeFooter",this,e),s=Kl(r,"footer",this,e),o=Kl(r,"afterFooter",this,e);let a=[];return a=jc(a,xh(i)),a=jc(a,xh(s)),a=jc(a,xh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(jte(this.chart,n[l]));return e.filter&&(a=a.filter((d,p,v)=>e.filter(d,p,v,r))),e.itemSort&&(a=a.sort((d,p)=>e.itemSort(d,p,r))),ls(a,d=>{const p=oL(e.callbacks,d);i.push(Kl(p,"labelColor",this,d)),s.push(Kl(p,"labelPointStyle",this,d)),o.push(Kl(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=kg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=nL(this,r),c=Object.assign({},a,l),d=rL(this.chart,r,c),p=iL(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:p}=ff(a),{x:v,y:g}=e,{width:x,height:E}=n;let k,A,D,z,X,re;return s==="center"?(X=g+E/2,i==="left"?(k=v,A=k-o,z=X+o,re=X-o):(k=v+x,A=k+o,z=X-o,re=X+o),D=k):(i==="left"?A=v+Math.max(l,d)+o:i==="right"?A=v+x-Math.max(c,p)-o:A=this.caretX,s==="top"?(z=g,X=z-o,k=A-o,D=A+o):(z=g+E,X=z+o,k=A+o,D=A-o),re=z),{x1:k,x2:A,x3:D,y1:z,y2:X,y3:re}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=_p(r.rtl,this.x,this.width);for(e.x=U0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ga(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,d=ga(s.bodyFont),p=U0(this,"left",s),v=i.x(p),g=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+g;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,c)+c/2,A=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,zb(e,E,k,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,zb(e,E,k,A)}else{e.lineWidth=Oi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),k=i.leftForLtr(i.xPlus(v,1),c-2),A=ff(o.borderRadius);Object.values(A).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,wm(e,{x:E,y:x,w:c,h:l,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),wm(e,{x:k,y:x+1,w:c-2,h:l-2,radius:A}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,p=ga(r.bodyFont);let v=p.lineHeight,g=0;const x=_p(r.rtl,this.x,this.width),E=function(N){n.fillText(N,x.x(e.x+g),e.y+v/2),e.y+=v+s},k=x.textAlign(o);let A,D,z,X,re,ge,fe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=U0(this,k,r),n.fillStyle=r.bodyColor,ls(this.beforeBody,E),g=a&&k!=="right"?o==="center"?c/2+d:c+2+d:0,X=0,ge=i.length;X<ge;++X){for(A=i[X],D=this.labelTextColors[X],n.fillStyle=D,ls(A.before,E),z=A.lines,a&&z.length&&(this._drawColorBox(n,e,X,x,r),v=Math.max(p.lineHeight,l)),re=0,fe=z.length;re<fe;++re)E(z[re]),v=p.lineHeight;ls(A.after,E)}g=0,v=p.lineHeight,ls(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=_p(r.rtl,this.x,this.width);for(e.x=U0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ga(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:p,topRight:v,bottomLeft:g,bottomRight:x}=ff(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+d),n.quadraticCurveTo(a,l+d,a,l+d-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=kg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=nL(this,e),l=Object.assign({},o,this._size),c=rL(n,e,l),d=iL(e,l,c,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),zP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),$P(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ey(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ey(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=kg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ye(qb,"positioners",kg);var Gte={id:"tooltip",_element:qb,positioners:kg,afterInit(t,e,n){n&&(t.tooltip=new qb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},qte=Object.freeze({__proto__:null,Colors:ste,Decimation:ute,Filler:kte,Legend:Ite,SubTitle:Fte,Title:Rte,Tooltip:Gte});const Yte=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Kte(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Yte(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Zte=(t,e)=>t===null?null:Pa(Math.round(t),0,e);function aL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yb extends Sf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Wi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Kte(r,e,ai(n,e),this._addedLabels),Zte(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return aL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ye(Yb,"id","category"),Ye(Yb,"defaults",{ticks:{callback:aL}});function Xte(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:p,includeBounds:v}=t,g=s||1,x=d-1,{min:E,max:k}=e,A=!Wi(o),D=!Wi(a),z=!Wi(c),X=(k-E)/(p+1);let re=t3((k-E)/x/g)*g,ge,fe,N,F;if(re<1e-14&&!A&&!D)return[{value:E},{value:k}];F=Math.ceil(k/re)-Math.floor(E/re),F>x&&(re=t3(F*re/x/g)*g),Wi(l)||(ge=Math.pow(10,l),re=Math.ceil(re*ge)/ge),i==="ticks"?(fe=Math.floor(E/re)*re,N=Math.ceil(k/re)*re):(fe=E,N=k),A&&D&&s&&GX((a-o)/s,re/1e3)?(F=Math.round(Math.min((a-o)/re,d)),re=(a-o)/F,fe=o,N=a):z?(fe=A?o:fe,N=D?a:N,F=c-1,re=(N-fe)/F):(F=(N-fe)/re,Xg(F,Math.round(F),re/1e3)?F=Math.round(F):F=Math.ceil(F));const Y=Math.max(n3(re),n3(fe));ge=Math.pow(10,Wi(l)?Y:l),fe=Math.round(fe*ge)/ge,N=Math.round(N*ge)/ge;let B=0;for(A&&(v&&fe!==o?(n.push({value:o}),fe<o&&B++,Xg(Math.round((fe+B*re)*ge)/ge,o,lL(o,X,t))&&B++):fe<o&&B++);B<F;++B){const I=Math.round((fe+B*re)*ge)/ge;if(D&&I>a)break;n.push({value:I})}return D&&v&&N!==a?n.length&&Xg(n[n.length-1].value,a,lL(a,X,t))?n[n.length-1].value=a:n.push({value:a}):(!D||N===a)&&n.push({value:N}),n}function lL(t,e,{horizontal:n,minRotation:r}){const i=bc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ay extends Sf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Wi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Jc(i),c=Jc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Xte(i,s);return e.bounds==="ticks"&&LP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Bm(e,this.chart.options.locale,this.options.ticks.format)}}class Kb extends ay{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?e:0,this.max=ko(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=bc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ye(Kb,"id","linear"),Ye(Kb,"defaults",{ticks:{callback:Wy.formatters.numeric}});const Lm=t=>Math.floor(dd(t)),Zd=(t,e)=>Math.pow(10,Lm(t)+e);function uL(t){return t/Math.pow(10,Lm(t))===1}function cL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Jte(t,e){const n=e-t;let r=Lm(n);for(;cL(t,e,r)>10;)r++;for(;cL(t,e,r)<10;)r--;return Math.min(r,Lm(t))}function Qte(t,{min:e,max:n}){e=_u(t.min,e);const r=[],i=Lm(e);let s=Jte(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,d=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-d)/Math.pow(10,s)),v=_u(t.min,Math.round((l+d+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:uL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+d+p*Math.pow(10,s))*o)/o;const g=_u(t.max,v);return r.push({value:g,major:uL(g),significand:p}),r}class Zb extends Sf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ay.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return ko(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?Math.max(0,e):null,this.max=ko(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ko(this._userMin)&&(this.min=e===Zd(this.min,0)?Zd(this.min,-1):Zd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Zd(r,-1)),o(Zd(i,1)))),r<=0&&s(Zd(i,-1)),i<=0&&o(Zd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Qte(n,this);return e.bounds==="ticks"&&LP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Bm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=dd(e),this._valueRange=dd(this.max)-dd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(dd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ye(Zb,"id","logarithmic"),Ye(Zb,"defaults",{ticks:{callback:Wy.formatters.logarithmic,major:{enabled:!0}}});function Xb(t){const e=t.ticks;if(e.display&&t.display){const n=yl(e.backdropPadding);return ai(e.font&&e.font.size,Ao.font.size)+n.height}return 0}function ene(t,e,n){return n=Ks(n)?n:[n],{w:uJ(t,e.string,n),h:n.length*e.lineHeight}}function hL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function tne(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Bs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),p=ga(c.font),v=ene(t.ctx,p,t._pointLabels[l]);r[l]=v;const g=wu(t.getIndexAngle(l)+a),x=Math.round(Z_(g)),E=hL(x,d.x,v.w,0,180),k=hL(x,d.y,v.h,90,270);nne(n,e,g,E,k)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=sne(t,r,i)}function nne(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function rne(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Z_(wu(l.angle+Go))),d=lne(l.y,a.h,c),p=one(c),v=ane(l.x,a.w,p);return{visible:!0,x:l.x,y:d,textAlign:p,left:v,top:d,right:v+a.w,bottom:d+a.h}}function ine(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Dh({x:n,y:r},e)||Dh({x:n,y:s},e)||Dh({x:i,y:r},e)||Dh({x:i,y:s},e))}function sne(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Xb(s)/2,additionalAngle:o?Bs/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=e[d];const p=rne(t,d,l);r.push(p),a==="auto"&&(p.visible=ine(p,c),p.visible&&(c=p))}return r}function one(t){return t===0||t===180?"center":t<180?"left":"right"}function ane(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function lne(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function une(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Wi(a)){const l=ff(e.borderRadius),c=yl(e.backdropPadding);t.fillStyle=a;const d=r-c.left,p=i-c.top,v=s-r+c.width,g=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),wm(t,{x:d,y:p,w:v,h:g,radius:l}),t.fill()):t.fillRect(d,p,v,g)}}function cne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));une(n,o,s);const a=ga(o.font),{x:l,y:c,textAlign:d}=s;_f(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function pM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Is);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function hne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),pM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function dne(t,e,n){return kd(t,{label:n,index:e,type:"pointLabel"})}class Ag extends ay{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=yl(Xb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ko(e)&&!isNaN(e)?e:0,this.max=ko(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Xb(this.options))}generateTickLabels(e){ay.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=ks(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?tne(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Is/(this._pointLabels.length||1),r=this.options.startAngle||0;return wu(e*n+bc(r))}getDistanceFromCenterForValue(e){if(Wi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Wi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return dne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Go+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),pM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&cne(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(d.value);const v=this.getContext(p),g=i.setContext(v),x=s.setContext(v);hne(this,g,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=d;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),d=ga(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=yl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-d.size/2-p.top,o+p.width,d.size+p.height)}_f(e,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ye(Ag,"id","radialLinear"),Ye(Ag,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Wy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ye(Ag,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ye(Ag,"descriptors",{angleLines:{_fallback:"grid"}});const Zy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},eu=Object.keys(Zy);function dL(t,e){return t-e}function fL(t,e){if(Wi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ko(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ap(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function pL(t,e,n,r){const i=eu.length;for(let s=eu.indexOf(t);s<i-1;++s){const o=Zy[eu[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return eu[s]}return eu[i-1]}function fne(t,e,n,r,i){for(let s=eu.length-1;s>=eu.indexOf(n);s--){const o=eu[s];if(Zy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return eu[n?eu.indexOf(n):0]}function pne(t){for(let e=eu.indexOf(t)+1,n=eu.length;e<n;++e)if(Zy[eu[e]].common)return eu[e]}function gL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=X_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function gne(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function mL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:gne(t,r,i,n)}class Sm extends Sf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new YP._date(e.adapters.date);i.init(n),Zg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:fL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ko(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=ko(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=ZX(i,s,o);return this._unit=n.unit||(r.autoSkip?pL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):fne(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:pne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),mL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Pa(n,0,o),r=Pa(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||pL(s.minUnit,n,r,this._getLabelCapacity(n)),a=ai(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Ap(l)||l===!0,d={};let p=n,v,g;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,g=0;v<r;v=+e.add(v,a,o),g++)gL(d,v,x);return(v===r||i.bounds==="ticks"||g===1)&&gL(d,v,x),Object.keys(d).sort(dL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return ks(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],p=c&&a[c],v=r[n],g=c&&p&&v&&v.major;return this._adapter.format(e,i||(g?p:d))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=bc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,mL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(fL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return EP(e.sort(dL))}}Ye(Sm,"id","time"),Ye(Sm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function H0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Th(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Th(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Jb extends Sm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=H0(n,this.min),this._tableRange=H0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],l=i[o-1],c=i[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(H0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return H0(this._table,r*this._tableRange+this._minPos,!0)}}Ye(Jb,"id","timeseries"),Ye(Jb,"defaults",Sm.defaults);var mne=Object.freeze({__proto__:null,CategoryScale:Yb,LinearScale:Kb,LogarithmicScale:Zb,RadialLinearScale:Ag,TimeScale:Sm,TimeSeriesScale:Jb});const vne=[SQ,Qee,qte,mne];Hc.register(...vne);const gM=6048e5,yne=864e5,Rm=6e4,Fm=36e5,bne=1e3,vL=Symbol.for("constructDateFrom");function To(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&vL in t?t[vL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Zr(t,e){return To(e||t,t)}function Xy(t,e,n){const r=Zr(t,n==null?void 0:n.in);return isNaN(e)?To((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function uw(t,e,n){const r=Zr(t,n==null?void 0:n.in);if(isNaN(e))return To(t,NaN);if(!e)return r;const i=r.getDate(),s=To(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function cw(t,e,n){return To(t,+Zr(t)+e)}function _ne(t,e,n){return cw(t,e*Fm)}let wne={};function Cf(){return wne}function th(t,e){var a,l,c,d;const n=Cf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Zr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Op(t,e){return th(t,{...e,weekStartsOn:1})}function mM(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getFullYear(),i=To(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Op(i),o=To(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Op(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function ly(t){const e=Zr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ef(t,...e){const n=To.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Qb(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function vM(t,e,n){const[r,i]=Ef(n==null?void 0:n.in,t,e),s=Qb(r),o=Qb(i),a=+s-ly(s),l=+o-ly(o);return Math.round((a-l)/yne)}function xne(t,e){const n=mM(t,e),r=To(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Op(r)}function Lne(t,e,n){const r=Zr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*Rm),r}function Sne(t,e,n){return uw(t,e*3,n)}function Cne(t,e,n){return cw(t,e*1e3)}function Ene(t,e,n){return Xy(t,e*7,n)}function Pne(t,e,n){return uw(t,e*12,n)}function tm(t,e){const n=+Zr(t)-+Zr(e);return n<0?-1:n>0?1:n}function Mne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function yM(t){return!(!Mne(t)&&typeof t!="number"||isNaN(+Zr(t)))}function kne(t,e,n){const[r,i]=Ef(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Ane(t,e,n){const[r,i]=Ef(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function bM(t,e,n){const[r,i]=Ef(n==null?void 0:n.in,t,e),s=yL(r,i),o=Math.abs(vM(r,i));r.setDate(r.getDate()-s*o);const a=+(yL(r,i)===-s),l=s*(o-a);return l===0?0:l}function yL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function jm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Tne(t,e,n){const[r,i]=Ef(n==null?void 0:n.in,t,e),s=(+r-+i)/Fm;return jm(n==null?void 0:n.roundingMethod)(s)}function hw(t,e){return+Zr(t)-+Zr(e)}function Dne(t,e,n){const r=hw(t,e)/Rm;return jm(n==null?void 0:n.roundingMethod)(r)}function _M(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function wM(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function One(t,e){const n=Zr(t,e==null?void 0:e.in);return+_M(n,e)==+wM(n,e)}function xM(t,e,n){const[r,i,s]=Ef(n==null?void 0:n.in,t,t,e),o=tm(i,s),a=Math.abs(kne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=tm(i,s)===-o;One(r)&&a===1&&tm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Nne(t,e,n){const r=xM(t,e,n)/3;return jm(n==null?void 0:n.roundingMethod)(r)}function Ine(t,e,n){const r=hw(t,e)/1e3;return jm(n==null?void 0:n.roundingMethod)(r)}function Bne(t,e,n){const r=bM(t,e,n)/7;return jm(n==null?void 0:n.roundingMethod)(r)}function Rne(t,e,n){const[r,i]=Ef(n==null?void 0:n.in,t,e),s=tm(r,i),o=Math.abs(Ane(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=tm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Fne(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function jne(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function zne(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function LM(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function $ne(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Vne(t,e){var a,l;const n=Cf(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Zr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Une(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Hne(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Wne(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const Gne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qne=(t,e,n)=>{let r;const i=Gne[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function A2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Yne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xne={date:A2({formats:Yne,defaultWidth:"full"}),time:A2({formats:Kne,defaultWidth:"full"}),dateTime:A2({formats:Zne,defaultWidth:"full"})},Jne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qne=(t,e,n,r)=>Jne[t];function dg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const ere={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ire={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ore=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},are={ordinalNumber:ore,era:dg({values:ere,defaultWidth:"wide"}),quarter:dg({values:tre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:dg({values:nre,defaultWidth:"wide"}),day:dg({values:rre,defaultWidth:"wide"}),dayPeriod:dg({values:ire,defaultWidth:"wide",formattingValues:sre,defaultFormattingWidth:"wide"})};function fg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?ure(a,p=>p.test(o)):lre(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function lre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ure(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function cre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const hre=/^(\d+)(th|st|nd|rd)?/i,dre=/\d+/i,fre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pre={any:[/^b/i,/^(a|c)/i]},gre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mre={any:[/1/i,/2/i,/3/i,/4/i]},vre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_re={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lre={ordinalNumber:cre({matchPattern:hre,parsePattern:dre,valueCallback:t=>parseInt(t,10)}),era:fg({matchPatterns:fre,defaultMatchWidth:"wide",parsePatterns:pre,defaultParseWidth:"any"}),quarter:fg({matchPatterns:gre,defaultMatchWidth:"wide",parsePatterns:mre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fg({matchPatterns:vre,defaultMatchWidth:"wide",parsePatterns:yre,defaultParseWidth:"any"}),day:fg({matchPatterns:bre,defaultMatchWidth:"wide",parsePatterns:_re,defaultParseWidth:"any"}),dayPeriod:fg({matchPatterns:wre,defaultMatchWidth:"any",parsePatterns:xre,defaultParseWidth:"any"})},SM={code:"en-US",formatDistance:qne,formatLong:Xne,formatRelative:Qne,localize:are,match:Lre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Sre(t,e){const n=Zr(t,e==null?void 0:e.in);return vM(n,LM(n))+1}function CM(t,e){const n=Zr(t,e==null?void 0:e.in),r=+Op(n)-+xne(n);return Math.round(r/gM)+1}function dw(t,e){var d,p,v,g;const n=Zr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Cf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(v=i.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=To((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=th(o,e),l=To((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=th(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Cre(t,e){var a,l,c,d;const n=Cf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=dw(t,e),s=To((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),th(s,e)}function EM(t,e){const n=Zr(t,e==null?void 0:e.in),r=+th(n,e)-+Cre(n,e);return Math.round(r/gM)+1}function as(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Jh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return as(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):as(n+1,2)},d(t,e){return as(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return as(t.getHours()%12||12,e.length)},H(t,e){return as(t.getHours(),e.length)},m(t,e){return as(t.getMinutes(),e.length)},s(t,e){return as(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return as(i,e.length)}},Qf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Jh.y(t,e)},Y:function(t,e,n,r){const i=dw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return as(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):as(s,e.length)},R:function(t,e){const n=mM(t);return as(n,e.length)},u:function(t,e){const n=t.getFullYear();return as(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return as(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return as(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Jh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return as(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=EM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):as(i,e.length)},I:function(t,e,n){const r=CM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):as(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Jh.d(t,e)},D:function(t,e,n){const r=Sre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):as(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return as(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return as(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return as(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Qf.noon:r===0?i=Qf.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Qf.evening:r>=12?i=Qf.afternoon:r>=4?i=Qf.morning:i=Qf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Jh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Jh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):as(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):as(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Jh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Jh.s(t,e)},S:function(t,e){return Jh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return wL(r);case"XXXX":case"XX":return tf(r);case"XXXXX":case"XXX":default:return tf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return wL(r);case"xxxx":case"xx":return tf(r);case"xxxxx":case"xxx":default:return tf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_L(r,":");case"OOOO":default:return"GMT"+tf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_L(r,":");case"zzzz":default:return"GMT"+tf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return as(r,e.length)},T:function(t,e,n){return as(+t,e.length)}};function _L(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+as(s,2)}function wL(t,e){return t%60===0?(t>0?"-":"+")+as(Math.abs(t)/60,2):tf(t,e)}function tf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=as(Math.trunc(r/60),2),s=as(r%60,2);return n+i+e+s}const xL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ere=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return xL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",xL(r,e)).replace("{{time}}",PM(i,e))},e_={p:PM,P:Ere},Pre=/^D+$/,Mre=/^Y+$/,kre=["D","DD","YY","YYYY"];function MM(t){return Pre.test(t)}function kM(t){return Mre.test(t)}function t_(t,e,n){const r=Are(t,e,n);if(console.warn(r),kre.includes(t))throw new RangeError(r)}function Are(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Tre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ore=/^'([^]*?)'?$/,Nre=/''/g,Ire=/[a-zA-Z]/;function Bre(t,e,n){var d,p,v,g,x,E,k,A;const r=Cf(),i=(n==null?void 0:n.locale)??r.locale??SM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(v=r.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((A=(k=r.locale)==null?void 0:k.options)==null?void 0:A.weekStartsOn)??0,a=Zr(t,n==null?void 0:n.in);if(!yM(a))throw new RangeError("Invalid time value");let l=e.match(Dre).map(D=>{const z=D[0];if(z==="p"||z==="P"){const X=e_[z];return X(D,i.formatLong)}return D}).join("").match(Tre).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const z=D[0];if(z==="'")return{isToken:!1,value:Rre(D)};if(bL[z])return{isToken:!0,value:D};if(z.match(Ire))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const z=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&kM(z)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&MM(z))&&t_(z,e,String(t));const X=bL[z[0]];return X(a,z,i.localize,c)}).join("")}function Rre(t){const e=t.match(Ore);return e?e[1].replace(Nre,"'"):t}function Fre(){return Object.assign({},Cf())}function jre(t,e){const n=Zr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function zre(t,e){const n=$re(e)?new e(0):To(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function $re(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Vre=10;class AM{constructor(){Ye(this,"subPriority",0)}validate(e,n){return!0}}class Ure extends AM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Hre extends AM{constructor(n,r){super();Ye(this,"priority",Vre);Ye(this,"subPriority",-1);this.context=n||(i=>To(r,i))}set(n,r){return r.timestampIsSet?n:To(n,zre(n,this.context))}}class ns{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Ure(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Wre extends ns{constructor(){super(...arguments);Ye(this,"priority",140);Ye(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const qo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Wc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yo(t,e){return t&&{value:e(t.value),rest:t.rest}}function po(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Gc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*Fm+s*Rm+o*bne),rest:e.slice(n[0].length)}}function TM(t){return po(qo.anyDigitsSigned,t)}function Do(t,e){switch(t){case 1:return po(qo.singleDigit,e);case 2:return po(qo.twoDigits,e);case 3:return po(qo.threeDigits,e);case 4:return po(qo.fourDigits,e);default:return po(new RegExp("^\\d{1,"+t+"}"),e)}}function uy(t,e){switch(t){case 1:return po(qo.singleDigitSigned,e);case 2:return po(qo.twoDigitsSigned,e);case 3:return po(qo.threeDigitsSigned,e);case 4:return po(qo.fourDigitsSigned,e);default:return po(new RegExp("^-?\\d{1,"+t+"}"),e)}}function fw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function DM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function OM(t){return t%400===0||t%4===0&&t%100!==0}class Gre extends ns{constructor(){super(...arguments);Ye(this,"priority",130);Ye(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Yo(Do(4,n),s);case"yo":return Yo(i.ordinalNumber(n,{unit:"year"}),s);default:return Yo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=DM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class qre extends ns{constructor(){super(...arguments);Ye(this,"priority",130);Ye(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Yo(Do(4,n),s);case"Yo":return Yo(i.ordinalNumber(n,{unit:"year"}),s);default:return Yo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=dw(n,s);if(i.isTwoDigitYear){const l=DM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),th(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),th(n,s)}}class Yre extends ns{constructor(){super(...arguments);Ye(this,"priority",130);Ye(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return uy(r==="R"?4:r.length,n)}set(n,r,i){const s=To(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Op(s)}}class Kre extends ns{constructor(){super(...arguments);Ye(this,"priority",130);Ye(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return uy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Zre extends ns{constructor(){super(...arguments);Ye(this,"priority",120);Ye(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Do(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Xre extends ns{constructor(){super(...arguments);Ye(this,"priority",120);Ye(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Do(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Jre extends ns{constructor(){super(...arguments);Ye(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ye(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Yo(po(qo.month,n),s);case"MM":return Yo(Do(2,n),s);case"Mo":return Yo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Qre extends ns{constructor(){super(...arguments);Ye(this,"priority",110);Ye(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Yo(po(qo.month,n),s);case"LL":return Yo(Do(2,n),s);case"Lo":return Yo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function eie(t,e,n){const r=Zr(t,n==null?void 0:n.in),i=EM(r,n)-e;return r.setDate(r.getDate()-i*7),Zr(r,n==null?void 0:n.in)}class tie extends ns{constructor(){super(...arguments);Ye(this,"priority",100);Ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return po(qo.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return th(eie(n,i,s),s)}}function nie(t,e,n){const r=Zr(t,n==null?void 0:n.in),i=CM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class rie extends ns{constructor(){super(...arguments);Ye(this,"priority",100);Ye(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return po(qo.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Op(nie(n,i))}}const iie=[31,28,31,30,31,30,31,31,30,31,30,31],sie=[31,29,31,30,31,30,31,31,30,31,30,31];class oie extends ns{constructor(){super(...arguments);Ye(this,"priority",90);Ye(this,"subPriority",1);Ye(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return po(qo.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=OM(i),o=n.getMonth();return s?r>=1&&r<=sie[o]:r>=1&&r<=iie[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class aie extends ns{constructor(){super(...arguments);Ye(this,"priority",90);Ye(this,"subpriority",1);Ye(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return po(qo.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear();return OM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function pw(t,e,n){var p,v,g,x;const r=Cf(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,s=Zr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Xy(s,d,n)}class lie extends ns{constructor(){super(...arguments);Ye(this,"priority",90);Ye(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class uie extends ns{constructor(){super(...arguments);Ye(this,"priority",90);Ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Yo(Do(r.length,n),o);case"eo":return Yo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class cie extends ns{constructor(){super(...arguments);Ye(this,"priority",90);Ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Yo(Do(r.length,n),o);case"co":return Yo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}function hie(t,e,n){const r=Zr(t,n==null?void 0:n.in),i=jre(r,n),s=e-i;return Xy(r,s,n)}class die extends ns{constructor(){super(...arguments);Ye(this,"priority",90);Ye(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Do(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Yo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Yo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Yo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Yo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=hie(n,i),n.setHours(0,0,0,0),n}}class fie extends ns{constructor(){super(...arguments);Ye(this,"priority",80);Ye(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class pie extends ns{constructor(){super(...arguments);Ye(this,"priority",80);Ye(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class gie extends ns{constructor(){super(...arguments);Ye(this,"priority",80);Ye(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class mie extends ns{constructor(){super(...arguments);Ye(this,"priority",70);Ye(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return po(qo.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class vie extends ns{constructor(){super(...arguments);Ye(this,"priority",70);Ye(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return po(qo.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class yie extends ns{constructor(){super(...arguments);Ye(this,"priority",70);Ye(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return po(qo.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class bie extends ns{constructor(){super(...arguments);Ye(this,"priority",70);Ye(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return po(qo.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class _ie extends ns{constructor(){super(...arguments);Ye(this,"priority",60);Ye(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return po(qo.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class wie extends ns{constructor(){super(...arguments);Ye(this,"priority",50);Ye(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return po(qo.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class xie extends ns{constructor(){super(...arguments);Ye(this,"priority",30);Ye(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Yo(Do(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Lie extends ns{constructor(){super(...arguments);Ye(this,"priority",10);Ye(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Gc(Wc.basicOptionalMinutes,n);case"XX":return Gc(Wc.basic,n);case"XXXX":return Gc(Wc.basicOptionalSeconds,n);case"XXXXX":return Gc(Wc.extendedOptionalSeconds,n);case"XXX":default:return Gc(Wc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-ly(n)-i)}}class Sie extends ns{constructor(){super(...arguments);Ye(this,"priority",10);Ye(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Gc(Wc.basicOptionalMinutes,n);case"xx":return Gc(Wc.basic,n);case"xxxx":return Gc(Wc.basicOptionalSeconds,n);case"xxxxx":return Gc(Wc.extendedOptionalSeconds,n);case"xxx":default:return Gc(Wc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-ly(n)-i)}}class Cie extends ns{constructor(){super(...arguments);Ye(this,"priority",40);Ye(this,"incompatibleTokens","*")}parse(n){return TM(n)}set(n,r,i){return[To(n,i*1e3),{timestampIsSet:!0}]}}class Eie extends ns{constructor(){super(...arguments);Ye(this,"priority",20);Ye(this,"incompatibleTokens","*")}parse(n){return TM(n)}set(n,r,i){return[To(n,i),{timestampIsSet:!0}]}}const Pie={G:new Wre,y:new Gre,Y:new qre,R:new Yre,u:new Kre,Q:new Zre,q:new Xre,M:new Jre,L:new Qre,w:new tie,I:new rie,d:new oie,D:new aie,E:new lie,e:new uie,c:new cie,i:new die,a:new fie,b:new pie,B:new gie,h:new mie,H:new vie,K:new yie,k:new bie,m:new _ie,s:new wie,S:new xie,X:new Lie,x:new Sie,t:new Cie,T:new Eie},Mie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Aie=/^'([^]*?)'?$/,Tie=/''/g,Die=/\S/,Oie=/[a-zA-Z]/;function Nie(t,e,n,r){var k,A,D,z,X,re,ge,fe;const i=()=>To((r==null?void 0:r.in)||n,NaN),s=Fre(),o=(r==null?void 0:r.locale)??s.locale??SM,a=(r==null?void 0:r.firstWeekContainsDate)??((A=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((z=(D=s.locale)==null?void 0:D.options)==null?void 0:z.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((re=(X=r==null?void 0:r.locale)==null?void 0:X.options)==null?void 0:re.weekStartsOn)??s.weekStartsOn??((fe=(ge=s.locale)==null?void 0:ge.options)==null?void 0:fe.weekStartsOn)??0;if(!e)return t?i():Zr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new Hre(r==null?void 0:r.in,n)],p=e.match(kie).map(N=>{const F=N[0];if(F in e_){const Y=e_[F];return Y(N,o.formatLong)}return N}).join("").match(Mie),v=[];for(let N of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&kM(N)&&t_(N,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&MM(N)&&t_(N,e,t);const F=N[0],Y=Pie[F];if(Y){const{incompatibleTokens:B}=Y;if(Array.isArray(B)){const R=v.find(q=>B.includes(q.token)||q.token===F);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${N}\` at the same time`)}else if(Y.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);v.push({token:F,fullToken:N});const I=Y.run(t,N,o.match,c);if(!I)return i();d.push(I.setter),t=I.rest}else{if(F.match(Oie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");if(N==="''"?N="'":F==="'"&&(N=Iie(N)),t.indexOf(N)===0)t=t.slice(N.length);else return i()}}if(t.length>0&&Die.test(t))return i();const g=d.map(N=>N.priority).sort((N,F)=>F-N).filter((N,F,Y)=>Y.indexOf(N)===F).map(N=>d.filter(F=>F.priority===N).sort((F,Y)=>Y.subPriority-F.subPriority)).map(N=>N[0]);let x=Zr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const N of g){if(!N.validate(x,c))return i();const F=N.set(x,E,c);Array.isArray(F)?(x=F[0],Object.assign(E,F[1])):x=F}return x}function Iie(t){return t.match(Aie)[1].replace(Tie,"'")}function Bie(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Rie(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Fie(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function jie(t,e){const n=()=>To(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Uie(t);let s;if(i.date){const c=Hie(i.date,r);s=Wie(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=Gie(i.time),isNaN(a)))return n();if(i.timezone){if(l=qie(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),d=Zr(0,e==null?void 0:e.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return Zr(o+a+l,e==null?void 0:e.in)}const W0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$ie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Vie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Uie(t){const e={},n=t.split(W0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],W0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(W0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=W0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Hie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Wie(t,e){if(e===null)return new Date(NaN);const n=t.match(zie);if(!n)return new Date(NaN);const r=!!n[4],i=pg(n[1]),s=pg(n[2])-1,o=pg(n[3]),a=pg(n[4]),l=pg(n[5])-1;if(r)return Jie(e,a,l)?Yie(e,a,l):new Date(NaN);{const c=new Date(0);return!Zie(e,s,o)||!Xie(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function pg(t){return t?parseInt(t):1}function Gie(t){const e=t.match($ie);if(!e)return NaN;const n=T2(e[1]),r=T2(e[2]),i=T2(e[3]);return Qie(n,r,i)?n*Fm+r*Rm+i*1e3:NaN}function T2(t){return t&&parseFloat(t.replace(",","."))||0}function qie(t){if(t==="Z")return 0;const e=t.match(Vie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return ese(r,i)?n*(r*Fm+i*Rm):NaN}function Yie(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Kie=[31,null,31,30,31,30,31,31,30,31,30,31];function NM(t){return t%400===0||t%4===0&&t%100!==0}function Zie(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Kie[e]||(NM(t)?29:28))}function Xie(t,e){return e>=1&&e<=(NM(t)?366:365)}function Jie(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Qie(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ese(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const tse={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};YP._date.override({_id:"date-fns",formats:function(){return tse},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Zr(t):n==="string"&&(typeof e=="string"?t=Nie(t,e,new Date,this.options):t=jie(t,this.options)),yM(t)?t.getTime():null},format:function(t,e){return Bre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return cw(t,e);case"second":return Cne(t,e);case"minute":return Lne(t,e);case"hour":return _ne(t,e);case"day":return Xy(t,e);case"week":return Ene(t,e);case"month":return uw(t,e);case"quarter":return Sne(t,e);case"year":return Pne(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return hw(t,e);case"second":return Ine(t,e);case"minute":return Dne(t,e);case"hour":return Tne(t,e);case"day":return bM(t,e);case"week":return Bne(t,e);case"month":return xM(t,e);case"quarter":return Nne(t,e);case"year":return Rne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Fie(t);case"minute":return Rie(t);case"hour":return Bie(t);case"day":return Qb(t);case"week":return th(t);case"isoWeek":return th(t,{weekStartsOn:+n});case"month":return jne(t);case"quarter":return Fne(t);case"year":return LM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Wne(t);case"minute":return Une(t);case"hour":return $ne(t);case"day":return _M(t);case"week":return Vne(t);case"month":return wM(t);case"quarter":return Hne(t);case"year":return zne(t);default:return t}}});const nse={class:"container mx-auto px-4 py-8"},rse={class:"mb-8"},ise={key:0,class:"mb-6"},sse={class:"flex gap-4"},ose=["disabled"],ase={key:0,value:""},lse=["value"],use={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},cse={class:"flex"},hse={class:"ml-3"},dse={class:"text-sm font-medium text-red-800"},fse={class:"mb-6"},pse={class:"flex gap-4"},gse=["disabled"],mse={key:0,value:""},vse={key:1,value:""},yse=["value"],bse=["disabled"],_se={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},wse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},xse={class:"font-medium"},Lse={class:"font-medium"},Sse={class:"font-medium"},Cse={class:"font-medium"},Ese={class:"font-medium"},Pse={class:"font-medium"},Mse={class:"md:col-span-2 lg:col-span-3 flex items-center"},kse=["href"],Ase={class:"mb-6"},Tse={class:"border-b border-gray-200"},Dse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Ose=["onClick"],Nse={key:2,class:"mb-8"},Ise={class:"text-sm text-gray-600 mb-4"},Bse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Rse={class:"bg-white rounded-lg shadow-md p-6"},Fse={class:"text-4xl font-bold text-primary-600 mb-2"},jse={class:"text-sm text-gray-600"},zse={class:"bg-white rounded-lg shadow-md p-6"},$se={class:"text-4xl font-bold text-primary-600 mb-2"},Vse={class:"mt-4"},Use={class:"w-full bg-gray-200 rounded-full h-2.5"},Hse={class:"bg-white rounded-lg shadow-md p-6"},Wse={class:"text-4xl font-bold text-primary-600 mb-2"},Gse={class:"text-sm text-gray-600"},qse={class:"bg-white rounded-lg shadow-md p-6"},Yse={class:"text-4xl font-bold text-primary-600 mb-2"},Kse={class:"text-sm text-gray-600"},Zse={class:"bg-white rounded-lg shadow-md p-6"},Xse={class:"text-4xl font-bold text-primary-600 mb-2"},Jse={class:"text-sm text-gray-600"},Qse={class:"bg-white rounded-lg shadow-md p-6"},eoe={class:"text-4xl font-bold text-primary-600 mb-2"},toe={class:"text-sm text-gray-600"},noe={key:3,class:"mb-8"},roe={class:"flex justify-between items-center mb-4"},ioe={class:"flex items-center gap-4"},soe={key:0,class:"text-sm text-gray-600"},ooe=["disabled"],aoe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},loe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},uoe=["value"],coe={key:0,class:"mt-1 text-sm text-red-600"},hoe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},doe={class:"bg-white rounded-lg shadow-md p-6"},foe={class:"chart-container"},poe={class:"bg-white rounded-lg shadow-md p-6"},goe={class:"chart-container"},moe={class:"bg-white rounded-lg shadow-md p-6"},voe={class:"chart-container"},yoe={class:"bg-white rounded-lg shadow-md p-6"},boe={class:"chart-container"},_oe={class:"bg-white rounded-lg shadow-md p-6"},woe={class:"chart-container"},xoe={class:"bg-white rounded-lg shadow-md p-6"},Loe={class:"chart-container"},Soe=Rs({__name:"MeteoView",setup(t){const e=ru(),n=ma(),r=Ct({}),i=Ct(new Date),s=Ct(""),o=Ct([]),a=Ct(""),l=Ct([]),c=Ct(null),d=Ct(""),p=Ct(""),v=Xn(()=>n.isAdmin);let g=null;const x=Xn(()=>!a.value||!o.value.length?null:o.value.find(ee=>ee.mac===a.value));function E(ee){return ee?ee.latitude&&ee.longitude&&ee.latitude!==0&&ee.longitude!==0:!1}function k(ee){return E(ee)?`${ee.latitude.toFixed(6)}, ${ee.longitude.toFixed(6)}`:""}function A(ee){if(!E(ee))return"#";const se=ee.latitude,de=ee.longitude,ze=encodeURIComponent(ee.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${se},${de}&query_place_id=${ze}`}async function D(){try{d.value="";const ee={};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",ee);const se=await U1.getDevices(ee);console.log("[fetchDevices] Réponse API:",se.data);let de;if(se.data&&se.data.devices)de=se.data.devices;else if(Array.isArray(se.data))de=se.data;else if(de=[],typeof se.data=="object"&&se.data!==null){for(const ze in se.data)if(Array.isArray(se.data[ze])){de=se.data[ze];break}}o.value=de.map(ze=>{var $e,et;return{id:ze.id,name:ze.name||`Station ${ze.mac}`,mac:ze.mac,model:(($e=ze.stationtype)==null?void 0:$e.split("_")[0])||"Inconnu",firmware_version:(et=ze.stationtype)!=null&&et.includes("_V")?ze.stationtype.split("_V")[1]:"1.0",timezone:ze.date_zone_id||"UTC",created_at:ze.createtime?new Date(ze.createtime*1e3).toISOString():new Date().toISOString(),latitude:ze.latitude||0,longitude:ze.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?(a.value=o.value[0].mac,await z()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(ee){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",ee),ee.response&&ee.response.data&&ee.response.data.error?d.value=ee.response.data.error:(d.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function z(){if(a.value)try{d.value="";const ee={mac:a.value};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",ee);const se=await U1.getRealTimeData(ee);console.log("[fetchWeatherData] Réponse API:",se.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:se.data&&"data"in se.data,hasCode:se.data&&"code"in se.data,topLevelKeys:se.data?Object.keys(se.data):[]});let de;se.data&&"data"in se.data?de=se.data.data:se.data&&("outdoor"in se.data||"indoor"in se.data)?de=se.data:(de={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=de,i.value=new Date,console.log("[fetchWeatherData] Données météo extraites:",r.value)}catch(ee){console.error("[fetchWeatherData] Erreur:",ee),ee.response&&ee.response.data&&ee.response.data.error?d.value=ee.response.data.error:(d.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}}function X(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":((se-32)*5/9).toFixed(1)}function re(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*1.60934).toFixed(1)}function ge(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*25.4).toFixed(1)}function fe(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*33.8639).toFixed(1)}function N(ee){if(!ee)return"N/A";const se=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],de=Math.round(ee/22.5)%16;return se[de]}function F(ee){return ee?ee>0?"En hausse":"En baisse":"Stable"}async function Y(){if(v.value)try{const ee=await Al.getUsers({role:"ENTREPRISE"});l.value=ee.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ee){console.error("Erreur lors de la récupération des entreprises:",ee),e.error("Erreur lors de la récupération des entreprises")}}async function B(){try{o.value=[],a.value="",r.value={},d.value="",Object.values(te).forEach(ee=>{try{ee.destroy()}catch(se){console.error("Erreur lors de la destruction d'un graphique:",se)}}),te={},await D()}catch(ee){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",ee),e.error("Erreur lors du changement d'entreprise")}}const I=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],R=Ct("realtime"),q=Ct("today"),U=Ct("5min"),$=Ct(""),oe=Ct(""),J=()=>{const ee=new Date,se=new Date(ee);se.setDate(ee.getDate()-1),$.value=se.toISOString().split("T")[0],oe.value=se.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],ve=Xn(()=>{const ee=le(),se=new Date(ee.start),de=new Date(ee.end);de.setHours(23,59,59,999);const ze=Math.abs(de.getTime()-se.getTime()),$e=Math.ceil(ze/(1e3*60*60*24)),Ge=Math.abs(new Date().getTime()-se.getTime()),Qe=Math.ceil(Ge/(1e3*60*60*24));return _e.filter(Ke=>$e<=Ke.maxDays&&Qe<=Ke.maxPastDays)});Ai(q,ee=>{ee==="custom"&&J(),!ve.value.some(de=>de.value===U.value)&&ve.value.length>0&&(U.value=ve.value[0].value)}),Ai([$,oe],()=>{q.value==="custom"&&!ve.value.some(se=>se.value===U.value)&&ve.value.length>0&&(U.value=ve.value[0].value)});const ke=Ct(null),W=Ct(null),V=Ct(null),K=Ct(null),pe=Ct(null),he=Ct(null);let te={};const le=()=>{let ee=new Date,se=new Date;switch(q.value){case"today":ee.setHours(0,0,0,0);break;case"yesterday":ee.setDate(ee.getDate()-1),ee.setHours(0,0,0,0),se.setDate(se.getDate()-1),se.setHours(23,59,59,999);break;case"week":ee.setDate(ee.getDate()-7);break;case"month":ee.setDate(ee.getDate()-30);break;case"custom":ee=new Date($.value),se=new Date(oe.value);break}return{start:ee.toISOString().split("T")[0],end:se.toISOString().split("T")[0]}},Q=async()=>{try{if(Be.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(Be.value=!0,ve.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),Be.value=!1;return}ve.value.some(ze=>ze.value===U.value)||(U.value=ve.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const se=le(),de={mac:a.value,start_date:se.start,end_date:se.end,cycle_type:U.value};v.value&&c.value&&(de.entreprise=c.value),console.log("[updateAllCharts] Récupération des données historiques:",de);try{const $e=(await U1.getHistoryData(de)).data;console.log("[updateAllCharts] Données historiques reçues:",$e);const et=[{type:"temp",ref:ke},{type:"humidity",ref:W},{type:"pressure",ref:V},{type:"wind",ref:K},{type:"rain",ref:pe},{type:"solar",ref:he}];for(const Ge of et)if(console.log(`[updateAllCharts] Mise à jour du graphique ${Ge.type}`),Ge.ref.value){const Qe=me($e,Ge.type);De(Ge.type,Ge.ref.value,Qe)}s.value=new Date().toLocaleString()}catch(ze){console.error("[updateAllCharts] Erreur lors de la récupération des données:",ze),e.error("Erreur lors de la récupération des données historiques")}finally{Be.value=!1}}catch(ee){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",ee),e.error("Erreur lors de la mise à jour des graphiques"),Be.value=!1}},Be=Ct(!1),De=(ee,se,de)=>{try{if(te[ee]&&(te[ee].destroy(),delete te[ee]),console.log(`[updateChart] Données reçues pour ${ee}:`,de),!de.datasets||!de.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ee}`),te[ee]=new Hc(se,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let ze="hour";U.value==="5min"||U.value==="30min"?ze="hour":(U.value==="4hour"||U.value==="1day")&&(ze="day");const $e=le(),et=new Date($e.start),Ge=new Date($e.end);Ge.setHours(23,59,59,999);const Qe={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Ke){return Ke.length>0?new Date(Ke[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:ze,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:et.getTime(),max:Ge.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:Je(ee)},ticks:{callback:function(Ke){const xt=typeof Ke=="string"?parseFloat(Ke):Ke;switch(ee){case"temp":return xt.toFixed(1)+"°C";case"humidity":return xt.toFixed(0)+"%";case"pressure":return xt.toFixed(0)+" hPa";case"wind":case"rain":return xt.toFixed(1)+(ee==="wind"?" km/h":" mm");case"solar":return xt.toFixed(0)+" W/m²";default:return xt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};te[ee]=new Hc(se,{type:"line",data:{datasets:de.datasets||[]},options:Qe}),console.log(`[updateChart] Graphique ${ee} créé avec ${de.datasets.length} datasets`)}catch(ze){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${ee}:`,ze)}},Je=ee=>{switch(ee){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},me=(ee,se)=>{var et,Ge,Qe,Ke,xt,bt,yt,Wt,tn,yn,Ze,ot,rt,$t,Zt,Dn,mn,An,Jn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${se}:`,ee),!ee)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${se}`),null;let de;if("data"in ee)de=ee.data;else if(se in ee)de=ee;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${se}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${se}:`,de);const ze=[],$e=(Qt,xn,Cn,tr)=>{if(!Array.isArray(Qt)){console.warn(`[formatHistoryDataForChart] Les données pour ${xn} ne sont pas un tableau`);return}const vr=Qt.map(xr=>{const ur=parseFloat(String(xr.value));return{x:xr.time,y:tr?tr(ur):ur}}).filter(xr=>!isNaN(xr.y));vr.length>0&&ze.push({label:xn,data:vr,borderColor:Cn,fill:!1,tension:.4})};switch(se){case"temp":(Ge=(et=de.outdoor)==null?void 0:et.temperature)!=null&&Ge.list?$e(Object.entries(de.outdoor.temperature.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Température","#FF6384",Qt=>(Qt-32)*5/9):(Qe=de.outdoor)!=null&&Qe.temperature&&$e(de.outdoor.temperature,"Température","#FF6384",Qt=>(Qt-32)*5/9);break;case"humidity":(xt=(Ke=de.outdoor)==null?void 0:Ke.humidity)!=null&&xt.list?$e(Object.entries(de.outdoor.humidity.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Humidité","#36A2EB"):(bt=de.outdoor)!=null&&bt.humidity&&$e(de.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(Wt=(yt=de.pressure)==null?void 0:yt.absolute)!=null&&Wt.list?$e(Object.entries(de.pressure.absolute.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Pression","#4BC0C0",Qt=>Qt*33.8639):(tn=de.pressure)!=null&&tn.absolute&&$e(de.pressure.absolute,"Pression","#4BC0C0",Qt=>Qt*33.8639);break;case"wind":(Ze=(yn=de.wind)==null?void 0:yn.wind_speed)!=null&&Ze.list?($e(Object.entries(de.wind.wind_speed.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Vitesse du vent","#FFCE56",Qt=>Qt*1.60934),(ot=de.wind.wind_gust)!=null&&ot.list&&$e(Object.entries(de.wind.wind_gust.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Rafales","#FF9F40",Qt=>Qt*1.60934)):(rt=de.wind)!=null&&rt.wind_speed&&($e(de.wind.wind_speed,"Vitesse du vent","#FFCE56",Qt=>Qt*1.60934),de.wind.wind_gust&&$e(de.wind.wind_gust,"Rafales","#FF9F40",Qt=>Qt*1.60934));break;case"rain":(Zt=($t=de.rainfall)==null?void 0:$t.daily)!=null&&Zt.list?$e(Object.entries(de.rainfall.daily.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Précipitations journalières","#9966FF",Qt=>Qt*25.4):(Dn=de.rainfall)!=null&&Dn.daily&&$e(de.rainfall.daily,"Précipitations journalières","#9966FF",Qt=>Qt*25.4);break;case"solar":(An=(mn=de.solar_and_uvi)==null?void 0:mn.solar)!=null&&An.list?$e(Object.entries(de.solar_and_uvi.solar.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Rayonnement solaire","#FF9F40"):(Jn=de.solar_and_uvi)!=null&&Jn.solar&&$e(de.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${se}:`,ze),{datasets:ze}};return Ku(()=>{Object.values(te).forEach(ee=>ee.destroy())}),Ai([q,U,$,oe],()=>{R.value==="history"&&a.value&&Q()}),Zs(async()=>{const ee=[];v.value&&ee.push(Y()),await Promise.all(ee),await D(),g=window.setInterval(z,5*60*1e3)}),Ai(c,ee=>{v.value&&ee&&B()}),Ai(a,ee=>{ee&&R.value==="history"&&Q()}),Ai(R,ee=>{ee==="history"&&a.value&&Q()}),Ku(()=>{g&&clearInterval(g)}),(ee,se)=>{var de,ze,$e,et,Ge,Qe,Ke,xt,bt,yt,Wt,tn,yn,Ze,ot,rt,$t,Zt,Dn,mn,An,Jn,Qt,xn,Cn,tr,vr,xr,ur,Gr,Fs,Ti,Oo,Ts,nr,Ds,No,at;return Ae(),Ne("div",nse,[C("div",rse,[se[38]||(se[38]=C("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),v.value?(Ae(),Ne("div",ise,[se[6]||(se[6]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),C("div",sse,[er(C("select",{"onUpdate:modelValue":se[0]||(se[0]=Ie=>c.value=Ie),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:B},[l.value.length?Jt("",!0):(Ae(),Ne("option",ase,"Chargement des entreprises...")),(Ae(!0),Ne(wn,null,Qn(l.value,Ie=>(Ae(),Ne("option",{key:Ie.id,value:Ie.id},Et(Ie.company_name||`${Ie.first_name} ${Ie.last_name}`),9,lse))),128))],40,ose),[[us,c.value]])])])):Jt("",!0),d.value?(Ae(),Ne("div",use,[C("div",cse,[se[7]||(se[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",hse,[C("h3",dse,Et(d.value),1)])])])):Jt("",!0),C("div",fse,[se[17]||(se[17]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),C("div",pse,[er(C("select",{"onUpdate:modelValue":se[1]||(se[1]=Ie=>a.value=Ie),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||d.value)},[!o.value.length&&!d.value?(Ae(),Ne("option",mse,"Chargement des stations...")):Jt("",!0),d.value?(Ae(),Ne("option",vse,"Aucune station disponible")):Jt("",!0),(Ae(!0),Ne(wn,null,Qn(o.value,Ie=>(Ae(),Ne("option",{key:Ie.mac,value:Ie.mac},Et(Ie.name)+" ("+Et(Ie.model)+" - v"+Et(Ie.firmware_version)+") ",9,yse))),128))],8,gse),[[us,a.value]]),C("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||d.value)}," Actualiser ",8,bse)]),x.value?(Ae(),Ne("div",_se,[se[16]||(se[16]=C("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),C("div",wse,[C("div",null,[se[8]||(se[8]=C("span",{class:"text-gray-500"},"Modèle:",-1)),C("p",xse,Et(x.value.model),1)]),C("div",null,[se[9]||(se[9]=C("span",{class:"text-gray-500"},"Version:",-1)),C("p",Lse,Et(x.value.firmware_version),1)]),C("div",null,[se[10]||(se[10]=C("span",{class:"text-gray-500"},"ID:",-1)),C("p",Sse,Et(x.value.id),1)]),C("div",null,[se[11]||(se[11]=C("span",{class:"text-gray-500"},"MAC:",-1)),C("p",Cse,Et(x.value.mac),1)]),C("div",null,[se[12]||(se[12]=C("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),C("p",Ese,Et(x.value.timezone),1)]),C("div",null,[se[13]||(se[13]=C("span",{class:"text-gray-500"},"Installation:",-1)),C("p",Pse,Et(new Date(x.value.created_at).toLocaleDateString()),1)]),C("div",Mse,[se[15]||(se[15]=C("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Ae(),Ne("a",{key:0,href:A(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[se[14]||(se[14]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),ci(" "+Et(k(x.value)),1)],8,kse)):Jt("",!0)])])])):Jt("",!0)]),C("div",Ase,[C("div",Tse,[C("nav",Dse,[(Ae(),Ne(wn,null,Qn(I,Ie=>C("button",{key:Ie.id,onClick:ct=>R.value=Ie.id,class:gi([R.value===Ie.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Et(Ie.name),11,Ose)),64))])])]),R.value==="realtime"?(Ae(),Ne("div",Nse,[C("p",Ise," Dernière mise à jour : "+Et(i.value?new Date(i.value).toLocaleString():"Jamais"),1),C("div",Bse,[C("div",Rse,[se[18]||(se[18]=C("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),C("div",Fse,Et(X((ze=(de=r.value.outdoor)==null?void 0:de.temperature)==null?void 0:ze.value))+"°C ",1),C("div",jse," Min: "+Et(X(((et=($e=r.value.outdoor)==null?void 0:$e.temperature)==null?void 0:et.min)||"0"))+"°C Max: "+Et(X(((Qe=(Ge=r.value.outdoor)==null?void 0:Ge.temperature)==null?void 0:Qe.max)||"0"))+"°C ",1)]),C("div",zse,[se[19]||(se[19]=C("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),C("div",$se,Et(((xt=(Ke=r.value.outdoor)==null?void 0:Ke.humidity)==null?void 0:xt.value)||"0")+"% ",1),C("div",Vse,[C("div",Use,[C("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Nl({width:`${((yt=(bt=r.value.outdoor)==null?void 0:bt.humidity)==null?void 0:yt.value)||0}%`})},null,4)])])]),C("div",Hse,[se[20]||(se[20]=C("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),C("div",Wse,Et(fe((tn=(Wt=r.value.pressure)==null?void 0:Wt.absolute)==null?void 0:tn.value))+" hPa ",1),C("div",Gse," Tendance: "+Et(F((Ze=(yn=r.value.pressure)==null?void 0:yn.absolute)==null?void 0:Ze.trend)),1)]),C("div",qse,[se[22]||(se[22]=C("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),C("div",Yse,Et(re(((rt=(ot=r.value.wind)==null?void 0:ot.speed)==null?void 0:rt.value)||((Zt=($t=r.value.wind)==null?void 0:$t.wind_speed)==null?void 0:Zt.value)))+" km/h ",1),C("div",Kse,[ci(" Direction: "+Et(N(((mn=(Dn=r.value.wind)==null?void 0:Dn.direction)==null?void 0:mn.value)||((Jn=(An=r.value.wind)==null?void 0:An.wind_direction)==null?void 0:Jn.value)))+" ",1),se[21]||(se[21]=C("br",null,null,-1)),ci(" Rafales: "+Et(re(((xn=(Qt=r.value.wind)==null?void 0:Qt.gust)==null?void 0:xn.value)||((tr=(Cn=r.value.wind)==null?void 0:Cn.wind_gust)==null?void 0:tr.value)))+" km/h ",1)])]),C("div",Zse,[se[24]||(se[24]=C("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),C("div",Xse,Et(ge((xr=(vr=r.value.rainfall)==null?void 0:vr.daily)==null?void 0:xr.value))+" mm ",1),C("div",Jse,[ci(" Taux: "+Et(ge(((Gr=(ur=r.value.rainfall)==null?void 0:ur.rate)==null?void 0:Gr.value)||((Ti=(Fs=r.value.rainfall)==null?void 0:Fs.rain_rate)==null?void 0:Ti.value)))+" mm/h ",1),se[23]||(se[23]=C("br",null,null,-1)),ci(" Mensuel: "+Et(ge((Ts=(Oo=r.value.rainfall)==null?void 0:Oo.monthly)==null?void 0:Ts.value))+" mm ",1)])]),C("div",Qse,[se[25]||(se[25]=C("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),C("div",eoe,Et(((Ds=(nr=r.value.solar_and_uvi)==null?void 0:nr.solar)==null?void 0:Ds.value)||"0")+" W/m² ",1),C("div",toe," UV: "+Et(((at=(No=r.value.solar_and_uvi)==null?void 0:No.uvi)==null?void 0:at.value)||"0"),1)])])])):R.value==="history"?(Ae(),Ne("div",noe,[C("div",roe,[se[26]||(se[26]=C("h2",{class:"text-xl font-semibold"},"Données historiques",-1)),C("div",ioe,[s.value?(Ae(),Ne("div",soe," Dernière mise à jour: "+Et(s.value),1)):Jt("",!0),C("button",{onClick:Q,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,ooe)])]),C("div",aoe,[C("div",null,[se[28]||(se[28]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),er(C("select",{"onUpdate:modelValue":se[2]||(se[2]=Ie=>q.value=Ie),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},se[27]||(se[27]=[Lu('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Période personnalisée</option>',5)]),512),[[us,q.value]])]),q.value==="custom"?(Ae(),Ne("div",loe,[C("div",null,[se[29]||(se[29]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),er(C("input",{type:"date","onUpdate:modelValue":se[3]||(se[3]=Ie=>$.value=Ie),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Li,$.value]])]),C("div",null,[se[30]||(se[30]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),er(C("input",{type:"date","onUpdate:modelValue":se[4]||(se[4]=Ie=>oe.value=Ie),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Li,oe.value]])])])):Jt("",!0),C("div",null,[se[31]||(se[31]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),er(C("select",{"onUpdate:modelValue":se[5]||(se[5]=Ie=>U.value=Ie),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ae(!0),Ne(wn,null,Qn(ve.value,Ie=>(Ae(),Ne("option",{key:Ie.value,value:Ie.value},Et(Ie.label),9,uoe))),128))],512),[[us,U.value]]),p.value?(Ae(),Ne("div",coe,Et(p.value),1)):Jt("",!0)])]),C("div",hoe,[C("div",doe,[se[32]||(se[32]=C("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),C("div",foe,[C("canvas",{ref_key:"tempChart",ref:ke},null,512)])]),C("div",poe,[se[33]||(se[33]=C("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),C("div",goe,[C("canvas",{ref_key:"humidityChart",ref:W},null,512)])]),C("div",moe,[se[34]||(se[34]=C("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),C("div",voe,[C("canvas",{ref_key:"pressureChart",ref:V},null,512)])]),C("div",yoe,[se[35]||(se[35]=C("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),C("div",boe,[C("canvas",{ref_key:"windChart",ref:K},null,512)])]),C("div",_oe,[se[36]||(se[36]=C("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),C("div",woe,[C("canvas",{ref_key:"rainChart",ref:pe},null,512)])]),C("div",xoe,[se[37]||(se[37]=C("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),C("div",Loe,[C("canvas",{ref_key:"solarChart",ref:he},null,512)])])])])):Jt("",!0)])])}}}),Coe=nh(Soe,[["__scopeId","data-v-9a089f70"]]),IM=KB({history:EB("/"),routes:[{path:"/",name:"home",component:B5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:Coe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:$K,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:dY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Mh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Oj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Mh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Mh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:tj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:fX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:B5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Mh(()=>import("./NotFoundView.js"),[])}]});IM.beforeEach(async(t,e,n)=>{var a,l;const r=ma();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Eoe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await Mh(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),c}const gw=Bv(O9),BM=rI();gw.use(BM);gw.use(IM);const Poe=ma(BM);window.INITIAL_STATE&&Poe.initialize(window.INITIAL_STATE);gw.mount("#app");Eoe({immediate:!0,onRegistered(t){t&&console.log("SW enregistré:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{cs as _,iu as a,C as b,Ne as c,Rs as d,Jt as e,qn as f,ci as g,er as h,Ae as i,Lu as j,mi as k,Wu as l,yS as m,gi as n,Zs as o,XB as p,Dm as q,Ct as r,Ea as s,Et as t,ma as u,Li as v,tu as w,B_ as x};

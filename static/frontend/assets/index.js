const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapView.js","assets/MapView.css"])))=>i.map(i=>d[i]);
var NT=Object.defineProperty;var BT=(t,e,n)=>e in t?NT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var tt=(t,e,n)=>BT(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Iv(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const di={},Gd=[],Mu=()=>{},RT=()=>!1,rm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),vb=t=>t.startsWith("onUpdate:"),Gi=Object.assign,yb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},FT=Object.prototype.hasOwnProperty,Ei=(t,e)=>FT.call(t,e),Yn=Array.isArray,qd=t=>pp(t)==="[object Map]",nd=t=>pp(t)==="[object Set]",Yw=t=>pp(t)==="[object Date]",jT=t=>pp(t)==="[object RegExp]",br=t=>typeof t=="function",ts=t=>typeof t=="string",ac=t=>typeof t=="symbol",Ri=t=>t!==null&&typeof t=="object",bb=t=>(Ri(t)||br(t))&&br(t.then)&&br(t.catch),z3=Object.prototype.toString,pp=t=>z3.call(t),zT=t=>pp(t).slice(8,-1),Nv=t=>pp(t)==="[object Object]",_b=t=>ts(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Yd=Iv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bv=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},UT=/-(\w)/g,fa=Bv(t=>t.replace(UT,(e,n)=>n?n.toUpperCase():"")),$T=/\B([A-Z])/g,Il=Bv(t=>t.replace($T,"-$1").toLowerCase()),im=Bv(t=>t.charAt(0).toUpperCase()+t.slice(1)),ag=Bv(t=>t?`on${im(t)}`:""),ol=(t,e)=>!Object.is(t,e),Zd=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},U3=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},K0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},X0=t=>{const e=ts(t)?Number(t):NaN;return isNaN(e)?t:e};let Zw;const Rv=()=>Zw||(Zw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),VT="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",HT=Iv(VT);function Fl(t){if(Yn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=ts(r)?YT(r):Fl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(ts(t)||Ri(t))return t}const WT=/;(?![^(]*\))/g,GT=/:([^]+)/,qT=/\/\*[^]*?\*\//g;function YT(t){const e={};return t.replace(qT,"").split(WT).forEach(n=>{if(n){const r=n.split(GT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function yi(t){let e="";if(ts(t))e=t;else if(Yn(t))for(let n=0;n<t.length;n++){const r=yi(t[n]);r&&(e+=r+" ")}else if(Ri(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function ZT(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ts(e)&&(t.class=yi(e)),n&&(t.style=Fl(n)),t}const KT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",XT=Iv(KT);function $3(t){return!!t||t===""}function JT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nf(t[r],e[r]);return n}function nf(t,e){if(t===e)return!0;let n=Yw(t),r=Yw(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ac(t),r=ac(e),n||r)return t===e;if(n=Yn(t),r=Yn(e),n||r)return n&&r?JT(t,e):!1;if(n=Ri(t),r=Ri(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!nf(t[o],e[o]))return!1}}return String(t)===String(e)}function Fv(t,e){return t.findIndex(n=>nf(n,e))}const V3=t=>!!(t&&t.__v_isRef===!0),jt=t=>ts(t)?t:t==null?"":Yn(t)||Ri(t)&&(t.toString===z3||!br(t.toString))?V3(t)?jt(t.value):JSON.stringify(t,H3,2):String(t),H3=(t,e)=>V3(e)?H3(t,e.value):qd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Ky(r,s)+" =>"]=i,n),{})}:nd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ky(n))}:ac(e)?Ky(e):Ri(e)&&!Yn(e)&&!Nv(e)?String(e):e,Ky=(t,e="")=>{var n;return ac(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sl;class wb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=sl,!e&&sl&&(this.index=(sl.scopes||(sl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=sl;try{return sl=this,e()}finally{sl=n}}}on(){sl=this}off(){sl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function xb(t){return new wb(t)}function Lb(){return sl}function W3(t,e=!1){sl&&sl.cleanups.push(t)}let Ji;const Xy=new WeakSet;class Tg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,sl&&sl.active&&sl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xy.has(this)&&(Xy.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||q3(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kw(this),Y3(this);const e=Ji,n=sc;Ji=this,sc=!0;try{return this.fn()}finally{Z3(this),Ji=e,sc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Eb(e);this.deps=this.depsTail=void 0,Kw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xy.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){e2(this)&&this.run()}get dirty(){return e2(this)}}let G3=0,lg,ug;function q3(t,e=!1){if(t.flags|=8,e){t.next=ug,ug=t;return}t.next=lg,lg=t}function Cb(){G3++}function Sb(){if(--G3>0)return;if(ug){let e=ug;for(ug=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;lg;){let e=lg;for(lg=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Y3(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Z3(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Eb(r),QT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function e2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(K3(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function K3(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Og))return;t.globalVersion=Og;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!e2(t)){t.flags&=-3;return}const n=Ji,r=sc;Ji=t,sc=!0;try{Y3(t);const i=t.fn(t._value);(e.version===0||ol(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ji=n,sc=r,Z3(t),t.flags&=-3}}function Eb(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Eb(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function QT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function e8(t,e){t.effect instanceof Tg&&(t=t.effect.fn);const n=new Tg(t);e&&Gi(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function t8(t){t.effect.stop()}let sc=!0;const X3=[];function cf(){X3.push(sc),sc=!1}function hf(){const t=X3.pop();sc=t===void 0?!0:t}function Kw(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ji;Ji=void 0;try{e()}finally{Ji=n}}}let Og=0;class n8{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ji||!sc||Ji===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ji)n=this.activeLink=new n8(Ji,this),Ji.deps?(n.prevDep=Ji.depsTail,Ji.depsTail.nextDep=n,Ji.depsTail=n):Ji.deps=Ji.depsTail=n,J3(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ji.depsTail,n.nextDep=void 0,Ji.depsTail.nextDep=n,Ji.depsTail=n,Ji.deps===n&&(Ji.deps=r)}return n}trigger(e){this.version++,Og++,this.notify(e)}notify(e){Cb();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Sb()}}}function J3(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)J3(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const J0=new WeakMap,$f=Symbol(""),t2=Symbol(""),Dg=Symbol("");function Ia(t,e,n){if(sc&&Ji){let r=J0.get(t);r||J0.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new jv),i.map=r,i.key=n),i.track()}}function fh(t,e,n,r,i,s){const o=J0.get(t);if(!o){Og++;return}const a=l=>{l&&l.trigger()};if(Cb(),e==="clear")o.forEach(a);else{const l=Yn(t),c=l&&_b(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,y)=>{(y==="length"||y===Dg||!ac(y)&&y>=f)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Dg)),e){case"add":l?c&&a(o.get("length")):(a(o.get($f)),qd(t)&&a(o.get(t2)));break;case"delete":l||(a(o.get($f)),qd(t)&&a(o.get(t2)));break;case"set":qd(t)&&a(o.get($f));break}}Sb()}function r8(t,e){const n=J0.get(t);return n&&n.get(e)}function Cd(t){const e=hi(t);return e===t?e:(Ia(e,"iterate",Dg),au(t)?e:e.map(Na))}function zv(t){return Ia(t=hi(t),"iterate",Dg),t}const i8={__proto__:null,[Symbol.iterator](){return Jy(this,Symbol.iterator,Na)},concat(...t){return Cd(this).concat(...t.map(e=>Yn(e)?Cd(e):e))},entries(){return Jy(this,"entries",t=>(t[1]=Na(t[1]),t))},every(t,e){return ih(this,"every",t,e,void 0,arguments)},filter(t,e){return ih(this,"filter",t,e,n=>n.map(Na),arguments)},find(t,e){return ih(this,"find",t,e,Na,arguments)},findIndex(t,e){return ih(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ih(this,"findLast",t,e,Na,arguments)},findLastIndex(t,e){return ih(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ih(this,"forEach",t,e,void 0,arguments)},includes(...t){return Qy(this,"includes",t)},indexOf(...t){return Qy(this,"indexOf",t)},join(t){return Cd(this).join(t)},lastIndexOf(...t){return Qy(this,"lastIndexOf",t)},map(t,e){return ih(this,"map",t,e,void 0,arguments)},pop(){return Pp(this,"pop")},push(...t){return Pp(this,"push",t)},reduce(t,...e){return Xw(this,"reduce",t,e)},reduceRight(t,...e){return Xw(this,"reduceRight",t,e)},shift(){return Pp(this,"shift")},some(t,e){return ih(this,"some",t,e,void 0,arguments)},splice(...t){return Pp(this,"splice",t)},toReversed(){return Cd(this).toReversed()},toSorted(t){return Cd(this).toSorted(t)},toSpliced(...t){return Cd(this).toSpliced(...t)},unshift(...t){return Pp(this,"unshift",t)},values(){return Jy(this,"values",Na)}};function Jy(t,e,n){const r=zv(t),i=r[e]();return r!==t&&!au(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const s8=Array.prototype;function ih(t,e,n,r,i,s){const o=zv(t),a=o!==t&&!au(t),l=o[e];if(l!==s8[e]){const p=l.apply(t,s);return a?Na(p):p}let c=n;o!==t&&(a?c=function(p,y){return n.call(this,Na(p),y,t)}:n.length>2&&(c=function(p,y){return n.call(this,p,y,t)}));const f=l.call(o,c,r);return a&&i?i(f):f}function Xw(t,e,n,r){const i=zv(t);let s=n;return i!==t&&(au(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Na(a),l,t)}),i[e](s,...r)}function Qy(t,e,n){const r=hi(t);Ia(r,"iterate",Dg);const i=r[e](...n);return(i===-1||i===!1)&&Vv(n[0])?(n[0]=hi(n[0]),r[e](...n)):i}function Pp(t,e,n=[]){cf(),Cb();const r=hi(t)[e].apply(t,n);return Sb(),hf(),r}const o8=Iv("__proto__,__v_isRef,__isVue"),Q3=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ac));function a8(t){ac(t)||(t=String(t));const e=hi(this);return Ia(e,"has",t),e.hasOwnProperty(t)}class eL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?oL:sL:s?iL:rL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Yn(e);if(!i){let l;if(o&&(l=i8[n]))return l;if(n==="hasOwnProperty")return a8}const a=Reflect.get(e,n,Bs(e)?e:r);return(ac(n)?Q3.has(n):o8(n))||(i||Ia(e,"get",n),s)?a:Bs(a)?o&&_b(n)?a:a.value:Ri(a)?i?kb(a):hu(a):a}}class tL extends eL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=rf(s);if(!au(r)&&!rf(r)&&(s=hi(s),r=hi(r)),!Yn(e)&&Bs(s)&&!Bs(r))return l?!1:(s.value=r,!0)}const o=Yn(e)&&_b(n)?Number(n)<e.length:Ei(e,n),a=Reflect.set(e,n,r,Bs(e)?e:i);return e===hi(i)&&(o?ol(r,s)&&fh(e,"set",n,r):fh(e,"add",n,r)),a}deleteProperty(e,n){const r=Ei(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&fh(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!ac(n)||!Q3.has(n))&&Ia(e,"has",n),r}ownKeys(e){return Ia(e,"iterate",Yn(e)?"length":$f),Reflect.ownKeys(e)}}class nL extends eL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const l8=new tL,u8=new nL,c8=new tL(!0),h8=new nL(!0),n2=t=>t,Fm=t=>Reflect.getPrototypeOf(t);function f8(t,e,n){return function(...r){const i=this.__v_raw,s=hi(i),o=qd(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),f=n?n2:e?r2:Na;return!e&&Ia(s,"iterate",l?t2:$f),{next(){const{value:p,done:y}=c.next();return y?{value:p,done:y}:{value:a?[f(p[0]),f(p[1])]:f(p),done:y}},[Symbol.iterator](){return this}}}}function jm(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function d8(t,e){const n={get(i){const s=this.__v_raw,o=hi(s),a=hi(i);t||(ol(i,a)&&Ia(o,"get",i),Ia(o,"get",a));const{has:l}=Fm(o),c=e?n2:t?r2:Na;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ia(hi(i),"iterate",$f),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=hi(s),a=hi(i);return t||(ol(i,a)&&Ia(o,"has",i),Ia(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=hi(a),c=e?n2:t?r2:Na;return!t&&Ia(l,"iterate",$f),a.forEach((f,p)=>i.call(s,c(f),c(p),o))}};return Gi(n,t?{add:jm("add"),set:jm("set"),delete:jm("delete"),clear:jm("clear")}:{add(i){!e&&!au(i)&&!rf(i)&&(i=hi(i));const s=hi(this);return Fm(s).has.call(s,i)||(s.add(i),fh(s,"add",i,i)),this},set(i,s){!e&&!au(s)&&!rf(s)&&(s=hi(s));const o=hi(this),{has:a,get:l}=Fm(o);let c=a.call(o,i);c||(i=hi(i),c=a.call(o,i));const f=l.call(o,i);return o.set(i,s),c?ol(s,f)&&fh(o,"set",i,s):fh(o,"add",i,s),this},delete(i){const s=hi(this),{has:o,get:a}=Fm(s);let l=o.call(s,i);l||(i=hi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&fh(s,"delete",i,void 0),c},clear(){const i=hi(this),s=i.size!==0,o=i.clear();return s&&fh(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=f8(i,t,e)}),n}function Uv(t,e){const n=d8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ei(n,i)&&i in r?n:r,i,s)}const p8={get:Uv(!1,!1)},g8={get:Uv(!1,!0)},m8={get:Uv(!0,!1)},v8={get:Uv(!0,!0)},rL=new WeakMap,iL=new WeakMap,sL=new WeakMap,oL=new WeakMap;function y8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function b8(t){return t.__v_skip||!Object.isExtensible(t)?0:y8(zT(t))}function hu(t){return rf(t)?t:$v(t,!1,l8,p8,rL)}function Pb(t){return $v(t,!1,c8,g8,iL)}function kb(t){return $v(t,!0,u8,m8,sL)}function _8(t){return $v(t,!0,h8,v8,oL)}function $v(t,e,n,r,i){if(!Ri(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=b8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Bc(t){return rf(t)?Bc(t.__v_raw):!!(t&&t.__v_isReactive)}function rf(t){return!!(t&&t.__v_isReadonly)}function au(t){return!!(t&&t.__v_isShallow)}function Vv(t){return t?!!t.__v_raw:!1}function hi(t){const e=t&&t.__v_raw;return e?hi(e):t}function Hv(t){return!Ei(t,"__v_skip")&&Object.isExtensible(t)&&U3(t,"__v_skip",!0),t}const Na=t=>Ri(t)?hu(t):t,r2=t=>Ri(t)?kb(t):t;function Bs(t){return t?t.__v_isRef===!0:!1}function kt(t){return aL(t,!1)}function Mb(t){return aL(t,!0)}function aL(t,e){return Bs(t)?t:new w8(t,e)}class w8{constructor(e,n){this.dep=new jv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:hi(e),this._value=n?e:Na(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||au(e)||rf(e);e=r?e:hi(e),ol(e,n)&&(this._rawValue=e,this._value=r?e:Na(e),this.dep.trigger())}}function x8(t){t.dep&&t.dep.trigger()}function ln(t){return Bs(t)?t.value:t}function L8(t){return br(t)?t():ln(t)}const C8={get:(t,e,n)=>e==="__v_raw"?t:ln(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Bs(i)&&!Bs(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Ab(t){return Bc(t)?t:new Proxy(t,C8)}class S8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new jv,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function lL(t){return new S8(t)}function Tb(t){const e=Yn(t)?new Array(t.length):{};for(const n in t)e[n]=uL(t,n);return e}class E8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return r8(hi(this._object),this._key)}}class P8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function k8(t,e,n){return Bs(t)?t:br(t)?new P8(t):Ri(t)&&arguments.length>1?uL(t,e,n):kt(t)}function uL(t,e,n){const r=t[e];return Bs(r)?r:new E8(t,e,n)}class M8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new jv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Og-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ji!==this)return q3(this,!0),!0}get value(){const e=this.dep.track();return K3(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function A8(t,e,n=!1){let r,i;return br(t)?r=t:(r=t.get,i=t.set),new M8(r,i,n)}const T8={GET:"get",HAS:"has",ITERATE:"iterate"},O8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},zm={},Q0=new WeakMap;let jh;function D8(){return jh}function cL(t,e=!1,n=jh){if(n){let r=Q0.get(n);r||Q0.set(n,r=[]),r.push(t)}}function I8(t,e,n=di){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=z=>i?z:au(z)||i===!1||i===0?dh(z,1):dh(z);let f,p,y,m,C=!1,S=!1;if(Bs(t)?(p=()=>t.value,C=au(t)):Bc(t)?(p=()=>c(t),C=!0):Yn(t)?(S=!0,C=t.some(z=>Bc(z)||au(z)),p=()=>t.map(z=>{if(Bs(z))return z.value;if(Bc(z))return c(z);if(br(z))return l?l(z,2):z()})):br(t)?e?p=l?()=>l(t,2):t:p=()=>{if(y){cf();try{y()}finally{hf()}}const z=jh;jh=f;try{return l?l(t,3,[m]):t(m)}finally{jh=z}}:p=Mu,e&&i){const z=p,H=i===!0?1/0:i;p=()=>dh(z(),H)}const T=Lb(),O=()=>{f.stop(),T&&T.active&&yb(T.effects,f)};if(s&&e){const z=e;e=(...H)=>{z(...H),O()}}let D=S?new Array(t.length).fill(zm):zm;const B=z=>{if(!(!(f.flags&1)||!f.dirty&&!z))if(e){const H=f.run();if(i||C||(S?H.some((J,Q)=>ol(J,D[Q])):ol(H,D))){y&&y();const J=jh;jh=f;try{const Q=[H,D===zm?void 0:S&&D[0]===zm?[]:D,m];l?l(e,3,Q):e(...Q),D=H}finally{jh=J}}}else f.run()};return a&&a(B),f=new Tg(p),f.scheduler=o?()=>o(B,!1):B,m=z=>cL(z,!1,f),y=f.onStop=()=>{const z=Q0.get(f);if(z){if(l)l(z,4);else for(const H of z)H();Q0.delete(f)}},e?r?B(!0):D=f.run():o?o(B.bind(null,!0),!0):f.run(),O.pause=f.pause.bind(f),O.resume=f.resume.bind(f),O.stop=O,O}function dh(t,e=1/0,n){if(e<=0||!Ri(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Bs(t))dh(t.value,e,n);else if(Yn(t))for(let r=0;r<t.length;r++)dh(t[r],e,n);else if(nd(t)||qd(t))t.forEach(r=>{dh(r,e,n)});else if(Nv(t)){for(const r in t)dh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&dh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const hL=[];function N8(t){hL.push(t)}function B8(){hL.pop()}function R8(t,e){}const F8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},j8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function gp(t,e,n,r){try{return r?t(...r):t()}catch(i){rd(i,e,n)}}function Ou(t,e,n,r){if(br(t)){const i=gp(t,e,n,r);return i&&bb(i)&&i.catch(s=>{rd(s,e,n)}),i}if(Yn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Ou(t[s],e,n,r));return i}}function rd(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||di;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const f=a.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,c)===!1)return}a=a.parent}if(s){cf(),gp(s,null,10,[t,l,c]),hf();return}}z8(t,n,i,r,o)}function z8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const al=[];let Mc=-1;const Kd=[];let zh=null,Bd=0;const fL=Promise.resolve();let ev=null;function ll(t){const e=ev||fL;return t?e.then(this?t.bind(this):t):e}function U8(t){let e=Mc+1,n=al.length;for(;e<n;){const r=e+n>>>1,i=al[r],s=Ng(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Ob(t){if(!(t.flags&1)){const e=Ng(t),n=al[al.length-1];!n||!(t.flags&2)&&e>=Ng(n)?al.push(t):al.splice(U8(e),0,t),t.flags|=1,dL()}}function dL(){ev||(ev=fL.then(pL))}function Ig(t){Yn(t)?Kd.push(...t):zh&&t.id===-1?zh.splice(Bd+1,0,t):t.flags&1||(Kd.push(t),t.flags|=1),dL()}function Jw(t,e,n=Mc+1){for(;n<al.length;n++){const r=al[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;al.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function tv(t){if(Kd.length){const e=[...new Set(Kd)].sort((n,r)=>Ng(n)-Ng(r));if(Kd.length=0,zh){zh.push(...e);return}for(zh=e,Bd=0;Bd<zh.length;Bd++){const n=zh[Bd];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zh=null,Bd=0}}const Ng=t=>t.id==null?t.flags&2?-1:1/0:t.id;function pL(t){try{for(Mc=0;Mc<al.length;Mc++){const e=al[Mc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),gp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Mc<al.length;Mc++){const e=al[Mc];e&&(e.flags&=-2)}Mc=-1,al.length=0,tv(),ev=null,(al.length||Kd.length)&&pL()}}let Rd,Um=[];function gL(t,e){var n,r;Rd=t,Rd?(Rd.enabled=!0,Um.forEach(({event:i,args:s})=>Rd.emit(i,...s)),Um=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{gL(s,e)}),setTimeout(()=>{Rd||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Um=[])},3e3)):Um=[]}let Oo=null,Wv=null;function Bg(t){const e=Oo;return Oo=t,Wv=t&&t.type.__scopeId||null,e}function $8(t){Wv=t}function V8(){Wv=null}const H8=t=>Nl;function Nl(t,e=Oo,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&h2(-1);const s=Bg(e);let o;try{o=t(...i)}finally{Bg(s),r._d&&h2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jn(t,e){if(Oo===null)return t;const n=am(Oo),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=di]=e[i];s&&(br(s)&&(s={mounted:s,updated:s}),s.deep&&dh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Tc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(cf(),Ou(l,n,8,[t.el,a,t,e]),hf())}}const mL=Symbol("_vte"),vL=t=>t.__isTeleport,cg=t=>t&&(t.disabled||t.disabled===""),Qw=t=>t&&(t.defer||t.defer===""),ex=t=>typeof SVGElement<"u"&&t instanceof SVGElement,tx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,i2=(t,e)=>{const n=t&&t.to;return ts(n)?e?e(n):null:n},yL={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:f,pc:p,pbc:y,o:{insert:m,querySelector:C,createText:S,createComment:T}}=c,O=cg(e.props);let{shapeFlag:D,children:B,dynamicChildren:z}=e;if(t==null){const H=e.el=S(""),J=e.anchor=S("");m(H,n,r),m(J,n,r);const Q=(Y,ge)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=Y),f(B,Y,ge,i,s,o,a,l))},V=()=>{const Y=e.target=i2(e.props,C),ge=bL(Y,e,S,m);Y&&(o!=="svg"&&ex(Y)?o="svg":o!=="mathml"&&tx(Y)&&(o="mathml"),O||(Q(Y,ge),L0(e,!1)))};O&&(Q(n,J),L0(e,!0)),Qw(e.props)?Ao(()=>{V(),e.el.__isMounted=!0},s):V()}else{if(Qw(e.props)&&!t.el.__isMounted){Ao(()=>{yL.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,J=e.target=t.target,Q=e.targetAnchor=t.targetAnchor,V=cg(t.props),Y=V?n:J,ge=V?H:Q;if(o==="svg"||ex(J)?o="svg":(o==="mathml"||tx(J))&&(o="mathml"),z?(y(t.dynamicChildren,z,Y,i,s,o,a),Vb(t,e,!0)):l||p(t,e,Y,ge,i,s,o,a,!1),O)V?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):$m(e,n,H,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const $=e.target=i2(e.props,C);$&&$m(e,$,null,c,0)}else V&&$m(e,J,Q,c,1);L0(e,O)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:f,target:p,props:y}=t;if(p&&(i(c),i(f)),s&&i(l),o&16){const m=s||!cg(y);for(let C=0;C<a.length;C++){const S=a[C];r(S,e,n,m,!!S.dynamicChildren)}}},move:$m,hydrate:W8};function $m(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:f}=t,p=s===2;if(p&&r(o,e,n),(!p||cg(f))&&l&16)for(let y=0;y<c.length;y++)i(c[y],e,n,2);p&&r(a,e,n)}function W8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:f}},p){const y=e.target=i2(e.props,l);if(y){const m=cg(e.props),C=y._lpa||y.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=C,e.targetAnchor=C&&o(C);else{e.anchor=o(t);let S=C;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,y._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||bL(y,e,f,c),p(C&&o(C),e,y,n,r,i,s)}L0(e,m)}return e.anchor&&o(e.anchor)}const Fd=yL;function L0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function bL(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[mL]=s,t&&(r(i,t),r(s,t)),s}const Uh=Symbol("_leaveCb"),Vm=Symbol("_enterCb");function Db(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zs(()=>{t.isMounted=!0}),ff(()=>{t.isUnmounting=!0}),t}const Eu=[Function,Array],Ib={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Eu,onEnter:Eu,onAfterEnter:Eu,onEnterCancelled:Eu,onBeforeLeave:Eu,onLeave:Eu,onAfterLeave:Eu,onLeaveCancelled:Eu,onBeforeAppear:Eu,onAppear:Eu,onAfterAppear:Eu,onAppearCancelled:Eu},_L=t=>{const e=t.subTree;return e.component?_L(e.component):e},G8={name:"BaseTransition",props:Ib,setup(t,{slots:e}){const n=Iu(),r=Db();return()=>{const i=e.default&&Gv(e.default(),!0);if(!i||!i.length)return;const s=wL(i),o=hi(t),{mode:a}=o;if(r.isLeaving)return e1(s);const l=nx(s);if(!l)return e1(s);let c=rp(l,o,r,n,p=>c=p);l.type!==Co&&_h(l,c);let f=n.subTree&&nx(n.subTree);if(f&&f.type!==Co&&!nc(l,f)&&_L(n).type!==Co){let p=rp(f,o,r,n);if(_h(f,p),a==="out-in"&&l.type!==Co)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},e1(s);a==="in-out"&&l.type!==Co?p.delayLeave=(y,m,C)=>{const S=LL(r,f);S[String(f.key)]=f,y[Uh]=()=>{m(),y[Uh]=void 0,delete c.delayedLeave,f=void 0},c.delayedLeave=()=>{C(),delete c.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function wL(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Co){e=n;break}}return e}const xL=G8;function LL(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function rp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:y,onLeave:m,onAfterLeave:C,onLeaveCancelled:S,onBeforeAppear:T,onAppear:O,onAfterAppear:D,onAppearCancelled:B}=e,z=String(t.key),H=LL(n,t),J=(Y,ge)=>{Y&&Ou(Y,r,9,ge)},Q=(Y,ge)=>{const $=ge[1];J(Y,ge),Yn(Y)?Y.every(W=>W.length<=1)&&$():Y.length<=1&&$()},V={mode:o,persisted:a,beforeEnter(Y){let ge=l;if(!n.isMounted)if(s)ge=T||l;else return;Y[Uh]&&Y[Uh](!0);const $=H[z];$&&nc(t,$)&&$.el[Uh]&&$.el[Uh](),J(ge,[Y])},enter(Y){let ge=c,$=f,W=p;if(!n.isMounted)if(s)ge=O||c,$=D||f,W=B||p;else return;let se=!1;const X=Y[Vm]=U=>{se||(se=!0,U?J(W,[Y]):J($,[Y]),V.delayedLeave&&V.delayedLeave(),Y[Vm]=void 0)};ge?Q(ge,[Y,X]):X()},leave(Y,ge){const $=String(t.key);if(Y[Vm]&&Y[Vm](!0),n.isUnmounting)return ge();J(y,[Y]);let W=!1;const se=Y[Uh]=X=>{W||(W=!0,ge(),X?J(S,[Y]):J(C,[Y]),Y[Uh]=void 0,H[$]===t&&delete H[$])};H[$]=t,m?Q(m,[Y,se]):se()},clone(Y){const ge=rp(Y,e,n,r,i);return i&&i(ge),ge}};return V}function e1(t){if(sm(t))return t=zc(t),t.children=null,t}function nx(t){if(!sm(t))return vL(t.type)&&t.children?wL(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&br(n.default))return n.default()}}function _h(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_h(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gv(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===vn?(o.patchFlag&128&&i++,r=r.concat(Gv(o.children,e,a))):(e||o.type!==Co)&&r.push(a!=null?zc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function _s(t,e){return br(t)?Gi({name:t.name},e,{setup:t}):t}function q8(){const t=Iu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Nb(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Y8(t){const e=Iu(),n=Mb(null);if(e){const i=e.refs===di?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function Rg(t,e,n,r,i=!1){if(Yn(t)){t.forEach((C,S)=>Rg(C,e&&(Yn(e)?e[S]:e),n,r,i));return}if(Qh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Rg(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?am(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,f=a.refs===di?a.refs={}:a.refs,p=a.setupState,y=hi(p),m=p===di?()=>!1:C=>Ei(y,C);if(c!=null&&c!==l&&(ts(c)?(f[c]=null,m(c)&&(p[c]=null)):Bs(c)&&(c.value=null)),br(l))gp(l,a,12,[o,f]);else{const C=ts(l),S=Bs(l);if(C||S){const T=()=>{if(t.f){const O=C?m(l)?p[l]:f[l]:l.value;i?Yn(O)&&yb(O,s):Yn(O)?O.includes(s)||O.push(s):C?(f[l]=[s],m(l)&&(p[l]=f[l])):(l.value=[s],t.k&&(f[t.k]=l.value))}else C?(f[l]=o,m(l)&&(p[l]=o)):S&&(l.value=o,t.k&&(f[t.k]=o))};o?(T.id=-1,Ao(T,n)):T()}}}let rx=!1;const Sd=()=>{rx||(console.error("Hydration completed but contains mismatches."),rx=!0)},Z8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",K8=t=>t.namespaceURI.includes("MathML"),Hm=t=>{if(t.nodeType===1){if(Z8(t))return"svg";if(K8(t))return"mathml"}},Vd=t=>t.nodeType===8;function X8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,f=(B,z)=>{if(!z.hasChildNodes()){n(null,B,z),tv(),z._vnode=B;return}p(z.firstChild,B,null,null,null),tv(),z._vnode=B},p=(B,z,H,J,Q,V=!1)=>{V=V||!!z.dynamicChildren;const Y=Vd(B)&&B.data==="[",ge=()=>S(B,z,H,J,Q,Y),{type:$,ref:W,shapeFlag:se,patchFlag:X}=z;let U=B.nodeType;z.el=B,X===-2&&(V=!1,z.dynamicChildren=null);let R=null;switch($){case ef:U!==3?z.children===""?(l(z.el=i(""),o(B),B),R=B):R=ge():(B.data!==z.children&&(Sd(),B.data=z.children),R=s(B));break;case Co:D(B)?(R=s(B),O(z.el=B.content.firstChild,B,H)):U!==8||Y?R=ge():R=s(B);break;case Hf:if(Y&&(B=s(B),U=B.nodeType),U===1||U===3){R=B;const ee=!z.children.length;for(let ie=0;ie<z.staticCount;ie++)ee&&(z.children+=R.nodeType===1?R.outerHTML:R.data),ie===z.staticCount-1&&(z.anchor=R),R=s(R);return Y?s(R):R}else ge();break;case vn:Y?R=C(B,z,H,J,Q,V):R=ge();break;default:if(se&1)(U!==1||z.type.toLowerCase()!==B.tagName.toLowerCase())&&!D(B)?R=ge():R=y(B,z,H,J,Q,V);else if(se&6){z.slotScopeIds=Q;const ee=o(B);if(Y?R=T(B):Vd(B)&&B.data==="teleport start"?R=T(B,B.data,"teleport end"):R=s(B),e(z,ee,null,H,J,Hm(ee),V),Qh(z)&&!z.type.__asyncResolved){let ie;Y?(ie=Kr(vn),ie.anchor=R?R.previousSibling:ee.lastChild):ie=B.nodeType===3?Rr(""):Kr("div"),ie.el=B,z.component.subTree=ie}}else se&64?U!==8?R=ge():R=z.type.hydrate(B,z,H,J,Q,V,t,m):se&128&&(R=z.type.hydrate(B,z,H,J,Hm(o(B)),Q,V,t,p))}return W!=null&&Rg(W,null,J,z),R},y=(B,z,H,J,Q,V)=>{V=V||!!z.dynamicChildren;const{type:Y,props:ge,patchFlag:$,shapeFlag:W,dirs:se,transition:X}=z,U=Y==="input"||Y==="option";if(U||$!==-1){se&&Tc(z,null,H,"created");let R=!1;if(D(B)){R=KL(null,X)&&H&&H.vnode.props&&H.vnode.props.appear;const ie=B.content.firstChild;R&&X.beforeEnter(ie),O(ie,B,H),z.el=B=ie}if(W&16&&!(ge&&(ge.innerHTML||ge.textContent))){let ie=m(B.firstChild,z,B,H,J,Q,V);for(;ie;){Wm(B,1)||Sd();const fe=ie;ie=ie.nextSibling,a(fe)}}else if(W&8){let ie=z.children;ie[0]===`
`&&(B.tagName==="PRE"||B.tagName==="TEXTAREA")&&(ie=ie.slice(1)),B.textContent!==ie&&(Wm(B,0)||Sd(),B.textContent=z.children)}if(ge){if(U||!V||$&48){const ie=B.tagName.includes("-");for(const fe in ge)(U&&(fe.endsWith("value")||fe==="indeterminate")||rm(fe)&&!Yd(fe)||fe[0]==="."||ie)&&r(B,fe,null,ge[fe],void 0,H)}else if(ge.onClick)r(B,"onClick",null,ge.onClick,void 0,H);else if($&4&&Bc(ge.style))for(const ie in ge.style)ge.style[ie]}let ee;(ee=ge&&ge.onVnodeBeforeMount)&&Al(ee,H,z),se&&Tc(z,null,H,"beforeMount"),((ee=ge&&ge.onVnodeMounted)||se||R)&&sC(()=>{ee&&Al(ee,H,z),R&&X.enter(B),se&&Tc(z,null,H,"mounted")},J)}return B.nextSibling},m=(B,z,H,J,Q,V,Y)=>{Y=Y||!!z.dynamicChildren;const ge=z.children,$=ge.length;for(let W=0;W<$;W++){const se=Y?ge[W]:ge[W]=Dl(ge[W]),X=se.type===ef;B?(X&&!Y&&W+1<$&&Dl(ge[W+1]).type===ef&&(l(i(B.data.slice(se.children.length)),H,s(B)),B.data=se.children),B=p(B,se,J,Q,V,Y)):X&&!se.children?l(se.el=i(""),H):(Wm(H,1)||Sd(),n(null,se,H,null,J,Q,Hm(H),V))}return B},C=(B,z,H,J,Q,V)=>{const{slotScopeIds:Y}=z;Y&&(Q=Q?Q.concat(Y):Y);const ge=o(B),$=m(s(B),z,ge,H,J,Q,V);return $&&Vd($)&&$.data==="]"?s(z.anchor=$):(Sd(),l(z.anchor=c("]"),ge,$),$)},S=(B,z,H,J,Q,V)=>{if(Wm(B.parentElement,1)||Sd(),z.el=null,V){const $=T(B);for(;;){const W=s(B);if(W&&W!==$)a(W);else break}}const Y=s(B),ge=o(B);return a(B),n(null,z,ge,Y,H,J,Hm(ge),Q),H&&(H.vnode.el=z.el,Kv(H,z.el)),Y},T=(B,z="[",H="]")=>{let J=0;for(;B;)if(B=s(B),B&&Vd(B)&&(B.data===z&&J++,B.data===H)){if(J===0)return s(B);J--}return B},O=(B,z,H)=>{const J=z.parentNode;J&&J.replaceChild(B,z);let Q=H;for(;Q;)Q.vnode.el===z&&(Q.vnode.el=Q.subTree.el=B),Q=Q.parent},D=B=>B.nodeType===1&&B.tagName==="TEMPLATE";return[f,p]}const ix="data-allow-mismatch",J8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Wm(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(ix);)t=t.parentElement;const n=t&&t.getAttribute(ix);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(J8[e])}}const Q8=Rv().requestIdleCallback||(t=>setTimeout(t,1)),eO=Rv().cancelIdleCallback||(t=>clearTimeout(t)),tO=(t=1e4)=>e=>{const n=Q8(e,{timeout:t});return()=>eO(n)};function nO(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const rO=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(nO(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},iO=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},sO=(t=[])=>(e,n)=>{ts(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function oO(t,e){if(Vd(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Vd(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Qh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function aO(t){br(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,f,p=0;const y=()=>(p++,c=null,m()),m=()=>{let C;return c||(C=c=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),l)return new Promise((T,O)=>{l(S,()=>T(y()),()=>O(S),p+1)});throw S}).then(S=>C!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),f=S,S)))};return _s({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(C,S,T){const O=s?()=>{const D=s(T,B=>oO(C,B));D&&(S.bum||(S.bum=[])).push(D)}:T;f?O():m().then(()=>!S.isUnmounted&&O())},get __asyncResolved(){return f},setup(){const C=To;if(Nb(C),f)return()=>t1(f,C);const S=B=>{c=null,rd(B,C,13,!r)};if(a&&C.suspense||ip)return m().then(B=>()=>t1(B,C)).catch(B=>(S(B),()=>r?Kr(r,{error:B}):null));const T=kt(!1),O=kt(),D=kt(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!T.value&&!O.value){const B=new Error(`Async component timed out after ${o}ms.`);S(B),O.value=B}},o),m().then(()=>{T.value=!0,C.parent&&sm(C.parent.vnode)&&C.parent.update()}).catch(B=>{S(B),O.value=B}),()=>{if(T.value&&f)return t1(f,C);if(O.value&&r)return Kr(r,{error:O.value});if(n&&!D.value)return Kr(n)}}})}function t1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=Kr(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const sm=t=>t.type.__isKeepAlive,lO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Iu(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:f,o:{createElement:p}}}=r,y=p("div");r.activate=(D,B,z,H,J)=>{const Q=D.component;c(D,B,z,0,a),l(Q.vnode,D,B,z,Q,a,H,D.slotScopeIds,J),Ao(()=>{Q.isDeactivated=!1,Q.a&&Zd(Q.a);const V=D.props&&D.props.onVnodeMounted;V&&Al(V,Q.parent,D)},a)},r.deactivate=D=>{const B=D.component;rv(B.m),rv(B.a),c(D,y,null,1,a),Ao(()=>{B.da&&Zd(B.da);const z=D.props&&D.props.onVnodeUnmounted;z&&Al(z,B.parent,D),B.isDeactivated=!0},a)};function m(D){n1(D),f(D,n,a,!0)}function C(D){i.forEach((B,z)=>{const H=m2(B.type);H&&!D(H)&&S(z)})}function S(D){const B=i.get(D);B&&(!o||!nc(B,o))?m(B):o&&n1(o),i.delete(D),s.delete(D)}vi(()=>[t.include,t.exclude],([D,B])=>{D&&C(z=>qp(D,z)),B&&C(z=>!qp(B,z))},{flush:"post",deep:!0});let T=null;const O=()=>{T!=null&&(iv(n.subTree.type)?Ao(()=>{i.set(T,Gm(n.subTree))},n.subTree.suspense):i.set(T,Gm(n.subTree)))};return Zs(O),Yv(O),ff(()=>{i.forEach(D=>{const{subTree:B,suspense:z}=n,H=Gm(B);if(D.type===H.type&&D.key===H.key){n1(H);const J=H.component.da;J&&Ao(J,z);return}m(D)})}),()=>{if(T=null,!e.default)return o=null;const D=e.default(),B=D[0];if(D.length>1)return o=null,D;if(!wh(B)||!(B.shapeFlag&4)&&!(B.shapeFlag&128))return o=null,B;let z=Gm(B);if(z.type===Co)return o=null,z;const H=z.type,J=m2(Qh(z)?z.type.__asyncResolved||{}:H),{include:Q,exclude:V,max:Y}=t;if(Q&&(!J||!qp(Q,J))||V&&J&&qp(V,J))return z.shapeFlag&=-257,o=z,B;const ge=z.key==null?H:z.key,$=i.get(ge);return z.el&&(z=zc(z),B.shapeFlag&128&&(B.ssContent=z)),T=ge,$?(z.el=$.el,z.component=$.component,z.transition&&_h(z,z.transition),z.shapeFlag|=512,s.delete(ge),s.add(ge)):(s.add(ge),Y&&s.size>parseInt(Y,10)&&S(s.values().next().value)),z.shapeFlag|=256,o=z,iv(B.type)?B:z}}},uO=lO;function qp(t,e){return Yn(t)?t.some(n=>qp(n,e)):ts(t)?t.split(",").includes(e):jT(t)?(t.lastIndex=0,t.test(e)):!1}function CL(t,e){EL(t,"a",e)}function SL(t,e){EL(t,"da",e)}function EL(t,e,n=To){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(qv(e,r,n),n){let i=n.parent;for(;i&&i.parent;)sm(i.parent.vnode)&&cO(r,e,n,i),i=i.parent}}function cO(t,e,n,r){const i=qv(e,t,r,!0);Au(()=>{yb(r[e],i)},n)}function n1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Gm(t){return t.shapeFlag&128?t.ssContent:t}function qv(t,e,n=To,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{cf();const a=Jf(n),l=Ou(e,n,t,o);return a(),hf(),l});return r?i.unshift(s):i.push(s),s}}const xh=t=>(e,n=To)=>{(!ip||t==="sp")&&qv(t,(...r)=>e(...r),n)},PL=xh("bm"),Zs=xh("m"),Bb=xh("bu"),Yv=xh("u"),ff=xh("bum"),Au=xh("um"),kL=xh("sp"),ML=xh("rtg"),AL=xh("rtc");function TL(t,e=To){qv("ec",t,e)}const Rb="components",hO="directives";function Fb(t,e){return jb(Rb,t,!0,e)||t}const OL=Symbol.for("v-ndc");function DL(t){return ts(t)?jb(Rb,t,!1)||t:t||OL}function fO(t){return jb(hO,t)}function jb(t,e,n=!0,r=!1){const i=Oo||To;if(i){const s=i.type;if(t===Rb){const a=m2(s,!1);if(a&&(a===e||a===fa(e)||a===im(fa(e))))return s}const o=sx(i[t]||s[t],e)||sx(i.appContext[t],e);return!o&&r?s:o}}function sx(t,e){return t&&(t[e]||t[fa(e)]||t[im(fa(e))])}function nr(t,e,n,r){let i;const s=n&&n[r],o=Yn(t);if(o||ts(t)){const a=o&&Bc(t);let l=!1;a&&(l=!au(t),t=zv(t)),i=new Array(t.length);for(let c=0,f=t.length;c<f;c++)i[c]=e(l?Na(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Ri(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const f=a[l];i[l]=e(t[f],f,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function dO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Yn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function pO(t,e,n={},r,i){if(Oo.ce||Oo.parent&&Qh(Oo.parent)&&Oo.parent.ce)return e!=="default"&&(n.name=e),Ae(),Lo(vn,null,[Kr("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ae();const o=s&&zb(s(n)),a=n.key||o&&o.key,l=Lo(vn,{key:(a&&!ac(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function zb(t){return t.some(e=>wh(e)?!(e.type===Co||e.type===vn&&!zb(e.children)):!0)?t:null}function gO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:ag(r)]=t[r];return n}const s2=t=>t?fC(t)?am(t):s2(t.parent):null,hg=Gi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>s2(t.parent),$root:t=>s2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ub(t),$forceUpdate:t=>t.f||(t.f=()=>{Ob(t.update)}),$nextTick:t=>t.n||(t.n=ll.bind(t.proxy)),$watch:t=>WO.bind(t)}),r1=(t,e)=>t!==di&&!t.__isScriptSetup&&Ei(t,e),o2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(r1(r,e))return o[e]=1,r[e];if(i!==di&&Ei(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Ei(c,e))return o[e]=3,s[e];if(n!==di&&Ei(n,e))return o[e]=4,n[e];a2&&(o[e]=0)}}const f=hg[e];let p,y;if(f)return e==="$attrs"&&Ia(t.attrs,"get",""),f(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==di&&Ei(n,e))return o[e]=4,n[e];if(y=l.config.globalProperties,Ei(y,e))return y[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return r1(i,e)?(i[e]=n,!0):r!==di&&Ei(r,e)?(r[e]=n,!0):Ei(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==di&&Ei(t,o)||r1(e,o)||(a=s[0])&&Ei(a,o)||Ei(r,o)||Ei(hg,o)||Ei(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ei(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},mO=Gi({},o2,{get(t,e){if(e!==Symbol.unscopables)return o2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!HT(e)}});function vO(){return null}function yO(){return null}function bO(t){}function _O(t){}function wO(){return null}function xO(){}function LO(t,e){return null}function CO(){return IL().slots}function SO(){return IL().attrs}function IL(){const t=Iu();return t.setupContext||(t.setupContext=gC(t))}function Fg(t){return Yn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function EO(t,e){const n=Fg(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Yn(i)||br(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function PO(t,e){return!t||!e?t||e:Yn(t)&&Yn(e)?t.concat(e):Gi({},Fg(t),Fg(e))}function kO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function MO(t){const e=Iu();let n=t();return d2(),bb(n)&&(n=n.catch(r=>{throw Jf(e),r})),[n,()=>Jf(e)]}let a2=!0;function AO(t){const e=Ub(t),n=t.proxy,r=t.ctx;a2=!1,e.beforeCreate&&ox(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:f,beforeMount:p,mounted:y,beforeUpdate:m,updated:C,activated:S,deactivated:T,beforeDestroy:O,beforeUnmount:D,destroyed:B,unmounted:z,render:H,renderTracked:J,renderTriggered:Q,errorCaptured:V,serverPrefetch:Y,expose:ge,inheritAttrs:$,components:W,directives:se,filters:X}=e;if(c&&TO(c,r,null),o)for(const ee in o){const ie=o[ee];br(ie)&&(r[ee]=ie.bind(n))}if(i){const ee=i.call(n,n);Ri(ee)&&(t.data=hu(ee))}if(a2=!0,s)for(const ee in s){const ie=s[ee],fe=br(ie)?ie.bind(n,n):br(ie.get)?ie.get.bind(n,n):Mu,me=!br(ie)&&br(ie.set)?ie.set.bind(n):Mu,Oe=rr({get:fe,set:me});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:Z=>Oe.value=Z})}if(a)for(const ee in a)NL(a[ee],r,n,ee);if(l){const ee=br(l)?l.call(n):l;Reflect.ownKeys(ee).forEach(ie=>{fg(ie,ee[ie])})}f&&ox(f,t,"c");function R(ee,ie){Yn(ie)?ie.forEach(fe=>ee(fe.bind(n))):ie&&ee(ie.bind(n))}if(R(PL,p),R(Zs,y),R(Bb,m),R(Yv,C),R(CL,S),R(SL,T),R(TL,V),R(AL,J),R(ML,Q),R(ff,D),R(Au,z),R(kL,Y),Yn(ge))if(ge.length){const ee=t.exposed||(t.exposed={});ge.forEach(ie=>{Object.defineProperty(ee,ie,{get:()=>n[ie],set:fe=>n[ie]=fe})})}else t.exposed||(t.exposed={});H&&t.render===Mu&&(t.render=H),$!=null&&(t.inheritAttrs=$),W&&(t.components=W),se&&(t.directives=se),Y&&Nb(t)}function TO(t,e,n=Mu){Yn(t)&&(t=l2(t));for(const r in t){const i=t[r];let s;Ri(i)?"default"in i?s=lu(i.from||r,i.default,!0):s=lu(i.from||r):s=lu(i),Bs(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function ox(t,e,n){Ou(Yn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function NL(t,e,n,r){let i=r.includes(".")?tC(n,r):()=>n[r];if(ts(t)){const s=e[t];br(s)&&vi(i,s)}else if(br(t))vi(i,t.bind(n));else if(Ri(t))if(Yn(t))t.forEach(s=>NL(s,e,n,r));else{const s=br(t.handler)?t.handler.bind(n):e[t.handler];br(s)&&vi(i,s,t)}}function Ub(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>nv(l,c,o,!0)),nv(l,e,o)),Ri(e)&&s.set(e,l),l}function nv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&nv(t,s,n,!0),i&&i.forEach(o=>nv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=OO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const OO={data:ax,props:lx,emits:lx,methods:Yp,computed:Yp,beforeCreate:tl,created:tl,beforeMount:tl,mounted:tl,beforeUpdate:tl,updated:tl,beforeDestroy:tl,beforeUnmount:tl,destroyed:tl,unmounted:tl,activated:tl,deactivated:tl,errorCaptured:tl,serverPrefetch:tl,components:Yp,directives:Yp,watch:IO,provide:ax,inject:DO};function ax(t,e){return e?t?function(){return Gi(br(t)?t.call(this,this):t,br(e)?e.call(this,this):e)}:e:t}function DO(t,e){return Yp(l2(t),l2(e))}function l2(t){if(Yn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function tl(t,e){return t?[...new Set([].concat(t,e))]:e}function Yp(t,e){return t?Gi(Object.create(null),t,e):e}function lx(t,e){return t?Yn(t)&&Yn(e)?[...new Set([...t,...e])]:Gi(Object.create(null),Fg(t),Fg(e??{})):e}function IO(t,e){if(!t)return e;if(!e)return t;const n=Gi(Object.create(null),t);for(const r in e)n[r]=tl(t[r],e[r]);return n}function BL(){return{app:null,config:{isNativeTag:RT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let NO=0;function BO(t,e){return function(r,i=null){br(r)||(r=Gi({},r)),i!=null&&!Ri(i)&&(i=null);const s=BL(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:NO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:vC,get config(){return s.config},set config(f){},use(f,...p){return o.has(f)||(f&&br(f.install)?(o.add(f),f.install(c,...p)):br(f)&&(o.add(f),f(c,...p))),c},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),c},component(f,p){return p?(s.components[f]=p,c):s.components[f]},directive(f,p){return p?(s.directives[f]=p,c):s.directives[f]},mount(f,p,y){if(!l){const m=c._ceVNode||Kr(r,i);return m.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),p&&e?e(m,f):t(m,f,y),l=!0,c._container=f,f.__vue_app__=c,am(m.component)}},onUnmount(f){a.push(f)},unmount(){l&&(Ou(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(f,p){return s.provides[f]=p,c},runWithContext(f){const p=Vf;Vf=c;try{return f()}finally{Vf=p}}};return c}}let Vf=null;function fg(t,e){if(To){let n=To.provides;const r=To.parent&&To.parent.provides;r===n&&(n=To.provides=Object.create(r)),n[t]=e}}function lu(t,e,n=!1){const r=To||Oo;if(r||Vf){const i=Vf?Vf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&br(e)?e.call(r&&r.proxy):e}}function RL(){return!!(To||Oo||Vf)}const FL={},jL=()=>Object.create(FL),zL=t=>Object.getPrototypeOf(t)===FL;function RO(t,e,n,r=!1){const i={},s=jL();t.propsDefaults=Object.create(null),UL(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Pb(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function FO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=hi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let y=f[p];if(Zv(t.emitsOptions,y))continue;const m=e[y];if(l)if(Ei(s,y))m!==s[y]&&(s[y]=m,c=!0);else{const C=fa(y);i[C]=u2(l,a,C,m,t,!1)}else m!==s[y]&&(s[y]=m,c=!0)}}}else{UL(t,e,i,s)&&(c=!0);let f;for(const p in a)(!e||!Ei(e,p)&&((f=Il(p))===p||!Ei(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(i[p]=u2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Ei(e,p))&&(delete s[p],c=!0)}c&&fh(t.attrs,"set","")}function UL(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Yd(l))continue;const c=e[l];let f;i&&Ei(i,f=fa(l))?!s||!s.includes(f)?n[f]=c:(a||(a={}))[f]=c:Zv(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=hi(n),c=a||di;for(let f=0;f<s.length;f++){const p=s[f];n[p]=u2(i,l,p,c[p],t,!Ei(c,p))}}return o}function u2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ei(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&br(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const f=Jf(i);r=c[n]=l.call(null,e),f()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Il(n))&&(r=!0))}return r}const jO=new WeakMap;function $L(t,e,n=!1){const r=n?jO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!br(t)){const f=p=>{l=!0;const[y,m]=$L(p,e,!0);Gi(o,y),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!l)return Ri(t)&&r.set(t,Gd),Gd;if(Yn(s))for(let f=0;f<s.length;f++){const p=fa(s[f]);ux(p)&&(o[p]=di)}else if(s)for(const f in s){const p=fa(f);if(ux(p)){const y=s[f],m=o[p]=Yn(y)||br(y)?{type:y}:Gi({},y),C=m.type;let S=!1,T=!0;if(Yn(C))for(let O=0;O<C.length;++O){const D=C[O],B=br(D)&&D.name;if(B==="Boolean"){S=!0;break}else B==="String"&&(T=!1)}else S=br(C)&&C.name==="Boolean";m[0]=S,m[1]=T,(S||Ei(m,"default"))&&a.push(p)}}const c=[o,a];return Ri(t)&&r.set(t,c),c}function ux(t){return t[0]!=="$"&&!Yd(t)}const VL=t=>t[0]==="_"||t==="$stable",$b=t=>Yn(t)?t.map(Dl):[Dl(t)],zO=(t,e,n)=>{if(e._n)return e;const r=Nl((...i)=>$b(e(...i)),n);return r._c=!1,r},HL=(t,e,n)=>{const r=t._ctx;for(const i in t){if(VL(i))continue;const s=t[i];if(br(s))e[i]=zO(i,s,r);else if(s!=null){const o=$b(s);e[i]=()=>o}}},WL=(t,e)=>{const n=$b(e);t.slots.default=()=>n},GL=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},UO=(t,e,n)=>{const r=t.slots=jL();if(t.vnode.shapeFlag&32){const i=e._;i?(GL(r,e,n),n&&U3(r,"_",i,!0)):HL(e,r)}else e&&WL(t,e)},$O=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=di;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:GL(i,e,n):(s=!e.$stable,HL(e,i)),o=e}else e&&(WL(t,e),o={default:1});if(s)for(const a in i)!VL(a)&&o[a]==null&&delete i[a]},Ao=sC;function qL(t){return ZL(t)}function YL(t){return ZL(t,X8)}function ZL(t,e){const n=Rv();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:f,parentNode:p,nextSibling:y,setScopeId:m=Mu,insertStaticContent:C}=t,S=(le,oe,ue,te=null,Se=null,Ve=null,Xe=void 0,at=null,ot=!!oe.dynamicChildren)=>{if(le===oe)return;le&&!nc(le,oe)&&(te=Pe(le),Z(le,Se,Ve,!0),le=null),oe.patchFlag===-2&&(ot=!1,oe.dynamicChildren=null);const{type:dt,ref:zt,shapeFlag:Rt}=oe;switch(dt){case ef:T(le,oe,ue,te);break;case Co:O(le,oe,ue,te);break;case Hf:le==null&&D(oe,ue,te,Xe);break;case vn:W(le,oe,ue,te,Se,Ve,Xe,at,ot);break;default:Rt&1?H(le,oe,ue,te,Se,Ve,Xe,at,ot):Rt&6?se(le,oe,ue,te,Se,Ve,Xe,at,ot):(Rt&64||Rt&128)&&dt.process(le,oe,ue,te,Se,Ve,Xe,at,ot,nt)}zt!=null&&Se&&Rg(zt,le&&le.ref,Ve,oe||le,!oe)},T=(le,oe,ue,te)=>{if(le==null)r(oe.el=a(oe.children),ue,te);else{const Se=oe.el=le.el;oe.children!==le.children&&c(Se,oe.children)}},O=(le,oe,ue,te)=>{le==null?r(oe.el=l(oe.children||""),ue,te):oe.el=le.el},D=(le,oe,ue,te)=>{[le.el,le.anchor]=C(le.children,oe,ue,te,le.el,le.anchor)},B=({el:le,anchor:oe},ue,te)=>{let Se;for(;le&&le!==oe;)Se=y(le),r(le,ue,te),le=Se;r(oe,ue,te)},z=({el:le,anchor:oe})=>{let ue;for(;le&&le!==oe;)ue=y(le),i(le),le=ue;i(oe)},H=(le,oe,ue,te,Se,Ve,Xe,at,ot)=>{oe.type==="svg"?Xe="svg":oe.type==="math"&&(Xe="mathml"),le==null?J(oe,ue,te,Se,Ve,Xe,at,ot):Y(le,oe,Se,Ve,Xe,at,ot)},J=(le,oe,ue,te,Se,Ve,Xe,at)=>{let ot,dt;const{props:zt,shapeFlag:Rt,transition:Zt,dirs:Qt}=le;if(ot=le.el=o(le.type,Ve,zt&&zt.is,zt),Rt&8?f(ot,le.children):Rt&16&&V(le.children,ot,null,te,Se,i1(le,Ve),Xe,at),Qt&&Tc(le,null,te,"created"),Q(ot,le,le.scopeId,Xe,te),zt){for(const Sn in zt)Sn!=="value"&&!Yd(Sn)&&s(ot,Sn,null,zt[Sn],Ve,te);"value"in zt&&s(ot,"value",null,zt.value,Ve),(dt=zt.onVnodeBeforeMount)&&Al(dt,te,le)}Qt&&Tc(le,null,te,"beforeMount");const pn=KL(Se,Zt);pn&&Zt.beforeEnter(ot),r(ot,oe,ue),((dt=zt&&zt.onVnodeMounted)||pn||Qt)&&Ao(()=>{dt&&Al(dt,te,le),pn&&Zt.enter(ot),Qt&&Tc(le,null,te,"mounted")},Se)},Q=(le,oe,ue,te,Se)=>{if(ue&&m(le,ue),te)for(let Ve=0;Ve<te.length;Ve++)m(le,te[Ve]);if(Se){let Ve=Se.subTree;if(oe===Ve||iv(Ve.type)&&(Ve.ssContent===oe||Ve.ssFallback===oe)){const Xe=Se.vnode;Q(le,Xe,Xe.scopeId,Xe.slotScopeIds,Se.parent)}}},V=(le,oe,ue,te,Se,Ve,Xe,at,ot=0)=>{for(let dt=ot;dt<le.length;dt++){const zt=le[dt]=at?$h(le[dt]):Dl(le[dt]);S(null,zt,oe,ue,te,Se,Ve,Xe,at)}},Y=(le,oe,ue,te,Se,Ve,Xe)=>{const at=oe.el=le.el;let{patchFlag:ot,dynamicChildren:dt,dirs:zt}=oe;ot|=le.patchFlag&16;const Rt=le.props||di,Zt=oe.props||di;let Qt;if(ue&&Cf(ue,!1),(Qt=Zt.onVnodeBeforeUpdate)&&Al(Qt,ue,oe,le),zt&&Tc(oe,le,ue,"beforeUpdate"),ue&&Cf(ue,!0),(Rt.innerHTML&&Zt.innerHTML==null||Rt.textContent&&Zt.textContent==null)&&f(at,""),dt?ge(le.dynamicChildren,dt,at,ue,te,i1(oe,Se),Ve):Xe||ie(le,oe,at,null,ue,te,i1(oe,Se),Ve,!1),ot>0){if(ot&16)$(at,Rt,Zt,ue,Se);else if(ot&2&&Rt.class!==Zt.class&&s(at,"class",null,Zt.class,Se),ot&4&&s(at,"style",Rt.style,Zt.style,Se),ot&8){const pn=oe.dynamicProps;for(let Sn=0;Sn<pn.length;Sn++){const Ze=pn[Sn],it=Rt[Ze],Je=Zt[Ze];(Je!==it||Ze==="value")&&s(at,Ze,it,Je,Se,ue)}}ot&1&&le.children!==oe.children&&f(at,oe.children)}else!Xe&&dt==null&&$(at,Rt,Zt,ue,Se);((Qt=Zt.onVnodeUpdated)||zt)&&Ao(()=>{Qt&&Al(Qt,ue,oe,le),zt&&Tc(oe,le,ue,"updated")},te)},ge=(le,oe,ue,te,Se,Ve,Xe)=>{for(let at=0;at<oe.length;at++){const ot=le[at],dt=oe[at],zt=ot.el&&(ot.type===vn||!nc(ot,dt)||ot.shapeFlag&70)?p(ot.el):ue;S(ot,dt,zt,null,te,Se,Ve,Xe,!0)}},$=(le,oe,ue,te,Se)=>{if(oe!==ue){if(oe!==di)for(const Ve in oe)!Yd(Ve)&&!(Ve in ue)&&s(le,Ve,oe[Ve],null,Se,te);for(const Ve in ue){if(Yd(Ve))continue;const Xe=ue[Ve],at=oe[Ve];Xe!==at&&Ve!=="value"&&s(le,Ve,at,Xe,Se,te)}"value"in ue&&s(le,"value",oe.value,ue.value,Se)}},W=(le,oe,ue,te,Se,Ve,Xe,at,ot)=>{const dt=oe.el=le?le.el:a(""),zt=oe.anchor=le?le.anchor:a("");let{patchFlag:Rt,dynamicChildren:Zt,slotScopeIds:Qt}=oe;Qt&&(at=at?at.concat(Qt):Qt),le==null?(r(dt,ue,te),r(zt,ue,te),V(oe.children||[],ue,zt,Se,Ve,Xe,at,ot)):Rt>0&&Rt&64&&Zt&&le.dynamicChildren?(ge(le.dynamicChildren,Zt,ue,Se,Ve,Xe,at),(oe.key!=null||Se&&oe===Se.subTree)&&Vb(le,oe,!0)):ie(le,oe,ue,zt,Se,Ve,Xe,at,ot)},se=(le,oe,ue,te,Se,Ve,Xe,at,ot)=>{oe.slotScopeIds=at,le==null?oe.shapeFlag&512?Se.ctx.activate(oe,ue,te,Xe,ot):X(oe,ue,te,Se,Ve,Xe,ot):U(le,oe,ot)},X=(le,oe,ue,te,Se,Ve,Xe)=>{const at=le.component=hC(le,te,Se);if(sm(le)&&(at.ctx.renderer=nt),dC(at,!1,Xe),at.asyncDep){if(Se&&Se.registerDep(at,R,Xe),!le.el){const ot=at.subTree=Kr(Co);O(null,ot,oe,ue)}}else R(at,le,oe,ue,Se,Ve,Xe)},U=(le,oe,ue)=>{const te=oe.component=le.component;if(XO(le,oe,ue))if(te.asyncDep&&!te.asyncResolved){ee(te,oe,ue);return}else te.next=oe,te.update();else oe.el=le.el,te.vnode=oe},R=(le,oe,ue,te,Se,Ve,Xe)=>{const at=()=>{if(le.isMounted){let{next:Rt,bu:Zt,u:Qt,parent:pn,vnode:Sn}=le;{const Kt=XL(le);if(Kt){Rt&&(Rt.el=Sn.el,ee(le,Rt,Xe)),Kt.asyncDep.then(()=>{le.isUnmounted||at()});return}}let Ze=Rt,it;Cf(le,!1),Rt?(Rt.el=Sn.el,ee(le,Rt,Xe)):Rt=Sn,Zt&&Zd(Zt),(it=Rt.props&&Rt.props.onVnodeBeforeUpdate)&&Al(it,pn,Rt,Sn),Cf(le,!0);const Je=C0(le),$t=le.subTree;le.subTree=Je,S($t,Je,p($t.el),Pe($t),le,Se,Ve),Rt.el=Je.el,Ze===null&&Kv(le,Je.el),Qt&&Ao(Qt,Se),(it=Rt.props&&Rt.props.onVnodeUpdated)&&Ao(()=>Al(it,pn,Rt,Sn),Se)}else{let Rt;const{el:Zt,props:Qt}=oe,{bm:pn,m:Sn,parent:Ze,root:it,type:Je}=le,$t=Qh(oe);if(Cf(le,!1),pn&&Zd(pn),!$t&&(Rt=Qt&&Qt.onVnodeBeforeMount)&&Al(Rt,Ze,oe),Cf(le,!0),Zt&&bt){const Kt=()=>{le.subTree=C0(le),bt(Zt,le.subTree,le,Se,null)};$t&&Je.__asyncHydrate?Je.__asyncHydrate(Zt,le,Kt):Kt()}else{it.ce&&it.ce._injectChildStyle(Je);const Kt=le.subTree=C0(le);S(null,Kt,ue,te,le,Se,Ve),oe.el=Kt.el}if(Sn&&Ao(Sn,Se),!$t&&(Rt=Qt&&Qt.onVnodeMounted)){const Kt=oe;Ao(()=>Al(Rt,Ze,Kt),Se)}(oe.shapeFlag&256||Ze&&Qh(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&le.a&&Ao(le.a,Se),le.isMounted=!0,oe=ue=te=null}};le.scope.on();const ot=le.effect=new Tg(at);le.scope.off();const dt=le.update=ot.run.bind(ot),zt=le.job=ot.runIfDirty.bind(ot);zt.i=le,zt.id=le.uid,ot.scheduler=()=>Ob(zt),Cf(le,!0),dt()},ee=(le,oe,ue)=>{oe.component=le;const te=le.vnode.props;le.vnode=oe,le.next=null,FO(le,oe.props,te,ue),$O(le,oe.children,ue),cf(),Jw(le),hf()},ie=(le,oe,ue,te,Se,Ve,Xe,at,ot=!1)=>{const dt=le&&le.children,zt=le?le.shapeFlag:0,Rt=oe.children,{patchFlag:Zt,shapeFlag:Qt}=oe;if(Zt>0){if(Zt&128){me(dt,Rt,ue,te,Se,Ve,Xe,at,ot);return}else if(Zt&256){fe(dt,Rt,ue,te,Se,Ve,Xe,at,ot);return}}Qt&8?(zt&16&&Le(dt,Se,Ve),Rt!==dt&&f(ue,Rt)):zt&16?Qt&16?me(dt,Rt,ue,te,Se,Ve,Xe,at,ot):Le(dt,Se,Ve,!0):(zt&8&&f(ue,""),Qt&16&&V(Rt,ue,te,Se,Ve,Xe,at,ot))},fe=(le,oe,ue,te,Se,Ve,Xe,at,ot)=>{le=le||Gd,oe=oe||Gd;const dt=le.length,zt=oe.length,Rt=Math.min(dt,zt);let Zt;for(Zt=0;Zt<Rt;Zt++){const Qt=oe[Zt]=ot?$h(oe[Zt]):Dl(oe[Zt]);S(le[Zt],Qt,ue,null,Se,Ve,Xe,at,ot)}dt>zt?Le(le,Se,Ve,!0,!1,Rt):V(oe,ue,te,Se,Ve,Xe,at,ot,Rt)},me=(le,oe,ue,te,Se,Ve,Xe,at,ot)=>{let dt=0;const zt=oe.length;let Rt=le.length-1,Zt=zt-1;for(;dt<=Rt&&dt<=Zt;){const Qt=le[dt],pn=oe[dt]=ot?$h(oe[dt]):Dl(oe[dt]);if(nc(Qt,pn))S(Qt,pn,ue,null,Se,Ve,Xe,at,ot);else break;dt++}for(;dt<=Rt&&dt<=Zt;){const Qt=le[Rt],pn=oe[Zt]=ot?$h(oe[Zt]):Dl(oe[Zt]);if(nc(Qt,pn))S(Qt,pn,ue,null,Se,Ve,Xe,at,ot);else break;Rt--,Zt--}if(dt>Rt){if(dt<=Zt){const Qt=Zt+1,pn=Qt<zt?oe[Qt].el:te;for(;dt<=Zt;)S(null,oe[dt]=ot?$h(oe[dt]):Dl(oe[dt]),ue,pn,Se,Ve,Xe,at,ot),dt++}}else if(dt>Zt)for(;dt<=Rt;)Z(le[dt],Se,Ve,!0),dt++;else{const Qt=dt,pn=dt,Sn=new Map;for(dt=pn;dt<=Zt;dt++){const bn=oe[dt]=ot?$h(oe[dt]):Dl(oe[dt]);bn.key!=null&&Sn.set(bn.key,dt)}let Ze,it=0;const Je=Zt-pn+1;let $t=!1,Kt=0;const _n=new Array(Je);for(dt=0;dt<Je;dt++)_n[dt]=0;for(dt=Qt;dt<=Rt;dt++){const bn=le[dt];if(it>=Je){Z(bn,Se,Ve,!0);continue}let Rn;if(bn.key!=null)Rn=Sn.get(bn.key);else for(Ze=pn;Ze<=Zt;Ze++)if(_n[Ze-pn]===0&&nc(bn,oe[Ze])){Rn=Ze;break}Rn===void 0?Z(bn,Se,Ve,!0):(_n[Rn-pn]=dt+1,Rn>=Kt?Kt=Rn:$t=!0,S(bn,oe[Rn],ue,null,Se,Ve,Xe,at,ot),it++)}const gn=$t?VO(_n):Gd;for(Ze=gn.length-1,dt=Je-1;dt>=0;dt--){const bn=pn+dt,Rn=oe[bn],mn=bn+1<zt?oe[bn+1].el:te;_n[dt]===0?S(null,Rn,ue,mn,Se,Ve,Xe,at,ot):$t&&(Ze<0||dt!==gn[Ze]?Oe(Rn,ue,mn,2):Ze--)}}},Oe=(le,oe,ue,te,Se=null)=>{const{el:Ve,type:Xe,transition:at,children:ot,shapeFlag:dt}=le;if(dt&6){Oe(le.component.subTree,oe,ue,te);return}if(dt&128){le.suspense.move(oe,ue,te);return}if(dt&64){Xe.move(le,oe,ue,nt);return}if(Xe===vn){r(Ve,oe,ue);for(let Rt=0;Rt<ot.length;Rt++)Oe(ot[Rt],oe,ue,te);r(le.anchor,oe,ue);return}if(Xe===Hf){B(le,oe,ue);return}if(te!==2&&dt&1&&at)if(te===0)at.beforeEnter(Ve),r(Ve,oe,ue),Ao(()=>at.enter(Ve),Se);else{const{leave:Rt,delayLeave:Zt,afterLeave:Qt}=at,pn=()=>r(Ve,oe,ue),Sn=()=>{Rt(Ve,()=>{pn(),Qt&&Qt()})};Zt?Zt(Ve,pn,Sn):Sn()}else r(Ve,oe,ue)},Z=(le,oe,ue,te=!1,Se=!1)=>{const{type:Ve,props:Xe,ref:at,children:ot,dynamicChildren:dt,shapeFlag:zt,patchFlag:Rt,dirs:Zt,cacheIndex:Qt}=le;if(Rt===-2&&(Se=!1),at!=null&&Rg(at,null,ue,le,!0),Qt!=null&&(oe.renderCache[Qt]=void 0),zt&256){oe.ctx.deactivate(le);return}const pn=zt&1&&Zt,Sn=!Qh(le);let Ze;if(Sn&&(Ze=Xe&&Xe.onVnodeBeforeUnmount)&&Al(Ze,oe,le),zt&6)pe(le.component,ue,te);else{if(zt&128){le.suspense.unmount(ue,te);return}pn&&Tc(le,null,oe,"beforeUnmount"),zt&64?le.type.remove(le,oe,ue,nt,te):dt&&!dt.hasOnce&&(Ve!==vn||Rt>0&&Rt&64)?Le(dt,oe,ue,!1,!0):(Ve===vn&&Rt&384||!Se&&zt&16)&&Le(ot,oe,ue),te&&ae(le)}(Sn&&(Ze=Xe&&Xe.onVnodeUnmounted)||pn)&&Ao(()=>{Ze&&Al(Ze,oe,le),pn&&Tc(le,null,oe,"unmounted")},ue)},ae=le=>{const{type:oe,el:ue,anchor:te,transition:Se}=le;if(oe===vn){ce(ue,te);return}if(oe===Hf){z(le);return}const Ve=()=>{i(ue),Se&&!Se.persisted&&Se.afterLeave&&Se.afterLeave()};if(le.shapeFlag&1&&Se&&!Se.persisted){const{leave:Xe,delayLeave:at}=Se,ot=()=>Xe(ue,Ve);at?at(le.el,Ve,ot):ot()}else Ve()},ce=(le,oe)=>{let ue;for(;le!==oe;)ue=y(le),i(le),le=ue;i(oe)},pe=(le,oe,ue)=>{const{bum:te,scope:Se,job:Ve,subTree:Xe,um:at,m:ot,a:dt}=le;rv(ot),rv(dt),te&&Zd(te),Se.stop(),Ve&&(Ve.flags|=8,Z(Xe,le,oe,ue)),at&&Ao(at,oe),Ao(()=>{le.isUnmounted=!0},oe),oe&&oe.pendingBranch&&!oe.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===oe.pendingId&&(oe.deps--,oe.deps===0&&oe.resolve())},Le=(le,oe,ue,te=!1,Se=!1,Ve=0)=>{for(let Xe=Ve;Xe<le.length;Xe++)Z(le[Xe],oe,ue,te,Se)},Pe=le=>{if(le.shapeFlag&6)return Pe(le.component.subTree);if(le.shapeFlag&128)return le.suspense.next();const oe=y(le.anchor||le.el),ue=oe&&oe[mL];return ue?y(ue):oe};let Ue=!1;const Ne=(le,oe,ue)=>{le==null?oe._vnode&&Z(oe._vnode,null,null,!0):S(oe._vnode||null,le,oe,null,null,null,ue),oe._vnode=le,Ue||(Ue=!0,Jw(),tv(),Ue=!1)},nt={p:S,um:Z,m:Oe,r:ae,mt:X,mc:V,pc:ie,pbc:ge,n:Pe,o:t};let pt,bt;return e&&([pt,bt]=e(nt)),{render:Ne,hydrate:pt,createApp:BO(Ne,pt)}}function i1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Cf({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function KL(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vb(t,e,n=!1){const r=t.children,i=e.children;if(Yn(r)&&Yn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=$h(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Vb(o,a)),a.type===ef&&(a.el=o.el)}}function VO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function XL(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:XL(e)}function rv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const JL=Symbol.for("v-scx"),QL=()=>lu(JL);function jg(t,e){return om(t,null,e)}function HO(t,e){return om(t,null,{flush:"post"})}function eC(t,e){return om(t,null,{flush:"sync"})}function vi(t,e,n){return om(t,e,n)}function om(t,e,n=di){const{immediate:r,deep:i,flush:s,once:o}=n,a=Gi({},n),l=e&&r||!e&&s!=="post";let c;if(ip){if(s==="sync"){const m=QL();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Mu,m.resume=Mu,m.pause=Mu,m}}const f=To;a.call=(m,C,S)=>Ou(m,f,C,S);let p=!1;s==="post"?a.scheduler=m=>{Ao(m,f&&f.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,C)=>{C?m():Ob(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const y=I8(t,e,a);return ip&&(c?c.push(y):l&&y()),y}function WO(t,e,n){const r=this.proxy,i=ts(t)?t.includes(".")?tC(r,t):()=>r[t]:t.bind(r,r);let s;br(e)?s=e:(s=e.handler,n=e);const o=Jf(this),a=om(i,s.bind(r),n);return o(),a}function tC(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function GO(t,e,n=di){const r=Iu(),i=fa(e),s=Il(e),o=nC(t,i),a=lL((l,c)=>{let f,p=di,y;return eC(()=>{const m=t[i];ol(f,m)&&(f=m,c())}),{get(){return l(),n.get?n.get(f):f},set(m){const C=n.set?n.set(m):m;if(!ol(C,f)&&!(p!==di&&ol(m,p)))return;const S=r.vnode.props;S&&(e in S||i in S||s in S)&&(`onUpdate:${e}`in S||`onUpdate:${i}`in S||`onUpdate:${s}`in S)||(f=m,c()),r.emit(`update:${e}`,C),ol(m,C)&&ol(m,p)&&!ol(C,y)&&c(),p=m,y=C}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||di:a,done:!1}:{done:!0}}}},a}const nC=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${fa(e)}Modifiers`]||t[`${Il(e)}Modifiers`];function qO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||di;let i=n;const s=e.startsWith("update:"),o=s&&nC(r,e.slice(7));o&&(o.trim&&(i=n.map(f=>ts(f)?f.trim():f)),o.number&&(i=n.map(K0)));let a,l=r[a=ag(e)]||r[a=ag(fa(e))];!l&&s&&(l=r[a=ag(Il(e))]),l&&Ou(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ou(c,t,6,i)}}function rC(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!br(t)){const l=c=>{const f=rC(c,e,!0);f&&(a=!0,Gi(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Ri(t)&&r.set(t,null),null):(Yn(s)?s.forEach(l=>o[l]=null):Gi(o,s),Ri(t)&&r.set(t,o),o)}function Zv(t,e){return!t||!rm(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ei(t,e[0].toLowerCase()+e.slice(1))||Ei(t,Il(e))||Ei(t,e))}function C0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:f,props:p,data:y,setupState:m,ctx:C,inheritAttrs:S}=t,T=Bg(t);let O,D;try{if(n.shapeFlag&4){const z=i||r,H=z;O=Dl(c.call(H,z,f,p,m,y,C)),D=a}else{const z=e;O=Dl(z.length>1?z(p,{attrs:a,slots:o,emit:l}):z(p,null)),D=e.props?a:ZO(a)}}catch(z){dg.length=0,rd(z,t,1),O=Kr(Co)}let B=O;if(D&&S!==!1){const z=Object.keys(D),{shapeFlag:H}=B;z.length&&H&7&&(s&&z.some(vb)&&(D=KO(D,s)),B=zc(B,D,!1,!0))}return n.dirs&&(B=zc(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&_h(B,n.transition),O=B,Bg(T),O}function YO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(wh(i)){if(i.type!==Co||i.children==="v-if"){if(n)return;n=i}}else return}return n}const ZO=t=>{let e;for(const n in t)(n==="class"||n==="style"||rm(n))&&((e||(e={}))[n]=t[n]);return e},KO=(t,e)=>{const n={};for(const r in t)(!vb(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function XO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?cx(r,o,c):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const y=f[p];if(o[y]!==r[y]&&!Zv(c,y))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?cx(r,o,c):!0:!!o;return!1}function cx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Zv(n,s))return!0}return!1}function Kv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const iv=t=>t.__isSuspense;let c2=0;const JO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)eD(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}tD(t,e,n,r,i,o,a,l,c)}},hydrate:nD,normalize:rD},QO=JO;function zg(t,e){const n=t.props&&t.props[e];br(n)&&n()}function eD(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:f}}=l,p=f("div"),y=t.suspense=iC(t,i,r,e,p,n,s,o,a,l);c(null,y.pendingBranch=t.ssContent,p,null,r,y,s,o),y.deps>0?(zg(t,"onPending"),zg(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),Xd(y,t.ssFallback)):y.resolve(!1,!0)}function tD(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:f}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const y=e.ssContent,m=e.ssFallback,{activeBranch:C,pendingBranch:S,isInFallback:T,isHydrating:O}=p;if(S)p.pendingBranch=y,nc(y,S)?(l(S,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():T&&(O||(l(C,m,n,r,i,null,s,o,a),Xd(p,m)))):(p.pendingId=c2++,O?(p.isHydrating=!1,p.activeBranch=S):c(S,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=f("div"),T?(l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(C,m,n,r,i,null,s,o,a),Xd(p,m))):C&&nc(y,C)?(l(C,y,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(C&&nc(y,C))l(C,y,n,r,i,p,s,o,a),Xd(p,y);else if(zg(e,"onPending"),p.pendingBranch=y,y.shapeFlag&512?p.pendingId=y.component.suspenseId:p.pendingId=c2++,l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:B}=p;D>0?setTimeout(()=>{p.pendingId===B&&p.fallback(m)},D):D===0&&p.fallback(m)}}function iC(t,e,n,r,i,s,o,a,l,c,f=!1){const{p,m:y,um:m,n:C,o:{parentNode:S,remove:T}}=c;let O;const D=iD(t);D&&e&&e.pendingBranch&&(O=e.pendingId,e.deps++);const B=t.props?X0(t.props.timeout):void 0,z=s,H={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:c2++,timeout:typeof B=="number"?B:-1,activeBranch:null,pendingBranch:null,isInFallback:!f,isHydrating:f,isUnmounted:!1,effects:[],resolve(J=!1,Q=!1){const{vnode:V,activeBranch:Y,pendingBranch:ge,pendingId:$,effects:W,parentComponent:se,container:X}=H;let U=!1;H.isHydrating?H.isHydrating=!1:J||(U=Y&&ge.transition&&ge.transition.mode==="out-in",U&&(Y.transition.afterLeave=()=>{$===H.pendingId&&(y(ge,X,s===z?C(Y):s,0),Ig(W))}),Y&&(S(Y.el)===X&&(s=C(Y)),m(Y,se,H,!0)),U||y(ge,X,s,0)),Xd(H,ge),H.pendingBranch=null,H.isInFallback=!1;let R=H.parent,ee=!1;for(;R;){if(R.pendingBranch){R.effects.push(...W),ee=!0;break}R=R.parent}!ee&&!U&&Ig(W),H.effects=[],D&&e&&e.pendingBranch&&O===e.pendingId&&(e.deps--,e.deps===0&&!Q&&e.resolve()),zg(V,"onResolve")},fallback(J){if(!H.pendingBranch)return;const{vnode:Q,activeBranch:V,parentComponent:Y,container:ge,namespace:$}=H;zg(Q,"onFallback");const W=C(V),se=()=>{H.isInFallback&&(p(null,J,ge,W,Y,null,$,a,l),Xd(H,J))},X=J.transition&&J.transition.mode==="out-in";X&&(V.transition.afterLeave=se),H.isInFallback=!0,m(V,Y,null,!0),X||se()},move(J,Q,V){H.activeBranch&&y(H.activeBranch,J,Q,V),H.container=J},next(){return H.activeBranch&&C(H.activeBranch)},registerDep(J,Q,V){const Y=!!H.pendingBranch;Y&&H.deps++;const ge=J.vnode.el;J.asyncDep.catch($=>{rd($,J,0)}).then($=>{if(J.isUnmounted||H.isUnmounted||H.pendingId!==J.suspenseId)return;J.asyncResolved=!0;const{vnode:W}=J;p2(J,$,!1),ge&&(W.el=ge);const se=!ge&&J.subTree.el;Q(J,W,S(ge||J.subTree.el),ge?null:C(J.subTree),H,o,V),se&&T(se),Kv(J,W.el),Y&&--H.deps===0&&H.resolve()})},unmount(J,Q){H.isUnmounted=!0,H.activeBranch&&m(H.activeBranch,n,J,Q),H.pendingBranch&&m(H.pendingBranch,n,J,Q)}};return H}function nD(t,e,n,r,i,s,o,a,l){const c=e.suspense=iC(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),f=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),f}function rD(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=hx(r?n.default:n),t.ssFallback=r?hx(n.fallback):Kr(Co)}function hx(t){let e;if(br(t)){const n=Xf&&t._c;n&&(t._d=!1,Ae()),t=t(),n&&(t._d=!0,e=ja,oC())}return Yn(t)&&(t=YO(t)),t=Dl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function sC(t,e){e&&e.pendingBranch?Yn(t)?e.effects.push(...t):e.effects.push(t):Ig(t)}function Xd(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Kv(r,i))}function iD(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const vn=Symbol.for("v-fgt"),ef=Symbol.for("v-txt"),Co=Symbol.for("v-cmt"),Hf=Symbol.for("v-stc"),dg=[];let ja=null;function Ae(t=!1){dg.push(ja=t?null:[])}function oC(){dg.pop(),ja=dg[dg.length-1]||null}let Xf=1;function h2(t,e=!1){Xf+=t,t<0&&ja&&e&&(ja.hasOnce=!0)}function aC(t){return t.dynamicChildren=Xf>0?ja||Gd:null,oC(),Xf>0&&ja&&ja.push(t),t}function Fe(t,e,n,r,i,s){return aC(P(t,e,n,r,i,s,!0))}function Lo(t,e,n,r,i){return aC(Kr(t,e,n,r,i,!0))}function wh(t){return t?t.__v_isVNode===!0:!1}function nc(t,e){return t.type===e.type&&t.key===e.key}function sD(t){}const lC=({key:t})=>t??null,S0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ts(t)||Bs(t)||br(t)?{i:Oo,r:t,k:e,f:!!n}:t:null);function P(t,e=null,n=null,r=0,i=null,s=t===vn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&lC(e),ref:e&&S0(e),scopeId:Wv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Oo};return a?(Hb(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=ts(n)?8:16),Xf>0&&!o&&ja&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ja.push(l),l}const Kr=oD;function oD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===OL)&&(t=Co),wh(t)){const a=zc(t,e,!0);return n&&Hb(a,n),Xf>0&&!s&&ja&&(a.shapeFlag&6?ja[ja.indexOf(t)]=a:ja.push(a)),a.patchFlag=-2,a}if(dD(t)&&(t=t.__vccOpts),e){e=uC(e);let{class:a,style:l}=e;a&&!ts(a)&&(e.class=yi(a)),Ri(l)&&(Vv(l)&&!Yn(l)&&(l=Gi({},l)),e.style=Fl(l))}const o=ts(t)?1:iv(t)?128:vL(t)?64:Ri(t)?4:br(t)?2:0;return P(t,e,n,r,i,o,s,!0)}function uC(t){return t?Vv(t)||zL(t)?Gi({},t):t:null}function zc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?cC(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&lC(c),ref:e&&e.ref?n&&s?Yn(s)?s.concat(S0(e)):[s,S0(e)]:S0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==vn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zc(t.ssContent),ssFallback:t.ssFallback&&zc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&_h(f,l.clone(f)),f}function Rr(t=" ",e=0){return Kr(ef,null,t,e)}function uu(t,e){const n=Kr(Hf,null,t);return n.staticCount=e,n}function Xt(t="",e=!1){return e?(Ae(),Lo(Co,null,t)):Kr(Co,null,t)}function Dl(t){return t==null||typeof t=="boolean"?Kr(Co):Yn(t)?Kr(vn,null,t.slice()):wh(t)?$h(t):Kr(ef,null,String(t))}function $h(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zc(t)}function Hb(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Yn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Hb(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!zL(e)?e._ctx=Oo:i===3&&Oo&&(Oo.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else br(e)?(e={default:e,_ctx:Oo},n=32):(e=String(e),r&64?(n=16,e=[Rr(e)]):n=8);t.children=e,t.shapeFlag|=n}function cC(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=yi([e.class,r.class]));else if(i==="style")e.style=Fl([e.style,r.style]);else if(rm(i)){const s=e[i],o=r[i];o&&s!==o&&!(Yn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Al(t,e,n,r=null){Ou(t,e,7,[n,r])}const aD=BL();let lD=0;function hC(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||aD,s={uid:lD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new wb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$L(r,i),emitsOptions:rC(r,i),emit:null,emitted:null,propsDefaults:di,inheritAttrs:r.inheritAttrs,ctx:di,data:di,props:di,attrs:di,slots:di,refs:di,setupState:di,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=qO.bind(null,s),t.ce&&t.ce(s),s}let To=null;const Iu=()=>To||Oo;let sv,f2;{const t=Rv(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};sv=e("__VUE_INSTANCE_SETTERS__",n=>To=n),f2=e("__VUE_SSR_SETTERS__",n=>ip=n)}const Jf=t=>{const e=To;return sv(t),t.scope.on(),()=>{t.scope.off(),sv(e)}},d2=()=>{To&&To.scope.off(),sv(null)};function fC(t){return t.vnode.shapeFlag&4}let ip=!1;function dC(t,e=!1,n=!1){e&&f2(e);const{props:r,children:i}=t.vnode,s=fC(t);RO(t,r,s,e),UO(t,i,n);const o=s?uD(t,e):void 0;return e&&f2(!1),o}function uD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,o2);const{setup:r}=n;if(r){cf();const i=t.setupContext=r.length>1?gC(t):null,s=Jf(t),o=gp(r,t,0,[t.props,i]),a=bb(o);if(hf(),s(),(a||t.sp)&&!Qh(t)&&Nb(t),a){if(o.then(d2,d2),e)return o.then(l=>{p2(t,l,e)}).catch(l=>{rd(l,t,0)});t.asyncDep=o}else p2(t,o,e)}else pC(t,e)}function p2(t,e,n){br(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ri(e)&&(t.setupState=Ab(e)),pC(t,n)}let ov,g2;function cD(t){ov=t,g2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,mO))}}const hD=()=>!ov;function pC(t,e,n){const r=t.type;if(!t.render){if(!e&&ov&&!r.render){const i=r.template||Ub(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Gi(Gi({isCustomElement:s,delimiters:a},o),l);r.render=ov(i,c)}}t.render=r.render||Mu,g2&&g2(t)}{const i=Jf(t);cf();try{AO(t)}finally{hf(),i()}}}const fD={get(t,e){return Ia(t,"get",""),t[e]}};function gC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,fD),slots:t.slots,emit:t.emit,expose:e}}function am(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ab(Hv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hg)return hg[n](t)},has(e,n){return n in e||n in hg}})):t.proxy}function m2(t,e=!0){return br(t)?t.displayName||t.name:t.name||e&&t.__name}function dD(t){return br(t)&&"__vccOpts"in t}const rr=(t,e)=>A8(t,e,ip);function Xv(t,e,n){const r=arguments.length;return r===2?Ri(e)&&!Yn(e)?wh(e)?Kr(t,null,[e]):Kr(t,e):Kr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&wh(n)&&(n=[n]),Kr(t,e,n))}function pD(){}function gD(t,e,n,r){const i=n[r];if(i&&mC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function mC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(ol(n[r],e[r]))return!1;return Xf>0&&ja&&ja.push(t),!0}const vC="3.5.13",mD=Mu,vD=j8,yD=Rd,bD=gL,_D={createComponentInstance:hC,setupComponent:dC,renderComponentRoot:C0,setCurrentRenderingInstance:Bg,isVNode:wh,normalizeVNode:Dl,getComponentPublicInstance:am,ensureValidVNode:zb,pushWarningContext:N8,popWarningContext:B8},wD=_D,xD=null,LD=null,CD=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let v2;const fx=typeof window<"u"&&window.trustedTypes;if(fx)try{v2=fx.createPolicy("vue",{createHTML:t=>t})}catch{}const yC=v2?t=>v2.createHTML(t):t=>t,SD="http://www.w3.org/2000/svg",ED="http://www.w3.org/1998/Math/MathML",ch=typeof document<"u"?document:null,dx=ch&&ch.createElement("template"),PD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ch.createElementNS(SD,t):e==="mathml"?ch.createElementNS(ED,t):n?ch.createElement(t,{is:n}):ch.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ch.createTextNode(t),createComment:t=>ch.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ch.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{dx.innerHTML=yC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=dx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Oh="transition",kp="animation",sp=Symbol("_vtc"),bC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},_C=Gi({},Ib,bC),kD=t=>(t.displayName="Transition",t.props=_C,t),y2=kD((t,{slots:e})=>Xv(xL,wC(t),e)),Sf=(t,e=[])=>{Yn(t)?t.forEach(n=>n(...e)):t&&t(...e)},px=t=>t?Yn(t)?t.some(e=>e.length>1):t.length>1:!1;function wC(t){const e={};for(const W in t)W in bC||(e[W]=t[W]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:f=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:y=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,C=MD(i),S=C&&C[0],T=C&&C[1],{onBeforeEnter:O,onEnter:D,onEnterCancelled:B,onLeave:z,onLeaveCancelled:H,onBeforeAppear:J=O,onAppear:Q=D,onAppearCancelled:V=B}=e,Y=(W,se,X,U)=>{W._enterCancelled=U,Rh(W,se?f:a),Rh(W,se?c:o),X&&X()},ge=(W,se)=>{W._isLeaving=!1,Rh(W,p),Rh(W,m),Rh(W,y),se&&se()},$=W=>(se,X)=>{const U=W?Q:D,R=()=>Y(se,W,X);Sf(U,[se,R]),gx(()=>{Rh(se,W?l:s),Ec(se,W?f:a),px(U)||mx(se,r,S,R)})};return Gi(e,{onBeforeEnter(W){Sf(O,[W]),Ec(W,s),Ec(W,o)},onBeforeAppear(W){Sf(J,[W]),Ec(W,l),Ec(W,c)},onEnter:$(!1),onAppear:$(!0),onLeave(W,se){W._isLeaving=!0;const X=()=>ge(W,se);Ec(W,p),W._enterCancelled?(Ec(W,y),b2()):(b2(),Ec(W,y)),gx(()=>{W._isLeaving&&(Rh(W,p),Ec(W,m),px(z)||mx(W,r,T,X))}),Sf(z,[W,X])},onEnterCancelled(W){Y(W,!1,void 0,!0),Sf(B,[W])},onAppearCancelled(W){Y(W,!0,void 0,!0),Sf(V,[W])},onLeaveCancelled(W){ge(W),Sf(H,[W])}})}function MD(t){if(t==null)return null;if(Ri(t))return[s1(t.enter),s1(t.leave)];{const e=s1(t);return[e,e]}}function s1(t){return X0(t)}function Ec(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[sp]||(t[sp]=new Set)).add(e)}function Rh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[sp];n&&(n.delete(e),n.size||(t[sp]=void 0))}function gx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let AD=0;function mx(t,e,n,r){const i=t._endId=++AD,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=xC(t,e);if(!o)return r();const c=o+"end";let f=0;const p=()=>{t.removeEventListener(c,y),s()},y=m=>{m.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},a+1),t.addEventListener(c,y)}function xC(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),i=r(`${Oh}Delay`),s=r(`${Oh}Duration`),o=vx(i,s),a=r(`${kp}Delay`),l=r(`${kp}Duration`),c=vx(a,l);let f=null,p=0,y=0;e===Oh?o>0&&(f=Oh,p=o,y=s.length):e===kp?c>0&&(f=kp,p=c,y=l.length):(p=Math.max(o,c),f=p>0?o>c?Oh:kp:null,y=f?f===Oh?s.length:l.length:0);const m=f===Oh&&/\b(transform|all)(,|$)/.test(r(`${Oh}Property`).toString());return{type:f,timeout:p,propCount:y,hasTransform:m}}function vx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>yx(n)+yx(t[r])))}function yx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function b2(){return document.body.offsetHeight}function TD(t,e,n){const r=t[sp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const av=Symbol("_vod"),LC=Symbol("_vsh"),Wb={beforeMount(t,{value:e},{transition:n}){t[av]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Mp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Mp(t,!0),r.enter(t)):r.leave(t,()=>{Mp(t,!1)}):Mp(t,e))},beforeUnmount(t,{value:e}){Mp(t,e)}};function Mp(t,e){t.style.display=e?t[av]:"none",t[LC]=!e}function OD(){Wb.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const CC=Symbol("");function DD(t){const e=Iu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>lv(s,i))},r=()=>{const i=t(e.proxy);e.ce?lv(e.ce,i):_2(e.subTree,i),n(i)};Bb(()=>{Ig(r)}),Zs(()=>{vi(r,Mu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Au(()=>i.disconnect())})}function _2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{_2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)lv(t.el,e);else if(t.type===vn)t.children.forEach(n=>_2(n,e));else if(t.type===Hf){let{el:n,anchor:r}=t;for(;n&&(lv(n,e),n!==r);)n=n.nextSibling}}function lv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[CC]=r}}const ID=/(^|;)\s*display\s*:/;function ND(t,e,n){const r=t.style,i=ts(n);let s=!1;if(n&&!i){if(e)if(ts(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&E0(r,a,"")}else for(const o in e)n[o]==null&&E0(r,o,"");for(const o in n)o==="display"&&(s=!0),E0(r,o,n[o])}else if(i){if(e!==n){const o=r[CC];o&&(n+=";"+o),r.cssText=n,s=ID.test(n)}}else e&&t.removeAttribute("style");av in t&&(t[av]=s?r.display:"",t[LC]&&(r.display="none"))}const bx=/\s*!important$/;function E0(t,e,n){if(Yn(n))n.forEach(r=>E0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=BD(t,e);bx.test(n)?t.setProperty(Il(r),n.replace(bx,""),"important"):t[r]=n}}const _x=["Webkit","Moz","ms"],o1={};function BD(t,e){const n=o1[e];if(n)return n;let r=fa(e);if(r!=="filter"&&r in t)return o1[e]=r;r=im(r);for(let i=0;i<_x.length;i++){const s=_x[i]+r;if(s in t)return o1[e]=s}return e}const wx="http://www.w3.org/1999/xlink";function xx(t,e,n,r,i,s=XT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(wx,e.slice(6,e.length)):t.setAttributeNS(wx,e,n):n==null||s&&!$3(n)?t.removeAttribute(e):t.setAttribute(e,s?"":ac(n)?String(n):n)}function Lx(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?yC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=$3(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function ph(t,e,n,r){t.addEventListener(e,n,r)}function RD(t,e,n,r){t.removeEventListener(e,n,r)}const Cx=Symbol("_vei");function FD(t,e,n,r,i=null){const s=t[Cx]||(t[Cx]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=jD(e);if(r){const c=s[e]=$D(r,i);ph(t,a,c,l)}else o&&(RD(t,a,o,l),s[e]=void 0)}}const Sx=/(?:Once|Passive|Capture)$/;function jD(t){let e;if(Sx.test(t)){e={};let r;for(;r=t.match(Sx);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Il(t.slice(2)),e]}let a1=0;const zD=Promise.resolve(),UD=()=>a1||(zD.then(()=>a1=0),a1=Date.now());function $D(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ou(VD(r,n.value),e,5,[r])};return n.value=t,n.attached=UD(),n}function VD(t,e){if(Yn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Ex=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,HD=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?TD(t,r,o):e==="style"?ND(t,n,r):rm(e)?vb(e)||FD(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):WD(t,e,r,o))?(Lx(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&xx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ts(r))?Lx(t,fa(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),xx(t,e,r,o))};function WD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ex(e)&&br(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ex(e)&&ts(n)?!1:e in t}const Px={};/*! #__NO_SIDE_EFFECTS__ */function SC(t,e,n){const r=_s(t,e);Nv(r)&&Gi(r,e);class i extends Jv{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const GD=(t,e)=>SC(t,e,NC),qD=typeof HTMLElement<"u"?HTMLElement:class{};class Jv extends qD{constructor(e,n={},r=cv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==cv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Jv){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,ll(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!Yn(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=X0(this._props[l])),(a||(a=Object.create(null)))[fa(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ei(this,r)||Object.defineProperty(this,r,{get:()=>ln(n[r])})}_resolveProps(e){const{props:n}=e,r=Yn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(fa))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):Px;const i=fa(e);n&&this._numberProps&&this._numberProps[i]&&(r=X0(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===Px?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Il(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Il(e),n+""):n||this.removeAttribute(Il(e)),s&&s.observe(this,{attributes:!0})}}_update(){IC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=Kr(this._def,Gi(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,Nv(o[0])?Gi({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Il(s)!==s&&i(Il(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",f=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=f.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function EC(t){const e=Iu(),n=e&&e.ce;return n||null}function YD(){const t=EC();return t&&t.shadowRoot}function ZD(t="$style"){{const e=Iu();if(!e)return di;const n=e.type.__cssModules;if(!n)return di;const r=n[t];return r||di}}const PC=new WeakMap,kC=new WeakMap,uv=Symbol("_moveCb"),kx=Symbol("_enterCb"),KD=t=>(delete t.props.mode,t),XD=KD({name:"TransitionGroup",props:Gi({},_C,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Iu(),r=Db();let i,s;return Yv(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!nI(i[0].el,n.vnode.el,o))return;i.forEach(QD),i.forEach(eI);const a=i.filter(tI);b2(),a.forEach(l=>{const c=l.el,f=c.style;Ec(c,o),f.transform=f.webkitTransform=f.transitionDuration="";const p=c[uv]=y=>{y&&y.target!==c||(!y||/transform$/.test(y.propertyName))&&(c.removeEventListener("transitionend",p),c[uv]=null,Rh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=hi(t),a=wC(o);let l=o.tag||vn;if(i=[],s)for(let c=0;c<s.length;c++){const f=s[c];f.el&&f.el instanceof Element&&(i.push(f),_h(f,rp(f,a,r,n)),PC.set(f,f.el.getBoundingClientRect()))}s=e.default?Gv(e.default()):[];for(let c=0;c<s.length;c++){const f=s[c];f.key!=null&&_h(f,rp(f,a,r,n))}return Kr(l,null,s)}}}),JD=XD;function QD(t){const e=t.el;e[uv]&&e[uv](),e[kx]&&e[kx]()}function eI(t){kC.set(t,t.el.getBoundingClientRect())}function tI(t){const e=PC.get(t),n=kC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function nI(t,e,n){const r=t.cloneNode(),i=t[sp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=xC(r);return s.removeChild(r),o}const sf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Yn(e)?n=>Zd(e,n):e};function rI(t){t.target.composing=!0}function Mx(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tu=Symbol("_assign"),fi={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Tu]=sf(i);const s=r||i.props&&i.props.type==="number";ph(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=K0(a)),t[Tu](a)}),n&&ph(t,"change",()=>{t.value=t.value.trim()}),e||(ph(t,"compositionstart",rI),ph(t,"compositionend",Mx),ph(t,"change",Mx))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Tu]=sf(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?K0(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Tl={deep:!0,created(t,e,n){t[Tu]=sf(n),ph(t,"change",()=>{const r=t._modelValue,i=op(t),s=t.checked,o=t[Tu];if(Yn(r)){const a=Fv(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(nd(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(MC(t,s))})},mounted:Ax,beforeUpdate(t,e,n){t[Tu]=sf(n),Ax(t,e,n)}};function Ax(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Yn(e))i=Fv(e,r.props.value)>-1;else if(nd(e))i=e.has(r.props.value);else{if(e===n)return;i=nf(e,MC(t,!0))}t.checked!==i&&(t.checked=i)}const Gb={created(t,{value:e},n){t.checked=nf(e,n.props.value),t[Tu]=sf(n),ph(t,"change",()=>{t[Tu](op(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Tu]=sf(r),e!==n&&(t.checked=nf(e,r.props.value))}},os={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=nd(e);ph(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?K0(op(o)):op(o));t[Tu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,ll(()=>{t._assigning=!1})}),t[Tu]=sf(r)},mounted(t,{value:e}){Tx(t,e)},beforeUpdate(t,e,n){t[Tu]=sf(n)},updated(t,{value:e}){t._assigning||Tx(t,e)}};function Tx(t,e){const n=t.multiple,r=Yn(e);if(!(n&&!r&&!nd(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=op(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Fv(e,a)>-1}else o.selected=e.has(a);else if(nf(op(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function op(t){return"_value"in t?t._value:t.value}function MC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const qb={created(t,e,n){qm(t,e,n,null,"created")},mounted(t,e,n){qm(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){qm(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){qm(t,e,n,r,"updated")}};function AC(t,e){switch(t){case"SELECT":return os;case"TEXTAREA":return fi;default:switch(e){case"checkbox":return Tl;case"radio":return Gb;default:return fi}}}function qm(t,e,n,r,i){const o=AC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function iI(){fi.getSSRProps=({value:t})=>({value:t}),Gb.getSSRProps=({value:t},e)=>{if(e.props&&nf(e.props.value,t))return{checked:!0}},Tl.getSSRProps=({value:t},e)=>{if(Yn(t)){if(e.props&&Fv(t,e.props.value)>-1)return{checked:!0}}else if(nd(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},qb.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=AC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const sI=["ctrl","shift","alt","meta"],oI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sI.some(n=>t[`${n}Key`]&&!e.includes(n))},Rl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=oI[e[o]];if(a&&a(i,e))return}return t(i,...s)})},aI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},lI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Il(i.key);if(e.some(o=>o===s||aI[o]===s))return t(i)})},TC=Gi({patchProp:HD},PD);let pg,Ox=!1;function OC(){return pg||(pg=qL(TC))}function DC(){return pg=Ox?pg:YL(TC),Ox=!0,pg}const IC=(...t)=>{OC().render(...t)},uI=(...t)=>{DC().hydrate(...t)},cv=(...t)=>{const e=OC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=RC(r);if(!i)return;const s=e._component;!br(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,BC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},NC=(...t)=>{const e=DC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=RC(r);if(i)return n(i,!0,BC(i))},e};function BC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function RC(t){return ts(t)?document.querySelector(t):t}let Dx=!1;const cI=()=>{Dx||(Dx=!0,iI(),OD())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const hI=()=>{},fI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:xL,BaseTransitionPropsValidators:Ib,Comment:Co,DeprecationTypes:CD,EffectScope:wb,ErrorCodes:F8,ErrorTypeStrings:vD,Fragment:vn,KeepAlive:uO,ReactiveEffect:Tg,Static:Hf,Suspense:QO,Teleport:Fd,Text:ef,TrackOpTypes:T8,Transition:y2,TransitionGroup:JD,TriggerOpTypes:O8,VueElement:Jv,assertNumber:R8,callWithAsyncErrorHandling:Ou,callWithErrorHandling:gp,camelize:fa,capitalize:im,cloneVNode:zc,compatUtils:LD,compile:hI,computed:rr,createApp:cv,createBlock:Lo,createCommentVNode:Xt,createElementBlock:Fe,createElementVNode:P,createHydrationRenderer:YL,createPropsRestProxy:kO,createRenderer:qL,createSSRApp:NC,createSlots:dO,createStaticVNode:uu,createTextVNode:Rr,createVNode:Kr,customRef:lL,defineAsyncComponent:aO,defineComponent:_s,defineCustomElement:SC,defineEmits:yO,defineExpose:bO,defineModel:xO,defineOptions:_O,defineProps:vO,defineSSRCustomElement:GD,defineSlots:wO,devtools:yD,effect:e8,effectScope:xb,getCurrentInstance:Iu,getCurrentScope:Lb,getCurrentWatcher:D8,getTransitionRawChildren:Gv,guardReactiveProps:uC,h:Xv,handleError:rd,hasInjectionContext:RL,hydrate:uI,hydrateOnIdle:tO,hydrateOnInteraction:sO,hydrateOnMediaQuery:iO,hydrateOnVisible:rO,initCustomFormatter:pD,initDirectivesForSSR:cI,inject:lu,isMemoSame:mC,isProxy:Vv,isReactive:Bc,isReadonly:rf,isRef:Bs,isRuntimeOnly:hD,isShallow:au,isVNode:wh,markRaw:Hv,mergeDefaults:EO,mergeModels:PO,mergeProps:cC,nextTick:ll,normalizeClass:yi,normalizeProps:ZT,normalizeStyle:Fl,onActivated:CL,onBeforeMount:PL,onBeforeUnmount:ff,onBeforeUpdate:Bb,onDeactivated:SL,onErrorCaptured:TL,onMounted:Zs,onRenderTracked:AL,onRenderTriggered:ML,onScopeDispose:W3,onServerPrefetch:kL,onUnmounted:Au,onUpdated:Yv,onWatcherCleanup:cL,openBlock:Ae,popScopeId:V8,provide:fg,proxyRefs:Ab,pushScopeId:$8,queuePostFlushCb:Ig,reactive:hu,readonly:kb,ref:kt,registerRuntimeCompiler:cD,render:IC,renderList:nr,renderSlot:pO,resolveComponent:Fb,resolveDirective:fO,resolveDynamicComponent:DL,resolveFilter:xD,resolveTransitionHooks:rp,setBlockTracking:h2,setDevtoolsHook:bD,setTransitionHooks:_h,shallowReactive:Pb,shallowReadonly:_8,shallowRef:Mb,ssrContextKey:JL,ssrUtils:wD,stop:t8,toDisplayString:jt,toHandlerKey:ag,toHandlers:gO,toRaw:hi,toRef:k8,toRefs:Tb,toValue:L8,transformVNodeArgs:sD,triggerRef:x8,unref:ln,useAttrs:SO,useCssModule:ZD,useCssVars:DD,useHost:EC,useId:q8,useModel:GO,useSSRContext:QL,useShadowRoot:YD,useSlots:CO,useTemplateRef:Y8,useTransitionState:Db,vModelCheckbox:Tl,vModelDynamic:qb,vModelRadio:Gb,vModelSelect:os,vModelText:fi,vShow:Wb,version:vC,warn:mD,watch:vi,watchEffect:jg,watchPostEffect:HO,watchSyncEffect:eC,withAsyncContext:MO,withCtx:Nl,withDefaults:LO,withDirectives:jn,withKeys:lI,withMemo:gD,withModifiers:Rl,withScopeId:H8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let FC;const Qv=t=>FC=t,jC=Symbol();function w2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var gg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(gg||(gg={}));function dI(){const t=xb(!0),e=t.run(()=>kt({}));let n=[],r=[];const i=Hv({install(s){Qv(i),i._a=s,s.provide(jC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const zC=()=>{};function Ix(t,e,n,r=zC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Lb()&&W3(i),i}function Ed(t,...e){t.slice().forEach(n=>{n(...e)})}const pI=t=>t(),Nx=Symbol(),l1=Symbol();function x2(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];w2(i)&&w2(r)&&t.hasOwnProperty(n)&&!Bs(r)&&!Bc(r)?t[n]=x2(i,r):t[n]=r}return t}const gI=Symbol();function mI(t){return!w2(t)||!t.hasOwnProperty(gI)}const{assign:Fh}=Object;function vI(t){return!!(Bs(t)&&t.effect)}function yI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const f=Tb(n.state.value[t]);return Fh(f,s,Object.keys(o||{}).reduce((p,y)=>(p[y]=Hv(rr(()=>{Qv(n);const m=n._s.get(t);return o[y].call(m,m)})),p),{}))}return l=UC(t,c,e,n,r,!0),l}function UC(t,e,n={},r,i,s){let o;const a=Fh({actions:{}},n),l={deep:!0};let c,f,p=[],y=[],m;const C=r.state.value[t];!s&&!C&&(r.state.value[t]={}),kt({});let S;function T(V){let Y;c=f=!1,typeof V=="function"?(V(r.state.value[t]),Y={type:gg.patchFunction,storeId:t,events:m}):(x2(r.state.value[t],V),Y={type:gg.patchObject,payload:V,storeId:t,events:m});const ge=S=Symbol();ll().then(()=>{S===ge&&(c=!0)}),f=!0,Ed(p,Y,r.state.value[t])}const O=s?function(){const{state:Y}=n,ge=Y?Y():{};this.$patch($=>{Fh($,ge)})}:zC;function D(){o.stop(),p=[],y=[],r._s.delete(t)}const B=(V,Y="")=>{if(Nx in V)return V[l1]=Y,V;const ge=function(){Qv(r);const $=Array.from(arguments),W=[],se=[];function X(ee){W.push(ee)}function U(ee){se.push(ee)}Ed(y,{args:$,name:ge[l1],store:H,after:X,onError:U});let R;try{R=V.apply(this&&this.$id===t?this:H,$)}catch(ee){throw Ed(se,ee),ee}return R instanceof Promise?R.then(ee=>(Ed(W,ee),ee)).catch(ee=>(Ed(se,ee),Promise.reject(ee))):(Ed(W,R),R)};return ge[Nx]=!0,ge[l1]=Y,ge},z={_p:r,$id:t,$onAction:Ix.bind(null,y),$patch:T,$reset:O,$subscribe(V,Y={}){const ge=Ix(p,V,Y.detached,()=>$()),$=o.run(()=>vi(()=>r.state.value[t],W=>{(Y.flush==="sync"?f:c)&&V({storeId:t,type:gg.direct,events:m},W)},Fh({},l,Y)));return ge},$dispose:D},H=hu(z);r._s.set(t,H);const Q=(r._a&&r._a.runWithContext||pI)(()=>r._e.run(()=>(o=xb()).run(()=>e({action:B}))));for(const V in Q){const Y=Q[V];if(Bs(Y)&&!vI(Y)||Bc(Y))s||(C&&mI(Y)&&(Bs(Y)?Y.value=C[V]:x2(Y,C[V])),r.state.value[t][V]=Y);else if(typeof Y=="function"){const ge=B(Y,V);Q[V]=ge,a.actions[V]=Y}}return Fh(H,Q),Fh(hi(H),Q),Object.defineProperty(H,"$state",{get:()=>r.state.value[t],set:V=>{T(Y=>{Fh(Y,V)})}}),r._p.forEach(V=>{Fh(H,o.run(()=>V({store:H,app:r._a,pinia:r,options:a})))}),C&&s&&n.hydrate&&n.hydrate(H.$state,C),c=!0,f=!0,H}/*! #__NO_SIDE_EFFECTS__ */function mp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=RL();return a=a||(c?lu(jC,null):null),a&&Qv(a),a=FC,a._s.has(r)||(s?UC(r,e,i,a):yI(r,i,a)),a._s.get(r)}return o.$id=r,o}function $C(t,e){return function(){return t.apply(e,arguments)}}const{toString:bI}=Object.prototype,{getPrototypeOf:Yb}=Object,ey=(t=>e=>{const n=bI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),uc=t=>(t=t.toLowerCase(),e=>ey(e)===t),ty=t=>e=>typeof e===t,{isArray:vp}=Array,Ug=ty("undefined");function _I(t){return t!==null&&!Ug(t)&&t.constructor!==null&&!Ug(t.constructor)&&cu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const VC=uc("ArrayBuffer");function wI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&VC(t.buffer),e}const xI=ty("string"),cu=ty("function"),HC=ty("number"),ny=t=>t!==null&&typeof t=="object",LI=t=>t===!0||t===!1,P0=t=>{if(ey(t)!=="object")return!1;const e=Yb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},CI=uc("Date"),SI=uc("File"),EI=uc("Blob"),PI=uc("FileList"),kI=t=>ny(t)&&cu(t.pipe),MI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||cu(t.append)&&((e=ey(t))==="formdata"||e==="object"&&cu(t.toString)&&t.toString()==="[object FormData]"))},AI=uc("URLSearchParams"),[TI,OI,DI,II]=["ReadableStream","Request","Response","Headers"].map(uc),NI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),vp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function WC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GC=t=>!Ug(t)&&t!==jf;function L2(){const{caseless:t}=GC(this)&&this||{},e={},n=(r,i)=>{const s=t&&WC(e,i)||i;P0(e[s])&&P0(r)?e[s]=L2(e[s],r):P0(r)?e[s]=L2({},r):vp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&lm(arguments[r],n);return e}const BI=(t,e,n,{allOwnKeys:r}={})=>(lm(e,(i,s)=>{n&&cu(i)?t[s]=$C(i,n):t[s]=i},{allOwnKeys:r}),t),RI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),FI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},jI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Yb(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},zI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},UI=t=>{if(!t)return null;if(vp(t))return t;let e=t.length;if(!HC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},$I=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Yb(Uint8Array)),VI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},HI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},WI=uc("HTMLFormElement"),GI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Bx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),qI=uc("RegExp"),qC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};lm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},YI=t=>{qC(t,(e,n)=>{if(cu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(cu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ZI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return vp(t)?r(t):r(String(t).split(e)),n},KI=()=>{},XI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function JI(t){return!!(t&&cu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const QI=t=>{const e=new Array(10),n=(r,i)=>{if(ny(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=vp(r)?[]:{};return lm(r,(o,a)=>{const l=n(o,i+1);!Ug(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},e7=uc("AsyncFunction"),t7=t=>t&&(ny(t)||cu(t))&&cu(t.then)&&cu(t.catch),YC=((t,e)=>t?setImmediate:e?((n,r)=>(jf.addEventListener("message",({source:i,data:s})=>{i===jf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),jf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",cu(jf.postMessage)),n7=typeof queueMicrotask<"u"?queueMicrotask.bind(jf):typeof process<"u"&&process.nextTick||YC,Gt={isArray:vp,isArrayBuffer:VC,isBuffer:_I,isFormData:MI,isArrayBufferView:wI,isString:xI,isNumber:HC,isBoolean:LI,isObject:ny,isPlainObject:P0,isReadableStream:TI,isRequest:OI,isResponse:DI,isHeaders:II,isUndefined:Ug,isDate:CI,isFile:SI,isBlob:EI,isRegExp:qI,isFunction:cu,isStream:kI,isURLSearchParams:AI,isTypedArray:$I,isFileList:PI,forEach:lm,merge:L2,extend:BI,trim:NI,stripBOM:RI,inherits:FI,toFlatObject:jI,kindOf:ey,kindOfTest:uc,endsWith:zI,toArray:UI,forEachEntry:VI,matchAll:HI,isHTMLForm:WI,hasOwnProperty:Bx,hasOwnProp:Bx,reduceDescriptors:qC,freezeMethods:YI,toObjectSet:ZI,toCamelCase:GI,noop:KI,toFiniteNumber:XI,findKey:WC,global:jf,isContextDefined:GC,isSpecCompliantForm:JI,toJSONObject:QI,isAsyncFn:e7,isThenable:t7,setImmediate:YC,asap:n7};function jr(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Gt.inherits(jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gt.toJSONObject(this.config),code:this.code,status:this.status}}});const ZC=jr.prototype,KC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{KC[t]={value:t}});Object.defineProperties(jr,KC);Object.defineProperty(ZC,"isAxiosError",{value:!0});jr.from=(t,e,n,r,i,s)=>{const o=Object.create(ZC);return Gt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),jr.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const r7=null;function C2(t){return Gt.isPlainObject(t)||Gt.isArray(t)}function XC(t){return Gt.endsWith(t,"[]")?t.slice(0,-2):t}function Rx(t,e,n){return t?t.concat(e).map(function(i,s){return i=XC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function i7(t){return Gt.isArray(t)&&!t.some(C2)}const s7=Gt.toFlatObject(Gt,{},null,function(e){return/^is[A-Z]/.test(e)});function ry(t,e,n){if(!Gt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Gt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!Gt.isUndefined(T[S])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Gt.isSpecCompliantForm(e);if(!Gt.isFunction(i))throw new TypeError("visitor must be a function");function c(C){if(C===null)return"";if(Gt.isDate(C))return C.toISOString();if(!l&&Gt.isBlob(C))throw new jr("Blob is not supported. Use a Buffer instead.");return Gt.isArrayBuffer(C)||Gt.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function f(C,S,T){let O=C;if(C&&!T&&typeof C=="object"){if(Gt.endsWith(S,"{}"))S=r?S:S.slice(0,-2),C=JSON.stringify(C);else if(Gt.isArray(C)&&i7(C)||(Gt.isFileList(C)||Gt.endsWith(S,"[]"))&&(O=Gt.toArray(C)))return S=XC(S),O.forEach(function(B,z){!(Gt.isUndefined(B)||B===null)&&e.append(o===!0?Rx([S],z,s):o===null?S:S+"[]",c(B))}),!1}return C2(C)?!0:(e.append(Rx(T,S,s),c(C)),!1)}const p=[],y=Object.assign(s7,{defaultVisitor:f,convertValue:c,isVisitable:C2});function m(C,S){if(!Gt.isUndefined(C)){if(p.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(C),Gt.forEach(C,function(O,D){(!(Gt.isUndefined(O)||O===null)&&i.call(e,O,Gt.isString(D)?D.trim():D,S,y))===!0&&m(O,S?S.concat(D):[D])}),p.pop()}}if(!Gt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Fx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Zb(t,e){this._pairs=[],t&&ry(t,this,e)}const JC=Zb.prototype;JC.append=function(e,n){this._pairs.push([e,n])};JC.toString=function(e){const n=e?function(r){return e.call(this,r,Fx)}:Fx;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function o7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QC(t,e,n){if(!e)return t;const r=n&&n.encode||o7;Gt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Gt.isURLSearchParams(e)?e.toString():new Zb(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class jx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Gt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const eS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a7=typeof URLSearchParams<"u"?URLSearchParams:Zb,l7=typeof FormData<"u"?FormData:null,u7=typeof Blob<"u"?Blob:null,c7={isBrowser:!0,classes:{URLSearchParams:a7,FormData:l7,Blob:u7},protocols:["http","https","file","blob","url","data"]},Kb=typeof window<"u"&&typeof document<"u",S2=typeof navigator=="object"&&navigator||void 0,h7=Kb&&(!S2||["ReactNative","NativeScript","NS"].indexOf(S2.product)<0),f7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d7=Kb&&window.location.href||"http://localhost",p7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kb,hasStandardBrowserEnv:h7,hasStandardBrowserWebWorkerEnv:f7,navigator:S2,origin:d7},Symbol.toStringTag,{value:"Module"})),Ba={...p7,...c7};function g7(t,e){return ry(t,new Ba.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ba.isNode&&Gt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function m7(t){return Gt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function v7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function tS(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Gt.isArray(i)?i.length:o,l?(Gt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Gt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Gt.isArray(i[o])&&(i[o]=v7(i[o])),!a)}if(Gt.isFormData(t)&&Gt.isFunction(t.entries)){const n={};return Gt.forEachEntry(t,(r,i)=>{e(m7(r),i,n,0)}),n}return null}function y7(t,e,n){if(Gt.isString(t))try{return(e||JSON.parse)(t),Gt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const um={transitional:eS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Gt.isObject(e);if(s&&Gt.isHTMLForm(e)&&(e=new FormData(e)),Gt.isFormData(e))return i?JSON.stringify(tS(e)):e;if(Gt.isArrayBuffer(e)||Gt.isBuffer(e)||Gt.isStream(e)||Gt.isFile(e)||Gt.isBlob(e)||Gt.isReadableStream(e))return e;if(Gt.isArrayBufferView(e))return e.buffer;if(Gt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return g7(e,this.formSerializer).toString();if((a=Gt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ry(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),y7(e)):e}],transformResponse:[function(e){const n=this.transitional||um.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Gt.isResponse(e)||Gt.isReadableStream(e))return e;if(e&&Gt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?jr.from(a,jr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ba.classes.FormData,Blob:Ba.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Gt.forEach(["delete","get","head","post","put","patch"],t=>{um.headers[t]={}});const b7=Gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&b7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},zx=Symbol("internals");function Ap(t){return t&&String(t).trim().toLowerCase()}function k0(t){return t===!1||t==null?t:Gt.isArray(t)?t.map(k0):String(t)}function w7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const x7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function u1(t,e,n,r,i){if(Gt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Gt.isString(e)){if(Gt.isString(r))return e.indexOf(r)!==-1;if(Gt.isRegExp(r))return r.test(e)}}function L7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function C7(t,e){const n=Gt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let jl=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const f=Ap(l);if(!f)throw new Error("header name must be a non-empty string");const p=Gt.findKey(i,f);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=k0(a))}const o=(a,l)=>Gt.forEach(a,(c,f)=>s(c,f,l));if(Gt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Gt.isString(e)&&(e=e.trim())&&!x7(e))o(_7(e),n);else if(Gt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Ap(e),e){const r=Gt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return w7(i);if(Gt.isFunction(n))return n.call(this,i,r);if(Gt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ap(e),e){const r=Gt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||u1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Ap(o),o){const a=Gt.findKey(r,o);a&&(!n||u1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Gt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||u1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Gt.forEach(this,(i,s)=>{const o=Gt.findKey(r,s);if(o){n[o]=k0(i),delete n[s];return}const a=e?L7(s):String(s).trim();a!==s&&delete n[s],n[a]=k0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Gt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Gt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[zx]=this[zx]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ap(o);r[a]||(C7(i,o),r[a]=!0)}return Gt.isArray(e)?e.forEach(s):s(e),this}};jl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Gt.reduceDescriptors(jl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Gt.freezeMethods(jl);function c1(t,e){const n=this||um,r=e||n,i=jl.from(r.headers);let s=r.data;return Gt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function nS(t){return!!(t&&t.__CANCEL__)}function yp(t,e,n){jr.call(this,t??"canceled",jr.ERR_CANCELED,e,n),this.name="CanceledError"}Gt.inherits(yp,jr,{__CANCEL__:!0});function rS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new jr("Request failed with status code "+n.status,[jr.ERR_BAD_REQUEST,jr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function S7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function E7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),f=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,y=0;for(;p!==i;)y+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=f&&c-f;return m?Math.round(y*1e3/m):void 0}}function P7(t,e){let n=0,r=1e3/e,i,s;const o=(c,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=r?o(c,f):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const hv=(t,e,n=3)=>{let r=0;const i=E7(50,250);return P7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),f=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&f?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},Ux=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},$x=t=>(...e)=>Gt.asap(()=>t(...e)),k7=Ba.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ba.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ba.origin),Ba.navigator&&/(msie|trident)/i.test(Ba.navigator.userAgent)):()=>!0,M7=Ba.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Gt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Gt.isString(r)&&o.push("path="+r),Gt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function A7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function T7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function iS(t,e,n){let r=!A7(e);return t&&(r||n==!1)?T7(t,e):e}const Vx=t=>t instanceof jl?{...t}:t;function Qf(t,e){e=e||{};const n={};function r(c,f,p,y){return Gt.isPlainObject(c)&&Gt.isPlainObject(f)?Gt.merge.call({caseless:y},c,f):Gt.isPlainObject(f)?Gt.merge({},f):Gt.isArray(f)?f.slice():f}function i(c,f,p,y){if(Gt.isUndefined(f)){if(!Gt.isUndefined(c))return r(void 0,c,p,y)}else return r(c,f,p,y)}function s(c,f){if(!Gt.isUndefined(f))return r(void 0,f)}function o(c,f){if(Gt.isUndefined(f)){if(!Gt.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function a(c,f,p){if(p in e)return r(c,f);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,f,p)=>i(Vx(c),Vx(f),p,!0)};return Gt.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=l[f]||i,y=p(t[f],e[f],f);Gt.isUndefined(y)&&p!==a||(n[f]=y)}),n}const sS=t=>{const e=Qf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=jl.from(o),e.url=QC(iS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Gt.isFormData(n)){if(Ba.hasStandardBrowserEnv||Ba.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...f]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...f].join("; "))}}if(Ba.hasStandardBrowserEnv&&(r&&Gt.isFunction(r)&&(r=r(e)),r||r!==!1&&k7(e.url))){const c=i&&s&&M7.read(s);c&&o.set(i,c)}return e},O7=typeof XMLHttpRequest<"u",D7=O7&&function(t){return new Promise(function(n,r){const i=sS(t);let s=i.data;const o=jl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,f,p,y,m,C;function S(){m&&m(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function O(){if(!T)return;const B=jl.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),H={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:B,config:t,request:T};rS(function(Q){n(Q),S()},function(Q){r(Q),S()},H),T=null}"onloadend"in T?T.onloadend=O:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(O)},T.onabort=function(){T&&(r(new jr("Request aborted",jr.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new jr("Network Error",jr.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let z=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const H=i.transitional||eS;i.timeoutErrorMessage&&(z=i.timeoutErrorMessage),r(new jr(z,H.clarifyTimeoutError?jr.ETIMEDOUT:jr.ECONNABORTED,t,T)),T=null},s===void 0&&o.setContentType(null),"setRequestHeader"in T&&Gt.forEach(o.toJSON(),function(z,H){T.setRequestHeader(H,z)}),Gt.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),a&&a!=="json"&&(T.responseType=i.responseType),c&&([y,C]=hv(c,!0),T.addEventListener("progress",y)),l&&T.upload&&([p,m]=hv(l),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(f=B=>{T&&(r(!B||B.type?new yp(null,t,T):B),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const D=S7(i.url);if(D&&Ba.protocols.indexOf(D)===-1){r(new jr("Unsupported protocol "+D+":",jr.ERR_BAD_REQUEST,t));return}T.send(s||null)})},I7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const f=c instanceof Error?c:this.reason;r.abort(f instanceof jr?f:new yp(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,s(new jr(`timeout ${e} of ms exceeded`,jr.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Gt.asap(a),l}},N7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},B7=async function*(t,e){for await(const n of R7(t))yield*N7(n,e)},R7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Hx=(t,e,n,r)=>{const i=B7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await i.next();if(c){a(),l.close();return}let p=f.byteLength;if(n){let y=s+=p;n(y)}l.enqueue(new Uint8Array(f))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},iy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",oS=iy&&typeof ReadableStream=="function",F7=iy&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),aS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},j7=oS&&aS(()=>{let t=!1;const e=new Request(Ba.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Wx=64*1024,E2=oS&&aS(()=>Gt.isReadableStream(new Response("").body)),fv={stream:E2&&(t=>t.body)};iy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fv[e]&&(fv[e]=Gt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new jr(`Response type '${e}' is not supported`,jr.ERR_NOT_SUPPORT,r)})})})(new Response);const z7=async t=>{if(t==null)return 0;if(Gt.isBlob(t))return t.size;if(Gt.isSpecCompliantForm(t))return(await new Request(Ba.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Gt.isArrayBufferView(t)||Gt.isArrayBuffer(t))return t.byteLength;if(Gt.isURLSearchParams(t)&&(t=t+""),Gt.isString(t))return(await F7(t)).byteLength},U7=async(t,e)=>{const n=Gt.toFiniteNumber(t.getContentLength());return n??z7(e)},$7=iy&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:f,withCredentials:p="same-origin",fetchOptions:y}=sS(t);c=c?(c+"").toLowerCase():"text";let m=I7([i,s&&s.toAbortSignal()],o),C;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let T;try{if(l&&j7&&n!=="get"&&n!=="head"&&(T=await U7(f,r))!==0){let H=new Request(e,{method:"POST",body:r,duplex:"half"}),J;if(Gt.isFormData(r)&&(J=H.headers.get("content-type"))&&f.setContentType(J),H.body){const[Q,V]=Ux(T,hv($x(l)));r=Hx(H.body,Wx,Q,V)}}Gt.isString(p)||(p=p?"include":"omit");const O="credentials"in Request.prototype;C=new Request(e,{...y,signal:m,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:O?p:void 0});let D=await fetch(C);const B=E2&&(c==="stream"||c==="response");if(E2&&(a||B&&S)){const H={};["status","statusText","headers"].forEach(Y=>{H[Y]=D[Y]});const J=Gt.toFiniteNumber(D.headers.get("content-length")),[Q,V]=a&&Ux(J,hv($x(a),!0))||[];D=new Response(Hx(D.body,Wx,Q,()=>{V&&V(),S&&S()}),H)}c=c||"text";let z=await fv[Gt.findKey(fv,c)||"text"](D,t);return!B&&S&&S(),await new Promise((H,J)=>{rS(H,J,{data:z,headers:jl.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:C})})}catch(O){throw S&&S(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new jr("Network Error",jr.ERR_NETWORK,t,C),{cause:O.cause||O}):jr.from(O,O&&O.code,t,C)}}),P2={http:r7,xhr:D7,fetch:$7};Gt.forEach(P2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Gx=t=>`- ${t}`,V7=t=>Gt.isFunction(t)||t===null||t===!1,lS={getAdapter:t=>{t=Gt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!V7(n)&&(r=P2[(o=String(n)).toLowerCase()],r===void 0))throw new jr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Gx).join(`
`):" "+Gx(s[0]):"as no adapter specified";throw new jr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:P2};function h1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new yp(null,t)}function qx(t){return h1(t),t.headers=jl.from(t.headers),t.data=c1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),lS.getAdapter(t.adapter||um.adapter)(t).then(function(r){return h1(t),r.data=c1.call(t,t.transformResponse,r),r.headers=jl.from(r.headers),r},function(r){return nS(r)||(h1(t),r&&r.response&&(r.response.data=c1.call(t,t.transformResponse,r.response),r.response.headers=jl.from(r.response.headers))),Promise.reject(r)})}const uS="1.8.4",sy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{sy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Yx={};sy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+uS+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new jr(i(o," has been removed"+(n?" in "+n:"")),jr.ERR_DEPRECATED);return n&&!Yx[o]&&(Yx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};sy.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function H7(t,e,n){if(typeof t!="object")throw new jr("options must be an object",jr.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new jr("option "+s+" must be "+l,jr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jr("Unknown option "+s,jr.ERR_BAD_OPTION)}}const M0={assertOptions:H7,validators:sy},Cc=M0.validators;let Wf=class{constructor(e){this.defaults=e,this.interceptors={request:new jx,response:new jx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Qf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&M0.assertOptions(r,{silentJSONParsing:Cc.transitional(Cc.boolean),forcedJSONParsing:Cc.transitional(Cc.boolean),clarifyTimeoutError:Cc.transitional(Cc.boolean)},!1),i!=null&&(Gt.isFunction(i)?n.paramsSerializer={serialize:i}:M0.assertOptions(i,{encode:Cc.function,serialize:Cc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),M0.assertOptions(n,{baseUrl:Cc.spelling("baseURL"),withXsrfToken:Cc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Gt.merge(s.common,s[n.method]);s&&Gt.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),n.headers=jl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let f,p=0,y;if(!l){const C=[qx.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,c),y=C.length,f=Promise.resolve(n);p<y;)f=f.then(C[p++],C[p++]);return f}y=a.length;let m=n;for(p=0;p<y;){const C=a[p++],S=a[p++];try{m=C(m)}catch(T){S.call(this,T);break}}try{f=qx.call(this,m)}catch(C){return Promise.reject(C)}for(p=0,y=c.length;p<y;)f=f.then(c[p++],c[p++]);return f}getUri(e){e=Qf(this.defaults,e);const n=iS(e.baseURL,e.url,e.allowAbsoluteUrls);return QC(n,e.params,e.paramsSerializer)}};Gt.forEach(["delete","get","head","options"],function(e){Wf.prototype[e]=function(n,r){return this.request(Qf(r||{},{method:e,url:n,data:(r||{}).data}))}});Gt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Qf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Wf.prototype[e]=n(),Wf.prototype[e+"Form"]=n(!0)});let W7=class cS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new yp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new cS(function(i){e=i}),cancel:e}}};function G7(t){return function(n){return t.apply(null,n)}}function q7(t){return Gt.isObject(t)&&t.isAxiosError===!0}const k2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(k2).forEach(([t,e])=>{k2[e]=t});function hS(t){const e=new Wf(t),n=$C(Wf.prototype.request,e);return Gt.extend(n,Wf.prototype,e,{allOwnKeys:!0}),Gt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return hS(Qf(t,i))},n}const go=hS(um);go.Axios=Wf;go.CanceledError=yp;go.CancelToken=W7;go.isCancel=nS;go.VERSION=uS;go.toFormData=ry;go.AxiosError=jr;go.Cancel=go.CanceledError;go.all=function(e){return Promise.all(e)};go.spread=G7;go.isAxiosError=q7;go.mergeConfig=Qf;go.AxiosHeaders=jl;go.formToJSON=t=>tS(Gt.isHTMLForm(t)?new FormData(t):t);go.getAdapter=lS.getAdapter;go.HttpStatusCode=k2;go.default=go;const{Axios:Mre,AxiosError:Are,CanceledError:Tre,isCancel:Ore,CancelToken:Dre,VERSION:Ire,all:Nre,Cancel:Bre,isAxiosError:Rre,spread:Fre,toFormData:jre,AxiosHeaders:zre,HttpStatusCode:Ure,formToJSON:$re,getAdapter:Vre,mergeConfig:Hre}=go,Cn=go.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function fS(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Cn.interceptors.request.use(async t=>{try{const e=fS("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t}catch{return t}},t=>Promise.reject(t));Cn.interceptors.response.use(t=>t,async t=>{var n,r;const e=t.config;try{if(((n=t.response)==null?void 0:n.status)===401&&!e._retry&&!((r=e.url)!=null&&r.includes("/token/refresh/"))){e._retry=!0;const i=po();try{await i.refreshToken();const s=fS("access_token");if(s)return e.headers.Authorization=`Bearer ${s}`,Cn(e)}catch(s){return await i.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(t)}catch(i){return Promise.reject(i)}});function Y7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function f1(t){const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search);try{return(await ha.getUsers(e)).data}catch(n){throw n}}const ha={async getUsers(t={}){try{return await Cn.get("/users/",{params:t})}catch(e){throw e}},async getUser(t){return await Cn.get(`/users/${t}/`)},async createUser(t){return await Cn.post("/users/",t)},async updateUser(t,e){return await Cn.patch(`/users/${t}/`,e)},async deleteUser(t){return await Cn.delete(`/users/${t}/`)},async getEntreprises(){return await Cn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Cn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Cn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Cn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e={role:t.role};return t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),await Cn.get("/users/",{params:e})},async getEntrepriseSalaries(t){return await Cn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Cn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Cn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Cn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},async uploadLogo(t){try{const e=new FormData,n=this.formatLogoFileName(t),r=new File([t],n,{type:t.type});return e.append("logo",r),await Cn.post("/users/upload_logo/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw e}}};async function d1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;await new Promise(l=>setTimeout(l,o+a))}}const Ym={async getPlans(){try{return await Cn.get("/plans/")}catch(t){throw t}},async createPlan(t){try{const e={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null};return await Cn.post("/plans/",e)}catch(e){throw e}},async updatePlan(t,e){try{return await Cn.put(`/plans/${t}/`,e)}catch(n){throw n}},async deletePlan(t){try{return await Cn.delete(`/plans/${t}/`)}catch(e){throw e}},async getVisiteurPlans(t){return await Cn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Cn.post("/plans/",t)},async getEntreprisePlans(t){return await Cn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Cn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Cn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Cn.post("/plans/",n)}},Yo={async getNotes(t={}){try{return await Cn.get("/notes/",{params:t})}catch(e){throw console.error("Error getting notes:",e),e}},async getNotesByPlan(t){try{return await Cn.get("/notes/",{params:{plan:t}})}catch(e){throw console.error("Error getting notes for plan:",e),e}},async getNote(t){try{return await Cn.get(`/notes/${t}/`)}catch(e){throw console.error("Error getting note:",e),e}},async createNote(t){try{const e={...t};return e.location&&Object.keys(e.location).length===0&&delete e.location,await Cn.post("/notes/",e)}catch(e){throw console.error("Error creating note:",e),e}},async updateNote(t,e){try{const n=e.backendId||t,r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,delete r.backendId,delete r.leafletId;const i=r.enterprise_id;delete r.enterprise_name;const s=await Cn.patch(`/notes/${n}/`,r);return i!==void 0&&(s.data.enterprise_id=i),s}catch(n){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",n),n}},async deleteNote(t){try{return await Cn.delete(`/notes/${t}/`)}catch(e){throw console.error("Error deleting note:",e),e}},async getComments(t){return await Cn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return await Cn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Cn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Cn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Cn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Cn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Cn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Cn.delete(`/notes/${t}/photos/${e}/`)}},p1={async getDevices(t={}){try{return await d1(()=>Cn.get("/weather/devices/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather devices:",e),e}},async getRealTimeData(t){try{const e=typeof t=="string"?{mac:t}:t;return await d1(()=>Cn.get("/weather/",{params:e}),3,1e3,1e4)}catch(e){throw console.error("Error getting real-time weather data:",e),e}},async getHistoryData(t){try{return await d1(()=>Cn.get("/weather/history/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather history data:",e),e}}},Zm={async getFilters(){try{return await Cn.get("/map-filters/")}catch(t){throw console.error("Error getting map filters:",t),t}},async getFilter(t){try{return await Cn.get(`/map-filters/${t}/`)}catch(e){throw console.error("Error getting map filter:",e),e}},async createFilter(t){try{return await Cn.post("/map-filters/",t)}catch(e){throw console.error("Error creating map filter:",e),e}},async updateFilter(t,e){try{return await Cn.patch(`/map-filters/${t}/`,e)}catch(n){throw console.error("Error updating map filter:",n),n}},async deleteFilter(t){try{return await Cn.delete(`/map-filters/${t}/`)}catch(e){throw console.error("Error deleting map filter:",e),e}}},M2={async getGoogleMapsApiKey(){try{return await Cn.get("/settings/get_google_maps_api_key/")}catch(t){throw console.error("Error getting Google Maps API key:",t),t}},async setGoogleMapsApiKey(t){try{return await Cn.post("/settings/set_google_maps_api_key/",{key:t})}catch(e){throw console.error("Error setting Google Maps API key:",e),e}}};Cn.defaults.baseURL="/api";Cn.defaults.headers.common["Content-Type"]="application/json";Cn.defaults.withCredentials=!0;function $g(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Cn.interceptors.request.use(t=>{const e=$g("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Cn.interceptors.response.use(t=>t,async t=>{var r,i;const e=po(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!$g("access_token"))throw new Error("No token available");await e.refreshToken();const o=$g("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Cn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function Z7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function Ds(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function K7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const X7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function J7(t){return X7[t]||t}function Q7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function eN(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function tN({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await ha.getUsers(i)).data}const po=mp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!$g("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Cn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Cn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Cn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Cn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!$g("refresh_token"))throw new Error("No refresh token available");const r=await Cn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return Z7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await ha.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await ha.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await ha.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await ha.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await ha.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await ha.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await ha.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Cn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Cn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Cn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Cn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await ha.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await tN(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await ha.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await ha.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const jd=typeof document<"u";function dS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function nN(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&dS(t.default)}const Ai=Object.assign;function g1(t,e){const n={};for(const r in e){const i=e[r];n[r]=lc(i)?i.map(t):t(i)}return n}const mg=()=>{},lc=Array.isArray,pS=/#/g,rN=/&/g,iN=/\//g,sN=/=/g,oN=/\?/g,gS=/\+/g,aN=/%5B/g,lN=/%5D/g,mS=/%5E/g,uN=/%60/g,vS=/%7B/g,cN=/%7C/g,yS=/%7D/g,hN=/%20/g;function Xb(t){return encodeURI(""+t).replace(cN,"|").replace(aN,"[").replace(lN,"]")}function fN(t){return Xb(t).replace(vS,"{").replace(yS,"}").replace(mS,"^")}function A2(t){return Xb(t).replace(gS,"%2B").replace(hN,"+").replace(pS,"%23").replace(rN,"%26").replace(uN,"`").replace(vS,"{").replace(yS,"}").replace(mS,"^")}function dN(t){return A2(t).replace(sN,"%3D")}function pN(t){return Xb(t).replace(pS,"%23").replace(oN,"%3F")}function gN(t){return t==null?"":pN(t).replace(iN,"%2F")}function Vg(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const mN=/\/$/,vN=t=>t.replace(mN,"");function m1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=wN(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Vg(o)}}function yN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Zx(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function bN(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ap(e.matched[r],n.matched[i])&&bS(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ap(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!_N(t[n],e[n]))return!1;return!0}function _N(t,e){return lc(t)?Kx(t,e):lc(e)?Kx(e,t):t===e}function Kx(t,e){return lc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function wN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Dh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Hg;(function(t){t.pop="pop",t.push="push"})(Hg||(Hg={}));var vg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vg||(vg={}));function xN(t){if(!t)if(jd){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),vN(t)}const LN=/^[^#]+#/;function CN(t,e){return t.replace(LN,"#")+e}function SN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const oy=()=>({left:window.scrollX,top:window.scrollY});function EN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=SN(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Xx(t,e){return(history.state?history.state.position-e:-1)+t}const T2=new Map;function PN(t,e){T2.set(t,e)}function kN(t){const e=T2.get(t);return T2.delete(t),e}let MN=()=>location.protocol+"//"+location.host;function _S(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Zx(l,"")}return Zx(n,t)+r+i}function AN(t,e,n,r){let i=[],s=[],o=null;const a=({state:y})=>{const m=_S(t,location),C=n.value,S=e.value;let T=0;if(y){if(n.value=m,e.value=y,o&&o===C){o=null;return}T=S?y.position-S.position:0}else r(m);i.forEach(O=>{O(n.value,C,{delta:T,type:Hg.pop,direction:T?T>0?vg.forward:vg.back:vg.unknown})})};function l(){o=n.value}function c(y){i.push(y);const m=()=>{const C=i.indexOf(y);C>-1&&i.splice(C,1)};return s.push(m),m}function f(){const{history:y}=window;y.state&&y.replaceState(Ai({},y.state,{scroll:oy()}),"")}function p(){for(const y of s)y();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function Jx(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?oy():null}}function TN(t){const{history:e,location:n}=window,r={value:_S(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,f){const p=t.indexOf("#"),y=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:MN()+t+l;try{e[f?"replaceState":"pushState"](c,"",y),i.value=c}catch(m){console.error(m),n[f?"replace":"assign"](y)}}function o(l,c){const f=Ai({},e.state,Jx(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,f,!0),r.value=l}function a(l,c){const f=Ai({},i.value,e.state,{forward:l,scroll:oy()});s(f.current,f,!0);const p=Ai({},Jx(r.value,l,null),{position:f.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function ON(t){t=xN(t);const e=TN(t),n=AN(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ai({location:"",base:t,go:r,createHref:CN.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function DN(t){return typeof t=="string"||t&&typeof t=="object"}function wS(t){return typeof t=="string"||typeof t=="symbol"}const xS=Symbol("");var Qx;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Qx||(Qx={}));function lp(t,e){return Ai(new Error,{type:t,[xS]:!0},e)}function sh(t,e){return t instanceof Error&&xS in t&&(e==null||!!(t.type&e))}const e4="[^/]+?",IN={sensitive:!1,strict:!1,start:!0,end:!0},NN=/[.+*?^${}()[\]/\\]/g;function BN(t,e){const n=Ai({},IN,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const f=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const y=c[p];let m=40+(n.sensitive?.25:0);if(y.type===0)p||(i+="/"),i+=y.value.replace(NN,"\\$&"),m+=40;else if(y.type===1){const{value:C,repeatable:S,optional:T,regexp:O}=y;s.push({name:C,repeatable:S,optional:T});const D=O||e4;if(D!==e4){m+=10;try{new RegExp(`(${D})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${C}" (${D}): `+z.message)}}let B=S?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(B=T&&c.length<2?`(?:/${B})`:"/"+B),T&&(B+="?"),i+=B,m+=20,T&&(m+=-8),S&&(m+=-20),D===".*"&&(m+=-50)}f.push(m)}r.push(f)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const f=c.match(o),p={};if(!f)return null;for(let y=1;y<f.length;y++){const m=f[y]||"",C=s[y-1];p[C.name]=m&&C.repeatable?m.split("/"):m}return p}function l(c){let f="",p=!1;for(const y of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const m of y)if(m.type===0)f+=m.value;else if(m.type===1){const{value:C,repeatable:S,optional:T}=m,O=C in c?c[C]:"";if(lc(O)&&!S)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const D=lc(O)?O.join("/"):O;if(!D)if(T)y.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=D}}return f||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function RN(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function LS(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=RN(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(t4(r))return 1;if(t4(i))return-1}return i.length-r.length}function t4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const FN={type:0,value:""},jN=/[a-zA-Z0-9_]/;function zN(t){if(!t)return[[]];if(t==="/")return[[FN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",f="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function y(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):y();break;case 4:y(),n=r;break;case 1:l==="("?n=2:jN.test(l)?y():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=3:f+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function UN(t,e,n){const r=BN(zN(t.path),n),i=Ai(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function $N(t,e){const n=[],r=new Map;e=s4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,y,m){const C=!m,S=r4(p);S.aliasOf=m&&m.record;const T=s4(e,p),O=[S];if("alias"in p){const z=typeof p.alias=="string"?[p.alias]:p.alias;for(const H of z)O.push(r4(Ai({},S,{components:m?m.record.components:S.components,path:H,aliasOf:m?m.record:S})))}let D,B;for(const z of O){const{path:H}=z;if(y&&H[0]!=="/"){const J=y.record.path,Q=J[J.length-1]==="/"?"":"/";z.path=y.record.path+(H&&Q+H)}if(D=UN(z,y,T),m?m.alias.push(D):(B=B||D,B!==D&&B.alias.push(D),C&&p.name&&!i4(D)&&o(p.name)),CS(D)&&l(D),S.children){const J=S.children;for(let Q=0;Q<J.length;Q++)s(J[Q],D,m&&m.children[Q])}m=m||D}return B?()=>{o(B)}:mg}function o(p){if(wS(p)){const y=r.get(p);y&&(r.delete(p),n.splice(n.indexOf(y),1),y.children.forEach(o),y.alias.forEach(o))}else{const y=n.indexOf(p);y>-1&&(n.splice(y,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const y=WN(p,n);n.splice(y,0,p),p.record.name&&!i4(p)&&r.set(p.record.name,p)}function c(p,y){let m,C={},S,T;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw lp(1,{location:p});T=m.record.name,C=Ai(n4(y.params,m.keys.filter(B=>!B.optional).concat(m.parent?m.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),p.params&&n4(p.params,m.keys.map(B=>B.name))),S=m.stringify(C)}else if(p.path!=null)S=p.path,m=n.find(B=>B.re.test(S)),m&&(C=m.parse(S),T=m.record.name);else{if(m=y.name?r.get(y.name):n.find(B=>B.re.test(y.path)),!m)throw lp(1,{location:p,currentLocation:y});T=m.record.name,C=Ai({},y.params,p.params),S=m.stringify(C)}const O=[];let D=m;for(;D;)O.unshift(D.record),D=D.parent;return{name:T,path:S,params:C,matched:O,meta:HN(O)}}t.forEach(p=>s(p));function f(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function n4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function r4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:VN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function VN(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function i4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function HN(t){return t.reduce((e,n)=>Ai(e,n.meta),{})}function s4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function WN(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;LS(t,e[s])<0?r=s:n=s+1}const i=GN(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function GN(t){let e=t;for(;e=e.parent;)if(CS(e)&&LS(t,e)===0)return e}function CS({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function qN(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(gS," "),o=s.indexOf("="),a=Vg(o<0?s:s.slice(0,o)),l=o<0?null:Vg(s.slice(o+1));if(a in e){let c=e[a];lc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function o4(t){let e="";for(let n in t){const r=t[n];if(n=dN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(lc(r)?r.map(s=>s&&A2(s)):[r&&A2(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function YN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=lc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const ZN=Symbol(""),a4=Symbol(""),ay=Symbol(""),Jb=Symbol(""),O2=Symbol("");function Tp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vh(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=y=>{y===!1?l(lp(4,{from:n,to:e})):y instanceof Error?l(y):DN(y)?l(lp(2,{from:e,to:y})):(o&&r.enterCallbacks[i]===o&&typeof y=="function"&&o.push(y),a())},f=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(f);t.length<3&&(p=p.then(c)),p.catch(y=>l(y))})}function v1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(dS(l)){const f=(l.__vccOpts||l)[e];f&&s.push(Vh(f,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=nN(f)?f.default:f;o.mods[a]=f,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&Vh(m,n,r,o,a,i)()}))}}return s}function l4(t){const e=lu(ay),n=lu(Jb),r=rr(()=>{const l=ln(t.to);return e.resolve(l)}),i=rr(()=>{const{matched:l}=r.value,{length:c}=l,f=l[c-1],p=n.matched;if(!f||!p.length)return-1;const y=p.findIndex(ap.bind(null,f));if(y>-1)return y;const m=u4(l[c-2]);return c>1&&u4(f)===m&&p[p.length-1].path!==m?p.findIndex(ap.bind(null,l[c-2])):y}),s=rr(()=>i.value>-1&&QN(n.params,r.value.params)),o=rr(()=>i.value>-1&&i.value===n.matched.length-1&&bS(n.params,r.value.params));function a(l={}){if(JN(l)){const c=e[ln(t.replace)?"replace":"push"](ln(t.to)).catch(mg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:rr(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function KN(t){return t.length===1?t[0]:t}const XN=_s({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:l4,setup(t,{slots:e}){const n=hu(l4(t)),{options:r}=lu(ay),i=rr(()=>({[c4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[c4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&KN(e.default(n));return t.custom?s:Xv("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Zp=XN;function JN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function QN(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!lc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function u4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const c4=(t,e,n)=>t??e??n,eB=_s({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=lu(O2),i=rr(()=>t.route||r.value),s=lu(a4,0),o=rr(()=>{let c=ln(s);const{matched:f}=i.value;let p;for(;(p=f[c])&&!p.components;)c++;return c}),a=rr(()=>i.value.matched[o.value]);fg(a4,rr(()=>o.value+1)),fg(ZN,a),fg(O2,i);const l=kt();return vi(()=>[l.value,a.value,t.name],([c,f,p],[y,m,C])=>{f&&(f.instances[p]=c,m&&m!==f&&c&&c===y&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),c&&f&&(!m||!ap(f,m)||!y)&&(f.enterCallbacks[p]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=i.value,f=t.name,p=a.value,y=p&&p.components[f];if(!y)return h4(n.default,{Component:y,route:c});const m=p.props[f],C=m?m===!0?c.params:typeof m=="function"?m(c):m:null,T=Xv(y,Ai({},C,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return h4(n.default,{Component:T,route:c})||T}}});function h4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const SS=eB;function tB(t){const e=$N(t.routes,t),n=t.parseQuery||qN,r=t.stringifyQuery||o4,i=t.history,s=Tp(),o=Tp(),a=Tp(),l=Mb(Dh);let c=Dh;jd&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=g1.bind(null,Pe=>""+Pe),p=g1.bind(null,gN),y=g1.bind(null,Vg);function m(Pe,Ue){let Ne,nt;return wS(Pe)?(Ne=e.getRecordMatcher(Pe),nt=Ue):nt=Pe,e.addRoute(nt,Ne)}function C(Pe){const Ue=e.getRecordMatcher(Pe);Ue&&e.removeRoute(Ue)}function S(){return e.getRoutes().map(Pe=>Pe.record)}function T(Pe){return!!e.getRecordMatcher(Pe)}function O(Pe,Ue){if(Ue=Ai({},Ue||l.value),typeof Pe=="string"){const oe=m1(n,Pe,Ue.path),ue=e.resolve({path:oe.path},Ue),te=i.createHref(oe.fullPath);return Ai(oe,ue,{params:y(ue.params),hash:Vg(oe.hash),redirectedFrom:void 0,href:te})}let Ne;if(Pe.path!=null)Ne=Ai({},Pe,{path:m1(n,Pe.path,Ue.path).path});else{const oe=Ai({},Pe.params);for(const ue in oe)oe[ue]==null&&delete oe[ue];Ne=Ai({},Pe,{params:p(oe)}),Ue.params=p(Ue.params)}const nt=e.resolve(Ne,Ue),pt=Pe.hash||"";nt.params=f(y(nt.params));const bt=yN(r,Ai({},Pe,{hash:fN(pt),path:nt.path})),le=i.createHref(bt);return Ai({fullPath:bt,hash:pt,query:r===o4?YN(Pe.query):Pe.query||{}},nt,{redirectedFrom:void 0,href:le})}function D(Pe){return typeof Pe=="string"?m1(n,Pe,l.value.path):Ai({},Pe)}function B(Pe,Ue){if(c!==Pe)return lp(8,{from:Ue,to:Pe})}function z(Pe){return Q(Pe)}function H(Pe){return z(Ai(D(Pe),{replace:!0}))}function J(Pe){const Ue=Pe.matched[Pe.matched.length-1];if(Ue&&Ue.redirect){const{redirect:Ne}=Ue;let nt=typeof Ne=="function"?Ne(Pe):Ne;return typeof nt=="string"&&(nt=nt.includes("?")||nt.includes("#")?nt=D(nt):{path:nt},nt.params={}),Ai({query:Pe.query,hash:Pe.hash,params:nt.path!=null?{}:Pe.params},nt)}}function Q(Pe,Ue){const Ne=c=O(Pe),nt=l.value,pt=Pe.state,bt=Pe.force,le=Pe.replace===!0,oe=J(Ne);if(oe)return Q(Ai(D(oe),{state:typeof oe=="object"?Ai({},pt,oe.state):pt,force:bt,replace:le}),Ue||Ne);const ue=Ne;ue.redirectedFrom=Ue;let te;return!bt&&bN(r,nt,Ne)&&(te=lp(16,{to:ue,from:nt}),Oe(nt,nt,!0,!1)),(te?Promise.resolve(te):ge(ue,nt)).catch(Se=>sh(Se)?sh(Se,2)?Se:me(Se):ie(Se,ue,nt)).then(Se=>{if(Se){if(sh(Se,2))return Q(Ai({replace:le},D(Se.to),{state:typeof Se.to=="object"?Ai({},pt,Se.to.state):pt,force:bt}),Ue||ue)}else Se=W(ue,nt,!0,le,pt);return $(ue,nt,Se),Se})}function V(Pe,Ue){const Ne=B(Pe,Ue);return Ne?Promise.reject(Ne):Promise.resolve()}function Y(Pe){const Ue=ce.values().next().value;return Ue&&typeof Ue.runWithContext=="function"?Ue.runWithContext(Pe):Pe()}function ge(Pe,Ue){let Ne;const[nt,pt,bt]=nB(Pe,Ue);Ne=v1(nt.reverse(),"beforeRouteLeave",Pe,Ue);for(const oe of nt)oe.leaveGuards.forEach(ue=>{Ne.push(Vh(ue,Pe,Ue))});const le=V.bind(null,Pe,Ue);return Ne.push(le),Le(Ne).then(()=>{Ne=[];for(const oe of s.list())Ne.push(Vh(oe,Pe,Ue));return Ne.push(le),Le(Ne)}).then(()=>{Ne=v1(pt,"beforeRouteUpdate",Pe,Ue);for(const oe of pt)oe.updateGuards.forEach(ue=>{Ne.push(Vh(ue,Pe,Ue))});return Ne.push(le),Le(Ne)}).then(()=>{Ne=[];for(const oe of bt)if(oe.beforeEnter)if(lc(oe.beforeEnter))for(const ue of oe.beforeEnter)Ne.push(Vh(ue,Pe,Ue));else Ne.push(Vh(oe.beforeEnter,Pe,Ue));return Ne.push(le),Le(Ne)}).then(()=>(Pe.matched.forEach(oe=>oe.enterCallbacks={}),Ne=v1(bt,"beforeRouteEnter",Pe,Ue,Y),Ne.push(le),Le(Ne))).then(()=>{Ne=[];for(const oe of o.list())Ne.push(Vh(oe,Pe,Ue));return Ne.push(le),Le(Ne)}).catch(oe=>sh(oe,8)?oe:Promise.reject(oe))}function $(Pe,Ue,Ne){a.list().forEach(nt=>Y(()=>nt(Pe,Ue,Ne)))}function W(Pe,Ue,Ne,nt,pt){const bt=B(Pe,Ue);if(bt)return bt;const le=Ue===Dh,oe=jd?history.state:{};Ne&&(nt||le?i.replace(Pe.fullPath,Ai({scroll:le&&oe&&oe.scroll},pt)):i.push(Pe.fullPath,pt)),l.value=Pe,Oe(Pe,Ue,Ne,le),me()}let se;function X(){se||(se=i.listen((Pe,Ue,Ne)=>{if(!pe.listening)return;const nt=O(Pe),pt=J(nt);if(pt){Q(Ai(pt,{replace:!0,force:!0}),nt).catch(mg);return}c=nt;const bt=l.value;jd&&PN(Xx(bt.fullPath,Ne.delta),oy()),ge(nt,bt).catch(le=>sh(le,12)?le:sh(le,2)?(Q(Ai(D(le.to),{force:!0}),nt).then(oe=>{sh(oe,20)&&!Ne.delta&&Ne.type===Hg.pop&&i.go(-1,!1)}).catch(mg),Promise.reject()):(Ne.delta&&i.go(-Ne.delta,!1),ie(le,nt,bt))).then(le=>{le=le||W(nt,bt,!1),le&&(Ne.delta&&!sh(le,8)?i.go(-Ne.delta,!1):Ne.type===Hg.pop&&sh(le,20)&&i.go(-1,!1)),$(nt,bt,le)}).catch(mg)}))}let U=Tp(),R=Tp(),ee;function ie(Pe,Ue,Ne){me(Pe);const nt=R.list();return nt.length?nt.forEach(pt=>pt(Pe,Ue,Ne)):console.error(Pe),Promise.reject(Pe)}function fe(){return ee&&l.value!==Dh?Promise.resolve():new Promise((Pe,Ue)=>{U.add([Pe,Ue])})}function me(Pe){return ee||(ee=!Pe,X(),U.list().forEach(([Ue,Ne])=>Pe?Ne(Pe):Ue()),U.reset()),Pe}function Oe(Pe,Ue,Ne,nt){const{scrollBehavior:pt}=t;if(!jd||!pt)return Promise.resolve();const bt=!Ne&&kN(Xx(Pe.fullPath,0))||(nt||!Ne)&&history.state&&history.state.scroll||null;return ll().then(()=>pt(Pe,Ue,bt)).then(le=>le&&EN(le)).catch(le=>ie(le,Pe,Ue))}const Z=Pe=>i.go(Pe);let ae;const ce=new Set,pe={currentRoute:l,listening:!0,addRoute:m,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:T,getRoutes:S,resolve:O,options:t,push:z,replace:H,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:R.add,isReady:fe,install(Pe){const Ue=this;Pe.component("RouterLink",Zp),Pe.component("RouterView",SS),Pe.config.globalProperties.$router=Ue,Object.defineProperty(Pe.config.globalProperties,"$route",{enumerable:!0,get:()=>ln(l)}),jd&&!ae&&l.value===Dh&&(ae=!0,z(i.location).catch(pt=>{}));const Ne={};for(const pt in Dh)Object.defineProperty(Ne,pt,{get:()=>l.value[pt],enumerable:!0});Pe.provide(ay,Ue),Pe.provide(Jb,Pb(Ne)),Pe.provide(O2,l);const nt=Pe.unmount;ce.add(Pe),Pe.unmount=function(){ce.delete(Pe),ce.size<1&&(c=Dh,se&&se(),se=null,l.value=Dh,ae=!1,ee=!1),nt()}}};function Le(Pe){return Pe.reduce((Ue,Ne)=>Ue.then(()=>Y(Ne)),Promise.resolve())}return pe}function nB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>ap(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ap(c,l))||i.push(l))}return[n,r,i]}function ly(){return lu(ay)}function rB(t){return lu(Jb)}const ul=mp("notification",()=>{const t=kt([]),e=kt(0),n=kt(null),r=rr(()=>[...t.value].sort((p,y)=>y.timestamp-p.timestamp));function i({type:p,message:y,duration:m=5e3}){const C=++e.value,S=Date.now(),T={id:C,type:p,message:y,duration:m,timestamp:S};return t.value.push(T),n.value=C,m>0&&setTimeout(()=>{c(C)},m),C}const s=(p,y=5e3)=>i({type:"success",message:p,duration:y}),o=(p,y=5e3)=>i({type:"error",message:p,duration:y}),a=(p,y=5e3)=>i({type:"info",message:p,duration:y}),l=(p,y=5e3)=>i({type:"warning",message:p,duration:y});function c(p){const y=t.value.findIndex(m=>m.id===p);y!==-1&&t.value.splice(y,1),n.value===p&&(n.value=null)}function f(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:f,success:s,error:o,info:a,warning:l}}),iB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:ul},Symbol.toStringTag,{value:"Module"}));var Zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ES(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function sB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Qb=sB,oB=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,aB=oB,lB=aB,uB=typeof self=="object"&&self&&self.Object===Object&&self,cB=lB||uB||Function("return this")(),PS=cB,hB=PS,fB=function(){return hB.Date.now()},dB=fB,pB=/\s/;function gB(t){for(var e=t.length;e--&&pB.test(t.charAt(e)););return e}var mB=gB,vB=mB,yB=/^\s+/;function bB(t){return t&&t.slice(0,vB(t)+1).replace(yB,"")}var _B=bB,wB=PS,xB=wB.Symbol,kS=xB,f4=kS,MS=Object.prototype,LB=MS.hasOwnProperty,CB=MS.toString,Op=f4?f4.toStringTag:void 0;function SB(t){var e=LB.call(t,Op),n=t[Op];try{t[Op]=void 0;var r=!0}catch{}var i=CB.call(t);return r&&(e?t[Op]=n:delete t[Op]),i}var EB=SB,PB=Object.prototype,kB=PB.toString;function MB(t){return kB.call(t)}var AB=MB,d4=kS,TB=EB,OB=AB,DB="[object Null]",IB="[object Undefined]",p4=d4?d4.toStringTag:void 0;function NB(t){return t==null?t===void 0?IB:DB:p4&&p4 in Object(t)?TB(t):OB(t)}var BB=NB;function RB(t){return t!=null&&typeof t=="object"}var FB=RB,jB=BB,zB=FB,UB="[object Symbol]";function $B(t){return typeof t=="symbol"||zB(t)&&jB(t)==UB}var VB=$B,HB=_B,g4=Qb,WB=VB,m4=NaN,GB=/^[-+]0x[0-9a-f]+$/i,qB=/^0b[01]+$/i,YB=/^0o[0-7]+$/i,ZB=parseInt;function KB(t){if(typeof t=="number")return t;if(WB(t))return m4;if(g4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=g4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=HB(t);var n=qB.test(t);return n||YB.test(t)?ZB(t.slice(2),n?2:8):GB.test(t)?m4:+t}var XB=KB,JB=Qb,y1=dB,v4=XB,QB="Expected a function",eR=Math.max,tR=Math.min;function nR(t,e,n){var r,i,s,o,a,l,c=0,f=!1,p=!1,y=!0;if(typeof t!="function")throw new TypeError(QB);e=v4(e)||0,JB(n)&&(f=!!n.leading,p="maxWait"in n,s=p?eR(v4(n.maxWait)||0,e):s,y="trailing"in n?!!n.trailing:y);function m(J){var Q=r,V=i;return r=i=void 0,c=J,o=t.apply(V,Q),o}function C(J){return c=J,a=setTimeout(O,e),f?m(J):o}function S(J){var Q=J-l,V=J-c,Y=e-Q;return p?tR(Y,s-V):Y}function T(J){var Q=J-l,V=J-c;return l===void 0||Q>=e||Q<0||p&&V>=s}function O(){var J=y1();if(T(J))return D(J);a=setTimeout(O,S(J))}function D(J){return a=void 0,y&&r?m(J):(r=i=void 0,o)}function B(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function z(){return a===void 0?o:D(y1())}function H(){var J=y1(),Q=T(J);if(r=arguments,i=this,l=J,Q){if(a===void 0)return C(l);if(p)return clearTimeout(a),a=setTimeout(O,e),m(l)}return a===void 0&&(a=setTimeout(O,e)),o}return H.cancel=B,H.flush=z,H}var AS=nR;const TS=uy(AS),rR={class:"relative w-full"},iR={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},sR=["onClick"],y4=_s({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=kt(""),r=kt([]),i=e,s=TS(async l=>{if(l.length<3){r.value=[];return}try{const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=f}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ae(),Fe("div",rR,[jn(P("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[fi,n.value]]),r.value.length>0?(Ae(),Fe("div",iR,[(Ae(!0),Fe(vn,null,nr(r.value,f=>(Ae(),Fe("div",{key:f.place_id,onClick:p=>a(f),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},jt(f.display_name),9,sR))),128))])):Xt("",!0)]))}}),oR={key:0,class:"pwa-update-notification"},aR=_s({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=kt(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ae(),Fe("div",oR,[P("div",{class:"pwa-update-content"},[o[0]||(o[0]=P("p",null,"Une nouvelle version est disponible",-1)),P("div",{class:"pwa-update-actions"},[P("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),P("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Xt("",!0)}}),Vc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},lR=Vc(aR,[["__scopeId","data-v-aa687693"]]),uR="/static/frontend/img/icons/android-chrome-192x192.png",cR={class:"prompt-content"},hR={class:"prompt-body"},fR={key:0,class:"install-instructions ios"},dR={key:1,class:"install-instructions android"},pR={key:2,class:"install-instructions desktop"},gR={key:3,class:"install-instructions desktop"},mR=_s({__name:"PWAInstallPrompt",setup(t){const e=kt(!1),n=kt(!1),r=kt(null);kt(null);const i=kt(!1),s=kt(!1),o=kt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const C=3*24*60*60*1e3;return Date.now()-parseInt(m)<C},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},f=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Zs(()=>{c()}),ff(()=>{f()});const p=async()=>{if(r.value)try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"&&(e.value=!1)}catch(m){console.error("Erreur lors de l'installation:",m)}},y=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,C)=>e.value?(Ae(),Fe("div",{key:0,class:yi(["pwa-install-prompt",{fullscreen:n.value}])},[P("div",cR,[P("div",{class:"prompt-header"},[C[1]||(C[1]=P("div",{class:"app-info"},[P("img",{src:uR,alt:"TagMap Logo",class:"app-logo"}),P("div",{class:"app-details"},[P("h2",null,"Installer TagMap"),P("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),P("button",{onClick:y,class:"close-button","aria-label":"Fermer"},C[0]||(C[0]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[P("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),P("div",hR,[i.value?(Ae(),Fe("div",fR,C[2]||(C[2]=[uu('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Partager</strong> <span class="ios-share-icon" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-3779ba3f></path><polyline points="16 6 12 2 8 6" data-v-3779ba3f></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-3779ba3f></line></svg></span></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Faites défiler et appuyez sur <strong data-v-3779ba3f>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>3</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Ae(),Fe("div",dR,[C[3]||(C[3]=P("h3",null,"Pour installer l'application sur votre appareil :",-1)),C[4]||(C[4]=P("div",{class:"instruction-step"},[P("div",{class:"step-number"},"1"),P("div",{class:"step-content"},[P("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),P("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ae(),Fe("div",pR,[C[5]||(C[5]=P("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),C[6]||(C[6]=P("div",{class:"instruction-step"},[P("div",{class:"step-number"},"1"),P("div",{class:"step-content"},[P("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),P("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ae(),Fe("div",gR,C[7]||(C[7]=[uu('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),P("div",{class:"prompt-footer"},[C[8]||(C[8]=uu('<div class="benefits" data-v-3779ba3f><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Sécurisé</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><circle cx="12" cy="12" r="10" data-v-3779ba3f></circle><polyline points="12 6 12 12 16 14" data-v-3779ba3f></polyline></svg><span data-v-3779ba3f>Rapide</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Hors ligne</span></div></div>',1)),P("button",{onClick:y,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Xt("",!0)}}),vR=Vc(mR,[["__scopeId","data-v-3779ba3f"]]),yR={class:"app-container"},bR={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},_R={class:"mx-auto px-4 sm:px-6 lg:px-8"},wR={class:"flex h-16 items-center justify-between"},xR={class:"flex items-center"},LR={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},CR={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},SR={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},ER={class:"hidden md:flex md:ml-6 space-x-8"},PR={key:0,class:"flex-1 mx-2"},kR={class:"hidden md:block"},MR={class:"md:hidden"},AR={key:1,class:"flex-1"},TR={class:"flex items-center space-x-2 md:space-x-4"},OR={class:"relative"},DR={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},IR={class:"flex items-center justify-between w-full"},NR={class:"flex items-center space-x-3"},BR={class:"max-h-72 overflow-y-auto"},RR={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},FR={class:"flex items-start"},jR={class:"flex-shrink-0 mr-3"},zR={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},UR={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},$R={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},VR={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},HR={class:"flex-1"},WR={class:"text-sm md:text-sm text-gray-800"},GR=["onClick"],qR={class:"relative"},YR={class:"hidden md:flex flex-col items-end"},ZR={class:"text-sm font-medium text-gray-700"},KR={key:0,class:"text-xs text-gray-500"},XR=["src","alt"],JR={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},QR={class:"text-sm font-semibold text-gray-700"},eF={class:"text-xs text-gray-500"},tF={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},nF={class:"space-y-1 px-2 pb-3 pt-2"},rF={class:"app-main"},iF=_s({__name:"App",setup(t){const e=ly(),n=po(),r=ul(),i=kt(!1),s=kt(!1),o=kt(!1),a=kt(!1),l=kt(null),c=kt(!1),f=kt(!1),p=kt(null),y=kt("13px"),m=kt("65px"),C=kt(null),S=kt(null),T=kt(!1);function O(){f.value=window.innerWidth<768}Zs(()=>{O(),window.addEventListener("resize",O),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{T.value=!0})}),ff(()=>{window.removeEventListener("resize",O),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const U=p.value.getBoundingClientRect();y.value=`${U.top+window.scrollY+5}px`;const R=U.left+U.width/2;m.value=`${window.innerWidth-R-22}px`}const B=rr(()=>{const U=n.user;if(!U)return"";const R=`${U.first_name} ${U.last_name.toUpperCase()}`;return U.company_name?`${R} (${U.company_name})`:R}),z=rr(()=>{var R;switch((R=n.user)==null?void 0:R.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),H=rr(()=>{var U;return((U=n.user)==null?void 0:U.user_type)==="admin"}),J=rr(()=>n.isAuthenticated),Q=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],V=rr(()=>{var R,ee;if(!J.value)return[];const U=[...Q];return(H.value||((R=n.user)==null?void 0:R.user_type)==="entreprise"||((ee=n.user)==null?void 0:ee.user_type)==="salarie")&&U.push({name:"Utilisateurs",to:"/users"}),H.value&&U.push({name:"Paramètres",to:"/parametres"}),U}),Y=rr(()=>J.value?[{name:"Mon profil",to:"/profile"}]:[]);async function ge(){try{await n.logout(),e.push("/login")}catch(U){console.error("Erreur lors de la déconnexion:",U)}}function $(U){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:U.lat,lng:U.lng,zoom:16}}))}Zs(async()=>{try{if(localStorage.getItem("token")){await n.checkAuth(),await n.fetchUserProfile();const R=localStorage.getItem("lastPlanId");R&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:R}}))}}catch(U){console.error("Auth check error:",U),e.push("/login")}});const W=rr(()=>{const U="TagMap";if(!J.value)return`${U} - Connexion`;const R=e.currentRoute.value,ie={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[R.name]||"";return ie?`${U} - ${ie}`:U});vi(W,U=>{document.title=U},{immediate:!0});const se=rr(()=>r.notifications.length);function X(){r.clearAll(),o.value=!1}return jg(()=>{if(r.lastAddedId!==null){const U=r.notifications.find(R=>R.id===r.lastAddedId);U&&ll(()=>{D(),a.value=!0,l.value={id:U.id,message:U.message,type:U.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var R;((R=l.value)==null?void 0:R.id)===U.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(U,R)=>{var ee;return Ae(),Fe("div",yR,[J.value?(Ae(),Fe("header",bR,[P("nav",_R,[P("div",wR,[P("div",xR,[P("button",{onClick:R[0]||(R[0]=ie=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[R[7]||(R[7]=P("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ae(),Fe("svg",LR,[s.value?(Ae(),Fe("path",SR)):(Ae(),Fe("path",CR))]))]),Kr(ln(Zp),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Nl(()=>R[8]||(R[8]=[P("span",{class:"md:inline hidden"},"TagMap",-1),P("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),P("div",ER,[(Ae(!0),Fe(vn,null,nr(V.value,ie=>(Ae(),Lo(ln(Zp),{key:ie.name,to:ie.to,class:yi(["text-sm font-medium transition-colors duration-200",[U.$route.path===ie.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Nl(()=>[Rr(jt(ie.name),1)]),_:2},1032,["to","class"]))),128))])]),U.$route.path==="/"?(Ae(),Fe("div",PR,[P("div",kR,[Kr(y4,{onSelectLocation:$})]),P("div",MR,[Kr(y4,{onSelectLocation:$,class:"max-w-full"})])])):(Ae(),Fe("div",AR)),P("div",TR,[P("div",OR,[P("button",{ref_key:"bellButtonRef",ref:p,onClick:R[1]||(R[1]=ie=>o.value=!o.value),class:yi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},R[9]||(R[9]=[P("span",{class:"sr-only"},"Voir les notifications",-1),P("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ae(),Fe("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Fl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",DR,[P("div",IR,[R[11]||(R[11]=P("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),P("div",NR,[se.value>0?(Ae(),Fe("button",{key:0,onClick:X,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Xt("",!0),P("button",{onClick:R[2]||(R[2]=ie=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},R[10]||(R[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),P("div",BR,[se.value===0?(Ae(),Fe("div",RR," Aucune notification ")):Xt("",!0),(Ae(!0),Fe(vn,null,nr(ln(r).notifications,ie=>(Ae(),Fe("div",{key:ie.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[P("div",FR,[P("div",jR,[ie.type==="success"?(Ae(),Fe("svg",zR,R[12]||(R[12]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):ie.type==="error"?(Ae(),Fe("svg",UR,R[13]||(R[13]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):ie.type==="warning"?(Ae(),Fe("svg",$R,R[14]||(R[14]=[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ae(),Fe("svg",VR,R[15]||(R[15]=[P("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),P("div",HR,[P("p",WR,jt(ie.message),1),P("button",{onClick:fe=>ln(r).removeNotification(ie.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,GR)])])]))),128))])],4)):Xt("",!0)]),P("div",qR,[P("button",{onClick:R[3]||(R[3]=ie=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[P("div",YR,[P("span",ZR,jt(B.value),1),z.value?(Ae(),Fe("span",KR,jt(z.value),1)):Xt("",!0)]),P("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((ee=ln(n).user)==null?void 0:ee.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(B.value),alt:B.value},null,8,XR)]),i.value?(Ae(),Fe("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Fl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",JR,[P("div",null,[P("div",QR,jt(B.value),1),P("div",eF,jt(z.value),1)]),P("button",{onClick:R[4]||(R[4]=ie=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},R[16]||(R[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ae(!0),Fe(vn,null,nr(Y.value,ie=>(Ae(),Lo(ln(Zp),{key:ie.name,to:ie.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:R[5]||(R[5]=fe=>i.value=!1)},{default:Nl(()=>[Rr(jt(ie.name),1)]),_:2},1032,["to"]))),128)),P("button",{onClick:ge,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Xt("",!0)])])]),s.value?(Ae(),Fe("div",tF,[P("div",nF,[(Ae(!0),Fe(vn,null,nr(V.value,ie=>(Ae(),Lo(ln(Zp),{key:ie.name,to:ie.to,class:yi(["block px-3 py-2 rounded-md text-base font-medium",[U.$route.path===ie.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:R[6]||(R[6]=fe=>s.value=!1)},{default:Nl(()=>[Rr(jt(ie.name),1)]),_:2},1032,["to","class"]))),128))])])):Xt("",!0)])])):Xt("",!0),P("main",rF,[Kr(ln(SS),null,{default:Nl(({Component:ie,route:fe})=>[P("div",{class:yi({"router-view-map":fe.meta.isMapRoute})},[(Ae(),Lo(DL(ie)))],2)]),_:1})]),Kr(lR,{ref_key:"pwaUpdateNotification",ref:C},null,512),Kr(vR,{ref_key:"pwaInstallPrompt",ref:S},null,512)])}}}),sF="modulepreload",oF=function(t){return"/static/frontend/"+t},b4={},su=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=oF(l),l in b4)return;b4[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":sF,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((y,m)=>{p.addEventListener("load",y),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},aF={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},lF={class:"max-w-md w-full space-y-8"},uF={class:"space-y-4"},cF={class:"mt-1"},hF={class:"mt-1"},fF={class:"mt-1"},dF={key:0,class:"rounded-md bg-red-50 p-4"},pF={class:"flex"},gF={class:"ml-3"},mF={class:"text-sm font-medium text-red-800"},vF={key:1,class:"rounded-md bg-yellow-50 p-4"},yF={class:"flex"},bF={class:"ml-3"},_F={class:"mt-2 text-sm text-yellow-700"},wF={class:"list-disc pl-5 space-y-1"},xF=["disabled"],LF={class:"absolute left-0 inset-y-0 flex items-center pl-3"},CF={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},SF={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},EF=_s({__name:"ChangePasswordForm",setup(t){const e=ly(),n=po(),r=hu({oldPassword:"",newPassword:"",confirmPassword:""}),i=kt(!1),s=kt(""),o=rr(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=rr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,f,p,y,m,C,S,T;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{await n.changePassword(r.oldPassword,r.newPassword),e.push("/")}catch(O){console.error("Password change failed:",O),(p=(f=O.response)==null?void 0:f.data)!=null&&p.detail?s.value=O.response.data.detail:(m=(y=O.response)==null?void 0:y.data)!=null&&m.old_password?s.value=O.response.data.old_password[0]:(S=(C=O.response)==null?void 0:C.data)!=null&&S.password?s.value=O.response.data.password[0]:((T=O.response)==null?void 0:T.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,f)=>(Ae(),Fe("div",aF,[P("div",lF,[f[12]||(f[12]=P("div",null,[P("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),P("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),P("form",{class:"mt-8 space-y-6",onSubmit:Rl(l,["prevent"])},[P("div",uF,[P("div",null,[f[3]||(f[3]=P("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),P("div",cF,[jn(P("input",{id:"old-password","onUpdate:modelValue":f[0]||(f[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[fi,r.oldPassword]])])]),P("div",null,[f[4]||(f[4]=P("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),P("div",hF,[jn(P("input",{id:"new-password","onUpdate:modelValue":f[1]||(f[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[fi,r.newPassword]])]),f[5]||(f[5]=P("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),P("div",null,[f[6]||(f[6]=P("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),P("div",fF,[jn(P("input",{id:"confirm-password","onUpdate:modelValue":f[2]||(f[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[fi,r.confirmPassword]])])])]),s.value?(Ae(),Fe("div",dF,[P("div",pF,[f[7]||(f[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",gF,[P("h3",mF,jt(s.value),1)])])])):Xt("",!0),o.value.length>0?(Ae(),Fe("div",vF,[P("div",yF,[f[9]||(f[9]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),P("div",bF,[f[8]||(f[8]=P("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),P("div",_F,[P("ul",wF,[(Ae(!0),Fe(vn,null,nr(o.value,(p,y)=>(Ae(),Fe("li",{key:y},jt(p),1))),128))])])])])])):Xt("",!0),P("div",null,[P("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[P("span",LF,[i.value?(Ae(),Fe("svg",SF,f[11]||(f[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ae(),Fe("svg",CF,f[10]||(f[10]=[P("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Rr(" "+jt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,xF)])],32)])]))}}),PF="/static/frontend/assets/background.svg",kF={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},MF={class:"container mx-auto relative z-10"},AF={class:"sm:mx-auto sm:w-full sm:max-w-md"},TF={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},OF={key:0,class:"rounded-md bg-red-50 p-4"},DF={class:"flex"},IF={class:"ml-3"},NF={class:"text-sm font-medium text-red-800"},BF={class:"mt-1"},RF={class:"mt-1 relative"},FF=["type"],jF={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zF={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UF={class:"flex items-center justify-between"},$F={class:"flex items-center"},VF={class:"text-sm"},HF=["disabled"],WF={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},GF={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},qF={class:"mt-12"},YF={class:"flex flex-wrap justify-center gap-2 mb-8"},ZF=["onClick"],KF={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},XF={class:"flex items-center mb-4"},JF={class:"text-2xl mr-2"},QF={class:"text-xl font-semibold text-gray-900"},e9={class:"text-gray-600 text-sm"},t9={key:0,class:"flex justify-center mt-8 gap-2"},n9=["onClick"],b1=6,r9=_s({__name:"LoginView",setup(t){const e=ly(),n=po(),r=kt(!1),i=kt(null),s=kt(!1),o=kt("Tous"),a=kt(1),l=hu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],f=rr(()=>["Tous",...new Set(c.map(S=>S.sector))]),p=rr(()=>{let C=o.value==="Tous"?c:c.filter(O=>O.sector===o.value);const S=(a.value-1)*b1,T=S+b1;return C.slice(S,T)}),y=rr(()=>{const C=o.value==="Tous"?c:c.filter(S=>S.sector===o.value);return Math.ceil(C.length/b1)});Zs(async()=>{var C;try{if((C=window.INITIAL_STATE)!=null&&C.isAuthenticated){e.push("/");return}await n.restoreSession()&&e.push("/")}catch(S){console.error("Error during initialization:",S),i.value=null}});async function m(){var C,S,T,O,D,B,z,H,J;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(C=n.user)!=null&&C.must_change_password?e.push("/change-password"):e.push("/")}catch(Q){console.error("Login error:",Q),((S=Q==null?void 0:Q.response)==null?void 0:S.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((T=Q==null?void 0:Q.response)==null?void 0:T.status)===401||((O=Q==null?void 0:Q.response)==null?void 0:O.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(B=(D=Q==null?void 0:Q.response)==null?void 0:D.data)!=null&&B.detail?i.value=Q.response.data.detail:(J=(H=(z=Q==null?void 0:Q.response)==null?void 0:z.data)==null?void 0:H.non_field_errors)!=null&&J[0]?i.value=Q.response.data.non_field_errors[0]:(Q==null?void 0:Q.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(C,S)=>{const T=Fb("router-link");return Ae(),Fe("div",kF,[P("div",{class:"fixed inset-0 z-0",style:Fl({backgroundImage:`url(${ln(PF)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),S[16]||(S[16]=P("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),P("div",MF,[P("div",AF,[P("div",TF,[S[12]||(S[12]=P("div",{class:"text-center mb-8"},[P("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),P("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),P("form",{class:"space-y-6",onSubmit:Rl(m,["prevent"])},[i.value?(Ae(),Fe("div",OF,[P("div",DF,[S[4]||(S[4]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",IF,[P("h3",NF,jt(i.value),1)])])])):Xt("",!0),P("div",null,[S[5]||(S[5]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),P("div",BF,[jn(P("input",{id:"username","onUpdate:modelValue":S[0]||(S[0]=O=>l.username=O),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[fi,l.username]])])]),P("div",null,[S[8]||(S[8]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),P("div",RF,[jn(P("input",{id:"password","onUpdate:modelValue":S[1]||(S[1]=O=>l.password=O),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,FF),[[qb,l.password]]),P("button",{type:"button",onClick:S[2]||(S[2]=O=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ae(),Fe("svg",jF,S[6]||(S[6]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ae(),Fe("svg",zF,S[7]||(S[7]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),P("div",UF,[P("div",$F,[jn(P("input",{id:"remember-me","onUpdate:modelValue":S[3]||(S[3]=O=>l.rememberMe=O),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Tl,l.rememberMe]]),S[9]||(S[9]=P("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),P("div",VF,[Kr(T,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Nl(()=>S[10]||(S[10]=[Rr(" Mot de passe oublié ? ")])),_:1})])]),P("div",null,[P("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ae(),Fe("svg",WF,S[11]||(S[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Xt("",!0),Rr(" "+jt(r.value?"Connexion en cours...":"Se connecter"),1)],8,HF)])],32)])]),P("div",GF,[S[14]||(S[14]=uu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-6" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-cb538253>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-cb538253><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253>📍</div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Tracker GPS solaire</h4><p class="text-gray-600" data-v-cb538253>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253>🌤️</div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Station météo</h4><p class="text-gray-600" data-v-cb538253>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-cb538253><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Carte Interactive</h3></div><p class="text-gray-600" data-v-cb538253>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-cb538253>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-cb538253>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-cb538253>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),P("div",qF,[S[13]||(S[13]=P("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),P("div",YF,[(Ae(!0),Fe(vn,null,nr(f.value,O=>(Ae(),Fe("button",{key:O,onClick:D=>o.value=O,class:yi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===O?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},jt(O),11,ZF))),128))]),P("div",KF,[(Ae(!0),Fe(vn,null,nr(p.value,O=>(Ae(),Fe("div",{key:O.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[P("div",XF,[P("span",JF,jt(O.icon),1),P("span",QF,jt(O.type),1)]),P("p",e9,jt(O.text),1)]))),128))]),y.value>1?(Ae(),Fe("div",t9,[(Ae(!0),Fe(vn,null,nr(y.value,O=>(Ae(),Fe("button",{key:O,onClick:D=>a.value=O,class:yi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===O?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},jt(O),11,n9))),128))])):Xt("",!0)])]),S[15]||(S[15]=P("div",{class:"h-16"},null,-1))])])}}}),i9=Vc(r9,[["__scopeId","data-v-cb538253"]]),s9="/static/frontend/assets/logo.svg";var D2={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Zo,function(n){var r="1.9.4";function i(u){var v,E,F,ne;for(E=1,F=arguments.length;E<F;E++){ne=arguments[E];for(v in ne)u[v]=ne[v]}return u}var s=Object.create||function(){function u(){}return function(v){return u.prototype=v,new u}}();function o(u,v){var E=Array.prototype.slice;if(u.bind)return u.bind.apply(u,E.call(arguments,1));var F=E.call(arguments,2);return function(){return u.apply(v,F.length?F.concat(E.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,v,E){var F,ne,we,Qe;return Qe=function(){F=!1,ne&&(we.apply(E,ne),ne=!1)},we=function(){F?ne=arguments:(u.apply(E,arguments),setTimeout(Qe,v),F=!0)},we}function f(u,v,E){var F=v[1],ne=v[0],we=F-ne;return u===F&&E?u:((u-ne)%we+we)%we+ne}function p(){return!1}function y(u,v){if(v===!1)return u;var E=Math.pow(10,v===void 0?6:v);return Math.round(u*E)/E}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function C(u){return m(u).split(/\s+/)}function S(u,v){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var E in v)u.options[E]=v[E];return u.options}function T(u,v,E){var F=[];for(var ne in u)F.push(encodeURIComponent(E?ne.toUpperCase():ne)+"="+encodeURIComponent(u[ne]));return(!v||v.indexOf("?")===-1?"?":"&")+F.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function D(u,v){return u.replace(O,function(E,F){var ne=v[F];if(ne===void 0)throw new Error("No value provided for variable "+E);return typeof ne=="function"&&(ne=ne(v)),ne})}var B=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function z(u,v){for(var E=0;E<u.length;E++)if(u[E]===v)return E;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var Q=0;function V(u){var v=+new Date,E=Math.max(0,16-(v-Q));return Q=v+E,window.setTimeout(u,E)}var Y=window.requestAnimationFrame||J("RequestAnimationFrame")||V,ge=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function $(u,v,E){if(E&&Y===V)u.call(v);else return Y.call(window,o(u,v))}function W(u){u&&ge.call(window,u)}var se={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:f,falseFn:p,formatNum:y,trim:m,splitWords:C,setOptions:S,getParamString:T,template:D,isArray:B,indexOf:z,emptyImageUrl:H,requestFn:Y,cancelFn:ge,requestAnimFrame:$,cancelAnimFrame:W};function X(){}X.extend=function(u){var v=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,F=s(E);F.constructor=v,v.prototype=F;for(var ne in this)Object.prototype.hasOwnProperty.call(this,ne)&&ne!=="prototype"&&ne!=="__super__"&&(v[ne]=this[ne]);return u.statics&&i(v,u.statics),u.includes&&(U(u.includes),i.apply(null,[F].concat(u.includes))),i(F,u),delete F.statics,delete F.includes,F.options&&(F.options=E.options?s(E.options):{},i(F.options,u.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var we=0,Qe=F._initHooks.length;we<Qe;we++)F._initHooks[we].call(this)}},v},X.include=function(u){var v=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=v,this.mergeOptions(u.options)),this},X.mergeOptions=function(u){return i(this.prototype.options,u),this},X.addInitHook=function(u){var v=Array.prototype.slice.call(arguments,1),E=typeof u=="function"?u:function(){this[u].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=B(u)?u:[u];for(var v=0;v<u.length;v++)u[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var R={on:function(u,v,E){if(typeof u=="object")for(var F in u)this._on(F,u[F],v);else{u=C(u);for(var ne=0,we=u.length;ne<we;ne++)this._on(u[ne],v,E)}return this},off:function(u,v,E){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var F in u)this._off(F,u[F],v);else{u=C(u);for(var ne=arguments.length===1,we=0,Qe=u.length;we<Qe;we++)ne?this._off(u[we]):this._off(u[we],v,E)}return this},_on:function(u,v,E,F){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(u,v,E)===!1){E===this&&(E=void 0);var ne={fn:v,ctx:E};F&&(ne.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ne)}},_off:function(u,v,E){var F,ne,we;if(this._events&&(F=this._events[u],!!F)){if(arguments.length===1){if(this._firingCount)for(ne=0,we=F.length;ne<we;ne++)F[ne].fn=p;delete this._events[u];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var Qe=this._listens(u,v,E);if(Qe!==!1){var Et=F[Qe];this._firingCount&&(Et.fn=p,this._events[u]=F=F.slice()),F.splice(Qe,1)}}},fire:function(u,v,E){if(!this.listens(u,E))return this;var F=i({},v,{type:u,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var ne=this._events[u];if(ne){this._firingCount=this._firingCount+1||1;for(var we=0,Qe=ne.length;we<Qe;we++){var Et=ne[we],Ft=Et.fn;Et.once&&this.off(u,Ft,Et.ctx),Ft.call(Et.ctx||this,F)}this._firingCount--}}return E&&this._propagateEvent(F),this},listens:function(u,v,E,F){typeof u!="string"&&console.warn('"string" type argument expected');var ne=v;typeof v!="function"&&(F=!!v,ne=void 0,E=void 0);var we=this._events&&this._events[u];if(we&&we.length&&this._listens(u,ne,E)!==!1)return!0;if(F){for(var Qe in this._eventParents)if(this._eventParents[Qe].listens(u,v,E,F))return!0}return!1},_listens:function(u,v,E){if(!this._events)return!1;var F=this._events[u]||[];if(!v)return!!F.length;E===this&&(E=void 0);for(var ne=0,we=F.length;ne<we;ne++)if(F[ne].fn===v&&F[ne].ctx===E)return ne;return!1},once:function(u,v,E){if(typeof u=="object")for(var F in u)this._on(F,u[F],v,!0);else{u=C(u);for(var ne=0,we=u.length;ne<we;ne++)this._on(u[ne],v,E,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var v in this._eventParents)this._eventParents[v].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};R.addEventListener=R.on,R.removeEventListener=R.clearAllEventListeners=R.off,R.addOneTimeEventListener=R.once,R.fireEvent=R.fire,R.hasEventListeners=R.listens;var ee=X.extend(R);function ie(u,v,E){this.x=E?Math.round(u):u,this.y=E?Math.round(v):v}var fe=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(u){return this.clone()._add(me(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(me(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new ie(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new ie(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(u){u=me(u);var v=u.x-this.x,E=u.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(u){return u=me(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=me(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function me(u,v,E){return u instanceof ie?u:B(u)?new ie(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new ie(u.x,u.y):new ie(u,v,E)}function Oe(u,v){if(u)for(var E=v?[u,v]:u,F=0,ne=E.length;F<ne;F++)this.extend(E[F])}Oe.prototype={extend:function(u){var v,E;if(!u)return this;if(u instanceof ie||typeof u[0]=="number"||"x"in u)v=E=me(u);else if(u=Z(u),v=u.min,E=u.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(u){return me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return me(this.min.x,this.max.y)},getTopRight:function(){return me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var v,E;return typeof u[0]=="number"||u instanceof ie?u=me(u):u=Z(u),u instanceof Oe?(v=u.min,E=u.max):v=E=u,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(u){u=Z(u);var v=this.min,E=this.max,F=u.min,ne=u.max,we=ne.x>=v.x&&F.x<=E.x,Qe=ne.y>=v.y&&F.y<=E.y;return we&&Qe},overlaps:function(u){u=Z(u);var v=this.min,E=this.max,F=u.min,ne=u.max,we=ne.x>v.x&&F.x<E.x,Qe=ne.y>v.y&&F.y<E.y;return we&&Qe},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var v=this.min,E=this.max,F=Math.abs(v.x-E.x)*u,ne=Math.abs(v.y-E.y)*u;return Z(me(v.x-F,v.y-ne),me(E.x+F,E.y+ne))},equals:function(u){return u?(u=Z(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function Z(u,v){return!u||u instanceof Oe?u:new Oe(u,v)}function ae(u,v){if(u)for(var E=v?[u,v]:u,F=0,ne=E.length;F<ne;F++)this.extend(E[F])}ae.prototype={extend:function(u){var v=this._southWest,E=this._northEast,F,ne;if(u instanceof pe)F=u,ne=u;else if(u instanceof ae){if(F=u._southWest,ne=u._northEast,!F||!ne)return this}else return u?this.extend(Le(u)||ce(u)):this;return!v&&!E?(this._southWest=new pe(F.lat,F.lng),this._northEast=new pe(ne.lat,ne.lng)):(v.lat=Math.min(F.lat,v.lat),v.lng=Math.min(F.lng,v.lng),E.lat=Math.max(ne.lat,E.lat),E.lng=Math.max(ne.lng,E.lng)),this},pad:function(u){var v=this._southWest,E=this._northEast,F=Math.abs(v.lat-E.lat)*u,ne=Math.abs(v.lng-E.lng)*u;return new ae(new pe(v.lat-F,v.lng-ne),new pe(E.lat+F,E.lng+ne))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof pe||"lat"in u?u=Le(u):u=ce(u);var v=this._southWest,E=this._northEast,F,ne;return u instanceof ae?(F=u.getSouthWest(),ne=u.getNorthEast()):F=ne=u,F.lat>=v.lat&&ne.lat<=E.lat&&F.lng>=v.lng&&ne.lng<=E.lng},intersects:function(u){u=ce(u);var v=this._southWest,E=this._northEast,F=u.getSouthWest(),ne=u.getNorthEast(),we=ne.lat>=v.lat&&F.lat<=E.lat,Qe=ne.lng>=v.lng&&F.lng<=E.lng;return we&&Qe},overlaps:function(u){u=ce(u);var v=this._southWest,E=this._northEast,F=u.getSouthWest(),ne=u.getNorthEast(),we=ne.lat>v.lat&&F.lat<E.lat,Qe=ne.lng>v.lng&&F.lng<E.lng;return we&&Qe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,v){return u?(u=ce(u),this._southWest.equals(u.getSouthWest(),v)&&this._northEast.equals(u.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(u,v){return u instanceof ae?u:new ae(u,v)}function pe(u,v,E){if(isNaN(u)||isNaN(v))throw new Error("Invalid LatLng object: ("+u+", "+v+")");this.lat=+u,this.lng=+v,E!==void 0&&(this.alt=+E)}pe.prototype={equals:function(u,v){if(!u)return!1;u=Le(u);var E=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return E<=(v===void 0?1e-9:v)},toString:function(u){return"LatLng("+y(this.lat,u)+", "+y(this.lng,u)+")"},distanceTo:function(u){return Ue.distance(this,Le(u))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(u){var v=180*u/40075017,E=v/Math.cos(Math.PI/180*this.lat);return ce([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function Le(u,v,E){return u instanceof pe?u:B(u)&&typeof u[0]!="object"?u.length===3?new pe(u[0],u[1],u[2]):u.length===2?new pe(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new pe(u.lat,"lng"in u?u.lng:u.lon,u.alt):v===void 0?null:new pe(u,v,E)}var Pe={latLngToPoint:function(u,v){var E=this.projection.project(u),F=this.scale(v);return this.transformation._transform(E,F)},pointToLatLng:function(u,v){var E=this.scale(v),F=this.transformation.untransform(u,E);return this.projection.unproject(F)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(u),F=this.transformation.transform(v.min,E),ne=this.transformation.transform(v.max,E);return new Oe(F,ne)},infinite:!1,wrapLatLng:function(u){var v=this.wrapLng?f(u.lng,this.wrapLng,!0):u.lng,E=this.wrapLat?f(u.lat,this.wrapLat,!0):u.lat,F=u.alt;return new pe(E,v,F)},wrapLatLngBounds:function(u){var v=u.getCenter(),E=this.wrapLatLng(v),F=v.lat-E.lat,ne=v.lng-E.lng;if(F===0&&ne===0)return u;var we=u.getSouthWest(),Qe=u.getNorthEast(),Et=new pe(we.lat-F,we.lng-ne),Ft=new pe(Qe.lat-F,Qe.lng-ne);return new ae(Et,Ft)}},Ue=i({},Pe,{wrapLng:[-180,180],R:6371e3,distance:function(u,v){var E=Math.PI/180,F=u.lat*E,ne=v.lat*E,we=Math.sin((v.lat-u.lat)*E/2),Qe=Math.sin((v.lng-u.lng)*E/2),Et=we*we+Math.cos(F)*Math.cos(ne)*Qe*Qe,Ft=2*Math.atan2(Math.sqrt(Et),Math.sqrt(1-Et));return this.R*Ft}}),Ne=6378137,nt={R:Ne,MAX_LATITUDE:85.0511287798,project:function(u){var v=Math.PI/180,E=this.MAX_LATITUDE,F=Math.max(Math.min(E,u.lat),-E),ne=Math.sin(F*v);return new ie(this.R*u.lng*v,this.R*Math.log((1+ne)/(1-ne))/2)},unproject:function(u){var v=180/Math.PI;return new pe((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*v,u.x*v/this.R)},bounds:function(){var u=Ne*Math.PI;return new Oe([-u,-u],[u,u])}()};function pt(u,v,E,F){if(B(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=v,this._c=E,this._d=F}pt.prototype={transform:function(u,v){return this._transform(u.clone(),v)},_transform:function(u,v){return v=v||1,u.x=v*(this._a*u.x+this._b),u.y=v*(this._c*u.y+this._d),u},untransform:function(u,v){return v=v||1,new ie((u.x/v-this._b)/this._a,(u.y/v-this._d)/this._c)}};function bt(u,v,E,F){return new pt(u,v,E,F)}var le=i({},Ue,{code:"EPSG:3857",projection:nt,transformation:function(){var u=.5/(Math.PI*nt.R);return bt(u,.5,-u,.5)}()}),oe=i({},le,{code:"EPSG:900913"});function ue(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function te(u,v){var E="",F,ne,we,Qe,Et,Ft;for(F=0,we=u.length;F<we;F++){for(Et=u[F],ne=0,Qe=Et.length;ne<Qe;ne++)Ft=Et[ne],E+=(ne?"L":"M")+Ft.x+" "+Ft.y;E+=v?Pt.svg?"z":"x":""}return E||"M0 0"}var Se=document.documentElement.style,Ve="ActiveXObject"in window,Xe=Ve&&!document.addEventListener,at="msLaunchUri"in navigator&&!("documentMode"in document),ot=Ln("webkit"),dt=Ln("android"),zt=Ln("android 2")||Ln("android 3"),Rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zt=dt&&Ln("Google")&&Rt<537&&!("AudioNode"in window),Qt=!!window.opera,pn=!at&&Ln("chrome"),Sn=Ln("gecko")&&!ot&&!Qt&&!Ve,Ze=!pn&&Ln("safari"),it=Ln("phantom"),Je="OTransition"in Se,$t=navigator.platform.indexOf("Win")===0,Kt=Ve&&"transition"in Se,_n="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,gn="MozPerspective"in Se,bn=!window.L_DISABLE_3D&&(Kt||_n||gn)&&!Je&&!it,Rn=typeof orientation<"u"||Ln("mobile"),mn=Rn&&ot,nn=Rn&&_n,cn=!window.PointerEvent&&window.MSPointerEvent,Nn=!!(window.PointerEvent||cn),er="ontouchstart"in window||!!window.TouchEvent,ar=!window.L_NO_TOUCH&&(er||Nn),zn=Rn&&Qt,Lr=Rn&&Sn,ns=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ki=function(){var u=!1;try{var v=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,v),window.removeEventListener("testPassiveEventSupport",p,v)}catch{}return u}(),Js=function(){return!!document.createElement("canvas").getContext}(),Nt=!!(document.createElementNS&&ue("svg").createSVGRect),He=!!Nt&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vt=!Nt&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var v=u.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),Bn=navigator.platform.indexOf("Mac")===0,Vn=navigator.platform.indexOf("Linux")===0;function Ln(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Pt={ie:Ve,ielt9:Xe,edge:at,webkit:ot,android:dt,android23:zt,androidStock:Zt,opera:Qt,chrome:pn,gecko:Sn,safari:Ze,phantom:it,opera12:Je,win:$t,ie3d:Kt,webkit3d:_n,gecko3d:gn,any3d:bn,mobile:Rn,mobileWebkit:mn,mobileWebkit3d:nn,msPointer:cn,pointer:Nn,touch:ar,touchNative:er,mobileOpera:zn,mobileGecko:Lr,retina:ns,passiveEvents:ki,canvas:Js,svg:Nt,vml:Vt,inlineSvg:He,mac:Bn,linux:Vn},wt=Pt.msPointer?"MSPointerDown":"pointerdown",qt=Pt.msPointer?"MSPointerMove":"pointermove",wn=Pt.msPointer?"MSPointerUp":"pointerup",Tn=Pt.msPointer?"MSPointerCancel":"pointercancel",Xn={touchstart:wt,touchmove:qt,touchend:wn,touchcancel:Tn},sr={touchstart:fu,touchmove:So,touchend:So,touchcancel:So},kr={},Hn=!1;function _i(u,v,E){return v==="touchstart"&&Bi(),sr[v]?(E=sr[v].bind(this,E),u.addEventListener(Xn[v],E,!1),E):(console.warn("wrong event specified:",v),p)}function Ur(u,v,E){if(!Xn[v]){console.warn("wrong event specified:",v);return}u.removeEventListener(Xn[v],E,!1)}function Xo(u){kr[u.pointerId]=u}function lr(u){kr[u.pointerId]&&(kr[u.pointerId]=u)}function ur(u){delete kr[u.pointerId]}function Bi(){Hn||(document.addEventListener(wt,Xo,!0),document.addEventListener(qt,lr,!0),document.addEventListener(wn,ur,!0),document.addEventListener(Tn,ur,!0),Hn=!0)}function So(u,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in kr)v.touches.push(kr[E]);v.changedTouches=[v],u(v)}}function fu(u,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&dr(v),So(u,v)}function Wc(u){var v={},E,F;for(F in u)E=u[F],v[F]=E&&E.bind?E.bind(u):E;return u=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var du=200;function fc(u,v){u.addEventListener("dblclick",v);var E=0,F;function ne(we){if(we.detail!==1){F=we.detail;return}if(!(we.pointerType==="mouse"||we.sourceCapabilities&&!we.sourceCapabilities.firesTouchEvents)){var Qe=Ya(we);if(!(Qe.some(function(Ft){return Ft instanceof HTMLLabelElement&&Ft.attributes.for})&&!Qe.some(function(Ft){return Ft instanceof HTMLInputElement||Ft instanceof HTMLSelectElement}))){var Et=Date.now();Et-E<=du?(F++,F===2&&v(Wc(we))):F=1,E=Et}}}return u.addEventListener("click",ne),{dblclick:v,simDblclick:ne}}function dc(u,v){u.removeEventListener("dblclick",v.dblclick),u.removeEventListener("click",v.simDblclick)}var cl=fl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hl=fl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nu=hl==="webkitTransition"||hl==="OTransition"?hl+"End":"transitionend";function pc(u){return typeof u=="string"?document.getElementById(u):u}function Eo(u,v){var E=u.style[v]||u.currentStyle&&u.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(u,null);E=F?F[v]:null}return E==="auto"?null:E}function Wr(u,v,E){var F=document.createElement(u);return F.className=v||"",E&&E.appendChild(F),F}function fr(u){var v=u.parentNode;v&&v.removeChild(u)}function $a(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function da(u){var v=u.parentNode;v&&v.lastChild!==u&&v.appendChild(u)}function Io(u){var v=u.parentNode;v&&v.firstChild!==u&&v.insertBefore(u,v.firstChild)}function Ul(u,v){if(u.classList!==void 0)return u.classList.contains(v);var E=ws(u);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function gr(u,v){if(u.classList!==void 0)for(var E=C(v),F=0,ne=E.length;F<ne;F++)u.classList.add(E[F]);else if(!Ul(u,v)){var we=ws(u);Va(u,(we?we+" ":"")+v)}}function Gr(u,v){u.classList!==void 0?u.classList.remove(v):Va(u,m((" "+ws(u)+" ").replace(" "+v+" "," ")))}function Va(u,v){u.className.baseVal===void 0?u.className=v:u.className.baseVal=v}function ws(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function xs(u,v){"opacity"in u.style?u.style.opacity=v:"filter"in u.style&&Bu(u,v)}function Bu(u,v){var E=!1,F="DXImageTransform.Microsoft.Alpha";try{E=u.filters.item(F)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):u.style.filter+=" progid:"+F+"(opacity="+v+")"}function fl(u){for(var v=document.documentElement.style,E=0;E<u.length;E++)if(u[E]in v)return u[E];return!1}function pa(u,v,E){var F=v||new ie(0,0);u.style[cl]=(Pt.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(E?" scale("+E+")":"")}function Ti(u,v){u._leaflet_pos=v,Pt.any3d?pa(u,v):(u.style.left=v.x+"px",u.style.top=v.y+"px")}function No(u){return u._leaflet_pos||new ie(0,0)}var Ha,mo,pu;if("onselectstart"in document)Ha=function(){mr(window,"selectstart",dr)},mo=function(){$r(window,"selectstart",dr)};else{var Wa=fl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ha=function(){if(Wa){var u=document.documentElement.style;pu=u[Wa],u[Wa]="none"}},mo=function(){Wa&&(document.documentElement.style[Wa]=pu,pu=void 0)}}function Ru(){mr(window,"dragstart",dr)}function Bo(){$r(window,"dragstart",dr)}var ga,Ga;function $l(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(rs(),ga=u,Ga=u.style.outlineStyle,u.style.outlineStyle="none",mr(window,"keydown",rs))}function rs(){ga&&(ga.style.outlineStyle=Ga,ga=void 0,Ga=void 0,$r(window,"keydown",rs))}function gc(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function gu(u){var v=u.getBoundingClientRect();return{x:v.width/u.offsetWidth||1,y:v.height/u.offsetHeight||1,boundingClientRect:v}}var cr={__proto__:null,TRANSFORM:cl,TRANSITION:hl,TRANSITION_END:Nu,get:pc,getStyle:Eo,create:Wr,remove:fr,empty:$a,toFront:da,toBack:Io,hasClass:Ul,addClass:gr,removeClass:Gr,setClass:Va,getClass:ws,setOpacity:xs,testProp:fl,setTransform:pa,setPosition:Ti,getPosition:No,get disableTextSelection(){return Ha},get enableTextSelection(){return mo},disableImageDrag:Ru,enableImageDrag:Bo,preventOutline:$l,restoreOutline:rs,getSizedParentNode:gc,getScale:gu};function mr(u,v,E,F){if(v&&typeof v=="object")for(var ne in v)pl(u,ne,v[ne],E);else{v=C(v);for(var we=0,Qe=v.length;we<Qe;we++)pl(u,v[we],E,F)}return this}var Ro="_leaflet_events";function $r(u,v,E,F){if(arguments.length===1)Fu(u),delete u[Ro];else if(v&&typeof v=="object")for(var ne in v)Fo(u,ne,v[ne],E);else if(v=C(v),arguments.length===2)Fu(u,function(Et){return z(v,Et)!==-1});else for(var we=0,Qe=v.length;we<Qe;we++)Fo(u,v[we],E,F);return this}function Fu(u,v){for(var E in u[Ro]){var F=E.split(/\d/)[0];(!v||v(F))&&Fo(u,F,null,null,E)}}var dl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function pl(u,v,E,F){var ne=v+l(E)+(F?"_"+l(F):"");if(u[Ro]&&u[Ro][ne])return this;var we=function(Et){return E.call(F||u,Et||window.event)},Qe=we;!Pt.touchNative&&Pt.pointer&&v.indexOf("touch")===0?we=_i(u,v,we):Pt.touch&&v==="dblclick"?we=fc(u,we):"addEventListener"in u?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?u.addEventListener(dl[v]||v,we,Pt.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(we=function(Et){Et=Et||window.event,gl(u,Et)&&Qe(Et)},u.addEventListener(dl[v],we,!1)):u.addEventListener(v,Qe,!1):u.attachEvent("on"+v,we),u[Ro]=u[Ro]||{},u[Ro][ne]=we}function Fo(u,v,E,F,ne){ne=ne||v+l(E)+(F?"_"+l(F):"");var we=u[Ro]&&u[Ro][ne];if(!we)return this;!Pt.touchNative&&Pt.pointer&&v.indexOf("touch")===0?Ur(u,v,we):Pt.touch&&v==="dblclick"?dc(u,we):"removeEventListener"in u?u.removeEventListener(dl[v]||v,we,!1):u.detachEvent("on"+v,we),u[Ro][ne]=null}function qa(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function ju(u){return pl(u,"wheel",qa),this}function Vl(u){return mr(u,"mousedown touchstart dblclick contextmenu",qa),u._leaflet_disable_click=!0,this}function dr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Mr(u){return dr(u),qa(u),this}function Ya(u){if(u.composedPath)return u.composedPath();for(var v=[],E=u.target;E;)v.push(E),E=E.parentNode;return v}function mc(u,v){if(!v)return new ie(u.clientX,u.clientY);var E=gu(v),F=E.boundingClientRect;return new ie((u.clientX-F.left)/E.x-v.clientLeft,(u.clientY-F.top)/E.y-v.clientTop)}var Hl=Pt.linux&&Pt.chrome?window.devicePixelRatio:Pt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mu(u){return Pt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Hl:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function gl(u,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==u;)E=E.parentNode}catch{return!1}return E!==u}var Wl={__proto__:null,on:mr,off:$r,stopPropagation:qa,disableScrollPropagation:ju,disableClickPropagation:Vl,preventDefault:dr,stop:Mr,getPropagationPath:Ya,getMousePosition:mc,getWheelDelta:mu,isExternalTarget:gl,addListener:mr,removeListener:$r},vu=ee.extend({run:function(u,v,E,F){this.stop(),this._el=u,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=No(u),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(u){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),u):(this._runFrame(1),this._complete())},_runFrame:function(u,v){var E=this._startPos.add(this._offset.multiplyBy(u));v&&E._round(),Ti(this._el,E),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Dr=ee.extend({options:{crs:le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,v){v=S(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(Le(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hl&&Pt.any3d&&!Pt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mr(this._proxy,Nu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),u=this._limitCenter(Le(u),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var F=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,v,E.zoom):this._tryAnimatedPan(u,E.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(u,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(u,v){return this._loaded?this.setView(this.getCenter(),u,{zoom:v}):(this._zoom=u,this)},zoomIn:function(u,v){return u=u||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,v)},zoomOut:function(u,v){return u=u||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,v)},setZoomAround:function(u,v,E){var F=this.getZoomScale(v),ne=this.getSize().divideBy(2),we=u instanceof ie?u:this.latLngToContainerPoint(u),Qe=we.subtract(ne).multiplyBy(1-1/F),Et=this.containerPointToLatLng(ne.add(Qe));return this.setView(Et,v,{zoom:E})},_getBoundsCenterZoom:function(u,v){v=v||{},u=u.getBounds?u.getBounds():ce(u);var E=me(v.paddingTopLeft||v.padding||[0,0]),F=me(v.paddingBottomRight||v.padding||[0,0]),ne=this.getBoundsZoom(u,!1,E.add(F));if(ne=typeof v.maxZoom=="number"?Math.min(v.maxZoom,ne):ne,ne===1/0)return{center:u.getCenter(),zoom:ne};var we=F.subtract(E).divideBy(2),Qe=this.project(u.getSouthWest(),ne),Et=this.project(u.getNorthEast(),ne),Ft=this.unproject(Qe.add(Et).divideBy(2).add(we),ne);return{center:Ft,zoom:ne}},fitBounds:function(u,v){if(u=ce(u),!u.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(u,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,v){return this.setView(u,this._zoom,{pan:v})},panBy:function(u,v){if(u=me(u).round(),v=v||{},!u.x&&!u.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){gr(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,v,E){if(E=E||{},E.animate===!1||!Pt.any3d)return this.setView(u,v,E);this._stop();var F=this.project(this.getCenter()),ne=this.project(u),we=this.getSize(),Qe=this._zoom;u=Le(u),v=v===void 0?Qe:v;var Et=Math.max(we.x,we.y),Ft=Et*this.getZoomScale(Qe,v),rn=ne.distanceTo(F)||1,Mn=1.42,Wn=Mn*Mn;function Cr(Xr){var As=Xr?-1:1,Me=Xr?Ft:Et,ro=Ft*Ft-Et*Et+As*Wn*Wn*rn*rn,$u=2*Me*Wn*rn,gs=ro/$u,Pr=Math.sqrt(gs*gs+1)-gs,Sh=Pr<1e-9?-18:Math.log(Pr);return Sh}function Ki(Xr){return(Math.exp(Xr)-Math.exp(-Xr))/2}function Oi(Xr){return(Math.exp(Xr)+Math.exp(-Xr))/2}function ps(Xr){return Ki(Xr)/Oi(Xr)}var Si=Cr(0);function no(Xr){return Et*(Oi(Si)/Oi(Si+Mn*Xr))}function qc(Xr){return Et*(Oi(Si)*ps(Si+Mn*Xr)-Ki(Si))/Wn}function aa(Xr){return 1-Math.pow(1-Xr,1.5)}var Ho=Date.now(),Mo=(Cr(1)-Si)/Mn,pf=E.duration?1e3*E.duration:1e3*Mo*.8;function _u(){var Xr=(Date.now()-Ho)/pf,As=aa(Xr)*Mo;Xr<=1?(this._flyToFrame=$(_u,this),this._move(this.unproject(F.add(ne.subtract(F).multiplyBy(qc(As)/rn)),Qe),this.getScaleZoom(Et/no(As),Qe),{flyTo:!0})):this._move(u,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),_u.call(this),this},flyToBounds:function(u,v){var E=this._getBoundsCenterZoom(u,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(u){return u=ce(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var v=this.options.minZoom;return this.options.minZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var v=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,v){this._enforcingBounds=!0;var E=this.getCenter(),F=this._limitCenter(E,this._zoom,ce(u));return E.equals(F)||this.panTo(F,v),this._enforcingBounds=!1,this},panInside:function(u,v){v=v||{};var E=me(v.paddingTopLeft||v.padding||[0,0]),F=me(v.paddingBottomRight||v.padding||[0,0]),ne=this.project(this.getCenter()),we=this.project(u),Qe=this.getPixelBounds(),Et=Z([Qe.min.add(E),Qe.max.subtract(F)]),Ft=Et.getSize();if(!Et.contains(we)){this._enforcingBounds=!0;var rn=we.subtract(Et.getCenter()),Mn=Et.extend(we).getSize().subtract(Ft);ne.x+=rn.x<0?-Mn.x:Mn.x,ne.y+=rn.y<0?-Mn.y:Mn.y,this.panTo(this.unproject(ne),v),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),F=v.divideBy(2).round(),ne=E.divideBy(2).round(),we=F.subtract(ne);return!we.x&&!we.y?this:(u.animate&&u.pan?this.panBy(we):(u.pan&&this._rawPanBy(we),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,u):navigator.geolocation.getCurrentPosition(v,E,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var v=u.code,E=u.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var v=u.coords.latitude,E=u.coords.longitude,F=new pe(v,E),ne=F.toBounds(u.coords.accuracy*2),we=this._locateOptions;if(we.setView){var Qe=this.getBoundsZoom(ne);this.setView(F,we.maxZoom?Math.min(Qe,we.maxZoom):Qe)}var Et={latlng:F,bounds:ne,timestamp:u.timestamp};for(var Ft in u.coords)typeof u.coords[Ft]=="number"&&(Et[Ft]=u.coords[Ft]);this.fire("locationfound",Et)}},addHandler:function(u,v){if(!v)return this;var E=this[u]=new v(this);return this._handlers.push(E),this.options[u]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)fr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,v){var E="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),F=Wr("div",E,v||this._mapPane);return u&&(this._panes[u]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),v=this.unproject(u.getBottomLeft()),E=this.unproject(u.getTopRight());return new ae(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,v,E){u=ce(u),E=me(E||[0,0]);var F=this.getZoom()||0,ne=this.getMinZoom(),we=this.getMaxZoom(),Qe=u.getNorthWest(),Et=u.getSouthEast(),Ft=this.getSize().subtract(E),rn=Z(this.project(Et,F),this.project(Qe,F)).getSize(),Mn=Pt.any3d?this.options.zoomSnap:1,Wn=Ft.x/rn.x,Cr=Ft.y/rn.y,Ki=v?Math.max(Wn,Cr):Math.min(Wn,Cr);return F=this.getScaleZoom(Ki,F),Mn&&(F=Math.round(F/(Mn/100))*(Mn/100),F=v?Math.ceil(F/Mn)*Mn:Math.floor(F/Mn)*Mn),Math.max(ne,Math.min(we,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,v){var E=this._getTopLeftPoint(u,v);return new Oe(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(u)/E.scale(v)},getScaleZoom:function(u,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var F=E.zoom(u*E.scale(v));return isNaN(F)?1/0:F},project:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(Le(u),v)},unproject:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(me(u),v)},layerPointToLatLng:function(u){var v=me(u).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(u){var v=this.project(Le(u))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(Le(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(ce(u))},distance:function(u,v){return this.options.crs.distance(Le(u),Le(v))},containerPointToLayerPoint:function(u){return me(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return me(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var v=this.containerPointToLayerPoint(me(u));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Le(u)))},mouseEventToContainerPoint:function(u){return mc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var v=this._container=pc(u);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mr(v,"scroll",this._onScroll,this),this._containerId=l(v)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pt.any3d,gr(u,"leaflet-container"+(Pt.touch?" leaflet-touch":"")+(Pt.retina?" leaflet-retina":"")+(Pt.ielt9?" leaflet-oldie":"")+(Pt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Eo(u,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ti(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(gr(u.markerPane,"leaflet-zoom-hide"),gr(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,v,E){Ti(this._mapPane,new ie(0,0));var F=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var ne=this._zoom!==v;this._moveStart(ne,E)._move(u,v)._moveEnd(ne),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(u,v){return u&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(u,v,E,F){v===void 0&&(v=this._zoom);var ne=this._zoom!==v;return this._zoom=v,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),F?E&&E.pinch&&this.fire("zoom",E):((ne||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Ti(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var v=u?$r:mr;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Pt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,v){for(var E=[],F,ne=v==="mouseout"||v==="mouseover",we=u.target||u.srcElement,Qe=!1;we;){if(F=this._targets[l(we)],F&&(v==="click"||v==="preclick")&&this._draggableMoved(F)){Qe=!0;break}if(F&&F.listens(v,!0)&&(ne&&!gl(we,u)||(E.push(F),ne))||we===this._container)break;we=we.parentNode}return!E.length&&!Qe&&!ne&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var v=u.target||u.srcElement;if(!(!this._loaded||v._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(v))){var E=u.type;E==="mousedown"&&$l(v),this._fireDOMEvent(u,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,v,E){if(u.type==="click"){var F=i({},u);F.type="preclick",this._fireDOMEvent(F,F.type,E)}var ne=this._findEventTargets(u,v);if(E){for(var we=[],Qe=0;Qe<E.length;Qe++)E[Qe].listens(v,!0)&&we.push(E[Qe]);ne=we.concat(ne)}if(ne.length){v==="contextmenu"&&dr(u);var Et=ne[0],Ft={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var rn=Et.getLatLng&&(!Et._radius||Et._radius<=10);Ft.containerPoint=rn?this.latLngToContainerPoint(Et.getLatLng()):this.mouseEventToContainerPoint(u),Ft.layerPoint=this.containerPointToLayerPoint(Ft.containerPoint),Ft.latlng=rn?Et.getLatLng():this.layerPointToLatLng(Ft.layerPoint)}for(Qe=0;Qe<ne.length;Qe++)if(ne[Qe].fire(v,Ft,!0),Ft.originalEvent._stopped||ne[Qe].options.bubblingMouseEvents===!1&&z(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,v=this._handlers.length;u<v;u++)this._handlers[u].disable()},whenReady:function(u,v){return this._loaded?u.call(v||this,{target:this}):this.on("load",u,v),this},_getMapPanePos:function(){return No(this._mapPane)||new ie(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,v){var E=u&&v!==void 0?this._getNewPixelOrigin(u,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,v){var E=this.getSize()._divideBy(2);return this.project(u,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,v,E){var F=this._getNewPixelOrigin(E,v);return this.project(u,v)._subtract(F)},_latLngBoundsToNewLayerBounds:function(u,v,E){var F=this._getNewPixelOrigin(E,v);return Z([this.project(u.getSouthWest(),v)._subtract(F),this.project(u.getNorthWest(),v)._subtract(F),this.project(u.getSouthEast(),v)._subtract(F),this.project(u.getNorthEast(),v)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,v,E){if(!E)return u;var F=this.project(u,v),ne=this.getSize().divideBy(2),we=new Oe(F.subtract(ne),F.add(ne)),Qe=this._getBoundsOffset(we,E,v);return Math.abs(Qe.x)<=1&&Math.abs(Qe.y)<=1?u:this.unproject(F.add(Qe),v)},_limitOffset:function(u,v){if(!v)return u;var E=this.getPixelBounds(),F=new Oe(E.min.add(u),E.max.add(u));return u.add(this._getBoundsOffset(F,v))},_getBoundsOffset:function(u,v,E){var F=Z(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),ne=F.min.subtract(u.min),we=F.max.subtract(u.max),Qe=this._rebound(ne.x,-we.x),Et=this._rebound(ne.y,-we.y);return new ie(Qe,Et)},_rebound:function(u,v){return u+v>0?Math.round(u-v)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(v))},_limitZoom:function(u){var v=this.getMinZoom(),E=this.getMaxZoom(),F=Pt.any3d?this.options.zoomSnap:1;return F&&(u=Math.round(u/F)*F),Math.max(v,Math.min(E,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Gr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,v){var E=this._getCenterOffset(u)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var u=this._proxy=Wr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(v){var E=cl,F=this._proxy.style[E];pa(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),F===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),v=this.getZoom();pa(this._proxy,this.project(u,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(v),ne=this._getCenterOffset(u)._divideBy(1-1/F);return E.animate!==!0&&!this.getSize().contains(ne)?!1:($(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(u,v,!0)},this),!0)},_animateZoom:function(u,v,E,F){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=v,gr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:v,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Gr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Fi(u,v){return new Dr(u,v)}var Jn=X.extend({options:{position:"topright"},initialize:function(u){S(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var v=this._map;return v&&v.removeControl(this),this.options.position=u,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var v=this._container=this.onAdd(u),E=this.getPosition(),F=u._controlCorners[E];return gr(v,"leaflet-control"),E.indexOf("bottom")!==-1?F.insertBefore(v,F.firstChild):F.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ji=function(u){return new Jn(u)};Dr.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},v="leaflet-",E=this._controlContainer=Wr("div",v+"control-container",this._container);function F(ne,we){var Qe=v+ne+" "+v+we;u[ne+we]=Wr("div",Qe,E)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)fr(this._controlCorners[u]);fr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ml=Jn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,v,E,F){return E<F?-1:F<E?1:0}},initialize:function(u,v,E){S(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in u)this._addLayer(u[F],F);for(F in v)this._addLayer(v[F],F,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Jn.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,v){return this._addLayer(u,v),this._map?this._update():this},addOverlay:function(u,v){return this._addLayer(u,v,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var v=this._getLayer(l(u));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){gr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(gr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Gr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Gr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",v=this._container=Wr("div",u),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Vl(v),ju(v);var F=this._section=Wr("section",u+"-list");E&&(this._map.on("click",this.collapse,this),mr(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ne=this._layersLink=Wr("a",u+"-toggle",v);ne.href="#",ne.title="Layers",ne.setAttribute("role","button"),mr(ne,{keydown:function(we){we.keyCode===13&&this._expandSafely()},click:function(we){dr(we),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=Wr("div",u+"-base",F),this._separator=Wr("div",u+"-separator",F),this._overlaysList=Wr("div",u+"-overlays",F),v.appendChild(F)},_getLayer:function(u){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&l(this._layers[v].layer)===u)return this._layers[v]},_addLayer:function(u,v,E){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(F,ne){return this.options.sortFunction(F.layer,ne.layer,F.name,ne.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$a(this._baseLayersList),$a(this._overlaysList),this._layerControlInputs=[];var u,v,E,F,ne=0;for(E=0;E<this._layers.length;E++)F=this._layers[E],this._addItem(F),v=v||F.overlay,u=u||!F.overlay,ne+=F.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ne>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=v&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var v=this._getLayer(l(u.target)),E=v.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(u,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(v?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=E,F.firstChild},_addItem:function(u){var v=document.createElement("label"),E=this._map.hasLayer(u.layer),F;u.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=E):F=this._createRadioElement("leaflet-base-layers_"+l(this),E),this._layerControlInputs.push(F),F.layerId=l(u.layer),mr(F,"click",this._onInputClick,this);var ne=document.createElement("span");ne.innerHTML=" "+u.name;var we=document.createElement("span");v.appendChild(we),we.appendChild(F),we.appendChild(ne);var Qe=u.overlay?this._overlaysList:this._baseLayersList;return Qe.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,v,E,F=[],ne=[];this._handlingClick=!0;for(var we=u.length-1;we>=0;we--)v=u[we],E=this._getLayer(v.layerId).layer,v.checked?F.push(E):v.checked||ne.push(E);for(we=0;we<ne.length;we++)this._map.hasLayer(ne[we])&&this._map.removeLayer(ne[we]);for(we=0;we<F.length;we++)this._map.hasLayer(F[we])||this._map.addLayer(F[we]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,v,E,F=this._map.getZoom(),ne=u.length-1;ne>=0;ne--)v=u[ne],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&F<E.options.minZoom||E.options.maxZoom!==void 0&&F>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,mr(u,"click",dr),this.expand();var v=this;setTimeout(function(){$r(u,"click",dr),v._preventClick=!1})}}),ma=function(u,v,E){return new ml(u,v,E)},xi=Jn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var v="leaflet-control-zoom",E=Wr("div",v+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,v,E,F,ne){var we=Wr("a",E,F);return we.innerHTML=u,we.href="#",we.title=v,we.setAttribute("role","button"),we.setAttribute("aria-label",v),Vl(we),mr(we,"click",Mr),mr(we,"click",ne,this),mr(we,"click",this._refocusOnMap,this),we},_updateDisabled:function(){var u=this._map,v="leaflet-disabled";Gr(this._zoomInButton,v),Gr(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(gr(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(gr(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dr.mergeOptions({zoomControl:!0}),Dr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new xi,this.addControl(this.zoomControl))});var yu=function(u){return new xi(u)},Jo=Jn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var v="leaflet-control-scale",E=Wr("div",v),F=this.options;return this._addScales(F,v+"-line",E),u.on(F.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),E},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,v,E){u.metric&&(this._mScale=Wr("div",v,E)),u.imperial&&(this._iScale=Wr("div",v,E))},_update:function(){var u=this._map,v=u.getSize().y/2,E=u.distance(u.containerPointToLatLng([0,v]),u.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var v=this._getRoundNum(u),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/u)},_updateImperial:function(u){var v=u*3.2808399,E,F,ne;v>5280?(E=v/5280,F=this._getRoundNum(E),this._updateScale(this._iScale,F+" mi",F/E)):(ne=this._getRoundNum(v),this._updateScale(this._iScale,ne+" ft",ne/v))},_updateScale:function(u,v,E){u.style.width=Math.round(this.options.maxWidth*E)+"px",u.innerHTML=v},_getRoundNum:function(u){var v=Math.pow(10,(Math.floor(u)+"").length-1),E=u/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),Gl=function(u){return new Jo(u)},ql='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Po=Jn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pt.inlineSvg?ql+" ":"")+"Leaflet</a>"},initialize:function(u){S(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Wr("div","leaflet-control-attribution"),Vl(this._container);for(var v in u._layers)u._layers[v].getAttribution&&this.addAttribution(u._layers[v].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var v in this._attributions)this._attributions[v]&&u.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),u.length&&E.push(u.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});Dr.mergeOptions({attributionControl:!0}),Dr.addInitHook(function(){this.options.attributionControl&&new Po().addTo(this)});var Yl=function(u){return new Po(u)};Jn.Layers=ml,Jn.Zoom=xi,Jn.Scale=Jo,Jn.Attribution=Po,ji.layers=ma,ji.zoom=yu,ji.scale=Gl,ji.attribution=Yl;var ei=X.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ei.addTo=function(u,v){return u.addHandler(v,this),this};var vc={Events:R},us=Pt.touch?"touchstart mousedown":"mousedown",jo=ee.extend({options:{clickTolerance:3},initialize:function(u,v,E,F){S(this,F),this._element=u,this._dragStartTarget=v||u,this._preventOutline=E},enable:function(){this._enabled||(mr(this._dragStartTarget,us,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jo._dragging===this&&this.finishDrag(!0),$r(this._dragStartTarget,us,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){jo._dragging===this&&this.finishDrag();return}if(!(jo._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(jo._dragging=this,this._preventOutline&&$l(this._element),Ru(),Ha(),!this._moving)){this.fire("down");var v=u.touches?u.touches[0]:u,E=gc(this._element);this._startPoint=new ie(v.clientX,v.clientY),this._startPos=No(this._element),this._parentScale=gu(E);var F=u.type==="mousedown";mr(document,F?"mousemove":"touchmove",this._onMove,this),mr(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var v=u.touches&&u.touches.length===1?u.touches[0]:u,E=new ie(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,dr(u),this._moved||(this.fire("dragstart"),this._moved=!0,gr(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),gr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Ti(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Gr(document.body,"leaflet-dragging"),this._lastTarget&&(Gr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$r(document,"mousemove touchmove",this._onMove,this),$r(document,"mouseup touchend touchcancel",this._onUp,this),Bo(),mo();var v=this._moved&&this._moving;this._moving=!1,jo._dragging=!1,v&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Zl(u,v,E){var F,ne=[1,4,2,8],we,Qe,Et,Ft,rn,Mn,Wn,Cr;for(we=0,Mn=u.length;we<Mn;we++)u[we]._code=Bt(u[we],v);for(Et=0;Et<4;Et++){for(Wn=ne[Et],F=[],we=0,Mn=u.length,Qe=Mn-1;we<Mn;Qe=we++)Ft=u[we],rn=u[Qe],Ft._code&Wn?rn._code&Wn||(Cr=xt(rn,Ft,Wn,v,E),Cr._code=Bt(Cr,v),F.push(Cr)):(rn._code&Wn&&(Cr=xt(rn,Ft,Wn,v,E),Cr._code=Bt(Cr,v),F.push(Cr)),F.push(Ft));u=F}return u}function zo(u,v){var E,F,ne,we,Qe,Et,Ft,rn,Mn;if(!u||u.length===0)throw new Error("latlngs not passed");On(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Wn=Le([0,0]),Cr=ce(u),Ki=Cr.getNorthWest().distanceTo(Cr.getSouthWest())*Cr.getNorthEast().distanceTo(Cr.getNorthWest());Ki<1700&&(Wn=vl(u));var Oi=u.length,ps=[];for(E=0;E<Oi;E++){var Si=Le(u[E]);ps.push(v.project(Le([Si.lat-Wn.lat,Si.lng-Wn.lng])))}for(Et=Ft=rn=0,E=0,F=Oi-1;E<Oi;F=E++)ne=ps[E],we=ps[F],Qe=ne.y*we.x-we.y*ne.x,Ft+=(ne.x+we.x)*Qe,rn+=(ne.y+we.y)*Qe,Et+=Qe*3;Et===0?Mn=ps[0]:Mn=[Ft/Et,rn/Et];var no=v.unproject(me(Mn));return Le([no.lat+Wn.lat,no.lng+Wn.lng])}function vl(u){for(var v=0,E=0,F=0,ne=0;ne<u.length;ne++){var we=Le(u[ne]);v+=we.lat,E+=we.lng,F++}return Le([v/F,E/F])}var yl={__proto__:null,clipPolygon:Zl,polygonCenter:zo,centroid:vl};function ti(u,v){if(!v||!u.length)return u.slice();var E=v*v;return u=ve(u,E),u=zi(u,E),u}function vo(u,v,E){return Math.sqrt(kn(u,v,E,!0))}function va(u,v,E){return kn(u,v,E)}function zi(u,v){var E=u.length,F=typeof Uint8Array<"u"?Uint8Array:Array,ne=new F(E);ne[0]=ne[E-1]=1,I(u,ne,v,0,E-1);var we,Qe=[];for(we=0;we<E;we++)ne[we]&&Qe.push(u[we]);return Qe}function I(u,v,E,F,ne){var we=0,Qe,Et,Ft;for(Et=F+1;Et<=ne-1;Et++)Ft=kn(u[Et],u[F],u[ne],!0),Ft>we&&(Qe=Et,we=Ft);we>E&&(v[Qe]=1,I(u,v,E,F,Qe),I(u,v,E,Qe,ne))}function ve(u,v){for(var E=[u[0]],F=1,ne=0,we=u.length;F<we;F++)an(u[F],u[ne])>v&&(E.push(u[F]),ne=F);return ne<we-1&&E.push(u[we-1]),E}var We;function st(u,v,E,F,ne){var we=F?We:Bt(u,E),Qe=Bt(v,E),Et,Ft,rn;for(We=Qe;;){if(!(we|Qe))return[u,v];if(we&Qe)return!1;Et=we||Qe,Ft=xt(u,v,Et,E,ne),rn=Bt(Ft,E),Et===we?(u=Ft,we=rn):(v=Ft,Qe=rn)}}function xt(u,v,E,F,ne){var we=v.x-u.x,Qe=v.y-u.y,Et=F.min,Ft=F.max,rn,Mn;return E&8?(rn=u.x+we*(Ft.y-u.y)/Qe,Mn=Ft.y):E&4?(rn=u.x+we*(Et.y-u.y)/Qe,Mn=Et.y):E&2?(rn=Ft.x,Mn=u.y+Qe*(Ft.x-u.x)/we):E&1&&(rn=Et.x,Mn=u.y+Qe*(Et.x-u.x)/we),new ie(rn,Mn,ne)}function Bt(u,v){var E=0;return u.x<v.min.x?E|=1:u.x>v.max.x&&(E|=2),u.y<v.min.y?E|=4:u.y>v.max.y&&(E|=8),E}function an(u,v){var E=v.x-u.x,F=v.y-u.y;return E*E+F*F}function kn(u,v,E,F){var ne=v.x,we=v.y,Qe=E.x-ne,Et=E.y-we,Ft=Qe*Qe+Et*Et,rn;return Ft>0&&(rn=((u.x-ne)*Qe+(u.y-we)*Et)/Ft,rn>1?(ne=E.x,we=E.y):rn>0&&(ne+=Qe*rn,we+=Et*rn)),Qe=u.x-ne,Et=u.y-we,F?Qe*Qe+Et*Et:new ie(ne,we)}function On(u){return!B(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Zn(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(u)}function or(u,v){var E,F,ne,we,Qe,Et,Ft,rn;if(!u||u.length===0)throw new Error("latlngs not passed");On(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Mn=Le([0,0]),Wn=ce(u),Cr=Wn.getNorthWest().distanceTo(Wn.getSouthWest())*Wn.getNorthEast().distanceTo(Wn.getNorthWest());Cr<1700&&(Mn=vl(u));var Ki=u.length,Oi=[];for(E=0;E<Ki;E++){var ps=Le(u[E]);Oi.push(v.project(Le([ps.lat-Mn.lat,ps.lng-Mn.lng])))}for(E=0,F=0;E<Ki-1;E++)F+=Oi[E].distanceTo(Oi[E+1])/2;if(F===0)rn=Oi[0];else for(E=0,we=0;E<Ki-1;E++)if(Qe=Oi[E],Et=Oi[E+1],ne=Qe.distanceTo(Et),we+=ne,we>F){Ft=(we-F)/ne,rn=[Et.x-Ft*(Et.x-Qe.x),Et.y-Ft*(Et.y-Qe.y)];break}var Si=v.unproject(me(rn));return Le([Si.lat+Mn.lat,Si.lng+Mn.lng])}var Sr={__proto__:null,simplify:ti,pointToSegmentDistance:vo,closestPointOnSegment:va,clipSegment:st,_getEdgeIntersection:xt,_getBitCode:Bt,_sqClosestPointOnSegment:kn,isFlat:On,_flat:Zn,polylineCenter:or},wi={project:function(u){return new ie(u.lng,u.lat)},unproject:function(u){return new pe(u.y,u.x)},bounds:new Oe([-180,-90],[180,90])},Yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var v=Math.PI/180,E=this.R,F=u.lat*v,ne=this.R_MINOR/E,we=Math.sqrt(1-ne*ne),Qe=we*Math.sin(F),Et=Math.tan(Math.PI/4-F/2)/Math.pow((1-Qe)/(1+Qe),we/2);return F=-E*Math.log(Math.max(Et,1e-10)),new ie(u.lng*v*E,F)},unproject:function(u){for(var v=180/Math.PI,E=this.R,F=this.R_MINOR/E,ne=Math.sqrt(1-F*F),we=Math.exp(-u.y/E),Qe=Math.PI/2-2*Math.atan(we),Et=0,Ft=.1,rn;Et<15&&Math.abs(Ft)>1e-7;Et++)rn=ne*Math.sin(Qe),rn=Math.pow((1-rn)/(1+rn),ne/2),Ft=Math.PI/2-2*Math.atan(we*rn)-Qe,Qe+=Ft;return new pe(Qe*v,u.x*v/E)}},ni={__proto__:null,LonLat:wi,Mercator:Yr,SphericalMercator:nt},Ui=i({},Ue,{code:"EPSG:3395",projection:Yr,transformation:function(){var u=.5/(Math.PI*Yr.R);return bt(u,.5,-u,.5)}()}),qi=i({},Ue,{code:"EPSG:4326",projection:wi,transformation:bt(1/180,1,-1/180,.5)}),yo=i({},Pe,{projection:wi,transformation:bt(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,v){var E=v.lng-u.lng,F=v.lat-u.lat;return Math.sqrt(E*E+F*F)},infinite:!0});Pe.Earth=Ue,Pe.EPSG3395=Ui,Pe.EPSG3857=le,Pe.EPSG900913=oe,Pe.EPSG4326=qi,Pe.Simple=yo;var Er=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var v=u.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Dr.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var v=l(u);return this._layers[v]?this:(this._layers[v]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var v=l(u);return this._layers[v]?(this._loaded&&u.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,v){for(var E in this._layers)u.call(v,this._layers[E]);return this},_addLayers:function(u){u=u?B(u)?u:[u]:[];for(var v=0,E=u.length;v<E;v++)this.addLayer(u[v])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var v=l(u);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,v=-1/0,E=this._getZoomSpan();for(var F in this._zoomBoundLayers){var ne=this._zoomBoundLayers[F].options;u=ne.minZoom===void 0?u:Math.min(u,ne.minZoom),v=ne.maxZoom===void 0?v:Math.max(v,ne.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=u===1/0?void 0:u,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ls=Er.extend({initialize:function(u,v){S(this,v),this._layers={};var E,F;if(u)for(E=0,F=u.length;E<F;E++)this.addLayer(u[E])},addLayer:function(u){var v=this.getLayerId(u);return this._layers[v]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var v=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(u){var v=typeof u=="number"?u:this.getLayerId(u);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var v=Array.prototype.slice.call(arguments,1),E,F;for(E in this._layers)F=this._layers[E],F[u]&&F[u].apply(F,v);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,v){for(var E in this._layers)u.call(v,this._layers[E]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),bl=function(u,v){return new Ls(u,v)},Rs=Ls.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Ls.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Ls.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ae;for(var v in this._layers){var E=this._layers[v];u.extend(E.getBounds?E.getBounds():E.getLatLng())}return u}}),bu=function(u,v){return new Rs(u,v)},Qo=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){S(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,v){var E=this._getIconUrl(u);if(!E){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(F,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(u,v){var E=this.options,F=E[v+"Size"];typeof F=="number"&&(F=[F,F]);var ne=me(F),we=me(v==="shadow"&&E.shadowAnchor||E.iconAnchor||ne&&ne.divideBy(2,!0));u.className="leaflet-marker-"+v+" "+(E.className||""),we&&(u.style.marginLeft=-we.x+"px",u.style.marginTop=-we.y+"px"),ne&&(u.style.width=ne.x+"px",u.style.height=ne.y+"px")},_createImg:function(u,v){return v=v||document.createElement("img"),v.src=u,v},_getIconUrl:function(u){return Pt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function zu(u){return new Qo(u)}var Za=Qo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Za.imagePath!="string"&&(Za.imagePath=this._detectIconPath()),(this.options.imagePath||Za.imagePath)+Qo.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var v=function(E,F,ne){var we=F.exec(E);return we&&we[ne]};return u=v(u,/^url\((['"])?(.+)\1\)$/,2),u&&v(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Wr("div","leaflet-default-icon-path",document.body),v=Eo(u,"background-image")||Eo(u,"backgroundImage");if(document.body.removeChild(u),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Ka=ei.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new jo(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),gr(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Gr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var v=this._marker,E=v._map,F=this._marker.options.autoPanSpeed,ne=this._marker.options.autoPanPadding,we=No(v._icon),Qe=E.getPixelBounds(),Et=E.getPixelOrigin(),Ft=Z(Qe.min._subtract(Et).add(ne),Qe.max._subtract(Et).subtract(ne));if(!Ft.contains(we)){var rn=me((Math.max(Ft.max.x,we.x)-Ft.max.x)/(Qe.max.x-Ft.max.x)-(Math.min(Ft.min.x,we.x)-Ft.min.x)/(Qe.min.x-Ft.min.x),(Math.max(Ft.max.y,we.y)-Ft.max.y)/(Qe.max.y-Ft.max.y)-(Math.min(Ft.min.y,we.y)-Ft.min.y)/(Qe.min.y-Ft.min.y)).multiplyBy(F);E.panBy(rn,{animate:!1}),this._draggable._newPos._add(rn),this._draggable._startPos._add(rn),Ti(v._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=$(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,u)))},_onDrag:function(u){var v=this._marker,E=v._shadow,F=No(v._icon),ne=v._map.layerPointToLatLng(F);E&&Ti(E,F),v._latlng=ne,u.latlng=ne,u.oldLatLng=this._oldLatLng,v.fire("move",u).fire("drag",u)},_onDragEnd:function(u){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Yi=Er.extend({options:{icon:new Za,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,v){S(this,v),this._latlng=Le(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var v=this._latlng;return this._latlng=Le(u),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=u.icon.createIcon(this._icon),F=!1;E!==this._icon&&(this._icon&&this._removeIcon(),F=!0,u.title&&(E.title=u.title),E.tagName==="IMG"&&(E.alt=u.alt||"")),gr(E,v),u.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mr(E,"focus",this._panOnFocus,this);var ne=u.icon.createShadow(this._shadow),we=!1;ne!==this._shadow&&(this._removeShadow(),we=!0),ne&&(gr(ne,v),ne.alt=""),this._shadow=ne,u.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),ne&&we&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$r(this._icon,"focus",this._panOnFocus,this),fr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Ti(this._icon,u),this._shadow&&Ti(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(gr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ka)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ka(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&xs(this._icon,u),this._shadow&&xs(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var v=this.options.icon.options,E=v.iconSize?me(v.iconSize):me(0,0),F=v.iconAnchor?me(v.iconAnchor):me(0,0);u.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:E.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ea(u,v){return new Yi(u,v)}var bo=Er.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return S(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qs=bo.extend({options:{fill:!0,radius:10},initialize:function(u,v){S(this,v),this._latlng=Le(u),this._radius=this.options.radius},setLatLng:function(u){var v=this._latlng;return this._latlng=Le(u),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var v=u&&u.radius||this._radius;return bo.prototype.setStyle.call(this,u),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,v=this._radiusY||u,E=this._clickTolerance(),F=[u+E,v+E];this._pxBounds=new Oe(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _l(u,v){return new Qs(u,v)}var Cs=Qs.extend({initialize:function(u,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),S(this,v),this._latlng=Le(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:bo.prototype.setStyle,_project:function(){var u=this._latlng.lng,v=this._latlng.lat,E=this._map,F=E.options.crs;if(F.distance===Ue.distance){var ne=Math.PI/180,we=this._mRadius/Ue.R/ne,Qe=E.project([v+we,u]),Et=E.project([v-we,u]),Ft=Qe.add(Et).divideBy(2),rn=E.unproject(Ft).lat,Mn=Math.acos((Math.cos(we*ne)-Math.sin(v*ne)*Math.sin(rn*ne))/(Math.cos(v*ne)*Math.cos(rn*ne)))/ne;(isNaN(Mn)||Mn===0)&&(Mn=we/Math.cos(Math.PI/180*v)),this._point=Ft.subtract(E.getPixelOrigin()),this._radius=isNaN(Mn)?0:Ft.x-E.project([rn,u-Mn]).x,this._radiusY=Ft.y-Qe.y}else{var Wn=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Wn).x}this._updateBounds()}});function Fs(u,v,E){return new Cs(u,v,E)}var js=bo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,v){S(this,v),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var v=1/0,E=null,F=kn,ne,we,Qe=0,Et=this._parts.length;Qe<Et;Qe++)for(var Ft=this._parts[Qe],rn=1,Mn=Ft.length;rn<Mn;rn++){ne=Ft[rn-1],we=Ft[rn];var Wn=F(u,ne,we,!0);Wn<v&&(v=Wn,E=F(u,ne,we))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return or(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,v){return v=v||this._defaultShape(),u=Le(u),v.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ae,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var v=[],E=On(u),F=0,ne=u.length;F<ne;F++)E?(v[F]=Le(u[F]),this._bounds.extend(v[F])):v[F]=this._convertLatLngs(u[F]);return v},_project:function(){var u=new Oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),v=new ie(u,u);this._rawPxBounds&&(this._pxBounds=new Oe([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(u,v,E){var F=u[0]instanceof pe,ne=u.length,we,Qe;if(F){for(Qe=[],we=0;we<ne;we++)Qe[we]=this._map.latLngToLayerPoint(u[we]),E.extend(Qe[we]);v.push(Qe)}else for(we=0;we<ne;we++)this._projectLatlngs(u[we],v,E)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,F,ne,we,Qe,Et,Ft;for(E=0,ne=0,we=this._rings.length;E<we;E++)for(Ft=this._rings[E],F=0,Qe=Ft.length;F<Qe-1;F++)Et=st(Ft[F],Ft[F+1],u,F,!0),Et&&(v[ne]=v[ne]||[],v[ne].push(Et[0]),(Et[1]!==Ft[F+1]||F===Qe-2)&&(v[ne].push(Et[1]),ne++))}},_simplifyPoints:function(){for(var u=this._parts,v=this.options.smoothFactor,E=0,F=u.length;E<F;E++)u[E]=ti(u[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,v){var E,F,ne,we,Qe,Et,Ft=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(E=0,we=this._parts.length;E<we;E++)for(Et=this._parts[E],F=0,Qe=Et.length,ne=Qe-1;F<Qe;ne=F++)if(!(!v&&F===0)&&vo(u,Et[ne],Et[F])<=Ft)return!0;return!1}});function yc(u,v){return new js(u,v)}js._flat=Zn;var is=js.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var v=js.prototype._convertLatLngs.call(this,u),E=v.length;return E>=2&&v[0]instanceof pe&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(u){js.prototype._setLatLngs.call(this,u),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,v=this.options.weight,E=new ie(v,v);if(u=new Oe(u.min.subtract(E),u.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,ne=this._rings.length,we;F<ne;F++)we=Zl(this._rings[F],u,!0),we.length&&this._parts.push(we)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var v=!1,E,F,ne,we,Qe,Et,Ft,rn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(we=0,Ft=this._parts.length;we<Ft;we++)for(E=this._parts[we],Qe=0,rn=E.length,Et=rn-1;Qe<rn;Et=Qe++)F=E[Qe],ne=E[Et],F.y>u.y!=ne.y>u.y&&u.x<(ne.x-F.x)*(u.y-F.y)/(ne.y-F.y)+F.x&&(v=!v);return v||js.prototype._containsPoint.call(this,u,!0)}});function ya(u,v){return new is(u,v)}var Ss=Rs.extend({initialize:function(u,v){S(this,v),this._layers={},u&&this.addData(u)},addData:function(u){var v=B(u)?u:u.features,E,F,ne;if(v){for(E=0,F=v.length;E<F;E++)ne=v[E],(ne.geometries||ne.geometry||ne.features||ne.coordinates)&&this.addData(ne);return this}var we=this.options;if(we.filter&&!we.filter(u))return this;var Qe=Es(u,we);return Qe?(Qe.feature=ks(u),Qe.defaultOptions=Qe.options,this.resetStyle(Qe),we.onEachFeature&&we.onEachFeature(u,Qe),this.addLayer(Qe)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(v){this._setLayerStyle(v,u)},this)},_setLayerStyle:function(u,v){u.setStyle&&(typeof v=="function"&&(v=v(u.feature)),u.setStyle(v))}});function Es(u,v){var E=u.type==="Feature"?u.geometry:u,F=E?E.coordinates:null,ne=[],we=v&&v.pointToLayer,Qe=v&&v.coordsToLatLng||_a,Et,Ft,rn,Mn;if(!F&&!E)return null;switch(E.type){case"Point":return Et=Qe(F),ba(we,u,Et,v);case"MultiPoint":for(rn=0,Mn=F.length;rn<Mn;rn++)Et=Qe(F[rn]),ne.push(ba(we,u,Et,v));return new Rs(ne);case"LineString":case"MultiLineString":return Ft=Ps(F,E.type==="LineString"?0:1,Qe),new js(Ft,v);case"Polygon":case"MultiPolygon":return Ft=Ps(F,E.type==="Polygon"?1:2,Qe),new is(Ft,v);case"GeometryCollection":for(rn=0,Mn=E.geometries.length;rn<Mn;rn++){var Wn=Es({geometry:E.geometries[rn],type:"Feature",properties:u.properties},v);Wn&&ne.push(Wn)}return new Rs(ne);case"FeatureCollection":for(rn=0,Mn=E.features.length;rn<Mn;rn++){var Cr=Es(E.features[rn],v);Cr&&ne.push(Cr)}return new Rs(ne);default:throw new Error("Invalid GeoJSON object.")}}function ba(u,v,E,F){return u?u(v,E):new Yi(E,F&&F.markersInheritOptions&&F)}function _a(u){return new pe(u[1],u[0],u[2])}function Ps(u,v,E){for(var F=[],ne=0,we=u.length,Qe;ne<we;ne++)Qe=v?Ps(u[ne],v-1,E):(E||_a)(u[ne]),F.push(Qe);return F}function cs(u,v){return u=Le(u),u.alt!==void 0?[y(u.lng,v),y(u.lat,v),y(u.alt,v)]:[y(u.lng,v),y(u.lat,v)]}function ta(u,v,E,F){for(var ne=[],we=0,Qe=u.length;we<Qe;we++)ne.push(v?ta(u[we],On(u[we])?0:v-1,E,F):cs(u[we],F));return!v&&E&&ne.length>0&&ne.push(ne[0].slice()),ne}function _o(u,v){return u.feature?i({},u.feature,{geometry:v}):ks(v)}function ks(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var vt={toGeoJSON:function(u){return _o(this,{type:"Point",coordinates:cs(this.getLatLng(),u)})}};Yi.include(vt),Cs.include(vt),Qs.include(vt),js.include({toGeoJSON:function(u){var v=!On(this._latlngs),E=ta(this._latlngs,v?1:0,!1,u);return _o(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),is.include({toGeoJSON:function(u){var v=!On(this._latlngs),E=v&&!On(this._latlngs[0]),F=ta(this._latlngs,E?2:v?1:0,!0,u);return v||(F=[F]),_o(this,{type:(E?"Multi":"")+"Polygon",coordinates:F})}}),Ls.include({toMultiPoint:function(u){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(u).geometry.coordinates)}),_o(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(u){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(u);var E=v==="GeometryCollection",F=[];return this.eachLayer(function(ne){if(ne.toGeoJSON){var we=ne.toGeoJSON(u);if(E)F.push(we.geometry);else{var Qe=ks(we);Qe.type==="FeatureCollection"?F.push.apply(F,Qe.features):F.push(Qe)}}}),E?_o(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function Ht(u,v){return new Ss(u,v)}var Mt=Ht,En=Er.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,v,E){this._url=u,this._bounds=ce(v),S(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(gr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&da(this._image),this},bringToBack:function(){return this._map&&Io(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=ce(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",v=this._image=u?this._url:Wr("img");if(gr(v,"leaflet-image-layer"),this._zoomAnimated&&gr(v,"leaflet-zoom-animated"),this.options.className&&gr(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(u){var v=this._map.getZoomScale(u.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;pa(this._image,E,v)},_reset:function(){var u=this._image,v=new Oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();Ti(u,v.min),u.style.width=E.x+"px",u.style.height=E.y+"px"},_updateOpacity:function(){xs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Un=function(u,v,E){return new En(u,v,E)},hr=En.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",v=this._image=u?this._url:Wr("video");if(gr(v,"leaflet-image-layer"),this._zoomAnimated&&gr(v,"leaflet-zoom-animated"),this.options.className&&gr(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onloadeddata=o(this.fire,this,"load"),u){for(var E=v.getElementsByTagName("source"),F=[],ne=0;ne<E.length;ne++)F.push(E[ne].src);this._url=E.length>0?F:[v.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var we=0;we<this._url.length;we++){var Qe=Wr("source");Qe.src=this._url[we],v.appendChild(Qe)}}});function Li(u,v,E){return new hr(u,v,E)}var ri=En.extend({_initImage:function(){var u=this._image=this._url;gr(u,"leaflet-image-layer"),this._zoomAnimated&&gr(u,"leaflet-zoom-animated"),this.options.className&&gr(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function Kl(u,v,E){return new ri(u,v,E)}var zs=Er.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,v){u&&(u instanceof pe||B(u))?(this._latlng=Le(u),S(this,v)):(S(this,u),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&xs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&xs(this._container,1),this.bringToFront(),this.options.interactive&&(gr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(xs(this._container,0),this._removeTimeout=setTimeout(o(fr,void 0,this._container),200)):fr(this._container),this.options.interactive&&(Gr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=Le(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&da(this._container),this},bringToBack:function(){return this._map&&Io(this._container),this},_prepareOpen:function(u){var v=this._source;if(!v._map)return!1;if(v instanceof Rs){v=null;var E=this._source._layers;for(var F in E)if(E[F]._map){v=E[F];break}if(!v)return!1;this._source=v}if(!u)if(v.getCenter)u=v.getCenter();else if(v.getLatLng)u=v.getLatLng();else if(v.getBounds)u=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")u.innerHTML=v;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),v=me(this.options.offset),E=this._getAnchor();this._zoomAnimated?Ti(this._container,u.add(E)):v=v.add(u).add(E);var F=this._containerBottom=-v.y,ne=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=F+"px",this._container.style.left=ne+"px"}},_getAnchor:function(){return[0,0]}});Dr.include({_initOverlay:function(u,v,E,F){var ne=v;return ne instanceof u||(ne=new u(F).setContent(v)),E&&ne.setLatLng(E),ne}}),Er.include({_initOverlay:function(u,v,E,F){var ne=E;return ne instanceof u?(S(ne,F),ne._source=this):(ne=v&&!F?v:new u(F,this),ne.setContent(E)),ne}});var Ci=zs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,zs.prototype.openOn.call(this,u)},onAdd:function(u){zs.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bo||this._source.on("preclick",qa))},onRemove:function(u){zs.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bo||this._source.off("preclick",qa))},getEvents:function(){var u=zs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",v=this._container=Wr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=Wr("div",u+"-content-wrapper",v);if(this._contentNode=Wr("div",u+"-content",E),Vl(v),ju(this._contentNode),mr(v,"contextmenu",qa),this._tipContainer=Wr("div",u+"-tip-container",v),this._tip=Wr("div",u+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=Wr("a",u+"-close-button",v);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',mr(F,"click",function(ne){dr(ne),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,v=u.style;v.width="",v.whiteSpace="nowrap";var E=u.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var F=u.offsetHeight,ne=this.options.maxHeight,we="leaflet-popup-scrolled";ne&&F>ne?(v.height=ne+"px",gr(u,we)):Gr(u,we),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),E=this._getAnchor();Ti(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,v=parseInt(Eo(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,F=this._containerWidth,ne=new ie(this._containerLeft,-E-this._containerBottom);ne._add(No(this._container));var we=u.layerPointToContainerPoint(ne),Qe=me(this.options.autoPanPadding),Et=me(this.options.autoPanPaddingTopLeft||Qe),Ft=me(this.options.autoPanPaddingBottomRight||Qe),rn=u.getSize(),Mn=0,Wn=0;we.x+F+Ft.x>rn.x&&(Mn=we.x+F-rn.x+Ft.x),we.x-Mn-Et.x<0&&(Mn=we.x-Et.x),we.y+E+Ft.y>rn.y&&(Wn=we.y+E-rn.y+Ft.y),we.y-Wn-Et.y<0&&(Wn=we.y-Et.y),(Mn||Wn)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Mn,Wn]))}},_getAnchor:function(){return me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),na=function(u,v){return new Ci(u,v)};Dr.mergeOptions({closePopupOnClick:!0}),Dr.include({openPopup:function(u,v,E){return this._initOverlay(Ci,u,v,E).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Er.include({bindPopup:function(u,v){return this._popup=this._initOverlay(Ci,this._popup,u,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Rs||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Mr(u);var v=u.layer||u.target;if(this._popup._source===v&&!(v instanceof bo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=v,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var wa=zs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){zs.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){zs.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=zs.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",v=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Wr("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var v,E,F=this._map,ne=this._container,we=F.latLngToContainerPoint(F.getCenter()),Qe=F.layerPointToContainerPoint(u),Et=this.options.direction,Ft=ne.offsetWidth,rn=ne.offsetHeight,Mn=me(this.options.offset),Wn=this._getAnchor();Et==="top"?(v=Ft/2,E=rn):Et==="bottom"?(v=Ft/2,E=0):Et==="center"?(v=Ft/2,E=rn/2):Et==="right"?(v=0,E=rn/2):Et==="left"?(v=Ft,E=rn/2):Qe.x<we.x?(Et="right",v=0,E=rn/2):(Et="left",v=Ft+(Mn.x+Wn.x)*2,E=rn/2),u=u.subtract(me(v,E,!0)).add(Mn).add(Wn),Gr(ne,"leaflet-tooltip-right"),Gr(ne,"leaflet-tooltip-left"),Gr(ne,"leaflet-tooltip-top"),Gr(ne,"leaflet-tooltip-bottom"),gr(ne,"leaflet-tooltip-"+Et),Ti(ne,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&xs(this._container,u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(v)},_getAnchor:function(){return me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ra=function(u,v){return new wa(u,v)};Dr.include({openTooltip:function(u,v,E){return this._initOverlay(wa,u,v,E).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Er.include({bindTooltip:function(u,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wa,this._tooltip,u,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var v=u?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Rs||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&(mr(v,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),mr(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var v=u.latlng,E,F;this._tooltip.options.sticky&&u.originalEvent&&(E=this._map.mouseEventToContainerPoint(u.originalEvent),F=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(v)}});var ia=Qo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var v=u&&u.tagName==="DIV"?u:document.createElement("div"),E=this.options;if(E.html instanceof Element?($a(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var F=me(E.bgPos);v.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function sa(u){return new ia(u)}Qo.Default=Za;var Ir=Er.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){S(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),fr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(da(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Io(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof ie?u:new ie(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var v=this.getPane().children,E=-u(-1/0,1/0),F=0,ne=v.length,we;F<ne;F++)we=v[F].style.zIndex,v[F]!==this._container&&we&&(E=u(E,+we));isFinite(E)&&(this.options.zIndex=E+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pt.ielt9){xs(this._container,this.options.opacity);var u=+new Date,v=!1,E=!1;for(var F in this._tiles){var ne=this._tiles[F];if(!(!ne.current||!ne.loaded)){var we=Math.min(1,(u-ne.loaded)/200);xs(ne.el,we),we<1?v=!0:(ne.active?E=!0:this._onOpaqueTile(ne),ne.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(W(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Wr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,v=this.options.maxZoom;if(u!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===u?(this._levels[E].el.style.zIndex=v-Math.abs(u-E),this._onUpdateLevel(E)):(fr(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var F=this._levels[u],ne=this._map;return F||(F=this._levels[u]={},F.el=Wr("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=v,F.origin=ne.project(ne.unproject(ne.getPixelOrigin()),u).round(),F.zoom=u,this._setZoomTransform(F,ne.getCenter(),ne.getZoom()),p(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)v=this._tiles[u],v.retain=v.current;for(u in this._tiles)if(v=this._tiles[u],v.current&&!v.active){var F=v.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var v in this._tiles)this._tiles[v].coords.z===u&&this._removeTile(v)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)fr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,v,E,F){var ne=Math.floor(u/2),we=Math.floor(v/2),Qe=E-1,Et=new ie(+ne,+we);Et.z=+Qe;var Ft=this._tileCoordsToKey(Et),rn=this._tiles[Ft];return rn&&rn.active?(rn.retain=!0,!0):(rn&&rn.loaded&&(rn.retain=!0),Qe>F?this._retainParent(ne,we,Qe,F):!1)},_retainChildren:function(u,v,E,F){for(var ne=2*u;ne<2*u+2;ne++)for(var we=2*v;we<2*v+2;we++){var Qe=new ie(ne,we);Qe.z=E+1;var Et=this._tileCoordsToKey(Qe),Ft=this._tiles[Et];if(Ft&&Ft.active){Ft.retain=!0;continue}else Ft&&Ft.loaded&&(Ft.retain=!0);E+1<F&&this._retainChildren(ne,we,E+1,F)}},_resetView:function(u){var v=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var v=this.options;return v.minNativeZoom!==void 0&&u<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<u?v.maxNativeZoom:u},_setView:function(u,v,E,F){var ne=Math.round(v);this.options.maxZoom!==void 0&&ne>this.options.maxZoom||this.options.minZoom!==void 0&&ne<this.options.minZoom?ne=void 0:ne=this._clampZoom(ne);var we=this.options.updateWhenZooming&&ne!==this._tileZoom;(!F||we)&&(this._tileZoom=ne,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ne!==void 0&&this._update(u),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(u,v)},_setZoomTransforms:function(u,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],u,v)},_setZoomTransform:function(u,v,E){var F=this._map.getZoomScale(E,u.zoom),ne=u.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(v,E)).round();Pt.any3d?pa(u.el,ne,F):Ti(u.el,ne)},_resetGrid:function(){var u=this._map,v=u.options.crs,E=this._tileSize=this.getTileSize(),F=this._tileZoom,ne=this._map.getPixelWorldBounds(this._tileZoom);ne&&(this._globalTileRange=this._pxBoundsToTileRange(ne)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,v.wrapLng[0]],F).x/E.x),Math.ceil(u.project([0,v.wrapLng[1]],F).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([v.wrapLat[0],0],F).y/E.x),Math.ceil(u.project([v.wrapLat[1],0],F).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),F=v.getZoomScale(E,this._tileZoom),ne=v.project(u,this._tileZoom).floor(),we=v.getSize().divideBy(F*2);return new Oe(ne.subtract(we),ne.add(we))},_update:function(u){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(u===void 0&&(u=v.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(u),ne=this._pxBoundsToTileRange(F),we=ne.getCenter(),Qe=[],Et=this.options.keepBuffer,Ft=new Oe(ne.getBottomLeft().subtract([Et,-Et]),ne.getTopRight().add([Et,-Et]));if(!(isFinite(ne.min.x)&&isFinite(ne.min.y)&&isFinite(ne.max.x)&&isFinite(ne.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var rn in this._tiles){var Mn=this._tiles[rn].coords;(Mn.z!==this._tileZoom||!Ft.contains(new ie(Mn.x,Mn.y)))&&(this._tiles[rn].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(u,E);return}for(var Wn=ne.min.y;Wn<=ne.max.y;Wn++)for(var Cr=ne.min.x;Cr<=ne.max.x;Cr++){var Ki=new ie(Cr,Wn);if(Ki.z=this._tileZoom,!!this._isValidTile(Ki)){var Oi=this._tiles[this._tileCoordsToKey(Ki)];Oi?Oi.current=!0:Qe.push(Ki)}}if(Qe.sort(function(Si,no){return Si.distanceTo(we)-no.distanceTo(we)}),Qe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ps=document.createDocumentFragment();for(Cr=0;Cr<Qe.length;Cr++)this._addTile(Qe[Cr],ps);this._level.el.appendChild(ps)}}}},_isValidTile:function(u){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(u.x<E.min.x||u.x>E.max.x)||!v.wrapLat&&(u.y<E.min.y||u.y>E.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(u);return ce(this.options.bounds).overlaps(F)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var v=this._map,E=this.getTileSize(),F=u.scaleBy(E),ne=F.add(E),we=v.unproject(F,u.z),Qe=v.unproject(ne,u.z);return[we,Qe]},_tileCoordsToBounds:function(u){var v=this._tileCoordsToNwSe(u),E=new ae(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var v=u.split(":"),E=new ie(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(u){var v=this._tiles[u];v&&(fr(v.el),delete this._tiles[u],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){gr(u,"leaflet-tile");var v=this.getTileSize();u.style.width=v.x+"px",u.style.height=v.y+"px",u.onselectstart=p,u.onmousemove=p,Pt.ielt9&&this.options.opacity<1&&xs(u,this.options.opacity)},_addTile:function(u,v){var E=this._getTilePos(u),F=this._tileCoordsToKey(u),ne=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ne),this.createTile.length<2&&$(o(this._tileReady,this,u,null,ne)),Ti(ne,E),this._tiles[F]={el:ne,coords:u,current:!0},v.appendChild(ne),this.fire("tileloadstart",{tile:ne,coords:u})},_tileReady:function(u,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:u});var F=this._tileCoordsToKey(u);E=this._tiles[F],E&&(E.loaded=+new Date,this._map._fadeAnimated?(xs(E.el,0),W(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(gr(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pt.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var v=new ie(this._wrapX?f(u.x,this._wrapX):u.x,this._wrapY?f(u.y,this._wrapY):u.y);return v.z=u.z,v},_pxBoundsToTileRange:function(u){var v=this.getTileSize();return new Oe(u.min.unscaleBy(v).floor(),u.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Uo(u){return new Ir(u)}var hs=Ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,v){this._url=u,v=S(this,v),v.detectRetina&&Pt.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,v){return this._url===u&&v===void 0&&(v=!0),this._url=u,v||this.redraw(),this},createTile:function(u,v){var E=document.createElement("img");return mr(E,"load",o(this._tileOnLoad,this,v,E)),mr(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(u),E},getTileUrl:function(u){var v={r:Pt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-u.y;this.options.tms&&(v.y=E),v["-y"]=E}return D(this._url,i(v,this.options))},_tileOnLoad:function(u,v){Pt.ielt9?setTimeout(o(u,this,null,v),0):u(null,v)},_tileOnError:function(u,v,E){var F=this.options.errorTileUrl;F&&v.getAttribute("src")!==F&&(v.src=F),u(E,v)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,F=this.options.zoomOffset;return E&&(u=v-u),u+F},_getSubdomain:function(u){var v=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var u,v;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(v=this._tiles[u].el,v.onload=p,v.onerror=p,!v.complete)){v.src=H;var E=this._tiles[u].coords;fr(v),delete this._tiles[u],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(u){var v=this._tiles[u];if(v)return v.el.setAttribute("src",H),Ir.prototype._removeTile.call(this,u)},_tileReady:function(u,v,E){if(!(!this._map||E&&E.getAttribute("src")===H))return Ir.prototype._tileReady.call(this,u,v,E)}});function ii(u,v){return new hs(u,v)}var li=hs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,v){this._url=u;var E=i({},this.defaultWmsParams);for(var F in v)F in this.options||(E[F]=v[F]);v=S(this,v);var ne=v.detectRetina&&Pt.retina?2:1,we=this.getTileSize();E.width=we.x*ne,E.height=we.y*ne,this.wmsParams=E},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,hs.prototype.onAdd.call(this,u)},getTileUrl:function(u){var v=this._tileCoordsToNwSe(u),E=this._crs,F=Z(E.project(v[0]),E.project(v[1])),ne=F.min,we=F.max,Qe=(this._wmsVersion>=1.3&&this._crs===qi?[ne.y,ne.x,we.y,we.x]:[ne.x,ne.y,we.x,we.y]).join(","),Et=hs.prototype.getTileUrl.call(this,u);return Et+T(this.wmsParams,Et,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Qe},setParams:function(u,v){return i(this.wmsParams,u),v||this.redraw(),this}});function $i(u,v){return new li(u,v)}hs.WMS=li,ii.wms=$i;var gi=Er.extend({options:{padding:.1},initialize:function(u){S(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),gr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,v){var E=this._map.getZoomScale(v,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),ne=this._map.project(this._center,v),we=F.multiplyBy(-E).add(ne).subtract(this._map._getNewPixelOrigin(u,v));Pt.any3d?pa(this._container,we,E):Ti(this._container,we)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-u)).round();this._bounds=new Oe(E,E.add(v.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wo=gi.extend({options:{tolerance:0},getEvents:function(){var u=gi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");mr(u,"mousemove",this._onMouseMove,this),mr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,fr(this._container),$r(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var v in this._layers)u=this._layers[v],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var u=this._bounds,v=this._container,E=u.getSize(),F=Pt.retina?2:1;Ti(v,u.min),v.width=F*E.x,v.height=F*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",Pt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var v=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var v=u._order,E=v.next,F=v.prev;E?E.prev=F:this._drawLast=F,F?F.next=E:this._drawFirst=E,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var v=u.options.dashArray.split(/[, ]+/),E=[],F,ne;for(ne=0;ne<v.length;ne++){if(F=Number(v[ne]),isNaN(F))return;E.push(F)}u.options._dashArray=E}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var v=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Oe,this._redrawBounds.extend(u._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(u._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var v=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)u=F.layer,(!v||u._pxBounds&&u._pxBounds.intersects(v))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,v){if(this._drawing){var E,F,ne,we,Qe=u._parts,Et=Qe.length,Ft=this._ctx;if(Et){for(Ft.beginPath(),E=0;E<Et;E++){for(F=0,ne=Qe[E].length;F<ne;F++)we=Qe[E][F],Ft[F?"lineTo":"moveTo"](we.x,we.y);v&&Ft.closePath()}this._fillStroke(Ft,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var v=u._point,E=this._ctx,F=Math.max(Math.round(u._radius),1),ne=(Math.max(Math.round(u._radiusY),1)||F)/F;ne!==1&&(E.save(),E.scale(1,ne)),E.beginPath(),E.arc(v.x,v.y/ne,F,0,Math.PI*2,!1),ne!==1&&E.restore(),this._fillStroke(E,u)}},_fillStroke:function(u,v){var E=v.options;E.fill&&(u.globalAlpha=E.fillOpacity,u.fillStyle=E.fillColor||E.color,u.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(u.setLineDash&&u.setLineDash(v.options&&v.options._dashArray||[]),u.globalAlpha=E.opacity,u.lineWidth=E.weight,u.strokeStyle=E.color,u.lineCap=E.lineCap,u.lineJoin=E.lineJoin,u.stroke())},_onClick:function(u){for(var v=this._map.mouseEventToLayerPoint(u),E,F,ne=this._drawFirst;ne;ne=ne.next)E=ne.layer,E.options.interactive&&E._containsPoint(v)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(E))&&(F=E);this._fireEvent(F?[F]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,v)}},_handleMouseOut:function(u){var v=this._hoveredLayer;v&&(Gr(this._container,"leaflet-interactive"),this._fireEvent([v],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,v){if(!this._mouseHoverThrottled){for(var E,F,ne=this._drawFirst;ne;ne=ne.next)E=ne.layer,E.options.interactive&&E._containsPoint(v)&&(F=E);F!==this._hoveredLayer&&(this._handleMouseOut(u),F&&(gr(this._container,"leaflet-interactive"),this._fireEvent([F],u,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,v,E){this._map._fireDOMEvent(v,E||v.type,u)},_bringToFront:function(u){var v=u._order;if(v){var E=v.next,F=v.prev;if(E)E.prev=F;else return;F?F.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(u)}},_bringToBack:function(u){var v=u._order;if(v){var E=v.next,F=v.prev;if(F)F.next=E;else return;E?E.prev=F:F&&(this._drawLast=F),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(u)}}});function eo(u){return Pt.canvas?new wo(u):null}var ko=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uu={_initContainer:function(){this._container=Wr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var v=u._container=ko("shape");gr(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",u._path=ko("path"),v.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var v=u._container;this._container.appendChild(v),u.options.interactive&&u.addInteractiveTarget(v)},_removePath:function(u){var v=u._container;fr(v),u.removeInteractiveTarget(v),delete this._layers[l(u)]},_updateStyle:function(u){var v=u._stroke,E=u._fill,F=u.options,ne=u._container;ne.stroked=!!F.stroke,ne.filled=!!F.fill,F.stroke?(v||(v=u._stroke=ko("stroke")),ne.appendChild(v),v.weight=F.weight+"px",v.color=F.color,v.opacity=F.opacity,F.dashArray?v.dashStyle=B(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=F.lineCap.replace("butt","flat"),v.joinstyle=F.lineJoin):v&&(ne.removeChild(v),u._stroke=null),F.fill?(E||(E=u._fill=ko("fill")),ne.appendChild(E),E.color=F.fillColor||F.color,E.opacity=F.fillOpacity):E&&(ne.removeChild(E),u._fill=null)},_updateCircle:function(u){var v=u._point.round(),E=Math.round(u._radius),F=Math.round(u._radiusY||E);this._setPath(u,u._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+F+" 0,"+65535*360)},_setPath:function(u,v){u._path.v=v},_bringToFront:function(u){da(u._container)},_bringToBack:function(u){Io(u._container)}},oa=Pt.vml?ko:ue,Zi=gi.extend({_initContainer:function(){this._container=oa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=oa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fr(this._container),$r(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var u=this._bounds,v=u.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),Ti(E,u.min),E.setAttribute("viewBox",[u.min.x,u.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(u){var v=u._path=oa("path");u.options.className&&gr(v,u.options.className),u.options.interactive&&gr(v,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){fr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var v=u._path,E=u.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(u,v){this._setPath(u,te(u._parts,v))},_updateCircle:function(u){var v=u._point,E=Math.max(Math.round(u._radius),1),F=Math.max(Math.round(u._radiusY),1)||E,ne="a"+E+","+F+" 0 1,0 ",we=u._empty()?"M0 0":"M"+(v.x-E)+","+v.y+ne+E*2+",0 "+ne+-E*2+",0 ";this._setPath(u,we)},_setPath:function(u,v){u._path.setAttribute("d",v)},_bringToFront:function(u){da(u._path)},_bringToBack:function(u){Io(u._path)}});Pt.vml&&Zi.include(Uu);function pi(u){return Pt.svg||Pt.vml?new Zi(u):null}Dr.include({getRenderer:function(u){var v=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var v=this._paneRenderers[u];return v===void 0&&(v=this._createRenderer({pane:u}),this._paneRenderers[u]=v),v},_createRenderer:function(u){return this.options.preferCanvas&&eo(u)||pi(u)}});var Ms=is.extend({initialize:function(u,v){is.prototype.initialize.call(this,this._boundsToLatLngs(u),v)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=ce(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function to(u,v){return new Ms(u,v)}Zi.create=oa,Zi.pointsToPath=te,Ss.geometryToLayer=Es,Ss.coordsToLatLng=_a,Ss.coordsToLatLngs=Ps,Ss.latLngToCoords=cs,Ss.latLngsToCoords=ta,Ss.getFeature=_o,Ss.asFeature=ks,Dr.mergeOptions({boxZoom:!0});var ir=ei.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){mr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$r(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ha(),Ru(),this._startPoint=this._map.mouseEventToContainerPoint(u),mr(document,{contextmenu:Mr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Wr("div","leaflet-zoom-box",this._container),gr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var v=new Oe(this._point,this._startPoint),E=v.getSize();Ti(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(fr(this._box),Gr(this._container,"leaflet-crosshair")),mo(),Bo(),$r(document,{contextmenu:Mr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dr.addInitHook("addHandler","boxZoom",ir),Dr.mergeOptions({doubleClickZoom:!0});var xa=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var v=this._map,E=v.getZoom(),F=v.options.zoomDelta,ne=u.originalEvent.shiftKey?E-F:E+F;v.options.doubleClickZoom==="center"?v.setZoom(ne):v.setZoomAround(u.containerPoint,ne)}});Dr.addInitHook("addHandler","doubleClickZoom",xa),Dr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var La=ei.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new jo(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}gr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Gr(this._map._container,"leaflet-grab"),Gr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=ce(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,v){return u-(u-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;u.x<v.min.x&&(u.x=this._viscousLimit(u.x,v.min.x)),u.y<v.min.y&&(u.y=this._viscousLimit(u.y,v.min.y)),u.x>v.max.x&&(u.x=this._viscousLimit(u.x,v.max.x)),u.y>v.max.y&&(u.y=this._viscousLimit(u.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,v=Math.round(u/2),E=this._initialWorldOffset,F=this._draggable._newPos.x,ne=(F-v+E)%u+v-E,we=(F+v+E)%u-v-E,Qe=Math.abs(ne+E)<Math.abs(we+E)?ne:we;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Qe},_onDragEnd:function(u){var v=this._map,E=v.options,F=!E.inertia||u.noInertia||this._times.length<2;if(v.fire("dragend",u),F)v.fire("moveend");else{this._prunePositions(+new Date);var ne=this._lastPos.subtract(this._positions[0]),we=(this._lastTime-this._times[0])/1e3,Qe=E.easeLinearity,Et=ne.multiplyBy(Qe/we),Ft=Et.distanceTo([0,0]),rn=Math.min(E.inertiaMaxSpeed,Ft),Mn=Et.multiplyBy(rn/Ft),Wn=rn/(E.inertiaDeceleration*Qe),Cr=Mn.multiplyBy(-Wn/2).round();!Cr.x&&!Cr.y?v.fire("moveend"):(Cr=v._limitOffset(Cr,v.options.maxBounds),$(function(){v.panBy(Cr,{duration:Wn,easeLinearity:Qe,noMoveStart:!0,animate:!0})}))}}});Dr.addInitHook("addHandler","dragging",La),Dr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $o=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),mr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$r(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,v=document.documentElement,E=u.scrollTop||v.scrollTop,F=u.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(F,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var v=this._panKeys={},E=this.keyCodes,F,ne;for(F=0,ne=E.left.length;F<ne;F++)v[E.left[F]]=[-1*u,0];for(F=0,ne=E.right.length;F<ne;F++)v[E.right[F]]=[u,0];for(F=0,ne=E.down.length;F<ne;F++)v[E.down[F]]=[0,u];for(F=0,ne=E.up.length;F<ne;F++)v[E.up[F]]=[0,-1*u]},_setZoomDelta:function(u){var v=this._zoomKeys={},E=this.keyCodes,F,ne;for(F=0,ne=E.zoomIn.length;F<ne;F++)v[E.zoomIn[F]]=u;for(F=0,ne=E.zoomOut.length;F<ne;F++)v[E.zoomOut[F]]=-u},_addHooks:function(){mr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$r(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var v=u.keyCode,E=this._map,F;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(F=this._panKeys[v],u.shiftKey&&(F=me(F).multiplyBy(3)),E.options.maxBounds&&(F=E._limitOffset(me(F),E.options.maxBounds)),E.options.worldCopyJump){var ne=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(F)));E.panTo(ne)}else E.panBy(F)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;Mr(u)}}});Dr.addInitHook("addHandler","keyboard",$o),Dr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Us=ei.extend({addHooks:function(){mr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$r(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var v=mu(u),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var F=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),F),Mr(u)},_performZoom:function(){var u=this._map,v=u.getZoom(),E=this._map.options.zoomSnap||0;u._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ne=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,we=E?Math.ceil(ne/E)*E:ne,Qe=u._limitZoom(v+(this._delta>0?we:-we))-v;this._delta=0,this._startTime=null,Qe&&(u.options.scrollWheelZoom==="center"?u.setZoom(v+Qe):u.setZoomAround(this._lastMousePos,v+Qe))}});Dr.addInitHook("addHandler","scrollWheelZoom",Us);var Gc=600;Dr.mergeOptions({tapHold:Pt.touchNative&&Pt.safari&&Pt.mobile,tapTolerance:15});var fs=ei.extend({addHooks:function(){mr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$r(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var v=u.touches[0];this._startPos=this._newPos=new ie(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(mr(document,"touchend",dr),mr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),Gc),mr(document,"touchend touchcancel contextmenu",this._cancel,this),mr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){$r(document,"touchend",dr),$r(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),$r(document,"touchend touchcancel contextmenu",this._cancel,this),$r(document,"touchmove",this._onMove,this)},_onMove:function(u){var v=u.touches[0];this._newPos=new ie(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,v){var E=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});Dr.addInitHook("addHandler","tapHold",fs),Dr.mergeOptions({touchZoom:Pt.touch,bounceAtZoomLimits:!0});var ds=ei.extend({addHooks:function(){gr(this._map._container,"leaflet-touch-zoom"),mr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Gr(this._map._container,"leaflet-touch-zoom"),$r(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var v=this._map;if(!(!u.touches||u.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(u.touches[0]),F=v.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(F)._divideBy(2))),this._startDist=E.distanceTo(F),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),mr(document,"touchmove",this._onTouchMove,this),mr(document,"touchend touchcancel",this._onTouchEnd,this),dr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(u.touches[0]),F=v.mouseEventToContainerPoint(u.touches[1]),ne=E.distanceTo(F)/this._startDist;if(this._zoom=v.getScaleZoom(ne,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&ne<1||this._zoom>v.getMaxZoom()&&ne>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,ne===1)return}else{var we=E._add(F)._divideBy(2)._subtract(this._centerPoint);if(ne===1&&we.x===0&&we.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(we),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var Qe=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(Qe,this,!0),dr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),$r(document,"touchmove",this._onTouchMove,this),$r(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dr.addInitHook("addHandler","touchZoom",ds),Dr.BoxZoom=ir,Dr.DoubleClickZoom=xa,Dr.Drag=La,Dr.Keyboard=$o,Dr.ScrollWheelZoom=Us,Dr.TapHold=fs,Dr.TouchZoom=ds,n.Bounds=Oe,n.Browser=Pt,n.CRS=Pe,n.Canvas=wo,n.Circle=Cs,n.CircleMarker=Qs,n.Class=X,n.Control=Jn,n.DivIcon=ia,n.DivOverlay=zs,n.DomEvent=Wl,n.DomUtil=cr,n.Draggable=jo,n.Evented=ee,n.FeatureGroup=Rs,n.GeoJSON=Ss,n.GridLayer=Ir,n.Handler=ei,n.Icon=Qo,n.ImageOverlay=En,n.LatLng=pe,n.LatLngBounds=ae,n.Layer=Er,n.LayerGroup=Ls,n.LineUtil=Sr,n.Map=Dr,n.Marker=Yi,n.Mixin=vc,n.Path=bo,n.Point=ie,n.PolyUtil=yl,n.Polygon=is,n.Polyline=js,n.Popup=Ci,n.PosAnimation=vu,n.Projection=ni,n.Rectangle=Ms,n.Renderer=gi,n.SVG=Zi,n.SVGOverlay=ri,n.TileLayer=hs,n.Tooltip=wa,n.Transformation=pt,n.Util=se,n.VideoOverlay=hr,n.bind=o,n.bounds=Z,n.canvas=eo,n.circle=Fs,n.circleMarker=_l,n.control=ji,n.divIcon=sa,n.extend=i,n.featureGroup=bu,n.geoJSON=Ht,n.geoJson=Mt,n.gridLayer=Uo,n.icon=zu,n.imageOverlay=Un,n.latLng=Le,n.latLngBounds=ce,n.layerGroup=bl,n.map=Fi,n.marker=ea,n.point=me,n.polygon=ya,n.polyline=yc,n.popup=na,n.rectangle=to,n.setOptions=S,n.stamp=l,n.svg=pi,n.svgOverlay=Kl,n.tileLayer=ii,n.tooltip=ra,n.transformation=bt,n.version=r,n.videoOverlay=Li;var Vo=window.L;n.noConflict=function(){return window.L=Vo,this},window.L=n})})(D2,D2.exports);var dn=D2.exports;const Qi=uy(dn);var _4={exports:{}};(function(t,e){(function(n,r){r(e)})(Zo,function(n){var r=typeof window<"u"?window:typeof Zo<"u"?Zo:typeof self<"u"?self:{};function i(c,f){return c(f={exports:{}},f.exports),f.exports}var s=i(function(c,f){(function(p){const y={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(U){return U=m(U).toLowerCase(),function(){var R="application/font-woff",ee="image/jpeg";return{woff:R,woff2:R,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ee,jpeg:ee,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,R){return`data:${R};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(ee){U.toBlob(ee)}):(R=U,new Promise(function(ee){const ie=Q(R.toDataURL().split(",")[1]);var fe=ie.length;const me=new Uint8Array(fe);for(let Oe=0;Oe<fe;Oe++)me[Oe]=ie.charCodeAt(Oe);ee(new Blob([me],{type:"image/png"}))}));var R},resolveUrl:function(U,R){const ee=document.implementation.createHTMLDocument(),ie=ee.createElement("base"),fe=(ee.head.appendChild(ie),ee.createElement("a"));return ee.body.appendChild(fe),ie.href=R,fe.href=U,fe.href},getAndEncode:function(U){let R=H.impl.urlCache.find(function(ee){return ee.url===U});return R||(R={url:U,promise:null},H.impl.urlCache.push(R)),R.promise===null&&(H.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),R.promise=new Promise(function(ee){const ie=H.impl.options.httpTimeout,fe=new XMLHttpRequest;let me;var Oe;function Z(ae){console.error(ae),ee("")}fe.onreadystatechange=function(){if(fe.readyState===4)if(fe.status!==200)me?ee(me):Z(`cannot fetch resource: ${U}, status: `+fe.status);else{const ae=new FileReader;ae.onloadend=function(){var ce=ae.result.split(/,/)[1];ee(ce)},ae.readAsDataURL(fe.response)}},fe.ontimeout=function(){me?ee(me):Z(`timeout of ${ie}ms occured while fetching resource: `+U)},fe.responseType="blob",fe.timeout=ie,H.impl.options.useCredentials&&(fe.withCredentials=!0),fe.open("GET",U,!0),fe.send(),H.impl.options.imagePlaceholder&&(Oe=H.impl.options.imagePlaceholder.split(/,/))&&Oe[1]&&(me=Oe[1])})),R.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function(R){return new Promise(function(ee){setTimeout(function(){ee(R)},U)})}},asArray:function(U){const R=[],ee=U.length;for(let ie=0;ie<ee;ie++)R.push(U[ie]);return R},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function(R,ee){const ie=new Image;H.impl.options.useCredentials&&(ie.crossOrigin="use-credentials"),ie.onload=function(){R(ie)},ie.onerror=ee,ie.src=U}):Promise.resolve()},width:function(U){var R=C(U,"border-left-width"),ee=C(U,"border-right-width");return U.scrollWidth+R+ee},height:function(U){var R=C(U,"border-top-width"),ee=C(U,"border-bottom-width");return U.scrollHeight+R+ee}};function m(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function C(U,R){const ee=J(U).getPropertyValue(R);return parseFloat(ee.replace("px",""))}const S=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(fe,me,Oe){return R(fe)?Promise.resolve(fe).then(ee).then(function(Z){let ae=Promise.resolve(fe);return Z.forEach(function(ce){ae=ae.then(function(pe){return ie(pe,ce,me,Oe)})}),ae}):Promise.resolve(fe)},shouldProcess:R,impl:{readUrls:ee,inline:ie}};function R(fe){return fe.search(U)!==-1}function ee(fe){const me=[];for(var Oe;(Oe=U.exec(fe))!==null;)me.push(Oe[1]);return me.filter(function(Z){return!y.isDataUrl(Z)})}function ie(fe,me,Oe,Z){return Promise.resolve(me).then(function(ae){return Oe?y.resolveUrl(ae,Oe):ae}).then(Z||y.getAndEncode).then(function(ae){return y.dataAsUrl(ae,y.mimeType(me))}).then(function(ae){return fe.replace((ce=me,new RegExp(`(url\\(['"]?)(${y.escape(ce)})(['"]?\\))`,"g")),`$1${ae}$3`);var ce})}}(),T={resolveAll:function(){return O().then(function(U){return Promise.all(U.map(function(R){return R.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:O}};function O(){return Promise.resolve(y.asArray(document.styleSheets)).then(function(R){const ee=[];return R.forEach(function(ie){if(Object.getPrototypeOf(ie).hasOwnProperty("cssRules"))try{y.asArray(ie.cssRules||[]).forEach(ee.push.bind(ee))}catch(fe){console.log("Error while reading CSS rules from "+ie.href,fe.toString())}}),ee}).then(function(R){return R.filter(function(ee){return ee.type===CSSRule.FONT_FACE_RULE}).filter(function(ee){return S.shouldProcess(ee.style.getPropertyValue("src"))})}).then(function(R){return R.map(U)});function U(R){return{resolve:function(){var ee=(R.parentStyleSheet||{}).href;return S.inlineAll(R.cssText,ee)},src:function(){return R.style.getPropertyValue("src")}}}}const D={inlineAll:function U(R){return R instanceof Element?function(ee){const ie=ee.style.getPropertyValue("background");return ie?S.inlineAll(ie).then(function(fe){ee.style.setProperty("background",fe,ie)}).then(function(){return ee}):Promise.resolve(ee)}(R).then(function(){return R instanceof HTMLImageElement?B(R).inline():Promise.all(y.asArray(R.childNodes).map(function(ee){return U(ee)}))}):Promise.resolve(R)},impl:{newImage:B}};function B(U){return{inline:function(R){return y.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then(R||y.getAndEncode).then(function(ee){return y.dataAsUrl(ee,y.mimeType(U.src))}).then(function(ee){return new Promise(function(ie){U.onload=ie,U.onerror=ie,U.src=ee})})}}}const z={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},H={toSvg:V,toPng:function(U,R){return(R=R||{}).raster=!0,Y(U,R).then(function(ee){return ee.toDataURL()})},toJpeg:function(U,R){return(R=R||{}).raster=!0,Y(U,R).then(function(ee){return ee.toDataURL("image/jpeg",R.quality||1)})},toBlob:function(U,R){return(R=R||{}).raster=!0,Y(U,R).then(y.canvasToBlob)},toPixelData:function(U,R){return(R=R||{}).raster=!0,Y(U,R).then(function(ee){return ee.getContext("2d").getImageData(0,0,y.width(U),y.height(U)).data})},toCanvas:function(U,R){return(R=R||{}).raster=!0,Y(U,R||{})},impl:{fontFaces:T,images:D,util:y,inliner:S,urlCache:[],options:{}}},J=(c.exports=H,p.getComputedStyle||window.getComputedStyle),Q=p.atob||window.atob;function V(U,R){var ee=R=R||{};return ee.imagePlaceholder===void 0?H.impl.options.imagePlaceholder=z.imagePlaceholder:H.impl.options.imagePlaceholder=ee.imagePlaceholder,ee.cacheBust===void 0?H.impl.options.cacheBust=z.cacheBust:H.impl.options.cacheBust=ee.cacheBust,ee.useCredentials===void 0?H.impl.options.useCredentials=z.useCredentials:H.impl.options.useCredentials=ee.useCredentials,Promise.resolve(U).then(function(ie){return function fe(me,Oe,Z,ae,ce=null){return Z||!Oe||Oe(me)?Promise.resolve(me).then(function(pe){return pe instanceof HTMLCanvasElement?y.makeImage(pe.toDataURL()):pe.nodeName==="IFRAME"?html2canvas(pe.contentDocument.body).then(Le=>Le.toDataURL()).then(y.makeImage):pe.cloneNode(!1)}).then(function(pe){return function(Le,Pe){const Ue=Le.childNodes;return Ue.length===0?Promise.resolve(Pe):function(Ne,nt){const pt=J(Le);let bt=Promise.resolve();return nt.forEach(function(le){bt=bt.then(function(){return fe(le,Oe,!1,ae,pt)}).then(function(oe){oe&&Ne.appendChild(oe)})}),bt}(Pe,y.asArray(Ue)).then(function(){return Pe})}(me,pe)}).then(function(pe){return function(Le,Pe,Ue){return Pe instanceof Element?Promise.resolve().then(function(){(function(Ne,nt){const pt=J(Ne);pt.cssText?(nt.style.cssText=pt.cssText,function(bt,le){le.font=bt.font,le.fontFamily=bt.fontFamily,le.fontFeatureSettings=bt.fontFeatureSettings,le.fontKerning=bt.fontKerning,le.fontSize=bt.fontSize,le.fontStretch=bt.fontStretch,le.fontStyle=bt.fontStyle,le.fontVariant=bt.fontVariant,le.fontVariantCaps=bt.fontVariantCaps,le.fontVariantEastAsian=bt.fontVariantEastAsian,le.fontVariantLigatures=bt.fontVariantLigatures,le.fontVariantNumeric=bt.fontVariantNumeric,le.fontVariationSettings=bt.fontVariationSettings,le.fontWeight=bt.fontWeight}(pt,nt.style)):(Ue?function(bt,le,oe,ue){const te=oe.style,Se=bt.style;for(var Ve of le){var Xe=le.getPropertyValue(Ve),at=Se.getPropertyValue(Ve),ot=(Se.setProperty(Ve,ue?"initial":"unset"),le.getPropertyValue(Ve));ot!==Xe?te.setProperty(Ve,Xe):te.removeProperty(Ve),Se.setProperty(Ve,at)}}(Ne,pt,nt,Z):function(bt,le,oe){const ue=function(Se){if(X[Se])return X[Se];se||((se=document.createElement("iframe")).style.visibility="hidden",se.style.position="fixed",document.body.appendChild(se),se.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ve=document.createElement(Se),Xe=(se.contentWindow.document.body.appendChild(Ve),Ve.textContent=".",se.contentWindow.getComputedStyle(Ve)),at={};return y.asArray(Xe).forEach(function(ot){at[ot]=ot==="width"||ot==="height"?"auto":Xe.getPropertyValue(ot)}),se.contentWindow.document.body.removeChild(Ve),X[Se]=at}(oe.tagName),te=oe.style;y.asArray(bt).forEach(function(Se){var Ve=bt.getPropertyValue(Se);(Ve!==ue[Se]||le&&Ve!==le.getPropertyValue(Se))&&te.setProperty(Se,Ve,bt.getPropertyPriority(Se))})}(pt,ce,nt),Z&&(["inset-block","inset-block-start","inset-block-end"].forEach(bt=>nt.style.removeProperty(bt)),["left","right","top","bottom"].forEach(bt=>{nt.style.getPropertyValue(bt)&&nt.style.setProperty(bt,"0px")})))})(Le,Pe)}).then(function(){[":before",":after"].forEach(function(Ne){(function(nt){const pt=J(Le,nt),bt=pt.getPropertyValue("content");if(bt!==""&&bt!=="none"){const le=y.uid(),oe=Pe.getAttribute("class"),ue=(oe&&Pe.setAttribute("class",oe+" "+le),document.createElement("style"));ue.appendChild(function(){const te=`.${le}:`+nt,Se=(pt.cssText?function(){return`${pt.cssText} content: ${pt.getPropertyValue("content")};`}:function(){return y.asArray(pt).map(function(Ve){return Ve+": "+pt.getPropertyValue(Ve)+(pt.getPropertyPriority(Ve)?" !important":"")}).join("; ")+";"})();return document.createTextNode(te+`{${Se}}`)}()),Pe.appendChild(ue)}})(Ne)})}).then(function(){Le instanceof HTMLTextAreaElement&&(Pe.innerHTML=Le.value),Le instanceof HTMLInputElement&&Pe.setAttribute("value",Le.value)}).then(function(){Pe instanceof SVGElement&&(Pe.setAttribute("xmlns","http://www.w3.org/2000/svg"),Pe instanceof SVGRectElement&&["width","height"].forEach(function(Ne){const nt=Pe.getAttribute(Ne);nt&&Pe.style.setProperty(Ne,nt)}))}).then(function(){return Pe}):Pe}(me,pe,ae)}):Promise.resolve()}(ie,R.filter,!0,!R.raster)}).then(ge).then($).then(function(ie){R.bgcolor&&(ie.style.backgroundColor=R.bgcolor),R.width&&(ie.style.width=R.width+"px"),R.height&&(ie.style.height=R.height+"px"),R.style&&Object.keys(R.style).forEach(function(me){ie.style[me]=R.style[me]});let fe=null;return typeof R.onclone=="function"&&(fe=R.onclone(ie)),Promise.resolve(fe).then(function(){return ie})}).then(function(ie){return ie=ie,fe=R.width||y.width(U),me=R.height||y.height(U),Promise.resolve(ie).then(function(Oe){return Oe.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Oe)}).then(y.escapeXhtml).then(function(Oe){return`<foreignObject x="0" y="0" width="100%" height="100%">${Oe}</foreignObject>`}).then(function(Oe){return`<svg xmlns="http://www.w3.org/2000/svg" width="${fe}" height="${me}">${Oe}</svg>`}).then(function(Oe){return"data:image/svg+xml;charset=utf-8,"+Oe});var fe,me}).then(function(ie){return H.impl.urlCache=[],ie})}function Y(U,R){return V(U,R).then(y.makeImage).then(y.delay(0)).then(function(ee){var ie=typeof R.scale!="number"?1:R.scale;const fe=function(Oe,Z){const ae=document.createElement("canvas");if(ae.width=(R.width||y.width(Oe))*Z,ae.height=(R.height||y.height(Oe))*Z,R.bgcolor){const ce=ae.getContext("2d");ce.fillStyle=R.bgcolor,ce.fillRect(0,0,ae.width,ae.height)}return ae}(U,ie),me=fe.getContext("2d");return me.mozImageSmoothingEnabled=!1,me.msImageSmoothingEnabled=!1,me.imageSmoothingEnabled=!1,ee&&(me.scale(ie,ie),me.drawImage(ee,0,0)),se&&(document.body.removeChild(se),se=null,W&&clearTimeout(W),W=setTimeout(()=>{W=null,X={}},2e4)),fe})}function ge(U){return T.resolveAll().then(function(R){const ee=document.createElement("style");return U.appendChild(ee),ee.appendChild(document.createTextNode(R)),U})}function $(U){return D.inlineAll(U).then(function(){return U})}let W=null,se=null,X={}})(r)}),o=i(function(c,f){(function(){function p(T,O,D){var B=new XMLHttpRequest;B.open("GET",T),B.responseType="blob",B.onload=function(){S(B.response,O,D)},B.onerror=function(){console.error("could not download file")},B.send()}function y(T){var O=new XMLHttpRequest;O.open("HEAD",T,!1);try{O.send()}catch{}return 200<=O.status&&299>=O.status}function m(T){try{T.dispatchEvent(new MouseEvent("click"))}catch{var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),T.dispatchEvent(O)}}var C=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,S=C.saveAs||(typeof window!="object"||window!==C?function(){}:"download"in HTMLAnchorElement.prototype?function(T,O,D){var B=C.URL||C.webkitURL,z=document.createElement("a");O=O||T.name||"download",z.download=O,z.rel="noopener",typeof T=="string"?(z.href=T,z.origin===location.origin?m(z):y(z.href)?p(T,O,D):m(z,z.target="_blank")):(z.href=B.createObjectURL(T),setTimeout(function(){B.revokeObjectURL(z.href)},4e4),setTimeout(function(){m(z)},0))}:"msSaveOrOpenBlob"in navigator?function(T,O,D){if(O=O||T.name||"download",typeof T!="string")navigator.msSaveOrOpenBlob(function(z,H){return H===void 0?H={autoBom:!1}:typeof H!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),H={autoBom:!H}),H.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(z.type)?new Blob(["\uFEFF",z],{type:z.type}):z}(T,D),O);else if(y(T))p(T,O,D);else{var B=document.createElement("a");B.href=T,B.target="_blank",setTimeout(function(){m(B)})}}:function(T,O,D,B){if((B=B||open("","_blank"))&&(B.document.title=B.document.body.innerText="downloading..."),typeof T=="string")return p(T,O,D);var z=T.type==="application/octet-stream",H=/constructor/i.test(C.HTMLElement)||C.safari,J=/CriOS\/[\d]+/.test(navigator.userAgent);if((J||z&&H)&&typeof FileReader=="object"){var Q=new FileReader;Q.onloadend=function(){var ge=Q.result;ge=J?ge:ge.replace(/^data:[^;]*;/,"data:attachment/file;"),B?B.location.href=ge:location=ge,B=null},Q.readAsDataURL(T)}else{var V=C.URL||C.webkitURL,Y=V.createObjectURL(T);B?B.location=Y:location.href=Y,B=null,setTimeout(function(){V.revokeObjectURL(Y)},4e4)}});C.saveAs=S.saveAs=S,c.exports=S})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var f=c.node,p=c.error;return console.warn("Map node is very big "+f.scrollWidth+"x"+f.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(var m in this.options)p.hasOwnProperty(m)?y[m]=p[m]:y[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(y)}).then(function(C){return c._setElementsVisible(!0),c._toCanvas(C,y)}).then(function(C){return f==="image"?c._canvasToImage(C,y):f==="canvas"?C:c._canvasToBlob(C,y)}).then(function(C){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),C}).catch(function(C){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:C}),Promise.reject(C)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var y=c._map._container.querySelectorAll(p),m=!0,C=!1,S=void 0;try{for(var T,O=y[Symbol.iterator]();!(m=(T=O.next()).done);m=!0)T.value.style.opacity=f===!1?0:1}catch(D){C=!0,S=D}finally{try{!m&&O.return&&O.return()}finally{if(C)throw S}}})},_canvasToImage:function(c,f){var p=f.mimeType,y=c.toDataURL(p);return y.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(y)},_canvasToBlob:function(c,f){var p=f.mimeType;return new Promise(function(y,m){c.toBlob(function(C){y(C)},p)})},_toCanvas:function(c,f){var p=f.captionOffset,y=f.caption,m=f.captionFontSize,C=f.captionFont,S=f.captionColor,T=f.captionBgColor,O=this._node,D=O.screenHeight,B=O.screenWidth,z=document.createElement("canvas");z.width=B,z.height=D;for(var H=z.getContext("2d"),J=H.createImageData(B,D),Q=0;Q<c.length;++Q)J.data[Q]=c[Q];H.putImageData(J,0,0),J=null;var V=document.createElement("canvas"),Y=V.getContext("2d"),ge=0,$=0,W=D,se=B;if(this.options.cropImageByInnerWH===!0){for(var X=[],U=0,R=0;R<D;++R){U=0;for(var ee=0;ee<B;++ee)c[4*R*B+4*ee+4]===0&&U++;U===B&&X.push(R)}var ie=this._getMinAndMaxOnValuesBreak(X);ge=ie.min;for(var fe=B,me=ie.max,Oe=[],Z=0,ae=$;ae<fe;++ae){Z=0;for(var ce=0;ce<D;++ce)c[4*ce*B+4*ae+4]===0&&Z++;Z===D&&Oe.push(ae)}var pe=this._getMinAndMaxOnValuesBreak(Oe);$=pe.min,fe=pe.max,($===0&&fe===0||fe===null)&&(fe=B),(ge===0&&me===0||me===null)&&(me=D),this.options.debugMode===!0&&(console.log("emptyYLine",X),console.log("minMaxY",ie),console.log("emptyXLine",Oe),console.log("minMaxX",pe),console.log("debugX",{}),console.log("debugY",{})),ge===0&&me===D&&$===0&&fe===B||(ge+=this.options.onCropBorderSize,me-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,fe-=this.options.onCropBorderSize),W=me-ge,se=fe-$,V.width=se,V.height=W}else V.width=se,V.height=W;var Le=null;return y&&(Le=typeof y=="function"?y.call(this):y),Le!==null&&(V.height=V.height+(p+m+p),Y.beginPath(),Y.rect(0,0,V.width,V.height),Y.fillStyle=T,Y.fill(),Y.save()),Y.drawImage(z,$,ge,se,W,0,0,se,W),Le!==null&&(Y.font=m+"px "+C,Y.fillStyle=S,Y.fillText(Le,p,W+p+m)),Promise.resolve(V)},_getMinAndMaxOnValuesBreak:function(c){for(var f=0,p=0,y=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],y=!0;break}f=c[m]}return y===!1&&c[0]>1?(f=0,p=c[0]):y===!1&&(f=c[c.length-1]||0,p=null),{min:f,max:p}},_getPixelData:function(c){var f=this,p=c.domtoimageOptions,y=p===void 0?{}:p;return this._getPixelDataOfNormalMap(y).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),f._getPixelDataOfBigMap(y)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=this._map.getContainer();return this._node={node:f,screenHeight:f.scrollHeight,screenWidth:f.scrollWidth},s.toPixelData(f,c)},_getPixelDataOfBigMap:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),y=this._map.getPane("mapPane");y.style.width=2*p.clientWidth+"px",y.style.height=2*p.clientHeight+"px",y.style.overflow="hidden";var m=function(){y.style.width="initial",y.style.height="initial",y.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,f).then(function(C){return m(),C}).catch(function(C){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:y,error:C,domtoimageOptions:f}):Promise.reject(C)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,f=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),f.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(f){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(f,p+".png")}).catch(function(f){c._map.fire("simpleMapScreenshoter.error",{e:f})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(f){var p=setInterval(function(){c._interaction||(f(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(_4,_4.exports);var rl=63710088e-1,OS={centimeters:rl*100,centimetres:rl*100,degrees:360/(2*Math.PI),feet:rl*3.28084,inches:rl*39.37,kilometers:rl/1e3,kilometres:rl/1e3,meters:rl,metres:rl,miles:rl/1609.344,millimeters:rl*1e3,millimetres:rl*1e3,nauticalmiles:rl/1852,radians:1,yards:rl*1.0936};function Wg(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function dv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w4(t[0])||!w4(t[1]))throw new Error("coordinates must contain numbers");return Wg({type:"Point",coordinates:t},e,n)}function Hh(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Wg({type:"Polygon",coordinates:t},e,n)}function Gg(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Wg({type:"LineString",coordinates:t},e,n)}function o9(t,e="kilometers"){const n=OS[e];if(!n)throw new Error(e+" units is invalid");return t*n}function a9(t,e="kilometers"){const n=OS[e];if(!n)throw new Error(e+" units is invalid");return t/n}function I2(t){return t%(2*Math.PI)*180/Math.PI}function rc(t){return t%360*Math.PI/180}function w4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function x4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function l9(t){return t.type==="Feature"?t.geometry:t}function DS(t,e,n={}){if(n.final===!0)return u9(t,e);const r=x4(t),i=x4(e),s=rc(r[0]),o=rc(i[0]),a=rc(r[1]),l=rc(i[1]),c=Math.sin(o-s)*Math.cos(l),f=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return I2(Math.atan2(c,f))}function u9(t,e){let n=DS(e,t);return n=(n+180)%360,n}function c9(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function h9(t,e,n,r={}){const i=c9(t),s=rc(i[0]),o=rc(i[1]),a=rc(n),l=a9(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),f=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=I2(f),y=I2(c);return dv([p,y],r.properties)}function L4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function IS(t,e,n={}){var r=L4(t),i=L4(e),s=rc(i[1]-r[1]),o=rc(i[0]-r[0]),a=rc(r[1]),l=rc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return o9(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function f9(t,e,n={}){const i=l9(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=DS(i[o],i[o-1])-180;return h9(i[o],a,l,n)}else return dv(i[o])}else s+=IS(i[o],i[o+1],n);return dv(i[i.length-1])}var C4=f9;function d9(t,e){var n,r,i,s,o,a,l,c,f,p,y=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,y,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,y,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],y,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function p9(t,e,n){var r=n;return d9(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function NS(t){return p9(t,(e,n)=>e+g9(n),0)}function g9(t){let e=0,n;switch(t.type){case"Polygon":return S4(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=S4(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function S4(t){let e=0;if(t&&t.length>0){e+=Math.abs(E4(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(E4(t[n]))}return e}var m9=rl*rl/2,_1=Math.PI/180;function E4(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*_1,l=s[1]*_1,c=o[0]*_1;n+=(c-a)*Math.sin(l),r++}return n*m9}var Dp=NS;function BS(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,y,m=t.type,C=m==="FeatureCollection",S=m==="Feature",T=C?t.features.length:1,O=0;O<T;O++){c=C?t.features[O].geometry:S?t.geometry:t,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var D=0;D<a;D++){var B=0,z=0;if(o=y?c.geometries[D]:c,o!==null){l=o.coordinates;var H=o.type;switch(f=H==="Polygon"||H==="MultiPolygon"?1:0,H){case null:break;case"Point":if(e(l,p,O,B,z)===!1)return!1;p++,B++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,O,B,z)===!1)return!1;p++,H==="MultiPoint"&&B++}H==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,O,B,z)===!1)return!1;p++}H==="MultiLineString"&&B++,H==="Polygon"&&z++}H==="Polygon"&&B++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(z=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,O,B,z)===!1)return!1;p++}z++}B++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(BS(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function v9(t,e={}){let n=0,r=0,i=0;return BS(t,function(s){n+=s[0],r+=s[1],i++}),dv([n/i,r/i],e.properties)}var yg=v9;function RS(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,y,m=t.type,C=m==="FeatureCollection",S=m==="Feature",T=C?t.features.length:1,O=0;O<T;O++){c=C?t.features[O].geometry:S?t.geometry:t,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var D=0;D<a;D++){var B=0,z=0;if(o=y?c.geometries[D]:c,o!==null){l=o.coordinates;var H=o.type;switch(f=0,H){case null:break;case"Point":if(e(l,p,O,B,z)===!1)return!1;p++,B++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,O,B,z)===!1)return!1;p++,H==="MultiPoint"&&B++}H==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,O,B,z)===!1)return!1;p++}H==="MultiLineString"&&B++,H==="Polygon"&&z++}H==="Polygon"&&B++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(z=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,O,B,z)===!1)return!1;p++}z++}B++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(RS(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function y9(t,e){var n,r,i,s,o,a,l,c,f,p,y=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,y,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,y,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],y,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function b9(t,e){y9(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Wg(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var f=n.coordinates[c],p={type:l,coordinates:f};if(e(Wg(p,i),r,c)===!1)return!1}})}function _9(t,e){b9(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,f=0;if(RS(n,function(p,y,m,C,S){if(a===void 0||r>l||C>c||S>f){a=p,l=r,c=C,f=S,s=0;return}var T=Gg([a,p],n.properties);if(e(T,r,i,S,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function w9(t,e,n){var r=n,i=!1;return _9(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function pv(t,e={}){return w9(t,(n,r)=>{const i=r.geometry.coordinates;return n+IS(i[0],i[1],e)},0)}var x9=pv;class Ol extends Qi.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});tt(this,"properties");tt(this,"_originalStyle");tt(this,"_path");this.properties={type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}},this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(O=>[O.lng,O.lat]);l.push(l[0]);const c=Hh([l]),f=NS(c),p=pv(Gg([...l]),{units:"meters"}),y=yg(c),m=Qi.latLng(y.geometry.coordinates[1],y.geometry.coordinates[0]),C=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",S=((i=this.properties)==null?void 0:i.category)||"forages",T=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(O=>({lat:O.lat,lng:O.lng})),surface:f,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:S,accessLevel:T,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:C}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Qi.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r}moveVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Qi.Polygon.prototype.setLatLngs.call(this,[i]))}addVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Qi.Polygon.prototype.setLatLngs.call(this,[i]))}move(n){const i=this.getLatLngs()[0].map(s=>Qi.latLng(s.lat+n.lat,s.lng+n.lng));return Qi.Polygon.prototype.setLatLngs.call(this,[i]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new Qi.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Qi.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Hh([i]),o=yg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Qi.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Qi.LatLng(0,0)):new Qi.LatLng(i/o,s/o)}}getSegmentLengths(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:n,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(n){console.warn("Impossible de restaurer le style du polygone",n)}}}}class vs extends Qi.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});tt(this,"properties");tt(this,"cachedProperties",{});tt(this,"needsUpdate",!0);tt(this,"_originalStyle");tt(this,"_path");tt(this,"updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=Gg(r),f=pv(c,{units:"meters"});let p;if(n.length===2)p=Qi.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const S=C4(c,f/2,{units:"meters"});p=Qi.latLng(S.geometry.coordinates[1],S.geometry.coordinates[0])}const y=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",m=((o=this.properties)==null?void 0:o.category)||"forages",C=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:f,coordinates:n.map(S=>({lat:S.lat,lng:S.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,category:m,accessLevel:C,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:y}},this.cachedProperties.length=f,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}});tt(this,"setName",n=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})});tt(this,"getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""});tt(this,"getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Qi.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r});tt(this,"getMidPointAt",n=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Qi.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)});tt(this,"moveVertex",(n,r,i=!1)=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())});tt(this,"getSegmentLengths",()=>{const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return r});tt(this,"getSegmentLengthAt",n=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)});tt(this,"getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r});tt(this,"getLengthToVertex",n=>{const r=this.getLatLngs();if(n<0||n>=r.length||r.length<2)return 0;let i=0;for(let s=0;s<n;s++)i+=r[s].distanceTo(r[s+1]);return i});this.properties={type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}},this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){var n,r;if(!this._originalStyle){this._originalStyle={...this.options};const i=(((n=this._originalStyle)==null?void 0:n.weight)||3)*1.75,s=((r=this._originalStyle)==null?void 0:r.color)||"#2b6451";this.setStyle({weight:i,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${s})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur à la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(n,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(n);if(Qi.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}addVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Qi.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties={},i&&this.updateProperties())}move(n,r=!0){this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Qi.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Qi.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=Gg(r),s=pv(i,{units:"meters"}),o=C4(i,s/2,{units:"meters"}),a=Qi.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Qi.LatLng(i,s);return this.cachedProperties.center=o,o}}}var Zr=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Zr||{});function P4(t){if(!t)return Zr.PRIVATE;switch(t.toLowerCase()){case"private":return Zr.PRIVATE;case"company":return Zr.COMPANY;case"employee":return Zr.EMPLOYEE;case"visitor":return Zr.VISITOR;default:return console.warn(`Niveau d'accès inconnu: ${t}, utilisation de PRIVATE par défaut`),Zr.PRIVATE}}function L9(t){switch(t){case Zr.PRIVATE:return"Privé";case Zr.COMPANY:return"Entreprise";case Zr.EMPLOYEE:return"Salariés";case Zr.VISITOR:return"Visiteurs";default:return"Inconnu"}}function C9(t){var n,r,i;const e=po();return t!==void 0?t:e.isAdmin?null:e.isEntreprise&&e.user?e.user.id:e.isSalarie&&((n=e.user)!=null&&n.enterprise_id)||e.isVisiteur&&((r=e.user)!=null&&r.enterprise_id)||!e.isAdmin&&((i=e.user)!=null&&i.enterprise_id)?e.user.enterprise_id:null}function k4(t,e){const n=t.filter(r=>r.columnId===e);return n.length>0?Math.max(...n.map(r=>r.order))+1:0}function S9(t){return{id:t.id,text:t.text,createdAt:t.created_at,userId:t.user,userName:t.user_name,userRole:t.user_role}}function M4(t){return{id:t.id,url:t.image,caption:t.caption,createdAt:t.created_at}}function Sc(){return new Date().toISOString()}const gv=[{id:Zr.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Zr.COMPANY,title:"Entreprise",description:"Visible par l'entreprise"},{id:Zr.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Zr.VISITOR,title:"Visiteurs",description:"Visible par l'entreprise, ses salariés et ses visiteurs"}],yh=mp("notes",()=>{const t=kt([]),e=kt([]),n=rr(()=>J=>t.value.find(Q=>Q.id===J)),r=rr(()=>J=>{const Q=t.value.find(V=>V.id===J);return Q?Q.color:"#6B7280"}),i=rr(()=>t.value.find(J=>J.isDefault)||t.value[0]),s=rr(()=>[...t.value].sort((J,Q)=>J.order-Q.order)),o=rr(()=>J=>e.value.filter(Q=>Q.columnId===J).sort((Q,V)=>Q.order-V.order)),a=rr(()=>e.value),l=rr(()=>J=>a.value.filter(Q=>Q.columnId===J).sort((Q,V)=>Q.order-V.order));async function c(){try{const J=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=J}catch(J){throw console.error("[NotesStore][loadColumns] Erreur:",J),J}}async function f(J){}async function p(J,Q){try{const V=t.value.findIndex(Y=>Y.id===J);V!==-1&&(t.value[V]={...t.value[V],...Q})}catch(V){throw console.error("[NotesStore][updateColumn] Erreur:",V),V}}function y(J){if(!J.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const Q=Sc(),V=k4(e.value,J.columnId||""),Y=P4(J.access_level),ge=C9(J.enterprise_id),$={...J,id:J.id,order:V,accessLevel:Y,createdAt:J.created_at||Q,updatedAt:J.updated_at||Q,comments:[],photos:[],enterprise_id:ge};return e.value.push($),J.id}function m(J,Q){try{const V=e.value.findIndex(Y=>Y.id===J);V!==-1&&(Q.color&&(Q.style={...e.value[V].style,color:Q.color,fillColor:Q.color}),Q.access_level&&(Q.accessLevel=P4(Q.access_level),delete Q.access_level),e.value[V]={...e.value[V],...Q})}catch(V){throw console.error("[NotesStore][updateNote] Erreur:",V),V}}function C(J){e.value.findIndex(V=>V.id===J)!==-1?e.value=e.value.filter(V=>V.id!==J):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",J)}function S(J,Q){const V=e.value.findIndex(Y=>Y.id===J);if(V!==-1){const Y=e.value[V];if(Y.columnId!==Q){const $=k4(e.value,Q),W={...Y,columnId:Q,order:$,updatedAt:Sc()};e.value[V]=W}else e.value[V]={...e.value[V],updatedAt:Sc()}}}function T(J,Q){Q.forEach((V,Y)=>{const ge=e.value.findIndex($=>$.id===V&&$.columnId===J);ge!==-1&&(e.value[ge]={...e.value[ge],order:Y,updatedAt:Sc()})})}async function O(J,Q){try{const V=po();if(!V.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!V.isEntreprise&&!V.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(U=>U.id===J))throw new Error(`La note avec l'ID ${J} n'existe pas`);const $=(await Yo.addComment(J,Q)).data,W=e.value.findIndex(U=>U.id===J);if(W===-1)return;const se=e.value[W];se.comments||(se.comments=[]);const X=S9($);return se.comments.push(X),se.updatedAt=Sc(),e.value[W]={...se},X.id}catch(V){throw console.error("Erreur lors de l'ajout du commentaire:",V),V}}async function D(J,Q){try{const V=e.value.findIndex($=>$.id===J);if(V===-1)throw new Error(`La note avec l'ID ${J} n'existe pas`);const Y=e.value[V];if(!Y.comments||Y.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!Y.comments.some($=>$.id===Q))throw new Error(`Le commentaire avec l'ID ${Q} n'existe pas`);await Yo.deleteComment(J,Q),Y.comments=Y.comments.filter($=>$.id!==Q),Y.updatedAt=Sc(),e.value[V]={...Y}}catch(V){throw console.error("Erreur lors de la suppression du commentaire:",V),V}}async function B(J,Q){try{if(Q.id&&Q.image){const V=e.value.findIndex($=>$.id===J);if(V===-1)return;const Y=e.value[V];Y.photos||(Y.photos=[]);const ge=M4(Q);return Y.photos.push(ge),Y.updatedAt=Sc(),e.value[V]={...Y},ge.id}else{const V=new FormData;V.append("image",Q.url),Q.caption&&V.append("caption",Q.caption);const ge=(await Yo.addPhoto(J,V)).data,$=e.value.findIndex(X=>X.id===J);if($===-1)return;const W=e.value[$];W.photos||(W.photos=[]);const se=M4(ge);return W.photos.push(se),W.updatedAt=Sc(),e.value[$]={...W},se.id}}catch(V){throw console.error("Erreur lors de l'ajout de la photo:",V),V}}async function z(J,Q){try{await Yo.deletePhoto(J,Q);const V=e.value.findIndex($=>$.id===J);if(V===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[V].photos||(e.value[V].photos=[]);const Y=e.value[V],ge=(Y.photos||[]).filter($=>$.id!==Q);e.value[V]={...Y,photos:ge,updatedAt:Sc()}}catch(V){throw console.error("Erreur lors de la suppression de la photo:",V),V}}async function H(J,Q,V){try{await Yo.updatePhoto(J,Q,{caption:V});const Y=e.value.findIndex(W=>W.id===J);if(Y===-1||!e.value[Y].photos)return;const ge=e.value[Y],$=ge.photos.findIndex(W=>W.id===Q);if($===-1)return;ge.photos[$].caption=V,ge.updatedAt=Sc(),e.value[Y]={...ge}}catch(Y){throw console.error("Erreur lors de la mise à jour de la légende:",Y),Y}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getDefaultColumn:i,getSortedColumns:s,getNotesByColumn:o,getAccessibleNotes:a,getAccessibleNotesByColumn:l,getAccessLevelLabel:L9,loadColumns:c,addColumn:f,updateColumn:p,addNote:y,updateNote:m,removeNote:C,moveNote:S,reorderNotes:T,addComment:O,removeComment:D,addPhoto:B,removePhoto:z,updatePhoto:H}});class il extends dn.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=dn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});tt(this,"properties");tt(this,"_planSaved",!1);tt(this,"_isMoving",!1);tt(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Zr.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;c===f&&(this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;if(c===f){if(this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style,updatedAt:new Date().toISOString()},this.setNoteStyle(l.detail.properties.style),f)try{const y=yh().notes.find(m=>m.id===parseInt(String(f)));y&&(this.properties.comments=y.comments||[],this.properties.photos=y.photos||[],this.properties.createdAt=y.createdAt,this.properties.updatedAt=y.updatedAt)}catch(p){console.error("[GeoNote] Erreur lors de la récupération de la note depuis le store:",p)}this.getPopup()&&this.setPopupContent(this.createPopupContent())}}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const n=this.getElement();if(!n){console.warn("[GeoNote][forceVisible] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}n.style.display="block",n.style.visibility="visible",n.style.opacity="1";const r=n.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=n.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),n.offsetHeight}catch(n){console.error("[GeoNote][forceVisible] Erreur:",n),this.recreateIcon()}}recreateIcon(){var n,r;try{const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((n=this.properties.style)==null?void 0:n.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=dn.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),c=this.getElement();c&&dn.DomUtil.setPosition(c,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recréation de l'icône:",i)}}highlight(){const n=this.getElement();if(n){this.forceVisible(),n.style.visibility="visible",n.style.display="",n.style.opacity="1",n.style.zIndex="1000";const r=n.querySelector(".geo-note-marker");r&&r.classList.add("hover")}}unhighlight(){const n=this.getElement();if(n){this.forceVisible();const r=n.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),n.style.zIndex="",n.style.visibility="visible",n.style.display="",n.style.opacity="1"}}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Zr.PRIVATE:return"Privé";case Zr.COMPANY:return"Entreprise";case Zr.EMPLOYEE:return"Salariés";case Zr.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Zr.PRIVATE:return"#9CA3AF";case Zr.COMPANY:return"#EF4444";case Zr.EMPLOYEE:return"#F59E0B";case Zr.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){dn.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,r=this._leaflet_id;if(n)try{const a=yh().notes.find(l=>l.id===parseInt(String(n)));a&&(this.properties.name=a.title,this.properties.description=a.description,this.properties.columnId=a.columnId,this.properties.accessLevel=a.accessLevel,this.properties.style={...a.style},this.properties.comments=a.comments||[],this.properties.photos=a.photos||[],this.properties.createdAt=a.createdAt,this.properties.updatedAt=a.updatedAt)}catch(o){console.error("[GeoNote] Erreur lors de la récupération de la note depuis le store:",o)}const i={id:r,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:this.properties.comments||[],photos:this.properties.photos||[],createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:this.properties.updatedAt||new Date().toISOString()},s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Zr.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a)}}r||(r="#2b6451");const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(n){const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451",s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?l.setAttribute("fill",i):this._updateIconWithNewColor(i)}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o),a&&this.properties.category!==a&&(this.properties.category=a),this.refreshIconStyle()}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",dn.DomUtil.setTransform(n,new dn.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());dn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());dn.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)})}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=dn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100)}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,f;this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style,i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||this.properties.accessLevel||Zr.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||this.properties.category||"forages",o=n.columnId||this.properties.columnId||"1",a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a)}static fromBackendData(n){var l,c,f,p,y,m,C,S;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const T=n.location.coordinates;r=[T[1],T[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Zr.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||"forages";n.accessLevel=i,n.category=s;const o=n.columnId||"1",a=new il(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(y=n.style)==null?void 0:y.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(C=n.style)==null?void 0:C.fillOpacity,radius:(S=n.style)==null?void 0:S.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a}async saveNote(n){var r,i,s;if(this._planSaved)return this._dbId||0;try{this.updateProperties();let o=((r=this.properties.style)==null?void 0:r.color)||"#2b6451";if(o.startsWith("rgb")){const f=(i=this.getElement())==null?void 0:i.querySelector(".geo-note-marker svg path");if(f){const p=f.getAttribute("fill");p&&(o=p)}}const a={...this.properties.style,color:o,fillColor:o,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},l={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:a,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)l.enterprise_id=this.properties.enterprise_id;else{const f=po();!f.isAdmin&&((s=f.user)!=null&&s.enterprise_id)&&(l.enterprise_id=f.user.enterprise_id)}n&&(l.plan=n);let c;return this._dbId?c=(await Yo.updateNote(this._dbId,l)).data:(c=(await Yo.createNote(l)).data,this._dbId=c.id,yh().addNote({...c,id:c.id,columnId:c.column,accessLevel:c.access_level})),this._planSaved=!0,c.id}catch(o){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",o),ul().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?this.saveNote(parseInt(n)):this.saveNote();const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n){console.warn("[GeoNote][updatePosition] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());dn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s",n.style.visibility="visible",n.style.display="block";const i=n.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'élément a une taille nulle, recréation de l'icône"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",n),this.recreateIcon()}}openInGoogleMaps(){const n=ul(),r=this.getLatLng();if(!r||isNaN(r.lat)||isNaN(r.lng)){n.warning("La position de la note est invalide ou manquante");return}su(()=>Promise.resolve().then(()=>ZS),void 0).then(i=>{i.openInGoogleMaps(r.lat,r.lng,"directions",this.properties.name)})}}function E9(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function P9(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function A4(t){var e,n,r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,B;if(((e=t.properties)==null?void 0:e.type)==="Note"){const z=t.getLatLng();return{type_forme:"Note",data:{points:[[z.lng,z.lat]],style:{color:((n=t.properties.style)==null?void 0:n.color)||"#2b6451",weight:((r=t.properties.style)==null?void 0:r.weight)||3,opacity:((i=t.properties.style)==null?void 0:i.opacity)||1,fillColor:((s=t.properties.style)==null?void 0:s.fillColor)||"#2b6451",fillOpacity:((o=t.properties.style)==null?void 0:o.fillOpacity)||.2,name:((a=t.properties.style)==null?void 0:a.name)||""}}}}if(t instanceof Ol||((l=t.properties)==null?void 0:l.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(J=>[J.lng,J.lat]),style:{color:((c=t.properties.style)==null?void 0:c.color)||"#2b6451",weight:((f=t.properties.style)==null?void 0:f.weight)||3,opacity:((p=t.properties.style)==null?void 0:p.opacity)||1,fillColor:((y=t.properties.style)==null?void 0:y.fillColor)||"#2b6451",fillOpacity:((m=t.properties.style)==null?void 0:m.fillOpacity)||.2,name:((C=t.properties.style)==null?void 0:C.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof vs||((S=t.properties)==null?void 0:S.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(J=>[J.lng,J.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((T=t.properties.style)==null?void 0:T.color)||"#2b6451",weight:((O=t.properties.style)==null?void 0:O.weight)||3,opacity:((D=t.properties.style)==null?void 0:D.opacity)||1,name:((B=t.properties.style)==null?void 0:B.name)||""}}};throw new Error("Type de forme non reconnu")}function k9(t){var e,n,r,i,s,o,a,l,c,f,p,y,m,C,S,T,O;switch(t.type_forme){case"Polygon":{const D=t.data;if(!E9(D))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const B=D.points.map(J=>Qi.latLng(J[1],J[0])),z=((e=D.style)==null?void 0:e._accessLevel)||((n=D.style)==null?void 0:n.accessLevel)||D.accessLevel||"visitor";D.accessLevel=z;const H=new Ol([B],{color:((r=D.style)==null?void 0:r.color)||"#2b6451",weight:((i=D.style)==null?void 0:i.weight)||3,opacity:((s=D.style)==null?void 0:s.opacity)||1,fillColor:((o=D.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=D.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=D.style)==null?void 0:l.dashArray)||"",name:((c=D.style)==null?void 0:c.name)||"",category:D.category||"forages",accessLevel:z});return H.updateProperties(),H}case"Line":{const D=t.data;if(!P9(D))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const B=D.points.map(J=>Qi.latLng(J[1],J[0])),z=((f=D.style)==null?void 0:f._accessLevel)||((p=D.style)==null?void 0:p.accessLevel)||D.accessLevel||"visitor";D.accessLevel=z;const H=new vs(B,{...D.style||{},name:((y=D.style)==null?void 0:y.name)||"",category:D.category||"forages",accessLevel:z});return H.updateProperties(),H}case"Note":{const D=t.data;if(!D.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const B={location:D.location,name:D.name||"Note géolocalisée",description:D.description||"",columnId:D.columnId||"en-cours",accessLevel:D.accessLevel||"private",category:D.category||"forages",style:{color:((m=D.style)==null?void 0:m.color)||"#2b6451",weight:((C=D.style)==null?void 0:C.weight)||2,fillColor:((S=D.style)==null?void 0:S.fillColor)||"#2b6451",fillOpacity:((T=D.style)==null?void 0:T.fillOpacity)||.8,radius:((O=D.style)==null?void 0:O.radius)||12},comments:D.comments||[],photos:D.photos||[],order:D.order||0,createdAt:D.createdAt||new Date().toISOString(),updatedAt:D.updatedAt||new Date().toISOString()},z=il.fromBackendData(B);return z._dbId=t.id,z}catch(B){return console.error("[DrawingStore] Erreur lors de la création de la Note:",B),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const qg=mp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>t.elements.length===0?[]:t.elements.filter(n=>{var l,c;if(!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),!!a})},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){if(t instanceof Qi.Layer&&t.properties){const e=A4(t);this.elements.push(e)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){if(this.currentMapId===t&&this.elements.length>0)return this.elements;this.loading=!0;try{const n=(await Cn.get(`/plans/${t}/`)).data;return this.elements=n.formes.map(r=>{if(r.type_forme)return{id:r.id,type_forme:r.type_forme,data:r.data||{}};try{const i=k9(r);if(i)return A4(i)}catch(i){console.error("Erreur lors de la conversion de la forme",{error:i,id:r.id,type:r.type_forme})}return r}),this.currentMapId=t,this.unsavedChanges=!1,n.preferences&&(n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("Erreur lors du chargement des éléments:",e),this.error="Erreur lors du chargement des éléments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentMapId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");const r=this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),i=(e==null?void 0:e.elementsToDelete)||[],s=`/plans/${n}/save_with_elements/`,o=await Cn.post(s,{formes:r,connexions:[],annotations:[],elementsToDelete:i,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),a=new Set(i);return this.elements=o.data.formes.filter(l=>!a.has(l.id)).map(l=>({...l,type_forme:l.type_forme})),this.unsavedChanges=!1,o.data}catch(n){throw console.error("Erreur lors de la sauvegarde du plan:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),FS=mp("mapFilters",{state:()=>({filters:[],loading:!1,error:null}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=ul();this.loading=!0,this.error=null;try{const e=await Zm.getFilters();return this.filters=e.data,this.filters}catch(e){throw this.error="Erreur lors du chargement des filtres",t.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",e),e}finally{this.loading=!1}},async createFilter(t){this.loading=!0,this.error=null;try{const e=await Zm.createFilter(t);return this.filters.push(e.data),e.data}catch(e){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",e),e}finally{this.loading=!1}},async updateFilter(t,e){this.loading=!0,this.error=null;try{const n=await Zm.updateFilter(t,e),r=this.filters.findIndex(i=>i.id===t);return r!==-1&&(this.filters[r]=n.data),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",n),n}finally{this.loading=!1}},async deleteFilter(t){this.loading=!0,this.error=null;try{return await Zm.deleteFilter(t),this.filters=this.filters.filter(e=>e.id!==t),!0}catch(e){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",e),e}finally{this.loading=!1}}}}),e_=mp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=po();this.loading=!0;try{let r="/plans/";const i={};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const s=await Cn.get(r,{params:i});this.plans=s.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=po();this.loading=!0;try{let r="/plans/";const i={include_details:!0};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const o=(await Cn.get(r,{params:i})).data.map(a=>({...a,entreprise:typeof a.entreprise=="object"?a.entreprise:null,salarie:typeof a.salarie=="object"?a.salarie:null,visiteur:typeof a.visiteur=="object"?a.visiteur:null}));return this.plans=o,{data:o}}catch(r){throw console.error("[IrrigationStore] Error fetching plans:",r),this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchClientPlans(t){this.loading=!0;try{return(await Ym.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var n;this.clearCurrentPlan(),this.loading=!0;const e=ul();try{const r=po();((n=r.user)==null?void 0:n.user_type)==="visiteur"&&(t={...t,visiteur:r.user.id,salarie_id:r.user.enterprise_id,entreprise_id:r.user.enterprise_id});const i={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null},s=await Ym.createPlan(i);return this.plans.push(s.data),e.success(`Le plan "${s.data.nom}" a été créé avec succès`),s.data}catch(r){const i=r instanceof Error?r.message:String(r);throw console.error("Error creating plan:",i),this.error=i,e.error(`Erreur lors de la création du plan : ${i}`),r}finally{this.loading=!1}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await Ym.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Cn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw console.error("[IrrigationStore][savePlan] ERREUR:",r),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(t,e){const n=ul();try{const{visiteur_id:r,salarie_id:i,entreprise_id:s,...o}=e,a={...o};r!==void 0&&(a.visiteur_id=r),i!==void 0&&(a.salarie_id=i),s!==void 0&&(a.entreprise_id=s);const l=await Cn.patch(`/plans/${t}/`,a);this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...l.data});const c=this.plans.findIndex(f=>f.id===t);return c!==-1&&(this.plans[c]={...this.plans[c],...l.data}),l.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),n.error(`Erreur lors de la mise à jour du plan : ${r instanceof Error?r.message:String(r)}`),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Cn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Cn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=ul();try{const r=this.plans.find(i=>i.id===t);await Ym.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),M9={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},A9={class:"flex-1 flex flex-col overflow-hidden"},T9={class:"border-b border-gray-200"},O9={class:"flex -mb-px"},D9={class:"flex-1 overflow-hidden flex flex-col"},I9={key:0,class:"tab-content"},N9={class:"grid grid-cols-3 gap-1.5 mb-4"},B9=["onClick","title"],R9=["innerHTML"],F9={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},j9={key:2,class:"my-4 border-t border-gray-200"},z9={key:3,class:"mt-4"},U9={key:0,class:"mb-4"},$9={class:"mb-4"},V9=["value"],H9={class:"mb-4"},W9=["value"],G9={class:"grid grid-cols-1 gap-4"},q9={key:0,class:"space-y-1"},Y9={class:"flex justify-between items-center"},Z9={class:"text-sm font-medium text-gray-500"},K9={class:"flex justify-between items-center"},X9={class:"text-sm font-medium text-gray-500"},J9={class:"text-sm font-medium text-gray-500"},Q9={key:1,class:"tab-content"},ej={class:"grid grid-cols-6 gap-2 mb-4"},tj=["onClick","title"],nj={class:"space-y-4"},rj={class:"flex items-center gap-4"},ij={class:"flex items-center gap-2"},sj={class:"flex items-center gap-4"},oj=["value"],aj={key:0,class:"flex items-center gap-4"},lj={class:"flex items-center gap-2"},uj={key:2,class:"tab-content filters-tab"},cj={class:"filters-content"},hj={class:"space-y-2"},fj=["value"],dj={class:"space-y-2 mt-4"},pj={class:"space-y-1"},gj={class:"flex items-center"},mj={class:"flex items-center"},vj={class:"flex items-center"},yj={class:"flex items-center"},bj={class:"flex items-center"},_j={class:"flex items-center"},wj={key:0,class:"flex items-center"},xj=["onUpdate:modelValue"],Lj={class:"ml-2 text-sm text-gray-700"},Cj={key:0,class:"mt-2 pt-2 border-t border-gray-200"},Sj={class:"flex space-x-2"},Ej=["disabled"],Pj={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kj={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Mj={class:"space-y-2 mt-4"},Aj={class:"space-y-1"},Tj={class:"flex items-center"},Oj={class:"flex items-center"},Dj={class:"flex items-center"},Ij=_s({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=qg(),i=po(),s=rr(()=>i.isAdmin),o=rr(()=>i.isEntreprise),a=FS(),l=e_(),c=hu({name:""}),f=kt(!1),p=kt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),y=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note géolocalisée"}],m=le=>{switch(le){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},C=kt("tools");vi(C,(le,oe)=>{le==="filters"&&oe!=="filters"&&(n.selectedShape&&Ne("tool-selected",""),setTimeout(()=>{Z()},0)),oe==="filters"&&le!=="filters"&&Z()});const S=kt("#2b6451"),T=kt(2),O=kt("solid"),D=kt("#2b6451"),B=kt(.2),z=kt(!0),H=kt(""),J=kt("default"),Q=kt("visitor"),V=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Y=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],ge=kt("company"),$=hu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}),W=le=>{ge.value=le,le==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):le==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):le==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),Z()},se=le=>{n.selectedShape&&Ne("tool-selected",""),W(le)},X=rr(()=>n.selectedShape&&n.selectedShape.properties||null),U=le=>{S.value=le,D.value=le,R({strokeColor:le,fillColor:le})},R=le=>{n.selectedShape&&Ne("style-update",le)},ee=()=>{n.selectedShape&&Ne("properties-update",{name:H.value})},ie=()=>{n.selectedShape&&Ne("properties-update",{category:J.value})},fe=()=>{n.selectedShape&&Ne("properties-update",{accessLevel:Q.value})},me=()=>{const le={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}};$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.Note=!0,r.updateFilters(le),Ne("filter-change",le)},Oe=()=>{Le(),me()},Z=()=>{const le={...$.accessLevels},oe={...$.categories},ue={...$.shapeTypes},te={accessLevels:le,categories:oe,shapeTypes:ue};r.updateFilters(te),Ne("filter-change",te),setTimeout(()=>{window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:te}}))},0)},ae=le=>`${Math.round(le)} m`,ce=le=>le>=1e4?`${(le/1e4).toFixed(2)} ha`:`${Math.round(le)} m²`,pe=le=>p.value.includes(le)?le:le.split("_").map(oe=>oe.charAt(0).toUpperCase()+oe.slice(1)).join(" "),Le=()=>{n.selectedShape&&Ne("tool-selected","")};async function Pe(){var le,oe;if(!(!c.name||f.value)){f.value=!0;try{const ue=c.name.toLowerCase().replace(/\s+/g,"_"),te=l.currentPlan;let Se=null;if(te!=null&&te.entreprise_id?Se=te.entreprise_id:te!=null&&te.entreprise&&typeof te.entreprise=="object"&&"id"in te.entreprise?Se=te.entreprise.id:(le=i.user)!=null&&le.enterprise_id?Se=i.user.enterprise_id:i.isEntreprise&&((oe=i.user)!=null&&oe.id)&&(Se=i.user.id),!Se)return;const Ve=await a.createFilter({name:c.name,category:ue,entreprise:Se});$.categories[ue]||($.categories[ue]=!0);const Xe={...r.filters.categories};Xe[ue]=!0,r.updateFilters({categories:Xe}),Ne("filter-change",$),c.name=""}catch{}finally{f.value=!1}}}const Ue=()=>{Le(),C.value="filters"},Ne=e;jg(()=>{var le,oe,ue,te;if(n.selectedShape){const Se=n.selectedShape.options||{};S.value=Se.color||"#2b6451",T.value=Se.weight||3,O.value=Se.dashArray?"dashed":"solid",D.value=Se.fillColor||"#2b6451",B.value=Se.fillOpacity||.2;const Ve=n.selectedShape.type||((le=n.selectedShape.properties)==null?void 0:le.type)||"";z.value=Ve!=="Line",H.value=((oe=n.selectedShape.properties)==null?void 0:oe.name)||"",J.value=((ue=n.selectedShape.properties)==null?void 0:ue.category)||"forages",Q.value=((te=n.selectedShape.properties)==null?void 0:te.accessLevel)||"visitor"}}),Zs(async()=>{const le=r.filters;$.accessLevels.company=le.accessLevels.company,$.accessLevels.employee=le.accessLevels.employee,$.accessLevels.visitor=le.accessLevels.visitor,$.categories.forages=le.categories.forages,$.categories.clients=le.categories.clients,$.categories.entrepots=le.categories.entrepots,$.categories.livraisons=le.categories.livraisons,$.categories.cultures=le.categories.cultures,$.categories.parcelles=le.categories.parcelles,$.shapeTypes.Polygon=le.shapeTypes.Polygon,$.shapeTypes.Line=le.shapeTypes.Line,$.shapeTypes.Note=le.shapeTypes.Note;try{await a.fetchFilters();const oe=a.getUniqueCategories,ue=[];oe.forEach(te=>{!p.value.includes(te)&&!$.categories[te]&&($.categories[te]=!0,ue.push(te))}),ue.length>0&&(r.updateFilters({categories:$.categories}),Ne("filter-change",$))}catch{}}),vi($,(le,oe)=>{const ue=Object.keys(le.accessLevels).filter(Ve=>oe.accessLevels[Ve]!==le.accessLevels[Ve]),te=Object.keys(le.categories).filter(Ve=>oe.categories[Ve]!==le.categories[Ve]),Se=Object.keys(le.shapeTypes).filter(Ve=>oe.shapeTypes[Ve]!==le.shapeTypes[Ve]);ue.length>0||te.length>0||Se.length>0,C.value==="filters"&&Z()},{deep:!0});const nt=le=>{Ne("tool-selected",n.selectedTool===le?"":le),window.innerWidth<768&&Ne("update:show",!1)},pt=()=>{var le;if(Ne("update:show",!1),n.selectedShape&&((le=n.selectedShape.properties)==null?void 0:le.type)==="Note"){const oe=n.selectedShape.layer;oe&&typeof oe.editNote=="function"&&oe.editNote()}},bt=()=>{var le;if(Ne("update:show",!1),n.selectedShape&&((le=n.selectedShape.properties)==null?void 0:le.type)==="Note"){const oe=n.selectedShape.layer;oe&&typeof oe.openInGoogleMaps=="function"&&oe.openInGoogleMaps()}};return(le,oe)=>{var ue,te;return Ae(),Fe("div",{class:yi(["drawing-tools-panel",{open:t.show}])},[P("div",M9,[oe[30]||(oe[30]=P("div",{class:"flex items-center"},[P("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),P("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),P("button",{onClick:oe[0]||(oe[0]=Se=>le.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},oe[29]||(oe[29]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",A9,[P("div",T9,[P("nav",O9,[P("button",{onClick:oe[1]||(oe[1]=Se=>C.value="tools"),class:yi([C.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},oe[31]||(oe[31]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),P("span",null,"Outils",-1)]),2),t.selectedShape&&((ue=t.selectedShape.properties)==null?void 0:ue.type)!=="Note"?(Ae(),Fe("button",{key:0,onClick:oe[2]||(oe[2]=Se=>C.value="style"),class:yi([C.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},oe[32]||(oe[32]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),P("span",null,"Style",-1)]),2)):Xt("",!0),P("button",{onClick:Ue,class:yi([C.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},oe[33]||(oe[33]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),P("span",null,"Filtres",-1)]),2)])]),P("div",D9,[C.value==="tools"?(Ae(),Fe("div",I9,[P("div",N9,[(Ae(!0),Fe(vn,null,nr(y.filter(Se=>Se.type!=="delete"),Se=>(Ae(),Fe("button",{key:Se.type,class:yi(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===Se.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==Se.type}]),onClick:Ve=>nt(Se.type),title:Se.label},[P("span",{class:"icon",innerHTML:m(Se.type)},null,8,R9)],10,B9))),128))]),t.selectedShape&&X.value&&X.value.type==="Note"?(Ae(),Fe("div",F9,[P("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:pt,title:"Éditer la note"},oe[34]||(oe[34]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),P("span",{class:"text-sm"},"Éditer",-1)])),P("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:bt,title:"Obtenir l'itinéraire"},oe[35]||(oe[35]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),P("span",{class:"text-sm"},"Itinéraire",-1)]))])):Xt("",!0),t.selectedShape?(Ae(),Fe("button",{key:1,class:yi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:oe[3]||(oe[3]=Se=>le.$emit("delete-shape")),title:"Supprimer la forme"},oe[36]||(oe[36]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),P("span",{class:"text-sm"},"Supprimer",-1)]),2)):Xt("",!0),t.selectedShape&&X.value?(Ae(),Fe("div",j9)):Xt("",!0),t.selectedShape&&X.value?(Ae(),Fe("div",z9,[X.value.type!=="Note"?(Ae(),Fe("div",U9,[oe[37]||(oe[37]=P("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),jn(P("input",{type:"text",id:"shapeName","onUpdate:modelValue":oe[4]||(oe[4]=Se=>H.value=Se),onChange:ee,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[fi,H.value]])])):Xt("",!0),P("div",$9,[oe[40]||(oe[40]=P("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),jn(P("select",{id:"shapeCategory","onUpdate:modelValue":oe[5]||(oe[5]=Se=>J.value=Se),onChange:ie,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[oe[38]||(oe[38]=uu('<option value="forages" data-v-2052e3a2>Forages</option><option value="clients" data-v-2052e3a2>Clients</option><option value="entrepots" data-v-2052e3a2>Entrepôts</option><option value="livraisons" data-v-2052e3a2>Lieux de livraison</option><option value="cultures" data-v-2052e3a2>Cultures</option><option value="parcelles" data-v-2052e3a2>Noms des parcelles</option>',6)),(Ae(!0),Fe(vn,null,nr($.categories,(Se,Ve)=>(Ae(),Fe(vn,{key:Ve},[p.value.includes(String(Ve))?Xt("",!0):(Ae(),Fe("option",{key:0,value:String(Ve)},jt(pe(String(Ve))),9,V9))],64))),128)),oe[39]||(oe[39]=P("option",{value:"default"},"Autre",-1))],544),[[os,J.value]])]),P("div",H9,[oe[41]||(oe[41]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),oe[42]||(oe[42]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),jn(P("select",{id:"accessLevel","onUpdate:modelValue":oe[6]||(oe[6]=Se=>Q.value=Se),onChange:fe,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[(Ae(!0),Fe(vn,null,nr(ln(gv),Se=>(Ae(),Fe("option",{key:Se.id,value:Se.id},jt(Se.title)+" - "+jt(Se.description),9,W9))),128))],544),[[os,Q.value]])]),P("div",G9,[X.value.type==="Polygon"?(Ae(),Fe("div",q9,[P("div",Y9,[oe[43]||(oe[43]=P("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),P("span",Z9,jt(ce(X.value.surface||0)),1)]),P("div",K9,[oe[44]||(oe[44]=P("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),P("span",X9,jt(ae(X.value.perimeter||0)),1)])])):X.value.type==="Line"?(Ae(),Fe(vn,{key:1},[oe[45]||(oe[45]=P("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),P("span",J9,jt(ae(X.value.length||0)),1)],64)):Xt("",!0)])])):Xt("",!0)])):Xt("",!0),C.value==="style"&&t.selectedShape&&((te=t.selectedShape.properties)==null?void 0:te.type)!=="Note"?(Ae(),Fe("div",Q9,[P("div",ej,[(Ae(),Fe(vn,null,nr(V,Se=>P("button",{key:Se,class:"w-8 h-8 rounded-full",style:Fl({backgroundColor:Se}),onClick:Ve=>U(Se),title:Se},null,12,tj)),64))]),P("div",nj,[P("div",rj,[oe[46]||(oe[46]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),P("div",ij,[jn(P("input",{type:"color","onUpdate:modelValue":oe[7]||(oe[7]=Se=>S.value=Se),class:"w-16 h-8 rounded border",onChange:oe[8]||(oe[8]=Se=>R({strokeColor:S.value})),title:"Couleur du contour"},null,544),[[fi,S.value]]),jn(P("input",{type:"range","onUpdate:modelValue":oe[9]||(oe[9]=Se=>T.value=Se),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:oe[10]||(oe[10]=Se=>R({strokeWidth:T.value})),title:"Épaisseur du contour"},null,544),[[fi,T.value]])])]),P("div",sj,[oe[47]||(oe[47]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),jn(P("select",{"onUpdate:modelValue":oe[11]||(oe[11]=Se=>O.value=Se),class:"w-full rounded border",onChange:oe[12]||(oe[12]=Se=>R({strokeStyle:O.value}))},[(Ae(),Fe(vn,null,nr(Y,Se=>P("option",{key:Se.value,value:Se.value},jt(Se.label),9,oj)),64))],544),[[os,O.value]])]),z.value?(Ae(),Fe("div",aj,[oe[48]||(oe[48]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),P("div",lj,[jn(P("input",{type:"color","onUpdate:modelValue":oe[13]||(oe[13]=Se=>D.value=Se),class:"w-16 h-8 rounded border",onChange:oe[14]||(oe[14]=Se=>R({fillColor:D.value})),title:"Couleur de remplissage"},null,544),[[fi,D.value]]),jn(P("input",{type:"range","onUpdate:modelValue":oe[15]||(oe[15]=Se=>B.value=Se),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:oe[16]||(oe[16]=Se=>R({fillOpacity:B.value})),title:"Opacité du remplissage"},null,544),[[fi,B.value]])])])):Xt("",!0)])])):Xt("",!0),C.value==="filters"?(Ae(),Fe("div",uj,[P("div",cj,[P("div",hj,[oe[50]||(oe[50]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),oe[51]||(oe[51]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),P("div",null,[jn(P("select",{"onUpdate:modelValue":oe[17]||(oe[17]=Se=>ge.value=Se),onChange:oe[18]||(oe[18]=Se=>se(ge.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},[(Ae(!0),Fe(vn,null,nr(ln(gv).filter(Se=>Se.id!==ln(Zr).PRIVATE),Se=>(Ae(),Fe("option",{key:Se.id,value:Se.id},jt(Se.title)+" ("+jt(Se.description)+") ",9,fj))),128))],544),[[os,ge.value]]),oe[49]||(oe[49]=P("div",{class:"mt-2 text-xs text-gray-500"},[P("p",null,[P("strong",null,"Entreprise"),Rr(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),P("p",null,[P("strong",null,"Salariés"),Rr(" : Vous verrez les éléments pour salariés et visiteurs")]),P("p",null,[P("strong",null,"Visiteurs"),Rr(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),P("div",dj,[oe[60]||(oe[60]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),P("div",pj,[P("label",gj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[19]||(oe[19]=Se=>$.categories.forages=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.forages]]),oe[52]||(oe[52]=P("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),P("label",mj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[20]||(oe[20]=Se=>$.categories.clients=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.clients]]),oe[53]||(oe[53]=P("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),P("label",vj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[21]||(oe[21]=Se=>$.categories.entrepots=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.entrepots]]),oe[54]||(oe[54]=P("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),P("label",yj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[22]||(oe[22]=Se=>$.categories.livraisons=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.livraisons]]),oe[55]||(oe[55]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),P("label",bj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[23]||(oe[23]=Se=>$.categories.cultures=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.cultures]]),oe[56]||(oe[56]=P("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),P("label",_j,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[24]||(oe[24]=Se=>$.categories.parcelles=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.parcelles]]),oe[57]||(oe[57]=P("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ae(!0),Fe(vn,null,nr($.categories,(Se,Ve)=>(Ae(),Fe(vn,{key:Ve},[p.value.includes(String(Ve))?Xt("",!0):(Ae(),Fe("label",wj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":Xe=>$.categories[Ve]=Xe,onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,xj),[[Tl,$.categories[Ve]]]),P("span",Lj,jt(Ve),1)]))],64))),128)),s.value||o.value?(Ae(),Fe("div",Cj,[P("div",Sj,[jn(P("input",{type:"text","onUpdate:modelValue":oe[25]||(oe[25]=Se=>c.name=Se),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[fi,c.name]]),P("button",{onClick:Pe,disabled:!c.name||f.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(Ae(),Fe("svg",kj,oe[59]||(oe[59]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ae(),Fe("svg",Pj,oe[58]||(oe[58]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,Ej)])])):Xt("",!0)])]),P("div",Mj,[oe[64]||(oe[64]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),P("div",Aj,[P("label",Tj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[26]||(oe[26]=Se=>$.shapeTypes.Polygon=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Polygon]]),oe[61]||(oe[61]=P("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),P("label",Oj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[27]||(oe[27]=Se=>$.shapeTypes.Line=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Line]]),oe[62]||(oe[62]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),P("label",Dj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":oe[28]||(oe[28]=Se=>$.shapeTypes.Note=Se),onChange:Le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Note]]),oe[63]||(oe[63]=P("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),P("div",{class:"pt-4 mb-4"},[P("button",{onClick:Oe,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):Xt("",!0)])])],2)}}}),T4=Vc(Ij,[["__scopeId","data-v-2052e3a2"]]),Nj={class:"map-toolbar w-full"},Bj={class:"hidden md:flex items-center space-x-2"},Rj={class:"dropdown"},Fj={class:"dropdown-menu"},jj=["onClick"],zj={key:0,class:"border-l pl-2 flex-1"},Uj={class:"flex items-center"},$j={class:"plan-info"},Vj={class:"plan-name"},Hj={key:0,class:"plan-description"},Wj={class:"border-l pl-2 ml-auto"},Gj={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},qj={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Yj={key:"saving"},Zj={key:"success",class:"save-success-text"},Kj={key:"default"},Xj={class:"md:hidden"},Jj={class:"flex justify-between items-center"},Qj={key:0,class:"truncate mx-2 text-sm font-medium"},ez={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},tz={class:"flex justify-between items-center mb-3 border-b pb-2"},nz={class:"flex flex-col space-y-4"},rz={key:0,class:"flex flex-col pb-3 border-b"},iz={class:"text-sm font-semibold text-gray-800"},sz={key:0,class:"text-xs text-gray-600 mt-1"},oz={class:"flex flex-col"},az={class:"grid grid-cols-3 gap-2"},lz=["onClick"],uz={class:"flex flex-col"},cz={class:"grid grid-cols-2 gap-2"},hz={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fz={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},dz={key:"saving"},pz={key:"success",class:"save-success-text"},gz={key:"default"},mz=_s({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","toggle-edit-mode"],setup(t,{emit:e}){const n=t,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=Tb(n),l=kt("Hybride"),c=kt(!1),f=kt(!1),p=z=>{const H=z.currentTarget,J=H.nextElementSibling;if(J&&J.classList.contains("dropdown-menu")){const Q=H.getBoundingClientRect();J.style.top=`${Q.bottom}px`,J.style.left=`${Q.left}px`}},y={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},m=rr(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),C=z=>{l.value=z,r("change-map-type",z),c.value=!1},S=()=>{r("create-new-plan"),c.value=!1},T=()=>{r("load-plan"),c.value=!1},O=()=>{r("save-plan"),c.value=!1},D=()=>{r("adjust-view"),c.value=!1},B=()=>{f.value=!f.value,r("toggle-edit-mode",f.value),c.value=!1};return Zs(()=>{const z=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);Au(()=>{clearInterval(z)})}),vi(a,z=>{z==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(z,H)=>(Ae(),Fe("div",Nj,[P("div",Bj,[P("div",Rj,[P("button",{class:"btn-toolbar dropdown-toggle",onMouseover:p},[H[2]||(H[2]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),P("span",null,jt(y[l.value]),1)],32),P("div",Fj,[(Ae(),Fe(vn,null,nr(y,(J,Q)=>P("button",{key:Q,class:yi(["dropdown-item",{active:Q===l.value}]),onClick:V=>C(Q)},jt(J),11,jj)),64))])]),ln(s)?(Ae(),Fe("div",zj,[P("div",Uj,[P("div",$j,[P("h2",Vj,jt(ln(s)),1),ln(o)?(Ae(),Fe("p",Hj,jt(ln(o)),1)):Xt("",!0)])])])):Xt("",!0),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:S,class:"btn-toolbar",title:"Nouveau plan"},H[3]||(H[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),P("button",{onClick:T,class:"btn-toolbar",title:"Charger un plan"},H[4]||(H[4]=[uu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b86356dc><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b86356dc></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b86356dc></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b86356dc></path></svg><span class="hidden lg:inline ml-1" data-v-b86356dc>Charger</span>',2)])),P("button",{onClick:O,class:"btn-toolbar",title:"Enregistrer le plan"},H[5]||(H[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:D,class:"btn-toolbar",title:"Ajuster la vue"},H[6]||(H[6]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),P("div",Wj,[P("div",{class:yi(["text-xs hidden lg:flex items-center",{"text-gray-500":!ln(a),"text-primary-600 font-medium":ln(a)==="success","text-blue-600 font-medium":ln(a)==="saving"}])},[ln(a)==="saving"?(Ae(),Fe("svg",Gj,H[7]||(H[7]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Xt("",!0),ln(a)==="success"?(Ae(),Fe("svg",qj,H[8]||(H[8]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Xt("",!0),Kr(y2,{name:"fade-slide",mode:"out-in"},{default:Nl(()=>[ln(a)==="saving"?(Ae(),Fe("span",Yj," Sauvegarde en cours... ")):ln(a)==="success"?(Ae(),Fe("span",Zj," Sauvegarde réussie ! ")):(Ae(),Fe("span",Kj," Dernière modification : "+jt(m.value),1))]),_:1})],2)])]),P("div",Xj,[P("div",Jj,[P("button",{onClick:H[0]||(H[0]=J=>c.value=!c.value),class:"p-2 rounded-md border bg-white shadow-sm"},H[9]||(H[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),ln(s)?(Ae(),Fe("div",Qj,jt(ln(s)),1)):Xt("",!0),P("div",{class:"flex space-x-2"},[P("button",{onClick:S,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},H[10]||(H[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),P("button",{onClick:O,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},H[11]||(H[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),P("button",{onClick:D,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},H[12]||(H[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),c.value?(Ae(),Fe("div",ez,[P("div",tz,[H[14]||(H[14]=P("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),P("button",{onClick:H[1]||(H[1]=J=>c.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},H[13]||(H[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",nz,[ln(s)?(Ae(),Fe("div",rz,[P("h3",iz,jt(ln(s)),1),ln(o)?(Ae(),Fe("p",sz,jt(ln(o)),1)):Xt("",!0)])):Xt("",!0),P("div",oz,[H[15]||(H[15]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),P("div",az,[(Ae(),Fe(vn,null,nr(y,(J,Q)=>P("button",{key:Q,class:yi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":Q===l.value}]),onClick:V=>C(Q)},jt(J),11,lz)),64))])]),P("div",uz,[H[20]||(H[20]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),P("div",cz,[P("button",{onClick:S,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},H[16]||(H[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Rr(" Nouveau ")])),P("button",{onClick:T,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},H[17]||(H[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a2 2 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),P("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),P("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Rr(" Charger ")])),P("button",{onClick:B,class:yi(["px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center",{"bg-blue-50 border-blue-300 text-blue-700":f.value,"bg-white":!f.value}])},[(Ae(),Fe("svg",{xmlns:"http://www.w3.org/2000/svg",class:yi(["h-4 w-4 mr-2",{"text-blue-600":f.value}]),viewBox:"0 0 20 20",fill:"currentColor"},H[18]||(H[18]=[P("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},null,-1)]),2)),H[19]||(H[19]=Rr(" Mode édition "))],2)])]),P("div",{class:yi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!ln(a),"text-primary-600 font-medium":ln(a)==="success","text-blue-600 font-medium":ln(a)==="saving"}])},[ln(a)==="saving"?(Ae(),Fe("svg",hz,H[21]||(H[21]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Xt("",!0),ln(a)==="success"?(Ae(),Fe("svg",fz,H[22]||(H[22]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Xt("",!0),Kr(y2,{name:"fade-slide",mode:"out-in"},{default:Nl(()=>[ln(a)==="saving"?(Ae(),Fe("span",dz," Sauvegarde en cours... ")):ln(a)==="success"?(Ae(),Fe("span",pz," Sauvegarde réussie ! ")):(Ae(),Fe("span",gz," Dernière modification : "+jt(m.value),1))]),_:1})],2)])])):Xt("",!0)])]))}}),vz=Vc(mz,[["__scopeId","data-v-b86356dc"]]);function zf(t,e={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"},n="Date non définie"){if(!t)return n;try{const r=new Date(t);return isNaN(r.getTime())?(console.warn("[formatDate] Date invalide:",t),"Date invalide"):new Intl.DateTimeFormat("fr-FR",e).format(r)}catch(r){return console.error("[formatDate] Erreur lors du formatage de la date:",r),"Date invalide"}}function yz(t){if(!t)return null;try{const e=new Date(t);return isNaN(e.getTime())?(console.warn("[parseDate] Date invalide:",t),null):e}catch(e){return console.error("[parseDate] Erreur lors de la création de la date:",e),null}}const bz={class:"comment-thread"},_z={key:0,class:"space-y-3 mb-4"},wz={class:"flex justify-between items-start"},xz={class:"flex items-center"},Lz={class:"font-medium text-sm text-gray-900"},Cz={class:"flex items-center"},Sz={class:"text-xs text-gray-500"},Ez=["onClick"],Pz={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},kz={key:1,class:"text-center text-sm text-gray-500 italic my-4"},Mz={key:2,class:"mt-3"},Az={class:"flex justify-end mt-2"},Tz=["disabled"],Oz={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},Dz=_s({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;vi(()=>n.comments,C=>{},{deep:!0});const r=e,i=po(),s=yh(),o=ul(),a=kt(""),l=rr(()=>i.isEntreprise||i.isAdmin);function c(C){return i.user&&C.userId===i.user.id||i.isAdmin}async function f(){var C;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(S){if(console.error("Erreur lors de l'ajout du commentaire:",S),(C=S.response)!=null&&C.data){const T=S.response.data;T.note?o.error(`Erreur: ${T.note[0]}`):T.user?o.error(`Erreur: ${T.user[0]}`):T.text?o.error(`Erreur: ${T.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(C){var S;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,C),o.success("Commentaire supprimé"),r("comment-deleted")}catch(T){if(console.error("Erreur lors de la suppression du commentaire:",T),(S=T.response)!=null&&S.data){const O=T.response.data;O.detail?o.error(`Erreur: ${O.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function y(C){switch(C){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function m(C){switch(C){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return C}}return(C,S)=>(Ae(),Fe("div",bz,[C.comments&&C.comments.length>0?(Ae(),Fe("div",_z,[(Ae(!0),Fe(vn,null,nr(C.comments,T=>(Ae(),Fe("div",{key:T.id,class:"bg-gray-50 rounded-lg p-3"},[P("div",wz,[P("div",xz,[P("div",Lz,jt(T.userName),1),P("span",{class:yi(["ml-2 text-xs px-2 py-0.5 rounded-full",y(T.userRole)])},jt(m(T.userRole)),3)]),P("div",Cz,[P("span",Sz,jt(ln(zf)(T.createdAt)),1),c(T)?(Ae(),Fe("button",{key:0,onClick:Rl(O=>p(T.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},S[1]||(S[1]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ez)):Xt("",!0)])]),P("p",Pz,jt(T.text),1)]))),128))])):(Ae(),Fe("div",kz," Aucun commentaire pour le moment ")),l.value?(Ae(),Fe("div",Mz,[jn(P("textarea",{"onUpdate:modelValue":S[0]||(S[0]=T=>a.value=T),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[fi,a.value]]),P("div",Az,[P("button",{type:"button",onClick:Rl(f,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,Tz)])])):(Ae(),Fe("div",Oz," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),Iz={class:"photo-gallery"},Nz={key:0,class:"grid grid-cols-2 gap-2 mb-4"},Bz=["src","onClick"],Rz={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},Fz={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},jz=["onClick"],zz={key:1,class:"text-center text-sm text-gray-500 italic my-4"},Uz={class:"flex space-x-2 mt-3"},$z={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},Vz={class:"relative bg-gray-900",style:{height:"300px"}},Hz=["src"],Wz={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},Gz={key:1,class:"flex space-x-3"},qz={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},Yz={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},Zz=["src"],Kz=_s({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=yh(),s=ul(),o=kt(null),a=kt(null),l=kt(null);let c=null;const f=kt(!1),p=kt(!1),y=kt(null),m=kt(null);function C(Q){y.value=Q,f.value=!0}async function S(Q){var V;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,Q),s.success("Photo supprimée"),r("photo-deleted"),f.value&&((V=y.value)==null?void 0:V.id)===Q&&(f.value=!1,y.value=null)}catch(Y){console.error("Erreur lors de la suppression de la photo:",Y),s.error("Erreur lors de la suppression de la photo")}}function T(){l.value&&l.value.click()}async function O(Q){const V=Q.target;if(!V.files||V.files.length===0)return;const Y=V.files[0];if(!Y.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(Y.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const ge=await D(Y);await i.addPhoto(n.noteId,{url:ge}),V.value="",s.success("Photo ajoutée"),r("photo-added")}catch(ge){console.error("Erreur lors de l'ajout de la photo:",ge),s.error("Erreur lors de l'ajout de la photo")}}function D(Q){return new Promise((V,Y)=>{const ge=new FileReader;ge.onload=()=>V(ge.result),ge.onerror=Y,ge.readAsDataURL(Q)})}vi(p,async Q=>{if(Q){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const V={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(V),o.value&&(o.value.srcObject=c,await new Promise(Y=>{o.value.onloadedmetadata=()=>{o.value.play().then(Y)}}))}catch(V){console.error("Erreur lors de l'accès à la caméra:",V);let Y="Impossible d'accéder à la caméra";V.name==="NotAllowedError"?Y="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":V.name==="NotFoundError"?Y="Aucune caméra n'a été trouvée sur votre appareil.":V.name==="NotSupportedError"&&(Y="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(Y),p.value=!1}}else c&&(c.getTracks().forEach(V=>V.stop()),c=null)});function B(){if(!o.value||!a.value)return;const Q=o.value,V=a.value;V.width=Q.videoWidth,V.height=Q.videoHeight;const Y=V.getContext("2d");Y&&(Y.drawImage(Q,0,0,V.width,V.height),m.value=V.toDataURL("image/jpeg"))}function z(){m.value=null}async function H(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(Q){console.error("Erreur lors de l'ajout de la photo:",Q),s.error("Erreur lors de l'ajout de la photo")}}function J(){p.value=!1}return Au(()=>{c&&(c.getTracks().forEach(Q=>Q.stop()),c=null)}),(Q,V)=>(Ae(),Fe("div",Iz,[Q.photos&&Q.photos.length>0?(Ae(),Fe("div",Nz,[(Ae(!0),Fe(vn,null,nr(Q.photos,Y=>(Ae(),Fe("div",{key:Y.id,class:"relative group"},[P("img",{src:Y.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:ge=>C(Y)},null,8,Bz),P("div",Rz,[P("div",Fz,[P("button",{onClick:Rl(ge=>S(Y.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},V[2]||(V[2]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,jz)])])]))),128))])):(Ae(),Fe("div",zz," Aucune photo pour le moment ")),P("div",Uz,[P("button",{type:"button",onClick:V[0]||(V[0]=Y=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},V[3]||(V[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Rr(" Prendre une photo ")])),P("button",{type:"button",onClick:T,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},V[4]||(V[4]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),Rr(" Téléverser ")])),P("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:O},null,544)]),p.value?(Ae(),Fe("div",$z,[P("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[V[6]||(V[6]=P("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),P("button",{type:"button",onClick:J,class:"text-gray-400 hover:text-gray-500"},V[5]||(V[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",Vz,[m.value?(Ae(),Fe("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,Hz)):(Ae(),Fe("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),P("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),P("div",Wz,[m.value?(Ae(),Fe("div",Gz,[P("button",{type:"button",onClick:z,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),P("button",{type:"button",onClick:H,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ae(),Fe("button",{key:0,type:"button",onClick:B,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},V[7]||(V[7]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Xt("",!0),f.value?(Ae(),Fe("div",qz,[P("div",Yz,[P("button",{type:"button",onClick:V[1]||(V[1]=Y=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},V[8]||(V[8]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?(Ae(),Fe("img",{key:0,src:y.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,Zz)):Xt("",!0)])])):Xt("",!0)]))}}),Xz=Vc(Kz,[["__scopeId","data-v-f87156b4"]]);function cy(t){return[t[1],t[0]]}function t_(t){return[t[1],t[0]]}function jS(t){return{type:"Point",coordinates:cy(t)}}function zS(t){if(Array.isArray(t))return t;if(typeof t=="object"&&t.type==="Point")return t_(t.coordinates);throw new Error("Format de localisation non reconnu")}function US(t){if(Array.isArray(t))return cy(t);if(typeof t=="object"&&t.type==="Point")return t.coordinates;throw new Error("Format de localisation non reconnu")}function Gf(t){if(!t)return null;if(Array.isArray(t))return t.length>=2?{lat:t[0],lng:t[1]}:null;if("lat"in t&&"lng"in t){const{lat:e,lng:n}=t;return typeof e=="number"&&typeof n=="number"?{lat:e,lng:n}:null}if("type"in t&&"coordinates"in t){const{coordinates:e}=t;return Array.isArray(e)&&e.length>=2?{lat:e[1],lng:e[0]}:null}if("coordinates"in t){const{coordinates:e}=t;return Array.isArray(e)&&e.length>=2?{lat:e[1],lng:e[0]}:null}return null}function $S(t,e){try{if(t&&typeof t.getLatLng=="function"){const n=t.getLatLng();if(n&&!isNaN(n.lat)&&!isNaN(n.lng))return{lat:n.lat,lng:n.lng}}else if(t&&t.location)return Gf(t.location);return e&&e.warning("La position est invalide ou manquante"),null}catch(n){return console.error("Error extracting coordinates:",n),e&&e.warning("Erreur lors de l'extraction des coordonnées"),null}}function VS(t){const e=Gf(t);return e?{type:"Point",coordinates:[e.lng,e.lat]}:null}function HS(t,e){const r=Km(e.lat-t.lat),i=Km(e.lng-t.lng),s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(Km(t.lat))*Math.cos(Km(e.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function Km(t){return t*Math.PI/180}const Jz={leafletToGeoJSON:cy,geoJSONToLeaflet:t_,createGeoJSONPoint:jS,getLeafletCoordinates:zS,getGeoJSONCoordinates:US,extractLatLng:Gf,safeGetLatLng:$S,toGeoJSONPoint:VS,calculateDistance:HS},Qz=Object.freeze(Object.defineProperty({__proto__:null,calculateDistance:HS,createGeoJSONPoint:jS,default:Jz,extractLatLng:Gf,geoJSONToLeaflet:t_,getGeoJSONCoordinates:US,getLeafletCoordinates:zS,leafletToGeoJSON:cy,safeGetLatLng:$S,toGeoJSONPoint:VS},Symbol.toStringTag,{value:"Module"})),eU={class:"modal-header"},tU={class:"modal-title"},nU={class:"modal-tabs"},rU={key:0,class:"badge"},iU={key:0,class:"badge"},sU={class:"modal-content"},oU={key:0,class:"tab-content"},aU={class:"form-group"},lU={class:"form-group"},uU={key:0,class:"location-indicator"},cU={class:"form-group"},hU=["value"],fU={key:1,class:"form-group"},dU=["value"],pU={class:"form-group"},gU=["value"],mU={class:"form-group"},vU={class:"color-picker"},yU=["onClick"],bU={key:1,class:"tab-content"},_U={key:2,class:"tab-content"},wU=_s({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=yh(),s=ul(),o=po(),a=kt("info"),l=kt([]),c=kt(null),f=window.console;vi(a,async se=>{se==="comments"&&n.note&&n.note.id&&await m(n.note.id),se==="photos"&&n.note&&n.note.id&&await C(n.note.id)});const p=kt({title:"",description:"",columnId:"",accessLevel:Zr.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function y(se){if(!se)return new Date().toISOString();try{const X=new Date(se);return isNaN(X.getTime())?(f.warn("[NoteEditModal] Date invalide:",se),new Date().toISOString()):X.toISOString()}catch(X){return f.error("[NoteEditModal] Erreur lors de la création de la date:",X),new Date().toISOString()}}async function m(se){try{const U=(await Yo.getComments(se)).data.map(R=>({id:R.id,text:R.text,createdAt:R.created_at,userId:R.user,userName:R.user_name,userRole:R.user_role}));return n.note&&(i.updateNote(n.note.id,{comments:U}),p.value.comments=U),U}catch(X){return f.error("[NoteEditModal] Erreur lors du chargement des commentaires:",X),s.error("Erreur lors du chargement des commentaires"),[]}}async function C(se){try{const U=(await Yo.getPhotos(se)).data.map(R=>({id:R.id,url:R.image,createdAt:R.created_at,caption:R.caption}));return n.note&&(i.updateNote(n.note.id,{photos:U}),p.value.photos=U),U}catch(X){return f.error("[NoteEditModal] Erreur lors du chargement des photos:",X),s.error("Erreur lors du chargement des photos"),[]}}async function S(){if(o.isAdmin)try{const se=await ha.getEntreprises();l.value=se.data}catch(se){f.error("[NoteEditModal] Erreur lors du chargement des entreprises:",se),s.error("Erreur lors du chargement des entreprises")}}Zs(async()=>{var se;if(await i.loadColumns(),await S(),n.note){const X=JSON.parse(JSON.stringify(n.note));X.createdAt=y(X.createdAt),X.updatedAt=y(X.updatedAt),p.value=X,o.isAdmin&&X.enterprise_id&&(c.value=X.enterprise_id),n.note.id&&await Promise.all([m(n.note.id),C(n.note.id)])}else if(n.isNewNote){if(p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Zr.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((se=o.user)!=null&&se.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){const X=Gf(n.location);X?p.value.location=[X.lat,X.lng]:f.error("[NoteEditModal] Format de localisation non reconnu:",n.location)}}else f.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note")});const T=rr(()=>i.getSortedColumns),O=rr(()=>{var X;return((X=p.value.comments)==null?void 0:X.length)||0}),D=rr(()=>{var X;return((X=p.value.photos)==null?void 0:X.length)||0}),B=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],z=se=>{var X;if(p.value.style?(p.value.style.color=se,p.value.style.fillColor=se):p.value.style={color:se,weight:2,opacity:1,fillColor:se,fillOpacity:.6,radius:8},p.value.color=se,(X=n.note)!=null&&X.id){const U=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:se,fillColor:se}}});window.dispatchEvent(U);const R=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(R)}},H=()=>{var se,X,U,R,ee,ie,fe,me,Oe,Z;p.value={title:((se=n.note)==null?void 0:se.title)||"",description:((X=n.note)==null?void 0:X.description)||"",columnId:((U=n.note)==null?void 0:U.columnId)||"",accessLevel:((R=n.note)==null?void 0:R.accessLevel)||"private",style:((ee=n.note)==null?void 0:ee.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:(()=>{var ce;const ae=n.location||((ce=n.note)==null?void 0:ce.location);if(ae){const pe=Gf(ae);return pe?[pe.lat,pe.lng]:null}return null})(),comments:((ie=n.note)==null?void 0:ie.comments)||[],photos:((fe=n.note)==null?void 0:fe.photos)||[],enterprise_id:((me=n.note)==null?void 0:me.enterprise_id)||null},o.isAdmin&&((Oe=n.note)!=null&&Oe.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((Z=o.user)!=null&&Z.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Zs(()=>{H()}),vi(()=>n.note,()=>{H()},{deep:!0});function J(){r("close")}async function Q(){n.note&&n.note.id&&await m(n.note.id)}async function V(){n.note&&n.note.id&&await C(n.note.id)}async function Y(){n.note&&n.note.id&&await m(n.note.id)}async function ge(){n.note&&n.note.id&&await C(n.note.id)}async function $(){var se,X;try{const U=p.value.style.color;p.value.style={...p.value.style,color:U,fillColor:U,weight:2,opacity:1,fillOpacity:.6,radius:8};const R={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:U,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};if(!o.isAdmin&&((se=o.user)!=null&&se.enterprise_id)&&(R.enterprise_id=o.user.enterprise_id),p.value.location){const ie=Gf(p.value.location);ie&&(R.location={type:"Point",coordinates:[ie.lng,ie.lat]})}let ee;if((X=n.note)!=null&&X.id){const ie=n.note.backendId||n.note.id;R.backendId=n.note.backendId,ee=(await Yo.updateNote(ie,R)).data,i.updateNote(ie,{...p.value,...ee,accessLevel:p.value.accessLevel,style:p.value.style,color:U,updatedAt:new Date().toISOString(),enterprise_id:R.enterprise_id,enterprise_name:p.value.enterprise_name});const me=n.note.leafletId||n.note.id,Oe=new CustomEvent("geonote:update",{detail:{noteId:me,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:U}}});window.dispatchEvent(Oe),s.success("Note mise à jour avec succès")}else{if(ee=(await Yo.createNote(R)).data,!ee.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const fe=i.getDefaultColumn,me={...R,id:ee.id,columnId:R.columnId||fe.id,accessLevel:p.value.accessLevel,style:R.style,color:U};i.addNote(me),s.success("Note créée avec succès")}ee&&(!ee.comments&&p.value.comments&&(ee.comments=p.value.comments),!ee.photos&&p.value.photos&&(ee.photos=p.value.photos),ee.color=U,ee.style={...ee.style,color:U,fillColor:U}),r("save",ee),r("close")}catch(U){f.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",U),s.error("Erreur lors de la sauvegarde de la note")}}function W(se){se.stopPropagation()}return(se,X)=>{var U;return Ae(),Fe("div",{class:"modal-overlay",onClick:W},[P("div",{class:"modal-container",onClick:X[8]||(X[8]=Rl(()=>{},["stop"]))},[P("form",{onSubmit:Rl($,["prevent"]),class:"modal-form"},[P("div",eU,[P("h3",tU,jt((U=se.note)!=null&&U.id?"Modifier la note":"Nouvelle note"),1),P("button",{type:"button",onClick:J,class:"close-button"},X[9]||(X[9]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",nU,[P("button",{type:"button",onClick:X[0]||(X[0]=R=>a.value="info"),class:yi(["tab-button",{active:a.value==="info"}])}," Informations ",2),P("button",{type:"button",onClick:X[1]||(X[1]=R=>a.value="comments"),class:yi(["tab-button",{active:a.value==="comments"}])},[X[10]||(X[10]=Rr(" Commentaires ")),O.value>0?(Ae(),Fe("span",rU,jt(O.value),1)):Xt("",!0)],2),P("button",{type:"button",onClick:X[2]||(X[2]=R=>a.value="photos"),class:yi(["tab-button",{active:a.value==="photos"}])},[X[11]||(X[11]=Rr(" Photos ")),D.value>0?(Ae(),Fe("span",iU,jt(D.value),1)):Xt("",!0)],2)]),P("div",sU,[a.value==="info"?(Ae(),Fe("div",oU,[P("div",aU,[X[12]||(X[12]=P("label",{for:"title"},"Titre",-1)),jn(P("input",{type:"text",id:"title","onUpdate:modelValue":X[3]||(X[3]=R=>p.value.title=R),required:""},null,512),[[fi,p.value.title]])]),P("div",lU,[X[13]||(X[13]=P("label",{for:"description"},"Description",-1)),jn(P("textarea",{id:"description","onUpdate:modelValue":X[4]||(X[4]=R=>p.value.description=R),rows:"3"},null,512),[[fi,p.value.description]])]),p.value.location?(Ae(),Fe("div",uU,X[14]||(X[14]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),P("span",null,"Note géolocalisée",-1)]))):Xt("",!0),P("div",cU,[X[15]||(X[15]=P("label",{for:"column"},"État",-1)),jn(P("select",{id:"column","onUpdate:modelValue":X[5]||(X[5]=R=>p.value.columnId=R)},[(Ae(!0),Fe(vn,null,nr(T.value,R=>(Ae(),Fe("option",{key:R.id,value:R.id},jt(R.title),9,hU))),128))],512),[[os,p.value.columnId]])]),ln(o).isAdmin?(Ae(),Fe("div",fU,[X[17]||(X[17]=P("label",{for:"enterprise"},"Entreprise",-1)),jn(P("select",{id:"enterprise","onUpdate:modelValue":X[6]||(X[6]=R=>c.value=R)},[X[16]||(X[16]=P("option",{value:null},"Sélectionner une entreprise",-1)),(Ae(!0),Fe(vn,null,nr(l.value,R=>(Ae(),Fe("option",{key:R.id,value:R.id},jt(R.company_name||`${R.first_name} ${R.last_name}`),9,dU))),128))],512),[[os,c.value]])])):Xt("",!0),P("div",pU,[X[18]||(X[18]=P("label",{for:"accessLevel"},"Niveau d'accès",-1)),jn(P("select",{id:"accessLevel","onUpdate:modelValue":X[7]||(X[7]=R=>p.value.accessLevel=R)},[(Ae(!0),Fe(vn,null,nr(ln(gv),R=>(Ae(),Fe("option",{key:R.id,value:R.id},jt(R.title)+" - "+jt(R.description),9,gU))),128))],512),[[os,p.value.accessLevel]])]),P("div",mU,[X[19]||(X[19]=P("label",null,"Couleur",-1)),P("div",vU,[(Ae(),Fe(vn,null,nr(B,R=>P("div",{key:R,class:yi(["color-option",{selected:p.value.style.color===R}]),style:Fl({backgroundColor:R}),onClick:ee=>z(R)},null,14,yU)),64))])])])):a.value==="comments"?(Ae(),Fe("div",bU,[se.note?(Ae(),Lo(Dz,{key:0,noteId:se.note.id,comments:p.value.comments||[],onCommentAdded:Q,onCommentDeleted:Y},null,8,["noteId","comments"])):Xt("",!0)])):a.value==="photos"?(Ae(),Fe("div",_U,[se.note?(Ae(),Lo(Xz,{key:0,noteId:se.note.id,photos:p.value.photos||[],onPhotoAdded:V,onPhotoDeleted:ge},null,8,["noteId","photos"])):Xt("",!0)])):Xt("",!0)]),P("div",{class:"modal-footer"},[X[20]||(X[20]=P("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),P("button",{type:"button",onClick:J,class:"secondary-button"},"Annuler")])],32)])])}}}),WS=Vc(wU,[["__scopeId","data-v-396bc0d5"]]);(()=>{var xn,Gn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,x)=>{if(g&&typeof g=="object"||typeof g=="function")for(let k of r(g))!s.call(h,k)&&k!==_&&e(h,k,{get:()=>g[k],enumerable:!(x=n(g,k))||x.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),f=o((h,g)=>{function _(x,k){return x===k||x!==x&&k!==k}g.exports=_}),p=o((h,g)=>{var _=f();function x(k,N){for(var G=k.length;G--;)if(_(k[G][0],N))return G;return-1}g.exports=x}),y=o((h,g)=>{var _=p(),x=Array.prototype,k=x.splice;function N(G){var K=this.__data__,he=_(K,G);if(he<0)return!1;var _e=K.length-1;return he==_e?K.pop():k.call(K,he,1),--this.size,!0}g.exports=N}),m=o((h,g)=>{var _=p();function x(k){var N=this.__data__,G=_(N,k);return G<0?void 0:N[G][1]}g.exports=x}),C=o((h,g)=>{var _=p();function x(k){return _(this.__data__,k)>-1}g.exports=x}),S=o((h,g)=>{var _=p();function x(k,N){var G=this.__data__,K=_(G,k);return K<0?(++this.size,G.push([k,N])):G[K][1]=N,this}g.exports=x}),T=o((h,g)=>{var _=c(),x=y(),k=m(),N=C(),G=S();function K(he){var _e=-1,qe=he==null?0:he.length;for(this.clear();++_e<qe;){var ze=he[_e];this.set(ze[0],ze[1])}}K.prototype.clear=_,K.prototype.delete=x,K.prototype.get=k,K.prototype.has=N,K.prototype.set=G,g.exports=K}),O=o((h,g)=>{var _=T();function x(){this.__data__=new _,this.size=0}g.exports=x}),D=o((h,g)=>{function _(x){var k=this.__data__,N=k.delete(x);return this.size=k.size,N}g.exports=_}),B=o((h,g)=>{function _(x){return this.__data__.get(x)}g.exports=_}),z=o((h,g)=>{function _(x){return this.__data__.has(x)}g.exports=_}),H=o((h,g)=>{var _=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo;g.exports=_}),J=o((h,g)=>{var _=H(),x=typeof self=="object"&&self&&self.Object===Object&&self,k=_||x||Function("return this")();g.exports=k}),Q=o((h,g)=>{var _=J(),x=_.Symbol;g.exports=x}),V=o((h,g)=>{var _=Q(),x=Object.prototype,k=x.hasOwnProperty,N=x.toString,G=_?_.toStringTag:void 0;function K(he){var _e=k.call(he,G),qe=he[G];try{he[G]=void 0;var ze=!0}catch{}var gt=N.call(he);return ze&&(_e?he[G]=qe:delete he[G]),gt}g.exports=K}),Y=o((h,g)=>{var _=Object.prototype,x=_.toString;function k(N){return x.call(N)}g.exports=k}),ge=o((h,g)=>{var _=Q(),x=V(),k=Y(),N="[object Null]",G="[object Undefined]",K=_?_.toStringTag:void 0;function he(_e){return _e==null?_e===void 0?G:N:K&&K in Object(_e)?x(_e):k(_e)}g.exports=he}),$=o((h,g)=>{function _(x){var k=typeof x;return x!=null&&(k=="object"||k=="function")}g.exports=_}),W=o((h,g)=>{var _=ge(),x=$(),k="[object AsyncFunction]",N="[object Function]",G="[object GeneratorFunction]",K="[object Proxy]";function he(_e){if(!x(_e))return!1;var qe=_(_e);return qe==N||qe==G||qe==k||qe==K}g.exports=he}),se=o((h,g)=>{var _=J(),x=_["__core-js_shared__"];g.exports=x}),X=o((h,g)=>{var _=se(),x=function(){var N=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}();function k(N){return!!x&&x in N}g.exports=k}),U=o((h,g)=>{var _=Function.prototype,x=_.toString;function k(N){if(N!=null){try{return x.call(N)}catch{}try{return N+""}catch{}}return""}g.exports=k}),R=o((h,g)=>{var _=W(),x=X(),k=$(),N=U(),G=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,he=Function.prototype,_e=Object.prototype,qe=he.toString,ze=_e.hasOwnProperty,gt=RegExp("^"+qe.call(ze).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Yt){if(!k(Yt)||x(Yt))return!1;var fn=_(Yt)?gt:K;return fn.test(N(Yt))}g.exports=At}),ee=o((h,g)=>{function _(x,k){return x==null?void 0:x[k]}g.exports=_}),ie=o((h,g)=>{var _=R(),x=ee();function k(N,G){var K=x(N,G);return _(K)?K:void 0}g.exports=k}),fe=o((h,g)=>{var _=ie(),x=J(),k=_(x,"Map");g.exports=k}),me=o((h,g)=>{var _=ie(),x=_(Object,"create");g.exports=x}),Oe=o((h,g)=>{var _=me();function x(){this.__data__=_?_(null):{},this.size=0}g.exports=x}),Z=o((h,g)=>{function _(x){var k=this.has(x)&&delete this.__data__[x];return this.size-=k?1:0,k}g.exports=_}),ae=o((h,g)=>{var _=me(),x="__lodash_hash_undefined__",k=Object.prototype,N=k.hasOwnProperty;function G(K){var he=this.__data__;if(_){var _e=he[K];return _e===x?void 0:_e}return N.call(he,K)?he[K]:void 0}g.exports=G}),ce=o((h,g)=>{var _=me(),x=Object.prototype,k=x.hasOwnProperty;function N(G){var K=this.__data__;return _?K[G]!==void 0:k.call(K,G)}g.exports=N}),pe=o((h,g)=>{var _=me(),x="__lodash_hash_undefined__";function k(N,G){var K=this.__data__;return this.size+=this.has(N)?0:1,K[N]=_&&G===void 0?x:G,this}g.exports=k}),Le=o((h,g)=>{var _=Oe(),x=Z(),k=ae(),N=ce(),G=pe();function K(he){var _e=-1,qe=he==null?0:he.length;for(this.clear();++_e<qe;){var ze=he[_e];this.set(ze[0],ze[1])}}K.prototype.clear=_,K.prototype.delete=x,K.prototype.get=k,K.prototype.has=N,K.prototype.set=G,g.exports=K}),Pe=o((h,g)=>{var _=Le(),x=T(),k=fe();function N(){this.size=0,this.__data__={hash:new _,map:new(k||x),string:new _}}g.exports=N}),Ue=o((h,g)=>{function _(x){var k=typeof x;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?x!=="__proto__":x===null}g.exports=_}),Ne=o((h,g)=>{var _=Ue();function x(k,N){var G=k.__data__;return _(N)?G[typeof N=="string"?"string":"hash"]:G.map}g.exports=x}),nt=o((h,g)=>{var _=Ne();function x(k){var N=_(this,k).delete(k);return this.size-=N?1:0,N}g.exports=x}),pt=o((h,g)=>{var _=Ne();function x(k){return _(this,k).get(k)}g.exports=x}),bt=o((h,g)=>{var _=Ne();function x(k){return _(this,k).has(k)}g.exports=x}),le=o((h,g)=>{var _=Ne();function x(k,N){var G=_(this,k),K=G.size;return G.set(k,N),this.size+=G.size==K?0:1,this}g.exports=x}),oe=o((h,g)=>{var _=Pe(),x=nt(),k=pt(),N=bt(),G=le();function K(he){var _e=-1,qe=he==null?0:he.length;for(this.clear();++_e<qe;){var ze=he[_e];this.set(ze[0],ze[1])}}K.prototype.clear=_,K.prototype.delete=x,K.prototype.get=k,K.prototype.has=N,K.prototype.set=G,g.exports=K}),ue=o((h,g)=>{var _=T(),x=fe(),k=oe(),N=200;function G(K,he){var _e=this.__data__;if(_e instanceof _){var qe=_e.__data__;if(!x||qe.length<N-1)return qe.push([K,he]),this.size=++_e.size,this;_e=this.__data__=new k(qe)}return _e.set(K,he),this.size=_e.size,this}g.exports=G}),te=o((h,g)=>{var _=T(),x=O(),k=D(),N=B(),G=z(),K=ue();function he(_e){var qe=this.__data__=new _(_e);this.size=qe.size}he.prototype.clear=x,he.prototype.delete=k,he.prototype.get=N,he.prototype.has=G,he.prototype.set=K,g.exports=he}),Se=o((h,g)=>{var _=ie(),x=function(){try{var k=_(Object,"defineProperty");return k({},"",{}),k}catch{}}();g.exports=x}),Ve=o((h,g)=>{var _=Se();function x(k,N,G){N=="__proto__"&&_?_(k,N,{configurable:!0,enumerable:!0,value:G,writable:!0}):k[N]=G}g.exports=x}),Xe=o((h,g)=>{var _=Ve(),x=f();function k(N,G,K){(K!==void 0&&!x(N[G],K)||K===void 0&&!(G in N))&&_(N,G,K)}g.exports=k}),at=o((h,g)=>{function _(x){return function(k,N,G){for(var K=-1,he=Object(k),_e=G(k),qe=_e.length;qe--;){var ze=_e[x?qe:++K];if(N(he[ze],ze,he)===!1)break}return k}}g.exports=_}),ot=o((h,g)=>{var _=at(),x=_();g.exports=x}),dt=o((h,g)=>{var _=J(),x=typeof h=="object"&&h&&!h.nodeType&&h,k=x&&typeof g=="object"&&g&&!g.nodeType&&g,N=k&&k.exports===x,G=N?_.Buffer:void 0,K=G?G.allocUnsafe:void 0;function he(_e,qe){if(qe)return _e.slice();var ze=_e.length,gt=K?K(ze):new _e.constructor(ze);return _e.copy(gt),gt}g.exports=he}),zt=o((h,g)=>{var _=J(),x=_.Uint8Array;g.exports=x}),Rt=o((h,g)=>{var _=zt();function x(k){var N=new k.constructor(k.byteLength);return new _(N).set(new _(k)),N}g.exports=x}),Zt=o((h,g)=>{var _=Rt();function x(k,N){var G=N?_(k.buffer):k.buffer;return new k.constructor(G,k.byteOffset,k.length)}g.exports=x}),Qt=o((h,g)=>{function _(x,k){var N=-1,G=x.length;for(k||(k=Array(G));++N<G;)k[N]=x[N];return k}g.exports=_}),pn=o((h,g)=>{var _=$(),x=Object.create,k=function(){function N(){}return function(G){if(!_(G))return{};if(x)return x(G);N.prototype=G;var K=new N;return N.prototype=void 0,K}}();g.exports=k}),Sn=o((h,g)=>{function _(x,k){return function(N){return x(k(N))}}g.exports=_}),Ze=o((h,g)=>{var _=Sn(),x=_(Object.getPrototypeOf,Object);g.exports=x}),it=o((h,g)=>{var _=Object.prototype;function x(k){var N=k&&k.constructor,G=typeof N=="function"&&N.prototype||_;return k===G}g.exports=x}),Je=o((h,g)=>{var _=pn(),x=Ze(),k=it();function N(G){return typeof G.constructor=="function"&&!k(G)?_(x(G)):{}}g.exports=N}),$t=o((h,g)=>{function _(x){return x!=null&&typeof x=="object"}g.exports=_}),Kt=o((h,g)=>{var _=ge(),x=$t(),k="[object Arguments]";function N(G){return x(G)&&_(G)==k}g.exports=N}),_n=o((h,g)=>{var _=Kt(),x=$t(),k=Object.prototype,N=k.hasOwnProperty,G=k.propertyIsEnumerable,K=_(function(){return arguments}())?_:function(he){return x(he)&&N.call(he,"callee")&&!G.call(he,"callee")};g.exports=K}),gn=o((h,g)=>{var _=Array.isArray;g.exports=_}),bn=o((h,g)=>{var _=9007199254740991;function x(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=_}g.exports=x}),Rn=o((h,g)=>{var _=W(),x=bn();function k(N){return N!=null&&x(N.length)&&!_(N)}g.exports=k}),mn=o((h,g)=>{var _=Rn(),x=$t();function k(N){return x(N)&&_(N)}g.exports=k}),nn=o((h,g)=>{function _(){return!1}g.exports=_}),cn=o((h,g)=>{var _=J(),x=nn(),k=typeof h=="object"&&h&&!h.nodeType&&h,N=k&&typeof g=="object"&&g&&!g.nodeType&&g,G=N&&N.exports===k,K=G?_.Buffer:void 0,he=K?K.isBuffer:void 0,_e=he||x;g.exports=_e}),Nn=o((h,g)=>{var _=ge(),x=Ze(),k=$t(),N="[object Object]",G=Function.prototype,K=Object.prototype,he=G.toString,_e=K.hasOwnProperty,qe=he.call(Object);function ze(gt){if(!k(gt)||_(gt)!=N)return!1;var At=x(gt);if(At===null)return!0;var Yt=_e.call(At,"constructor")&&At.constructor;return typeof Yt=="function"&&Yt instanceof Yt&&he.call(Yt)==qe}g.exports=ze}),er=o((h,g)=>{var _=ge(),x=bn(),k=$t(),N="[object Arguments]",G="[object Array]",K="[object Boolean]",he="[object Date]",_e="[object Error]",qe="[object Function]",ze="[object Map]",gt="[object Number]",At="[object Object]",Yt="[object RegExp]",fn="[object Set]",yn="[object String]",tr="[object WeakMap]",Ge="[object ArrayBuffer]",Ye="[object DataView]",lt="[object Float32Array]",It="[object Float64Array]",yt="[object Int8Array]",Tt="[object Int16Array]",de="[object Int32Array]",Ce="[object Uint8Array]",Ie="[object Uint8ClampedArray]",De="[object Uint16Array]",Re="[object Uint32Array]",je={};je[lt]=je[It]=je[yt]=je[Tt]=je[de]=je[Ce]=je[Ie]=je[De]=je[Re]=!0,je[N]=je[G]=je[Ge]=je[K]=je[Ye]=je[he]=je[_e]=je[qe]=je[ze]=je[gt]=je[At]=je[Yt]=je[fn]=je[yn]=je[tr]=!1;function et(rt){return k(rt)&&x(rt.length)&&!!je[_(rt)]}g.exports=et}),ar=o((h,g)=>{function _(x){return function(k){return x(k)}}g.exports=_}),zn=o((h,g)=>{var _=H(),x=typeof h=="object"&&h&&!h.nodeType&&h,k=x&&typeof g=="object"&&g&&!g.nodeType&&g,N=k&&k.exports===x,G=N&&_.process,K=function(){try{var he=k&&k.require&&k.require("util").types;return he||G&&G.binding&&G.binding("util")}catch{}}();g.exports=K}),Lr=o((h,g)=>{var _=er(),x=ar(),k=zn(),N=k&&k.isTypedArray,G=N?x(N):_;g.exports=G}),ns=o((h,g)=>{function _(x,k){if(!(k==="constructor"&&typeof x[k]=="function")&&k!="__proto__")return x[k]}g.exports=_}),ki=o((h,g)=>{var _=Ve(),x=f(),k=Object.prototype,N=k.hasOwnProperty;function G(K,he,_e){var qe=K[he];(!(N.call(K,he)&&x(qe,_e))||_e===void 0&&!(he in K))&&_(K,he,_e)}g.exports=G}),Js=o((h,g)=>{var _=ki(),x=Ve();function k(N,G,K,he){var _e=!K;K||(K={});for(var qe=-1,ze=G.length;++qe<ze;){var gt=G[qe],At=he?he(K[gt],N[gt],gt,K,N):void 0;At===void 0&&(At=N[gt]),_e?x(K,gt,At):_(K,gt,At)}return K}g.exports=k}),Nt=o((h,g)=>{function _(x,k){for(var N=-1,G=Array(x);++N<x;)G[N]=k(N);return G}g.exports=_}),He=o((h,g)=>{var _=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function k(N,G){var K=typeof N;return G=G??_,!!G&&(K=="number"||K!="symbol"&&x.test(N))&&N>-1&&N%1==0&&N<G}g.exports=k}),Vt=o((h,g)=>{var _=Nt(),x=_n(),k=gn(),N=cn(),G=He(),K=Lr(),he=Object.prototype,_e=he.hasOwnProperty;function qe(ze,gt){var At=k(ze),Yt=!At&&x(ze),fn=!At&&!Yt&&N(ze),yn=!At&&!Yt&&!fn&&K(ze),tr=At||Yt||fn||yn,Ge=tr?_(ze.length,String):[],Ye=Ge.length;for(var lt in ze)(gt||_e.call(ze,lt))&&!(tr&&(lt=="length"||fn&&(lt=="offset"||lt=="parent")||yn&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||G(lt,Ye)))&&Ge.push(lt);return Ge}g.exports=qe}),Bn=o((h,g)=>{function _(x){var k=[];if(x!=null)for(var N in Object(x))k.push(N);return k}g.exports=_}),Vn=o((h,g)=>{var _=$(),x=it(),k=Bn(),N=Object.prototype,G=N.hasOwnProperty;function K(he){if(!_(he))return k(he);var _e=x(he),qe=[];for(var ze in he)ze=="constructor"&&(_e||!G.call(he,ze))||qe.push(ze);return qe}g.exports=K}),Ln=o((h,g)=>{var _=Vt(),x=Vn(),k=Rn();function N(G){return k(G)?_(G,!0):x(G)}g.exports=N}),Pt=o((h,g)=>{var _=Js(),x=Ln();function k(N){return _(N,x(N))}g.exports=k}),wt=o((h,g)=>{var _=Xe(),x=dt(),k=Zt(),N=Qt(),G=Je(),K=_n(),he=gn(),_e=mn(),qe=cn(),ze=W(),gt=$(),At=Nn(),Yt=Lr(),fn=ns(),yn=Pt();function tr(Ge,Ye,lt,It,yt,Tt,de){var Ce=fn(Ge,lt),Ie=fn(Ye,lt),De=de.get(Ie);if(De){_(Ge,lt,De);return}var Re=Tt?Tt(Ce,Ie,lt+"",Ge,Ye,de):void 0,je=Re===void 0;if(je){var et=he(Ie),rt=!et&&qe(Ie),ht=!et&&!rt&&Yt(Ie);Re=Ie,et||rt||ht?he(Ce)?Re=Ce:_e(Ce)?Re=N(Ce):rt?(je=!1,Re=x(Ie,!0)):ht?(je=!1,Re=k(Ie,!0)):Re=[]:At(Ie)||K(Ie)?(Re=Ce,K(Ce)?Re=yn(Ce):(!gt(Ce)||ze(Ce))&&(Re=G(Ie))):je=!1}je&&(de.set(Ie,Re),yt(Re,Ie,It,Tt,de),de.delete(Ie)),_(Ge,lt,Re)}g.exports=tr}),qt=o((h,g)=>{var _=te(),x=Xe(),k=ot(),N=wt(),G=$(),K=Ln(),he=ns();function _e(qe,ze,gt,At,Yt){qe!==ze&&k(ze,function(fn,yn){if(Yt||(Yt=new _),G(fn))N(qe,ze,yn,gt,_e,At,Yt);else{var tr=At?At(he(qe,yn),fn,yn+"",qe,ze,Yt):void 0;tr===void 0&&(tr=fn),x(qe,yn,tr)}},K)}g.exports=_e}),wn=o((h,g)=>{function _(x){return x}g.exports=_}),Tn=o((h,g)=>{function _(x,k,N){switch(N.length){case 0:return x.call(k);case 1:return x.call(k,N[0]);case 2:return x.call(k,N[0],N[1]);case 3:return x.call(k,N[0],N[1],N[2])}return x.apply(k,N)}g.exports=_}),Xn=o((h,g)=>{var _=Tn(),x=Math.max;function k(N,G,K){return G=x(G===void 0?N.length-1:G,0),function(){for(var he=arguments,_e=-1,qe=x(he.length-G,0),ze=Array(qe);++_e<qe;)ze[_e]=he[G+_e];_e=-1;for(var gt=Array(G+1);++_e<G;)gt[_e]=he[_e];return gt[G]=K(ze),_(N,this,gt)}}g.exports=k}),sr=o((h,g)=>{function _(x){return function(){return x}}g.exports=_}),kr=o((h,g)=>{var _=sr(),x=Se(),k=wn(),N=x?function(G,K){return x(G,"toString",{configurable:!0,enumerable:!1,value:_(K),writable:!0})}:k;g.exports=N}),Hn=o((h,g)=>{var _=800,x=16,k=Date.now;function N(G){var K=0,he=0;return function(){var _e=k(),qe=x-(_e-he);if(he=_e,qe>0){if(++K>=_)return arguments[0]}else K=0;return G.apply(void 0,arguments)}}g.exports=N}),_i=o((h,g)=>{var _=kr(),x=Hn(),k=x(_);g.exports=k}),Ur=o((h,g)=>{var _=wn(),x=Xn(),k=_i();function N(G,K){return k(x(G,K,_),G+"")}g.exports=N}),Xo=o((h,g)=>{var _=f(),x=Rn(),k=He(),N=$();function G(K,he,_e){if(!N(_e))return!1;var qe=typeof he;return(qe=="number"?x(_e)&&k(he,_e.length):qe=="string"&&he in _e)?_(_e[he],K):!1}g.exports=G}),lr=o((h,g)=>{var _=Ur(),x=Xo();function k(N){return _(function(G,K){var he=-1,_e=K.length,qe=_e>1?K[_e-1]:void 0,ze=_e>2?K[2]:void 0;for(qe=N.length>3&&typeof qe=="function"?(_e--,qe):void 0,ze&&x(K[0],K[1],ze)&&(qe=_e<3?void 0:qe,_e=1),G=Object(G);++he<_e;){var gt=K[he];gt&&N(G,gt,he,qe)}return G})}g.exports=k}),ur=o((h,g)=>{var _=qt(),x=lr(),k=x(function(N,G,K){_(N,G,K)});g.exports=k}),Bi=o((h,g)=>{var _=ge(),x=$t(),k="[object Symbol]";function N(G){return typeof G=="symbol"||x(G)&&_(G)==k}g.exports=N}),So=o((h,g)=>{var _=gn(),x=Bi(),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,N=/^\w*$/;function G(K,he){if(_(K))return!1;var _e=typeof K;return _e=="number"||_e=="symbol"||_e=="boolean"||K==null||x(K)?!0:N.test(K)||!k.test(K)||he!=null&&K in Object(he)}g.exports=G}),fu=o((h,g)=>{var _=oe(),x="Expected a function";function k(N,G){if(typeof N!="function"||G!=null&&typeof G!="function")throw new TypeError(x);var K=function(){var he=arguments,_e=G?G.apply(this,he):he[0],qe=K.cache;if(qe.has(_e))return qe.get(_e);var ze=N.apply(this,he);return K.cache=qe.set(_e,ze)||qe,ze};return K.cache=new(k.Cache||_),K}k.Cache=_,g.exports=k}),Wc=o((h,g)=>{var _=fu(),x=500;function k(N){var G=_(N,function(he){return K.size===x&&K.clear(),he}),K=G.cache;return G}g.exports=k}),du=o((h,g)=>{var _=Wc(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,N=_(function(G){var K=[];return G.charCodeAt(0)===46&&K.push(""),G.replace(x,function(he,_e,qe,ze){K.push(qe?ze.replace(k,"$1"):_e||he)}),K});g.exports=N}),fc=o((h,g)=>{function _(x,k){for(var N=-1,G=x==null?0:x.length,K=Array(G);++N<G;)K[N]=k(x[N],N,x);return K}g.exports=_}),dc=o((h,g)=>{var _=Q(),x=fc(),k=gn(),N=Bi(),G=_?_.prototype:void 0,K=G?G.toString:void 0;function he(_e){if(typeof _e=="string")return _e;if(k(_e))return x(_e,he)+"";if(N(_e))return K?K.call(_e):"";var qe=_e+"";return qe=="0"&&1/_e==-1/0?"-0":qe}g.exports=he}),cl=o((h,g)=>{var _=dc();function x(k){return k==null?"":_(k)}g.exports=x}),hl=o((h,g)=>{var _=gn(),x=So(),k=du(),N=cl();function G(K,he){return _(K)?K:x(K,he)?[K]:k(N(K))}g.exports=G}),Nu=o((h,g)=>{var _=Bi();function x(k){if(typeof k=="string"||_(k))return k;var N=k+"";return N=="0"&&1/k==-1/0?"-0":N}g.exports=x}),pc=o((h,g)=>{var _=hl(),x=Nu();function k(N,G){G=_(G,N);for(var K=0,he=G.length;N!=null&&K<he;)N=N[x(G[K++])];return K&&K==he?N:void 0}g.exports=k}),Eo=o((h,g)=>{var _=pc();function x(k,N,G){var K=k==null?void 0:_(k,N);return K===void 0?G:K}g.exports=x}),Wr=o((h,g)=>{(function(_,x){typeof h=="object"&&typeof g<"u"?g.exports=x():(_=_||self).RBush=x()})(h,function(){function _(Ge,Ye,lt,It,yt){(function Tt(de,Ce,Ie,De,Re){for(;De>Ie;){if(De-Ie>600){var je=De-Ie+1,et=Ce-Ie+1,rt=Math.log(je),ht=.5*Math.exp(2*rt/3),Lt=.5*Math.sqrt(rt*ht*(je-ht)/je)*(et-je/2<0?-1:1),Ct=Math.max(Ie,Math.floor(Ce-et*ht/je+Lt)),tn=Math.min(De,Math.floor(Ce+(je-et)*ht/je+Lt));Tt(de,Ce,Ct,tn,Re)}var Dn=de[Ce],Fn=Ie,qn=De;for(x(de,Ie,Ce),Re(de[De],Dn)>0&&x(de,Ie,De);Fn<qn;){for(x(de,Fn,qn),Fn++,qn--;Re(de[Fn],Dn)<0;)Fn++;for(;Re(de[qn],Dn)>0;)qn--}Re(de[Ie],Dn)===0?x(de,Ie,qn):x(de,++qn,De),qn<=Ce&&(Ie=qn+1),Ce<=qn&&(De=qn-1)}})(Ge,Ye,lt||0,It||Ge.length-1,yt||k)}function x(Ge,Ye,lt){var It=Ge[Ye];Ge[Ye]=Ge[lt],Ge[lt]=It}function k(Ge,Ye){return Ge<Ye?-1:Ge>Ye?1:0}var N=function(Ge){Ge===void 0&&(Ge=9),this._maxEntries=Math.max(4,Ge),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function G(Ge,Ye,lt){if(!lt)return Ye.indexOf(Ge);for(var It=0;It<Ye.length;It++)if(lt(Ge,Ye[It]))return It;return-1}function K(Ge,Ye){he(Ge,0,Ge.children.length,Ye,Ge)}function he(Ge,Ye,lt,It,yt){yt||(yt=yn(null)),yt.minX=1/0,yt.minY=1/0,yt.maxX=-1/0,yt.maxY=-1/0;for(var Tt=Ye;Tt<lt;Tt++){var de=Ge.children[Tt];_e(yt,Ge.leaf?It(de):de)}return yt}function _e(Ge,Ye){return Ge.minX=Math.min(Ge.minX,Ye.minX),Ge.minY=Math.min(Ge.minY,Ye.minY),Ge.maxX=Math.max(Ge.maxX,Ye.maxX),Ge.maxY=Math.max(Ge.maxY,Ye.maxY),Ge}function qe(Ge,Ye){return Ge.minX-Ye.minX}function ze(Ge,Ye){return Ge.minY-Ye.minY}function gt(Ge){return(Ge.maxX-Ge.minX)*(Ge.maxY-Ge.minY)}function At(Ge){return Ge.maxX-Ge.minX+(Ge.maxY-Ge.minY)}function Yt(Ge,Ye){return Ge.minX<=Ye.minX&&Ge.minY<=Ye.minY&&Ye.maxX<=Ge.maxX&&Ye.maxY<=Ge.maxY}function fn(Ge,Ye){return Ye.minX<=Ge.maxX&&Ye.minY<=Ge.maxY&&Ye.maxX>=Ge.minX&&Ye.maxY>=Ge.minY}function yn(Ge){return{children:Ge,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function tr(Ge,Ye,lt,It,yt){for(var Tt=[Ye,lt];Tt.length;)if(!((lt=Tt.pop())-(Ye=Tt.pop())<=It)){var de=Ye+Math.ceil((lt-Ye)/It/2)*It;_(Ge,de,Ye,lt,yt),Tt.push(Ye,de,de,lt)}}return N.prototype.all=function(){return this._all(this.data,[])},N.prototype.search=function(Ge){var Ye=this.data,lt=[];if(!fn(Ge,Ye))return lt;for(var It=this.toBBox,yt=[];Ye;){for(var Tt=0;Tt<Ye.children.length;Tt++){var de=Ye.children[Tt],Ce=Ye.leaf?It(de):de;fn(Ge,Ce)&&(Ye.leaf?lt.push(de):Yt(Ge,Ce)?this._all(de,lt):yt.push(de))}Ye=yt.pop()}return lt},N.prototype.collides=function(Ge){var Ye=this.data;if(!fn(Ge,Ye))return!1;for(var lt=[];Ye;){for(var It=0;It<Ye.children.length;It++){var yt=Ye.children[It],Tt=Ye.leaf?this.toBBox(yt):yt;if(fn(Ge,Tt)){if(Ye.leaf||Yt(Ge,Tt))return!0;lt.push(yt)}}Ye=lt.pop()}return!1},N.prototype.load=function(Ge){if(!Ge||!Ge.length)return this;if(Ge.length<this._minEntries){for(var Ye=0;Ye<Ge.length;Ye++)this.insert(Ge[Ye]);return this}var lt=this._build(Ge.slice(),0,Ge.length-1,0);if(this.data.children.length)if(this.data.height===lt.height)this._splitRoot(this.data,lt);else{if(this.data.height<lt.height){var It=this.data;this.data=lt,lt=It}this._insert(lt,this.data.height-lt.height-1,!0)}else this.data=lt;return this},N.prototype.insert=function(Ge){return Ge&&this._insert(Ge,this.data.height-1),this},N.prototype.clear=function(){return this.data=yn([]),this},N.prototype.remove=function(Ge,Ye){if(!Ge)return this;for(var lt,It,yt,Tt=this.data,de=this.toBBox(Ge),Ce=[],Ie=[];Tt||Ce.length;){if(Tt||(Tt=Ce.pop(),It=Ce[Ce.length-1],lt=Ie.pop(),yt=!0),Tt.leaf){var De=G(Ge,Tt.children,Ye);if(De!==-1)return Tt.children.splice(De,1),Ce.push(Tt),this._condense(Ce),this}yt||Tt.leaf||!Yt(Tt,de)?It?(lt++,Tt=It.children[lt],yt=!1):Tt=null:(Ce.push(Tt),Ie.push(lt),lt=0,It=Tt,Tt=Tt.children[0])}return this},N.prototype.toBBox=function(Ge){return Ge},N.prototype.compareMinX=function(Ge,Ye){return Ge.minX-Ye.minX},N.prototype.compareMinY=function(Ge,Ye){return Ge.minY-Ye.minY},N.prototype.toJSON=function(){return this.data},N.prototype.fromJSON=function(Ge){return this.data=Ge,this},N.prototype._all=function(Ge,Ye){for(var lt=[];Ge;)Ge.leaf?Ye.push.apply(Ye,Ge.children):lt.push.apply(lt,Ge.children),Ge=lt.pop();return Ye},N.prototype._build=function(Ge,Ye,lt,It){var yt,Tt=lt-Ye+1,de=this._maxEntries;if(Tt<=de)return K(yt=yn(Ge.slice(Ye,lt+1)),this.toBBox),yt;It||(It=Math.ceil(Math.log(Tt)/Math.log(de)),de=Math.ceil(Tt/Math.pow(de,It-1))),(yt=yn([])).leaf=!1,yt.height=It;var Ce=Math.ceil(Tt/de),Ie=Ce*Math.ceil(Math.sqrt(de));tr(Ge,Ye,lt,Ie,this.compareMinX);for(var De=Ye;De<=lt;De+=Ie){var Re=Math.min(De+Ie-1,lt);tr(Ge,De,Re,Ce,this.compareMinY);for(var je=De;je<=Re;je+=Ce){var et=Math.min(je+Ce-1,Re);yt.children.push(this._build(Ge,je,et,It-1))}}return K(yt,this.toBBox),yt},N.prototype._chooseSubtree=function(Ge,Ye,lt,It){for(;It.push(Ye),!Ye.leaf&&It.length-1!==lt;){for(var yt=1/0,Tt=1/0,de=void 0,Ce=0;Ce<Ye.children.length;Ce++){var Ie=Ye.children[Ce],De=gt(Ie),Re=(je=Ge,et=Ie,(Math.max(et.maxX,je.maxX)-Math.min(et.minX,je.minX))*(Math.max(et.maxY,je.maxY)-Math.min(et.minY,je.minY))-De);Re<Tt?(Tt=Re,yt=De<yt?De:yt,de=Ie):Re===Tt&&De<yt&&(yt=De,de=Ie)}Ye=de||Ye.children[0]}var je,et;return Ye},N.prototype._insert=function(Ge,Ye,lt){var It=lt?Ge:this.toBBox(Ge),yt=[],Tt=this._chooseSubtree(It,this.data,Ye,yt);for(Tt.children.push(Ge),_e(Tt,It);Ye>=0&&yt[Ye].children.length>this._maxEntries;)this._split(yt,Ye),Ye--;this._adjustParentBBoxes(It,yt,Ye)},N.prototype._split=function(Ge,Ye){var lt=Ge[Ye],It=lt.children.length,yt=this._minEntries;this._chooseSplitAxis(lt,yt,It);var Tt=this._chooseSplitIndex(lt,yt,It),de=yn(lt.children.splice(Tt,lt.children.length-Tt));de.height=lt.height,de.leaf=lt.leaf,K(lt,this.toBBox),K(de,this.toBBox),Ye?Ge[Ye-1].children.push(de):this._splitRoot(lt,de)},N.prototype._splitRoot=function(Ge,Ye){this.data=yn([Ge,Ye]),this.data.height=Ge.height+1,this.data.leaf=!1,K(this.data,this.toBBox)},N.prototype._chooseSplitIndex=function(Ge,Ye,lt){for(var It,yt,Tt,de,Ce,Ie,De,Re=1/0,je=1/0,et=Ye;et<=lt-Ye;et++){var rt=he(Ge,0,et,this.toBBox),ht=he(Ge,et,lt,this.toBBox),Lt=(yt=rt,Tt=ht,de=void 0,Ce=void 0,Ie=void 0,De=void 0,de=Math.max(yt.minX,Tt.minX),Ce=Math.max(yt.minY,Tt.minY),Ie=Math.min(yt.maxX,Tt.maxX),De=Math.min(yt.maxY,Tt.maxY),Math.max(0,Ie-de)*Math.max(0,De-Ce)),Ct=gt(rt)+gt(ht);Lt<Re?(Re=Lt,It=et,je=Ct<je?Ct:je):Lt===Re&&Ct<je&&(je=Ct,It=et)}return It||lt-Ye},N.prototype._chooseSplitAxis=function(Ge,Ye,lt){var It=Ge.leaf?this.compareMinX:qe,yt=Ge.leaf?this.compareMinY:ze;this._allDistMargin(Ge,Ye,lt,It)<this._allDistMargin(Ge,Ye,lt,yt)&&Ge.children.sort(It)},N.prototype._allDistMargin=function(Ge,Ye,lt,It){Ge.children.sort(It);for(var yt=this.toBBox,Tt=he(Ge,0,Ye,yt),de=he(Ge,lt-Ye,lt,yt),Ce=At(Tt)+At(de),Ie=Ye;Ie<lt-Ye;Ie++){var De=Ge.children[Ie];_e(Tt,Ge.leaf?yt(De):De),Ce+=At(Tt)}for(var Re=lt-Ye-1;Re>=Ye;Re--){var je=Ge.children[Re];_e(de,Ge.leaf?yt(je):je),Ce+=At(de)}return Ce},N.prototype._adjustParentBBoxes=function(Ge,Ye,lt){for(var It=lt;It>=0;It--)_e(Ye[It],Ge)},N.prototype._condense=function(Ge){for(var Ye=Ge.length-1,lt=void 0;Ye>=0;Ye--)Ge[Ye].children.length===0?Ye>0?(lt=Ge[Ye-1].children).splice(lt.indexOf(Ge[Ye]),1):this.clear():K(Ge[Ye],this.toBBox)},N})}),fr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(De,Re,je){je===void 0&&(je={});var et={type:"Feature"};return(je.id===0||je.id)&&(et.id=je.id),je.bbox&&(et.bbox=je.bbox),et.properties=Re||{},et.geometry=De,et}h.feature=g;function _(De,Re,je){switch(De){case"Point":return x(Re).geometry;case"LineString":return K(Re).geometry;case"Polygon":return N(Re).geometry;case"MultiPoint":return ze(Re).geometry;case"MultiLineString":return qe(Re).geometry;case"MultiPolygon":return gt(Re).geometry;default:throw new Error(De+" is invalid")}}h.geometry=_;function x(De,Re,je){if(je===void 0&&(je={}),!De)throw new Error("coordinates is required");if(!Array.isArray(De))throw new Error("coordinates must be an Array");if(De.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(De[0])||!Tt(De[1]))throw new Error("coordinates must contain numbers");var et={type:"Point",coordinates:De};return g(et,Re,je)}h.point=x;function k(De,Re,je){return je===void 0&&(je={}),_e(De.map(function(et){return x(et,Re)}),je)}h.points=k;function N(De,Re,je){je===void 0&&(je={});for(var et=0,rt=De;et<rt.length;et++){var ht=rt[et];if(ht.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Lt=0;Lt<ht[ht.length-1].length;Lt++)if(ht[ht.length-1][Lt]!==ht[0][Lt])throw new Error("First and last Position are not equivalent.")}var Ct={type:"Polygon",coordinates:De};return g(Ct,Re,je)}h.polygon=N;function G(De,Re,je){return je===void 0&&(je={}),_e(De.map(function(et){return N(et,Re)}),je)}h.polygons=G;function K(De,Re,je){if(je===void 0&&(je={}),De.length<2)throw new Error("coordinates must be an array of two or more positions");var et={type:"LineString",coordinates:De};return g(et,Re,je)}h.lineString=K;function he(De,Re,je){return je===void 0&&(je={}),_e(De.map(function(et){return K(et,Re)}),je)}h.lineStrings=he;function _e(De,Re){Re===void 0&&(Re={});var je={type:"FeatureCollection"};return Re.id&&(je.id=Re.id),Re.bbox&&(je.bbox=Re.bbox),je.features=De,je}h.featureCollection=_e;function qe(De,Re,je){je===void 0&&(je={});var et={type:"MultiLineString",coordinates:De};return g(et,Re,je)}h.multiLineString=qe;function ze(De,Re,je){je===void 0&&(je={});var et={type:"MultiPoint",coordinates:De};return g(et,Re,je)}h.multiPoint=ze;function gt(De,Re,je){je===void 0&&(je={});var et={type:"MultiPolygon",coordinates:De};return g(et,Re,je)}h.multiPolygon=gt;function At(De,Re,je){je===void 0&&(je={});var et={type:"GeometryCollection",geometries:De};return g(et,Re,je)}h.geometryCollection=At;function Yt(De,Re){if(Re===void 0&&(Re=0),Re&&!(Re>=0))throw new Error("precision must be a positive number");var je=Math.pow(10,Re||0);return Math.round(De*je)/je}h.round=Yt;function fn(De,Re){Re===void 0&&(Re="kilometers");var je=h.factors[Re];if(!je)throw new Error(Re+" units is invalid");return De*je}h.radiansToLength=fn;function yn(De,Re){Re===void 0&&(Re="kilometers");var je=h.factors[Re];if(!je)throw new Error(Re+" units is invalid");return De/je}h.lengthToRadians=yn;function tr(De,Re){return Ye(yn(De,Re))}h.lengthToDegrees=tr;function Ge(De){var Re=De%360;return Re<0&&(Re+=360),Re}h.bearingToAzimuth=Ge;function Ye(De){var Re=De%(2*Math.PI);return Re*180/Math.PI}h.radiansToDegrees=Ye;function lt(De){var Re=De%360;return Re*Math.PI/180}h.degreesToRadians=lt;function It(De,Re,je){if(Re===void 0&&(Re="kilometers"),je===void 0&&(je="kilometers"),!(De>=0))throw new Error("length must be a positive number");return fn(yn(De,Re),je)}h.convertLength=It;function yt(De,Re,je){if(Re===void 0&&(Re="meters"),je===void 0&&(je="kilometers"),!(De>=0))throw new Error("area must be a positive number");var et=h.areaFactors[Re];if(!et)throw new Error("invalid original units");var rt=h.areaFactors[je];if(!rt)throw new Error("invalid final units");return De/et*rt}h.convertArea=yt;function Tt(De){return!isNaN(De)&&De!==null&&!Array.isArray(De)}h.isNumber=Tt;function de(De){return!!De&&De.constructor===Object}h.isObject=de;function Ce(De){if(!De)throw new Error("bbox is required");if(!Array.isArray(De))throw new Error("bbox must be an Array");if(De.length!==4&&De.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");De.forEach(function(Re){if(!Tt(Re))throw new Error("bbox must only contain numbers")})}h.validateBBox=Ce;function Ie(De){if(!De)throw new Error("id is required");if(["string","number"].indexOf(typeof De)===-1)throw new Error("id must be a number or a string")}h.validateId=Ie}),$a=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=fr();function _(Ye,lt,It){if(Ye!==null)for(var yt,Tt,de,Ce,Ie,De,Re,je=0,et=0,rt,ht=Ye.type,Lt=ht==="FeatureCollection",Ct=ht==="Feature",tn=Lt?Ye.features.length:1,Dn=0;Dn<tn;Dn++){Re=Lt?Ye.features[Dn].geometry:Ct?Ye.geometry:Ye,rt=Re?Re.type==="GeometryCollection":!1,Ie=rt?Re.geometries.length:1;for(var Fn=0;Fn<Ie;Fn++){var qn=0,Jr=0;if(Ce=rt?Re.geometries[Fn]:Re,Ce!==null){De=Ce.coordinates;var ui=Ce.type;switch(je=It&&(ui==="Polygon"||ui==="MultiPolygon")?1:0,ui){case null:break;case"Point":if(lt(De,et,Dn,qn,Jr)===!1)return!1;et++,qn++;break;case"LineString":case"MultiPoint":for(yt=0;yt<De.length;yt++){if(lt(De[yt],et,Dn,qn,Jr)===!1)return!1;et++,ui==="MultiPoint"&&qn++}ui==="LineString"&&qn++;break;case"Polygon":case"MultiLineString":for(yt=0;yt<De.length;yt++){for(Tt=0;Tt<De[yt].length-je;Tt++){if(lt(De[yt][Tt],et,Dn,qn,Jr)===!1)return!1;et++}ui==="MultiLineString"&&qn++,ui==="Polygon"&&Jr++}ui==="Polygon"&&qn++;break;case"MultiPolygon":for(yt=0;yt<De.length;yt++){for(Jr=0,Tt=0;Tt<De[yt].length;Tt++){for(de=0;de<De[yt][Tt].length-je;de++){if(lt(De[yt][Tt][de],et,Dn,qn,Jr)===!1)return!1;et++}Jr++}qn++}break;case"GeometryCollection":for(yt=0;yt<Ce.geometries.length;yt++)if(_(Ce.geometries[yt],lt,It)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(Ye,lt,It,yt){var Tt=It;return _(Ye,function(de,Ce,Ie,De,Re){Ce===0&&It===void 0?Tt=de:Tt=lt(Tt,de,Ce,Ie,De,Re)},yt),Tt}function k(Ye,lt){var It;switch(Ye.type){case"FeatureCollection":for(It=0;It<Ye.features.length&&lt(Ye.features[It].properties,It)!==!1;It++);break;case"Feature":lt(Ye.properties,0);break}}function N(Ye,lt,It){var yt=It;return k(Ye,function(Tt,de){de===0&&It===void 0?yt=Tt:yt=lt(yt,Tt,de)}),yt}function G(Ye,lt){if(Ye.type==="Feature")lt(Ye,0);else if(Ye.type==="FeatureCollection")for(var It=0;It<Ye.features.length&&lt(Ye.features[It],It)!==!1;It++);}function K(Ye,lt,It){var yt=It;return G(Ye,function(Tt,de){de===0&&It===void 0?yt=Tt:yt=lt(yt,Tt,de)}),yt}function he(Ye){var lt=[];return _(Ye,function(It){lt.push(It)}),lt}function _e(Ye,lt){var It,yt,Tt,de,Ce,Ie,De,Re,je,et,rt=0,ht=Ye.type==="FeatureCollection",Lt=Ye.type==="Feature",Ct=ht?Ye.features.length:1;for(It=0;It<Ct;It++){for(Ie=ht?Ye.features[It].geometry:Lt?Ye.geometry:Ye,Re=ht?Ye.features[It].properties:Lt?Ye.properties:{},je=ht?Ye.features[It].bbox:Lt?Ye.bbox:void 0,et=ht?Ye.features[It].id:Lt?Ye.id:void 0,De=Ie?Ie.type==="GeometryCollection":!1,Ce=De?Ie.geometries.length:1,Tt=0;Tt<Ce;Tt++){if(de=De?Ie.geometries[Tt]:Ie,de===null){if(lt(null,rt,Re,je,et)===!1)return!1;continue}switch(de.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(lt(de,rt,Re,je,et)===!1)return!1;break}case"GeometryCollection":{for(yt=0;yt<de.geometries.length;yt++)if(lt(de.geometries[yt],rt,Re,je,et)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}rt++}}function qe(Ye,lt,It){var yt=It;return _e(Ye,function(Tt,de,Ce,Ie,De){de===0&&It===void 0?yt=Tt:yt=lt(yt,Tt,de,Ce,Ie,De)}),yt}function ze(Ye,lt){_e(Ye,function(It,yt,Tt,de,Ce){var Ie=It===null?null:It.type;switch(Ie){case null:case"Point":case"LineString":case"Polygon":return lt(g.feature(It,Tt,{bbox:de,id:Ce}),yt,0)===!1?!1:void 0}var De;switch(Ie){case"MultiPoint":De="Point";break;case"MultiLineString":De="LineString";break;case"MultiPolygon":De="Polygon";break}for(var Re=0;Re<It.coordinates.length;Re++){var je=It.coordinates[Re],et={type:De,coordinates:je};if(lt(g.feature(et,Tt),yt,Re)===!1)return!1}})}function gt(Ye,lt,It){var yt=It;return ze(Ye,function(Tt,de,Ce){de===0&&Ce===0&&It===void 0?yt=Tt:yt=lt(yt,Tt,de,Ce)}),yt}function At(Ye,lt){ze(Ye,function(It,yt,Tt){var de=0;if(It.geometry){var Ce=It.geometry.type;if(!(Ce==="Point"||Ce==="MultiPoint")){var Ie,De=0,Re=0,je=0;if(_(It,function(et,rt,ht,Lt,Ct){if(Ie===void 0||yt>De||Lt>Re||Ct>je){Ie=et,De=yt,Re=Lt,je=Ct,de=0;return}var tn=g.lineString([Ie,et],It.properties);if(lt(tn,yt,Tt,Ct,de)===!1)return!1;de++,Ie=et})===!1)return!1}}})}function Yt(Ye,lt,It){var yt=It,Tt=!1;return At(Ye,function(de,Ce,Ie,De,Re){Tt===!1&&It===void 0?yt=de:yt=lt(yt,de,Ce,Ie,De,Re),Tt=!0}),yt}function fn(Ye,lt){if(!Ye)throw new Error("geojson is required");ze(Ye,function(It,yt,Tt){if(It.geometry!==null){var de=It.geometry.type,Ce=It.geometry.coordinates;switch(de){case"LineString":if(lt(It,yt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Ie=0;Ie<Ce.length;Ie++)if(lt(g.lineString(Ce[Ie],It.properties),yt,Tt,Ie)===!1)return!1;break}}})}function yn(Ye,lt,It){var yt=It;return fn(Ye,function(Tt,de,Ce,Ie){de===0&&It===void 0?yt=Tt:yt=lt(yt,Tt,de,Ce,Ie)}),yt}function tr(Ye,lt){if(lt=lt||{},!g.isObject(lt))throw new Error("options is invalid");var It=lt.featureIndex||0,yt=lt.multiFeatureIndex||0,Tt=lt.geometryIndex||0,de=lt.segmentIndex||0,Ce=lt.properties,Ie;switch(Ye.type){case"FeatureCollection":It<0&&(It=Ye.features.length+It),Ce=Ce||Ye.features[It].properties,Ie=Ye.features[It].geometry;break;case"Feature":Ce=Ce||Ye.properties,Ie=Ye.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ie=Ye;break;default:throw new Error("geojson is invalid")}if(Ie===null)return null;var De=Ie.coordinates;switch(Ie.type){case"Point":case"MultiPoint":return null;case"LineString":return de<0&&(de=De.length+de-1),g.lineString([De[de],De[de+1]],Ce,lt);case"Polygon":return Tt<0&&(Tt=De.length+Tt),de<0&&(de=De[Tt].length+de-1),g.lineString([De[Tt][de],De[Tt][de+1]],Ce,lt);case"MultiLineString":return yt<0&&(yt=De.length+yt),de<0&&(de=De[yt].length+de-1),g.lineString([De[yt][de],De[yt][de+1]],Ce,lt);case"MultiPolygon":return yt<0&&(yt=De.length+yt),Tt<0&&(Tt=De[yt].length+Tt),de<0&&(de=De[yt][Tt].length-de-1),g.lineString([De[yt][Tt][de],De[yt][Tt][de+1]],Ce,lt)}throw new Error("geojson is invalid")}function Ge(Ye,lt){if(lt=lt||{},!g.isObject(lt))throw new Error("options is invalid");var It=lt.featureIndex||0,yt=lt.multiFeatureIndex||0,Tt=lt.geometryIndex||0,de=lt.coordIndex||0,Ce=lt.properties,Ie;switch(Ye.type){case"FeatureCollection":It<0&&(It=Ye.features.length+It),Ce=Ce||Ye.features[It].properties,Ie=Ye.features[It].geometry;break;case"Feature":Ce=Ce||Ye.properties,Ie=Ye.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ie=Ye;break;default:throw new Error("geojson is invalid")}if(Ie===null)return null;var De=Ie.coordinates;switch(Ie.type){case"Point":return g.point(De,Ce,lt);case"MultiPoint":return yt<0&&(yt=De.length+yt),g.point(De[yt],Ce,lt);case"LineString":return de<0&&(de=De.length+de),g.point(De[de],Ce,lt);case"Polygon":return Tt<0&&(Tt=De.length+Tt),de<0&&(de=De[Tt].length+de),g.point(De[Tt][de],Ce,lt);case"MultiLineString":return yt<0&&(yt=De.length+yt),de<0&&(de=De[yt].length+de),g.point(De[yt][de],Ce,lt);case"MultiPolygon":return yt<0&&(yt=De.length+yt),Tt<0&&(Tt=De[yt].length+Tt),de<0&&(de=De[yt][Tt].length-de),g.point(De[yt][Tt][de],Ce,lt)}throw new Error("geojson is invalid")}h.coordAll=he,h.coordEach=_,h.coordReduce=x,h.featureEach=G,h.featureReduce=K,h.findPoint=Ge,h.findSegment=tr,h.flattenEach=ze,h.flattenReduce=gt,h.geomEach=_e,h.geomReduce=qe,h.lineEach=fn,h.lineReduce=yn,h.propEach=k,h.propReduce=N,h.segmentEach=At,h.segmentReduce=Yt}),da=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=$a();function _(x){var k=[1/0,1/0,-1/0,-1/0];return g.coordEach(x,function(N){k[0]>N[0]&&(k[0]=N[0]),k[1]>N[1]&&(k[1]=N[1]),k[2]<N[0]&&(k[2]=N[0]),k[3]<N[1]&&(k[3]=N[1])}),k}_.default=_,h.default=_}),Io=o((h,g)=>{var _=Wr(),x=fr(),k=$a(),N=da().default,G=k.featureEach;k.coordEach,x.polygon;var K=x.featureCollection;function he(_e){var qe=new _(_e);return qe.insert=function(ze){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:N(ze),_.prototype.insert.call(this,ze)},qe.load=function(ze){var gt=[];return Array.isArray(ze)?ze.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:N(At),gt.push(At)}):G(ze,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:N(At),gt.push(At)}),_.prototype.load.call(this,gt)},qe.remove=function(ze,gt){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:N(ze),_.prototype.remove.call(this,ze,gt)},qe.clear=function(){return _.prototype.clear.call(this)},qe.search=function(ze){var gt=_.prototype.search.call(this,this.toBBox(ze));return K(gt)},qe.collides=function(ze){return _.prototype.collides.call(this,this.toBBox(ze))},qe.all=function(){var ze=_.prototype.all.call(this);return K(ze)},qe.toJSON=function(){return _.prototype.toJSON.call(this)},qe.fromJSON=function(ze){return _.prototype.fromJSON.call(this,ze)},qe.toBBox=function(ze){var gt;if(ze.bbox)gt=ze.bbox;else if(Array.isArray(ze)&&ze.length===4)gt=ze;else if(Array.isArray(ze)&&ze.length===6)gt=[ze[0],ze[1],ze[3],ze[4]];else if(ze.type==="Feature")gt=N(ze);else if(ze.type==="FeatureCollection")gt=N(ze);else throw new Error("invalid geojson");return{minX:gt[0],minY:gt[1],maxX:gt[2],maxY:gt[3]}},qe}g.exports=he,g.exports.default=he});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],k=0;k<_;k++)if(h.call(x,g[k],k,g))return k;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],k=0;k<_;k++){var N=g[k];if(h.call(x,N,k,g))return N}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(h[x]=_[x])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),x=_.length>>>0;if(x===0)return!1;var k=g|0,N=Math.max(k>=0?k:x-Math.abs(k),0);function G(K,he){return K===he||typeof K=="number"&&typeof he=="number"&&isNaN(K)&&isNaN(he)}for(;N<x;){if(G(_[N],h))return!0;N++}return!1}});var Ul={version:"2.18.3"},gr=l(ur()),Gr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Va={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},ws={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},xs={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Bu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},fl={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},pa={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Ti={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},No={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Ha={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},mo={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},pu={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Wa={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ru={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Bo={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},ga={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Ga={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},$l={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},rs={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},gc={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},gu={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},cr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},mr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Ro={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},$r={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Fu={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},dl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},pl=Wa,Fo={en:Gr,de:Va,it:ws,id:xs,ro:Bu,ru:fl,es:pa,nl:Ti,fr:No,pt:pl,pt_br:pu,pt_pt:Wa,zh:Ha,zh_tw:mo,pl:Ru,sv:Bo,el:ga,hu:Ga,da:$l,no:rs,fa:gc,ua:gu,tr:cr,cz:mr,ja:Ro,fi:$r,ko:Fu,ky:dl},qa={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},ju=qa,Vl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},dr=Vl,Mr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},Ya=Mr,mc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},Hl=mc,mu=l(ur()),gl={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,x=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:x,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,x="Draw",k={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},x,k)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDrag(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDragEnd(h,g=void 0,_=void 0,x="Edit",k={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},x,k)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,x)},_fireVertexAdded(h,g,_,x="Edit",k={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},x,k)},_fireVertexRemoved(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,x)},_fireVertexClick(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireIntersect(h,g=this._layer,_="Edit",x={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,x)},_fireLayerReset(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",x={}){this.__fire(h,"pm:snapdrag",g,_,x)},_fireSnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:snap",g,_,x)},_fireUnsnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:unsnap",g,_,x)},_fireRotationEnable(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,x)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,x)},_fireRotation(h,g,_,x=this._rotationLayer,k="Rotation",N={}){this.__fire(h,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:x.getLatLngs()},k,N)},_fireRotationEnd(h,g,_,x="Rotation",k={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},x,k)},_fireActionClick(h,g,_,x="Toolbar",k={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},x,k)},_fireButtonClick(h,g,_="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,x)},_fireLangChange(h,g,_,x,k="Global",N={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:x},k,N)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,x)},_fireKeyeventEvent(h,g,_,x="Global",k={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},x,k)},__fire(h,g,_,x,k={}){_=(0,mu.default)(_,k,{source:x}),L.PM.Utils._fireEvent(h,g,_)}},Wl=gl,vu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),Dr=vu,Fi=l(Eo());function Jn(h){let g=L.PM.activeLang;return(0,Fi.default)(Fo[g],h)||(0,Fi.default)(Fo.en,h)||h}function ji(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(ji(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function ml(h){return h.reduce((g,_)=>{if(_.length!==0){let x=Array.isArray(_)?ml(_):_;Array.isArray(x)?x.length!==0&&g.push(x):g.push(x)}return g},[])}function ma(h,g,_){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:k,b:N,f:G}=x,K=h.lng,he=h.lat,_e=_,qe=Math.PI,ze=g*qe/180,gt=Math.sin(ze),At=Math.cos(ze),Yt=(1-G)*Math.tan(he*qe/180),fn=1/Math.sqrt(1+Yt*Yt),yn=Yt*fn,tr=Math.atan2(Yt,At),Ge=fn*gt,Ye=1-Ge*Ge,lt=Ye*(k*k-N*N)/(N*N),It=1+lt/16384*(4096+lt*(-768+lt*(320-175*lt))),yt=lt/1024*(256+lt*(-128+lt*(74-47*lt))),Tt=_e/(N*It),de=2*Math.PI,Ce,Ie,De;for(;Math.abs(Tt-de)>1e-12;){Ce=Math.cos(2*tr+Tt),Ie=Math.sin(Tt),De=Math.cos(Tt);let tn=yt*Ie*(Ce+yt/4*(De*(-1+2*Ce*Ce)-yt/6*Ce*(-3+4*Ie*Ie)*(-3+4*Ce*Ce)));de=Tt,Tt=_e/(N*It)+tn}let Re=yn*Ie-fn*De*At,je=Math.atan2(yn*De+fn*Ie*At,(1-G)*Math.sqrt(Ge*Ge+Re*Re)),et=Math.atan2(Ie*gt,fn*De-yn*Ie*At),rt=G/16*Ye*(4+G*(4-3*Ye)),ht=et-(1-rt)*G*Ge*(Tt+rt*Ie*(Ce+rt*De*(-1+2*Ce*Ce))),Lt=K+ht*180/qe,Ct=je*180/qe;return L.latLng(Lt,Ct)}function xi(h,g,_,x,k=!0){let N,G,K,he=[];for(let _e=0;_e<_;_e+=1){if(k)N=_e*360/_+x,G=ma(h,N,g),K=L.latLng(G.lng,G.lat);else{let qe=h.lat+Math.cos(2*_e*Math.PI/_)*g,ze=h.lng+Math.sin(2*_e*Math.PI/_)*g;K=L.latLng(qe,ze)}he.push(K)}return he}function yu(h,g,_){g=(g+360)%360;let x=Math.PI/180,k=180/Math.PI,{R:N}=L.CRS.Earth,G=h.lng*x,K=h.lat*x,he=g*x,_e=Math.sin(K),qe=Math.cos(K),ze=Math.cos(_/N),gt=Math.sin(_/N),At=Math.asin(_e*ze+qe*gt*Math.cos(he)),Yt=G+Math.atan2(Math.sin(he)*gt*qe,ze-_e*Math.sin(At));Yt*=k;let fn=Yt-360,yn=Yt<-180?Yt+360:Yt;return Yt=Yt>180?fn:yn,L.latLng([At*k,Yt])}function Jo(h,g,_){let x=h.latLngToContainerPoint(g),k=h.latLngToContainerPoint(_),N=Math.atan2(k.y-x.y,k.x-x.x)*180/Math.PI+90;return N+=N<0?360:0,N}function Gl(h,g,_,x){let k=Jo(h,g,_);return yu(g,k,x)}function ql(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(he,_e)=>he-_e;let x=Object.keys(g),k,N=x.length-1,G={};for(;N>=0;)k=x[N],G[k.toLowerCase()]=g[k],N-=1;function K(he){if(he instanceof L.Marker)return"Marker";if(he instanceof L.Circle)return"Circle";if(he instanceof L.CircleMarker)return"CircleMarker";if(he instanceof L.Rectangle)return"Rectangle";if(he instanceof L.Polygon)return"Polygon";if(he instanceof L.Polyline)return"Line"}return(he,_e)=>{let qe,ze;if(qe=K(he.layer).toLowerCase(),ze=K(_e.layer).toLowerCase(),!qe||!ze)return 0;let gt=qe in G?G[qe]:Number.MAX_SAFE_INTEGER,At=ze in G?G[ze]:Number.MAX_SAFE_INTEGER,Yt=0;return gt<At?Yt=-1:gt>At&&(Yt=1),_==="desc"?Yt*-1:Yt}}function Po(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function Yl(h,g){var _,x,k,N;if((x=(_=g.options.crs)==null?void 0:_.projection)!=null&&x.MAX_LATITUDE){let G=(N=(k=g.options.crs)==null?void 0:k.projection)==null?void 0:N.MAX_LATITUDE;h.lat=Math.max(Math.min(G,h.lat),-G)}return h}function ei(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var vc=L.Class.extend({includes:[ju,dr,Ya,Hl,Wl],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Dr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let k=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(k){let N=[`${k[1]}_${k[2]}`,`${k[1]}`];for(let G of N)if(Fo[G]){h=G;break}}}let x=L.PM.activeLang;g&&(Fo[h]=(0,gr.default)(Fo[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,h,_,Fo[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],x=g.merge||!1;this.map.pm.Draw.shapes.forEach(k=>{_.indexOf(k)===-1&&this.map.pm.Draw[k].setPathOptions(h,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,gr.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(k=>{this.map.pm.Draw[k].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(k=>{k.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){ei(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&ei(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,x=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),us=vc,jo=L.Control.extend({includes:[Wl],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",_);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let k=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),N=h.actions,G={cancel:{text:Jn("actions.cancel"),title:Jn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Jn("actions.finish"),title:Jn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Jn("actions.removeLastVertex"),title:Jn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:Jn("actions.finish"),title:Jn("actions.finish"),onClick(he){this._map.pm.Draw[h.jsClass]._finishShape(he)}}};h._preparedActions=N.map(he=>{let _e=typeof he=="string"?he:he.name,qe;if(G[_e])qe=G[_e];else if(he.text)qe=he;else return qe;let ze=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${_e}`,k);if(ze.setAttribute("role","button"),ze.setAttribute("tabindex","0"),ze.href="#",qe.title&&(ze.title=qe.title),ze.innerHTML=qe.text,L.DomEvent.disableClickPropagation(ze),L.DomEvent.on(ze,"click",L.DomEvent.stop),qe._node=ze,!h.disabled&&qe.onClick){let gt=At=>{At.preventDefault();let Yt="",{buttons:fn}=this._map.pm.Toolbar;for(let yn in fn)if(fn[yn]._button===h){Yt=yn;break}this._fireActionClick(qe,Yt,h)};L.DomEvent.addListener(ze,"click",gt,this),L.DomEvent.addListener(ze,"click",qe.onClick,this),L.DomEvent.addListener(ze,"click",()=>this._updateActiveAction(h))}return qe}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let K=L.DomUtil.create("div","control-icon",x);return h.iconUrl&&K.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(K,h.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),Zl=jo;L.Control.PMButton=Zl;var zo=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let x=h[_];L.Util.setOptions(x,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let x=h;return _&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:Jn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:Jn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:Jn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:Jn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:Jn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},N={title:Jn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},G={title:Jn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},K={title:Jn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},he={title:Jn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},_e={title:Jn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},qe={title:Jn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ze={className:"control-icon leaflet-pm-icon-text",title:Jn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(gt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(N)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(k)),this._addButton("drawText",new L.Control.PMButton(ze)),this._addButton("editMode",new L.Control.PMButton(G)),this._addButton("dragMode",new L.Control.PMButton(K)),this._addButton("cutPolygon",new L.Control.PMButton(he)),this._addButton("removalMode",new L.Control.PMButton(_e)),this._addButton("rotateMode",new L.Control.PMButton(qe))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let x=h[_]._button.tool;x||(x="draw"),h[_].setPosition(this._getBtnPosition(x)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let k=this.createCustomControl(g);return{drawInstance:x,control:k}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let x=this.getButtons()[_];(x._button.tool===h||h==="draw"&&!x._button.tool)&&(g[_]=x)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(N=>{g[N]?_.push(g[N]):_.push(N)});let x=this.getButtons(),k={};_.forEach(N=>{x[N]&&(k[N]=x[N])}),Object.keys(x).filter(N=>!x[N]._button.tool||x[N]._button.tool==="draw").forEach(N=>{_.indexOf(N)===-1&&(k[N]=x[N])}),Object.keys(x).filter(N=>x[N]._button.tool==="edit").forEach(N=>{_.indexOf(N)===-1&&(k[N]=x[N])}),Object.keys(x).filter(N=>x[N]._button.tool==="options").forEach(N=>{_.indexOf(N)===-1&&(k[N]=x[N])}),Object.keys(x).filter(N=>x[N]._button.tool==="custom").forEach(N=>{_.indexOf(N)===-1&&(k[N]=x[N])}),Object.keys(x).forEach(N=>{_.indexOf(N)===-1&&(k[N]=x[N])}),this.map.pm.Toolbar.buttons=k,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),vl=zo,yl=l(ur()),ti={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var K,he,_e;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((K=h==null?void 0:h.originalEvent)==null?void 0:K.altKey)||((_e=(he=this._map)==null?void 0:he.pm)==null?void 0:_e.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let x=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,k;x?k=_.latlng:k=this._checkPrioritiySnapping(_);let N=this.options.snapDistance,G={marker:g,shape:this._shape,snapLatLng:k,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(G.marker,G),this._fireSnapDrag(this._layer,G),_.distance<N){g._orgLatLng=g.getLatLng(),g.setLatLng(k),g._snapped=!0,g._snapInfo=G;let qe=()=>{this._snapLatLng=k,this._fireSnap(g,G),this._fireSnap(this._layer,G)},ze=this._snapLatLng||{},gt=k||{};(ze.lat!==gt.lat||ze.lng!==gt.lng)&&qe()}else this._snapLatLng&&(this._unsnap(G),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(G.marker,G),this._fireUnsnap(this._layer,G));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?h.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),h.push(x);let k=L.polyline([],{color:"red",pmIgnore:!0});k._pmTempLayer=!0,g.push(k),(x instanceof L.Circle||x instanceof L.CircleMarker)&&g.push(k)}}),h=h.filter(x=>this._layer!==x),h=h.filter(x=>x._latlng||x._latlngs&&ji(x._latlngs)),h=h.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,g.push(x)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let x=[],k={};g.forEach((G,K)=>{var _e;if(G._parentCopy&&G._parentCopy===this._layer||((_e=G.getLatLngs)==null?void 0:_e.call(G).flat(5).length)<2)return;let he=this._calcLayerDistances(h,G);if(he.distance=Math.floor(he.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[K]){let qe=L.polyline([],{color:"red",pmIgnore:!0});qe._pmTempLayer=!0,this.debugIndicatorLines[K]=qe}this.debugIndicatorLines[K].setLatLngs([h,he.latlng])}_===1&&(k.distance===void 0||he.distance-5<=k.distance)?(he.distance+5<k.distance&&(x=[]),k=he,k.layer=G,x.push(k)):_!==1&&(k={},k=he,k.layer=G,x.push(k))}),_!==1&&(x=x.sort((G,K)=>G.distance-K.distance)),_===-1&&(_=x.length);let N=this._getClosestLayerByPriority(x,_);return L.Util.isArray(N)?N:[N]},_calcLayerDistances(h,g){let _=this._map,x=g instanceof L.Marker||g instanceof L.CircleMarker,k=g instanceof L.Polygon,N=h;if(x){let G=g.getLatLng();return{latlng:{...G},distance:this._getDistance(_,G,N)}}return this._calcLatLngDistances(N,g.getLatLngs(),_,k)},_calcLatLngDistances(h,g,_,x=!1){let k,N,G,K=he=>{he.forEach((_e,qe)=>{if(Array.isArray(_e)){K(_e);return}if(this.options.snapSegment){let ze=_e,gt;x?gt=qe+1===he.length?0:qe+1:gt=qe+1===he.length?void 0:qe+1;let At=he[gt];if(At){let Yt=this._getDistanceToSegment(_,h,ze,At);(N===void 0||Yt<N)&&(N=Yt,G=[ze,At])}}else{let ze=this._getDistance(_,h,_e);(N===void 0||ze<N)&&(N=ze,k=_e)}})};return K(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,G[0],G[1])},segment:G,distance:N}:{latlng:k,distance:N}},_getClosestLayerByPriority(h,g=1){h=h.sort((G,K)=>G._leaflet_id-K._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],k=0,N={};return x.concat(_).forEach(G=>{N[G]||(k+=1,N[G]=k)}),h.sort(ql("instanceofShape",N)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],x=h.segment[1],k=h.latlng,N=k;if(this.options.snapVertex){let G=this._getDistance(g,_,k),K=this._getDistance(g,x,k),he=G<K?_:x,_e=G<K?G:K;if(this.options.snapMiddle){let ze=L.PM.Utils.calcMiddleLatLng(g,_,x),gt=this._getDistance(g,ze,k);gt<G&&gt<K&&(he=ze,_e=gt)}let qe=this.options.snapDistance;_e<qe&&(N=he)}return{...N}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,x){let k=h.getMaxZoom();k===1/0&&(k=h.getZoom());let N=h.project(g,k),G=h.project(_,k),K=h.project(x,k),he=L.LineUtil.closestPointOnSegment(N,G,K);return h.unproject(he,k)},_getDistanceToSegment(h,g,_,x){let k=h.latLngToContainerPoint(g),N=h.latLngToContainerPoint(_),G=h.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(k,N,G)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},vo=ti,va=L.Class.extend({includes:[vo,Wl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,yl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),zi=va;zi.Marker=zi.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var I=63710088e-1,ve={centimeters:I*100,centimetres:I*100,degrees:I/111325,feet:I*3.28084,inches:I*39.37,kilometers:I/1e3,kilometres:I/1e3,meters:I,metres:I,miles:I/1609.344,millimeters:I*1e3,millimetres:I*1e3,nauticalmiles:I/1852,radians:1,yards:I*1.0936};function We(h,g,_){_===void 0&&(_={});var x={type:"Feature"};return(_.id===0||_.id)&&(x.id=_.id),_.bbox&&(x.bbox=_.bbox),x.properties=g||{},x.geometry=h,x}function st(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!or(h[0])||!or(h[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:h};return We(x,g,_)}function xt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:h};return We(x,g,_)}function Bt(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function an(h,g){g===void 0&&(g="kilometers");var _=ve[g];if(!_)throw new Error(g+" units is invalid");return h*_}function kn(h,g){g===void 0&&(g="kilometers");var _=ve[g];if(!_)throw new Error(g+" units is invalid");return h/_}function On(h){var g=h%(2*Math.PI);return g*180/Math.PI}function Zn(h){var g=h%360;return g*Math.PI/180}function or(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Sr(h){var g,_,x={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(k){g.forEach(function(N){for(var G=0;G<k.length-1;G++)for(var K=G;K<N.length-1;K++)if(!(k===N&&(Math.abs(G-K)===1||G===0&&K===k.length-2&&k[G][0]===k[k.length-1][0]&&k[G][1]===k[k.length-1][1]))){var he=wi(k[G][0],k[G][1],k[G+1][0],k[G+1][1],N[K][0],N[K][1],N[K+1][0],N[K+1][1]);he&&x.features.push(st([he[0],he[1]]))}})}),x}function wi(h,g,_,x,k,N,G,K){var he,_e,qe,ze,gt,At={x:null,y:null,onLine1:!1,onLine2:!1};return he=(K-N)*(_-h)-(G-k)*(x-g),he===0?At.x!==null&&At.y!==null?At:!1:(_e=g-N,qe=h-k,ze=(G-k)*_e-(K-N)*qe,gt=(_-h)*_e-(x-g)*qe,_e=ze/he,qe=gt/he,At.x=h+_e*(_-h),At.y=g+_e*(x-g),_e>=0&&_e<=1&&(At.onLine1=!0),qe>=0&&qe<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}zi.Line=zi.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Sr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let x=Sr(_.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),x=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let k=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(k,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let k=h[h.length-1],N=g.indexOf(k.getLatLng());g=g.slice(0,N+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=Jn("tooltips.continueLine"):g=Jn("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),zi.Polygon=zi.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=Jn("tooltips.continueLine"):g=Jn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),zi.Rectangle=zi.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Jn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=Yl(this._startMarker.getLatLng(),this._map),g=Yl(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let x=[];_.forEach(k=>{!k.equals(h,1e-8)&&!k.equals(g,1e-8)&&x.push(k)}),x.forEach((k,N)=>{try{this._styleMarkers[N].setLatLng(k)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let x=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let N=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);x.setLatLngs(N),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),zi.CircleMarker=zi.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Jn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let G=this._hintMarker.getLatLng();_=this._distanceCalculation(g,G),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:_},k=new this._BaseCircleClass(g,x);this._setPane(k,"layerPane"),this._finishLayer(k),k.addTo(this._map.pm._getContainingLayer()),k.pm&&k.pm._updateHiddenPolyCircle(),this._fireCreate(k);let N=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(N))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=Gl(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=Gl(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),zi.Circle=zi.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function Yr(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ni(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ui(h){return h.type==="Feature"?h.geometry:h}function qi(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function yo(h,g,_){if(h!==null)for(var x,k,N,G,K,he,_e,qe=0,ze=0,gt,At=h.type,Yt=At==="FeatureCollection",fn=At==="Feature",yn=Yt?h.features.length:1,tr=0;tr<yn;tr++){_e=Yt?h.features[tr].geometry:fn?h.geometry:h,gt=_e?_e.type==="GeometryCollection":!1,K=gt?_e.geometries.length:1;for(var Ge=0;Ge<K;Ge++){var Ye=0,lt=0;if(G=gt?_e.geometries[Ge]:_e,G!==null){he=G.coordinates;var It=G.type;switch(qe=0,It){case null:break;case"Point":if(g(he,ze,tr,Ye,lt)===!1)return!1;ze++,Ye++;break;case"LineString":case"MultiPoint":for(x=0;x<he.length;x++){if(g(he[x],ze,tr,Ye,lt)===!1)return!1;ze++,It==="MultiPoint"&&Ye++}It==="LineString"&&Ye++;break;case"Polygon":case"MultiLineString":for(x=0;x<he.length;x++){for(k=0;k<he[x].length-qe;k++){if(g(he[x][k],ze,tr,Ye,lt)===!1)return!1;ze++}It==="MultiLineString"&&Ye++,It==="Polygon"&&lt++}It==="Polygon"&&Ye++;break;case"MultiPolygon":for(x=0;x<he.length;x++){for(lt=0,k=0;k<he[x].length;k++){for(N=0;N<he[x][k].length-qe;N++){if(g(he[x][k][N],ze,tr,Ye,lt)===!1)return!1;ze++}lt++}Ye++}break;case"GeometryCollection":for(x=0;x<G.geometries.length;x++)if(yo(G.geometries[x],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Er(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function Ls(h,g,_){var x=_;return Er(h,function(k,N){N===0&&_===void 0?x=k:x=g(x,k,N)}),x}function bl(h,g){var _,x,k,N,G,K,he,_e,qe,ze,gt=0,At=h.type==="FeatureCollection",Yt=h.type==="Feature",fn=At?h.features.length:1;for(_=0;_<fn;_++){for(K=At?h.features[_].geometry:Yt?h.geometry:h,_e=At?h.features[_].properties:Yt?h.properties:{},qe=At?h.features[_].bbox:Yt?h.bbox:void 0,ze=At?h.features[_].id:Yt?h.id:void 0,he=K?K.type==="GeometryCollection":!1,G=he?K.geometries.length:1,k=0;k<G;k++){if(N=he?K.geometries[k]:K,N===null){if(g(null,gt,_e,qe,ze)===!1)return!1;continue}switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(N,gt,_e,qe,ze)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<N.geometries.length;x++)if(g(N.geometries[x],gt,_e,qe,ze)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}gt++}}function Rs(h,g){bl(h,function(_,x,k,N,G){var K=_===null?null:_.type;switch(K){case null:case"Point":case"LineString":case"Polygon":return g(We(_,k,{bbox:N,id:G}),x,0)===!1?!1:void 0}var he;switch(K){case"MultiPoint":he="Point";break;case"MultiLineString":he="LineString";break;case"MultiPolygon":he="Polygon";break}for(var _e=0;_e<_.coordinates.length;_e++){var qe=_.coordinates[_e],ze={type:he,coordinates:qe};if(g(We(ze,k),x,_e)===!1)return!1}})}function bu(h){if(!h)throw new Error("geojson is required");var g=[];return Rs(h,function(_){Qo(_,g)}),Bt(g)}function Qo(h,g){var _=[],x=h.geometry;if(x!==null){switch(x.type){case"Polygon":_=ni(x);break;case"LineString":_=[ni(x)]}_.forEach(function(k){var N=zu(k,h.properties);N.forEach(function(G){G.id=g.length,g.push(G)})})}}function zu(h,g){var _=[];return h.reduce(function(x,k){var N=xt([x,k],g);return N.bbox=Za(x,k),_.push(N),k}),_}function Za(h,g){var _=h[0],x=h[1],k=g[0],N=g[1],G=_<k?_:k,K=x<N?x:N,he=_>k?_:k,_e=x>N?x:N;return[G,K,he,_e]}var Ka=bu,Yi=l(Io(),1);function ea(h,g){var _={},x=[];if(h.type==="LineString"&&(h=We(h)),g.type==="LineString"&&(g=We(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var k=bo(h,g);return k&&x.push(k),Bt(x)}var N=(0,Yi.default)();return N.load(Ka(g)),Er(Ka(h),function(G){Er(N.search(G),function(K){var he=bo(G,K);if(he){var _e=ni(he).join(",");_[_e]||(_[_e]=!0,x.push(he))}})}),Bt(x)}function bo(h,g){var _=ni(h),x=ni(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var k=_[0][0],N=_[0][1],G=_[1][0],K=_[1][1],he=x[0][0],_e=x[0][1],qe=x[1][0],ze=x[1][1],gt=(ze-_e)*(G-k)-(qe-he)*(K-N),At=(qe-he)*(N-_e)-(ze-_e)*(k-he),Yt=(G-k)*(N-_e)-(K-N)*(k-he);if(gt===0)return null;var fn=At/gt,yn=Yt/gt;if(fn>=0&&fn<=1&&yn>=0&&yn<=1){var tr=k+fn*(G-k),Ge=N+fn*(K-N);return st([tr,Ge])}return null}var Qs=ea,_l=l(Io(),1);function Cs(h,g,_){_===void 0&&(_={});var x=Yr(h),k=Yr(g),N=Zn(k[1]-x[1]),G=Zn(k[0]-x[0]),K=Zn(x[1]),he=Zn(k[1]),_e=Math.pow(Math.sin(N/2),2)+Math.pow(Math.sin(G/2),2)*Math.cos(K)*Math.cos(he);return an(2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e)),_.units)}var Fs=Cs;function js(h){var g=h[0],_=h[1],x=h[2],k=h[3],N=Fs(h.slice(0,2),[x,_]),G=Fs(h.slice(0,2),[g,k]);if(N>=G){var K=(_+k)/2;return[g,K-(x-g)/2,x,K+(x-g)/2]}else{var he=(g+x)/2;return[he-(k-_)/2,_,he+(k-_)/2,k]}}var yc=js;function is(h){var g=[1/0,1/0,-1/0,-1/0];return yo(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}is.default=is;var ya=is;function Ss(h,g){g===void 0&&(g={});var _=g.precision,x=g.coordinates,k=g.mutate;if(_=_==null||isNaN(_)?6:_,x=x==null||isNaN(x)?3:x,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(k===!1||k===void 0)&&(h=JSON.parse(JSON.stringify(h)));var N=Math.pow(10,_);return yo(h,function(G){Es(G,N,x)}),h}function Es(h,g,_){h.length>_&&h.splice(_,h.length);for(var x=0;x<h.length;x++)h[x]=Math.round(h[x]*g)/g;return h}var ba=Ss;function _a(h,g,_){if(_===void 0&&(_={}),_.final===!0)return Ps(h,g);var x=Yr(h),k=Yr(g),N=Zn(x[0]),G=Zn(k[0]),K=Zn(x[1]),he=Zn(k[1]),_e=Math.sin(G-N)*Math.cos(he),qe=Math.cos(K)*Math.sin(he)-Math.sin(K)*Math.cos(he)*Math.cos(G-N);return On(Math.atan2(_e,qe))}function Ps(h,g){var _=_a(g,h);return _=(_+180)%360,_}function cs(h,g,_,x){x===void 0&&(x={});var k=Yr(h),N=Zn(k[0]),G=Zn(k[1]),K=Zn(_),he=kn(g,x.units),_e=Math.asin(Math.sin(G)*Math.cos(he)+Math.cos(G)*Math.sin(he)*Math.cos(K)),qe=N+Math.atan2(Math.sin(K)*Math.sin(he)*Math.cos(G),Math.cos(he)-Math.sin(G)*Math.sin(_e)),ze=On(qe),gt=On(_e);return st([ze,gt],x.properties)}function ta(h,g,_){_===void 0&&(_={});var x=st([1/0,1/0],{dist:1/0}),k=0;return Rs(h,function(N){for(var G=ni(N),K=0;K<G.length-1;K++){var he=st(G[K]);he.properties.dist=Fs(g,he,_);var _e=st(G[K+1]);_e.properties.dist=Fs(g,_e,_);var qe=Fs(he,_e,_),ze=Math.max(he.properties.dist,_e.properties.dist),gt=_a(he,_e),At=cs(g,ze,gt+90,_),Yt=cs(g,ze,gt-90,_),fn=Qs(xt([At.geometry.coordinates,Yt.geometry.coordinates]),xt([he.geometry.coordinates,_e.geometry.coordinates])),yn=null;fn.features.length>0&&(yn=fn.features[0],yn.properties.dist=Fs(g,yn,_),yn.properties.location=k+Fs(he,yn,_)),he.properties.dist<x.properties.dist&&(x=he,x.properties.index=K,x.properties.location=k),_e.properties.dist<x.properties.dist&&(x=_e,x.properties.index=K+1,x.properties.location=k+qe),yn&&yn.properties.dist<x.properties.dist&&(x=yn,x.properties.index=K),k+=qe}}),x}var _o=ta;function ks(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=qi(h),x=qi(g);if(_!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var k=ba(g,{precision:7});switch(x){case"Point":return Ht(h,k);case"MultiPoint":return vt(h,k);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return vt(h,Qs(h,k))}}function vt(h,g){var _=[],x=(0,_l.default)();return Rs(g,function(k){if(_.forEach(function(K,he){K.id=he}),!_.length)_=Ht(h,k).features,_.forEach(function(K){K.bbox||(K.bbox=yc(ya(K)))}),x.load(Bt(_));else{var N=x.search(k);if(N.features.length){var G=Mt(k,N);_=_.filter(function(K){return K.id!==G.id}),x.remove(G),Er(Ht(G,k),function(K){_.push(K),x.insert(K)})}}}),Bt(_)}function Ht(h,g){var _=[],x=ni(h)[0],k=ni(h)[h.geometry.coordinates.length-1];if(En(x,Yr(g))||En(k,Yr(g)))return Bt([h]);var N=(0,_l.default)(),G=Ka(h);N.load(G);var K=N.search(g);if(!K.features.length)return Bt([h]);var he=Mt(g,K),_e=[x],qe=Ls(G,function(ze,gt,At){var Yt=ni(gt)[1],fn=Yr(g);return At===he.id?(ze.push(fn),_.push(xt(ze)),En(fn,Yt)?[fn]:[fn,Yt]):(ze.push(Yt),ze)},_e);return qe.length>1&&_.push(xt(qe)),Bt(_)}function Mt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,x=1/0;return Er(g,function(k){var N=_o(k,h),G=N.properties.dist;G<x&&(_=k,x=G)}),_}function En(h,g){return h[0]===g[0]&&h[1]===g[1]}var Un=ks;function hr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var x=Yr(h),k=Ui(g),N=k.type,G=g.bbox,K=k.coordinates;if(G&&ri(x,G)===!1)return!1;N==="Polygon"&&(K=[K]);for(var he=!1,_e=0;_e<K.length&&!he;_e++)if(Li(x,K[_e][0],_.ignoreBoundary)){for(var qe=!1,ze=1;ze<K[_e].length&&!qe;)Li(x,K[_e][ze],!_.ignoreBoundary)&&(qe=!0),ze++;qe||(he=!0)}return he}function Li(h,g,_){var x=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var k=0,N=g.length-1;k<g.length;N=k++){var G=g[k][0],K=g[k][1],he=g[N][0],_e=g[N][1],qe=h[1]*(G-he)+K*(he-h[0])+_e*(h[0]-G)===0&&(G-h[0])*(he-h[0])<=0&&(K-h[1])*(_e-h[1])<=0;if(qe)return!_;var ze=K>h[1]!=_e>h[1]&&h[0]<(he-G)*(h[1]-K)/(_e-K)+G;ze&&(x=!x)}return x}function ri(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function Kl(h,g,_){_===void 0&&(_={});for(var x=Yr(h),k=ni(g),N=0;N<k.length-1;N++){var G=!1;if(_.ignoreEndVertices&&(N===0&&(G="start"),N===k.length-2&&(G="end"),N===0&&N+1===k.length-1&&(G="both")),zs(k[N],k[N+1],x,G,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function zs(h,g,_,x,k){var N=_[0],G=_[1],K=h[0],he=h[1],_e=g[0],qe=g[1],ze=_[0]-K,gt=_[1]-he,At=_e-K,Yt=qe-he,fn=ze*Yt-gt*At;if(k!==null){if(Math.abs(fn)>k)return!1}else if(fn!==0)return!1;if(x){if(x==="start")return Math.abs(At)>=Math.abs(Yt)?At>0?K<N&&N<=_e:_e<=N&&N<K:Yt>0?he<G&&G<=qe:qe<=G&&G<he;if(x==="end")return Math.abs(At)>=Math.abs(Yt)?At>0?K<=N&&N<_e:_e<N&&N<=K:Yt>0?he<=G&&G<qe:qe<G&&G<=he;if(x==="both")return Math.abs(At)>=Math.abs(Yt)?At>0?K<N&&N<_e:_e<N&&N<K:Yt>0?he<G&&G<qe:qe<G&&G<he}else return Math.abs(At)>=Math.abs(Yt)?At>0?K<=N&&N<=_e:_e<=N&&N<=K:Yt>0?he<=G&&G<=qe:qe<=G&&G<=he;return!1}var Ci=Kl;function na(h,g){var _=Ui(h),x=Ui(g),k=_.type,N=x.type,G=_.coordinates,K=x.coordinates;switch(k){case"Point":switch(N){case"Point":return li(G,K);default:throw new Error("feature2 "+N+" geometry not supported")}case"MultiPoint":switch(N){case"Point":return wa(_,x);case"MultiPoint":return ra(_,x);default:throw new Error("feature2 "+N+" geometry not supported")}case"LineString":switch(N){case"Point":return Ci(x,_,{ignoreEndVertices:!0});case"LineString":return Ir(_,x);case"MultiPoint":return ia(_,x);default:throw new Error("feature2 "+N+" geometry not supported")}case"Polygon":switch(N){case"Point":return hr(x,_,{ignoreBoundary:!0});case"LineString":return Uo(_,x);case"Polygon":return hs(_,x);case"MultiPoint":return sa(_,x);default:throw new Error("feature2 "+N+" geometry not supported")}default:throw new Error("feature1 "+k+" geometry not supported")}}function wa(h,g){var _,x=!1;for(_=0;_<h.coordinates.length;_++)if(li(h.coordinates[_],g.coordinates)){x=!0;break}return x}function ra(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){for(var k=x[_],N=!1,G=0,K=h.coordinates;G<K.length;G++){var he=K[G];if(li(k,he)){N=!0;break}}if(!N)return!1}return!0}function ia(h,g){for(var _=!1,x=0,k=g.coordinates;x<k.length;x++){var N=k[x];if(Ci(N,h,{ignoreEndVertices:!0})&&(_=!0),!Ci(N,h))return!1}return!!_}function sa(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){var k=x[_];if(!hr(k,h,{ignoreBoundary:!0}))return!1}return!0}function Ir(h,g){for(var _=!1,x=0,k=g.coordinates;x<k.length;x++){var N=k[x];if(Ci({type:"Point",coordinates:N},h,{ignoreEndVertices:!0})&&(_=!0),!Ci({type:"Point",coordinates:N},h,{ignoreEndVertices:!1}))return!1}return _}function Uo(h,g){var _=!1,x=0,k=ya(h),N=ya(g);if(!ii(k,N))return!1;for(x;x<g.coordinates.length-1;x++){var G=$i(g.coordinates[x],g.coordinates[x+1]);if(hr({type:"Point",coordinates:G},h,{ignoreBoundary:!0})){_=!0;break}}return _}function hs(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=ya(h),x=ya(g);if(!ii(_,x))return!1;for(var k=Ui(g).coordinates,N=0,G=k;N<G.length;N++)for(var K=G[N],he=0,_e=K;he<_e.length;he++){var qe=_e[he];if(!hr(qe,h))return!1}return!0}function ii(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function li(h,g){return h[0]===g[0]&&h[1]===g[1]}function $i(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var gi=l(Eo()),wo=h=>()=>h,eo=h=>{let g=h?(_,x)=>x.minus(_).abs().isLessThanOrEqualTo(h):wo(!1);return(_,x)=>g(_,x)?0:_.comparedTo(x)};function ko(h){let g=h?(_,x,k,N,G)=>_.exponentiatedBy(2).isLessThanOrEqualTo(N.minus(x).exponentiatedBy(2).plus(G.minus(k).exponentiatedBy(2)).times(h)):wo(!1);return(_,x,k)=>{let N=_.x,G=_.y,K=k.x,he=k.y,_e=G.minus(he).times(x.x.minus(K)).minus(N.minus(K).times(x.y.minus(he)));return g(_e,N,G,K,he)?0:_e.comparedTo(0)}}var Uu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,oa=Math.ceil,Zi=Math.floor,pi="[BigNumber Error] ",Ms=pi+"Number primitive has more than 15 significant digits: ",to=1e14,ir=14,xa=9007199254740991,La=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$o=1e7,Us=1e9;function Gc(h){var g,_,x,k=Ge.prototype={constructor:Ge,toString:null,valueOf:null},N=new Ge(1),G=20,K=4,he=-7,_e=21,qe=-1e7,ze=1e7,gt=!1,At=1,Yt=0,fn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},yn="0123456789abcdefghijklmnopqrstuvwxyz",tr=!0;function Ge(de,Ce){var Ie,De,Re,je,et,rt,ht,Lt,Ct=this;if(!(Ct instanceof Ge))return new Ge(de,Ce);if(Ce==null){if(de&&de._isBigNumber===!0){Ct.s=de.s,!de.c||de.e>ze?Ct.c=Ct.e=null:de.e<qe?Ct.c=[Ct.e=0]:(Ct.e=de.e,Ct.c=de.c.slice());return}if((rt=typeof de=="number")&&de*0==0){if(Ct.s=1/de<0?(de=-de,-1):1,de===~~de){for(je=0,et=de;et>=10;et/=10,je++);je>ze?Ct.c=Ct.e=null:(Ct.e=je,Ct.c=[de]);return}Lt=String(de)}else{if(!Uu.test(Lt=String(de)))return x(Ct,Lt,rt);Ct.s=Lt.charCodeAt(0)==45?(Lt=Lt.slice(1),-1):1}(je=Lt.indexOf("."))>-1&&(Lt=Lt.replace(".","")),(et=Lt.search(/e/i))>0?(je<0&&(je=et),je+=+Lt.slice(et+1),Lt=Lt.substring(0,et)):je<0&&(je=Lt.length)}else{if(u(Ce,2,yn.length,"Base"),Ce==10&&tr)return Ct=new Ge(de),yt(Ct,G+Ct.e+1,K);if(Lt=String(de),rt=typeof de=="number"){if(de*0!=0)return x(Ct,Lt,rt,Ce);if(Ct.s=1/de<0?(Lt=Lt.slice(1),-1):1,Ge.DEBUG&&Lt.replace(/^0\.0*|\./,"").length>15)throw Error(Ms+de)}else Ct.s=Lt.charCodeAt(0)===45?(Lt=Lt.slice(1),-1):1;for(Ie=yn.slice(0,Ce),je=et=0,ht=Lt.length;et<ht;et++)if(Ie.indexOf(De=Lt.charAt(et))<0){if(De=="."){if(et>je){je=ht;continue}}else if(!Re&&(Lt==Lt.toUpperCase()&&(Lt=Lt.toLowerCase())||Lt==Lt.toLowerCase()&&(Lt=Lt.toUpperCase()))){Re=!0,et=-1,je=0;continue}return x(Ct,String(de),rt,Ce)}rt=!1,Lt=_(Lt,Ce,10,Ct.s),(je=Lt.indexOf("."))>-1?Lt=Lt.replace(".",""):je=Lt.length}for(et=0;Lt.charCodeAt(et)===48;et++);for(ht=Lt.length;Lt.charCodeAt(--ht)===48;);if(Lt=Lt.slice(et,++ht)){if(ht-=et,rt&&Ge.DEBUG&&ht>15&&(de>xa||de!==Zi(de)))throw Error(Ms+Ct.s*de);if((je=je-et-1)>ze)Ct.c=Ct.e=null;else if(je<qe)Ct.c=[Ct.e=0];else{if(Ct.e=je,Ct.c=[],et=(je+1)%ir,je<0&&(et+=ir),et<ht){for(et&&Ct.c.push(+Lt.slice(0,et)),ht-=ir;et<ht;)Ct.c.push(+Lt.slice(et,et+=ir));et=ir-(Lt=Lt.slice(et)).length}else et-=ht;for(;et--;Lt+="0");Ct.c.push(+Lt)}}else Ct.c=[Ct.e=0]}Ge.clone=Gc,Ge.ROUND_UP=0,Ge.ROUND_DOWN=1,Ge.ROUND_CEIL=2,Ge.ROUND_FLOOR=3,Ge.ROUND_HALF_UP=4,Ge.ROUND_HALF_DOWN=5,Ge.ROUND_HALF_EVEN=6,Ge.ROUND_HALF_CEIL=7,Ge.ROUND_HALF_FLOOR=8,Ge.EUCLID=9,Ge.config=Ge.set=function(de){var Ce,Ie;if(de!=null)if(typeof de=="object"){if(de.hasOwnProperty(Ce="DECIMAL_PLACES")&&(Ie=de[Ce],u(Ie,0,Us,Ce),G=Ie),de.hasOwnProperty(Ce="ROUNDING_MODE")&&(Ie=de[Ce],u(Ie,0,8,Ce),K=Ie),de.hasOwnProperty(Ce="EXPONENTIAL_AT")&&(Ie=de[Ce],Ie&&Ie.pop?(u(Ie[0],-1e9,0,Ce),u(Ie[1],0,Us,Ce),he=Ie[0],_e=Ie[1]):(u(Ie,-1e9,Us,Ce),he=-(_e=Ie<0?-Ie:Ie))),de.hasOwnProperty(Ce="RANGE"))if(Ie=de[Ce],Ie&&Ie.pop)u(Ie[0],-1e9,-1,Ce),u(Ie[1],1,Us,Ce),qe=Ie[0],ze=Ie[1];else if(u(Ie,-1e9,Us,Ce),Ie)qe=-(ze=Ie<0?-Ie:Ie);else throw Error(pi+Ce+" cannot be zero: "+Ie);if(de.hasOwnProperty(Ce="CRYPTO"))if(Ie=de[Ce],Ie===!!Ie)if(Ie)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))gt=Ie;else throw gt=!Ie,Error(pi+"crypto unavailable");else gt=Ie;else throw Error(pi+Ce+" not true or false: "+Ie);if(de.hasOwnProperty(Ce="MODULO_MODE")&&(Ie=de[Ce],u(Ie,0,9,Ce),At=Ie),de.hasOwnProperty(Ce="POW_PRECISION")&&(Ie=de[Ce],u(Ie,0,Us,Ce),Yt=Ie),de.hasOwnProperty(Ce="FORMAT"))if(Ie=de[Ce],typeof Ie=="object")fn=Ie;else throw Error(pi+Ce+" not an object: "+Ie);if(de.hasOwnProperty(Ce="ALPHABET"))if(Ie=de[Ce],typeof Ie=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Ie))tr=Ie.slice(0,10)=="0123456789",yn=Ie;else throw Error(pi+Ce+" invalid: "+Ie)}else throw Error(pi+"Object expected: "+de);return{DECIMAL_PLACES:G,ROUNDING_MODE:K,EXPONENTIAL_AT:[he,_e],RANGE:[qe,ze],CRYPTO:gt,MODULO_MODE:At,POW_PRECISION:Yt,FORMAT:fn,ALPHABET:yn}},Ge.isBigNumber=function(de){if(!de||de._isBigNumber!==!0)return!1;if(!Ge.DEBUG)return!0;var Ce,Ie,De=de.c,Re=de.e,je=de.s;e:if({}.toString.call(De)=="[object Array]"){if((je===1||je===-1)&&Re>=-1e9&&Re<=Us&&Re===Zi(Re)){if(De[0]===0){if(Re===0&&De.length===1)return!0;break e}if(Ce=(Re+1)%ir,Ce<1&&(Ce+=ir),String(De[0]).length==Ce){for(Ce=0;Ce<De.length;Ce++)if(Ie=De[Ce],Ie<0||Ie>=to||Ie!==Zi(Ie))break e;if(Ie!==0)return!0}}}else if(De===null&&Re===null&&(je===null||je===1||je===-1))return!0;throw Error(pi+"Invalid BigNumber: "+de)},Ge.maximum=Ge.max=function(){return lt(arguments,-1)},Ge.minimum=Ge.min=function(){return lt(arguments,1)},Ge.random=function(){var de=9007199254740992,Ce=Math.random()*de&2097151?function(){return Zi(Math.random()*de)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Ie){var De,Re,je,et,rt,ht=0,Lt=[],Ct=new Ge(N);if(Ie==null?Ie=G:u(Ie,0,Us),et=oa(Ie/ir),gt)if(crypto.getRandomValues){for(De=crypto.getRandomValues(new Uint32Array(et*=2));ht<et;)rt=De[ht]*131072+(De[ht+1]>>>11),rt>=9e15?(Re=crypto.getRandomValues(new Uint32Array(2)),De[ht]=Re[0],De[ht+1]=Re[1]):(Lt.push(rt%1e14),ht+=2);ht=et/2}else if(crypto.randomBytes){for(De=crypto.randomBytes(et*=7);ht<et;)rt=(De[ht]&31)*281474976710656+De[ht+1]*1099511627776+De[ht+2]*4294967296+De[ht+3]*16777216+(De[ht+4]<<16)+(De[ht+5]<<8)+De[ht+6],rt>=9e15?crypto.randomBytes(7).copy(De,ht):(Lt.push(rt%1e14),ht+=7);ht=et/7}else throw gt=!1,Error(pi+"crypto unavailable");if(!gt)for(;ht<et;)rt=Ce(),rt<9e15&&(Lt[ht++]=rt%1e14);for(et=Lt[--ht],Ie%=ir,et&&Ie&&(rt=La[ir-Ie],Lt[ht]=Zi(et/rt)*rt);Lt[ht]===0;Lt.pop(),ht--);if(ht<0)Lt=[je=0];else{for(je=-1;Lt[0]===0;Lt.splice(0,1),je-=ir);for(ht=1,rt=Lt[0];rt>=10;rt/=10,ht++);ht<ir&&(je-=ir-ht)}return Ct.e=je,Ct.c=Lt,Ct}}(),Ge.sum=function(){for(var de=1,Ce=arguments,Ie=new Ge(Ce[0]);de<Ce.length;)Ie=Ie.plus(Ce[de++]);return Ie},_=function(){var de="0123456789";function Ce(Ie,De,Re,je){for(var et,rt=[0],ht,Lt=0,Ct=Ie.length;Lt<Ct;){for(ht=rt.length;ht--;rt[ht]*=De);for(rt[0]+=je.indexOf(Ie.charAt(Lt++)),et=0;et<rt.length;et++)rt[et]>Re-1&&(rt[et+1]==null&&(rt[et+1]=0),rt[et+1]+=rt[et]/Re|0,rt[et]%=Re)}return rt.reverse()}return function(Ie,De,Re,je,et){var rt,ht,Lt,Ct,tn,Dn,Fn,qn,Jr=Ie.indexOf("."),ui=G,Nr=K;for(Jr>=0&&(Ct=Yt,Yt=0,Ie=Ie.replace(".",""),qn=new Ge(De),Dn=qn.pow(Ie.length-Jr),Yt=Ct,qn.c=Ce(F(ds(Dn.c),Dn.e,"0"),10,Re,de),qn.e=qn.c.length),Fn=Ce(Ie,De,Re,et?(rt=yn,de):(rt=de,yn)),Lt=Ct=Fn.length;Fn[--Ct]==0;Fn.pop());if(!Fn[0])return rt.charAt(0);if(Jr<0?--Lt:(Dn.c=Fn,Dn.e=Lt,Dn.s=je,Dn=g(Dn,qn,ui,Nr,Re),Fn=Dn.c,tn=Dn.r,Lt=Dn.e),ht=Lt+ui+1,Jr=Fn[ht],Ct=Re/2,tn=tn||ht<0||Fn[ht+1]!=null,tn=Nr<4?(Jr!=null||tn)&&(Nr==0||Nr==(Dn.s<0?3:2)):Jr>Ct||Jr==Ct&&(Nr==4||tn||Nr==6&&Fn[ht-1]&1||Nr==(Dn.s<0?8:7)),ht<1||!Fn[0])Ie=tn?F(rt.charAt(1),-ui,rt.charAt(0)):rt.charAt(0);else{if(Fn.length=ht,tn)for(--Re;++Fn[--ht]>Re;)Fn[ht]=0,ht||(++Lt,Fn=[1].concat(Fn));for(Ct=Fn.length;!Fn[--Ct];);for(Jr=0,Ie="";Jr<=Ct;Ie+=rt.charAt(Fn[Jr++]));Ie=F(Ie,Lt,rt.charAt(0))}return Ie}}(),g=function(){function de(De,Re,je){var et,rt,ht,Lt,Ct=0,tn=De.length,Dn=Re%$o,Fn=Re/$o|0;for(De=De.slice();tn--;)ht=De[tn]%$o,Lt=De[tn]/$o|0,et=Fn*ht+Lt*Dn,rt=Dn*ht+et%$o*$o+Ct,Ct=(rt/je|0)+(et/$o|0)+Fn*Lt,De[tn]=rt%je;return Ct&&(De=[Ct].concat(De)),De}function Ce(De,Re,je,et){var rt,ht;if(je!=et)ht=je>et?1:-1;else for(rt=ht=0;rt<je;rt++)if(De[rt]!=Re[rt]){ht=De[rt]>Re[rt]?1:-1;break}return ht}function Ie(De,Re,je,et){for(var rt=0;je--;)De[je]-=rt,rt=De[je]<Re[je]?1:0,De[je]=rt*et+De[je]-Re[je];for(;!De[0]&&De.length>1;De.splice(0,1));}return function(De,Re,je,et,rt){var ht,Lt,Ct,tn,Dn,Fn,qn,Jr,ui,Nr,mi,io,Vu,la,mf,Ja,_c,ua=De.s==Re.s?1:-1,Ts=De.c,Vi=Re.c;if(!Ts||!Ts[0]||!Vi||!Vi[0])return new Ge(!De.s||!Re.s||(Ts?Vi&&Ts[0]==Vi[0]:!Vi)?NaN:Ts&&Ts[0]==0||!Vi?ua*0:ua/0);for(Jr=new Ge(ua),ui=Jr.c=[],Lt=De.e-Re.e,ua=je+Lt+1,rt||(rt=to,Lt=fs(De.e/ir)-fs(Re.e/ir),ua=ua/ir|0),Ct=0;Vi[Ct]==(Ts[Ct]||0);Ct++);if(Vi[Ct]>(Ts[Ct]||0)&&Lt--,ua<0)ui.push(1),tn=!0;else{for(la=Ts.length,Ja=Vi.length,Ct=0,ua+=2,Dn=Zi(rt/(Vi[0]+1)),Dn>1&&(Vi=de(Vi,Dn,rt),Ts=de(Ts,Dn,rt),Ja=Vi.length,la=Ts.length),Vu=Ja,Nr=Ts.slice(0,Ja),mi=Nr.length;mi<Ja;Nr[mi++]=0);_c=Vi.slice(),_c=[0].concat(_c),mf=Vi[0],Vi[1]>=rt/2&&mf++;do{if(Dn=0,ht=Ce(Vi,Nr,Ja,mi),ht<0){if(io=Nr[0],Ja!=mi&&(io=io*rt+(Nr[1]||0)),Dn=Zi(io/mf),Dn>1)for(Dn>=rt&&(Dn=rt-1),Fn=de(Vi,Dn,rt),qn=Fn.length,mi=Nr.length;Ce(Fn,Nr,qn,mi)==1;)Dn--,Ie(Fn,Ja<qn?_c:Vi,qn,rt),qn=Fn.length,ht=1;else Dn==0&&(ht=Dn=1),Fn=Vi.slice(),qn=Fn.length;if(qn<mi&&(Fn=[0].concat(Fn)),Ie(Nr,Fn,mi,rt),mi=Nr.length,ht==-1)for(;Ce(Vi,Nr,Ja,mi)<1;)Dn++,Ie(Nr,Ja<mi?_c:Vi,mi,rt),mi=Nr.length}else ht===0&&(Dn++,Nr=[0]);ui[Ct++]=Dn,Nr[0]?Nr[mi++]=Ts[Vu]||0:(Nr=[Ts[Vu]],mi=1)}while((Vu++<la||Nr[0]!=null)&&ua--);tn=Nr[0]!=null,ui[0]||ui.splice(0,1)}if(rt==to){for(Ct=1,ua=ui[0];ua>=10;ua/=10,Ct++);yt(Jr,je+(Jr.e=Ct+Lt*ir-1)+1,et,tn)}else Jr.e=Lt,Jr.r=+tn;return Jr}}();function Ye(de,Ce,Ie,De){var Re,je,et,rt,ht;if(Ie==null?Ie=K:u(Ie,0,8),!de.c)return de.toString();if(Re=de.c[0],et=de.e,Ce==null)ht=ds(de.c),ht=De==1||De==2&&(et<=he||et>=_e)?E(ht,et):F(ht,et,"0");else if(de=yt(new Ge(de),Ce,Ie),je=de.e,ht=ds(de.c),rt=ht.length,De==1||De==2&&(Ce<=je||je<=he)){for(;rt<Ce;ht+="0",rt++);ht=E(ht,je)}else if(Ce-=et,ht=F(ht,je,"0"),je+1>rt){if(--Ce>0)for(ht+=".";Ce--;ht+="0");}else if(Ce+=je-rt,Ce>0)for(je+1==rt&&(ht+=".");Ce--;ht+="0");return de.s<0&&Re?"-"+ht:ht}function lt(de,Ce){for(var Ie,De,Re=1,je=new Ge(de[0]);Re<de.length;Re++)De=new Ge(de[Re]),(!De.s||(Ie=Vo(je,De))===Ce||Ie===0&&je.s===Ce)&&(je=De);return je}function It(de,Ce,Ie){for(var De=1,Re=Ce.length;!Ce[--Re];Ce.pop());for(Re=Ce[0];Re>=10;Re/=10,De++);return(Ie=De+Ie*ir-1)>ze?de.c=de.e=null:Ie<qe?de.c=[de.e=0]:(de.e=Ie,de.c=Ce),de}x=function(){var de=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Ce=/^([^.]+)\.$/,Ie=/^\.([^.]+)$/,De=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(je,et,rt,ht){var Lt,Ct=rt?et:et.replace(Re,"");if(De.test(Ct))je.s=isNaN(Ct)?null:Ct<0?-1:1;else{if(!rt&&(Ct=Ct.replace(de,function(tn,Dn,Fn){return Lt=(Fn=Fn.toLowerCase())=="x"?16:Fn=="b"?2:8,!ht||ht==Lt?Dn:tn}),ht&&(Lt=ht,Ct=Ct.replace(Ce,"$1").replace(Ie,"0.$1")),et!=Ct))return new Ge(Ct,Lt);if(Ge.DEBUG)throw Error(pi+"Not a"+(ht?" base "+ht:"")+" number: "+et);je.s=null}je.c=je.e=null}}();function yt(de,Ce,Ie,De){var Re,je,et,rt,ht,Lt,Ct,tn=de.c,Dn=La;if(tn){e:{for(Re=1,rt=tn[0];rt>=10;rt/=10,Re++);if(je=Ce-Re,je<0)je+=ir,et=Ce,ht=tn[Lt=0],Ct=Zi(ht/Dn[Re-et-1]%10);else if(Lt=oa((je+1)/ir),Lt>=tn.length)if(De){for(;tn.length<=Lt;tn.push(0));ht=Ct=0,Re=1,je%=ir,et=je-ir+1}else break e;else{for(ht=rt=tn[Lt],Re=1;rt>=10;rt/=10,Re++);je%=ir,et=je-ir+Re,Ct=et<0?0:Zi(ht/Dn[Re-et-1]%10)}if(De=De||Ce<0||tn[Lt+1]!=null||(et<0?ht:ht%Dn[Re-et-1]),De=Ie<4?(Ct||De)&&(Ie==0||Ie==(de.s<0?3:2)):Ct>5||Ct==5&&(Ie==4||De||Ie==6&&(je>0?et>0?ht/Dn[Re-et]:0:tn[Lt-1])%10&1||Ie==(de.s<0?8:7)),Ce<1||!tn[0])return tn.length=0,De?(Ce-=de.e+1,tn[0]=Dn[(ir-Ce%ir)%ir],de.e=-Ce||0):tn[0]=de.e=0,de;if(je==0?(tn.length=Lt,rt=1,Lt--):(tn.length=Lt+1,rt=Dn[ir-je],tn[Lt]=et>0?Zi(ht/Dn[Re-et]%Dn[et])*rt:0),De)for(;;)if(Lt==0){for(je=1,et=tn[0];et>=10;et/=10,je++);for(et=tn[0]+=rt,rt=1;et>=10;et/=10,rt++);je!=rt&&(de.e++,tn[0]==to&&(tn[0]=1));break}else{if(tn[Lt]+=rt,tn[Lt]!=to)break;tn[Lt--]=0,rt=1}for(je=tn.length;tn[--je]===0;tn.pop());}de.e>ze?de.c=de.e=null:de.e<qe&&(de.c=[de.e=0])}return de}function Tt(de){var Ce,Ie=de.e;return Ie===null?de.toString():(Ce=ds(de.c),Ce=Ie<=he||Ie>=_e?E(Ce,Ie):F(Ce,Ie,"0"),de.s<0?"-"+Ce:Ce)}return k.absoluteValue=k.abs=function(){var de=new Ge(this);return de.s<0&&(de.s=1),de},k.comparedTo=function(de,Ce){return Vo(this,new Ge(de,Ce))},k.decimalPlaces=k.dp=function(de,Ce){var Ie,De,Re,je=this;if(de!=null)return u(de,0,Us),Ce==null?Ce=K:u(Ce,0,8),yt(new Ge(je),de+je.e+1,Ce);if(!(Ie=je.c))return null;if(De=((Re=Ie.length-1)-fs(this.e/ir))*ir,Re=Ie[Re])for(;Re%10==0;Re/=10,De--);return De<0&&(De=0),De},k.dividedBy=k.div=function(de,Ce){return g(this,new Ge(de,Ce),G,K)},k.dividedToIntegerBy=k.idiv=function(de,Ce){return g(this,new Ge(de,Ce),0,1)},k.exponentiatedBy=k.pow=function(de,Ce){var Ie,De,Re,je,et,rt,ht,Lt,Ct,tn=this;if(de=new Ge(de),de.c&&!de.isInteger())throw Error(pi+"Exponent not an integer: "+Tt(de));if(Ce!=null&&(Ce=new Ge(Ce)),rt=de.e>14,!tn.c||!tn.c[0]||tn.c[0]==1&&!tn.e&&tn.c.length==1||!de.c||!de.c[0])return Ct=new Ge(Math.pow(+Tt(tn),rt?de.s*(2-v(de)):+Tt(de))),Ce?Ct.mod(Ce):Ct;if(ht=de.s<0,Ce){if(Ce.c?!Ce.c[0]:!Ce.s)return new Ge(NaN);De=!ht&&tn.isInteger()&&Ce.isInteger(),De&&(tn=tn.mod(Ce))}else{if(de.e>9&&(tn.e>0||tn.e<-1||(tn.e==0?tn.c[0]>1||rt&&tn.c[1]>=24e7:tn.c[0]<8e13||rt&&tn.c[0]<=9999975e7)))return je=tn.s<0&&v(de)?-0:0,tn.e>-1&&(je=1/je),new Ge(ht?1/je:je);Yt&&(je=oa(Yt/ir+2))}for(rt?(Ie=new Ge(.5),ht&&(de.s=1),Lt=v(de)):(Re=Math.abs(+Tt(de)),Lt=Re%2),Ct=new Ge(N);;){if(Lt){if(Ct=Ct.times(tn),!Ct.c)break;je?Ct.c.length>je&&(Ct.c.length=je):De&&(Ct=Ct.mod(Ce))}if(Re){if(Re=Zi(Re/2),Re===0)break;Lt=Re%2}else if(de=de.times(Ie),yt(de,de.e+1,1),de.e>14)Lt=v(de);else{if(Re=+Tt(de),Re===0)break;Lt=Re%2}tn=tn.times(tn),je?tn.c&&tn.c.length>je&&(tn.c.length=je):De&&(tn=tn.mod(Ce))}return De?Ct:(ht&&(Ct=N.div(Ct)),Ce?Ct.mod(Ce):je?yt(Ct,Yt,K,et):Ct)},k.integerValue=function(de){var Ce=new Ge(this);return de==null?de=K:u(de,0,8),yt(Ce,Ce.e+1,de)},k.isEqualTo=k.eq=function(de,Ce){return Vo(this,new Ge(de,Ce))===0},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(de,Ce){return Vo(this,new Ge(de,Ce))>0},k.isGreaterThanOrEqualTo=k.gte=function(de,Ce){return(Ce=Vo(this,new Ge(de,Ce)))===1||Ce===0},k.isInteger=function(){return!!this.c&&fs(this.e/ir)>this.c.length-2},k.isLessThan=k.lt=function(de,Ce){return Vo(this,new Ge(de,Ce))<0},k.isLessThanOrEqualTo=k.lte=function(de,Ce){return(Ce=Vo(this,new Ge(de,Ce)))===-1||Ce===0},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&this.c[0]==0},k.minus=function(de,Ce){var Ie,De,Re,je,et=this,rt=et.s;if(de=new Ge(de,Ce),Ce=de.s,!rt||!Ce)return new Ge(NaN);if(rt!=Ce)return de.s=-Ce,et.plus(de);var ht=et.e/ir,Lt=de.e/ir,Ct=et.c,tn=de.c;if(!ht||!Lt){if(!Ct||!tn)return Ct?(de.s=-Ce,de):new Ge(tn?et:NaN);if(!Ct[0]||!tn[0])return tn[0]?(de.s=-Ce,de):new Ge(Ct[0]?et:K==3?-0:0)}if(ht=fs(ht),Lt=fs(Lt),Ct=Ct.slice(),rt=ht-Lt){for((je=rt<0)?(rt=-rt,Re=Ct):(Lt=ht,Re=tn),Re.reverse(),Ce=rt;Ce--;Re.push(0));Re.reverse()}else for(De=(je=(rt=Ct.length)<(Ce=tn.length))?rt:Ce,rt=Ce=0;Ce<De;Ce++)if(Ct[Ce]!=tn[Ce]){je=Ct[Ce]<tn[Ce];break}if(je&&(Re=Ct,Ct=tn,tn=Re,de.s=-de.s),Ce=(De=tn.length)-(Ie=Ct.length),Ce>0)for(;Ce--;Ct[Ie++]=0);for(Ce=to-1;De>rt;){if(Ct[--De]<tn[De]){for(Ie=De;Ie&&!Ct[--Ie];Ct[Ie]=Ce);--Ct[Ie],Ct[De]+=to}Ct[De]-=tn[De]}for(;Ct[0]==0;Ct.splice(0,1),--Lt);return Ct[0]?It(de,Ct,Lt):(de.s=K==3?-1:1,de.c=[de.e=0],de)},k.modulo=k.mod=function(de,Ce){var Ie,De,Re=this;return de=new Ge(de,Ce),!Re.c||!de.s||de.c&&!de.c[0]?new Ge(NaN):!de.c||Re.c&&!Re.c[0]?new Ge(Re):(At==9?(De=de.s,de.s=1,Ie=g(Re,de,0,3),de.s=De,Ie.s*=De):Ie=g(Re,de,0,At),de=Re.minus(Ie.times(de)),!de.c[0]&&At==1&&(de.s=Re.s),de)},k.multipliedBy=k.times=function(de,Ce){var Ie,De,Re,je,et,rt,ht,Lt,Ct,tn,Dn,Fn,qn,Jr,ui,Nr=this,mi=Nr.c,io=(de=new Ge(de,Ce)).c;if(!mi||!io||!mi[0]||!io[0])return!Nr.s||!de.s||mi&&!mi[0]&&!io||io&&!io[0]&&!mi?de.c=de.e=de.s=null:(de.s*=Nr.s,!mi||!io?de.c=de.e=null:(de.c=[0],de.e=0)),de;for(De=fs(Nr.e/ir)+fs(de.e/ir),de.s*=Nr.s,ht=mi.length,tn=io.length,ht<tn&&(qn=mi,mi=io,io=qn,Re=ht,ht=tn,tn=Re),Re=ht+tn,qn=[];Re--;qn.push(0));for(Jr=to,ui=$o,Re=tn;--Re>=0;){for(Ie=0,Dn=io[Re]%ui,Fn=io[Re]/ui|0,et=ht,je=Re+et;je>Re;)Lt=mi[--et]%ui,Ct=mi[et]/ui|0,rt=Fn*Lt+Ct*Dn,Lt=Dn*Lt+rt%ui*ui+qn[je]+Ie,Ie=(Lt/Jr|0)+(rt/ui|0)+Fn*Ct,qn[je--]=Lt%Jr;qn[je]=Ie}return Ie?++De:qn.splice(0,1),It(de,qn,De)},k.negated=function(){var de=new Ge(this);return de.s=-de.s||null,de},k.plus=function(de,Ce){var Ie,De=this,Re=De.s;if(de=new Ge(de,Ce),Ce=de.s,!Re||!Ce)return new Ge(NaN);if(Re!=Ce)return de.s=-Ce,De.minus(de);var je=De.e/ir,et=de.e/ir,rt=De.c,ht=de.c;if(!je||!et){if(!rt||!ht)return new Ge(Re/0);if(!rt[0]||!ht[0])return ht[0]?de:new Ge(rt[0]?De:Re*0)}if(je=fs(je),et=fs(et),rt=rt.slice(),Re=je-et){for(Re>0?(et=je,Ie=ht):(Re=-Re,Ie=rt),Ie.reverse();Re--;Ie.push(0));Ie.reverse()}for(Re=rt.length,Ce=ht.length,Re-Ce<0&&(Ie=ht,ht=rt,rt=Ie,Ce=Re),Re=0;Ce;)Re=(rt[--Ce]=rt[Ce]+ht[Ce]+Re)/to|0,rt[Ce]=to===rt[Ce]?0:rt[Ce]%to;return Re&&(rt=[Re].concat(rt),++et),It(de,rt,et)},k.precision=k.sd=function(de,Ce){var Ie,De,Re,je=this;if(de!=null&&de!==!!de)return u(de,1,Us),Ce==null?Ce=K:u(Ce,0,8),yt(new Ge(je),de,Ce);if(!(Ie=je.c))return null;if(Re=Ie.length-1,De=Re*ir+1,Re=Ie[Re]){for(;Re%10==0;Re/=10,De--);for(Re=Ie[0];Re>=10;Re/=10,De++);}return de&&je.e+1>De&&(De=je.e+1),De},k.shiftedBy=function(de){return u(de,-9007199254740991,xa),this.times("1e"+de)},k.squareRoot=k.sqrt=function(){var de,Ce,Ie,De,Re,je=this,et=je.c,rt=je.s,ht=je.e,Lt=G+4,Ct=new Ge("0.5");if(rt!==1||!et||!et[0])return new Ge(!rt||rt<0&&(!et||et[0])?NaN:et?je:1/0);if(rt=Math.sqrt(+Tt(je)),rt==0||rt==1/0?(Ce=ds(et),(Ce.length+ht)%2==0&&(Ce+="0"),rt=Math.sqrt(+Ce),ht=fs((ht+1)/2)-(ht<0||ht%2),rt==1/0?Ce="5e"+ht:(Ce=rt.toExponential(),Ce=Ce.slice(0,Ce.indexOf("e")+1)+ht),Ie=new Ge(Ce)):Ie=new Ge(rt+""),Ie.c[0]){for(ht=Ie.e,rt=ht+Lt,rt<3&&(rt=0);;)if(Re=Ie,Ie=Ct.times(Re.plus(g(je,Re,Lt,1))),ds(Re.c).slice(0,rt)===(Ce=ds(Ie.c)).slice(0,rt))if(Ie.e<ht&&--rt,Ce=Ce.slice(rt-3,rt+1),Ce=="9999"||!De&&Ce=="4999"){if(!De&&(yt(Re,Re.e+G+2,0),Re.times(Re).eq(je))){Ie=Re;break}Lt+=4,rt+=4,De=1}else{(!+Ce||!+Ce.slice(1)&&Ce.charAt(0)=="5")&&(yt(Ie,Ie.e+G+2,1),de=!Ie.times(Ie).eq(je));break}}return yt(Ie,Ie.e+G+1,K,de)},k.toExponential=function(de,Ce){return de!=null&&(u(de,0,Us),de++),Ye(this,de,Ce,1)},k.toFixed=function(de,Ce){return de!=null&&(u(de,0,Us),de=de+this.e+1),Ye(this,de,Ce)},k.toFormat=function(de,Ce,Ie){var De,Re=this;if(Ie==null)de!=null&&Ce&&typeof Ce=="object"?(Ie=Ce,Ce=null):de&&typeof de=="object"?(Ie=de,de=Ce=null):Ie=fn;else if(typeof Ie!="object")throw Error(pi+"Argument not an object: "+Ie);if(De=Re.toFixed(de,Ce),Re.c){var je,et=De.split("."),rt=+Ie.groupSize,ht=+Ie.secondaryGroupSize,Lt=Ie.groupSeparator||"",Ct=et[0],tn=et[1],Dn=Re.s<0,Fn=Dn?Ct.slice(1):Ct,qn=Fn.length;if(ht&&(je=rt,rt=ht,ht=je,qn-=je),rt>0&&qn>0){for(je=qn%rt||rt,Ct=Fn.substr(0,je);je<qn;je+=rt)Ct+=Lt+Fn.substr(je,rt);ht>0&&(Ct+=Lt+Fn.slice(je)),Dn&&(Ct="-"+Ct)}De=tn?Ct+(Ie.decimalSeparator||"")+((ht=+Ie.fractionGroupSize)?tn.replace(new RegExp("\\d{"+ht+"}\\B","g"),"$&"+(Ie.fractionGroupSeparator||"")):tn):Ct}return(Ie.prefix||"")+De+(Ie.suffix||"")},k.toFraction=function(de){var Ce,Ie,De,Re,je,et,rt,ht,Lt,Ct,tn,Dn,Fn=this,qn=Fn.c;if(de!=null&&(rt=new Ge(de),!rt.isInteger()&&(rt.c||rt.s!==1)||rt.lt(N)))throw Error(pi+"Argument "+(rt.isInteger()?"out of range: ":"not an integer: ")+Tt(rt));if(!qn)return new Ge(Fn);for(Ce=new Ge(N),Lt=Ie=new Ge(N),De=ht=new Ge(N),Dn=ds(qn),je=Ce.e=Dn.length-Fn.e-1,Ce.c[0]=La[(et=je%ir)<0?ir+et:et],de=!de||rt.comparedTo(Ce)>0?je>0?Ce:Lt:rt,et=ze,ze=1/0,rt=new Ge(Dn),ht.c[0]=0;Ct=g(rt,Ce,0,1),Re=Ie.plus(Ct.times(De)),Re.comparedTo(de)!=1;)Ie=De,De=Re,Lt=ht.plus(Ct.times(Re=Lt)),ht=Re,Ce=rt.minus(Ct.times(Re=Ce)),rt=Re;return Re=g(de.minus(Ie),De,0,1),ht=ht.plus(Re.times(Lt)),Ie=Ie.plus(Re.times(De)),ht.s=Lt.s=Fn.s,je=je*2,tn=g(Lt,De,je,K).minus(Fn).abs().comparedTo(g(ht,Ie,je,K).minus(Fn).abs())<1?[Lt,De]:[ht,Ie],ze=et,tn},k.toNumber=function(){return+Tt(this)},k.toPrecision=function(de,Ce){return de!=null&&u(de,1,Us),Ye(this,de,Ce,2)},k.toString=function(de){var Ce,Ie=this,De=Ie.s,Re=Ie.e;return Re===null?De?(Ce="Infinity",De<0&&(Ce="-"+Ce)):Ce="NaN":(de==null?Ce=Re<=he||Re>=_e?E(ds(Ie.c),Re):F(ds(Ie.c),Re,"0"):de===10&&tr?(Ie=yt(new Ge(Ie),G+Re+1,K),Ce=F(ds(Ie.c),Ie.e,"0")):(u(de,2,yn.length,"Base"),Ce=_(F(ds(Ie.c),Re,"0"),10,de,De,!0)),De<0&&Ie.c[0]&&(Ce="-"+Ce)),Ce},k.valueOf=k.toJSON=function(){return Tt(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,h!=null&&Ge.set(h),Ge}function fs(h){var g=h|0;return h>0||h===g?g:g-1}function ds(h){for(var g,_,x=1,k=h.length,N=h[0]+"";x<k;){for(g=h[x++]+"",_=ir-g.length;_--;g="0"+g);N+=g}for(k=N.length;N.charCodeAt(--k)===48;);return N.slice(0,k+1||1)}function Vo(h,g){var _,x,k=h.c,N=g.c,G=h.s,K=g.s,he=h.e,_e=g.e;if(!G||!K)return null;if(_=k&&!k[0],x=N&&!N[0],_||x)return _?x?0:-K:G;if(G!=K)return G;if(_=G<0,x=he==_e,!k||!N)return x?0:!k^_?1:-1;if(!x)return he>_e^_?1:-1;for(K=(he=k.length)<(_e=N.length)?he:_e,G=0;G<K;G++)if(k[G]!=N[G])return k[G]>N[G]^_?1:-1;return he==_e?0:he>_e^_?1:-1}function u(h,g,_,x){if(h<g||h>_||h!==Zi(h))throw Error(pi+(x||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function v(h){var g=h.c.length-1;return fs(h.e/ir)==g&&h.c[g]%2!=0}function E(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function F(h,g,_){var x,k;if(g<0){for(k=_+".";++g;k+=_);h=k+h}else if(x=h.length,++g>x){for(k=_,g-=x;--g;k+=_);h+=k}else g<x&&(h=h.slice(0,g)+"."+h.slice(g));return h}var ne=Gc(),we=ne,Qe=class{constructor(h){tt(this,"key");tt(this,"left",null);tt(this,"right",null);this.key=h}},Et=class extends Qe{constructor(h){super(h)}},Ft=class{constructor(){tt(this,"size",0);tt(this,"modificationCount",0);tt(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,x=null,k=null,N=null,G=g,K=this.compare,he;for(;;)if(he=K(G.key,h),he>0){let _e=G.left;if(_e==null||(he=K(_e.key,h),he>0&&(G.left=_e.right,_e.right=G,G=_e,_e=G.left,_e==null)))break;_==null?x=G:_.left=G,_=G,G=_e}else if(he<0){let _e=G.right;if(_e==null||(he=K(_e.key,h),he<0&&(G.right=_e.left,_e.left=G,G=_e,_e=G.right,_e==null)))break;k==null?N=G:k.right=G,k=G,G=_e}else break;return k!=null&&(k.right=G.left,G.left=N),_!=null&&(_.left=G.right,G.right=x),this.root!==G&&(this.root=G,this.splayCount++),he}splayMin(h){let g=h,_=g.left;for(;_!=null;){let x=_;g.left=x.right,x.right=g,g=x,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let x=_;g.right=x.left,x.left=g,g=x,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,x=g.left;if(this.size--,x==null)this.root=g.right;else{let k=g.right;g=this.splayMax(x),g.right=k,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},rn=class Kp extends Ft{constructor(_,x){super();tt(this,"root",null);tt(this,"compare");tt(this,"validKey");tt(this,xn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=x??(k=>k!=null&&k!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let x of _)this.delete(x)}forEach(_){let x=this[Symbol.iterator](),k;for(;k=x.next(),!k.done;)_(k.value,k.value,this)}add(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Et(_),x),this}addAndReturn(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Et(_),x),this.root.key}addAll(_){for(let x of _)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let k=x.right;for(;k!=null;)x=k,k=x.right;return x.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let k=x.left;for(;k!=null;)x=k,k=x.left;return x.key}retainAll(_){let x=new Kp(this.compare,this.validKey),k=this.modificationCount;for(let N of _){if(k!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(N)&&this.splay(N)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let x=new Kp(this.compare,this.validKey);for(let k of this)_.has(k)&&x.add(k);return x}difference(_){let x=new Kp(this.compare,this.validKey);for(let k of this)_.has(k)||x.add(k);return x}union(_){let x=this.clone();return x.addAll(_),x}clone(){let _=new Kp(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function x(N,G){let K,he;do{if(K=N.left,he=N.right,K!=null){let _e=new Et(K.key);G.left=_e,x(K,_e)}if(he!=null){let _e=new Et(he.key);G.right=_e,N=he,G=_e}}while(he!=null)}let k=new Et(_.key);return x(_,k),k}toSet(){return this.clone()}entries(){return new Cr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Gn=Symbol.iterator,xn=Symbol.toStringTag,Gn)](){return new Wn(this.wrap())}},Mn=class{constructor(h){tt(this,"tree");tt(this,"path",new Array);tt(this,"modificationCount",null);tt(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},Wn=class extends Mn{getValue(h){return h.key}},Cr=class extends Mn{getValue(h){return[h.key,h.key]}},Ki=h=>h,Oi=h=>{if(h){let g=new rn(eo(h)),_=new rn(eo(h)),x=(N,G)=>G.addAndReturn(N),k=N=>({x:x(N.x,g),y:x(N.y,_)});return k({x:new we(0),y:new we(0)}),k}return Ki},ps=h=>({set:g=>{Si=ps(g)},reset:()=>ps(h),compare:eo(h),snap:Oi(h),orient:ko(h)}),Si=ps(),no=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),qc=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,x=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,k=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,N=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:k},ur:{x,y:N}}},aa=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),Ho=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),Mo=h=>Ho(h,h).sqrt(),pf=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return aa(k,x).div(Mo(k)).div(Mo(x))},_u=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Ho(k,x).div(Mo(k)).div(Mo(x))},Xr=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},As=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Me=(h,g,_,x)=>{if(g.x.isZero())return As(_,x,h.x);if(x.x.isZero())return As(h,g,_.x);if(g.y.isZero())return Xr(_,x,h.y);if(x.y.isZero())return Xr(h,g,_.y);let k=aa(g,x);if(k.isZero())return null;let N={x:_.x.minus(h.x),y:_.y.minus(h.y)},G=aa(N,g).div(k),K=aa(N,x).div(k),he=h.x.plus(K.times(g.x)),_e=_.x.plus(G.times(x.x)),qe=h.y.plus(K.times(g.y)),ze=_.y.plus(G.times(x.y)),gt=he.plus(_e).div(2),At=qe.plus(ze).div(2);return{x:gt,y:At}},ro=class GS{constructor(g,_){tt(this,"point");tt(this,"isLeft");tt(this,"segment");tt(this,"otherSE");tt(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let x=GS.comparePoints(g.point,_.point);return x!==0?x:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:gs.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let x=0,k=_.length;x<k;x++){let N=_[x];this.point.events.push(N),N.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let x=this.point.events[_];if(x.segment.consumedBy===void 0)for(let k=_+1;k<g;k++){let N=this.point.events[k];N.consumedBy===void 0&&x.otherSE.point.events===N.otherSE.point.events&&x.segment.consume(N.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,x=this.point.events.length;_<x;_++){let k=this.point.events[_];k!==this&&!k.segment.ringOut&&k.segment.isInResult()&&g.push(k)}return g}getLeftmostComparator(g){let _=new Map,x=k=>{let N=k.otherSE;_.set(k,{sine:pf(this.point,g.point,N.point),cosine:_u(this.point,g.point,N.point)})};return(k,N)=>{_.has(k)||x(k),_.has(N)||x(N);let{sine:G,cosine:K}=_.get(k),{sine:he,cosine:_e}=_.get(N);return G.isGreaterThanOrEqualTo(0)&&he.isGreaterThanOrEqualTo(0)?K.isLessThan(_e)?1:K.isGreaterThan(_e)?-1:0:G.isLessThan(0)&&he.isLessThan(0)?K.isLessThan(_e)?-1:K.isGreaterThan(_e)?1:0:he.isLessThan(G)?-1:he.isGreaterThan(G)?1:0}}},$u=0,gs=class A0{constructor(g,_,x,k){tt(this,"id");tt(this,"leftSE");tt(this,"rightSE");tt(this,"rings");tt(this,"windings");tt(this,"ringOut");tt(this,"consumedBy");tt(this,"prev");tt(this,"_prevInResult");tt(this,"_beforeState");tt(this,"_afterState");tt(this,"_isInResult");this.id=++$u,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=x,this.windings=k}static compare(g,_){let x=g.leftSE.point.x,k=_.leftSE.point.x,N=g.rightSE.point.x,G=_.rightSE.point.x;if(G.isLessThan(x))return 1;if(N.isLessThan(k))return-1;let K=g.leftSE.point.y,he=_.leftSE.point.y,_e=g.rightSE.point.y,qe=_.rightSE.point.y;if(x.isLessThan(k)){if(he.isLessThan(K)&&he.isLessThan(_e))return 1;if(he.isGreaterThan(K)&&he.isGreaterThan(_e))return-1;let ze=g.comparePoint(_.leftSE.point);if(ze<0)return 1;if(ze>0)return-1;let gt=_.comparePoint(g.rightSE.point);return gt!==0?gt:-1}if(x.isGreaterThan(k)){if(K.isLessThan(he)&&K.isLessThan(qe))return-1;if(K.isGreaterThan(he)&&K.isGreaterThan(qe))return 1;let ze=_.comparePoint(g.leftSE.point);if(ze!==0)return ze;let gt=g.comparePoint(_.rightSE.point);return gt<0?1:gt>0?-1:1}if(K.isLessThan(he))return-1;if(K.isGreaterThan(he))return 1;if(N.isLessThan(G)){let ze=_.comparePoint(g.rightSE.point);if(ze!==0)return ze}if(N.isGreaterThan(G)){let ze=g.comparePoint(_.rightSE.point);if(ze<0)return 1;if(ze>0)return-1}if(!N.eq(G)){let ze=_e.minus(K),gt=N.minus(x),At=qe.minus(he),Yt=G.minus(k);if(ze.isGreaterThan(gt)&&At.isLessThan(Yt))return 1;if(ze.isLessThan(gt)&&At.isGreaterThan(Yt))return-1}return N.isGreaterThan(G)?1:N.isLessThan(G)||_e.isLessThan(qe)?-1:_e.isGreaterThan(qe)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,x){let k,N,G,K=ro.comparePoints(g,_);if(K<0)k=g,N=_,G=1;else if(K>0)k=_,N=g,G=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let he=new ro(k,!0),_e=new ro(N,!1);return new A0(he,_e,[x],[G])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return Si.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),x=g.bbox(),k=qc(_,x);if(k===null)return null;let N=this.leftSE.point,G=this.rightSE.point,K=g.leftSE.point,he=g.rightSE.point,_e=no(_,K)&&this.comparePoint(K)===0,qe=no(x,N)&&g.comparePoint(N)===0,ze=no(_,he)&&this.comparePoint(he)===0,gt=no(x,G)&&g.comparePoint(G)===0;if(qe&&_e)return gt&&!ze?G:!gt&&ze?he:null;if(qe)return ze&&N.x.eq(he.x)&&N.y.eq(he.y)?null:N;if(_e)return gt&&G.x.eq(K.x)&&G.y.eq(K.y)?null:K;if(gt&&ze)return null;if(gt)return G;if(ze)return he;let At=Me(N,this.vector(),K,g.vector());return At===null||!no(k,At)?null:Si.snap(At)}split(g){let _=[],x=g.events!==void 0,k=new ro(g,!0),N=new ro(g,!1),G=this.rightSE;this.replaceRightSE(N),_.push(N),_.push(k);let K=new A0(k,G,this.rings.slice(),this.windings.slice());return ro.comparePoints(K.leftSE.point,K.rightSE.point)>0&&K.swapEvents(),ro.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(k.checkForConsuming(),N.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,x=this.windings.length;_<x;_++)this.windings[_]*=-1}consume(g){let _=this,x=g;for(;_.consumedBy;)_=_.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let k=A0.compare(_,x);if(k!==0){if(k>0){let N=_;_=x,x=N}if(_.prev===x){let N=_;_=x,x=N}for(let N=0,G=x.rings.length;N<G;N++){let K=x.rings[N],he=x.windings[N],_e=_.rings.indexOf(K);_e===-1?(_.rings.push(K),_.windings.push(he)):_.windings[_e]+=he}x.rings=null,x.windings=null,x.consumedBy=_,x.leftSE.consumedBy=_.leftSE,x.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,x=this._afterState.windings,k=this._afterState.multiPolys;for(let K=0,he=this.rings.length;K<he;K++){let _e=this.rings[K],qe=this.windings[K],ze=_.indexOf(_e);ze===-1?(_.push(_e),x.push(qe)):x[ze]+=qe}let N=[],G=[];for(let K=0,he=_.length;K<he;K++){if(x[K]===0)continue;let _e=_[K],qe=_e.poly;if(G.indexOf(qe)===-1)if(_e.isExterior)N.push(qe);else{G.indexOf(qe)===-1&&G.push(qe);let ze=N.indexOf(_e.poly);ze!==-1&&N.splice(ze,1)}}for(let K=0,he=N.length;K<he;K++){let _e=N[K].multiPoly;k.indexOf(_e)===-1&&k.push(_e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Ph.type){case"union":{let x=g.length===0,k=_.length===0;this._isInResult=x!==k;break}case"intersection":{let x,k;g.length<_.length?(x=g.length,k=_.length):(x=_.length,k=g.length),this._isInResult=k===Ph.numMultiPolys&&x<k;break}case"xor":{let x=Math.abs(g.length-_.length);this._isInResult=x%2===1;break}case"difference":{let x=k=>k.length===1&&k[0].isSubject;this._isInResult=x(g)!==x(_);break}}return this._isInResult}},Pr=class{constructor(h,g,_){tt(this,"poly");tt(this,"isExterior");tt(this,"segments");tt(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=Si.snap({x:new we(h[0][0]),y:new we(h[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let k=x;for(let N=1,G=h.length;N<G;N++){if(typeof h[N][0]!="number"||typeof h[N][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let K=Si.snap({x:new we(h[N][0]),y:new we(h[N][1])});K.x.eq(k.x)&&K.y.eq(k.y)||(this.segments.push(gs.fromRing(k,K,this)),K.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=K.x),K.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=K.y),K.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=K.x),K.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=K.y),k=K)}(!x.x.eq(k.x)||!x.y.eq(k.y))&&this.segments.push(gs.fromRing(k,x,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let x=this.segments[g];h.push(x.leftSE),h.push(x.rightSE)}return h}},Sh=class{constructor(h,g){tt(this,"multiPoly");tt(this,"exteriorRing");tt(this,"interiorRings");tt(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Pr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,x=h.length;_<x;_++){let k=new Pr(h[_],this,!1);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.interiorRings.push(k)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let x=this.interiorRings[g].getSweepEvents();for(let k=0,N=x.length;k<N;k++)h.push(x[k])}return h}},ld=class{constructor(h,g){tt(this,"isSubject");tt(this,"polys");tt(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new we(Number.POSITIVE_INFINITY),y:new we(Number.POSITIVE_INFINITY)},ur:{x:new we(Number.NEGATIVE_INFINITY),y:new we(Number.NEGATIVE_INFINITY)}};for(let _=0,x=h.length;_<x;_++){let k=new Sh(h[_],this);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.polys.push(k)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getSweepEvents();for(let k=0,N=x.length;k<N;k++)h.push(x[k])}return h}},Eh=class N2{constructor(g){tt(this,"events");tt(this,"poly");tt(this,"_isExteriorRing");tt(this,"_enclosingRing");this.events=g;for(let _=0,x=g.length;_<x;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let x=0,k=g.length;x<k;x++){let N=g[x];if(!N.isInResult()||N.ringOut)continue;let G=null,K=N.leftSE,he=N.rightSE,_e=[K],qe=K.point,ze=[];for(;G=K,K=he,_e.push(K),K.point!==qe;)for(;;){let gt=K.getAvailableLinkedEvents();if(gt.length===0){let fn=_e[0].point,yn=_e[_e.length-1].point;throw new Error(`Unable to complete output ring starting at [${fn.x}, ${fn.y}]. Last matching segment found ends at [${yn.x}, ${yn.y}].`)}if(gt.length===1){he=gt[0].otherSE;break}let At=null;for(let fn=0,yn=ze.length;fn<yn;fn++)if(ze[fn].point===K.point){At=fn;break}if(At!==null){let fn=ze.splice(At)[0],yn=_e.splice(fn.index);yn.unshift(yn[0].otherSE),_.push(new N2(yn.reverse()));continue}ze.push({index:_e.length,point:K.point});let Yt=K.getLeftmostComparator(G);he=gt.sort(Yt)[0].otherSE;break}_.push(new N2(_e))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let _e=1,qe=this.events.length-1;_e<qe;_e++){let ze=this.events[_e].point,gt=this.events[_e+1].point;Si.orient(ze,g,gt)!==0&&(_.push(ze),g=ze)}if(_.length===1)return null;let x=_[0],k=_[1];Si.orient(x,g,k)===0&&_.shift(),_.push(_[0]);let N=this.isExteriorRing()?1:-1,G=this.isExteriorRing()?0:_.length-1,K=this.isExteriorRing()?_.length:-1,he=[];for(let _e=G;_e!=K;_e+=N)he.push([_[_e].x.toNumber(),_[_e].y.toNumber()]);return he}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var k,N;let g=this.events[0];for(let G=1,K=this.events.length;G<K;G++){let he=this.events[G];ro.compare(g,he)>0&&(g=he)}let _=g.segment.prevInResult(),x=_?_.prevInResult():null;for(;;){if(!_)return null;if(!x)return _.ringOut;if(x.ringOut!==_.ringOut)return((k=x.ringOut)==null?void 0:k.enclosingRing())!==_.ringOut?_.ringOut:(N=_.ringOut)==null?void 0:N.enclosingRing();_=x.prevInResult(),x=_?_.prevInResult():null}}},Xa=class{constructor(h){tt(this,"exteriorRing");tt(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,x=this.interiorRings.length;_<x;_++){let k=this.interiorRings[_].getGeom();k!==null&&g.push(k)}return g}},Yc=class{constructor(h){tt(this,"rings");tt(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getGeom();x!==null&&h.push(x)}return h}_composePolys(h){var _;let g=[];for(let x=0,k=h.length;x<k;x++){let N=h[x];if(!N.poly)if(N.isExteriorRing())g.push(new Xa(N));else{let G=N.enclosingRing();G!=null&&G.poly||g.push(new Xa(G)),(_=G==null?void 0:G.poly)==null||_.addInterior(N)}}return g}},gf=class{constructor(h,g=gs.compare){tt(this,"queue");tt(this,"tree");tt(this,"segments");this.queue=h,this.tree=new rn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let x=g,k=g;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do k=this.tree.firstAfter(k);while(k!=null&&k.consumedBy!=null);if(h.isLeft){let N=null;if(x){let K=x.getIntersection(g);if(K!==null&&(g.isAnEndpoint(K)||(N=K),!x.isAnEndpoint(K))){let he=this._splitSafely(x,K);for(let _e=0,qe=he.length;_e<qe;_e++)_.push(he[_e])}}let G=null;if(k){let K=k.getIntersection(g);if(K!==null&&(g.isAnEndpoint(K)||(G=K),!k.isAnEndpoint(K))){let he=this._splitSafely(k,K);for(let _e=0,qe=he.length;_e<qe;_e++)_.push(he[_e])}}if(N!==null||G!==null){let K=null;N===null?K=G:G===null?K=N:K=ro.comparePoints(N,G)<=0?N:G,this.queue.delete(g.rightSE),_.push(g.rightSE);let he=g.split(K);for(let _e=0,qe=he.length;_e<qe;_e++)_.push(he[_e])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=x)}else{if(x&&k){let N=x.getIntersection(k);if(N!==null){if(!x.isAnEndpoint(N)){let G=this._splitSafely(x,N);for(let K=0,he=G.length;K<he;K++)_.push(G[K])}if(!k.isAnEndpoint(N)){let G=this._splitSafely(k,N);for(let K=0,he=G.length;K<he;K++)_.push(G[K])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let x=h.split(g);return x.push(_),h.consumedBy===void 0&&this.tree.add(h),x}},bp=class{constructor(){tt(this,"type");tt(this,"numMultiPolys")}run(h,g,_){bc.type=h;let x=[new ld(g,!0)];for(let he=0,_e=_.length;he<_e;he++)x.push(new ld(_[he],!1));if(bc.numMultiPolys=x.length,bc.type==="difference"){let he=x[0],_e=1;for(;_e<x.length;)qc(x[_e].bbox,he.bbox)!==null?_e++:x.splice(_e,1)}if(bc.type==="intersection")for(let he=0,_e=x.length;he<_e;he++){let qe=x[he];for(let ze=he+1,gt=x.length;ze<gt;ze++)if(qc(qe.bbox,x[ze].bbox)===null)return[]}let k=new rn(ro.compare);for(let he=0,_e=x.length;he<_e;he++){let qe=x[he].getSweepEvents();for(let ze=0,gt=qe.length;ze<gt;ze++)k.add(qe[ze])}let N=new gf(k),G=null;for(k.size!=0&&(G=k.first(),k.delete(G));G;){let he=N.process(G);for(let _e=0,qe=he.length;_e<qe;_e++){let ze=he[_e];ze.consumedBy===void 0&&k.add(ze)}k.size!=0?(G=k.first(),k.delete(G)):G=null}Si.reset();let K=Eh.factory(N.segments);return new Yc(K).getGeom()}},bc=new bp,Ph=bc,Xl=(h,...g)=>Ph.run("intersection",h,g),_p=(h,...g)=>Ph.run("difference",h,g);Si.set;function kh(h){let g={type:"Feature"};return g.geometry=h,g}function Mh(h){return h.type==="Feature"?h.geometry:h}function ud(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function cd(h){return kh({type:"LineString",coordinates:h})}function Ca(h){return kh({type:"MultiLineString",coordinates:h})}function hd(h){return kh({type:"Polygon",coordinates:h})}function fd(h){return kh({type:"MultiPolygon",coordinates:h})}function dd(h,g){let _=Mh(h),x=Mh(g),k=Xl(_.coordinates,x.coordinates);return k.length===0?null:k.length===1?hd(k[0]):fd(k)}function w(h,g){let _=Mh(h),x=Mh(g),k=_p(_.coordinates,x.coordinates);return k.length===0?null:k.length===1?hd(k[0]):fd(k)}function M(h){return Array.isArray(h)?1+M(h[0]):-1}function j(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=ud(h),_=M(g),x=[];return _>1?g.forEach(k=>{x.push(cd(k))}):x.push(h),x}function re(h){let g=[];return h.eachLayer(_=>{g.push(ud(_.toGeoJSON(15)))}),Ca(g)}zi.Cut=zi.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:k})=>{this._fireCut(k,x,k),this._fireCut(this._map,x,k),k.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(x=>g[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==h).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let k=!!Qs(h.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return k||x instanceof L.Polyline&&!(x instanceof L.Polygon)?k:!!dd(h.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let k;if(x instanceof L.Polygon){k=L.polygon(x.getLatLngs());let he=k.getLatLngs();_.forEach(_e=>{if(_e&&_e.snapInfo){let{latlng:qe}=_e,ze=this._calcClosestLayer(qe,[k]);if(ze&&ze.segment&&ze.distance<this.options.snapDistance){let{segment:gt}=ze;if(gt&&gt.length===2){let{indexPath:At,parentPath:Yt,newIndex:fn}=L.PM.Utils._getIndexFromSegment(he,gt);(At.length>1?(0,gi.default)(he,Yt):he).splice(fn,0,qe)}}}})}else k=x;let N=this._cutLayer(h,k),G=L.geoJSON(N,x.options);G.getLayers().length===1&&([G]=G.getLayers()),this._setPane(G,"layerPane");let K=G.addTo(this._map.pm._getContainingLayer());if(K.pm.enable(x.pm.options),K.pm.disable(),x._pmTempLayer=!0,h._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),K.getLayers&&K.getLayers().length===0&&this._map.pm.removeLayer({target:K}),K instanceof L.LayerGroup?(K.eachLayer(he=>{this._addDrawnLayerProp(he)}),this._addDrawnLayerProp(K)):this._addDrawnLayerProp(K),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let he=this.options.layersToCut.indexOf(x);he>-1&&this.options.layersToCut.splice(he,1)}this._editedLayers.push({layer:K,originalLayer:x})})},_cutLayer(h,g){let _=L.geoJSON(),x;if(g instanceof L.Polygon)x=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let k=j(g);k.forEach(N=>{let G=Un(N,h.toGeoJSON(15)),K;G&&G.features.length>0?K=L.geoJSON(G):K=L.geoJSON(N),K.getLayers().forEach(he=>{na(h.toGeoJSON(15),he.toGeoJSON(15))||he.addTo(_)})}),k.length>1?x=re(_):x=_.toGeoJSON(15)}return x},_change:L.Util.falseFn}),zi.Text=zi.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var k,N,G,K;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(k=this.options.textOptions)==null?void 0:k.className){let he=this.options.textOptions.className.split(" ");this.textArea.classList.add(...he)}let _=this._createTextIcon(this.textArea),x=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:((N=this.options.textOptions)==null?void 0:N.removeIfEmpty)??!0});let he=((G=this.options.textOptions)==null?void 0:G.focusAfterDraw)??!0;x.pm._createTextMarker(he),(K=this.options.textOptions)!=null&&K.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var ye={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ei(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(ei(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ei(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(ei(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},x=k=>k.map(N=>{if(Array.isArray(N))return x(N);let G={lat:N.lat+_.lat,lng:N.lng+_.lng};return(N.alt||N.alt===0)&&(G.alt=N.alt),G});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let k=x([this._layer.getLatLng()]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let k=this._layer.getLatLng();this._layer._snapped&&(k=this._layer._orgLatLng);let N=x([k]);this._layer.setLatLng(N[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let k=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(k),this._fireChange(this._layer.getBounds(),"Edit")}else{let k=x(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(_=_.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let k=this._parentLayerGroup[x];k.pm&&(_=k.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),_.forEach(x=>{x!==this._layer&&x.pm[h]&&(x._snapped=!1,x.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},xe=ye,Ee=l(Eo());function ke(h,g,_,x){return _.unproject(g.transform(_.project(h,x)),x)}function Te(h,g,_){let x=_.getMaxZoom();if(x===1/0&&(x=_.getZoom()),L.Util.isArray(h)){let k=[];return h.forEach(N=>{k.push(Te(N,g,_))}),k}return h instanceof L.LatLng?ke(h,g,_,x):null}function $e(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function ut(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Ot={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=$e(this._map,this._rotationOriginLatLng),this._rotationStartPoint=$e(this._map,h.target.getLatLng()),this._initialRotateLatLng=Po(this._layer),this._startAngle=this.getAngle();let g=Po(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=$e(this._map,h.target.getLatLng()),_=this._rotationStartPoint,x=this._rotationOriginPoint,k=Math.atan2(g.y-x.y,g.x-x.x)-Math.atan2(_.y-x.y,_.x-x.x);this._layer.setLatLngs(this._rotateLayer(k,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let N=this;function G(qe,ze=[],gt=-1){if(gt>-1&&ze.push(gt),L.Util.isArray(qe[0]))qe.forEach((At,Yt)=>G(At,ze.slice(),Yt));else{let At=ze.length>0?(0,Ee.default)(N._markers,ze):N._markers[0];qe.forEach((Yt,fn)=>{At[fn].setLatLng(Yt)})}}G(this._layer.getLatLngs());let K=Po(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(k,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let he=k*180/Math.PI;he=he<0?he+360:he;let _e=he+this._startAngle;this._setAngle(_e),this._rotationLayer.pm._setAngle(_e),this._fireRotation(this._rotationLayer,he,K),this._fireRotation(this._map,he,K),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Po(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Po(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,x,k){let N=$e(k,_);return this._matrix=x.clone().rotate(h,N).flip(),Te(g,this._matrix,k)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Jo(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Po(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),x=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let k=this.getAngle()-g;k=k<0?k+360:k,this._startAngle=g,this._fireRotation(this._layer,k,_,this._layer),this._fireRotation(this._map||this._layer._map,k,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Dt=Ot,_t=L.Class.extend({includes:[xe,vo,Dt,Wl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,x={layer:this._layer,marker:_,event:g},k="";return h==="move"?k="moveVertexValidation":h==="add"?k="addVertexValidation":h==="remove"&&(k="removeVertexValidation"),this.options[k]&&typeof this.options[k]=="function"&&!this.options[k](x)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Wt=_t;Wt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let g=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let k=this._layers.filter(N=>!N.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in N.pm._parentLayerGroup));k.forEach(N=>{this._initLayer(N)}),k.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let _=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,x=[]){let k=[];return h?this._layerGroup.getLayers().forEach(N=>{k.push(N),N instanceof L.LayerGroup&&x.indexOf(N._leaflet_id)===-1&&(x.push(N._leaflet_id),k=k.concat(N.pm.getLayers(!0,!0,!0,x)))}):k=this._layerGroup.getLayers(),_&&(k=k.filter(N=>!(N instanceof L.LayerGroup))),g&&(k=k.filter(N=>!!N.pm),k=k.filter(N=>!N._pmTempLayer),k=k.filter(N=>!L.PM.optIn&&!N.options.pmIgnore||L.PM.optIn&&N.options.pmIgnore===!1)),k},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),Wt.Marker=Wt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var Ut=l(Eo()),ct={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,x)=>x.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((x,k)=>{let N=x._latlng.distanceTo(h),G=k._latlng.distanceTo(h);return N-G}),g.filter((x,k)=>_>-1?k<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},mt=ct;Wt.Line=Wt.extend({includes:[mt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=x=>{if(Array.isArray(x[0]))return x.map(_,this);let k=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map((N,G)=>{let K=this.isPolygon()?(G+1)%x.length:G+1;return this._createMiddleMarker(k[G],k[K])}),k};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),x=this._createMarker(_),k=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(k),x.leftM=h,x.rightM=g,h._middleMarkerNext=x,g._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=h.getLatLng(),k=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:N,index:G,parentPath:K}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),he=N.length>1?(0,Ut.default)(k,K):k,_e=N.length>1?(0,Ut.default)(this._markers,K):this._markers;he.splice(G+1,0,x),_e.splice(G+1,0,h),this._layer.setLatLngs(k),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Sr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,x;if(this.options.allowSelfIntersection?_=!1:(x=Sr(this._layer.toGeoJSON(15)),_=x.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Po(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:x,index:k,parentPath:N}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!x)return;let G=x.length>1?(0,Ut.default)(_,N):_,K=x.length>1?(0,Ut.default)(this._markers,N):this._markers,he=N[N.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!he&&(G.length<=2||this.isPolygon()&&G.length<=3)){this._flashLayer();return}G.splice(k,1),this._layer.setLatLngs(_),this.isPolygon()&&G.length<=2&&G.splice(0,G.length);let _e=!1;if(G.length<=1&&(G.splice(0,G.length),N.length>1&&x.length>1&&(_=ml(_)),this._layer.setLatLngs(_),this._initMarkers(),_e=!0),ji(_)||this._layer.remove(),_=ml(_),this._layer.setLatLngs(_),this._markers=ml(this._markers),!_e&&(K=x.length>1?(0,Ut.default)(this._markers,N):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),K)){let qe,ze;if(this.isPolygon()?(qe=(k+1)%K.length,ze=(k+(K.length-1))%K.length):(ze=k-1<0?void 0:k-1,qe=k+1>=K.length?void 0:k+1),qe!==ze){let gt=K[ze],At=K[qe];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(gt,At)}K.splice(k,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:x,index:k,parentPath:N}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(x.length>1?(0,Ut.default)(g,N):g).splice(k,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),k=g.length>1?(0,Ut.default)(this._markers,x):this._markers,N=(_+1)%k.length,G=(_+(k.length-1))%k.length,K=k[G],he=k[N];return{prevMarker:K,nextMarker:he}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),N=Qs(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,G=Qs(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?G+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(N+=1),!(N<=2&&G<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Po(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:x,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let N=_.length>1?(0,Ut.default)(this._markers,k):this._markers,G=(x+1)%N.length,K=(x+(N.length-1))%N.length,he=g.getLatLng(),_e=N[K].getLatLng(),qe=N[G].getLatLng();if(g._middleMarkerNext){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,qe);g._middleMarkerNext.setLatLng(ze)}if(g._middleMarkerPrev){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,_e);g._middleMarkerPrev.setLatLng(ze)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let k=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(h,_,k),k){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),Wt.Polygon=Wt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),N=Qs(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,G=Qs(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return!(N<=2&&G<=2)}}),Wt.Rectangle=Wt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,x)=>{let k=this._cornerMarkers.find(N=>N._index===x);k&&k.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(k=>k._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,x)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,x)=>{this._cornerMarkers[x].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(x=>h.getLatLng().equals(x));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(g[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Jo(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Wt.CircleMarker=Wt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),x=L.point(_.x+g,_.y);return this._map.unproject(x)},_createHintLine(h,g){let _=h.getLatLng(),x=g.getLatLng();this._hintline=L.polyline([_,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let x=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=Gl(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=Gl(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Wt.Circle=Wt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Wt.ImageOverlay=Wt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),x=h.getSouthEast(),k=h.getSouthWest();return[g,_,x,k]}}),Wt.Text=Wt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var Jt=function(h,g,_,x,k,N){this._matrix=[h,g,_,x,k,N]};Jt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Jt.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:x}=h;return h.x=g[0]*_+g[1]*x+g[4],h.y=g[2]*_+g[3]*x+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,x;return g=g||L.point(0,0),typeof h=="number"?(_=h,x=h):(_=h.x,x=h.y),this._add(_,0,0,x,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),x=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,x,-x,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,x,k,N){let G=[[],[],[]],K=this._matrix,he=[[K[0],K[2],K[4]],[K[1],K[3],K[5]],[0,0,1]],_e=[[h,_,k],[g,x,N],[0,0,1]],qe;h&&h instanceof L.PM.Matrix&&(K=h._matrix,_e=[[K[0],K[2],K[4]],[K[1],K[3],K[5]],[0,0,1]]);for(let ze=0;ze<3;ze+=1)for(let gt=0;gt<3;gt+=1){qe=0;for(let At=0;At<3;At+=1)qe+=he[ze][At]*_e[At][gt];G[ze][gt]=qe}return this._matrix=[G[0][0],G[1][0],G[0][1],G[1][1],G[0][2],G[1][2]],this}};var un=Jt,en={calcMiddleLatLng(h,g,_){let x=h.project(g),k=h.project(_);return h.unproject(x._add(k)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let x=h.getLatLng(),k=h.getRadius(),N=xi(x,k,g,0,_),G=[];for(let K=0;K<N.length;K+=1){let he=[N[K].lat,N[K].lng];G.push(he)}return L.polygon(G,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,x=!1){h.fire(g,_,x);let{groups:k}=this.getAllParentGroups(h);k.forEach(N=>{N.fire(g,_,x)})},getAllParentGroups(h){let g=[],_=[],x=k=>{for(let N in k._eventParents)if(g.indexOf(N)===-1){g.push(N);let G=k._eventParents[N];_.push(G),x(G)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(x(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:xi,getTranslation:Jn,findDeepCoordIndex(h,g,_=!0){let x,k=G=>(K,he)=>{let _e=G.concat(he);if(_){if(K.lat&&K.lat===g.lat&&K.lng===g.lng)return x=_e,!0}else if(K.lat&&L.latLng(K).equals(g))return x=_e,!0;return Array.isArray(K)&&K.some(k(_e))};h.some(k([]));let N={};return x&&(N={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),N},findDeepMarkerIndex(h,g){let _,x=N=>(G,K)=>{let he=N.concat(K);return G._leaflet_id===g._leaflet_id?(_=he,!0):Array.isArray(G)&&G.some(x(he))};h.some(x([]));let k={};return _&&(k={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),k},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),x=this.findDeepCoordIndex(h,g[1]),k=Math.max(_.index,x.index);return(_.index===0||x.index===0)&&k!==1&&(k+=1),{indexA:_,indexB:x,newIndex:k,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,x){let k=$e(x,h),N=$e(x,g),G=_*Math.PI/180,K=Math.cos(G),he=Math.sin(G),_e=(N.x-k.x)*K+(N.y-k.y)*he,qe=(N.y-k.y)*K-(N.x-k.x)*he,ze=_e*K+k.x,gt=_e*he+k.y,At=-qe*he+k.x,Yt=qe*K+k.y,fn=ut(x,k),yn=ut(x,{x:ze,y:gt}),tr=ut(x,N),Ge=ut(x,{x:At,y:Yt});return[fn,yn,tr,Ge]},pxRadiusToMeterRadius(h,g,_){let x=g.project(_),k=L.point(x.x+h,x.y);return g.distance(g.unproject(k),_)}},Pn=en;L.PM=L.PM||{version:Ul.version,Map:us,Toolbar:vl,Draw:zi,Edit:Wt,Utils:Pn,Matrix:un,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(k);function N(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(N);function G(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(G);function K(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(K);function he(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(he)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,x;for(let k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(x=_);x&&(L.DomEvent.fakeStop(h),this._fireEvent([x],h))}}),L.PM.initialize()})();var xU={exports:{}};(function(t){(function(e){var n;n=dn,t.exports=e(n)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(n){return!e.Util.isArray(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(n,r,i){return n.latLngToLayerPoint(r).distanceTo(n.latLngToLayerPoint(i))},distanceSegment:function(n,r,i,s){var o=n.latLngToLayerPoint(r),a=n.latLngToLayerPoint(i),l=n.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(n,r){var i=r!=="imperial",s;return i?n>1e3?s=(n/1e3).toFixed(2)+" km":s=n.toFixed(1)+" m":(n*=1.09361,n>1760?s=(n/1760).toFixed(2)+" miles":s=n.toFixed(1)+" yd"),s},belongsSegment:function(n,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(n)+n.distanceTo(i)-o;return a/o<s},length:function(n){var r=e.GeometryUtil.accumulatedLengths(n);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(n){if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),n.length===0)return[];for(var r=0,i=[0],s=0,o=n.length-1;s<o;s++)r+=n[s].distanceTo(n[s+1]),i.push(r);return i},closestOnSegment:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=n.project(r,o),l=n.project(i,o),c=n.project(s,o),f=e.LineUtil.closestPointOnSegment(a,l,c);return n.unproject(f,o)},closestOnCircle:function(n,r){const i=n.getLatLng(),s=n.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,c=i.lng,f=i.lat,p=a-c,y=l-f,m=Math.sqrt(p*p+y*y),C=c+p/m*o,S=f+y/m*o;return new e.LatLng(S,C)},closest:function(n,r,i,s){var o,a=1/0,l=null,c,f,p,y;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(c=0;c<r.length;c++)y=e.GeometryUtil.closest(n,r[c],i,s),y&&y.distance<a&&(a=y.distance,l=y);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(O){if(e.Polyline._flat(O))O.push(O[0]);else for(var D=0;D<O.length;D++)m(O[D])};m(o)}if(e.Polyline._flat(o)){if(s){for(c=0,f=o.length;c<f;c++){var C=o[c];p=e.GeometryUtil.distance(n,i,C),p<a&&(a=p,l=C,l.distance=p)}return l}for(c=0,f=o.length;c<f-1;c++){var S=o[c],T=o[c+1];p=e.GeometryUtil.distanceSegment(n,i,S,T),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(n,i,S,T),l.distance=p)}return l}else{for(c=0;c<o.length;c++)y=e.GeometryUtil.closest(n,o[c],i,s),y.distance<a&&(a=y.distance,l=y);return l}},closestLayer:function(n,r,i){for(var s=1/0,o=null,a=null,l=1/0,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var y=e.GeometryUtil.closestLayer(n,p.getLayers(),i);y.distance<s&&(s=y.distance,o=y)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(n,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(n,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var y=e.GeometryUtil.closestLayer(n,p.getLayers(),i);o.push(y)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(n,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(n,i,l)):(l=e.GeometryUtil.closest(n,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,C){return m.distance-C.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(n,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,c=0,f=r.length;c<f;c++){var p=r[c];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var y=o.sort(function(m,C){return m.distance-C.distance});return y},closestLayerSnap:function(n,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(n,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(n,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(n,l,i))}return a},interpolateOnPointSegment:function(n,r,i){return e.point(n.x*(1-i)+i*r.x,n.y*(1-i)+i*r.y)},interpolateOnLine:function(n,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());for(var a=[],l=0,c=0;c<s;c++)a[c]=n.project(r[c],o),c>0&&(l+=a[c-1].distanceTo(a[c]));for(var f=l*i,p=0,y=0,c=0;y<f;c++){var m=a[c],C=a[c+1];p=y,y+=m.distanceTo(C)}if(m==null&&C==null)var m=a[0],C=a[1],c=1;var S=y-p!==0?(f-p)/(y-p):0,T=e.GeometryUtil.interpolateOnPointSegment(m,C,S);return{latLng:n.unproject(T,o),predecessor:c-1}},locateOnLine:function(n,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(n,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],c=0,f=!1,p=0,y=s.length-1;p<y;p++){var m=s[p],C=s[p+1];if(c=a[p],e.GeometryUtil.belongsSegment(o,m,C,.001)){c+=m.distanceTo(o),f=!0;break}}if(!f)throw"Could not interpolate "+i.toString()+" within "+r.toString();return c/l},reverse:function(n){return e.polyline(n.getLatLngs().slice(0).reverse())},extract:function(n,r,i,s){if(i>s)return e.GeometryUtil.extract(n,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(n,r,i),l=e.GeometryUtil.interpolateOnLine(n,r,s);if(i==s){var c=e.GeometryUtil.interpolateOnLine(n,r,s);return[c.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var f=o.slice(a.predecessor+1,l.predecessor+1);return f.unshift(a.latLng),f.push(l.latLng),f},isBefore:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(n,r){return Math.atan2(r.y-n.y,r.x-n.x)*180/Math.PI},computeSlope:function(n,r){var i=(r.y-n.y)/(r.x-n.x),s=n.y-i*n.x;return{a:i,b:s}},rotatePoint:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=i*Math.PI/180,l=n.project(r,o),c=n.project(s,o),f=Math.cos(a)*(l.x-c.x)-Math.sin(a)*(l.y-c.y)+c.x,p=Math.sin(a)*(l.x-c.x)+Math.cos(a)*(l.y-c.y)+c.y;return n.unproject(new e.Point(f,p),o)},bearing:function(n,r){var i=Math.PI/180,s=n.lat*i,o=r.lat*i,a=n.lng*i,l=r.lng*i,c=Math.sin(l-a)*Math.cos(o),f=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(c,f)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(n,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=n.lng*s,c=n.lat*s,f=r*s,p=Math.sin(c),y=Math.cos(c),m=Math.cos(i/a),C=Math.sin(i/a),S=Math.asin(p*m+y*C*Math.cos(f)),T=l+Math.atan2(Math.sin(f)*C*y,m-p*Math.sin(S));return T=T*o,T=T>180?T-360:T<-180?T+360:T,e.latLng([S*o,T])},angle:function(n,r,i){var s=n.latLngToContainerPoint(r),o=n.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(n,r,i,s){var o=e.GeometryUtil.angle(n,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(n,a,r,i)}}),e.GeometryUtil})})(xU);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(t){this._map=t,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(n){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:n.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function t(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",t,this),this._map.whenReady(t,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(t){typeof t.eachLayer=="function"?t.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(t),this._layers.push(t))},removeLayer:function(t){if(typeof t.eachLayer=="function")t.eachLayer(function(n){this.removeLayer(n)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(t);var e=this._layers.indexOf(t);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(t){var e=L.GeometryUtil.closestLayerSnap,n=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(t,this._buffer):r=this._layers,e(this._map,r,t,n,!1)},_onMouseMove:function(t){var e=this.getClosest(t.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(t){var e=this.getClosest(t.latlng);e&&this._map.fire("almost:"+t.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);var LU=AS,CU=Qb,SU="Expected a function";function EU(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(SU);return CU(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),LU(t,e,{leading:r,maxWait:e,trailing:i})}var PU=EU;const Pd=uy(PU),El=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=dn.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n},Pa=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`};function kU(){const t=kt(null),e=kt(null),n=kt(null),r=kt(null),i=kt(""),s=kt(null),o=kt(!1);kt(null);const a=()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(U=>U.remove()),document.querySelectorAll(".drawing-help-message").forEach(U=>U.remove())};window.addEventListener("clearControlPoints",a),Au(()=>{window.removeEventListener("clearControlPoints",a),t.value&&(t.value.remove(),t.value=null)});const l=(U,R)=>{const ee=dn.DomUtil.create("div","measure-tooltip");if(ee.innerHTML=R,ee.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ee),t.value){const ie=t.value.latLngToContainerPoint(U);ee.style.left=`${ie.x+10}px`,ee.style.top=`${ie.y-25}px`}return ee},c=Pd((U,R,ee)=>{if(U&&(U.innerHTML=ee,t.value)){const ie=t.value.latLngToContainerPoint(R);U.style.left=`${ie.x+10}px`,U.style.top=`${ie.y-25}px`}},100),f=(U,R,ee)=>{U.on("mouseover",()=>{const ie=l(U.getLatLng(),ee());U.measureDiv=ie}),U.on("mousemove",ie=>{U.measureDiv&&t.value&&c(U.measureDiv,ie.latlng,ee())}),U.on("mouseout",()=>{U.measureDiv&&(U.measureDiv.remove(),U.measureDiv=void 0)})};let p=[];const y=()=>{var U;p.cleanup&&p.cleanup(),n.value&&n.value.clearLayers(),p=[],(U=r.value)==null||U.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(R=>R.remove())},m=(U,R="#2563EB")=>{const ee=typeof window<"u"&&window.innerWidth<768,ie=dn.circleMarker(U,{radius:ee?14:6,color:R,fillColor:R,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(ie),ie},C=(U,R)=>{var ie,fe,me,Oe,Z,ae;const ee={type:R,style:U.options||{}};try{if(U instanceof dn.Polygon)try{const pe=U.getLatLngs()[0].map(Pe=>[Pe.lng,Pe.lat]);pe.push(pe[0]);const Le=Hh([pe]);ee.surface=Dp(Le),ee.perimeter=x9(Gg(pe),{units:"meters"})}catch(ce){console.warn("Erreur lors du calcul des propriétés du polygone:",ce),ee.surface=0,ee.perimeter=0}else if(U instanceof dn.Polyline&&!(U instanceof dn.Polygon))try{const ce=U.getLatLngs();let pe=0;for(let Le=1;Le<ce.length;Le++)pe+=ce[Le].distanceTo(ce[Le-1]);ee.length=pe}catch(ce){console.warn("Erreur lors du calcul de la longueur de la ligne:",ce),ee.length=0}ee.style={...ee.style,color:((ie=U.options)==null?void 0:ie.color)||"#3388ff",weight:((fe=U.options)==null?void 0:fe.weight)||3,opacity:((me=U.options)==null?void 0:me.opacity)||1,fillColor:((Oe=U.options)==null?void 0:Oe.fillColor)||"#3388ff",fillOpacity:((Z=U.options)==null?void 0:Z.fillOpacity)||.2,dashArray:((ae=U.options)==null?void 0:ae.dashArray)||""}}catch(ce){console.error("Erreur lors du calcul des propriétés de la forme:",ce),ee.style=ee.style||{color:"#3388ff",weight:3,opacity:1,fillColor:"#3388ff",fillOpacity:.2,dashArray:""}}return ee},S=()=>{if(!t.value||!t.value.almostOver||!e.value)return;e.value.getLayers().filter(R=>R instanceof vs||R instanceof dn.Polyline&&!(R instanceof dn.Polygon)||R instanceof Ol||R instanceof il).forEach(R=>{var ee;(ee=t.value)==null||ee.almostOver.addLayer(R)})},T=(U,R,ee)=>{const ie={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},fe=dn.map(U,ie).setView(R,ee);t.value=fe,dn.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(fe);const me=new dn.FeatureGroup;return me.addTo(fe),e.value=me,fe.almostOver?fe.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),n.value=dn.featureGroup().addTo(fe),r.value=dn.featureGroup().addTo(fe),fe.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:me,snapLayers:[me,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),fe.whenReady(()=>{t.value&&t.value.almostOver&&e.value&&setTimeout(S,100)}),fe.on("pm:drawstart",Oe=>{o.value=!0,Oe.shape==="Circle"&&i.value==="Semicircle"&&(fe.getContainer().style.cursor="crosshair")}),fe.on("pm:drawend",()=>{o.value=!1,fe.getContainer().style.cursor="",s.value&&El("Cliquez sur la forme pour afficher les points de contrôle")}),fe.on("pm:create",W),me.on("click",Oe=>{var ae,ce,pe;dn.DomEvent.stopPropagation(Oe);const Z=Oe.layer;Z.name&&!((ae=Z.properties)!=null&&ae.name)?(Z.properties||(Z.properties={}),Z.properties.name=Z.name):(ce=Z.properties)!=null&&ce.name&&!Z.name&&(Z.name=Z.properties.name),(pe=r.value)==null||pe.clearLayers(),y(),s.value=Z,Z instanceof dn.Polygon?Y(Z):Z instanceof vs||Z instanceof dn.Polyline?V(Z):Z instanceof il&&ge(Z)}),fe.on("pm:edit",Oe=>{var ae;const Z=Oe.layer;if(Z){const ce=((ae=Z.properties)==null?void 0:ae.type)||"unknown";J(Z,ce),Z instanceof dn.Polygon?Y(Z):Z instanceof vs?(Z.updateProperties(),J(Z,"Line"),V(Z)):Z instanceof dn.Polyline?V(Z):Z instanceof il&&(Z.updateProperties(),ge(Z))}}),fe.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Oe=>Oe.remove()),El("Déplacez la forme à l'endroit souhaité")}),fe.on("pm:dragend",Oe=>{var ae;const Z=Oe.layer;if(Z){const ce=((ae=Z.properties)==null?void 0:ae.type)||"unknown";Z instanceof vs?(Z.updateProperties(),J(Z,"Line"),V(Z)):J(Z,ce)}setTimeout(()=>{El("Cliquez sur la forme pour afficher les points de contrôle")},100)}),fe.on("pm:remove",()=>{var Oe;(Oe=document.querySelector(".drawing-help-message"))==null||Oe.remove()}),fe.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(Oe=>Oe.remove()),El("Utilisez les points de contrôle pour modifier la forme")}),fe.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Oe=>Oe.remove())}),fe.on("zoomstart",()=>{s.value&&(y(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(Oe=>Oe.remove()))}),fe.on("almost:over",function(Oe){const ae=Oe.layer;if(ae){if(s.value===ae)return;if(ae instanceof vs){const ce={...ae.options};ae._originalStyle=ce;const pe=ce;ae.setStyle({weight:(pe.weight||3)+2,opacity:Math.min((pe.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(Le=>Le.remove()),El("Cliquez pour sélectionner cette ligne"),fe.getContainer()&&(fe.getContainer().style.cursor="pointer")}else if(ae instanceof Ol){const ce={...ae.options};ae._originalStyle=ce,ae.setStyle({weight:(ce.weight||3)+2,opacity:Math.min((ce.opacity||1)+.2,1),fillOpacity:Math.min((ce.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(pe=>pe.remove()),El("Cliquez pour sélectionner ce polygone"),fe.getContainer()&&(fe.getContainer().style.cursor="pointer")}else if(ae instanceof il){const ce=ae.getElement();ce&&(ce.classList.add("geo-note-pulse"),ce.style.zIndex="1000",ce.style.visibility="visible",ce.style.display="flex",ce.style.opacity="1",ce.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))"),document.querySelectorAll(".drawing-help-message").forEach(pe=>pe.remove()),El("Cliquez pour sélectionner cette note"),fe.getContainer()&&(fe.getContainer().style.cursor="pointer")}}}),fe.on("almost:out",function(Oe){const ae=Oe.layer;if(ae){if(s.value===ae)return;if(ae instanceof vs&&ae._originalStyle)ae.setStyle(ae._originalStyle),ae._originalStyle=void 0;else if(ae instanceof Ol)ae._originalStyle&&(ae.setStyle(ae._originalStyle),ae._originalStyle=void 0);else if(ae instanceof il){const ce=ae.getElement();ce?(ce.classList.remove("geo-note-pulse"),ce.style.zIndex="",ce.style.filter="none",ce.style.opacity="1",ce.style.display="block",ce.style.visibility="visible",Array.from(ce.querySelectorAll("*")).forEach(pe=>{pe.style.visibility="visible",pe.style.display="block",pe.style.opacity="1"}),setTimeout(()=>{try{const pe=ce.getBoundingClientRect();(pe.width===0||pe.height===0)&&(console.warn("[almost:out] L'élément a une taille nulle après sortie, recréation de l'icône"),ae.recreateIcon())}catch(pe){console.error("[almost:out] Erreur lors de la vérification de la taille:",pe),ae.recreateIcon()}},100)):(console.warn("[almost:out] Élément DOM introuvable, recréation de l'icône"),ae.recreateIcon())}(!s.value||s.value&&s.value!==ae)&&document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove()),fe.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(fe.getContainer().style.cursor="")}}),fe.on("almost:click",function(Oe){var ce,pe;const ae=Oe.layer;ae&&s.value===ae||(s.value&&y(),ae&&ae instanceof vs?(s.value=ae,(ce=r.value)==null||ce.clearLayers(),y(),V(ae),El("Utilisez les points de contrôle pour modifier la ligne")):ae&&ae instanceof Ol?(s.value=ae,(pe=r.value)==null||pe.clearLayers(),y(),Y(ae),El("Utilisez les points de contrôle pour modifier le polygone")):ae&&ae instanceof il&&(s.value=ae,ae.editNote()))}),me.on("layeradd",function(Oe){fe.almostOver&&(Oe.layer instanceof vs||Oe.layer instanceof dn.Polyline&&!(Oe.layer instanceof dn.Polygon)||Oe.layer instanceof Ol||Oe.layer instanceof il)&&fe.almostOver.addLayer(Oe.layer)}),me.on("layerremove",function(Oe){fe.almostOver&&(Oe.layer instanceof vs||Oe.layer instanceof dn.Polyline&&!(Oe.layer instanceof dn.Polygon)||Oe.layer instanceof Ol||Oe.layer instanceof il)&&fe.almostOver.removeLayer(Oe.layer)}),fe},O=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const U=e.value.getBounds();if(U.isValid()){const R={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(U,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value&&(t.value.options.fadeAnimation=R.fadeAnimation),setTimeout(()=>{try{t.value&&(t.value.options.zoomAnimation=R.zoomAnimation,t.value.options.markerZoomAnimation=R.markerZoomAnimation)}catch(ee){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ee)}},500)}catch(ee){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ee)}},500)}}catch(U){if(console.warn("[useMapDrawing] Error adjusting view:",U),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(R){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",R)}}},D=U=>{var ee;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(ie=>ie.remove());try{const ie=t.value.pm;ie.globalEditModeEnabled()&&ie.disableGlobalEditMode(),ie.globalRemovalModeEnabled()&&ie.disableGlobalRemovalMode(),ie.disableDraw(),y(),(ee=r.value)==null||ee.clearLayers()}catch(ie){console.error("Error disabling modes:",ie)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:U}})),i.value=U,!U){y(),S();return}let R=U;switch(U){case"Note":R="GeoNote";break;case"Polygon":R="Polygon";break;case"Line":R="Line";break;default:R=U}U=R,se(),setTimeout(()=>{var ie,fe,me,Oe,Z,ae,ce;try{switch(U){case"Polygon":El("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ie=t.value)==null||ie.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(fe=t.value)==null||fe.off("pm:create"),(me=t.value)==null||me.on("pm:create",pe=>{var Le,Pe,Ue;if(pe.shape==="Polygon"&&pe.layer){const Ne=pe.layer.getLatLngs()[0];(Le=t.value)==null||Le.removeLayer(pe.layer),(Pe=e.value)!=null&&Pe.hasLayer(pe.layer)&&e.value.removeLayer(pe.layer);const nt=new Ol(Ne,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(nt),s.value=nt,nt.updateProperties()),(Ue=t.value)==null||Ue.pm.disableDraw(),se()}});break;case"Line":El("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Oe=t.value)==null||Oe.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Z=t.value)==null||Z.off("pm:create"),(ae=t.value)==null||ae.on("pm:create",pe=>{var Le,Pe,Ue;if(pe.shape==="Line"&&pe.layer){const Ne=pe.layer.getLatLngs();(Le=t.value)==null||Le.removeLayer(pe.layer),(Pe=e.value)!=null&&Pe.hasLayer(pe.layer)&&e.value.removeLayer(pe.layer);const nt=new vs(Ne,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(nt),s.value=nt,nt.updateProperties()),(Ue=t.value)==null||Ue.pm.disableDraw(),se()}});break;case"GeoNote":if(El("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const pe=async Pe=>{if(!t.value||!e.value)return null;try{const Ue=qg(),Ne=new il(Pe,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(Ne),s.value=Ne,Ne.updateProperties();try{const nt=Ue.currentMapId||void 0,pt=await Ne.saveNote(nt),bt=Ne._leaflet_id;return window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Ne,leafletId:bt,backendId:pt}})),Ne.openPopup(),Ne}catch(nt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",nt),su(async()=>{const{useNotificationStore:pt}=await Promise.resolve().then(()=>iB);return{useNotificationStore:pt}},void 0).then(({useNotificationStore:pt})=>{pt().error("Erreur lors de la création de la note")}),null}}catch(Ue){return console.error("[useMapDrawing] Erreur lors de la création de la note:",Ue),null}},Le=async Pe=>{dn.DomEvent.stopPropagation(Pe),dn.DomEvent.preventDefault(Pe);const Ue=await pe(Pe.latlng);Ue&&t.value&&(t.value.off("click",Le),e.value&&e.value.getLayers().forEach(Ne=>{if(Ne.off&&typeof Ne.off=="function")try{Ne.off("click")}catch(nt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",nt)}}),D(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Ue,leafletId:Ue._leaflet_id}})))};if(t.value.on("click",Le),e.value){const Pe=async Ne=>{dn.DomEvent.stopPropagation(Ne),dn.DomEvent.preventDefault(Ne);const nt=await pe(Ne.latlng);return nt&&t.value&&(t.value.off("click",Le),e.value&&e.value.getLayers().forEach(pt=>{if(pt.off&&typeof pt.off=="function")try{pt.off("click")}catch(bt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",bt)}}),D(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:nt,leafletId:nt._leaflet_id}}))),!1};e.value.getLayers().forEach(Ne=>{Ne.on("click",Pe)});const Ue=()=>{e.value&&e.value.getLayers().forEach(Ne=>{if(Ne.off&&typeof Ne.off=="function")try{Ne.off("click")}catch(nt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",nt)}}),window.removeEventListener("tool:changed",Ue)};window.addEventListener("tool:changed",Ue)}}break;case"delete":El("Cliquez sur une forme pour la supprimer"),(ce=t.value)==null||ce.pm.enableGlobalRemovalMode();break}}catch(pe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",pe)}},100)},B=U=>{if(!s.value)return;const R=s.value;R.properties=R.properties||{},R.properties.style=R.properties.style||{},R.properties.style={...R.properties.style,...U};{const ee={};U.fillColor&&(ee.fillColor=U.fillColor),U.fillOpacity!==void 0&&(ee.fillOpacity=U.fillOpacity),U.strokeColor&&(ee.color=U.strokeColor),U.strokeOpacity!==void 0&&(ee.opacity=U.strokeOpacity),U.strokeWidth!==void 0&&(ee.weight=U.strokeWidth),U.dashArray&&(ee.dashArray=U.dashArray),"setStyle"in R&&R.setStyle(ee)}},z=U=>{if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}s.value.properties||(s.value.properties={}),s.value.properties.type,s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3));const R=s.value.properties.type,ee=s.value.properties.category,ie="category"in U&&U.category!==ee;if(Object.keys(U).forEach(me=>{me==="type"&&R||s.value&&(s.value.properties[me]=U[me]),me==="name"&&(s.value.name=U[me])}),R&&(s.value.properties.type=R),ee&&!ie&&(s.value.properties.category=ee),s.value&&s.value._dbId&&ie){const me=qg(),Oe=me.elements.find(Z=>{var ae;return Z.id===((ae=s.value)==null?void 0:ae._dbId)});if(Oe){const Z=Oe;Z.data||(Z.data={}),Z.data.category=s.value.properties.category,me.$patch({unsavedChanges:!0})}}const fe=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ie}});window.dispatchEvent(fe)},H=U=>{s.value=null,ll(()=>{s.value=U})},J=(U,R)=>{TS((ie,fe)=>{const me=C(ie,fe);ie.properties={...me},H(ie),ie.fire("properties:updated",{shape:ie,properties:ie.properties})},100)(U,R)},Q=(U,R)=>dn.latLng((U.lat+R.lat)/2,(U.lng+R.lng)/2),V=U=>{if(!t.value||!e.value)return;y();const R=U.getLatLngs();if(!R||R.length===0){console.warn("Pas de points pour la ligne");return}let ee=null;if(U instanceof vs){const ie=U.getCenter();ee=m(ie,"#059669"),p.push(ee),f(ee,U,()=>{const fe=U.getLength()||0;return Pa(fe,"m","Longueur totale")}),ee.on("mousedown",fe=>{if(!t.value)return;dn.DomEvent.stopPropagation(fe),t.value.dragging.disable();let me=!0;const Oe=U.getLatLngs().map(Le=>dn.latLng(Le.lat,Le.lng)),Z=fe.latlng;U instanceof vs&&(U.off("move:end"),U.off("vertex:moved"),U.off("latlngs:updated"),U.off("properties:updated")),p.forEach((Le,Pe)=>{Pe>0&&(Le.setStyle({opacity:0,fillOpacity:0}),Le.measureDiv&&(Le.measureDiv.style.display="none"))});const ce=Pd(Le=>{if(!me)return;const Pe=Le.latlng.lng-Z.lng,Ue=Le.latlng.lat-Z.lat,Ne=Oe.map(nt=>dn.latLng(nt.lat+Ue,nt.lng+Pe));dn.Polyline.prototype.setLatLngs.call(U,Ne),ee==null||ee.setLatLng(Le.latlng)},16),pe=()=>{if(me=!1,!!t.value){if(t.value.off("mousemove",ce),document.removeEventListener("mouseup",pe),t.value.dragging.enable(),U instanceof vs){const Le=()=>{y(),V(U)};U.on("move:end",Le),U.on("vertex:moved",Le),U.on("latlngs:updated",Le),U.on("properties:updated",Le),U.updateProperties(),J(U,"Line")}y(),V(U)}};t.value.on("mousemove",ce),document.addEventListener("mouseup",pe)})}if(R.forEach((ie,fe)=>{const me=m(ie,"#DC2626");p.push(me),f(me,U,()=>{if(U instanceof vs){const Oe=U.getLength()||0,Z=U.getLengthToVertex?U.getLengthToVertex(fe):0;return[Pa(Z,"m","Distance depuis le début"),Pa(Oe,"m","Longueur totale")].join("<br>")}return""}),me.on("mousedown",Oe=>{if(!t.value)return;dn.DomEvent.stopPropagation(Oe),t.value.dragging.disable();let Z=!0;U instanceof vs&&(U.off("move:end"),U.off("vertex:moved"),U.off("latlngs:updated"),U.off("properties:updated")),p.forEach((pe,Le)=>{Le!==fe+1&&(pe.setStyle({opacity:0,fillOpacity:0}),pe.measureDiv&&(pe.measureDiv.style.display="none"))});const ae=Pd(pe=>{if(!Z)return;const Le=U.getLatLngs();Le[fe]=pe.latlng,dn.Polyline.prototype.setLatLngs.call(U,Le),me.setLatLng(pe.latlng)},16),ce=()=>{if(Z=!1,!!t.value){if(t.value.off("mousemove",ae),document.removeEventListener("mouseup",ce),t.value.dragging.enable(),U instanceof vs){const pe=()=>{y(),V(U)};U.on("move:end",pe),U.on("vertex:moved",pe),U.on("latlngs:updated",pe),U.on("properties:updated",pe),U.updateProperties(),J(U,"Line")}y(),V(U)}};t.value.on("mousemove",ae),document.addEventListener("mouseup",ce)})}),R.length>=2)for(let ie=0;ie<R.length-1;ie++){const fe=R[ie],me=R[ie+1],Oe=dn.latLng((fe.lat+me.lat)/2,(fe.lng+me.lng)/2),Z=m(Oe,"#2b6451");p.push(Z),f(Z,U,()=>{if(U instanceof vs){const ae=U.getSegmentLengthAt(ie),ce=U.getLength()||0,pe=(U.getLengthToVertex?U.getLengthToVertex(ie):0)+ae/2;return[Pa(ae,"m","Longueur du segment"),Pa(ae/2,"m","Demi-segment"),Pa(pe,"m","Distance depuis le début"),Pa(ce,"m","Longueur totale")].join("<br>")}return""})}if(U instanceof vs){const ie=()=>{y(),V(U)},fe=()=>{p.forEach((me,Oe)=>{Oe>0&&(me.setStyle({opacity:0,fillOpacity:0}),me.measureDiv&&(me.measureDiv.style.display="none"))})};U.on("move:start",fe),U.on("move:end",ie),U.on("vertex:moved",ie),U.on("latlngs:updated",ie),U.on("properties:updated",ie),p.cleanup=()=>{U.off("move:start",fe),U.off("move:end",ie),U.off("vertex:moved",ie),U.off("latlngs:updated",ie),U.off("properties:updated",ie)}}},Y=U=>{if(!t.value||!e.value)return;y();const R=U.getLatLngs()[0],ee=R.map(ce=>[ce.lng,ce.lat]);ee.push(ee[0]);const ie=Hh([ee]),fe=Dp(ie),me=R.reduce((ce,pe,Le)=>{const Pe=R[(Le+1)%R.length];return ce+pe.distanceTo(Pe)},0);let Oe;if(typeof U.getCenter=="function")try{Oe=U.getCenter()}catch(ce){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",ce);const pe=yg(ie);Oe=dn.latLng(pe.geometry.coordinates[1],pe.geometry.coordinates[0])}else{const ce=yg(ie);Oe=dn.latLng(ce.geometry.coordinates[1],ce.geometry.coordinates[0])}const Z=m(Oe,"#059669");p.push(Z),f(Z,U,()=>[Pa(me,"m","Périmètre"),Pa(fe,"m²","Surface")].join("<br>")),Z.on("mousedown",ce=>{if(!t.value)return;dn.DomEvent.stopPropagation(ce),t.value.dragging.disable();let pe=!0;const Le=ce.latlng,Pe=[...R];p.forEach((pt,bt)=>{bt>0&&pt.setStyle({opacity:0,fillOpacity:0})});const Ue=Pd(pt=>{if(!pe)return;const bt=pt.latlng.lng-Le.lng,le=pt.latlng.lat-Le.lat,oe=Pe.map(ue=>dn.latLng(ue.lat+le,ue.lng+bt));dn.Polygon.prototype.setLatLngs.call(U,[oe]),Z.setLatLng(pt.latlng)},16),Ne=pt=>{pe&&Ue(pt)},nt=()=>{if(pe=!1,!!t.value){if(t.value.off("mousemove",Ne),document.removeEventListener("mouseup",nt),t.value.dragging.enable(),U.properties){const pt=U.getLatLngs()[0],bt=pt.map(oe=>[oe.lng,oe.lat]);bt.push(bt[0]);const le=Hh([bt]);U.properties.area=Dp(le),U.properties.perimeter=pt.reduce((oe,ue,te)=>{const Se=pt[(te+1)%pt.length];return oe+ue.distanceTo(Se)},0),U.properties.surface=U.properties.area}y(),Y(U),s.value=null,ll(()=>{s.value=U})}};t.value.on("mousemove",Ne),document.addEventListener("mouseup",nt)}),R.forEach((ce,pe)=>{const Le=m(ce,"#DC2626");p.push(Le),f(Le,U,()=>{const Pe=R[(pe-1+R.length)%R.length],Ue=R[(pe+1)%R.length],Ne=ce.distanceTo(Pe),nt=ce.distanceTo(Ue);return[Pa(Ne,"m","Distance au point précédent"),Pa(nt,"m","Distance au point suivant"),Pa(me,"m","Périmètre total"),Pa(fe,"m²","Surface")].join("<br>")}),Le.on("mousedown",Pe=>{if(dn.DomEvent.stopPropagation(Pe),!t.value)return;t.value.dragging.disable();let Ue=!0;Z&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"));const Ne=Pd(bt=>{if(!Ue)return;R[pe]=bt.latlng,dn.Polygon.prototype.setLatLngs.call(U,[R]),Le.setLatLng(bt.latlng);const le=p.slice(R.length+1),oe=(pe-1+R.length)%R.length,ue=le[oe];if(ue){const Se=R[oe],Ve=R[pe],Xe=dn.latLng((Se.lat+Ve.lat)/2,(Se.lng+Ve.lng)/2);ue.setLatLng(Xe)}const te=le[pe];if(te){const Se=R[pe],Ve=R[(pe+1)%R.length],Xe=dn.latLng((Se.lat+Ve.lat)/2,(Se.lng+Ve.lng)/2);te.setLatLng(Xe)}},16),nt=bt=>{Ue&&Ne(bt)},pt=()=>{if(Ue=!1,!!t.value){if(t.value.off("mousemove",nt),document.removeEventListener("mouseup",pt),t.value.dragging.enable(),U.properties){const bt=U.getLatLngs()[0].map(oe=>[oe.lng,oe.lat]);bt.push(bt[0]);const le=Hh([bt]);U.properties.area=Dp(le),U.properties.perimeter=R.reduce((oe,ue,te)=>{const Se=R[(te+1)%R.length];return oe+ue.distanceTo(Se)},0),U.properties.surface=U.properties.area}y(),Y(U),s.value=null,ll(()=>{s.value=U})}};t.value.on("mousemove",nt),document.addEventListener("mouseup",pt)})}),(()=>{const ce=U.getLatLngs()[0];p.slice(ce.length+1).forEach(Le=>{n.value&&n.value.removeLayer(Le)}),p=p.slice(0,ce.length+1);const pe=new Array(ce.length);for(let Le=0;Le<ce.length;Le++){const Pe=ce[Le],Ue=ce[(Le+1)%ce.length];pe[Le]=Q(Pe,Ue)}pe.forEach((Le,Pe)=>{const Ue=m(Le,"#2b6451");p.push(Ue),f(Ue,U,()=>{const Ne=ce[Pe],nt=ce[(Pe+1)%ce.length],pt=Ne.distanceTo(nt);return[Pa(pt,"m","Longueur du segment"),Pa(me,"m","Périmètre total"),Pa(fe,"m²","Surface")].join("<br>")}),Ue.on("mousedown",Ne=>{if(!t.value)return;dn.DomEvent.stopPropagation(Ne),t.value.dragging.disable();let nt=!0;const pt=Pe;Z&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"));const bt=[...U.getLatLngs()[0]];bt.splice((pt+1)%bt.length,0,Le),U.setLatLngs([bt]),y(),Y(U);const le=pt+1,oe=1+le,ue=le<p.length-1?p[oe]:null;if(ue){const te=Ve=>{if(!nt)return;const Xe=U.getLatLngs()[0];Xe[le]=Ve.latlng,U.setLatLngs([Xe]),ue.setLatLng(Ve.latlng);const at=p.slice(1+Xe.length),ot=(le-1+Xe.length)%Xe.length,dt=le;if(at[ot]){const zt=Xe[ot],Rt=Xe[le],Zt=dn.latLng((zt.lat+Rt.lat)/2,(zt.lng+Rt.lng)/2);at[ot].setLatLng(Zt)}if(at[dt]){const zt=Xe[le],Rt=Xe[(le+1)%Xe.length],Zt=dn.latLng((zt.lat+Rt.lat)/2,(zt.lng+Rt.lng)/2);at[dt].setLatLng(Zt)}},Se=()=>{if(nt=!1,!!t.value){if(t.value.off("mousemove",te),document.removeEventListener("mouseup",Se),t.value.dragging.enable(),U.properties){const Ve=U.getLatLngs()[0].map(at=>[at.lng,at.lat]);Ve.push(Ve[0]);const Xe=Hh([Ve]);U.properties.area=Dp(Xe),U.properties.perimeter=U.getLatLngs()[0].reduce((at,ot,dt,zt)=>{const Rt=zt[(dt+1)%zt.length];return at+ot.distanceTo(Rt)},0)}y(),Y(U),s.value=null,ll(()=>{s.value=U})}};t.value.on("mousemove",te),document.addEventListener("mouseup",Se)}else t.value.dragging.enable(),y(),Y(U)})})})()},ge=U=>{if(!t.value||!e.value)return;y();const R=U.getLatLng(),ee=m(R,"#059669");p.push(ee),f(ee,U,()=>`Position: ${R.lat.toFixed(6)}, ${R.lng.toFixed(6)}`),ee.on("mousedown",ie=>{if(!t.value)return;dn.DomEvent.stopPropagation(ie),t.value.dragging.disable(),U.startMoving();let fe=!0;const Oe=Pd(ae=>{fe&&(ee.setLatLng(ae.latlng),U.setLatLng(ae.latlng))},16),Z=()=>{t.value&&(t.value.off("mousemove",Oe),document.removeEventListener("mouseup",Z),t.value.dragging.enable(),fe=!1,U.finishMoving(),U.updateProperties(),s.value=null,ll(()=>{s.value=U,y(),ge(U)}))};t.value.on("mousemove",Oe),document.addEventListener("mouseup",Z)}),s.value=U},$=U=>{if(!(!t.value||!r.value)){r.value.clearLayers();try{if(U instanceof il){const R=U.getLatLng();if(R){const ee=dn.circleMarker(R,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ee)}}else if(U instanceof Ol||U instanceof dn.Polygon){let R=[];if("getLatLngs"in U){const ie=U.getLatLngs();if(Array.isArray(ie)&&ie.length>0){const fe=ie[0];Array.isArray(fe)?R=fe:fe instanceof dn.LatLng&&(R=ie)}}let ee=null;if(U instanceof Ol&&typeof U.getCenter=="function")ee=U.getCenter();else if(R.length>0){const ie=R.map(Oe=>[Oe.lng,Oe.lat]);ie.push(ie[0]);const fe=Hh([ie]),me=yg(fe);ee=dn.latLng(me.geometry.coordinates[1],me.geometry.coordinates[0])}if(ee){const ie=dn.circleMarker(ee,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(ie)}R.forEach(ie=>{if(ie){const fe=dn.circleMarker(ie,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(fe)}});for(let ie=0;ie<R.length;ie++){const fe=R[ie],me=R[(ie+1)%R.length];if(fe&&me){const Oe=dn.latLng((fe.lat+me.lat)/2,(fe.lng+me.lng)/2),Z=dn.circleMarker(Oe,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Z)}}}}catch(R){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",R)}}},W=U=>{var ie,fe,me,Oe,Z;const R=U.layer;(ie=e.value)==null||ie.addLayer(R);let ee="unknown";if(R instanceof dn.Polygon?ee="Polygon":R instanceof dn.Polyline&&!(R instanceof dn.Polygon)&&(ee="Line"),R.properties=C(R,ee),R.properties||(R.properties={}),R.properties.category||(R.properties.category="forages"),R.properties.accessLevel||(R.properties.accessLevel="visitor"),R._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=R,window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:R,type:ee,properties:R.properties}})),R.on("mouseover",()=>{(!s.value||s.value!==R)&&$(R)}),R.on("mouseout",()=>{var ae;(!s.value||s.value!==R)&&((ae=r.value)==null||ae.clearLayers())}),R instanceof dn.Polygon){const ae=R.getLatLngs()[0],ce=new Ol([ae],{...R.options});ce.updateProperties(),(fe=e.value)==null||fe.removeLayer(R),(me=e.value)==null||me.addLayer(ce),s.value=ce,Y(ce)}else if(R instanceof vs)V(R),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(R);else if(R instanceof dn.Polyline&&!(R instanceof dn.Polygon)){const ae=R.getLatLngs(),ce=new vs(ae,{...R.options});ce.updateProperties(),(Oe=e.value)==null||Oe.removeLayer(R),(Z=e.value)==null||Z.addLayer(ce),s.value=ce,V(ce),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(ce)}El("Cliquez sur la forme pour afficher les points de contrôle")},se=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",W))},X=()=>{if(t.value&&t.value.almostOver){const U=t.value.almostOver.options.tolerance;return t.value.almostOver.options.tolerance=0,()=>{t.value&&t.value.almostOver&&(t.value.almostOver.options.tolerance=U)}}return()=>{}};return window.addEventListener("edit:start",()=>{const U=X(),R=()=>{U(),window.removeEventListener("edit:end",R)};window.addEventListener("edit:end",R)}),{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:T,setDrawingTool:D,updateShapeStyle:B,updateShapeProperties:z,adjustView:O,clearActiveControlPoints:y,addLinesToAlmostOver:S}}const Hi=Symbol("newer"),Go=Symbol("older");class MU{constructor(e,n){typeof e!="number"&&(n=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,n&&(this.assign(n),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[Hi]&&(e===this.oldest&&(this.oldest=e[Hi]),e[Hi][Go]=e[Go]),e[Go]&&(e[Go][Hi]=e[Hi]),e[Hi]=void 0,e[Go]=this.newest,this.newest&&(this.newest[Hi]=e),this.newest=e)}assign(e){let n,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new O4(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),n?(n[Hi]=o,o[Go]=n):this.oldest=o,n=o,r--==0)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(e){var n=this._keymap.get(e);if(n)return this._markEntryAsUsed(n),n.value}set(e,n){var r=this._keymap.get(e);return r?(r.value=n,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new O4(e,n)),this.newest?(this.newest[Hi]=r,r[Go]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[Hi]?(this.oldest=this.oldest[Hi],this.oldest[Go]=void 0):(this.oldest=void 0,this.newest=void 0),e[Hi]=e[Go]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let n=this._keymap.get(e);return n?n.value:void 0}has(e){return this._keymap.has(e)}delete(e){var n=this._keymap.get(e);if(n)return this._keymap.delete(n.key),n[Hi]&&n[Go]?(n[Go][Hi]=n[Hi],n[Hi][Go]=n[Go]):n[Hi]?(n[Hi][Go]=void 0,this.oldest=n[Hi]):n[Go]?(n[Go][Hi]=void 0,this.newest=n[Go]):this.oldest=this.newest=void 0,this.size--,n.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new r_(this.oldest)}values(){return new i_(this.oldest)}entries(){return this}[Symbol.iterator](){return new n_(this.oldest)}forEach(e,n){typeof n!="object"&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[Hi]}toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[Hi];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,n=n[Hi],n&&(e+=" < ");return e}}function O4(t,e){this.key=t,this.value=e,this[Hi]=void 0,this[Go]=void 0}function n_(t){this.entry=t}n_.prototype[Symbol.iterator]=function(){return this};n_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Hi],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}};function r_(t){this.entry=t}r_.prototype[Symbol.iterator]=function(){return this};r_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Hi],{done:!1,value:t.key}):{done:!0,value:void 0}};function i_(t){this.entry=t}i_.prototype[Symbol.iterator]=function(){return this};i_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Hi],{done:!1,value:t.value}):{done:!0,value:void 0}};function AU(t,e){let n=0,r=null;r=setInterval(function(){if(n>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),t.call(e)),++n},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new MU(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),AU(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var n=google.maps[t],r=new n(e);r.setMap(this._mutant),this._subLayers[t]=r}),this},removeGoogleLayer:function(t){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var t={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(t.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,t);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const t=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(t);let n;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(n=i)}),this.fire("controls_ready",{positions:n})},50)},_setupAttribution:function(t){if(!this._map)return;const e=google.maps.ControlPosition,n=this._attributionContainer=t.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(n,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(n),n.style.height="14px",this._map._controlCorners.bottomright.appendChild(n),this._logoContainer=t.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let n,r=e.src.match(this._roadRegexp),i=0;if(r?(n={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(n={x:r[1],y:r[2],z:r[3]}),i=0),n){var s=this._tileCoordsToKey(n);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(t,e){const n=this._tileCoordsToKey(t),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=n+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(t){const e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const t=this._map.getZoom(),e=this._mutant.getZoom();!t||!e||(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();const e=new google.maps.LatLng(t.lat,t.lng),n=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),n!==r&&(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}});L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)};let T0=!1,Ef=null;function s_(){return T0?Promise.resolve():Ef||(Ef=new Promise(async(t,e)=>{var n;try{if(window.google&&window.google.maps){T0=!0,t();return}try{const r=await M2.getGoogleMapsApiKey(),i=((n=r==null?void 0:r.data)==null?void 0:n.url)||"https://maps.googleapis.com/maps/api/js?libraries=places",s=document.createElement("script");s.type="text/javascript";const o=new URL(i);o.searchParams.has("loading")||o.searchParams.append("loading","async"),s.src=o.toString(),s.async=!0,s.defer=!0,s.onload=()=>{T0=!0,t()},s.onerror=()=>{Ef=null,e(new Error("Failed to load Google Maps API"))},document.head.appendChild(s)}catch(r){console.warn("Error loading Google Maps API:",r),Ef=null,e(r)}}catch(r){Ef=null,e(r)}}),Ef)}function qS(){return T0||window.google&&window.google.maps}function o_(t,e,n){if(isNaN(t)||isNaN(e))return"#";let r=`https://www.google.com/maps/dir/?api=1&destination=${t},${e}`;return n&&(r+=`&destination_place_id=${encodeURIComponent(n)}`),r}function a_(t,e,n){if(isNaN(t)||isNaN(e))return"#";let r=`https://www.google.com/maps/search/?api=1&query=${t},${e}`;return n&&(r+=`&query_place_id=${encodeURIComponent(n)}`),r}function YS(t,e,n="directions",r){if(isNaN(t)||isNaN(e))return;const i=n==="directions"?o_(t,e,r):a_(t,e,r);window.open(i,"_blank")}const TU={loadGoogleMapsApi:s_,isGoogleMapsLoaded:qS,getGoogleMapsDirectionsUrl:o_,getGoogleMapsSearchUrl:a_,openInGoogleMaps:YS},ZS=Object.freeze(Object.defineProperty({__proto__:null,default:TU,getGoogleMapsDirectionsUrl:o_,getGoogleMapsSearchUrl:a_,isGoogleMapsLoaded:qS,loadGoogleMapsApi:s_,openInGoogleMaps:YS},Symbol.toStringTag,{value:"Module"}));function OU(){const t=kt(null),e=kt("Hybride"),n=kt(null),r=kt(!1),i={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:dn.latLngBounds(dn.latLng(41.333,-5.566),dn.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},s={Hybride:dn.layerGroup([dn.gridLayer.googleMutant({type:"hybrid",maxZoom:i.maxZoom})]),Cadastre:dn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:dn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})},o=async()=>{try{await s_(),r.value=!0}catch(f){console.error("Failed to load Google Maps API:",f),r.value=!1,e.value==="Hybride"&&(e.value="IGN")}};return{map:t,currentBaseMap:e,baseMaps:s,initMap:async f=>{r.value||await o(),t.value=f,f.options.zoomSnap=.5,f.options.zoomDelta=.5,f.options.wheelPxPerZoomLevel=120,f.options.zoomAnimation=!0,f.options.fadeAnimation=!0,f.options.markerZoomAnimation=!0,f.options.preferCanvas=!0,f.options.renderer=dn.canvas(),f.options.minZoom=2,f.options.maxZoom=19,f.options.scrollWheelZoom=!0,f.options.doubleClickZoom=!0;const p=dn.latLngBounds(dn.latLng(-90,-180),dn.latLng(90,180));f.setMaxBounds(p),f.options.maxBoundsViscosity=1,f.options.trackResize=!0;let y=null;f.getZoom(),f.on("zoomstart",()=>{f.getZoom(),f.options.zoomAnimation=!1,f.options.markerZoomAnimation=!1}),f.on("zoomend",()=>{y&&clearTimeout(y),y=setTimeout(()=>{setTimeout(()=>{f.options.zoomAnimation=!0,f.options.markerZoomAnimation=!0,f.invalidateSize({animate:!1,pan:!1});const C=f.getBounds(),S=f.options.maxBounds;S&&!C.intersects(S)&&f.panInsideBounds(S,{animate:!1}),f.eachLayer(T=>{T.properties&&T.properties.type==="Note"&&typeof T.updatePosition=="function"&&T.updatePosition()})},250)},250)});const m=f._zoomAnimation;m&&(f._zoomAnimation=function(C){try{this._animatingZoom||m.call(this,C)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),f.on("zoomanim",C=>{f.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePositionDuringZoom=="function"&&S.updatePositionDuringZoom(C)})}),f&&(f.whenReady(()=>{const C=e.value;if(s[C]){if(n.value&&f.hasLayer(n.value))try{f.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active précédente:",S)}n.value=s[C];try{n.value.addTo(f)}catch(S){console.error(`Erreur lors de l'ajout de la couche ${C}:`,S)}}else console.warn(`Couche de base non disponible: ${C}`)}),f.on("baselayerchange",C=>{e.value=C.name,n.value=C.layer}))},changeBaseMap:async f=>{if(f==="Hybride"&&!r.value&&(await o(),!r.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!s[f]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(e.value===f)return;const p=t.value,y=p.getCenter(),m=p.getZoom();p.options.zoomAnimation=!1,p.options.fadeAnimation=!1,p.options.markerZoomAnimation=!1;const C=s[f];if(n.value&&p.hasLayer(n.value))try{p.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active:",S)}try{C instanceof dn.LayerGroup,C.addTo(p)}catch(S){console.error("Erreur lors de l'ajout de la nouvelle couche:",S);try{p.hasLayer(C)&&p.removeLayer(C),C.addTo(p)}catch(T){throw console.error("Échec de la récupération:",T),new Error("Impossible d'ajouter la nouvelle couche")}}n.value=C,e.value=f;try{p.setView(y,m,{animate:!1,duration:0,noMoveStart:!0})}catch(S){console.warn("Erreur lors de la réinitialisation de la vue:",S)}try{p.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{p.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePosition=="function"&&S.updatePosition()})},100)}catch(S){console.warn("Erreur lors du rafraîchissement de la carte:",S)}setTimeout(()=>{p.options.zoomAnimation=!0,p.options.fadeAnimation=!0,p.options.markerZoomAnimation=!0},500)}catch(p){if(console.error("Erreur lors du changement de carte de base:",p),t.value)try{const y=t.value;y.eachLayer(C=>{(C instanceof dn.TileLayer||C instanceof dn.LayerGroup)&&y.removeLayer(C)});const m=s[f];m.addTo(y),n.value=m,e.value=f,y.options.zoomAnimation=!0,y.options.fadeAnimation=!0,y.options.markerZoomAnimation=!0,y.invalidateSize({animate:!1,pan:!1})}catch(y){console.error("Erreur lors de la récupération après échec:",y)}}},cleanup:()=>{t.value&&(t.value.remove(),t.value=null),n.value&&(n.value=null)},isGoogleMapsLoaded:r}}const DU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},IU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},NU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},BU={key:0,class:"mb-4"},RU={key:0,class:"animate-pulse"},FU=["value"],jU={key:1,class:"mb-4"},zU={key:0,class:"animate-pulse"},UU=["disabled"],$U={value:null},VU=["value"],HU={key:2,class:"mb-4"},WU={key:0,class:"animate-pulse"},GU=["disabled"],qU={value:null},YU=["value"],ZU={class:"mb-4"},KU={class:"mb-6"},XU={class:"flex justify-end space-x-3"},JU=["disabled"],QU={key:0},e$={key:1},t$=_s({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(se){return se?typeof se=="object"?se.id:se:null}function i(se){if(se===null)throw new Error("Invalid ID");return se}const s=t,o=n,a=po(),l=e_(),c=qg(),f=kt(!1),p=kt(null),y=kt([]),m=kt([]),C=kt([]),S=kt(null),T=kt(null),O=kt(!1),D=kt(!1),B=kt(!1),z=kt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),H=rr(()=>{var se,X,U;return((se=a.user)==null?void 0:se.user_type)==="admin"?z.value.nom.trim()&&z.value.entreprise&&z.value.salarie:((X=a.user)==null?void 0:X.user_type)==="entreprise"?z.value.nom.trim()&&z.value.salarie:(((U=a.user)==null?void 0:U.user_type)==="salarie",z.value.nom.trim())});vi(()=>z.value.entreprise,async se=>{if(!s.modelValue)return;z.value.salarie=null,z.value.visiteur=null,m.value=[];const X=r(se);X?await J(X):y.value=[]}),vi(()=>z.value.salarie,async se=>{if(!s.modelValue)return;z.value.visiteur=null;const X=r(se);X?await Q(X):m.value=[]}),vi(()=>s.modelValue,se=>{var X,U,R;se?((X=a.user)==null?void 0:X.user_type)==="admin"?$():((U=a.user)==null?void 0:U.user_type)==="entreprise"?J(a.user.id):((R=a.user)==null?void 0:R.user_type)==="salarie"&&Q(a.user.id):(z.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,T.value=null,m.value=[],y.value=[],C.value=[],p.value=null)});async function J(se){O.value=!0;try{const X=await ha.getUsers({role:"SALARIE",entreprise:se});y.value=X.data}catch(X){console.error("[NewPlanModal] Error loading salaries:",X),y.value=[]}finally{O.value=!1}}async function Q(se){D.value=!0;try{const X=await ha.getUsers({role:"VISITEUR",salarie:se});m.value=X.data}catch(X){console.error("[NewPlanModal] Error loading visiteurs:",X),m.value=[]}finally{D.value=!1}}async function V(se){s.modelValue&&(S.value=se,z.value.salarie=se.id,await Q(se.id),o("salarieSelected",se))}function Y(se){s.modelValue&&(T.value=se,z.value.visiteur=se.id,o("visiteurSelected",se))}function ge(){o("update:modelValue",!1),z.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,T.value=null,m.value=[],p.value=null}async function $(){B.value=!0;try{const se=await a.fetchEnterprises();C.value=se}catch(se){console.error("[NewPlanModal] Error loading entreprises:",se),C.value=[]}finally{B.value=!1}}async function W(){var se,X;p.value=null,f.value=!0;try{const U={nom:z.value.nom.trim(),description:z.value.description.trim()},R=a.user;if(!R)throw new Error("User not found");if(R.user_type==="admin"){if(!z.value.entreprise||!z.value.salarie)throw new Error("Missing required fields");U.entreprise=i(r(z.value.entreprise)),U.salarie=i(r(z.value.salarie)),z.value.visiteur&&(U.visiteur=z.value.visiteur)}else if(R.user_type==="entreprise"){if(!z.value.salarie)throw new Error("Missing required fields");U.entreprise=R.id,U.salarie=i(r(z.value.salarie)),z.value.visiteur&&(U.visiteur=z.value.visiteur)}else if(R.user_type==="salarie"){if(!R.entreprise)throw new Error("Missing required fields");U.entreprise=R.entreprise.id,U.salarie=R.id,z.value.visiteur&&(U.visiteur=z.value.visiteur)}else if(R.user_type==="visiteur"){if(!R.entreprise||!R.salarie)throw new Error("Missing required fields");U.entreprise=R.entreprise.id,U.salarie=R.salarie.id,U.visiteur=R.id}l.clearCurrentPlan(),c.setCurrentPlan(null);const ee=await l.createPlan(U);o("created",ee.id),ge()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",(se=U.response)==null?void 0:se.data);let R="Une erreur est survenue lors de la création du plan";(X=U.response)!=null&&X.data&&(typeof U.response.data=="object"?R=Object.entries(U.response.data).map(([ee,ie])=>Array.isArray(ie)?`${ee}: ${ie.join(", ")}`:`${ee}: ${ie}`).join(`
`):typeof U.response.data=="string"&&(R=U.response.data)),p.value=R}finally{f.value=!1}}return e({salaries:y,visiteurs:m,selectedSalarie:S,selectedVisiteur:T,loadSalaries:J,loadVisiteurs:Q,selectSalarie:V,selectVisiteur:Y}),(se,X)=>{var U,R,ee,ie;return se.modelValue?(Ae(),Fe("div",DU,[P("div",IU,[P("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[X[6]||(X[6]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),P("button",{onClick:ge,class:"text-gray-400 hover:text-gray-500"},X[5]||(X[5]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",NU,[ln(a).isAdmin?(Ae(),Fe("div",BU,[X[9]||(X[9]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),B.value?(Ae(),Fe("div",RU,X[7]||(X[7]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((Ae(),Fe("select",{key:1,"onUpdate:modelValue":X[0]||(X[0]=fe=>z.value.entreprise=fe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[X[8]||(X[8]=P("option",{value:null},"Sélectionnez une entreprise",-1)),(Ae(!0),Fe(vn,null,nr(C.value,fe=>(Ae(),Fe("option",{key:fe.id,value:fe.id},jt(ln(Ds)(fe)),9,FU))),128))],512)),[[os,z.value.entreprise]])])):Xt("",!0),((U=ln(a).user)==null?void 0:U.user_type)==="admin"||((R=ln(a).user)==null?void 0:R.user_type)==="entreprise"?(Ae(),Fe("div",jU,[X[11]||(X[11]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),O.value?(Ae(),Fe("div",zU,X[10]||(X[10]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((Ae(),Fe("select",{key:1,id:"edit-salarie","onUpdate:modelValue":X[1]||(X[1]=fe=>z.value.salarie=fe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:ln(a).isAdmin&&!z.value.entreprise},[P("option",$U,jt(y.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ae(!0),Fe(vn,null,nr(y.value,fe=>(Ae(),Fe("option",{key:fe.id,value:fe.id},jt(ln(Ds)(fe)),9,VU))),128))],8,UU)),[[os,z.value.salarie]])])):Xt("",!0),((ee=ln(a).user)==null?void 0:ee.user_type)!=="visiteur"?(Ae(),Fe("div",HU,[X[13]||(X[13]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Ae(),Fe("div",WU,X[12]||(X[12]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((Ae(),Fe("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":X[2]||(X[2]=fe=>z.value.visiteur=fe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((ie=ln(a).user)==null?void 0:ie.user_type)!=="salarie"&&!z.value.salarie},[P("option",qU,jt(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ae(!0),Fe(vn,null,nr(m.value,fe=>(Ae(),Fe("option",{key:fe.id,value:fe.id},jt(ln(Ds)(fe)),9,YU))),128))],8,GU)),[[os,z.value.visiteur]])])):Xt("",!0),P("div",ZU,[X[14]||(X[14]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),jn(P("input",{id:"edit-nom","onUpdate:modelValue":X[3]||(X[3]=fe=>z.value.nom=fe),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[fi,z.value.nom]])]),P("div",KU,[X[15]||(X[15]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),jn(P("textarea",{id:"edit-description","onUpdate:modelValue":X[4]||(X[4]=fe=>z.value.description=fe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[fi,z.value.description]])]),P("div",XU,[P("button",{onClick:ge,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),P("button",{onClick:W,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!H.value||f.value},[f.value?(Ae(),Fe("span",QU,"Création en cours...")):(Ae(),Fe("span",e$,"Créer"))],8,JU)])])])])):Xt("",!0)}}});function Ni(t){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(t)}var Ra=Uint8Array,ou=Uint16Array,l_=Int32Array,hy=new Ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fy=new Ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),B2=new Ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KS=function(t,e){for(var n=new ou(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new l_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},XS=KS(hy,2),JS=XS.b,R2=XS.r;JS[28]=258,R2[258]=28;var QS=KS(fy,0),n$=QS.b,D4=QS.r,F2=new ou(32768);for(var ss=0;ss<32768;++ss){var Ih=(ss&43690)>>1|(ss&21845)<<1;Ih=(Ih&52428)>>2|(Ih&13107)<<2,Ih=(Ih&61680)>>4|(Ih&3855)<<4,F2[ss]=((Ih&65280)>>8|(Ih&255)<<8)>>1}var Rc=function(t,e,n){for(var r=t.length,i=0,s=new ou(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new ou(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new ou(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],f=e-t[i],p=o[t[i]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)a[F2[p]>>l]=c}else for(a=new ou(r),i=0;i<r;++i)t[i]&&(a[i]=F2[o[t[i]-1]++]>>15-t[i]);return a},of=new Ra(288);for(var ss=0;ss<144;++ss)of[ss]=8;for(var ss=144;ss<256;++ss)of[ss]=9;for(var ss=256;ss<280;++ss)of[ss]=7;for(var ss=280;ss<288;++ss)of[ss]=8;var Yg=new Ra(32);for(var ss=0;ss<32;++ss)Yg[ss]=5;var r$=Rc(of,9,0),i$=Rc(of,9,1),s$=Rc(Yg,5,0),o$=Rc(Yg,5,1),w1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ku=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},x1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},u_=function(t){return(t+7)/8|0},eE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ra(t.subarray(e,n))},a$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ec=function(t,e,n){var r=new Error(e||a$[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ec),!n)throw r;return r},l$=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Ra(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Ra(i*3));var c=function(pt){var bt=n.length;if(pt>bt){var le=new Ra(Math.max(bt*2,pt));le.set(n),n=le}},f=e.f||0,p=e.p||0,y=e.b||0,m=e.l,C=e.d,S=e.m,T=e.n,O=i*8;do{if(!m){f=Ku(t,p,1);var D=Ku(t,p+1,3);if(p+=3,D)if(D==1)m=i$,C=o$,S=9,T=5;else if(D==2){var J=Ku(t,p,31)+257,Q=Ku(t,p+10,15)+4,V=J+Ku(t,p+5,31)+1;p+=14;for(var Y=new Ra(V),ge=new Ra(19),$=0;$<Q;++$)ge[B2[$]]=Ku(t,p+$*3,7);p+=Q*3;for(var W=w1(ge),se=(1<<W)-1,X=Rc(ge,W,1),$=0;$<V;){var U=X[Ku(t,p,se)];p+=U&15;var B=U>>4;if(B<16)Y[$++]=B;else{var R=0,ee=0;for(B==16?(ee=3+Ku(t,p,3),p+=2,R=Y[$-1]):B==17?(ee=3+Ku(t,p,7),p+=3):B==18&&(ee=11+Ku(t,p,127),p+=7);ee--;)Y[$++]=R}}var ie=Y.subarray(0,J),fe=Y.subarray(J);S=w1(ie),T=w1(fe),m=Rc(ie,S,1),C=Rc(fe,T,1)}else ec(1);else{var B=u_(p)+4,z=t[B-4]|t[B-3]<<8,H=B+z;if(H>i){l&&ec(0);break}a&&c(y+z),n.set(t.subarray(B,H),y),e.b=y+=z,e.p=p=H*8,e.f=f;continue}if(p>O){l&&ec(0);break}}a&&c(y+131072);for(var me=(1<<S)-1,Oe=(1<<T)-1,Z=p;;Z=p){var R=m[x1(t,p)&me],ae=R>>4;if(p+=R&15,p>O){l&&ec(0);break}if(R||ec(2),ae<256)n[y++]=ae;else if(ae==256){Z=p,m=null;break}else{var ce=ae-254;if(ae>264){var $=ae-257,pe=hy[$];ce=Ku(t,p,(1<<pe)-1)+JS[$],p+=pe}var Le=C[x1(t,p)&Oe],Pe=Le>>4;Le||ec(3),p+=Le&15;var fe=n$[Pe];if(Pe>3){var pe=fy[Pe];fe+=x1(t,p)&(1<<pe)-1,p+=pe}if(p>O){l&&ec(0);break}a&&c(y+131072);var Ue=y+ce;if(y<fe){var Ne=s-fe,nt=Math.min(fe,Ue);for(Ne+y<0&&ec(3);y<nt;++y)n[y]=r[Ne+y]}for(;y<Ue;++y)n[y]=n[y-fe]}}e.l=m,e.p=Z,e.b=y,e.f=f,m&&(f=1,e.m=S,e.d=C,e.n=T)}while(!f);return y!=n.length&&o?eE(n,0,y):n.subarray(0,y)},oh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ip=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},L1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:nE,l:0};if(i==1){var o=new Ra(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(H,J){return H.f-J.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,f=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=f&&n[c].f<n[p].f?c++:p++],n[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var m=new ou(y+1),C=j2(n[f-1],m,0);if(C>e){var r=0,S=0,T=C-e,O=1<<T;for(s.sort(function(J,Q){return m[Q.s]-m[J.s]||J.f-Q.f});r<i;++r){var D=s[r].s;if(m[D]>e)S+=O-(1<<C-m[D]),m[D]=e;else break}for(S>>=T;S>0;){var B=s[r].s;m[B]<e?S-=1<<e-m[B]++-1:++r}for(;r>=0&&S;--r){var z=s[r].s;m[z]==e&&(--m[z],++S)}C=e}return{t:new Ra(m),l:C}},j2=function(t,e,n){return t.s==-1?Math.max(j2(t.l,e,n+1),j2(t.r,e,n+1)):e[t.s]=n},I4=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ou(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Np=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},tE=function(t,e,n){var r=n.length,i=u_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},N4=function(t,e,n,r,i,s,o,a,l,c,f){oh(e,f++,n),++i[256];for(var p=L1(i,15),y=p.t,m=p.l,C=L1(s,15),S=C.t,T=C.l,O=I4(y),D=O.c,B=O.n,z=I4(S),H=z.c,J=z.n,Q=new ou(19),V=0;V<D.length;++V)++Q[D[V]&31];for(var V=0;V<H.length;++V)++Q[H[V]&31];for(var Y=L1(Q,7),ge=Y.t,$=Y.l,W=19;W>4&&!ge[B2[W-1]];--W);var se=c+5<<3,X=Np(i,of)+Np(s,Yg)+o,U=Np(i,y)+Np(s,S)+o+14+3*W+Np(Q,ge)+2*Q[16]+3*Q[17]+7*Q[18];if(l>=0&&se<=X&&se<=U)return tE(e,f,t.subarray(l,l+c));var R,ee,ie,fe;if(oh(e,f,1+(U<X)),f+=2,U<X){R=Rc(y,m,0),ee=y,ie=Rc(S,T,0),fe=S;var me=Rc(ge,$,0);oh(e,f,B-257),oh(e,f+5,J-1),oh(e,f+10,W-4),f+=14;for(var V=0;V<W;++V)oh(e,f+3*V,ge[B2[V]]);f+=3*W;for(var Oe=[D,H],Z=0;Z<2;++Z)for(var ae=Oe[Z],V=0;V<ae.length;++V){var ce=ae[V]&31;oh(e,f,me[ce]),f+=ge[ce],ce>15&&(oh(e,f,ae[V]>>5&127),f+=ae[V]>>12)}}else R=r$,ee=of,ie=s$,fe=Yg;for(var V=0;V<a;++V){var pe=r[V];if(pe>255){var ce=pe>>18&31;Ip(e,f,R[ce+257]),f+=ee[ce+257],ce>7&&(oh(e,f,pe>>23&31),f+=hy[ce]);var Le=pe&31;Ip(e,f,ie[Le]),f+=fe[Le],Le>3&&(Ip(e,f,pe>>5&8191),f+=fy[Le])}else Ip(e,f,R[pe]),f+=ee[pe]}return Ip(e,f,R[256]),f+ee[256]},u$=new l_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),nE=new Ra(0),c$=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Ra(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var p=u$[e-1],y=p>>13,m=p&8191,C=(1<<n)-1,S=s.p||new ou(32768),T=s.h||new ou(C+1),O=Math.ceil(n/3),D=2*O,B=function(oe){return(t[oe]^t[oe+1]<<O^t[oe+2]<<D)&C},z=new l_(25e3),H=new ou(288),J=new ou(32),Q=0,V=0,Y=s.i||0,ge=0,$=s.w||0,W=0;Y+2<o;++Y){var se=B(Y),X=Y&32767,U=T[se];if(S[X]=U,T[se]=X,$<=Y){var R=o-Y;if((Q>7e3||ge>24576)&&(R>423||!c)){f=N4(t,l,0,z,H,J,V,ge,W,Y-W,f),ge=Q=V=0,W=Y;for(var ee=0;ee<286;++ee)H[ee]=0;for(var ee=0;ee<30;++ee)J[ee]=0}var ie=2,fe=0,me=m,Oe=X-U&32767;if(R>2&&se==B(Y-Oe))for(var Z=Math.min(y,R)-1,ae=Math.min(32767,Y),ce=Math.min(258,R);Oe<=ae&&--me&&X!=U;){if(t[Y+ie]==t[Y+ie-Oe]){for(var pe=0;pe<ce&&t[Y+pe]==t[Y+pe-Oe];++pe);if(pe>ie){if(ie=pe,fe=Oe,pe>Z)break;for(var Le=Math.min(Oe,pe-2),Pe=0,ee=0;ee<Le;++ee){var Ue=Y-Oe+ee&32767,Ne=S[Ue],nt=Ue-Ne&32767;nt>Pe&&(Pe=nt,U=Ue)}}}X=U,U=S[X],Oe+=X-U&32767}if(fe){z[ge++]=268435456|R2[ie]<<18|D4[fe];var pt=R2[ie]&31,bt=D4[fe]&31;V+=hy[pt]+fy[bt],++H[257+pt],++J[bt],$=Y+ie,++Q}else z[ge++]=t[Y],++H[t[Y]]}}for(Y=Math.max(Y,$);Y<o;++Y)z[ge++]=t[Y],++H[t[Y]];f=N4(t,l,c,z,H,J,V,ge,W,Y-W,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=T,s.p=S,s.i=Y,s.w=$)}else{for(var Y=s.w||0;Y<o+c;Y+=65535){var le=Y+65535;le>=o&&(l[f/8|0]=c,le=o),f=tE(l,f+1,t.subarray(Y,le))}s.i=o}return eE(a,0,r+u_(f)+i)},rE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},h$=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ra(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return c$(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},iE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},f$=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=rE();i.p(e.dictionary),iE(t,2,i.d())}},d$=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ec(6,"invalid zlib data"),(t[1]>>5&1)==1&&ec(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function z2(t,e){e||(e={});var n=rE();n.p(t);var r=h$(t,e,e.dictionary?6:2,4);return f$(r,e),iE(r,r.length-4,n.d()),r}function p$(t,e){return l$(t.subarray(d$(t),-4),{i:2},e,e)}var g$=typeof TextDecoder<"u"&&new TextDecoder,m$=0;try{g$.decode(nE,{stream:!0}),m$=1}catch{}var xr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function C1(){xr.console&&typeof xr.console.log=="function"&&xr.console.log.apply(xr.console,arguments)}var Wi={log:C1,warn:function(t){xr.console&&(typeof xr.console.warn=="function"?xr.console.warn.apply(xr.console,arguments):C1.call(null,arguments))},error:function(t){xr.console&&(typeof xr.console.error=="function"?xr.console.error.apply(xr.console,arguments):C1(t))}};function S1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Df(r.response,e,n)},r.onerror=function(){Wi.error("could not download file")},r.send()}function B4(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Xm(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var bg,U2,Df=xr.saveAs||((typeof window>"u"?"undefined":Ni(window))!=="object"||window!==xr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=xr.URL||xr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?B4(i.href)?S1(t,e,n):Xm(i,i.target="_blank"):Xm(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Xm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(B4(t))S1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Xm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ni(s)!=="object"&&(Wi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return S1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(xr.HTMLElement)||xr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ni(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(t)}else{var l=xr.URL||xr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function sE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function E1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ka(n,r,i,s,e[0],7,-680876936),s=ka(s,n,r,i,e[1],12,-389564586),i=ka(i,s,n,r,e[2],17,606105819),r=ka(r,i,s,n,e[3],22,-1044525330),n=ka(n,r,i,s,e[4],7,-176418897),s=ka(s,n,r,i,e[5],12,1200080426),i=ka(i,s,n,r,e[6],17,-1473231341),r=ka(r,i,s,n,e[7],22,-45705983),n=ka(n,r,i,s,e[8],7,1770035416),s=ka(s,n,r,i,e[9],12,-1958414417),i=ka(i,s,n,r,e[10],17,-42063),r=ka(r,i,s,n,e[11],22,-1990404162),n=ka(n,r,i,s,e[12],7,1804603682),s=ka(s,n,r,i,e[13],12,-40341101),i=ka(i,s,n,r,e[14],17,-1502002290),n=Ma(n,r=ka(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ma(s,n,r,i,e[6],9,-1069501632),i=Ma(i,s,n,r,e[11],14,643717713),r=Ma(r,i,s,n,e[0],20,-373897302),n=Ma(n,r,i,s,e[5],5,-701558691),s=Ma(s,n,r,i,e[10],9,38016083),i=Ma(i,s,n,r,e[15],14,-660478335),r=Ma(r,i,s,n,e[4],20,-405537848),n=Ma(n,r,i,s,e[9],5,568446438),s=Ma(s,n,r,i,e[14],9,-1019803690),i=Ma(i,s,n,r,e[3],14,-187363961),r=Ma(r,i,s,n,e[8],20,1163531501),n=Ma(n,r,i,s,e[13],5,-1444681467),s=Ma(s,n,r,i,e[2],9,-51403784),i=Ma(i,s,n,r,e[7],14,1735328473),n=Aa(n,r=Ma(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Aa(s,n,r,i,e[8],11,-2022574463),i=Aa(i,s,n,r,e[11],16,1839030562),r=Aa(r,i,s,n,e[14],23,-35309556),n=Aa(n,r,i,s,e[1],4,-1530992060),s=Aa(s,n,r,i,e[4],11,1272893353),i=Aa(i,s,n,r,e[7],16,-155497632),r=Aa(r,i,s,n,e[10],23,-1094730640),n=Aa(n,r,i,s,e[13],4,681279174),s=Aa(s,n,r,i,e[0],11,-358537222),i=Aa(i,s,n,r,e[3],16,-722521979),r=Aa(r,i,s,n,e[6],23,76029189),n=Aa(n,r,i,s,e[9],4,-640364487),s=Aa(s,n,r,i,e[12],11,-421815835),i=Aa(i,s,n,r,e[15],16,530742520),n=Ta(n,r=Aa(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ta(s,n,r,i,e[7],10,1126891415),i=Ta(i,s,n,r,e[14],15,-1416354905),r=Ta(r,i,s,n,e[5],21,-57434055),n=Ta(n,r,i,s,e[12],6,1700485571),s=Ta(s,n,r,i,e[3],10,-1894986606),i=Ta(i,s,n,r,e[10],15,-1051523),r=Ta(r,i,s,n,e[1],21,-2054922799),n=Ta(n,r,i,s,e[8],6,1873313359),s=Ta(s,n,r,i,e[15],10,-30611744),i=Ta(i,s,n,r,e[6],15,-1560198380),r=Ta(r,i,s,n,e[13],21,1309151649),n=Ta(n,r,i,s,e[4],6,-145523070),s=Ta(s,n,r,i,e[11],10,-1120210379),i=Ta(i,s,n,r,e[2],15,718787259),r=Ta(r,i,s,n,e[9],21,-343485551),t[0]=qh(n,t[0]),t[1]=qh(r,t[1]),t[2]=qh(i,t[2]),t[3]=qh(s,t[3])}function dy(t,e,n,r,i,s){return e=qh(qh(e,t),qh(r,s)),qh(e<<i|e>>>32-i,n)}function ka(t,e,n,r,i,s,o){return dy(e&n|~e&r,t,e,i,s,o)}function Ma(t,e,n,r,i,s,o){return dy(e&r|n&~r,t,e,i,s,o)}function Aa(t,e,n,r,i,s,o){return dy(e^n^r,t,e,i,s,o)}function Ta(t,e,n,r,i,s,o){return dy(n^(e|~r),t,e,i,s,o)}function oE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)E1(r,v$(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(E1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,E1(r,i),r}function v$(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}bg=xr.atob.bind(xr),U2=xr.btoa.bind(xr);var R4="0123456789abcdef".split("");function y$(t){for(var e="",n=0;n<4;n++)e+=R4[t>>8*n+4&15]+R4[t>>8*n&15];return e}function b$(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function $2(t){return oE(t).map(b$).join("")}var _$=function(t){for(var e=0;e<t.length;e++)t[e]=y$(t[e]);return t.join("")}(oE("hello"))!="5d41402abc4b2a76b9719d911017c592";function qh(t,e){if(_$){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function V2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var f=a[l];c=(c+f+o.charCodeAt(l))%256,a[l]=a[c],a[c]=f}n=t,r=a}else a=r;var p=e.length,y=0,m=0,C="";for(l=0;l<p;l++)m=(m+(f=a[y=(y+1)%256]))%256,a[y]=a[m],a[m]=f,o=a[(a[y]+a[m])%256],C+=String.fromCharCode(e.charCodeAt(l)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F4={print:4,modify:8,copy:16,"annot-forms":32};function zd(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(F4.perm!==void 0)throw new Error("Invalid permission: "+a);i+=F4[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=$2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=V2(this.encryptionKey,this.padding)}function Ud(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function j4(t){if(Ni(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){xr.console&&Wi.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function mv(t){if(!(this instanceof mv))return new mv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function aE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ff(t,e,n,r,i){if(!(this instanceof Ff))return new Ff(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,aE.call(this,r,i)}function Hd(t,e,n,r,i){if(!(this instanceof Hd))return new Hd(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,aE.call(this,r,i)}function wr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",f=null;Ni(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=j4;var C="1.3",S=m.__private__.getPdfVersion=function(){return C};m.__private__.setPdfVersion=function(I){C=I};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var O=m.__private__.getPageFormat=function(I){return T[I]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},B=D.COMPAT;function z(){this.saveGraphicsState(),te(new He(Je,0,0,-Je,0,va()*Je).toString()+" cm"),this.setFontSize(this.getFontSize()/Je),c="n",B=D.ADVANCED}function H(){this.restoreGraphicsState(),c="S",B=D.COMPAT}var J=m.__private__.combineFontStyleAndFontWeight=function(I,ve){if(I=="bold"&&ve=="normal"||I=="bold"&&ve==400||I=="normal"&&ve=="italic"||I=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&(I=ve==400||ve==="normal"?I==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||I!=="normal"?(ve==700?"bold":ve)+""+I:"bold"),I};m.advancedAPI=function(I){var ve=B===D.COMPAT;return ve&&z.call(this),typeof I!="function"||(I(this),ve&&H.call(this)),this},m.compatAPI=function(I){var ve=B===D.ADVANCED;return ve&&H.call(this),typeof I!="function"||(I(this),ve&&z.call(this)),this},m.isAdvancedAPI=function(){return B===D.ADVANCED};var Q,V=function(I){if(B!==D.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=m.roundToPrecision=m.__private__.roundToPrecision=function(I,ve){var We=e||ve;if(isNaN(I)||isNaN(We))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(We).replace(/0+$/,"")};Q=m.hpf=m.__private__.hpf=typeof l=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(I,l)}:l==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(I,16)};var ge=m.f2=m.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return Y(I,2)},$=m.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return Y(I,3)},W=m.scale=m.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return B===D.COMPAT?I*Je:B===D.ADVANCED?I:void 0},se=function(I){return B===D.COMPAT?va()-I:B===D.ADVANCED?I:void 0},X=function(I){return W(se(I))};m.__private__.setPrecision=m.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var U,R="00000000000000000000000000000000",ee=m.__private__.getFileId=function(){return R},ie=m.__private__.setFileId=function(I){return R=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():R.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(rs=new zd(f.userPermissions,f.userPassword,f.ownerPassword,R)),R};m.setFileId=function(I){return ie(I),this},m.getFileId=function(){return ee()};var fe=m.__private__.convertDateToPDFDate=function(I){var ve=I.getTimezoneOffset(),We=ve<0?"+":"-",st=Math.floor(Math.abs(ve/60)),xt=Math.abs(ve%60),Bt=[We,ce(st),"'",ce(xt),"'"].join("");return["D:",I.getFullYear(),ce(I.getMonth()+1),ce(I.getDate()),ce(I.getHours()),ce(I.getMinutes()),ce(I.getSeconds()),Bt].join("")},me=m.__private__.convertPDFDateToDate=function(I){var ve=parseInt(I.substr(2,4),10),We=parseInt(I.substr(6,2),10)-1,st=parseInt(I.substr(8,2),10),xt=parseInt(I.substr(10,2),10),Bt=parseInt(I.substr(12,2),10),an=parseInt(I.substr(14,2),10);return new Date(ve,We,st,xt,Bt,an,0)},Oe=m.__private__.setCreationDate=function(I){var ve;if(I===void 0&&(I=new Date),I instanceof Date)ve=fe(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=I}return U=ve},Z=m.__private__.getCreationDate=function(I){var ve=U;return I==="jsDate"&&(ve=me(U)),ve};m.setCreationDate=function(I){return Oe(I),this},m.getCreationDate=function(I){return Z(I)};var ae,ce=m.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},pe=m.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},Le=0,Pe=[],Ue=[],Ne=0,nt=[],pt=[],bt=!1,le=Ue,oe=function(){Le=0,Ne=0,Ue=[],Pe=[],nt=[],wn=Pt(),Tn=Pt()};m.__private__.setCustomOutputDestination=function(I){bt=!0,le=I};var ue=function(I){bt||(le=I)};m.__private__.resetCustomOutputDestination=function(){bt=!1,le=Ue};var te=m.__private__.out=function(I){return I=I.toString(),Ne+=I.length+1,le.push(I),le},Se=m.__private__.write=function(I){return te(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},Ve=m.__private__.getArrayBuffer=function(I){for(var ve=I.length,We=new ArrayBuffer(ve),st=new Uint8Array(We);ve--;)st[ve]=I.charCodeAt(ve);return We},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var at=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(I){return at=B===D.ADVANCED?I/Je:I,this};var ot,dt=m.__private__.getFontSize=m.getFontSize=function(){return B===D.COMPAT?at:at*Je},zt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(I){return zt=I,this},m.__private__.getR2L=m.getR2L=function(){return zt};var Rt,Zt=m.__private__.setZoomMode=function(I){var ve=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))ot=I;else if(isNaN(I)){if(ve.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');ot=I}else ot=parseInt(I,10)};m.__private__.getZoomMode=function(){return ot};var Qt,pn=m.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');Rt=I};m.__private__.getPageMode=function(){return Rt};var Sn=m.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Qt=I};m.__private__.getLayoutMode=function(){return Qt},m.__private__.setDisplayMode=m.setDisplayMode=function(I,ve,We){return Zt(I),Sn(ve),pn(We),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(I){if(Object.keys(Ze).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[I]},m.__private__.getDocumentProperties=function(){return Ze},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(I){for(var ve in Ze)Ze.hasOwnProperty(ve)&&I[ve]&&(Ze[ve]=I[ve]);return this},m.__private__.setDocumentProperty=function(I,ve){if(Object.keys(Ze).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[I]=ve};var it,Je,$t,Kt,_n,gn={},bn={},Rn=[],mn={},nn={},cn={},Nn={},er=null,ar=0,zn=[],Lr=new j4(m),ns=t.hotfixes||[],ki={},Js={},Nt=[],He=function I(ve,We,st,xt,Bt,an){if(!(this instanceof I))return new I(ve,We,st,xt,Bt,an);isNaN(ve)&&(ve=1),isNaN(We)&&(We=0),isNaN(st)&&(st=0),isNaN(xt)&&(xt=1),isNaN(Bt)&&(Bt=0),isNaN(an)&&(an=0),this._matrix=[ve,We,st,xt,Bt,an]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(I)},He.prototype.multiply=function(I){var ve=I.sx*this.sx+I.shy*this.shx,We=I.sx*this.shy+I.shy*this.sy,st=I.shx*this.sx+I.sy*this.shx,xt=I.shx*this.shy+I.sy*this.sy,Bt=I.tx*this.sx+I.ty*this.shx+this.tx,an=I.tx*this.shy+I.ty*this.sy+this.ty;return new He(ve,We,st,xt,Bt,an)},He.prototype.decompose=function(){var I=this.sx,ve=this.shy,We=this.shx,st=this.sy,xt=this.tx,Bt=this.ty,an=Math.sqrt(I*I+ve*ve),kn=(I/=an)*We+(ve/=an)*st;We-=I*kn,st-=ve*kn;var On=Math.sqrt(We*We+st*st);return kn/=On,I*(st/=On)<ve*(We/=On)&&(I=-I,ve=-ve,kn=-kn,an=-an),{scale:new He(an,0,0,On,0,0),translate:new He(1,0,0,1,xt,Bt),rotate:new He(I,ve,-ve,I,0,0),skew:new He(1,0,kn,1,0,0)}},He.prototype.toString=function(I){return this.join(" ")},He.prototype.inversed=function(){var I=this.sx,ve=this.shy,We=this.shx,st=this.sy,xt=this.tx,Bt=this.ty,an=1/(I*st-ve*We),kn=st*an,On=-ve*an,Zn=-We*an,or=I*an;return new He(kn,On,Zn,or,-kn*xt-Zn*Bt,-On*xt-or*Bt)},He.prototype.applyToPoint=function(I){var ve=I.x*this.sx+I.y*this.shx+this.tx,We=I.x*this.shy+I.y*this.sy+this.ty;return new us(ve,We)},He.prototype.applyToRectangle=function(I){var ve=this.applyToPoint(I),We=this.applyToPoint(new us(I.x+I.w,I.y+I.h));return new jo(ve.x,ve.y,We.x-ve.x,We.y-ve.y)},He.prototype.clone=function(){var I=this.sx,ve=this.shy,We=this.shx,st=this.sy,xt=this.tx,Bt=this.ty;return new He(I,ve,We,st,xt,Bt)},m.Matrix=He;var Vt=m.matrixMult=function(I,ve){return ve.multiply(I)},Bn=new He(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Bn;var Vn=function(I,ve){if(!nn[I]){var We=(ve instanceof Ff?"Sh":"P")+(Object.keys(mn).length+1).toString(10);ve.id=We,nn[I]=We,mn[We]=ve,Lr.publish("addPattern",ve)}};m.ShadingPattern=Ff,m.TilingPattern=Hd,m.addShadingPattern=function(I,ve){return V("addShadingPattern()"),Vn(I,ve),this},m.beginTilingPattern=function(I){V("beginTilingPattern()"),zo(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},m.endTilingPattern=function(I,ve){V("endTilingPattern()"),ve.stream=pt[ae].join(`
`),Vn(I,ve),Lr.publish("endTilingPattern",ve),Nt.pop().restore()};var Ln=m.__private__.newObject=function(){var I=Pt();return wt(I,!0),I},Pt=m.__private__.newObjectDeferred=function(){return Le++,Pe[Le]=function(){return Ne},Le},wt=function(I,ve){return ve=typeof ve=="boolean"&&ve,Pe[I]=Ne,ve&&te(I+" 0 obj"),I},qt=m.__private__.newAdditionalObject=function(){var I={objId:Pt(),content:""};return nt.push(I),I},wn=Pt(),Tn=Pt(),Xn=m.__private__.decodeColorString=function(I){var ve=I.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length===5&&(ve[4]==="k"||ve[4]==="K")&&(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var We=parseFloat(ve[0]);ve=[We,We,We,"r"]}for(var st="#",xt=0;xt<3;xt++)st+=("0"+Math.floor(255*parseFloat(ve[xt])).toString(16)).slice(-2);return st},sr=m.__private__.encodeColorString=function(I){var ve;typeof I=="string"&&(I={ch1:I});var We=I.ch1,st=I.ch2,xt=I.ch3,Bt=I.ch4,an=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof We=="string"&&We.charAt(0)!=="#"){var kn=new sE(We);if(kn.ok)We=kn.toHex();else if(!/^\d*\.?\d*$/.test(We))throw new Error('Invalid color "'+We+'" passed to jsPDF.encodeColorString.')}if(typeof We=="string"&&/^#[0-9A-Fa-f]{3}$/.test(We)&&(We="#"+We[1]+We[1]+We[2]+We[2]+We[3]+We[3]),typeof We=="string"&&/^#[0-9A-Fa-f]{6}$/.test(We)){var On=parseInt(We.substr(1),16);We=On>>16&255,st=On>>8&255,xt=255&On}if(st===void 0||Bt===void 0&&We===st&&st===xt)if(typeof We=="string")ve=We+" "+an[0];else switch(I.precision){case 2:ve=ge(We/255)+" "+an[0];break;case 3:default:ve=$(We/255)+" "+an[0]}else if(Bt===void 0||Ni(Bt)==="object"){if(Bt&&!isNaN(Bt.a)&&Bt.a===0)return ve=["1.","1.","1.",an[1]].join(" ");if(typeof We=="string")ve=[We,st,xt,an[1]].join(" ");else switch(I.precision){case 2:ve=[ge(We/255),ge(st/255),ge(xt/255),an[1]].join(" ");break;default:case 3:ve=[$(We/255),$(st/255),$(xt/255),an[1]].join(" ")}}else if(typeof We=="string")ve=[We,st,xt,Bt,an[2]].join(" ");else switch(I.precision){case 2:ve=[ge(We),ge(st),ge(xt),ge(Bt),an[2]].join(" ");break;case 3:default:ve=[$(We),$(st),$(xt),$(Bt),an[2]].join(" ")}return ve},kr=m.__private__.getFilters=function(){return o},Hn=m.__private__.putStream=function(I){var ve=(I=I||{}).data||"",We=I.filters||kr(),st=I.alreadyAppliedFilters||[],xt=I.addLength1||!1,Bt=ve.length,an=I.objectId,kn=function(Ui){return Ui};if(f!==null&&an===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(kn=rs.encryptor(an,0));var On={};We===!0&&(We=["FlateEncode"]);var Zn=I.additionalKeyValues||[],or=(On=wr.API.processDataByFilters!==void 0?wr.API.processDataByFilters(ve,We):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(st)?st.join(" "):st.toString());if(On.data.length!==0&&(Zn.push({key:"Length",value:On.data.length}),xt===!0&&Zn.push({key:"Length1",value:Bt})),or.length!=0)if(or.split("/").length-1==1)Zn.push({key:"Filter",value:or});else{Zn.push({key:"Filter",value:"["+or+"]"});for(var Sr=0;Sr<Zn.length;Sr+=1)if(Zn[Sr].key==="DecodeParms"){for(var wi=[],Yr=0;Yr<On.reverseChain.split("/").length-1;Yr+=1)wi.push("null");wi.push(Zn[Sr].value),Zn[Sr].value="["+wi.join(" ")+"]"}}te("<<");for(var ni=0;ni<Zn.length;ni++)te("/"+Zn[ni].key+" "+Zn[ni].value);te(">>"),On.data.length!==0&&(te("stream"),te(kn(On.data)),te("endstream"))},_i=m.__private__.putPage=function(I){var ve=I.number,We=I.data,st=I.objId,xt=I.contentsObjId;wt(st,!0),te("<</Type /Page"),te("/Parent "+I.rootDictionaryObjId+" 0 R"),te("/Resources "+I.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(Q(I.mediaBox.bottomLeftX))+" "+parseFloat(Q(I.mediaBox.bottomLeftY))+" "+Q(I.mediaBox.topRightX)+" "+Q(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&te("/CropBox ["+Q(I.cropBox.bottomLeftX)+" "+Q(I.cropBox.bottomLeftY)+" "+Q(I.cropBox.topRightX)+" "+Q(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&te("/BleedBox ["+Q(I.bleedBox.bottomLeftX)+" "+Q(I.bleedBox.bottomLeftY)+" "+Q(I.bleedBox.topRightX)+" "+Q(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&te("/TrimBox ["+Q(I.trimBox.bottomLeftX)+" "+Q(I.trimBox.bottomLeftY)+" "+Q(I.trimBox.topRightX)+" "+Q(I.trimBox.topRightY)+"]"),I.artBox!==null&&te("/ArtBox ["+Q(I.artBox.bottomLeftX)+" "+Q(I.artBox.bottomLeftY)+" "+Q(I.artBox.topRightX)+" "+Q(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&te("/UserUnit "+I.userUnit),Lr.publish("putPage",{objId:st,pageContext:zn[ve],pageNumber:ve,page:We}),te("/Contents "+xt+" 0 R"),te(">>"),te("endobj");var Bt=We.join(`
`);return B===D.ADVANCED&&(Bt+=`
Q`),wt(xt,!0),Hn({data:Bt,filters:kr(),objectId:xt}),te("endobj"),st},Ur=m.__private__.putPages=function(){var I,ve,We=[];for(I=1;I<=ar;I++)zn[I].objId=Pt(),zn[I].contentsObjId=Pt();for(I=1;I<=ar;I++)We.push(_i({number:I,data:pt[I],objId:zn[I].objId,contentsObjId:zn[I].contentsObjId,mediaBox:zn[I].mediaBox,cropBox:zn[I].cropBox,bleedBox:zn[I].bleedBox,trimBox:zn[I].trimBox,artBox:zn[I].artBox,userUnit:zn[I].userUnit,rootDictionaryObjId:wn,resourceDictionaryObjId:Tn}));wt(wn,!0),te("<</Type /Pages");var st="/Kids [";for(ve=0;ve<ar;ve++)st+=We[ve]+" 0 R ";te(st+"]"),te("/Count "+ar),te(">>"),te("endobj"),Lr.publish("postPutPages")},Xo=function(I){Lr.publish("putFont",{font:I,out:te,newObject:Ln,putStream:Hn}),I.isAlreadyPutted!==!0&&(I.objectNumber=Ln(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Ud(I.postScriptName)),te("/Subtype /Type1"),typeof I.encoding=="string"&&te("/Encoding /"+I.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},lr=function(){for(var I in gn)gn.hasOwnProperty(I)&&(p===!1||p===!0&&y.hasOwnProperty(I))&&Xo(gn[I])},ur=function(I){I.objectNumber=Ln();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[Q(I.x),Q(I.y),Q(I.x+I.width),Q(I.y+I.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var We=I.pages[1].join(`
`);Hn({data:We,additionalKeyValues:ve,objectId:I.objectNumber}),te("endobj")},Bi=function(){for(var I in ki)ki.hasOwnProperty(I)&&ur(ki[I])},So=function(I,ve){var We,st=[],xt=1/(ve-1);for(We=0;We<1;We+=xt)st.push(We);if(st.push(1),I[0].offset!=0){var Bt={offset:0,color:I[0].color};I.unshift(Bt)}if(I[I.length-1].offset!=1){var an={offset:1,color:I[I.length-1].color};I.push(an)}for(var kn="",On=0,Zn=0;Zn<st.length;Zn++){for(We=st[Zn];We>I[On+1].offset;)On++;var or=I[On].offset,Sr=(We-or)/(I[On+1].offset-or),wi=I[On].color,Yr=I[On+1].color;kn+=pe(Math.round((1-Sr)*wi[0]+Sr*Yr[0]).toString(16))+pe(Math.round((1-Sr)*wi[1]+Sr*Yr[1]).toString(16))+pe(Math.round((1-Sr)*wi[2]+Sr*Yr[2]).toString(16))}return kn.trim()},fu=function(I,ve){ve||(ve=21);var We=Ln(),st=So(I.colors,ve),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+ve+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hn({data:st,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:We}),te("endobj"),I.objectNumber=Ln(),te("<< /ShadingType "+I.type),te("/ColorSpace /DeviceRGB");var Bt="/Coords ["+Q(parseFloat(I.coords[0]))+" "+Q(parseFloat(I.coords[1]))+" ";I.type===2?Bt+=Q(parseFloat(I.coords[2]))+" "+Q(parseFloat(I.coords[3])):Bt+=Q(parseFloat(I.coords[2]))+" "+Q(parseFloat(I.coords[3]))+" "+Q(parseFloat(I.coords[4]))+" "+Q(parseFloat(I.coords[5])),te(Bt+="]"),I.matrix&&te("/Matrix ["+I.matrix.toString()+"]"),te("/Function "+We+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Wc=function(I,ve){var We=Pt(),st=Ln();ve.push({resourcesOid:We,objectOid:st}),I.objectNumber=st;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+I.boundingBox.map(Q).join(" ")+"]"}),xt.push({key:"XStep",value:Q(I.xStep)}),xt.push({key:"YStep",value:Q(I.yStep)}),xt.push({key:"Resources",value:We+" 0 R"}),I.matrix&&xt.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),Hn({data:I.stream,additionalKeyValues:xt,objectId:I.objectNumber}),te("endobj")},du=function(I){var ve;for(ve in mn)mn.hasOwnProperty(ve)&&(mn[ve]instanceof Ff?fu(mn[ve]):mn[ve]instanceof Hd&&Wc(mn[ve],I))},fc=function(I){for(var ve in I.objectNumber=Ln(),te("<<"),I)switch(ve){case"opacity":te("/ca "+ge(I[ve]));break;case"stroke-opacity":te("/CA "+ge(I[ve]))}te(">>"),te("endobj")},dc=function(){var I;for(I in cn)cn.hasOwnProperty(I)&&fc(cn[I])},cl=function(){for(var I in te("/XObject <<"),ki)ki.hasOwnProperty(I)&&ki[I].objectNumber>=0&&te("/"+I+" "+ki[I].objectNumber+" 0 R");Lr.publish("putXobjectDict"),te(">>")},hl=function(){rs.oid=Ln(),te("<<"),te("/Filter /Standard"),te("/V "+rs.v),te("/R "+rs.r),te("/U <"+rs.toHexString(rs.U)+">"),te("/O <"+rs.toHexString(rs.O)+">"),te("/P "+rs.P),te(">>"),te("endobj")},Nu=function(){for(var I in te("/Font <<"),gn)gn.hasOwnProperty(I)&&(p===!1||p===!0&&y.hasOwnProperty(I))&&te("/"+I+" "+gn[I].objectNumber+" 0 R");te(">>")},pc=function(){if(Object.keys(mn).length>0){for(var I in te("/Shading <<"),mn)mn.hasOwnProperty(I)&&mn[I]instanceof Ff&&mn[I].objectNumber>=0&&te("/"+I+" "+mn[I].objectNumber+" 0 R");Lr.publish("putShadingPatternDict"),te(">>")}},Eo=function(I){if(Object.keys(mn).length>0){for(var ve in te("/Pattern <<"),mn)mn.hasOwnProperty(ve)&&mn[ve]instanceof m.TilingPattern&&mn[ve].objectNumber>=0&&mn[ve].objectNumber<I&&te("/"+ve+" "+mn[ve].objectNumber+" 0 R");Lr.publish("putTilingPatternDict"),te(">>")}},Wr=function(){if(Object.keys(cn).length>0){var I;for(I in te("/ExtGState <<"),cn)cn.hasOwnProperty(I)&&cn[I].objectNumber>=0&&te("/"+I+" "+cn[I].objectNumber+" 0 R");Lr.publish("putGStateDict"),te(">>")}},fr=function(I){wt(I.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nu(),pc(),Eo(I.objectOid),Wr(),cl(),te(">>"),te("endobj")},$a=function(){var I=[];lr(),dc(),Bi(),du(I),Lr.publish("putResources"),I.forEach(fr),fr({resourcesOid:Tn,objectOid:Number.MAX_SAFE_INTEGER}),Lr.publish("postPutResources")},da=function(){Lr.publish("putAdditionalObjects");for(var I=0;I<nt.length;I++){var ve=nt[I];wt(ve.objId,!0),te(ve.content),te("endobj")}Lr.publish("postPutAdditionalObjects")},Io=function(I){bn[I.fontName]=bn[I.fontName]||{},bn[I.fontName][I.fontStyle]=I.id},Ul=function(I,ve,We,st,xt){var Bt={id:"F"+(Object.keys(gn).length+1).toString(10),postScriptName:I,fontName:ve,fontStyle:We,encoding:st,isStandardFont:xt||!1,metadata:{}};return Lr.publish("addFont",{font:Bt,instance:this}),gn[Bt.id]=Bt,Io(Bt),Bt.id},gr=function(I){for(var ve=0,We=Xe.length;ve<We;ve++){var st=Ul.call(this,I[ve][0],I[ve][1],I[ve][2],Xe[ve][3],!0);p===!1&&(y[st]=!0);var xt=I[ve][0].split("-");Io({id:st,fontName:xt[0],fontStyle:xt[1]||""})}Lr.publish("addFonts",{fonts:gn,dictionary:bn})},Gr=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(st){var ve=st.stack||"";~ve.indexOf(" at ")&&(ve=ve.split(" at ")[1]);var We="Error in function "+ve.split(`
`)[0].split("<")[0]+": "+st.message;if(!xr.console)throw new Error(We);xr.console.error(We,st),xr.alert&&alert(We)}},I.foo.bar=I,I.foo},Va=function(I,ve){var We,st,xt,Bt,an,kn,On,Zn,or;if(xt=(ve=ve||{}).sourceEncoding||"Unicode",an=ve.outputEncoding,(ve.autoencode||an)&&gn[it].metadata&&gn[it].metadata[xt]&&gn[it].metadata[xt].encoding&&(Bt=gn[it].metadata[xt].encoding,!an&&gn[it].encoding&&(an=gn[it].encoding),!an&&Bt.codePages&&(an=Bt.codePages[0]),typeof an=="string"&&(an=Bt[an]),an)){for(On=!1,kn=[],We=0,st=I.length;We<st;We++)(Zn=an[I.charCodeAt(We)])?kn.push(String.fromCharCode(Zn)):kn.push(I[We]),kn[We].charCodeAt(0)>>8&&(On=!0);I=kn.join("")}for(We=I.length;On===void 0&&We!==0;)I.charCodeAt(We-1)>>8&&(On=!0),We--;if(!On)return I;for(kn=ve.noBOM?[]:[254,255],We=0,st=I.length;We<st;We++){if((or=(Zn=I.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kn.push(or),kn.push(Zn-(or<<8))}return String.fromCharCode.apply(void 0,kn)},ws=m.__private__.pdfEscape=m.pdfEscape=function(I,ve){return Va(I,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xs=m.__private__.beginPage=function(I){pt[++ar]=[],zn[ar]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},pa(ar),ue(pt[ae])},Bu=function(I,ve){var We,st,xt;switch(n=ve||n,typeof I=="string"&&(We=O(I.toLowerCase()),Array.isArray(We)&&(st=We[0],xt=We[1])),Array.isArray(I)&&(st=I[0]*Je,xt=I[1]*Je),isNaN(st)&&(st=i[0],xt=i[1]),(st>14400||xt>14400)&&(Wi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),st=Math.min(14400,st),xt=Math.min(14400,xt)),i=[st,xt],n.substr(0,1)){case"l":xt>st&&(i=[xt,st]);break;case"p":st>xt&&(i=[xt,st])}xs(i),Wl(mu),te(xi),Yl!==0&&te(Yl+" J"),ei!==0&&te(ei+" j"),Lr.publish("addPage",{pageNumber:ar})},fl=function(I){I>0&&I<=ar&&(pt.splice(I,1),zn.splice(I,1),ar--,ae>ar&&(ae=ar),this.setPage(ae))},pa=function(I){I>0&&I<=ar&&(ae=I)},Ti=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return pt.length-1},No=function(I,ve,We){var st,xt=void 0;return We=We||{},I=I!==void 0?I:gn[it].fontName,ve=ve!==void 0?ve:gn[it].fontStyle,st=I.toLowerCase(),bn[st]!==void 0&&bn[st][ve]!==void 0?xt=bn[st][ve]:bn[I]!==void 0&&bn[I][ve]!==void 0?xt=bn[I][ve]:We.disableWarning===!1&&Wi.warn("Unable to look up font label for font '"+I+"', '"+ve+"'. Refer to getFontList() for available fonts."),xt||We.noFallback||(xt=bn.times[ve])==null&&(xt=bn.times.normal),xt},Ha=m.__private__.putInfo=function(){var I=Ln(),ve=function(st){return st};for(var We in f!==null&&(ve=rs.encryptor(I,0)),te("<<"),te("/Producer ("+ws(ve("jsPDF "+wr.version))+")"),Ze)Ze.hasOwnProperty(We)&&Ze[We]&&te("/"+We.substr(0,1).toUpperCase()+We.substr(1)+" ("+ws(ve(Ze[We]))+")");te("/CreationDate ("+ws(ve(U))+")"),te(">>"),te("endobj")},mo=m.__private__.putCatalog=function(I){var ve=(I=I||{}).rootDictionaryObjId||wn;switch(Ln(),te("<<"),te("/Type /Catalog"),te("/Pages "+ve+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var We=""+ot;We.substr(We.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&te("/OpenAction [3 0 R /XYZ null null "+ge(ot)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Rt&&te("/PageMode /"+Rt),Lr.publish("putCatalog"),te(">>"),te("endobj")},pu=m.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(Le+1)),te("/Root "+Le+" 0 R"),te("/Info "+(Le-1)+" 0 R"),f!==null&&te("/Encrypt "+rs.oid+" 0 R"),te("/ID [ <"+R+"> <"+R+"> ]"),te(">>")},Wa=m.__private__.putHeader=function(){te("%PDF-"+C),te("%ºß¬à")},Ru=m.__private__.putXRef=function(){var I="0000000000";te("xref"),te("0 "+(Le+1)),te("0000000000 65535 f ");for(var ve=1;ve<=Le;ve++)typeof Pe[ve]=="function"?te((I+Pe[ve]()).slice(-10)+" 00000 n "):Pe[ve]!==void 0?te((I+Pe[ve]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Bo=m.__private__.buildDocument=function(){oe(),ue(Ue),Lr.publish("buildDocument"),Wa(),Ur(),da(),$a(),f!==null&&hl(),Ha(),mo();var I=Ne;return Ru(),pu(),te("startxref"),te(""+I),te("%%EOF"),ue(pt[ae]),Ue.join(`
`)},ga=m.__private__.getBlob=function(I){return new Blob([Ve(I)],{type:"application/pdf"})},Ga=m.output=m.__private__.output=Gr(function(I,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",I){case void 0:return Bo();case"save":m.save(ve.filename);break;case"arraybuffer":return Ve(Bo());case"blob":return ga(Bo());case"bloburi":case"bloburl":if(xr.URL!==void 0&&typeof xr.URL.createObjectURL=="function")return xr.URL&&xr.URL.createObjectURL(ga(Bo()))||void 0;Wi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var We="",st=Bo();try{We=U2(st)}catch{We=U2(unescape(encodeURIComponent(st)))}return"data:application/pdf;filename="+ve.filename+";base64,"+We;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xr)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(xt=ve.pdfObjectUrl,Bt="");var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",kn=xr.open();return kn!==null&&kn.document.write(an),kn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xr)==="[object Window]"){var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',Zn=xr.open();if(Zn!==null){Zn.document.write(On);var or=this;Zn.document.documentElement.querySelector("#pdfViewer").onload=function(){Zn.document.title=ve.filename,Zn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(or.output("bloburl"))}}return Zn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',wi=xr.open();if(wi!==null&&(wi.document.write(Sr),wi.document.title=ve.filename),wi||typeof safari>"u")return wi;break;case"datauri":case"dataurl":return xr.document.location.href=this.output("datauristring",ve);default:return null}}),$l=function(I){return Array.isArray(ns)===!0&&ns.indexOf(I)>-1};switch(r){case"pt":Je=1;break;case"mm":Je=72/25.4;break;case"cm":Je=72/2.54;break;case"in":Je=72;break;case"px":Je=$l("px_scaling")==1?.75:96/72;break;case"pc":case"em":Je=12;break;case"ex":Je=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Je=r}var rs=null;Oe(),ie();var gc=function(I){return f!==null?rs.encryptor(I,0):function(ve){return ve}},gu=m.__private__.getPageInfo=m.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zn[I].objId,pageNumber:I,pageContext:zn[I]}},cr=m.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in zn)if(zn[ve].objId===I)break;return gu(ve)},mr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:zn[ae].objId,pageNumber:ae,pageContext:zn[ae]}};m.addPage=function(){return Bu.apply(this,arguments),this},m.setPage=function(){return pa.apply(this,arguments),ue.call(this,pt[ae]),this},m.insertPage=function(I){return this.addPage(),this.movePage(ae,I),this},m.movePage=function(I,ve){var We,st;if(I>ve){We=pt[I],st=zn[I];for(var xt=I;xt>ve;xt--)pt[xt]=pt[xt-1],zn[xt]=zn[xt-1];pt[ve]=We,zn[ve]=st,this.setPage(ve)}else if(I<ve){We=pt[I],st=zn[I];for(var Bt=I;Bt<ve;Bt++)pt[Bt]=pt[Bt+1],zn[Bt]=zn[Bt+1];pt[ve]=We,zn[ve]=st,this.setPage(ve)}return this},m.deletePage=function(){return fl.apply(this,arguments),this},m.__private__.text=m.text=function(I,ve,We,st,xt){var Bt,an,kn,On,Zn,or,Sr,wi,Yr,ni=(st=st||{}).scope||this;if(typeof I=="number"&&typeof ve=="number"&&(typeof We=="string"||Array.isArray(We))){var Ui=We;We=ve,ve=I,I=Ui}if(arguments[3]instanceof He?(V("The transform parameter of text() with a Matrix value"),Yr=xt):(kn=arguments[4],On=arguments[5],Ni(Sr=arguments[3])==="object"&&Sr!==null||(typeof kn=="string"&&(On=kn,kn=null),typeof Sr=="string"&&(On=Sr,Sr=null),typeof Sr=="number"&&(kn=Sr,Sr=null),st={flags:Sr,angle:kn,align:On})),isNaN(ve)||isNaN(We)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return ni;var qi="",yo=!1,Er=typeof st.lineHeightFactor=="number"?st.lineHeightFactor:Hl,Ls=ni.internal.scaleFactor;function bl(ii){return ii=ii.split("	").join(Array(st.TabLen||9).join(" ")),ws(ii,Sr)}function Rs(ii){for(var li,$i=ii.concat(),gi=[],wo=$i.length;wo--;)typeof(li=$i.shift())=="string"?gi.push(li):Array.isArray(ii)&&(li.length===1||li[1]===void 0&&li[2]===void 0)?gi.push(li[0]):gi.push([li[0],li[1],li[2]]);return gi}function bu(ii,li){var $i;if(typeof ii=="string")$i=li(ii)[0];else if(Array.isArray(ii)){for(var gi,wo,eo=ii.concat(),ko=[],Uu=eo.length;Uu--;)typeof(gi=eo.shift())=="string"?ko.push(li(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(wo=li(gi[0],gi[1],gi[2]),ko.push([wo[0],wo[1],wo[2]]));$i=ko}return $i}var Qo=!1,zu=!0;if(typeof I=="string")Qo=!0;else if(Array.isArray(I)){var Za=I.concat();an=[];for(var Ka,Yi=Za.length;Yi--;)(typeof(Ka=Za.shift())!="string"||Array.isArray(Ka)&&typeof Ka[0]!="string")&&(zu=!1);Qo=zu}if(Qo===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var ea=at/ni.internal.scaleFactor,bo=ea*(Er-1);switch(st.baseline){case"bottom":We-=bo;break;case"top":We+=ea-bo;break;case"hanging":We+=ea-2*bo;break;case"middle":We+=ea/2-bo}if((or=st.maxWidth||0)>0&&(typeof I=="string"?I=ni.splitTextToSize(I,or):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(ii,li){return ii.concat(ni.splitTextToSize(li,or))},[]))),Bt={text:I,x:ve,y:We,options:st,mutex:{pdfEscape:ws,activeFontKey:it,fonts:gn,activeFontSize:at}},Lr.publish("preProcessText",Bt),I=Bt.text,kn=(st=Bt.options).angle,!(Yr instanceof He)&&kn&&typeof kn=="number"){kn*=Math.PI/180,st.rotationDirection===0&&(kn=-kn),B===D.ADVANCED&&(kn=-kn);var Qs=Math.cos(kn),_l=Math.sin(kn);Yr=new He(Qs,_l,-_l,Qs,0,0)}else kn&&kn instanceof He&&(Yr=kn);B!==D.ADVANCED||Yr||(Yr=Bn),(Zn=st.charSpace||ql)!==void 0&&(qi+=Q(W(Zn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wi=st.horizontalScale)!==void 0&&(qi+=Q(100*wi)+` Tz
`),st.lang;var Cs=-1,Fs=st.renderingMode!==void 0?st.renderingMode:st.stroke,js=ni.internal.getCurrentPageInfo().pageContext;switch(Fs){case 0:case!1:case"fill":Cs=0;break;case 1:case!0:case"stroke":Cs=1;break;case 2:case"fillThenStroke":Cs=2;break;case 3:case"invisible":Cs=3;break;case 4:case"fillAndAddForClipping":Cs=4;break;case 5:case"strokeAndAddPathForClipping":Cs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Cs=6;break;case 7:case"addToPathForClipping":Cs=7}var yc=js.usedRenderingMode!==void 0?js.usedRenderingMode:-1;Cs!==-1?qi+=Cs+` Tr
`:yc!==-1&&(qi+=`0 Tr
`),Cs!==-1&&(js.usedRenderingMode=Cs),On=st.align||"left";var is,ya=at*Er,Ss=ni.internal.pageSize.getWidth(),Es=gn[it];Zn=st.charSpace||ql,or=st.maxWidth||0,Sr=Object.assign({autoencode:!0,noBOM:!0},st.flags);var ba=[],_a=function(ii){return ni.getStringUnitWidth(ii,{font:Es,charSpace:Zn,fontSize:at,doKerning:!1})*at/Ls};if(Object.prototype.toString.call(I)==="[object Array]"){var Ps;an=Rs(I),On!=="left"&&(is=an.map(_a));var cs,ta=0;if(On==="right"){ve-=is[0],I=[],Yi=an.length;for(var _o=0;_o<Yi;_o++)_o===0?(cs=Jn(ve),Ps=ji(We)):(cs=W(ta-is[_o]),Ps=-ya),I.push([an[_o],cs,Ps]),ta=is[_o]}else if(On==="center"){ve-=is[0]/2,I=[],Yi=an.length;for(var ks=0;ks<Yi;ks++)ks===0?(cs=Jn(ve),Ps=ji(We)):(cs=W((ta-is[ks])/2),Ps=-ya),I.push([an[ks],cs,Ps]),ta=is[ks]}else if(On==="left"){I=[],Yi=an.length;for(var vt=0;vt<Yi;vt++)I.push(an[vt])}else if(On==="justify"&&Es.encoding==="Identity-H"){I=[],Yi=an.length,or=or!==0?or:Ss;for(var Ht=0,Mt=0;Mt<Yi;Mt++)if(Ps=Mt===0?ji(We):-ya,cs=Mt===0?Jn(ve):Ht,Mt<Yi-1){var En=W((or-is[Mt])/(an[Mt].split(" ").length-1)),Un=an[Mt].split(" ");I.push([Un[0]+" ",cs,Ps]),Ht=0;for(var hr=1;hr<Un.length;hr++){var Li=(_a(Un[hr-1]+" "+Un[hr])-_a(Un[hr]))*Ls+En;hr==Un.length-1?I.push([Un[hr],Li,0]):I.push([Un[hr]+" ",Li,0]),Ht-=Li}}else I.push([an[Mt],cs,Ps]);I.push(["",Ht,0])}else{if(On!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],Yi=an.length,or=or!==0?or:Ss,Mt=0;Mt<Yi;Mt++)Ps=Mt===0?ji(We):-ya,cs=Mt===0?Jn(ve):0,Mt<Yi-1?ba.push(Q(W((or-is[Mt])/(an[Mt].split(" ").length-1)))):ba.push(0),I.push([an[Mt],cs,Ps])}}var ri=typeof st.R2L=="boolean"?st.R2L:zt;ri===!0&&(I=bu(I,function(ii,li,$i){return[ii.split("").reverse().join(""),li,$i]})),Bt={text:I,x:ve,y:We,options:st,mutex:{pdfEscape:ws,activeFontKey:it,fonts:gn,activeFontSize:at}},Lr.publish("postProcessText",Bt),I=Bt.text,yo=Bt.mutex.isHex||!1;var Kl=gn[it].encoding;Kl!=="WinAnsiEncoding"&&Kl!=="StandardEncoding"||(I=bu(I,function(ii,li,$i){return[bl(ii),li,$i]})),an=Rs(I),I=[];for(var zs,Ci,na,wa=0,ra=1,ia=Array.isArray(an[0])?ra:wa,sa="",Ir=function(ii,li,$i){var gi="";return $i instanceof He?($i=typeof st.angle=="number"?Vt($i,new He(1,0,0,1,ii,li)):Vt(new He(1,0,0,1,ii,li),$i),B===D.ADVANCED&&($i=Vt(new He(1,0,0,-1,0,0),$i)),gi=$i.join(" ")+` Tm
`):gi=Q(ii)+" "+Q(li)+` Td
`,gi},Uo=0;Uo<an.length;Uo++){switch(sa="",ia){case ra:na=(yo?"<":"(")+an[Uo][0]+(yo?">":")"),zs=parseFloat(an[Uo][1]),Ci=parseFloat(an[Uo][2]);break;case wa:na=(yo?"<":"(")+an[Uo]+(yo?">":")"),zs=Jn(ve),Ci=ji(We)}ba!==void 0&&ba[Uo]!==void 0&&(sa=ba[Uo]+` Tw
`),Uo===0?I.push(sa+Ir(zs,Ci,Yr)+na):ia===wa?I.push(sa+na):ia===ra&&I.push(sa+Ir(zs,Ci,Yr)+na)}I=ia===wa?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var hs=`BT
/`;return hs+=it+" "+at+` Tf
`,hs+=Q(at*Er)+` TL
`,hs+=Jo+`
`,hs+=qi,hs+=I,te(hs+="ET"),y[it]=!0,ni};var Ro=m.__private__.clip=m.clip=function(I){return te(I==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ro("evenodd")},m.__private__.discardPath=m.discardPath=function(){return te("n"),this};var $r=m.__private__.isValidStyle=function(I){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(ve=!0),ve};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(I){return $r(I)&&(c=I),this};var Fu=m.__private__.getStyle=m.getStyle=function(I){var ve=c;switch(I){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=I}return ve},dl=m.close=function(){return te("h"),this};m.stroke=function(){return te("S"),this},m.fill=function(I){return pl("f",I),this},m.fillEvenOdd=function(I){return pl("f*",I),this},m.fillStroke=function(I){return pl("B",I),this},m.fillStrokeEvenOdd=function(I){return pl("B*",I),this};var pl=function(I,ve){Ni(ve)==="object"?ju(ve,I):te(I)},Fo=function(I){I===null||B===D.ADVANCED&&I===void 0||(I=Fu(I),te(I))};function qa(I,ve,We,st,xt){var Bt=new Hd(ve||this.boundingBox,We||this.xStep,st||this.yStep,this.gState,xt||this.matrix);Bt.stream=this.stream;var an=I+"$$"+this.cloneIndex+++"$$";return Vn(an,Bt),Bt}var ju=function(I,ve){var We=nn[I.key],st=mn[We];if(st instanceof Ff)te("q"),te(Vl(ve)),st.gState&&m.setGState(st.gState),te(I.matrix.toString()+" cm"),te("/"+We+" sh"),te("Q");else if(st instanceof Hd){var xt=new He(1,0,0,-1,0,va());I.matrix&&(xt=xt.multiply(I.matrix||Bn),We=qa.call(st,I.key,I.boundingBox,I.xStep,I.yStep,xt).id),te("q"),te("/Pattern cs"),te("/"+We+" scn"),st.gState&&m.setGState(st.gState),te(ve),te("Q")}},Vl=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},dr=m.moveTo=function(I,ve){return te(Q(W(I))+" "+Q(X(ve))+" m"),this},Mr=m.lineTo=function(I,ve){return te(Q(W(I))+" "+Q(X(ve))+" l"),this},Ya=m.curveTo=function(I,ve,We,st,xt,Bt){return te([Q(W(I)),Q(X(ve)),Q(W(We)),Q(X(st)),Q(W(xt)),Q(X(Bt)),"c"].join(" ")),this};m.__private__.line=m.line=function(I,ve,We,st,xt){if(isNaN(I)||isNaN(ve)||isNaN(We)||isNaN(st)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.line");return B===D.COMPAT?this.lines([[We-I,st-ve]],I,ve,[1,1],xt||"S"):this.lines([[We-I,st-ve]],I,ve,[1,1]).stroke()},m.__private__.lines=m.lines=function(I,ve,We,st,xt,Bt){var an,kn,On,Zn,or,Sr,wi,Yr,ni,Ui,qi,yo;if(typeof I=="number"&&(yo=We,We=ve,ve=I,I=yo),st=st||[1,1],Bt=Bt||!1,isNaN(ve)||isNaN(We)||!Array.isArray(I)||!Array.isArray(st)||!$r(xt)||typeof Bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(dr(ve,We),an=st[0],kn=st[1],Zn=I.length,Ui=ve,qi=We,On=0;On<Zn;On++)(or=I[On]).length===2?(Ui=or[0]*an+Ui,qi=or[1]*kn+qi,Mr(Ui,qi)):(Sr=or[0]*an+Ui,wi=or[1]*kn+qi,Yr=or[2]*an+Ui,ni=or[3]*kn+qi,Ui=or[4]*an+Ui,qi=or[5]*kn+qi,Ya(Sr,wi,Yr,ni,Ui,qi));return Bt&&dl(),Fo(xt),this},m.path=function(I){for(var ve=0;ve<I.length;ve++){var We=I[ve],st=We.c;switch(We.op){case"m":dr(st[0],st[1]);break;case"l":Mr(st[0],st[1]);break;case"c":Ya.apply(this,st);break;case"h":dl()}}return this},m.__private__.rect=m.rect=function(I,ve,We,st,xt){if(isNaN(I)||isNaN(ve)||isNaN(We)||isNaN(st)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return B===D.COMPAT&&(st=-st),te([Q(W(I)),Q(X(ve)),Q(W(We)),Q(W(st)),"re"].join(" ")),Fo(xt),this},m.__private__.triangle=m.triangle=function(I,ve,We,st,xt,Bt,an){if(isNaN(I)||isNaN(ve)||isNaN(We)||isNaN(st)||isNaN(xt)||isNaN(Bt)||!$r(an))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[We-I,st-ve],[xt-We,Bt-st],[I-xt,ve-Bt]],I,ve,[1,1],an,!0),this},m.__private__.roundedRect=m.roundedRect=function(I,ve,We,st,xt,Bt,an){if(isNaN(I)||isNaN(ve)||isNaN(We)||isNaN(st)||isNaN(xt)||isNaN(Bt)||!$r(an))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*We),Bt=Math.min(Bt,.5*st),this.lines([[We-2*xt,0],[xt*kn,0,xt,Bt-Bt*kn,xt,Bt],[0,st-2*Bt],[0,Bt*kn,-xt*kn,Bt,-xt,Bt],[2*xt-We,0],[-xt*kn,0,-xt,-Bt*kn,-xt,-Bt],[0,2*Bt-st],[0,-Bt*kn,xt*kn,-Bt,xt,-Bt]],I+xt,ve,[1,1],an,!0),this},m.__private__.ellipse=m.ellipse=function(I,ve,We,st,xt){if(isNaN(I)||isNaN(ve)||isNaN(We)||isNaN(st)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Bt=4/3*(Math.SQRT2-1)*We,an=4/3*(Math.SQRT2-1)*st;return dr(I+We,ve),Ya(I+We,ve-an,I+Bt,ve-st,I,ve-st),Ya(I-Bt,ve-st,I-We,ve-an,I-We,ve),Ya(I-We,ve+an,I-Bt,ve+st,I,ve+st),Ya(I+Bt,ve+st,I+We,ve+an,I+We,ve),Fo(xt),this},m.__private__.circle=m.circle=function(I,ve,We,st){if(isNaN(I)||isNaN(ve)||isNaN(We)||!$r(st))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,ve,We,We,st)},m.setFont=function(I,ve,We){return We&&(ve=J(ve,We)),it=No(I,ve,{disableWarning:!1}),this};var mc=m.__private__.getFont=m.getFont=function(){return gn[No.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var I,ve,We={};for(I in bn)if(bn.hasOwnProperty(I))for(ve in We[I]=[],bn[I])bn[I].hasOwnProperty(ve)&&We[I].push(ve);return We},m.addFont=function(I,ve,We,st,xt){var Bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Bt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Bt.indexOf(arguments[3])==-1&&(We=J(We,st)),xt=xt||"Identity-H",Ul.call(this,I,ve,We,xt)};var Hl,mu=t.lineWidth||.200025,gl=m.__private__.getLineWidth=m.getLineWidth=function(){return mu},Wl=m.__private__.setLineWidth=m.setLineWidth=function(I){return mu=I,te(Q(W(I))+" w"),this};m.__private__.setLineDash=wr.API.setLineDash=wr.API.setLineDashPattern=function(I,ve){if(I=I||[],ve=ve||0,isNaN(ve)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(We){return Q(W(We))}).join(" "),ve=Q(W(ve)),te("["+I+"] "+ve+" d"),this};var vu=m.__private__.getLineHeight=m.getLineHeight=function(){return at*Hl};m.__private__.getLineHeight=m.getLineHeight=function(){return at*Hl};var Dr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Hl=I),this},Fi=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Hl};Dr(t.lineHeight);var Jn=m.__private__.getHorizontalCoordinate=function(I){return W(I)},ji=m.__private__.getVerticalCoordinate=function(I){return B===D.ADVANCED?I:zn[ae].mediaBox.topRightY-zn[ae].mediaBox.bottomLeftY-W(I)},ml=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(I){return Q(Jn(I))},ma=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(I){return Q(ji(I))},xi=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Xn(xi)},m.__private__.setStrokeColor=m.setDrawColor=function(I,ve,We,st){return xi=sr({ch1:I,ch2:ve,ch3:We,ch4:st,pdfColorType:"draw",precision:2}),te(xi),this};var yu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Xn(yu)},m.__private__.setFillColor=m.setFillColor=function(I,ve,We,st){return yu=sr({ch1:I,ch2:ve,ch3:We,ch4:st,pdfColorType:"fill",precision:2}),te(yu),this};var Jo=t.textColor||"0 g",Gl=m.__private__.getTextColor=m.getTextColor=function(){return Xn(Jo)};m.__private__.setTextColor=m.setTextColor=function(I,ve,We,st){return Jo=sr({ch1:I,ch2:ve,ch3:We,ch4:st,pdfColorType:"text",precision:3}),this};var ql=t.charSpace,Po=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ql||0)};m.__private__.setCharSpace=m.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ql=I,this};var Yl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(I){var ve=m.CapJoinStyles[I];if(ve===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yl=ve,te(ve+" J"),this};var ei=0;m.__private__.setLineJoin=m.setLineJoin=function(I){var ve=m.CapJoinStyles[I];if(ve===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ei=ve,te(ve+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(Q(W(I))+" M"),this},m.GState=mv,m.setGState=function(I){(I=typeof I=="string"?cn[Nn[I]]:vc(null,I)).equals(er)||(te("/"+I.id+" gs"),er=I)};var vc=function(I,ve){if(!I||!Nn[I]){var We=!1;for(var st in cn)if(cn.hasOwnProperty(st)&&cn[st].equals(ve)){We=!0;break}if(We)ve=cn[st];else{var xt="GS"+(Object.keys(cn).length+1).toString(10);cn[xt]=ve,ve.id=xt}return I&&(Nn[I]=ve.id),Lr.publish("addGState",ve),ve}};m.addGState=function(I,ve){return vc(I,ve),this},m.saveGraphicsState=function(){return te("q"),Rn.push({key:it,size:at,color:Jo}),this},m.restoreGraphicsState=function(){te("Q");var I=Rn.pop();return it=I.key,at=I.size,Jo=I.color,er=null,this},m.setCurrentTransformationMatrix=function(I){return te(I.toString()+" cm"),this},m.comment=function(I){return te("#"+I),this};var us=function(I,ve){var We=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return We},set:function(Bt){isNaN(Bt)||(We=parseFloat(Bt))}});var st=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return st},set:function(Bt){isNaN(Bt)||(st=parseFloat(Bt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Bt){xt=Bt.toString()}}),this},jo=function(I,ve,We,st){us.call(this,I,ve),this.type="rect";var xt=We||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(an){isNaN(an)||(xt=parseFloat(an))}});var Bt=st||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Bt},set:function(an){isNaN(an)||(Bt=parseFloat(an))}}),this},Zl=function(){this.page=ar,this.currentPage=ae,this.pages=pt.slice(0),this.pagesContext=zn.slice(0),this.x=$t,this.y=Kt,this.matrix=_n,this.width=ti(ae),this.height=va(ae),this.outputDestination=le,this.id="",this.objectNumber=-1};Zl.prototype.restore=function(){ar=this.page,ae=this.currentPage,zn=this.pagesContext,pt=this.pages,$t=this.x,Kt=this.y,_n=this.matrix,vo(ae,this.width),zi(ae,this.height),le=this.outputDestination};var zo=function(I,ve,We,st,xt){Nt.push(new Zl),ar=ae=0,pt=[],$t=I,Kt=ve,_n=xt,xs([We,st])},vl=function(I){if(Js[I])Nt.pop().restore();else{var ve=new Zl,We="Xo"+(Object.keys(ki).length+1).toString(10);ve.id=We,Js[I]=We,ki[We]=ve,Lr.publish("addFormObject",ve),Nt.pop().restore()}};for(var yl in m.beginFormObject=function(I,ve,We,st,xt){return zo(I,ve,We,st,xt),this},m.endFormObject=function(I){return vl(I),this},m.doFormObject=function(I,ve){var We=ki[Js[I]];return te("q"),te(ve.toString()+" cm"),te("/"+We.id+" Do"),te("Q"),this},m.getFormObject=function(I){var ve=ki[Js[I]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},m.save=function(I,ve){return I=I||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?(Df(ga(Bo()),I),typeof Df.unload=="function"&&xr.setTimeout&&setTimeout(Df.unload,911),this):new Promise(function(We,st){try{var xt=Df(ga(Bo()),I);typeof Df.unload=="function"&&xr.setTimeout&&setTimeout(Df.unload,911),We(xt)}catch(Bt){st(Bt.message)}})},wr.API)wr.API.hasOwnProperty(yl)&&(yl==="events"&&wr.API.events.length?function(I,ve){var We,st,xt;for(xt=ve.length-1;xt!==-1;xt--)We=ve[xt][0],st=ve[xt][1],I.subscribe.apply(I,[We].concat(typeof st=="function"?[st]:st))}(Lr,wr.API.events):m[yl]=wr.API[yl]);var ti=m.getPageWidth=function(I){return(zn[I=I||ae].mediaBox.topRightX-zn[I].mediaBox.bottomLeftX)/Je},vo=m.setPageWidth=function(I,ve){zn[I].mediaBox.topRightX=ve*Je+zn[I].mediaBox.bottomLeftX},va=m.getPageHeight=function(I){return(zn[I=I||ae].mediaBox.topRightY-zn[I].mediaBox.bottomLeftY)/Je},zi=m.setPageHeight=function(I,ve){zn[I].mediaBox.topRightY=ve*Je+zn[I].mediaBox.bottomLeftY};return m.internal={pdfEscape:ws,getStyle:Fu,getFont:mc,getFontSize:dt,getCharSpace:Po,getTextColor:Gl,getLineHeight:vu,getLineHeightFactor:Fi,getLineWidth:gl,write:Se,getHorizontalCoordinate:Jn,getVerticalCoordinate:ji,getCoordinateString:ml,getVerticalCoordinateString:ma,collections:{},newObject:Ln,newAdditionalObject:qt,newObjectDeferred:Pt,newObjectDeferredBegin:wt,getFilters:kr,putStream:Hn,events:Lr,scaleFactor:Je,pageSize:{getWidth:function(){return ti(ae)},setWidth:function(I){vo(ae,I)},getHeight:function(){return va(ae)},setHeight:function(I){zi(ae,I)}},encryptionOptions:f,encryption:rs,getEncryptor:gc,output:Ga,getNumberOfPages:Ti,pages:pt,out:te,f2:ge,f3:$,getPageInfo:gu,getPageInfoByObjId:cr,getCurrentPageInfo:mr,getPDFVersion:S,Point:us,Rectangle:jo,Matrix:He,hasHotfix:$l},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ti(ae)},set:function(I){vo(ae,I)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return va(ae)},set:function(I){zi(ae,I)},enumerable:!0,configurable:!0}),gr.call(m,Xe),it="F1",Bu(i,n),Lr.publish("initialized"),m}zd.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},zd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},zd.prototype.processOwnerPassword=function(t,e){return V2($2(e).substr(0,5),t)},zd.prototype.encryptor=function(t,e){var n=$2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return V2(n,r)}},mv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ni(t)!==Ni(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},wr.API={events:[]},wr.version="2.5.2";var Ws=wr.API,c_=1,id=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Tr=function(t){return t.toFixed(2)},Nh=function(t){return t.toFixed(5)};Ws.__acroform__={};var zl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},z4=function(t){return t*c_},Pc=function(t){var e=new uE,n=$n.internal.getHeight(t)||0,r=$n.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Tr(r)),Number(Tr(n))],e},w$=Ws.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},x$=Ws.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},L$=Ws.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ao=Ws.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return L$(t,e-1)},lo=Ws.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return w$(t,e-1)},uo=Ws.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return x$(t,e-1)},C$=Ws.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Tr(l.lowerLeft_X)),Number(Tr(l.lowerLeft_Y)),Number(Tr(l.upperRight_X)),Number(Tr(l.upperRight_Y))]},S$=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=H2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Tr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Pc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},H2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=n,o=$n.internal.getHeight(t)||0;o=o<0?-o:o;var a=$n.internal.getWidth(t)||0;a=a<0?-a:a;var l=function($,W,se){if($+1<i.length){var X=W+" "+i[$+1][0];return Jm(X,t,se).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,f,p=Jm("3",t,s).height,y=t.multiline?o-s:(o-p)/2,m=y+=2,C=0,S=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Jm(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var O="",D=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var z=!1;if(i[B].length!==1&&T!==i[B].length-1){if((p+2)*(D+2)+2>o)continue e;O+=i[B][T],z=!0,S=B,B--}else{O=(O+=i[B][T]+" ").substr(O.length-1)==" "?O.substr(0,O.length-1):O;var H=parseInt(B),J=l(H,O,s),Q=B>=i.length-1;if(J&&!Q){O+=" ",T=0;continue}if(J||Q){if(Q)S=H;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;S=H}}for(var V="",Y=C;Y<=S;Y++){var ge=i[Y];if(t.multiline){if(Y===S){V+=ge[T]+" ",T=(T+1)%ge.length;continue}if(Y===C){V+=ge[ge.length-1]+" ";continue}}V+=ge[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,f=Jm(V,t,s).width,t.textAlign){case"right":c=a-f-2;break;case"center":c=(a-f)/2;break;case"left":default:c=2}e+=Tr(c)+" "+Tr(m)+` Td
`,e+="("+id(V)+`) Tj
`,e+=-Tr(c)+` 0 Td
`,m=-(s+2),f=0,C=z?S:S+1,D++,O=""}break}return r.text=e,r.fontSize=s,r},Jm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},E$={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},P$=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},k$=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ni(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},M$=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(cc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(E$)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");c_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new cE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&P$(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=C$(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=$n.createDefaultAppearanceStream(a),Ni(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=S$(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var p="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var m=a.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var C=m[o];typeof C=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=m)=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&k$(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},lE=Ws.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ni(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+id(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},P1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+id(r(t))+")"},Nc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Nc.prototype.toString=function(){return this.objId+" 0 R"},Nc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Nc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:lE(i,this.objId,this.scope)}):i instanceof Nc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var uE=function(){Nc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};zl(uE,Nc);var cE=function(){Nc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+id(n(t))+")"}},set:function(n){t=n}})};zl(cE,Nc);var cc=function t(){Nc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute F supplied.');e=O}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ao(e,3)},set:function(O){O?this.F=lo(e,3):this.F=uo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute Ff supplied.');n=O}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(O){r=O!==void 0?O:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(O){r[0]=O}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(O){r[1]=O}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(O){r[2]=O}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(O){r[3]=O}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(O){switch(O){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=O;break;default:throw new Error('Invalid value "'+O+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof vv)return;s="FieldObject"+t.FieldNum++}var O=function(D){return D};return this.scope&&(O=this.scope.internal.getEncryptor(this.objId)),"("+id(O(s))+")"},set:function(O){s=O.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(O){s=O}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(O){o=O}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(O){a=O}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(O){l=O}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/c_:c},set:function(O){c=O}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(O){f=O}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof vv||this instanceof qf))return P1(p,this.objId,this.scope)},set:function(O){O=O.toString(),p=O}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof qo?y:P1(y,this.objId,this.scope)},set:function(O){O=O.toString(),y=this instanceof qo?O:O.substr(0,1)==="("?kd(O.substr(1,O.length-2)):kd(O)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qo?kd(y.substr(1,y.length-1)):y},set:function(O){O=O.toString(),y=this instanceof qo?"/"+O:O}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(O){this.V=O}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof qo?m:P1(m,this.objId,this.scope)},set:function(O){O=O.toString(),m=this instanceof qo?O:O.substr(0,1)==="("?kd(O.substr(1,O.length-2)):kd(O)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qo?kd(m.substr(1,m.length-1)):m},set:function(O){O=O.toString(),m=this instanceof qo?"/"+O:O}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(O){O=!!O,S=O}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(O){C=O}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,1)},set:function(O){O?this.Ff=lo(this.Ff,1):this.Ff=uo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,2)},set:function(O){O?this.Ff=lo(this.Ff,2):this.Ff=uo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,3)},set:function(O){O?this.Ff=lo(this.Ff,3):this.Ff=uo(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(O){if([0,1,2].indexOf(O)===-1)throw new Error('Invalid value "'+O+'" for attribute Q supplied.');T=O}}),Object.defineProperty(this,"textAlign",{get:function(){var O;switch(T){case 0:default:O="left";break;case 1:O="center";break;case 2:O="right"}return O},configurable:!0,enumerable:!0,set:function(O){switch(O){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};zl(cc,Nc);var Jd=function(){cc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,18)},set:function(n){n?this.Ff=lo(this.Ff,18):this.Ff=uo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=lo(this.Ff,19):this.Ff=uo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,20)},set:function(n){n?(this.Ff=lo(this.Ff,20),e.sort()):this.Ff=uo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,22)},set:function(n){n?this.Ff=lo(this.Ff,22):this.Ff=uo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,23)},set:function(n){n?this.Ff=lo(this.Ff,23):this.Ff=uo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,27)},set:function(n){n?this.Ff=lo(this.Ff,27):this.Ff=uo(this.Ff,27)}}),this.hasAppearanceStream=!1};zl(Jd,cc);var Qd=function(){Jd.call(this),this.fontName="helvetica",this.combo=!1};zl(Qd,Jd);var ep=function(){Qd.call(this),this.combo=!0};zl(ep,Qd);var O0=function(){ep.call(this),this.edit=!0};zl(O0,ep);var qo=function(){cc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,15)},set:function(n){n?this.Ff=lo(this.Ff,15):this.Ff=uo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,16)},set:function(n){n?this.Ff=lo(this.Ff,16):this.Ff=uo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,17)},set:function(n){n?this.Ff=lo(this.Ff,17):this.Ff=uo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,26)},set:function(n){n?this.Ff=lo(this.Ff,26):this.Ff=uo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+id(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ni(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};zl(qo,cc);var D0=function(){qo.call(this),this.pushButton=!0};zl(D0,qo);var tp=function(){qo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};zl(tp,qo);var vv=function(){var t,e;cc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+id(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ni(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$n.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zl(vv,cc),tp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},tp.prototype.createOption=function(t){var e=new vv;return e.Parent=this,e.optionName=t,this.Kids.push(e),A$.call(this.scope,e),e};var I0=function(){qo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$n.CheckBox.createAppearanceStream()};zl(I0,qo);var qf=function(){cc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,13)},set:function(e){e?this.Ff=lo(this.Ff,13):this.Ff=uo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,21)},set:function(e){e?this.Ff=lo(this.Ff,21):this.Ff=uo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,23)},set:function(e){e?this.Ff=lo(this.Ff,23):this.Ff=uo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,24)},set:function(e){e?this.Ff=lo(this.Ff,24):this.Ff=uo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,25)},set:function(e){e?this.Ff=lo(this.Ff,25):this.Ff=uo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,26)},set:function(e){e?this.Ff=lo(this.Ff,26):this.Ff=uo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zl(qf,cc);var N0=function(){qf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,14)},set:function(t){t?this.Ff=lo(this.Ff,14):this.Ff=uo(this.Ff,14)}}),this.password=!0};zl(N0,qf);var $n={CheckBox:{createAppearanceStream:function(){return{N:{On:$n.CheckBox.YesNormal},D:{On:$n.CheckBox.YesPushDown,Off:$n.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=H2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Tr($n.internal.getWidth(t))+" "+Tr($n.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Tr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Pc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=$n.internal.getHeight(t),o=$n.internal.getWidth(t),a=H2(t,t.caption);return i.push("1 g"),i.push("0 0 "+Tr(o)+" "+Tr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Tr(o-1)+" "+Tr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Tr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Tr($n.internal.getWidth(t))+" "+Tr($n.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:$n.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=$n.RadioButton.Circle.YesNormal,e.D[t]=$n.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=$n.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5)),o=Number((r*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:$n.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=$n.RadioButton.Cross.YesNormal,e.D[t]=$n.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=$n.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Tr($n.internal.getWidth(t)-2)+" "+Tr($n.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Tr(r.x1.x)+" "+Tr(r.x1.y)+" m"),n.push(Tr(r.x2.x)+" "+Tr(r.x2.y)+" l"),n.push(Tr(r.x4.x)+" "+Tr(r.x4.y)+" m"),n.push(Tr(r.x3.x)+" "+Tr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=$n.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Tr($n.internal.getWidth(t))+" "+Tr($n.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Tr($n.internal.getWidth(t)-2)+" "+Tr($n.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Tr(n.x1.x)+" "+Tr(n.x1.y)+" m"),r.push(Tr(n.x2.x)+" "+Tr(n.x2.y)+" l"),r.push(Tr(n.x4.x)+" "+Tr(n.x4.y)+" m"),r.push(Tr(n.x3.x)+" "+Tr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Tr($n.internal.getWidth(t))+" "+Tr($n.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};$n.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=$n.internal.getWidth(t),n=$n.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},$n.internal.getWidth=function(t){var e=0;return Ni(t)==="object"&&(e=z4(t.Rect[2])),e},$n.internal.getHeight=function(t){var e=0;return Ni(t)==="object"&&(e=z4(t.Rect[3])),e};var A$=Ws.addField=function(t){if(M$(this,t),!(t instanceof cc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ws.AcroFormChoiceField=Jd,Ws.AcroFormListBox=Qd,Ws.AcroFormComboBox=ep,Ws.AcroFormEditBox=O0,Ws.AcroFormButton=qo,Ws.AcroFormPushButton=D0,Ws.AcroFormRadioButton=tp,Ws.AcroFormCheckBox=I0,Ws.AcroFormTextField=qf,Ws.AcroFormPasswordField=N0,Ws.AcroFormAppearance=$n,Ws.AcroForm={ChoiceField:Jd,ListBox:Qd,ComboBox:ep,EditBox:O0,Button:qo,PushButton:D0,RadioButton:tp,CheckBox:I0,TextField:qf,PasswordField:N0,Appearance:$n},wr.AcroForm={ChoiceField:Jd,ListBox:Qd,ComboBox:ep,EditBox:O0,Button:qo,PushButton:D0,RadioButton:tp,CheckBox:I0,TextField:qf,PasswordField:N0,Appearance:$n};wr.AcroForm;function hE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function($,W){var se,X,U,R,ee,ie=e;if((W=W||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(J($))for(ee in n)for(U=n[ee],se=0;se<U.length;se+=1){for(R=!0,X=0;X<U[se].length;X+=1)if(U[se][X]!==void 0&&U[se][X]!==$[X]){R=!1;break}if(R===!0){ie=ee;break}}else for(ee in n)for(U=n[ee],se=0;se<U.length;se+=1){for(R=!0,X=0;X<U[se].length;X+=1)if(U[se][X]!==void 0&&U[se][X]!==$.charCodeAt(X)){R=!1;break}if(R===!0){ie=ee;break}}return ie===e&&W!==e&&(ie=W),ie},i=function $(W){for(var se=this.internal.write,X=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);W.objectId=this.internal.newObject();var R=[];if(R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Image"}),R.push({key:"Width",value:W.width}),R.push({key:"Height",value:W.height}),W.colorSpace===T.INDEXED?R.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(W.palette.length/3-1)+" "+("sMask"in W&&W.sMask!==void 0?W.objectId+2:W.objectId+1)+" 0 R]"}):(R.push({key:"ColorSpace",value:"/"+W.colorSpace}),W.colorSpace===T.DEVICE_CMYK&&R.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),R.push({key:"BitsPerComponent",value:W.bitsPerComponent}),"decodeParameters"in W&&W.decodeParameters!==void 0&&R.push({key:"DecodeParms",value:"<<"+W.decodeParameters+">>"}),"transparency"in W&&Array.isArray(W.transparency)){for(var ee="",ie=0,fe=W.transparency.length;ie<fe;ie++)ee+=W.transparency[ie]+" "+W.transparency[ie]+" ";R.push({key:"Mask",value:"["+ee+"]"})}W.sMask!==void 0&&R.push({key:"SMask",value:W.objectId+1+" 0 R"});var me=W.filter!==void 0?["/"+W.filter]:void 0;if(X({data:W.data,additionalKeyValues:R,alreadyAppliedFilters:me,objectId:W.objectId}),se("endobj"),"sMask"in W&&W.sMask!==void 0){var Oe="/Predictor "+W.predictor+" /Colors 1 /BitsPerComponent "+W.bitsPerComponent+" /Columns "+W.width,Z={width:W.width,height:W.height,colorSpace:"DeviceGray",bitsPerComponent:W.bitsPerComponent,decodeParameters:Oe,data:W.sMask};"filter"in W&&(Z.filter=W.filter),$.call(this,Z)}if(W.colorSpace===T.INDEXED){var ae=this.internal.newObject();X({data:V(new Uint8Array(W.palette)),objectId:ae}),se("endobj")}},s=function(){var $=this.internal.collections.addImage_images;for(var W in $)i.call(this,$[W])},o=function(){var $,W=this.internal.collections.addImage_images,se=this.internal.write;for(var X in W)se("/I"+($=W[X]).index,$.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var $=this.internal.collections.addImage_images;return a.call(this),$},c=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function($){return typeof t["process"+$.toUpperCase()]=="function"},p=function($){return Ni($)==="object"&&$.nodeType===1},y=function($,W){if($.nodeName==="IMG"&&$.hasAttribute("src")){var se=""+$.getAttribute("src");if(se.indexOf("data:image/")===0)return bg(unescape(se).split("base64,").pop());var X=t.loadFile(se,!0);if(X!==void 0)return X}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var U;switch(W){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return bg($.toDataURL(U,1).split("base64,").pop())}},m=function($){var W=this.internal.collections.addImage_images;if(W){for(var se in W)if($===W[se].alias)return W[se]}},C=function($,W,se){return $||W||($=-96,W=-96),$<0&&($=-1*se.width*72/$/this.internal.scaleFactor),W<0&&(W=-1*se.height*72/W/this.internal.scaleFactor),$===0&&($=W*se.width/se.height),W===0&&(W=$*se.height/se.width),[$,W]},S=function($,W,se,X,U,R){var ee=C.call(this,se,X,U),ie=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,me=l.call(this);if(se=ee[0],X=ee[1],me[U.index]=U,R){R*=Math.PI/180;var Oe=Math.cos(R),Z=Math.sin(R),ae=function(pe){return pe.toFixed(4)},ce=[ae(Oe),ae(Z),ae(-1*Z),ae(Oe),0,0,"cm"]}this.internal.write("q"),R?(this.internal.write([1,"0","0",1,ie($),fe(W+X),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([ie(se),"0","0",ie(X),"0","0","cm"].join(" "))):this.internal.write([ie(se),"0","0",ie(X),ie($),fe(W+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function($){var W,se,X=0;if(typeof $=="string")for(se=$.length,W=0;W<se;W++)X=(X<<5)-X+$.charCodeAt(W),X|=0;else if(J($))for(se=$.byteLength/2,W=0;W<se;W++)X=(X<<5)-X+$[W],X|=0;return X},B=t.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var W=!0;return $.length===0&&(W=!1),$.length%4!=0&&(W=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(W=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(W=!1),W},z=t.__addimage__.extractImageFromDataUrl=function($){var W=($=$||"").split("base64,"),se=null;if(W.length===2){var X=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(W[0]);Array.isArray(X)&&(se={mimeType:X[1],charset:X[2],data:W[1]})}return se},H=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function($){return H()&&$ instanceof ArrayBuffer};var J=t.__addimage__.isArrayBufferView=function($){return H()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},Q=t.__addimage__.binaryStringToUint8Array=function($){for(var W=$.length,se=new Uint8Array(W),X=0;X<W;X++)se[X]=$.charCodeAt(X);return se},V=t.__addimage__.arrayBufferToBinaryString=function($){for(var W="",se=J($)?$:new Uint8Array($),X=0;X<se.length;X+=8192)W+=String.fromCharCode.apply(null,se.subarray(X,X+8192));return W};t.addImage=function(){var $,W,se,X,U,R,ee,ie,fe;if(typeof arguments[1]=="number"?(W=e,se=arguments[1],X=arguments[2],U=arguments[3],R=arguments[4],ee=arguments[5],ie=arguments[6],fe=arguments[7]):(W=arguments[1],se=arguments[2],X=arguments[3],U=arguments[4],R=arguments[5],ee=arguments[6],ie=arguments[7],fe=arguments[8]),Ni($=arguments[0])==="object"&&!p($)&&"imageData"in $){var me=$;$=me.imageData,W=me.format||W||e,se=me.x||se||0,X=me.y||X||0,U=me.w||me.width||U,R=me.h||me.height||R,ee=me.alias||ee,ie=me.compression||ie,fe=me.rotation||me.angle||fe}var Oe=this.internal.getFilters();if(ie===void 0&&Oe.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(se)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var Z=Y.call(this,$,W,ee,ie);return S.call(this,se,X,U,R,Z,fe),this};var Y=function($,W,se,X){var U,R,ee;if(typeof $=="string"&&r($)===e){$=unescape($);var ie=ge($,!1);(ie!==""||(ie=t.loadFile($,!0))!==void 0)&&($=ie)}if(p($)&&($=y($,W)),W=r($,W),!f(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(((ee=se)==null||ee.length===0)&&(se=function(fe){return typeof fe=="string"||J(fe)?D(fe):J(fe.data)?D(fe.data):null}($)),(U=m.call(this,se))||(H()&&($ instanceof Uint8Array||W==="RGBA"||(R=$,$=Q($))),U=this["process"+W.toUpperCase()]($,c.call(this),se,function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in t.image_compression?fe:O.NONE}(X),R)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},ge=t.__addimage__.convertBase64ToBinaryString=function($,W){var se;W=typeof W!="boolean"||W;var X,U="";if(typeof $=="string"){X=(se=z($))!==null?se.data:$;try{U=bg(X)}catch(R){if(W)throw B(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+R.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function($){var W,se,X="";if(p($)&&($=y($)),typeof $=="string"&&r($)===e&&((X=ge($,!1))===""&&(X=t.loadFile($)||""),$=X),se=r($),!f(se))throw new Error("addImage does not support files of type '"+se+"', please ensure that a plugin for '"+se+"' support is added.");if(!H()||$ instanceof Uint8Array||($=Q($)),!(W=this["process"+se.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return W.fileType=se,W}})(wr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};wr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,f=!1,p=0;p<c.length&&!f;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var m=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),O=this.internal.getEncryptor(S.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(O(r.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(O(D))+") >>",S.content=s;var B=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(S.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var z=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(C(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var H=this.annotations._nameMap[r.options.name];r.options.pageNumber=H.page,r.options.top=H.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var J=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+J+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(n,a).length;o=Math.ceil(c*f)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(wr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=t.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&i.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(S){var T=0,O=n,D="",B=0;for(T=0;T<S.length;T+=1)O[S.charCodeAt(T)]!==void 0?(B++,typeof(O=O[S.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(O),O=n,B=0),T===S.length-1&&(O=n,D+=S.charAt(T-(B-1)),T-=B-1,B=0)):(O=n,D+=S.charAt(T-B),T-=B,B=0);return D};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(S,T,O){return o(S)?s(S)===!1?-1:!c(S)||!o(T)&&!o(O)||!o(O)&&a(T)||a(S)&&!o(T)||a(S)&&l(T)||a(S)&&a(T)?0:f(S)&&o(T)&&!a(T)&&o(O)&&c(O)?3:a(S)||!o(O)?1:2:-1},m=function(S){var T=0,O=0,D=0,B="",z="",H="",J=(S=S||"").split("\\s+"),Q=[];for(T=0;T<J.length;T+=1){for(Q.push(""),O=0;O<J[T].length;O+=1)B=J[T][O],z=J[T][O-1],H=J[T][O+1],o(B)?(D=y(B,z,H),Q[T]+=D!==-1?String.fromCharCode(e[B.charCodeAt(0)][D]):B):Q[T]+=B;Q[T]=p(Q[T])}return Q.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var S,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,O=[];if(Array.isArray(T)){var D=0;for(O=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?O.push([m(T[D][0]),T[D][1],T[D][2]]):O.push([m(T[D])]);S=O}else S=m(T);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",C])}(wr.API),wr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(S){C=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,m=0,C=0,S=0,T=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var O=c.maxWidth;O>0?typeof l=="string"?l=this.splitTextToSize(l,O):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(B,z){return B.concat(T.splitTextToSize(z,O))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)m<(S=this.getStringUnitWidth(l[D],{font:p})*f)&&(m=S);return m!==0&&(C=l.length),{w:m/=y,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,f,p,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var m,C,S,T,O=[],D=[],B=[],z={},H={},J=[],Q=[],V=(y=y||{}).autoSize||!1,Y=y.printHeaders!==!1,ge=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,$=y.margins||Object.assign({width:this.getPageWidth()},e),W=typeof y.padding=="number"?y.padding:3,se=y.headerBackgroundColor||"#c8c8c8",X=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=ge,this.internal.__cell__.padding=W,this.internal.__cell__.headerBackgroundColor=se,this.internal.__cell__.headerTextColor=X,this.setFontSize(ge),p==null)D=O=Object.keys(f[0]),B=O.map(function(){return"left"});else if(Array.isArray(p)&&Ni(p[0])==="object")for(O=p.map(function(me){return me.name}),D=p.map(function(me){return me.prompt||me.name||""}),B=p.map(function(me){return me.align||"left"}),m=0;m<p.length;m+=1)H[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=O=p,B=O.map(function(){return"left"}));if(V||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<O.length;m+=1){for(z[T=O[m]]=f.map(function(me){return me[T]}),this.setFont(void 0,"bold"),J.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=z[T],this.setFont(void 0,"normal"),S=0;S<C.length;S+=1)J.push(this.getTextDimensions(C[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[T]=Math.max.apply(null,J)+W+W,J=[]}if(Y){var U={};for(m=0;m<O.length;m+=1)U[O[m]]={},U[O[m]].text=D[m],U[O[m]].align=B[m];var R=a.call(this,U,H);Q=O.map(function(me){return new s(l,c,H[me],R,U[me].text,void 0,U[me].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var ee=p.reduce(function(me,Oe){return me[Oe.name]=Oe.align,me},{});for(m=0;m<f.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:f[m]},this);var ie=a.call(this,f[m],H);for(S=0;S<O.length;S+=1){var fe=f[m][O[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:S,data:fe},this),o.call(this,new s(l,c,H[O[S]],ie,fe,m+2,ee[O[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(m){var C=l[m];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,c[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/y+f+f},this).reduce(function(m,C){return Math.max(m,C)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(C)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(wr.API);var fE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},dE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],W2=hE(dE),pE=[100,200,300,400,500,600,700,800,900],T$=hE(pE);function G2(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return fE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof W2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function U4(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var O$={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function V4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function D$(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},O$,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=G2(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+V4(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var f=W2[l],p=f<=W2.normal?-1:1,y=U4(c,dE,f,p);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var f=fE[l],p=0;p<f.length;++p)if(c[f[p]])return c[f[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var f=T$[l],p=U4(c,pE,f,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+V4(s)+"'.");return o}function H4(t){return t.trimLeft()}function I$(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function N$(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Qm,W4,G4,k1=["times"];(function(t){var e,n,r,i,s,o,a,l,c,f=function(Z){return Z=Z||{},this.isStrokeTransparent=Z.isStrokeTransparent||!1,this.strokeOpacity=Z.strokeOpacity||1,this.strokeStyle=Z.strokeStyle||"#000000",this.fillStyle=Z.fillStyle||"#000000",this.isFillTransparent=Z.isFillTransparent||!1,this.fillOpacity=Z.fillOpacity||1,this.font=Z.font||"10px sans-serif",this.textBaseline=Z.textBaseline||"alphabetic",this.textAlign=Z.textAlign||"left",this.lineWidth=Z.lineWidth||1,this.lineJoin=Z.lineJoin||"miter",this.lineCap=Z.lineCap||"butt",this.path=Z.path||[],this.transform=Z.transform!==void 0?Z.transform.clone():new l,this.globalCompositeOperation=Z.globalCompositeOperation||"normal",this.globalAlpha=Z.globalAlpha||1,this.clip_path=Z.clip_path||[],this.currentPoint=Z.currentPoint||new o,this.miterLimit=Z.miterLimit||10,this.lastPoint=Z.lastPoint||new o,this.lineDashOffset=Z.lineDashOffset||0,this.lineDash=Z.lineDash||[],this.margin=Z.margin||[0,0,0,0],this.prevPageLastElemOffset=Z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Z.ignoreClearRect!="boolean"||Z.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var p=function(Z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ae=Z;Object.defineProperty(this,"pdf",{get:function(){return ae}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(ue){ce=!!ue}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(ue){pe=!!ue}});var Le=0;Object.defineProperty(this,"posX",{get:function(){return Le},set:function(ue){isNaN(ue)||(Le=ue)}});var Pe=0;Object.defineProperty(this,"posY",{get:function(){return Pe},set:function(ue){isNaN(ue)||(Pe=ue)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ue){var te;typeof ue=="number"?te=[ue,ue,ue,ue]:((te=new Array(4))[0]=ue[0],te[1]=ue.length>=2?ue[1]:te[0],te[2]=ue.length>=3?ue[2]:te[0],te[3]=ue.length>=4?ue[3]:te[1]),c.margin=te}});var Ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ue},set:function(ue){Ue=ue}});var Ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ne},set:function(ue){Ne=ue}});var nt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return nt},set:function(ue){nt=ue}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ue){ue instanceof f&&(c=ue)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ue){c.path=ue}});var pt=[];Object.defineProperty(this,"ctxStack",{get:function(){return pt},set:function(ue){pt=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var te;te=y(ue),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var te=y(ue);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var bt=null;function le(ue,te){if(bt===null){var Se=function(Ve){var Xe=[];return Object.keys(Ve).forEach(function(at){Ve[at].forEach(function(ot){var dt=null;switch(ot){case"bold":dt={family:at,weight:"bold"};break;case"italic":dt={family:at,style:"italic"};break;case"bolditalic":dt={family:at,weight:"bold",style:"italic"};break;case"":case"normal":dt={family:at}}dt!==null&&(dt.ref={name:at,style:ot},Xe.push(dt))})}),Xe}(ue.getFontList());bt=function(Ve){for(var Xe={},at=0;at<Ve.length;++at){var ot=G2(Ve[at]),dt=ot.family,zt=ot.stretch,Rt=ot.style,Zt=ot.weight;Xe[dt]=Xe[dt]||{},Xe[dt][zt]=Xe[dt][zt]||{},Xe[dt][zt][Rt]=Xe[dt][zt][Rt]||{},Xe[dt][zt][Rt][Zt]=ot}return Xe}(Se.concat(te))}return bt}var oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return oe},set:function(ue){bt=null,oe=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var te;if(this.ctx.font=ue,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var Se=te[1],Ve=(te[2],te[3]),Xe=te[4],at=(te[5],te[6]),ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(ot==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var dt=function(Ze){var it,Je,$t=[],Kt=Ze.trim();if(Kt==="")return k1;if(Kt in $4)return[$4[Kt]];for(;Kt!=="";){switch(Je=null,it=(Kt=H4(Kt)).charAt(0)){case'"':case"'":Je=I$(Kt.substring(1),it);break;default:Je=N$(Kt)}if(Je===null||($t.push(Je[0]),(Kt=H4(Je[1]))!==""&&Kt.charAt(0)!==","))return k1;Kt=Kt.replace(/^,/,"")}return $t}(at);if(this.fontFaces){var zt=D$(le(this.pdf,this.fontFaces),dt.map(function(Ze){return{family:Ze,stretch:"normal",weight:Ve,style:Se}}));this.pdf.setFont(zt.ref.name,zt.ref.style)}else{var Rt="";(Ve==="bold"||parseInt(Ve,10)>=700||Se==="bold")&&(Rt="bold"),Se==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Zt="",Qt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pn=0;pn<dt.length;pn++){if(this.pdf.internal.getFont(dt[pn],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Zt=dt[pn];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(dt[pn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=dt[pn],Rt="bold";else if(this.pdf.internal.getFont(dt[pn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=dt[pn],Rt="normal";break}}if(Zt===""){for(var Sn=0;Sn<dt.length;Sn++)if(Qt[dt[Sn]]){Zt=Qt[dt[Sn]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};p.prototype.setLineDash=function(Z){this.lineDash=Z},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){z.call(this,"fill",!1)},p.prototype.stroke=function(){z.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Wi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new o(Z,ae));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(Z,ae)},p.prototype.closePath=function(){var Z=new o(0,0),ae=0;for(ae=this.path.length-1;ae!==-1;ae--)if(this.path[ae].type==="begin"&&Ni(this.path[ae+1])==="object"&&typeof this.path[ae+1].x=="number"){Z=new o(this.path[ae+1].x,this.path[ae+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.lineTo=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Wi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new o(Z,ae));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},p.prototype.quadraticCurveTo=function(Z,ae,ce,pe){if(isNaN(ce)||isNaN(pe)||isNaN(Z)||isNaN(ae))throw Wi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Le=this.ctx.transform.applyToPoint(new o(ce,pe)),Pe=this.ctx.transform.applyToPoint(new o(Z,ae));this.path.push({type:"qct",x1:Pe.x,y1:Pe.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new o(Le.x,Le.y)},p.prototype.bezierCurveTo=function(Z,ae,ce,pe,Le,Pe){if(isNaN(Le)||isNaN(Pe)||isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe))throw Wi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ue=this.ctx.transform.applyToPoint(new o(Le,Pe)),Ne=this.ctx.transform.applyToPoint(new o(Z,ae)),nt=this.ctx.transform.applyToPoint(new o(ce,pe));this.path.push({type:"bct",x1:Ne.x,y1:Ne.y,x2:nt.x,y2:nt.y,x:Ue.x,y:Ue.y}),this.ctx.lastPoint=new o(Ue.x,Ue.y)},p.prototype.arc=function(Z,ae,ce,pe,Le,Pe){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe)||isNaN(Le))throw Wi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Pe=!!Pe,!this.ctx.transform.isIdentity){var Ue=this.ctx.transform.applyToPoint(new o(Z,ae));Z=Ue.x,ae=Ue.y;var Ne=this.ctx.transform.applyToPoint(new o(0,ce)),nt=this.ctx.transform.applyToPoint(new o(0,0));ce=Math.sqrt(Math.pow(Ne.x-nt.x,2)+Math.pow(Ne.y-nt.y,2))}Math.abs(Le-pe)>=2*Math.PI&&(pe=0,Le=2*Math.PI),this.path.push({type:"arc",x:Z,y:ae,radius:ce,startAngle:pe,endAngle:Le,counterclockwise:Pe})},p.prototype.arcTo=function(Z,ae,ce,pe,Le){throw new Error("arcTo not implemented.")},p.prototype.rect=function(Z,ae,ce,pe){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe))throw Wi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Z,ae),this.lineTo(Z+ce,ae),this.lineTo(Z+ce,ae+pe),this.lineTo(Z,ae+pe),this.lineTo(Z,ae),this.lineTo(Z+ce,ae),this.lineTo(Z,ae)},p.prototype.fillRect=function(Z,ae,ce,pe){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe))throw Wi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Le={};this.lineCap!=="butt"&&(Le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Z,ae,ce,pe),this.fill(),Le.hasOwnProperty("lineCap")&&(this.lineCap=Le.lineCap),Le.hasOwnProperty("lineJoin")&&(this.lineJoin=Le.lineJoin)}},p.prototype.strokeRect=function(Z,ae,ce,pe){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe))throw Wi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(Z,ae,ce,pe),this.stroke())},p.prototype.clearRect=function(Z,ae,ce,pe){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe))throw Wi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Z,ae,ce,pe))},p.prototype.save=function(Z){Z=typeof Z!="boolean"||Z;for(var ae=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(ae),Z){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},p.prototype.restore=function(Z){Z=typeof Z!="boolean"||Z;for(var ae=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(ae),Z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(Z){var ae,ce,pe,Le;if(Z.isCanvasGradient===!0&&(Z=Z.getColor()),!Z)return{r:0,g:0,b:0,a:0,style:Z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Z))ae=0,ce=0,pe=0,Le=0;else{var Pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Z);if(Pe!==null)ae=parseInt(Pe[1]),ce=parseInt(Pe[2]),pe=parseInt(Pe[3]),Le=1;else if((Pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Z))!==null)ae=parseInt(Pe[1]),ce=parseInt(Pe[2]),pe=parseInt(Pe[3]),Le=parseFloat(Pe[4]);else{if(Le=1,typeof Z=="string"&&Z.charAt(0)!=="#"){var Ue=new sE(Z);Z=Ue.ok?Ue.toHex():"#000000"}Z.length===4?(ae=Z.substring(1,2),ae+=ae,ce=Z.substring(2,3),ce+=ce,pe=Z.substring(3,4),pe+=pe):(ae=Z.substring(1,3),ce=Z.substring(3,5),pe=Z.substring(5,7)),ae=parseInt(ae,16),ce=parseInt(ce,16),pe=parseInt(pe,16)}}return{r:ae,g:ce,b:pe,a:Le,style:Z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(Z,ae,ce,pe){if(isNaN(ae)||isNaN(ce)||typeof Z!="string")throw Wi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!m.call(this)){var Le=ie(this.ctx.transform.rotation),Pe=this.ctx.transform.scaleX;W.call(this,{text:Z,x:ae,y:ce,scale:Pe,angle:Le,align:this.textAlign,maxWidth:pe})}},p.prototype.strokeText=function(Z,ae,ce,pe){if(isNaN(ae)||isNaN(ce)||typeof Z!="string")throw Wi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){pe=isNaN(pe)?void 0:pe;var Le=ie(this.ctx.transform.rotation),Pe=this.ctx.transform.scaleX;W.call(this,{text:Z,x:ae,y:ce,scale:Pe,renderingMode:"stroke",angle:Le,align:this.textAlign,maxWidth:pe})}},p.prototype.measureText=function(Z){if(typeof Z!="string")throw Wi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ae=this.pdf,ce=this.pdf.internal.scaleFactor,pe=ae.internal.getFontSize(),Le=ae.getStringUnitWidth(Z)*pe/ae.internal.scaleFactor,Pe=function(Ue){var Ne=(Ue=Ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ne}}),this};return new Pe({width:Le*=Math.round(96*ce/72*1e4)/1e4})},p.prototype.scale=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Wi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new l(Z,0,0,ae,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},p.prototype.rotate=function(Z){if(isNaN(Z))throw Wi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ae=new l(Math.cos(Z),Math.sin(Z),-Math.sin(Z),Math.cos(Z),0,0);this.ctx.transform=this.ctx.transform.multiply(ae)},p.prototype.translate=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Wi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new l(1,0,0,1,Z,ae);this.ctx.transform=this.ctx.transform.multiply(ce)},p.prototype.transform=function(Z,ae,ce,pe,Le,Pe){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(pe)||isNaN(Le)||isNaN(Pe))throw Wi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ue=new l(Z,ae,ce,pe,Le,Pe);this.ctx.transform=this.ctx.transform.multiply(Ue)},p.prototype.setTransform=function(Z,ae,ce,pe,Le,Pe){Z=isNaN(Z)?1:Z,ae=isNaN(ae)?0:ae,ce=isNaN(ce)?0:ce,pe=isNaN(pe)?1:pe,Le=isNaN(Le)?0:Le,Pe=isNaN(Pe)?0:Pe,this.ctx.transform=new l(Z,ae,ce,pe,Le,Pe)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(Z,ae,ce,pe,Le,Pe,Ue,Ne,nt){var pt=this.pdf.getImageProperties(Z),bt=1,le=1,oe=1,ue=1;pe!==void 0&&Ne!==void 0&&(oe=Ne/pe,ue=nt/Le,bt=pt.width/pe*Ne/pe,le=pt.height/Le*nt/Le),Pe===void 0&&(Pe=ae,Ue=ce,ae=0,ce=0),pe!==void 0&&Ne===void 0&&(Ne=pe,nt=Le),pe===void 0&&Ne===void 0&&(Ne=pt.width,nt=pt.height);for(var te,Se=this.ctx.transform.decompose(),Ve=ie(Se.rotate.shx),Xe=new l,at=(Xe=(Xe=(Xe=Xe.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale)).applyToRectangle(new a(Pe-ae*oe,Ue-ce*ue,pe*bt,Le*le)),ot=T.call(this,at),dt=[],zt=0;zt<ot.length;zt+=1)dt.indexOf(ot[zt])===-1&&dt.push(ot[zt]);if(B(dt),this.autoPaging)for(var Rt=dt[0],Zt=dt[dt.length-1],Qt=Rt;Qt<Zt+1;Qt++){this.pdf.setPage(Qt);var pn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Sn=Qt===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=Qt===1?0:Ze+(Qt-2)*it;if(this.ctx.clip_path.length!==0){var $t=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(te,this.posX+this.margin[3],-Je+Sn+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=$t}var Kt=JSON.parse(JSON.stringify(at));Kt=D([Kt],this.posX+this.margin[3],-Je+Sn+this.ctx.prevPageLastElemOffset)[0];var _n=(Qt>Rt||Qt<Zt)&&S.call(this);_n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,it,null).clip().discardPath()),this.pdf.addImage(Z,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,Ve),_n&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Z,"JPEG",at.x,at.y,at.w,at.h,null,null,Ve)};var T=function(Z,ae,ce){var pe=[];ae=ae||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Le=this.posY+this.ctx.prevPageLastElemOffset;switch(Z.type){default:case"mt":case"lt":pe.push(Math.floor((Z.y+Le)/ce)+1);break;case"arc":pe.push(Math.floor((Z.y+Le-Z.radius)/ce)+1),pe.push(Math.floor((Z.y+Le+Z.radius)/ce)+1);break;case"qct":var Pe=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x,Z.y);pe.push(Math.floor((Pe.y+Le)/ce)+1),pe.push(Math.floor((Pe.y+Pe.h+Le)/ce)+1);break;case"bct":var Ue=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y);pe.push(Math.floor((Ue.y+Le)/ce)+1),pe.push(Math.floor((Ue.y+Ue.h+Le)/ce)+1);break;case"rect":pe.push(Math.floor((Z.y+Le)/ce)+1),pe.push(Math.floor((Z.y+Z.h+Le)/ce)+1)}for(var Ne=0;Ne<pe.length;Ne+=1)for(;this.pdf.internal.getNumberOfPages()<pe[Ne];)O.call(this);return pe},O=function(){var Z=this.fillStyle,ae=this.strokeStyle,ce=this.font,pe=this.lineCap,Le=this.lineWidth,Pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=Z,this.strokeStyle=ae,this.font=ce,this.lineCap=pe,this.lineWidth=Le,this.lineJoin=Pe},D=function(Z,ae,ce){for(var pe=0;pe<Z.length;pe++)switch(Z[pe].type){case"bct":Z[pe].x2+=ae,Z[pe].y2+=ce;case"qct":Z[pe].x1+=ae,Z[pe].y1+=ce;case"mt":case"lt":case"arc":default:Z[pe].x+=ae,Z[pe].y+=ce}return Z},B=function(Z){return Z.sort(function(ae,ce){return ae-ce})},z=function(Z,ae){for(var ce,pe,Le=this.fillStyle,Pe=this.strokeStyle,Ue=this.lineCap,Ne=this.lineWidth,nt=Math.abs(Ne*this.ctx.transform.scaleX),pt=this.lineJoin,bt=JSON.parse(JSON.stringify(this.path)),le=JSON.parse(JSON.stringify(this.path)),oe=[],ue=0;ue<le.length;ue++)if(le[ue].x!==void 0)for(var te=T.call(this,le[ue]),Se=0;Se<te.length;Se+=1)oe.indexOf(te[Se])===-1&&oe.push(te[Se]);for(var Ve=0;Ve<oe.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<oe[Ve];)O.call(this);if(B(oe),this.autoPaging)for(var Xe=oe[0],at=oe[oe.length-1],ot=Xe;ot<at+1;ot++){this.pdf.setPage(ot),this.fillStyle=Le,this.strokeStyle=Pe,this.lineCap=Ue,this.lineWidth=nt,this.lineJoin=pt;var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zt=ot===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qt=ot===1?0:Rt+(ot-2)*Zt;if(this.ctx.clip_path.length!==0){var pn=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ce,this.posX+this.margin[3],-Qt+zt+this.ctx.prevPageLastElemOffset),H.call(this,Z,!0),this.path=pn}if(pe=JSON.parse(JSON.stringify(bt)),this.path=D(pe,this.posX+this.margin[3],-Qt+zt+this.ctx.prevPageLastElemOffset),ae===!1||ot===0){var Sn=(ot>Xe||ot<at)&&S.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Zt,null).clip().discardPath()),H.call(this,Z,ae),Sn&&this.pdf.restoreGraphicsState()}this.lineWidth=Ne}else this.lineWidth=nt,H.call(this,Z,ae),this.lineWidth=Ne;this.path=bt},H=function(Z,ae){if((Z!=="stroke"||ae||!C.call(this))&&(Z==="stroke"||ae||!m.call(this))){for(var ce,pe,Le=[],Pe=this.path,Ue=0;Ue<Pe.length;Ue++){var Ne=Pe[Ue];switch(Ne.type){case"begin":Le.push({begin:!0});break;case"close":Le.push({close:!0});break;case"mt":Le.push({start:Ne,deltas:[],abs:[]});break;case"lt":var nt=Le.length;if(Pe[Ue-1]&&!isNaN(Pe[Ue-1].x)&&(ce=[Ne.x-Pe[Ue-1].x,Ne.y-Pe[Ue-1].y],nt>0)){for(;nt>=0;nt--)if(Le[nt-1].close!==!0&&Le[nt-1].begin!==!0){Le[nt-1].deltas.push(ce),Le[nt-1].abs.push(Ne);break}}break;case"bct":ce=[Ne.x1-Pe[Ue-1].x,Ne.y1-Pe[Ue-1].y,Ne.x2-Pe[Ue-1].x,Ne.y2-Pe[Ue-1].y,Ne.x-Pe[Ue-1].x,Ne.y-Pe[Ue-1].y],Le[Le.length-1].deltas.push(ce);break;case"qct":var pt=Pe[Ue-1].x+2/3*(Ne.x1-Pe[Ue-1].x),bt=Pe[Ue-1].y+2/3*(Ne.y1-Pe[Ue-1].y),le=Ne.x+2/3*(Ne.x1-Ne.x),oe=Ne.y+2/3*(Ne.y1-Ne.y),ue=Ne.x,te=Ne.y;ce=[pt-Pe[Ue-1].x,bt-Pe[Ue-1].y,le-Pe[Ue-1].x,oe-Pe[Ue-1].y,ue-Pe[Ue-1].x,te-Pe[Ue-1].y],Le[Le.length-1].deltas.push(ce);break;case"arc":Le.push({deltas:[],abs:[],arc:!0}),Array.isArray(Le[Le.length-1].abs)&&Le[Le.length-1].abs.push(Ne)}}pe=ae?null:Z==="stroke"?"stroke":"fill";for(var Se=!1,Ve=0;Ve<Le.length;Ve++)if(Le[Ve].arc)for(var Xe=Le[Ve].abs,at=0;at<Xe.length;at++){var ot=Xe[at];ot.type==="arc"?V.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,ae,!Se):se.call(this,ot.x,ot.y),Se=!0}else if(Le[Ve].close===!0)this.pdf.internal.out("h"),Se=!1;else if(Le[Ve].begin!==!0){var dt=Le[Ve].start.x,zt=Le[Ve].start.y;X.call(this,Le[Ve].deltas,dt,zt),Se=!0}pe&&Y.call(this,pe),ae&&ge.call(this)}},J=function(Z){var ae=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=ae*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Z-ce;case"top":return Z+ae-ce;case"hanging":return Z+ae-2*ce;case"middle":return Z+ae/2-ce;case"ideographic":return Z;case"alphabetic":default:return Z}},Q=function(Z){return Z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var Z=function(){};return Z.colorStops=[],Z.addColorStop=function(ae,ce){this.colorStops.push([ae,ce])},Z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Z.isCanvasGradient=!0,Z},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(Z,ae,ce,pe,Le,Pe,Ue,Ne,nt){for(var pt=R.call(this,ce,pe,Le,Pe),bt=0;bt<pt.length;bt++){var le=pt[bt];bt===0&&(nt?$.call(this,le.x1+Z,le.y1+ae):se.call(this,le.x1+Z,le.y1+ae)),U.call(this,Z,ae,le.x2,le.y2,le.x3,le.y3,le.x4,le.y4)}Ne?ge.call(this):Y.call(this,Ue)},Y=function(Z){switch(Z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ge=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(Z,ae){this.pdf.internal.out(n(Z)+" "+r(ae)+" m")},W=function(Z){var ae;switch(Z.align){case"right":case"end":ae="right";break;case"center":ae="center";break;case"left":case"start":default:ae="left"}var ce=this.pdf.getTextDimensions(Z.text),pe=J.call(this,Z.y),Le=Q.call(this,pe)-ce.h,Pe=this.ctx.transform.applyToPoint(new o(Z.x,pe)),Ue=this.ctx.transform.decompose(),Ne=new l;Ne=(Ne=(Ne=Ne.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale);for(var nt,pt,bt,le=this.ctx.transform.applyToRectangle(new a(Z.x,pe,ce.w,ce.h)),oe=Ne.applyToRectangle(new a(Z.x,Le,ce.w,ce.h)),ue=T.call(this,oe),te=[],Se=0;Se<ue.length;Se+=1)te.indexOf(ue[Se])===-1&&te.push(ue[Se]);if(B(te),this.autoPaging)for(var Ve=te[0],Xe=te[te.length-1],at=Ve;at<Xe+1;at++){this.pdf.setPage(at);var ot=at===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[2],Rt=zt-this.margin[0],Zt=this.pdf.internal.pageSize.width-this.margin[1],Qt=Zt-this.margin[3],pn=at===1?0:dt+(at-2)*Rt;if(this.ctx.clip_path.length!==0){var Sn=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(nt,this.posX+this.margin[3],-1*pn+ot),H.call(this,"fill",!0),this.path=Sn}var Ze=D([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-pn+ot+this.ctx.prevPageLastElemOffset)[0];Z.scale>=.01&&(pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pt*Z.scale),bt=this.lineWidth,this.lineWidth=bt*Z.scale);var it=this.autoPaging!=="text";if(it||Ze.y+Ze.h<=zt){if(it||Ze.y>=ot&&Ze.x<=Zt){var Je=it?Z.text:this.pdf.splitTextToSize(Z.text,Z.maxWidth||Zt-Ze.x)[0],$t=D([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-pn+ot+this.ctx.prevPageLastElemOffset)[0],Kt=it&&(at>Ve||at<Xe)&&S.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,Rt,null).clip().discardPath()),this.pdf.text(Je,$t.x,$t.y,{angle:Z.angle,align:ae,renderingMode:Z.renderingMode}),Kt&&this.pdf.restoreGraphicsState()}}else Ze.y<zt&&(this.ctx.prevPageLastElemOffset+=zt-Ze.y);Z.scale>=.01&&(this.pdf.setFontSize(pt),this.lineWidth=bt)}else Z.scale>=.01&&(pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pt*Z.scale),bt=this.lineWidth,this.lineWidth=bt*Z.scale),this.pdf.text(Z.text,Pe.x+this.posX,Pe.y+this.posY,{angle:Z.angle,align:ae,renderingMode:Z.renderingMode,maxWidth:Z.maxWidth}),Z.scale>=.01&&(this.pdf.setFontSize(pt),this.lineWidth=bt)},se=function(Z,ae,ce,pe){ce=ce||0,pe=pe||0,this.pdf.internal.out(n(Z+ce)+" "+r(ae+pe)+" l")},X=function(Z,ae,ce){return this.pdf.lines(Z,ae,ce,null,null)},U=function(Z,ae,ce,pe,Le,Pe,Ue,Ne){this.pdf.internal.out([e(i(ce+Z)),e(s(pe+ae)),e(i(Le+Z)),e(s(Pe+ae)),e(i(Ue+Z)),e(s(Ne+ae)),"c"].join(" "))},R=function(Z,ae,ce,pe){for(var Le=2*Math.PI,Pe=Math.PI/2;ae>ce;)ae-=Le;var Ue=Math.abs(ce-ae);Ue<Le&&pe&&(Ue=Le-Ue);for(var Ne=[],nt=pe?-1:1,pt=ae;Ue>1e-5;){var bt=pt+nt*Math.min(Ue,Pe);Ne.push(ee.call(this,Z,pt,bt)),Ue-=Math.abs(bt-pt),pt=bt}return Ne},ee=function(Z,ae,ce){var pe=(ce-ae)/2,Le=Z*Math.cos(pe),Pe=Z*Math.sin(pe),Ue=Le,Ne=-Pe,nt=Ue*Ue+Ne*Ne,pt=nt+Ue*Le+Ne*Pe,bt=4/3*(Math.sqrt(2*nt*pt)-pt)/(Ue*Pe-Ne*Le),le=Ue-bt*Ne,oe=Ne+bt*Ue,ue=le,te=-oe,Se=pe+ae,Ve=Math.cos(Se),Xe=Math.sin(Se);return{x1:Z*Math.cos(ae),y1:Z*Math.sin(ae),x2:le*Ve-oe*Xe,y2:le*Xe+oe*Ve,x3:ue*Ve-te*Xe,y3:ue*Xe+te*Ve,x4:Z*Math.cos(ce),y4:Z*Math.sin(ce)}},ie=function(Z){return 180*Z/Math.PI},fe=function(Z,ae,ce,pe,Le,Pe){var Ue=Z+.5*(ce-Z),Ne=ae+.5*(pe-ae),nt=Le+.5*(ce-Le),pt=Pe+.5*(pe-Pe),bt=Math.min(Z,Le,Ue,nt),le=Math.max(Z,Le,Ue,nt),oe=Math.min(ae,Pe,Ne,pt),ue=Math.max(ae,Pe,Ne,pt);return new a(bt,oe,le-bt,ue-oe)},me=function(Z,ae,ce,pe,Le,Pe,Ue,Ne){var nt,pt,bt,le,oe,ue,te,Se,Ve,Xe,at,ot,dt,zt,Rt=ce-Z,Zt=pe-ae,Qt=Le-ce,pn=Pe-pe,Sn=Ue-Le,Ze=Ne-Pe;for(pt=0;pt<41;pt++)Ve=(te=(bt=Z+(nt=pt/40)*Rt)+nt*((oe=ce+nt*Qt)-bt))+nt*(oe+nt*(Le+nt*Sn-oe)-te),Xe=(Se=(le=ae+nt*Zt)+nt*((ue=pe+nt*pn)-le))+nt*(ue+nt*(Pe+nt*Ze-ue)-Se),pt==0?(at=Ve,ot=Xe,dt=Ve,zt=Xe):(at=Math.min(at,Ve),ot=Math.min(ot,Xe),dt=Math.max(dt,Ve),zt=Math.max(zt,Xe));return new a(Math.round(at),Math.round(ot),Math.round(dt-at),Math.round(zt-ot))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Z,ae,ce=(Z=this.ctx.lineDash,ae=this.ctx.lineDashOffset,JSON.stringify({lineDash:Z,lineDashOffset:ae}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(wr.API),function(t){var e=function(s){var o,a,l,c,f,p,y,m,C,S;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(f=((f=((f=((f=(f-(S=f%85))/85)-(C=f%85))/85)-(m=f%85))/85)-(y=f%85))/85)%85,a.push(p+33,y+33,m+33,C+33,S+33)):a.push(122);return function(T,O){for(var D=O;D>0;D--)T.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,f,p=String,y="length",m=255,C="charCodeAt",S="slice",T="replace";for(s[S](-2),s=s[S](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),l=[],c=0,f=(s+=o="uuuuu"[S](s[y]%5||5))[y];f>c;c+=5)a=52200625*(s[C](c)-33)+614125*(s[C](c+1)-33)+7225*(s[C](c+2)-33)+85*(s[C](c+3)-33)+(s[C](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(O,D){for(var B=D;B>0;B--)O.pop()}(l,o[y]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=z2(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(wr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,f){var p=new XMLHttpRequest,y=0,m=function(C){var S=C.length,T=[],O=String.fromCharCode;for(y=0;y<S;y+=1)T.push(O(255&C.charCodeAt(y)));return T.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?f(m(this.responseText)):f(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(wr.API),function(t){function e(){return(xr.html2canvas?Promise.resolve(xr.html2canvas):su(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(xr.DOMPurify?Promise.resolve(xr.DOMPurify):su(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ni(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,f){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(l(y,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var m=c[y],C=m.src.find(function(S){return S.format==="truetype"});C&&l.addFont(C.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||wr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,f){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,f).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(c,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,wr.getPageSize=function(o,a,l){if(Ni(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var m,C=0,S=0;if(y.hasOwnProperty(p))C=y[p][1]/f,S=y[p][0]/f;else try{C=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",S>C&&(m=S,S=C,C=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>S&&(m=S,S=C,C=m)}return{width:S,height:C,unit:a,k:f,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(G2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(wr.API),wr.API.addJS=function(t){return G4=t,this.internal.events.subscribe("postPutResources",function(){Qm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),W4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+G4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qm!==void 0&&W4!==void 0&&this.internal.out("/Names <</JavaScript "+Qm+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var p=n.internal.newObject();f.push(p);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(wr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var y,m=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,S={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){y=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),S={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:y,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}}(wr.API);var Md,e0,q4,Y4,Z4,B$=function(){var t,e,n;function r(s){var o,a,l,c,f,p,y,m,C,S,T,O,D,B;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),C=(function(){var z,H;for(H=[],z=0;z<4;++z)H.push(String.fromCharCode(this.data[this.pos++]));return H}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*f/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,O=0;0<=o?O<o:O>o;0<=o?++O:--O)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(D=0;0<=S?D<S:D>S;0<=S?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":y=(T=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,y)),this.text[m]=String.fromCharCode.apply(String,T.slice(y+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,y,m,C){var S,T,O,D,B,z,H,J,Q,V,Y,ge,$,W,se,X,U,R,ee,ie,fe,me=Math.ceil((c.width-p)/m),Oe=Math.ceil((c.height-y)/C),Z=c.width==me&&c.height==Oe;for(W=o*me,ge=Z?a:new Uint8Array(W*Oe),z=s.length,$=0,T=0;$<Oe&&l<z;){switch(s[l++]){case 0:for(D=U=0;U<W;D=U+=1)ge[T++]=s[l++];break;case 1:for(D=R=0;R<W;D=R+=1)S=s[l++],B=D<o?0:ge[T-o],ge[T++]=(S+B)%256;break;case 2:for(D=ee=0;ee<W;D=ee+=1)S=s[l++],O=(D-D%o)/o,se=$&&ge[($-1)*W+O*o+D%o],ge[T++]=(se+S)%256;break;case 3:for(D=ie=0;ie<W;D=ie+=1)S=s[l++],O=(D-D%o)/o,B=D<o?0:ge[T-o],se=$&&ge[($-1)*W+O*o+D%o],ge[T++]=(S+Math.floor((B+se)/2))%256;break;case 4:for(D=fe=0;fe<W;D=fe+=1)S=s[l++],O=(D-D%o)/o,B=D<o?0:ge[T-o],$===0?se=X=0:(se=ge[($-1)*W+O*o+D%o],X=O&&ge[($-1)*W+(O-1)*o+D%o]),H=B+se-X,J=Math.abs(H-B),V=Math.abs(H-se),Y=Math.abs(H-X),Q=J<=V&&J<=Y?B:V<=Y?se:X,ge[T++]=(S+Q)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!Z){var ae=((y+$*C)*c.width+p)*o,ce=$*W;for(D=0;D<me;D+=1){for(var pe=0;pe<o;pe+=1)a[ae++]=ge[ce++];ae+=(m-1)*o}}$++}}return s=p$(s),c.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,f,p,y,m;for(a=this.palette,f=this.transparency.indexed||[],c=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=p=0,y=a.length;p<y;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=f[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,f,p,y,m,C,S,T,O;if(l=this.colors,S=null,a=this.hasAlphaChannel,this.palette.length&&(S=(O=this._decodedPalette)!=null?O:this._decodedPalette=this.decodePalette(),l=4,a=!0),C=(c=s.data||s).length,p=S||o,f=y=0,l===1)for(;f<C;)m=S?4*o[f/4]:y,T=p[m++],c[f++]=T,c[f++]=T,c[f++]=T,c[f++]=a?p[m++]:255,y=m;else for(;f<C;)m=S?4*o[f/4]:y,c[f++]=p[m++],c[f++]=p[m++],c[f++]=p[m++],c[f++]=a?p[m++]:255,y=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(xr)==="[object Window]"){try{e=xr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,f,p,y,m;if(this.animation){for(m=[],a=f=0,p=(y=this.animation.frames).length;f<p;a=++f)o=y[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,f,p,y=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,f=p.numPlays,(o=function(){var m,C;if(m=a++%c,C=l[m],y.renderFrame(s,m),c>1&&a/c<f)return y.animation._timeout=setTimeout(o,C.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function R$(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,f=[],p=0,y=null,m=0,C=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];p=t[e++]|t[e++]<<8,y=t[e++],!(1&S)&&(y=null),m=S>>2&7,e++;break;case 254:for(;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,z=t[e++],H=z>>6&1,J=1<<(7&z)+1,Q=a,V=l,Y=!1;z>>7&&(Y=!0,Q=e,V=J,e+=3*J);var ge=e;for(e++;;){var $;if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}f.push({x:T,y:O,width:D,height:B,has_local_palette:Y,palette_offset:Q,palette_size:V,data_offset:ge,data_length:e-ge,transparent_index:y,interlaced:!!H,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(W){if(W<0||W>=f.length)throw new Error("Frame index out of range.");return f[W]},this.decodeAndBlitFrameBGRA=function(W,se){var X=this.frameInfo(W),U=X.width*X.height,R=new Uint8Array(U);K4(t,X.data_offset,R,U);var ee=X.palette_offset,ie=X.transparent_index;ie===null&&(ie=256);var fe=X.width,me=n-fe,Oe=fe,Z=4*(X.y*n+X.x),ae=4*((X.y+X.height)*n+X.x),ce=Z,pe=4*me;X.interlaced===!0&&(pe+=4*n*7);for(var Le=8,Pe=0,Ue=R.length;Pe<Ue;++Pe){var Ne=R[Pe];if(Oe===0&&(Oe=fe,(ce+=pe)>=ae&&(pe=4*me+4*n*(Le-1),ce=Z+(fe+me)*(Le<<1),Le>>=1)),Ne===ie)ce+=4;else{var nt=t[ee+3*Ne],pt=t[ee+3*Ne+1],bt=t[ee+3*Ne+2];se[ce++]=bt,se[ce++]=pt,se[ce++]=nt,se[ce++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(W,se){var X=this.frameInfo(W),U=X.width*X.height,R=new Uint8Array(U);K4(t,X.data_offset,R,U);var ee=X.palette_offset,ie=X.transparent_index;ie===null&&(ie=256);var fe=X.width,me=n-fe,Oe=fe,Z=4*(X.y*n+X.x),ae=4*((X.y+X.height)*n+X.x),ce=Z,pe=4*me;X.interlaced===!0&&(pe+=4*n*7);for(var Le=8,Pe=0,Ue=R.length;Pe<Ue;++Pe){var Ne=R[Pe];if(Oe===0&&(Oe=fe,(ce+=pe)>=ae&&(pe=4*me+4*n*(Le-1),ce=Z+(fe+me)*(Le<<1),Le>>=1)),Ne===ie)ce+=4;else{var nt=t[ee+3*Ne],pt=t[ee+3*Ne+1],bt=t[ee+3*Ne+2];se[ce++]=nt,se[ce++]=pt,se[ce++]=bt,se[ce++]=255}--Oe}}}function K4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,f=0,p=0,y=0,m=t[e++],C=new Int32Array(4096),S=null;;){for(;f<16&&m!==0;)p|=t[e++]<<f,f+=8,m===1?m=t[e++]:--m;if(f<l)break;var T=p&c;if(p>>=l,f-=l,T!==s){if(T===o)break;for(var O=T<a?T:S,D=0,B=O;B>s;)B=C[B]>>8,++D;var z=B;if(y+D+(O!==T?1:0)>r)return void Wi.log("Warning, gif stream longer than expected.");n[y++]=z;var H=y+=D;for(O!==T&&(n[y++]=z),B=O;D--;)B=C[B],n[--H]=255&B,B>>=8;S!==null&&a<4096&&(C[a++]=S<<8|z,a>=c+1&&l<12&&(++l,c=c<<1|1)),S=T}else a=o+1,c=(1<<(l=i+1))-1,S=null}return y!==r&&Wi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function M1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),m=new Array(64),C=new Array(64),S=[],T=0,O=7,D=new Array(64),B=new Array(64),z=new Array(64),H=new Array(256),J=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],ge=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(Z,ae){for(var ce=0,pe=0,Le=new Array,Pe=1;Pe<=16;Pe++){for(var Ue=1;Ue<=Z[Pe];Ue++)Le[ae[pe]]=[],Le[ae[pe]][0]=ce,Le[ae[pe]][1]=Pe,pe++,ce++;ce*=2}return Le}function ee(Z){for(var ae=Z[0],ce=Z[1]-1;ce>=0;)ae&1<<ce&&(T|=1<<O),ce--,--O<0&&(T==255?(ie(255),ie(0)):ie(T),O=7,T=0)}function ie(Z){S.push(Z)}function fe(Z){ie(Z>>8&255),ie(255&Z)}function me(Z,ae,ce,pe,Le){for(var Pe,Ue=Le[0],Ne=Le[240],nt=function(Xe,at){var ot,dt,zt,Rt,Zt,Qt,pn,Sn,Ze,it,Je=0;for(Ze=0;Ze<8;++Ze){ot=Xe[Je],dt=Xe[Je+1],zt=Xe[Je+2],Rt=Xe[Je+3],Zt=Xe[Je+4],Qt=Xe[Je+5],pn=Xe[Je+6];var $t=ot+(Sn=Xe[Je+7]),Kt=ot-Sn,_n=dt+pn,gn=dt-pn,bn=zt+Qt,Rn=zt-Qt,mn=Rt+Zt,nn=Rt-Zt,cn=$t+mn,Nn=$t-mn,er=_n+bn,ar=_n-bn;Xe[Je]=cn+er,Xe[Je+4]=cn-er;var zn=.707106781*(ar+Nn);Xe[Je+2]=Nn+zn,Xe[Je+6]=Nn-zn;var Lr=.382683433*((cn=nn+Rn)-(ar=gn+Kt)),ns=.5411961*cn+Lr,ki=1.306562965*ar+Lr,Js=.707106781*(er=Rn+gn),Nt=Kt+Js,He=Kt-Js;Xe[Je+5]=He+ns,Xe[Je+3]=He-ns,Xe[Je+1]=Nt+ki,Xe[Je+7]=Nt-ki,Je+=8}for(Je=0,Ze=0;Ze<8;++Ze){ot=Xe[Je],dt=Xe[Je+8],zt=Xe[Je+16],Rt=Xe[Je+24],Zt=Xe[Je+32],Qt=Xe[Je+40],pn=Xe[Je+48];var Vt=ot+(Sn=Xe[Je+56]),Bn=ot-Sn,Vn=dt+pn,Ln=dt-pn,Pt=zt+Qt,wt=zt-Qt,qt=Rt+Zt,wn=Rt-Zt,Tn=Vt+qt,Xn=Vt-qt,sr=Vn+Pt,kr=Vn-Pt;Xe[Je]=Tn+sr,Xe[Je+32]=Tn-sr;var Hn=.707106781*(kr+Xn);Xe[Je+16]=Xn+Hn,Xe[Je+48]=Xn-Hn;var _i=.382683433*((Tn=wn+wt)-(kr=Ln+Bn)),Ur=.5411961*Tn+_i,Xo=1.306562965*kr+_i,lr=.707106781*(sr=wt+Ln),ur=Bn+lr,Bi=Bn-lr;Xe[Je+40]=Bi+Ur,Xe[Je+24]=Bi-Ur,Xe[Je+8]=ur+Xo,Xe[Je+56]=ur-Xo,Je++}for(Ze=0;Ze<64;++Ze)it=Xe[Ze]*at[Ze],m[Ze]=it>0?it+.5|0:it-.5|0;return m}(Z,ae),pt=0;pt<64;++pt)C[Q[pt]]=nt[pt];var bt=C[0]-ce;ce=C[0],bt==0?ee(pe[0]):(ee(pe[y[Pe=32767+bt]]),ee(p[Pe]));for(var le=63;le>0&&C[le]==0;)le--;if(le==0)return ee(Ue),ce;for(var oe,ue=1;ue<=le;){for(var te=ue;C[ue]==0&&ue<=le;)++ue;var Se=ue-te;if(Se>=16){oe=Se>>4;for(var Ve=1;Ve<=oe;++Ve)ee(Ne);Se&=15}Pe=32767+C[ue],ee(Le[(Se<<4)+y[Pe]]),ee(p[Pe]),ue++}return le!=63&&ee(Ue),ce}function Oe(Z){Z=Math.min(Math.max(Z,1),100),s!=Z&&(function(ae){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var Le=o((ce[pe]*ae+50)/100);Le=Math.min(Math.max(Le,1),255),a[Q[pe]]=Le}for(var Pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ue=0;Ue<64;Ue++){var Ne=o((Pe[Ue]*ae+50)/100);Ne=Math.min(Math.max(Ne,1),255),l[Q[Ue]]=Ne}for(var nt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],pt=0,bt=0;bt<8;bt++)for(var le=0;le<8;le++)c[pt]=1/(a[Q[pt]]*nt[bt]*nt[le]*8),f[pt]=1/(l[Q[pt]]*nt[bt]*nt[le]*8),pt++}(Z<50?Math.floor(5e3/Z):Math.floor(200-2*Z)),s=Z)}this.encode=function(Z,ae){ae&&Oe(ae),S=new Array,T=0,O=7,fe(65496),fe(65504),fe(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),fe(1),fe(1),ie(0),ie(0),function(){fe(65499),fe(132),ie(0);for(var dt=0;dt<64;dt++)ie(a[dt]);ie(1);for(var zt=0;zt<64;zt++)ie(l[zt])}(),function(dt,zt){fe(65472),fe(17),ie(8),fe(zt),fe(dt),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(Z.width,Z.height),function(){fe(65476),fe(418),ie(0);for(var dt=0;dt<16;dt++)ie(V[dt+1]);for(var zt=0;zt<=11;zt++)ie(Y[zt]);ie(16);for(var Rt=0;Rt<16;Rt++)ie(ge[Rt+1]);for(var Zt=0;Zt<=161;Zt++)ie($[Zt]);ie(1);for(var Qt=0;Qt<16;Qt++)ie(W[Qt+1]);for(var pn=0;pn<=11;pn++)ie(se[pn]);ie(17);for(var Sn=0;Sn<16;Sn++)ie(X[Sn+1]);for(var Ze=0;Ze<=161;Ze++)ie(U[Ze])}(),fe(65498),fe(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var ce=0,pe=0,Le=0;T=0,O=7,this.encode.displayName="_encode_";for(var Pe,Ue,Ne,nt,pt,bt,le,oe,ue,te=Z.data,Se=Z.width,Ve=Z.height,Xe=4*Se,at=0;at<Ve;){for(Pe=0;Pe<Xe;){for(pt=Xe*at+Pe,le=-1,oe=0,ue=0;ue<64;ue++)bt=pt+(oe=ue>>3)*Xe+(le=4*(7&ue)),at+oe>=Ve&&(bt-=Xe*(at+1+oe-Ve)),Pe+le>=Xe&&(bt-=Pe+le-Xe+4),Ue=te[bt++],Ne=te[bt++],nt=te[bt++],D[ue]=(J[Ue]+J[Ne+256>>0]+J[nt+512>>0]>>16)-128,B[ue]=(J[Ue+768>>0]+J[Ne+1024>>0]+J[nt+1280>>0]>>16)-128,z[ue]=(J[Ue+1280>>0]+J[Ne+1536>>0]+J[nt+1792>>0]>>16)-128;ce=me(D,c,ce,e,r),pe=me(B,f,pe,n,i),Le=me(z,f,Le,n,i),Pe+=32}at+=8}if(O>=0){var ot=[];ot[1]=O+1,ot[0]=(1<<O+1)-1,ee(ot)}return fe(65497),new Uint8Array(S)},t=t||50,function(){for(var Z=String.fromCharCode,ae=0;ae<256;ae++)H[ae]=Z(ae)}(),e=R(V,Y),n=R(W,se),r=R(ge,$),i=R(X,U),function(){for(var Z=1,ae=2,ce=1;ce<=15;ce++){for(var pe=Z;pe<ae;pe++)y[32767+pe]=ce,p[32767+pe]=[],p[32767+pe][1]=ce,p[32767+pe][0]=pe;for(var Le=-(ae-1);Le<=-Z;Le++)y[32767+Le]=ce,p[32767+Le]=[],p[32767+Le][1]=ce,p[32767+Le][0]=ae-1+Le;Z<<=1,ae<<=1}}(),function(){for(var Z=0;Z<256;Z++)J[Z]=19595*Z,J[Z+256>>0]=38470*Z,J[Z+512>>0]=7471*Z+32768,J[Z+768>>0]=-11059*Z,J[Z+1024>>0]=-21709*Z,J[Z+1280>>0]=32768*Z+8421375,J[Z+1536>>0]=-27439*Z,J[Z+1792>>0]=-5329*Z}(),Oe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function X4(t){function e(V){if(!V)throw Error("assert :P")}function n(V,Y,ge){for(var $=0;4>$;$++)if(V[Y+$]!=ge.charCodeAt($))return!0;return!1}function r(V,Y,ge,$,W){for(var se=0;se<W;se++)V[Y+se]=ge[$+se]}function i(V,Y,ge,$){for(var W=0;W<$;W++)V[Y+W]=ge}function s(V){return new Int32Array(V)}function o(V,Y){for(var ge=[],$=0;$<V;$++)ge.push(new Y);return ge}function a(V,Y){var ge=[];return function $(W,se,X){for(var U=X[se],R=0;R<U&&(W.push(X.length>se+1?[]:new Y),!(X.length<se+1));R++)$(W[R],se+1,X)}(ge,0,V),ge}var l=function(){var V=this;function Y(w,M){for(var j=1<<M-1>>>0;w&j;)j>>>=1;return j?(w&j-1)+j:w}function ge(w,M,j,re,ye){e(!(re%j));do w[M+(re-=j)]=ye;while(0<re)}function $(w,M,j,re,ye){if(e(2328>=ye),512>=ye)var xe=s(512);else if((xe=s(ye))==null)return 0;return function(Ee,ke,Te,$e,ut,Ot){var Dt,_t,Wt=ke,Ut=1<<Te,ct=s(16),mt=s(16);for(e(ut!=0),e($e!=null),e(Ee!=null),e(0<Te),_t=0;_t<ut;++_t){if(15<$e[_t])return 0;++ct[$e[_t]]}if(ct[0]==ut)return 0;for(mt[1]=0,Dt=1;15>Dt;++Dt){if(ct[Dt]>1<<Dt)return 0;mt[Dt+1]=mt[Dt]+ct[Dt]}for(_t=0;_t<ut;++_t)Dt=$e[_t],0<$e[_t]&&(Ot[mt[Dt]++]=_t);if(mt[15]==1)return($e=new W).g=0,$e.value=Ot[0],ge(Ee,Wt,1,Ut,$e),Ut;var Jt,un=-1,en=Ut-1,Pn=0,xn=1,Gn=1,h=1<<Te;for(_t=0,Dt=1,ut=2;Dt<=Te;++Dt,ut<<=1){if(xn+=Gn<<=1,0>(Gn-=ct[Dt]))return 0;for(;0<ct[Dt];--ct[Dt])($e=new W).g=Dt,$e.value=Ot[_t++],ge(Ee,Wt+Pn,ut,h,$e),Pn=Y(Pn,Dt)}for(Dt=Te+1,ut=2;15>=Dt;++Dt,ut<<=1){if(xn+=Gn<<=1,0>(Gn-=ct[Dt]))return 0;for(;0<ct[Dt];--ct[Dt]){if($e=new W,(Pn&en)!=un){for(Wt+=h,Jt=1<<(un=Dt)-Te;15>un&&!(0>=(Jt-=ct[un]));)++un,Jt<<=1;Ut+=h=1<<(Jt=un-Te),Ee[ke+(un=Pn&en)].g=Jt+Te,Ee[ke+un].value=Wt-ke-un}$e.g=Dt-Te,$e.value=Ot[_t++],ge(Ee,Wt+(Pn>>Te),ut,h,$e),Pn=Y(Pn,Dt)}}return xn!=2*mt[15]-1?0:Ut}(w,M,j,re,ye,xe)}function W(){this.value=this.g=0}function se(){this.value=this.g=0}function X(){this.G=o(5,W),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Yi,se)}function U(w,M,j,re){e(w!=null),e(M!=null),e(2147483648>re),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=M,w.pa=j,w.Jd=M,w.Yc=j+re,w.Zc=4<=re?j+re-4+1:j,Pe(w)}function R(w,M){for(var j=0;0<M--;)j|=Ne(w,128)<<M;return j}function ee(w,M){var j=R(w,M);return Ue(w)?-j:j}function ie(w,M,j,re){var ye,xe=0;for(e(w!=null),e(M!=null),e(4294967288>re),w.Sb=re,w.Ra=0,w.u=0,w.h=0,4<re&&(re=4),ye=0;ye<re;++ye)xe+=M[j+ye]<<8*ye;w.Ra=xe,w.bb=re,w.oa=M,w.pa=j}function fe(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Qs-8>>>0,++w.bb,w.u-=8;ce(w)&&(w.h=1,w.u=0)}function me(w,M){if(e(0<=M),!w.h&&M<=bo){var j=ae(w)&ea[M];return w.u+=M,fe(w),j}return w.h=1,w.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ae(w){return w.Ra>>>(w.u&Qs-1)>>>0}function ce(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Qs}function pe(w,M){w.u=M,w.h=ce(w)}function Le(w){w.u>=_l&&(e(w.u>=_l),fe(w))}function Pe(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function Ue(w){return R(w,1)}function Ne(w,M){var j=w.Ca;0>w.b&&Pe(w);var re=w.b,ye=j*M>>>8,xe=(w.I>>>re>ye)+0;for(xe?(j-=ye,w.I-=ye+1<<re>>>0):j=ye+1,re=j,ye=0;256<=re;)ye+=8,re>>=8;return re=7^ye+Cs[re],w.b-=re,w.Ca=(j<<re)-1,xe}function nt(w,M,j){w[M+0]=j>>24&255,w[M+1]=j>>16&255,w[M+2]=j>>8&255,w[M+3]=j>>0&255}function pt(w,M){return w[M+0]<<0|w[M+1]<<8}function bt(w,M){return pt(w,M)|w[M+2]<<16}function le(w,M){return pt(w,M)|pt(w,M+2)<<16}function oe(w,M){var j=1<<M;return e(w!=null),e(0<M),w.X=s(j),w.X==null?0:(w.Mb=32-M,w.Xa=M,1)}function ue(w,M){e(w!=null),e(M!=null),e(w.Xa==M.Xa),r(M.X,0,w.X,0,1<<M.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Se(w,M,j,re){e(j!=null),e(re!=null);var ye=j[0],xe=re[0];return ye==0&&(ye=(w*xe+M/2)/M),xe==0&&(xe=(M*ye+w/2)/w),0>=ye||0>=xe?0:(j[0]=ye,re[0]=xe,1)}function Ve(w,M){return w+(1<<M)-1>>>M}function Xe(w,M){return((4278255360&w)+(4278255360&M)>>>0&4278255360)+((16711935&w)+(16711935&M)>>>0&16711935)>>>0}function at(w,M){V[M]=function(j,re,ye,xe,Ee,ke,Te){var $e;for($e=0;$e<Ee;++$e){var ut=V[w](ke[Te+$e-1],ye,xe+$e);ke[Te+$e]=Xe(j[re+$e],ut)}}}function ot(){this.ud=this.hd=this.jd=0}function dt(w,M){return((4278124286&(w^M))>>>1)+(w&M)>>>0}function zt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Rt(w,M){return zt(w+(w-M+.5>>1))}function Zt(w,M,j){return Math.abs(M-j)-Math.abs(w-j)}function Qt(w,M,j,re,ye,xe,Ee){for(re=xe[Ee-1],j=0;j<ye;++j)xe[Ee+j]=re=Xe(w[M+j],re)}function pn(w,M,j,re,ye){var xe;for(xe=0;xe<j;++xe){var Ee=w[M+xe],ke=Ee>>8&255,Te=16711935&(Te=(Te=16711935&Ee)+((ke<<16)+ke));re[ye+xe]=(4278255360&Ee)+Te>>>0}}function Sn(w,M){M.jd=w>>0&255,M.hd=w>>8&255,M.ud=w>>16&255}function Ze(w,M,j,re,ye,xe){var Ee;for(Ee=0;Ee<re;++Ee){var ke=M[j+Ee],Te=ke>>>8,$e=ke,ut=255&(ut=(ut=ke>>>16)+((w.jd<<24>>24)*(Te<<24>>24)>>>5));$e=255&($e=($e=$e+((w.hd<<24>>24)*(Te<<24>>24)>>>5))+((w.ud<<24>>24)*(ut<<24>>24)>>>5)),ye[xe+Ee]=(4278255360&ke)+(ut<<16)+$e}}function it(w,M,j,re,ye){V[M]=function(xe,Ee,ke,Te,$e,ut,Ot,Dt,_t){for(Te=Ot;Te<Dt;++Te)for(Ot=0;Ot<_t;++Ot)$e[ut++]=ye(ke[re(xe[Ee++])])},V[w]=function(xe,Ee,ke,Te,$e,ut,Ot){var Dt=8>>xe.b,_t=xe.Ea,Wt=xe.K[0],Ut=xe.w;if(8>Dt)for(xe=(1<<xe.b)-1,Ut=(1<<Dt)-1;Ee<ke;++Ee){var ct,mt=0;for(ct=0;ct<_t;++ct)ct&xe||(mt=re(Te[$e++])),ut[Ot++]=ye(Wt[mt&Ut]),mt>>=Dt}else V["VP8LMapColor"+j](Te,$e,Wt,Ut,ut,Ot,Ee,ke,_t)}}function Je(w,M,j,re,ye){for(j=M+j;M<j;){var xe=w[M++];re[ye++]=xe>>16&255,re[ye++]=xe>>8&255,re[ye++]=xe>>0&255}}function $t(w,M,j,re,ye){for(j=M+j;M<j;){var xe=w[M++];re[ye++]=xe>>16&255,re[ye++]=xe>>8&255,re[ye++]=xe>>0&255,re[ye++]=xe>>24&255}}function Kt(w,M,j,re,ye){for(j=M+j;M<j;){var xe=(Ee=w[M++])>>16&240|Ee>>12&15,Ee=Ee>>0&240|Ee>>28&15;re[ye++]=xe,re[ye++]=Ee}}function _n(w,M,j,re,ye){for(j=M+j;M<j;){var xe=(Ee=w[M++])>>16&248|Ee>>13&7,Ee=Ee>>5&224|Ee>>3&31;re[ye++]=xe,re[ye++]=Ee}}function gn(w,M,j,re,ye){for(j=M+j;M<j;){var xe=w[M++];re[ye++]=xe>>0&255,re[ye++]=xe>>8&255,re[ye++]=xe>>16&255}}function bn(w,M,j,re,ye,xe){if(xe==0)for(j=M+j;M<j;)nt(re,((xe=w[M++])[0]>>24|xe[1]>>8&65280|xe[2]<<8&16711680|xe[3]<<24)>>>0),ye+=32;else r(re,ye,w,M,j)}function Rn(w,M){V[M][0]=V[w+"0"],V[M][1]=V[w+"1"],V[M][2]=V[w+"2"],V[M][3]=V[w+"3"],V[M][4]=V[w+"4"],V[M][5]=V[w+"5"],V[M][6]=V[w+"6"],V[M][7]=V[w+"7"],V[M][8]=V[w+"8"],V[M][9]=V[w+"9"],V[M][10]=V[w+"10"],V[M][11]=V[w+"11"],V[M][12]=V[w+"12"],V[M][13]=V[w+"13"],V[M][14]=V[w+"0"],V[M][15]=V[w+"0"]}function mn(w){return w==fs||w==ds||w==Vo||w==u}function nn(){this.eb=[],this.size=this.A=this.fb=0}function cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new nn,this.f.kb=new cn,this.sd=null}function er(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function zn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Lr(w,M){var j=w.T,re=M.ba.f.RGBA,ye=re.eb,xe=re.fb+w.ka*re.A,Ee=As[M.ba.S],ke=w.y,Te=w.O,$e=w.f,ut=w.N,Ot=w.ea,Dt=w.W,_t=M.cc,Wt=M.dc,Ut=M.Mc,ct=M.Nc,mt=w.ka,Jt=w.ka+w.T,un=w.U,en=un+1>>1;for(mt==0?Ee(ke,Te,null,null,$e,ut,Ot,Dt,$e,ut,Ot,Dt,ye,xe,null,null,un):(Ee(M.ec,M.fc,ke,Te,_t,Wt,Ut,ct,$e,ut,Ot,Dt,ye,xe-re.A,ye,xe,un),++j);mt+2<Jt;mt+=2)_t=$e,Wt=ut,Ut=Ot,ct=Dt,ut+=w.Rc,Dt+=w.Rc,xe+=2*re.A,Ee(ke,(Te+=2*w.fa)-w.fa,ke,Te,_t,Wt,Ut,ct,$e,ut,Ot,Dt,ye,xe-re.A,ye,xe,un);return Te+=w.fa,w.j+Jt<w.o?(r(M.ec,M.fc,ke,Te,un),r(M.cc,M.dc,$e,ut,en),r(M.Mc,M.Nc,Ot,Dt,en),j--):1&Jt||Ee(ke,Te,null,null,$e,ut,Ot,Dt,$e,ut,Ot,Dt,ye,xe+re.A,null,null,un),j}function ns(w,M,j){var re=w.F,ye=[w.J];if(re!=null){var xe=w.U,Ee=M.ba.S,ke=Ee==$o||Ee==Vo;M=M.ba.f.RGBA;var Te=[0],$e=w.ka;Te[0]=w.T,w.Kb&&($e==0?--Te[0]:(--$e,ye[0]-=w.width),w.j+w.ka+w.T==w.o&&(Te[0]=w.o-w.j-$e));var ut=M.eb;$e=M.fb+$e*M.A,w=li(re,ye[0],w.width,xe,Te,ut,$e+(ke?0:3),M.A),e(j==Te),w&&mn(Ee)&&hs(ut,$e,ke,xe,Te,M.A)}return 0}function ki(w){var M=w.ma,j=M.ba.S,re=11>j,ye=j==ir||j==La||j==$o||j==Us||j==12||mn(j);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!zu(M.Oa,w,ye?11:12))return 0;if(ye&&mn(j)&&an(),w.da)alert("todo:use_scaling");else{if(re){if(M.Ib=zn,w.Kb){if(j=w.U+1>>1,M.memory=s(w.U+2*j),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+w.U,M.Mc=M.cc,M.Nc=M.dc+j,M.Ib=Lr,an()}}else alert("todo:EmitYUV");ye&&(M.Jb=ns,re&&xt())}if(re&&!bc){for(w=0;256>w;++w)Ph[w]=89858*(w-128)+Xa>>Eh,kh[w]=-22014*(w-128)+Xa,_p[w]=-45773*(w-128),Xl[w]=113618*(w-128)+Xa>>Eh;for(w=Yc;w<gf;++w)M=76283*(w-16)+Xa>>Eh,Mh[w-Yc]=Er(M,255),ud[w-Yc]=Er(M+8>>4,15);bc=1}return 1}function Js(w){var M=w.ma,j=w.U,re=w.T;return e(!(1&w.ka)),0>=j||0>=re?0:(j=M.Ib(w,M),M.Jb!=null&&M.Jb(w,M,j),M.Dc+=j,1)}function Nt(w){w.ma.memory=null}function He(w,M,j,re){return me(w,8)!=47?0:(M[0]=me(w,14)+1,j[0]=me(w,14)+1,re[0]=me(w,1),me(w,3)!=0?0:!w.h)}function Vt(w,M){if(4>w)return w+1;var j=w-2>>1;return(2+(1&w)<<j)+me(M,j)+1}function Bn(w,M){return 120<M?M-120:1<=(j=((j=Qe[M-1])>>4)*w+(8-(15&j)))?j:1;var j}function Vn(w,M,j){var re=ae(j),ye=w[M+=255&re].g-8;return 0<ye&&(pe(j,j.u+8),re=ae(j),M+=w[M].value,M+=re&(1<<ye)-1),pe(j,j.u+w[M].g),w[M].value}function Ln(w,M,j){return j.g+=w.g,j.value+=w.value<<M>>>0,e(8>=j.g),w.g}function Pt(w,M,j){var re=w.xc;return e((M=re==0?0:w.vc[w.md*(j>>re)+(M>>re)])<w.Wb),w.Ya[M]}function wt(w,M,j,re){var ye=w.ab,xe=w.c*M,Ee=w.C;M=Ee+M;var ke=j,Te=re;for(re=w.Ta,j=w.Ua;0<ye--;){var $e=w.gc[ye],ut=Ee,Ot=M,Dt=ke,_t=Te,Wt=(Te=re,ke=j,$e.Ea);switch(e(ut<Ot),e(Ot<=$e.nc),$e.hc){case 2:yc(Dt,_t,(Ot-ut)*Wt,Te,ke);break;case 0:var Ut=ut,ct=Ot,mt=Te,Jt=ke,un=(h=$e).Ea;Ut==0&&(Fs(Dt,_t,null,null,1,mt,Jt),Qt(Dt,_t+1,0,0,un-1,mt,Jt+1),_t+=un,Jt+=un,++Ut);for(var en=1<<h.b,Pn=en-1,xn=Ve(un,h.b),Gn=h.K,h=h.w+(Ut>>h.b)*xn;Ut<ct;){var g=Gn,_=h,x=1;for(js(Dt,_t,mt,Jt-un,1,mt,Jt);x<un;){var k=(x&~Pn)+en;k>un&&(k=un),(0,ba[g[_++]>>8&15])(Dt,_t+ +x,mt,Jt+x-un,k-x,mt,Jt+x),x=k}_t+=un,Jt+=un,++Ut&Pn||(h+=xn)}Ot!=$e.nc&&r(Te,ke-Wt,Te,ke+(Ot-ut-1)*Wt,Wt);break;case 1:for(Wt=Dt,ct=_t,un=(Dt=$e.Ea)-(Jt=Dt&~(mt=(_t=1<<$e.b)-1)),Ut=Ve(Dt,$e.b),en=$e.K,$e=$e.w+(ut>>$e.b)*Ut;ut<Ot;){for(Pn=en,xn=$e,Gn=new ot,h=ct+Jt,g=ct+Dt;ct<h;)Sn(Pn[xn++],Gn),_a(Gn,Wt,ct,_t,Te,ke),ct+=_t,ke+=_t;ct<g&&(Sn(Pn[xn++],Gn),_a(Gn,Wt,ct,un,Te,ke),ct+=un,ke+=un),++ut&mt||($e+=Ut)}break;case 3:if(Dt==Te&&_t==ke&&0<$e.b){for(ct=Te,Dt=Wt=ke+(Ot-ut)*Wt-(Jt=(Ot-ut)*Ve($e.Ea,$e.b)),_t=Te,mt=ke,Ut=[],Jt=(un=Jt)-1;0<=Jt;--Jt)Ut[Jt]=_t[mt+Jt];for(Jt=un-1;0<=Jt;--Jt)ct[Dt+Jt]=Ut[Jt];is($e,ut,Ot,Te,Wt,Te,ke)}else is($e,ut,Ot,Dt,_t,Te,ke)}ke=re,Te=j}Te!=j&&r(re,j,ke,Te,xe)}function qt(w,M){var j=w.V,re=w.Ba+w.c*w.C,ye=M-w.C;if(e(M<=w.l.o),e(16>=ye),0<ye){var xe=w.l,Ee=w.Ta,ke=w.Ua,Te=xe.width;if(wt(w,ye,j,re),ye=ke=[ke],e((j=w.C)<(re=M)),e(xe.v<xe.va),re>xe.o&&(re=xe.o),j<xe.j){var $e=xe.j-j;j=xe.j,ye[0]+=$e*Te}if(j>=re?j=0:(ye[0]+=4*xe.v,xe.ka=j-xe.j,xe.U=xe.va-xe.v,xe.T=re-j,j=1),j){if(ke=ke[0],11>(j=w.ca).S){var ut=j.f.RGBA,Ot=(re=j.S,ye=xe.U,xe=xe.T,$e=ut.eb,ut.A),Dt=xe;for(ut=ut.fb+w.Ma*ut.A;0<Dt--;){var _t=Ee,Wt=ke,Ut=ye,ct=$e,mt=ut;switch(re){case to:Ps(_t,Wt,Ut,ct,mt);break;case ir:cs(_t,Wt,Ut,ct,mt);break;case fs:cs(_t,Wt,Ut,ct,mt),hs(ct,mt,0,Ut,1,0);break;case xa:ks(_t,Wt,Ut,ct,mt);break;case La:bn(_t,Wt,Ut,ct,mt,1);break;case ds:bn(_t,Wt,Ut,ct,mt,1),hs(ct,mt,0,Ut,1,0);break;case $o:bn(_t,Wt,Ut,ct,mt,0);break;case Vo:bn(_t,Wt,Ut,ct,mt,0),hs(ct,mt,1,Ut,1,0);break;case Us:ta(_t,Wt,Ut,ct,mt);break;case u:ta(_t,Wt,Ut,ct,mt),ii(ct,mt,Ut,1,0);break;case Gc:_o(_t,Wt,Ut,ct,mt);break;default:e(0)}ke+=Te,ut+=Ot}w.Ma+=xe}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=j.height)}}w.C=M,e(w.C<=w.i)}function wn(w){var M;if(0<w.ua)return 0;for(M=0;M<w.Wb;++M){var j=w.Ya[M].G,re=w.Ya[M].H;if(0<j[1][re[1]+0].g||0<j[2][re[2]+0].g||0<j[3][re[3]+0].g)return 0}return 1}function Tn(w,M,j,re,ye,xe){if(w.Z!=0){var Ee=w.qd,ke=w.rd;for(e(Xr[w.Z]!=null);M<j;++M)Xr[w.Z](Ee,ke,re,ye,re,ye,xe),Ee=re,ke=ye,ye+=xe;w.qd=Ee,w.rd=ke}}function Xn(w,M){var j=w.l.ma,re=j.Z==0||j.Z==1?w.l.j:w.C;if(re=w.C<re?re:w.C,e(M<=w.l.o),M>re){var ye=w.l.width,xe=j.ca,Ee=j.tb+ye*re,ke=w.V,Te=w.Ba+w.c*re,$e=w.gc;e(w.ab==1),e($e[0].hc==3),Ss($e[0],re,M,ke,Te,xe,Ee),Tn(j,re,M,xe,Ee,ye)}w.C=w.Ma=M}function sr(w,M,j,re,ye,xe,Ee){var ke=w.$/re,Te=w.$%re,$e=w.m,ut=w.s,Ot=j+w.$,Dt=Ot;ye=j+re*ye;var _t=j+re*xe,Wt=280+ut.ua,Ut=w.Pb?ke:16777216,ct=0<ut.ua?ut.Wa:null,mt=ut.wc,Jt=Ot<_t?Pt(ut,Te,ke):null;e(w.C<xe),e(_t<=ye);var un=!1;e:for(;;){for(;un||Ot<_t;){var en=0;if(ke>=Ut){var Pn=Ot-j;e((Ut=w).Pb),Ut.wd=Ut.m,Ut.xd=Pn,0<Ut.s.ua&&ue(Ut.s.Wa,Ut.s.vb),Ut=ke+Ft}if(Te&mt||(Jt=Pt(ut,Te,ke)),e(Jt!=null),Jt.Qb&&(M[Ot]=Jt.qb,un=!0),!un)if(Le($e),Jt.jc){en=$e,Pn=M;var xn=Ot,Gn=Jt.pd[ae(en)&Yi-1];e(Jt.jc),256>Gn.g?(pe(en,en.u+Gn.g),Pn[xn]=Gn.value,en=0):(pe(en,en.u+Gn.g-256),e(256<=Gn.value),en=Gn.value),en==0&&(un=!0)}else en=Vn(Jt.G[0],Jt.H[0],$e);if($e.h)break;if(un||256>en){if(!un)if(Jt.nd)M[Ot]=(Jt.qb|en<<8)>>>0;else{if(Le($e),un=Vn(Jt.G[1],Jt.H[1],$e),Le($e),Pn=Vn(Jt.G[2],Jt.H[2],$e),xn=Vn(Jt.G[3],Jt.H[3],$e),$e.h)break;M[Ot]=(xn<<24|un<<16|en<<8|Pn)>>>0}if(un=!1,++Ot,++Te>=re&&(Te=0,++ke,Ee!=null&&ke<=xe&&!(ke%16)&&Ee(w,ke),ct!=null))for(;Dt<Ot;)en=M[Dt++],ct.X[(506832829*en&4294967295)>>>ct.Mb]=en}else if(280>en){if(en=Vt(en-256,$e),Pn=Vn(Jt.G[4],Jt.H[4],$e),Le($e),Pn=Bn(re,Pn=Vt(Pn,$e)),$e.h)break;if(Ot-j<Pn||ye-Ot<en)break e;for(xn=0;xn<en;++xn)M[Ot+xn]=M[Ot+xn-Pn];for(Ot+=en,Te+=en;Te>=re;)Te-=re,++ke,Ee!=null&&ke<=xe&&!(ke%16)&&Ee(w,ke);if(e(Ot<=ye),Te&mt&&(Jt=Pt(ut,Te,ke)),ct!=null)for(;Dt<Ot;)en=M[Dt++],ct.X[(506832829*en&4294967295)>>>ct.Mb]=en}else{if(!(en<Wt))break e;for(un=en-280,e(ct!=null);Dt<Ot;)en=M[Dt++],ct.X[(506832829*en&4294967295)>>>ct.Mb]=en;en=Ot,e(!(un>>>(Pn=ct).Xa)),M[en]=Pn.X[un],un=!0}un||e($e.h==ce($e))}if(w.Pb&&$e.h&&Ot<ye)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&ue(w.s.vb,w.s.Wa);else{if($e.h)break e;Ee!=null&&Ee(w,ke>xe?xe:ke),w.a=0,w.$=Ot-j}return 1}return w.a=3,0}function kr(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var M=w.Wa;M!=null&&(M.X=null),w.vb=null,e(w!=null)}function Hn(){var w=new vl;return w==null?null:(w.a=0,w.xb=_u,Rn("Predictor","VP8LPredictors"),Rn("Predictor","VP8LPredictors_C"),Rn("PredictorAdd","VP8LPredictorsAdd"),Rn("PredictorAdd","VP8LPredictorsAdd_C"),yc=pn,_a=Ze,Ps=Je,cs=$t,ta=Kt,_o=_n,ks=gn,V.VP8LMapColor32b=ya,V.VP8LMapColor8b=Es,w)}function _i(w,M,j,re,ye){var xe=1,Ee=[w],ke=[M],Te=re.m,$e=re.s,ut=null,Ot=0;e:for(;;){if(j)for(;xe&&me(Te,1);){var Dt=Ee,_t=ke,Wt=re,Ut=1,ct=Wt.m,mt=Wt.gc[Wt.ab],Jt=me(ct,2);if(Wt.Oc&1<<Jt)xe=0;else{switch(Wt.Oc|=1<<Jt,mt.hc=Jt,mt.Ea=Dt[0],mt.nc=_t[0],mt.K=[null],++Wt.ab,e(4>=Wt.ab),Jt){case 0:case 1:mt.b=me(ct,3)+2,Ut=_i(Ve(mt.Ea,mt.b),Ve(mt.nc,mt.b),0,Wt,mt.K),mt.K=mt.K[0];break;case 3:var un,en=me(ct,8)+1,Pn=16<en?0:4<en?1:2<en?2:3;if(Dt[0]=Ve(mt.Ea,Pn),mt.b=Pn,un=Ut=_i(en,1,0,Wt,mt.K)){var xn,Gn=en,h=mt,g=1<<(8>>h.b),_=s(g);if(_==null)un=0;else{var x=h.K[0],k=h.w;for(_[0]=h.K[0][0],xn=1;xn<1*Gn;++xn)_[xn]=Xe(x[k+xn],_[xn-1]);for(;xn<4*g;++xn)_[xn]=0;h.K[0]=null,h.K[0]=_,un=1}}Ut=un;break;case 2:break;default:e(0)}xe=Ut}}if(Ee=Ee[0],ke=ke[0],xe&&me(Te,1)&&!(xe=1<=(Ot=me(Te,4))&&11>=Ot)){re.a=3;break e}var N;if(N=xe)t:{var G,K,he,_e=re,qe=Ee,ze=ke,gt=Ot,At=j,Yt=_e.m,fn=_e.s,yn=[null],tr=1,Ge=0,Ye=Et[gt];n:for(;;){if(At&&me(Yt,1)){var lt=me(Yt,3)+2,It=Ve(qe,lt),yt=Ve(ze,lt),Tt=It*yt;if(!_i(It,yt,0,_e,yn))break n;for(yn=yn[0],fn.xc=lt,G=0;G<Tt;++G){var de=yn[G]>>8&65535;yn[G]=de,de>=tr&&(tr=de+1)}}if(Yt.h)break n;for(K=0;5>K;++K){var Ce=F[K];!K&&0<gt&&(Ce+=1<<gt),Ge<Ce&&(Ge=Ce)}var Ie=o(tr*Ye,W),De=tr,Re=o(De,X);if(Re==null)var je=null;else e(65536>=De),je=Re;var et=s(Ge);if(je==null||et==null||Ie==null){_e.a=1;break n}var rt=Ie;for(G=he=0;G<tr;++G){var ht=je[G],Lt=ht.G,Ct=ht.H,tn=0,Dn=1,Fn=0;for(K=0;5>K;++K){Ce=F[K],Lt[K]=rt,Ct[K]=he,!K&&0<gt&&(Ce+=1<<gt);i:{var qn,Jr=Ce,ui=_e,Nr=et,mi=rt,io=he,Vu=0,la=ui.m,mf=me(la,1);if(i(Nr,0,0,Jr),mf){var Ja=me(la,1)+1,_c=me(la,1),ua=me(la,_c==0?1:8);Nr[ua]=1,Ja==2&&(Nr[ua=me(la,8)]=1);var Ts=1}else{var Vi=s(19),pd=me(la,4)+4;if(19<pd){ui.a=3;var vf=0;break i}for(qn=0;qn<pd;++qn)Vi[we[qn]]=me(la,3);var yf=void 0,bf=void 0,gd=ui,Vr=Vi,md=Jr,vm=Nr,Zc=0,Hu=gd.m,ym=8,bm=o(128,W);r:for(;$(bm,0,7,Vr,19);){if(me(Hu,1)){var wl=2+2*me(Hu,3);if((yf=2+me(Hu,wl))>md)break r}else yf=md;for(bf=0;bf<md&&yf--;){Le(Hu);var _m=bm[0+(127&ae(Hu))];pe(Hu,Hu.u+_m.g);var Wu=_m.value;if(16>Wu)vm[bf++]=Wu,Wu!=0&&(ym=Wu);else{var wp=Wu==16,xp=Wu-16,wm=E[xp],Sa=me(Hu,v[xp])+wm;if(bf+Sa>md)break r;for(var wc=wp?ym:0;0<Sa--;)vm[bf++]=wc}}Zc=1;break r}Zc||(gd.a=3),Ts=Zc}(Ts=Ts&&!la.h)&&(Vu=$(mi,io,8,Nr,Jr)),Ts&&Vu!=0?vf=Vu:(ui.a=3,vf=0)}if(vf==0)break n;if(Dn&&ne[K]==1&&(Dn=rt[he].g==0),tn+=rt[he].g,he+=vf,3>=K){var Kc,vd=et[0];for(Kc=1;Kc<Ce;++Kc)et[Kc]>vd&&(vd=et[Kc]);Fn+=vd}}if(ht.nd=Dn,ht.Qb=0,Dn&&(ht.qb=(Lt[3][Ct[3]+0].value<<24|Lt[1][Ct[1]+0].value<<16|Lt[2][Ct[2]+0].value)>>>0,tn==0&&256>Lt[0][Ct[0]+0].value&&(ht.Qb=1,ht.qb+=Lt[0][Ct[0]+0].value<<8)),ht.jc=!ht.Qb&&6>Fn,ht.jc){var Xc,wu=ht;for(Xc=0;Xc<Yi;++Xc){var xu=Xc,Gu=wu.pd[xu],Ah=wu.G[0][wu.H[0]+xu];256<=Ah.value?(Gu.g=Ah.g+256,Gu.value=Ah.value):(Gu.g=0,Gu.value=0,xu>>=Ln(Ah,8,Gu),xu>>=Ln(wu.G[1][wu.H[1]+xu],16,Gu),xu>>=Ln(wu.G[2][wu.H[2]+xu],0,Gu),Ln(wu.G[3][wu.H[3]+xu],24,Gu))}}}fn.vc=yn,fn.Wb=tr,fn.Ya=je,fn.yc=Ie,N=1;break t}N=0}if(!(xe=N)){re.a=3;break e}if(0<Ot){if($e.ua=1<<Ot,!oe($e.Wa,Ot)){re.a=1,xe=0;break e}}else $e.ua=0;var _f=re,qu=Ee,xy=ke,Lu=_f.s,yd=Lu.xc;if(_f.c=qu,_f.i=xy,Lu.md=Ve(qu,yd),Lu.wc=yd==0?-1:(1<<yd)-1,j){re.xb=pf;break e}if((ut=s(Ee*ke))==null){re.a=1,xe=0;break e}xe=(xe=sr(re,ut,0,Ee,ke,ke,null))&&!Te.h;break e}return xe?(ye!=null?ye[0]=ut:(e(ut==null),e(j)),re.$=0,j||kr($e)):kr($e),xe}function Ur(w,M){var j=w.c*w.i,re=j+M+16*M;return e(w.c<=M),w.V=s(re),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+j+M,1)}function Xo(w,M){var j=w.C,re=M-j,ye=w.V,xe=w.Ba+w.c*j;for(e(M<=w.l.o);0<re;){var Ee=16<re?16:re,ke=w.l.ma,Te=w.l.width,$e=Te*Ee,ut=ke.ca,Ot=ke.tb+Te*j,Dt=w.Ta,_t=w.Ua;wt(w,Ee,ye,xe),$i(Dt,_t,ut,Ot,$e),Tn(ke,j,j+Ee,ut,Ot,Te),re-=Ee,ye+=Ee*w.c,j+=Ee}e(j==M),w.C=w.Ma=M}function lr(){this.ub=this.yd=this.td=this.Rb=0}function ur(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Bi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function So(){this.Yb=function(){var w=[];return function M(j,re,ye){for(var xe=ye[re],Ee=0;Ee<xe&&(j.push(ye.length>re+1?[]:0),!(ye.length<re+1));Ee++)M(j[Ee],re+1,ye)}(w,0,[3,11]),w}()}function fu(){this.jb=s(3),this.Wc=a([4,8],So),this.Xc=a([4,17],So)}function Wc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function du(){this.ld=this.La=this.dd=this.tc=0}function fc(){this.Na=this.la=0}function dc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function cl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hl(){this.uc=this.M=this.Nb=0,this.wa=Array(new du),this.Y=0,this.ya=Array(new cl),this.aa=0,this.l=new Eo}function Nu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function pc(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new lr,this.Kc=new ur,this.ed=new Wc,this.Qa=new Bi,this.Ic=this.$c=this.Aa=0,this.D=new hl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Oe),this.ia=0,this.pb=o(4,dc),this.Pa=new fu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nu),this.Hd=0,this.rb=Array(new fc),this.sb=0,this.wa=Array(new du),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new cl),this.L=this.aa=0,this.gd=a([4,2],du),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Eo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wr(){var w=new pc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Wn||(Wn=Io)),w}function fr(w,M,j){return w.a==0&&(w.a=M,w.sc=j,w.cb=0),0}function $a(w,M,j){return 3<=j&&w[M+0]==157&&w[M+1]==1&&w[M+2]==42}function da(w,M){if(w==null)return 0;if(w.a=0,w.sc="OK",M==null)return fr(w,2,"null VP8Io passed to VP8GetHeaders()");var j=M.data,re=M.w,ye=M.ha;if(4>ye)return fr(w,7,"Truncated header.");var xe=j[re+0]|j[re+1]<<8|j[re+2]<<16,Ee=w.Od;if(Ee.Rb=!(1&xe),Ee.td=xe>>1&7,Ee.yd=xe>>4&1,Ee.ub=xe>>5,3<Ee.td)return fr(w,3,"Incorrect keyframe parameters.");if(!Ee.yd)return fr(w,4,"Frame not displayable.");re+=3,ye-=3;var ke=w.Kc;if(Ee.Rb){if(7>ye)return fr(w,7,"cannot parse picture header");if(!$a(j,re,ye))return fr(w,3,"Bad code word");ke.c=16383&(j[re+4]<<8|j[re+3]),ke.Td=j[re+4]>>6,ke.i=16383&(j[re+6]<<8|j[re+5]),ke.Ud=j[re+6]>>6,re+=7,ye-=7,w.za=ke.c+15>>4,w.Ub=ke.i+15>>4,M.width=ke.c,M.height=ke.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((xe=w.Pa).jb,0,255,xe.jb.length),e((xe=w.Qa)!=null),xe.Cb=0,xe.Bb=0,xe.Fb=1,i(xe.Zb,0,0,xe.Zb.length),i(xe.Lb,0,0,xe.Lb)}if(Ee.ub>ye)return fr(w,7,"bad partition length");U(xe=w.m,j,re,Ee.ub),re+=Ee.ub,ye-=Ee.ub,Ee.Rb&&(ke.Ld=Ue(xe),ke.Kd=Ue(xe)),ke=w.Qa;var Te,$e=w.Pa;if(e(xe!=null),e(ke!=null),ke.Cb=Ue(xe),ke.Cb){if(ke.Bb=Ue(xe),Ue(xe)){for(ke.Fb=Ue(xe),Te=0;4>Te;++Te)ke.Zb[Te]=Ue(xe)?ee(xe,7):0;for(Te=0;4>Te;++Te)ke.Lb[Te]=Ue(xe)?ee(xe,6):0}if(ke.Bb)for(Te=0;3>Te;++Te)$e.jb[Te]=Ue(xe)?R(xe,8):255}else ke.Bb=0;if(xe.Ka)return fr(w,3,"cannot parse segment header");if((ke=w.ed).zd=Ue(xe),ke.Tb=R(xe,6),ke.wb=R(xe,3),ke.Pc=Ue(xe),ke.Pc&&Ue(xe)){for($e=0;4>$e;++$e)Ue(xe)&&(ke.vd[$e]=ee(xe,6));for($e=0;4>$e;++$e)Ue(xe)&&(ke.od[$e]=ee(xe,6))}if(w.L=ke.Tb==0?0:ke.zd?1:2,xe.Ka)return fr(w,3,"cannot parse filter header");var ut=ye;if(ye=Te=re,re=Te+ut,ke=ut,w.Xb=(1<<R(w.m,2))-1,ut<3*($e=w.Xb))j=7;else{for(Te+=3*$e,ke-=3*$e,ut=0;ut<$e;++ut){var Ot=j[ye+0]|j[ye+1]<<8|j[ye+2]<<16;Ot>ke&&(Ot=ke),U(w.Jc[+ut],j,Te,Ot),Te+=Ot,ke-=Ot,ye+=3}U(w.Jc[+$e],j,Te,ke),j=Te<re?0:5}if(j!=0)return fr(w,j,"cannot parse partitions");for(j=R(Te=w.m,7),ye=Ue(Te)?ee(Te,4):0,re=Ue(Te)?ee(Te,4):0,ke=Ue(Te)?ee(Te,4):0,$e=Ue(Te)?ee(Te,4):0,Te=Ue(Te)?ee(Te,4):0,ut=w.Qa,Ot=0;4>Ot;++Ot){if(ut.Cb){var Dt=ut.Zb[Ot];ut.Fb||(Dt+=j)}else{if(0<Ot){w.pb[Ot]=w.pb[0];continue}Dt=j}var _t=w.pb[Ot];_t.Sc[0]=rn[Er(Dt+ye,127)],_t.Sc[1]=Mn[Er(Dt+0,127)],_t.Eb[0]=2*rn[Er(Dt+re,127)],_t.Eb[1]=101581*Mn[Er(Dt+ke,127)]>>16,8>_t.Eb[1]&&(_t.Eb[1]=8),_t.Qc[0]=rn[Er(Dt+$e,117)],_t.Qc[1]=Mn[Er(Dt+Te,127)],_t.lc=Dt+Te}if(!Ee.Rb)return fr(w,4,"Not a key frame.");for(Ue(xe),Ee=w.Pa,j=0;4>j;++j){for(ye=0;8>ye;++ye)for(re=0;3>re;++re)for(ke=0;11>ke;++ke)$e=Ne(xe,no[j][ye][re][ke])?R(xe,8):ps[j][ye][re][ke],Ee.Wc[j][ye].Yb[re][ke]=$e;for(ye=0;17>ye;++ye)Ee.Xc[j][ye]=Ee.Wc[j][qc[ye]]}return w.kc=Ue(xe),w.kc&&(w.Bd=R(xe,8)),w.cb=1}function Io(w,M,j,re,ye,xe,Ee){var ke=M[ye].Yb[j];for(j=0;16>ye;++ye){if(!Ne(w,ke[j+0]))return ye;for(;!Ne(w,ke[j+1]);)if(ke=M[++ye].Yb[0],j=0,ye==16)return 16;var Te=M[ye+1].Yb;if(Ne(w,ke[j+2])){var $e=w,ut=0;if(Ne($e,(Dt=ke)[(Ot=j)+3]))if(Ne($e,Dt[Ot+6])){for(ke=0,Ot=2*(ut=Ne($e,Dt[Ot+8]))+(Dt=Ne($e,Dt[Ot+9+ut])),ut=0,Dt=Cr[Ot];Dt[ke];++ke)ut+=ut+Ne($e,Dt[ke]);ut+=3+(8<<Ot)}else Ne($e,Dt[Ot+7])?(ut=7+2*Ne($e,165),ut+=Ne($e,145)):ut=5+Ne($e,159);else ut=Ne($e,Dt[Ot+4])?3+Ne($e,Dt[Ot+5]):2;ke=Te[2]}else ut=1,ke=Te[1];Te=Ee+Ki[ye],0>($e=w).b&&Pe($e);var Ot,Dt=$e.b,_t=(Ot=$e.Ca>>1)-($e.I>>Dt)>>31;--$e.b,$e.Ca+=_t,$e.Ca|=1,$e.I-=(Ot+1&_t)<<Dt,xe[Te]=((ut^_t)-_t)*re[(0<ye)+0]}return 16}function Ul(w){var M=w.rb[w.sb-1];M.la=0,M.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function gr(w,M){if(w==null)return 0;if(M==null)return fr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!da(w,M))return 0;if(e(w.cb),M.ac==null||M.ac(M)){M.ob&&(w.L=0);var j=Ca[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=M.v-j>>4,w.zb=M.j-j>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=M.o+15+j>>4,w.Hb=M.va+15+j>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var re=w.ed;for(j=0;4>j;++j){var ye;if(w.Qa.Cb){var xe=w.Qa.Lb[j];w.Qa.Fb||(xe+=re.Tb)}else xe=re.Tb;for(ye=0;1>=ye;++ye){var Ee=w.gd[j][ye],ke=xe;if(re.Pc&&(ke+=re.vd[0],ye&&(ke+=re.od[0])),0<(ke=0>ke?0:63<ke?63:ke)){var Te=ke;0<re.wb&&(Te=4<re.wb?Te>>2:Te>>1)>9-re.wb&&(Te=9-re.wb),1>Te&&(Te=1),Ee.dd=Te,Ee.tc=2*ke+Te,Ee.ld=40<=ke?2:15<=ke?1:0}else Ee.tc=0;Ee.La=ye}}}j=0}else fr(w,6,"Frame setup failed"),j=w.a;if(j=j==0){if(j){w.$c=0,0<w.Aa||(w.Ic=fd);e:{j=w.Ic,re=4*(Te=w.za);var $e=32*Te,ut=Te+1,Ot=0<w.L?Te*(0<w.Aa?2:1):0,Dt=(w.Aa==2?2:1)*Te;if((Ee=re+832+(ye=3*(16*j+Ca[w.L])/2*$e)+(xe=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ee)j=0;else{if(Ee>w.Vb){if(w.Vb=0,w.Ec=s(Ee),w.Fc=0,w.Ec==null){j=fr(w,1,"no memory during frame initialization.");break e}w.Vb=Ee}Ee=w.Ec,ke=w.Fc,w.Ac=Ee,w.Bc=ke,ke+=re,w.Gd=o($e,Nu),w.Hd=0,w.rb=o(ut+1,fc),w.sb=1,w.wa=Ot?o(Ot,du):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Te),e(!0),w.oc=Ee,w.pc=ke,ke+=832,w.ya=o(Dt,cl),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Te),w.R=16*Te,w.B=8*Te,Te=($e=Ca[w.L])*w.R,$e=$e/2*w.B,w.sa=Ee,w.ta=ke+Te,w.qa=w.sa,w.ra=w.ta+16*j*w.R+$e,w.Ha=w.qa,w.Ia=w.ra+8*j*w.B+$e,w.$c=0,ke+=ye,w.mb=xe?Ee:null,w.nb=xe?ke:null,e(ke+xe<=w.Fc+w.Vb),Ul(w),i(w.Ac,w.Bc,0,re),j=1}}if(j){if(M.ka=0,M.y=w.sa,M.O=w.ta,M.f=w.qa,M.N=w.ra,M.ea=w.Ha,M.Vd=w.Ia,M.fa=w.R,M.Rc=w.B,M.F=null,M.J=0,!Uu){for(j=-255;255>=j;++j)gi[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)wo[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)eo[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)ko[255+j]=0>j?0:255<j?255:j;Uu=1}vt=Ha,Ht=fl,En=pa,Un=Ti,hr=No,Mt=Bu,Li=yu,ri=Jo,Kl=Po,zs=Yl,Ci=Gl,na=ql,wa=ei,ra=vc,ia=Fi,sa=Jn,Ir=ji,Uo=ml,Ho[0]=$r,Ho[1]=pu,Ho[2]=mr,Ho[3]=Ro,Ho[4]=Fu,Ho[5]=pl,Ho[6]=dl,Ho[7]=Fo,Ho[8]=ju,Ho[9]=qa,aa[0]=$l,aa[1]=Ru,aa[2]=Bo,aa[3]=ga,aa[4]=rs,aa[5]=gc,aa[6]=gu,Mo[0]=Ya,Mo[1]=Wa,Mo[2]=Vl,Mo[3]=dr,Mo[4]=Hl,Mo[5]=mc,Mo[6]=mu,j=1}else j=0}j&&(j=function(_t,Wt){for(_t.M=0;_t.M<_t.Va;++_t.M){var Ut,ct=_t.Jc[_t.M&_t.Xb],mt=_t.m,Jt=_t;for(Ut=0;Ut<Jt.za;++Ut){var un=mt,en=Jt,Pn=en.Ac,xn=en.Bc+4*Ut,Gn=en.zc,h=en.ya[en.aa+Ut];if(en.Qa.Bb?h.$b=Ne(un,en.Pa.jb[0])?2+Ne(un,en.Pa.jb[2]):Ne(un,en.Pa.jb[1]):h.$b=0,en.kc&&(h.Ad=Ne(un,en.Bd)),h.Za=!Ne(un,145)+0,h.Za){var g=h.Ob,_=0;for(en=0;4>en;++en){var x,k=Gn[0+en];for(x=0;4>x;++x){k=Si[Pn[xn+x]][k];for(var N=Oi[Ne(un,k[0])];0<N;)N=Oi[2*N+Ne(un,k[N])];k=-N,Pn[xn+x]=k}r(g,_,Pn,xn,4),_+=4,Gn[0+en]=k}}else k=Ne(un,156)?Ne(un,128)?1:3:Ne(un,163)?2:0,h.Ob[0]=k,i(Pn,xn,k,4),i(Gn,0,k,4);h.Dd=Ne(un,142)?Ne(un,114)?Ne(un,183)?1:3:2:0}if(Jt.m.Ka)return fr(_t,7,"Premature end-of-partition0 encountered.");for(;_t.ja<_t.za;++_t.ja){if(Jt=ct,un=(mt=_t).rb[mt.sb-1],Pn=mt.rb[mt.sb+mt.ja],Ut=mt.ya[mt.aa+mt.ja],xn=mt.kc?Ut.Ad:0)un.la=Pn.la=0,Ut.Za||(un.Na=Pn.Na=0),Ut.Hc=0,Ut.Gc=0,Ut.ia=0;else{var G,K;if(un=Pn,Pn=Jt,xn=mt.Pa.Xc,Gn=mt.ya[mt.aa+mt.ja],h=mt.pb[Gn.$b],en=Gn.ad,g=0,_=mt.rb[mt.sb-1],k=x=0,i(en,g,0,384),Gn.Za)var he=0,_e=xn[3];else{N=s(16);var qe=un.Na+_.Na;if(qe=Wn(Pn,xn[1],qe,h.Eb,0,N,0),un.Na=_.Na=(0<qe)+0,1<qe)vt(N,0,en,g);else{var ze=N[0]+3>>3;for(N=0;256>N;N+=16)en[g+N]=ze}he=1,_e=xn[0]}var gt=15&un.la,At=15&_.la;for(N=0;4>N;++N){var Yt=1&At;for(ze=K=0;4>ze;++ze)gt=gt>>1|(Yt=(qe=Wn(Pn,_e,qe=Yt+(1&gt),h.Sc,he,en,g))>he)<<7,K=K<<2|(3<qe?3:1<qe?2:en[g+0]!=0),g+=16;gt>>=4,At=At>>1|Yt<<7,x=(x<<8|K)>>>0}for(_e=gt,he=At>>4,G=0;4>G;G+=2){for(K=0,gt=un.la>>4+G,At=_.la>>4+G,N=0;2>N;++N){for(Yt=1&At,ze=0;2>ze;++ze)qe=Yt+(1&gt),gt=gt>>1|(Yt=0<(qe=Wn(Pn,xn[2],qe,h.Qc,0,en,g)))<<3,K=K<<2|(3<qe?3:1<qe?2:en[g+0]!=0),g+=16;gt>>=2,At=At>>1|Yt<<5}k|=K<<4*G,_e|=gt<<4<<G,he|=(240&At)<<G}un.la=_e,_.la=he,Gn.Hc=x,Gn.Gc=k,Gn.ia=43690&k?0:h.ia,xn=!(x|k)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[Ut.$b][Ut.Za],mt.wa[mt.Y+mt.ja].La|=!xn),Jt.Ka)return fr(_t,7,"Premature end-of-file encountered.")}if(Ul(_t),mt=Wt,Jt=1,Ut=(ct=_t).D,un=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(Ut.M=ct.M,Ut.uc=un,bu(ct,Ut),Jt=1,Ut=(K=ct.D).Nb,un=(k=Ca[ct.L])*ct.R,Pn=k/2*ct.B,N=16*Ut*ct.R,ze=8*Ut*ct.B,xn=ct.sa,Gn=ct.ta-un+N,h=ct.qa,en=ct.ra-Pn+ze,g=ct.Ha,_=ct.Ia-Pn+ze,At=(gt=K.M)==0,x=gt>=ct.Va-1,ct.Aa==2&&bu(ct,K),K.uc)for(Yt=(qe=ct).D.M,e(qe.D.uc),K=qe.yb;K<qe.Hb;++K){he=K,_e=Yt;var fn=(yn=(Ce=qe).D).Nb;G=Ce.R;var yn=yn.wa[yn.Y+he],tr=Ce.sa,Ge=Ce.ta+16*fn*G+16*he,Ye=yn.dd,lt=yn.tc;if(lt!=0)if(e(3<=lt),Ce.L==1)0<he&&sa(tr,Ge,G,lt+4),yn.La&&Uo(tr,Ge,G,lt),0<_e&&ia(tr,Ge,G,lt+4),yn.La&&Ir(tr,Ge,G,lt);else{var It=Ce.B,yt=Ce.qa,Tt=Ce.ra+8*fn*It+8*he,de=Ce.Ha,Ce=Ce.Ia+8*fn*It+8*he;fn=yn.ld,0<he&&(ri(tr,Ge,G,lt+4,Ye,fn),zs(yt,Tt,de,Ce,It,lt+4,Ye,fn)),yn.La&&(na(tr,Ge,G,lt,Ye,fn),ra(yt,Tt,de,Ce,It,lt,Ye,fn)),0<_e&&(Li(tr,Ge,G,lt+4,Ye,fn),Kl(yt,Tt,de,Ce,It,lt+4,Ye,fn)),yn.La&&(Ci(tr,Ge,G,lt,Ye,fn),wa(yt,Tt,de,Ce,It,lt,Ye,fn))}}if(ct.ia&&alert("todo:DitherRow"),mt.put!=null){if(K=16*gt,gt=16*(gt+1),At?(mt.y=ct.sa,mt.O=ct.ta+N,mt.f=ct.qa,mt.N=ct.ra+ze,mt.ea=ct.Ha,mt.W=ct.Ia+ze):(K-=k,mt.y=xn,mt.O=Gn,mt.f=h,mt.N=en,mt.ea=g,mt.W=_),x||(gt-=k),gt>mt.o&&(gt=mt.o),mt.F=null,mt.J=null,ct.Fa!=null&&0<ct.Fa.length&&K<gt&&(mt.J=zi(ct,mt,K,gt-K),mt.F=ct.mb,mt.F==null&&mt.F.length==0)){Jt=fr(ct,3,"Could not decode alpha data.");break e}K<mt.j&&(k=mt.j-K,K=mt.j,e(!(1&k)),mt.O+=ct.R*k,mt.N+=ct.B*(k>>1),mt.W+=ct.B*(k>>1),mt.F!=null&&(mt.J+=mt.width*k)),K<gt&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=K-mt.j,mt.U=mt.va-mt.v,mt.T=gt-K,Jt=mt.put(mt))}Ut+1!=ct.Ic||x||(r(ct.sa,ct.ta-un,xn,Gn+16*ct.R,un),r(ct.qa,ct.ra-Pn,h,en+8*ct.B,Pn),r(ct.Ha,ct.Ia-Pn,g,_+8*ct.B,Pn))}if(!Jt)return fr(_t,6,"Output aborted.")}return 1}(w,M)),M.bc!=null&&M.bc(M),j&=1}return j?(w.cb=0,j):0}function Gr(w,M,j,re,ye){ye=w[M+j+32*re]+(ye>>3),w[M+j+32*re]=-256&ye?0>ye?0:255:ye}function Va(w,M,j,re,ye,xe){Gr(w,M,0,j,re+ye),Gr(w,M,1,j,re+xe),Gr(w,M,2,j,re-xe),Gr(w,M,3,j,re-ye)}function ws(w){return(20091*w>>16)+w}function xs(w,M,j,re){var ye,xe=0,Ee=s(16);for(ye=0;4>ye;++ye){var ke=w[M+0]+w[M+8],Te=w[M+0]-w[M+8],$e=(35468*w[M+4]>>16)-ws(w[M+12]),ut=ws(w[M+4])+(35468*w[M+12]>>16);Ee[xe+0]=ke+ut,Ee[xe+1]=Te+$e,Ee[xe+2]=Te-$e,Ee[xe+3]=ke-ut,xe+=4,M++}for(ye=xe=0;4>ye;++ye)ke=(w=Ee[xe+0]+4)+Ee[xe+8],Te=w-Ee[xe+8],$e=(35468*Ee[xe+4]>>16)-ws(Ee[xe+12]),Gr(j,re,0,0,ke+(ut=ws(Ee[xe+4])+(35468*Ee[xe+12]>>16))),Gr(j,re,1,0,Te+$e),Gr(j,re,2,0,Te-$e),Gr(j,re,3,0,ke-ut),xe++,re+=32}function Bu(w,M,j,re){var ye=w[M+0]+4,xe=35468*w[M+4]>>16,Ee=ws(w[M+4]),ke=35468*w[M+1]>>16;Va(j,re,0,ye+Ee,w=ws(w[M+1]),ke),Va(j,re,1,ye+xe,w,ke),Va(j,re,2,ye-xe,w,ke),Va(j,re,3,ye-Ee,w,ke)}function fl(w,M,j,re,ye){xs(w,M,j,re),ye&&xs(w,M+16,j,re+4)}function pa(w,M,j,re){Ht(w,M+0,j,re,1),Ht(w,M+32,j,re+128,1)}function Ti(w,M,j,re){var ye;for(w=w[M+0]+4,ye=0;4>ye;++ye)for(M=0;4>M;++M)Gr(j,re,M,ye,w)}function No(w,M,j,re){w[M+0]&&Un(w,M+0,j,re),w[M+16]&&Un(w,M+16,j,re+4),w[M+32]&&Un(w,M+32,j,re+128),w[M+48]&&Un(w,M+48,j,re+128+4)}function Ha(w,M,j,re){var ye,xe=s(16);for(ye=0;4>ye;++ye){var Ee=w[M+0+ye]+w[M+12+ye],ke=w[M+4+ye]+w[M+8+ye],Te=w[M+4+ye]-w[M+8+ye],$e=w[M+0+ye]-w[M+12+ye];xe[0+ye]=Ee+ke,xe[8+ye]=Ee-ke,xe[4+ye]=$e+Te,xe[12+ye]=$e-Te}for(ye=0;4>ye;++ye)Ee=(w=xe[0+4*ye]+3)+xe[3+4*ye],ke=xe[1+4*ye]+xe[2+4*ye],Te=xe[1+4*ye]-xe[2+4*ye],$e=w-xe[3+4*ye],j[re+0]=Ee+ke>>3,j[re+16]=$e+Te>>3,j[re+32]=Ee-ke>>3,j[re+48]=$e-Te>>3,re+=64}function mo(w,M,j){var re,ye=M-32,xe=pi,Ee=255-w[ye-1];for(re=0;re<j;++re){var ke,Te=xe,$e=Ee+w[M-1];for(ke=0;ke<j;++ke)w[M+ke]=Te[$e+w[ye+ke]];M+=32}}function pu(w,M){mo(w,M,4)}function Wa(w,M){mo(w,M,8)}function Ru(w,M){mo(w,M,16)}function Bo(w,M){var j;for(j=0;16>j;++j)r(w,M+32*j,w,M-32,16)}function ga(w,M){var j;for(j=16;0<j;--j)i(w,M,w[M-1],16),M+=32}function Ga(w,M,j){var re;for(re=0;16>re;++re)i(M,j+32*re,w,16)}function $l(w,M){var j,re=16;for(j=0;16>j;++j)re+=w[M-1+32*j]+w[M+j-32];Ga(re>>5,w,M)}function rs(w,M){var j,re=8;for(j=0;16>j;++j)re+=w[M-1+32*j];Ga(re>>4,w,M)}function gc(w,M){var j,re=8;for(j=0;16>j;++j)re+=w[M+j-32];Ga(re>>4,w,M)}function gu(w,M){Ga(128,w,M)}function cr(w,M,j){return w+2*M+j+2>>2}function mr(w,M){var j,re=M-32;for(re=new Uint8Array([cr(w[re-1],w[re+0],w[re+1]),cr(w[re+0],w[re+1],w[re+2]),cr(w[re+1],w[re+2],w[re+3]),cr(w[re+2],w[re+3],w[re+4])]),j=0;4>j;++j)r(w,M+32*j,re,0,re.length)}function Ro(w,M){var j=w[M-1],re=w[M-1+32],ye=w[M-1+64],xe=w[M-1+96];nt(w,M+0,16843009*cr(w[M-1-32],j,re)),nt(w,M+32,16843009*cr(j,re,ye)),nt(w,M+64,16843009*cr(re,ye,xe)),nt(w,M+96,16843009*cr(ye,xe,xe))}function $r(w,M){var j,re=4;for(j=0;4>j;++j)re+=w[M+j-32]+w[M-1+32*j];for(re>>=3,j=0;4>j;++j)i(w,M+32*j,re,4)}function Fu(w,M){var j=w[M-1+0],re=w[M-1+32],ye=w[M-1+64],xe=w[M-1-32],Ee=w[M+0-32],ke=w[M+1-32],Te=w[M+2-32],$e=w[M+3-32];w[M+0+96]=cr(re,ye,w[M-1+96]),w[M+1+96]=w[M+0+64]=cr(j,re,ye),w[M+2+96]=w[M+1+64]=w[M+0+32]=cr(xe,j,re),w[M+3+96]=w[M+2+64]=w[M+1+32]=w[M+0+0]=cr(Ee,xe,j),w[M+3+64]=w[M+2+32]=w[M+1+0]=cr(ke,Ee,xe),w[M+3+32]=w[M+2+0]=cr(Te,ke,Ee),w[M+3+0]=cr($e,Te,ke)}function dl(w,M){var j=w[M+1-32],re=w[M+2-32],ye=w[M+3-32],xe=w[M+4-32],Ee=w[M+5-32],ke=w[M+6-32],Te=w[M+7-32];w[M+0+0]=cr(w[M+0-32],j,re),w[M+1+0]=w[M+0+32]=cr(j,re,ye),w[M+2+0]=w[M+1+32]=w[M+0+64]=cr(re,ye,xe),w[M+3+0]=w[M+2+32]=w[M+1+64]=w[M+0+96]=cr(ye,xe,Ee),w[M+3+32]=w[M+2+64]=w[M+1+96]=cr(xe,Ee,ke),w[M+3+64]=w[M+2+96]=cr(Ee,ke,Te),w[M+3+96]=cr(ke,Te,Te)}function pl(w,M){var j=w[M-1+0],re=w[M-1+32],ye=w[M-1+64],xe=w[M-1-32],Ee=w[M+0-32],ke=w[M+1-32],Te=w[M+2-32],$e=w[M+3-32];w[M+0+0]=w[M+1+64]=xe+Ee+1>>1,w[M+1+0]=w[M+2+64]=Ee+ke+1>>1,w[M+2+0]=w[M+3+64]=ke+Te+1>>1,w[M+3+0]=Te+$e+1>>1,w[M+0+96]=cr(ye,re,j),w[M+0+64]=cr(re,j,xe),w[M+0+32]=w[M+1+96]=cr(j,xe,Ee),w[M+1+32]=w[M+2+96]=cr(xe,Ee,ke),w[M+2+32]=w[M+3+96]=cr(Ee,ke,Te),w[M+3+32]=cr(ke,Te,$e)}function Fo(w,M){var j=w[M+0-32],re=w[M+1-32],ye=w[M+2-32],xe=w[M+3-32],Ee=w[M+4-32],ke=w[M+5-32],Te=w[M+6-32],$e=w[M+7-32];w[M+0+0]=j+re+1>>1,w[M+1+0]=w[M+0+64]=re+ye+1>>1,w[M+2+0]=w[M+1+64]=ye+xe+1>>1,w[M+3+0]=w[M+2+64]=xe+Ee+1>>1,w[M+0+32]=cr(j,re,ye),w[M+1+32]=w[M+0+96]=cr(re,ye,xe),w[M+2+32]=w[M+1+96]=cr(ye,xe,Ee),w[M+3+32]=w[M+2+96]=cr(xe,Ee,ke),w[M+3+64]=cr(Ee,ke,Te),w[M+3+96]=cr(ke,Te,$e)}function qa(w,M){var j=w[M-1+0],re=w[M-1+32],ye=w[M-1+64],xe=w[M-1+96];w[M+0+0]=j+re+1>>1,w[M+2+0]=w[M+0+32]=re+ye+1>>1,w[M+2+32]=w[M+0+64]=ye+xe+1>>1,w[M+1+0]=cr(j,re,ye),w[M+3+0]=w[M+1+32]=cr(re,ye,xe),w[M+3+32]=w[M+1+64]=cr(ye,xe,xe),w[M+3+64]=w[M+2+64]=w[M+0+96]=w[M+1+96]=w[M+2+96]=w[M+3+96]=xe}function ju(w,M){var j=w[M-1+0],re=w[M-1+32],ye=w[M-1+64],xe=w[M-1+96],Ee=w[M-1-32],ke=w[M+0-32],Te=w[M+1-32],$e=w[M+2-32];w[M+0+0]=w[M+2+32]=j+Ee+1>>1,w[M+0+32]=w[M+2+64]=re+j+1>>1,w[M+0+64]=w[M+2+96]=ye+re+1>>1,w[M+0+96]=xe+ye+1>>1,w[M+3+0]=cr(ke,Te,$e),w[M+2+0]=cr(Ee,ke,Te),w[M+1+0]=w[M+3+32]=cr(j,Ee,ke),w[M+1+32]=w[M+3+64]=cr(re,j,Ee),w[M+1+64]=w[M+3+96]=cr(ye,re,j),w[M+1+96]=cr(xe,ye,re)}function Vl(w,M){var j;for(j=0;8>j;++j)r(w,M+32*j,w,M-32,8)}function dr(w,M){var j;for(j=0;8>j;++j)i(w,M,w[M-1],8),M+=32}function Mr(w,M,j){var re;for(re=0;8>re;++re)i(M,j+32*re,w,8)}function Ya(w,M){var j,re=8;for(j=0;8>j;++j)re+=w[M+j-32]+w[M-1+32*j];Mr(re>>4,w,M)}function mc(w,M){var j,re=4;for(j=0;8>j;++j)re+=w[M+j-32];Mr(re>>3,w,M)}function Hl(w,M){var j,re=4;for(j=0;8>j;++j)re+=w[M-1+32*j];Mr(re>>3,w,M)}function mu(w,M){Mr(128,w,M)}function gl(w,M,j){var re=w[M-j],ye=w[M+0],xe=3*(ye-re)+oa[1020+w[M-2*j]-w[M+j]],Ee=Zi[112+(xe+4>>3)];w[M-j]=pi[255+re+Zi[112+(xe+3>>3)]],w[M+0]=pi[255+ye-Ee]}function Wl(w,M,j,re){var ye=w[M+0],xe=w[M+j];return Ms[255+w[M-2*j]-w[M-j]]>re||Ms[255+xe-ye]>re}function vu(w,M,j,re){return 4*Ms[255+w[M-j]-w[M+0]]+Ms[255+w[M-2*j]-w[M+j]]<=re}function Dr(w,M,j,re,ye){var xe=w[M-3*j],Ee=w[M-2*j],ke=w[M-j],Te=w[M+0],$e=w[M+j],ut=w[M+2*j],Ot=w[M+3*j];return 4*Ms[255+ke-Te]+Ms[255+Ee-$e]>re?0:Ms[255+w[M-4*j]-xe]<=ye&&Ms[255+xe-Ee]<=ye&&Ms[255+Ee-ke]<=ye&&Ms[255+Ot-ut]<=ye&&Ms[255+ut-$e]<=ye&&Ms[255+$e-Te]<=ye}function Fi(w,M,j,re){var ye=2*re+1;for(re=0;16>re;++re)vu(w,M+re,j,ye)&&gl(w,M+re,j)}function Jn(w,M,j,re){var ye=2*re+1;for(re=0;16>re;++re)vu(w,M+re*j,1,ye)&&gl(w,M+re*j,1)}function ji(w,M,j,re){var ye;for(ye=3;0<ye;--ye)Fi(w,M+=4*j,j,re)}function ml(w,M,j,re){var ye;for(ye=3;0<ye;--ye)Jn(w,M+=4,j,re)}function ma(w,M,j,re,ye,xe,Ee,ke){for(xe=2*xe+1;0<ye--;){if(Dr(w,M,j,xe,Ee))if(Wl(w,M,j,ke))gl(w,M,j);else{var Te=w,$e=M,ut=j,Ot=Te[$e-2*ut],Dt=Te[$e-ut],_t=Te[$e+0],Wt=Te[$e+ut],Ut=Te[$e+2*ut],ct=27*(Jt=oa[1020+3*(_t-Dt)+oa[1020+Ot-Wt]])+63>>7,mt=18*Jt+63>>7,Jt=9*Jt+63>>7;Te[$e-3*ut]=pi[255+Te[$e-3*ut]+Jt],Te[$e-2*ut]=pi[255+Ot+mt],Te[$e-ut]=pi[255+Dt+ct],Te[$e+0]=pi[255+_t-ct],Te[$e+ut]=pi[255+Wt-mt],Te[$e+2*ut]=pi[255+Ut-Jt]}M+=re}}function xi(w,M,j,re,ye,xe,Ee,ke){for(xe=2*xe+1;0<ye--;){if(Dr(w,M,j,xe,Ee))if(Wl(w,M,j,ke))gl(w,M,j);else{var Te=w,$e=M,ut=j,Ot=Te[$e-ut],Dt=Te[$e+0],_t=Te[$e+ut],Wt=Zi[112+((Ut=3*(Dt-Ot))+4>>3)],Ut=Zi[112+(Ut+3>>3)],ct=Wt+1>>1;Te[$e-2*ut]=pi[255+Te[$e-2*ut]+ct],Te[$e-ut]=pi[255+Ot+Ut],Te[$e+0]=pi[255+Dt-Wt],Te[$e+ut]=pi[255+_t-ct]}M+=re}}function yu(w,M,j,re,ye,xe){ma(w,M,j,1,16,re,ye,xe)}function Jo(w,M,j,re,ye,xe){ma(w,M,1,j,16,re,ye,xe)}function Gl(w,M,j,re,ye,xe){var Ee;for(Ee=3;0<Ee;--Ee)xi(w,M+=4*j,j,1,16,re,ye,xe)}function ql(w,M,j,re,ye,xe){var Ee;for(Ee=3;0<Ee;--Ee)xi(w,M+=4,1,j,16,re,ye,xe)}function Po(w,M,j,re,ye,xe,Ee,ke){ma(w,M,ye,1,8,xe,Ee,ke),ma(j,re,ye,1,8,xe,Ee,ke)}function Yl(w,M,j,re,ye,xe,Ee,ke){ma(w,M,1,ye,8,xe,Ee,ke),ma(j,re,1,ye,8,xe,Ee,ke)}function ei(w,M,j,re,ye,xe,Ee,ke){xi(w,M+4*ye,ye,1,8,xe,Ee,ke),xi(j,re+4*ye,ye,1,8,xe,Ee,ke)}function vc(w,M,j,re,ye,xe,Ee,ke){xi(w,M+4,1,ye,8,xe,Ee,ke),xi(j,re+4,1,ye,8,xe,Ee,ke)}function us(){this.ba=new Nn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zo(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new W}function vl(){this.xb=this.a=0,this.l=new Eo,this.ca=new Nn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zo,this.ab=0,this.gc=o(4,Zl),this.Oc=0}function yl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Eo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ti(w,M,j,re,ye,xe,Ee){for(w=w==null?0:w[M+0],M=0;M<Ee;++M)ye[xe+M]=w+j[re+M]&255,w=ye[xe+M]}function vo(w,M,j,re,ye,xe,Ee){var ke;if(w==null)ti(null,null,j,re,ye,xe,Ee);else for(ke=0;ke<Ee;++ke)ye[xe+ke]=w[M+ke]+j[re+ke]&255}function va(w,M,j,re,ye,xe,Ee){if(w==null)ti(null,null,j,re,ye,xe,Ee);else{var ke,Te=w[M+0],$e=Te,ut=Te;for(ke=0;ke<Ee;++ke)$e=ut+(Te=w[M+ke])-$e,ut=j[re+ke]+(-256&$e?0>$e?0:255:$e)&255,$e=Te,ye[xe+ke]=ut}}function zi(w,M,j,re){var ye=M.width,xe=M.o;if(e(w!=null&&M!=null),0>j||0>=re||j+re>xe)return null;if(!w.Cc){if(w.ga==null){var Ee;if(w.ga=new yl,(Ee=w.ga==null)||(Ee=M.width*M.o,e(w.Gb.length==0),w.Gb=s(Ee),w.Uc=0,w.Gb==null?Ee=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ee=1),Ee=!Ee),!Ee){Ee=w.ga;var ke=w.Fa,Te=w.P,$e=w.qc,ut=w.mb,Ot=w.nb,Dt=Te+1,_t=$e-1,Wt=Ee.l;if(e(ke!=null&&ut!=null&&M!=null),Xr[0]=null,Xr[1]=ti,Xr[2]=vo,Xr[3]=va,Ee.ca=ut,Ee.tb=Ot,Ee.c=M.width,Ee.i=M.height,e(0<Ee.c&&0<Ee.i),1>=$e)M=0;else if(Ee.$a=ke[Te+0]>>0&3,Ee.Z=ke[Te+0]>>2&3,Ee.Lc=ke[Te+0]>>4&3,Te=ke[Te+0]>>6&3,0>Ee.$a||1<Ee.$a||4<=Ee.Z||1<Ee.Lc||Te)M=0;else if(Wt.put=Js,Wt.ac=ki,Wt.bc=Nt,Wt.ma=Ee,Wt.width=M.width,Wt.height=M.height,Wt.Da=M.Da,Wt.v=M.v,Wt.va=M.va,Wt.j=M.j,Wt.o=M.o,Ee.$a)e:{e(Ee.$a==1),M=Hn();t:for(;;){if(M==null){M=0;break e}if(e(Ee!=null),Ee.mc=M,M.c=Ee.c,M.i=Ee.i,M.l=Ee.l,M.l.ma=Ee,M.l.width=Ee.c,M.l.height=Ee.i,M.a=0,ie(M.m,ke,Dt,_t),!_i(Ee.c,Ee.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&wn(M.s)?(Ee.ic=1,ke=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(ke),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Ee.ic=0,M=Ur(M,Ee.c)),!M))break t;M=1;break e}Ee.mc=null,M=0}else M=_t>=Ee.c*Ee.i;Ee=!M}if(Ee)return null;w.ga.Lc!=1?w.Ga=0:re=xe-j}e(w.ga!=null),e(j+re<=xe);e:{if(M=(ke=w.ga).c,xe=ke.l.o,ke.$a==0){if(Dt=w.rc,_t=w.Vc,Wt=w.Fa,Te=w.P+1+j*M,$e=w.mb,ut=w.nb+j*M,e(Te<=w.P+w.qc),ke.Z!=0)for(e(Xr[ke.Z]!=null),Ee=0;Ee<re;++Ee)Xr[ke.Z](Dt,_t,Wt,Te,$e,ut,M),Dt=$e,_t=ut,ut+=M,Te+=M;else for(Ee=0;Ee<re;++Ee)r($e,ut,Wt,Te,M),Dt=$e,_t=ut,ut+=M,Te+=M;w.rc=Dt,w.Vc=_t}else{if(e(ke.mc!=null),M=j+re,e((Ee=ke.mc)!=null),e(M<=Ee.i),Ee.C>=M)M=1;else if(ke.ic||xt(),ke.ic){ke=Ee.V,Dt=Ee.Ba,_t=Ee.c;var Ut=Ee.i,ct=(Wt=1,Te=Ee.$/_t,$e=Ee.$%_t,ut=Ee.m,Ot=Ee.s,Ee.$),mt=_t*Ut,Jt=_t*M,un=Ot.wc,en=ct<Jt?Pt(Ot,$e,Te):null;e(ct<=mt),e(M<=Ut),e(wn(Ot));t:for(;;){for(;!ut.h&&ct<Jt;){if($e&un||(en=Pt(Ot,$e,Te)),e(en!=null),Le(ut),256>(Ut=Vn(en.G[0],en.H[0],ut)))ke[Dt+ct]=Ut,++ct,++$e>=_t&&($e=0,++Te<=M&&!(Te%16)&&Xn(Ee,Te));else{if(!(280>Ut)){Wt=0;break t}Ut=Vt(Ut-256,ut);var Pn,xn=Vn(en.G[4],en.H[4],ut);if(Le(ut),!(ct>=(xn=Bn(_t,xn=Vt(xn,ut)))&&mt-ct>=Ut)){Wt=0;break t}for(Pn=0;Pn<Ut;++Pn)ke[Dt+ct+Pn]=ke[Dt+ct+Pn-xn];for(ct+=Ut,$e+=Ut;$e>=_t;)$e-=_t,++Te<=M&&!(Te%16)&&Xn(Ee,Te);ct<Jt&&$e&un&&(en=Pt(Ot,$e,Te))}e(ut.h==ce(ut))}Xn(Ee,Te>M?M:Te);break t}!Wt||ut.h&&ct<mt?(Wt=0,Ee.a=ut.h?5:3):Ee.$=ct,M=Wt}else M=sr(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,M,Xo);if(!M){re=0;break e}}j+re>=xe&&(w.Cc=1),re=1}if(!re)return null;if(w.Cc&&((re=w.ga)!=null&&(re.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+j*ye}function I(w,M,j,re,ye,xe){for(;0<ye--;){var Ee,ke=w,Te=M+(j?1:0),$e=w,ut=M+(j?0:3);for(Ee=0;Ee<re;++Ee){var Ot=$e[ut+4*Ee];Ot!=255&&(Ot*=32897,ke[Te+4*Ee+0]=ke[Te+4*Ee+0]*Ot>>23,ke[Te+4*Ee+1]=ke[Te+4*Ee+1]*Ot>>23,ke[Te+4*Ee+2]=ke[Te+4*Ee+2]*Ot>>23)}M+=xe}}function ve(w,M,j,re,ye){for(;0<re--;){var xe;for(xe=0;xe<j;++xe){var Ee=w[M+2*xe+0],ke=15&($e=w[M+2*xe+1]),Te=4369*ke,$e=(240&$e|$e>>4)*Te>>16;w[M+2*xe+0]=(240&Ee|Ee>>4)*Te>>16&240|(15&Ee|Ee<<4)*Te>>16>>4&15,w[M+2*xe+1]=240&$e|ke}M+=ye}}function We(w,M,j,re,ye,xe,Ee,ke){var Te,$e,ut=255;for($e=0;$e<ye;++$e){for(Te=0;Te<re;++Te){var Ot=w[M+Te];xe[Ee+4*Te]=Ot,ut&=Ot}M+=j,Ee+=ke}return ut!=255}function st(w,M,j,re,ye){var xe;for(xe=0;xe<ye;++xe)j[re+xe]=w[M+xe]>>8}function xt(){hs=I,ii=ve,li=We,$i=st}function Bt(w,M,j){V[w]=function(re,ye,xe,Ee,ke,Te,$e,ut,Ot,Dt,_t,Wt,Ut,ct,mt,Jt,un){var en,Pn=un-1>>1,xn=ke[Te+0]|$e[ut+0]<<16,Gn=Ot[Dt+0]|_t[Wt+0]<<16;e(re!=null);var h=3*xn+Gn+131074>>2;for(M(re[ye+0],255&h,h>>16,Ut,ct),xe!=null&&(h=3*Gn+xn+131074>>2,M(xe[Ee+0],255&h,h>>16,mt,Jt)),en=1;en<=Pn;++en){var g=ke[Te+en]|$e[ut+en]<<16,_=Ot[Dt+en]|_t[Wt+en]<<16,x=xn+g+Gn+_+524296,k=x+2*(g+Gn)>>3;h=k+xn>>1,xn=(x=x+2*(xn+_)>>3)+g>>1,M(re[ye+2*en-1],255&h,h>>16,Ut,ct+(2*en-1)*j),M(re[ye+2*en-0],255&xn,xn>>16,Ut,ct+(2*en-0)*j),xe!=null&&(h=x+Gn>>1,xn=k+_>>1,M(xe[Ee+2*en-1],255&h,h>>16,mt,Jt+(2*en-1)*j),M(xe[Ee+2*en+0],255&xn,xn>>16,mt,Jt+(2*en+0)*j)),xn=g,Gn=_}1&un||(h=3*xn+Gn+131074>>2,M(re[ye+un-1],255&h,h>>16,Ut,ct+(un-1)*j),xe!=null&&(h=3*Gn+xn+131074>>2,M(xe[Ee+un-1],255&h,h>>16,mt,Jt+(un-1)*j)))}}function an(){As[to]=Me,As[ir]=$u,As[xa]=ro,As[La]=gs,As[$o]=Pr,As[Us]=Sh,As[Gc]=ld,As[fs]=$u,As[ds]=gs,As[Vo]=Pr,As[u]=Sh}function kn(w){return w&-16384?0>w?0:255:w>>bp}function On(w,M){return kn((19077*w>>8)+(26149*M>>8)-14234)}function Zn(w,M,j){return kn((19077*w>>8)-(6419*M>>8)-(13320*j>>8)+8708)}function or(w,M){return kn((19077*w>>8)+(33050*M>>8)-17685)}function Sr(w,M,j,re,ye){re[ye+0]=On(w,j),re[ye+1]=Zn(w,M,j),re[ye+2]=or(w,M)}function wi(w,M,j,re,ye){re[ye+0]=or(w,M),re[ye+1]=Zn(w,M,j),re[ye+2]=On(w,j)}function Yr(w,M,j,re,ye){var xe=Zn(w,M,j);M=xe<<3&224|or(w,M)>>3,re[ye+0]=248&On(w,j)|xe>>5,re[ye+1]=M}function ni(w,M,j,re,ye){var xe=240&or(w,M)|15;re[ye+0]=240&On(w,j)|Zn(w,M,j)>>4,re[ye+1]=xe}function Ui(w,M,j,re,ye){re[ye+0]=255,Sr(w,M,j,re,ye+1)}function qi(w,M,j,re,ye){wi(w,M,j,re,ye),re[ye+3]=255}function yo(w,M,j,re,ye){Sr(w,M,j,re,ye),re[ye+3]=255}function Er(w,M){return 0>w?0:w>M?M:w}function Ls(w,M,j){V[w]=function(re,ye,xe,Ee,ke,Te,$e,ut,Ot){for(var Dt=ut+(-2&Ot)*j;ut!=Dt;)M(re[ye+0],xe[Ee+0],ke[Te+0],$e,ut),M(re[ye+1],xe[Ee+0],ke[Te+0],$e,ut+j),ye+=2,++Ee,++Te,ut+=2*j;1&Ot&&M(re[ye+0],xe[Ee+0],ke[Te+0],$e,ut)}}function bl(w,M,j){return j==0?w==0?M==0?6:5:M==0?4:0:j}function Rs(w,M,j,re,ye){switch(w>>>30){case 3:Ht(M,j,re,ye,0);break;case 2:Mt(M,j,re,ye);break;case 1:Un(M,j,re,ye)}}function bu(w,M){var j,re,ye=M.M,xe=M.Nb,Ee=w.oc,ke=w.pc+40,Te=w.oc,$e=w.pc+584,ut=w.oc,Ot=w.pc+600;for(j=0;16>j;++j)Ee[ke+32*j-1]=129;for(j=0;8>j;++j)Te[$e+32*j-1]=129,ut[Ot+32*j-1]=129;for(0<ye?Ee[ke-1-32]=Te[$e-1-32]=ut[Ot-1-32]=129:(i(Ee,ke-32-1,127,21),i(Te,$e-32-1,127,9),i(ut,Ot-32-1,127,9)),re=0;re<w.za;++re){var Dt=M.ya[M.aa+re];if(0<re){for(j=-1;16>j;++j)r(Ee,ke+32*j-4,Ee,ke+32*j+12,4);for(j=-1;8>j;++j)r(Te,$e+32*j-4,Te,$e+32*j+4,4),r(ut,Ot+32*j-4,ut,Ot+32*j+4,4)}var _t=w.Gd,Wt=w.Hd+re,Ut=Dt.ad,ct=Dt.Hc;if(0<ye&&(r(Ee,ke-32,_t[Wt].y,0,16),r(Te,$e-32,_t[Wt].f,0,8),r(ut,Ot-32,_t[Wt].ea,0,8)),Dt.Za){var mt=Ee,Jt=ke-32+16;for(0<ye&&(re>=w.za-1?i(mt,Jt,_t[Wt].y[15],4):r(mt,Jt,_t[Wt+1].y,0,4)),j=0;4>j;j++)mt[Jt+128+j]=mt[Jt+256+j]=mt[Jt+384+j]=mt[Jt+0+j];for(j=0;16>j;++j,ct<<=2)mt=Ee,Jt=ke+cd[j],Ho[Dt.Ob[j]](mt,Jt),Rs(ct,Ut,16*+j,mt,Jt)}else if(mt=bl(re,ye,Dt.Ob[0]),aa[mt](Ee,ke),ct!=0)for(j=0;16>j;++j,ct<<=2)Rs(ct,Ut,16*+j,Ee,ke+cd[j]);for(j=Dt.Gc,mt=bl(re,ye,Dt.Dd),Mo[mt](Te,$e),Mo[mt](ut,Ot),ct=Ut,mt=Te,Jt=$e,255&(Dt=j>>0)&&(170&Dt?En(ct,256,mt,Jt):hr(ct,256,mt,Jt)),Dt=ut,ct=Ot,255&(j>>=8)&&(170&j?En(Ut,320,Dt,ct):hr(Ut,320,Dt,ct)),ye<w.Ub-1&&(r(_t[Wt].y,0,Ee,ke+480,16),r(_t[Wt].f,0,Te,$e+224,8),r(_t[Wt].ea,0,ut,Ot+224,8)),j=8*xe*w.B,_t=w.sa,Wt=w.ta+16*re+16*xe*w.R,Ut=w.qa,Dt=w.ra+8*re+j,ct=w.Ha,mt=w.Ia+8*re+j,j=0;16>j;++j)r(_t,Wt+j*w.R,Ee,ke+32*j,16);for(j=0;8>j;++j)r(Ut,Dt+j*w.B,Te,$e+32*j,8),r(ct,mt+j*w.B,ut,Ot+32*j,8)}}function Qo(w,M,j,re,ye,xe,Ee,ke,Te){var $e=[0],ut=[0],Ot=0,Dt=Te!=null?Te.kd:0,_t=Te??new jo;if(w==null||12>j)return 7;_t.data=w,_t.w=M,_t.ha=j,M=[M],j=[j],_t.gb=[_t.gb];e:{var Wt=M,Ut=j,ct=_t.gb;if(e(w!=null),e(Ut!=null),e(ct!=null),ct[0]=0,12<=Ut[0]&&!n(w,Wt[0],"RIFF")){if(n(w,Wt[0]+8,"WEBP")){ct=3;break e}var mt=le(w,Wt[0]+4);if(12>mt||4294967286<mt){ct=3;break e}if(Dt&&mt>Ut[0]-8){ct=7;break e}ct[0]=mt,Wt[0]+=12,Ut[0]-=12}ct=0}if(ct!=0)return ct;for(mt=0<_t.gb[0],j=j[0];;){e:{var Jt=w;Ut=M,ct=j;var un=$e,en=ut,Pn=Wt=[0];if((h=Ot=[Ot])[0]=0,8>ct[0])ct=7;else{if(!n(Jt,Ut[0],"VP8X")){if(le(Jt,Ut[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var xn=le(Jt,Ut[0]+8),Gn=1+bt(Jt,Ut[0]+12);if(2147483648<=Gn*(Jt=1+bt(Jt,Ut[0]+15))){ct=3;break e}Pn!=null&&(Pn[0]=xn),un!=null&&(un[0]=Gn),en!=null&&(en[0]=Jt),Ut[0]+=18,ct[0]-=18,h[0]=1}ct=0}}if(Ot=Ot[0],Wt=Wt[0],ct!=0)return ct;if(Ut=!!(2&Wt),!mt&&Ot)return 3;if(xe!=null&&(xe[0]=!!(16&Wt)),Ee!=null&&(Ee[0]=Ut),ke!=null&&(ke[0]=0),Ee=$e[0],Wt=ut[0],Ot&&Ut&&Te==null){ct=0;break}if(4>j){ct=7;break}if(mt&&Ot||!mt&&!Ot&&!n(w,M[0],"ALPH")){j=[j],_t.na=[_t.na],_t.P=[_t.P],_t.Sa=[_t.Sa];e:{xn=w,ct=M,mt=j;var h=_t.gb;un=_t.na,en=_t.P,Pn=_t.Sa,Gn=22,e(xn!=null),e(mt!=null),Jt=ct[0];var g=mt[0];for(e(un!=null),e(Pn!=null),un[0]=null,en[0]=null,Pn[0]=0;;){if(ct[0]=Jt,mt[0]=g,8>g){ct=7;break e}var _=le(xn,Jt+4);if(4294967286<_){ct=3;break e}var x=8+_+1&-2;if(Gn+=x,0<h&&Gn>h){ct=3;break e}if(!n(xn,Jt,"VP8 ")||!n(xn,Jt,"VP8L")){ct=0;break e}if(g[0]<x){ct=7;break e}n(xn,Jt,"ALPH")||(un[0]=xn,en[0]=Jt+8,Pn[0]=_),Jt+=x,g-=x}}if(j=j[0],_t.na=_t.na[0],_t.P=_t.P[0],_t.Sa=_t.Sa[0],ct!=0)break}j=[j],_t.Ja=[_t.Ja],_t.xa=[_t.xa];e:if(h=w,ct=M,mt=j,un=_t.gb[0],en=_t.Ja,Pn=_t.xa,xn=ct[0],Jt=!n(h,xn,"VP8 "),Gn=!n(h,xn,"VP8L"),e(h!=null),e(mt!=null),e(en!=null),e(Pn!=null),8>mt[0])ct=7;else{if(Jt||Gn){if(h=le(h,xn+4),12<=un&&h>un-12){ct=3;break e}if(Dt&&h>mt[0]-8){ct=7;break e}en[0]=h,ct[0]+=8,mt[0]-=8,Pn[0]=Gn}else Pn[0]=5<=mt[0]&&h[xn+0]==47&&!(h[xn+4]>>5),en[0]=mt[0];ct=0}if(j=j[0],_t.Ja=_t.Ja[0],_t.xa=_t.xa[0],M=M[0],ct!=0)break;if(4294967286<_t.Ja)return 3;if(ke==null||Ut||(ke[0]=_t.xa?2:1),Ee=[Ee],Wt=[Wt],_t.xa){if(5>j){ct=7;break}ke=Ee,Dt=Wt,Ut=xe,w==null||5>j?w=0:5<=j&&w[M+0]==47&&!(w[M+4]>>5)?(mt=[0],h=[0],un=[0],ie(en=new Z,w,M,j),He(en,mt,h,un)?(ke!=null&&(ke[0]=mt[0]),Dt!=null&&(Dt[0]=h[0]),Ut!=null&&(Ut[0]=un[0]),w=1):w=0):w=0}else{if(10>j){ct=7;break}ke=Wt,w==null||10>j||!$a(w,M+3,j-3)?w=0:(Dt=w[M+0]|w[M+1]<<8|w[M+2]<<16,Ut=16383&(w[M+7]<<8|w[M+6]),w=16383&(w[M+9]<<8|w[M+8]),1&Dt||3<(Dt>>1&7)||!(Dt>>4&1)||Dt>>5>=_t.Ja||!Ut||!w?w=0:(Ee&&(Ee[0]=Ut),ke&&(ke[0]=w),w=1))}if(!w||(Ee=Ee[0],Wt=Wt[0],Ot&&($e[0]!=Ee||ut[0]!=Wt)))return 3;Te!=null&&(Te[0]=_t,Te.offset=M-Te.w,e(4294967286>M-Te.w),e(Te.offset==Te.ha-j));break}return ct==0||ct==7&&Ot&&Te==null?(xe!=null&&(xe[0]|=_t.na!=null&&0<_t.na.length),re!=null&&(re[0]=Ee),ye!=null&&(ye[0]=Wt),0):ct}function zu(w,M,j){var re=M.width,ye=M.height,xe=0,Ee=0,ke=re,Te=ye;if(M.Da=w!=null&&0<w.Da,M.Da&&(ke=w.cd,Te=w.bd,xe=w.v,Ee=w.j,11>j||(xe&=-2,Ee&=-2),0>xe||0>Ee||0>=ke||0>=Te||xe+ke>re||Ee+Te>ye))return 0;if(M.v=xe,M.j=Ee,M.va=xe+ke,M.o=Ee+Te,M.U=ke,M.T=Te,M.da=w!=null&&0<w.da,M.da){if(!Se(ke,Te,j=[w.ib],xe=[w.hb]))return 0;M.ib=j[0],M.hb=xe[0]}return M.ob=w!=null&&w.ob,M.Kb=w==null||!w.Sd,M.da&&(M.ob=M.ib<3*re/4&&M.hb<3*ye/4,M.Kb=0),1}function Za(w){if(w==null)return 2;if(11>w.S){var M=w.f.RGBA;M.fb+=(w.height-1)*M.A,M.A=-M.A}else M=w.f.kb,w=w.height,M.O+=(w-1)*M.fa,M.fa=-M.fa,M.N+=(w-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(w-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(w-1)*M.lb,M.lb=-M.lb);return 0}function Ka(w,M,j,re){if(re==null||0>=w||0>=M)return 2;if(j!=null){if(j.Da){var ye=j.cd,xe=j.bd,Ee=-2&j.v,ke=-2&j.j;if(0>Ee||0>ke||0>=ye||0>=xe||Ee+ye>w||ke+xe>M)return 2;w=ye,M=xe}if(j.da){if(!Se(w,M,ye=[j.ib],xe=[j.hb]))return 2;w=ye[0],M=xe[0]}}re.width=w,re.height=M;e:{var Te=re.width,$e=re.height;if(w=re.S,0>=Te||0>=$e||!(w>=to&&13>w))w=2;else{if(0>=re.Rd&&re.sd==null){Ee=xe=ye=M=0;var ut=(ke=Te*dd[w])*$e;if(11>w||(xe=($e+1)/2*(M=(Te+1)/2),w==12&&(Ee=(ye=Te)*$e)),($e=s(ut+2*xe+Ee))==null){w=1;break e}re.sd=$e,11>w?((Te=re.f.RGBA).eb=$e,Te.fb=0,Te.A=ke,Te.size=ut):((Te=re.f.kb).y=$e,Te.O=0,Te.fa=ke,Te.Fd=ut,Te.f=$e,Te.N=0+ut,Te.Ab=M,Te.Cd=xe,Te.ea=$e,Te.W=0+ut+xe,Te.Db=M,Te.Ed=xe,w==12&&(Te.F=$e,Te.J=0+ut+2*xe),Te.Tc=Ee,Te.lb=ye)}if(M=1,ye=re.S,xe=re.width,Ee=re.height,ye>=to&&13>ye)if(11>ye)w=re.f.RGBA,M&=(ke=Math.abs(w.A))*(Ee-1)+xe<=w.size,M&=ke>=xe*dd[ye],M&=w.eb!=null;else{w=re.f.kb,ke=(xe+1)/2,ut=(Ee+1)/2,Te=Math.abs(w.fa),$e=Math.abs(w.Ab);var Ot=Math.abs(w.Db),Dt=Math.abs(w.lb),_t=Dt*(Ee-1)+xe;M&=Te*(Ee-1)+xe<=w.Fd,M&=$e*(ut-1)+ke<=w.Cd,M=(M&=Ot*(ut-1)+ke<=w.Ed)&Te>=xe&$e>=ke&Ot>=ke,M&=w.y!=null,M&=w.f!=null,M&=w.ea!=null,ye==12&&(M&=Dt>=xe,M&=_t<=w.Tc,M&=w.F!=null)}else M=0;w=M?0:2}}return w!=0||j!=null&&j.fd&&(w=Za(re)),w}var Yi=64,ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bo=24,Qs=32,_l=8,Cs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(w){return w},V.Predictor2=function(w,M,j){return M[j+0]},V.Predictor3=function(w,M,j){return M[j+1]},V.Predictor4=function(w,M,j){return M[j-1]},V.Predictor5=function(w,M,j){return dt(dt(w,M[j+1]),M[j+0])},V.Predictor6=function(w,M,j){return dt(w,M[j-1])},V.Predictor7=function(w,M,j){return dt(w,M[j+0])},V.Predictor8=function(w,M,j){return dt(M[j-1],M[j+0])},V.Predictor9=function(w,M,j){return dt(M[j+0],M[j+1])},V.Predictor10=function(w,M,j){return dt(dt(w,M[j-1]),dt(M[j+0],M[j+1]))},V.Predictor11=function(w,M,j){var re=M[j+0];return 0>=Zt(re>>24&255,w>>24&255,(M=M[j-1])>>24&255)+Zt(re>>16&255,w>>16&255,M>>16&255)+Zt(re>>8&255,w>>8&255,M>>8&255)+Zt(255&re,255&w,255&M)?re:w},V.Predictor12=function(w,M,j){var re=M[j+0];return(zt((w>>24&255)+(re>>24&255)-((M=M[j-1])>>24&255))<<24|zt((w>>16&255)+(re>>16&255)-(M>>16&255))<<16|zt((w>>8&255)+(re>>8&255)-(M>>8&255))<<8|zt((255&w)+(255&re)-(255&M)))>>>0},V.Predictor13=function(w,M,j){var re=M[j-1];return(Rt((w=dt(w,M[j+0]))>>24&255,re>>24&255)<<24|Rt(w>>16&255,re>>16&255)<<16|Rt(w>>8&255,re>>8&255)<<8|Rt(w>>0&255,re>>0&255))>>>0};var Fs=V.PredictorAdd0;V.PredictorAdd1=Qt,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var js=V.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var yc,is=V.ColorIndexInverseTransform,ya=V.MapARGB,Ss=V.VP8LColorIndexInverseTransformAlpha,Es=V.MapAlpha,ba=V.VP8LPredictorsAdd=[];ba.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var _a,Ps,cs,ta,_o,ks,vt,Ht,Mt,En,Un,hr,Li,ri,Kl,zs,Ci,na,wa,ra,ia,sa,Ir,Uo,hs,ii,li,$i,gi=s(511),wo=s(2041),eo=s(225),ko=s(767),Uu=0,oa=wo,Zi=eo,pi=ko,Ms=gi,to=0,ir=1,xa=2,La=3,$o=4,Us=5,Gc=6,fs=7,ds=8,Vo=9,u=10,v=[2,3,7],E=[3,3,11],F=[280,256,256,256,40],ne=[0,1,1,1,0],we=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Et=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ft=8,rn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wn=null,Cr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ki=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ps=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Si=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],no=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],aa=[],Ho=[],Mo=[],pf=1,_u=2,Xr=[],As=[];Bt("UpsampleRgbLinePair",Sr,3),Bt("UpsampleBgrLinePair",wi,3),Bt("UpsampleRgbaLinePair",yo,4),Bt("UpsampleBgraLinePair",qi,4),Bt("UpsampleArgbLinePair",Ui,4),Bt("UpsampleRgba4444LinePair",ni,2),Bt("UpsampleRgb565LinePair",Yr,2);var Me=V.UpsampleRgbLinePair,ro=V.UpsampleBgrLinePair,$u=V.UpsampleRgbaLinePair,gs=V.UpsampleBgraLinePair,Pr=V.UpsampleArgbLinePair,Sh=V.UpsampleRgba4444LinePair,ld=V.UpsampleRgb565LinePair,Eh=16,Xa=1<<Eh-1,Yc=-227,gf=482,bp=6,bc=0,Ph=s(256),Xl=s(256),_p=s(256),kh=s(256),Mh=s(gf-Yc),ud=s(gf-Yc);Ls("YuvToRgbRow",Sr,3),Ls("YuvToBgrRow",wi,3),Ls("YuvToRgbaRow",yo,4),Ls("YuvToBgraRow",qi,4),Ls("YuvToArgbRow",Ui,4),Ls("YuvToRgba4444Row",ni,2),Ls("YuvToRgb565Row",Yr,2);var cd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ca=[0,2,8],hd=[8,7,6,4,4,2,2,2,1,1,1,1],fd=1;this.WebPDecodeRGBA=function(w,M,j,re,ye){var xe=ir,Ee=new us,ke=new Nn;Ee.ba=ke,ke.S=xe,ke.width=[ke.width],ke.height=[ke.height];var Te=ke.width,$e=ke.height,ut=new er;if(ut==null||w==null)var Ot=2;else e(ut!=null),Ot=Qo(w,M,j,ut.width,ut.height,ut.Pd,ut.Qd,ut.format,null);if(Ot!=0?Te=0:(Te!=null&&(Te[0]=ut.width[0]),$e!=null&&($e[0]=ut.height[0]),Te=1),Te){ke.width=ke.width[0],ke.height=ke.height[0],re!=null&&(re[0]=ke.width),ye!=null&&(ye[0]=ke.height);e:{if(re=new Eo,(ye=new jo).data=w,ye.w=M,ye.ha=j,ye.kd=1,M=[0],e(ye!=null),((w=Qo(ye.data,ye.w,ye.ha,null,null,null,M,null,ye))==0||w==7)&&M[0]&&(w=4),(M=w)==0){if(e(Ee!=null),re.data=ye.data,re.w=ye.w+ye.offset,re.ha=ye.ha-ye.offset,re.put=Js,re.ac=ki,re.bc=Nt,re.ma=Ee,ye.xa){if((w=Hn())==null){Ee=1;break e}if(function(Dt,_t){var Wt=[0],Ut=[0],ct=[0];t:for(;;){if(Dt==null)return 0;if(_t==null)return Dt.a=2,0;if(Dt.l=_t,Dt.a=0,ie(Dt.m,_t.data,_t.w,_t.ha),!He(Dt.m,Wt,Ut,ct)){Dt.a=3;break t}if(Dt.xb=_u,_t.width=Wt[0],_t.height=Ut[0],!_i(Wt[0],Ut[0],1,Dt,null))break t;return 1}return e(Dt.a!=0),0}(w,re)){if(re=(M=Ka(re.width,re.height,Ee.Oa,Ee.ba))==0){t:{re=w;n:for(;;){if(re==null){re=0;break t}if(e(re.s.yc!=null),e(re.s.Ya!=null),e(0<re.s.Wb),e((j=re.l)!=null),e((ye=j.ma)!=null),re.xb!=0){if(re.ca=ye.ba,re.tb=ye.tb,e(re.ca!=null),!zu(ye.Oa,j,La)){re.a=2;break n}if(!Ur(re,j.width)||j.da)break n;if((j.da||mn(re.ca.S))&&xt(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&xt()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!oe(re.s.vb,re.s.Wa.Xa)){re.a=1;break n}re.xb=0}if(!sr(re,re.V,re.Ba,re.c,re.i,j.o,qt))break n;ye.Dc=re.Ma,re=1;break t}e(re.a!=0),re=0}re=!re}re&&(M=w.a)}else M=w.a}else{if((w=new Wr)==null){Ee=1;break e}if(w.Fa=ye.na,w.P=ye.P,w.qc=ye.Sa,da(w,re)){if((M=Ka(re.width,re.height,Ee.Oa,Ee.ba))==0){if(w.Aa=0,j=Ee.Oa,e((ye=w)!=null),j!=null){if(0<(Te=0>(Te=j.Md)?0:100<Te?255:255*Te/100)){for($e=ut=0;4>$e;++$e)12>(Ot=ye.pb[$e]).lc&&(Ot.ia=Te*hd[0>Ot.lc?0:Ot.lc]>>3),ut|=Ot.ia;ut&&(alert("todo:VP8InitRandom"),ye.ia=1)}ye.Ga=j.Id,100<ye.Ga?ye.Ga=100:0>ye.Ga&&(ye.Ga=0)}gr(w,re)||(M=w.a)}}else M=w.a}M==0&&Ee.Oa!=null&&Ee.Oa.fd&&(M=Za(Ee.ba))}Ee=M}xe=Ee!=0?null:11>xe?ke.f.RGBA.eb:ke.f.kb.y}else xe=null;return xe};var dd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(V,Y){for(var ge="",$=0;$<4;$++)ge+=String.fromCharCode(V[Y++]);return ge}function f(V,Y){return(V[Y+0]<<0|V[Y+1]<<8|V[Y+2]<<16)>>>0}function p(V,Y){return(V[Y+0]<<0|V[Y+1]<<8|V[Y+2]<<16|V[Y+3]<<24)>>>0}new l;var y=[0],m=[0],C=[],S=new l,T=t,O=function(V,Y){var ge={},$=0,W=!1,se=0,X=0;if(ge.frames=[],!function(ae,ce,pe,Le){for(var Pe=0;Pe<Le;Pe++)if(ae[ce+Pe]!=pe.charCodeAt(Pe))return!0;return!1}(V,Y,"RIFF",4)){var U,R;for(p(V,Y+=4),Y+=8;Y<V.length;){var ee=c(V,Y),ie=p(V,Y+=4);Y+=4;var fe=ie+(1&ie);switch(ee){case"VP8 ":case"VP8L":ge.frames[$]===void 0&&(ge.frames[$]={}),(Z=ge.frames[$]).src_off=W?X:Y-8,Z.src_size=se+ie+8,$++,W&&(W=!1,se=0,X=0);break;case"VP8X":(Z=ge.header={}).feature_flags=V[Y];var me=Y+4;Z.canvas_width=1+f(V,me),me+=3,Z.canvas_height=1+f(V,me),me+=3;break;case"ALPH":W=!0,se=fe+8,X=Y-8;break;case"ANIM":(Z=ge.header).bgcolor=p(V,Y),me=Y+4,Z.loop_count=(U=V)[(R=me)+0]<<0|U[R+1]<<8,me+=2;break;case"ANMF":var Oe,Z;(Z=ge.frames[$]={}).offset_x=2*f(V,Y),Y+=3,Z.offset_y=2*f(V,Y),Y+=3,Z.width=1+f(V,Y),Y+=3,Z.height=1+f(V,Y),Y+=3,Z.duration=f(V,Y),Y+=3,Oe=V[Y++],Z.dispose=1&Oe,Z.blend=Oe>>1&1}ee!="ANMF"&&(Y+=fe)}return ge}}(T,0);O.response=T,O.rgbaoutput=!0,O.dataurl=!1;var D=O.header?O.header:null,B=O.frames?O.frames:null;if(D){D.loop_counter=D.loop_count,y=[D.canvas_height],m=[D.canvas_width];for(var z=0;z<B.length&&B[z].blend!=0;z++);}var H=B[0],J=S.WebPDecodeRGBA(T,H.src_off,H.src_size,m,y);H.rgba=J,H.imgwidth=m[0],H.imgheight=y[0];for(var Q=0;Q<m[0]*y[0]*4;Q++)C[Q]=J[Q];return this.width=m,this.height=y,this.data=C,this}(function(t){var e=function(){return typeof z2=="function"},n=function(y,m,C,S){var T=4,O=o;switch(S){case t.image_compression.FAST:T=1,O=s;break;case t.image_compression.MEDIUM:T=6,O=a;break;case t.image_compression.SLOW:T=9,O=l}y=r(y,m,C,O);var D=z2(y,{level:T});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(y,m,C,S){for(var T,O,D,B=y.length/m,z=new Uint8Array(y.length+B),H=f(),J=0;J<B;J+=1){if(D=J*m,T=y.subarray(D,D+m),S)z.set(S(T,C,O),D+J);else{for(var Q,V=H.length,Y=[];Q<V;Q+=1)Y[Q]=H[Q](T,C,O);var ge=p(Y.concat());z.set(Y[ge],D+J)}O=T}return z},i=function(y){var m=Array.apply([],y);return m.unshift(0),m},s=function(y,m){var C,S=[],T=y.length;S[0]=1;for(var O=0;O<T;O+=1)C=y[O-m]||0,S[O+1]=y[O]-C+256&255;return S},o=function(y,m,C){var S,T=[],O=y.length;T[0]=2;for(var D=0;D<O;D+=1)S=C&&C[D]||0,T[D+1]=y[D]-S+256&255;return T},a=function(y,m,C){var S,T,O=[],D=y.length;O[0]=3;for(var B=0;B<D;B+=1)S=y[B-m]||0,T=C&&C[B]||0,O[B+1]=y[B]+256-(S+T>>>1)&255;return O},l=function(y,m,C){var S,T,O,D,B=[],z=y.length;B[0]=4;for(var H=0;H<z;H+=1)S=y[H-m]||0,T=C&&C[H]||0,O=C&&C[H-m]||0,D=c(S,T,O),B[H+1]=y[H]-D+256&255;return B},c=function(y,m,C){if(y===m&&m===C)return y;var S=Math.abs(m-C),T=Math.abs(y-C),O=Math.abs(y+m-C-C);return S<=T&&S<=O?y:T<=O?m:C},f=function(){return[i,s,o,a,l]},p=function(y){var m=y.map(function(C){return C.reduce(function(S,T){return S+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(y,m,C,S){var T,O,D,B,z,H,J,Q,V,Y,ge,$,W,se,X,U=this.decode.FLATE_DECODE,R="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(D=new B$(y)).imgData,O=D.bits,T=D.colorSpace,z=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){V=(Q=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,ge=new Uint8Array(V*D.colors),Y=new Uint8Array(V);var ee,ie=D.pixelBitlength-D.bits;for(se=0,X=0;se<V;se++){for(W=Q[se],ee=0;ee<ie;)ge[X++]=W>>>ee&255,ee+=D.bits;Y[se]=W>>>ee&255}}if(D.bits===16){V=(Q=new Uint32Array(D.decodePixels().buffer)).length,ge=new Uint8Array(V*(32/D.pixelBitlength)*D.colors),Y=new Uint8Array(V*(32/D.pixelBitlength)),$=D.colors>1,se=0,X=0;for(var fe=0;se<V;)W=Q[se++],ge[X++]=W>>>0&255,$&&(ge[X++]=W>>>16&255,W=Q[se++],ge[X++]=W>>>0&255),Y[fe++]=W>>>16&255;O=8}S!==t.image_compression.NONE&&e()?(y=n(ge,D.width*D.colors,D.colors,S),J=n(Y,D.width,1,S)):(y=ge,J=Y,U=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,H=D.palette,D.transparency.indexed)){var me=D.transparency.indexed,Oe=0;for(se=0,V=me.length;se<V;++se)Oe+=me[se];if((Oe/=255)===V-1&&me.indexOf(0)!==-1)B=[me.indexOf(0)];else if(Oe!==V){for(Q=D.decodePixels(),Y=new Uint8Array(Q.length),se=0,V=Q.length;se<V;se++)Y[se]=me[Q[se]];J=n(Y,D.width,1)}}var Z=function(ae){var ce;switch(ae){case t.image_compression.FAST:ce=11;break;case t.image_compression.MEDIUM:ce=13;break;case t.image_compression.SLOW:ce=14;break;default:ce=12}return ce}(S);return U===this.decode.FLATE_DECODE&&(R="/Predictor "+Z+" "),R+="/Colors "+z+" /BitsPerComponent "+O+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(J&&this.__addimage__.isArrayBuffer(J)||this.__addimage__.isArrayBufferView(J))&&(J=this.__addimage__.arrayBufferToBinaryString(J)),{alias:C,data:y,index:m,filter:U,decodeParameters:R,transparency:B,palette:H,sMask:J,predictor:Z,width:D.width,height:D.height,bitsPerComponent:O,colorSpace:T}}}})(wr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new R$(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},f=new M1(100).encode(c,100);return t.processJPEG.call(this,f,n,r,i)},t.processGIF87A=t.processGIF89A}(wr.API),Xu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Wi.log("bit decode error:"+n)}},Xu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Xu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Xu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Xu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=c}this.pos+=t}},Xu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},Xu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Xu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Xu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Xu(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new M1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(wr.API),X4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new X4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new M1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(wr.API),wr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var f=r[c],p=r[c+1],y=r[c+2],m=r[c+3];s[a++]=f,s[a++]=p,s[a++]=y,o[l++]=m}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Md=wr.API,e0=Md.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,p=e.doKerning!==!1,y=0,m=t.length,C=0,S=a[0]||l,T=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=p&&Ni(c[r])==="object"&&!isNaN(parseInt(c[r][C],10))?c[r][C]/f:0,T.push((a[r]||S)/l+y)),C=r;return T},q4=Md.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Md.processArabic&&(t=Md.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:e0.apply(this,arguments).reduce(function(s,o){return s+o},0)},Y4=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Z4=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,f=[],p=[f],y=n.textIndent||0,m=0,C=0,S=t.split(" "),T=e0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var O=Array(l).join(" "),D=[];S.map(function(z){(z=z.split(/\s*\n/)).length>1?D=D.concat(z.map(function(H,J){return(J&&H.length?`
`:"")+H})):D.push(z[0])}),S=D,l=q4.apply(this,[O,n])}for(s=0,o=S.length;s<o;s++){var B=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),B=1),y+m+(C=(i=e0.apply(this,[r,n])).reduce(function(z,H){return z+H},0))>e||B){if(C>e){for(a=Y4.apply(this,[r,i,e-(y+m),e]),f.push(a.shift()),f=[a.pop()];a.length;)p.push([a.shift()]);C=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(z,H){return z+H},0)}else f=[r];p.push(f),y=C+l,m=T}else f.push(r),y+=m+C,m=T}return c=l?function(z,H){return(H?O:"")+z.join(" ")}:function(z){return z.join(" ")},p.map(c)},Md.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Z4.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var y,m,C,S,T=["{"];for(var O in p){if(y=p[O],isNaN(parseInt(O,10))?m="'"+O+"'":(O=parseInt(O,10),m=(m=s(O).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof y=="number")y<0?(C=s(y).slice(3),S="-"):(C=s(y).slice(2),S=""),C=S+C.slice(0,-1)+r[C.slice(-1)];else{if(Ni(y)!=="object")throw new Error("Don't know what to do with value type "+Ni(y)+".");C=o(y)}T.push(m+C)}return T.push("}"),T.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,m,C,S,T={},O=1,D=T,B=[],z="",H="",J=p.length-1,Q=1;Q<J;Q+=1)(S=p[Q])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(B.push([D,C]),D={},C=void 0):S=="}"?((m=B.pop())[0][m[1]]=D,C=void 0,D=m[0]):S=="-"?O=-1:C===void 0?n.hasOwnProperty(S)?(z+=n[S],C=parseInt(z,16)*O,O=1,z=""):z+=S:n.hasOwnProperty(S)?(H+=n[S],D[C]=parseInt(H,16)*O,O=1,C=void 0,H=""):H+=S;return T},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var y=p.font,m=f.Unicode[y.postScriptName];m&&(y.metadata.Unicode={},y.metadata.Unicode.widths=m.widths,y.metadata.Unicode.kerning=m.kerning);var C=c.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])}(wr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(bg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(wr),function(t){function e(){return(xr.canvg?Promise.resolve(xr.canvg):su(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}wr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Wi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Wi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(C){return C.fromString(p,n,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(y)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),wr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},wr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,f=0,p=0;function y(C,S){var T,O=!1;for(T=0;T<C.length;T+=1)C[T]===S&&(O=!0);return O}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Ni(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,S=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?S.push("/"+C+" /"+n[C].value):S.push("/"+C+" "+n[C].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(wr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],p=0,y=s.length;p<y;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(c[4-a.length],a)}return f.join("")},r=function(s){var o,a,l,c,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,y=(a=Object.keys(s).sort(function(m,C){return m-C})).length;p<y;p++)o=a[p],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",C=0;C<y.length;C++)m+=String.fromCharCode(y[C]);var S=c();f({data:m,addLength1:!0,objectId:S}),l("endobj");var T=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var O=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ud(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ud(a.fontName)),l("/FontDescriptor "+O+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+T+" 0 R"),l("/BaseFont /"+Ud(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,y="",m=0;m<p.length;m++)y+=String.fromCharCode(p[m]);var C=c();f({data:y,addLength1:!0,objectId:C}),l("endobj");var S=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var T=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Ud(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var O=0;O<a.metadata.hmtx.widths.length;O++)a.metadata.hmtx.widths[O]=parseInt(a.metadata.hmtx.widths[O]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Ud(a.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,f=s.options||{},p=s.mutex||{},y=p.pdfEscape,m=p.activeFontKey,C=p.fonts,S=m,T="",O=0,D="",B=C[S].encoding;if(C[S].encoding!=="Identity-H")return{text:a,x:l,y:c,options:f,mutex:p};for(D=a,S=m,Array.isArray(a)&&(D=a[0]),O=0;O<D.length;O+=1)C[S].metadata.hasOwnProperty("cmap")&&(o=C[S].metadata.cmap.unicode.codeMap[D[O].charCodeAt(0)]),o||D[O].charCodeAt(0)<256&&C[S].metadata.hasOwnProperty("Unicode")?T+=D[O]:T+="";var z="";return parseInt(S.slice(1))<14||B==="WinAnsiEncoding"?z=y(T,S).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(z=n(T,C[S])),p.isHex=!0,{text:z,x:l,y:c,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(wr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,f,p=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],O=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,B=0;this.__bidiEngine__={};var z=function($){var W=$.charCodeAt(),se=W>>8,X=S[se];return X!==void 0?p[256*X+(255&W)]:se===252||se===253?"AL":O.test(se)?"L":se===8?"R":"N"},H=function($){for(var W,se=0;se<$.length;se++){if((W=z($.charAt(se)))==="L")return!1;if(W==="R")return!0}return!1},J=function($,W,se,X){var U,R,ee,ie,fe=W[X];switch(fe){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(fe="AN");break;case"AL":D=!0,fe="R";break;case"WS":fe="N";break;case"CS":X<1||X+1>=W.length||(U=se[X-1])!=="EN"&&U!=="AN"||(R=W[X+1])!=="EN"&&R!=="AN"?fe="N":D&&(R="AN"),fe=R===U?R:"N";break;case"ES":fe=(U=X>0?se[X-1]:"B")==="EN"&&X+1<W.length&&W[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&se[X-1]==="EN"){fe="EN";break}if(D){fe="N";break}for(ee=X+1,ie=W.length;ee<ie&&W[ee]==="ET";)ee++;fe=ee<ie&&W[ee]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ie=W.length,ee=X+1;ee<ie&&W[ee]==="NSM";)ee++;if(ee<ie){var me=$[X],Oe=me>=1425&&me<=2303||me===64286;if(U=W[ee],Oe&&(U==="R"||U==="AL")){fe="R";break}}}fe=X<1||(U=W[X-1])==="B"?"N":se[X-1];break;case"B":D=!1,i=!0,fe=B;break;case"S":s=!0,fe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":fe="N"}return fe},Q=function($,W,se){var X=$.split("");return se&&V(X,se,{hiLevel:B}),X.reverse(),W&&W.reverse(),X.join("")},V=function($,W,se){var X,U,R,ee,ie,fe=-1,me=$.length,Oe=0,Z=[],ae=B?m:y,ce=[];for(D=!1,i=!1,s=!1,U=0;U<me;U++)ce[U]=z($[U]);for(R=0;R<me;R++){if(ie=Oe,Z[R]=J($,ce,Z,R),X=240&(Oe=ae[ie][C[Z[R]]]),Oe&=15,W[R]=ee=ae[Oe][5],X>0)if(X===16){for(U=fe;U<R;U++)W[U]=1;fe=-1}else fe=-1;if(ae[Oe][6])fe===-1&&(fe=R);else if(fe>-1){for(U=fe;U<R;U++)W[U]=ee;fe=-1}ce[R]==="B"&&(W[R]=0),se.hiLevel|=ee}s&&function(pe,Le,Pe){for(var Ue=0;Ue<Pe;Ue++)if(pe[Ue]==="S"){Le[Ue]=B;for(var Ne=Ue-1;Ne>=0&&pe[Ne]==="WS";Ne--)Le[Ne]=B}}(ce,W,me)},Y=function($,W,se,X,U){if(!(U.hiLevel<$)){if($===1&&B===1&&!i)return W.reverse(),void(se&&se.reverse());for(var R,ee,ie,fe,me=W.length,Oe=0;Oe<me;){if(X[Oe]>=$){for(ie=Oe+1;ie<me&&X[ie]>=$;)ie++;for(fe=Oe,ee=ie-1;fe<ee;fe++,ee--)R=W[fe],W[fe]=W[ee],W[ee]=R,se&&(R=se[fe],se[fe]=se[ee],se[ee]=R);Oe=ie}Oe++}}},ge=function($,W,se){var X=$.split(""),U={hiLevel:B};return se||(se=[]),V(X,se,U),function(R,ee,ie){if(ie.hiLevel!==0&&f)for(var fe,me=0;me<R.length;me++)ee[me]===1&&(fe=T.indexOf(R[me]))>=0&&(R[me]=T[fe+1])}(X,se,U),Y(2,X,W,se,U),Y(1,X,W,se,U),X.join("")};return this.__bidiEngine__.doBidiReorder=function($,W,se){if(function(U,R){if(R)for(var ee=0;ee<U.length;ee++)R[ee]=ee;a===void 0&&(a=H(U)),c===void 0&&(c=H(U))}($,W),o||!l||c)if(o&&l&&a^c)B=a?1:0,$=Q($,W,se);else if(!o&&l&&c)B=a?1:0,$=ge($,W,se),$=Q($,W);else if(!o||a||l||c){if(o&&!l&&a^c)$=Q($,W),a?(B=0,$=ge($,W,se)):(B=1,$=ge($,W,se),$=Q($,W));else if(o&&a&&!l&&c)B=1,$=ge($,W,se),$=Q($,W);else if(!o&&!l&&a^c){var X=f;a?(B=1,$=ge($,W,se),B=0,f=!1,$=ge($,W,se),f=X):(B=0,$=ge($,W,se),$=Q($,W),B=1,f=!1,$=ge($,W,se),f=X,$=Q($,W))}}else B=0,$=ge($,W,se);else B=a?1:0,$=ge($,W,se);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,l=$.isOutputVisual,a=$.isInputRtl,c=$.isOutputRtl,f=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(wr),wr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new af(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new J$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new F$(this.contents),this.head=new z$(this),this.name=new W$(this),this.cmap=new gE(this),this.toUnicode={},this.hhea=new U$(this),this.maxp=new G$(this),this.hmtx=new q$(this),this.post=new V$(this),this.os2=new $$(this),this.loca=new X$(this),this.glyf=new Y$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var hc,af=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),F$=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,f,p,y,m,C,S;for(S in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),f=16*m-p,(i=new af).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(f),s=16*m,c=i.pos+s,a=null,C=[],n)for(y=n[S],i.writeString(S),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),C=C.concat(y),S==="head"&&(a=c),c+=y.length;c%4;)C.push(0),c++;return i.write(C),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=mE.call(n);n.length%4;)n.push(0);for(s=new af(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),j$={}.hasOwnProperty,Hc=function(t,e){for(var n in e)j$.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};hc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var z$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new af).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),J4=function(){function t(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),y=m/2,e.pos+=6,s=function(){var z,H;for(H=[],l=z=0;0<=y?z<y:z>y;l=0<=y?++z:--z)H.push(e.readUInt16());return H}(),e.pos+=2,S=function(){var z,H;for(H=[],l=z=0;0<=y?z<y:z>y;l=0<=y?++z:--z)H.push(e.readUInt16());return H}(),c=function(){var z,H;for(H=[],l=z=0;0<=y?z<y:z>y;l=0<=y?++z:--z)H.push(e.readUInt16());return H}(),f=function(){var z,H;for(H=[],l=z=0;0<=y?z<y:z>y;l=0<=y?++z:--z)H.push(e.readUInt16());return H}(),i=(this.length-e.pos+this.offset)/2,a=function(){var z,H;for(H=[],l=z=0;0<=i?z<i:z>i;l=0<=i?++z:--z)H.push(e.readUInt16());return H}(),l=O=0,B=s.length;O<B;l=++O)for(T=s[l],r=D=C=S[l];C<=T?D<=T:D>=T;r=C<=T?++D:--D)f[l]===0?o=r+c[l]:(o=a[f[l]/2+(r-C)-(y-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,B,z,H,J,Q,V,Y,ge,$,W,se,X,U,R,ee,ie,fe,me,Oe,Z,ae,ce,pe,Le,Pe,Ue,Ne,nt,pt,bt;switch(X=new af,o=Object.keys(e).sort(function(le,oe){return le-oe}),n){case"macroman":for(S=0,T=function(){var le=[];for(C=0;C<256;++C)le.push(0);return le}(),D={0:0},s={},U=0,fe=o.length;U<fe;U++)D[Ne=e[i=o[U]]]==null&&(D[Ne]=++S),s[i]={old:e[i],new:D[e[i]]},T[i]=D[e[i]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(T),{charMap:s,subtable:X.data,maxGlyphID:S+1};case"unicode":for(W=[],p=[],B=0,D={},r={},O=c=null,R=0,me=o.length;R<me;R++)D[H=e[i=o[R]]]==null&&(D[H]=++B),r[i]={old:H,new:D[H]},a=D[H]-i,O!=null&&a===c||(O&&p.push(O),W.push(i),c=a),O=i;for(O&&p.push(O),p.push(65535),W.push(65535),ge=2*(Y=W.length),V=2*Math.pow(Math.log(Y)/Math.LN2,2),y=Math.log(V/2)/Math.LN2,Q=2*Y-V,l=[],J=[],m=[],C=ee=0,Oe=W.length;ee<Oe;C=++ee){if($=W[C],f=p[C],$===65535){l.push(0),J.push(0);break}if($-(se=r[$].new)>=32768)for(l.push(0),J.push(2*(m.length+Y-C)),i=ie=$;$<=f?ie<=f:ie>=f;i=$<=f?++ie:--ie)m.push(r[i].new);else l.push(se-$),J.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*Y+2*m.length),X.writeUInt16(0),X.writeUInt16(ge),X.writeUInt16(V),X.writeUInt16(y),X.writeUInt16(Q),Pe=0,Z=p.length;Pe<Z;Pe++)i=p[Pe],X.writeUInt16(i);for(X.writeUInt16(0),Ue=0,ae=W.length;Ue<ae;Ue++)i=W[Ue],X.writeUInt16(i);for(nt=0,ce=l.length;nt<ce;nt++)a=l[nt],X.writeUInt16(a);for(pt=0,pe=J.length;pt<pe;pt++)z=J[pt],X.writeUInt16(z);for(bt=0,Le=m.length;bt<Le;bt++)S=m[bt],X.writeUInt16(S);return{charMap:r,subtable:X.data,maxGlyphID:B+1}}},t}(),gE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new J4(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=J4.encode(n,r),(s=new af).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),U$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),$$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),V$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),H$=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},W$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,f,p,y,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,y=i.length;p<y;o=++p)s=i[o],n.pos=s.offset,f=n.readString(s.length),a=new H$(f,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),G$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),q$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)p.push(n.readInt16());return p}(),this.widths=(function(){var f,p,y,m;for(m=[],f=0,p=(y=this.metrics).length;f<p;f++)o=y[f],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),mE=[].slice,Y$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,f,p,y;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new af(r.read(s))).readShort(),f=l.readShort(),y=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new K$(l,f,y,c,p):new Z$(l,a,f,y,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),Z$=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),K$=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new af(mE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),X$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e}(),J$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O;for(i in r=gE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},O=r.charMap)m[(l=O[i]).old]=l.new;for(C in y=r.maxGlyphID,o)C in m||(m[C]=y++);return f=function(D){var B,z;for(B in z={},D)z[D[B]]=B;return z}(m),p=Object.keys(f).sort(function(D,B){return D-B}),S=function(){var D,B,z;for(z=[],D=0,B=p.length;D<B;D++)a=p[D],z.push(f[a]);return z}(),s=this.font.glyf.encode(o,S,m),c=this.font.loca.encode(s.offsets,S),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();wr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();var yv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */yv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",p=1,y=2,m=4,C=1,S=2,T=1,O=2,D=4,B=8,z=16,H=32,J=64,Q=128,V=256,Y=512,ge=30,$="...",W=800,se=16,X=1,U=2,R=3,ee=1/0,ie=9007199254740991,fe=17976931348623157e292,me=NaN,Oe=4294967295,Z=Oe-1,ae=Oe>>>1,ce=[["ary",Q],["bind",T],["bindKey",O],["curry",B],["curryRight",z],["flip",Y],["partial",H],["partialRight",J],["rearg",V]],pe="[object Arguments]",Le="[object Array]",Pe="[object AsyncFunction]",Ue="[object Boolean]",Ne="[object Date]",nt="[object DOMException]",pt="[object Error]",bt="[object Function]",le="[object GeneratorFunction]",oe="[object Map]",ue="[object Number]",te="[object Null]",Se="[object Object]",Ve="[object Promise]",Xe="[object Proxy]",at="[object RegExp]",ot="[object Set]",dt="[object String]",zt="[object Symbol]",Rt="[object Undefined]",Zt="[object WeakMap]",Qt="[object WeakSet]",pn="[object ArrayBuffer]",Sn="[object DataView]",Ze="[object Float32Array]",it="[object Float64Array]",Je="[object Int8Array]",$t="[object Int16Array]",Kt="[object Int32Array]",_n="[object Uint8Array]",gn="[object Uint8ClampedArray]",bn="[object Uint16Array]",Rn="[object Uint32Array]",mn=/\b__p \+= '';/g,nn=/\b(__p \+=) '' \+/g,cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nn=/&(?:amp|lt|gt|quot|#39);/g,er=/[&<>"']/g,ar=RegExp(Nn.source),zn=RegExp(er.source),Lr=/<%-([\s\S]+?)%>/g,ns=/<%([\s\S]+?)%>/g,ki=/<%=([\s\S]+?)%>/g,Js=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nt=/^\w*$/,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,Bn=RegExp(Vt.source),Vn=/^\s+/,Ln=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wt=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /,wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tn=/[()=,{}\[\]\/\s]/,Xn=/\\(\\)?/g,sr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kr=/\w*$/,Hn=/^[-+]0x[0-9a-f]+$/i,_i=/^0b[01]+$/i,Ur=/^\[object .+?Constructor\]$/,Xo=/^0o[0-7]+$/i,lr=/^(?:0|[1-9]\d*)$/,ur=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bi=/($^)/,So=/['\n\r\u2028\u2029\\]/g,fu="\\ud800-\\udfff",Wc="\\u0300-\\u036f",du="\\ufe20-\\ufe2f",fc="\\u20d0-\\u20ff",dc=Wc+du+fc,cl="\\u2700-\\u27bf",hl="a-z\\xdf-\\xf6\\xf8-\\xff",Nu="\\xac\\xb1\\xd7\\xf7",pc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Eo="\\u2000-\\u206f",Wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",$a="\\ufe0e\\ufe0f",da=Nu+pc+Eo+Wr,Io="['’]",Ul="["+fu+"]",gr="["+da+"]",Gr="["+dc+"]",Va="\\d+",ws="["+cl+"]",xs="["+hl+"]",Bu="[^"+fu+da+Va+cl+hl+fr+"]",fl="\\ud83c[\\udffb-\\udfff]",pa="(?:"+Gr+"|"+fl+")",Ti="[^"+fu+"]",No="(?:\\ud83c[\\udde6-\\uddff]){2}",Ha="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="["+fr+"]",pu="\\u200d",Wa="(?:"+xs+"|"+Bu+")",Ru="(?:"+mo+"|"+Bu+")",Bo="(?:"+Io+"(?:d|ll|m|re|s|t|ve))?",ga="(?:"+Io+"(?:D|LL|M|RE|S|T|VE))?",Ga=pa+"?",$l="["+$a+"]?",rs="(?:"+pu+"(?:"+[Ti,No,Ha].join("|")+")"+$l+Ga+")*",gc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cr=$l+Ga+rs,mr="(?:"+[ws,No,Ha].join("|")+")"+cr,Ro="(?:"+[Ti+Gr+"?",Gr,No,Ha,Ul].join("|")+")",$r=RegExp(Io,"g"),Fu=RegExp(Gr,"g"),dl=RegExp(fl+"(?="+fl+")|"+Ro+cr,"g"),pl=RegExp([mo+"?"+xs+"+"+Bo+"(?="+[gr,mo,"$"].join("|")+")",Ru+"+"+ga+"(?="+[gr,mo+Wa,"$"].join("|")+")",mo+"?"+Wa+"+"+Bo,mo+"+"+ga,gu,gc,Va,mr].join("|"),"g"),Fo=RegExp("["+pu+fu+dc+$a+"]"),qa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ju=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vl=-1,dr={};dr[Ze]=dr[it]=dr[Je]=dr[$t]=dr[Kt]=dr[_n]=dr[gn]=dr[bn]=dr[Rn]=!0,dr[pe]=dr[Le]=dr[pn]=dr[Ue]=dr[Sn]=dr[Ne]=dr[pt]=dr[bt]=dr[oe]=dr[ue]=dr[Se]=dr[at]=dr[ot]=dr[dt]=dr[Zt]=!1;var Mr={};Mr[pe]=Mr[Le]=Mr[pn]=Mr[Sn]=Mr[Ue]=Mr[Ne]=Mr[Ze]=Mr[it]=Mr[Je]=Mr[$t]=Mr[Kt]=Mr[oe]=Mr[ue]=Mr[Se]=Mr[at]=Mr[ot]=Mr[dt]=Mr[zt]=Mr[_n]=Mr[gn]=Mr[bn]=Mr[Rn]=!0,Mr[pt]=Mr[bt]=Mr[Zt]=!1;var Ya={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gl=parseFloat,Wl=parseInt,vu=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,Dr=typeof self=="object"&&self&&self.Object===Object&&self,Fi=vu||Dr||Function("return this")(),Jn=e&&!e.nodeType&&e,ji=Jn&&!0&&t&&!t.nodeType&&t,ml=ji&&ji.exports===Jn,ma=ml&&vu.process,xi=function(){try{var vt=ji&&ji.require&&ji.require("util").types;return vt||ma&&ma.binding&&ma.binding("util")}catch{}}(),yu=xi&&xi.isArrayBuffer,Jo=xi&&xi.isDate,Gl=xi&&xi.isMap,ql=xi&&xi.isRegExp,Po=xi&&xi.isSet,Yl=xi&&xi.isTypedArray;function ei(vt,Ht,Mt){switch(Mt.length){case 0:return vt.call(Ht);case 1:return vt.call(Ht,Mt[0]);case 2:return vt.call(Ht,Mt[0],Mt[1]);case 3:return vt.call(Ht,Mt[0],Mt[1],Mt[2])}return vt.apply(Ht,Mt)}function vc(vt,Ht,Mt,En){for(var Un=-1,hr=vt==null?0:vt.length;++Un<hr;){var Li=vt[Un];Ht(En,Li,Mt(Li),vt)}return En}function us(vt,Ht){for(var Mt=-1,En=vt==null?0:vt.length;++Mt<En&&Ht(vt[Mt],Mt,vt)!==!1;);return vt}function jo(vt,Ht){for(var Mt=vt==null?0:vt.length;Mt--&&Ht(vt[Mt],Mt,vt)!==!1;);return vt}function Zl(vt,Ht){for(var Mt=-1,En=vt==null?0:vt.length;++Mt<En;)if(!Ht(vt[Mt],Mt,vt))return!1;return!0}function zo(vt,Ht){for(var Mt=-1,En=vt==null?0:vt.length,Un=0,hr=[];++Mt<En;){var Li=vt[Mt];Ht(Li,Mt,vt)&&(hr[Un++]=Li)}return hr}function vl(vt,Ht){var Mt=vt==null?0:vt.length;return!!Mt&&an(vt,Ht,0)>-1}function yl(vt,Ht,Mt){for(var En=-1,Un=vt==null?0:vt.length;++En<Un;)if(Mt(Ht,vt[En]))return!0;return!1}function ti(vt,Ht){for(var Mt=-1,En=vt==null?0:vt.length,Un=Array(En);++Mt<En;)Un[Mt]=Ht(vt[Mt],Mt,vt);return Un}function vo(vt,Ht){for(var Mt=-1,En=Ht.length,Un=vt.length;++Mt<En;)vt[Un+Mt]=Ht[Mt];return vt}function va(vt,Ht,Mt,En){var Un=-1,hr=vt==null?0:vt.length;for(En&&hr&&(Mt=vt[++Un]);++Un<hr;)Mt=Ht(Mt,vt[Un],Un,vt);return Mt}function zi(vt,Ht,Mt,En){var Un=vt==null?0:vt.length;for(En&&Un&&(Mt=vt[--Un]);Un--;)Mt=Ht(Mt,vt[Un],Un,vt);return Mt}function I(vt,Ht){for(var Mt=-1,En=vt==null?0:vt.length;++Mt<En;)if(Ht(vt[Mt],Mt,vt))return!0;return!1}var ve=or("length");function We(vt){return vt.split("")}function st(vt){return vt.match(wn)||[]}function xt(vt,Ht,Mt){var En;return Mt(vt,function(Un,hr,Li){if(Ht(Un,hr,Li))return En=hr,!1}),En}function Bt(vt,Ht,Mt,En){for(var Un=vt.length,hr=Mt+(En?1:-1);En?hr--:++hr<Un;)if(Ht(vt[hr],hr,vt))return hr;return-1}function an(vt,Ht,Mt){return Ht===Ht?is(vt,Ht,Mt):Bt(vt,On,Mt)}function kn(vt,Ht,Mt,En){for(var Un=Mt-1,hr=vt.length;++Un<hr;)if(En(vt[Un],Ht))return Un;return-1}function On(vt){return vt!==vt}function Zn(vt,Ht){var Mt=vt==null?0:vt.length;return Mt?ni(vt,Ht)/Mt:me}function or(vt){return function(Ht){return Ht==null?n:Ht[vt]}}function Sr(vt){return function(Ht){return vt==null?n:vt[Ht]}}function wi(vt,Ht,Mt,En,Un){return Un(vt,function(hr,Li,ri){Mt=En?(En=!1,hr):Ht(Mt,hr,Li,ri)}),Mt}function Yr(vt,Ht){var Mt=vt.length;for(vt.sort(Ht);Mt--;)vt[Mt]=vt[Mt].value;return vt}function ni(vt,Ht){for(var Mt,En=-1,Un=vt.length;++En<Un;){var hr=Ht(vt[En]);hr!==n&&(Mt=Mt===n?hr:Mt+hr)}return Mt}function Ui(vt,Ht){for(var Mt=-1,En=Array(vt);++Mt<vt;)En[Mt]=Ht(Mt);return En}function qi(vt,Ht){return ti(Ht,function(Mt){return[Mt,vt[Mt]]})}function yo(vt){return vt&&vt.slice(0,ba(vt)+1).replace(Vn,"")}function Er(vt){return function(Ht){return vt(Ht)}}function Ls(vt,Ht){return ti(Ht,function(Mt){return vt[Mt]})}function bl(vt,Ht){return vt.has(Ht)}function Rs(vt,Ht){for(var Mt=-1,En=vt.length;++Mt<En&&an(Ht,vt[Mt],0)>-1;);return Mt}function bu(vt,Ht){for(var Mt=vt.length;Mt--&&an(Ht,vt[Mt],0)>-1;);return Mt}function Qo(vt,Ht){for(var Mt=vt.length,En=0;Mt--;)vt[Mt]===Ht&&++En;return En}var zu=Sr(Ya),Za=Sr(mc);function Ka(vt){return"\\"+mu[vt]}function Yi(vt,Ht){return vt==null?n:vt[Ht]}function ea(vt){return Fo.test(vt)}function bo(vt){return qa.test(vt)}function Qs(vt){for(var Ht,Mt=[];!(Ht=vt.next()).done;)Mt.push(Ht.value);return Mt}function _l(vt){var Ht=-1,Mt=Array(vt.size);return vt.forEach(function(En,Un){Mt[++Ht]=[Un,En]}),Mt}function Cs(vt,Ht){return function(Mt){return vt(Ht(Mt))}}function Fs(vt,Ht){for(var Mt=-1,En=vt.length,Un=0,hr=[];++Mt<En;){var Li=vt[Mt];(Li===Ht||Li===f)&&(vt[Mt]=f,hr[Un++]=Mt)}return hr}function js(vt){var Ht=-1,Mt=Array(vt.size);return vt.forEach(function(En){Mt[++Ht]=En}),Mt}function yc(vt){var Ht=-1,Mt=Array(vt.size);return vt.forEach(function(En){Mt[++Ht]=[En,En]}),Mt}function is(vt,Ht,Mt){for(var En=Mt-1,Un=vt.length;++En<Un;)if(vt[En]===Ht)return En;return-1}function ya(vt,Ht,Mt){for(var En=Mt+1;En--;)if(vt[En]===Ht)return En;return En}function Ss(vt){return ea(vt)?Ps(vt):ve(vt)}function Es(vt){return ea(vt)?cs(vt):We(vt)}function ba(vt){for(var Ht=vt.length;Ht--&&Ln.test(vt.charAt(Ht)););return Ht}var _a=Sr(Hl);function Ps(vt){for(var Ht=dl.lastIndex=0;dl.test(vt);)++Ht;return Ht}function cs(vt){return vt.match(dl)||[]}function ta(vt){return vt.match(pl)||[]}var _o=function vt(Ht){Ht=Ht==null?Fi:ks.defaults(Fi.Object(),Ht,ks.pick(Fi,ju));var Mt=Ht.Array,En=Ht.Date,Un=Ht.Error,hr=Ht.Function,Li=Ht.Math,ri=Ht.Object,Kl=Ht.RegExp,zs=Ht.String,Ci=Ht.TypeError,na=Mt.prototype,wa=hr.prototype,ra=ri.prototype,ia=Ht["__core-js_shared__"],sa=wa.toString,Ir=ra.hasOwnProperty,Uo=0,hs=function(){var d=/[^.]+$/.exec(ia&&ia.keys&&ia.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),ii=ra.toString,li=sa.call(ri),$i=Fi._,gi=Kl("^"+sa.call(Ir).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wo=ml?Ht.Buffer:n,eo=Ht.Symbol,ko=Ht.Uint8Array,Uu=wo?wo.allocUnsafe:n,oa=Cs(ri.getPrototypeOf,ri),Zi=ri.create,pi=ra.propertyIsEnumerable,Ms=na.splice,to=eo?eo.isConcatSpreadable:n,ir=eo?eo.iterator:n,xa=eo?eo.toStringTag:n,La=function(){try{var d=wf(ri,"defineProperty");return d({},"",{}),d}catch{}}(),$o=Ht.clearTimeout!==Fi.clearTimeout&&Ht.clearTimeout,Us=En&&En.now!==Fi.Date.now&&En.now,Gc=Ht.setTimeout!==Fi.setTimeout&&Ht.setTimeout,fs=Li.ceil,ds=Li.floor,Vo=ri.getOwnPropertySymbols,u=wo?wo.isBuffer:n,v=Ht.isFinite,E=na.join,F=Cs(ri.keys,ri),ne=Li.max,we=Li.min,Qe=En.now,Et=Ht.parseInt,Ft=Li.random,rn=na.reverse,Mn=wf(Ht,"DataView"),Wn=wf(Ht,"Map"),Cr=wf(Ht,"Promise"),Ki=wf(Ht,"Set"),Oi=wf(Ht,"WeakMap"),ps=wf(ri,"create"),Si=Oi&&new Oi,no={},qc=xf(Mn),aa=xf(Wn),Ho=xf(Cr),Mo=xf(Ki),pf=xf(Oi),_u=eo?eo.prototype:n,Xr=_u?_u.valueOf:n,As=_u?_u.toString:n;function Me(d){if($s(d)&&!Br(d)&&!(d instanceof Pr)){if(d instanceof gs)return d;if(Ir.call(d,"__wrapped__"))return dw(d)}return new gs(d)}var ro=function(){function d(){}return function(b){if(!Os(b))return{};if(Zi)return Zi(b);d.prototype=b;var A=new d;return d.prototype=n,A}}();function $u(){}function gs(d,b){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Me.templateSettings={escape:Lr,evaluate:ns,interpolate:ki,variable:"",imports:{_:Me}},Me.prototype=$u.prototype,Me.prototype.constructor=Me,gs.prototype=ro($u.prototype),gs.prototype.constructor=gs;function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function Sh(){var d=new Pr(this.__wrapped__);return d.__actions__=xl(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=xl(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=xl(this.__views__),d}function ld(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function Eh(){var d=this.__wrapped__.value(),b=this.__dir__,A=Br(d),q=b<0,be=A?d.length:0,Be=lk(0,be,this.__views__),Ke=Be.start,ft=Be.end,St=ft-Ke,sn=q?ft:Ke-1,on=this.__iteratees__,hn=on.length,In=0,Qn=we(St,this.__takeCount__);if(!A||!q&&be==St&&Qn==St)return wu(d,this.__actions__);var vr=[];e:for(;St--&&In<Qn;){sn+=b;for(var qr=-1,yr=d[sn];++qr<hn;){var si=on[qr],ci=si.iteratee,Ql=si.type,el=ci(yr);if(Ql==U)yr=el;else if(!el){if(Ql==X)continue e;break e}}vr[In++]=yr}return vr}Pr.prototype=ro($u.prototype),Pr.prototype.constructor=Pr;function Xa(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var q=d[b];this.set(q[0],q[1])}}function Yc(){this.__data__=ps?ps(null):{},this.size=0}function gf(d){var b=this.has(d)&&delete this.__data__[d];return this.size-=b?1:0,b}function bp(d){var b=this.__data__;if(ps){var A=b[d];return A===l?n:A}return Ir.call(b,d)?b[d]:n}function bc(d){var b=this.__data__;return ps?b[d]!==n:Ir.call(b,d)}function Ph(d,b){var A=this.__data__;return this.size+=this.has(d)?0:1,A[d]=ps&&b===n?l:b,this}Xa.prototype.clear=Yc,Xa.prototype.delete=gf,Xa.prototype.get=bp,Xa.prototype.has=bc,Xa.prototype.set=Ph;function Xl(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var q=d[b];this.set(q[0],q[1])}}function _p(){this.__data__=[],this.size=0}function kh(d){var b=this.__data__,A=mt(b,d);if(A<0)return!1;var q=b.length-1;return A==q?b.pop():Ms.call(b,A,1),--this.size,!0}function Mh(d){var b=this.__data__,A=mt(b,d);return A<0?n:b[A][1]}function ud(d){return mt(this.__data__,d)>-1}function cd(d,b){var A=this.__data__,q=mt(A,d);return q<0?(++this.size,A.push([d,b])):A[q][1]=b,this}Xl.prototype.clear=_p,Xl.prototype.delete=kh,Xl.prototype.get=Mh,Xl.prototype.has=ud,Xl.prototype.set=cd;function Ca(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var q=d[b];this.set(q[0],q[1])}}function hd(){this.size=0,this.__data__={hash:new Xa,map:new(Wn||Xl),string:new Xa}}function fd(d){var b=km(this,d).delete(d);return this.size-=b?1:0,b}function dd(d){return km(this,d).get(d)}function w(d){return km(this,d).has(d)}function M(d,b){var A=km(this,d),q=A.size;return A.set(d,b),this.size+=A.size==q?0:1,this}Ca.prototype.clear=hd,Ca.prototype.delete=fd,Ca.prototype.get=dd,Ca.prototype.has=w,Ca.prototype.set=M;function j(d){var b=-1,A=d==null?0:d.length;for(this.__data__=new Ca;++b<A;)this.add(d[b])}function re(d){return this.__data__.set(d,l),this}function ye(d){return this.__data__.has(d)}j.prototype.add=j.prototype.push=re,j.prototype.has=ye;function xe(d){var b=this.__data__=new Xl(d);this.size=b.size}function Ee(){this.__data__=new Xl,this.size=0}function ke(d){var b=this.__data__,A=b.delete(d);return this.size=b.size,A}function Te(d){return this.__data__.get(d)}function $e(d){return this.__data__.has(d)}function ut(d,b){var A=this.__data__;if(A instanceof Xl){var q=A.__data__;if(!Wn||q.length<i-1)return q.push([d,b]),this.size=++A.size,this;A=this.__data__=new Ca(q)}return A.set(d,b),this.size=A.size,this}xe.prototype.clear=Ee,xe.prototype.delete=ke,xe.prototype.get=Te,xe.prototype.has=$e,xe.prototype.set=ut;function Ot(d,b){var A=Br(d),q=!A&&Lf(d),be=!A&&!q&&Th(d),Be=!A&&!q&&!be&&xd(d),Ke=A||q||be||Be,ft=Ke?Ui(d.length,zs):[],St=ft.length;for(var sn in d)(b||Ir.call(d,sn))&&!(Ke&&(sn=="length"||be&&(sn=="offset"||sn=="parent")||Be&&(sn=="buffer"||sn=="byteLength"||sn=="byteOffset")||eh(sn,St)))&&ft.push(sn);return ft}function Dt(d){var b=d.length;return b?d[yf(0,b-1)]:n}function _t(d,b){return Mm(xl(d),Gn(b,0,d.length))}function Wt(d){return Mm(xl(d))}function Ut(d,b,A){(A!==n&&!Yu(d[b],A)||A===n&&!(b in d))&&Pn(d,b,A)}function ct(d,b,A){var q=d[b];(!(Ir.call(d,b)&&Yu(q,A))||A===n&&!(b in d))&&Pn(d,b,A)}function mt(d,b){for(var A=d.length;A--;)if(Yu(d[A][0],b))return A;return-1}function Jt(d,b,A,q){return N(d,function(be,Be,Ke){b(q,be,A(be),Ke)}),q}function un(d,b){return d&&xc(b,Wo(b),d)}function en(d,b){return d&&xc(b,Cl(b),d)}function Pn(d,b,A){b=="__proto__"&&La?La(d,b,{configurable:!0,enumerable:!0,value:A,writable:!0}):d[b]=A}function xn(d,b){for(var A=-1,q=b.length,be=Mt(q),Be=d==null;++A<q;)be[A]=Be?n:Uy(d,b[A]);return be}function Gn(d,b,A){return d===d&&(A!==n&&(d=d<=A?d:A),b!==n&&(d=d>=b?d:b)),d}function h(d,b,A,q,be,Be){var Ke,ft=b&p,St=b&y,sn=b&m;if(A&&(Ke=be?A(d,q,be,Be):A(d)),Ke!==n)return Ke;if(!Os(d))return d;var on=Br(d);if(on){if(Ke=ck(d),!ft)return xl(d,Ke)}else{var hn=Ea(d),In=hn==bt||hn==le;if(Th(d))return j_(d,ft);if(hn==Se||hn==pe||In&&!be){if(Ke=St||In?{}:iw(d),!ft)return St?QP(d,en(Ke,d)):JP(d,un(Ke,d))}else{if(!Mr[hn])return be?d:{};Ke=hk(d,hn,ft)}}Be||(Be=new xe);var Qn=Be.get(d);if(Qn)return Qn;Be.set(d,Ke),Dw(d)?d.forEach(function(yr){Ke.add(h(yr,b,A,yr,d,Be))}):Tw(d)&&d.forEach(function(yr,si){Ke.set(si,h(yr,b,A,si,d,Be))});var vr=sn?St?Py:Ey:St?Cl:Wo,qr=on?n:vr(d);return us(qr||d,function(yr,si){qr&&(si=yr,yr=d[si]),ct(Ke,si,h(yr,b,A,si,d,Be))}),Ke}function g(d){var b=Wo(d);return function(A){return _(A,d,b)}}function _(d,b,A){var q=A.length;if(d==null)return!q;for(d=ri(d);q--;){var be=A[q],Be=b[be],Ke=d[be];if(Ke===n&&!(be in d)||!Be(Ke))return!1}return!0}function x(d,b,A){if(typeof d!="function")throw new Ci(o);return Sp(function(){d.apply(n,A)},b)}function k(d,b,A,q){var be=-1,Be=vl,Ke=!0,ft=d.length,St=[],sn=b.length;if(!ft)return St;A&&(b=ti(b,Er(A))),q?(Be=yl,Ke=!1):b.length>=i&&(Be=bl,Ke=!1,b=new j(b));e:for(;++be<ft;){var on=d[be],hn=A==null?on:A(on);if(on=q||on!==0?on:0,Ke&&hn===hn){for(var In=sn;In--;)if(b[In]===hn)continue e;St.push(on)}else Be(b,hn,q)||St.push(on)}return St}var N=H_(Yt),G=H_(fn,!0);function K(d,b){var A=!0;return N(d,function(q,be,Be){return A=!!b(q,be,Be),A}),A}function he(d,b,A){for(var q=-1,be=d.length;++q<be;){var Be=d[q],Ke=b(Be);if(Ke!=null&&(ft===n?Ke===Ke&&!Jl(Ke):A(Ke,ft)))var ft=Ke,St=Be}return St}function _e(d,b,A,q){var be=d.length;for(A=Hr(A),A<0&&(A=-A>be?0:be+A),q=q===n||q>be?be:Hr(q),q<0&&(q+=be),q=A>q?0:Nw(q);A<q;)d[A++]=b;return d}function qe(d,b){var A=[];return N(d,function(q,be,Be){b(q,be,Be)&&A.push(q)}),A}function ze(d,b,A,q,be){var Be=-1,Ke=d.length;for(A||(A=dk),be||(be=[]);++Be<Ke;){var ft=d[Be];b>0&&A(ft)?b>1?ze(ft,b-1,A,q,be):vo(be,ft):q||(be[be.length]=ft)}return be}var gt=W_(),At=W_(!0);function Yt(d,b){return d&&gt(d,b,Wo)}function fn(d,b){return d&&At(d,b,Wo)}function yn(d,b){return zo(b,function(A){return th(d[A])})}function tr(d,b){b=qu(b,d);for(var A=0,q=b.length;d!=null&&A<q;)d=d[Lc(b[A++])];return A&&A==q?d:n}function Ge(d,b,A){var q=b(d);return Br(d)?q:vo(q,A(d))}function Ye(d){return d==null?d===n?Rt:te:xa&&xa in ri(d)?ak(d):_k(d)}function lt(d,b){return d>b}function It(d,b){return d!=null&&Ir.call(d,b)}function yt(d,b){return d!=null&&b in ri(d)}function Tt(d,b,A){return d>=we(b,A)&&d<ne(b,A)}function de(d,b,A){for(var q=A?yl:vl,be=d[0].length,Be=d.length,Ke=Be,ft=Mt(Be),St=1/0,sn=[];Ke--;){var on=d[Ke];Ke&&b&&(on=ti(on,Er(b))),St=we(on.length,St),ft[Ke]=!A&&(b||be>=120&&on.length>=120)?new j(Ke&&on):n}on=d[0];var hn=-1,In=ft[0];e:for(;++hn<be&&sn.length<St;){var Qn=on[hn],vr=b?b(Qn):Qn;if(Qn=A||Qn!==0?Qn:0,!(In?bl(In,vr):q(sn,vr,A))){for(Ke=Be;--Ke;){var qr=ft[Ke];if(!(qr?bl(qr,vr):q(d[Ke],vr,A)))continue e}In&&In.push(vr),sn.push(Qn)}}return sn}function Ce(d,b,A,q){return Yt(d,function(be,Be,Ke){b(q,A(be),Be,Ke)}),q}function Ie(d,b,A){b=qu(b,d),d=lw(d,b);var q=d==null?d:d[Lc(Cu(b))];return q==null?n:ei(q,d,A)}function De(d){return $s(d)&&Ye(d)==pe}function Re(d){return $s(d)&&Ye(d)==pn}function je(d){return $s(d)&&Ye(d)==Ne}function et(d,b,A,q,be){return d===b?!0:d==null||b==null||!$s(d)&&!$s(b)?d!==d&&b!==b:rt(d,b,A,q,et,be)}function rt(d,b,A,q,be,Be){var Ke=Br(d),ft=Br(b),St=Ke?Le:Ea(d),sn=ft?Le:Ea(b);St=St==pe?Se:St,sn=sn==pe?Se:sn;var on=St==Se,hn=sn==Se,In=St==sn;if(In&&Th(d)){if(!Th(b))return!1;Ke=!0,on=!1}if(In&&!on)return Be||(Be=new xe),Ke||xd(d)?tw(d,b,A,q,be,Be):sk(d,b,St,A,q,be,Be);if(!(A&C)){var Qn=on&&Ir.call(d,"__wrapped__"),vr=hn&&Ir.call(b,"__wrapped__");if(Qn||vr){var qr=Qn?d.value():d,yr=vr?b.value():b;return Be||(Be=new xe),be(qr,yr,A,q,Be)}}return In?(Be||(Be=new xe),ok(d,b,A,q,be,Be)):!1}function ht(d){return $s(d)&&Ea(d)==oe}function Lt(d,b,A,q){var be=A.length,Be=be,Ke=!q;if(d==null)return!Be;for(d=ri(d);be--;){var ft=A[be];if(Ke&&ft[2]?ft[1]!==d[ft[0]]:!(ft[0]in d))return!1}for(;++be<Be;){ft=A[be];var St=ft[0],sn=d[St],on=ft[1];if(Ke&&ft[2]){if(sn===n&&!(St in d))return!1}else{var hn=new xe;if(q)var In=q(sn,on,St,d,b,hn);if(!(In===n?et(on,sn,C|S,q,hn):In))return!1}}return!0}function Ct(d){if(!Os(d)||gk(d))return!1;var b=th(d)?gi:Ur;return b.test(xf(d))}function tn(d){return $s(d)&&Ye(d)==at}function Dn(d){return $s(d)&&Ea(d)==ot}function Fn(d){return $s(d)&&Nm(d.length)&&!!dr[Ye(d)]}function qn(d){return typeof d=="function"?d:d==null?Sl:typeof d=="object"?Br(d)?Vu(d[0],d[1]):io(d):Gw(d)}function Jr(d){if(!Cp(d))return F(d);var b=[];for(var A in ri(d))Ir.call(d,A)&&A!="constructor"&&b.push(A);return b}function ui(d){if(!Os(d))return bk(d);var b=Cp(d),A=[];for(var q in d)q=="constructor"&&(b||!Ir.call(d,q))||A.push(q);return A}function Nr(d,b){return d<b}function mi(d,b){var A=-1,q=Ll(d)?Mt(d.length):[];return N(d,function(be,Be,Ke){q[++A]=b(be,Be,Ke)}),q}function io(d){var b=My(d);return b.length==1&&b[0][2]?ow(b[0][0],b[0][1]):function(A){return A===d||Lt(A,d,b)}}function Vu(d,b){return Ty(d)&&sw(b)?ow(Lc(d),b):function(A){var q=Uy(A,d);return q===n&&q===b?$y(A,d):et(b,q,C|S)}}function la(d,b,A,q,be){d!==b&&gt(b,function(Be,Ke){if(be||(be=new xe),Os(Be))mf(d,b,Ke,A,la,q,be);else{var ft=q?q(Dy(d,Ke),Be,Ke+"",d,b,be):n;ft===n&&(ft=Be),Ut(d,Ke,ft)}},Cl)}function mf(d,b,A,q,be,Be,Ke){var ft=Dy(d,A),St=Dy(b,A),sn=Ke.get(St);if(sn){Ut(d,A,sn);return}var on=Be?Be(ft,St,A+"",d,b,Ke):n,hn=on===n;if(hn){var In=Br(St),Qn=!In&&Th(St),vr=!In&&!Qn&&xd(St);on=St,In||Qn||vr?Br(ft)?on=ft:so(ft)?on=xl(ft):Qn?(hn=!1,on=j_(St,!0)):vr?(hn=!1,on=z_(St,!0)):on=[]:Ep(St)||Lf(St)?(on=ft,Lf(ft)?on=Bw(ft):(!Os(ft)||th(ft))&&(on=iw(St))):hn=!1}hn&&(Ke.set(St,on),be(on,St,q,Be,Ke),Ke.delete(St)),Ut(d,A,on)}function Ja(d,b){var A=d.length;if(A)return b+=b<0?A:0,eh(b,A)?d[b]:n}function _c(d,b,A){b.length?b=ti(b,function(Be){return Br(Be)?function(Ke){return tr(Ke,Be.length===1?Be[0]:Be)}:Be}):b=[Sl];var q=-1;b=ti(b,Er(pr()));var be=mi(d,function(Be,Ke,ft){var St=ti(b,function(sn){return sn(Be)});return{criteria:St,index:++q,value:Be}});return Yr(be,function(Be,Ke){return XP(Be,Ke,A)})}function ua(d,b){return Ts(d,b,function(A,q){return $y(d,q)})}function Ts(d,b,A){for(var q=-1,be=b.length,Be={};++q<be;){var Ke=b[q],ft=tr(d,Ke);A(ft,Ke)&&Zc(Be,qu(Ke,d),ft)}return Be}function Vi(d){return function(b){return tr(b,d)}}function pd(d,b,A,q){var be=q?kn:an,Be=-1,Ke=b.length,ft=d;for(d===b&&(b=xl(b)),A&&(ft=ti(d,Er(A)));++Be<Ke;)for(var St=0,sn=b[Be],on=A?A(sn):sn;(St=be(ft,on,St,q))>-1;)ft!==d&&Ms.call(ft,St,1),Ms.call(d,St,1);return d}function vf(d,b){for(var A=d?b.length:0,q=A-1;A--;){var be=b[A];if(A==q||be!==Be){var Be=be;eh(be)?Ms.call(d,be,1):Kc(d,be)}}return d}function yf(d,b){return d+ds(Ft()*(b-d+1))}function bf(d,b,A,q){for(var be=-1,Be=ne(fs((b-d)/(A||1)),0),Ke=Mt(Be);Be--;)Ke[q?Be:++be]=d,d+=A;return Ke}function gd(d,b){var A="";if(!d||b<1||b>ie)return A;do b%2&&(A+=d),b=ds(b/2),b&&(d+=d);while(b);return A}function Vr(d,b){return Iy(aw(d,b,Sl),d+"")}function md(d){return Dt(Ld(d))}function vm(d,b){var A=Ld(d);return Mm(A,Gn(b,0,A.length))}function Zc(d,b,A,q){if(!Os(d))return d;b=qu(b,d);for(var be=-1,Be=b.length,Ke=Be-1,ft=d;ft!=null&&++be<Be;){var St=Lc(b[be]),sn=A;if(St==="__proto__"||St==="constructor"||St==="prototype")return d;if(be!=Ke){var on=ft[St];sn=q?q(on,St,ft):n,sn===n&&(sn=Os(on)?on:eh(b[be+1])?[]:{})}ct(ft,St,sn),ft=ft[St]}return d}var Hu=Si?function(d,b){return Si.set(d,b),d}:Sl,ym=La?function(d,b){return La(d,"toString",{configurable:!0,enumerable:!1,value:Hy(b),writable:!0})}:Sl;function bm(d){return Mm(Ld(d))}function wl(d,b,A){var q=-1,be=d.length;b<0&&(b=-b>be?0:be+b),A=A>be?be:A,A<0&&(A+=be),be=b>A?0:A-b>>>0,b>>>=0;for(var Be=Mt(be);++q<be;)Be[q]=d[q+b];return Be}function _m(d,b){var A;return N(d,function(q,be,Be){return A=b(q,be,Be),!A}),!!A}function Wu(d,b,A){var q=0,be=d==null?q:d.length;if(typeof b=="number"&&b===b&&be<=ae){for(;q<be;){var Be=q+be>>>1,Ke=d[Be];Ke!==null&&!Jl(Ke)&&(A?Ke<=b:Ke<b)?q=Be+1:be=Be}return be}return wp(d,b,Sl,A)}function wp(d,b,A,q){var be=0,Be=d==null?0:d.length;if(Be===0)return 0;b=A(b);for(var Ke=b!==b,ft=b===null,St=Jl(b),sn=b===n;be<Be;){var on=ds((be+Be)/2),hn=A(d[on]),In=hn!==n,Qn=hn===null,vr=hn===hn,qr=Jl(hn);if(Ke)var yr=q||vr;else sn?yr=vr&&(q||In):ft?yr=vr&&In&&(q||!Qn):St?yr=vr&&In&&!Qn&&(q||!qr):Qn||qr?yr=!1:yr=q?hn<=b:hn<b;yr?be=on+1:Be=on}return we(Be,Z)}function xp(d,b){for(var A=-1,q=d.length,be=0,Be=[];++A<q;){var Ke=d[A],ft=b?b(Ke):Ke;if(!A||!Yu(ft,St)){var St=ft;Be[be++]=Ke===0?0:Ke}}return Be}function wm(d){return typeof d=="number"?d:Jl(d)?me:+d}function Sa(d){if(typeof d=="string")return d;if(Br(d))return ti(d,Sa)+"";if(Jl(d))return As?As.call(d):"";var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function wc(d,b,A){var q=-1,be=vl,Be=d.length,Ke=!0,ft=[],St=ft;if(A)Ke=!1,be=yl;else if(Be>=i){var sn=b?null:rk(d);if(sn)return js(sn);Ke=!1,be=bl,St=new j}else St=b?[]:ft;e:for(;++q<Be;){var on=d[q],hn=b?b(on):on;if(on=A||on!==0?on:0,Ke&&hn===hn){for(var In=St.length;In--;)if(St[In]===hn)continue e;b&&St.push(hn),ft.push(on)}else be(St,hn,A)||(St!==ft&&St.push(hn),ft.push(on))}return ft}function Kc(d,b){return b=qu(b,d),d=lw(d,b),d==null||delete d[Lc(Cu(b))]}function vd(d,b,A,q){return Zc(d,b,A(tr(d,b)),q)}function Xc(d,b,A,q){for(var be=d.length,Be=q?be:-1;(q?Be--:++Be<be)&&b(d[Be],Be,d););return A?wl(d,q?0:Be,q?Be+1:be):wl(d,q?Be+1:0,q?be:Be)}function wu(d,b){var A=d;return A instanceof Pr&&(A=A.value()),va(b,function(q,be){return be.func.apply(be.thisArg,vo([q],be.args))},A)}function xu(d,b,A){var q=d.length;if(q<2)return q?wc(d[0]):[];for(var be=-1,Be=Mt(q);++be<q;)for(var Ke=d[be],ft=-1;++ft<q;)ft!=be&&(Be[be]=k(Be[be]||Ke,d[ft],b,A));return wc(ze(Be,1),b,A)}function Gu(d,b,A){for(var q=-1,be=d.length,Be=b.length,Ke={};++q<be;){var ft=q<Be?b[q]:n;A(Ke,d[q],ft)}return Ke}function Ah(d){return so(d)?d:[]}function _f(d){return typeof d=="function"?d:Sl}function qu(d,b){return Br(d)?d:Ty(d,b)?[d]:fw(Mi(d))}var xy=Vr;function Lu(d,b,A){var q=d.length;return A=A===n?q:A,!b&&A>=q?d:wl(d,b,A)}var yd=$o||function(d){return Fi.clearTimeout(d)};function j_(d,b){if(b)return d.slice();var A=d.length,q=Uu?Uu(A):new d.constructor(A);return d.copy(q),q}function Ly(d){var b=new d.constructor(d.byteLength);return new ko(b).set(new ko(d)),b}function YP(d,b){var A=b?Ly(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.byteLength)}function ZP(d){var b=new d.constructor(d.source,kr.exec(d));return b.lastIndex=d.lastIndex,b}function KP(d){return Xr?ri(Xr.call(d)):{}}function z_(d,b){var A=b?Ly(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.length)}function U_(d,b){if(d!==b){var A=d!==n,q=d===null,be=d===d,Be=Jl(d),Ke=b!==n,ft=b===null,St=b===b,sn=Jl(b);if(!ft&&!sn&&!Be&&d>b||Be&&Ke&&St&&!ft&&!sn||q&&Ke&&St||!A&&St||!be)return 1;if(!q&&!Be&&!sn&&d<b||sn&&A&&be&&!q&&!Be||ft&&A&&be||!Ke&&be||!St)return-1}return 0}function XP(d,b,A){for(var q=-1,be=d.criteria,Be=b.criteria,Ke=be.length,ft=A.length;++q<Ke;){var St=U_(be[q],Be[q]);if(St){if(q>=ft)return St;var sn=A[q];return St*(sn=="desc"?-1:1)}}return d.index-b.index}function $_(d,b,A,q){for(var be=-1,Be=d.length,Ke=A.length,ft=-1,St=b.length,sn=ne(Be-Ke,0),on=Mt(St+sn),hn=!q;++ft<St;)on[ft]=b[ft];for(;++be<Ke;)(hn||be<Be)&&(on[A[be]]=d[be]);for(;sn--;)on[ft++]=d[be++];return on}function V_(d,b,A,q){for(var be=-1,Be=d.length,Ke=-1,ft=A.length,St=-1,sn=b.length,on=ne(Be-ft,0),hn=Mt(on+sn),In=!q;++be<on;)hn[be]=d[be];for(var Qn=be;++St<sn;)hn[Qn+St]=b[St];for(;++Ke<ft;)(In||be<Be)&&(hn[Qn+A[Ke]]=d[be++]);return hn}function xl(d,b){var A=-1,q=d.length;for(b||(b=Mt(q));++A<q;)b[A]=d[A];return b}function xc(d,b,A,q){var be=!A;A||(A={});for(var Be=-1,Ke=b.length;++Be<Ke;){var ft=b[Be],St=q?q(A[ft],d[ft],ft,A,d):n;St===n&&(St=d[ft]),be?Pn(A,ft,St):ct(A,ft,St)}return A}function JP(d,b){return xc(d,Ay(d),b)}function QP(d,b){return xc(d,nw(d),b)}function xm(d,b){return function(A,q){var be=Br(A)?vc:Jt,Be=b?b():{};return be(A,d,pr(q,2),Be)}}function bd(d){return Vr(function(b,A){var q=-1,be=A.length,Be=be>1?A[be-1]:n,Ke=be>2?A[2]:n;for(Be=d.length>3&&typeof Be=="function"?(be--,Be):n,Ke&&Qa(A[0],A[1],Ke)&&(Be=be<3?n:Be,be=1),b=ri(b);++q<be;){var ft=A[q];ft&&d(b,ft,q,Be)}return b})}function H_(d,b){return function(A,q){if(A==null)return A;if(!Ll(A))return d(A,q);for(var be=A.length,Be=b?be:-1,Ke=ri(A);(b?Be--:++Be<be)&&q(Ke[Be],Be,Ke)!==!1;);return A}}function W_(d){return function(b,A,q){for(var be=-1,Be=ri(b),Ke=q(b),ft=Ke.length;ft--;){var St=Ke[d?ft:++be];if(A(Be[St],St,Be)===!1)break}return b}}function ek(d,b,A){var q=b&T,be=Lp(d);function Be(){var Ke=this&&this!==Fi&&this instanceof Be?be:d;return Ke.apply(q?A:this,arguments)}return Be}function G_(d){return function(b){b=Mi(b);var A=ea(b)?Es(b):n,q=A?A[0]:b.charAt(0),be=A?Lu(A,1).join(""):b.slice(1);return q[d]()+be}}function _d(d){return function(b){return va(Hw(Vw(b).replace($r,"")),d,"")}}function Lp(d){return function(){var b=arguments;switch(b.length){case 0:return new d;case 1:return new d(b[0]);case 2:return new d(b[0],b[1]);case 3:return new d(b[0],b[1],b[2]);case 4:return new d(b[0],b[1],b[2],b[3]);case 5:return new d(b[0],b[1],b[2],b[3],b[4]);case 6:return new d(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new d(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var A=ro(d.prototype),q=d.apply(A,b);return Os(q)?q:A}}function tk(d,b,A){var q=Lp(d);function be(){for(var Be=arguments.length,Ke=Mt(Be),ft=Be,St=wd(be);ft--;)Ke[ft]=arguments[ft];var sn=Be<3&&Ke[0]!==St&&Ke[Be-1]!==St?[]:Fs(Ke,St);if(Be-=sn.length,Be<A)return X_(d,b,Lm,be.placeholder,n,Ke,sn,n,n,A-Be);var on=this&&this!==Fi&&this instanceof be?q:d;return ei(on,this,Ke)}return be}function q_(d){return function(b,A,q){var be=ri(b);if(!Ll(b)){var Be=pr(A,3);b=Wo(b),A=function(ft){return Be(be[ft],ft,be)}}var Ke=d(b,A,q);return Ke>-1?be[Be?b[Ke]:Ke]:n}}function Y_(d){return Qc(function(b){var A=b.length,q=A,be=gs.prototype.thru;for(d&&b.reverse();q--;){var Be=b[q];if(typeof Be!="function")throw new Ci(o);if(be&&!Ke&&Pm(Be)=="wrapper")var Ke=new gs([],!0)}for(q=Ke?q:A;++q<A;){Be=b[q];var ft=Pm(Be),St=ft=="wrapper"?ky(Be):n;St&&Oy(St[0])&&St[1]==(Q|B|H|V)&&!St[4].length&&St[9]==1?Ke=Ke[Pm(St[0])].apply(Ke,St[3]):Ke=Be.length==1&&Oy(Be)?Ke[ft]():Ke.thru(Be)}return function(){var sn=arguments,on=sn[0];if(Ke&&sn.length==1&&Br(on))return Ke.plant(on).value();for(var hn=0,In=A?b[hn].apply(this,sn):on;++hn<A;)In=b[hn].call(this,In);return In}})}function Lm(d,b,A,q,be,Be,Ke,ft,St,sn){var on=b&Q,hn=b&T,In=b&O,Qn=b&(B|z),vr=b&Y,qr=In?n:Lp(d);function yr(){for(var si=arguments.length,ci=Mt(si),Ql=si;Ql--;)ci[Ql]=arguments[Ql];if(Qn)var el=wd(yr),eu=Qo(ci,el);if(q&&(ci=$_(ci,q,be,Qn)),Be&&(ci=V_(ci,Be,Ke,Qn)),si-=eu,Qn&&si<sn){var oo=Fs(ci,el);return X_(d,b,Lm,yr.placeholder,A,ci,oo,ft,St,sn-si)}var Zu=hn?A:this,rh=In?Zu[d]:d;return si=ci.length,ft?ci=wk(ci,ft):vr&&si>1&&ci.reverse(),on&&St<si&&(ci.length=St),this&&this!==Fi&&this instanceof yr&&(rh=qr||Lp(rh)),rh.apply(Zu,ci)}return yr}function Z_(d,b){return function(A,q){return Ce(A,d,b(q),{})}}function Cm(d,b){return function(A,q){var be;if(A===n&&q===n)return b;if(A!==n&&(be=A),q!==n){if(be===n)return q;typeof A=="string"||typeof q=="string"?(A=Sa(A),q=Sa(q)):(A=wm(A),q=wm(q)),be=d(A,q)}return be}}function Cy(d){return Qc(function(b){return b=ti(b,Er(pr())),Vr(function(A){var q=this;return d(b,function(be){return ei(be,q,A)})})})}function Sm(d,b){b=b===n?" ":Sa(b);var A=b.length;if(A<2)return A?gd(b,d):b;var q=gd(b,fs(d/Ss(b)));return ea(b)?Lu(Es(q),0,d).join(""):q.slice(0,d)}function nk(d,b,A,q){var be=b&T,Be=Lp(d);function Ke(){for(var ft=-1,St=arguments.length,sn=-1,on=q.length,hn=Mt(on+St),In=this&&this!==Fi&&this instanceof Ke?Be:d;++sn<on;)hn[sn]=q[sn];for(;St--;)hn[sn++]=arguments[++ft];return ei(In,be?A:this,hn)}return Ke}function K_(d){return function(b,A,q){return q&&typeof q!="number"&&Qa(b,A,q)&&(A=q=n),b=nh(b),A===n?(A=b,b=0):A=nh(A),q=q===n?b<A?1:-1:nh(q),bf(b,A,q,d)}}function Em(d){return function(b,A){return typeof b=="string"&&typeof A=="string"||(b=Su(b),A=Su(A)),d(b,A)}}function X_(d,b,A,q,be,Be,Ke,ft,St,sn){var on=b&B,hn=on?Ke:n,In=on?n:Ke,Qn=on?Be:n,vr=on?n:Be;b|=on?H:J,b&=~(on?J:H),b&D||(b&=-4);var qr=[d,b,be,Qn,hn,vr,In,ft,St,sn],yr=A.apply(n,qr);return Oy(d)&&uw(yr,qr),yr.placeholder=q,cw(yr,d,b)}function Sy(d){var b=Li[d];return function(A,q){if(A=Su(A),q=q==null?0:we(Hr(q),292),q&&v(A)){var be=(Mi(A)+"e").split("e"),Be=b(be[0]+"e"+(+be[1]+q));return be=(Mi(Be)+"e").split("e"),+(be[0]+"e"+(+be[1]-q))}return b(A)}}var rk=Ki&&1/js(new Ki([,-0]))[1]==ee?function(d){return new Ki(d)}:qy;function J_(d){return function(b){var A=Ea(b);return A==oe?_l(b):A==ot?yc(b):qi(b,d(b))}}function Jc(d,b,A,q,be,Be,Ke,ft){var St=b&O;if(!St&&typeof d!="function")throw new Ci(o);var sn=q?q.length:0;if(sn||(b&=-97,q=be=n),Ke=Ke===n?Ke:ne(Hr(Ke),0),ft=ft===n?ft:Hr(ft),sn-=be?be.length:0,b&J){var on=q,hn=be;q=be=n}var In=St?n:ky(d),Qn=[d,b,A,q,be,on,hn,Be,Ke,ft];if(In&&yk(Qn,In),d=Qn[0],b=Qn[1],A=Qn[2],q=Qn[3],be=Qn[4],ft=Qn[9]=Qn[9]===n?St?0:d.length:ne(Qn[9]-sn,0),!ft&&b&(B|z)&&(b&=-25),!b||b==T)var vr=ek(d,b,A);else b==B||b==z?vr=tk(d,b,ft):(b==H||b==(T|H))&&!be.length?vr=nk(d,b,A,q):vr=Lm.apply(n,Qn);var qr=In?Hu:uw;return cw(qr(vr,Qn),d,b)}function Q_(d,b,A,q){return d===n||Yu(d,ra[A])&&!Ir.call(q,A)?b:d}function ew(d,b,A,q,be,Be){return Os(d)&&Os(b)&&(Be.set(b,d),la(d,b,n,ew,Be),Be.delete(b)),d}function ik(d){return Ep(d)?n:d}function tw(d,b,A,q,be,Be){var Ke=A&C,ft=d.length,St=b.length;if(ft!=St&&!(Ke&&St>ft))return!1;var sn=Be.get(d),on=Be.get(b);if(sn&&on)return sn==b&&on==d;var hn=-1,In=!0,Qn=A&S?new j:n;for(Be.set(d,b),Be.set(b,d);++hn<ft;){var vr=d[hn],qr=b[hn];if(q)var yr=Ke?q(qr,vr,hn,b,d,Be):q(vr,qr,hn,d,b,Be);if(yr!==n){if(yr)continue;In=!1;break}if(Qn){if(!I(b,function(si,ci){if(!bl(Qn,ci)&&(vr===si||be(vr,si,A,q,Be)))return Qn.push(ci)})){In=!1;break}}else if(!(vr===qr||be(vr,qr,A,q,Be))){In=!1;break}}return Be.delete(d),Be.delete(b),In}function sk(d,b,A,q,be,Be,Ke){switch(A){case Sn:if(d.byteLength!=b.byteLength||d.byteOffset!=b.byteOffset)return!1;d=d.buffer,b=b.buffer;case pn:return!(d.byteLength!=b.byteLength||!Be(new ko(d),new ko(b)));case Ue:case Ne:case ue:return Yu(+d,+b);case pt:return d.name==b.name&&d.message==b.message;case at:case dt:return d==b+"";case oe:var ft=_l;case ot:var St=q&C;if(ft||(ft=js),d.size!=b.size&&!St)return!1;var sn=Ke.get(d);if(sn)return sn==b;q|=S,Ke.set(d,b);var on=tw(ft(d),ft(b),q,be,Be,Ke);return Ke.delete(d),on;case zt:if(Xr)return Xr.call(d)==Xr.call(b)}return!1}function ok(d,b,A,q,be,Be){var Ke=A&C,ft=Ey(d),St=ft.length,sn=Ey(b),on=sn.length;if(St!=on&&!Ke)return!1;for(var hn=St;hn--;){var In=ft[hn];if(!(Ke?In in b:Ir.call(b,In)))return!1}var Qn=Be.get(d),vr=Be.get(b);if(Qn&&vr)return Qn==b&&vr==d;var qr=!0;Be.set(d,b),Be.set(b,d);for(var yr=Ke;++hn<St;){In=ft[hn];var si=d[In],ci=b[In];if(q)var Ql=Ke?q(ci,si,In,b,d,Be):q(si,ci,In,d,b,Be);if(!(Ql===n?si===ci||be(si,ci,A,q,Be):Ql)){qr=!1;break}yr||(yr=In=="constructor")}if(qr&&!yr){var el=d.constructor,eu=b.constructor;el!=eu&&"constructor"in d&&"constructor"in b&&!(typeof el=="function"&&el instanceof el&&typeof eu=="function"&&eu instanceof eu)&&(qr=!1)}return Be.delete(d),Be.delete(b),qr}function Qc(d){return Iy(aw(d,n,mw),d+"")}function Ey(d){return Ge(d,Wo,Ay)}function Py(d){return Ge(d,Cl,nw)}var ky=Si?function(d){return Si.get(d)}:qy;function Pm(d){for(var b=d.name+"",A=no[b],q=Ir.call(no,b)?A.length:0;q--;){var be=A[q],Be=be.func;if(Be==null||Be==d)return be.name}return b}function wd(d){var b=Ir.call(Me,"placeholder")?Me:d;return b.placeholder}function pr(){var d=Me.iteratee||Wy;return d=d===Wy?qn:d,arguments.length?d(arguments[0],arguments[1]):d}function km(d,b){var A=d.__data__;return pk(b)?A[typeof b=="string"?"string":"hash"]:A.map}function My(d){for(var b=Wo(d),A=b.length;A--;){var q=b[A],be=d[q];b[A]=[q,be,sw(be)]}return b}function wf(d,b){var A=Yi(d,b);return Ct(A)?A:n}function ak(d){var b=Ir.call(d,xa),A=d[xa];try{d[xa]=n;var q=!0}catch{}var be=ii.call(d);return q&&(b?d[xa]=A:delete d[xa]),be}var Ay=Vo?function(d){return d==null?[]:(d=ri(d),zo(Vo(d),function(b){return pi.call(d,b)}))}:Yy,nw=Vo?function(d){for(var b=[];d;)vo(b,Ay(d)),d=oa(d);return b}:Yy,Ea=Ye;(Mn&&Ea(new Mn(new ArrayBuffer(1)))!=Sn||Wn&&Ea(new Wn)!=oe||Cr&&Ea(Cr.resolve())!=Ve||Ki&&Ea(new Ki)!=ot||Oi&&Ea(new Oi)!=Zt)&&(Ea=function(d){var b=Ye(d),A=b==Se?d.constructor:n,q=A?xf(A):"";if(q)switch(q){case qc:return Sn;case aa:return oe;case Ho:return Ve;case Mo:return ot;case pf:return Zt}return b});function lk(d,b,A){for(var q=-1,be=A.length;++q<be;){var Be=A[q],Ke=Be.size;switch(Be.type){case"drop":d+=Ke;break;case"dropRight":b-=Ke;break;case"take":b=we(b,d+Ke);break;case"takeRight":d=ne(d,b-Ke);break}}return{start:d,end:b}}function uk(d){var b=d.match(wt);return b?b[1].split(qt):[]}function rw(d,b,A){b=qu(b,d);for(var q=-1,be=b.length,Be=!1;++q<be;){var Ke=Lc(b[q]);if(!(Be=d!=null&&A(d,Ke)))break;d=d[Ke]}return Be||++q!=be?Be:(be=d==null?0:d.length,!!be&&Nm(be)&&eh(Ke,be)&&(Br(d)||Lf(d)))}function ck(d){var b=d.length,A=new d.constructor(b);return b&&typeof d[0]=="string"&&Ir.call(d,"index")&&(A.index=d.index,A.input=d.input),A}function iw(d){return typeof d.constructor=="function"&&!Cp(d)?ro(oa(d)):{}}function hk(d,b,A){var q=d.constructor;switch(b){case pn:return Ly(d);case Ue:case Ne:return new q(+d);case Sn:return YP(d,A);case Ze:case it:case Je:case $t:case Kt:case _n:case gn:case bn:case Rn:return z_(d,A);case oe:return new q;case ue:case dt:return new q(d);case at:return ZP(d);case ot:return new q;case zt:return KP(d)}}function fk(d,b){var A=b.length;if(!A)return d;var q=A-1;return b[q]=(A>1?"& ":"")+b[q],b=b.join(A>2?", ":" "),d.replace(Pt,`{
/* [wrapped with `+b+`] */
`)}function dk(d){return Br(d)||Lf(d)||!!(to&&d&&d[to])}function eh(d,b){var A=typeof d;return b=b??ie,!!b&&(A=="number"||A!="symbol"&&lr.test(d))&&d>-1&&d%1==0&&d<b}function Qa(d,b,A){if(!Os(A))return!1;var q=typeof b;return(q=="number"?Ll(A)&&eh(b,A.length):q=="string"&&b in A)?Yu(A[b],d):!1}function Ty(d,b){if(Br(d))return!1;var A=typeof d;return A=="number"||A=="symbol"||A=="boolean"||d==null||Jl(d)?!0:Nt.test(d)||!Js.test(d)||b!=null&&d in ri(b)}function pk(d){var b=typeof d;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?d!=="__proto__":d===null}function Oy(d){var b=Pm(d),A=Me[b];if(typeof A!="function"||!(b in Pr.prototype))return!1;if(d===A)return!0;var q=ky(A);return!!q&&d===q[0]}function gk(d){return!!hs&&hs in d}var mk=ia?th:Zy;function Cp(d){var b=d&&d.constructor,A=typeof b=="function"&&b.prototype||ra;return d===A}function sw(d){return d===d&&!Os(d)}function ow(d,b){return function(A){return A==null?!1:A[d]===b&&(b!==n||d in ri(A))}}function vk(d){var b=Dm(d,function(q){return A.size===c&&A.clear(),q}),A=b.cache;return b}function yk(d,b){var A=d[1],q=b[1],be=A|q,Be=be<(T|O|Q),Ke=q==Q&&A==B||q==Q&&A==V&&d[7].length<=b[8]||q==(Q|V)&&b[7].length<=b[8]&&A==B;if(!(Be||Ke))return d;q&T&&(d[2]=b[2],be|=A&T?0:D);var ft=b[3];if(ft){var St=d[3];d[3]=St?$_(St,ft,b[4]):ft,d[4]=St?Fs(d[3],f):b[4]}return ft=b[5],ft&&(St=d[5],d[5]=St?V_(St,ft,b[6]):ft,d[6]=St?Fs(d[5],f):b[6]),ft=b[7],ft&&(d[7]=ft),q&Q&&(d[8]=d[8]==null?b[8]:we(d[8],b[8])),d[9]==null&&(d[9]=b[9]),d[0]=b[0],d[1]=be,d}function bk(d){var b=[];if(d!=null)for(var A in ri(d))b.push(A);return b}function _k(d){return ii.call(d)}function aw(d,b,A){return b=ne(b===n?d.length-1:b,0),function(){for(var q=arguments,be=-1,Be=ne(q.length-b,0),Ke=Mt(Be);++be<Be;)Ke[be]=q[b+be];be=-1;for(var ft=Mt(b+1);++be<b;)ft[be]=q[be];return ft[b]=A(Ke),ei(d,this,ft)}}function lw(d,b){return b.length<2?d:tr(d,wl(b,0,-1))}function wk(d,b){for(var A=d.length,q=we(b.length,A),be=xl(d);q--;){var Be=b[q];d[q]=eh(Be,A)?be[Be]:n}return d}function Dy(d,b){if(!(b==="constructor"&&typeof d[b]=="function")&&b!="__proto__")return d[b]}var uw=hw(Hu),Sp=Gc||function(d,b){return Fi.setTimeout(d,b)},Iy=hw(ym);function cw(d,b,A){var q=b+"";return Iy(d,fk(q,xk(uk(q),A)))}function hw(d){var b=0,A=0;return function(){var q=Qe(),be=se-(q-A);if(A=q,be>0){if(++b>=W)return arguments[0]}else b=0;return d.apply(n,arguments)}}function Mm(d,b){var A=-1,q=d.length,be=q-1;for(b=b===n?q:b;++A<b;){var Be=yf(A,be),Ke=d[Be];d[Be]=d[A],d[A]=Ke}return d.length=b,d}var fw=vk(function(d){var b=[];return d.charCodeAt(0)===46&&b.push(""),d.replace(He,function(A,q,be,Be){b.push(be?Be.replace(Xn,"$1"):q||A)}),b});function Lc(d){if(typeof d=="string"||Jl(d))return d;var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function xf(d){if(d!=null){try{return sa.call(d)}catch{}try{return d+""}catch{}}return""}function xk(d,b){return us(ce,function(A){var q="_."+A[0];b&A[1]&&!vl(d,q)&&d.push(q)}),d.sort()}function dw(d){if(d instanceof Pr)return d.clone();var b=new gs(d.__wrapped__,d.__chain__);return b.__actions__=xl(d.__actions__),b.__index__=d.__index__,b.__values__=d.__values__,b}function Lk(d,b,A){(A?Qa(d,b,A):b===n)?b=1:b=ne(Hr(b),0);var q=d==null?0:d.length;if(!q||b<1)return[];for(var be=0,Be=0,Ke=Mt(fs(q/b));be<q;)Ke[Be++]=wl(d,be,be+=b);return Ke}function Ck(d){for(var b=-1,A=d==null?0:d.length,q=0,be=[];++b<A;){var Be=d[b];Be&&(be[q++]=Be)}return be}function Sk(){var d=arguments.length;if(!d)return[];for(var b=Mt(d-1),A=arguments[0],q=d;q--;)b[q-1]=arguments[q];return vo(Br(A)?xl(A):[A],ze(b,1))}var Ek=Vr(function(d,b){return so(d)?k(d,ze(b,1,so,!0)):[]}),Pk=Vr(function(d,b){var A=Cu(b);return so(A)&&(A=n),so(d)?k(d,ze(b,1,so,!0),pr(A,2)):[]}),kk=Vr(function(d,b){var A=Cu(b);return so(A)&&(A=n),so(d)?k(d,ze(b,1,so,!0),n,A):[]});function Mk(d,b,A){var q=d==null?0:d.length;return q?(b=A||b===n?1:Hr(b),wl(d,b<0?0:b,q)):[]}function Ak(d,b,A){var q=d==null?0:d.length;return q?(b=A||b===n?1:Hr(b),b=q-b,wl(d,0,b<0?0:b)):[]}function Tk(d,b){return d&&d.length?Xc(d,pr(b,3),!0,!0):[]}function Ok(d,b){return d&&d.length?Xc(d,pr(b,3),!0):[]}function Dk(d,b,A,q){var be=d==null?0:d.length;return be?(A&&typeof A!="number"&&Qa(d,b,A)&&(A=0,q=be),_e(d,b,A,q)):[]}function pw(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var be=A==null?0:Hr(A);return be<0&&(be=ne(q+be,0)),Bt(d,pr(b,3),be)}function gw(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var be=q-1;return A!==n&&(be=Hr(A),be=A<0?ne(q+be,0):we(be,q-1)),Bt(d,pr(b,3),be,!0)}function mw(d){var b=d==null?0:d.length;return b?ze(d,1):[]}function Ik(d){var b=d==null?0:d.length;return b?ze(d,ee):[]}function Nk(d,b){var A=d==null?0:d.length;return A?(b=b===n?1:Hr(b),ze(d,b)):[]}function Bk(d){for(var b=-1,A=d==null?0:d.length,q={};++b<A;){var be=d[b];q[be[0]]=be[1]}return q}function vw(d){return d&&d.length?d[0]:n}function Rk(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var be=A==null?0:Hr(A);return be<0&&(be=ne(q+be,0)),an(d,b,be)}function Fk(d){var b=d==null?0:d.length;return b?wl(d,0,-1):[]}var jk=Vr(function(d){var b=ti(d,Ah);return b.length&&b[0]===d[0]?de(b):[]}),zk=Vr(function(d){var b=Cu(d),A=ti(d,Ah);return b===Cu(A)?b=n:A.pop(),A.length&&A[0]===d[0]?de(A,pr(b,2)):[]}),Uk=Vr(function(d){var b=Cu(d),A=ti(d,Ah);return b=typeof b=="function"?b:n,b&&A.pop(),A.length&&A[0]===d[0]?de(A,n,b):[]});function $k(d,b){return d==null?"":E.call(d,b)}function Cu(d){var b=d==null?0:d.length;return b?d[b-1]:n}function Vk(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var be=q;return A!==n&&(be=Hr(A),be=be<0?ne(q+be,0):we(be,q-1)),b===b?ya(d,b,be):Bt(d,On,be,!0)}function Hk(d,b){return d&&d.length?Ja(d,Hr(b)):n}var Wk=Vr(yw);function yw(d,b){return d&&d.length&&b&&b.length?pd(d,b):d}function Gk(d,b,A){return d&&d.length&&b&&b.length?pd(d,b,pr(A,2)):d}function qk(d,b,A){return d&&d.length&&b&&b.length?pd(d,b,n,A):d}var Yk=Qc(function(d,b){var A=d==null?0:d.length,q=xn(d,b);return vf(d,ti(b,function(be){return eh(be,A)?+be:be}).sort(U_)),q});function Zk(d,b){var A=[];if(!(d&&d.length))return A;var q=-1,be=[],Be=d.length;for(b=pr(b,3);++q<Be;){var Ke=d[q];b(Ke,q,d)&&(A.push(Ke),be.push(q))}return vf(d,be),A}function Ny(d){return d==null?d:rn.call(d)}function Kk(d,b,A){var q=d==null?0:d.length;return q?(A&&typeof A!="number"&&Qa(d,b,A)?(b=0,A=q):(b=b==null?0:Hr(b),A=A===n?q:Hr(A)),wl(d,b,A)):[]}function Xk(d,b){return Wu(d,b)}function Jk(d,b,A){return wp(d,b,pr(A,2))}function Qk(d,b){var A=d==null?0:d.length;if(A){var q=Wu(d,b);if(q<A&&Yu(d[q],b))return q}return-1}function eM(d,b){return Wu(d,b,!0)}function tM(d,b,A){return wp(d,b,pr(A,2),!0)}function nM(d,b){var A=d==null?0:d.length;if(A){var q=Wu(d,b,!0)-1;if(Yu(d[q],b))return q}return-1}function rM(d){return d&&d.length?xp(d):[]}function iM(d,b){return d&&d.length?xp(d,pr(b,2)):[]}function sM(d){var b=d==null?0:d.length;return b?wl(d,1,b):[]}function oM(d,b,A){return d&&d.length?(b=A||b===n?1:Hr(b),wl(d,0,b<0?0:b)):[]}function aM(d,b,A){var q=d==null?0:d.length;return q?(b=A||b===n?1:Hr(b),b=q-b,wl(d,b<0?0:b,q)):[]}function lM(d,b){return d&&d.length?Xc(d,pr(b,3),!1,!0):[]}function uM(d,b){return d&&d.length?Xc(d,pr(b,3)):[]}var cM=Vr(function(d){return wc(ze(d,1,so,!0))}),hM=Vr(function(d){var b=Cu(d);return so(b)&&(b=n),wc(ze(d,1,so,!0),pr(b,2))}),fM=Vr(function(d){var b=Cu(d);return b=typeof b=="function"?b:n,wc(ze(d,1,so,!0),n,b)});function dM(d){return d&&d.length?wc(d):[]}function pM(d,b){return d&&d.length?wc(d,pr(b,2)):[]}function gM(d,b){return b=typeof b=="function"?b:n,d&&d.length?wc(d,n,b):[]}function By(d){if(!(d&&d.length))return[];var b=0;return d=zo(d,function(A){if(so(A))return b=ne(A.length,b),!0}),Ui(b,function(A){return ti(d,or(A))})}function bw(d,b){if(!(d&&d.length))return[];var A=By(d);return b==null?A:ti(A,function(q){return ei(b,n,q)})}var mM=Vr(function(d,b){return so(d)?k(d,b):[]}),vM=Vr(function(d){return xu(zo(d,so))}),yM=Vr(function(d){var b=Cu(d);return so(b)&&(b=n),xu(zo(d,so),pr(b,2))}),bM=Vr(function(d){var b=Cu(d);return b=typeof b=="function"?b:n,xu(zo(d,so),n,b)}),_M=Vr(By);function wM(d,b){return Gu(d||[],b||[],ct)}function xM(d,b){return Gu(d||[],b||[],Zc)}var LM=Vr(function(d){var b=d.length,A=b>1?d[b-1]:n;return A=typeof A=="function"?(d.pop(),A):n,bw(d,A)});function _w(d){var b=Me(d);return b.__chain__=!0,b}function CM(d,b){return b(d),d}function Am(d,b){return b(d)}var SM=Qc(function(d){var b=d.length,A=b?d[0]:0,q=this.__wrapped__,be=function(Be){return xn(Be,d)};return b>1||this.__actions__.length||!(q instanceof Pr)||!eh(A)?this.thru(be):(q=q.slice(A,+A+(b?1:0)),q.__actions__.push({func:Am,args:[be],thisArg:n}),new gs(q,this.__chain__).thru(function(Be){return b&&!Be.length&&Be.push(n),Be}))});function EM(){return _w(this)}function PM(){return new gs(this.value(),this.__chain__)}function kM(){this.__values__===n&&(this.__values__=Iw(this.value()));var d=this.__index__>=this.__values__.length,b=d?n:this.__values__[this.__index__++];return{done:d,value:b}}function MM(){return this}function AM(d){for(var b,A=this;A instanceof $u;){var q=dw(A);q.__index__=0,q.__values__=n,b?be.__wrapped__=q:b=q;var be=q;A=A.__wrapped__}return be.__wrapped__=d,b}function TM(){var d=this.__wrapped__;if(d instanceof Pr){var b=d;return this.__actions__.length&&(b=new Pr(this)),b=b.reverse(),b.__actions__.push({func:Am,args:[Ny],thisArg:n}),new gs(b,this.__chain__)}return this.thru(Ny)}function OM(){return wu(this.__wrapped__,this.__actions__)}var DM=xm(function(d,b,A){Ir.call(d,A)?++d[A]:Pn(d,A,1)});function IM(d,b,A){var q=Br(d)?Zl:K;return A&&Qa(d,b,A)&&(b=n),q(d,pr(b,3))}function NM(d,b){var A=Br(d)?zo:qe;return A(d,pr(b,3))}var BM=q_(pw),RM=q_(gw);function FM(d,b){return ze(Tm(d,b),1)}function jM(d,b){return ze(Tm(d,b),ee)}function zM(d,b,A){return A=A===n?1:Hr(A),ze(Tm(d,b),A)}function ww(d,b){var A=Br(d)?us:N;return A(d,pr(b,3))}function xw(d,b){var A=Br(d)?jo:G;return A(d,pr(b,3))}var UM=xm(function(d,b,A){Ir.call(d,A)?d[A].push(b):Pn(d,A,[b])});function $M(d,b,A,q){d=Ll(d)?d:Ld(d),A=A&&!q?Hr(A):0;var be=d.length;return A<0&&(A=ne(be+A,0)),Bm(d)?A<=be&&d.indexOf(b,A)>-1:!!be&&an(d,b,A)>-1}var VM=Vr(function(d,b,A){var q=-1,be=typeof b=="function",Be=Ll(d)?Mt(d.length):[];return N(d,function(Ke){Be[++q]=be?ei(b,Ke,A):Ie(Ke,b,A)}),Be}),HM=xm(function(d,b,A){Pn(d,A,b)});function Tm(d,b){var A=Br(d)?ti:mi;return A(d,pr(b,3))}function WM(d,b,A,q){return d==null?[]:(Br(b)||(b=b==null?[]:[b]),A=q?n:A,Br(A)||(A=A==null?[]:[A]),_c(d,b,A))}var GM=xm(function(d,b,A){d[A?0:1].push(b)},function(){return[[],[]]});function qM(d,b,A){var q=Br(d)?va:wi,be=arguments.length<3;return q(d,pr(b,4),A,be,N)}function YM(d,b,A){var q=Br(d)?zi:wi,be=arguments.length<3;return q(d,pr(b,4),A,be,G)}function ZM(d,b){var A=Br(d)?zo:qe;return A(d,Im(pr(b,3)))}function KM(d){var b=Br(d)?Dt:md;return b(d)}function XM(d,b,A){(A?Qa(d,b,A):b===n)?b=1:b=Hr(b);var q=Br(d)?_t:vm;return q(d,b)}function JM(d){var b=Br(d)?Wt:bm;return b(d)}function QM(d){if(d==null)return 0;if(Ll(d))return Bm(d)?Ss(d):d.length;var b=Ea(d);return b==oe||b==ot?d.size:Jr(d).length}function eA(d,b,A){var q=Br(d)?I:_m;return A&&Qa(d,b,A)&&(b=n),q(d,pr(b,3))}var tA=Vr(function(d,b){if(d==null)return[];var A=b.length;return A>1&&Qa(d,b[0],b[1])?b=[]:A>2&&Qa(b[0],b[1],b[2])&&(b=[b[0]]),_c(d,ze(b,1),[])}),Om=Us||function(){return Fi.Date.now()};function nA(d,b){if(typeof b!="function")throw new Ci(o);return d=Hr(d),function(){if(--d<1)return b.apply(this,arguments)}}function Lw(d,b,A){return b=A?n:b,b=d&&b==null?d.length:b,Jc(d,Q,n,n,n,n,b)}function Cw(d,b){var A;if(typeof b!="function")throw new Ci(o);return d=Hr(d),function(){return--d>0&&(A=b.apply(this,arguments)),d<=1&&(b=n),A}}var Ry=Vr(function(d,b,A){var q=T;if(A.length){var be=Fs(A,wd(Ry));q|=H}return Jc(d,q,b,A,be)}),Sw=Vr(function(d,b,A){var q=T|O;if(A.length){var be=Fs(A,wd(Sw));q|=H}return Jc(b,q,d,A,be)});function Ew(d,b,A){b=A?n:b;var q=Jc(d,B,n,n,n,n,n,b);return q.placeholder=Ew.placeholder,q}function Pw(d,b,A){b=A?n:b;var q=Jc(d,z,n,n,n,n,n,b);return q.placeholder=Pw.placeholder,q}function kw(d,b,A){var q,be,Be,Ke,ft,St,sn=0,on=!1,hn=!1,In=!0;if(typeof d!="function")throw new Ci(o);b=Su(b)||0,Os(A)&&(on=!!A.leading,hn="maxWait"in A,Be=hn?ne(Su(A.maxWait)||0,b):Be,In="trailing"in A?!!A.trailing:In);function Qn(oo){var Zu=q,rh=be;return q=be=n,sn=oo,Ke=d.apply(rh,Zu),Ke}function vr(oo){return sn=oo,ft=Sp(si,b),on?Qn(oo):Ke}function qr(oo){var Zu=oo-St,rh=oo-sn,qw=b-Zu;return hn?we(qw,Be-rh):qw}function yr(oo){var Zu=oo-St,rh=oo-sn;return St===n||Zu>=b||Zu<0||hn&&rh>=Be}function si(){var oo=Om();if(yr(oo))return ci(oo);ft=Sp(si,qr(oo))}function ci(oo){return ft=n,In&&q?Qn(oo):(q=be=n,Ke)}function Ql(){ft!==n&&yd(ft),sn=0,q=St=be=ft=n}function el(){return ft===n?Ke:ci(Om())}function eu(){var oo=Om(),Zu=yr(oo);if(q=arguments,be=this,St=oo,Zu){if(ft===n)return vr(St);if(hn)return yd(ft),ft=Sp(si,b),Qn(St)}return ft===n&&(ft=Sp(si,b)),Ke}return eu.cancel=Ql,eu.flush=el,eu}var rA=Vr(function(d,b){return x(d,1,b)}),iA=Vr(function(d,b,A){return x(d,Su(b)||0,A)});function sA(d){return Jc(d,Y)}function Dm(d,b){if(typeof d!="function"||b!=null&&typeof b!="function")throw new Ci(o);var A=function(){var q=arguments,be=b?b.apply(this,q):q[0],Be=A.cache;if(Be.has(be))return Be.get(be);var Ke=d.apply(this,q);return A.cache=Be.set(be,Ke)||Be,Ke};return A.cache=new(Dm.Cache||Ca),A}Dm.Cache=Ca;function Im(d){if(typeof d!="function")throw new Ci(o);return function(){var b=arguments;switch(b.length){case 0:return!d.call(this);case 1:return!d.call(this,b[0]);case 2:return!d.call(this,b[0],b[1]);case 3:return!d.call(this,b[0],b[1],b[2])}return!d.apply(this,b)}}function oA(d){return Cw(2,d)}var aA=xy(function(d,b){b=b.length==1&&Br(b[0])?ti(b[0],Er(pr())):ti(ze(b,1),Er(pr()));var A=b.length;return Vr(function(q){for(var be=-1,Be=we(q.length,A);++be<Be;)q[be]=b[be].call(this,q[be]);return ei(d,this,q)})}),Fy=Vr(function(d,b){var A=Fs(b,wd(Fy));return Jc(d,H,n,b,A)}),Mw=Vr(function(d,b){var A=Fs(b,wd(Mw));return Jc(d,J,n,b,A)}),lA=Qc(function(d,b){return Jc(d,V,n,n,n,b)});function uA(d,b){if(typeof d!="function")throw new Ci(o);return b=b===n?b:Hr(b),Vr(d,b)}function cA(d,b){if(typeof d!="function")throw new Ci(o);return b=b==null?0:ne(Hr(b),0),Vr(function(A){var q=A[b],be=Lu(A,0,b);return q&&vo(be,q),ei(d,this,be)})}function hA(d,b,A){var q=!0,be=!0;if(typeof d!="function")throw new Ci(o);return Os(A)&&(q="leading"in A?!!A.leading:q,be="trailing"in A?!!A.trailing:be),kw(d,b,{leading:q,maxWait:b,trailing:be})}function fA(d){return Lw(d,1)}function dA(d,b){return Fy(_f(b),d)}function pA(){if(!arguments.length)return[];var d=arguments[0];return Br(d)?d:[d]}function gA(d){return h(d,m)}function mA(d,b){return b=typeof b=="function"?b:n,h(d,m,b)}function vA(d){return h(d,p|m)}function yA(d,b){return b=typeof b=="function"?b:n,h(d,p|m,b)}function bA(d,b){return b==null||_(d,b,Wo(b))}function Yu(d,b){return d===b||d!==d&&b!==b}var _A=Em(lt),wA=Em(function(d,b){return d>=b}),Lf=De(function(){return arguments}())?De:function(d){return $s(d)&&Ir.call(d,"callee")&&!pi.call(d,"callee")},Br=Mt.isArray,xA=yu?Er(yu):Re;function Ll(d){return d!=null&&Nm(d.length)&&!th(d)}function so(d){return $s(d)&&Ll(d)}function LA(d){return d===!0||d===!1||$s(d)&&Ye(d)==Ue}var Th=u||Zy,CA=Jo?Er(Jo):je;function SA(d){return $s(d)&&d.nodeType===1&&!Ep(d)}function EA(d){if(d==null)return!0;if(Ll(d)&&(Br(d)||typeof d=="string"||typeof d.splice=="function"||Th(d)||xd(d)||Lf(d)))return!d.length;var b=Ea(d);if(b==oe||b==ot)return!d.size;if(Cp(d))return!Jr(d).length;for(var A in d)if(Ir.call(d,A))return!1;return!0}function PA(d,b){return et(d,b)}function kA(d,b,A){A=typeof A=="function"?A:n;var q=A?A(d,b):n;return q===n?et(d,b,n,A):!!q}function jy(d){if(!$s(d))return!1;var b=Ye(d);return b==pt||b==nt||typeof d.message=="string"&&typeof d.name=="string"&&!Ep(d)}function MA(d){return typeof d=="number"&&v(d)}function th(d){if(!Os(d))return!1;var b=Ye(d);return b==bt||b==le||b==Pe||b==Xe}function Aw(d){return typeof d=="number"&&d==Hr(d)}function Nm(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=ie}function Os(d){var b=typeof d;return d!=null&&(b=="object"||b=="function")}function $s(d){return d!=null&&typeof d=="object"}var Tw=Gl?Er(Gl):ht;function AA(d,b){return d===b||Lt(d,b,My(b))}function TA(d,b,A){return A=typeof A=="function"?A:n,Lt(d,b,My(b),A)}function OA(d){return Ow(d)&&d!=+d}function DA(d){if(mk(d))throw new Un(s);return Ct(d)}function IA(d){return d===null}function NA(d){return d==null}function Ow(d){return typeof d=="number"||$s(d)&&Ye(d)==ue}function Ep(d){if(!$s(d)||Ye(d)!=Se)return!1;var b=oa(d);if(b===null)return!0;var A=Ir.call(b,"constructor")&&b.constructor;return typeof A=="function"&&A instanceof A&&sa.call(A)==li}var zy=ql?Er(ql):tn;function BA(d){return Aw(d)&&d>=-9007199254740991&&d<=ie}var Dw=Po?Er(Po):Dn;function Bm(d){return typeof d=="string"||!Br(d)&&$s(d)&&Ye(d)==dt}function Jl(d){return typeof d=="symbol"||$s(d)&&Ye(d)==zt}var xd=Yl?Er(Yl):Fn;function RA(d){return d===n}function FA(d){return $s(d)&&Ea(d)==Zt}function jA(d){return $s(d)&&Ye(d)==Qt}var zA=Em(Nr),UA=Em(function(d,b){return d<=b});function Iw(d){if(!d)return[];if(Ll(d))return Bm(d)?Es(d):xl(d);if(ir&&d[ir])return Qs(d[ir]());var b=Ea(d),A=b==oe?_l:b==ot?js:Ld;return A(d)}function nh(d){if(!d)return d===0?d:0;if(d=Su(d),d===ee||d===-1/0){var b=d<0?-1:1;return b*fe}return d===d?d:0}function Hr(d){var b=nh(d),A=b%1;return b===b?A?b-A:b:0}function Nw(d){return d?Gn(Hr(d),0,Oe):0}function Su(d){if(typeof d=="number")return d;if(Jl(d))return me;if(Os(d)){var b=typeof d.valueOf=="function"?d.valueOf():d;d=Os(b)?b+"":b}if(typeof d!="string")return d===0?d:+d;d=yo(d);var A=_i.test(d);return A||Xo.test(d)?Wl(d.slice(2),A?2:8):Hn.test(d)?me:+d}function Bw(d){return xc(d,Cl(d))}function $A(d){return d?Gn(Hr(d),-9007199254740991,ie):d===0?d:0}function Mi(d){return d==null?"":Sa(d)}var VA=bd(function(d,b){if(Cp(b)||Ll(b)){xc(b,Wo(b),d);return}for(var A in b)Ir.call(b,A)&&ct(d,A,b[A])}),Rw=bd(function(d,b){xc(b,Cl(b),d)}),Rm=bd(function(d,b,A,q){xc(b,Cl(b),d,q)}),HA=bd(function(d,b,A,q){xc(b,Wo(b),d,q)}),WA=Qc(xn);function GA(d,b){var A=ro(d);return b==null?A:un(A,b)}var qA=Vr(function(d,b){d=ri(d);var A=-1,q=b.length,be=q>2?b[2]:n;for(be&&Qa(b[0],b[1],be)&&(q=1);++A<q;)for(var Be=b[A],Ke=Cl(Be),ft=-1,St=Ke.length;++ft<St;){var sn=Ke[ft],on=d[sn];(on===n||Yu(on,ra[sn])&&!Ir.call(d,sn))&&(d[sn]=Be[sn])}return d}),YA=Vr(function(d){return d.push(n,ew),ei(Fw,n,d)});function ZA(d,b){return xt(d,pr(b,3),Yt)}function KA(d,b){return xt(d,pr(b,3),fn)}function XA(d,b){return d==null?d:gt(d,pr(b,3),Cl)}function JA(d,b){return d==null?d:At(d,pr(b,3),Cl)}function QA(d,b){return d&&Yt(d,pr(b,3))}function e6(d,b){return d&&fn(d,pr(b,3))}function t6(d){return d==null?[]:yn(d,Wo(d))}function n6(d){return d==null?[]:yn(d,Cl(d))}function Uy(d,b,A){var q=d==null?n:tr(d,b);return q===n?A:q}function r6(d,b){return d!=null&&rw(d,b,It)}function $y(d,b){return d!=null&&rw(d,b,yt)}var i6=Z_(function(d,b,A){b!=null&&typeof b.toString!="function"&&(b=ii.call(b)),d[b]=A},Hy(Sl)),s6=Z_(function(d,b,A){b!=null&&typeof b.toString!="function"&&(b=ii.call(b)),Ir.call(d,b)?d[b].push(A):d[b]=[A]},pr),o6=Vr(Ie);function Wo(d){return Ll(d)?Ot(d):Jr(d)}function Cl(d){return Ll(d)?Ot(d,!0):ui(d)}function a6(d,b){var A={};return b=pr(b,3),Yt(d,function(q,be,Be){Pn(A,b(q,be,Be),q)}),A}function l6(d,b){var A={};return b=pr(b,3),Yt(d,function(q,be,Be){Pn(A,be,b(q,be,Be))}),A}var u6=bd(function(d,b,A){la(d,b,A)}),Fw=bd(function(d,b,A,q){la(d,b,A,q)}),c6=Qc(function(d,b){var A={};if(d==null)return A;var q=!1;b=ti(b,function(Be){return Be=qu(Be,d),q||(q=Be.length>1),Be}),xc(d,Py(d),A),q&&(A=h(A,p|y|m,ik));for(var be=b.length;be--;)Kc(A,b[be]);return A});function h6(d,b){return jw(d,Im(pr(b)))}var f6=Qc(function(d,b){return d==null?{}:ua(d,b)});function jw(d,b){if(d==null)return{};var A=ti(Py(d),function(q){return[q]});return b=pr(b),Ts(d,A,function(q,be){return b(q,be[0])})}function d6(d,b,A){b=qu(b,d);var q=-1,be=b.length;for(be||(be=1,d=n);++q<be;){var Be=d==null?n:d[Lc(b[q])];Be===n&&(q=be,Be=A),d=th(Be)?Be.call(d):Be}return d}function p6(d,b,A){return d==null?d:Zc(d,b,A)}function g6(d,b,A,q){return q=typeof q=="function"?q:n,d==null?d:Zc(d,b,A,q)}var zw=J_(Wo),Uw=J_(Cl);function m6(d,b,A){var q=Br(d),be=q||Th(d)||xd(d);if(b=pr(b,4),A==null){var Be=d&&d.constructor;be?A=q?new Be:[]:Os(d)?A=th(Be)?ro(oa(d)):{}:A={}}return(be?us:Yt)(d,function(Ke,ft,St){return b(A,Ke,ft,St)}),A}function v6(d,b){return d==null?!0:Kc(d,b)}function y6(d,b,A){return d==null?d:vd(d,b,_f(A))}function b6(d,b,A,q){return q=typeof q=="function"?q:n,d==null?d:vd(d,b,_f(A),q)}function Ld(d){return d==null?[]:Ls(d,Wo(d))}function _6(d){return d==null?[]:Ls(d,Cl(d))}function w6(d,b,A){return A===n&&(A=b,b=n),A!==n&&(A=Su(A),A=A===A?A:0),b!==n&&(b=Su(b),b=b===b?b:0),Gn(Su(d),b,A)}function x6(d,b,A){return b=nh(b),A===n?(A=b,b=0):A=nh(A),d=Su(d),Tt(d,b,A)}function L6(d,b,A){if(A&&typeof A!="boolean"&&Qa(d,b,A)&&(b=A=n),A===n&&(typeof b=="boolean"?(A=b,b=n):typeof d=="boolean"&&(A=d,d=n)),d===n&&b===n?(d=0,b=1):(d=nh(d),b===n?(b=d,d=0):b=nh(b)),d>b){var q=d;d=b,b=q}if(A||d%1||b%1){var be=Ft();return we(d+be*(b-d+gl("1e-"+((be+"").length-1))),b)}return yf(d,b)}var C6=_d(function(d,b,A){return b=b.toLowerCase(),d+(A?$w(b):b)});function $w(d){return Vy(Mi(d).toLowerCase())}function Vw(d){return d=Mi(d),d&&d.replace(ur,zu).replace(Fu,"")}function S6(d,b,A){d=Mi(d),b=Sa(b);var q=d.length;A=A===n?q:Gn(Hr(A),0,q);var be=A;return A-=b.length,A>=0&&d.slice(A,be)==b}function E6(d){return d=Mi(d),d&&zn.test(d)?d.replace(er,Za):d}function P6(d){return d=Mi(d),d&&Bn.test(d)?d.replace(Vt,"\\$&"):d}var k6=_d(function(d,b,A){return d+(A?"-":"")+b.toLowerCase()}),M6=_d(function(d,b,A){return d+(A?" ":"")+b.toLowerCase()}),A6=G_("toLowerCase");function T6(d,b,A){d=Mi(d),b=Hr(b);var q=b?Ss(d):0;if(!b||q>=b)return d;var be=(b-q)/2;return Sm(ds(be),A)+d+Sm(fs(be),A)}function O6(d,b,A){d=Mi(d),b=Hr(b);var q=b?Ss(d):0;return b&&q<b?d+Sm(b-q,A):d}function D6(d,b,A){d=Mi(d),b=Hr(b);var q=b?Ss(d):0;return b&&q<b?Sm(b-q,A)+d:d}function I6(d,b,A){return A||b==null?b=0:b&&(b=+b),Et(Mi(d).replace(Vn,""),b||0)}function N6(d,b,A){return(A?Qa(d,b,A):b===n)?b=1:b=Hr(b),gd(Mi(d),b)}function B6(){var d=arguments,b=Mi(d[0]);return d.length<3?b:b.replace(d[1],d[2])}var R6=_d(function(d,b,A){return d+(A?"_":"")+b.toLowerCase()});function F6(d,b,A){return A&&typeof A!="number"&&Qa(d,b,A)&&(b=A=n),A=A===n?Oe:A>>>0,A?(d=Mi(d),d&&(typeof b=="string"||b!=null&&!zy(b))&&(b=Sa(b),!b&&ea(d))?Lu(Es(d),0,A):d.split(b,A)):[]}var j6=_d(function(d,b,A){return d+(A?" ":"")+Vy(b)});function z6(d,b,A){return d=Mi(d),A=A==null?0:Gn(Hr(A),0,d.length),b=Sa(b),d.slice(A,A+b.length)==b}function U6(d,b,A){var q=Me.templateSettings;A&&Qa(d,b,A)&&(b=n),d=Mi(d),b=Rm({},b,q,Q_);var be=Rm({},b.imports,q.imports,Q_),Be=Wo(be),Ke=Ls(be,Be),ft,St,sn=0,on=b.interpolate||Bi,hn="__p += '",In=Kl((b.escape||Bi).source+"|"+on.source+"|"+(on===ki?sr:Bi).source+"|"+(b.evaluate||Bi).source+"|$","g"),Qn="//# sourceURL="+(Ir.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vl+"]")+`
`;d.replace(In,function(yr,si,ci,Ql,el,eu){return ci||(ci=Ql),hn+=d.slice(sn,eu).replace(So,Ka),si&&(ft=!0,hn+=`' +
__e(`+si+`) +
'`),el&&(St=!0,hn+=`';
`+el+`;
__p += '`),ci&&(hn+=`' +
((__t = (`+ci+`)) == null ? '' : __t) +
'`),sn=eu+yr.length,yr}),hn+=`';
`;var vr=Ir.call(b,"variable")&&b.variable;if(!vr)hn=`with (obj) {
`+hn+`
}
`;else if(Tn.test(vr))throw new Un(a);hn=(St?hn.replace(mn,""):hn).replace(nn,"$1").replace(cn,"$1;"),hn="function("+(vr||"obj")+`) {
`+(vr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ft?", __e = _.escape":"")+(St?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+hn+`return __p
}`;var qr=Ww(function(){return hr(Be,Qn+"return "+hn).apply(n,Ke)});if(qr.source=hn,jy(qr))throw qr;return qr}function $6(d){return Mi(d).toLowerCase()}function V6(d){return Mi(d).toUpperCase()}function H6(d,b,A){if(d=Mi(d),d&&(A||b===n))return yo(d);if(!d||!(b=Sa(b)))return d;var q=Es(d),be=Es(b),Be=Rs(q,be),Ke=bu(q,be)+1;return Lu(q,Be,Ke).join("")}function W6(d,b,A){if(d=Mi(d),d&&(A||b===n))return d.slice(0,ba(d)+1);if(!d||!(b=Sa(b)))return d;var q=Es(d),be=bu(q,Es(b))+1;return Lu(q,0,be).join("")}function G6(d,b,A){if(d=Mi(d),d&&(A||b===n))return d.replace(Vn,"");if(!d||!(b=Sa(b)))return d;var q=Es(d),be=Rs(q,Es(b));return Lu(q,be).join("")}function q6(d,b){var A=ge,q=$;if(Os(b)){var be="separator"in b?b.separator:be;A="length"in b?Hr(b.length):A,q="omission"in b?Sa(b.omission):q}d=Mi(d);var Be=d.length;if(ea(d)){var Ke=Es(d);Be=Ke.length}if(A>=Be)return d;var ft=A-Ss(q);if(ft<1)return q;var St=Ke?Lu(Ke,0,ft).join(""):d.slice(0,ft);if(be===n)return St+q;if(Ke&&(ft+=St.length-ft),zy(be)){if(d.slice(ft).search(be)){var sn,on=St;for(be.global||(be=Kl(be.source,Mi(kr.exec(be))+"g")),be.lastIndex=0;sn=be.exec(on);)var hn=sn.index;St=St.slice(0,hn===n?ft:hn)}}else if(d.indexOf(Sa(be),ft)!=ft){var In=St.lastIndexOf(be);In>-1&&(St=St.slice(0,In))}return St+q}function Y6(d){return d=Mi(d),d&&ar.test(d)?d.replace(Nn,_a):d}var Z6=_d(function(d,b,A){return d+(A?" ":"")+b.toUpperCase()}),Vy=G_("toUpperCase");function Hw(d,b,A){return d=Mi(d),b=A?n:b,b===n?bo(d)?ta(d):st(d):d.match(b)||[]}var Ww=Vr(function(d,b){try{return ei(d,n,b)}catch(A){return jy(A)?A:new Un(A)}}),K6=Qc(function(d,b){return us(b,function(A){A=Lc(A),Pn(d,A,Ry(d[A],d))}),d});function X6(d){var b=d==null?0:d.length,A=pr();return d=b?ti(d,function(q){if(typeof q[1]!="function")throw new Ci(o);return[A(q[0]),q[1]]}):[],Vr(function(q){for(var be=-1;++be<b;){var Be=d[be];if(ei(Be[0],this,q))return ei(Be[1],this,q)}})}function J6(d){return g(h(d,p))}function Hy(d){return function(){return d}}function Q6(d,b){return d==null||d!==d?b:d}var eT=Y_(),tT=Y_(!0);function Sl(d){return d}function Wy(d){return qn(typeof d=="function"?d:h(d,p))}function nT(d){return io(h(d,p))}function rT(d,b){return Vu(d,h(b,p))}var iT=Vr(function(d,b){return function(A){return Ie(A,d,b)}}),sT=Vr(function(d,b){return function(A){return Ie(d,A,b)}});function Gy(d,b,A){var q=Wo(b),be=yn(b,q);A==null&&!(Os(b)&&(be.length||!q.length))&&(A=b,b=d,d=this,be=yn(b,Wo(b)));var Be=!(Os(A)&&"chain"in A)||!!A.chain,Ke=th(d);return us(be,function(ft){var St=b[ft];d[ft]=St,Ke&&(d.prototype[ft]=function(){var sn=this.__chain__;if(Be||sn){var on=d(this.__wrapped__),hn=on.__actions__=xl(this.__actions__);return hn.push({func:St,args:arguments,thisArg:d}),on.__chain__=sn,on}return St.apply(d,vo([this.value()],arguments))})}),d}function oT(){return Fi._===this&&(Fi._=$i),this}function qy(){}function aT(d){return d=Hr(d),Vr(function(b){return Ja(b,d)})}var lT=Cy(ti),uT=Cy(Zl),cT=Cy(I);function Gw(d){return Ty(d)?or(Lc(d)):Vi(d)}function hT(d){return function(b){return d==null?n:tr(d,b)}}var fT=K_(),dT=K_(!0);function Yy(){return[]}function Zy(){return!1}function pT(){return{}}function gT(){return""}function mT(){return!0}function vT(d,b){if(d=Hr(d),d<1||d>ie)return[];var A=Oe,q=we(d,Oe);b=pr(b),d-=Oe;for(var be=Ui(q,b);++A<d;)b(A);return be}function yT(d){return Br(d)?ti(d,Lc):Jl(d)?[d]:xl(fw(Mi(d)))}function bT(d){var b=++Uo;return Mi(d)+b}var _T=Cm(function(d,b){return d+b},0),wT=Sy("ceil"),xT=Cm(function(d,b){return d/b},1),LT=Sy("floor");function CT(d){return d&&d.length?he(d,Sl,lt):n}function ST(d,b){return d&&d.length?he(d,pr(b,2),lt):n}function ET(d){return Zn(d,Sl)}function PT(d,b){return Zn(d,pr(b,2))}function kT(d){return d&&d.length?he(d,Sl,Nr):n}function MT(d,b){return d&&d.length?he(d,pr(b,2),Nr):n}var AT=Cm(function(d,b){return d*b},1),TT=Sy("round"),OT=Cm(function(d,b){return d-b},0);function DT(d){return d&&d.length?ni(d,Sl):0}function IT(d,b){return d&&d.length?ni(d,pr(b,2)):0}return Me.after=nA,Me.ary=Lw,Me.assign=VA,Me.assignIn=Rw,Me.assignInWith=Rm,Me.assignWith=HA,Me.at=WA,Me.before=Cw,Me.bind=Ry,Me.bindAll=K6,Me.bindKey=Sw,Me.castArray=pA,Me.chain=_w,Me.chunk=Lk,Me.compact=Ck,Me.concat=Sk,Me.cond=X6,Me.conforms=J6,Me.constant=Hy,Me.countBy=DM,Me.create=GA,Me.curry=Ew,Me.curryRight=Pw,Me.debounce=kw,Me.defaults=qA,Me.defaultsDeep=YA,Me.defer=rA,Me.delay=iA,Me.difference=Ek,Me.differenceBy=Pk,Me.differenceWith=kk,Me.drop=Mk,Me.dropRight=Ak,Me.dropRightWhile=Tk,Me.dropWhile=Ok,Me.fill=Dk,Me.filter=NM,Me.flatMap=FM,Me.flatMapDeep=jM,Me.flatMapDepth=zM,Me.flatten=mw,Me.flattenDeep=Ik,Me.flattenDepth=Nk,Me.flip=sA,Me.flow=eT,Me.flowRight=tT,Me.fromPairs=Bk,Me.functions=t6,Me.functionsIn=n6,Me.groupBy=UM,Me.initial=Fk,Me.intersection=jk,Me.intersectionBy=zk,Me.intersectionWith=Uk,Me.invert=i6,Me.invertBy=s6,Me.invokeMap=VM,Me.iteratee=Wy,Me.keyBy=HM,Me.keys=Wo,Me.keysIn=Cl,Me.map=Tm,Me.mapKeys=a6,Me.mapValues=l6,Me.matches=nT,Me.matchesProperty=rT,Me.memoize=Dm,Me.merge=u6,Me.mergeWith=Fw,Me.method=iT,Me.methodOf=sT,Me.mixin=Gy,Me.negate=Im,Me.nthArg=aT,Me.omit=c6,Me.omitBy=h6,Me.once=oA,Me.orderBy=WM,Me.over=lT,Me.overArgs=aA,Me.overEvery=uT,Me.overSome=cT,Me.partial=Fy,Me.partialRight=Mw,Me.partition=GM,Me.pick=f6,Me.pickBy=jw,Me.property=Gw,Me.propertyOf=hT,Me.pull=Wk,Me.pullAll=yw,Me.pullAllBy=Gk,Me.pullAllWith=qk,Me.pullAt=Yk,Me.range=fT,Me.rangeRight=dT,Me.rearg=lA,Me.reject=ZM,Me.remove=Zk,Me.rest=uA,Me.reverse=Ny,Me.sampleSize=XM,Me.set=p6,Me.setWith=g6,Me.shuffle=JM,Me.slice=Kk,Me.sortBy=tA,Me.sortedUniq=rM,Me.sortedUniqBy=iM,Me.split=F6,Me.spread=cA,Me.tail=sM,Me.take=oM,Me.takeRight=aM,Me.takeRightWhile=lM,Me.takeWhile=uM,Me.tap=CM,Me.throttle=hA,Me.thru=Am,Me.toArray=Iw,Me.toPairs=zw,Me.toPairsIn=Uw,Me.toPath=yT,Me.toPlainObject=Bw,Me.transform=m6,Me.unary=fA,Me.union=cM,Me.unionBy=hM,Me.unionWith=fM,Me.uniq=dM,Me.uniqBy=pM,Me.uniqWith=gM,Me.unset=v6,Me.unzip=By,Me.unzipWith=bw,Me.update=y6,Me.updateWith=b6,Me.values=Ld,Me.valuesIn=_6,Me.without=mM,Me.words=Hw,Me.wrap=dA,Me.xor=vM,Me.xorBy=yM,Me.xorWith=bM,Me.zip=_M,Me.zipObject=wM,Me.zipObjectDeep=xM,Me.zipWith=LM,Me.entries=zw,Me.entriesIn=Uw,Me.extend=Rw,Me.extendWith=Rm,Gy(Me,Me),Me.add=_T,Me.attempt=Ww,Me.camelCase=C6,Me.capitalize=$w,Me.ceil=wT,Me.clamp=w6,Me.clone=gA,Me.cloneDeep=vA,Me.cloneDeepWith=yA,Me.cloneWith=mA,Me.conformsTo=bA,Me.deburr=Vw,Me.defaultTo=Q6,Me.divide=xT,Me.endsWith=S6,Me.eq=Yu,Me.escape=E6,Me.escapeRegExp=P6,Me.every=IM,Me.find=BM,Me.findIndex=pw,Me.findKey=ZA,Me.findLast=RM,Me.findLastIndex=gw,Me.findLastKey=KA,Me.floor=LT,Me.forEach=ww,Me.forEachRight=xw,Me.forIn=XA,Me.forInRight=JA,Me.forOwn=QA,Me.forOwnRight=e6,Me.get=Uy,Me.gt=_A,Me.gte=wA,Me.has=r6,Me.hasIn=$y,Me.head=vw,Me.identity=Sl,Me.includes=$M,Me.indexOf=Rk,Me.inRange=x6,Me.invoke=o6,Me.isArguments=Lf,Me.isArray=Br,Me.isArrayBuffer=xA,Me.isArrayLike=Ll,Me.isArrayLikeObject=so,Me.isBoolean=LA,Me.isBuffer=Th,Me.isDate=CA,Me.isElement=SA,Me.isEmpty=EA,Me.isEqual=PA,Me.isEqualWith=kA,Me.isError=jy,Me.isFinite=MA,Me.isFunction=th,Me.isInteger=Aw,Me.isLength=Nm,Me.isMap=Tw,Me.isMatch=AA,Me.isMatchWith=TA,Me.isNaN=OA,Me.isNative=DA,Me.isNil=NA,Me.isNull=IA,Me.isNumber=Ow,Me.isObject=Os,Me.isObjectLike=$s,Me.isPlainObject=Ep,Me.isRegExp=zy,Me.isSafeInteger=BA,Me.isSet=Dw,Me.isString=Bm,Me.isSymbol=Jl,Me.isTypedArray=xd,Me.isUndefined=RA,Me.isWeakMap=FA,Me.isWeakSet=jA,Me.join=$k,Me.kebabCase=k6,Me.last=Cu,Me.lastIndexOf=Vk,Me.lowerCase=M6,Me.lowerFirst=A6,Me.lt=zA,Me.lte=UA,Me.max=CT,Me.maxBy=ST,Me.mean=ET,Me.meanBy=PT,Me.min=kT,Me.minBy=MT,Me.stubArray=Yy,Me.stubFalse=Zy,Me.stubObject=pT,Me.stubString=gT,Me.stubTrue=mT,Me.multiply=AT,Me.nth=Hk,Me.noConflict=oT,Me.noop=qy,Me.now=Om,Me.pad=T6,Me.padEnd=O6,Me.padStart=D6,Me.parseInt=I6,Me.random=L6,Me.reduce=qM,Me.reduceRight=YM,Me.repeat=N6,Me.replace=B6,Me.result=d6,Me.round=TT,Me.runInContext=vt,Me.sample=KM,Me.size=QM,Me.snakeCase=R6,Me.some=eA,Me.sortedIndex=Xk,Me.sortedIndexBy=Jk,Me.sortedIndexOf=Qk,Me.sortedLastIndex=eM,Me.sortedLastIndexBy=tM,Me.sortedLastIndexOf=nM,Me.startCase=j6,Me.startsWith=z6,Me.subtract=OT,Me.sum=DT,Me.sumBy=IT,Me.template=U6,Me.times=vT,Me.toFinite=nh,Me.toInteger=Hr,Me.toLength=Nw,Me.toLower=$6,Me.toNumber=Su,Me.toSafeInteger=$A,Me.toString=Mi,Me.toUpper=V6,Me.trim=H6,Me.trimEnd=W6,Me.trimStart=G6,Me.truncate=q6,Me.unescape=Y6,Me.uniqueId=bT,Me.upperCase=Z6,Me.upperFirst=Vy,Me.each=ww,Me.eachRight=xw,Me.first=vw,Gy(Me,function(){var d={};return Yt(Me,function(b,A){Ir.call(Me.prototype,A)||(d[A]=b)}),d}(),{chain:!1}),Me.VERSION=r,us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Me[d].placeholder=Me}),us(["drop","take"],function(d,b){Pr.prototype[d]=function(A){A=A===n?1:ne(Hr(A),0);var q=this.__filtered__&&!b?new Pr(this):this.clone();return q.__filtered__?q.__takeCount__=we(A,q.__takeCount__):q.__views__.push({size:we(A,Oe),type:d+(q.__dir__<0?"Right":"")}),q},Pr.prototype[d+"Right"]=function(A){return this.reverse()[d](A).reverse()}}),us(["filter","map","takeWhile"],function(d,b){var A=b+1,q=A==X||A==R;Pr.prototype[d]=function(be){var Be=this.clone();return Be.__iteratees__.push({iteratee:pr(be,3),type:A}),Be.__filtered__=Be.__filtered__||q,Be}}),us(["head","last"],function(d,b){var A="take"+(b?"Right":"");Pr.prototype[d]=function(){return this[A](1).value()[0]}}),us(["initial","tail"],function(d,b){var A="drop"+(b?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[A](1)}}),Pr.prototype.compact=function(){return this.filter(Sl)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=Vr(function(d,b){return typeof d=="function"?new Pr(this):this.map(function(A){return Ie(A,d,b)})}),Pr.prototype.reject=function(d){return this.filter(Im(pr(d)))},Pr.prototype.slice=function(d,b){d=Hr(d);var A=this;return A.__filtered__&&(d>0||b<0)?new Pr(A):(d<0?A=A.takeRight(-d):d&&(A=A.drop(d)),b!==n&&(b=Hr(b),A=b<0?A.dropRight(-b):A.take(b-d)),A)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(Oe)},Yt(Pr.prototype,function(d,b){var A=/^(?:filter|find|map|reject)|While$/.test(b),q=/^(?:head|last)$/.test(b),be=Me[q?"take"+(b=="last"?"Right":""):b],Be=q||/^find/.test(b);be&&(Me.prototype[b]=function(){var Ke=this.__wrapped__,ft=q?[1]:arguments,St=Ke instanceof Pr,sn=ft[0],on=St||Br(Ke),hn=function(si){var ci=be.apply(Me,vo([si],ft));return q&&In?ci[0]:ci};on&&A&&typeof sn=="function"&&sn.length!=1&&(St=on=!1);var In=this.__chain__,Qn=!!this.__actions__.length,vr=Be&&!In,qr=St&&!Qn;if(!Be&&on){Ke=qr?Ke:new Pr(this);var yr=d.apply(Ke,ft);return yr.__actions__.push({func:Am,args:[hn],thisArg:n}),new gs(yr,In)}return vr&&qr?d.apply(this,ft):(yr=this.thru(hn),vr?q?yr.value()[0]:yr.value():yr)})}),us(["pop","push","shift","sort","splice","unshift"],function(d){var b=na[d],A=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",q=/^(?:pop|shift)$/.test(d);Me.prototype[d]=function(){var be=arguments;if(q&&!this.__chain__){var Be=this.value();return b.apply(Br(Be)?Be:[],be)}return this[A](function(Ke){return b.apply(Br(Ke)?Ke:[],be)})}}),Yt(Pr.prototype,function(d,b){var A=Me[b];if(A){var q=A.name+"";Ir.call(no,q)||(no[q]=[]),no[q].push({name:b,func:A})}}),no[Lm(n,O).name]=[{name:"wrapper",func:n}],Pr.prototype.clone=Sh,Pr.prototype.reverse=ld,Pr.prototype.value=Eh,Me.prototype.at=SM,Me.prototype.chain=EM,Me.prototype.commit=PM,Me.prototype.next=kM,Me.prototype.plant=AM,Me.prototype.reverse=TM,Me.prototype.toJSON=Me.prototype.valueOf=Me.prototype.value=OM,Me.prototype.first=Me.prototype.head,ir&&(Me.prototype[ir]=MM),Me},ks=_o();ji?((ji.exports=ks)._=ks,Jn._=ks):Fi._=ks}).call(Zo)})(yv,yv.exports);var Q$=yv.exports;const eV={class:"h-full flex"},tV={class:"flex-1 relative"},nV={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},rV={class:"text-center max-w-lg mx-auto p-8"},iV={class:"space-y-4"},sV={class:"map-parent"},oV={class:"map-content flex flex-col h-full"},aV={class:"flex-1 flex flex-col md:flex-row relative"},lV={class:"flex-1 relative"},uV={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},cV={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},hV={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},fV={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},dV={key:0,class:"space-y-4"},pV={key:0,class:"space-y-2"},gV={class:"grid grid-cols-1 gap-2"},mV=["onClick"],vV={class:"font-medium text-gray-900"},yV={key:1,class:"space-y-2"},bV={class:"flex items-center mb-4"},_V={class:"text-sm text-gray-600"},wV={class:"grid grid-cols-1 gap-2"},xV=["onClick"],LV={class:"font-medium text-gray-900"},CV={key:2,class:"space-y-2"},SV={class:"flex items-center mb-4"},EV={class:"text-sm text-gray-600"},PV={class:"grid grid-cols-1 gap-2"},kV={key:0,class:"text-center py-4"},MV=["onClick"],AV={class:"font-medium text-gray-900"},TV={key:3,class:"space-y-2"},OV={class:"flex items-center mb-4"},DV={class:"text-sm text-gray-600"},IV={class:"grid grid-cols-1 gap-2"},NV=["onClick"],BV={class:"font-medium text-gray-900"},RV={class:"text-sm text-gray-500"},FV={class:"text-xs text-gray-400 mt-1"},jV=["onClick"],zV={key:1,class:"space-y-4"},UV={key:0,class:"space-y-2"},$V={class:"grid grid-cols-1 gap-2"},VV={key:0,class:"text-center py-8"},HV=["onClick"],WV={class:"font-medium text-gray-900"},GV={key:1,class:"space-y-2"},qV={class:"flex items-center mb-4"},YV={class:"text-sm text-gray-600"},ZV={class:"grid grid-cols-1 gap-2"},KV=["onClick"],XV={class:"font-medium text-gray-900"},JV={class:"text-sm text-gray-500"},QV={class:"text-xs text-gray-400 mt-1"},eH=["onClick"],tH={key:2,class:"space-y-4"},nH={key:0,class:"space-y-2"},rH={class:"grid grid-cols-1 gap-2"},iH=["onClick"],sH={class:"font-medium text-gray-900"},oH={key:1,class:"space-y-2"},aH={class:"flex items-center mb-4"},lH={class:"text-sm text-gray-600"},uH={class:"grid grid-cols-1 gap-2"},cH={key:0,class:"text-center py-4"},hH=["onClick"],fH={class:"font-medium text-gray-900"},dH={key:2,class:"space-y-2"},pH={class:"flex items-center mb-4"},gH={class:"text-sm text-gray-600"},mH={class:"grid grid-cols-1 gap-2"},vH=["onClick"],yH={class:"font-medium text-gray-900"},bH={class:"text-sm text-gray-500"},_H={class:"text-xs text-gray-400 mt-1"},wH=["onClick"],xH={key:3,class:"space-y-4"},LH={key:0,class:"text-center py-8"},CH={key:1,class:"space-y-2"},SH=["onClick"],EH={class:"font-medium text-gray-900"},PH={class:"text-sm text-gray-500"},kH={class:"text-xs text-gray-400 mt-1"},MH=["onClick"],AH={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},TH={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},OH={class:"text-center mb-4"},DH={class:"mt-2 text-gray-600"},Q4=_s({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=rB(),r=kt(null),i=kt(!1),s=e_(),o=qg(),a=yh(),l=ul(),c=kt([]),f=kt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:y,map:m,initMap:C,setDrawingTool:S,updateShapeStyle:T,updateShapeProperties:O,featureGroup:D,adjustView:B,clearActiveControlPoints:z,isDrawing:H}=kU(),{initMap:J,changeBaseMap:Q}=OU(),V=kt(!1),Y=kt(!1),ge=kt(!1),$=kt(!1),W=kt(null),se=kt(null),X=kt(null),U=kt(!1),R=kt(null),ee=po(),ie=kt([]),fe=kt([]),me=kt([]),Oe=kt(null),Z=kt(null),ae=kt(null),ce=kt(!1),pe=kt(!1),Le=kt(!1),Pe=kt(null),Ue=rr(()=>ee.isSalarie||Oe.value?fe.value:[]),Ne=rr(()=>{if(!y.value)return null;const Nt=y.value.properties||{};let He="unknown";Nt.type?He=Nt.type:y.value instanceof Ol||y.value instanceof dn.Polygon?He="Polygon":(y.value instanceof vs||y.value instanceof dn.Polyline&&!(y.value instanceof dn.Polygon))&&(He="Line"),Nt.type||(y.value.properties||(y.value.properties={}),y.value.properties.type=He);let Vt;if(Nt.style&&Nt.style.name)Vt=Nt.style.name;else if(Nt.name)Vt=Nt.name;else if(y.value.name)Vt=y.value.name;else{const Ln=Object.getOwnPropertyDescriptor(y.value,"name");Ln&&Ln.value&&(Vt=Ln.value);const Pt=["_name","displayName","title"];for(const wt of Pt)if(y.value[wt]){Vt=y.value[wt];break}}Vt&&(y.value.properties||(y.value.properties={}),y.value.properties.name=Vt,y.value.properties.style||(y.value.properties.style={}),y.value.properties.style.name=Vt,y.value.name=Vt,typeof y.value.setName=="function"&&y.value.setName(Vt)),y.value.properties.category||(y.value.properties.category="forages"),y.value.properties.accessLevel||(y.value.properties.accessLevel="visitor");const Bn={...Nt,type:He,name:Vt||y.value.name||Nt.name||void 0,category:y.value.properties.category||"forages",accessLevel:y.value.properties.accessLevel||"visitor"};return{type:He,properties:Bn,layer:y.value,options:y.value.options||{}}});function nt(Nt){const He=Nt.getCenter(),Vt=Nt.getZoom(),Bn={lat:He.lat,lng:He.lng,zoom:Vt};document.cookie=`mapState=${JSON.stringify(Bn)};max-age=2592000;path=/`}function pt(){const He=document.cookie.split(";").find(Vt=>Vt.trim().startsWith("mapState="));if(He)try{return JSON.parse(He.split("=")[1])}catch(Vt){return console.error("Erreur lors de la lecture du cookie de position:",Vt),null}return null}Zs(async()=>{var Nt,He;window.addEventListener("resize",ki);try{if(await s.fetchPlans(),(ee.isAdmin||ee.isEntreprise)&&await it(),ee.isEntreprise){ce.value=!0;try{const qt=await Cn.get("/users/",{params:{role:"SALARIE",entreprise:(Nt=ee.user)==null?void 0:Nt.id}});ie.value=qt.data}catch(qt){console.error("Error loading salaries:",qt),ie.value=[]}finally{ce.value=!1}}if(ee.isSalarie){pe.value=!0;try{const qt=await ee.fetchSalarieVisiteurs(((He=ee.user)==null?void 0:He.id)||0);fe.value=Array.isArray(qt)?qt:[qt]}catch(qt){console.error("Error loading clients:",qt)}finally{pe.value=!1}}const Vt=pt(),Bn=Vt?[Vt.lat,Vt.lng]:[46.603354,1.888334],Vn=(Vt==null?void 0:Vt.zoom)??6;if(r.value&&!m.value){const qt=C(r.value,Bn,Vn);qt.pm.setLang("fr"),qt.pm.addControls({rotateMode:!1}),J(qt),qt.on("moveend",()=>{nt(qt)}),window.addEventListener("map-set-location",wn=>{if(qt&&wn.detail){const{lat:Tn,lng:Xn,zoom:sr}=wn.detail;qt.flyTo([Tn,Xn],sr,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",wn=>{const Tn=wn.layer;Tn&&Tn._leaflet_id&&c.value.findIndex(sr=>sr.layer&&sr.layer._leaflet_id===Tn._leaflet_id)===-1&&c.value.push({layer:Tn,id:Tn._dbId||Tn._leaflet_id})}),D.value.on("layerremove",wn=>{const Tn=wn.layer;if(Tn&&Tn._leaflet_id&&!Tn._dbId&&(!Tn.properties||Tn.properties&&!Tn.properties.type)){const sr=c.value.findIndex(kr=>kr.layer&&kr.layer._leaflet_id===Tn._leaflet_id);sr!==-1&&c.value.splice(sr,1)}}))}if(f.value.planId)try{await Se(f.value.planId);const qt=document.querySelector(".map-parent");qt instanceof HTMLElement&&(qt.style.display="block"),f.value.lat&&f.value.lng&&m.value&&m.value.flyTo([f.value.lat,f.value.lng],30),f.value.noteId&&D.value&&setTimeout(()=>{var Tn;const wn=((Tn=D.value)==null?void 0:Tn.getLayers())||[];for(const Xn of wn)if(Xn._dbId===f.value.noteId||Xn.id===f.value.noteId){if(typeof Xn.fire=="function"&&Xn.fire("click"),typeof Xn.bringToFront=="function"&&Xn.bringToFront(),m.value){const sr=typeof Xn.getLatLng=="function"?Xn.getLatLng():[f.value.lat,f.value.lng];m.value.flyTo(sr,18)}break}},1e3),f.value.tool&&S(f.value.tool)}catch(qt){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",qt),await Ln()}else await Ln();async function Ln(){const qt=localStorage.getItem("lastPlanId");if(qt)try{await Se(parseInt(qt));const wn=document.querySelector(".map-parent");wn instanceof HTMLElement&&(wn.style.display="block")}catch(wn){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",wn),W.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),localStorage.removeItem("lastPlanId")}else W.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue()}window.addEventListener("shape:created",qt=>{const{shape:wn,type:Tn,properties:Xn}=qt.detail;o.addElement(wn),S("")}),window.addEventListener("geonote:savePlan",()=>{Ve()}),window.addEventListener("geonote:select",qt=>{if(qt.detail&&qt.detail.geoNote){const wn=qt.detail.geoNote;y.value=wn,ll(()=>{})}}),window.addEventListener("categoriesReactivated",qt=>{Nn()}),window.addEventListener("shapeTypesReactivated",qt=>{Nn()});const Pt=qt=>{if(!qt||!qt.note){console.error("[MapView] Erreur: e.note est undefined ou null",qt);return}const wn=qt.note;se.value={id:wn.id,title:wn.title||wn.name,description:wn.description,location:wn.location,columnId:wn.columnId||a.getDefaultColumn.id,accessLevel:wn.accessLevel,style:wn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:wn.createdAt||new Date().toISOString(),updatedAt:wn.updatedAt||new Date().toISOString(),comments:wn.comments||[],photos:wn.photos||[]},ge.value=!0},wt=qt=>{if(!qt.detail||!qt.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",qt);return}const wn=qt.detail.note;let Xn=qt.detail.backendId||wn.backendId;if(!Xn){const sr=c.value.find(kr=>kr.layer===qt.detail.source);Xn=sr?sr.id:wn.id}se.value={id:Xn,leafletId:wn.id,title:wn.title||wn.name,description:wn.description,location:wn.location,columnId:wn.columnId||a.getDefaultColumn.id,accessLevel:wn.accessLevel,style:wn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:wn.createdAt||new Date().toISOString(),updatedAt:wn.updatedAt||new Date().toISOString(),comments:wn.comments||[],photos:wn.photos||[]},ge.value=!0};window.addEventListener("geonote:edit",wt),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",Pt))}catch(Vt){console.error("Error during component mount:",Vt),W.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),localStorage.removeItem("lastPlanId")}}),vi(()=>o.hasUnsavedChanges,Nt=>{Nt&&W.value&&(s.markUnsavedChanges(),Ve())});let bt;Zs(()=>{bt=setInterval(()=>{o.hasUnsavedChanges&&W.value&&Ve()},6e4)}),Au(()=>{clearInterval(bt)}),vi(()=>s.plans,Nt=>{Y.value&&ae.value},{deep:!0}),vi(()=>o.filters,(Nt,He)=>{if(He){const Vt=JSON.stringify(He.accessLevels)!==JSON.stringify(Nt.accessLevels),Bn=JSON.stringify(He.categories)!==JSON.stringify(Nt.categories),Vn=JSON.stringify(He.shapeTypes)!==JSON.stringify(Nt.shapeTypes);(Vt||Bn||Vn)&&Nn()}else Nn()},{deep:!0});const le=Nt=>{Nn()};Zs(()=>{window.addEventListener("filtersChanged",le)}),Au(()=>{window.removeEventListener("filtersChanged",le)}),vi(()=>o.getFilteredElements,(Nt,He)=>{Nn()},{deep:!0}),vi(m,async Nt=>{var He;Nt&&s.currentPlan&&!((He=D.value)!=null&&He.getLayers().length)&&(ue(),await o.loadPlanElements(s.currentPlan.id))}),vi(()=>s.currentPlan,async(Nt,He)=>{if((Nt==null?void 0:Nt.id)!==(He==null?void 0:He.id))try{if(Nt){W.value=Nt;const Vt=document.querySelector(".map-parent");Vt instanceof HTMLElement&&(Vt.style.display="block")}else{W.value=null,ue();const Vt=document.querySelector(".map-parent");Vt instanceof HTMLElement&&(Vt.style.display="none")}}catch(Vt){console.error("[MapView][watch currentPlan] ERREUR:",Vt),W.value=null,ue()}},{immediate:!0}),ff(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",ki),window.removeEventListener("shape:created",()=>{})});function oe(){i.value=!i.value}function ue(){D.value&&(D.value.eachLayer(Nt=>{var He;((He=Nt.properties)==null?void 0:He.type)==="Note"&&typeof Nt.resetPlanSaveState=="function"&&Nt.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],z(),y.value=null,p.value=""}async function te(Nt){try{ue(),await o.loadPlanElements(Nt);const He=s.getPlanById(Nt);if(He){W.value=He,s.setCurrentPlan(He),o.setCurrentPlan(He.id),localStorage.setItem("lastPlanId",He.id.toString());try{const Bn=(await Yo.getNotesByPlan(Nt)).data,Vn=yh();m.value&&D.value&&Bn.forEach(Ln=>{try{if(Vn.addNote({...Ln,id:Ln.id,columnId:Ln.column,accessLevel:Ln.access_level}),Ln.location&&Ln.location.type==="Point"&&Array.isArray(Ln.location.coordinates)&&Ln.location.coordinates.length===2){const Pt=il.fromBackendData({name:Ln.title,description:Ln.description,location:Ln.location,columnId:Ln.column,accessLevel:Ln.access_level,style:Ln.style||{color:Ln.color||"#3B82F6",weight:2,opacity:1,fillColor:Ln.color||"#3B82F6",fillOpacity:.6,radius:8},category:Ln.category||"forages",comments:Ln.comments||[],photos:Ln.photos||[]});Pt._dbId=Ln.id,D.value.addLayer(Pt),c.value.push({id:Ln.id,type:"Note",layer:Pt,properties:Pt.properties})}}catch(Pt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",Pt)}})}catch(Vt){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",Vt)}if(m.value&&D.value){const Vt=o.getCurrentElements.reduce((Pt,wt)=>(Pt[wt.type_forme]||(Pt[wt.type_forme]=[]),Pt[wt.type_forme].push(wt),Pt),{}),Bn=["Note","Polygon","Line"],Vn=Object.keys(Vt).sort((Pt,wt)=>{const qt=Bn.indexOf(Pt),wn=Bn.indexOf(wt);return(qt===-1?999:qt)-(wn===-1?999:wn)}),Ln=Pt=>{switch(Pt){case"Note":return 20;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Pt of Vn){const wt=Vt[Pt],qt=Ln(Pt);for(let wn=0;wn<wt.length;wn+=qt){const Tn=wt.slice(wn,wn+qt);await Promise.all(Tn.map(async Xn=>{var kr;if(!D.value||!Xn.data)return;let sr=null;switch(Xn.type_forme){case"Polygon":{const Hn=Xn.data;if(Hn.points&&Hn.points.length>0){const _i=Hn.points.map(Ur=>dn.latLng(Ur[1],Ur[0]));sr=new Ol(_i,Hn.style),Hn.name&&(sr.properties={name:Hn.name},sr.name=Hn.name)}break}case"Line":{const Hn=Xn.data;if(Hn.points&&Hn.points.length>0){const _i=Hn.points.map(Ur=>dn.latLng(Ur[1],Ur[0]));sr=new vs(_i,Hn.style),Hn.name&&(sr.properties={name:Hn.name},sr.name=Hn.name)}break}case"Note":{const Hn=Xn.data;if(Hn.location&&Array.isArray(Hn.location)&&Hn.location.length===2||Hn.location&&typeof Hn.location=="object"&&Hn.location.type==="Point"&&Array.isArray(Hn.location.coordinates)&&Hn.location.coordinates.length===2)try{Hn.category||(Hn.category="forages"),Hn.accessLevel||(Hn.accessLevel="private");const Ur=il.fromBackendData(Hn);Ur._dbId=Xn.id,sr=Ur}catch(Ur){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Ur)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",Hn);break}}sr&&(sr._dbId=Xn.id,(kr=D.value)==null||kr.addLayer(sr),c.value.push({id:Xn.id,type:Xn.type_forme,layer:sr,properties:sr.properties}))})),await new Promise(Xn=>requestAnimationFrame(()=>setTimeout(Xn,0)))}}setTimeout(()=>{B(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)}}else console.error(`Plan ${Nt} introuvable après chargement`);Y.value=!1}catch(He){throw console.error("Erreur lors du rafraîchissement de la carte:",He),He}}async function Se(Nt){var He;try{if(!s.getPlanById(Nt))try{await Cn.get(`/plans/${Nt}/`)}catch(Bn){throw((He=Bn.response)==null?void 0:He.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - conservation de lastPlanId pour fallback"),W.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue()),Bn}await te(Nt),Y.value=!1,Zt()}catch(Vt){throw console.error("Erreur lors du chargement du plan:",Vt),W.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),Vt}}async function Ve(){var Nt;if(!U.value){if(!W.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}U.value=!0,R.value="saving";try{const He=[],Vt=new Set(o.getCurrentElements.filter(wt=>wt.id!==void 0).map(wt=>wt.id)),Bn=new Set;D.value.eachLayer(wt=>{var Xn,sr,kr,Hn,_i,Ur,Xo;let qt,wn;const Tn={color:wt.options.color||"#2b6451",weight:wt.options.weight||3,opacity:wt.options.opacity||1,fillColor:wt.options.fillColor||"#2b6451",fillOpacity:wt.options.fillOpacity||.2,dashArray:wt.options.dashArray||""};if(wt instanceof dn.Polyline&&!(wt instanceof dn.Polygon)){qt="Line";const lr=wt.getLatLngs(),ur=((Xn=wt.properties)==null?void 0:Xn.category)||"forages",Bi=((sr=wt.properties)==null?void 0:sr.accessLevel)||"visitor";wn={points:lr.map(So=>[So.lng,So.lat]),name:((kr=wt.properties)==null?void 0:kr.name)||"",category:ur,accessLevel:Bi,style:{...Tn,_accessLevel:Bi,accessLevel:Bi}}}else if(wt instanceof dn.Polygon){qt="Polygon";const lr=wt.getLatLngs()[0],ur=((Hn=wt.properties)==null?void 0:Hn.category)||"forages",Bi=((_i=wt.properties)==null?void 0:_i.accessLevel)||"visitor";wn={points:lr.map(So=>[So.lng,So.lat]),name:((Ur=wt.properties)==null?void 0:Ur.name)||"",category:ur,accessLevel:Bi,style:{...Tn,_accessLevel:Bi,accessLevel:Bi}}}else if(((Xo=wt.properties)==null?void 0:Xo.type)==="Note"){const lr=wt;if(lr._dbId&&typeof lr._dbId=="number"&&Bn.add(lr._dbId),typeof lr.saveNote=="function")try{if(lr.properties&&(lr.properties.style||(lr.properties.style={}),lr.properties.accessLevel&&(lr.properties.style._accessLevel=lr.properties.accessLevel,lr.properties.style.accessLevel=lr.properties.accessLevel),lr.properties.style.color)){const ur=lr.properties.style.color;lr.properties.style.color=ur,lr.properties.style.fillColor=ur}W.value&&W.value.id?lr.saveNote(W.value.id):lr.saveNote()}catch(ur){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",ur)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");qt=void 0,wn=void 0}if(qt&&wn){let lr=wt._elementId;wt._dbId&&(lr=wt._dbId,typeof lr=="number"&&Bn.add(lr)),He.push({id:lr,type_forme:qt,data:wn})}});const Vn=Array.from(Vt).filter(wt=>!Bn.has(wt)),Ln=He.filter(wt=>!wt.id||!Vn.includes(wt.id));o.elements=Ln;const Pt=await o.saveToPlan(W.value.id,{elementsToDelete:Vn});if(Pt&&((Nt=W.value)!=null&&Nt.id)){const wt=W.value.id;W.value={...W.value,...Pt},s.updatePlanDetails(wt,Pt)}R.value="success",D.value&&D.value.eachLayer(wt=>{var qt;((qt=wt.properties)==null?void 0:qt.type)==="Note"&&typeof wt.resetPlanSaveState=="function"&&wt.resetPlanSaveState()}),setTimeout(()=>{R.value=null},3e3)}catch(He){console.error("Erreur lors de la sauvegarde du plan:",He),R.value=null}finally{U.value=!1}}}Au(()=>{ee.user||zt(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function Xe(Nt){var He;if(O(Nt),y.value&&((He=y.value.properties)==null?void 0:He.type)==="Note")if(typeof y.value.saveNote=="function")try{if(Nt.category&&(y.value.properties.category=Nt.category),Nt.accessLevel&&(y.value.properties.accessLevel=Nt.accessLevel,y.value.properties.style||(y.value.properties.style={}),y.value.properties.style._accessLevel=Nt.accessLevel,y.value.properties.style.accessLevel=Nt.accessLevel),y.value.properties.style&&y.value.properties.style.color){const Vt=y.value.properties.style.color;y.value.properties.style.color=Vt,y.value.properties.style.fillColor=Vt}W.value&&W.value.id?y.value.saveNote(W.value.id):y.value.saveNote(),y.value.bindPopup&&y.value.createPopupContent&&y.value.bindPopup(y.value.createPopupContent())}catch(Vt){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Vt)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(Nt.category&&y.value&&y.value._dbId){const Vt=y.value._dbId,Bn=o.elements.find(Vn=>Vn.id===Vt);if(Bn){const Vn=Bn;Vn.data||(Vn.data={}),Vn.data.category=Nt.category,o.$patch({unsavedChanges:!0})}}}const at=()=>{D.value&&B()},ot=async()=>{var Nt;if(y.value&&D.value){const He=y.value._leaflet_id,Vt=y.value._dbId;if(((Nt=y.value.properties)==null?void 0:Nt.type)==="Note"&&Vt)try{await Yo.deleteNote(Vt),a.removeNote(Vt),l.success("Note supprimée avec succès")}catch(Vn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Vt} du backend:`,Vn),l.error("Erreur lors de la suppression de la note")}S(""),D.value.removeLayer(y.value),c.value=c.value.filter(Vn=>Vn.layer&&Vn.layer._leaflet_id!==He),y.value=null}};async function dt(Nt){await s.fetchPlans();const He=s.getPlanById(Nt);He?(localStorage.setItem("lastPlanId",Nt.toString()),W.value=He,s.setCurrentPlan(He),o.setCurrentPlan(He.id),V.value=!1,Zt()):console.error(`Plan ${Nt} introuvable après création! Vérifiez les permissions.`)}vi(Oe,async Nt=>{var He;if(Nt&&((He=ee.user)==null?void 0:He.user_type)==="admin"){pe.value=!0;try{const Vt=await ee.fetchSalarieVisiteurs(Nt.id);fe.value=Array.isArray(Vt)?Vt:[Vt]}catch(Vt){console.error("[MapView][watch selectedSalarie] Error:",Vt),fe.value=[]}finally{pe.value=!1}}});function zt(){localStorage.removeItem("lastPlanId")}const Rt=Q$.debounce(()=>{m.value&&ll(()=>{var Nt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(Nt=D.value)!=null&&Nt.getLayers().length)try{B()}catch(He){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",He)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(He){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",He)}})},250);function Zt(){Rt()}vi(W,(Nt,He)=>{Nt&&Nt.id!==(He==null?void 0:He.id)&&ll(()=>{Zt()})});const Qt=kt(null),pn=kt(!1),Sn=kt([]),Ze=rr(()=>Qt.value?ie.value.filter(He=>{var Vn;const Vt=He.entreprise;return(typeof Vt=="object"&&Vt!==null?Vt.id:Vt)===((Vn=Qt.value)==null?void 0:Vn.id)}):[]);async function it(){pn.value=!0;try{const Nt=await Cn.get("/users/",{params:{role:"ENTREPRISE"}});Sn.value=Nt.data}catch(Nt){console.error("[MapView] Error loading entreprises:",Nt),Sn.value=[]}finally{pn.value=!1}}async function Je(Nt){Qt.value=Nt,ce.value=!0;try{const He=await Cn.get("/users/",{params:{role:"SALARIE",entreprise:Nt.id}});ie.value=He.data}catch(He){console.error("[MapView] Error loading salaries for entreprise:",He),ie.value=[]}finally{ce.value=!1}}function $t(){Qt.value=null,Oe.value=null,ae.value=null,ie.value=[],fe.value=[],me.value=[]}function Kt(){Oe.value=null,ae.value=null,fe.value=[],me.value=[]}function _n(){ae.value=null,me.value=[]}async function gn(Nt){var He;Oe.value=Nt,pe.value=!0;try{const Vt={role:"VISITEUR",salarie:Nt.id};ee.isEntreprise?Vt.entreprise=(He=ee.user)==null?void 0:He.id:Qt.value&&(Vt.entreprise=Qt.value.id);const Bn=await Cn.get("/users/",{params:Vt});Array.isArray(Bn.data)?(fe.value=Bn.data,Bn.data.forEach((Vn,Ln)=>{})):(console.warn("Format de réponse inattendu:",Bn.data),fe.value=[]),fe.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Vt){if(console.error("ERREUR lors du chargement des visiteurs:",Vt),Vt&&typeof Vt=="object"&&"response"in Vt){const Bn=Vt;console.error("Détails de l'erreur:",{status:Bn.response.status,data:Bn.response.data})}fe.value=[]}finally{pe.value=!1}}function bn(){ge.value=!1,se.value=null}function Rn(Nt){X.value=Nt,$.value=!0}async function mn(){var Nt,He,Vt;if((Nt=X.value)!=null&&Nt.id)try{const Bn=X.value.id,Vn={selectedClient:ae.value,selectedSalarie:Oe.value,isNoVisiteurView:ae.value&&ae.value.id===-1};if(await s.deletePlan(Bn),$.value=!1,X.value=null,await new Promise(Ln=>setTimeout(Ln,50)),Vn.isNoVisiteurView)await zn();else if(Vn.selectedClient){const Ln={visiteur:Vn.selectedClient.id};Vn.selectedSalarie&&(Ln.salarie=Vn.selectedSalarie.id),ee.isEntreprise?Ln.entreprise=(He=ee.user)==null?void 0:He.id:Qt.value&&(Ln.entreprise=Qt.value.id);const Pt=await Cn.get("/plans/",{params:Ln});me.value=Pt.data}else await s.fetchPlans();((Vt=W.value)==null?void 0:Vt.id)===Bn&&(W.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),localStorage.removeItem("lastPlanId"))}catch(Bn){console.error("Erreur lors de la suppression du plan:",Bn),alert("Une erreur est survenue lors de la suppression du plan"),$.value=!1,X.value=null}}function nn(){$.value=!1,X.value=null}function cn(Nt){o.updateFilters(Nt),Nn(),setTimeout(()=>{Nn()},100)}function Nn(){if(!D.value)return;const Nt=[];c.value.forEach((Pt,wt)=>{Pt.layer&&!Pt.id&&(!Pt.layer.properties||Pt.layer.properties&&!Pt.layer.properties.type)&&Nt.push(wt)});for(let Pt=Nt.length-1;Pt>=0;Pt--)c.value.splice(Nt[Pt],1);({...o.filters.accessLevels},{...o.filters.categories}),{...o.filters.shapeTypes},o.elements.length,o.elements.map(Pt=>({id:Pt.id,type_forme:Pt.type_forme}));const He=o.getFilteredElements,Vt=D.value.getLayers();Vt.map(Pt=>({_leaflet_id:Pt._leaflet_id,_dbId:Pt._dbId,hasProperties:!!Pt.properties,propertyType:Pt.properties?Pt.properties.type:null,category:Pt.properties?Pt.properties.category:null}));const Bn=new Map;c.value.forEach(Pt=>{Pt.layer&&Pt.id&&Bn.set(Pt.id,Pt.layer)});const Vn=new Map;Vt.forEach(Pt=>{Pt._dbId&&Vn.set(Pt,Pt._dbId)});const Ln=new Set(He.map(Pt=>Pt.id));Array.from(Ln),Vt.forEach(Pt=>{const wt=Pt._dbId;if(Pt._leaflet_id,!wt){if(!Pt.properties)return;Pt._dbId=Date.now()+Math.floor(Math.random()*1e3)}const qt=Pt.properties||{},wn=qt.type||Pt.type_forme||"";let Tn=qt.category;if(Pt._dbId){const lr=o.elements.find(ur=>ur.id===Pt._dbId);if(lr){const ur=lr.data;ur&&ur.category&&(Tn!==ur.category&&(Tn=ur.category),Pt.properties||(Pt.properties={}),Pt.properties.category=Tn)}}Tn||(Tn="default");const Xn=qt.accessLevel||"visitor";let sr=!1;wn?sr=wn in o.filters.shapeTypes&&o.filters.shapeTypes[wn]===!0:sr=o.filters.shapeTypes.Polygon===!0;let kr=!1;Tn&&Tn in o.filters.categories?kr=o.filters.categories[Tn]===!0:kr=o.filters.categories.forages===!0;let Hn=!1;const _i={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ur="visitor";_i.company?Ur="company":_i.employee?Ur="employee":_i.visitor&&(Ur="visitor"),Ur==="company"?Hn=!0:Ur==="employee"?Hn=Xn==="employee"||Xn==="visitor":Ur==="visitor"&&(Hn=Xn==="visitor"),sr&&kr&&Hn?D.value.hasLayer(Pt)||(Tn&&Tn!=="default"&&(!Pt.properties||!Pt.properties.category)&&(Pt.properties||(Pt.properties={}),Pt.properties.category=Tn),D.value.addLayer(Pt)):D.value.hasLayer(Pt)&&D.value.removeLayer(Pt)}),c.value.forEach(Pt=>{if(!Pt.layer)return;const wt=Pt.layer;if(wt._leaflet_id,wt._dbId,D.value.hasLayer(wt))return;const qt=wt.properties||{},wn=qt.type||wt.type_forme||"";let Tn=null;if(wt._dbId){const lr=o.elements.find(ur=>ur.id===wt._dbId);if(lr){const ur=lr.data;ur&&ur.category&&(Tn=ur.category)}}!Tn&&qt.category&&(Tn=qt.category),Tn||(Tn="default");const Xn=qt.accessLevel||"visitor";if(wt.properties||(wt.properties={}),Tn&&Tn!=="default"&&(wt.properties.category=Tn,wt._dbId)){const lr=o.elements.find(ur=>ur.id===wt._dbId);if(lr){const ur=lr;ur.data||(ur.data={}),ur.data.category!==Tn&&(ur.data.category=Tn,o.$patch({unsavedChanges:!0}))}}wt.properties.accessLevel||(wt.properties.accessLevel="visitor");let sr=!1;wn?sr=wn in o.filters.shapeTypes&&o.filters.shapeTypes[wn]===!0:sr=o.filters.shapeTypes.Polygon===!0;let kr=!1;if(Tn)if(Tn in o.filters.categories)kr=o.filters.categories[Tn]===!0;else if(FS().getUniqueCategories.includes(Tn)){const Bi={...o.filters.categories};Bi[Tn]=!0,o.updateFilters({categories:Bi}),kr=!0}else kr=o.filters.categories.forages===!0;else kr=o.filters.categories.forages===!0;let Hn=!1;const _i={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ur="visitor";if(_i.company?Ur="company":_i.employee?Ur="employee":_i.visitor&&(Ur="visitor"),Ur==="company"?Hn=!0:Ur==="employee"?Hn=Xn==="employee"||Xn==="visitor":Ur==="visitor"&&(Hn=Xn==="visitor"),sr&&kr&&Hn){if(Tn&&Tn!=="default"&&(wt.properties||(wt.properties={}),wt.properties.category=Tn,wt._dbId)){const lr=o.elements.find(ur=>ur.id===wt._dbId);if(lr){const ur=lr;ur.data||(ur.data={}),ur.data.category!==Tn&&(ur.data.category=Tn,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(wt)}})}function er(Nt){if(D.value){const Vt=D.value.getLayers().find(Bn=>Bn._leaflet_id===Nt.id||Bn._leaflet_id===Nt.leafletId);Vt&&(Vt.properties.name=Nt.title,Vt.properties.description=Nt.description,Vt.properties.columnId=Nt.columnId,Vt.properties.accessLevel=Nt.accessLevel,Vt.properties.comments=Nt.comments||[],Vt.properties.photos=Nt.photos||[],Vt.properties.updatedAt=new Date().toISOString(),Vt.properties.category||(Vt.properties.category="forages"),Vt.setNoteStyle({color:Nt.style.color,fillColor:Nt.style.fillColor,weight:Nt.style.weight,fillOpacity:Nt.style.fillOpacity,radius:Nt.style.radius}),Vt.closePopup(),Vt.unbindPopup(),Vt.bindPopup(Vt.createPopupContent()),window.dispatchEvent(new CustomEvent("geonote:update",{detail:{noteId:Nt.id,properties:{name:Nt.title,description:Nt.description,columnId:Nt.columnId,accessLevel:Nt.accessLevel,style:Nt.style,comments:Nt.comments,photos:Nt.photos,updatedAt:new Date().toISOString()}}})))}}async function ar(Nt){var He;ae.value=Nt,Le.value=!0;try{const Vt={visiteur:Nt.id};ee.isEntreprise?Vt.entreprise=(He=ee.user)==null?void 0:He.id:Qt.value&&(Vt.entreprise=Qt.value.id),Oe.value&&(Vt.salarie=Oe.value.id);const Bn=await Cn.get("/plans/",{params:Vt});me.value=Bn.data}catch(Vt){console.error("[MapView] Error loading client plans:",Vt),me.value=[]}finally{Le.value=!1}}async function zn(){var He;const Nt={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};ae.value=Nt,Le.value=!0;try{const Vt={visiteur_null:!0};ee.isEntreprise?Vt.entreprise=(He=ee.user)==null?void 0:He.id:Qt.value&&(Vt.entreprise=Qt.value.id),Oe.value&&(Vt.salarie=Oe.value.id);const Bn=await Cn.get("/plans/",{params:Vt});me.value=Bn.data}catch(Vt){console.error("[MapView] Error loading plans without visiteur:",Vt),me.value=[]}finally{Le.value=!1}}async function Lr(){var Nt;if(Oe.value=null,ae.value=null,me.value=[],ee.isEntreprise){ce.value=!0;try{const He=await Cn.get("/users/",{params:{role:"SALARIE",entreprise:(Nt=ee.user)==null?void 0:Nt.id}});ie.value=He.data}catch(He){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",He),ie.value=[]}finally{ce.value=!1}}Y.value=!0}const ns=kt(window.innerWidth<768);function ki(){ns.value=window.innerWidth<768}function Js(Nt){m.value&&(window.innerWidth>=768||(Nt?(m.value.dragging.disable(),m.value.touchZoom.disable(),m.value.doubleClickZoom.disable(),m.value.scrollWheelZoom.disable(),m.value.boxZoom.disable(),m.value.keyboard.disable(),m.value.tap&&m.value.tap.disable(),m.value.getContainer().style.cursor="default"):(m.value.dragging.enable(),m.value.touchZoom.enable(),m.value.doubleClickZoom.enable(),m.value.scrollWheelZoom.enable(),m.value.boxZoom.enable(),m.value.keyboard.enable(),m.value.tap&&m.value.tap.enable(),m.value.getContainer().style.cursor="")))}return(Nt,He)=>{var Vt,Bn,Vn,Ln,Pt;return Ae(),Fe(vn,null,[P("div",eV,[P("div",tV,[W.value?Xt("",!0):(Ae(),Fe("div",nV,[P("div",rV,[He[10]||(He[10]=uu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+s9+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),P("div",iV,[P("button",{onClick:He[0]||(He[0]=wt=>V.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},He[8]||(He[8]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Rr(" Créer un nouveau plan ")])),P("button",{onClick:Lr,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},He[9]||(He[9]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Rr(" Charger un plan existant ")]))])])])),jn(P("div",sV,[P("div",oV,[W.value?(Ae(),Lo(vz,{key:0,"last-save":(Vt=W.value)!=null&&Vt.date_modification?new Date(W.value.date_modification):void 0,"plan-name":(Bn=W.value)==null?void 0:Bn.nom,"plan-description":(Vn=W.value)==null?void 0:Vn.description,"save-status":R.value,onChangeMapType:ln(Q),onCreateNewPlan:He[1]||(He[1]=wt=>V.value=!0),onLoadPlan:Lr,onSavePlan:Ve,onAdjustView:at,onToggleEditMode:Js,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Xt("",!0),P("div",aV,[i.value&&W.value?(Ae(),Fe("div",{key:0,onClick:oe,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Xt("",!0),P("div",lV,[P("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),W.value?(Ae(),Fe(vn,{key:1},[ns.value?(Ae(),Lo(Fd,{key:0,to:"body"},[Kr(T4,{show:i.value,"onUpdate:show":He[2]||(He[2]=wt=>i.value=wt),"selected-tool":ln(p),"selected-shape":Ne.value,"is-drawing":ln(H),onToolSelected:ln(S),onFilterChange:cn,onDeleteShape:ot,onPropertiesUpdate:Xe,onStyleUpdate:ln(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Ae(),Lo(T4,{key:1,show:i.value,"onUpdate:show":He[3]||(He[3]=wt=>i.value=wt),"selected-tool":ln(p),"selected-shape":Ne.value,"is-drawing":ln(H),onToolSelected:ln(S),onFilterChange:cn,onDeleteShape:ot,onPropertiesUpdate:Xe,onStyleUpdate:ln(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Xt("",!0),W.value?(Ae(),Fe("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:oe},He[11]||(He[11]=[uu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Xt("",!0)])])],512),[[Wb,W.value]]),(Ae(),Lo(Fd,{to:"body"},[Kr(t$,{ref_key:"newPlanModalRef",ref:Pe,modelValue:V.value,"onUpdate:modelValue":He[4]||(He[4]=wt=>V.value=wt),onCreated:dt,onSalarieSelected:He[5]||(He[5]=wt=>Oe.value=wt),onVisiteurSelected:He[6]||(He[6]=wt=>Z.value=wt)},null,8,["modelValue"])])),(Ae(),Lo(Fd,{to:"body"},[Y.value?(Ae(),Fe("div",uV,[P("div",cV,[P("div",hV,[He[13]||(He[13]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),P("button",{onClick:He[7]||(He[7]=wt=>Y.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},He[12]||(He[12]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",fV,[ln(ee).isAdmin?(Ae(),Fe("div",dV,[Qt.value?Oe.value?ae.value?(Ae(),Fe("div",TV,[P("div",OV,[P("button",{onClick:_n,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},He[29]||(He[29]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Rr(" Retour à la liste des clients ")])),He[30]||(He[30]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",DV,jt(ln(Ds)(ae.value)),1)]),He[32]||(He[32]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",IV,[Le.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[31]||(He[31]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ae(!0),Fe(vn,{key:1},nr(me.value,wt=>(Ae(),Fe("div",{key:wt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:qt=>Se(wt.id),class:"w-full text-left"},[P("div",BV,jt(wt.nom),1),P("div",RV,jt(wt.description),1),P("div",FV," Modifié le "+jt(ln(zf)(wt.date_modification)),1)],8,NV),ln(ee).isAdmin||ln(ee).isEntreprise?(Ae(),Fe("button",{key:0,onClick:Rl(qt=>Rn(wt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,jV)):Xt("",!0)]))),128))])])):(Ae(),Fe("div",CV,[P("div",SV,[P("button",{onClick:Kt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},He[22]||(He[22]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Rr(" Retour à la liste des salaries ")])),He[23]||(He[23]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",EV,jt(ln(Ds)(Oe.value)),1)]),He[28]||(He[28]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),P("div",PV,[P("button",{onClick:zn,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},He[24]||(He[24]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),pe.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[25]||(He[25]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(),Fe(vn,{key:1},[Ue.value.length===0?(Ae(),Fe("div",kV,He[26]||(He[26]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ae(!0),Fe(vn,{key:1},nr(Ue.value,wt=>(Ae(),Fe("button",{key:wt.id,onClick:qt=>ar(wt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",AV,jt(ln(Ds)(wt)),1)]),He[27]||(He[27]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,MV))),128))],64))])])):(Ae(),Fe("div",yV,[P("div",bV,[P("button",{onClick:$t,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},He[17]||(He[17]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Rr(" Retour à la liste des entreprises ")])),He[18]||(He[18]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",_V,jt(ln(Ds)(Qt.value)),1)]),He[21]||(He[21]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),P("div",wV,[ce.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[19]||(He[19]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(!0),Fe(vn,{key:1},nr(Ze.value,wt=>(Ae(),Fe("button",{key:wt.id,onClick:qt=>gn(wt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",LV,jt(ln(Ds)(wt)),1)]),He[20]||(He[20]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,xV))),128))])])):(Ae(),Fe("div",pV,[He[16]||(He[16]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),P("div",gV,[pn.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[14]||(He[14]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(!0),Fe(vn,{key:1},nr(Sn.value,wt=>(Ae(),Fe("button",{key:wt.id,onClick:qt=>Je(wt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",vV,jt(ln(Ds)(wt)),1)]),He[15]||(He[15]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,mV))),128))])]))])):ln(ee).isSalarie?(Ae(),Fe("div",zV,[ae.value?(Ae(),Fe("div",GV,[P("div",qV,[P("button",{onClick:_n,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},He[38]||(He[38]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Rr(" Retour à la liste des clients ")])),He[39]||(He[39]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",YV,jt(ln(Ds)(ae.value)),1)]),He[41]||(He[41]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",ZV,[Le.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[40]||(He[40]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ae(!0),Fe(vn,{key:1},nr(me.value,wt=>(Ae(),Fe("div",{key:wt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:qt=>Se(wt.id),class:"w-full text-left"},[P("div",XV,jt(wt.nom),1),P("div",JV,jt(wt.description),1),P("div",QV," Modifié le "+jt(ln(zf)(wt.date_modification)),1)],8,KV),ln(ee).isAdmin||ln(ee).isEntreprise?(Ae(),Fe("button",{key:0,onClick:Rl(qt=>Rn(wt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,eH)):Xt("",!0)]))),128))])])):(Ae(),Fe("div",UV,[He[37]||(He[37]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),P("div",$V,[P("button",{onClick:zn,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},He[33]||(He[33]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),pe.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[34]||(He[34]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(),Fe(vn,{key:1},[Ue.value.length===0?(Ae(),Fe("div",VV,He[35]||(He[35]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ae(!0),Fe(vn,{key:1},nr(Ue.value,wt=>(Ae(),Fe("button",{key:wt.id,onClick:qt=>ar(wt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",WV,jt(ln(Ds)(wt)),1)]),He[36]||(He[36]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,HV))),128))],64))])]))])):ln(ee).isEntreprise?(Ae(),Fe("div",tH,[Oe.value?ae.value?(Ae(),Fe("div",dH,[P("div",pH,[P("button",{onClick:_n,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},He[52]||(He[52]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Rr(" Retour à la liste des visiteurs ")])),He[53]||(He[53]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",gH,jt(ln(Ds)(ae.value)),1)]),He[55]||(He[55]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",mH,[Le.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[54]||(He[54]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ae(!0),Fe(vn,{key:1},nr(me.value,wt=>(Ae(),Fe("div",{key:wt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:qt=>Se(wt.id),class:"w-full text-left"},[P("div",yH,jt(wt.nom),1),P("div",bH,jt(wt.description),1),P("div",_H," Modifié le "+jt(ln(zf)(wt.date_modification)),1)],8,vH),ln(ee).isAdmin||ln(ee).isEntreprise?(Ae(),Fe("button",{key:0,onClick:Rl(qt=>Rn(wt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,wH)):Xt("",!0)]))),128))])])):(Ae(),Fe("div",oH,[P("div",aH,[P("button",{onClick:Kt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},He[45]||(He[45]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Rr(" Retour à la liste des salariés ")])),He[46]||(He[46]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",lH,jt(ln(Ds)(Oe.value)),1)]),He[51]||(He[51]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),P("div",uH,[P("button",{onClick:zn,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},He[47]||(He[47]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),pe.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[48]||(He[48]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(),Fe(vn,{key:1},[Ue.value.length===0?(Ae(),Fe("div",cH,He[49]||(He[49]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),P("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ae(!0),Fe(vn,{key:1},nr(Ue.value,wt=>(Ae(),Fe("button",{key:wt.id,onClick:qt=>ar(wt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",fH,jt(ln(Ds)(wt)),1)]),He[50]||(He[50]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,hH))),128))],64))])])):(Ae(),Fe("div",nH,[He[44]||(He[44]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),P("div",rH,[ce.value?(Ae(),Fe(vn,{key:0},nr(3,wt=>P("div",{key:wt,class:"animate-pulse"},He[42]||(He[42]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ae(!0),Fe(vn,{key:1},nr(ie.value,wt=>(Ae(),Fe("button",{key:wt.id,onClick:qt=>gn(wt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",sH,jt(ln(Ds)(wt)),1)]),He[43]||(He[43]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,iH))),128))])]))])):(Ae(),Fe("div",xH,[ln(s).plans.length===0?(Ae(),Fe("div",LH,He[56]||(He[56]=[P("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ae(),Fe("div",CH,[(Ae(!0),Fe(vn,null,nr(ln(s).plans,wt=>(Ae(),Fe("div",{key:wt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:qt=>Se(wt.id),class:"w-full text-left"},[P("div",EH,jt(wt.nom),1),P("div",PH,jt(wt.description),1),P("div",kH," Modifié le "+jt(ln(zf)(wt.date_modification)),1)],8,SH),ln(ee).isAdmin||ln(ee).isEntreprise?(Ae(),Fe("button",{key:0,onClick:Rl(qt=>Rn(wt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,MH)):Xt("",!0)]))),128))]))]))])])])):Xt("",!0)])),(Ae(),Lo(Fd,{to:"body"},[$.value?(Ae(),Fe("div",AH,[P("div",TH,[P("div",OH,[He[57]||(He[57]=P("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),He[58]||(He[58]=P("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),P("p",DH,' Êtes-vous sûr de vouloir supprimer le plan "'+jt(X.value?X.value.nom:"")+'" ? Cette action est irréversible. ',1)]),P("div",{class:"flex justify-center space-x-4"},[P("button",{onClick:nn,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),P("button",{onClick:mn,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Xt("",!0)]))])]),(Ae(),Lo(Fd,{to:"body"},[ge.value?(Ae(),Lo(WS,{key:0,note:se.value,"is-new-note":!((Ln=se.value)!=null&&Ln.id),location:(Pt=se.value)==null?void 0:Pt.location,onClose:bn,onSave:er},null,8,["note","is-new-note","location"])):Xt("",!0)]))],64)}}}),IH={class:"fixed inset-0 z-[3001] overflow-y-auto"},NH={class:"flex items-center justify-center min-h-screen w-full p-0"},BH={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},RH={class:"p-4 md:p-6"},FH={class:"flex justify-between items-center mb-4 border-b pb-4"},jH={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},zH={class:"mt-4"},UH={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},$H={class:"flex"},VH={class:"ml-3"},HH={class:"text-sm font-medium text-red-800"},WH={key:0},GH={key:1},qH=["value"],YH={key:2},ZH={key:3},KH=["value"],XH={key:4,class:"bg-blue-50 p-3 rounded-md mb-4"},JH={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},QH={key:0,class:"mt-2 text-sm text-red-600"},eW={key:0,class:"mt-2 text-sm text-red-600"},tW={key:5},nW={class:"flex items-center"},rW={key:6,class:"border-t pt-4 mt-4"},iW={class:"mb-4"},sW={class:"mb-4"},oW={key:7},aW={key:8},lW={key:0,class:"mt-2 text-sm text-red-600"},uW={class:"flex justify-end space-x-3"},cW=["disabled"],hW={key:0,class:"mr-2"},fW=_s({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=kt(!1),s=kt(""),o=kt(""),a=kt(""),l=kt(""),c=kt(""),f=hu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Zs(()=>{var y;(y=n.user)!=null&&y.id?(f.id=n.user.id,f.first_name=n.user.first_name||"",f.last_name=n.user.last_name||"",f.username=n.user.username||"",f.email=n.user.email||"",f.company_name=n.user.company_name||"",f.role=n.user.role||"VISITEUR",f.is_active=n.user.is_active??!0,f.ecowitt_api_key=n.user.ecowitt_api_key||"",f.ecowitt_application_key=n.user.ecowitt_application_key||"",f.storage_quota=n.user.storage_quota||50,f.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?f.salarie=n.user.salarie.id:f.salarie=n.user.salarie:n.user.salarie_id?f.salarie=n.user.salarie_id:n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?f.entreprise=n.user.entreprise.id:f.entreprise=n.user.entreprise:n.user.entreprise_id?f.entreprise=n.user.entreprise_id:n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?f.role="SALARIE":n.isAdmin||(f.role="VISITEUR"))}),jg(()=>{f.role==="ADMIN"||f.role==="ENTREPRISE"?(f.salarie=null,f.entreprise=null):f.role==="SALARIE"&&(f.salarie=null,n.isEntreprise&&n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)))}),jg(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(y=>{switch(y.field){case"email":s.value=y.message;break;case"username":o.value=y.message;break;case"password":a.value=y.message;break;case"non_field_error":default:l.value=y.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let y=!0;if(f.id||(f.password!==c.value?(a.value="Les mots de passe ne correspondent pas",y=!1):f.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",y=!1)),!!y){i.value=!0;try{const m={...f};f.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(f.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&f.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(y,m)=>(Ae(),Fe("div",IH,[P("div",NH,[m[43]||(m[43]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",BH,[P("div",null,[P("div",RH,[P("div",FH,[P("h3",jH,jt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),P("button",{type:"button",onClick:m[0]||(m[0]=C=>y.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",zH,[l.value?(Ae(),Fe("div",UH,[P("div",$H,[m[17]||(m[17]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",VH,[P("h3",HH,jt(l.value),1)])])])):Xt("",!0),P("form",{onSubmit:Rl(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ae(),Fe("div",WH,[m[19]||(m[19]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),jn(P("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[P("option",{value:"ADMIN"},"Administrateur",-1),P("option",{value:"ENTREPRISE"},"Entreprise",-1),P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[os,f.role]])])):Xt("",!0),t.isAdmin&&f.role==="SALARIE"?(Ae(),Fe("div",GH,[m[21]||(m[21]=P("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),jn(P("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=C=>f.entreprise=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=P("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ae(!0),Fe(vn,null,nr(t.entreprises,C=>(Ae(),Fe("option",{key:C.id,value:C.id},jt(C.first_name)+" "+jt(C.last_name)+" ("+jt(C.company_name||"Entreprise")+") ",9,qH))),128))],512),[[os,f.entreprise]])])):Xt("",!0),t.isEntreprise&&!f.id?(Ae(),Fe("div",YH,[m[23]||(m[23]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),jn(P("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[os,f.role]])])):Xt("",!0),(t.isAdmin||t.isEntreprise)&&f.role==="VISITEUR"&&!t.currentSalarie?(Ae(),Fe("div",ZH,[m[25]||(m[25]=P("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),jn(P("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=C=>f.salarie=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=P("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ae(!0),Fe(vn,null,nr(t.salaries,C=>(Ae(),Fe("option",{key:C.id,value:C.id},jt(C.first_name)+" "+jt(C.last_name)+" ("+jt(C.company_name||"Salarie")+") ",9,KH))),128))],512),[[os,f.salarie]])])):Xt("",!0),t.currentSalarie&&!t.isAdmin&&!t.isEntreprise?(Ae(),Fe("div",XH,m[26]||(m[26]=[uu('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-blue-700"> Vous êtes en train de créer un visiteur qui sera automatiquement associé à votre compte. </p></div></div>',1)]))):Xt("",!0),P("div",JH,[P("div",null,[m[27]||(m[27]=P("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),jn(P("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=C=>f.first_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.first_name]])]),P("div",null,[m[28]||(m[28]=P("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),jn(P("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=C=>f.last_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.last_name]])])]),P("div",null,[m[29]||(m[29]=P("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),jn(P("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=C=>f.email=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.email]]),s.value?(Ae(),Fe("div",QH,jt(s.value),1)):Xt("",!0)]),P("div",null,[m[30]||(m[30]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),jn(P("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=C=>f.username=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.username]]),o.value?(Ae(),Fe("div",eW,jt(o.value),1)):Xt("",!0)]),P("div",null,[m[31]||(m[31]=P("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),jn(P("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=C=>f.company_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.company_name]])]),f.role==="ENTREPRISE"||f.role==="SALARIE"?(Ae(),Fe("div",tW,[m[33]||(m[33]=P("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),P("div",nW,[jn(P("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=C=>f.storage_quota=C),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.storage_quota]]),m[32]||(m[32]=P("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[34]||(m[34]=P("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Xt("",!0),f.role==="ENTREPRISE"?(Ae(),Fe("div",rW,[m[39]||(m[39]=P("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),P("div",iW,[m[35]||(m[35]=P("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),jn(P("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=C=>f.ecowitt_api_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[fi,f.ecowitt_api_key]]),m[36]||(m[36]=P("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),P("div",sW,[m[37]||(m[37]=P("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),jn(P("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=C=>f.ecowitt_application_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[fi,f.ecowitt_application_key]]),m[38]||(m[38]=P("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Xt("",!0),f.id?Xt("",!0):(Ae(),Fe("div",oW,[m[40]||(m[40]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),jn(P("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=C=>f.password=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.password]])])),f.id?Xt("",!0):(Ae(),Fe("div",aW,[m[41]||(m[41]=P("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),jn(P("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=C=>c.value=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,c.value]]),a.value?(Ae(),Fe("div",lW,jt(a.value),1)):Xt("",!0)])),P("div",uW,[P("button",{type:"button",onClick:m[15]||(m[15]=C=>y.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),P("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ae(),Fe("span",hW,m[42]||(m[42]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Xt("",!0),Rr(" "+jt(f.id?"Enregistrer":"Créer"),1)],8,cW)])],32)])])])])])]))}}),dW={class:"fixed inset-0 z-[3001] overflow-y-auto"},pW={class:"flex items-center justify-center min-h-screen w-full"},gW={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},mW={class:"p-4 md:p-6"},vW={class:"flex items-start"},yW={class:"ml-4 flex-1"},bW={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},_W={class:"mt-2"},wW={class:"text-sm text-gray-500"},xW={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},LW=_s({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ae(),Fe("div",dW,[P("div",pW,[n[3]||(n[3]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",gW,[P("div",mW,[P("div",vW,[n[2]||(n[2]=P("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[P("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),P("div",yW,[P("h3",bW,jt(t.title),1),P("div",_W,[P("p",wW,jt(t.message),1)])])]),P("div",xW,[P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),CW={class:"min-h-full bg-gray-50"},SW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},EW={class:"flex justify-between items-center mb-8"},PW={class:"text-3xl font-extrabold text-gray-900"},kW={key:0},MW={key:1},AW={key:2},TW={key:0},OW={key:1},DW={key:2},IW={class:"bg-white shadow rounded-lg mb-6 p-4"},NW={class:"space-y-4"},BW={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},RW={key:0},FW={key:0,value:"ADMIN"},jW={key:1,value:"ENTREPRISE"},zW={key:1},UW=["value"],$W={key:2},VW=["value"],HW={class:"w-full"},WW={class:"bg-white shadow rounded-lg"},GW={class:"overflow-x-auto"},qW={class:"min-w-full divide-y divide-gray-200"},YW={class:"bg-gray-50"},ZW={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},KW={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},XW={class:"bg-white divide-y divide-gray-200"},JW={key:0,class:"animate-pulse"},QW={key:1},eG={class:"px-6 py-4 whitespace-nowrap"},tG={class:"flex items-center"},nG={class:"flex-shrink-0 h-10 w-10"},rG={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},iG={class:"text-primary-600 font-medium"},sG={class:"ml-4"},oG={class:"text-sm font-medium text-gray-900"},aG={class:"text-sm text-gray-500"},lG={class:"px-6 py-4 whitespace-nowrap"},uG={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},cG={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},hG={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fG={class:"px-6 py-4 whitespace-nowrap"},dG={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},pG=["onClick"],gG=["onClick"],mG={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},vG=_s({__name:"UserListView",setup(t){const e=po(),n=ul(),r=kt([]),i=kt([]),s=kt([]),o=kt(!1),a=kt(!1),l=kt(null),c=kt(null),f=kt(!0),p=kt([]),y=hu({role:"",search:"",salarie:"",entreprise:""}),m=rr(()=>e.isAdmin),C=rr(()=>e.isEntreprise),S=rr(()=>e.isSalarie),T=rr(()=>m.value?r.value.filter($=>$.role==="SALARIE"):C.value?r.value.filter($=>{var W,se;return $.role==="SALARIE"&&((W=$.entreprise)==null?void 0:W.id)===((se=e.user)==null?void 0:se.id)}):[]),O=rr(()=>{let $=r.value;if(C.value&&($=$.filter(W=>{var se,X,U,R,ee;return W.role==="SALARIE"?((se=W.entreprise)==null?void 0:se.id)===((X=e.user)==null?void 0:X.id):W.role==="VISITEUR"?((R=(U=W.salarie)==null?void 0:U.entreprise)==null?void 0:R.id)===((ee=e.user)==null?void 0:ee.id):!1})),S.value&&($=$.filter(W=>{var se,X;return W.role==="VISITEUR"&&(W.salarie_id===((se=e.user)==null?void 0:se.id)||W.salarie&&W.salarie.id===((X=e.user)==null?void 0:X.id))})),(m.value||C.value)&&(y.role&&($=$.filter(W=>W.role===y.role)),y.salarie&&($=$.filter(W=>{var X;const se=((X=W.salarie)==null?void 0:X.id)||W.salarie_id;return(se==null?void 0:se.toString())===y.salarie.toString()})),y.entreprise&&m.value&&($=$.filter(W=>{var se,X,U,R,ee;return W.role==="SALARIE"?((X=(se=W.entreprise)==null?void 0:se.id)==null?void 0:X.toString())===y.entreprise.toString():W.role==="VISITEUR"?((ee=(R=(U=W.salarie)==null?void 0:U.entreprise)==null?void 0:R.id)==null?void 0:ee.toString())===y.entreprise.toString():!1}))),y.search){const W=y.search.toLowerCase();$=$.filter(se=>{var X,U,R,ee;return((X=se.username)==null?void 0:X.toLowerCase().includes(W))||((U=se.email)==null?void 0:U.toLowerCase().includes(W))||((R=se.first_name)==null?void 0:R.toLowerCase().includes(W))||((ee=se.last_name)==null?void 0:ee.toLowerCase().includes(W))||se.company_name&&se.company_name.toLowerCase().includes(W)})}return $});Zs(async()=>{await D(),await B()});async function D(){var $,W,se;f.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(C.value){const[X,U]=await Promise.all([f1({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),f1({role:"VISITEUR",entrepriseId:(W=e.user)==null?void 0:W.id})]);r.value=[...X,...U]}else S.value&&(r.value=await f1({role:"VISITEUR",salarieId:(se=e.user)==null?void 0:se.id,includeDetails:!0}))}catch(X){console.error("Error fetching users:",X),n.error("Erreur lors du chargement des utilisateurs")}finally{f.value=!1}}async function B(){var $,W;m.value?(s.value=await e.fetchEnterprises(),i.value=await e.fetchEntrepriseSalaries((($=e.user)==null?void 0:$.id)||0)):C.value&&(i.value=await e.fetchEntrepriseSalaries(((W=e.user)==null?void 0:W.id)||0))}function z(){l.value=null,p.value=[],o.value=!0}function H(){o.value=!1,l.value=null,p.value=[]}function J($){l.value=$,p.value=[],o.value=!0}function Q($){c.value=$,a.value=!0}function V($){return!!(m.value||C.value&&($.role==="SALARIE"||$.role==="VISITEUR")||S.value&&$.role==="VISITEUR")}async function Y($){var W;try{p.value=[],l.value?(await e.updateUser(l.value.id,$),n.success("Utilisateur mis à jour avec succès")):(await e.createUser($),n.success("Utilisateur créé avec succès")),o.value=!1,await D()}catch(se){(W=se.response)!=null&&W.data?p.value=Y7(se.response.data):n.error("Une erreur est survenue")}}async function ge(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),a.value=!1,await D()}catch{n.error("Erreur lors de la suppression de l'utilisateur")}}return($,W)=>{var se,X,U,R;return Ae(),Fe("div",CW,[P("div",SW,[P("div",EW,[P("h1",PW,[m.value?(Ae(),Fe("span",kW,"Gestion des utilisateurs")):C.value?(Ae(),Fe("span",MW,"Gestion des salaries et visiteurs")):S.value?(Ae(),Fe("span",AW,"Gestion des visiteurs")):Xt("",!0)]),P("button",{onClick:z,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[5]||(W[5]=P("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Ae(),Fe("span",TW,"Nouvel utilisateur")):C.value?(Ae(),Fe("span",OW,"Nouveau salarie/visiteur")):S.value?(Ae(),Fe("span",DW,"Nouvel visiteur")):Xt("",!0)])]),P("div",IW,[P("div",NW,[P("div",BW,[m.value||C.value?(Ae(),Fe("div",RW,[W[9]||(W[9]=P("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),jn(P("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=ee=>y.role=ee),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[6]||(W[6]=P("option",{value:""},"Tous les rôles",-1)),m.value?(Ae(),Fe("option",FW,"Administrateur")):Xt("",!0),m.value?(Ae(),Fe("option",jW,"Entreprise")):Xt("",!0),W[7]||(W[7]=P("option",{value:"SALARIE"},"Salarie",-1)),W[8]||(W[8]=P("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[os,y.role]])])):Xt("",!0),m.value?(Ae(),Fe("div",zW,[W[11]||(W[11]=P("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),jn(P("select",{id:"entreprise-filter","onUpdate:modelValue":W[1]||(W[1]=ee=>y.entreprise=ee),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[10]||(W[10]=P("option",{value:""},"Toutes les entreprises",-1)),(Ae(!0),Fe(vn,null,nr(s.value,ee=>(Ae(),Fe("option",{key:ee.id,value:ee.id},jt(ln(Ds)(ee)),9,UW))),128))],512),[[os,y.entreprise]])])):Xt("",!0),m.value||C.value?(Ae(),Fe("div",$W,[W[13]||(W[13]=P("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),jn(P("select",{id:"salarie-filter","onUpdate:modelValue":W[2]||(W[2]=ee=>y.salarie=ee),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[12]||(W[12]=P("option",{value:""},"Tous les salaries",-1)),(Ae(!0),Fe(vn,null,nr(T.value,ee=>(Ae(),Fe("option",{key:ee.id,value:ee.id},jt(ln(Ds)(ee)),9,VW))),128))],512),[[os,y.salarie]])])):Xt("",!0)]),P("div",HW,[W[14]||(W[14]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),jn(P("input",{type:"text",id:"search","onUpdate:modelValue":W[3]||(W[3]=ee=>y.search=ee),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fi,y.search]])])])]),P("div",WW,[P("div",GW,[P("table",qW,[P("thead",YW,[P("tr",null,[W[15]||(W[15]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),W[16]||(W[16]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),W[17]||(W[17]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||C.value?(Ae(),Fe("th",ZW," Entreprise ")):Xt("",!0),m.value||C.value?(Ae(),Fe("th",KW," Salarie ")):Xt("",!0),W[18]||(W[18]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[19]||(W[19]=P("th",{scope:"col",class:"relative px-6 py-3"},[P("span",{class:"sr-only"},"Actions")],-1))])]),P("tbody",XW,[f.value?(Ae(),Fe("tr",JW,W[20]||(W[20]=[P("td",{colspan:"7",class:"py-4 px-6"},[P("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):O.value.length===0?(Ae(),Fe("tr",QW,W[21]||(W[21]=[P("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Xt("",!0),(Ae(!0),Fe(vn,null,nr(O.value,ee=>{var ie;return Ae(),Fe("tr",{key:ee.id},[P("td",eG,[P("div",tG,[P("div",nG,[P("div",rG,[P("span",iG,jt(ln(K7)(ee.first_name,ee.last_name)),1)])]),P("div",sG,[P("div",oG,jt(ln(Ds)(ee)),1),P("div",aG,jt(ee.username),1)])])]),P("td",lG,[P("span",{class:yi(ln(Q7)())},jt(ln(J7)(ee.role)),3)]),P("td",uG,jt(ee.email),1),m.value||C.value?(Ae(),Fe("td",cG,[ee.role==="ENTREPRISE"?(Ae(),Fe(vn,{key:0},[Rr(" - ")],64)):ee.role==="SALARIE"?(Ae(),Fe(vn,{key:1},[Rr(jt(ee.entreprise?ln(Ds)(ee.entreprise):"Non assigné"),1)],64)):ee.role==="VISITEUR"?(Ae(),Fe(vn,{key:2},[Rr(jt((ie=ee.salarie)!=null&&ie.entreprise?ln(Ds)(ee.salarie.entreprise):"Non assigné"),1)],64)):(Ae(),Fe(vn,{key:3},[Rr(" - ")],64))])):Xt("",!0),m.value||C.value?(Ae(),Fe("td",hG,[ee.role==="ENTREPRISE"||ee.role==="ADMIN"?(Ae(),Fe(vn,{key:0},[Rr(" - ")],64)):ee.role==="SALARIE"?(Ae(),Fe(vn,{key:1},[Rr(" - ")],64)):(Ae(),Fe(vn,{key:2},[Rr(jt(ee.salarie?ln(Ds)(ee.salarie):"Non assigné"),1)],64))])):Xt("",!0),P("td",fG,[P("span",{class:yi(ln(eN)(ee.is_active))},jt(ee.is_active?"Actif":"Inactif"),3)]),P("td",dG,[P("button",{onClick:fe=>J(ee),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,pG),V(ee)?(Ae(),Fe("button",{key:0,onClick:fe=>Q(ee),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,gG)):Xt("",!0)])])}),128))])])])])]),o.value?(Ae(),Fe("div",mG,[Kr(fW,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":C.value,"current-salarie":S.value?(X=(se=ln(e).user)==null?void 0:se.id)==null?void 0:X.toString():void 0,"current-entreprise":C.value?(R=(U=ln(e).user)==null?void 0:U.id)==null?void 0:R.toString():void 0,"api-errors":p.value,onClose:H,onSave:Y},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Xt("",!0),a.value?(Ae(),Lo(LW,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:ge,onCancel:W[4]||(W[4]=ee=>a.value=!1)})):Xt("",!0)])}}});var vE={exports:{}};const yG=ES(fI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function e5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(n),!0).forEach(function(r){bG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B0=function(e){return typeof e}:B0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function bG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Du(){return Du=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}function _G(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wG(t,e){if(t==null)return{};var n=_G(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xG(t){return LG(t)||CG(t)||SG(t)||EG()}function LG(t){if(Array.isArray(t))return q2(t)}function CG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SG(t,e){if(t){if(typeof t=="string")return q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q2(t,e)}}function q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function EG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var PG="1.14.0";function bh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Lh=bh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),cm=bh(/Edge/i),t5=bh(/firefox/i),_g=bh(/safari/i)&&!bh(/chrome/i)&&!bh(/android/i),yE=bh(/iP(ad|od|hone)/i),kG=bh(/chrome/i)&&bh(/android/i),bE={capture:!1,passive:!1};function oi(t,e,n){t.addEventListener(e,n,!Lh&&bE)}function Qr(t,e,n){t.removeEventListener(e,n,!Lh&&bE)}function bv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function MG(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function tc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&bv(t,e):bv(t,e))||r&&t===n)return t;if(t===n)break}while(t=MG(t))}return null}var n5=/\s+/g;function Is(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(n5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(n5," ")}}function Kn(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Yf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Kn(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function _E(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Fc(){var t=document.scrollingElement;return t||document.documentElement}function ys(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,f,p;if(t!==window&&t.parentNode&&t!==Fc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,f=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Lh))do if(i&&i.getBoundingClientRect&&(Kn(i,"transform")!=="none"||n&&Kn(i,"position")!=="static")){var y=i.getBoundingClientRect();o-=y.top+parseInt(Kn(i,"border-top-width")),a-=y.left+parseInt(Kn(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=Yf(i||t),C=m&&m.a,S=m&&m.d;m&&(o/=S,a/=C,p/=C,f/=S,l=o+f,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:f}}}function r5(t,e,n){for(var r=Yh(t,!0),i=ys(t)[e];r;){var s=ys(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Fc())break;r=Yh(r,!1)}return!1}function up(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==_r.ghost&&(r||o[s]!==_r.dragged)&&tc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function h_(t,e){for(var n=t.lastElementChild;n&&(n===_r.ghost||Kn(n,"display")==="none"||e&&!bv(n,e));)n=n.previousElementSibling;return n||null}function Gs(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_r.clone&&(!e||bv(t,e))&&n++;return n}function i5(t){var e=0,n=0,r=Fc();if(t)do{var i=Yf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function AG(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Yh(t,e){if(!t||!t.getBoundingClientRect)return Fc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Kn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Fc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Fc()}function TG(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function A1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var wg;function wE(t,e){return function(){if(!wg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),wg=setTimeout(function(){wg=void 0},e)}}}function OG(){clearTimeout(wg),wg=void 0}function xE(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function f_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function s5(t,e){Kn(t,"position","absolute"),Kn(t,"top",e.top),Kn(t,"left",e.left),Kn(t,"width",e.width),Kn(t,"height",e.height)}function T1(t){Kn(t,"position",""),Kn(t,"top",""),Kn(t,"left",""),Kn(t,"width",""),Kn(t,"height","")}var Fa="Sortable"+new Date().getTime();function DG(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Kn(i,"display")==="none"||i===_r.ghost)){t.push({target:i,rect:ys(i)});var s=Uc({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=Yf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(AG(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,f=c.fromRect,p=ys(c),y=c.prevFromRect,m=c.prevToRect,C=a.rect,S=Yf(c,!0);S&&(p.top-=S.f,p.left-=S.e),c.toRect=p,c.thisAnimationDuration&&A1(y,p)&&!A1(f,p)&&(C.top-p.top)/(C.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(l=NG(C,y,m,i.options)),A1(p,f)||(c.prevFromRect=f,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,C,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Kn(r,"transition",""),Kn(r,"transform","");var a=Yf(this.el),l=a&&a.a,c=a&&a.d,f=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!f,r.animatingY=!!p,Kn(r,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=IG(r),Kn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Kn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Kn(r,"transition",""),Kn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function IG(t){return t.offsetWidth}function NG(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Ad=[],O1={initializeByDefault:!0},hm={mount:function(e){for(var n in O1)O1.hasOwnProperty(n)&&!(n in e)&&(e[n]=O1[n]);Ad.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ad.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Ad.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Uc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Uc({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Ad.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Du(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Ad.forEach(function(i){typeof i.eventProperties=="function"&&Du(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Ad.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Xp(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,f=t.oldDraggableIndex,p=t.newDraggableIndex,y=t.originalEvent,m=t.putSortable,C=t.extraEventProperties;if(e=e||n&&n[Fa],!!e){var S,T=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Lh&&!cm?S=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(r,!0,!0)),S.to=o||n,S.from=a||n,S.item=i||n,S.clone=s,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=f,S.newDraggableIndex=p,S.originalEvent=y,S.pullMode=m?m.lastPutMode:void 0;var D=Uc(Uc({},C),hm.getEventProperties(r,e));for(var B in D)S[B]=D[B];n&&n.dispatchEvent(S),T[O]&&T[O].call(e,S)}}var BG=["evt"],Pl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=wG(r,BG);hm.pluginEvent.bind(_r)(e,n,Uc({dragEl:An,parentEl:Vs,ghostEl:Fr,rootEl:ms,nextEl:If,lastDownEl:R0,cloneEl:Hs,cloneHidden:Gh,dragStarted:Jp,putSortable:ca,activeSortable:_r.active,originalEvent:i,oldIndex:Wd,oldDraggableIndex:xg,newIndex:nu,newDraggableIndex:Wh,hideGhostForTarget:EE,unhideGhostForTarget:PE,cloneNowHidden:function(){Gh=!0},cloneNowShown:function(){Gh=!1},dispatchSortableEvent:function(a){nl({sortable:n,name:a,originalEvent:i})}},s))};function nl(t){Xp(Uc({putSortable:ca,cloneEl:Hs,targetEl:An,rootEl:ms,oldIndex:Wd,oldDraggableIndex:xg,newIndex:nu,newDraggableIndex:Wh},t))}var An,Vs,Fr,ms,If,R0,Hs,Gh,Wd,nu,xg,Wh,t0,ca,$d=!1,_v=!1,wv=[],Pf,Ju,D1,I1,o5,a5,Jp,Td,Lg,Cg=!1,n0=!1,F0,Oa,N1=[],Y2=!1,xv=[],py=typeof document<"u",r0=yE,l5=cm||Lh?"cssFloat":"float",RG=py&&!kG&&!yE&&"draggable"in document.createElement("div"),LE=function(){if(py){if(Lh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),CE=function(e,n){var r=Kn(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=up(e,0,n),o=up(e,1,n),a=s&&Kn(s),l=o&&Kn(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ys(s).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ys(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[l5]==="none"||o&&r[l5]==="none"&&c+f>i)?"vertical":"horizontal"},FG=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},jG=function(e,n){var r;return wv.some(function(i){var s=i[Fa].options.emptyInsertThreshold;if(!(!s||h_(i))){var o=ys(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},SE=function(e){function n(s,o){return function(a,l,c,f){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,f),o)(a,l,c,f);var y=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var r={},i=e.group;(!i||B0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},EE=function(){!LE&&Fr&&Kn(Fr,"display","none")},PE=function(){!LE&&Fr&&Kn(Fr,"display","")};py&&document.addEventListener("click",function(t){if(_v)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),_v=!1,!1},!0);var kf=function(e){if(An){e=e.touches?e.touches[0]:e;var n=jG(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Fa]._onDragOver(r)}}},zG=function(e){An&&An.parentNode[Fa]._isOutsideThisEl(e.target)};function _r(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Du({},e),t[Fa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return CE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_r.supportPointer!==!1&&"PointerEvent"in window&&!_g,emptyInsertThreshold:5};hm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);SE(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:RG,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?oi(t,"pointerdown",this._onTapStart):(oi(t,"mousedown",this._onTapStart),oi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(oi(t,"dragover",this),oi(t,"dragenter",this)),wv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Du(this,DG())}_r.prototype={constructor:_r,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Td=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,An):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=i.filter;if(YG(r),!An&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&_g&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=tc(l,i.draggable,r,!1),!(l&&l.animated)&&R0!==l)){if(Wd=Gs(l),xg=Gs(l,i.draggable),typeof f=="function"){if(f.call(this,e,l,this)){nl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Pl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=tc(c,p.trim(),r,!1),p)return nl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Pl("filter",n,{evt:e}),!0}),f)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!tc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!An&&r.parentNode===s){var c=ys(r);if(ms=s,An=r,Vs=An.parentNode,If=An.nextSibling,R0=r,t0=o.group,_r.dragged=An,Pf={target:An,clientX:(n||e).clientX,clientY:(n||e).clientY},o5=Pf.clientX-c.left,a5=Pf.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,An.style["will-change"]="all",l=function(){if(Pl("delayEnded",i,{evt:e}),_r.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!t5&&i.nativeDraggable&&(An.draggable=!0),i._triggerDragStart(e,n),nl({sortable:i,name:"choose",originalEvent:e}),Is(An,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){_E(An,f.trim(),B1)}),oi(a,"dragover",kf),oi(a,"mousemove",kf),oi(a,"touchmove",kf),oi(a,"mouseup",i._onDrop),oi(a,"touchend",i._onDrop),oi(a,"touchcancel",i._onDrop),t5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,An.draggable=!0),Pl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(cm||Lh))){if(_r.eventCanceled){this._onDrop();return}oi(a,"mouseup",i._disableDelayedDrag),oi(a,"touchend",i._disableDelayedDrag),oi(a,"touchcancel",i._disableDelayedDrag),oi(a,"mousemove",i._delayedDragTouchMoveHandler),oi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&oi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){An&&B1(An),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._disableDelayedDrag),Qr(e,"touchend",this._disableDelayedDrag),Qr(e,"touchcancel",this._disableDelayedDrag),Qr(e,"mousemove",this._delayedDragTouchMoveHandler),Qr(e,"touchmove",this._delayedDragTouchMoveHandler),Qr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?oi(document,"pointermove",this._onTouchMove):n?oi(document,"touchmove",this._onTouchMove):oi(document,"mousemove",this._onTouchMove):(oi(An,"dragend",this),oi(ms,"dragstart",this._onDragStart));try{document.selection?j0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if($d=!1,ms&&An){Pl("dragStarted",this,{evt:n}),this.nativeDraggable&&oi(document,"dragover",zG);var r=this.options;!e&&Is(An,r.dragClass,!1),Is(An,r.ghostClass,!0),_r.active=this,e&&this._appendGhost(),nl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ju){this._lastX=Ju.clientX,this._lastY=Ju.clientY,EE();for(var e=document.elementFromPoint(Ju.clientX,Ju.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ju.clientX,Ju.clientY),e!==n);)n=e;if(An.parentNode[Fa]._isOutsideThisEl(e),n)do{if(n[Fa]){var r=void 0;if(r=n[Fa]._onDragOver({clientX:Ju.clientX,clientY:Ju.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);PE()}},_onTouchMove:function(e){if(Pf){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Fr&&Yf(Fr,!0),a=Fr&&o&&o.a,l=Fr&&o&&o.d,c=r0&&Oa&&i5(Oa),f=(s.clientX-Pf.clientX+i.x)/(a||1)+(c?c[0]-N1[0]:0)/(a||1),p=(s.clientY-Pf.clientY+i.y)/(l||1)+(c?c[1]-N1[1]:0)/(l||1);if(!_r.active&&!$d){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Fr){o?(o.e+=f-(D1||0),o.f+=p-(I1||0)):o={a:1,b:0,c:0,d:1,e:f,f:p};var y="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Kn(Fr,"webkitTransform",y),Kn(Fr,"mozTransform",y),Kn(Fr,"msTransform",y),Kn(Fr,"transform",y),D1=f,I1=p,Ju=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Fr){var e=this.options.fallbackOnBody?document.body:ms,n=ys(An,!0,r0,!0,e),r=this.options;if(r0){for(Oa=e;Kn(Oa,"position")==="static"&&Kn(Oa,"transform")==="none"&&Oa!==document;)Oa=Oa.parentNode;Oa!==document.body&&Oa!==document.documentElement?(Oa===document&&(Oa=Fc()),n.top+=Oa.scrollTop,n.left+=Oa.scrollLeft):Oa=Fc(),N1=i5(Oa)}Fr=An.cloneNode(!0),Is(Fr,r.ghostClass,!1),Is(Fr,r.fallbackClass,!0),Is(Fr,r.dragClass,!0),Kn(Fr,"transition",""),Kn(Fr,"transform",""),Kn(Fr,"box-sizing","border-box"),Kn(Fr,"margin",0),Kn(Fr,"top",n.top),Kn(Fr,"left",n.left),Kn(Fr,"width",n.width),Kn(Fr,"height",n.height),Kn(Fr,"opacity","0.8"),Kn(Fr,"position",r0?"absolute":"fixed"),Kn(Fr,"zIndex","100000"),Kn(Fr,"pointerEvents","none"),_r.ghost=Fr,e.appendChild(Fr),Kn(Fr,"transform-origin",o5/parseInt(Fr.style.width)*100+"% "+a5/parseInt(Fr.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Pl("dragStart",this,{evt:e}),_r.eventCanceled){this._onDrop();return}Pl("setupClone",this),_r.eventCanceled||(Hs=f_(An),Hs.draggable=!1,Hs.style["will-change"]="",this._hideClone(),Is(Hs,this.options.chosenClass,!1),_r.clone=Hs),r.cloneId=j0(function(){Pl("clone",r),!_r.eventCanceled&&(r.options.removeCloneOnHide||ms.insertBefore(Hs,An),r._hideClone(),nl({sortable:r,name:"clone"}))}),!n&&Is(An,s.dragClass,!0),n?(_v=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Qr(document,"mouseup",r._onDrop),Qr(document,"touchend",r._onDrop),Qr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,An)),oi(document,"drop",r),Kn(An,"transform","translateZ(0)")),$d=!0,r._dragStartId=j0(r._dragStarted.bind(r,n,e)),oi(document,"selectstart",r),Jp=!0,_g&&Kn(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=_r.active,f=t0===l,p=a.sort,y=ca||c,m,C=this,S=!1;if(Y2)return;function T(ie,fe){Pl(ie,C,Uc({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:y,target:r,completed:D,onMove:function(Oe,Z){return i0(ms,n,An,i,Oe,ys(Oe),e,Z)},changed:B},fe))}function O(){T("dragOverAnimationCapture"),C.captureAnimationState(),C!==y&&y.captureAnimationState()}function D(ie){return T("dragOverCompleted",{insertion:ie}),ie&&(f?c._hideClone():c._showClone(C),C!==y&&(Is(An,ca?ca.options.ghostClass:c.options.ghostClass,!1),Is(An,a.ghostClass,!0)),ca!==C&&C!==_r.active?ca=C:C===_r.active&&ca&&(ca=null),y===C&&(C._ignoreWhileAnimating=r),C.animateAll(function(){T("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(r===An&&!An.animated||r===n&&!r.animated)&&(Td=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(An.parentNode[Fa]._isOutsideThisEl(e.target),!ie&&kf(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function B(){nu=Gs(An),Wh=Gs(An,a.draggable),nl({sortable:C,name:"change",toEl:n,newIndex:nu,newDraggableIndex:Wh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=tc(r,a.draggable,n,!0),T("dragOver"),_r.eventCanceled)return S;if(An.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||C._ignoreWhileAnimating===r)return D(!1);if(_v=!1,c&&!a.disabled&&(f?p||(o=Vs!==ms):ca===this||(this.lastPutMode=t0.checkPull(this,c,An,e))&&l.checkPut(this,c,An,e))){if(m=this._getDirection(e,r)==="vertical",i=ys(An),T("dragOverValid"),_r.eventCanceled)return S;if(o)return Vs=ms,O(),this._hideClone(),T("revert"),_r.eventCanceled||(If?ms.insertBefore(An,If):ms.appendChild(An)),D(!0);var z=h_(n,a.draggable);if(!z||HG(e,m,this)&&!z.animated){if(z===An)return D(!1);if(z&&n===e.target&&(r=z),r&&(s=ys(r)),i0(ms,n,An,i,r,s,e,!!r)!==!1)return O(),n.appendChild(An),Vs=n,B(),D(!0)}else if(z&&VG(e,m,this)){var H=up(n,0,a,!0);if(H===An)return D(!1);if(r=H,s=ys(r),i0(ms,n,An,i,r,s,e,!1)!==!1)return O(),n.insertBefore(An,H),Vs=n,B(),D(!0)}else if(r.parentNode===n){s=ys(r);var J=0,Q,V=An.parentNode!==n,Y=!FG(An.animated&&An.toRect||i,r.animated&&r.toRect||s,m),ge=m?"top":"left",$=r5(r,"top","top")||r5(An,"top","top"),W=$?$.scrollTop:void 0;Td!==r&&(Q=s[ge],Cg=!1,n0=!Y&&a.invertSwap||V),J=WG(e,r,s,m,Y?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,n0,Td===r);var se;if(J!==0){var X=Gs(An);do X-=J,se=Vs.children[X];while(se&&(Kn(se,"display")==="none"||se===Fr))}if(J===0||se===r)return D(!1);Td=r,Lg=J;var U=r.nextElementSibling,R=!1;R=J===1;var ee=i0(ms,n,An,i,r,s,e,R);if(ee!==!1)return(ee===1||ee===-1)&&(R=ee===1),Y2=!0,setTimeout($G,30),O(),R&&!U?n.appendChild(An):r.parentNode.insertBefore(An,R?U:r),$&&xE($,0,W-$.scrollTop),Vs=An.parentNode,Q!==void 0&&!n0&&(F0=Math.abs(Q-ys(r)[ge])),B(),D(!0)}if(n.contains(An))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",kf),Qr(document,"mousemove",kf),Qr(document,"touchmove",kf)},_offUpEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._onDrop),Qr(e,"touchend",this._onDrop),Qr(e,"pointerup",this._onDrop),Qr(e,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(nu=Gs(An),Wh=Gs(An,r.draggable),Pl("drop",this,{evt:e}),Vs=An&&An.parentNode,nu=Gs(An),Wh=Gs(An,r.draggable),_r.eventCanceled){this._nulling();return}$d=!1,n0=!1,Cg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Z2(this.cloneId),Z2(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_g&&Kn(document.body,"user-select",""),Kn(An,"transform",""),e&&(Jp&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Fr&&Fr.parentNode&&Fr.parentNode.removeChild(Fr),(ms===Vs||ca&&ca.lastPutMode!=="clone")&&Hs&&Hs.parentNode&&Hs.parentNode.removeChild(Hs),An&&(this.nativeDraggable&&Qr(An,"dragend",this),B1(An),An.style["will-change"]="",Jp&&!$d&&Is(An,ca?ca.options.ghostClass:this.options.ghostClass,!1),Is(An,this.options.chosenClass,!1),nl({sortable:this,name:"unchoose",toEl:Vs,newIndex:null,newDraggableIndex:null,originalEvent:e}),ms!==Vs?(nu>=0&&(nl({rootEl:Vs,name:"add",toEl:Vs,fromEl:ms,originalEvent:e}),nl({sortable:this,name:"remove",toEl:Vs,originalEvent:e}),nl({rootEl:Vs,name:"sort",toEl:Vs,fromEl:ms,originalEvent:e}),nl({sortable:this,name:"sort",toEl:Vs,originalEvent:e})),ca&&ca.save()):nu!==Wd&&nu>=0&&(nl({sortable:this,name:"update",toEl:Vs,originalEvent:e}),nl({sortable:this,name:"sort",toEl:Vs,originalEvent:e})),_r.active&&((nu==null||nu===-1)&&(nu=Wd,Wh=xg),nl({sortable:this,name:"end",toEl:Vs,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Pl("nulling",this),ms=An=Vs=Fr=If=Hs=R0=Gh=Pf=Ju=Jp=nu=Wh=Wd=xg=Td=Lg=ca=t0=_r.dragged=_r.ghost=_r.clone=_r.active=null,xv.forEach(function(e){e.checked=!0}),xv.length=D1=I1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":An&&(this._onDragOver(e),UG(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],tc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||qG(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];tc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return tc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=hm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&SE(r)},destroy:function(){Pl("destroy",this);var e=this.el;e[Fa]=null,Qr(e,"mousedown",this._onTapStart),Qr(e,"touchstart",this._onTapStart),Qr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(e,"dragover",this),Qr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),wv.splice(wv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Gh){if(Pl("hideClone",this),_r.eventCanceled)return;Kn(Hs,"display","none"),this.options.removeCloneOnHide&&Hs.parentNode&&Hs.parentNode.removeChild(Hs),Gh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Gh){if(Pl("showClone",this),_r.eventCanceled)return;An.parentNode==ms&&!this.options.group.revertClone?ms.insertBefore(Hs,An):If?ms.insertBefore(Hs,If):ms.appendChild(Hs),this.options.group.revertClone&&this.animate(An,Hs),Kn(Hs,"display",""),Gh=!1}}};function UG(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function i0(t,e,n,r,i,s,o,a){var l,c=t[Fa],f=c.options.onMove,p;return window.CustomEvent&&!Lh&&!cm?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||ys(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),f&&(p=f.call(c,l,o)),p}function B1(t){t.draggable=!1}function $G(){Y2=!1}function VG(t,e,n){var r=ys(up(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function HG(t,e,n){var r=ys(h_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function WG(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,f=r?n.top:n.left,p=r?n.bottom:n.right,y=!1;if(!o){if(a&&F0<c*i){if(!Cg&&(Lg===1?l>f+c*s/2:l<p-c*s/2)&&(Cg=!0),Cg)y=!0;else if(Lg===1?l<f+F0:l>p-F0)return-Lg}else if(l>f+c*(1-i)/2&&l<p-c*(1-i)/2)return GG(e)}return y=y||o,y&&(l<f+c*s/2||l>p-c*s/2)?l>f+c/2?1:-1:0}function GG(t){return Gs(An)<Gs(t)?1:-1}function qG(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function YG(t){xv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&xv.push(r)}}function j0(t){return setTimeout(t,0)}function Z2(t){return clearTimeout(t)}py&&oi(document,"touchmove",function(t){(_r.active||$d)&&t.cancelable&&t.preventDefault()});_r.utils={on:oi,off:Qr,css:Kn,find:_E,is:function(e,n){return!!tc(e,n,e,!1)},extend:TG,throttle:wE,closest:tc,toggleClass:Is,clone:f_,index:Gs,nextTick:j0,cancelNextTick:Z2,detectDirection:CE,getChild:up};_r.get=function(t){return t[Fa]};_r.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(_r.utils=Uc(Uc({},_r.utils),r.utils)),hm.mount(r)})};_r.create=function(t,e){return new _r(t,e)};_r.version=PG;var xo=[],Qp,K2,X2=!1,R1,F1,Lv,eg;function ZG(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?oi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?oi(document,"touchmove",this._handleFallbackAutoScroll):oi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),u5(),z0(),OG()},nulling:function(){Lv=K2=Qp=X2=eg=R1=F1=null,xo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Lv=n,r||this.options.forceAutoScrollFallback||cm||Lh||_g){j1(n,this.options,a,r);var l=Yh(a,!0);X2&&(!eg||s!==R1||o!==F1)&&(eg&&u5(),eg=setInterval(function(){var c=Yh(document.elementFromPoint(s,o),!0);c!==l&&(l=c,z0()),j1(n,i.options,c,r)},10),R1=s,F1=o)}else{if(!this.options.bubbleScroll||Yh(a,!0)===Fc()){z0();return}j1(n,this.options,Yh(a,!1),!1)}}},Du(t,{pluginName:"scroll",initializeByDefault:!0})}function z0(){xo.forEach(function(t){clearInterval(t.pid)}),xo=[]}function u5(){clearInterval(eg)}var j1=wE(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Fc(),c=!1,f;K2!==n&&(K2=n,z0(),Qp=e.scroll,f=e.scrollFn,Qp===!0&&(Qp=Yh(n,!0)));var p=0,y=Qp;do{var m=y,C=ys(m),S=C.top,T=C.bottom,O=C.left,D=C.right,B=C.width,z=C.height,H=void 0,J=void 0,Q=m.scrollWidth,V=m.scrollHeight,Y=Kn(m),ge=m.scrollLeft,$=m.scrollTop;m===l?(H=B<Q&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),J=z<V&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(H=B<Q&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),J=z<V&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var W=H&&(Math.abs(D-i)<=o&&ge+B<Q)-(Math.abs(O-i)<=o&&!!ge),se=J&&(Math.abs(T-s)<=o&&$+z<V)-(Math.abs(S-s)<=o&&!!$);if(!xo[p])for(var X=0;X<=p;X++)xo[X]||(xo[X]={});(xo[p].vx!=W||xo[p].vy!=se||xo[p].el!==m)&&(xo[p].el=m,xo[p].vx=W,xo[p].vy=se,clearInterval(xo[p].pid),(W!=0||se!=0)&&(c=!0,xo[p].pid=setInterval((function(){r&&this.layer===0&&_r.active._onTouchMove(Lv);var U=xo[this.layer].vy?xo[this.layer].vy*a:0,R=xo[this.layer].vx?xo[this.layer].vx*a:0;typeof f=="function"&&f.call(_r.dragged.parentNode[Fa],R,U,t,Lv,xo[this.layer].el)!=="continue"||xE(xo[this.layer].el,R,U)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&y!==l&&(y=Yh(y,!1)));X2=c}},30),kE=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(f.clientX,f.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function d_(){}d_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=up(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:kE};Du(d_,{pluginName:"revertOnSpill"});function p_(){}p_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:kE};Du(p_,{pluginName:"removeOnSpill"});var Pu;function KG(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Pu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,f=this.options;if(i&&i!==c){var p=Pu;s(i)!==!1?(Is(i,f.swapClass,!0),Pu=i):Pu=null,p&&p!==Pu&&Is(p,f.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Pu&&Is(Pu,a.swapClass,!1),Pu&&(a.swap||i&&i.options.swap)&&s!==Pu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),XG(s,Pu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Pu=null}},Du(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Pu}}})}function XG(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Gs(t),s=Gs(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Ar=[],tu=[],Bp,Qu,Rp=!1,kl=!1,Od=!1,Xi,Fp,s0;function JG(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?oi(document,"pointerup",this._deselectMultiDrag):(oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag)),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Ar.length&&Qu===e?Ar.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Xi=r},delayEnded:function(){this.isMultiDrag=~Ar.indexOf(Xi)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Ar.length;s++)tu.push(f_(Ar[s])),tu[s].sortableIndex=Ar[s].sortableIndex,tu[s].draggable=!1,tu[s].style["will-change"]="",Is(tu[s],this.options.selectedClass,!1),Ar[s]===Xi&&Is(tu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ar.length&&Qu===r&&(c5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(c5(!1,i),tu.forEach(function(o){Kn(o,"display","")}),r(),s0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(tu.forEach(function(o){Kn(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),s0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Qu&&Qu.multiDrag._deselectMultiDrag(),Ar.forEach(function(r){r.sortableIndex=Gs(r)}),Ar=Ar.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Od=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ar.forEach(function(o){o!==Xi&&Kn(o,"position","absolute")});var s=ys(Xi,!1,!0,!0);Ar.forEach(function(o){o!==Xi&&s5(o,s)}),kl=!0,Rp=!0}i.animateAll(function(){kl=!1,Rp=!1,r.options.animation&&Ar.forEach(function(o){T1(o)}),r.options.sort&&o0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;kl&&~Ar.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Ar.length>1&&(Ar.forEach(function(a){s.addAnimationState({target:a,rect:kl?ys(a):o}),T1(a),a.fromRect=o,r.removeAnimationState(a)}),kl=!1,QG(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Rp=!1,c.animation&&Ar.length>1&&(kl||!i&&!o.options.sort&&!l)){var f=ys(Xi,!1,!0,!0);Ar.forEach(function(y){y!==Xi&&(s5(y,f),a.appendChild(y))}),kl=!0}if(!i)if(kl||o0(),Ar.length>1){var p=s0;o._showClone(r),o.options.animation&&!s0&&p&&tu.forEach(function(y){o.addAnimationState({target:y,rect:Fp}),y.fromRect=Fp,y.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Ar.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Fp=Du({},r);var o=Yf(Xi,!0);Fp.top-=o.f,Fp.left-=o.e}},dragOverAnimationComplete:function(){kl&&(kl=!1,o0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,f=c||this.sortable;if(r){var p=this.options,y=s.children;if(!Od)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Is(Xi,p.selectedClass,!~Ar.indexOf(Xi)),~Ar.indexOf(Xi))Ar.splice(Ar.indexOf(Xi),1),Bp=null,Xp({sortable:o,rootEl:i,name:"deselect",targetEl:Xi});else{if(Ar.push(Xi),Xp({sortable:o,rootEl:i,name:"select",targetEl:Xi}),r.shiftKey&&Bp&&o.el.contains(Bp)){var m=Gs(Bp),C=Gs(Xi);if(~m&&~C&&m!==C){var S,T;for(C>m?(T=m,S=C):(T=C,S=m+1);T<S;T++)~Ar.indexOf(y[T])||(Is(y[T],p.selectedClass,!0),Ar.push(y[T]),Xp({sortable:o,rootEl:i,name:"select",targetEl:y[T]}))}}else Bp=Xi;Qu=f}if(Od&&this.isMultiDrag){if(kl=!1,(s[Fa].options.sort||s!==i)&&Ar.length>1){var O=ys(Xi),D=Gs(Xi,":not(."+this.options.selectedClass+")");if(!Rp&&p.animation&&(Xi.thisAnimationDuration=null),f.captureAnimationState(),!Rp&&(p.animation&&(Xi.fromRect=O,Ar.forEach(function(z){if(z.thisAnimationDuration=null,z!==Xi){var H=kl?ys(z):O;z.fromRect=H,f.addAnimationState({target:z,rect:H})}})),o0(),Ar.forEach(function(z){y[D]?s.insertBefore(z,y[D]):s.appendChild(z),D++}),l===Gs(Xi))){var B=!1;Ar.forEach(function(z){if(z.sortableIndex!==Gs(z)){B=!0;return}}),B&&a("update")}Ar.forEach(function(z){T1(z)}),f.animateAll()}Qu=f}(i===s||c&&c.lastPutMode!=="clone")&&tu.forEach(function(z){z.parentNode&&z.parentNode.removeChild(z)})}},nullingGlobal:function(){this.isMultiDrag=Od=!1,tu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Qr(document,"pointerup",this._deselectMultiDrag),Qr(document,"mouseup",this._deselectMultiDrag),Qr(document,"touchend",this._deselectMultiDrag),Qr(document,"keydown",this._checkKeyDown),Qr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Od<"u"&&Od)&&Qu===this.sortable&&!(n&&tc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Ar.length;){var r=Ar[0];Is(r,this.options.selectedClass,!1),Ar.shift(),Xp({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Du(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Fa];!r||!r.options.multiDrag||~Ar.indexOf(n)||(Qu&&Qu!==r&&(Qu.multiDrag._deselectMultiDrag(),Qu=r),Is(n,r.options.selectedClass,!0),Ar.push(n))},deselect:function(n){var r=n.parentNode[Fa],i=Ar.indexOf(n);!r||!r.options.multiDrag||!~i||(Is(n,r.options.selectedClass,!1),Ar.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Ar.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;kl&&s!==Xi?o=-1:kl?o=Gs(s,":not(."+n.options.selectedClass+")"):o=Gs(s),i.push({multiDragElement:s,index:o})}),{items:xG(Ar),clones:[].concat(tu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function QG(t,e){Ar.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function c5(t,e){tu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function o0(){Ar.forEach(function(t){t!==Xi&&t.parentNode&&t.parentNode.removeChild(t)})}_r.mount(new ZG);_r.mount(p_,d_);const eq=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:JG,Sortable:_r,Swap:KG,default:_r},Symbol.toStringTag,{value:"Module"})),tq=ES(eq);(function(t,e){(function(r,i){t.exports=i(yG,tq)})(typeof self<"u"?self:Zo,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var f in a)o.d(c,f,(function(p){return a[p]}).bind(null,f));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,f){if(a(l),c===void 0)return l;switch(f){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,y){return l.call(c,p,y)};case 3:return function(p,y,m){return l.call(c,p,y,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(y){try{return l(y)}catch{return f.slice()}};i.exports.f=function(m){return f&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),f=o("fc6a"),p=o("c04e"),y=o("5135"),m=o("0cfb"),C=Object.getOwnPropertyDescriptor;s.f=a?C:function(T,O){if(T=f(T),O=p(O,!0),m)try{return C(T,O)}catch{}if(y(T,O))return c(!l.f.call(T,O),T[O])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),f=o("ae40"),p=c("reduce"),y=f("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!y},{reduce:function(C){return l(this,C,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,f){var p=c.exec;if(typeof p=="function"){var y=p.call(c,f);if(typeof y!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return y}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,f)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),f=o("9112");for(var p in l){var y=a[p],m=y&&y.prototype;if(m&&m.forEach!==c)try{f(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),f=l("forEach"),p=c("forEach");i.exports=!f||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var f=0,p={next:function(){return{done:!!f++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(y,m){if(!m&&!c)return!1;var C=!1;try{var S={};S[l]=function(){return{next:function(){return{done:C=!0}}}},y(S)}catch{}return C}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),f=l("species");i.exports=function(p){return c>=51||!a(function(){var y=[],m=y.constructor={};return m[f]=function(){return{foo:1}},y[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(f,p){var y=a(f);return y<0?l(y+p,0):c(y,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),f=o("6eeb"),p=o("ce4e"),y=o("e893"),m=o("94ca");i.exports=function(C,S){var T=C.target,O=C.global,D=C.stat,B,z,H,J,Q,V;if(O?z=a:D?z=a[T]||p(T,{}):z=(a[T]||{}).prototype,z)for(H in S){if(Q=S[H],C.noTargetGet?(V=l(z,H),J=V&&V.value):J=z[H],B=m(O?H:T+(D?".":"#")+H,C.forced),!B&&J!==void 0){if(typeof Q==typeof J)continue;y(Q,J)}(C.sham||J&&J.sham)&&c(Q,"sham",!0),f(z,H,Q,C)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),f=o("ad6d"),p="toString",y=RegExp.prototype,m=y[p],C=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),S=m.name!=p;(C||S)&&a(RegExp.prototype,p,function(){var O=l(this),D=String(O.source),B=O.flags,z=String(B===void 0&&O instanceof RegExp&&!("flags"in y)?f.call(O):B);return"/"+D+"/"+z},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),f=o("5a34"),p=o("1d80"),y=o("ab13"),m=o("c430"),C="".startsWith,S=Math.min,T=y("startsWith"),O=!m&&!T&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!O&&!T},{startsWith:function(B){var z=String(p(this));f(B);var H=c(S(arguments.length>1?arguments[1]:void 0,z.length)),J=String(B);return C?C.call(z,J,H):z.slice(H,H+J.length)===J}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,f=c&&c.versions,p=f&&f.v8,y,m;p?(y=p.split("."),m=y[0]+y[1]):l&&(y=l.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=l.match(/Chrome\/(\d+)/),y&&(m=y[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),f=c("iterator");i.exports=function(p){if(p!=null)return p[f]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),f=o("df75");i.exports=a?Object.defineProperties:function(y,m){c(y);for(var C=f(m),S=C.length,T=0,O;S>T;)l.f(y,O=C[T++],m[O]);return y}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),f="String Iterator",p=l.set,y=l.getterFor(f);c(String,"String",function(m){p(this,{type:f,string:String(m),index:0})},function(){var C=y(this),S=C.string,T=C.index,O;return T>=S.length?{value:void 0,done:!0}:(O=a(S,T),C.index+=O.length,{value:O,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return l(f)=="String"?c.call(f,""):Object(f)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),f=a("unscopables"),p=Array.prototype;p[f]==null&&c.f(p,f,{configurable:!0,value:l(null)}),i.exports=function(y){p[f][y]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),f=c("match");i.exports=function(p){var y;return a(p)&&((y=p[f])!==void 0?!!y:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),f=function(p){return function(y,m,C){var S=a(y),T=l(S.length),O=c(C,T),D;if(p&&m!=m){for(;T>O;)if(D=S[O++],D!=D)return!0}else for(;T>O;O++)if((p||O in S)&&S[O]===m)return p||O||0;return!p&&-1}};i.exports={includes:f(!0),indexOf:f(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),f=o("ae40"),p=c("filter"),y=f("filter");a({target:"Array",proto:!0,forced:!p||!y},{filter:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),f=o("e95a"),p=o("50c4"),y=o("8418"),m=o("35a1");i.exports=function(S){var T=l(S),O=typeof this=="function"?this:Array,D=arguments.length,B=D>1?arguments[1]:void 0,z=B!==void 0,H=m(T),J=0,Q,V,Y,ge,$,W;if(z&&(B=a(B,D>2?arguments[2]:void 0,2)),H!=null&&!(O==Array&&f(H)))for(ge=H.call(T),$=ge.next,V=new O;!(Y=$.call(ge)).done;J++)W=z?c(ge,B,[Y.value,J],!0):Y.value,y(V,J,W);else for(Q=p(T.length),V=new O(Q);Q>J;J++)W=z?B(T[J],J):T[J],y(V,J,W);return V.length=J,V}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(f){return l(f)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),f=o("50c4"),p=o("a691"),y=o("1d80"),m=o("8aa5"),C=o("14c3"),S=Math.max,T=Math.min,O=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,B=/\$([$&'`]|\d\d?)/g,z=function(H){return H===void 0?H:String(H)};a("replace",2,function(H,J,Q,V){var Y=V.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,ge=V.REPLACE_KEEPS_$0,$=Y?"$":"$0";return[function(X,U){var R=y(this),ee=X==null?void 0:X[H];return ee!==void 0?ee.call(X,R,U):J.call(String(R),X,U)},function(se,X){if(!Y&&ge||typeof X=="string"&&X.indexOf($)===-1){var U=Q(J,se,this,X);if(U.done)return U.value}var R=l(se),ee=String(this),ie=typeof X=="function";ie||(X=String(X));var fe=R.global;if(fe){var me=R.unicode;R.lastIndex=0}for(var Oe=[];;){var Z=C(R,ee);if(Z===null||(Oe.push(Z),!fe))break;var ae=String(Z[0]);ae===""&&(R.lastIndex=m(ee,f(R.lastIndex),me))}for(var ce="",pe=0,Le=0;Le<Oe.length;Le++){Z=Oe[Le];for(var Pe=String(Z[0]),Ue=S(T(p(Z.index),ee.length),0),Ne=[],nt=1;nt<Z.length;nt++)Ne.push(z(Z[nt]));var pt=Z.groups;if(ie){var bt=[Pe].concat(Ne,Ue,ee);pt!==void 0&&bt.push(pt);var le=String(X.apply(void 0,bt))}else le=W(Pe,ee,Ue,Ne,pt,X);Ue>=pe&&(ce+=ee.slice(pe,Ue)+le,pe=Ue+Pe.length)}return ce+ee.slice(pe)}];function W(se,X,U,R,ee,ie){var fe=U+se.length,me=R.length,Oe=B;return ee!==void 0&&(ee=c(ee),Oe=D),J.call(ie,Oe,function(Z,ae){var ce;switch(ae.charAt(0)){case"$":return"$";case"&":return se;case"`":return X.slice(0,U);case"'":return X.slice(fe);case"<":ce=ee[ae.slice(1,-1)];break;default:var pe=+ae;if(pe===0)return Z;if(pe>me){var Le=O(pe/10);return Le===0?Z:Le<=me?R[Le-1]===void 0?ae.charAt(1):R[Le-1]+ae.charAt(1):Z}ce=R[pe-1]}return ce===void 0?"":ce})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,f){return l[c]||(l[c]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),f=o("825a");i.exports=a("Reflect","ownKeys")||function(y){var m=l.f(f(y)),C=c.f;return C?m.concat(C(y)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),f=o("50c4"),p=o("1c0b"),y=o("65f0");a({target:"Array",proto:!0},{flatMap:function(C){var S=c(this),T=f(S.length),O;return p(C),O=y(S,0),O.length=l(O,S,S,T,0,1,C,arguments.length>1?arguments[1]:void 0),O}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(f){return function(p,y){var m=String(l(p)),C=a(y),S=m.length,T,O;return C<0||C>=S?f?"":void 0:(T=m.charCodeAt(C),T<55296||T>56319||C+1===S||(O=m.charCodeAt(C+1))<56320||O>57343?f?m.charAt(C):T:f?m.slice(C,C+2):(T-55296<<10)+(O-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),f=c("species");i.exports=function(p,y){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[f],m===null&&(m=void 0))),new(m===void 0?Array:m)(y===0?0:y)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),f=o("9112"),p=o("5135"),y=o("f772"),m=o("d012"),C=l.WeakMap,S,T,O,D=function(Y){return O(Y)?T(Y):S(Y,{})},B=function(Y){return function(ge){var $;if(!c(ge)||($=T(ge)).type!==Y)throw TypeError("Incompatible receiver, "+Y+" required");return $}};if(a){var z=new C,H=z.get,J=z.has,Q=z.set;S=function(Y,ge){return Q.call(z,Y,ge),ge},T=function(Y){return H.call(z,Y)||{}},O=function(Y){return J.call(z,Y)}}else{var V=y("state");m[V]=!0,S=function(Y,ge){return f(Y,V,ge),ge},T=function(Y){return p(Y,V)?Y[V]:{}},O=function(Y){return p(Y,V)}}i.exports={set:S,get:T,has:O,enforce:D,getterFor:B}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),f=o("ce4e"),p=o("8925"),y=o("69f3"),m=y.get,C=y.enforce,S=String(String).split("String");(i.exports=function(T,O,D,B){var z=B?!!B.unsafe:!1,H=B?!!B.enumerable:!1,J=B?!!B.noTargetGet:!1;if(typeof D=="function"&&(typeof O=="string"&&!c(D,"name")&&l(D,"name",O),C(D).source=S.join(typeof O=="string"?O:"")),T===a){H?T[O]=D:f(O,D);return}else z?!J&&T[O]&&(H=!0):delete T[O];H?T[O]=D:l(T,O,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),f=o("d1e7").f,p=function(y){return function(m){for(var C=c(m),S=l(C),T=S.length,O=0,D=[],B;T>O;)B=S[O++],(!a||f.call(C,B))&&D.push(y?[B,C[B]]:C[B]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),f=o("9bf2").f;i.exports=function(p){var y=a.Symbol||(a.Symbol={});l(y,p)||f(y,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),f=o("d012"),p=o("1be4"),y=o("cc12"),m=o("f772"),C=">",S="<",T="prototype",O="script",D=m("IE_PROTO"),B=function(){},z=function(Y){return S+O+C+Y+S+"/"+O+C},H=function(Y){Y.write(z("")),Y.close();var ge=Y.parentWindow.Object;return Y=null,ge},J=function(){var Y=y("iframe"),ge="java"+O+":",$;return Y.style.display="none",p.appendChild(Y),Y.src=String(ge),$=Y.contentWindow.document,$.open(),$.write(z("document.F=Object")),$.close(),$.F},Q,V=function(){try{Q=document.domain&&new ActiveXObject("htmlfile")}catch{}V=Q?H(Q):J();for(var Y=c.length;Y--;)delete V[T][c[Y]];return V()};f[D]=!0,i.exports=Object.create||function(ge,$){var W;return ge!==null?(B[T]=a(ge),W=new B,B[T]=null,W[D]=ge):W=V(),$===void 0?W:l(W,$)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),f=o("d2bb"),p=o("d44e"),y=o("9112"),m=o("6eeb"),C=o("b622"),S=o("c430"),T=o("3f8c"),O=o("ae93"),D=O.IteratorPrototype,B=O.BUGGY_SAFARI_ITERATORS,z=C("iterator"),H="keys",J="values",Q="entries",V=function(){return this};i.exports=function(Y,ge,$,W,se,X,U){l($,ge,W);var R=function(Le){if(Le===se&&Oe)return Oe;if(!B&&Le in fe)return fe[Le];switch(Le){case H:return function(){return new $(this,Le)};case J:return function(){return new $(this,Le)};case Q:return function(){return new $(this,Le)}}return function(){return new $(this)}},ee=ge+" Iterator",ie=!1,fe=Y.prototype,me=fe[z]||fe["@@iterator"]||se&&fe[se],Oe=!B&&me||R(se),Z=ge=="Array"&&fe.entries||me,ae,ce,pe;if(Z&&(ae=c(Z.call(new Y)),D!==Object.prototype&&ae.next&&(!S&&c(ae)!==D&&(f?f(ae,D):typeof ae[z]!="function"&&y(ae,z,V)),p(ae,ee,!0,!0),S&&(T[ee]=V))),se==J&&me&&me.name!==J&&(ie=!0,Oe=function(){return me.call(this)}),(!S||U)&&fe[z]!==Oe&&y(fe,z,Oe),T[ge]=Oe,se)if(ce={values:R(J),keys:X?Oe:R(H),entries:R(Q)},U)for(pe in ce)(B||ie||!(pe in fe))&&m(fe,pe,ce[pe]);else a({target:ge,proto:!0,forced:B||ie},ce);return ce}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(f,p,y){var m=a(p);m in f?l.f(f,m,c(0,y)):f[m]=y}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(f,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function f(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==f&&document.currentScript)return document.currentScript;try{throw new Error}catch(Q){var y=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,C=y.exec(Q.stack)||m.exec(Q.stack),S=C&&C[1]||!1,T=C&&C[2]||!1,O=document.location.href.replace(document.location.hash,""),D,B,z,H=document.getElementsByTagName("script");S===O&&(D=document.documentElement.outerHTML,B=new RegExp("(?:[^\\n]+?\\n){0,"+(T-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),z=D.replace(B,"$1").trim());for(var J=0;J<H.length;J++)if(H[J].readyState==="interactive"||H[J].src===S||S===O&&H[J].innerHTML&&H[J].innerHTML.trim()===z)return H[J];return null}}return f})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,f){return c+(f?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(f,p,y){return l.f(f,p,c(1,y))}:function(f,p,y){return f[p]=y,f}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,f=String.prototype.replace,p=c,y=function(){var T=/a/,O=/b*/g;return c.call(T,"a"),c.call(O,"a"),T.lastIndex!==0||O.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,S=y||C||m;S&&(p=function(O){var D=this,B,z,H,J,Q=m&&D.sticky,V=a.call(D),Y=D.source,ge=0,$=O;return Q&&(V=V.replace("y",""),V.indexOf("g")===-1&&(V+="g"),$=String(O).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&O[D.lastIndex-1]!==`
`)&&(Y="(?: "+Y+")",$=" "+$,ge++),z=new RegExp("^(?:"+Y+")",V)),C&&(z=new RegExp("^"+Y+"$(?!\\s)",V)),y&&(B=D.lastIndex),H=c.call(Q?z:D,$),Q?H?(H.input=H.input.slice(ge),H[0]=H[0].slice(ge),H.index=D.lastIndex,D.lastIndex+=H[0].length):D.lastIndex=0:y&&H&&(D.lastIndex=D.global?H.index+H[0].length:B),C&&H&&H.length>1&&f.call(H[0],z,function(){for(J=1;J<arguments.length-2;J++)arguments[J]===void 0&&(H[J]=void 0)}),H}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(C,S){var T=p[f(C)];return T==m?!0:T==y?!1:typeof S=="function"?a(S):!!S},f=c.normalize=function(C){return String(C).replace(l,".").toLowerCase()},p=c.data={},y=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),f=o("861d"),p=o("7b0b"),y=o("50c4"),m=o("8418"),C=o("65f0"),S=o("1dde"),T=o("b622"),O=o("2d00"),D=T("isConcatSpreadable"),B=9007199254740991,z="Maximum allowed index exceeded",H=O>=51||!l(function(){var Y=[];return Y[D]=!1,Y.concat()[0]!==Y}),J=S("concat"),Q=function(Y){if(!f(Y))return!1;var ge=Y[D];return ge!==void 0?!!ge:c(Y)},V=!H||!J;a({target:"Array",proto:!0,forced:V},{concat:function(ge){var $=p(this),W=C($,0),se=0,X,U,R,ee,ie;for(X=-1,R=arguments.length;X<R;X++)if(ie=X===-1?$:arguments[X],Q(ie)){if(ee=y(ie.length),se+ee>B)throw TypeError(z);for(U=0;U<ee;U++,se++)U in ie&&m(W,se,ie[U])}else{if(se>=B)throw TypeError(z);m(W,se++,ie)}return W.length=se,W}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,f,p){try{return p?c(a(f)[0],f[1]):c(f)}catch(m){var y=l.return;throw y!==void 0&&a(y.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),f=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,C,S){if(c(m),C=f(C,!0),c(S),l)try{return p(m,C,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported");return"value"in S&&(m[C]=S.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),f=o("d44e"),p=o("3f8c"),y=function(){return this};i.exports=function(m,C,S){var T=C+" Iterator";return m.prototype=l(a,{next:c(1,S)}),f(m,T,!1,!0),p[T]=y,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,f){return RegExp(c,f)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),f=function(p,y,m,C,S,T,O,D){for(var B=S,z=0,H=O?c(O,D,3):!1,J;z<C;){if(z in m){if(J=H?H(m[z],z,y):m[z],T>0&&a(J))B=f(p,y,J,l(J.length),B,T-1)-1;else{if(B>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[B]=J}B++}z++}return B};i.exports=f},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),f=o("50c4"),p=o("7b0b"),y=o("65f0"),m=o("8418"),C=o("1dde"),S=o("ae40"),T=C("splice"),O=S("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,B=Math.min,z=9007199254740991,H="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!T||!O},{splice:function(Q,V){var Y=p(this),ge=f(Y.length),$=l(Q,ge),W=arguments.length,se,X,U,R,ee,ie;if(W===0?se=X=0:W===1?(se=0,X=ge-$):(se=W-2,X=B(D(c(V),0),ge-$)),ge+se-X>z)throw TypeError(H);for(U=y(Y,X),R=0;R<X;R++)ee=$+R,ee in Y&&m(U,R,Y[ee]);if(U.length=X,se<X){for(R=$;R<ge-X;R++)ee=R+X,ie=R+se,ee in Y?Y[ie]=Y[ee]:delete Y[ie];for(R=ge;R>ge-X+se;R--)delete Y[R-1]}else if(se>X)for(R=ge-X;R>$;R--)ee=R+X-1,ie=R+se-1,ee in Y?Y[ie]=Y[ee]:delete Y[ie];for(R=0;R<se;R++)Y[R+$]=arguments[R+2];return Y.length=ge-X+se,U}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),f=o("c430"),p=o("83ab"),y=o("4930"),m=o("fdbf"),C=o("d039"),S=o("5135"),T=o("e8b5"),O=o("861d"),D=o("825a"),B=o("7b0b"),z=o("fc6a"),H=o("c04e"),J=o("5c6c"),Q=o("7c73"),V=o("df75"),Y=o("241c"),ge=o("057f"),$=o("7418"),W=o("06cf"),se=o("9bf2"),X=o("d1e7"),U=o("9112"),R=o("6eeb"),ee=o("5692"),ie=o("f772"),fe=o("d012"),me=o("90e3"),Oe=o("b622"),Z=o("e538"),ae=o("746f"),ce=o("d44e"),pe=o("69f3"),Le=o("b727").forEach,Pe=ie("hidden"),Ue="Symbol",Ne="prototype",nt=Oe("toPrimitive"),pt=pe.set,bt=pe.getterFor(Ue),le=Object[Ne],oe=l.Symbol,ue=c("JSON","stringify"),te=W.f,Se=se.f,Ve=ge.f,Xe=X.f,at=ee("symbols"),ot=ee("op-symbols"),dt=ee("string-to-symbol-registry"),zt=ee("symbol-to-string-registry"),Rt=ee("wks"),Zt=l.QObject,Qt=!Zt||!Zt[Ne]||!Zt[Ne].findChild,pn=p&&C(function(){return Q(Se({},"a",{get:function(){return Se(this,"a",{value:7}).a}})).a!=7})?function(mn,nn,cn){var Nn=te(le,nn);Nn&&delete le[nn],Se(mn,nn,cn),Nn&&mn!==le&&Se(le,nn,Nn)}:Se,Sn=function(mn,nn){var cn=at[mn]=Q(oe[Ne]);return pt(cn,{type:Ue,tag:mn,description:nn}),p||(cn.description=nn),cn},Ze=m?function(mn){return typeof mn=="symbol"}:function(mn){return Object(mn)instanceof oe},it=function(nn,cn,Nn){nn===le&&it(ot,cn,Nn),D(nn);var er=H(cn,!0);return D(Nn),S(at,er)?(Nn.enumerable?(S(nn,Pe)&&nn[Pe][er]&&(nn[Pe][er]=!1),Nn=Q(Nn,{enumerable:J(0,!1)})):(S(nn,Pe)||Se(nn,Pe,J(1,{})),nn[Pe][er]=!0),pn(nn,er,Nn)):Se(nn,er,Nn)},Je=function(nn,cn){D(nn);var Nn=z(cn),er=V(Nn).concat(bn(Nn));return Le(er,function(ar){(!p||Kt.call(Nn,ar))&&it(nn,ar,Nn[ar])}),nn},$t=function(nn,cn){return cn===void 0?Q(nn):Je(Q(nn),cn)},Kt=function(nn){var cn=H(nn,!0),Nn=Xe.call(this,cn);return this===le&&S(at,cn)&&!S(ot,cn)?!1:Nn||!S(this,cn)||!S(at,cn)||S(this,Pe)&&this[Pe][cn]?Nn:!0},_n=function(nn,cn){var Nn=z(nn),er=H(cn,!0);if(!(Nn===le&&S(at,er)&&!S(ot,er))){var ar=te(Nn,er);return ar&&S(at,er)&&!(S(Nn,Pe)&&Nn[Pe][er])&&(ar.enumerable=!0),ar}},gn=function(nn){var cn=Ve(z(nn)),Nn=[];return Le(cn,function(er){!S(at,er)&&!S(fe,er)&&Nn.push(er)}),Nn},bn=function(nn){var cn=nn===le,Nn=Ve(cn?ot:z(nn)),er=[];return Le(Nn,function(ar){S(at,ar)&&(!cn||S(le,ar))&&er.push(at[ar])}),er};if(y||(oe=function(){if(this instanceof oe)throw TypeError("Symbol is not a constructor");var nn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),cn=me(nn),Nn=function(er){this===le&&Nn.call(ot,er),S(this,Pe)&&S(this[Pe],cn)&&(this[Pe][cn]=!1),pn(this,cn,J(1,er))};return p&&Qt&&pn(le,cn,{configurable:!0,set:Nn}),Sn(cn,nn)},R(oe[Ne],"toString",function(){return bt(this).tag}),R(oe,"withoutSetter",function(mn){return Sn(me(mn),mn)}),X.f=Kt,se.f=it,W.f=_n,Y.f=ge.f=gn,$.f=bn,Z.f=function(mn){return Sn(Oe(mn),mn)},p&&(Se(oe[Ne],"description",{configurable:!0,get:function(){return bt(this).description}}),f||R(le,"propertyIsEnumerable",Kt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:oe}),Le(V(Rt),function(mn){ae(mn)}),a({target:Ue,stat:!0,forced:!y},{for:function(mn){var nn=String(mn);if(S(dt,nn))return dt[nn];var cn=oe(nn);return dt[nn]=cn,zt[cn]=nn,cn},keyFor:function(nn){if(!Ze(nn))throw TypeError(nn+" is not a symbol");if(S(zt,nn))return zt[nn]},useSetter:function(){Qt=!0},useSimple:function(){Qt=!1}}),a({target:"Object",stat:!0,forced:!y,sham:!p},{create:$t,defineProperty:it,defineProperties:Je,getOwnPropertyDescriptor:_n}),a({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:gn,getOwnPropertySymbols:bn}),a({target:"Object",stat:!0,forced:C(function(){$.f(1)})},{getOwnPropertySymbols:function(nn){return $.f(B(nn))}}),ue){var Rn=!y||C(function(){var mn=oe();return ue([mn])!="[null]"||ue({a:mn})!="{}"||ue(Object(mn))!="{}"});a({target:"JSON",stat:!0,forced:Rn},{stringify:function(nn,cn,Nn){for(var er=[nn],ar=1,zn;arguments.length>ar;)er.push(arguments[ar++]);if(zn=cn,!(!O(cn)&&nn===void 0||Ze(nn)))return T(cn)||(cn=function(Lr,ns){if(typeof zn=="function"&&(ns=zn.call(this,Lr,ns)),!Ze(ns))return ns}),er[1]=cn,ue.apply(null,er)}})}oe[Ne][nt]||U(oe[Ne],nt,oe[Ne].valueOf),ce(oe,Ue),fe[Pe]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),f=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:f},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var f=[][l];return!!f&&a(function(){f.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var f=/./;try{"/./"[c](f)}catch{try{return f[l]=!1,"/./"[c](f)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),f=Object.defineProperty,p={},y=function(m){throw m};i.exports=function(m,C){if(c(p,m))return p[m];C||(C={});var S=[][m],T=c(C,"ACCESSORS")?C.ACCESSORS:!1,O=c(C,0)?C[0]:y,D=c(C,1)?C[1]:void 0;return p[m]=!!S&&!l(function(){if(T&&!a)return!0;var B={length:-1};T?f(B,1,{enumerable:!0,get:y}):B[1]=1,S.call(B,O,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),f=o("b622"),p=o("c430"),y=f("iterator"),m=!1,C=function(){return this},S,T,O;[].keys&&(O=[].keys(),"next"in O?(T=a(a(O)),T!==Object.prototype&&(S=T)):m=!0),S==null&&(S={}),!p&&!c(S,y)&&l(S,y,C),i.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,f=c.toString,p=/^\s*function ([^ (]*)/,y="name";a&&!(y in c)&&l(c,y,{configurable:!0,get:function(){try{return f.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),f=o("90e3"),p=o("4930"),y=o("fdbf"),m=l("wks"),C=a.Symbol,S=y?C:C&&C.withoutSetter||f;i.exports=function(T){return c(m,T)||(p&&c(C,T)?m[T]=C[T]:m[T]=S("Symbol."+T)),m[T]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),f=o("d039"),p=f(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),f=o("50c4"),p=o("65f0"),y=[].push,m=function(C){var S=C==1,T=C==2,O=C==3,D=C==4,B=C==6,z=C==5||B;return function(H,J,Q,V){for(var Y=c(H),ge=l(Y),$=a(J,Q,3),W=f(ge.length),se=0,X=V||p,U=S?X(H,W):T?X(H,0):void 0,R,ee;W>se;se++)if((z||se in ge)&&(R=ge[se],ee=$(R,se,Y),C)){if(S)U[se]=ee;else if(ee)switch(C){case 3:return!0;case 5:return R;case 6:return se;case 2:y.call(U,R)}else if(D)return!1}return B?-1:O||D?D:U}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var f,p;if(c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l))||typeof(f=l.valueOf)=="function"&&!a(p=f.call(l))||!c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",f=a[c]||l(c,{});i.exports=f},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),f=o("ae40"),p="findIndex",y=!0,m=f(p);p in[]&&Array(1)[p](function(){y=!1}),a({target:"Array",proto:!0,forced:y||!m},{findIndex:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),f=o("ae40"),p=[].indexOf,y=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),C=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:y||!m||!C},{indexOf:function(T){return y?p.apply(this,arguments)||0:l(this,T,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,f=o("d012");i.exports=function(p,y){var m=l(p),C=0,S=[],T;for(T in m)!a(f,T)&&a(m,T)&&S.push(T);for(;y.length>C;)a(m,T=y[C++])&&(~c(S,T)||S.push(T));return S}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),f=o("ae40"),p=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,f=l(c)&&l(c.createElement);i.exports=function(p){return f?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,f){try{l(a,c,f)}catch{a[c]=f}return f}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(f){return typeof f=="function"?f:void 0};i.exports=function(f,p){return arguments.length<2?c(a[f])||c(l[f]):a[f]&&a[f][p]||l[f]&&l[f][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var y=l(this,p);return!!y&&y.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,f={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(f,[]),c=f instanceof Array}catch{}return function(m,C){return a(m),l(C),c?p.call(m,C):m.__proto__=C,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),f=c("toStringTag");i.exports=function(p,y,m){p&&!l(p=m?p:p.prototype,f)&&a(p,f,{configurable:!0,value:y})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),f=o("50c4"),p=function(y){return function(m,C,S,T){a(C);var O=l(m),D=c(O),B=f(O.length),z=y?B-1:0,H=y?-1:1;if(S<2)for(;;){if(z in D){T=D[z],z+=H;break}if(z+=H,y?z<0:B<=z)throw TypeError("Reduce of empty array with no initial value")}for(;y?z>=0:B>z;z+=H)z in D&&(T=C(T,D[z],z,O));return T}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),f=o("9263"),p=o("9112"),y=c("species"),m=!l(function(){var D=/./;return D.exec=function(){var B=[];return B.groups={a:"7"},B},"".replace(D,"$<a>")!=="7"}),C=function(){return"a".replace(/./,"$0")==="$0"}(),S=c("replace"),T=function(){return/./[S]?/./[S]("a","$0")==="":!1}(),O=!l(function(){var D=/(?:)/,B=D.exec;D.exec=function(){return B.apply(this,arguments)};var z="ab".split(D);return z.length!==2||z[0]!=="a"||z[1]!=="b"});i.exports=function(D,B,z,H){var J=c(D),Q=!l(function(){var se={};return se[J]=function(){return 7},""[D](se)!=7}),V=Q&&!l(function(){var se=!1,X=/a/;return D==="split"&&(X={},X.constructor={},X.constructor[y]=function(){return X},X.flags="",X[J]=/./[J]),X.exec=function(){return se=!0,null},X[J](""),!se});if(!Q||!V||D==="replace"&&!(m&&C&&!T)||D==="split"&&!O){var Y=/./[J],ge=z(J,""[D],function(se,X,U,R,ee){return X.exec===f?Q&&!ee?{done:!0,value:Y.call(X,U,R)}:{done:!0,value:se.call(U,X,R)}:{done:!1}},{REPLACE_KEEPS_$0:C,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:T}),$=ge[0],W=ge[1];a(String.prototype,D,$),a(RegExp.prototype,J,B==2?function(se,X){return W.call(se,this,X)}:function(se){return W.call(se,this)})}H&&p(RegExp.prototype[J],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),f=o("ae40"),p=c("map"),y=f("map");a({target:"Array",proto:!0,forced:!p||!y},{map:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),f=o("fc6a"),p=o("06cf"),y=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(C){for(var S=f(C),T=p.f,O=c(S),D={},B=0,z,H;O.length>B;)H=T(S,z=O[B++]),H!==void 0&&y(D,z,H);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),f=o("9112"),p=o("b622"),y=p("iterator"),m=p("toStringTag"),C=c.values;for(var S in l){var T=a[S],O=T&&T.prototype;if(O){if(O[y]!==C)try{f(O,y,C)}catch{O[y]=C}if(O[m]||f(O,m,S),l[S]){for(var D in c)if(O[D]!==c[D])try{f(O,D,c[D])}catch{O[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(f){return a(f,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),f=o("5135"),p=o("861d"),y=o("9bf2").f,m=o("e893"),C=c.Symbol;if(l&&typeof C=="function"&&(!("description"in C.prototype)||C().description!==void 0)){var S={},T=function(){var J=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Q=this instanceof T?new C(J):J===void 0?C():C(J);return J===""&&(S[Q]=!0),Q};m(T,C);var O=T.prototype=C.prototype;O.constructor=T;var D=O.toString,B=String(C("test"))=="Symbol(test)",z=/^Symbol\((.*)\)[^)]+$/;y(O,"description",{configurable:!0,get:function(){var J=p(this)?this.valueOf():this,Q=D.call(J);if(f(S,J))return"";var V=B?Q.slice(7,-1):Q.replace(z,"$1");return V===""?void 0:V}}),a({global:!0,forced:!0},{Symbol:T})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),f=o("e177"),p=c("IE_PROTO"),y=Object.prototype;i.exports=f?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?y:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),f=o("69f3"),p=o("7dd0"),y="Array Iterator",m=f.set,C=f.getterFor(y);i.exports=p(Array,"Array",function(S,T){m(this,{type:y,target:a(S),index:0,kind:T})},function(){var S=C(this),T=S.target,O=S.kind,D=S.index++;return!T||D>=T.length?(S.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:D,done:!1}:O=="values"?{value:T[D],done:!1}:{value:[D,T[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),f=o("06cf").f,p=o("83ab"),y=l(function(){f(1)}),m=!p||y;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(S,T){return f(c(S),T)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),f=o("9bf2");i.exports=function(p,y){for(var m=l(y),C=f.f,S=c.f,T=0;T<m.length;T++){var O=m[T];a(p,O)||C(p,O,S(y,O))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),f=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||f[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),f=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",y=function(m,C){try{return m[C]}catch{}};i.exports=a?l:function(m){var C,S,T;return m===void 0?"Undefined":m===null?"Null":typeof(S=y(C=Object(m),f))=="string"?S:p?l(C):(T=l(C))=="Object"&&typeof C.callee=="function"?"Arguments":T}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(f){return c[f]||(c[f]=l(f))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function f(Ze,it,Je){return it in Ze?Object.defineProperty(Ze,it,{value:Je,enumerable:!0,configurable:!0,writable:!0}):Ze[it]=Je,Ze}function p(Ze,it){var Je=Object.keys(Ze);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Ze);it&&($t=$t.filter(function(Kt){return Object.getOwnPropertyDescriptor(Ze,Kt).enumerable})),Je.push.apply(Je,$t)}return Je}function y(Ze){for(var it=1;it<arguments.length;it++){var Je=arguments[it]!=null?arguments[it]:{};it%2?p(Object(Je),!0).forEach(function($t){f(Ze,$t,Je[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ze,Object.getOwnPropertyDescriptors(Je)):p(Object(Je)).forEach(function($t){Object.defineProperty(Ze,$t,Object.getOwnPropertyDescriptor(Je,$t))})}return Ze}function m(Ze){if(Array.isArray(Ze))return Ze}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function C(Ze,it){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ze)))){var Je=[],$t=!0,Kt=!1,_n=void 0;try{for(var gn=Ze[Symbol.iterator](),bn;!($t=(bn=gn.next()).done)&&(Je.push(bn.value),!(it&&Je.length===it));$t=!0);}catch(Rn){Kt=!0,_n=Rn}finally{try{!$t&&gn.return!=null&&gn.return()}finally{if(Kt)throw _n}}return Je}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function S(Ze,it){(it==null||it>Ze.length)&&(it=Ze.length);for(var Je=0,$t=new Array(it);Je<it;Je++)$t[Je]=Ze[Je];return $t}function T(Ze,it){if(Ze){if(typeof Ze=="string")return S(Ze,it);var Je=Object.prototype.toString.call(Ze).slice(8,-1);if(Je==="Object"&&Ze.constructor&&(Je=Ze.constructor.name),Je==="Map"||Je==="Set")return Array.from(Ze);if(Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je))return S(Ze,it)}}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ze,it){return m(Ze)||C(Ze,it)||T(Ze,it)||O()}function B(Ze){if(Array.isArray(Ze))return S(Ze)}function z(Ze){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ze))return Array.from(Ze)}function H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(Ze){return B(Ze)||z(Ze)||T(Ze)||H()}var Q=o("a352"),V=o.n(Q);function Y(Ze){Ze.parentElement!==null&&Ze.parentElement.removeChild(Ze)}function ge(Ze,it,Je){var $t=Je===0?Ze.children[0]:Ze.children[Je-1].nextSibling;Ze.insertBefore(it,$t)}var $=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function W(Ze){var it=Object.create(null);return function($t){var Kt=it[$t];return Kt||(it[$t]=Ze($t))}}var se=/-(\w)/g,X=W(function(Ze){return Ze.replace(se,function(it,Je){return Je.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],R=["Choose","Unchoose","Sort","Filter","Clone"],ee=["Move"],ie=[ee,U,R].flatMap(function(Ze){return Ze}).map(function(Ze){return"on".concat(Ze)}),fe={manage:ee,manageAndEmit:U,emit:R};function me(Ze){return ie.indexOf(Ze)!==-1}o("caad"),o("2ca0");var Oe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Z(Ze){return Oe.includes(Ze)}function ae(Ze){return["transition-group","TransitionGroup"].includes(Ze)}function ce(Ze){return["id","class","role","style"].includes(Ze)||Ze.startsWith("data-")||Ze.startsWith("aria-")||Ze.startsWith("on")}function pe(Ze){return Ze.reduce(function(it,Je){var $t=D(Je,2),Kt=$t[0],_n=$t[1];return it[Kt]=_n,it},{})}function Le(Ze){var it=Ze.$attrs,Je=Ze.componentData,$t=Je===void 0?{}:Je,Kt=pe(Object.entries(it).filter(function(_n){var gn=D(_n,2),bn=gn[0];return gn[1],ce(bn)}));return y(y({},Kt),$t)}function Pe(Ze){var it=Ze.$attrs,Je=Ze.callBackBuilder,$t=pe(Ue(it));Object.entries(Je).forEach(function(_n){var gn=D(_n,2),bn=gn[0],Rn=gn[1];fe[bn].forEach(function(mn){$t["on".concat(mn)]=Rn(mn)})});var Kt="[data-draggable]".concat($t.draggable||"");return y(y({},$t),{},{draggable:Kt})}function Ue(Ze){return Object.entries(Ze).filter(function(it){var Je=D(it,2),$t=Je[0];return Je[1],!ce($t)}).map(function(it){var Je=D(it,2),$t=Je[0],Kt=Je[1];return[X($t),Kt]}).filter(function(it){var Je=D(it,2),$t=Je[0];return Je[1],!me($t)})}o("c740");function Ne(Ze,it){if(!(Ze instanceof it))throw new TypeError("Cannot call a class as a function")}function nt(Ze,it){for(var Je=0;Je<it.length;Je++){var $t=it[Je];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Ze,$t.key,$t)}}function pt(Ze,it,Je){return it&&nt(Ze.prototype,it),Ze}var bt=function(it){var Je=it.el;return Je},le=function(it,Je){return it.__draggable_context=Je},oe=function(it){return it.__draggable_context},ue=function(){function Ze(it){var Je=it.nodes,$t=Je.header,Kt=Je.default,_n=Je.footer,gn=it.root,bn=it.realList;Ne(this,Ze),this.defaultNodes=Kt,this.children=[].concat(J($t),J(Kt),J(_n)),this.externalComponent=gn.externalComponent,this.rootTransition=gn.transition,this.tag=gn.tag,this.realList=bn}return pt(Ze,[{key:"render",value:function(Je,$t){var Kt=this.tag,_n=this.children,gn=this._isRootComponent,bn=gn?{default:function(){return _n}}:_n;return Je(Kt,$t,bn)}},{key:"updated",value:function(){var Je=this.defaultNodes,$t=this.realList;Je.forEach(function(Kt,_n){le(bt(Kt),{element:$t[_n],index:_n})})}},{key:"getUnderlyingVm",value:function(Je){return oe(Je)}},{key:"getVmIndexFromDomIndex",value:function(Je,$t){var Kt=this.defaultNodes,_n=Kt.length,gn=$t.children,bn=gn.item(Je);if(bn===null)return _n;var Rn=oe(bn);if(Rn)return Rn.index;if(_n===0)return 0;var mn=bt(Kt[0]),nn=J(gn).findIndex(function(cn){return cn===mn});return Je<nn?0:_n}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ze}(),te=o("8bbf");function Se(Ze,it){var Je=Ze[it];return Je?Je():[]}function Ve(Ze){var it=Ze.$slots,Je=Ze.realList,$t=Ze.getKey,Kt=Je||[],_n=["header","footer"].map(function(cn){return Se(it,cn)}),gn=D(_n,2),bn=gn[0],Rn=gn[1],mn=it.item;if(!mn)throw new Error("draggable element must have an item slot");var nn=Kt.flatMap(function(cn,Nn){return mn({element:cn,index:Nn}).map(function(er){return er.key=$t(cn),er.props=y(y({},er.props||{}),{},{"data-draggable":!0}),er})});if(nn.length!==Kt.length)throw new Error("Item slot must have only one child");return{header:bn,footer:Rn,default:nn}}function Xe(Ze){var it=ae(Ze),Je=!Z(Ze)&&!it;return{transition:it,externalComponent:Je,tag:Je?Object(te.resolveComponent)(Ze):it?te.TransitionGroup:Ze}}function at(Ze){var it=Ze.$slots,Je=Ze.tag,$t=Ze.realList,Kt=Ze.getKey,_n=Ve({$slots:it,realList:$t,getKey:Kt}),gn=Xe(Je);return new ue({nodes:_n,root:gn,realList:$t})}function ot(Ze,it){var Je=this;Object(te.nextTick)(function(){return Je.$emit(Ze.toLowerCase(),it)})}function dt(Ze){var it=this;return function(Je,$t){if(it.realList!==null)return it["onDrag".concat(Ze)](Je,$t)}}function zt(Ze){var it=this,Je=dt.call(this,Ze);return function($t,Kt){Je.call(it,$t,Kt),ot.call(it,Ze,$t)}}var Rt=null,Zt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(it){return it}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Qt=["update:modelValue","change"].concat(J([].concat(J(fe.manageAndEmit),J(fe.emit)).map(function(Ze){return Ze.toLowerCase()}))),pn=Object(te.defineComponent)({name:"draggable",inheritAttrs:!1,props:Zt,emits:Qt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var it=this.$slots,Je=this.$attrs,$t=this.tag,Kt=this.componentData,_n=this.realList,gn=this.getKey,bn=at({$slots:it,tag:$t,realList:_n,getKey:gn});this.componentStructure=bn;var Rn=Le({$attrs:Je,componentData:Kt});return bn.render(te.h,Rn)}catch(mn){return this.error=!0,Object(te.h)("pre",{style:{color:"red"}},mn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&$.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var it=this;if(!this.error){var Je=this.$attrs,$t=this.$el,Kt=this.componentStructure;Kt.updated();var _n=Pe({$attrs:Je,callBackBuilder:{manageAndEmit:function(Rn){return zt.call(it,Rn)},emit:function(Rn){return ot.bind(it,Rn)},manage:function(Rn){return dt.call(it,Rn)}}}),gn=$t.nodeType===1?$t:$t.parentElement;this._sortable=new V.a(gn,_n),this.targetDomElement=gn,gn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var it=this.list;return it||this.modelValue},getKey:function(){var it=this.itemKey;return typeof it=="function"?it:function(Je){return Je[it]}}},watch:{$attrs:{handler:function(it){var Je=this._sortable;Je&&Ue(it).forEach(function($t){var Kt=D($t,2),_n=Kt[0],gn=Kt[1];Je.option(_n,gn)})},deep:!0}},methods:{getUnderlyingVm:function(it){return this.componentStructure.getUnderlyingVm(it)||null},getUnderlyingPotencialDraggableComponent:function(it){return it.__draggable_component__},emitChanges:function(it){var Je=this;Object(te.nextTick)(function(){return Je.$emit("change",it)})},alterList:function(it){if(this.list){it(this.list);return}var Je=J(this.modelValue);it(Je),this.$emit("update:modelValue",Je)},spliceList:function(){var it=arguments,Je=function(Kt){return Kt.splice.apply(Kt,J(it))};this.alterList(Je)},updatePosition:function(it,Je){var $t=function(_n){return _n.splice(Je,0,_n.splice(it,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(it){var Je=it.to,$t=it.related,Kt=this.getUnderlyingPotencialDraggableComponent(Je);if(!Kt)return{component:Kt};var _n=Kt.realList,gn={list:_n,component:Kt};if(Je!==$t&&_n){var bn=Kt.getUnderlyingVm($t)||{};return y(y({},bn),gn)}return gn},getVmIndexFromDomIndex:function(it){return this.componentStructure.getVmIndexFromDomIndex(it,this.targetDomElement)},onDragStart:function(it){this.context=this.getUnderlyingVm(it.item),it.item._underlying_vm_=this.clone(this.context.element),Rt=it.item},onDragAdd:function(it){var Je=it.item._underlying_vm_;if(Je!==void 0){Y(it.item);var $t=this.getVmIndexFromDomIndex(it.newIndex);this.spliceList($t,0,Je);var Kt={element:Je,newIndex:$t};this.emitChanges({added:Kt})}},onDragRemove:function(it){if(ge(this.$el,it.item,it.oldIndex),it.pullMode==="clone"){Y(it.clone);return}var Je=this.context,$t=Je.index,Kt=Je.element;this.spliceList($t,1);var _n={element:Kt,oldIndex:$t};this.emitChanges({removed:_n})},onDragUpdate:function(it){Y(it.item),ge(it.from,it.item,it.oldIndex);var Je=this.context.index,$t=this.getVmIndexFromDomIndex(it.newIndex);this.updatePosition(Je,$t);var Kt={element:this.context.element,oldIndex:Je,newIndex:$t};this.emitChanges({moved:Kt})},computeFutureIndex:function(it,Je){if(!it.element)return 0;var $t=J(Je.to.children).filter(function(bn){return bn.style.display!=="none"}),Kt=$t.indexOf(Je.related),_n=it.component.getVmIndexFromDomIndex(Kt),gn=$t.indexOf(Rt)!==-1;return gn||!Je.willInsertAfter?_n:_n+1},onDragMove:function(it,Je){var $t=this.move,Kt=this.realList;if(!$t||!Kt)return!0;var _n=this.getRelatedContextFromMoveEvent(it),gn=this.computeFutureIndex(_n,it),bn=y(y({},this.context),{},{futureIndex:gn}),Rn=y(y({},it),{},{relatedContext:_n,draggedContext:bn});return $t(Rn,Je)},onDragEnd:function(){Rt=null}}}),Sn=pn;s.default=Sn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),f=o("23cb"),p=o("50c4"),y=o("fc6a"),m=o("8418"),C=o("b622"),S=o("1dde"),T=o("ae40"),O=S("slice"),D=T("slice",{ACCESSORS:!0,0:0,1:2}),B=C("species"),z=[].slice,H=Math.max;a({target:"Array",proto:!0,forced:!O||!D},{slice:function(Q,V){var Y=y(this),ge=p(Y.length),$=f(Q,ge),W=f(V===void 0?ge:V,ge),se,X,U;if(c(Y)&&(se=Y.constructor,typeof se=="function"&&(se===Array||c(se.prototype))?se=void 0:l(se)&&(se=se[B],se===null&&(se=void 0)),se===Array||se===void 0))return z.call(Y,$,W);for(X=new(se===void 0?Array:se)(H(W-$,0)),U=0;$<W;$++,U++)$ in Y&&m(X,U,Y[$]);return X.length=U,X}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(vE);var nq=vE.exports;const rq=uy(nq),iq={class:"min-h-full bg-gray-50"},sq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oq={class:"sm:flex sm:items-center"},aq={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},lq={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},uq={class:"mt-6 bg-white shadow rounded-lg p-4"},cq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},hq=["value"],fq={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},dq={key:1,class:"mt-6 pb-4"},pq={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},gq={key:1,class:"md:flex md:space-x-4 md:overflow-x-auto gap-4 grid grid-cols-1"},mq={class:"bg-white rounded-lg shadow overflow-hidden"},vq={class:"flex items-center"},yq={class:"flex items-center"},bq={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},_q={class:"p-2"},wq={class:"min-h-[100px] draggable-container"},xq={class:"note-container"},Lq={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},Cq={class:"flex items-center"},Sq={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Eq={class:"text-sm font-medium text-gray-900 truncate"},Pq={class:"px-3 py-2"},kq={class:"text-sm text-gray-500 line-clamp-2"},Mq={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex items-center space-x-2"},Aq={class:"text-xs text-gray-500"},Tq={key:0,class:"text-xs text-gray-700"},Oq={class:"flex space-x-1 ml-auto"},Dq={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},Iq={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},Nq=["onClick"],Bq=["onClick"],Rq=["onClick"],Fq=["onClick"],jq={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},zq={class:"flex items-center justify-center min-h-screen w-full"},Uq={class:"relative bg-white w-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden mx-auto my-auto"},$q={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},Vq=_s({__name:"NotesView",setup(t){const e=kt([]),n=ly(),r=ul(),i=yh(),s=po(),o=kt(!0),a=kt(!1),l=kt(!1),c=kt(null),f=kt(null),p=kt("info"),y=kt(window.innerWidth<768),m=()=>{y.value=window.innerWidth<768},C=rr(()=>i.getSortedColumns),S=hu({search:"",date:"",accessLevel:""}),T=rr(()=>{let fe=i.getAccessibleNotes;if(S.search){const me=S.search.toLowerCase();fe=fe.filter(Oe=>Oe.title.toLowerCase().includes(me)||Oe.description.toLowerCase().includes(me))}if(S.accessLevel&&(fe=fe.filter(me=>me.accessLevel===S.accessLevel)),S.date){const me=new Date;me.setHours(0,0,0,0);const Oe=new Date(me);Oe.setDate(me.getDate()-me.getDay());const Z=new Date(me.getFullYear(),me.getMonth(),1);fe=fe.filter(ae=>{const ce=yz(ae.createdAt);return ce?S.date==="today"?ce>=me:S.date==="week"?ce>=Oe:S.date==="month"?ce>=Z:!0:!1})}return fe}),O=rr(()=>fe=>T.value.filter(me=>me.columnId===fe));function D(fe){if(fe==null)return"Non défini";switch(fe){case Zr.PRIVATE:return"Privé";case Zr.COMPANY:return"Entreprise";case Zr.EMPLOYEE:return"Salariés";case Zr.VISITOR:return"Visiteurs";default:return"Non défini"}}function B(fe){if(fe==null)return"#9CA3AF";switch(fe){case Zr.PRIVATE:return"#9CA3AF";case Zr.COMPANY:return"#EF4444";case Zr.EMPLOYEE:return"#F59E0B";case Zr.VISITOR:return"#10B981";default:return"#6B7280"}}Zs(()=>{z().catch(fe=>{console.error("[NotesView] Erreur lors du chargement des données:",fe),r.error("Erreur lors du chargement des données")}),document.addEventListener("click",ie),window.addEventListener("resize",m)});async function z(){var fe;try{if(o.value=!0,await i.loadColumns(),s.isAdmin)try{const pe=await ha.getEntreprises();e.value=pe.data}catch(pe){console.error("[NotesView][loadInitialData] Erreur chargement entreprises:",pe)}const me={};!s.isAdmin&&((fe=s.user)!=null&&fe.enterprise_id)&&(me.enterprise_id=s.user.enterprise_id);const Oe=await Yo.getNotes(me);Oe.data.length>0?Oe.data.forEach((pe,Le)=>{}):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const Z=i.columns.map(pe=>pe.id),ae=Oe.data.filter(pe=>{const Le=(pe.column||pe.column_id||"").toString();return Le===""||!Z.includes(Le)});if(ae.length>0){console.warn(`[NotesView][loadInitialData] ${ae.length} notes avec des colonnes invalides:`,ae);for(const pe of ae)try{await Yo.updateNote(pe.id,{column:"2"})}catch(Le){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${pe.id} à la colonne À faire:`,Le)}}const ce=Oe.data.map(pe=>{let Le;if(s.isAdmin&&pe.enterprise_id!=null)if(pe.enterprise_name)Le=pe.enterprise_name;else{const Pe=e.value.find(Ue=>Ue.id===pe.enterprise_id);Le=Pe?Ds(Pe):void 0}return{id:pe.id,title:pe.title,description:pe.description,location:pe.location,columnId:(pe.column||pe.column_id||"2").toString(),access_level:pe.access_level,style:pe.style||{},comments:pe.comments||[],photos:pe.photos||[],order:pe.order||0,createdAt:pe.created_at,updatedAt:pe.updated_at,enterprise_id:pe.enterprise_id,enterprise_name:Le}});i.notes.length=0,ce.forEach(pe=>{i.addNote(pe)});for(const pe of i.columns){const Le=i.getNotesByColumn(pe.id);Le.length>0&&Le.forEach(Pe=>{})}}catch(me){console.error("[NotesView][loadInitialData] Erreur:",me),r.error("Erreur lors du chargement des données")}finally{o.value=!1}}function H(){n.push({path:"/",query:{tool:"Note"}})}async function J(fe){if(!fe.location){r.warning("Cette note n'est pas géolocalisée");return}try{const Z=(await Yo.getNote(fe.id)).data.plan;n.push({path:"/",query:{lat:Array.isArray(fe.location)?fe.location[0].toString():fe.location.coordinates[1].toString(),lng:Array.isArray(fe.location)?fe.location[1].toString():fe.location.coordinates[0].toString(),noteId:fe.id.toString(),planId:Z?Z.toString():void 0}})}catch(me){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",me),r.error("Erreur lors de l'ouverture de la note sur la carte")}}function Q(fe){if(!fe.location){r.warning("Cette note n'est pas géolocalisée");return}su(()=>Promise.resolve().then(()=>Qz),void 0).then(me=>{su(()=>Promise.resolve().then(()=>ZS),void 0).then(Oe=>{const Z=me.extractLatLng(fe.location);if(!Z){r.warning("Coordonnées de la note invalides");return}Oe.openInGoogleMaps(Z.lat,Z.lng,"directions",fe.title)})})}function V(fe){f.value=JSON.parse(JSON.stringify(fe)),p.value="info",l.value=!0}async function Y(fe){var Oe,Z;let me=fe.enterprise_id;if(me==null&&(s.isAdmin?me=null:s.isEntreprise&&s.user?me=s.user.id:s.isSalarie&&((Oe=s.user)!=null&&Oe.enterprise_id)?me=s.user.enterprise_id:s.isVisiteur&&s.user?me=s.user.enterprise_id??null:!s.isAdmin&&((Z=s.user)!=null&&Z.enterprise_id)&&(me=s.user.enterprise_id),me!==null&&fe.id&&i.updateNote(fe.id,{enterprise_id:me})),me!==null&&fe.id){const ae=i.notes.findIndex(ce=>ce.id===fe.id);if(ae!==-1&&!fe.enterprise_name){const ce=e.value.find(pe=>pe.id===me);ce&&(i.notes[ae].enterprise_name=Ds(ce))}}}function ge(fe){c.value=fe,a.value=!0}async function $(){if(c.value)try{try{await Yo.deleteNote(c.value.id)}catch(fe){if(!(fe.response&&fe.response.status===404))throw fe}i.removeNote(c.value.id),r.success("Note supprimée avec succès")}catch(fe){console.error("Erreur lors de la suppression de la note:",fe),r.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function W(fe,me){try{if(fe.added){const{element:Oe}=fe.added,Z=typeof Oe=="object"&&Oe.id?Oe.id:null;if(!Z)throw console.error("[NotesView][onDragChange] ID de note invalide:",Oe),new Error("ID de note invalide");i.moveNote(Z,me);const ce=O.value(me).map(Le=>Le.id);i.reorderNotes(me,ce);const pe=i.getColumnById(me);r.success(`Note déplacée vers ${(pe==null?void 0:pe.title)||"une autre colonne"}`),await se(Z,{columnId:me})}if(fe.moved){const Oe=O.value(me),Z=Oe.map(ae=>ae.id);i.reorderNotes(me,Z),r.success("Ordre des notes mis à jour");for(const[ae,ce]of Oe.entries())await se(ce.id,{order:ae})}}catch(Oe){console.error("[NotesView][onDragChange] Erreur:",Oe),r.error("Une erreur est survenue lors du déplacement de la note")}}async function se(fe,me){try{const Oe=i.notes.find(ce=>ce.id===fe);if(!Oe){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",fe);return}const Z={...me};if(me.columnId){const ce=i.getColumnById(me.columnId);ce?(Z.column=ce.id,delete Z.columnId,delete Z.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${me.columnId}`)}const ae={...Oe,...Z,updatedAt:new Date().toISOString()};await Yo.updateNote(fe,ae)}catch(Oe){throw console.error("[NotesView][updateNoteInBackend] Erreur:",Oe),Oe}}function X(){var me;let fe=null;s.isAdmin?fe=null:s.isEntreprise&&s.user?fe=s.user.id:s.isSalarie&&((me=s.user)!=null&&me.enterprise_id)?fe=s.user.enterprise_id:s.isVisiteur&&s.user&&(fe=s.user.enterprise_id??null),f.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:i.getDefaultColumn.id,accessLevel:Zr.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:fe},l.value=!0,p.value="info"}const U=kt(null),R=kt(!1);function ee(){R.value=!R.value}function ie(fe){U.value&&!U.value.contains(fe.target)&&(R.value=!1)}return Zs(()=>{document.addEventListener("click",ie),window.addEventListener("resize",m)}),ff(()=>{document.removeEventListener("click",ie),window.removeEventListener("resize",m)}),(fe,me)=>{var Oe,Z;return Ae(),Fe("div",iq,[P("div",sq,[P("div",oq,[me[6]||(me[6]=P("div",{class:"sm:flex-auto"},[P("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),P("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),P("div",aq,[P("div",{class:"relative",ref_key:"dropdownRef",ref:U},[P("button",{onClick:ee,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},me[5]||(me[5]=[Rr(" Créer "),P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),R.value?(Ae(),Fe("div",lq,[P("div",{class:"py-1"},[P("button",{onClick:X,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),P("button",{onClick:H,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Xt("",!0)],512)])]),P("div",uq,[P("div",cq,[P("div",null,[me[7]||(me[7]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),jn(P("input",{type:"text",id:"search","onUpdate:modelValue":me[0]||(me[0]=ae=>S.search=ae),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[fi,S.search]])]),P("div",null,[me[9]||(me[9]=P("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),jn(P("select",{id:"date","onUpdate:modelValue":me[1]||(me[1]=ae=>S.date=ae),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},me[8]||(me[8]=[P("option",{value:""},"Toutes les dates",-1),P("option",{value:"today"},"Aujourd'hui",-1),P("option",{value:"week"},"Cette semaine",-1),P("option",{value:"month"},"Ce mois",-1)]),512),[[os,S.date]])]),P("div",null,[me[11]||(me[11]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),jn(P("select",{id:"accessLevel","onUpdate:modelValue":me[2]||(me[2]=ae=>S.accessLevel=ae),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[me[10]||(me[10]=P("option",{value:""},"Tous les niveaux",-1)),(Ae(!0),Fe(vn,null,nr(ln(gv),ae=>(Ae(),Fe("option",{key:ae.id,value:ae.id},jt(ae.title),9,hq))),128))],512),[[os,S.accessLevel]])])])]),o.value?(Ae(),Fe("div",fq,me[12]||(me[12]=[P("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),P("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ae(),Fe("div",dq,[T.value.length===0?(Ae(),Fe("div",pq,me[13]||(me[13]=[P("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):Xt("",!0),T.value.length>0?(Ae(),Fe("div",gq,[(Ae(!0),Fe(vn,null,nr(C.value,ae=>(Ae(),Fe("div",{key:ae.id,class:"column-wrapper md:w-80 md:flex-shrink-0 mb-4 md:mb-0"},[P("div",mq,[P("div",{class:"p-3 flex items-center justify-between no-select",style:Fl({backgroundColor:ae.color+"20",borderBottom:"2px solid "+ae.color})},[P("div",vq,[P("h3",{class:"text-sm font-semibold",style:Fl({color:ae.color})},jt(ae.title),5)]),P("div",yq,[P("span",bq,jt(O.value(ae.id).length),1)])],4),P("div",_q,[P("div",wq,[Kr(ln(rq),{list:O.value(ae.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:y.value?null:".note-drag-handle",onChange:ce=>W(ce,ae.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:y.value},{item:Nl(({element:ce})=>[P("div",xq,[P("div",Lq,[P("div",{class:yi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!y.value,"no-select":!0}])},[P("div",Cq,[y.value?Xt("",!0):(Ae(),Fe("svg",Sq,me[14]||(me[14]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),P("h4",Eq,jt(ce.title),1)]),P("div",null,[P("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Fl({backgroundColor:B(ce.accessLevel)+"20",color:B(ce.accessLevel)})},jt(D(ce.accessLevel)||"Non défini"),5)])],2),P("div",Pq,[P("p",kq,jt(ce.description||"Aucune description"),1)]),P("div",Mq,[P("span",Aq,jt(ce.updatedAt?ln(zf)(ce.updatedAt):ce.createdAt?ln(zf)(ce.createdAt):"Date non définie"),1),ln(s).isAdmin?(Ae(),Fe("span",Tq,jt(ce.enterprise_name||"Non assignée"),1)):Xt("",!0),P("div",Oq,[ce.location?(Ae(),Fe("span",Dq,me[15]||(me[15]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ae(),Fe("span",Iq,me[16]||(me[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),ce.location?(Ae(),Fe(vn,{key:2},[P("button",{onClick:pe=>Q(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},me[17]||(me[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,Nq),P("button",{onClick:pe=>J(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},me[18]||(me[18]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,Bq)],64)):Xt("",!0),P("button",{onClick:pe=>V(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},me[19]||(me[19]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Rq),P("button",{onClick:pe=>ge(ce),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},me[20]||(me[20]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Fq)])])])])]),"empty-content":Nl(()=>me[21]||(me[21]=[P("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):Xt("",!0)]))]),a.value?(Ae(),Fe("div",jq,[P("div",zq,[me[23]||(me[23]=P("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),P("div",Uq,[me[22]||(me[22]=uu('<div class="p-4 md:p-6" data-v-0467168e><div class="flex items-start" data-v-0467168e><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-0467168e><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-0467168e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-0467168e></path></svg></div><div class="ml-4 flex-1" data-v-0467168e><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-0467168e> Supprimer la note </h3><div class="mt-2" data-v-0467168e><p class="text-sm text-gray-500" data-v-0467168e> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),P("div",$q,[P("button",{onClick:$,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),P("button",{onClick:me[3]||(me[3]=ae=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Xt("",!0),l.value?(Ae(),Lo(WS,{key:1,note:f.value,"is-new-note":!((Oe=f.value)!=null&&Oe.id),location:(Z=f.value)==null?void 0:Z.location,onClose:me[4]||(me[4]=ae=>l.value=!1),onSave:Y},null,8,["note","is-new-note","location"])):Xt("",!0)])}}}),Hq=Vc(Vq,[["__scopeId","data-v-0467168e"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function fm(t){return t+.5|0}const Zh=(t,e,n)=>Math.max(Math.min(t,n),e);function tg(t){return Zh(fm(t*2.55),0,255)}function tf(t){return Zh(fm(t*255),0,255)}function hh(t){return Zh(fm(t/2.55)/100,0,1)}function h5(t){return Zh(fm(t*100),0,100)}const ku={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},J2=[..."0123456789ABCDEF"],Wq=t=>J2[t&15],Gq=t=>J2[(t&240)>>4]+J2[t&15],a0=t=>(t&240)>>4===(t&15),qq=t=>a0(t.r)&&a0(t.g)&&a0(t.b)&&a0(t.a);function Yq(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ku[t[1]]*17,g:255&ku[t[2]]*17,b:255&ku[t[3]]*17,a:e===5?ku[t[4]]*17:255}:(e===7||e===9)&&(n={r:ku[t[1]]<<4|ku[t[2]],g:ku[t[3]]<<4|ku[t[4]],b:ku[t[5]]<<4|ku[t[6]],a:e===9?ku[t[7]]<<4|ku[t[8]]:255})),n}const Zq=(t,e)=>t<255?e(t):"";function Kq(t){var e=qq(t)?Wq:Gq;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Zq(t.a,e):void 0}const Xq=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ME(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Jq(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Qq(t,e,n){const r=ME(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function eY(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function g_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,f;return s!==o&&(f=s-o,c=a>.5?f/(2-s-o):f/(s+o),l=eY(n,r,i,f,s),l=l*60+.5),[l|0,c||0,a]}function m_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(tf)}function v_(t,e,n){return m_(ME,t,e,n)}function tY(t,e,n){return m_(Qq,t,e,n)}function nY(t,e,n){return m_(Jq,t,e,n)}function AE(t){return(t%360+360)%360}function rY(t){const e=Xq.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?tg(+e[5]):tf(+e[5]));const i=AE(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=tY(i,s,o):e[1]==="hsv"?r=nY(i,s,o):r=v_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function iY(t,e){var n=g_(t);n[0]=AE(n[0]+e),n=v_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function sY(t){if(!t)return;const e=g_(t),n=e[0],r=h5(e[1]),i=h5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${hh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const f5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},d5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oY(){const t={},e=Object.keys(d5),n=Object.keys(f5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,f5[s]);s=parseInt(d5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let l0;function aY(t){l0||(l0=oY(),l0.transparent=[0,0,0,0]);const e=l0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const lY=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function uY(t){const e=lY.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?tg(o):Zh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?tg(r):Zh(r,0,255)),i=255&(e[4]?tg(i):Zh(i,0,255)),s=255&(e[6]?tg(s):Zh(s,0,255)),{r,g:i,b:s,a:n}}}function cY(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${hh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const z1=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Dd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function hY(t,e,n){const r=Dd(hh(t.r)),i=Dd(hh(t.g)),s=Dd(hh(t.b));return{r:tf(z1(r+n*(Dd(hh(e.r))-r))),g:tf(z1(i+n*(Dd(hh(e.g))-i))),b:tf(z1(s+n*(Dd(hh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function u0(t,e,n){if(t){let r=g_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=v_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function TE(t,e){return t&&Object.assign(e||{},t)}function p5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tf(t[3]))):(e=TE(t,{r:0,g:0,b:0,a:1}),e.a=tf(e.a)),e}function fY(t){return t.charAt(0)==="r"?uY(t):rY(t)}class Zg{constructor(e){if(e instanceof Zg)return e;const n=typeof e;let r;n==="object"?r=p5(e):n==="string"&&(r=Yq(e)||aY(e)||fY(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=TE(this._rgb);return e&&(e.a=hh(e.a)),e}set rgb(e){this._rgb=p5(e)}rgbString(){return this._valid?cY(this._rgb):void 0}hexString(){return this._valid?Kq(this._rgb):void 0}hslString(){return this._valid?sY(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=hY(this._rgb,e._rgb,n)),this}clone(){return new Zg(this.rgb)}alpha(e){return this._rgb.a=tf(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=fm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return u0(this._rgb,2,e),this}darken(e){return u0(this._rgb,2,-e),this}saturate(e){return u0(this._rgb,1,e),this}desaturate(e){return u0(this._rgb,1,-e),this}rotate(e){return iY(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function ah(){}const dY=(()=>{let t=0;return()=>t++})();function bi(t){return t===null||typeof t>"u"}function bs(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ai(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function qs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ru(t,e){return qs(t)?t:e}function zr(t,e){return typeof t>"u"?e:t}const pY=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,OE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function es(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ii(t,e,n,r){let i,s,o;if(bs(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(ai(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Cv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Sv(t){if(bs(t))return t.map(Sv);if(ai(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Sv(t[n[i]]);return e}return t}function DE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function gY(t,e,n,r){if(!DE(t))return;const i=e[t],s=n[t];ai(i)&&ai(s)?Kg(i,s,r):e[t]=Sv(s)}function Kg(t,e,n){const r=bs(e)?e:[e],i=r.length;if(!ai(t))return t;n=n||{};const s=n.merger||gY;let o;for(let a=0;a<i;++a){if(o=r[a],!ai(o))continue;const l=Object.keys(o);for(let c=0,f=l.length;c<f;++c)s(l[c],t,o,n)}return t}function Sg(t,e){return Kg(t,e,{merger:mY})}function mY(t,e,n){if(!DE(t))return;const r=e[t],i=n[t];ai(r)&&ai(i)?Sg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sv(i))}const g5={"":t=>t,x:t=>t.x,y:t=>t.y};function vY(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function yY(t){const e=vY(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function lf(t,e){return(g5[e]||(g5[e]=yY(e)))(t)}function y_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Xg=t=>typeof t<"u",uf=t=>typeof t=="function",m5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function bY(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ls=Math.PI,as=2*ls,_Y=as+ls,Ev=Number.POSITIVE_INFINITY,wY=ls/180,co=ls/2,Mf=ls/4,v5=ls*2/3,Kh=Math.log10,jc=Math.sign;function Eg(t,e,n){return Math.abs(t-e)<n}function y5(t){const e=Math.round(t);t=Eg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Kh(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function xY(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function cp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function LY(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function IE(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ic(t){return t*(ls/180)}function b_(t){return t*(180/ls)}function b5(t){if(!qs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function NE(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*ls&&(s+=as),{angle:s,distance:i}}function Q2(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function CY(t,e){return(t-e+_Y)%as-ls}function iu(t){return(t%as+as)%as}function Jg(t,e,n,r){const i=iu(t),s=iu(e),o=iu(n),a=iu(s-i),l=iu(o-i),c=iu(i-s),f=iu(i-o);return i===s||i===o||r&&s===o||a>l&&c<f}function Ko(t,e,n){return Math.max(e,Math.min(n,t))}function SY(t){return Ko(t,-32768,32767)}function gh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function __(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const mh=(t,e,n,r)=>__(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),EY=(t,e,n)=>__(t,n,r=>t[r][e]>=n);function PY(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const BE=["push","pop","shift","splice","unshift"];function kY(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),BE.forEach(n=>{const r="_onData"+y_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function _5(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(BE.forEach(s=>{delete t[s]}),delete t._chartjs)}function RE(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const FE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function jE(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,FE.call(window,()=>{r=!1,t.apply(e,n)}))}}function MY(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const w_=t=>t==="start"?"left":t==="end"?"right":"center",Da=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,AY=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function zE(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:f,minDefined:p,maxDefined:y}=o.getUserBounds();p&&(i=Ko(Math.min(mh(a,l,c).lo,n?r:mh(e,l,o.getPixelForValue(c)).lo),0,r-1)),y?s=Ko(Math.max(mh(a,o.axis,f,!0).hi+1,n?0:mh(e,l,o.getPixelForValue(f),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function UE(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const c0=t=>t===0||t===1,w5=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*as/n)),x5=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*as/n)+1,Pg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*co)+1,easeOutSine:t=>Math.sin(t*co),easeInOutSine:t=>-.5*(Math.cos(ls*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>c0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>c0(t)?t:w5(t,.075,.3),easeOutElastic:t=>c0(t)?t:x5(t,.075,.3),easeInOutElastic(t){return c0(t)?t:t<.5?.5*w5(t*2,.1125,.45):.5+.5*x5(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Pg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Pg.easeInBounce(t*2)*.5:Pg.easeOutBounce(t*2-1)*.5+.5};function x_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function L5(t){return x_(t)?t:new Zg(t)}function U1(t){return x_(t)?t:new Zg(t).saturate(.5).darken(.1).hexString()}const TY=["x","y","borderWidth","radius","tension"],OY=["color","borderColor","backgroundColor"];function DY(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:OY},numbers:{type:"number",properties:TY}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function IY(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const C5=new Map;function NY(t,e){e=e||{};const n=t+JSON.stringify(e);let r=C5.get(n);return r||(r=new Intl.NumberFormat(t,e),C5.set(n,r)),r}function dm(t,e,n){return NY(e,n).format(t)}const $E={values(t){return bs(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=BY(t,n)}const o=Kh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),dm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Kh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?$E.numeric.call(this,t,e,n):""}};function BY(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var gy={formatters:$E};function RY(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ed=Object.create(null),eb=Object.create(null);function kg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function $1(t,e,n){return typeof e=="string"?Kg(kg(t,e),n):Kg(kg(t,""),e)}class FY{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>U1(i.backgroundColor),this.hoverBorderColor=(r,i)=>U1(i.borderColor),this.hoverColor=(r,i)=>U1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return $1(this,e,n)}get(e){return kg(this,e)}describe(e,n){return $1(eb,e,n)}override(e,n){return $1(ed,e,n)}route(e,n,r,i){const s=kg(this,e),o=kg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ai(l)?Object.assign({},c,l):zr(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ys=new FY({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[DY,IY,RY]);function jY(t){return!t||bi(t.size)||bi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Pv(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function zY(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,f,p,y;for(l=0;l<a;l++)if(p=n[l],p!=null&&!bs(p))o=Pv(t,i,s,o,p);else if(bs(p))for(c=0,f=p.length;c<f;c++)y=p[c],y!=null&&!bs(y)&&(o=Pv(t,i,s,o,y));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Af(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function S5(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function tb(t,e,n,r){VE(t,e,n,r,null)}function VE(t,e,n,r,i){let s,o,a,l,c,f,p,y;const m=e.pointStyle,C=e.rotation,S=e.radius;let T=(C||0)*wY;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,S,0,0,as):t.arc(n,r,S,0,as),t.closePath();break;case"triangle":f=i?i/2:S,t.moveTo(n+Math.sin(T)*f,r-Math.cos(T)*S),T+=v5,t.lineTo(n+Math.sin(T)*f,r-Math.cos(T)*S),T+=v5,t.lineTo(n+Math.sin(T)*f,r-Math.cos(T)*S),t.closePath();break;case"rectRounded":c=S*.516,l=S-c,o=Math.cos(T+Mf)*l,p=Math.cos(T+Mf)*(i?i/2-c:l),a=Math.sin(T+Mf)*l,y=Math.sin(T+Mf)*(i?i/2-c:l),t.arc(n-p,r-a,c,T-ls,T-co),t.arc(n+y,r-o,c,T-co,T),t.arc(n+p,r+a,c,T,T+co),t.arc(n-y,r+o,c,T+co,T+ls),t.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*S,f=i?i/2:l,t.rect(n-f,r-l,2*f,2*l);break}T+=Mf;case"rectRot":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+y,r-o),t.lineTo(n+p,r+a),t.lineTo(n-y,r+o),t.closePath();break;case"crossRot":T+=Mf;case"cross":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o);break;case"star":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o),T+=Mf,p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o);break;case"line":o=i?i/2:Math.cos(T)*S,a=Math.sin(T)*S,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(i?i/2:S),r+Math.sin(T)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function vh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function my(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function vy(t){t.restore()}function UY(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function $Y(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function VY(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function HY(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,f=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,f),t.lineTo(a,f),t.stroke()}}function WY(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function td(t,e,n,r,i,s={}){const o=bs(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,VY(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&WY(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),bi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),HY(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Qg(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ls,ls,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ls,co,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,co,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-co,!0),t.lineTo(n+o.topLeft,r)}const GY=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qY=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YY(t,e){const n=(""+t).match(GY);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const ZY=t=>+t||0;function L_(t,e){const n={},r=ai(e),i=r?Object.keys(e):e,s=ai(t)?r?o=>zr(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=ZY(s(o));return n}function HE(t){return L_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Zf(t){return L_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ua(t){const e=HE(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Do(t,e){t=t||{},e=e||Ys.font;let n=zr(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=zr(t.style,e.style);r&&!(""+r).match(qY)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:zr(t.family,e.family),lineHeight:YY(zr(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:zr(t.weight,e.weight),string:""};return i.string=jY(i),i}function ng(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function KY(t,e,n){const{min:r,max:i}=t,s=OE(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function df(t,e){return Object.assign(Object.create(t),e)}function C_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=YE("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>C_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return GE(a,l,()=>iZ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return P5(a).includes(l)},ownKeys(a){return P5(a)},set(a,l,c){const f=a._storage||(a._storage=i());return a[l]=f[l]=c,delete a._keys,!0}})}function hp(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:WE(t,r),setContext:s=>hp(t,s,n,r),override:s=>hp(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return GE(s,o,()=>JY(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function WE(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:uf(n)?n:()=>n,isIndexable:uf(r)?r:()=>r}}const XY=(t,e)=>t?t+y_(e):e,S_=(t,e)=>ai(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function GE(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function JY(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return uf(a)&&o.isScriptable(e)&&(a=QY(e,a,t,n)),bs(a)&&a.length&&(a=eZ(e,a,t,o.isIndexable)),S_(e,a)&&(a=hp(a,i,s&&s[e],o)),a}function QY(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),S_(t,l)&&(l=E_(i._scopes,i,t,l)),l}function eZ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ai(e[0])){const l=e,c=i._scopes.filter(f=>f!==l);e=[];for(const f of l){const p=E_(c,i,t,f);e.push(hp(p,s,o&&o[t],a))}}return e}function qE(t,e,n){return uf(t)?t(e,n):t}const tZ=(t,e)=>t===!0?e:typeof t=="string"?lf(e,t):void 0;function nZ(t,e,n,r,i){for(const s of e){const o=tZ(n,s);if(o){t.add(o);const a=qE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function E_(t,e,n,r){const i=e._rootScopes,s=qE(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=E5(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=E5(a,o,s,l,r),l===null)?!1:C_(Array.from(a),[""],i,s,()=>rZ(e,n,r))}function E5(t,e,n,r,i){for(;n;)n=nZ(t,e,n,r,i);return n}function rZ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return bs(i)&&ai(n)?n:i||{}}function iZ(t,e,n,r){let i;for(const s of e)if(i=YE(XY(s,t),n),typeof i<"u")return S_(t,i)?E_(n,r,t,i):i}function YE(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function P5(t){let e=t._keys;return e||(e=t._keys=sZ(t._scopes)),e}function sZ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function ZE(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,f;for(a=0,l=r;a<l;++a)c=a+n,f=e[c],o[a]={r:i.parse(lf(f,s),c)};return o}const oZ=Number.EPSILON||1e-14,fp=(t,e)=>e<t.length&&!t[e].skip&&t[e],KE=t=>t==="x"?"y":"x";function aZ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Q2(s,i),l=Q2(o,s);let c=a/(a+l),f=l/(a+l);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const p=r*c,y=r*f;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+y*(o.x-i.x),y:s.y+y*(o.y-i.y)}}}function lZ(t,e,n){const r=t.length;let i,s,o,a,l,c=fp(t,0);for(let f=0;f<r-1;++f)if(l=c,c=fp(t,f+1),!(!l||!c)){if(Eg(e[f],0,oZ)){n[f]=n[f+1]=0;continue}i=n[f]/e[f],s=n[f+1]/e[f],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[f]=i*o*e[f],n[f+1]=s*o*e[f])}}function uZ(t,e,n="x"){const r=KE(n),i=t.length;let s,o,a,l=fp(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=fp(t,c+1),!a)continue;const f=a[n],p=a[r];o&&(s=(f-o[n])/3,a[`cp1${n}`]=f-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-f)/3,a[`cp2${n}`]=f+s,a[`cp2${r}`]=p+s*e[c])}}function cZ(t,e="x"){const n=KE(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=fp(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=fp(t,o+1),!!l){if(c){const f=c[e]-l[e];i[o]=f!==0?(c[n]-l[n])/f:0}s[o]=a?c?jc(i[o-1])!==jc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}lZ(t,i,s),uZ(t,s,e)}function h0(t,e,n){return Math.max(Math.min(t,n),e)}function hZ(t,e){let n,r,i,s,o,a=vh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&vh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=h0(i.cp1x,e.left,e.right),i.cp1y=h0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=h0(i.cp2x,e.left,e.right),i.cp2y=h0(i.cp2y,e.top,e.bottom)))}function fZ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")cZ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=aZ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&hZ(t,n)}function P_(){return typeof window<"u"&&typeof document<"u"}function k_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const yy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function dZ(t,e){return yy(t).getPropertyValue(e)}const pZ=["top","right","bottom","left"];function Kf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=pZ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const gZ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function mZ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(gZ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=yy(n),s=i.boxSizing==="border-box",o=Kf(i,"padding"),a=Kf(i,"border","width"),{x:l,y:c,box:f}=mZ(t,n),p=o.left+(f&&a.left),y=o.top+(f&&a.top);let{width:m,height:C}=e;return s&&(m-=o.width+a.width,C-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-y)/C*n.height/r)}}function vZ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=k_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=yy(s),l=Kf(a,"border","width"),c=Kf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=kv(a.maxWidth,s,"clientWidth"),i=kv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ev,maxHeight:i||Ev}}const f0=t=>Math.round(t*10)/10;function yZ(t,e,n,r){const i=yy(t),s=Kf(i,"margin"),o=kv(i.maxWidth,t,"clientWidth")||Ev,a=kv(i.maxHeight,t,"clientHeight")||Ev,l=vZ(t,e,n);let{width:c,height:f}=l;if(i.boxSizing==="content-box"){const y=Kf(i,"border","width"),m=Kf(i,"padding");c-=m.width+y.width,f-=m.height+y.height}return c=Math.max(0,c-s.width),f=Math.max(0,r?c/r:f-s.height),c=f0(Math.min(c,o,l.maxWidth)),f=f0(Math.min(f,a,l.maxHeight)),c&&!f&&(f=f0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&f>l.height&&(f=l.height,c=f0(Math.floor(f*r))),{width:c,height:f}}function k5(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const bZ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};P_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function M5(t,e){const n=dZ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Bf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function _Z(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function wZ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Bf(t,i,n),a=Bf(i,s,n),l=Bf(s,e,n),c=Bf(o,a,n),f=Bf(a,l,n);return Bf(c,f,n)}const xZ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},LZ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function np(t,e,n){return t?xZ(e,n):LZ()}function XE(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function JE(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function QE(t){return t==="angle"?{between:Jg,compare:CY,normalize:iu}:{between:gh,compare:(e,n)=>e-n,normalize:e=>e}}function A5({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function CZ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=QE(r),l=e.length;let{start:c,end:f,loop:p}=t,y,m;if(p){for(c+=l,f+=l,y=0,m=l;y<m&&o(a(e[c%l][r]),i,s);++y)c--,f--;c%=l,f%=l}return f<c&&(f+=l),{start:c,end:f,loop:p,style:t.style}}function eP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=QE(r),{start:f,end:p,loop:y,style:m}=CZ(t,e,n),C=[];let S=!1,T=null,O,D,B;const z=()=>l(i,B,O)&&a(i,B)!==0,H=()=>a(s,O)===0||l(s,B,O),J=()=>S||z(),Q=()=>!S||H();for(let V=f,Y=f;V<=p;++V)D=e[V%o],!D.skip&&(O=c(D[r]),O!==B&&(S=l(O,i,s),T===null&&J()&&(T=a(O,i)===0?V:Y),T!==null&&Q()&&(C.push(A5({start:T,end:V,loop:y,count:o,style:m})),T=null),Y=V,B=O));return T!==null&&C.push(A5({start:T,end:p,loop:y,count:o,style:m})),C}function tP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=eP(r[i],t.points,e);s.length&&n.push(...s)}return n}function SZ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function EZ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function PZ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=SZ(n,i,s,r);if(r===!0)return T5(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return T5(t,EZ(n,o,l,c),n,e)}function T5(t,e,n,r){return!r||!r.setContext||!n?e:kZ(t,e,n,r)}function kZ(t,e,n,r){const i=t._chart.getContext(),s=O5(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let f=s,p=e[0].start,y=p;function m(C,S,T,O){const D=a?-1:1;if(C!==S){for(C+=l;n[C%l].skip;)C-=D;for(;n[S%l].skip;)S+=D;C%l!==S%l&&(c.push({start:C%l,end:S%l,loop:T,style:O}),f=O,p=S%l)}}for(const C of e){p=a?p:C.start;let S=n[p%l],T;for(y=p+1;y<=C.end;y++){const O=n[y%l];T=O5(r.setContext(df(i,{type:"segment",p0:S,p1:O,p0DataIndex:(y-1)%l,p1DataIndex:y%l,datasetIndex:o}))),MZ(T,f)&&m(p,y-1,C.loop,f),S=O,f=T}p<y-1&&m(p,y-1,C.loop,f)}return c}function O5(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function MZ(t,e){if(!e)return!1;const n=[],r=function(i,s){return x_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class AZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=FE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var lh=new AZ;const D5="transparent",TZ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=L5(t||D5),i=r.valid&&L5(e||D5);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class OZ{constructor(e,n,r,i){const s=n[r];i=ng([e.to,i,s,e.from]);const o=ng([e.from,s,i]);this._active=!0,this._fn=e.fn||TZ[e.type||typeof o],this._easing=Pg[e.easing]||Pg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ng([e.to,n,i,e.from]),this._from=ng([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class nP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ai(e))return;const n=Object.keys(Ys.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ai(s))return;const o={};for(const a of n)o[a]=s[a];(bs(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=IZ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&DZ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const f=n[c];let p=s[c];const y=r.get(c);if(p)if(y&&p.active()){p.update(y,f,a);continue}else p.cancel();if(!y||!y.duration){e[c]=f;continue}s[c]=p=new OZ(y,e,c,f),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return lh.add(this._chart,r),!0}}function DZ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function IZ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function I5(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function NZ(t,e,n){if(n===!1)return!1;const r=I5(t,n),i=I5(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function BZ(t){let e,n,r,i;return ai(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function rP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function N5(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],qs(c)&&(s||e===0||jc(e)===jc(c))&&(e+=c)}return e}}function RZ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function B5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function FZ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function jZ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function zZ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function R5(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function F5(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,f=FZ(s,o,r),p=e.length;let y;for(let m=0;m<p;++m){const C=e[m],{[l]:S,[c]:T}=C,O=C._stacks||(C._stacks={});y=O[c]=zZ(i,f,S),y[a]=T,y._top=R5(y,o,!0,r.type),y._bottom=R5(y,o,!1,r.type);const D=y._visualValues||(y._visualValues={});D[a]=T}}function V1(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function UZ(t,e){return df(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $Z(t,e,n){return df(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function jp(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const H1=t=>t==="reset"||t==="none",j5=(t,e)=>e?t:Object.assign({},t),VZ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rP(n,!0),values:null};class oc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=B5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&jp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,y,m,C)=>p==="x"?y:p==="r"?C:m,s=n.xAxisID=zr(r.xAxisID,V1(e,"x")),o=n.yAxisID=zr(r.yAxisID,V1(e,"y")),a=n.rAxisID=zr(r.rAxisID,V1(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),f=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_5(this._data,this),e._stacked&&jp(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ai(n))this._data=RZ(n);else if(r!==n){if(r){_5(r,this);const i=this._cachedMeta;jp(i),i._parsed=[]}n&&Object.isExtensible(n)&&kY(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=B5(n.vScale,n),n.stack!==r.stack&&(i=!0,jp(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&F5(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],f,p,y;if(this._parsing===!1)r._parsed=i,r._sorted=!0,y=i;else{bs(i[e])?y=this.parseArrayData(r,i,e,n):ai(i[e])?y=this.parseObjectData(r,i,e,n):y=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(f=0;f<n;++f)r._parsed[f+e]=p=y[f],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&F5(this,y)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),f=s===o,p=new Array(i);let y,m,C;for(y=0,m=i;y<m;++y)C=y+r,p[y]={[a]:f||s.parse(c[C],C),[l]:o.parse(n[C],C)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,f,p;for(l=0,c=i;l<c;++l)f=l+r,p=n[f],a[l]={x:s.parse(p[0],f),y:o.parse(p[1],f)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let f,p,y,m;for(f=0,p=i;f<p;++f)y=f+r,m=n[y],c[f]={x:s.parse(lf(m,a),y),y:o.parse(lf(m,l),y)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:rP(i,!0),values:n._stacks[e.axis]._visualValues};return N5(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=N5(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=VZ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=jZ(a);let y,m;function C(){m=i[y];const S=m[a.axis];return!qs(m[e.axis])||f>S||p<S}for(y=0;y<o&&!(!C()&&(this.updateRangeFromParsed(c,e,m,l),s));++y);if(s){for(y=o-1;y>=0;--y)if(!C()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],qs(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=BZ(zr(this.options.clip,NZ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,s,a,l),f=a;f<a+l;++f){const p=i[f];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(f=0;f<o.length;++f)o[f].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=$Z(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=UZ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Xg(r);if(a)return j5(a,l);const c=this.chart.config,f=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],y=c.getOptionScopes(this.getDataset(),f),m=Object.keys(Ys.elements[e]),C=()=>this.getContext(r,i,n),S=c.resolveNamedOptions(y,m,C,p);return S.$shared&&(S.$shared=l,s[o]=Object.freeze(j5(S,l))),S}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,n),y=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(y,this.getContext(e,r,n))}const c=new nP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||H1(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){H1(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!H1(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&jp(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}tt(oc,"defaults",{}),tt(oc,"datasetElementType",null),tt(oc,"dataElementType",null);function HZ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=RE(r.sort((i,s)=>i-s))}return t._cache.$bar}function WZ(t){const e=t.iScale,n=HZ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Xg(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function GZ(t,e,n,r){const i=n.barThickness;let s,o;return bi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function qZ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function YZ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function iP(t,e,n,r){return bs(t)?YZ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function z5(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,f,p,y;for(c=n,f=n+r;c<f;++c)y=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(iP(y,p,s,c));return l}function W1(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function ZZ(t,e,n){return t!==0?jc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function KZ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function XZ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:f}=KZ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=f:(s[U5(f,o,a,l)]=!0,i=c)),s[U5(i,o,a,l)]=!0,t.borderSkipped=s}function U5(t,e,n,r){return r?(t=JZ(t,e,n),t=$5(t,n,e)):t=$5(t,e,n),t}function JZ(t,e,n){return t===e?n:t===n?e:t}function $5(t,e,n){return t==="start"?e:t==="end"?n:t}function QZ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class U0 extends oc{parsePrimitiveData(e,n,r,i){return z5(e,n,r,i)}parseArrayData(e,n,r,i){return z5(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,f=o.axis==="x"?a:l,p=[];let y,m,C,S;for(y=r,m=r+i;y<m;++y)S=n[y],C={},C[s.axis]=s.parse(lf(S,c),y),p.push(iP(lf(S,f),C,o,y));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=W1(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:y}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const C=this.getParsed(m),S=s||bi(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),T=this._calculateBarIndexPixels(m,f),O=(C._stacks||{})[a.axis],D={horizontal:c,base:S.base,enableBorderRadius:!O||W1(C._custom)||o===O._top||o===O._bottom,x:c?S.head:T.center,y:c?T.center:S.head,height:c?T.size:Math.abs(S.size),width:c?Math.abs(S.size):T.size};y&&(D.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const B=D.options||e[m].options;XZ(D,B,O,o),QZ(D,B,f.ratio),this.updateElement(e[m],m,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),f=c&&c[l.vScale.axis];if(bi(f)||isNaN(f))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||WZ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,f=W1(c);let p=l[n.axis],y=0,m=r?this.applyStack(n,l,r):p,C,S;m!==p&&(y=m-p,m=p),f&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&jc(p)!==jc(c.barEnd)&&(y=0),y+=p);const T=!bi(s)&&!f?s:y;let O=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?C=n.getPixelForValue(y+m):C=O,S=C-O,Math.abs(S)<o){S=ZZ(S,n,a)*o,p===a&&(O-=S/2);const D=n.getPixelForDecimal(0),B=n.getPixelForDecimal(1),z=Math.min(D,B),H=Math.max(D,B);O=Math.max(Math.min(O,H),z),C=O+S,r&&!f&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(C)-n.getValueForPixel(O))}if(O===n.getPixelForValue(a)){const D=jc(S)*n.getLineWidthForValue(a)/2;O+=D,S-=D}return{size:S,base:O,head:C,center:C+S/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=zr(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?qZ(e,n,i,c):GZ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=f.start+f.chunk*p+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}tt(U0,"id","bar"),tt(U0,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),tt(U0,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class $0 extends oc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=zr(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=zr(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),f=o.axis,p=a.axis;for(let y=n;y<n+r;y++){const m=e[y],C=!s&&this.getParsed(y),S={},T=S[f]=s?o.getPixelForDecimal(.5):o.getPixelForValue(C[f]),O=S[p]=s?a.getBasePixel():a.getPixelForValue(C[p]);S.skip=isNaN(T)||isNaN(O),c&&(S.options=l||this.resolveDataElementOptions(y,m.active?"active":i),s&&(S.options.radius=0)),this.updateElement(m,y,S,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=zr(r&&r._custom,s),i}}tt($0,"id","bubble"),tt($0,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),tt($0,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function eK(t,e,n){let r=1,i=1,s=0,o=0;if(e<as){const a=t,l=a+e,c=Math.cos(a),f=Math.sin(a),p=Math.cos(l),y=Math.sin(l),m=(B,z,H)=>Jg(B,a,l,!0)?1:Math.max(z,z*n,H,H*n),C=(B,z,H)=>Jg(B,a,l,!0)?-1:Math.min(z,z*n,H,H*n),S=m(0,c,p),T=m(co,f,y),O=C(ls,c,p),D=C(ls+co,f,y);r=(S-O)/2,i=(T-D)/2,s=-(S+O)/2,o=-(T+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Uf extends oc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(ai(r[e])){const{key:l="value"}=this._parsing;s=c=>+lf(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return ic(this.options.rotation-90)}_getCircumference(){return ic(this.options.circumference)}_getRotationExtents(){let e=as,n=-as;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(pY(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:y,ratioY:m,offsetX:C,offsetY:S}=eK(p,f,l),T=(r.width-o)/y,O=(r.height-o)/m,D=Math.max(Math.min(T,O)/2,0),B=OE(this.options.radius,D),z=Math.max(B*l,0),H=(B-z)/this._getVisibleDatasetWeightTotal();this.offsetX=C*B,this.offsetY=S*B,i.total=this.calculateTotal(),this.outerRadius=B-H*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-H*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/as)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,f=(a.left+a.right)/2,p=(a.top+a.bottom)/2,y=s&&c.animateScale,m=y?0:this.innerRadius,C=y?0:this.outerRadius,{sharedOptions:S,includeOptions:T}=this._getSharedOptions(n,i);let O=this._getRotation(),D;for(D=0;D<n;++D)O+=this._circumference(D,s);for(D=n;D<n+r;++D){const B=this._circumference(D,s),z=e[D],H={x:f+this.offsetX,y:p+this.offsetY,startAngle:O,endAngle:O+B,circumference:B,outerRadius:C,innerRadius:m};T&&(H.options=S||this.resolveDataElementOptions(D,z.active?"active":i)),O+=B,this.updateElement(z,D,H,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?as*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=dm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(zr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}tt(Uf,"id","doughnut"),tt(Uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),tt(Uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),tt(Uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class V0 extends oc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=zE(n,i,o);this._drawStart=a,this._drawCount=l,UE(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i),y=o.axis,m=a.axis,{spanGaps:C,segment:S}=this.options,T=cp(C)?C:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||s||i==="none",D=n+r,B=e.length;let z=n>0&&this.getParsed(n-1);for(let H=0;H<B;++H){const J=e[H],Q=O?J:{};if(H<n||H>=D){Q.skip=!0;continue}const V=this.getParsed(H),Y=bi(V[m]),ge=Q[y]=o.getPixelForValue(V[y],H),$=Q[m]=s||Y?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[m],H);Q.skip=isNaN(ge)||isNaN($)||Y,Q.stop=H>0&&Math.abs(V[y]-z[y])>T,S&&(Q.parsed=V,Q.raw=c.data[H]),p&&(Q.options=f||this.resolveDataElementOptions(H,J.active?"active":i)),O||this.updateElement(J,H,Q,i),z=V}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}tt(V0,"id","line"),tt(V0,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),tt(V0,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Mg extends oc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=dm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return ZE.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,f=c.xCenter,p=c.yCenter,y=c.getIndexAngle(0)-.5*ls;let m=y,C;const S=360/this.countVisibleElements();for(C=0;C<n;++C)m+=this._computeAngle(C,i,S);for(C=n;C<n+r;C++){const T=e[C];let O=m,D=m+this._computeAngle(C,i,S),B=o.getDataVisibility(C)?c.getDistanceFromCenterForValue(this.getParsed(C).r):0;m=D,s&&(l.animateScale&&(B=0),l.animateRotate&&(O=D=y));const z={x:f,y:p,innerRadius:0,outerRadius:B,startAngle:O,endAngle:D,options:this.resolveDataElementOptions(C,T.active?"active":i)};this.updateElement(T,C,z,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?ic(this.resolveDataElementOptions(e,n).angle||r):0}}tt(Mg,"id","polarArea"),tt(Mg,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),tt(Mg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class nb extends Uf{}tt(nb,"id","pie"),tt(nb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class H0 extends oc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return ZE.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),f=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:f.x,y=o?s.yCenter:f.y,m={x:p,y,angle:f.angle,skip:isNaN(p)||isNaN(y),options:c};this.updateElement(l,a,m,i)}}}tt(H0,"id","radar"),tt(H0,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),tt(H0,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class W0 extends oc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=zE(n,r,i);if(this._drawStart=s,this._drawCount=o,UE(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,f=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(f),y=this.includeOptions(i,p),m=o.axis,C=a.axis,{spanGaps:S,segment:T}=this.options,O=cp(S)?S:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let B=n>0&&this.getParsed(n-1);for(let z=n;z<n+r;++z){const H=e[z],J=this.getParsed(z),Q=D?H:{},V=bi(J[C]),Y=Q[m]=o.getPixelForValue(J[m],z),ge=Q[C]=s||V?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,J,l):J[C],z);Q.skip=isNaN(Y)||isNaN(ge)||V,Q.stop=z>0&&Math.abs(J[m]-B[m])>O,T&&(Q.parsed=J,Q.raw=c.data[z]),y&&(Q.options=p||this.resolveDataElementOptions(z,H.active?"active":i)),D||this.updateElement(H,z,Q,i),B=J}this.updateSharedOptions(p,i,f)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}tt(W0,"id","scatter"),tt(W0,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),tt(W0,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var tK=Object.freeze({__proto__:null,BarController:U0,BubbleController:$0,DoughnutController:Uf,LineController:V0,PieController:nb,PolarAreaController:Mg,RadarController:H0,ScatterController:W0});function Tf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class M_{constructor(e){tt(this,"options");this.options=e||{}}static override(e){Object.assign(M_.prototype,e)}init(){}formats(){return Tf()}parse(){return Tf()}format(){return Tf()}add(){return Tf()}diff(){return Tf()}startOf(){return Tf()}endOf(){return Tf()}}var sP={_date:M_};function nK(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?EY:mh;if(r){if(i._sharedOptions){const c=s[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const p=l(s,e,n-f),y=l(s,e,n+f);return{lo:p.lo,hi:y.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function by(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:f}=s[a],{lo:p,hi:y}=nK(s[a],e,o,i);for(let m=p;m<=y;++m){const C=f[m];C.skip||r(C,c,m)}}}function rK(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function G1(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||by(t,n,e,function(a,l,c){!i&&!vh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function iK(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:f}=o.getProps(["startAngle","endAngle"],r),{angle:p}=NE(o,{x:e.x,y:e.y});Jg(p,c,f)&&i.push({element:o,datasetIndex:a,index:l})}return by(t,n,e,s),i}function sK(t,e,n,r,i,s){let o=[];const a=rK(n);let l=Number.POSITIVE_INFINITY;function c(f,p,y){const m=f.inRange(e.x,e.y,i);if(r&&!m)return;const C=f.getCenterPoint(i);if(!(!!s||t.isPointInArea(C))&&!m)return;const T=a(e,C);T<l?(o=[{element:f,datasetIndex:p,index:y}],l=T):T===l&&o.push({element:f,datasetIndex:p,index:y})}return by(t,n,e,c),o}function q1(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?iK(t,e,n,i):sK(t,e,n,r,i,s)}function V5(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return by(t,n,e,(l,c,f)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:f}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var oK={modes:{index(t,e,n,r){const i=Nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?G1(t,i,s,r,o):q1(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const f=a[0].index,p=c.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:f})}),l):[]},dataset(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?G1(t,i,s,r,o):q1(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let f=0;f<c.length;++f)a.push({element:c[f],datasetIndex:l,index:f})}return a},point(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return G1(t,i,s,r,o)},nearest(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return q1(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Nf(e,t);return V5(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Nf(e,t);return V5(t,i,"y",n.intersect,r)}}};const oP=["left","top","right","bottom"];function zp(t,e){return t.filter(n=>n.pos===e)}function H5(t,e){return t.filter(n=>oP.indexOf(n.pos)===-1&&n.box.axis===e)}function Up(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function aK(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function lK(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!oP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function uK(t,e){const n=lK(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],f=c&&a.stackWeight/c.weight;a.horizontal?(a.width=f?f*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=f?f*i:l&&e.availableHeight)}return n}function cK(t){const e=aK(t),n=Up(e.filter(c=>c.box.fullSize),!0),r=Up(zp(e,"left"),!0),i=Up(zp(e,"right")),s=Up(zp(e,"top"),!0),o=Up(zp(e,"bottom")),a=H5(e,"x"),l=H5(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:zp(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function W5(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function aP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function hK(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ai(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&aP(o,s.getPadding());const a=Math.max(0,e.outerWidth-W5(o,t,"left","right")),l=Math.max(0,e.outerHeight-W5(o,t,"top","bottom")),c=a!==t.w,f=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function fK(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function dK(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function rg(t,e,n,r){const i=[];let s,o,a,l,c,f;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,dK(a.horizontal,e));const{same:p,other:y}=hK(e,n,a,r);c|=p&&i.length,f=f||y,l.fullSize||i.push(a)}return c&&rg(i,e,n,r)||f}function d0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function G5(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},f=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*f,y=c.size||l.height;Xg(c.start)&&(o=c.start),l.fullSize?d0(l,i.left,o,n.outerWidth-i.right-i.left,y):d0(l,e.left+c.placed,o,p,y),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*f,y=c.size||l.width;Xg(c.start)&&(s=c.start),l.fullSize?d0(l,s,i.top,y,n.outerHeight-i.bottom-i.top):d0(l,s,e.top+c.placed,y,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var za={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ua(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=cK(t.boxes),l=a.vertical,c=a.horizontal;Ii(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const f=l.reduce((S,T)=>T.box.options&&T.box.options.display===!1?S:S+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/f,hBoxMaxHeight:o/2}),y=Object.assign({},i);aP(y,Ua(r));const m=Object.assign({maxPadding:y,w:s,h:o,x:i.left,y:i.top},i),C=uK(l.concat(c),p);rg(a.fullSize,m,p,C),rg(l,m,p,C),rg(c,m,p,C)&&rg(l,m,p,C),fK(m),G5(a.leftAndTop,m,p,C),m.x+=m.w,m.y+=m.h,G5(a.rightAndBottom,m,p,C),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ii(a.chartArea,S=>{const T=S.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class lP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class pK extends lP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const G0="$chartjs",gK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},q5=t=>t===null||t==="";function mK(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[G0]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",q5(i)){const s=M5(t,"width");s!==void 0&&(t.width=s)}if(q5(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=M5(t,"height");s!==void 0&&(t.height=s)}return t}const uP=bZ?{passive:!0}:!1;function vK(t,e,n){t.addEventListener(e,n,uP)}function yK(t,e,n){t.canvas.removeEventListener(e,n,uP)}function bK(t,e){const n=gK[t.type]||t.type,{x:r,y:i}=Nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Mv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function _K(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mv(a.addedNodes,r),o=o&&!Mv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function wK(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mv(a.removedNodes,r),o=o&&!Mv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const em=new Map;let Y5=0;function cP(){const t=window.devicePixelRatio;t!==Y5&&(Y5=t,em.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function xK(t,e){em.size||window.addEventListener("resize",cP),em.set(t,e)}function LK(t){em.delete(t),em.size||window.removeEventListener("resize",cP)}function CK(t,e,n){const r=t.canvas,i=r&&k_(r);if(!i)return;const s=jE((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,f=l.contentRect.height;c===0&&f===0||s(c,f)});return o.observe(i),xK(t,s),o}function Y1(t,e,n){n&&n.disconnect(),e==="resize"&&LK(t)}function SK(t,e,n){const r=t.canvas,i=jE(s=>{t.ctx!==null&&n(bK(s,t))},t);return vK(r,e,i),i}class EK extends lP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(mK(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[G0])return!1;const r=n[G0].initial;["height","width"].forEach(s=>{const o=r[s];bi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[G0],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:_K,detach:wK,resize:CK}[n]||SK;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Y1,detach:Y1,resize:Y1}[n]||yK)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return yZ(e,n,r,i)}isAttached(e){const n=k_(e);return!!(n&&n.isConnected)}}function PK(t){return!P_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?pK:EK}var x0;let Ch=(x0=class{constructor(){tt(this,"x");tt(this,"y");tt(this,"active",!1);tt(this,"options");tt(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return cp(this.x)&&cp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},tt(x0,"defaults",{}),tt(x0,"defaultRoutes"),x0);function kK(t,e){const n=t.options.ticks,r=MK(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?TK(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return OK(e,c,s,o/i),c;const f=AK(s,e,i);if(o>0){let p,y;const m=o>1?Math.round((l-a)/(o-1)):null;for(p0(e,c,f,bi(m)?0:a-m,a),p=0,y=o-1;p<y;p++)p0(e,c,f,s[p],s[p+1]);return p0(e,c,f,l,bi(m)?e.length:l+m),c}return p0(e,c,f),c}function MK(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function AK(t,e,n){const r=DK(t),i=e.length/n;if(!r)return Math.max(i,1);const s=xY(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function TK(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function OK(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function p0(t,e,n,r,i){const s=zr(r,0),o=Math.min(zr(i,t.length),t.length);let a=0,l,c,f;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),f=s;f<0;)a++,f=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===f&&(e.push(t[c]),a++,f=Math.round(s+a*n))}function DK(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const IK=t=>t==="left"?"right":t==="right"?"left":t,Z5=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,K5=(t,e)=>Math.min(e||t,t);function X5(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function NK(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function BK(t,e){Ii(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function $p(t){return t.drawTicks?t.tickLength:0}function J5(t,e){if(!t.display)return 0;const n=Do(t.font,e),r=Ua(t.padding);return(bs(t.text)?t.text.length:1)*n.lineHeight+r.height}function RK(t,e){return df(t,{scale:e,type:"scale"})}function FK(t,e,n){return df(t,{tick:n,index:e,type:"tick"})}function jK(t,e,n){let r=w_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=IK(r)),r}function zK(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:f}=l;let p=0,y,m,C;const S=o-i,T=a-s;if(t.isHorizontal()){if(m=Da(r,s,a),ai(n)){const O=Object.keys(n)[0],D=n[O];C=f[O].getPixelForValue(D)+S-e}else n==="center"?C=(c.bottom+c.top)/2+S-e:C=Z5(t,n,e);y=a-s}else{if(ai(n)){const O=Object.keys(n)[0],D=n[O];m=f[O].getPixelForValue(D)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=Z5(t,n,e);C=Da(r,o,i),p=n==="left"?-co:co}return{titleX:m,titleY:C,maxWidth:y,rotation:p}}class sd extends Ch{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=ru(e,Number.POSITIVE_INFINITY),n=ru(n,Number.NEGATIVE_INFINITY),r=ru(r,Number.POSITIVE_INFINITY),i=ru(i,Number.NEGATIVE_INFINITY),{min:ru(e,r),max:ru(n,i),minDefined:qs(e),maxDefined:qs(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ru(n,ru(r,n)),max:ru(r,ru(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){es(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=KY(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?X5(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){es(this.options.afterUpdate,[this])}beforeSetDimensions(){es(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){es(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),es(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){es(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=es(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){es(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){es(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=K5(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,y=f.highest.height,m=Ko(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-$p(e.grid)-n.padding-J5(e.title,this.chart.options.font),c=Math.sqrt(p*p+y*y),o=b_(Math.min(Math.asin(Ko((f.highest.height+6)/a,-1,1)),Math.asin(Ko(l/c,-1,1))-Math.asin(Ko(y/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){es(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){es(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=J5(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=$p(s)+l):(e.height=this.maxHeight,e.width=$p(s)+l),r.display&&this.ticks.length){const{first:c,last:f,widest:p,highest:y}=this._getLabelSizes(),m=r.padding*2,C=ic(this.labelRotation),S=Math.cos(C),T=Math.sin(C);if(a){const O=r.mirror?0:T*p.width+S*y.height;e.height=Math.min(this.maxHeight,e.height+O+m)}else{const O=r.mirror?0:S*p.width+T*y.height;e.width=Math.min(this.maxWidth,e.width+O+m)}this._calculatePadding(c,f,T,S)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,m=0;l?c?(y=i*e.width,m=r*n.height):(y=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?y=e.width:s!=="inner"&&(y=e.width/2,m=n.width/2),this.paddingLeft=Math.max((y-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let f=n.height/2,p=e.height/2;s==="start"?(f=0,p=e.height):s==="end"&&(f=n.height,p=0),this.paddingTop=f+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){es(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)bi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=X5(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/K5(n,r));let c=0,f=0,p,y,m,C,S,T,O,D,B,z,H;for(p=0;p<n;p+=l){if(C=e[p].label,S=this._resolveTickFontOptions(p),i.font=T=S.string,O=s[T]=s[T]||{data:{},gc:[]},D=S.lineHeight,B=z=0,!bi(C)&&!bs(C))B=Pv(i,O.data,O.gc,B,C),z=D;else if(bs(C))for(y=0,m=C.length;y<m;++y)H=C[y],!bi(H)&&!bs(H)&&(B=Pv(i,O.data,O.gc,B,H),z+=D);o.push(B),a.push(z),c=Math.max(B,c),f=Math.max(z,f)}BK(s,n);const J=o.indexOf(c),Q=a.indexOf(f),V=Y=>({width:o[Y]||0,height:a[Y]||0});return{first:V(0),last:V(n-1),widest:V(J),highest:V(Q),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return SY(this._alignToPixels?Af(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=FK(this.getContext(),e,r))}return this.$context||(this.$context=RK(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ic(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),y=$p(s),m=[],C=a.setContext(this.getContext()),S=C.display?C.width:0,T=S/2,O=function(R){return Af(r,R,S)};let D,B,z,H,J,Q,V,Y,ge,$,W,se;if(o==="top")D=O(this.bottom),Q=this.bottom-y,Y=D-T,$=O(e.top)+T,se=e.bottom;else if(o==="bottom")D=O(this.top),$=e.top,se=O(e.bottom)-T,Q=D+T,Y=this.top+y;else if(o==="left")D=O(this.right),J=this.right-y,V=D-T,ge=O(e.left)+T,W=e.right;else if(o==="right")D=O(this.left),ge=e.left,W=O(e.right)-T,J=D+T,V=this.left+y;else if(n==="x"){if(o==="center")D=O((e.top+e.bottom)/2+.5);else if(ai(o)){const R=Object.keys(o)[0],ee=o[R];D=O(this.chart.scales[R].getPixelForValue(ee))}$=e.top,se=e.bottom,Q=D+T,Y=Q+y}else if(n==="y"){if(o==="center")D=O((e.left+e.right)/2);else if(ai(o)){const R=Object.keys(o)[0],ee=o[R];D=O(this.chart.scales[R].getPixelForValue(ee))}J=D-T,V=J-y,ge=e.left,W=e.right}const X=zr(i.ticks.maxTicksLimit,p),U=Math.max(1,Math.ceil(p/X));for(B=0;B<p;B+=U){const R=this.getContext(B),ee=s.setContext(R),ie=a.setContext(R),fe=ee.lineWidth,me=ee.color,Oe=ie.dash||[],Z=ie.dashOffset,ae=ee.tickWidth,ce=ee.tickColor,pe=ee.tickBorderDash||[],Le=ee.tickBorderDashOffset;z=NK(this,B,l),z!==void 0&&(H=Af(r,z,fe),c?J=V=ge=W=H:Q=Y=$=se=H,m.push({tx1:J,ty1:Q,tx2:V,ty2:Y,x1:ge,y1:$,x2:W,y2:se,width:fe,color:me,borderDash:Oe,borderDashOffset:Z,tickWidth:ae,tickColor:ce,tickBorderDash:pe,tickBorderDashOffset:Le}))}return this._ticksLength=p,this._borderValue=D,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:f,mirror:p}=s,y=$p(r.grid),m=y+f,C=p?-f:m,S=-ic(this.labelRotation),T=[];let O,D,B,z,H,J,Q,V,Y,ge,$,W,se="middle";if(i==="top")J=this.bottom-C,Q=this._getXAxisLabelAlignment();else if(i==="bottom")J=this.top+C,Q=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(y);Q=U.textAlign,H=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(y);Q=U.textAlign,H=U.x}else if(n==="x"){if(i==="center")J=(e.top+e.bottom)/2+m;else if(ai(i)){const U=Object.keys(i)[0],R=i[U];J=this.chart.scales[U].getPixelForValue(R)+m}Q=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")H=(e.left+e.right)/2-m;else if(ai(i)){const U=Object.keys(i)[0],R=i[U];H=this.chart.scales[U].getPixelForValue(R)}Q=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(l==="start"?se="top":l==="end"&&(se="bottom"));const X=this._getLabelSizes();for(O=0,D=a.length;O<D;++O){B=a[O],z=B.label;const U=s.setContext(this.getContext(O));V=this.getPixelForTick(O)+s.labelOffset,Y=this._resolveTickFontOptions(O),ge=Y.lineHeight,$=bs(z)?z.length:1;const R=$/2,ee=U.color,ie=U.textStrokeColor,fe=U.textStrokeWidth;let me=Q;o?(H=V,Q==="inner"&&(O===D-1?me=this.options.reverse?"left":"right":O===0?me=this.options.reverse?"right":"left":me="center"),i==="top"?c==="near"||S!==0?W=-$*ge+ge/2:c==="center"?W=-X.highest.height/2-R*ge+ge:W=-X.highest.height+ge/2:c==="near"||S!==0?W=ge/2:c==="center"?W=X.highest.height/2-R*ge:W=X.highest.height-$*ge,p&&(W*=-1),S!==0&&!U.showLabelBackdrop&&(H+=ge/2*Math.sin(S))):(J=V,W=(1-$)*ge/2);let Oe;if(U.showLabelBackdrop){const Z=Ua(U.backdropPadding),ae=X.heights[O],ce=X.widths[O];let pe=W-Z.top,Le=0-Z.left;switch(se){case"middle":pe-=ae/2;break;case"bottom":pe-=ae;break}switch(Q){case"center":Le-=ce/2;break;case"right":Le-=ce;break;case"inner":O===D-1?Le-=ce:O>0&&(Le-=ce/2);break}Oe={left:Le,top:pe,width:ce+Z.width,height:ae+Z.height,color:U.backdropColor}}T.push({label:z,font:Y,textOffset:W,options:{rotation:S,color:ee,strokeColor:ie,strokeWidth:fe,textAlign:me,textBaseline:se,translation:[H,J],backdrop:Oe}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ic(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,f;return n==="left"?i?(f=this.right+s,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f+=l)):(f=this.right-a,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f=this.left)):n==="right"?i?(f=this.left+s,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f-=l)):(f=this.left+a,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,f,p,y;this.isHorizontal()?(c=Af(e,this.left,o)-o/2,f=Af(e,this.right,a)+a/2,p=y=l):(p=Af(e,this.top,o)-o/2,y=Af(e,this.bottom,a)+a/2,c=f=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(f,y),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&my(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,f=o.textOffset;td(r,c,0,f,l,a)}i&&vy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Do(r.font),o=Ua(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ai(n)?(l+=o.bottom,bs(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:f,maxWidth:p,rotation:y}=zK(this,l,n,a);td(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:y,textAlign:jK(a,n,i),textBaseline:"middle",translation:[c,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=zr(e.grid&&e.grid.z,-1),i=zr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sd.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Do(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class g0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;VK(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,UK(e,o,r),this.override&&Ys.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ys[i]&&(delete Ys[i][r],this.override&&delete ed[r])}}function UK(t,e,n){const r=Kg(Object.create(null),[n?Ys.get(n):{},Ys.get(e),t.defaults]);Ys.set(e,r),t.defaultRoutes&&$K(e,t.defaultRoutes),t.descriptors&&Ys.describe(e,t.descriptors)}function $K(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ys.route(s,i,l,a)})}function VK(t){return"id"in t&&"defaults"in t}class HK{constructor(){this.controllers=new g0(oc,"datasets",!0),this.elements=new g0(Ch,"elements"),this.plugins=new g0(Object,"plugins"),this.scales=new g0(sd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ii(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=y_(e);es(r["before"+i],[],r),n[e](r),es(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Ac=new HK;class WK{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(es(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){bi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=zr(r.options&&r.options.plugins,{}),s=GK(r);return i===!1&&!n?[]:YK(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function GK(t){const e={},n=[],r=Object.keys(Ac.plugins.items);for(let s=0;s<r.length;s++)n.push(Ac.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function qK(t,e){return!e&&t===!1?null:t===!0?{}:t}function YK(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=qK(r[l],i);c!==null&&s.push({plugin:a,options:ZK(t.config,{plugin:a,local:n[l]},c,o)})}return s}function ZK(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rb(t,e){const n=Ys.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function KK(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function XK(t,e){return t===e?"_index_":"_value_"}function Q5(t){if(t==="x"||t==="y"||t==="r")return t}function JK(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ib(t,...e){if(Q5(t))return t;for(const n of e){const r=n.axis||JK(n.position)||t.length>1&&Q5(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function e3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function QK(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return e3(t,"x",n[0])||e3(t,"y",n[0])}return{}}function eX(t,e){const n=ed[t.type]||{scales:{}},r=e.scales||{},i=rb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ai(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ib(o,a,QK(o,t),Ys.scales[a.type]),c=XK(l,i),f=n.scales||{};s[o]=Sg(Object.create(null),[{axis:l},a,f[l],f[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||rb(a,e),f=(ed[a]||{}).scales||{};Object.keys(f).forEach(p=>{const y=KK(p,l),m=o[y+"AxisID"]||y;s[m]=s[m]||Object.create(null),Sg(s[m],[{axis:y},r[m],f[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Sg(a,[Ys.scales[a.type],Ys.scale])}),s}function hP(t){const e=t.options||(t.options={});e.plugins=zr(e.plugins,{}),e.scales=eX(t,e)}function fP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function tX(t){return t=t||{},t.data=fP(t.data),hP(t),t}const t3=new Map,dP=new Set;function m0(t,e){let n=t3.get(t);return n||(n=e(),t3.set(t,n),dP.add(n)),n}const Vp=(t,e,n)=>{const r=lf(e,n);r!==void 0&&t.add(r)};class nX{constructor(e){this._config=tX(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=fP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),hP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return m0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return m0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return m0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return m0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(f=>{e&&(l.add(e),f.forEach(p=>Vp(l,e,p))),f.forEach(p=>Vp(l,i,p)),f.forEach(p=>Vp(l,ed[s]||{},p)),f.forEach(p=>Vp(l,Ys,p)),f.forEach(p=>Vp(l,eb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),dP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ed[n]||{},Ys.datasets[n]||{},{type:n},Ys,eb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=n3(this._resolverCache,e,i);let l=o;if(iX(o,n)){s.$shared=!1,r=uf(r)?r():r;const c=this.createResolver(e,r,a);l=hp(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=n3(this._resolverCache,e,r);return ai(n)?hp(s,n,void 0,i):s}}function n3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:C_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const rX=t=>ai(t)&&Object.getOwnPropertyNames(t).some(e=>uf(t[e]));function iX(t,e){const{isScriptable:n,isIndexable:r}=WE(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(uf(a)||rX(a))||o&&bs(a))return!0}return!1}var sX="4.4.1";const oX=["top","bottom","left","right","chartArea"];function r3(t,e){return t==="top"||t==="bottom"||oX.indexOf(t)===-1&&e==="x"}function i3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function s3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),es(n&&n.onComplete,[t],e)}function aX(t){const e=t.chart,n=e.options.animation;es(n&&n.onProgress,[t],e)}function pP(t){return P_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const q0={},o3=t=>{const e=pP(t);return Object.values(q0).filter(n=>n.canvas===e).pop()};function lX(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function uX(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function v0(t,e,n){return t.options.clip?t[n]:e[n]}function cX(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:v0(n,e,"left"),right:v0(n,e,"right"),top:v0(r,e,"top"),bottom:v0(r,e,"bottom")}:e}class Oc{static register(...e){Ac.add(...e),a3()}static unregister(...e){Ac.remove(...e),a3()}constructor(e,n){const r=this.config=new nX(n),i=pP(e),s=o3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||PK(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,f=l&&l.width;if(this.id=dY(),this.ctx=a,this.canvas=l,this.width=f,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new WK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=MY(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],q0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}lh.listen(this,"complete",s3),lh.listen(this,"progress",aX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return bi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ac}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():k5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return S5(this.canvas,this.ctx),this}stop(){return lh.stop(this),this}resize(e,n){lh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,k5(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),es(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ii(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=ib(o,a),c=l==="r",f=l==="x";return{options:a,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),Ii(s,o=>{const a=o.options,l=a.id,c=ib(l,a),f=zr(a.type,o.dtype);(a.position===void 0||r3(a.position,c)!==r3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===f)p=r[l];else{const y=Ac.getScale(f);p=new y({id:l,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Ii(i,(o,a)=>{o||delete r[a]}),Ii(r,o=>{za.configure(this,o,o.options),za.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(i3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||rb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Ac.getController(a),{datasetElementType:c,dataElementType:f}=Ys.datasets[a];Object.assign(l,{dataElementType:Ac.getElement(f),datasetElementType:c&&Ac.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ii(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:p}=this.getDatasetMeta(c),y=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(y),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ii(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(i3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ii(this.scales,e=>{za.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!m5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;lX(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!m5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;za.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ii(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,uf(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(lh.has(this)?this.attached&&!lh.running(this)&&lh.start(this):(this.draw(),s3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=cX(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&my(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&vy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return vh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=oK.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=df(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Xg(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),lh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),S5(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete q0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ii(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ii(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ii(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Cv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(f=>!c.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=bY(e),c=uX(e,this._lastEvent,r,l);r&&(this._lastEvent=null,es(s.onHover,[e,a,this],this),l&&es(s.onClick,[e,a,this],this));const f=!Cv(a,i);return(f||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,f}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}tt(Oc,"defaults",Ys),tt(Oc,"instances",q0),tt(Oc,"overrides",ed),tt(Oc,"registry",Ac),tt(Oc,"version",sX),tt(Oc,"getChart",o3);function a3(){return Ii(Oc.instances,t=>t._plugins.invalidate())}function hX(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+co,r-co),t.closePath(),t.clip()}function fX(t){return L_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function dX(t,e,n,r){const i=fX(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ko(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ko(i.innerStart,0,o),innerEnd:Ko(i.innerEnd,0,o)}}function Id(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Av(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:f}=e,p=Math.max(e.outerRadius+r+n-c,0),y=f>0?f+r+n+c:0;let m=0;const C=i-l;if(r){const U=f>0?f-r:0,R=p>0?p-r:0,ee=(U+R)/2,ie=ee!==0?C*ee/(ee+r):C;m=(C-ie)/2}const S=Math.max(.001,C*p-n/ls)/p,T=(C-S)/2,O=l+T+m,D=i-T-m,{outerStart:B,outerEnd:z,innerStart:H,innerEnd:J}=dX(e,y,p,D-O),Q=p-B,V=p-z,Y=O+B/Q,ge=D-z/V,$=y+H,W=y+J,se=O+H/$,X=D-J/W;if(t.beginPath(),s){const U=(Y+ge)/2;if(t.arc(o,a,p,Y,U),t.arc(o,a,p,U,ge),z>0){const fe=Id(V,ge,o,a);t.arc(fe.x,fe.y,z,ge,D+co)}const R=Id(W,D,o,a);if(t.lineTo(R.x,R.y),J>0){const fe=Id(W,X,o,a);t.arc(fe.x,fe.y,J,D+co,X+Math.PI)}const ee=(D-J/y+(O+H/y))/2;if(t.arc(o,a,y,D-J/y,ee,!0),t.arc(o,a,y,ee,O+H/y,!0),H>0){const fe=Id($,se,o,a);t.arc(fe.x,fe.y,H,se+Math.PI,O-co)}const ie=Id(Q,O,o,a);if(t.lineTo(ie.x,ie.y),B>0){const fe=Id(Q,Y,o,a);t.arc(fe.x,fe.y,B,O-co,Y)}}else{t.moveTo(o,a);const U=Math.cos(Y)*p+o,R=Math.sin(Y)*p+a;t.lineTo(U,R);const ee=Math.cos(ge)*p+o,ie=Math.sin(ge)*p+a;t.lineTo(ee,ie)}t.closePath()}function pX(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Av(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%as||as))}return Av(t,e,n,r,l,i),t.fill(),l}function gX(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:f,borderDash:p,borderDashOffset:y}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=y,m?(t.lineWidth=c*2,t.lineJoin=f||"round"):(t.lineWidth=c,t.lineJoin=f||"bevel");let C=e.endAngle;if(s){Av(t,e,n,r,C,i);for(let S=0;S<s;++S)t.stroke();isNaN(a)||(C=o+(a%as||as))}m&&hX(t,e,C),s||(Av(t,e,n,r,C,i),t.stroke())}class ig extends Ch{constructor(n){super();tt(this,"circumference");tt(this,"endAngle");tt(this,"fullCircles");tt(this,"innerRadius");tt(this,"outerRadius");tt(this,"pixelMargin");tt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=NE(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,S=zr(y,c-l)>=as||Jg(o,l,c),T=gh(a,f+m,p+m);return S&&T}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:f}=this.options,p=(s+o)/2,y=(a+l+f+c)/2;return{x:r+Math.cos(p)*y,y:i+Math.sin(p)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>as?Math.floor(i/as):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(ls,i||0)),f=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,pX(n,this,f,o,a),gX(n,this,f,o,a),n.restore()}}tt(ig,"id","arc"),tt(ig,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),tt(ig,"defaultRoutes",{backgroundColor:"backgroundColor"}),tt(ig,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function gP(t,e,n=e){t.lineCap=zr(n.borderCapStyle,e.borderCapStyle),t.setLineDash(zr(n.borderDash,e.borderDash)),t.lineDashOffset=zr(n.borderDashOffset,e.borderDashOffset),t.lineJoin=zr(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=zr(n.borderWidth,e.borderWidth),t.strokeStyle=zr(n.borderColor,e.borderColor)}function mX(t,e,n){t.lineTo(n.x,n.y)}function vX(t){return t.stepped?UY:t.tension||t.cubicInterpolationMode==="monotone"?$Y:mX}function mP(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),f=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!f?r+c-l:c-l}}function yX(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=mP(i,n,r),f=vX(s);let{move:p=!0,reverse:y}=r||{},m,C,S;for(m=0;m<=c;++m)C=i[(a+(y?c-m:m))%o],!C.skip&&(p?(t.moveTo(C.x,C.y),p=!1):f(t,S,C,y,s.stepped),S=C);return l&&(C=i[(a+(y?c:0))%o],f(t,S,C,y,s.stepped)),!!l}function bX(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=mP(i,n,r),{move:l=!0,reverse:c}=r||{};let f=0,p=0,y,m,C,S,T,O;const D=z=>(o+(c?a-z:z))%s,B=()=>{S!==T&&(t.lineTo(f,T),t.lineTo(f,S),t.lineTo(f,O))};for(l&&(m=i[D(0)],t.moveTo(m.x,m.y)),y=0;y<=a;++y){if(m=i[D(y)],m.skip)continue;const z=m.x,H=m.y,J=z|0;J===C?(H<S?S=H:H>T&&(T=H),f=(p*f+z)/++p):(B(),t.lineTo(z,H),C=J,p=0,S=T=H),O=H}B()}function sb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?bX:yX}function _X(t){return t.stepped?_Z:t.tension||t.cubicInterpolationMode==="monotone"?wZ:Bf}function wX(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),gP(t,e.options),t.stroke(i)}function xX(t,e,n,r){const{segments:i,options:s}=e,o=sb(e);for(const a of i)gP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const LX=typeof Path2D=="function";function CX(t,e,n,r){LX&&!e.options.segment?wX(t,e,n,r):xX(t,e,n,r)}class Xh extends Ch{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;fZ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=PZ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=tP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=_X(r);let c,f;for(c=0,f=o.length;c<f;++c){const{start:p,end:y}=o[c],m=s[p],C=s[y];if(m===C){a.push(m);continue}const S=Math.abs((i-m[n])/(C[n]-m[n])),T=l(m,C,S,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return sb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=sb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),CX(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}tt(Xh,"id","line"),tt(Xh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),tt(Xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),tt(Xh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function l3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Y0 extends Ch{constructor(n){super();tt(this,"parsed");tt(this,"skip");tt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return l3(this,n,"x",r)}inYRange(n,r){return l3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!vh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,tb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}tt(Y0,"id","point"),tt(Y0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),tt(Y0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function vP(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,f,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,f=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),f=Math.max(r,i)),{left:a,top:c,right:l,bottom:f}}function Jh(t,e,n,r){return t?0:Ko(e,n,r)}function SX(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=HE(r);return{t:Jh(i.top,s.top,0,n),r:Jh(i.right,s.right,0,e),b:Jh(i.bottom,s.bottom,0,n),l:Jh(i.left,s.left,0,e)}}function EX(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Zf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||ai(i);return{topLeft:Jh(!l||a.top||a.left,s.topLeft,0,o),topRight:Jh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Jh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Jh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function PX(t){const e=vP(t),n=e.right-e.left,r=e.bottom-e.top,i=SX(t,n/2,r/2),s=EX(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Z1(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&vP(t,r);return a&&(i||gh(e,a.left,a.right))&&(s||gh(n,a.top,a.bottom))}function kX(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function MX(t,e){t.rect(e.x,e.y,e.w,e.h)}function K1(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Z0 extends Ch{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=PX(this),a=kX(o.radius)?Qg:MX;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,K1(o,n,s)),e.clip(),a(e,K1(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,K1(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Z1(this,e,n,r)}inXRange(e,n){return Z1(this,e,null,n)}inYRange(e,n){return Z1(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}tt(Z0,"id","bar"),tt(Z0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),tt(Z0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var AX=Object.freeze({__proto__:null,ArcElement:ig,BarElement:Z0,LineElement:Xh,PointElement:Y0});const ob=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],u3=ob.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function yP(t){return ob[t%ob.length]}function bP(t){return u3[t%u3.length]}function TX(t,e){return t.borderColor=yP(e),t.backgroundColor=bP(e),++e}function OX(t,e){return t.backgroundColor=t.data.map(()=>yP(e++)),e}function DX(t,e){return t.backgroundColor=t.data.map(()=>bP(e++)),e}function IX(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Uf?e=OX(n,e):i instanceof Mg?e=DX(n,e):i&&(e=TX(n,e))}}function c3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function NX(t){return t&&(t.borderColor||t.backgroundColor)}var BX={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(c3(r)||NX(i)||s&&c3(s)))return;const o=IX(t);r.forEach(o)}};function RX(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let f=e,p,y,m,C,S;for(o[l++]=t[f],p=0;p<s-2;p++){let T=0,O=0,D;const B=Math.floor((p+1)*a)+1+e,z=Math.min(Math.floor((p+2)*a)+1,n)+e,H=z-B;for(D=B;D<z;D++)T+=t[D].x,O+=t[D].y;T/=H,O/=H;const J=Math.floor(p*a)+1+e,Q=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:V,y:Y}=t[f];for(m=C=-1,D=J;D<Q;D++)C=.5*Math.abs((V-T)*(t[D].y-Y)-(V-t[D].x)*(O-Y)),C>m&&(m=C,y=t[D],S=D);o[l++]=y,f=S}return o[l++]=t[c],o}function FX(t,e,n,r){let i=0,s=0,o,a,l,c,f,p,y,m,C,S;const T=[],O=e+n-1,D=t[e].x,z=t[O].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/z*r,c=a.y;const H=l|0;if(H===f)c<C?(C=c,p=o):c>S&&(S=c,y=o),i=(s*i+a.x)/++s;else{const J=o-1;if(!bi(p)&&!bi(y)){const Q=Math.min(p,y),V=Math.max(p,y);Q!==m&&Q!==J&&T.push({...t[Q],x:i}),V!==m&&V!==J&&T.push({...t[V],x:i})}o>0&&J!==m&&T.push(t[J]),T.push(a),f=H,s=0,C=S=c,p=y=m=o}}return T}function _P(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function h3(t){t.data.datasets.forEach(e=>{_P(e)})}function jX(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ko(mh(e,s.axis,o).lo,0,n-1)),c?i=Ko(mh(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var zX={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){h3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(ng([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=t.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||t.options.parsing)return;let{start:p,count:y}=jX(l,c);const m=n.threshold||4*r;if(y<=m){_P(i);return}bi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(S){this._data=S}}));let C;switch(n.algorithm){case"lttb":C=RX(c,p,y,r,n);break;case"min-max":C=FX(c,p,y,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=C})},destroy(t){h3(t)}};function UX(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=A_(l,c,i);const f=ab(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:f,start:i[l],end:i[c]});continue}const p=tP(e,f);for(const y of p){const m=ab(n,s[y.start],s[y.end],y.loop),C=eP(a,i,m);for(const S of C)o.push({source:S,target:y,start:{[n]:f3(f,m,"start",Math.max)},end:{[n]:f3(f,m,"end",Math.min)}})}}return o}function ab(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=iu(i),s=iu(s)),{property:t,start:i,end:s}}function $X(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=A_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function A_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function f3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function wP(t,e){let n=[],r=!1;return bs(t)?(r=!0,n=t):n=$X(t,e),n.length?new Xh({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function d3(t){return t&&t.fill!==!1}function VX(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!qs(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function HX(t,e,n){const r=YX(t);if(ai(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return qs(i)&&Math.floor(i)===i?WX(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function WX(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function GX(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ai(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function qX(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ai(t)?r=t.value:r=e.getBaseValue(),r}function YX(t){const e=t.options,n=e.fill;let r=zr(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function ZX(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=KX(e,n);a.push(wP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let f=c.start;f<=c.end;f++)XX(i,o[f],a)}return new Xh({points:i,options:{}})}function KX(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function XX(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=JX(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function JX(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const f=s[c],p=o[f.start][n],y=o[f.end][n];if(gh(i,p,y)){a=i===p,l=i===y;break}}return{first:a,last:l,point:r}}class xP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:as},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function QX(t){const{chart:e,fill:n,line:r}=t;if(qs(n))return eJ(e,n);if(n==="stack")return ZX(t);if(n==="shape")return!0;const i=tJ(t);return i instanceof xP?i:wP(i,r)}function eJ(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function tJ(t){return(t.scale||{}).getPointPositionForValue?rJ(t):nJ(t)}function nJ(t){const{scale:e={},fill:n}=t,r=GX(n,e);if(qs(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function rJ(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=qX(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new xP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function X1(t,e,n){const r=QX(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:f=c,below:p=c}=l||{};r&&i.points.length&&(my(t,n),iJ(t,{line:i,target:r,above:f,below:p,area:n,scale:s,axis:o}),vy(t))}function iJ(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(p3(t,r,o.top),g3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),p3(t,r,o.bottom)),g3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function p3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,f=i[l],p=i[A_(l,c,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function g3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=UX(n,r,i);for(const{source:l,target:c,start:f,end:p}of a){const{style:{backgroundColor:y=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=y,sJ(t,o,m&&ab(i,f,p)),t.beginPath();const C=!!n.pathSegment(t,l);let S;if(m){C?t.closePath():m3(t,r,p,i);const T=!!r.pathSegment(t,c,{move:C,reverse:!0});S=C&&T,S||m3(t,r,f,i)}t.closePath(),t.fill(S?"evenodd":"nonzero"),t.restore()}}function sJ(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function m3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var oJ={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Xh&&(l={visible:t.isDatasetVisible(o),index:o,fill:HX(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=VX(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&X1(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;d3(s)&&X1(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!d3(r)||n.drawTime!=="beforeDatasetDraw"||X1(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const v3=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},aJ=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class y3 extends Ch{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=es(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Do(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=v3(r,s);let c,f;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(o,s,a,l)+10):(f=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],f=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let y=-1,m=-f;return this.legendItems.forEach((C,S)=>{const T=r+n/2+s.measureText(C.text).width;(S===0||c[c.length-1]+T+2*a>o)&&(p+=f,c[c.length-(S>0?0:1)]=0,m+=f,y++),l[S]={left:0,top:m,row:y,width:T,height:i},c[c.length-1]+=T+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],f=o-e;let p=a,y=0,m=0,C=0,S=0;return this.legendItems.forEach((T,O)=>{const{itemWidth:D,itemHeight:B}=lJ(r,n,s,T,i);O>0&&m+B+2*a>f&&(p+=y+a,c.push({width:y,height:m}),C+=y+a,S++,y=m=0),l[O]={left:C,top:m,col:S,width:D,height:B},y=Math.max(y,D),m+=B+a}),p+=y,c.push({width:y,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=np(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Da(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Da(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Da(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Da(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;my(e,this),this._draw(),vy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ys.color,l=np(e.rtl,this.left,this.width),c=Do(o.font),{padding:f}=o,p=c.size,y=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:C,boxHeight:S,itemHeight:T}=v3(o,p),O=function(J,Q,V){if(isNaN(C)||C<=0||isNaN(S)||S<0)return;i.save();const Y=zr(V.lineWidth,1);if(i.fillStyle=zr(V.fillStyle,a),i.lineCap=zr(V.lineCap,"butt"),i.lineDashOffset=zr(V.lineDashOffset,0),i.lineJoin=zr(V.lineJoin,"miter"),i.lineWidth=Y,i.strokeStyle=zr(V.strokeStyle,a),i.setLineDash(zr(V.lineDash,[])),o.usePointStyle){const ge={radius:S*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:Y},$=l.xPlus(J,C/2),W=Q+y;VE(i,ge,$,W,o.pointStyleWidth&&C)}else{const ge=Q+Math.max((p-S)/2,0),$=l.leftForLtr(J,C),W=Zf(V.borderRadius);i.beginPath(),Object.values(W).some(se=>se!==0)?Qg(i,{x:$,y:ge,w:C,h:S,radius:W}):i.rect($,ge,C,S),i.fill(),Y!==0&&i.stroke()}i.restore()},D=function(J,Q,V){td(i,V.text,J,Q+T/2,c,{strikethrough:V.hidden,textAlign:l.textAlign(V.textAlign)})},B=this.isHorizontal(),z=this._computeTitleHeight();B?m={x:Da(s,this.left+f,this.right-r[0]),y:this.top+f+z,line:0}:m={x:this.left+f,y:Da(s,this.top+z+f,this.bottom-n[0].height),line:0},XE(this.ctx,e.textDirection);const H=T+f;this.legendItems.forEach((J,Q)=>{i.strokeStyle=J.fontColor,i.fillStyle=J.fontColor;const V=i.measureText(J.text).width,Y=l.textAlign(J.textAlign||(J.textAlign=o.textAlign)),ge=C+y+V;let $=m.x,W=m.y;l.setWidth(this.width),B?Q>0&&$+ge+f>this.right&&(W=m.y+=H,m.line++,$=m.x=Da(s,this.left+f,this.right-r[m.line])):Q>0&&W+H>this.bottom&&($=m.x=$+n[m.line].width+f,m.line++,W=m.y=Da(s,this.top+z+f,this.bottom-n[m.line].height));const se=l.x($);if(O(se,W,J),$=AY(Y,$+C+y,B?$+ge:this.right,e.rtl),D(l.x($),W,J),B)m.x+=ge+f;else if(typeof J.text!="string"){const X=c.lineHeight;m.y+=LP(J,X)+f}else m.y+=H}),JE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Do(n.font),i=Ua(n.padding);if(!n.display)return;const s=np(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let f,p=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),f=this.top+c,p=Da(e.align,p,this.right-y);else{const C=this.columnSizes.reduce((S,T)=>Math.max(S,T.height),0);f=c+Da(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const m=Da(a,p,p+y);o.textAlign=s.textAlign(w_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,td(o,n.text,m,f,r)}_computeTitleHeight(){const e=this.options.title,n=Do(e.font),r=Ua(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(gh(e,this.left,this.right)&&gh(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],gh(e,i.left,i.left+i.width)&&gh(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!hJ(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=aJ(i,r);i&&!s&&es(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&es(n.onHover,[e,r,this],this)}else r&&es(n.onClick,[e,r,this],this)}}function lJ(t,e,n,r,i){const s=uJ(r,t,e,n),o=cJ(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function uJ(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function cJ(t,e,n){let r=t;return typeof e.text!="string"&&(r=LP(e,n)),r}function LP(t,e){const n=t.text?t.text.length:0;return e*n}function hJ(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var fJ={id:"legend",_element:y3,start(t,e,n){const r=t.legend=new y3({ctx:t.ctx,options:n,chart:t});za.configure(t,r,n),za.addBox(t,r)},stop(t){za.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;za.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),f=Ua(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class T_ extends Ch{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=bs(r.text)?r.text.length:1;this._padding=Ua(r.padding);const s=i*Do(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,f,p;return this.isHorizontal()?(f=Da(a,r,s),p=n+e,c=s-r):(o.position==="left"?(f=r+e,p=Da(a,i,n),l=ls*-.5):(f=s-e,p=Da(a,n,i),l=ls*.5),c=i-n),{titleX:f,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Do(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);td(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:w_(n.align),textBaseline:"middle",translation:[o,a]})}}function dJ(t,e){const n=new T_({ctx:t.ctx,options:e,chart:t});za.configure(t,n,e),za.addBox(t,n),t.titleBlock=n}var pJ={id:"title",_element:T_,start(t,e,n){dJ(t,n)},stop(t){const e=t.titleBlock;za.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;za.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const y0=new WeakMap;var gJ={id:"subtitle",start(t,e,n){const r=new T_({ctx:t.ctx,options:n,chart:t});za.configure(t,r,n),za.addBox(t,r),y0.set(t,r)},stop(t){za.removeBox(t,y0.get(t)),y0.delete(t)},beforeUpdate(t,e,n){const r=y0.get(t);za.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),f=Q2(e,c);f<i&&(i=f,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function kc(t,e){return e&&(bs(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function uh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function mJ(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function b3(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Do(e.bodyFont),c=Do(e.titleFont),f=Do(e.footerFont),p=s.length,y=i.length,m=r.length,C=Ua(e.padding);let S=C.height,T=0,O=r.reduce((z,H)=>z+H.before.length+H.lines.length+H.after.length,0);if(O+=t.beforeBody.length+t.afterBody.length,p&&(S+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),O){const z=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;S+=m*z+(O-m)*l.lineHeight+(O-1)*e.bodySpacing}y&&(S+=e.footerMarginTop+y*f.lineHeight+(y-1)*e.footerSpacing);let D=0;const B=function(z){T=Math.max(T,n.measureText(z).width+D)};return n.save(),n.font=c.string,Ii(t.title,B),n.font=l.string,Ii(t.beforeBody.concat(t.afterBody),B),D=e.displayColors?o+2+e.boxPadding:0,Ii(r,z=>{Ii(z.before,B),Ii(z.lines,B),Ii(z.after,B)}),D=0,n.font=f.string,Ii(t.footer,B),n.restore(),T+=C.width,{width:T,height:S}}function vJ(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function yJ(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function bJ(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),yJ(c,t,e,n)&&(c="center"),c}function _3(t,e,n){const r=n.yAlign||e.yAlign||vJ(t,n);return{xAlign:n.xAlign||e.xAlign||bJ(t,e,n,r),yAlign:r}}function _J(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function wJ(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function w3(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:f,topRight:p,bottomLeft:y,bottomRight:m}=Zf(o);let C=_J(e,a);const S=wJ(e,l,c);return l==="center"?a==="left"?C+=c:a==="right"&&(C-=c):a==="left"?C-=Math.max(f,y)+i:a==="right"&&(C+=Math.max(p,m)+i),{x:Ko(C,0,r.width-e.width),y:Ko(S,0,r.height-e.height)}}function b0(t,e,n){const r=Ua(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function x3(t){return kc([],uh(t))}function xJ(t,e,n){return df(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function L3(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const CP={beforeTitle:ah,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ah,beforeBody:ah,beforeLabel:ah,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ah,afterBody:ah,beforeFooter:ah,footer:ah,afterFooter:ah};function Ml(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?CP[e].call(n,r):i}class lb extends Ch{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new nP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=xJ(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Ml(r,"beforeTitle",this,e),s=Ml(r,"title",this,e),o=Ml(r,"afterTitle",this,e);let a=[];return a=kc(a,uh(i)),a=kc(a,uh(s)),a=kc(a,uh(o)),a}getBeforeBody(e,n){return x3(Ml(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ii(e,s=>{const o={before:[],lines:[],after:[]},a=L3(r,s);kc(o.before,uh(Ml(a,"beforeLabel",this,s))),kc(o.lines,Ml(a,"label",this,s)),kc(o.after,uh(Ml(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return x3(Ml(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Ml(r,"beforeFooter",this,e),s=Ml(r,"footer",this,e),o=Ml(r,"afterFooter",this,e);let a=[];return a=kc(a,uh(i)),a=kc(a,uh(s)),a=kc(a,uh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(mJ(this.chart,n[l]));return e.filter&&(a=a.filter((f,p,y)=>e.filter(f,p,y,r))),e.itemSort&&(a=a.sort((f,p)=>e.itemSort(f,p,r))),Ii(a,f=>{const p=L3(e.callbacks,f);i.push(Ml(p,"labelColor",this,f)),s.push(Ml(p,"labelPointStyle",this,f)),o.push(Ml(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=sg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=b3(this,r),c=Object.assign({},a,l),f=_3(this.chart,r,c),p=w3(r,c,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:f,bottomRight:p}=Zf(a),{x:y,y:m}=e,{width:C,height:S}=n;let T,O,D,B,z,H;return s==="center"?(z=m+S/2,i==="left"?(T=y,O=T-o,B=z+o,H=z-o):(T=y+C,O=T+o,B=z-o,H=z+o),D=T):(i==="left"?O=y+Math.max(l,f)+o:i==="right"?O=y+C-Math.max(c,p)-o:O=this.caretX,s==="top"?(B=m,z=B-o,T=O-o,D=O+o):(B=m+S,z=B+o,T=O+o,D=O-o),H=B),{x1:T,x2:O,x3:D,y1:B,y2:z,y3:H}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=np(r.rtl,this.x,this.width);for(e.x=b0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Do(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,f=Do(s.bodyFont),p=b0(this,"left",s),y=i.x(p),m=l<f.lineHeight?(f.lineHeight-l)/2:0,C=n.y+m;if(s.usePointStyle){const S={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=i.leftForLtr(y,c)+c/2,O=C+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,tb(e,S,T,O),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,tb(e,S,T,O)}else{e.lineWidth=ai(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const S=i.leftForLtr(y,c),T=i.leftForLtr(i.xPlus(y,1),c-2),O=Zf(o.borderRadius);Object.values(O).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Qg(e,{x:S,y:C,w:c,h:l,radius:O}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qg(e,{x:T,y:C+1,w:c-2,h:l-2,radius:O}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(S,C,c,l),e.strokeRect(S,C,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,C+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:f}=r,p=Do(r.bodyFont);let y=p.lineHeight,m=0;const C=np(r.rtl,this.x,this.width),S=function(V){n.fillText(V,C.x(e.x+m),e.y+y/2),e.y+=y+s},T=C.textAlign(o);let O,D,B,z,H,J,Q;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=b0(this,T,r),n.fillStyle=r.bodyColor,Ii(this.beforeBody,S),m=a&&T!=="right"?o==="center"?c/2+f:c+2+f:0,z=0,J=i.length;z<J;++z){for(O=i[z],D=this.labelTextColors[z],n.fillStyle=D,Ii(O.before,S),B=O.lines,a&&B.length&&(this._drawColorBox(n,e,z,C,r),y=Math.max(p.lineHeight,l)),H=0,Q=B.length;H<Q;++H)S(B[H]),y=p.lineHeight;Ii(O.after,S)}m=0,y=p.lineHeight,Ii(this.afterBody,S),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=np(r.rtl,this.x,this.width);for(e.x=b0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Do(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:f}=r,{topLeft:p,topRight:y,bottomLeft:m,bottomRight:C}=Zf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-y,l),n.quadraticCurveTo(a+c,l,a+c,l+y),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+f-C),n.quadraticCurveTo(a+c,l+f,a+c-C,l+f),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+f),n.quadraticCurveTo(a,l+f,a,l+f-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=sg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=b3(this,e),l=Object.assign({},o,this._size),c=_3(n,e,l),f=w3(e,l,c,n);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ua(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),XE(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),JE(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Cv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Cv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=sg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}tt(lb,"positioners",sg);var LJ={id:"tooltip",_element:lb,positioners:sg,afterInit(t,e,n){n&&(t.tooltip=new lb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:CP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},CJ=Object.freeze({__proto__:null,Colors:BX,Decimation:zX,Filler:oJ,Legend:fJ,SubTitle:gJ,Title:pJ,Tooltip:LJ});const SJ=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function EJ(t,e,n,r){const i=t.indexOf(e);if(i===-1)return SJ(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const PJ=(t,e)=>t===null?null:Ko(Math.round(t),0,e);function C3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ub extends sd{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:EJ(r,e,zr(n,e),this._addedLabels),PJ(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return C3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}tt(ub,"id","category"),tt(ub,"defaults",{ticks:{callback:C3}});function kJ(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:f,maxDigits:p,includeBounds:y}=t,m=s||1,C=f-1,{min:S,max:T}=e,O=!bi(o),D=!bi(a),B=!bi(c),z=(T-S)/(p+1);let H=y5((T-S)/C/m)*m,J,Q,V,Y;if(H<1e-14&&!O&&!D)return[{value:S},{value:T}];Y=Math.ceil(T/H)-Math.floor(S/H),Y>C&&(H=y5(Y*H/C/m)*m),bi(l)||(J=Math.pow(10,l),H=Math.ceil(H*J)/J),i==="ticks"?(Q=Math.floor(S/H)*H,V=Math.ceil(T/H)*H):(Q=S,V=T),O&&D&&s&&LY((a-o)/s,H/1e3)?(Y=Math.round(Math.min((a-o)/H,f)),H=(a-o)/Y,Q=o,V=a):B?(Q=O?o:Q,V=D?a:V,Y=c-1,H=(V-Q)/Y):(Y=(V-Q)/H,Eg(Y,Math.round(Y),H/1e3)?Y=Math.round(Y):Y=Math.ceil(Y));const ge=Math.max(b5(H),b5(Q));J=Math.pow(10,bi(l)?ge:l),Q=Math.round(Q*J)/J,V=Math.round(V*J)/J;let $=0;for(O&&(y&&Q!==o?(n.push({value:o}),Q<o&&$++,Eg(Math.round((Q+$*H)*J)/J,o,S3(o,z,t))&&$++):Q<o&&$++);$<Y;++$){const W=Math.round((Q+$*H)*J)/J;if(D&&W>a)break;n.push({value:W})}return D&&y&&V!==a?n.length&&Eg(n[n.length-1].value,a,S3(a,z,t))?n[n.length-1].value=a:n.push({value:a}):(!D||V===a)&&n.push({value:V}),n}function S3(t,e,{horizontal:n,minRotation:r}){const i=ic(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Tv extends sd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=jc(i),c=jc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=kJ(i,s);return e.bounds==="ticks"&&IE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return dm(e,this.chart.options.locale,this.options.ticks.format)}}class cb extends Tv{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=qs(e)?e:0,this.max=qs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ic(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}tt(cb,"id","linear"),tt(cb,"defaults",{ticks:{callback:gy.formatters.numeric}});const tm=t=>Math.floor(Kh(t)),Of=(t,e)=>Math.pow(10,tm(t)+e);function E3(t){return t/Math.pow(10,tm(t))===1}function P3(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function MJ(t,e){const n=e-t;let r=tm(n);for(;P3(t,e,r)>10;)r++;for(;P3(t,e,r)<10;)r--;return Math.min(r,tm(t))}function AJ(t,{min:e,max:n}){e=ru(t.min,e);const r=[],i=tm(e);let s=MJ(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,f=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-f)/Math.pow(10,s)),y=ru(t.min,Math.round((l+f+p*Math.pow(10,s))*o)/o);for(;y<n;)r.push({value:y,major:E3(y),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),y=Math.round((l+f+p*Math.pow(10,s))*o)/o;const m=ru(t.max,y);return r.push({value:m,major:E3(m),significand:p}),r}class hb extends sd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=Tv.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return qs(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=qs(e)?Math.max(0,e):null,this.max=qs(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!qs(this._userMin)&&(this.min=e===Of(this.min,0)?Of(this.min,-1):Of(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Of(r,-1)),o(Of(i,1)))),r<=0&&s(Of(i,-1)),i<=0&&o(Of(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=AJ(n,this);return e.bounds==="ticks"&&IE(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":dm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Kh(e),this._valueRange=Kh(this.max)-Kh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Kh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}tt(hb,"id","logarithmic"),tt(hb,"defaults",{ticks:{callback:gy.formatters.logarithmic,major:{enabled:!0}}});function fb(t){const e=t.ticks;if(e.display&&t.display){const n=Ua(e.backdropPadding);return zr(e.font&&e.font.size,Ys.font.size)+n.height}return 0}function TJ(t,e,n){return n=bs(n)?n:[n],{w:zY(t,e.string,n),h:n.length*e.lineHeight}}function k3(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function OJ(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ls/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const f=t.getPointPosition(l,t.drawingArea+i[l],a),p=Do(c.font),y=TJ(t.ctx,p,t._pointLabels[l]);r[l]=y;const m=iu(t.getIndexAngle(l)+a),C=Math.round(b_(m)),S=k3(C,f.x,y.w,0,180),T=k3(C,f.y,y.h,90,270);DJ(n,e,m,S,T)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=BJ(t,r,i)}function DJ(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function IJ(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(b_(iu(l.angle+co))),f=jJ(l.y,a.h,c),p=RJ(c),y=FJ(l.x,a.w,p);return{visible:!0,x:l.x,y:f,textAlign:p,left:y,top:f,right:y+a.w,bottom:f+a.h}}function NJ(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(vh({x:n,y:r},e)||vh({x:n,y:s},e)||vh({x:i,y:r},e)||vh({x:i,y:s},e))}function BJ(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:fb(s)/2,additionalAngle:o?ls/i:0};let c;for(let f=0;f<i;f++){l.padding=n[f],l.size=e[f];const p=IJ(t,f,l);r.push(p),a==="auto"&&(p.visible=NJ(p,c),p.visible&&(c=p))}return r}function RJ(t){return t===0||t===180?"center":t<180?"left":"right"}function FJ(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function jJ(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function zJ(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!bi(a)){const l=Zf(e.borderRadius),c=Ua(e.backdropPadding);t.fillStyle=a;const f=r-c.left,p=i-c.top,y=s-r+c.width,m=o-i+c.height;Object.values(l).some(C=>C!==0)?(t.beginPath(),Qg(t,{x:f,y:p,w:y,h:m,radius:l}),t.fill()):t.fillRect(f,p,y,m)}}function UJ(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));zJ(n,o,s);const a=Do(o.font),{x:l,y:c,textAlign:f}=s;td(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:f,textBaseline:"middle"})}}function SP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,as);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function $J(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),SP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function VJ(t,e,n){return df(t,{label:n,index:e,type:"pointLabel"})}class og extends Tv{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ua(fb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=qs(e)&&!isNaN(e)?e:0,this.max=qs(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fb(this.options))}generateTickLabels(e){Tv.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=es(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?OJ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=as/(this._pointLabels.length||1),r=this.options.startAngle||0;return iu(e*n+ic(r))}getDistanceFromCenterForValue(e){if(bi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(bi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return VJ(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-co+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),SP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&UJ(this,o),i.display&&this.ticks.forEach((f,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(f.value);const y=this.getContext(p),m=i.setContext(y),C=s.setContext(y);$J(this,m,l,o,C)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const f=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:y}=f;!y||!p||(e.lineWidth=y,e.strokeStyle=p,e.setLineDash(f.borderDash),e.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),f=Do(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=f.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=Ua(c.backdropPadding);e.fillRect(-o/2-p.left,-s-f.size/2-p.top,o+p.width,f.size+p.height)}td(e,a.label,0,-s,f,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}tt(og,"id","radialLinear"),tt(og,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),tt(og,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),tt(og,"descriptors",{angleLines:{_fallback:"grid"}});const _y={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Bl=Object.keys(_y);function M3(t,e){return t-e}function A3(t,e){if(bi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),qs(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(cp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function T3(t,e,n,r){const i=Bl.length;for(let s=Bl.indexOf(t);s<i-1;++s){const o=_y[Bl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Bl[s]}return Bl[i-1]}function HJ(t,e,n,r,i){for(let s=Bl.length-1;s>=Bl.indexOf(n);s--){const o=Bl[s];if(_y[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Bl[n?Bl.indexOf(n):0]}function WJ(t){for(let e=Bl.indexOf(t)+1,n=Bl.length;e<n;++e)if(_y[Bl[e]].common)return Bl[e]}function O3(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=__(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function GJ(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function D3(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:GJ(t,r,i,n)}class nm extends sd{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new sP._date(e.adapters.date);i.init(n),Sg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:A3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=qs(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=qs(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=PY(i,s,o);return this._unit=n.unit||(r.autoSkip?T3(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):HJ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:WJ(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),D3(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ko(n,0,o),r=Ko(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||T3(s.minUnit,n,r,this._getLabelCapacity(n)),a=zr(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=cp(l)||l===!0,f={};let p=n,y,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const C=i.ticks.source==="data"&&this.getDataTimestamps();for(y=p,m=0;y<r;y=+e.add(y,a,o),m++)O3(f,y,C);return(y===r||i.bounds==="ticks"||m===1)&&O3(f,y,C),Object.keys(f).sort(M3).map(S=>+S)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return es(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,f=l&&a[l],p=c&&a[c],y=r[n],m=c&&p&&y&&y.major;return this._adapter.format(e,i||(m?p:f))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=ic(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,D3(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(A3(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return RE(e.sort(M3))}}tt(nm,"id","time"),tt(nm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function _0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=mh(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=mh(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class db extends nm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=_0(n,this.min),this._tableRange=_0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,f;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)f=i[o+1],l=i[o-1],c=i[o],Math.round((f+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(_0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return _0(this._table,r*this._tableRange+this._minPos,!0)}}tt(db,"id","timeseries"),tt(db,"defaults",nm.defaults);var qJ=Object.freeze({__proto__:null,CategoryScale:ub,LinearScale:cb,LogarithmicScale:hb,RadialLinearScale:og,TimeScale:nm,TimeSeriesScale:db});const YJ=[tK,AX,CJ,qJ];Oc.register(...YJ);const EP=6048e5,ZJ=864e5,pm=6e4,gm=36e5,KJ=1e3,I3=Symbol.for("constructDateFrom");function Ks(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&I3 in t?t[I3](e):t instanceof Date?new t.constructor(e):new Date(e)}function Or(t,e){return Ks(e||t,t)}function wy(t,e,n){const r=Or(t,n==null?void 0:n.in);return isNaN(e)?Ks((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function O_(t,e,n){const r=Or(t,n==null?void 0:n.in);if(isNaN(e))return Ks(t,NaN);if(!e)return r;const i=r.getDate(),s=Ks(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function D_(t,e,n){return Ks(t,+Or(t)+e)}function XJ(t,e,n){return D_(t,e*gm)}let JJ={};function od(){return JJ}function $c(t,e){var a,l,c,f;const n=od(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Or(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function dp(t,e){return $c(t,{...e,weekStartsOn:1})}function PP(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ks(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=dp(i),o=Ks(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=dp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Ov(t){const e=Or(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ad(t,...e){const n=Ks.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function pb(t,e){const n=Or(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function kP(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=pb(r),o=pb(i),a=+s-Ov(s),l=+o-Ov(o);return Math.round((a-l)/ZJ)}function QJ(t,e){const n=PP(t,e),r=Ks(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),dp(r)}function eQ(t,e,n){const r=Or(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*pm),r}function tQ(t,e,n){return O_(t,e*3,n)}function nQ(t,e,n){return D_(t,e*1e3)}function rQ(t,e,n){return wy(t,e*7,n)}function iQ(t,e,n){return O_(t,e*12,n)}function Ag(t,e){const n=+Or(t)-+Or(e);return n<0?-1:n>0?1:n}function sQ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function MP(t){return!(!sQ(t)&&typeof t!="number"||isNaN(+Or(t)))}function oQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function aQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function AP(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=N3(r,i),o=Math.abs(kP(r,i));r.setDate(r.getDate()-s*o);const a=+(N3(r,i)===-s),l=s*(o-a);return l===0?0:l}function N3(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function mm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function lQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=(+r-+i)/gm;return mm(n==null?void 0:n.roundingMethod)(s)}function I_(t,e){return+Or(t)-+Or(e)}function uQ(t,e,n){const r=I_(t,e)/pm;return mm(n==null?void 0:n.roundingMethod)(r)}function TP(t,e){const n=Or(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function OP(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function cQ(t,e){const n=Or(t,e==null?void 0:e.in);return+TP(n,e)==+OP(n,e)}function DP(t,e,n){const[r,i,s]=ad(n==null?void 0:n.in,t,t,e),o=Ag(i,s),a=Math.abs(oQ(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=Ag(i,s)===-o;cQ(r)&&a===1&&Ag(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function hQ(t,e,n){const r=DP(t,e,n)/3;return mm(n==null?void 0:n.roundingMethod)(r)}function fQ(t,e,n){const r=I_(t,e)/1e3;return mm(n==null?void 0:n.roundingMethod)(r)}function dQ(t,e,n){const r=AP(t,e,n)/7;return mm(n==null?void 0:n.roundingMethod)(r)}function pQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=Ag(r,i),o=Math.abs(aQ(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=Ag(r,i)===-s,l=s*(o-+a);return l===0?0:l}function gQ(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function mQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function vQ(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function IP(t,e){const n=Or(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function yQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function bQ(t,e){var a,l;const n=od(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Or(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function _Q(t,e){const n=Or(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function wQ(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function xQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const LQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CQ=(t,e,n)=>{let r;const i=LQ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function J1(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const SQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kQ={date:J1({formats:SQ,defaultWidth:"full"}),time:J1({formats:EQ,defaultWidth:"full"}),dateTime:J1({formats:PQ,defaultWidth:"full"})},MQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},AQ=(t,e,n,r)=>MQ[t];function Hp(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const TQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},DQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},NQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RQ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},FQ={ordinalNumber:RQ,era:Hp({values:TQ,defaultWidth:"wide"}),quarter:Hp({values:OQ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Hp({values:DQ,defaultWidth:"wide"}),day:Hp({values:IQ,defaultWidth:"wide"}),dayPeriod:Hp({values:NQ,defaultWidth:"wide",formattingValues:BQ,defaultFormattingWidth:"wide"})};function Wp(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?zQ(a,p=>p.test(o)):jQ(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(o.length);return{value:c,rest:f}}}function jQ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function zQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function UQ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const $Q=/^(\d+)(th|st|nd|rd)?/i,VQ=/\d+/i,HQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},WQ={any:[/^b/i,/^(a|c)/i]},GQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qQ={any:[/1/i,/2/i,/3/i,/4/i]},YQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ZQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},XQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},QQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eee={ordinalNumber:UQ({matchPattern:$Q,parsePattern:VQ,valueCallback:t=>parseInt(t,10)}),era:Wp({matchPatterns:HQ,defaultMatchWidth:"wide",parsePatterns:WQ,defaultParseWidth:"any"}),quarter:Wp({matchPatterns:GQ,defaultMatchWidth:"wide",parsePatterns:qQ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Wp({matchPatterns:YQ,defaultMatchWidth:"wide",parsePatterns:ZQ,defaultParseWidth:"any"}),day:Wp({matchPatterns:KQ,defaultMatchWidth:"wide",parsePatterns:XQ,defaultParseWidth:"any"}),dayPeriod:Wp({matchPatterns:JQ,defaultMatchWidth:"any",parsePatterns:QQ,defaultParseWidth:"any"})},NP={code:"en-US",formatDistance:CQ,formatLong:kQ,formatRelative:AQ,localize:FQ,match:eee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tee(t,e){const n=Or(t,e==null?void 0:e.in);return kP(n,IP(n))+1}function BP(t,e){const n=Or(t,e==null?void 0:e.in),r=+dp(n)-+QJ(n);return Math.round(r/EP)+1}function N_(t,e){var f,p,y,m;const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),i=od(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(y=i.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ks((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=$c(o,e),l=Ks((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=$c(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function nee(t,e){var a,l,c,f;const n=od(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,i=N_(t,e),s=Ks((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),$c(s,e)}function RP(t,e){const n=Or(t,e==null?void 0:e.in),r=+$c(n,e)-+nee(n,e);return Math.round(r/EP)+1}function Di(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Bh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Di(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Di(n+1,2)},d(t,e){return Di(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Di(t.getHours()%12||12,e.length)},H(t,e){return Di(t.getHours(),e.length)},m(t,e){return Di(t.getMinutes(),e.length)},s(t,e){return Di(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Di(i,e.length)}},Nd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B3={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Bh.y(t,e)},Y:function(t,e,n,r){const i=N_(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Di(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Di(s,e.length)},R:function(t,e){const n=PP(t);return Di(n,e.length)},u:function(t,e){const n=t.getFullYear();return Di(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Di(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Di(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Bh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Di(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=RP(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Di(i,e.length)},I:function(t,e,n){const r=BP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Di(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Bh.d(t,e)},D:function(t,e,n){const r=tee(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Di(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Di(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Di(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Di(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Nd.noon:r===0?i=Nd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Nd.evening:r>=12?i=Nd.afternoon:r>=4?i=Nd.morning:i=Nd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Bh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Bh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Di(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Di(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Bh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Bh.s(t,e)},S:function(t,e){return Bh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return F3(r);case"XXXX":case"XX":return Rf(r);case"XXXXX":case"XXX":default:return Rf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return F3(r);case"xxxx":case"xx":return Rf(r);case"xxxxx":case"xxx":default:return Rf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+R3(r,":");case"OOOO":default:return"GMT"+Rf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+R3(r,":");case"zzzz":default:return"GMT"+Rf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Di(r,e.length)},T:function(t,e,n){return Di(+t,e.length)}};function R3(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Di(s,2)}function F3(t,e){return t%60===0?(t>0?"-":"+")+Di(Math.abs(t)/60,2):Rf(t,e)}function Rf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Di(Math.trunc(r/60),2),s=Di(r%60,2);return n+i+e+s}const j3=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},FP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ree=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return j3(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",j3(r,e)).replace("{{time}}",FP(i,e))},gb={p:FP,P:ree},iee=/^D+$/,see=/^Y+$/,oee=["D","DD","YY","YYYY"];function jP(t){return iee.test(t)}function zP(t){return see.test(t)}function mb(t,e,n){const r=aee(t,e,n);if(console.warn(r),oee.includes(t))throw new RangeError(r)}function aee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cee=/^'([^]*?)'?$/,hee=/''/g,fee=/[a-zA-Z]/;function dee(t,e,n){var f,p,y,m,C,S,T,O;const r=od(),i=(n==null?void 0:n.locale)??r.locale??NP,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(y=r.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((S=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((O=(T=r.locale)==null?void 0:T.options)==null?void 0:O.weekStartsOn)??0,a=Or(t,n==null?void 0:n.in);if(!MP(a))throw new RangeError("Invalid time value");let l=e.match(uee).map(D=>{const B=D[0];if(B==="p"||B==="P"){const z=gb[B];return z(D,i.formatLong)}return D}).join("").match(lee).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const B=D[0];if(B==="'")return{isToken:!1,value:pee(D)};if(B3[B])return{isToken:!0,value:D};if(B.match(fee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const B=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&zP(B)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&jP(B))&&mb(B,e,String(t));const z=B3[B[0]];return z(a,B,i.localize,c)}).join("")}function pee(t){const e=t.match(cee);return e?e[1].replace(hee,"'"):t}function gee(){return Object.assign({},od())}function mee(t,e){const n=Or(t,e==null?void 0:e.in).getDay();return n===0?7:n}function vee(t,e){const n=yee(e)?new e(0):Ks(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function yee(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const bee=10;class UP{constructor(){tt(this,"subPriority",0)}validate(e,n){return!0}}class _ee extends UP{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class wee extends UP{constructor(n,r){super();tt(this,"priority",bee);tt(this,"subPriority",-1);this.context=n||(i=>Ks(r,i))}set(n,r){return r.timestampIsSet?n:Ks(n,vee(n,this.context))}}class Pi{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new _ee(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class xee extends Pi{constructor(){super(...arguments);tt(this,"priority",140);tt(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ho={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Dc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function fo(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ns(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ic(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*gm+s*pm+o*KJ),rest:e.slice(n[0].length)}}function $P(t){return Ns(ho.anyDigitsSigned,t)}function Xs(t,e){switch(t){case 1:return Ns(ho.singleDigit,e);case 2:return Ns(ho.twoDigits,e);case 3:return Ns(ho.threeDigits,e);case 4:return Ns(ho.fourDigits,e);default:return Ns(new RegExp("^\\d{1,"+t+"}"),e)}}function Dv(t,e){switch(t){case 1:return Ns(ho.singleDigitSigned,e);case 2:return Ns(ho.twoDigitsSigned,e);case 3:return Ns(ho.threeDigitsSigned,e);case 4:return Ns(ho.fourDigitsSigned,e);default:return Ns(new RegExp("^-?\\d{1,"+t+"}"),e)}}function B_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function VP(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function HP(t){return t%400===0||t%4===0&&t%100!==0}class Lee extends Pi{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return fo(Xs(4,n),s);case"yo":return fo(i.ordinalNumber(n,{unit:"year"}),s);default:return fo(Xs(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=VP(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class Cee extends Pi{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return fo(Xs(4,n),s);case"Yo":return fo(i.ordinalNumber(n,{unit:"year"}),s);default:return fo(Xs(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=N_(n,s);if(i.isTwoDigitYear){const l=VP(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),$c(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),$c(n,s)}}class See extends Pi{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Dv(r==="R"?4:r.length,n)}set(n,r,i){const s=Ks(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),dp(s)}}class Eee extends Pi{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Dv(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Pee extends Pi{constructor(){super(...arguments);tt(this,"priority",120);tt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Xs(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class kee extends Pi{constructor(){super(...arguments);tt(this,"priority",120);tt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Xs(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Mee extends Pi{constructor(){super(...arguments);tt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);tt(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return fo(Ns(ho.month,n),s);case"MM":return fo(Xs(2,n),s);case"Mo":return fo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Aee extends Pi{constructor(){super(...arguments);tt(this,"priority",110);tt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return fo(Ns(ho.month,n),s);case"LL":return fo(Xs(2,n),s);case"Lo":return fo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Tee(t,e,n){const r=Or(t,n==null?void 0:n.in),i=RP(r,n)-e;return r.setDate(r.getDate()-i*7),Or(r,n==null?void 0:n.in)}class Oee extends Pi{constructor(){super(...arguments);tt(this,"priority",100);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Ns(ho.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Xs(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return $c(Tee(n,i,s),s)}}function Dee(t,e,n){const r=Or(t,n==null?void 0:n.in),i=BP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Iee extends Pi{constructor(){super(...arguments);tt(this,"priority",100);tt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Ns(ho.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Xs(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return dp(Dee(n,i))}}const Nee=[31,28,31,30,31,30,31,31,30,31,30,31],Bee=[31,29,31,30,31,30,31,31,30,31,30,31];class Ree extends Pi{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"subPriority",1);tt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Ns(ho.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Xs(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=HP(i),o=n.getMonth();return s?r>=1&&r<=Bee[o]:r>=1&&r<=Nee[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Fee extends Pi{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"subpriority",1);tt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Ns(ho.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Xs(r.length,n)}}validate(n,r){const i=n.getFullYear();return HP(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function R_(t,e,n){var p,y,m,C;const r=od(),i=(n==null?void 0:n.weekStartsOn)??((y=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((C=(m=r.locale)==null?void 0:m.options)==null?void 0:C.weekStartsOn)??0,s=Or(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,f=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return wy(s,f,n)}class jee extends Pi{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=R_(n,i,s),n.setHours(0,0,0,0),n}}class zee extends Pi{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return fo(Xs(r.length,n),o);case"eo":return fo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=R_(n,i,s),n.setHours(0,0,0,0),n}}class Uee extends Pi{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return fo(Xs(r.length,n),o);case"co":return fo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=R_(n,i,s),n.setHours(0,0,0,0),n}}function $ee(t,e,n){const r=Or(t,n==null?void 0:n.in),i=mee(r,n),s=e-i;return wy(r,s,n)}class Vee extends Pi{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Xs(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return fo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return fo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return fo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return fo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=$ee(n,i),n.setHours(0,0,0,0),n}}class Hee extends Pi{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(B_(i),0,0,0),n}}class Wee extends Pi{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(B_(i),0,0,0),n}}class Gee extends Pi{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(B_(i),0,0,0),n}}class qee extends Pi{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Ns(ho.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Xs(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Yee extends Pi{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Ns(ho.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Xs(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Zee extends Pi{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Ns(ho.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Xs(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Kee extends Pi{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Ns(ho.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Xs(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Xee extends Pi{constructor(){super(...arguments);tt(this,"priority",60);tt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Ns(ho.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Xs(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class Jee extends Pi{constructor(){super(...arguments);tt(this,"priority",50);tt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Ns(ho.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Xs(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Qee extends Pi{constructor(){super(...arguments);tt(this,"priority",30);tt(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return fo(Xs(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class ete extends Pi{constructor(){super(...arguments);tt(this,"priority",10);tt(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Ic(Dc.basicOptionalMinutes,n);case"XX":return Ic(Dc.basic,n);case"XXXX":return Ic(Dc.basicOptionalSeconds,n);case"XXXXX":return Ic(Dc.extendedOptionalSeconds,n);case"XXX":default:return Ic(Dc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Ks(n,n.getTime()-Ov(n)-i)}}class tte extends Pi{constructor(){super(...arguments);tt(this,"priority",10);tt(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Ic(Dc.basicOptionalMinutes,n);case"xx":return Ic(Dc.basic,n);case"xxxx":return Ic(Dc.basicOptionalSeconds,n);case"xxxxx":return Ic(Dc.extendedOptionalSeconds,n);case"xxx":default:return Ic(Dc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Ks(n,n.getTime()-Ov(n)-i)}}class nte extends Pi{constructor(){super(...arguments);tt(this,"priority",40);tt(this,"incompatibleTokens","*")}parse(n){return $P(n)}set(n,r,i){return[Ks(n,i*1e3),{timestampIsSet:!0}]}}class rte extends Pi{constructor(){super(...arguments);tt(this,"priority",20);tt(this,"incompatibleTokens","*")}parse(n){return $P(n)}set(n,r,i){return[Ks(n,i),{timestampIsSet:!0}]}}const ite={G:new xee,y:new Lee,Y:new Cee,R:new See,u:new Eee,Q:new Pee,q:new kee,M:new Mee,L:new Aee,w:new Oee,I:new Iee,d:new Ree,D:new Fee,E:new jee,e:new zee,c:new Uee,i:new Vee,a:new Hee,b:new Wee,B:new Gee,h:new qee,H:new Yee,K:new Zee,k:new Kee,m:new Xee,s:new Jee,S:new Qee,X:new ete,x:new tte,t:new nte,T:new rte},ste=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ote=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ate=/^'([^]*?)'?$/,lte=/''/g,ute=/\S/,cte=/[a-zA-Z]/;function hte(t,e,n,r){var T,O,D,B,z,H,J,Q;const i=()=>Ks((r==null?void 0:r.in)||n,NaN),s=gee(),o=(r==null?void 0:r.locale)??s.locale??NP,a=(r==null?void 0:r.firstWeekContainsDate)??((O=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:O.firstWeekContainsDate)??s.firstWeekContainsDate??((B=(D=s.locale)==null?void 0:D.options)==null?void 0:B.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((H=(z=r==null?void 0:r.locale)==null?void 0:z.options)==null?void 0:H.weekStartsOn)??s.weekStartsOn??((Q=(J=s.locale)==null?void 0:J.options)==null?void 0:Q.weekStartsOn)??0;if(!e)return t?i():Or(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},f=[new wee(r==null?void 0:r.in,n)],p=e.match(ote).map(V=>{const Y=V[0];if(Y in gb){const ge=gb[Y];return ge(V,o.formatLong)}return V}).join("").match(ste),y=[];for(let V of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&zP(V)&&mb(V,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&jP(V)&&mb(V,e,t);const Y=V[0],ge=ite[Y];if(ge){const{incompatibleTokens:$}=ge;if(Array.isArray($)){const se=y.find(X=>$.includes(X.token)||X.token===Y);if(se)throw new RangeError(`The format string mustn't contain \`${se.fullToken}\` and \`${V}\` at the same time`)}else if(ge.incompatibleTokens==="*"&&y.length>0)throw new RangeError(`The format string mustn't contain \`${V}\` and any other token at the same time`);y.push({token:Y,fullToken:V});const W=ge.run(t,V,o.match,c);if(!W)return i();f.push(W.setter),t=W.rest}else{if(Y.match(cte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");if(V==="''"?V="'":Y==="'"&&(V=fte(V)),t.indexOf(V)===0)t=t.slice(V.length);else return i()}}if(t.length>0&&ute.test(t))return i();const m=f.map(V=>V.priority).sort((V,Y)=>Y-V).filter((V,Y,ge)=>ge.indexOf(V)===Y).map(V=>f.filter(Y=>Y.priority===V).sort((Y,ge)=>ge.subPriority-Y.subPriority)).map(V=>V[0]);let C=Or(n,r==null?void 0:r.in);if(isNaN(+C))return i();const S={};for(const V of m){if(!V.validate(C,c))return i();const Y=V.set(C,S,c);Array.isArray(Y)?(C=Y[0],Object.assign(S,Y[1])):C=Y}return C}function fte(t){return t.match(ate)[1].replace(lte,"'")}function dte(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function pte(t,e){const n=Or(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function gte(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function mte(t,e){const n=()=>Ks(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=_te(t);let s;if(i.date){const c=wte(i.date,r);s=xte(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=Lte(i.time),isNaN(a)))return n();if(i.timezone){if(l=Cte(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),f=Or(0,e==null?void 0:e.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return Or(o+a+l,e==null?void 0:e.in)}const w0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},vte=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yte=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bte=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _te(t){const e={},n=t.split(w0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],w0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(w0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=w0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function wte(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function xte(t,e){if(e===null)return new Date(NaN);const n=t.match(vte);if(!n)return new Date(NaN);const r=!!n[4],i=Gp(n[1]),s=Gp(n[2])-1,o=Gp(n[3]),a=Gp(n[4]),l=Gp(n[5])-1;if(r)return Mte(e,a,l)?Ste(e,a,l):new Date(NaN);{const c=new Date(0);return!Pte(e,s,o)||!kte(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Gp(t){return t?parseInt(t):1}function Lte(t){const e=t.match(yte);if(!e)return NaN;const n=Q1(e[1]),r=Q1(e[2]),i=Q1(e[3]);return Ate(n,r,i)?n*gm+r*pm+i*1e3:NaN}function Q1(t){return t&&parseFloat(t.replace(",","."))||0}function Cte(t){if(t==="Z")return 0;const e=t.match(bte);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Tte(r,i)?n*(r*gm+i*pm):NaN}function Ste(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Ete=[31,null,31,30,31,30,31,31,30,31,30,31];function WP(t){return t%400===0||t%4===0&&t%100!==0}function Pte(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Ete[e]||(WP(t)?29:28))}function kte(t,e){return e>=1&&e<=(WP(t)?366:365)}function Mte(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Ate(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Tte(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Ote={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};sP._date.override({_id:"date-fns",formats:function(){return Ote},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Or(t):n==="string"&&(typeof e=="string"?t=hte(t,e,new Date,this.options):t=mte(t,this.options)),MP(t)?t.getTime():null},format:function(t,e){return dee(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return D_(t,e);case"second":return nQ(t,e);case"minute":return eQ(t,e);case"hour":return XJ(t,e);case"day":return wy(t,e);case"week":return rQ(t,e);case"month":return O_(t,e);case"quarter":return tQ(t,e);case"year":return iQ(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return I_(t,e);case"second":return fQ(t,e);case"minute":return uQ(t,e);case"hour":return lQ(t,e);case"day":return AP(t,e);case"week":return dQ(t,e);case"month":return DP(t,e);case"quarter":return hQ(t,e);case"year":return pQ(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return gte(t);case"minute":return pte(t);case"hour":return dte(t);case"day":return pb(t);case"week":return $c(t);case"isoWeek":return $c(t,{weekStartsOn:+n});case"month":return mQ(t);case"quarter":return gQ(t);case"year":return IP(t);default:return t}},endOf:function(t,e){switch(e){case"second":return xQ(t);case"minute":return _Q(t);case"hour":return yQ(t);case"day":return TP(t);case"week":return bQ(t);case"month":return OP(t);case"quarter":return wQ(t);case"year":return vQ(t);default:return t}}});const Dte={class:"container mx-auto px-4 py-8 min-h-full"},Ite={class:"mb-8"},Nte={key:0,class:"mb-6"},Bte={class:"flex gap-4"},Rte=["disabled"],Fte={key:0,value:""},jte=["value"],zte={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},Ute={class:"flex"},$te={class:"ml-3"},Vte={class:"text-sm font-medium text-red-800"},Hte={key:2,class:"mb-6 p-6 bg-gray-100 border border-gray-300 rounded-md text-center"},Wte={class:"flex flex-col items-center"},Gte={class:"text-gray-600 mb-4"},qte={key:0,class:"mt-2"},Yte={key:3,class:"mb-6"},Zte={class:"flex gap-4"},Kte=["disabled"],Xte={key:0,value:""},Jte={key:1,value:""},Qte=["value"],ene=["disabled"],tne={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},nne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},rne={class:"font-medium"},ine={class:"font-medium"},sne={class:"font-medium"},one={class:"text-gray-500"},ane={class:"font-medium"},lne={class:"font-medium"},une={class:"font-medium"},cne={class:"md:col-span-2 lg:col-span-3 flex items-center"},hne=["href"],fne={key:4,class:"mb-6"},dne={class:"border-b border-gray-200"},pne={class:"-mb-px flex space-x-8","aria-label":"Tabs"},gne=["onClick"],mne={key:5,class:"mb-8"},vne={class:"flex justify-between items-center mb-4"},yne={class:"text-sm text-gray-600"},bne={key:0,class:"flex items-center"},_ne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},wne={class:"bg-white rounded-lg shadow-md p-6"},xne={class:"text-4xl font-bold text-primary-600 mb-2"},Lne={class:"text-sm text-gray-600"},Cne={class:"bg-white rounded-lg shadow-md p-6"},Sne={class:"text-4xl font-bold text-primary-600 mb-2"},Ene={class:"mt-4"},Pne={class:"w-full bg-gray-200 rounded-full h-2.5"},kne={class:"bg-white rounded-lg shadow-md p-6"},Mne={class:"text-4xl font-bold text-primary-600 mb-2"},Ane={class:"text-sm text-gray-600"},Tne={class:"bg-white rounded-lg shadow-md p-6"},One={class:"text-4xl font-bold text-primary-600 mb-2"},Dne={class:"text-sm text-gray-600"},Ine={class:"bg-white rounded-lg shadow-md p-6"},Nne={class:"text-4xl font-bold text-primary-600 mb-2"},Bne={class:"text-sm text-gray-600"},Rne={class:"bg-white rounded-lg shadow-md p-6"},Fne={class:"text-4xl font-bold text-primary-600 mb-2"},jne={class:"text-sm text-gray-600"},zne={key:6,class:"mb-8"},Une={class:"flex justify-between items-center mb-4"},$ne={class:"text-sm text-gray-600"},Vne={class:"flex items-center"},Hne={key:0,class:"flex items-center mr-3"},Wne=["disabled"],Gne={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},qne={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},Yne=["value"],Zne={key:0,class:"mt-1 text-sm text-red-600"},Kne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Xne={class:"bg-white rounded-lg shadow-md p-6"},Jne={class:"chart-container"},Qne={class:"bg-white rounded-lg shadow-md p-6"},ere={class:"chart-container"},tre={class:"bg-white rounded-lg shadow-md p-6"},nre={class:"chart-container"},rre={class:"bg-white rounded-lg shadow-md p-6"},ire={class:"chart-container"},sre={class:"bg-white rounded-lg shadow-md p-6"},ore={class:"chart-container"},are={class:"bg-white rounded-lg shadow-md p-6"},lre={class:"chart-container"},ure=_s({__name:"MeteoView",setup(t){const e=ul(),n=po(),r=kt({}),i=kt(new Date),s=kt(""),o=kt([]),a=kt(""),l=kt([]),c=kt(null),f=kt(""),p=kt(""),y=kt(!1);rr(()=>{var ue;return((ue=n.user)==null?void 0:ue.user_type)||""});const m=rr(()=>n.isAdmin);let C=null;const S=rr(()=>!a.value||!o.value.length?null:o.value.find(ue=>ue.mac===a.value));function T(ue){return ue?ue.latitude&&ue.longitude&&ue.latitude!==0&&ue.longitude!==0:!1}function O(ue){return T(ue)?`${ue.latitude.toFixed(6)}, ${ue.longitude.toFixed(6)}`:""}function D(ue){if(!T(ue))return"#";const te=ue.latitude,Se=ue.longitude,Ve=ue.name||"Station météo";return require("@/utils/googleMapsLoader").getGoogleMapsSearchUrl(te,Se,Ve)}async function B(){try{f.value="";const ue={};m.value&&c.value&&(ue.entreprise=c.value);const te=await p1.getDevices(ue);let Se=[];if(te.data&&te.data.devices&&Array.isArray(te.data.devices)&&te.data.devices.length>0&&typeof te.data.devices[1]=="string"){let Ve=te.data.devices[1];f.value=Ve,console.warn("[fetchDevices] Message d'erreur API reçu:",f.value);return}if(te.data&&te.data.devices&&Array.isArray(te.data.devices))Se=te.data.devices;else if(Array.isArray(te.data))Se=te.data;else if(typeof te.data=="object"&&te.data!==null){for(const Ve in te.data)if(Array.isArray(te.data[Ve])){Se=te.data[Ve];break}}o.value=Se.filter(Ve=>Ve!==null&&typeof Ve=="object").map(Ve=>{var at,ot;const Xe=Ve.mac||Ve.imei;return{id:Ve.id,name:Ve.name||`Station ${Xe}`,mac:Xe,model:((at=Ve.stationtype)==null?void 0:at.split("_")[0])||"Inconnu",firmware_version:(ot=Ve.stationtype)!=null&&ot.includes("_V")?Ve.stationtype.split("_V")[1]:"1.0",timezone:Ve.date_zone_id||"UTC",created_at:Ve.createtime?new Date(Ve.createtime*1e3).toISOString():new Date().toISOString(),latitude:Ve.latitude||0,longitude:Ve.longitude||0}}),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(ue){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",ue),ue.response&&ue.response.data&&ue.response.data.error?f.value=ue.response.data.error:(f.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function z(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil sélectionné");return}f.value="",y.value=!0;const ue={mac:a.value};m.value&&c.value&&(ue.entreprise=c.value);const te=await p1.getRealTimeData(ue);let Se;te.data&&"data"in te.data?Se=te.data.data:te.data&&("outdoor"in te.data||"indoor"in te.data)?Se=te.data:(Se={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=Se,i.value=new Date,s.value=new Date().toLocaleString(),f.value=""}catch(ue){console.error("[fetchWeatherData] Erreur lors de la récupération des données météo:",ue),ue.response&&ue.response.data&&ue.response.data.error?f.value=ue.response.data.error:(f.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}finally{y.value=!1}}function H(ue){if(ue==null)return"0";const te=typeof ue=="string"?parseFloat(ue):ue;return isNaN(te)?"0":((te-32)*5/9).toFixed(1)}function J(ue){if(ue==null)return"0";const te=typeof ue=="string"?parseFloat(ue):ue;return isNaN(te)?"0":(te*1.60934).toFixed(1)}function Q(ue){if(ue==null)return"0";const te=typeof ue=="string"?parseFloat(ue):ue;return isNaN(te)?"0":(te*25.4).toFixed(1)}function V(ue){if(ue==null)return"0";const te=typeof ue=="string"?parseFloat(ue):ue;return isNaN(te)?"0":(te*33.8639).toFixed(1)}function Y(ue){if(!ue)return"N/A";const te=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],Se=Math.round(ue/22.5)%16;return te[Se]}function ge(ue){return ue?ue>0?"En hausse":"En baisse":"Stable"}async function $(){if(m.value)try{const ue=await ha.getUsers({role:"ENTREPRISE"});l.value=ue.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ue){console.error("Erreur lors de la récupération des entreprises:",ue),e.error("Erreur lors de la récupération des entreprises")}}async function W(){try{o.value=[],a.value="",r.value={},f.value="",Object.values(Ue).forEach(ue=>{try{ue.destroy()}catch(te){console.error("Erreur lors de la destruction d'un graphique:",te)}}),Ue={},await B()}catch(ue){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",ue),e.error("Erreur lors du changement d'entreprise")}}const se=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],X=kt("realtime"),U=kt("today"),R=kt("5min"),ee=kt(""),ie=kt(""),fe=()=>{const ue=new Date,te=new Date(ue);te.setDate(ue.getDate()-1),ee.value=te.toISOString().split("T")[0],ie.value=te.toISOString().split("T")[0]},me=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],Oe=rr(()=>{const ue=Ne(),te=new Date(ue.start),Se=new Date(ue.end);Se.setHours(23,59,59,999);const Ve=Math.abs(Se.getTime()-te.getTime()),Xe=Math.ceil(Ve/(1e3*60*60*24)),ot=Math.abs(new Date().getTime()-te.getTime()),dt=Math.ceil(ot/(1e3*60*60*24));return me.filter(zt=>Xe<=zt.maxDays&&dt<=zt.maxPastDays)});vi(U,ue=>{ue==="custom"&&fe(),!Oe.value.some(Se=>Se.value===R.value)&&Oe.value.length>0&&(R.value=Oe.value[0].value)}),vi([ee,ie],()=>{U.value==="custom"&&!Oe.value.some(te=>te.value===R.value)&&Oe.value.length>0&&(R.value=Oe.value[0].value)});const Z=kt(null),ae=kt(null),ce=kt(null),pe=kt(null),Le=kt(null),Pe=kt(null);let Ue={};const Ne=()=>{let ue=new Date,te=new Date;switch(U.value){case"today":ue.setHours(0,0,0,0);break;case"yesterday":ue.setDate(ue.getDate()-1),ue.setHours(0,0,0,0),te.setDate(te.getDate()-1),te.setHours(23,59,59,999);break;case"week":ue.setDate(ue.getDate()-7);break;case"month":ue.setDate(ue.getDate()-30);break;case"custom":ue=new Date(ee.value),te=new Date(ie.value);break}return{start:ue.toISOString().split("T")[0],end:te.toISOString().split("T")[0]}},nt=async()=>{try{if(pt.value)return;if(pt.value=!0,Oe.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),pt.value=!1;return}Oe.value.some(Ve=>Ve.value===R.value)||(R.value=Oe.value[0].value);const te=Ne(),Se={mac:a.value,start_date:te.start,end_date:te.end,cycle_type:R.value};m.value&&c.value&&(Se.entreprise=c.value);try{const Xe=(await p1.getHistoryData(Se)).data,at=[{type:"temp",ref:Z},{type:"humidity",ref:ae},{type:"pressure",ref:ce},{type:"wind",ref:pe},{type:"rain",ref:Le},{type:"solar",ref:Pe}];for(const ot of at)if(ot.ref.value){const dt=oe(Xe,ot.type);bt(ot.type,ot.ref.value,dt)}s.value=new Date().toLocaleString()}catch(Ve){console.error("[updateAllCharts] Erreur lors de la récupération des données:",Ve),e.error("Erreur lors de la récupération des données historiques")}finally{pt.value=!1}}catch(ue){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",ue),e.error("Erreur lors de la mise à jour des graphiques"),pt.value=!1}},pt=kt(!1),bt=(ue,te,Se)=>{try{if(Ue[ue]&&(Ue[ue].destroy(),delete Ue[ue]),!Se.datasets||!Se.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ue}`),Ue[ue]=new Oc(te,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let Ve="hour";R.value==="5min"||R.value==="30min"?Ve="hour":(R.value==="4hour"||R.value==="1day")&&(Ve="day");const Xe=Ne(),at=new Date(Xe.start),ot=new Date(Xe.end);ot.setHours(23,59,59,999);const dt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(zt){return zt.length>0?new Date(zt[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Ve,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:at.getTime(),max:ot.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:le(ue)},ticks:{callback:function(zt){const Rt=typeof zt=="string"?parseFloat(zt):zt;switch(ue){case"temp":return Rt.toFixed(1)+"°C";case"humidity":return Rt.toFixed(0)+"%";case"pressure":return Rt.toFixed(0)+" hPa";case"wind":case"rain":return Rt.toFixed(1)+(ue==="wind"?" km/h":" mm");case"solar":return Rt.toFixed(0)+" W/m²";default:return Rt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};Ue[ue]=new Oc(te,{type:"line",data:{datasets:Se.datasets||[]},options:dt})}catch(Ve){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${ue}:`,Ve)}},le=ue=>{switch(ue){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},oe=(ue,te)=>{var at,ot,dt,zt,Rt,Zt,Qt,pn,Sn,Ze,it,Je,$t,Kt,_n,gn,bn,Rn,mn;if(!ue)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${te}`),null;let Se;if("data"in ue)Se=ue.data;else if(te in ue)Se=ue;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${te}`),null;const Ve=[],Xe=(nn,cn,Nn,er)=>{if(!Array.isArray(nn)){console.warn(`[formatHistoryDataForChart] Les données pour ${cn} ne sont pas un tableau`);return}const ar=nn.map(zn=>{const Lr=parseFloat(String(zn.value));return{x:zn.time,y:er?er(Lr):Lr}}).filter(zn=>!isNaN(zn.y));ar.length>0&&Ve.push({label:cn,data:ar,borderColor:Nn,fill:!1,tension:.4})};switch(te){case"temp":(ot=(at=Se.outdoor)==null?void 0:at.temperature)!=null&&ot.list?Xe(Object.entries(Se.outdoor.temperature.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Température","#FF6384",nn=>(nn-32)*5/9):(dt=Se.outdoor)!=null&&dt.temperature&&Xe(Se.outdoor.temperature,"Température","#FF6384",nn=>(nn-32)*5/9);break;case"humidity":(Rt=(zt=Se.outdoor)==null?void 0:zt.humidity)!=null&&Rt.list?Xe(Object.entries(Se.outdoor.humidity.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Humidité","#36A2EB"):(Zt=Se.outdoor)!=null&&Zt.humidity&&Xe(Se.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(pn=(Qt=Se.pressure)==null?void 0:Qt.absolute)!=null&&pn.list?Xe(Object.entries(Se.pressure.absolute.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Pression","#4BC0C0",nn=>nn*33.8639):(Sn=Se.pressure)!=null&&Sn.absolute&&Xe(Se.pressure.absolute,"Pression","#4BC0C0",nn=>nn*33.8639);break;case"wind":(it=(Ze=Se.wind)==null?void 0:Ze.wind_speed)!=null&&it.list?(Xe(Object.entries(Se.wind.wind_speed.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Vitesse du vent","#FFCE56",nn=>nn*1.60934),(Je=Se.wind.wind_gust)!=null&&Je.list&&Xe(Object.entries(Se.wind.wind_gust.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Rafales","#FF9F40",nn=>nn*1.60934)):($t=Se.wind)!=null&&$t.wind_speed&&(Xe(Se.wind.wind_speed,"Vitesse du vent","#FFCE56",nn=>nn*1.60934),Se.wind.wind_gust&&Xe(Se.wind.wind_gust,"Rafales","#FF9F40",nn=>nn*1.60934));break;case"rain":(_n=(Kt=Se.rainfall)==null?void 0:Kt.daily)!=null&&_n.list?Xe(Object.entries(Se.rainfall.daily.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Précipitations journalières","#9966FF",nn=>nn*25.4):(gn=Se.rainfall)!=null&&gn.daily&&Xe(Se.rainfall.daily,"Précipitations journalières","#9966FF",nn=>nn*25.4);break;case"solar":(Rn=(bn=Se.solar_and_uvi)==null?void 0:bn.solar)!=null&&Rn.list?Xe(Object.entries(Se.solar_and_uvi.solar.list).map(([nn,cn])=>({time:parseInt(nn)*1e3,value:cn})),"Rayonnement solaire","#FF9F40"):(mn=Se.solar_and_uvi)!=null&&mn.solar&&Xe(Se.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return{datasets:Ve}};return Au(()=>{Object.values(Ue).forEach(ue=>ue.destroy())}),vi([U,R,ee,ie],()=>{X.value==="history"&&a.value&&nt()}),Zs(async()=>{const ue=[];m.value&&ue.push($()),await Promise.all(ue),await B(),C=window.setInterval(z,5*60*1e3)}),vi(c,async ue=>{m.value&&await B()}),vi(a,ue=>{ue?(z(),X.value==="history"&&nt()):r.value={}}),vi(X,ue=>{ue==="history"&&a.value&&nt()}),Au(()=>{C&&clearInterval(C)}),(ue,te)=>{var Ve,Xe,at,ot,dt,zt,Rt,Zt,Qt,pn,Sn,Ze,it,Je,$t,Kt,_n,gn,bn,Rn,mn,nn,cn,Nn,er,ar,zn,Lr,ns,ki,Js,Nt,He,Vt,Bn,Vn,Ln,Pt,wt;const Se=Fb("router-link");return Ae(),Fe("div",Dte,[P("div",Ite,[te[41]||(te[41]=P("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),m.value?(Ae(),Fe("div",Nte,[te[6]||(te[6]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),P("div",Bte,[jn(P("select",{"onUpdate:modelValue":te[0]||(te[0]=qt=>c.value=qt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:W},[l.value.length?Xt("",!0):(Ae(),Fe("option",Fte,"Chargement des entreprises...")),(Ae(!0),Fe(vn,null,nr(l.value,qt=>(Ae(),Fe("option",{key:qt.id,value:qt.id},jt(qt.company_name||`${qt.first_name} ${qt.last_name}`),9,jte))),128))],40,Rte),[[os,c.value]])])])):Xt("",!0),f.value?(Ae(),Fe("div",zte,[P("div",Ute,[te[7]||(te[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",$te,[P("h3",Vte,jt(f.value),1)])])])):Xt("",!0),f.value&&(f.value.includes("clés API")||f.value.includes("Ecowitt"))?(Ae(),Fe("div",Hte,[P("div",Wte,[te[9]||(te[9]=P("svg",{class:"h-12 w-12 text-gray-400 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),te[10]||(te[10]=P("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Configuration requise",-1)),P("p",Gte,jt(f.value),1),f.value.includes("ajouter dans la gestion")?(Ae(),Fe("div",qte,[Kr(Se,{to:"/users",class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:Nl(()=>te[8]||(te[8]=[Rr(" Configurer les clés API ")])),_:1})])):Xt("",!0)])])):Xt("",!0),!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt"))?(Ae(),Fe("div",Yte,[te[19]||(te[19]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),P("div",Zte,[jn(P("select",{"onUpdate:modelValue":te[1]||(te[1]=qt=>a.value=qt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||f.value)},[!o.value.length&&!f.value?(Ae(),Fe("option",Xte,"Chargement des stations...")):Xt("",!0),f.value?(Ae(),Fe("option",Jte,"Aucune station disponible")):Xt("",!0),(Ae(!0),Fe(vn,null,nr(o.value,qt=>(Ae(),Fe("option",{key:qt.mac,value:qt.mac},jt(qt.name)+" ("+jt(qt.model)+" - v"+jt(qt.firmware_version)+") ",9,Qte))),128))],8,Kte),[[os,a.value]]),P("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||f.value)}," Actualiser ",8,ene)]),S.value?(Ae(),Fe("div",tne,[te[18]||(te[18]=P("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),P("div",nne,[P("div",null,[te[11]||(te[11]=P("span",{class:"text-gray-500"},"Modèle:",-1)),P("p",rne,jt(S.value.model),1)]),P("div",null,[te[12]||(te[12]=P("span",{class:"text-gray-500"},"Version:",-1)),P("p",ine,jt(S.value.firmware_version),1)]),P("div",null,[te[13]||(te[13]=P("span",{class:"text-gray-500"},"ID:",-1)),P("p",sne,jt(S.value.id),1)]),P("div",null,[P("span",one,jt((Ve=S.value.mac)!=null&&Ve.includes(":")?"MAC:":"IMEI:"),1),P("p",ane,jt(S.value.mac),1)]),P("div",null,[te[14]||(te[14]=P("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),P("p",lne,jt(S.value.timezone),1)]),P("div",null,[te[15]||(te[15]=P("span",{class:"text-gray-500"},"Installation:",-1)),P("p",une,jt(new Date(S.value.created_at).toLocaleDateString()),1)]),P("div",cne,[te[17]||(te[17]=P("span",{class:"text-gray-500 mr-2"},"Position:",-1)),T(S.value)?(Ae(),Fe("a",{key:0,href:D(S.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[te[16]||(te[16]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),Rr(" "+jt(O(S.value)),1)],8,hne)):Xt("",!0)])])])):Xt("",!0)])):Xt("",!0),!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt"))?(Ae(),Fe("div",fne,[P("div",dne,[P("nav",pne,[(Ae(),Fe(vn,null,nr(se,qt=>P("button",{key:qt.id,onClick:wn=>X.value=qt.id,class:yi([X.value===qt.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},jt(qt.name),11,gne)),64))])])])):Xt("",!0),(!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt")))&&X.value==="realtime"?(Ae(),Fe("div",mne,[P("div",vne,[P("p",yne," Dernière mise à jour : "+jt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),y.value?(Ae(),Fe("div",bne,te[20]||(te[20]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P("span",{class:"text-primary-600"},"Chargement des données...",-1)]))):Xt("",!0)]),P("div",_ne,[P("div",wne,[te[21]||(te[21]=P("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),P("div",xne,jt(H((at=(Xe=r.value.outdoor)==null?void 0:Xe.temperature)==null?void 0:at.value))+"°C ",1),P("div",Lne," Min: "+jt(H(((dt=(ot=r.value.outdoor)==null?void 0:ot.temperature)==null?void 0:dt.min)||"0"))+"°C Max: "+jt(H(((Rt=(zt=r.value.outdoor)==null?void 0:zt.temperature)==null?void 0:Rt.max)||"0"))+"°C ",1)]),P("div",Cne,[te[22]||(te[22]=P("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),P("div",Sne,jt(((Qt=(Zt=r.value.outdoor)==null?void 0:Zt.humidity)==null?void 0:Qt.value)||"0")+"% ",1),P("div",Ene,[P("div",Pne,[P("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Fl({width:`${((Sn=(pn=r.value.outdoor)==null?void 0:pn.humidity)==null?void 0:Sn.value)||0}%`})},null,4)])])]),P("div",kne,[te[23]||(te[23]=P("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),P("div",Mne,jt(V((it=(Ze=r.value.pressure)==null?void 0:Ze.absolute)==null?void 0:it.value))+" hPa ",1),P("div",Ane," Tendance: "+jt(ge(($t=(Je=r.value.pressure)==null?void 0:Je.absolute)==null?void 0:$t.trend)),1)]),P("div",Tne,[te[25]||(te[25]=P("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),P("div",One,jt(J(((_n=(Kt=r.value.wind)==null?void 0:Kt.speed)==null?void 0:_n.value)||((bn=(gn=r.value.wind)==null?void 0:gn.wind_speed)==null?void 0:bn.value)))+" km/h ",1),P("div",Dne,[Rr(" Direction: "+jt(Y(((mn=(Rn=r.value.wind)==null?void 0:Rn.direction)==null?void 0:mn.value)||((cn=(nn=r.value.wind)==null?void 0:nn.wind_direction)==null?void 0:cn.value)))+" ",1),te[24]||(te[24]=P("br",null,null,-1)),Rr(" Rafales: "+jt(J(((er=(Nn=r.value.wind)==null?void 0:Nn.gust)==null?void 0:er.value)||((zn=(ar=r.value.wind)==null?void 0:ar.wind_gust)==null?void 0:zn.value)))+" km/h ",1)])]),P("div",Ine,[te[27]||(te[27]=P("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),P("div",Nne,jt(Q((ns=(Lr=r.value.rainfall)==null?void 0:Lr.daily)==null?void 0:ns.value))+" mm ",1),P("div",Bne,[Rr(" Taux: "+jt(Q(((Js=(ki=r.value.rainfall)==null?void 0:ki.rate)==null?void 0:Js.value)||((He=(Nt=r.value.rainfall)==null?void 0:Nt.rain_rate)==null?void 0:He.value)))+" mm/h ",1),te[26]||(te[26]=P("br",null,null,-1)),Rr(" Mensuel: "+jt(Q((Bn=(Vt=r.value.rainfall)==null?void 0:Vt.monthly)==null?void 0:Bn.value))+" mm ",1)])]),P("div",Rne,[te[28]||(te[28]=P("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),P("div",Fne,jt(((Ln=(Vn=r.value.solar_and_uvi)==null?void 0:Vn.solar)==null?void 0:Ln.value)||"0")+" W/m² ",1),P("div",jne," UV: "+jt(((wt=(Pt=r.value.solar_and_uvi)==null?void 0:Pt.uvi)==null?void 0:wt.value)||"0"),1)])])])):(!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt")))&&X.value==="history"?(Ae(),Fe("div",zne,[P("div",Une,[P("p",$ne," Dernière mise à jour : "+jt(s.value?s.value:"Jamais"),1),P("div",Vne,[pt.value?(Ae(),Fe("div",Hne,te[29]||(te[29]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P("span",{class:"text-sm text-primary-600"},"Chargement des données...",-1)]))):Xt("",!0),P("button",{onClick:nt,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||pt.value}," Actualiser ",8,Wne)])]),P("div",Gne,[P("div",null,[te[31]||(te[31]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),jn(P("select",{"onUpdate:modelValue":te[2]||(te[2]=qt=>U.value=qt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},te[30]||(te[30]=[uu('<option value="today" data-v-ad9826c9>Aujourd&#39;hui</option><option value="yesterday" data-v-ad9826c9>Hier</option><option value="week" data-v-ad9826c9>7 derniers jours</option><option value="month" data-v-ad9826c9>30 derniers jours</option><option value="custom" data-v-ad9826c9>Période personnalisée</option>',5)]),512),[[os,U.value]])]),U.value==="custom"?(Ae(),Fe("div",qne,[P("div",null,[te[32]||(te[32]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),jn(P("input",{type:"date","onUpdate:modelValue":te[3]||(te[3]=qt=>ee.value=qt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[fi,ee.value]])]),P("div",null,[te[33]||(te[33]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),jn(P("input",{type:"date","onUpdate:modelValue":te[4]||(te[4]=qt=>ie.value=qt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[fi,ie.value]])])])):Xt("",!0),P("div",null,[te[34]||(te[34]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),jn(P("select",{"onUpdate:modelValue":te[5]||(te[5]=qt=>R.value=qt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ae(!0),Fe(vn,null,nr(Oe.value,qt=>(Ae(),Fe("option",{key:qt.value,value:qt.value},jt(qt.label),9,Yne))),128))],512),[[os,R.value]]),p.value?(Ae(),Fe("div",Zne,jt(p.value),1)):Xt("",!0)])]),P("div",Kne,[P("div",Xne,[te[35]||(te[35]=P("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),P("div",Jne,[P("canvas",{ref_key:"tempChart",ref:Z},null,512)])]),P("div",Qne,[te[36]||(te[36]=P("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),P("div",ere,[P("canvas",{ref_key:"humidityChart",ref:ae},null,512)])]),P("div",tre,[te[37]||(te[37]=P("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),P("div",nre,[P("canvas",{ref_key:"pressureChart",ref:ce},null,512)])]),P("div",rre,[te[38]||(te[38]=P("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),P("div",ire,[P("canvas",{ref_key:"windChart",ref:pe},null,512)])]),P("div",sre,[te[39]||(te[39]=P("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),P("div",ore,[P("canvas",{ref_key:"rainChart",ref:Le},null,512)])]),P("div",are,[te[40]||(te[40]=P("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),P("div",lre,[P("canvas",{ref_key:"solarChart",ref:Pe},null,512)])])])])):Xt("",!0)])])}}}),cre=Vc(ure,[["__scopeId","data-v-ad9826c9"]]),hre={class:"settings-page max-w-xl mx-auto py-10 px-4 min-h-full"},fre={key:0,class:"mb-6"},dre={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},pre={class:"flex"},gre={class:"ml-3"},mre={class:"text-sm text-red-700"},vre={class:"bg-white shadow rounded-lg p-6"},yre=["disabled"],bre=["disabled"],_re={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wre={key:0,class:"text-green-600 mt-2"},xre=_s({__name:"ParametresView",setup(t){const e=kt(""),n=kt(""),r=kt(!1),i=kt("");Zs(async()=>{await s()});async function s(){r.value=!0,i.value="";try{const a=await M2.getGoogleMapsApiKey();a.data&&a.data.key_status==="configured"?e.value="••••••••••••••••••••••••••":e.value=""}catch(a){console.error("Erreur lors de la récupération de la clé API:",a),i.value="Impossible de récupérer la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}async function o(){if(!e.value){i.value="La clé API est requise.";return}r.value=!0,i.value="",n.value="";try{await M2.setGoogleMapsApiKey(e.value),n.value="Clé API sauvegardée avec succès.",setTimeout(()=>{n.value=""},3e3)}catch(a){console.error("Erreur lors de la sauvegarde de la clé API:",a),i.value="Impossible de sauvegarder la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}return(a,l)=>(Ae(),Fe("div",hre,[l[6]||(l[6]=P("h1",{class:"text-2xl font-bold mb-6"},"Paramètres de l'application",-1)),r.value?(Ae(),Fe("div",fre,l[1]||(l[1]=[uu('<div class="animate-pulse flex space-x-4" data-v-097ea248><div class="flex-1 space-y-4 py-1" data-v-097ea248><div class="h-4 bg-gray-200 rounded w-3/4" data-v-097ea248></div><div class="space-y-2" data-v-097ea248><div class="h-4 bg-gray-200 rounded" data-v-097ea248></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-097ea248></div></div></div></div>',1)]))):Xt("",!0),i.value?(Ae(),Fe("div",dre,[P("div",pre,[l[2]||(l[2]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",gre,[P("p",mre,jt(i.value),1)])])])):Xt("",!0),P("div",vre,[P("form",{onSubmit:Rl(o,["prevent"]),class:"space-y-4"},[P("div",null,[l[3]||(l[3]=P("label",{for:"google-maps-api-key",class:"block text-sm font-medium text-gray-700"},"Clé API Google Maps",-1)),jn(P("input",{id:"google-maps-api-key","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre clé API Google Maps",autocomplete:"off",disabled:r.value},null,8,yre),[[fi,e.value]])]),P("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value},[r.value?(Ae(),Fe("svg",_re,l[4]||(l[4]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Xt("",!0),l[5]||(l[5]=Rr(" Sauvegarder "))],8,bre),n.value?(Ae(),Fe("p",wre,jt(n.value),1)):Xt("",!0)],32)])]))}}),Lre=Vc(xre,[["__scopeId","data-v-097ea248"]]),GP=tB({history:ON("/"),routes:[{path:"/",name:"home",component:Q4,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/meteo",name:"meteo",component:cre,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:vG,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>su(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:i9,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>su(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>su(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:EF,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:Hq,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Q4,meta:{requiresAuth:!0,isMapRoute:!0}},{path:"/parametres",name:"parametres",component:Lre,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/ol",name:"openlayers",component:()=>su(()=>import("./MapView.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>su(()=>import("./NotFoundView.js"),[])}]});GP.beforeEach(async(t,e,n)=>{var a,l;const r=po();if(!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Cre(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function f(){if("serviceWorker"in navigator){if(a=await su(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=f(),c}const F_=cv(iF),qP=dI();F_.use(qP);F_.use(GP);const Sre=po(qP);window.INITIAL_STATE&&Sre.initialize(window.INITIAL_STATE);F_.mount("#app");Cre({immediate:!0,onRegistered(t){},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){}});export{nr as A,os as B,Tl as C,Fl as D,Lo as E,vn as F,Bs as G,Fd as H,Zo as I,Ni as J,uy as K,y2 as T,Vc as _,hu as a,P as b,Fe as c,_s as d,Xt as e,ln as f,Rr as g,jn as h,Ae as i,uu as j,Kr as k,Nl as l,Fb as m,yi as n,Zs as o,rB as p,ly as q,kt as r,Tb as s,jt as t,po as u,fi as v,Rl as w,vi as x,rr as y,Au as z};
